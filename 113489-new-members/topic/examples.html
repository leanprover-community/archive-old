---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/examples.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/examples.html">examples</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="245619635"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/examples/near/245619635" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex Zhang <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/examples.html#245619635">(Jul 11 2021 at 18:09)</a>:</h4>
<p>How can I close the following goal?<br>
<code>example (h :card I = 0) (i : I) : false := sorry</code></p>



<a name="245619861"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/examples/near/245619861" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/examples.html#245619861">(Jul 11 2021 at 18:14)</a>:</h4>
<p>We have <a href="https://leanprover-community.github.io/mathlib_docs/find/cardinal.ne_zero_iff_nonempty">docs#cardinal.ne_zero_iff_nonempty</a></p>



<a name="245619895"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/examples/near/245619895" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/examples.html#245619895">(Jul 11 2021 at 18:15)</a>:</h4>
<p>And even <a href="https://leanprover-community.github.io/mathlib_docs/find/cardinal.eq_zero_iff_is_empty">docs#cardinal.eq_zero_iff_is_empty</a></p>



<a name="245619967"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/examples/near/245619967" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/examples.html#245619967">(Jul 11 2021 at 18:16)</a>:</h4>
<p>Do you need more help using such lemmas?</p>



<a name="245621533"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/examples/near/245621533" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex Zhang <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/examples.html#245621533">(Jul 11 2021 at 18:56)</a>:</h4>
<p>Thanks and I will try!</p>



<a name="246130797"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/examples/near/246130797" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex Zhang <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/examples.html#246130797">(Jul 15 2021 at 17:47)</a>:</h4>
<p>This is simple to prove <code>example (a : ℚ): - ((λ i, a) : α → ℚ) = (λ i, -a) := by {ext, simp}</code>.<br>
But are there any built-in lemmas pushing or pulling scalars around maps?</p>



<a name="246131549"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/examples/near/246131549" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/examples.html#246131549">(Jul 15 2021 at 17:53)</a>:</h4>
<p>In this case, it turns out to be true definitionally:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">example</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">ℚ</span><span class="o">):</span> <span class="bp">-</span> <span class="o">((</span><span class="bp">λ</span> <span class="n">i</span><span class="o">,</span> <span class="n">a</span><span class="o">)</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">ℚ</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">i</span><span class="o">,</span> <span class="bp">-</span><span class="n">a</span><span class="o">)</span> <span class="o">:=</span> <span class="n">rfl</span>
</code></pre></div>



<a name="246134607"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/examples/near/246134607" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/examples.html#246134607">(Jul 15 2021 at 18:16)</a>:</h4>
<p><a href="https://leanprover-community.github.io/mathlib_docs/find/pi.neg_def">docs#pi.neg_def</a></p>



<a name="246134669"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/examples/near/246134669" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/examples.html#246134669">(Jul 15 2021 at 18:17)</a>:</h4>
<p>Hmm. We have <a href="https://leanprover-community.github.io/mathlib_docs/find/pi.add_def">docs#pi.add_def</a></p>



<a name="246134694"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/examples/near/246134694" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/examples.html#246134694">(Jul 15 2021 at 18:17)</a>:</h4>
<p>Want to PR that missing lemma?</p>



<a name="246134890"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/examples/near/246134890" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex Zhang <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/examples.html#246134890">(Jul 15 2021 at 18:19)</a>:</h4>
<p>Yes! (but perhaps not by me :) )</p>



<a name="246135112"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/examples/near/246135112" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex Zhang <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/examples.html#246135112">(Jul 15 2021 at 18:20)</a>:</h4>
<p>Let me know when things are PRed :)</p>



<a name="246135690"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/examples/near/246135690" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/examples.html#246135690">(Jul 15 2021 at 18:24)</a>:</h4>
<p>I'm guessing <a href="https://leanprover-community.github.io/mathlib_docs/find/pi.sub_def">docs#pi.sub_def</a> is also missing</p>



<a name="246135708"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/examples/near/246135708" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/examples.html#246135708">(Jul 15 2021 at 18:24)</a>:</h4>
<p>Weird</p>



<a name="246137085"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/examples/near/246137085" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/examples.html#246137085">(Jul 15 2021 at 18:36)</a>:</h4>
<p>I haven't checked -- would <code>@[simps]</code> be able to add these definition lemmas? I'm partly not sure if it would work at all, and partly not sure how it interacts with <code>to_additive</code>.</p>



<a name="246138082"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/examples/near/246138082" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/examples.html#246138082">(Jul 15 2021 at 18:44)</a>:</h4>
<p>Yes, but it would mark them simp which might not be helpful</p>



<a name="246433607"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/examples/near/246433607" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex Zhang <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/examples.html#246433607">(Jul 19 2021 at 09:29)</a>:</h4>
<p>How should I prove </p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">tactic</span>
<span class="kd">example</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="bp">↑</span><span class="o">(</span><span class="n">a.pred</span><span class="o">)</span> <span class="bp">=</span> <span class="bp">↑</span><span class="o">(</span><span class="n">a</span><span class="o">)</span> <span class="bp">-</span> <span class="o">(</span><span class="mi">1</span> <span class="o">:</span><span class="n">ℚ</span><span class="o">)</span> <span class="o">:=</span> <span class="kd">by</span> <span class="o">{</span><span class="gr">sorry</span><span class="o">}</span>
</code></pre></div>



<a name="246433696"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/examples/near/246433696" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/examples.html#246433696">(Jul 19 2021 at 09:30)</a>:</h4>
<p>Some sort of <a href="https://leanprover-community.github.io/mathlib_docs/find/nat.pred_eq_sub_one">docs#nat.pred_eq_sub_one</a> followed by <a href="https://leanprover-community.github.io/mathlib_docs/tactics.html#norm_cast">tactic#norm_cast</a>?</p>



<a name="246433704"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/examples/near/246433704" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/examples.html#246433704">(Jul 19 2021 at 09:30)</a>:</h4>
<p>(Note that this is only true for <code>0 &lt; a</code>)</p>



<a name="246433727"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/examples/near/246433727" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/examples.html#246433727">(Jul 19 2021 at 09:30)</a>:</h4>
<p><code>0.pred = 0</code></p>



<a name="246433780"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/examples/near/246433780" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/examples.html#246433780">(Jul 19 2021 at 09:31)</a>:</h4>
<p>In fact, there is just <a href="https://leanprover-community.github.io/mathlib_docs/find/nat.cast_pred">docs#nat.cast_pred</a></p>



<a name="246433783"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/examples/near/246433783" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/examples.html#246433783">(Jul 19 2021 at 09:31)</a>:</h4>
<p><span class="user-mention" data-user-id="408694">@Alex Zhang</span> you really want to move away from <code>nat.pred</code> and <code>nat.sub</code>. They are very poorly behaved functions mathematically, and you can always rewrite in terms of addition.</p>



<a name="246433805"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/examples/near/246433805" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/examples.html#246433805">(Jul 19 2021 at 09:31)</a>:</h4>
<p>Just like we don't use &gt; and &gt;= because we can rewrite in terms of &lt; and &lt;=.</p>



<a name="246434199"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/examples/near/246434199" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex Zhang <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/examples.html#246434199">(Jul 19 2021 at 09:36)</a>:</h4>
<p>I guess they are not provable actually as Eric pointed out.</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">example</span> <span class="o">:</span> <span class="o">(</span><span class="n">nat.pred</span> <span class="mi">0</span><span class="o">)</span> <span class="bp">=</span> <span class="mi">0</span> <span class="o">:=</span> <span class="n">rfl</span>
<span class="kd">example</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">-</span> <span class="o">(</span><span class="mi">1</span> <span class="o">:</span><span class="n">ℚ</span><span class="o">)</span> <span class="bp">=</span> <span class="bp">-</span><span class="mi">1</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">simp</span>
</code></pre></div>



<a name="246434230"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/examples/near/246434230" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/examples.html#246434230">(Jul 19 2021 at 09:37)</a>:</h4>
<p>Right, but the corresponding addition versions are true and provable.</p>



<a name="246434650"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/examples/near/246434650" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex Zhang <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/examples.html#246434650">(Jul 19 2021 at 09:42)</a>:</h4>
<p>I unfortunately encountered <code>pred</code> as I used <code>finset.card_erase_of_mem</code></p>



<a name="246434674"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/examples/near/246434674" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/examples.html#246434674">(Jul 19 2021 at 09:42)</a>:</h4>
<p>But in that situation you can prove that you're not taking pred of 0</p>



<a name="246434691"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/examples/near/246434691" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/examples.html#246434691">(Jul 19 2021 at 09:42)</a>:</h4>
<p>there are other card_erase lemmas that don't use pred I think</p>



<a name="246434845"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/examples/near/246434845" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/examples.html#246434845">(Jul 19 2021 at 09:44)</a>:</h4>
<p>looks like most users just use something along the lines of <code>rw [finset.card_erase_of_mem, nat.pred_succ]</code></p>



<a name="246434884"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/examples/near/246434884" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex Zhang <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/examples.html#246434884">(Jul 19 2021 at 09:45)</a>:</h4>
<p>I am just rewriting </p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">finset.card_erase_of_mem'</span> <span class="o">[</span><span class="n">decidable_eq</span> <span class="n">α</span><span class="o">]</span> <span class="o">{</span><span class="n">a</span> <span class="o">:</span> <span class="n">α</span><span class="o">}</span> <span class="o">{</span><span class="n">s</span> <span class="o">:</span> <span class="n">finset</span> <span class="n">α</span><span class="o">}</span> <span class="o">:</span>
  <span class="n">a</span> <span class="bp">∈</span> <span class="n">s</span> <span class="bp">→</span> <span class="n">finset.card</span> <span class="o">(</span><span class="n">finset.erase</span> <span class="n">s</span> <span class="n">a</span><span class="o">)</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">=</span> <span class="n">finset.card</span> <span class="n">s</span> <span class="o">:=</span>
</code></pre></div>



<a name="246434918"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/examples/near/246434918" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/examples.html#246434918">(Jul 19 2021 at 09:45)</a>:</h4>
<p>This is a better lemma because it's a stronger statement.</p>



<a name="246434973"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/examples/near/246434973" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/examples.html#246434973">(Jul 19 2021 at 09:46)</a>:</h4>
<p>It's not a good rewrite lemma though</p>



<a name="246434978"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/examples/near/246434978" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/examples.html#246434978">(Jul 19 2021 at 09:46)</a>:</h4>
<p>what's the <a href="https://en.wikipedia.org/wiki/XY_problem">#xy</a> here? How did you get here</p>



<a name="246435403"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/examples/near/246435403" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex Zhang <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/examples.html#246435403">(Jul 19 2021 at 09:51)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110049">Mario Carneiro</span> <a href="#narrow/stream/113489-new-members/topic/examples/near/246434973">said</a>:</p>
<blockquote>
<p>It's not a good rewrite lemma though</p>
</blockquote>
<p>perhaps change the direction?</p>



<a name="246435423"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/examples/near/246435423" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex Zhang <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/examples.html#246435423">(Jul 19 2021 at 09:51)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110049">Mario Carneiro</span> <a href="#narrow/stream/113489-new-members/topic/examples/near/246434978">said</a>:</p>
<blockquote>
<p>what's the <a href="https://en.wikipedia.org/wiki/XY_problem">#xy</a> here? How did you get here</p>
</blockquote>
<p>I am proving</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">algebra.big_operators</span>
<span class="kn">import</span> <span class="n">data.fintype.card</span>
<span class="kn">import</span> <span class="n">data.finset.basic</span>

<span class="n">open_locale</span> <span class="n">big_operators</span>

<span class="kd">variables</span> <span class="o">{</span><span class="n">I</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">fintype</span> <span class="n">I</span><span class="o">]</span> <span class="o">[</span><span class="n">decidable_eq</span> <span class="n">I</span><span class="o">]</span>
<span class="kd">def</span> <span class="n">fn</span> <span class="o">:</span> <span class="n">I</span> <span class="bp">→</span> <span class="n">I</span> <span class="bp">→</span> <span class="n">ℚ</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">i</span> <span class="n">j</span><span class="o">,</span> <span class="n">ite</span> <span class="o">(</span><span class="n">i</span> <span class="bp">=</span> <span class="n">j</span><span class="o">)</span> <span class="mi">0</span> <span class="mi">1</span>
<span class="kd">lemma</span> <span class="n">eg</span> <span class="o">(</span><span class="n">j</span> <span class="o">:</span> <span class="n">I</span><span class="o">)</span> <span class="o">:</span> <span class="bp">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="n">I</span><span class="o">),</span> <span class="o">(</span><span class="n">fn</span> <span class="n">i</span> <span class="n">j</span><span class="o">)</span> <span class="bp">=</span> <span class="n">fintype.card</span> <span class="n">I</span> <span class="bp">-</span> <span class="mi">1</span> <span class="o">:=</span>
<span class="kd">by</span> <span class="o">{</span><span class="n">simp</span> <span class="o">[</span><span class="n">fn</span><span class="o">,</span> <span class="n">finset.sum_ite</span><span class="o">],</span> <span class="n">simp</span> <span class="o">[</span><span class="n">finset.filter_ne'</span><span class="o">],</span>
  <span class="n">simp</span> <span class="o">[</span><span class="n">finset.card_erase_of_mem</span><span class="o">],</span><span class="gr">sorry</span><span class="o">}</span>
</code></pre></div>



<a name="246435531"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/examples/near/246435531" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/examples.html#246435531">(Jul 19 2021 at 09:52)</a>:</h4>
<p>you have a <code>-</code> in the theorem statement</p>



<a name="246435632"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/examples/near/246435632" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/examples.html#246435632">(Jul 19 2021 at 09:53)</a>:</h4>
<p>how about writing it as <code>(∑ (i : I), fn i j) + 1 = fintype.card I</code> instead</p>



<a name="246436079"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/examples/near/246436079" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex Zhang <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/examples.html#246436079">(Jul 19 2021 at 09:58)</a>:</h4>
<p>It will not be super helpful</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">eg</span> <span class="o">(</span><span class="n">j</span> <span class="o">:</span> <span class="n">I</span><span class="o">)</span> <span class="o">:</span> <span class="bp">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="n">I</span><span class="o">),</span> <span class="o">(</span><span class="n">fn</span> <span class="n">i</span> <span class="n">j</span><span class="o">)</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">=</span> <span class="n">fintype.card</span> <span class="n">I</span> <span class="o">:=</span>
<span class="kd">by</span> <span class="o">{</span><span class="n">simp</span> <span class="o">[</span><span class="n">fn</span><span class="o">,</span> <span class="n">finset.sum_ite</span><span class="o">],</span> <span class="n">simp</span> <span class="o">[</span><span class="n">finset.filter_ne'</span><span class="o">],</span>
  <span class="n">simp</span> <span class="o">[</span><span class="n">finset.card_erase_of_mem</span><span class="o">],</span><span class="gr">sorry</span><span class="o">}</span>
</code></pre></div>
<p>I have got around this by writing an "add" version for <code>finset.card_erase_of_mem</code>, which is easy.</p>



<a name="247183017"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/examples/near/247183017" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex Zhang <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/examples.html#247183017">(Jul 26 2021 at 09:59)</a>:</h4>
<p>(deleted)</p>



<a name="247183477"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/examples/near/247183477" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/examples.html#247183477">(Jul 26 2021 at 10:04)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">tactic</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">∣</span> <span class="mi">4</span><span class="o">)</span> <span class="o">(</span><span class="n">h₁</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≠</span> <span class="mi">1</span><span class="o">)</span> <span class="o">(</span><span class="n">h₂</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≠</span> <span class="mi">2</span><span class="o">)</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">=</span> <span class="mi">4</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="k">have</span> <span class="n">h2</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="mi">4</span> <span class="o">:=</span> <span class="n">nat.le_of_dvd</span> <span class="n">dec_trivial</span> <span class="n">h</span><span class="o">,</span>
  <span class="n">interval_cases</span> <span class="n">a</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">revert</span> <span class="n">h</span><span class="o">,</span> <span class="n">norm_num</span> <span class="o">},</span>
  <span class="o">{</span> <span class="n">revert</span> <span class="n">h₁</span><span class="o">,</span> <span class="n">norm_num</span> <span class="o">},</span>
  <span class="o">{</span> <span class="n">revert</span> <span class="n">h₂</span><span class="o">,</span> <span class="n">norm_num</span> <span class="o">},</span>
  <span class="o">{</span> <span class="n">revert</span> <span class="n">h</span><span class="o">,</span> <span class="n">norm_num</span> <span class="o">}</span>
<span class="kd">end</span>
</code></pre></div>



<a name="247183543"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/examples/near/247183543" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/examples.html#247183543">(Jul 26 2021 at 10:06)</a>:</h4>
<p>Even better:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">tactic</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">∣</span> <span class="mi">4</span><span class="o">)</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≠</span> <span class="mi">1</span> <span class="bp">→</span> <span class="n">a</span> <span class="bp">≠</span> <span class="mi">2</span> <span class="bp">→</span> <span class="n">a</span> <span class="bp">=</span> <span class="mi">4</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="k">have</span> <span class="n">h2</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="mi">4</span> <span class="o">:=</span> <span class="n">nat.le_of_dvd</span> <span class="n">dec_trivial</span> <span class="n">h</span><span class="o">,</span>
  <span class="n">revert</span> <span class="n">h</span><span class="o">,</span>
  <span class="n">interval_cases</span> <span class="n">a</span><span class="bp">;</span>
  <span class="n">norm_num</span><span class="o">,</span>
<span class="kd">end</span>
</code></pre></div>



<a name="247183608"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/examples/near/247183608" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex Zhang <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/examples.html#247183608">(Jul 26 2021 at 10:06)</a>:</h4>
<p>Many thanks, Kevin!</p>



<a name="247183702"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/examples/near/247183702" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex Zhang <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/examples.html#247183702">(Jul 26 2021 at 10:07)</a>:</h4>
<p>I didn't know <code>interval_cases</code> before</p>



<a name="247229567"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/examples/near/247229567" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex Zhang <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/examples.html#247229567">(Jul 26 2021 at 16:50)</a>:</h4>
<p>How can I prove that the <code>card</code> of a field is <code>&gt;= 1</code>?</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">tactic.gptf</span>
<span class="kn">import</span> <span class="n">data.fintype.card</span>
<span class="kn">import</span> <span class="n">field_theory.finite.basic</span>

<span class="kd">variables</span> <span class="o">{</span><span class="n">F</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">field</span> <span class="n">F</span><span class="o">]</span> <span class="o">[</span><span class="n">fintype</span> <span class="n">F</span><span class="o">]</span> <span class="o">[</span><span class="n">decidable_eq</span> <span class="n">F</span><span class="o">]</span> <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span> <span class="o">[</span><span class="n">char_p</span> <span class="n">F</span> <span class="n">p</span><span class="o">]</span>

<span class="kn">open</span> <span class="n">fintype</span>

<span class="kd">example</span> <span class="o">:</span> <span class="mi">1</span> <span class="bp">≤</span> <span class="n">card</span> <span class="n">F</span> <span class="o">:=</span> <span class="kd">by</span> <span class="gr">sorry</span>
</code></pre></div>



<a name="247229837"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/examples/near/247229837" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex Zhang <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/examples.html#247229837">(Jul 26 2021 at 16:53)</a>:</h4>
<p>I got it! <code>example : 1 ≤ card F := fintype.card_pos_iff.mpr ⟨1⟩</code></p>



<a name="248492385"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/examples/near/248492385" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex Zhang <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/examples.html#248492385">(Aug 05 2021 at 15:19)</a>:</h4>
<p>Is there a way to improve <code>tauto!</code> a little bit such that it can close goals like</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">tactic</span>
<span class="kd">example</span> <span class="o">{</span><span class="n">α</span><span class="o">}</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">α</span><span class="o">):</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">b</span> <span class="bp">∧</span> <span class="n">b</span> <span class="bp">=</span> <span class="n">c</span> <span class="bp">∨</span> <span class="bp">¬</span><span class="n">a</span> <span class="bp">=</span> <span class="n">b</span> <span class="bp">∧</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">c</span> <span class="bp">↔</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">c</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">tauto</span><span class="bp">!</span>
</code></pre></div>
<p>or is there any other tactic(s) that are able to close this goal?<br>
I noticed <code>tauto {closer := tac}</code> in <a href="https://leanprover-community.github.io/mathlib_docs/tactics.html#tautology">https://leanprover-community.github.io/mathlib_docs/tactics.html#tautology</a>. But not sure how to use this feature.</p>



<a name="248493112"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/examples/near/248493112" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/examples.html#248493112">(Aug 05 2021 at 15:24)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">tactic</span>
<span class="kd">example</span> <span class="o">{</span><span class="n">α</span><span class="o">}</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">α</span><span class="o">):</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">b</span> <span class="bp">∧</span> <span class="n">b</span> <span class="bp">=</span> <span class="n">c</span> <span class="bp">∨</span> <span class="bp">¬</span><span class="n">a</span> <span class="bp">=</span> <span class="n">b</span> <span class="bp">∧</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">c</span> <span class="bp">↔</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">c</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">by_cases</span> <span class="n">h</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">b</span><span class="bp">;</span>
  <span class="n">simp</span> <span class="o">[</span><span class="n">h</span><span class="o">],</span>
<span class="kd">end</span>
</code></pre></div>
<p>I am a bit surprised that <code>tauto!</code> doesn't close this.</p>



<a name="248493282"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/examples/near/248493282" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/examples.html#248493282">(Aug 05 2021 at 15:25)</a>:</h4>
<p>Oh, I guess <code>tauto</code> just does plain logic, and this proof needs transitivity of =.</p>



<a name="248493352"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/examples/near/248493352" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex Zhang <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/examples.html#248493352">(Aug 05 2021 at 15:26)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110038">Kevin Buzzard</span> <a href="#narrow/stream/113489-new-members/topic/examples/near/248493282">said</a>:</p>
<blockquote>
<p>Oh, I guess <code>tauto</code> just does plain logic, and this proof needs transitivity of =.</p>
</blockquote>
<p>Exactly!</p>



<a name="248493401"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/examples/near/248493401" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex Zhang <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/examples.html#248493401">(Aug 05 2021 at 15:26)</a>:</h4>
<p>It seems that <code>tauto {closer := tac}</code> is able to improve it, but not quite sure about this.</p>



<a name="248493554"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/examples/near/248493554" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/examples.html#248493554">(Aug 05 2021 at 15:27)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">tactic</span>

<span class="kd">meta</span> <span class="kd">def</span> <span class="n">tidytauto</span> <span class="o">:=</span> <span class="bp">`</span><span class="o">[</span><span class="n">tidy</span><span class="o">,</span> <span class="n">tauto</span><span class="bp">!</span><span class="o">]</span>

<span class="kd">example</span> <span class="o">{</span><span class="n">α</span><span class="o">}</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">α</span><span class="o">):</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">b</span> <span class="bp">∧</span> <span class="n">b</span> <span class="bp">=</span> <span class="n">c</span> <span class="bp">∨</span> <span class="bp">¬</span><span class="n">a</span> <span class="bp">=</span> <span class="n">b</span> <span class="bp">∧</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">c</span> <span class="bp">↔</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">c</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">tidytauto</span><span class="o">,</span>
<span class="kd">end</span>
</code></pre></div>



<a name="248493908"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/examples/near/248493908" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex Zhang <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/examples.html#248493908">(Aug 05 2021 at 15:30)</a>:</h4>
<p>I didn't know this trick for combining tactics.</p>



<a name="248494159"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/examples/near/248494159" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/examples.html#248494159">(Aug 05 2021 at 15:32)</a>:</h4>
<p>it makes for unreadable code so it's not really used much in practice.</p>



<a name="248494759"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/examples/near/248494759" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex Zhang <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/examples.html#248494759">(Aug 05 2021 at 15:37)</a>:</h4>
<p>How can I make this a local or private definition?</p>



<a name="248495201"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/examples/near/248495201" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex Zhang <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/examples.html#248495201">(Aug 05 2021 at 15:40)</a>:</h4>
<p>and why isn't <code>meta def tidytauto := </code>[ tauto!, tidy]` able to close the goal?</p>



<a name="248495385"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/examples/near/248495385" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/examples.html#248495385">(Aug 05 2021 at 15:41)</a>:</h4>
<p>because <code>tauto!</code> fails (rather than succeeding and leaving two goals) and <code>tidy</code> would only work on one goal.</p>



<a name="248495499"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/examples/near/248495499" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/examples.html#248495499">(Aug 05 2021 at 15:42)</a>:</h4>
<p>The answer to your question is simply that <code>tauto!, tidy</code> does not close the goal. You can see the errors yourself.</p>



<a name="248496091"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/examples/near/248496091" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex Zhang <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/examples.html#248496091">(Aug 05 2021 at 15:46)</a>:</h4>
<p>Because <code>tauto!</code> is a finishing tactic, so doesn't <code>tidy</code> actually do anything in <code>tauto!, tidy</code>?</p>



<a name="248510929"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/examples/near/248510929" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Horatiu Cheval <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/examples.html#248510929">(Aug 05 2021 at 17:43)</a>:</h4>
<p>I always thought such things like <code>tidytauto</code> should be in the <code>tactic.interactive</code> namespace. Why isn't it the case? It seems all my rudimentary knowledge about tactics is wrong :)</p>



<a name="250296659"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/examples/near/250296659" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex Zhang <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/examples.html#250296659">(Aug 22 2021 at 22:37)</a>:</h4>
<p>How can I prove that</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">field_theory.finite.basic</span>
<span class="kd">example</span> <span class="o">{</span><span class="n">F</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">fintype</span> <span class="n">F</span><span class="o">]</span> <span class="o">[</span><span class="n">has_zero</span> <span class="n">F</span><span class="o">]</span> <span class="o">[</span><span class="n">decidable_eq</span> <span class="n">F</span><span class="o">]</span> <span class="o">:</span>
<span class="n">fintype.card</span> <span class="o">{</span><span class="n">a</span> <span class="o">:</span> <span class="n">F</span> <span class="bp">//</span> <span class="n">a</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">}</span> <span class="bp">=</span> <span class="mi">1</span> <span class="o">:=</span> <span class="gr">sorry</span>
</code></pre></div>



<a name="250296807"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/examples/near/250296807" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/examples.html#250296807">(Aug 22 2021 at 22:40)</a>:</h4>
<p><a href="https://leanprover-community.github.io/mathlib_docs/find/fintype.card_eq_one_iff">docs#fintype.card_eq_one_iff</a></p>



<a name="250296822"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/examples/near/250296822" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/examples.html#250296822">(Aug 22 2021 at 22:40)</a>:</h4>
<p>actually, <code>simp</code> does it - did you even try that?</p>



<a name="250297082"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/examples/near/250297082" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex Zhang <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/examples.html#250297082">(Aug 22 2021 at 22:47)</a>:</h4>
<p>I don't think <code>simp</code> itself will do. I tried <code>simp</code>.</p>



<a name="250297123"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/examples/near/250297123" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex Zhang <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/examples.html#250297123">(Aug 22 2021 at 22:48)</a>:</h4>
<p><code>simp [fintype.card_eq_one_iff]</code> closes the goal!</p>



<a name="250297998"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/examples/near/250297998" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/examples.html#250297998">(Aug 22 2021 at 23:12)</a>:</h4>
<p>Simp works on my local machine. Are uou on the latest mathlib?</p>



<a name="250298199"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/examples/near/250298199" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex Zhang <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/examples.html#250298199">(Aug 22 2021 at 23:18)</a>:</h4>
<p>No. Thanks for letting me know this! :)</p>



<a name="250477462"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/examples/near/250477462" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex Zhang <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/examples.html#250477462">(Aug 24 2021 at 12:34)</a>:</h4>
<p>Is "<code>b⁻¹ *_</code> is an equivalence for nonzero <code> b </code> in a field " established in mathib?</p>



<a name="250478187"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/examples/near/250478187" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/examples.html#250478187">(Aug 24 2021 at 12:40)</a>:</h4>
<p>I don't think so, but here's a quick bit of code:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">@[simps]</span>
<span class="kd">def</span> <span class="n">units.mul_equiv</span> <span class="o">{</span><span class="n">M</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">monoid</span> <span class="n">M</span><span class="o">]</span> <span class="o">(</span><span class="n">u</span> <span class="o">:</span> <span class="n">units</span> <span class="n">M</span><span class="o">)</span> <span class="o">:</span> <span class="n">M</span> <span class="bp">≃</span> <span class="n">M</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">to_fun</span> <span class="o">:=</span> <span class="o">(</span><span class="bp">*</span><span class="o">)</span> <span class="n">u</span><span class="o">,</span>
  <span class="n">inv_fun</span> <span class="o">:=</span> <span class="o">(</span><span class="bp">*</span><span class="o">)</span> <span class="bp">↑</span><span class="n">u</span><span class="bp">⁻¹</span><span class="o">,</span>
  <span class="n">left_inv</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">x</span><span class="o">,</span> <span class="kd">by</span> <span class="n">simp</span><span class="o">,</span>
  <span class="n">right_inv</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">x</span><span class="o">,</span> <span class="kd">by</span> <span class="n">simp</span> <span class="o">}</span>

<span class="kd">@[simps]</span>
<span class="kd">def</span> <span class="n">group_with_zero.nonzero_mul_equiv</span> <span class="o">{</span><span class="n">G</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">group_with_zero</span> <span class="n">G</span><span class="o">]</span> <span class="o">(</span><span class="n">b</span> <span class="o">:</span> <span class="n">G</span><span class="o">)</span> <span class="o">(</span><span class="n">hb</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≠</span> <span class="mi">0</span><span class="o">)</span> <span class="o">:</span> <span class="n">G</span> <span class="bp">≃</span> <span class="n">G</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">units.mk0</span> <span class="n">b</span> <span class="n">hb</span><span class="o">)</span><span class="bp">.</span><span class="n">mul_equiv</span>
</code></pre></div>



<a name="250478823"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/examples/near/250478823" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/examples.html#250478823">(Aug 24 2021 at 12:45)</a>:</h4>
<p>In particular, these are linear equivs if you have an algebra structure:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="bp">...</span>
<span class="kd">@[simps]</span>
<span class="kd">def</span> <span class="n">units.mul_lequiv</span> <span class="o">{</span><span class="n">R</span> <span class="n">A</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">comm_semiring</span> <span class="n">R</span><span class="o">]</span> <span class="o">[</span><span class="n">semiring</span> <span class="n">A</span><span class="o">]</span> <span class="o">[</span><span class="n">algebra</span> <span class="n">R</span> <span class="n">A</span><span class="o">]</span> <span class="o">(</span><span class="n">u</span> <span class="o">:</span> <span class="n">units</span> <span class="n">A</span><span class="o">)</span> <span class="o">:</span> <span class="n">A</span> <span class="bp">≃ₗ</span><span class="o">[</span><span class="n">R</span><span class="o">]</span> <span class="n">A</span> <span class="o">:=</span>
<span class="o">{</span> <span class="bp">..</span> <span class="n">u.mul_equiv</span><span class="o">,</span>
  <span class="bp">..</span> <span class="n">algebra.lmul</span> <span class="n">R</span> <span class="n">A</span> <span class="n">u</span> <span class="o">}</span>

<span class="kd">@[simps]</span>
<span class="kd">def</span> <span class="n">group_with_zero.nonzero_mul_lequiv</span> <span class="o">{</span><span class="n">R</span> <span class="n">F</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">comm_semiring</span> <span class="n">R</span><span class="o">]</span> <span class="o">[</span><span class="n">field</span> <span class="n">F</span><span class="o">]</span> <span class="o">[</span><span class="n">algebra</span> <span class="n">R</span> <span class="n">F</span><span class="o">]</span>
  <span class="o">(</span><span class="n">b</span> <span class="o">:</span> <span class="n">F</span><span class="o">)</span> <span class="o">(</span><span class="n">hb</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≠</span> <span class="mi">0</span><span class="o">)</span> <span class="o">:</span> <span class="n">F</span> <span class="bp">≃ₗ</span><span class="o">[</span><span class="n">R</span><span class="o">]</span> <span class="n">F</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">units.mk0</span> <span class="n">b</span> <span class="n">hb</span><span class="o">)</span><span class="bp">.</span><span class="n">mul_lequiv</span>
</code></pre></div>



<a name="250490807"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/examples/near/250490807" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/examples.html#250490807">(Aug 24 2021 at 14:13)</a>:</h4>
<p><a href="https://leanprover-community.github.io/mathlib_docs/find/equiv.mul_left">docs#equiv.mul_left</a>, <a href="https://leanprover-community.github.io/mathlib_docs/find/equiv.mul_left'">docs#equiv.mul_left'</a>?</p>



<a name="250491364"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/examples/near/250491364" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/examples.html#250491364">(Aug 24 2021 at 14:17)</a>:</h4>
<p>That's weird, I tried various permutations of <code>library_search</code> and <code>grep equiv.l?mul</code> but couldn't find these.</p>



<a name="250495005"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/examples/near/250495005" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/examples.html#250495005">(Aug 24 2021 at 14:42)</a>:</h4>
<p>And even <a href="https://leanprover-community.github.io/mathlib_docs/find/order_iso.mul_left">docs#order_iso.mul_left</a></p>



<a name="250495688"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/examples/near/250495688" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/examples.html#250495688">(Aug 24 2021 at 14:46)</a>:</h4>
<p>I don't know if we have the add_equiv version for division rings</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>