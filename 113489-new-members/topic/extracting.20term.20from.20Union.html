---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/extracting.20term.20from.20Union.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/extracting.20term.20from.20Union.html">extracting term from Union</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="198254054"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/extracting%20term%20from%20Union/near/198254054" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason KY. <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/extracting.20term.20from.20Union.html#198254054">(May 20 2020 at 20:36)</a>:</h4>
<p>Hi, <br>
I am currently trying to prove somethings about topological spaces and <br>
have the following <a href="https://github.com/leanprover-community/mathlib/wiki/Minimum-Working-Example-&#40;MWE&#41;">#mwe</a></p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="n">topology</span><span class="bp">.</span><span class="n">basic</span>

<span class="kn">variables</span> <span class="o">{</span><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">topological_space</span> <span class="n">X</span><span class="o">]</span>

<span class="kn">lemma</span> <span class="n">open_of_has_smaller</span> <span class="o">{</span><span class="n">U</span> <span class="o">:</span> <span class="n">set</span> <span class="n">X</span><span class="o">}</span>
<span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">U</span><span class="o">,</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">Nₓ</span> <span class="o">:</span> <span class="n">set</span> <span class="n">X</span><span class="o">)</span> <span class="o">(</span><span class="n">h₀</span> <span class="o">:</span> <span class="n">is_open</span> <span class="n">Nₓ</span><span class="o">),</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">Nₓ</span> <span class="bp">∧</span> <span class="n">Nₓ</span> <span class="err">⊆</span> <span class="n">U</span><span class="o">)</span> <span class="o">:</span>
<span class="n">is_open</span> <span class="n">U</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="c1">-- So what I want to do is use ⋃ (x ∈ U) Nₓ</span>
  <span class="n">choose</span> <span class="n">f</span> <span class="n">hf</span> <span class="kn">using</span> <span class="n">h</span><span class="o">,</span>
  <span class="k">have</span> <span class="o">:</span> <span class="n">is_open</span> <span class="err">⋃</span> <span class="o">(</span><span class="n">x</span> <span class="err">∈</span> <span class="n">U</span><span class="o">),</span> <span class="n">f</span> <span class="n">x</span> <span class="n">H</span><span class="o">,</span>
  <span class="n">refine</span> <span class="n">is_open_sUnion</span> <span class="bp">_</span><span class="o">,</span>
  <span class="n">rintros</span> <span class="n">t</span> <span class="bp">⟨</span><span class="n">x</span><span class="o">,</span> <span class="n">ht</span><span class="bp">⟩</span><span class="o">,</span>
  <span class="c1">-- How do I extract x ∈ U from (λ (x : X), ⋃ (H : x ∈ U), f x H) x = t</span>
   <span class="n">sorry</span>
<span class="kn">end</span>
</code></pre></div>


<p>As indicated, how do I extract <code>x ∈ U</code> from <code>(λ (x : X), ⋃ (H : x ∈ U), f x H) x = t</code>?</p>



<a name="198254118"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/extracting%20term%20from%20Union/near/198254118" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason KY. <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/extracting.20term.20from.20Union.html#198254118">(May 20 2020 at 20:37)</a>:</h4>
<p>I have tried to use cases on <code>ht</code> but that does not seem to work :/</p>



<a name="198254693"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/extracting%20term%20from%20Union/near/198254693" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/extracting.20term.20from.20Union.html#198254693">(May 20 2020 at 20:42)</a>:</h4>
<p>I wish zulip Android app used a don't work better Unicode man coverage. Or had an option to choose the font.</p>



<a name="198254698"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/extracting%20term%20from%20Union/near/198254698" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/extracting.20term.20from.20Union.html#198254698">(May 20 2020 at 20:42)</a>:</h4>
<p><code>is_open_sUnion</code> isn't the right lemma to use. You want <code>is_open_bUnion</code>.</p>



<a name="198254916"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/extracting%20term%20from%20Union/near/198254916" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/extracting.20term.20from.20Union.html#198254916">(May 20 2020 at 20:44)</a>:</h4>
<p>BTW, we probably have this lemma in mathlib</p>



<a name="198254979"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/extracting%20term%20from%20Union/near/198254979" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason KY. <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/extracting.20term.20from.20Union.html#198254979">(May 20 2020 at 20:45)</a>:</h4>
<p><span class="user-mention silent" data-user-id="214703">Yury G. Kudryashov</span> <a href="#narrow/stream/113489-new-members/topic/extracting.20term.20from.20Union/near/198254916">said</a>:</p>
<blockquote>
<p>BTW, we probably have this lemma in mathlib</p>
</blockquote>
<p>I'm currently formalising some lecture notes as a learning experience!</p>



<a name="198254999"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/extracting%20term%20from%20Union/near/198254999" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason KY. <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/extracting.20term.20from.20Union.html#198254999">(May 20 2020 at 20:45)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110032">Reid Barton</span> <a href="#narrow/stream/113489-new-members/topic/extracting.20term.20from.20Union/near/198254698">said</a>:</p>
<blockquote>
<p><code>is_open_sUnion</code> isn't the right lemma to use. You want <code>is_open_bUnion</code>.</p>
</blockquote>
<p>Alright, I'll try to use this instead</p>



<a name="198255114"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/extracting%20term%20from%20Union/near/198255114" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/extracting.20term.20from.20Union.html#198255114">(May 20 2020 at 20:46)</a>:</h4>
<p>If I saw <code>(λ (x : X), ⋃ (H : x ∈ U), f x H) x = t</code> I'd dsimp it immediately, but in this case that removes all mention of H.</p>



<a name="198255209"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/extracting%20term%20from%20Union/near/198255209" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/extracting.20term.20from.20Union.html#198255209">(May 20 2020 at 20:47)</a>:</h4>
<p>I'd use rfl instead of ht in rintros.</p>



<a name="198255243"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/extracting%20term%20from%20Union/near/198255243" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/extracting.20term.20from.20Union.html#198255243">(May 20 2020 at 20:47)</a>:</h4>
<p>(if I had no bUnion lemma)</p>



<a name="198255578"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/extracting%20term%20from%20Union/near/198255578" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason KY. <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/extracting.20term.20from.20Union.html#198255578">(May 20 2020 at 20:50)</a>:</h4>
<p>emm, using rfl will give me <code>is_open ((λ (x : X), ⋃ (H : x ∈ U), f x H) x)</code> which I don't think I can prove since I can't use sUnion on this</p>



<a name="198256033"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/extracting%20term%20from%20Union/near/198256033" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/extracting.20term.20from.20Union.html#198256033">(May 20 2020 at 20:54)</a>:</h4>
<p>You should try to avoid unions over propositions like this, by using <code>bUnion</code> theorems, but you can use <code>Union</code> if they come up</p>



<a name="198256128"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/extracting%20term%20from%20Union/near/198256128" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/extracting.20term.20from.20Union.html#198256128">(May 20 2020 at 20:55)</a>:</h4>
<div class="codehilite"><pre><span></span><code>  <span class="k">have</span> <span class="o">:</span> <span class="n">is_open</span> <span class="err">⋃</span> <span class="o">(</span><span class="n">x</span> <span class="err">∈</span> <span class="n">U</span><span class="o">),</span> <span class="n">f</span> <span class="n">x</span> <span class="n">H</span><span class="o">,</span>
  <span class="n">refine</span> <span class="n">is_open_sUnion</span> <span class="bp">_</span><span class="o">,</span>
</code></pre></div>


<p>This is a wrong move, <code>⋃ (x ∈ U), f x H</code> is a bUnion not an sUnion</p>



<a name="198256202"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/extracting%20term%20from%20Union/near/198256202" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason KY. <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/extracting.20term.20from.20Union.html#198256202">(May 20 2020 at 20:56)</a>:</h4>
<p>I'm currently trying to use <code>is_open_bUnion</code> but can't seem to get it to work. I think the way I defined <code>f</code> is wrong</p>



<a name="198256258"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/extracting%20term%20from%20Union/near/198256258" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/extracting.20term.20from.20Union.html#198256258">(May 20 2020 at 20:56)</a>:</h4>
<p>It is a bit odd that <code>f</code> depends on <code>H</code></p>



<a name="198256279"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/extracting%20term%20from%20Union/near/198256279" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/extracting.20term.20from.20Union.html#198256279">(May 20 2020 at 20:57)</a>:</h4>
<p>the bUnion theorems may not be expecting this</p>



<a name="198256479"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/extracting%20term%20from%20Union/near/198256479" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason KY. <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/extracting.20term.20from.20Union.html#198256479">(May 20 2020 at 20:58)</a>:</h4>
<p>right, I'm thinking iere is a way to swap the type of <code>f</code> so <code>f</code> will have type <code>somthing not dependent on x  \all(x : X), → set X</code> instead of <code>Π (x : X), x ∈ U → set X</code></p>



<a name="198256485"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/extracting%20term%20from%20Union/near/198256485" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/extracting.20term.20from.20Union.html#198256485">(May 20 2020 at 20:58)</a>:</h4>
<p>anyway there is no need to use choice in the theorem, you can prove that U is the union of all its open subsets</p>



<a name="198256583"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/extracting%20term%20from%20Union/near/198256583" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/extracting.20term.20from.20Union.html#198256583">(May 20 2020 at 20:59)</a>:</h4>
<p>I'm also pretty sure there is already a theorem stating approximately this in mathlib</p>



<a name="198256752"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/extracting%20term%20from%20Union/near/198256752" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason KY. <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/extracting.20term.20from.20Union.html#198256752">(May 20 2020 at 21:00)</a>:</h4>
<p>Alright, I'll try your approach for now and if that doesn't go well I can cheat a bit by looking in mathlib</p>



<a name="198256768"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/extracting%20term%20from%20Union/near/198256768" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/extracting.20term.20from.20Union.html#198256768">(May 20 2020 at 21:01)</a>:</h4>
<p><code>is_open_iff_forall_mem_open</code></p>



<a name="198256825"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/extracting%20term%20from%20Union/near/198256825" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason KY. <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/extracting.20term.20from.20Union.html#198256825">(May 20 2020 at 21:01)</a>:</h4>
<p>Nono, I don't want to see it yet</p>



<a name="198256834"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/extracting%20term%20from%20Union/near/198256834" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/extracting.20term.20from.20Union.html#198256834">(May 20 2020 at 21:01)</a>:</h4>
<p>:)</p>



<a name="198260885"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/extracting%20term%20from%20Union/near/198260885" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/extracting.20term.20from.20Union.html#198260885">(May 20 2020 at 21:42)</a>:</h4>
<p>You can also use <code>is_open_Union</code> twice.</p>



<a name="198261166"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/extracting%20term%20from%20Union/near/198261166" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/extracting.20term.20from.20Union.html#198261166">(May 20 2020 at 21:46)</a>:</h4>
<p>BTW, try <code>choose f hfo hf using h</code></p>



<a name="198261203"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/extracting%20term%20from%20Union/near/198261203" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason KY. <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/extracting.20term.20from.20Union.html#198261203">(May 20 2020 at 21:46)</a>:</h4>
<p><span class="user-mention silent" data-user-id="214703">Yury G. Kudryashov</span> <a href="#narrow/stream/113489-new-members/topic/extracting.20term.20from.20Union/near/198260885">said</a>:</p>
<blockquote>
<p>You can also use <code>is_open_Union</code> twice.</p>
</blockquote>
<p>Nice! That's exactly it!</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>