---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/function.20expected.20at.20.3F.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/function.20expected.20at.20.3F.html">function expected at ?</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="201070240"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/function%20expected%20at%20%3F/near/201070240" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Lucas Viana <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/function.20expected.20at.20.3F.html#201070240">(Jun 16 2020 at 20:32)</a>:</h4>
<p>On the last line of this <a href="https://leanprover-community.github.io/mwe.html">#mwe</a>, <code>a</code> is of type <code>M → M</code>. But then lean complains it has type <code>m_1</code> and is not a function! why is that? <span aria-label="anguished" class="emoji emoji-1f627" role="img" title="anguished">:anguished:</span></p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="n">group_theory</span><span class="bp">.</span><span class="n">subgroup</span>
<span class="kn">open</span> <span class="n">function</span>
<span class="kn">variables</span> <span class="o">(</span><span class="n">M</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span>

<span class="kn">instance</span> <span class="n">endo_monoid</span> <span class="o">:</span> <span class="n">monoid</span> <span class="o">(</span><span class="n">M</span> <span class="bp">→</span> <span class="n">M</span><span class="o">)</span> <span class="o">:=</span> <span class="k">begin</span>
  <span class="n">fapply</span> <span class="n">monoid</span><span class="bp">.</span><span class="n">mk</span><span class="o">,</span>
  <span class="n">use</span> <span class="n">comp</span><span class="o">,</span>
  <span class="n">intros</span><span class="o">,</span> <span class="n">refl</span><span class="o">,</span>
  <span class="n">use</span> <span class="n">id</span><span class="o">,</span>
  <span class="n">intro</span><span class="o">,</span> <span class="n">refl</span><span class="o">,</span>
  <span class="n">intro</span><span class="o">,</span> <span class="n">refl</span><span class="o">,</span>
<span class="kn">end</span>
<span class="kn">instance</span> <span class="n">endo_hasid</span> <span class="o">:</span> <span class="n">has_one</span> <span class="o">(</span><span class="n">M</span> <span class="bp">→</span> <span class="n">M</span><span class="o">)</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">apply_instance</span>
<span class="kn">instance</span> <span class="n">endo_semigroup</span> <span class="o">:</span> <span class="n">semigroup</span> <span class="o">(</span><span class="n">M</span> <span class="bp">→</span> <span class="n">M</span><span class="o">)</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">apply_instance</span>

<span class="kn">definition</span> <span class="n">dynamical_system</span> <span class="o">:=</span> <span class="n">submonoid</span> <span class="o">(</span><span class="n">M</span> <span class="bp">→</span> <span class="n">M</span><span class="o">)</span>

<span class="kn">instance</span> <span class="n">dyn_mem</span> <span class="o">:</span> <span class="n">has_mem</span> <span class="o">(</span><span class="n">M</span> <span class="bp">→</span> <span class="n">M</span><span class="o">)</span> <span class="o">(</span><span class="n">dynamical_system</span> <span class="n">M</span><span class="o">)</span> <span class="o">:=</span> <span class="n">submonoid</span><span class="bp">.</span><span class="n">has_mem</span>

<span class="n">def</span> <span class="n">orbit</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">M</span><span class="o">)</span> <span class="o">(</span><span class="n">dyn</span> <span class="o">:</span> <span class="n">dynamical_system</span> <span class="n">M</span><span class="o">)</span> <span class="o">:=</span>
<span class="o">{</span><span class="n">p</span> <span class="o">:</span> <span class="n">M</span> <span class="bp">|</span> <span class="bp">∃</span><span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">M</span> <span class="bp">→</span> <span class="n">M</span><span class="o">)</span> <span class="o">(</span><span class="n">a</span> <span class="err">∈</span> <span class="n">dyn</span><span class="o">),</span> <span class="n">p</span> <span class="bp">=</span> <span class="n">a</span> <span class="n">x</span><span class="o">}</span> <span class="c1">-- ??</span>
</code></pre></div>



<a name="201070301"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/function%20expected%20at%20%3F/near/201070301" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/function.20expected.20at.20.3F.html#201070301">(Jun 16 2020 at 20:33)</a>:</h4>
<p>You want <code>(h : a \in dyn)</code>.</p>



<a name="201070430"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/function%20expected%20at%20%3F/near/201070430" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/function.20expected.20at.20.3F.html#201070430">(Jun 16 2020 at 20:34)</a>:</h4>
<p>Also, if you didn't use <code>a</code> as variable, you would have gotten a more useful error message.</p>



<a name="201070456"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/function%20expected%20at%20%3F/near/201070456" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/function.20expected.20at.20.3F.html#201070456">(Jun 16 2020 at 20:34)</a>:</h4>
<p>This is a very frustrating bug... the <code>a</code>-bug.</p>



<a name="201070570"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/function%20expected%20at%20%3F/near/201070570" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/function.20expected.20at.20.3F.html#201070570">(Jun 16 2020 at 20:35)</a>:</h4>
<p>With a bit of luck, this would also do what you want:</p>
<div class="codehilite"><pre><span></span><code><span class="n">def</span> <span class="n">orbit</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">M</span><span class="o">)</span> <span class="o">(</span><span class="n">dyn</span> <span class="o">:</span> <span class="n">dynamical_system</span> <span class="n">M</span><span class="o">)</span> <span class="o">:=</span>
<span class="o">{</span><span class="n">p</span> <span class="o">:</span> <span class="n">M</span> <span class="bp">|</span> <span class="bp">∃</span> <span class="n">f</span> <span class="err">∈</span> <span class="n">dyn</span><span class="o">,</span> <span class="n">p</span> <span class="bp">=</span> <span class="n">f</span> <span class="n">x</span><span class="o">}</span>
</code></pre></div>



<a name="201070576"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/function%20expected%20at%20%3F/near/201070576" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Lucas Viana <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/function.20expected.20at.20.3F.html#201070576">(Jun 16 2020 at 20:35)</a>:</h4>
<p>so I always need to name my hypothesis when writing "exists..."?</p>



<a name="201070578"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/function%20expected%20at%20%3F/near/201070578" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/function.20expected.20at.20.3F.html#201070578">(Jun 16 2020 at 20:35)</a>:</h4>
<p>(I didn't test it.)</p>



<a name="201070669"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/function%20expected%20at%20%3F/near/201070669" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/function.20expected.20at.20.3F.html#201070669">(Jun 16 2020 at 20:36)</a>:</h4>
<p>In your initial code, change the <code>a</code> to <code>f</code>, and then look at the tactic state before the error message...</p>



<a name="201070685"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/function%20expected%20at%20%3F/near/201070685" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Lucas Viana <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/function.20expected.20at.20.3F.html#201070685">(Jun 16 2020 at 20:36)</a>:</h4>
<p>your last example does not work (I tried it before)</p>



<a name="201070697"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/function%20expected%20at%20%3F/near/201070697" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/function.20expected.20at.20.3F.html#201070697">(Jun 16 2020 at 20:36)</a>:</h4>
<p>You will see that there are two <code>f</code>s and an <code>a</code>.</p>



<a name="201070730"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/function%20expected%20at%20%3F/near/201070730" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/function.20expected.20at.20.3F.html#201070730">(Jun 16 2020 at 20:36)</a>:</h4>
<p>I don't think it's the <code>a</code> bug here--it would be the <code>H</code> bug.</p>



<a name="201070732"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/function%20expected%20at%20%3F/near/201070732" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/function.20expected.20at.20.3F.html#201070732">(Jun 16 2020 at 20:36)</a>:</h4>
<p>Ok, too bad... if the short versions don't work, then you need to give more names (-;</p>



<a name="201070866"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/function%20expected%20at%20%3F/near/201070866" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Lucas Viana <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/function.20expected.20at.20.3F.html#201070866">(Jun 16 2020 at 20:38)</a>:</h4>
<p>ok, thank you <span aria-label="slight smile" class="emoji emoji-1f642" role="img" title="slight smile">:slight_smile:</span> we could have a list of those strange bugs and their common symptoms</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>