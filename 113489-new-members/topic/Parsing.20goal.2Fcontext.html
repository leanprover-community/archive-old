---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/Parsing.20goal.2Fcontext.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Parsing.20goal.2Fcontext.html">Parsing goal/context</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="206276016"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Parsing%20goal/context/near/206276016" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Pim Spelier <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Parsing.20goal.2Fcontext.html#206276016">(Aug 07 2020 at 16:08)</a>:</h4>
<p>Hi,<br>
Sometimes I have trouble parsing the local context or a goal; if my goal is 5 lines for example, I can't automatically parse whether it's an equality, an iff statement, a forall statement or something else. Is there a nice way to indent this in the infoview so I can immediately see this? I know I can copy the state to a comment, and then it'll show it nice and parsable, but I'd prefer if it were possible directly in the infoview itself somehow.</p>



<a name="206276112"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Parsing%20goal/context/near/206276112" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Parsing.20goal.2Fcontext.html#206276112">(Aug 07 2020 at 16:09)</a>:</h4>
<p>Clicking on the goal will show you the head symbol.</p>



<a name="206276560"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Parsing%20goal/context/near/206276560" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Pim Spelier <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Parsing.20goal.2Fcontext.html#206276560">(Aug 07 2020 at 16:13)</a>:</h4>
<p>Only if you click on the right part, right? (E.g.., on the <code>=</code>-symbol if it's an equality)</p>



<a name="206276622"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Parsing%20goal/context/near/206276622" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Parsing.20goal.2Fcontext.html#206276622">(Aug 07 2020 at 16:13)</a>:</h4>
<p>You can move your mouse over the goal until everything gets highlighted</p>



<a name="206279441"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Parsing%20goal/context/near/206279441" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Pim Spelier <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Parsing.20goal.2Fcontext.html#206279441">(Aug 07 2020 at 16:35)</a>:</h4>
<p>So there's no automatic indentation? Then I'll follow your approach, thanks!</p>



<a name="206337922"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Parsing%20goal/context/near/206337922" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Utensil Song <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Parsing.20goal.2Fcontext.html#206337922">(Aug 08 2020 at 08:12)</a>:</h4>
<p><span class="user-mention" data-user-id="319356">@Pim Spelier</span>  Do you have an example of such a long goal? So everyone could have an intuitive idea about the indentation.</p>



<a name="206340232"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Parsing%20goal/context/near/206340232" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Pim Spelier <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Parsing.20goal.2Fcontext.html#206340232">(Aug 08 2020 at 09:28)</a>:</h4>
<p>An example:</p>
<div class="codehilite"><pre><span></span><code><span class="err">⊢</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">turing</span><span class="bp">.</span><span class="n">TM2</span><span class="bp">.</span><span class="n">cfg</span> <span class="n">tr</span><span class="bp">.</span><span class="err">Γ</span> <span class="n">tr</span><span class="bp">.</span><span class="err">Λ</span> <span class="n">tr</span><span class="bp">.</span><span class="n">σ</span><span class="o">),</span> <span class="n">a_1</span> <span class="err">∈</span> <span class="n">roption</span><span class="bp">.</span><span class="n">of_option</span> <span class="o">(</span><span class="err">↑</span><span class="o">(</span><span class="n">init_list</span> <span class="n">tr</span><span class="bp">.</span><span class="n">k₀</span> <span class="n">tr</span><span class="bp">.</span><span class="err">Γ</span> <span class="n">tr</span><span class="bp">.</span><span class="err">Λ</span> <span class="n">tr</span><span class="bp">.</span><span class="n">σ</span> <span class="o">(</span><span class="bp">_.</span><span class="n">mpr</span> <span class="o">(</span><span class="n">ea</span><span class="bp">.</span><span class="n">to_encoding</span><span class="bp">.</span><span class="n">encode</span> <span class="n">a</span><span class="o">)))</span><span class="bp">.</span><span class="n">bind</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">c</span> <span class="o">:</span> <span class="n">turing</span><span class="bp">.</span><span class="n">TM2</span><span class="bp">.</span><span class="n">cfg</span> <span class="n">tr</span><span class="bp">.</span><span class="err">Γ</span> <span class="n">tr</span><span class="bp">.</span><span class="err">Λ</span> <span class="n">tr</span><span class="bp">.</span><span class="n">σ</span><span class="o">),</span> <span class="n">option</span><span class="bp">.</span><span class="n">rec</span> <span class="n">none</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">val</span> <span class="o">:</span> <span class="n">tr</span><span class="bp">.</span><span class="err">Λ</span><span class="o">),</span> <span class="n">some</span> <span class="o">{</span><span class="n">l</span> <span class="o">:=</span> <span class="n">none</span> <span class="n">tr</span><span class="bp">.</span><span class="err">Λ</span><span class="o">,</span> <span class="n">var</span> <span class="o">:=</span> <span class="n">c</span><span class="bp">.</span><span class="n">var</span><span class="o">,</span> <span class="n">stk</span> <span class="o">:=</span> <span class="n">c</span><span class="bp">.</span><span class="n">stk</span><span class="o">})</span> <span class="n">c</span><span class="bp">.</span><span class="n">l</span><span class="o">))</span> <span class="bp">↔</span> <span class="n">a_1</span> <span class="err">∈</span> <span class="n">roption</span><span class="bp">.</span><span class="n">map</span> <span class="o">(</span><span class="n">halt_list</span> <span class="n">tr</span><span class="bp">.</span><span class="n">k₁</span> <span class="n">tr</span><span class="bp">.</span><span class="err">Γ</span> <span class="n">tr</span><span class="bp">.</span><span class="err">Λ</span> <span class="n">tr</span><span class="bp">.</span><span class="n">σ</span><span class="o">)</span> <span class="o">(</span><span class="bp">_.</span><span class="n">mpr</span> <span class="o">(</span><span class="n">roption</span><span class="bp">.</span><span class="n">some</span> <span class="o">(</span><span class="n">ea</span><span class="bp">.</span><span class="n">to_encoding</span><span class="bp">.</span><span class="n">encode</span> <span class="n">a</span><span class="o">)))</span>
</code></pre></div>


<p>which, when "copy state to comment"'ed, gives</p>
<div class="codehilite"><pre><span></span><code><span class="err">⊢</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">turing</span><span class="bp">.</span><span class="n">TM2</span><span class="bp">.</span><span class="n">cfg</span> <span class="n">tr</span><span class="bp">.</span><span class="err">Γ</span> <span class="n">tr</span><span class="bp">.</span><span class="err">Λ</span> <span class="n">tr</span><span class="bp">.</span><span class="n">σ</span><span class="o">),</span>
    <span class="n">a_1</span> <span class="err">∈</span>
        <span class="n">roption</span><span class="bp">.</span><span class="n">of_option</span>
          <span class="o">(</span><span class="err">↑</span><span class="o">(</span><span class="n">init_list</span> <span class="n">tr</span><span class="bp">.</span><span class="n">k₀</span> <span class="n">tr</span><span class="bp">.</span><span class="err">Γ</span> <span class="n">tr</span><span class="bp">.</span><span class="err">Λ</span> <span class="n">tr</span><span class="bp">.</span><span class="n">σ</span> <span class="o">(</span><span class="bp">_.</span><span class="n">mpr</span> <span class="o">(</span><span class="n">ea</span><span class="bp">.</span><span class="n">to_encoding</span><span class="bp">.</span><span class="n">encode</span> <span class="n">a</span><span class="o">)))</span><span class="bp">.</span><span class="n">bind</span>
             <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">c</span> <span class="o">:</span> <span class="n">turing</span><span class="bp">.</span><span class="n">TM2</span><span class="bp">.</span><span class="n">cfg</span> <span class="n">tr</span><span class="bp">.</span><span class="err">Γ</span> <span class="n">tr</span><span class="bp">.</span><span class="err">Λ</span> <span class="n">tr</span><span class="bp">.</span><span class="n">σ</span><span class="o">),</span>
                <span class="n">option</span><span class="bp">.</span><span class="n">rec</span> <span class="n">none</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">val</span> <span class="o">:</span> <span class="n">tr</span><span class="bp">.</span><span class="err">Λ</span><span class="o">),</span> <span class="n">some</span> <span class="o">{</span><span class="n">l</span> <span class="o">:=</span> <span class="n">none</span> <span class="n">tr</span><span class="bp">.</span><span class="err">Λ</span><span class="o">,</span> <span class="n">var</span> <span class="o">:=</span> <span class="n">c</span><span class="bp">.</span><span class="n">var</span><span class="o">,</span> <span class="n">stk</span> <span class="o">:=</span> <span class="n">c</span><span class="bp">.</span><span class="n">stk</span><span class="o">})</span> <span class="n">c</span><span class="bp">.</span><span class="n">l</span><span class="o">))</span> <span class="bp">↔</span>
      <span class="n">a_1</span> <span class="err">∈</span> <span class="n">roption</span><span class="bp">.</span><span class="n">map</span> <span class="o">(</span><span class="n">halt_list</span> <span class="n">tr</span><span class="bp">.</span><span class="n">k₁</span> <span class="n">tr</span><span class="bp">.</span><span class="err">Γ</span> <span class="n">tr</span><span class="bp">.</span><span class="err">Λ</span> <span class="n">tr</span><span class="bp">.</span><span class="n">σ</span><span class="o">)</span> <span class="o">(</span><span class="bp">_.</span><span class="n">mpr</span> <span class="o">(</span><span class="n">roption</span><span class="bp">.</span><span class="n">some</span> <span class="o">(</span><span class="n">ea</span><span class="bp">.</span><span class="n">to_encoding</span><span class="bp">.</span><span class="n">encode</span> <span class="n">a</span><span class="o">)))</span>
</code></pre></div>


<p>making it clear that it's stating that for all a, a certain iff-statement hold. With Patrick's tip, you can easily see that it's a forall statement if you start at the beginning, but to see that it's a forall a, ... ↔ ... statement, you'd need to mouse over exactly the right character.<br>
It's not really that big of a problem, the "copy state to comment"'ing does work, but I was just wondering if it's possible somehow (clearly there is code for indentation somewhere)</p>



<a name="206340464"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Parsing%20goal/context/near/206340464" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Utensil Song <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Parsing.20goal.2Fcontext.html#206340464">(Aug 08 2020 at 09:37)</a>:</h4>
<p>Take a look at the code, <code>vscode-lean</code> doesn't seem to do indentation in "copy state to comment", it just put <code>/- -/</code> around the text. This could be the difference between plain text mode and widget mode, which indicates this could be a widget improvement?</p>



<a name="206340466"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Parsing%20goal/context/near/206340466" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Utensil Song <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Parsing.20goal.2Fcontext.html#206340466">(Aug 08 2020 at 09:37)</a>:</h4>
<p>Can you try switching back to plain text mode? Do you see the indentation after that?</p>



<a name="206340568"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Parsing%20goal/context/near/206340568" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Pim Spelier <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Parsing.20goal.2Fcontext.html#206340568">(Aug 08 2020 at 09:40)</a>:</h4>
<p>That works, thanks! Then it misses the widget benefits, but I can just switch back and forth as need be for now.</p>



<a name="206340617"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Parsing%20goal/context/near/206340617" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Pim Spelier <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Parsing.20goal.2Fcontext.html#206340617">(Aug 08 2020 at 09:42)</a>:</h4>
<p>Just curious: does that mean the widget actively removes the indentation? Or does the indentation just not survive the parsing by the widget?</p>



<a name="206340621"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Parsing%20goal/context/near/206340621" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Utensil Song <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Parsing.20goal.2Fcontext.html#206340621">(Aug 08 2020 at 09:42)</a>:</h4>
<p>But the indentation in the pasted comment is also not showing that it's a <code>∀ a, ... ↔ ...</code> statement either. Maybe there could be a smart indentation using a top-down approach for widget view?</p>



<a name="206340944"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Parsing%20goal/context/near/206340944" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Pim Spelier <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Parsing.20goal.2Fcontext.html#206340944">(Aug 08 2020 at 09:50)</a>:</h4>
<p>The indentation in the comment is kinda showing it's a <code>∀ a, ... ↔ ...</code> statement, but you do have to know you have to look at the end of the 6th (first to last) line to see the relation between the block starting at the second line and the last line.</p>



<a name="206354942"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Parsing%20goal/context/near/206354942" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Parsing.20goal.2Fcontext.html#206354942">(Aug 08 2020 at 16:41)</a>:</h4>
<p>If you set_option  pp.all true and then turn widgets off you get an output which has correct indentation spacing but I've found that using the widget functionality is easier in practice</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>