---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/Creating.20a.20new.20Lean.20project.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Creating.20a.20new.20Lean.20project.html">Creating a new Lean project</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="238470600"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Creating%20a%20new%20Lean%20project/near/238470600" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Matthias U <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Creating.20a.20new.20Lean.20project.html#238470600">(May 12 2021 at 13:12)</a>:</h4>
<p>I'm quite new to Lean and I tried creating a new Lean project using the instructions given here: <a href="https://leanprover-community.github.io/install/project.html">https://leanprover-community.github.io/install/project.html</a> . <br>
However, when I open an empty .lean file, VS Code tells me "Server has stopped with Error code 1".<br>
After I copied the files "leanpkg.toml" and "leanpkg.path" from an existing project (e.g. the tutorial project) and ran 'leanpkg configure' and 'leanproject get-mathlib-cache', I could use Lean normally and it is working now.<br>
Still, I was wondering if there is a more elegant way to create a new project, in particular is this possible without copying files from an existing one?</p>



<a name="238470973"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Creating%20a%20new%20Lean%20project/near/238470973" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Creating.20a.20new.20Lean.20project.html#238470973">(May 12 2021 at 13:14)</a>:</h4>
<p>You have to open the folder in VS Code, not the single file.</p>



<a name="238470987"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Creating%20a%20new%20Lean%20project/near/238470987" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Creating.20a.20new.20Lean.20project.html#238470987">(May 12 2021 at 13:14)</a>:</h4>
<p>Then you can create a new file</p>



<a name="238471855"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Creating%20a%20new%20Lean%20project/near/238471855" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Creating.20a.20new.20Lean.20project.html#238471855">(May 12 2021 at 13:20)</a>:</h4>
<p><code>leanproject new my_project</code> like the directions suggest, then opening <code>my_project</code> (the new directory) using VS Code, not any of the lean files in it. Then once you've opened the directory in VS Code, feel free to make any new lean files in the <code>src</code> directory. This is all pretty much how the steps in the instructions are.</p>



<a name="238475542"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Creating%20a%20new%20Lean%20project/near/238475542" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Matthias U <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Creating.20a.20new.20Lean.20project.html#238475542">(May 12 2021 at 13:42)</a>:</h4>
<p><span class="user-mention silent" data-user-id="130384">Riccardo Brasca</span> <a href="#narrow/stream/113489-new-members/topic/Creating.20a.20new.20Lean.20project/near/238470973">said</a>:</p>
<blockquote>
<p>You have to open the folder in VS Code, not the single file.</p>
</blockquote>
<p>Thanks, I opened the folder but I still get the error</p>



<a name="238475902"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Creating%20a%20new%20Lean%20project/near/238475902" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Matthias U <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Creating.20a.20new.20Lean.20project.html#238475902">(May 12 2021 at 13:45)</a>:</h4>
<p><span class="user-mention silent" data-user-id="308899">Yakov Pechersky</span> <a href="#narrow/stream/113489-new-members/topic/Creating.20a.20new.20Lean.20project/near/238471855">said</a>:</p>
<blockquote>
<p><code>leanproject new my_project</code> like the directions suggest, then opening <code>my_project</code> (the new directory) using VS Code, not any of the lean files in it. Then once you've opened the directory in VS Code, feel free to make any new lean files in the <code>src</code> directory. This is all pretty much how the steps in the instructions are.</p>
</blockquote>
<p>If I type <code>leanproject new my_project</code>, I get the error <code>uncaught exception: Lean package manager, version 4.0.0
Usage: leanpkg &lt;command&gt;</code>.</p>



<a name="238475996"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Creating%20a%20new%20Lean%20project/near/238475996" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Creating.20a.20new.20Lean.20project.html#238475996">(May 12 2021 at 13:45)</a>:</h4>
<p>Ah, you're trying to work with Lean4. <code>leanproject</code>, mathlib in it's current state, and this channel, are all for Lean3</p>



<a name="238476125"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Creating%20a%20new%20Lean%20project/near/238476125" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Creating.20a.20new.20Lean.20project.html#238476125">(May 12 2021 at 13:46)</a>:</h4>
<p>If you are new to Lean and you don't have any special reason to do otherwise, just go with Lean 3</p>



<a name="238476193"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Creating%20a%20new%20Lean%20project/near/238476193" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Creating.20a.20new.20Lean.20project.html#238476193">(May 12 2021 at 13:47)</a>:</h4>
<p>Unless I misunderstood something. Of course, copying the various config files from the tutorials will make you use Lean3 in the directory through recognition of those files by <code>elan</code>, which is the lean version manager.</p>



<a name="238476307"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Creating%20a%20new%20Lean%20project/near/238476307" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Matthias U <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Creating.20a.20new.20Lean.20project.html#238476307">(May 12 2021 at 13:47)</a>:</h4>
<p>Actually, I'm trying to work with Lean 3. Does this mean that I have the wrong version of leanproject?</p>



<a name="238476458"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Creating%20a%20new%20Lean%20project/near/238476458" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Creating.20a.20new.20Lean.20project.html#238476458">(May 12 2021 at 13:48)</a>:</h4>
<p>You probably have the wrong version of Lean. Which OS are you using?</p>



<a name="238476554"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Creating%20a%20new%20Lean%20project/near/238476554" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Creating.20a.20new.20Lean.20project.html#238476554">(May 12 2021 at 13:49)</a>:</h4>
<p>Did you follow the installation instructions <a href="https://leanprover-community.github.io/get_started.html">here</a> ?</p>



<a name="238476720"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Creating%20a%20new%20Lean%20project/near/238476720" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Matthias U <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Creating.20a.20new.20Lean.20project.html#238476720">(May 12 2021 at 13:50)</a>:</h4>
<p>Yes, I followed the 'fastest way' indicated for Ubuntu. I'm using Ubuntu 20.04</p>



<a name="238476808"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Creating%20a%20new%20Lean%20project/near/238476808" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Creating.20a.20new.20Lean.20project.html#238476808">(May 12 2021 at 13:51)</a>:</h4>
<p>You mean this?</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">wget</span> <span class="bp">-</span><span class="n">q</span> <span class="n">https</span><span class="o">:</span><span class="bp">//</span><span class="n">raw.githubusercontent.com</span><span class="bp">/</span><span class="n">leanprover</span><span class="bp">-</span><span class="n">community</span><span class="bp">/</span><span class="n">mathlib</span><span class="bp">-</span><span class="n">tools</span><span class="bp">/</span><span class="n">master</span><span class="bp">/</span><span class="n">scripts</span><span class="bp">/</span><span class="n">install_debian.sh</span> <span class="bp">&amp;&amp;</span> <span class="n">bash</span> <span class="n">install_debian.sh</span> <span class="bp">;</span> <span class="n">rm</span> <span class="bp">-</span><span class="n">f</span> <span class="n">install_debian.sh</span> <span class="bp">&amp;&amp;</span> <span class="n">source</span> <span class="bp">~/.</span><span class="n">profile</span>
</code></pre></div>



<a name="238476853"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Creating%20a%20new%20Lean%20project/near/238476853" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Matthias U <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Creating.20a.20new.20Lean.20project.html#238476853">(May 12 2021 at 13:51)</a>:</h4>
<p>Yes, exactly</p>



<a name="238476893"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Creating%20a%20new%20Lean%20project/near/238476893" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Creating.20a.20new.20Lean.20project.html#238476893">(May 12 2021 at 13:51)</a>:</h4>
<p>So you're opening a folder containing a Lean 3 project in VS Code and you're getting an error?</p>



<a name="238476975"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Creating%20a%20new%20Lean%20project/near/238476975" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Matthias U <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Creating.20a.20new.20Lean.20project.html#238476975">(May 12 2021 at 13:52)</a>:</h4>
<p>Yes</p>



<a name="238476987"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Creating%20a%20new%20Lean%20project/near/238476987" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Creating.20a.20new.20Lean.20project.html#238476987">(May 12 2021 at 13:52)</a>:</h4>
<p>Can you upload a screenshot of what your VS Code looks like after you've opened the project folder?</p>



<a name="238477273"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Creating%20a%20new%20Lean%20project/near/238477273" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Creating.20a.20new.20Lean.20project.html#238477273">(May 12 2021 at 13:54)</a>:</h4>
<p>Also, what <code>lean -v</code> says? Just to be sure you have lean3...</p>



<a name="238477318"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Creating%20a%20new%20Lean%20project/near/238477318" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Creating.20a.20new.20Lean.20project.html#238477318">(May 12 2021 at 13:54)</a>:</h4>
<p>Riccardo, the output of <code>lean -v</code> will depend on the directory in which it is run</p>



<a name="238477398"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Creating%20a%20new%20Lean%20project/near/238477398" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Creating.20a.20new.20Lean.20project.html#238477398">(May 12 2021 at 13:55)</a>:</h4>
<div class="codehilite" data-code-language="Bash"><pre><span></span><code>buzzard@bob:~/active-lean-projects$ <span class="nb">cd</span> lean-liquid/
buzzard@bob:~/active-lean-projects/lean-liquid$ lean -v
Lean <span class="o">(</span>version <span class="m">3</span>.30.0, commit a5822ea47ebc, Release<span class="o">)</span>
buzzard@bob:~/active-lean-projects/lean-liquid$ <span class="nb">cd</span> ..
buzzard@bob:~/active-lean-projects$ <span class="nb">cd</span> lean4-filters/
buzzard@bob:~/active-lean-projects/lean4-filters$ lean -v
Lean <span class="o">(</span>version <span class="m">4</span>.0.0-nightly-2021-04-29, commit 40b17bc364dd, Release<span class="o">)</span>
buzzard@bob:~/active-lean-projects/lean4-filters$
</code></pre></div>



<a name="238477432"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Creating%20a%20new%20Lean%20project/near/238477432" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Creating.20a.20new.20Lean.20project.html#238477432">(May 12 2021 at 13:55)</a>:</h4>
<p>This is normal</p>



<a name="238477495"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Creating%20a%20new%20Lean%20project/near/238477495" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Matthias U <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Creating.20a.20new.20Lean.20project.html#238477495">(May 12 2021 at 13:55)</a>:</h4>
<p><a href="/user_uploads/3121/jnZ7iNN0X-lTZkNvBra1K-Vo/Screenshot_2021-05-12_15-54-58.png">Screenshot_2021-05-12_15-54-58.png</a>  VS Code looks as follows</p>
<div class="message_inline_image"><a href="/user_uploads/3121/jnZ7iNN0X-lTZkNvBra1K-Vo/Screenshot_2021-05-12_15-54-58.png" title="Screenshot_2021-05-12_15-54-58.png"><img src="/user_uploads/3121/jnZ7iNN0X-lTZkNvBra1K-Vo/Screenshot_2021-05-12_15-54-58.png"></a></div>



<a name="238477599"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Creating%20a%20new%20Lean%20project/near/238477599" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Creating.20a.20new.20Lean.20project.html#238477599">(May 12 2021 at 13:56)</a>:</h4>
<p>Yes, but I think <code>leanproject new</code> will use the Lean installed in the system... but maybe I am wrong</p>



<a name="238477701"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Creating%20a%20new%20Lean%20project/near/238477701" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Matthias U <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Creating.20a.20new.20Lean.20project.html#238477701">(May 12 2021 at 13:56)</a>:</h4>
<p><code>lean -v</code> yields <code>Lean (version 4.0.0-m1, commit 34cf4bc3ffc3, Release)</code></p>



<a name="238477795"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Creating%20a%20new%20Lean%20project/near/238477795" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Creating.20a.20new.20Lean.20project.html#238477795">(May 12 2021 at 13:57)</a>:</h4>
<p>So that is not a correct-looking lean project because it has e.g. no path file. How did you make this project?</p>



<a name="238477917"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Creating%20a%20new%20Lean%20project/near/238477917" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Creating.20a.20new.20Lean.20project.html#238477917">(May 12 2021 at 13:58)</a>:</h4>
<p>Riccardo there is no such thing as "the Lean installed in the system"</p>



<a name="238477951"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Creating%20a%20new%20Lean%20project/near/238477951" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Creating.20a.20new.20Lean.20project.html#238477951">(May 12 2021 at 13:58)</a>:</h4>
<p><code>leanproject</code> will only make Lean 3 projects</p>



<a name="238478026"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Creating%20a%20new%20Lean%20project/near/238478026" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Matthias U <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Creating.20a.20new.20Lean.20project.html#238478026">(May 12 2021 at 13:59)</a>:</h4>
<p>I typed into a terminal <code>leanproject new</code> . When I typed <code>leanproject new project_name</code> it told me <code>uncaught exception: Lean package manager, version 4.0.0</code></p>



<a name="238478115"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Creating%20a%20new%20Lean%20project/near/238478115" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Creating.20a.20new.20Lean.20project.html#238478115">(May 12 2021 at 13:59)</a>:</h4>
<p>OK so right now your problem is that you don't have a valid Lean project to open.</p>



<a name="238478413"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Creating%20a%20new%20Lean%20project/near/238478413" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Creating.20a.20new.20Lean.20project.html#238478413">(May 12 2021 at 14:01)</a>:</h4>
<p>When you say <code>leanproject new</code> do you mean <code>leanproject new</code> without any name at all?</p>



<a name="238478469"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Creating%20a%20new%20Lean%20project/near/238478469" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Matthias U <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Creating.20a.20new.20Lean.20project.html#238478469">(May 12 2021 at 14:01)</a>:</h4>
<p>Yes, just <code>leanproject new</code> without any name</p>



<a name="238478832"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Creating%20a%20new%20Lean%20project/near/238478832" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Creating.20a.20new.20Lean.20project.html#238478832">(May 12 2021 at 14:04)</a>:</h4>
<p>if I type that in an empty directory it creates a project whose name is the name of the directory I'm in but it creates a <code>path</code> file. I recommend you delete your corrupted project, and type <code>leanproject new my_project</code> in a directory which doesn't contain any <code>leanpkg.path</code> or <code>leanpkg.toml</code> or indeed any file at all. What happens then?</p>



<a name="238479227"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Creating%20a%20new%20Lean%20project/near/238479227" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Matthias U <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Creating.20a.20new.20Lean.20project.html#238479227">(May 12 2021 at 14:06)</a>:</h4>
<p>I'm getting the following error `<br>
uncaught exception: Lean package manager, version 4.0.0</p>
<p>Usage: leanpkg &lt;command&gt;</p>
<p>configure              download and build dependencies and print resulting LEAN_PATH<br>
build [-- &lt;Lean-args&gt;] configure and build *.olean files<br>
init &lt;name&gt;            create a Lean package in the current directory</p>
<p>See <code>leanpkg help &lt;command&gt;</code> for more information on a specific command.<br>
Command '['leanpkg', 'new', 'my_project']' returned non-zero exit status 1.`</p>



<a name="238479400"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Creating%20a%20new%20Lean%20project/near/238479400" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Creating.20a.20new.20Lean.20project.html#238479400">(May 12 2021 at 14:07)</a>:</h4>
<p>I think this is what we should fix before going on.</p>



<a name="238479665"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Creating%20a%20new%20Lean%20project/near/238479665" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Creating.20a.20new.20Lean.20project.html#238479665">(May 12 2021 at 14:09)</a>:</h4>
<p>What does <code>leanpkg --help</code> return?</p>



<a name="238479734"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Creating%20a%20new%20Lean%20project/near/238479734" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Matthias U <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Creating.20a.20new.20Lean.20project.html#238479734">(May 12 2021 at 14:09)</a>:</h4>
<p>`uncaught exception: Lean package manager, version 4.0.0</p>
<p>Usage: leanpkg &lt;command&gt;</p>
<p>configure              download and build dependencies and print resulting LEAN_PATH<br>
build [-- &lt;Lean-args&gt;] configure and build *.olean files<br>
init &lt;name&gt;            create a Lean package in the current directory</p>
<p>See <code>leanpkg help &lt;command&gt;</code> for more information on a specific command.`</p>



<a name="238479877"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Creating%20a%20new%20Lean%20project/near/238479877" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Creating.20a.20new.20Lean.20project.html#238479877">(May 12 2021 at 14:10)</a>:</h4>
<p>oh sorry, <code>leanpkg help</code></p>



<a name="238479923"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Creating%20a%20new%20Lean%20project/near/238479923" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Creating.20a.20new.20Lean.20project.html#238479923">(May 12 2021 at 14:10)</a>:</h4>
<p>But this "uncaught exception" doesn't bode well</p>



<a name="238479971"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Creating%20a%20new%20Lean%20project/near/238479971" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Matthias U <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Creating.20a.20new.20Lean.20project.html#238479971">(May 12 2021 at 14:11)</a>:</h4>
<p><code>leanpkg help</code> also returns</p>



<a name="238479977"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Creating%20a%20new%20Lean%20project/near/238479977" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Matthias U <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Creating.20a.20new.20Lean.20project.html#238479977">(May 12 2021 at 14:11)</a>:</h4>
<p>Lean package manager, version 4.0.0</p>
<p>Usage: leanpkg &lt;command&gt;</p>
<p>configure              download and build dependencies and print resulting LEAN_PATH<br>
build [-- &lt;Lean-args&gt;] configure and build *.olean files<br>
init &lt;name&gt;            create a Lean package in the current directory</p>
<p>See <code>leanpkg help &lt;command&gt;</code> for more information on a specific command.</p>



<a name="238480103"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Creating%20a%20new%20Lean%20project/near/238480103" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Matthias U <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Creating.20a.20new.20Lean.20project.html#238480103">(May 12 2021 at 14:12)</a>:</h4>
<p><span class="user-mention silent" data-user-id="409809">Matthias U</span> <a href="#narrow/stream/113489-new-members/topic/Creating.20a.20new.20Lean.20project/near/238479971">said</a>:</p>
<blockquote>
<p><code>leanpkg help</code> also returns</p>
</blockquote>
<p>I mean 'returns' (there isn't the uncaught exception)</p>



<a name="238480112"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Creating%20a%20new%20Lean%20project/near/238480112" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Creating.20a.20new.20Lean.20project.html#238480112">(May 12 2021 at 14:12)</a>:</h4>
<p>Is there some <code>leanpkg.toml</code> file in a directory above the directory you are in currently?</p>



<a name="238480215"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Creating%20a%20new%20Lean%20project/near/238480215" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Creating.20a.20new.20Lean.20project.html#238480215">(May 12 2021 at 14:12)</a>:</h4>
<p>I can reproduce this error by putting a Lean 4 leanpkg.toml in a directory above the directory I am currently in.</p>



<a name="238480218"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Creating%20a%20new%20Lean%20project/near/238480218" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Matthias U <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Creating.20a.20new.20Lean.20project.html#238480218">(May 12 2021 at 14:12)</a>:</h4>
<p>In the current directory, there are no files at all</p>



<a name="238480273"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Creating%20a%20new%20Lean%20project/near/238480273" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Creating.20a.20new.20Lean.20project.html#238480273">(May 12 2021 at 14:13)</a>:</h4>
<p>I am asking about every directory above the directory where you are in, right up to /</p>



<a name="238480375"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Creating%20a%20new%20Lean%20project/near/238480375" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Creating.20a.20new.20Lean.20project.html#238480375">(May 12 2021 at 14:13)</a>:</h4>
<p>If I put a leanpkg.toml which mentions Lean 4 in one of these directories then leanpkg gets confused and assumes you are making a Lean 4 repo, but leanproject expects you to be making a Lean 3 repo, and this gives the errors you are reporting.</p>



<a name="238480505"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Creating%20a%20new%20Lean%20project/near/238480505" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Creating.20a.20new.20Lean.20project.html#238480505">(May 12 2021 at 14:14)</a>:</h4>
<p>So I conjecture that you are making a repo within another repo, or another failed attempt at making a repo, or whatever.</p>



<a name="238480867"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Creating%20a%20new%20Lean%20project/near/238480867" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Matthias U <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Creating.20a.20new.20Lean.20project.html#238480867">(May 12 2021 at 14:17)</a>:</h4>
<p>Yes, in my home directory, there is one. I'm removing it...</p>



<a name="238480945"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Creating%20a%20new%20Lean%20project/near/238480945" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Creating.20a.20new.20Lean.20project.html#238480945">(May 12 2021 at 14:17)</a>:</h4>
<p><span class="user-mention" data-user-id="110031">@Patrick Massot</span> you'll love this one</p>



<a name="238481148"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Creating%20a%20new%20Lean%20project/near/238481148" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Creating.20a.20new.20Lean.20project.html#238481148">(May 12 2021 at 14:19)</a>:</h4>
<div class="codehilite" data-code-language="Bash"><pre><span></span><code>buzzard@bob:~$ mkdir <span class="nb">test</span>
buzzard@bob:~$ <span class="nb">cd</span> <span class="nb">test</span>
buzzard@bob:~/test$ cat &gt; leanpkg.toml
<span class="o">[</span>package<span class="o">]</span>
<span class="nv">name</span> <span class="o">=</span> <span class="s2">"this_will_mess_up_leanproject"</span>
<span class="nv">version</span> <span class="o">=</span> <span class="s2">"0.1"</span>
<span class="nv">lean_version</span> <span class="o">=</span> <span class="s2">"leanprover/lean4:nightly"</span>
buzzard@bob:~/test$ mkdir test2
buzzard@bob:~/test$ <span class="nb">cd</span> test2
buzzard@bob:~/test/test2$ leanproject new this_wont_work
uncaught exception: Lean package manager, version nightly-2021-04-29

Usage: leanpkg &lt;command&gt;

init &lt;name&gt;      create a Lean package <span class="k">in</span> the current directory
configure        download and build dependencies
build <span class="o">[</span>&lt;args&gt;<span class="o">]</span>   configure and build *.olean files

See <span class="sb">`</span>leanpkg <span class="nb">help</span> &lt;command&gt;<span class="sb">`</span> <span class="k">for</span> more information on a specific command.
Command <span class="s1">'['</span>leanpkg<span class="s1">', '</span>new<span class="s1">', '</span>this_wont_work<span class="s1">']'</span> returned non-zero <span class="nb">exit</span> status <span class="m">1</span>.
buzzard@bob:~/test/test2$
</code></pre></div>



<a name="238481821"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Creating%20a%20new%20Lean%20project/near/238481821" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Matthias U <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Creating.20a.20new.20Lean.20project.html#238481821">(May 12 2021 at 14:22)</a>:</h4>
<p>Ok, I removed all <code>*.lean</code> files, the <code>leanpkg.toml</code> and the <code>.git</code>folder from my home directory, but I'm still getting the same error message</p>



<a name="238490372"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Creating%20a%20new%20Lean%20project/near/238490372" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Creating.20a.20new.20Lean.20project.html#238490372">(May 12 2021 at 15:11)</a>:</h4>
<p>Did you check for Lean files all the way from where you are running the command right up until <code>/</code>?</p>



<a name="238490885"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Creating%20a%20new%20Lean%20project/near/238490885" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Creating.20a.20new.20Lean.20project.html#238490885">(May 12 2021 at 15:14)</a>:</h4>
<p>What do the following commands say, when running them from the directory where you ran <code>leanproject new</code>?</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">elan</span> <span class="n">which</span> <span class="n">lean</span>
<span class="n">elan</span> <span class="n">toolchain</span> <span class="n">list</span>
</code></pre></div>



<a name="238539826"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Creating%20a%20new%20Lean%20project/near/238539826" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Creating.20a.20new.20Lean.20project.html#238539826">(May 12 2021 at 20:32)</a>:</h4>
<p>When creating a new project, <code>leanproject</code> uses <code>leanpkg</code> which itself uses what <code>elan</code> thinks is the default version of Lean. Clearly Matthias' elan think Lean 4 is the default Lean version, so everything is broken.</p>



<a name="238905458"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Creating%20a%20new%20Lean%20project/near/238905458" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Matthias U <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Creating.20a.20new.20Lean.20project.html#238905458">(May 15 2021 at 15:26)</a>:</h4>
<p><span class="user-mention silent" data-user-id="308899">Yakov Pechersky</span> <a href="#narrow/stream/113489-new-members/topic/Creating.20a.20new.20Lean.20project/near/238490885">said</a>:</p>
<blockquote>
<p>What do the following commands say, when running them from the directory where you ran <code>leanproject new</code>?</p>
<p><div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">elan</span> <span class="n">which</span> <span class="n">lean</span>
<span class="n">elan</span> <span class="n">toolchain</span> <span class="n">list</span>
</code></pre></div><br>
</p>
</blockquote>
<p>I get the following paths `/home/matthias/.elan/toolchains/leanprover-lean4-stable/bin/lean'</p>



<a name="238905477"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Creating%20a%20new%20Lean%20project/near/238905477" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Matthias U <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Creating.20a.20new.20Lean.20project.html#238905477">(May 15 2021 at 15:26)</a>:</h4>
<p>and <code>stable
leanprover-community-lean-3.27.0
leanprover-community-lean-3.28.0
leanprover-lean4-stable (default)</code></p>



<a name="238906117"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Creating%20a%20new%20Lean%20project/near/238906117" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Matthias U <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Creating.20a.20new.20Lean.20project.html#238906117">(May 15 2021 at 15:37)</a>:</h4>
<p>I just fixed the problem! In case you're interested: I uninstalled elan via <code>elan self uninstall</code> and reran the installation of lean. Now <code>elan which lean</code> just yields <code>stable</code></p>



<a name="238906157"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Creating%20a%20new%20Lean%20project/near/238906157" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Matthias U <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Creating.20a.20new.20Lean.20project.html#238906157">(May 15 2021 at 15:38)</a>:</h4>
<p>Also then <code>leanproject new my_project</code>works and installs mathlib without problems and I can use Lean normally afterwards.</p>



<a name="238906197"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Creating%20a%20new%20Lean%20project/near/238906197" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Matthias U <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Creating.20a.20new.20Lean.20project.html#238906197">(May 15 2021 at 15:38)</a>:</h4>
<p>Thank you very much for your help!</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>