---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/Hypotheses.20and.20avoiding.20repetition.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Hypotheses.20and.20avoiding.20repetition.html">Hypotheses and avoiding repetition</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="207587375"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Hypotheses%20and%20avoiding%20repetition/near/207587375" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wrenna Robson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Hypotheses.20and.20avoiding.20repetition.html#207587375">(Aug 20 2020 at 23:44)</a>:</h4>
<p>Suppose I have (P or Q) and (P -&gt; Q -&gt; R) theorems. I have R as a goal. I have a proof P -&gt; Q and a proof Q -&gt; P (which are similar but not the same). What's the most efficient way of putting these all together?</p>



<a name="207587924"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Hypotheses%20and%20avoiding%20repetition/near/207587924" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Hypotheses.20and.20avoiding.20repetition.html#207587924">(Aug 20 2020 at 23:53)</a>:</h4>
<p><code>finish</code>?</p>



<a name="207587935"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Hypotheses%20and%20avoiding%20repetition/near/207587935" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Hypotheses.20and.20avoiding.20repetition.html#207587935">(Aug 20 2020 at 23:53)</a>:</h4>
<p><code>tauto!</code>?</p>



<a name="207587995"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Hypotheses%20and%20avoiding%20repetition/near/207587995" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Hypotheses.20and.20avoiding.20repetition.html#207587995">(Aug 20 2020 at 23:54)</a>:</h4>
<p>You know, you could just state this question completely in lean and sorry the proof and post here in triple back ticks</p>



<a name="207588005"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Hypotheses%20and%20avoiding%20repetition/near/207588005" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Hypotheses.20and.20avoiding.20repetition.html#207588005">(Aug 20 2020 at 23:55)</a>:</h4>
<p>Then it's much easier for other people to play along</p>



<a name="207588228"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Hypotheses%20and%20avoiding%20repetition/near/207588228" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Hypotheses.20and.20avoiding.20repetition.html#207588228">(Aug 20 2020 at 23:58)</a>:</h4>
<p>I'm on mobile right now but I'll gamble.</p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="n">tactic</span>

<span class="kn">variables</span> <span class="o">(</span><span class="n">P</span> <span class="n">Q</span> <span class="n">R</span> <span class="o">:</span> <span class="kt">Prop</span><span class="o">)</span>

<span class="kn">example</span> <span class="o">(</span><span class="n">h1</span> <span class="o">:</span> <span class="n">or</span> <span class="n">P</span> <span class="n">Q</span><span class="o">)</span> <span class="o">(</span><span class="n">h2</span> <span class="o">:</span> <span class="n">P</span> <span class="bp">-&gt;</span> <span class="n">Q</span> <span class="bp">-&gt;</span> <span class="n">R</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">h3</span> <span class="o">:</span> <span class="n">P</span> <span class="bp">-&gt;</span> <span class="n">Q</span><span class="o">)</span> <span class="o">(</span><span class="n">h4</span> <span class="o">:</span> <span class="n">Q</span> <span class="bp">-&gt;</span> <span class="n">P</span><span class="o">)</span> <span class="o">:</span> <span class="n">R</span> <span class="o">:=</span> <span class="n">sorry</span>
</code></pre></div>



<a name="207588257"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Hypotheses%20and%20avoiding%20repetition/near/207588257" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Hypotheses.20and.20avoiding.20repetition.html#207588257">(Aug 20 2020 at 23:59)</a>:</h4>
<p>I don't have Unicode on my phone. Can someone recommend a better keyboard for Android?</p>



<a name="207588396"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Hypotheses%20and%20avoiding%20repetition/near/207588396" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Hypotheses.20and.20avoiding.20repetition.html#207588396">(Aug 21 2020 at 00:00)</a>:</h4>
<p>If you want a term mode proof then <code>h1.elim (λ hp, h2 hp (h3 hp)) (λ hq, h2 (h4 hq) hq)</code> should work.</p>



<a name="207588661"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Hypotheses%20and%20avoiding%20repetition/near/207588661" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wrenna Robson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Hypotheses.20and.20avoiding.20repetition.html#207588661">(Aug 21 2020 at 00:04)</a>:</h4>
<p>Sorry! I was on my phone too!</p>



<a name="207588919"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Hypotheses%20and%20avoiding%20repetition/near/207588919" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wrenna Robson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Hypotheses.20and.20avoiding.20repetition.html#207588919">(Aug 21 2020 at 00:07)</a>:</h4>
<p>To be more precise, then: I'm on the 3rd tutorial sheet.</p>
<div class="codehilite"><pre><span></span><code><span class="kn">example</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">non_decreasing</span> <span class="n">f</span><span class="o">)</span> <span class="o">(</span><span class="n">h&#39;</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">x</span><span class="o">,</span> <span class="n">f</span> <span class="o">(</span><span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="bp">=</span> <span class="n">x</span><span class="o">)</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">x</span><span class="o">,</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">x</span> <span class="o">:=</span>
<span class="k">begin</span>
 <span class="n">sorry</span><span class="o">,</span>
<span class="kn">end</span>
</code></pre></div>


<p>It recommends using:<br>
<code>le_total x y : x ≤ y ∨ y ≤ x</code></p>
<p>and of course, I have <code>le_antisymm</code>, although I don't know if I will need it.</p>
<p>Given the hypotheses, it's not hard to show that f(x) ≤ x if and only if x ≤ f(x)! What I want to avoid is splitting the cases wrongly and ending up repeating myself! I had a proof but it felt insufficiently optimised.</p>



<a name="207589933"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Hypotheses%20and%20avoiding%20repetition/near/207589933" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Hypotheses.20and.20avoiding.20repetition.html#207589933">(Aug 21 2020 at 00:25)</a>:</h4>
<p>This is not an <a href="https://leanprover-community.github.io/mwe.html">#mwe</a> because it lacks the definition of <code>non_decreasing</code>.</p>



<a name="207590144"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Hypotheses%20and%20avoiding%20repetition/near/207590144" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wrenna Robson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Hypotheses.20and.20avoiding.20repetition.html#207590144">(Aug 21 2020 at 00:29)</a>:</h4>
<p>Ah, I'm sorry.</p>
<div class="codehilite"><pre><span></span><code><span class="n">def</span> <span class="n">non_decreasing</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">:=</span> <span class="bp">∀</span> <span class="n">x₁</span> <span class="n">x₂</span><span class="o">,</span> <span class="n">x₁</span> <span class="bp">≤</span> <span class="n">x₂</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">x₁</span> <span class="bp">≤</span> <span class="n">f</span> <span class="n">x₂</span>
<span class="kn">example</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">non_decreasing</span> <span class="n">f</span><span class="o">)</span> <span class="o">(</span><span class="n">h&#39;</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">x</span><span class="o">,</span> <span class="n">f</span> <span class="o">(</span><span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="bp">=</span> <span class="n">x</span><span class="o">)</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">x</span><span class="o">,</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">x</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">intro</span> <span class="n">x</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">bw</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">f</span><span class="o">(</span><span class="n">x</span><span class="o">)</span> <span class="bp">↔</span> <span class="n">f</span><span class="o">(</span><span class="n">x</span><span class="o">)</span> <span class="bp">≤</span> <span class="n">x</span><span class="o">,</span>
  <span class="n">split</span><span class="o">,</span>
  <span class="o">{</span>
    <span class="n">intro</span> <span class="n">t</span><span class="o">,</span>
    <span class="k">calc</span> <span class="n">f</span><span class="o">(</span><span class="n">x</span><span class="o">)</span> <span class="bp">≤</span> <span class="n">f</span><span class="o">(</span><span class="n">f</span><span class="o">(</span><span class="n">x</span><span class="o">))</span> <span class="o">:</span> <span class="n">h</span> <span class="n">x</span> <span class="o">(</span><span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="n">t</span>
    <span class="bp">...</span>       <span class="bp">=</span> <span class="n">x</span>       <span class="o">:</span> <span class="n">h&#39;</span> <span class="n">x</span><span class="o">,</span>
  <span class="o">},</span>
  <span class="o">{</span>
    <span class="n">intro</span> <span class="n">t</span><span class="o">,</span>
    <span class="k">calc</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">f</span><span class="o">(</span><span class="n">f</span><span class="o">(</span><span class="n">x</span><span class="o">))</span>  <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="o">(</span><span class="n">h&#39;</span> <span class="n">x</span><span class="o">)</span>
    <span class="bp">...</span>    <span class="bp">≤</span> <span class="n">f</span><span class="o">(</span><span class="n">x</span><span class="o">)</span>     <span class="o">:</span> <span class="n">h</span> <span class="o">(</span><span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="n">x</span> <span class="n">t</span><span class="o">,</span>
  <span class="o">},</span>
  <span class="k">have</span> <span class="n">j</span> <span class="o">:=</span> <span class="n">le_total</span> <span class="n">x</span> <span class="o">(</span><span class="n">f</span> <span class="n">x</span><span class="o">),</span>
  <span class="n">apply</span> <span class="n">le_antisymm</span><span class="o">,</span>
  <span class="n">finish</span><span class="o">,</span>
  <span class="n">finish</span><span class="o">,</span>
<span class="kn">end</span>
</code></pre></div>



<a name="207590159"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Hypotheses%20and%20avoiding%20repetition/near/207590159" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Hypotheses.20and.20avoiding.20repetition.html#207590159">(Aug 21 2020 at 00:29)</a>:</h4>
<p><span class="user-mention silent" data-user-id="214703">Yury G. Kudryashov</span> <a href="#narrow/stream/113489-new-members/topic/Hypotheses.20and.20avoiding.20repetition/near/207589933">said</a>:</p>
<blockquote>
<p>This is not an <a href="https://leanprover-community.github.io/mwe.html">#mwe</a> because it lacks the definition of <code>non_decreasing</code>.</p>
</blockquote>
<p>That should be ok; this is Massot's tutorial, exercise 0028 in <code>03_forall_or.lean</code> (though it would have been better if <span class="user-mention" data-user-id="330967">@Wrenna Robson</span>  mentioned this <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span>)</p>



<a name="207590206"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Hypotheses%20and%20avoiding%20repetition/near/207590206" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wrenna Robson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Hypotheses.20and.20avoiding.20repetition.html#207590206">(Aug 21 2020 at 00:30)</a>:</h4>
<p>That's what I now have. Which is... OK. But the end feels untidy.</p>



<a name="207590243"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Hypotheses%20and%20avoiding%20repetition/near/207590243" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Hypotheses.20and.20avoiding.20repetition.html#207590243">(Aug 21 2020 at 00:30)</a>:</h4>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="n">order</span><span class="bp">.</span><span class="n">basic</span>

<span class="kn">example</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">linear_order</span> <span class="n">α</span><span class="o">]</span> <span class="o">{</span><span class="n">f</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">α</span><span class="o">}</span> <span class="o">(</span><span class="n">hf</span> <span class="o">:</span> <span class="n">monotone</span> <span class="n">f</span><span class="o">)</span> <span class="o">(</span><span class="n">hf₂</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">x</span><span class="o">,</span> <span class="n">f</span> <span class="o">(</span><span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="bp">=</span> <span class="n">x</span><span class="o">)</span> <span class="o">(</span><span class="n">x</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">f</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">x</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">le_total</span> <span class="n">x</span> <span class="o">(</span><span class="n">f</span> <span class="n">x</span><span class="o">))</span><span class="bp">.</span><span class="n">elim</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">hx</span><span class="o">,</span> <span class="n">le_antisymm</span> <span class="o">(</span><span class="k">by</span> <span class="n">simpa</span> <span class="n">only</span> <span class="o">[</span><span class="n">hf₂</span><span class="o">]</span> <span class="kn">using</span> <span class="n">hf</span> <span class="n">hx</span><span class="o">)</span> <span class="n">hx</span><span class="o">)</span>
  <span class="o">(</span><span class="bp">λ</span> <span class="n">hx</span><span class="o">,</span> <span class="n">le_antisymm</span> <span class="n">hx</span> <span class="err">$</span> <span class="k">by</span> <span class="n">simpa</span> <span class="n">only</span> <span class="o">[</span><span class="n">hf₂</span><span class="o">]</span> <span class="kn">using</span> <span class="n">hf</span> <span class="n">hx</span><span class="o">)</span>
</code></pre></div>



<a name="207590399"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Hypotheses%20and%20avoiding%20repetition/near/207590399" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Hypotheses.20and.20avoiding.20repetition.html#207590399">(Aug 21 2020 at 00:33)</a>:</h4>
<p>I found my solution to this.   It looks like it's pretty much the same, except things are not annunciated with <code>calc</code> statements, and I used <code>cases</code> rather than proving an iff first:</p>
<div class="codehilite"><pre><span></span><code><span class="kn">example</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">non_decreasing</span> <span class="n">f</span><span class="o">)</span> <span class="o">(</span><span class="n">h&#39;</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">x</span><span class="o">,</span> <span class="n">f</span> <span class="o">(</span><span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="bp">=</span> <span class="n">x</span><span class="o">)</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">x</span><span class="o">,</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">x</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">intro</span> <span class="n">x</span><span class="o">,</span>
  <span class="n">unfold</span> <span class="n">non_decreasing</span> <span class="n">at</span> <span class="n">h</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">h₁</span> <span class="o">:=</span> <span class="n">h</span> <span class="o">(</span><span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="n">x</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">h₂</span> <span class="o">:=</span> <span class="n">h</span> <span class="n">x</span> <span class="o">(</span><span class="n">f</span> <span class="n">x</span><span class="o">),</span>
  <span class="n">rw</span> <span class="n">h&#39;</span> <span class="n">at</span> <span class="n">h₁</span><span class="o">,</span> <span class="n">rw</span> <span class="n">h&#39;</span> <span class="n">at</span> <span class="n">h₂</span><span class="o">,</span>
  <span class="n">cases</span> <span class="n">le_total</span> <span class="o">(</span><span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="n">x</span> <span class="k">with</span> <span class="n">hc</span> <span class="n">hc</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">specialize</span> <span class="n">h₁</span> <span class="n">hc</span><span class="o">,</span> <span class="n">linarith</span><span class="o">},</span>
  <span class="o">{</span> <span class="n">specialize</span> <span class="n">h₂</span> <span class="n">hc</span><span class="o">,</span> <span class="n">linarith</span><span class="o">},</span>
<span class="kn">end</span>
</code></pre></div>



<a name="207590503"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Hypotheses%20and%20avoiding%20repetition/near/207590503" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wrenna Robson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Hypotheses.20and.20avoiding.20repetition.html#207590503">(Aug 21 2020 at 00:34)</a>:</h4>
<p>Oh, that's quite nice. You avoid the use of le_antisymm (I assume that is cracked by the hammer that is linarith?)</p>



<a name="207590511"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Hypotheses%20and%20avoiding%20repetition/near/207590511" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Hypotheses.20and.20avoiding.20repetition.html#207590511">(Aug 21 2020 at 00:34)</a>:</h4>
<p>It can be simplified a little:</p>
<div class="codehilite"><pre><span></span><code><span class="kn">example</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">non_decreasing</span> <span class="n">f</span><span class="o">)</span> <span class="o">(</span><span class="n">h&#39;</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">x</span><span class="o">,</span> <span class="n">f</span> <span class="o">(</span><span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="bp">=</span> <span class="n">x</span><span class="o">)</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">x</span><span class="o">,</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">x</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">intro</span> <span class="n">x</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">h₁</span> <span class="o">:=</span> <span class="n">h</span> <span class="o">(</span><span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="n">x</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">h₂</span> <span class="o">:=</span> <span class="n">h</span> <span class="n">x</span> <span class="o">(</span><span class="n">f</span> <span class="n">x</span><span class="o">),</span>
  <span class="n">rw</span> <span class="n">h&#39;</span> <span class="n">at</span> <span class="n">h₁</span> <span class="n">h₂</span><span class="o">,</span>
  <span class="n">cases</span> <span class="n">le_total</span> <span class="o">(</span><span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="n">x</span> <span class="k">with</span> <span class="n">hc</span> <span class="n">hc</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">specialize</span> <span class="n">h₁</span> <span class="n">hc</span><span class="o">,</span> <span class="n">linarith</span><span class="o">},</span>
  <span class="o">{</span> <span class="n">specialize</span> <span class="n">h₂</span> <span class="n">hc</span><span class="o">,</span> <span class="n">linarith</span><span class="o">},</span>
<span class="kn">end</span>
</code></pre></div>



<a name="207590529"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Hypotheses%20and%20avoiding%20repetition/near/207590529" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wrenna Robson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Hypotheses.20and.20avoiding.20repetition.html#207590529">(Aug 21 2020 at 00:35)</a>:</h4>
<p>Yes; the unfold doesn't do Lean any benefit?</p>



<a name="207590540"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Hypotheses%20and%20avoiding%20repetition/near/207590540" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Hypotheses.20and.20avoiding.20repetition.html#207590540">(Aug 21 2020 at 00:35)</a>:</h4>
<p><span class="user-mention silent" data-user-id="330967">Wrenna Robson</span> <a href="#narrow/stream/113489-new-members/topic/Hypotheses.20and.20avoiding.20repetition/near/207590503">said</a>:</p>
<blockquote>
<p>You avoid the use of le_antisymm (I assume that is cracked by the hammer that is linarith?)</p>
</blockquote>
<p>Yeah, that's what it looks like is happening.</p>



<a name="207590596"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Hypotheses%20and%20avoiding%20repetition/near/207590596" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wrenna Robson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Hypotheses.20and.20avoiding.20repetition.html#207590596">(Aug 21 2020 at 00:36)</a>:</h4>
<p>In <code>rw h' at h₁ h₂</code>, what is this doing: apply rw h' at each of them in turn?</p>



<a name="207590610"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Hypotheses%20and%20avoiding%20repetition/near/207590610" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Hypotheses.20and.20avoiding.20repetition.html#207590610">(Aug 21 2020 at 00:36)</a>:</h4>
<p>The unfold must have been there for me to notice I could apply <code>f x</code> and <code>x</code> as arguments to it, but Lean will unfold the definition for you as you do the application.</p>



<a name="207590624"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Hypotheses%20and%20avoiding%20repetition/near/207590624" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Hypotheses.20and.20avoiding.20repetition.html#207590624">(Aug 21 2020 at 00:36)</a>:</h4>
<p>I guess <code>linarith</code> won't work for a <code>linear_order α</code>, it needs <code>real</code></p>



<a name="207590647"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Hypotheses%20and%20avoiding%20repetition/near/207590647" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Hypotheses.20and.20avoiding.20repetition.html#207590647">(Aug 21 2020 at 00:37)</a>:</h4>
<p>And yes, <code>rw</code> can be <code>at</code> multiple hypotheses to do multiple rewrites.  You can explicitly rewrite the goal with <code>at ⊢</code> (entered with <code>\|-</code>).</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>