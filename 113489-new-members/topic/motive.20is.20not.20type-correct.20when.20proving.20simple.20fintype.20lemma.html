---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/motive.20is.20not.20type-correct.20when.20proving.20simple.20fintype.20lemma.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/motive.20is.20not.20type-correct.20when.20proving.20simple.20fintype.20lemma.html">motive is not type-correct when proving simple fintype lemma</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="203537195"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/motive%20is%20not%20type-correct%20when%20proving%20simple%20fintype%20lemma/near/203537195" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Carl Friedrich Bolz-Tereick <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/motive.20is.20not.20type-correct.20when.20proving.20simple.20fintype.20lemma.html#203537195">(Jul 10 2020 at 17:45)</a>:</h4>
<p>I am doing some stuff with sets/finsets/fintypes and was running into this error that I don't understand. mwe:</p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="n">tactic</span>
<span class="kn">import</span> <span class="n">tactic</span><span class="bp">.</span><span class="n">find</span>
<span class="kn">import</span> <span class="n">tactic</span><span class="bp">.</span><span class="n">suggest</span>
<span class="kn">import</span> <span class="n">data</span><span class="bp">.</span><span class="n">fintype</span><span class="bp">.</span><span class="n">basic</span>
<span class="kn">import</span> <span class="n">data</span><span class="bp">.</span><span class="n">setoid</span><span class="bp">.</span><span class="n">partition</span>

<span class="kn">variables</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">}</span> <span class="o">{</span><span class="n">β</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">}</span> <span class="o">{</span><span class="n">γ</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">}</span>

<span class="n">open_locale</span> <span class="n">classical</span>
<span class="n">open_locale</span> <span class="n">big_operators</span>

<span class="kn">lemma</span> <span class="n">minimal</span> <span class="o">(</span><span class="n">s1</span> <span class="n">s2</span> <span class="o">:</span> <span class="n">set</span> <span class="n">α</span><span class="o">)</span> <span class="o">[</span><span class="n">fintype</span> <span class="n">α</span><span class="o">]</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">s1</span> <span class="err">∩</span> <span class="n">s2</span> <span class="bp">=</span> <span class="err">∅</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">s1</span> <span class="err">∩</span> <span class="n">s2</span><span class="o">)</span><span class="bp">.</span><span class="n">to_finset</span> <span class="bp">=</span> <span class="err">∅</span> <span class="o">:=</span>
<span class="k">begin</span>
    <span class="c1">--fails with:</span>
    <span class="c1">-- rewrite tactic failed, motive is not type correct</span>
    <span class="c1">-- λ (_a : set α), (s1 ∩ s2).to_finset = ∅ = (_a.to_finset = ∅)</span>
    <span class="n">rw</span> <span class="n">h</span><span class="o">,</span>
<span class="kn">end</span>
</code></pre></div>


<p>Any hints why this happens?</p>



<a name="203538269"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/motive%20is%20not%20type-correct%20when%20proving%20simple%20fintype%20lemma/near/203538269" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/motive.20is.20not.20type-correct.20when.20proving.20simple.20fintype.20lemma.html#203538269">(Jul 10 2020 at 17:55)</a>:</h4>
<p>Try <code>simp only [h]</code></p>



<a name="203538422"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/motive%20is%20not%20type-correct%20when%20proving%20simple%20fintype%20lemma/near/203538422" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/motive.20is.20not.20type-correct.20when.20proving.20simple.20fintype.20lemma.html#203538422">(Jul 10 2020 at 17:57)</a>:</h4>
<p>It happens because the rewrite tactic is not powerful enough to do the rewrite you want. There is a hidden proof that s1 cap s2 has some property, and the rewrite didn't change it into a proof that the empty set had the property</p>



<a name="203538531"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/motive%20is%20not%20type-correct%20when%20proving%20simple%20fintype%20lemma/near/203538531" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/motive.20is.20not.20type-correct.20when.20proving.20simple.20fintype.20lemma.html#203538531">(Jul 10 2020 at 17:58)</a>:</h4>
<p>you can also probably avoid it by doing whatever you were planning to do next first</p>



<a name="203538787"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/motive%20is%20not%20type-correct%20when%20proving%20simple%20fintype%20lemma/near/203538787" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Carl Friedrich Bolz-Tereick <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/motive.20is.20not.20type-correct.20when.20proving.20simple.20fintype.20lemma.html#203538787">(Jul 10 2020 at 18:00)</a>:</h4>
<p>simp only [h] gives me the goal "∅.to_finset = ∅"<br>
I hoped refl would close this, but somehow doesn't in this situation</p>



<a name="203538913"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/motive%20is%20not%20type-correct%20when%20proving%20simple%20fintype%20lemma/near/203538913" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/motive.20is.20not.20type-correct.20when.20proving.20simple.20fintype.20lemma.html#203538913">(Jul 10 2020 at 18:01)</a>:</h4>
<p>Maybe <code>simp</code> finishes it, it looks like a good simp lemma</p>



<a name="203538981"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/motive%20is%20not%20type-correct%20when%20proving%20simple%20fintype%20lemma/near/203538981" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/motive.20is.20not.20type-correct.20when.20proving.20simple.20fintype.20lemma.html#203538981">(Jul 10 2020 at 18:01)</a>:</h4>
<p>If it does then <code>simp [h]</code> probably does the proof in one line</p>



<a name="203539057"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/motive%20is%20not%20type-correct%20when%20proving%20simple%20fintype%20lemma/near/203539057" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/motive.20is.20not.20type-correct.20when.20proving.20simple.20fintype.20lemma.html#203539057">(Jul 10 2020 at 18:02)</a>:</h4>
<p>You can unfold everything to find out why <code>refl</code>doesn't work</p>



<a name="203539104"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/motive%20is%20not%20type-correct%20when%20proving%20simple%20fintype%20lemma/near/203539104" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/motive.20is.20not.20type-correct.20when.20proving.20simple.20fintype.20lemma.html#203539104">(Jul 10 2020 at 18:02)</a>:</h4>
<p>seems like a missing lemma</p>



<a name="203539107"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/motive%20is%20not%20type-correct%20when%20proving%20simple%20fintype%20lemma/near/203539107" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Carl Friedrich Bolz-Tereick <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/motive.20is.20not.20type-correct.20when.20proving.20simple.20fintype.20lemma.html#203539107">(Jul 10 2020 at 18:02)</a>:</h4>
<p>no, if I put "∅.to_finset = ∅" into its own lemma, then refl proves it. but in the context of  my strange "minimal" thing, neither simp nor refl do <span aria-label="thinking" class="emoji emoji-1f914" role="img" title="thinking">:thinking:</span></p>



<a name="203539130"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/motive%20is%20not%20type-correct%20when%20proving%20simple%20fintype%20lemma/near/203539130" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/motive.20is.20not.20type-correct.20when.20proving.20simple.20fintype.20lemma.html#203539130">(Jul 10 2020 at 18:02)</a>:</h4>
<p>Try congr</p>



<a name="203539134"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/motive%20is%20not%20type-correct%20when%20proving%20simple%20fintype%20lemma/near/203539134" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Carl Friedrich Bolz-Tereick <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/motive.20is.20not.20type-correct.20when.20proving.20simple.20fintype.20lemma.html#203539134">(Jul 10 2020 at 18:02)</a>:</h4>
<p>but "ext, simp" does <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span></p>



<a name="203539235"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/motive%20is%20not%20type-correct%20when%20proving%20simple%20fintype%20lemma/near/203539235" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/motive.20is.20not.20type-correct.20when.20proving.20simple.20fintype.20lemma.html#203539235">(Jul 10 2020 at 18:03)</a>:</h4>
<p>I think finset is subsingleton data</p>



<a name="203539293"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/motive%20is%20not%20type-correct%20when%20proving%20simple%20fintype%20lemma/near/203539293" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/motive.20is.20not.20type-correct.20when.20proving.20simple.20fintype.20lemma.html#203539293">(Jul 10 2020 at 18:04)</a>:</h4>
<p>Blame the computer scientists</p>



<a name="203539294"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/motive%20is%20not%20type-correct%20when%20proving%20simple%20fintype%20lemma/near/203539294" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/motive.20is.20not.20type-correct.20when.20proving.20simple.20fintype.20lemma.html#203539294">(Jul 10 2020 at 18:04)</a>:</h4>
<p><code>∅.to_finset = ∅</code> needs induction on the <code>fintype</code> I think</p>



<a name="203539336"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/motive%20is%20not%20type-correct%20when%20proving%20simple%20fintype%20lemma/near/203539336" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/motive.20is.20not.20type-correct.20when.20proving.20simple.20fintype.20lemma.html#203539336">(Jul 10 2020 at 18:04)</a>:</h4>
<p>Does congr or congr' work?</p>



<a name="203539393"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/motive%20is%20not%20type-correct%20when%20proving%20simple%20fintype%20lemma/near/203539393" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Carl Friedrich Bolz-Tereick <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/motive.20is.20not.20type-correct.20when.20proving.20simple.20fintype.20lemma.html#203539393">(Jul 10 2020 at 18:05)</a>:</h4>
<p>nope</p>



<a name="203539466"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/motive%20is%20not%20type-correct%20when%20proving%20simple%20fintype%20lemma/near/203539466" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/motive.20is.20not.20type-correct.20when.20proving.20simple.20fintype.20lemma.html#203539466">(Jul 10 2020 at 18:05)</a>:</h4>
<p>Am I right in thinking that finset is subsingleton data?</p>



<a name="203539539"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/motive%20is%20not%20type-correct%20when%20proving%20simple%20fintype%20lemma/near/203539539" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/motive.20is.20not.20type-correct.20when.20proving.20simple.20fintype.20lemma.html#203539539">(Jul 10 2020 at 18:06)</a>:</h4>
<p><code>finset x</code> has type Type but is a subsingleton?</p>



<a name="203539550"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/motive%20is%20not%20type-correct%20when%20proving%20simple%20fintype%20lemma/near/203539550" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Carl Friedrich Bolz-Tereick <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/motive.20is.20not.20type-correct.20when.20proving.20simple.20fintype.20lemma.html#203539550">(Jul 10 2020 at 18:06)</a>:</h4>
<p>I don't know what subsingleton is</p>



<a name="203539613"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/motive%20is%20not%20type-correct%20when%20proving%20simple%20fintype%20lemma/near/203539613" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/motive.20is.20not.20type-correct.20when.20proving.20simple.20fintype.20lemma.html#203539613">(Jul 10 2020 at 18:06)</a>:</h4>
<p>A type with at most 1 term</p>



<a name="203539640"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/motive%20is%20not%20type-correct%20when%20proving%20simple%20fintype%20lemma/near/203539640" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/motive.20is.20not.20type-correct.20when.20proving.20simple.20fintype.20lemma.html#203539640">(Jul 10 2020 at 18:07)</a>:</h4>
<p>I'm sure I'm trying to ask something but I haven't got it straight yet</p>



<a name="203539692"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/motive%20is%20not%20type-correct%20when%20proving%20simple%20fintype%20lemma/near/203539692" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/motive.20is.20not.20type-correct.20when.20proving.20simple.20fintype.20lemma.html#203539692">(Jul 10 2020 at 18:07)</a>:</h4>
<p>Does to_finset use the fintype type class?</p>



<a name="203539694"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/motive%20is%20not%20type-correct%20when%20proving%20simple%20fintype%20lemma/near/203539694" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/motive.20is.20not.20type-correct.20when.20proving.20simple.20fintype.20lemma.html#203539694">(Jul 10 2020 at 18:07)</a>:</h4>
<p><code>finset α</code> is not a subsingleton, it's like <code>set α</code> + a subsingleton</p>



<a name="203539730"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/motive%20is%20not%20type-correct%20when%20proving%20simple%20fintype%20lemma/near/203539730" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/motive.20is.20not.20type-correct.20when.20proving.20simple.20fintype.20lemma.html#203539730">(Jul 10 2020 at 18:07)</a>:</h4>
<p>Right</p>



<a name="203539782"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/motive%20is%20not%20type-correct%20when%20proving%20simple%20fintype%20lemma/near/203539782" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Carl Friedrich Bolz-Tereick <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/motive.20is.20not.20type-correct.20when.20proving.20simple.20fintype.20lemma.html#203539782">(Jul 10 2020 at 18:08)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> yes, and fintype is subsingleton</p>



<a name="203539790"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/motive%20is%20not%20type-correct%20when%20proving%20simple%20fintype%20lemma/near/203539790" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/motive.20is.20not.20type-correct.20when.20proving.20simple.20fintype.20lemma.html#203539790">(Jul 10 2020 at 18:08)</a>:</h4>
<p><code>to_finset</code> is basically "go through the list of everything that exists and keep the ones that belong to this <code>set</code>"</p>



<a name="203539860"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/motive%20is%20not%20type-correct%20when%20proving%20simple%20fintype%20lemma/near/203539860" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/motive.20is.20not.20type-correct.20when.20proving.20simple.20fintype.20lemma.html#203539860">(Jul 10 2020 at 18:09)</a>:</h4>
<p>So if you prove the lemma independently and give it a name like <code>empty_to_finset</code> and PR to mathlib</p>



<a name="203539897"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/motive%20is%20not%20type-correct%20when%20proving%20simple%20fintype%20lemma/near/203539897" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/motive.20is.20not.20type-correct.20when.20proving.20simple.20fintype.20lemma.html#203539897">(Jul 10 2020 at 18:09)</a>:</h4>
<p>I think it's a <code>decidable</code> instance that causes the original error?</p>



<a name="203539958"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/motive%20is%20not%20type-correct%20when%20proving%20simple%20fintype%20lemma/near/203539958" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/motive.20is.20not.20type-correct.20when.20proving.20simple.20fintype.20lemma.html#203539958">(Jul 10 2020 at 18:10)</a>:</h4>
<p>Then will <code>convert empty_to_finset</code> do it? Oh -- not if the proof is refl</p>



<a name="203539991"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/motive%20is%20not%20type-correct%20when%20proving%20simple%20fintype%20lemma/near/203539991" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/motive.20is.20not.20type-correct.20when.20proving.20simple.20fintype.20lemma.html#203539991">(Jul 10 2020 at 18:10)</a>:</h4>
<p>wait, maybe not?</p>



<a name="203540024"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/motive%20is%20not%20type-correct%20when%20proving%20simple%20fintype%20lemma/near/203540024" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/motive.20is.20not.20type-correct.20when.20proving.20simple.20fintype.20lemma.html#203540024">(Jul 10 2020 at 18:10)</a>:</h4>
<p>oh it's a <code>fintype</code> on the coerced set</p>



<a name="203540075"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/motive%20is%20not%20type-correct%20when%20proving%20simple%20fintype%20lemma/near/203540075" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Carl Friedrich Bolz-Tereick <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/motive.20is.20not.20type-correct.20when.20proving.20simple.20fintype.20lemma.html#203540075">(Jul 10 2020 at 18:10)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> trying that makes me more confused:</p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="n">tactic</span>
<span class="kn">import</span> <span class="n">tactic</span><span class="bp">.</span><span class="n">find</span>
<span class="kn">import</span> <span class="n">tactic</span><span class="bp">.</span><span class="n">suggest</span>
<span class="kn">import</span> <span class="n">data</span><span class="bp">.</span><span class="n">fintype</span><span class="bp">.</span><span class="n">basic</span>
<span class="kn">import</span> <span class="n">data</span><span class="bp">.</span><span class="n">setoid</span><span class="bp">.</span><span class="n">partition</span>

<span class="kn">variables</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">}</span> <span class="o">{</span><span class="n">β</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">}</span> <span class="o">{</span><span class="n">γ</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">}</span>

<span class="n">open_locale</span> <span class="n">classical</span>
<span class="n">open_locale</span> <span class="n">big_operators</span>

<span class="c1">--set_option pp.all true</span>

<span class="kn">lemma</span> <span class="n">empty_to_finset</span> <span class="o">:</span> <span class="o">(</span><span class="err">∅</span> <span class="o">:</span> <span class="n">set</span> <span class="n">α</span><span class="o">)</span><span class="bp">.</span><span class="n">to_finset</span> <span class="bp">=</span> <span class="err">∅</span> <span class="o">:=</span>
<span class="k">begin</span>
    <span class="n">refl</span><span class="o">,</span> <span class="c1">-- works</span>
<span class="kn">end</span>

<span class="kn">lemma</span> <span class="n">minimal</span> <span class="o">(</span><span class="n">s1</span> <span class="n">s2</span> <span class="o">:</span> <span class="n">set</span> <span class="n">α</span><span class="o">)</span> <span class="o">[</span><span class="n">fintype</span> <span class="n">α</span><span class="o">]</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">s1</span> <span class="err">∩</span> <span class="n">s2</span> <span class="bp">=</span> <span class="err">∅</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">s1</span> <span class="err">∩</span> <span class="n">s2</span><span class="o">)</span><span class="bp">.</span><span class="n">to_finset</span> <span class="bp">=</span> <span class="err">∅</span> <span class="o">:=</span>
<span class="k">begin</span>
    <span class="n">simp</span> <span class="o">[</span><span class="n">h</span><span class="o">],</span> <span class="c1">-- now the goal is ∅.to_finset = ∅</span>
    <span class="n">apply</span> <span class="n">empty_to_finset</span><span class="o">,</span> <span class="c1">-- fails to unify :-(</span>
<span class="kn">end</span>
</code></pre></div>



<a name="203540113"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/motive%20is%20not%20type-correct%20when%20proving%20simple%20fintype%20lemma/near/203540113" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/motive.20is.20not.20type-correct.20when.20proving.20simple.20fintype.20lemma.html#203540113">(Jul 10 2020 at 18:11)</a>:</h4>
<p>Try convert</p>



<a name="203540122"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/motive%20is%20not%20type-correct%20when%20proving%20simple%20fintype%20lemma/near/203540122" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/motive.20is.20not.20type-correct.20when.20proving.20simple.20fintype.20lemma.html#203540122">(Jul 10 2020 at 18:11)</a>:</h4>
<p>you can put it near <a href="https://leanprover-community.github.io/mathlib_docs/find/set.to_finset_univ/src">src#set.to_finset_univ</a></p>



<a name="203540222"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/motive%20is%20not%20type-correct%20when%20proving%20simple%20fintype%20lemma/near/203540222" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/motive.20is.20not.20type-correct.20when.20proving.20simple.20fintype.20lemma.html#203540222">(Jul 10 2020 at 18:12)</a>:</h4>
<p>Prove it in term mode with <code>rfl</code> and make a PR. What's your GitHub userid?</p>



<a name="203540254"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/motive%20is%20not%20type-correct%20when%20proving%20simple%20fintype%20lemma/near/203540254" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Carl Friedrich Bolz-Tereick <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/motive.20is.20not.20type-correct.20when.20proving.20simple.20fintype.20lemma.html#203540254">(Jul 10 2020 at 18:12)</a>:</h4>
<p>cfbolz</p>



<a name="203540262"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/motive%20is%20not%20type-correct%20when%20proving%20simple%20fintype%20lemma/near/203540262" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/motive.20is.20not.20type-correct.20when.20proving.20simple.20fintype.20lemma.html#203540262">(Jul 10 2020 at 18:12)</a>:</h4>
<p>Because one has the global instance of <code>fintype ∅</code> and the other has the one that comes from being a subset</p>



<a name="203540298"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/motive%20is%20not%20type-correct%20when%20proving%20simple%20fintype%20lemma/near/203540298" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/motive.20is.20not.20type-correct.20when.20proving.20simple.20fintype.20lemma.html#203540298">(Jul 10 2020 at 18:12)</a>:</h4>
<p>Do you already have write access to non master branches of mathlib?</p>



<a name="203540299"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/motive%20is%20not%20type-correct%20when%20proving%20simple%20fintype%20lemma/near/203540299" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/motive.20is.20not.20type-correct.20when.20proving.20simple.20fintype.20lemma.html#203540299">(Jul 10 2020 at 18:12)</a>:</h4>
<p>Is it a simp lemma?</p>



<a name="203540352"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/motive%20is%20not%20type-correct%20when%20proving%20simple%20fintype%20lemma/near/203540352" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/motive.20is.20not.20type-correct.20when.20proving.20simple.20fintype.20lemma.html#203540352">(Jul 10 2020 at 18:13)</a>:</h4>
<p>So convert should do it</p>



<a name="203540375"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/motive%20is%20not%20type-correct%20when%20proving%20simple%20fintype%20lemma/near/203540375" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/motive.20is.20not.20type-correct.20when.20proving.20simple.20fintype.20lemma.html#203540375">(Jul 10 2020 at 18:13)</a>:</h4>
<p>But then I'm surprised congr didn't work</p>



<a name="203540521"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/motive%20is%20not%20type-correct%20when%20proving%20simple%20fintype%20lemma/near/203540521" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Carl Friedrich Bolz-Tereick <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/motive.20is.20not.20type-correct.20when.20proving.20simple.20fintype.20lemma.html#203540521">(Jul 10 2020 at 18:14)</a>:</h4>
<p>I don't have write access yet</p>



<a name="203540524"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/motive%20is%20not%20type-correct%20when%20proving%20simple%20fintype%20lemma/near/203540524" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/motive.20is.20not.20type-correct.20when.20proving.20simple.20fintype.20lemma.html#203540524">(Jul 10 2020 at 18:14)</a>:</h4>
<p>I'm not surprised that Lean needs this kind of help to see what combination of definitional rewriting + subsingleton will do the trick</p>



<a name="203540657"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/motive%20is%20not%20type-correct%20when%20proving%20simple%20fintype%20lemma/near/203540657" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Carl Friedrich Bolz-Tereick <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/motive.20is.20not.20type-correct.20when.20proving.20simple.20fintype.20lemma.html#203540657">(Jul 10 2020 at 18:15)</a>:</h4>
<p>(and nope, I couldn't get convert to do it either)</p>



<a name="203540815"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/motive%20is%20not%20type-correct%20when%20proving%20simple%20fintype%20lemma/near/203540815" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/motive.20is.20not.20type-correct.20when.20proving.20simple.20fintype.20lemma.html#203540815">(Jul 10 2020 at 18:17)</a>:</h4>
<p><code>simp [h], convert empty_to_finset</code> works for me (as expected)</p>



<a name="203540848"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/motive%20is%20not%20type-correct%20when%20proving%20simple%20fintype%20lemma/near/203540848" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Carl Friedrich Bolz-Tereick <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/motive.20is.20not.20type-correct.20when.20proving.20simple.20fintype.20lemma.html#203540848">(Jul 10 2020 at 18:17)</a>:</h4>
<p>ah! that convert I didn't try, thank you :-)</p>



<a name="203541005"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/motive%20is%20not%20type-correct%20when%20proving%20simple%20fintype%20lemma/near/203541005" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Carl Friedrich Bolz-Tereick <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/motive.20is.20not.20type-correct.20when.20proving.20simple.20fintype.20lemma.html#203541005">(Jul 10 2020 at 18:19)</a>:</h4>
<p>should I pull request it?</p>



<a name="203541041"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/motive%20is%20not%20type-correct%20when%20proving%20simple%20fintype%20lemma/near/203541041" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/motive.20is.20not.20type-correct.20when.20proving.20simple.20fintype.20lemma.html#203541041">(Jul 10 2020 at 18:19)</a>:</h4>
<p><span class="user-mention" data-user-id="306293">@Carl Friedrich Bolz-Tereick</span> I've sent you an invitation <a href="https://github.com/leanprover-community/mathlib/invitations">https://github.com/leanprover-community/mathlib/invitations</a></p>



<a name="203541069"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/motive%20is%20not%20type-correct%20when%20proving%20simple%20fintype%20lemma/near/203541069" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Carl Friedrich Bolz-Tereick <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/motive.20is.20not.20type-correct.20when.20proving.20simple.20fintype.20lemma.html#203541069">(Jul 10 2020 at 18:19)</a>:</h4>
<p>thanks a lot</p>



<a name="203541156"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/motive%20is%20not%20type-correct%20when%20proving%20simple%20fintype%20lemma/near/203541156" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/motive.20is.20not.20type-correct.20when.20proving.20simple.20fintype.20lemma.html#203541156">(Jul 10 2020 at 18:20)</a>:</h4>
<p>also simply <code>convert empty_to_finset</code> works for me too, not as expected</p>



<a name="203541179"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/motive%20is%20not%20type-correct%20when%20proving%20simple%20fintype%20lemma/near/203541179" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/motive.20is.20not.20type-correct.20when.20proving.20simple.20fintype.20lemma.html#203541179">(Jul 10 2020 at 18:20)</a>:</h4>
<p>does <code>convert</code> try <code>assumption</code> or something?</p>



<a name="203541181"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/motive%20is%20not%20type-correct%20when%20proving%20simple%20fintype%20lemma/near/203541181" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Carl Friedrich Bolz-Tereick <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/motive.20is.20not.20type-correct.20when.20proving.20simple.20fintype.20lemma.html#203541181">(Jul 10 2020 at 18:20)</a>:</h4>
<p>is there a document how to contribute (I am familiar with git/github, but stuff like conventions for commit messages etc?)</p>



<a name="203541230"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/motive%20is%20not%20type-correct%20when%20proving%20simple%20fintype%20lemma/near/203541230" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/motive.20is.20not.20type-correct.20when.20proving.20simple.20fintype.20lemma.html#203541230">(Jul 10 2020 at 18:21)</a>:</h4>
<p>Yes<br>
<a href="https://leanprover-community.github.io/contribute/index.html">https://leanprover-community.github.io/contribute/index.html</a><br>
<a href="https://github.com/leanprover-community/lean/blob/master/doc/commit_convention.md">https://github.com/leanprover-community/lean/blob/master/doc/commit_convention.md</a></p>



<a name="203541320"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/motive%20is%20not%20type-correct%20when%20proving%20simple%20fintype%20lemma/near/203541320" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Carl Friedrich Bolz-Tereick <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/motive.20is.20not.20type-correct.20when.20proving.20simple.20fintype.20lemma.html#203541320">(Jul 10 2020 at 18:22)</a>:</h4>
<p>thank you. I might have a few other small finset lemmas later</p>



<a name="203547683"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/motive%20is%20not%20type-correct%20when%20proving%20simple%20fintype%20lemma/near/203547683" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Carl Friedrich Bolz-Tereick <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/motive.20is.20not.20type-correct.20when.20proving.20simple.20fintype.20lemma.html#203547683">(Jul 10 2020 at 19:16)</a>:</h4>
<p>hm, in mathlib <code>rfl</code> doesn't prove the lemma (maybe because of the lack of <code>open_locale classical</code>?). but I can prove it analogously to <code>to_finset_univ</code>. should <code>to_finset_empty</code> be a <code>@[simp]</code> lemma too?</p>



<a name="203548825"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/motive%20is%20not%20type-correct%20when%20proving%20simple%20fintype%20lemma/near/203548825" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Carl Friedrich Bolz-Tereick <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/motive.20is.20not.20type-correct.20when.20proving.20simple.20fintype.20lemma.html#203548825">(Jul 10 2020 at 19:29)</a>:</h4>
<p>I guessed yes and opened a pull request: <a href="https://github.com/leanprover-community/mathlib/pull/3361">https://github.com/leanprover-community/mathlib/pull/3361</a></p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>