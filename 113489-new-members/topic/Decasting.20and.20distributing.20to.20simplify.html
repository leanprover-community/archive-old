---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/Decasting.20and.20distributing.20to.20simplify.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Decasting.20and.20distributing.20to.20simplify.html">Decasting and distributing to simplify</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="250952795"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Decasting%20and%20distributing%20to%20simplify/near/250952795" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Shadman Sakib <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Decasting.20and.20distributing.20to.20simplify.html#250952795">(Aug 27 2021 at 15:58)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">data.complex.basic</span>

<span class="kn">open</span> <span class="n">complex</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span><span class="o">:</span> <span class="n">ℤ</span><span class="o">)</span> <span class="o">:</span> <span class="mi">2</span> <span class="bp">*</span> <span class="o">(</span><span class="bp">-</span><span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">ℂ</span><span class="o">)</span> <span class="bp">-</span> <span class="bp">↑</span><span class="o">(</span><span class="mi">1</span> <span class="bp">/</span> <span class="mi">2</span><span class="o">)</span> <span class="bp">+</span> <span class="o">(</span><span class="n">b</span> <span class="bp">-</span> <span class="bp">↑</span><span class="o">(</span><span class="mi">1</span> <span class="bp">/</span> <span class="mi">2</span><span class="o">))</span> <span class="bp">*</span> <span class="n">I</span><span class="o">)</span> <span class="bp">=</span> <span class="bp">-</span><span class="mi">2</span> <span class="bp">*</span> <span class="n">a</span> <span class="bp">-</span> <span class="mi">1</span> <span class="bp">+</span> <span class="mi">2</span> <span class="bp">*</span> <span class="n">b</span> <span class="bp">*</span> <span class="n">I</span> <span class="bp">-</span> <span class="n">I</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="gr">sorry</span><span class="o">,</span>
<span class="kd">end</span>
</code></pre></div>



<a name="250952873"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Decasting%20and%20distributing%20to%20simplify/near/250952873" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Shadman Sakib <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Decasting.20and.20distributing.20to.20simplify.html#250952873">(Aug 27 2021 at 15:59)</a>:</h4>
<p>How can I decast the 1/2 to simply use ring to prove the goal?</p>



<a name="250954431"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Decasting%20and%20distributing%20to%20simplify/near/250954431" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Decasting.20and.20distributing.20to.20simplify.html#250954431">(Aug 27 2021 at 16:09)</a>:</h4>
<p>Do you intend for that to be <code>1 / 2</code> using integer division?  The <code>norm_num</code> tactic will reduce each <code>1 / 2</code> to <code>0</code> (and I think it's not true unless they're both an actual one-half).</p>



<a name="250954758"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Decasting%20and%20distributing%20to%20simplify/near/250954758" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Decasting.20and.20distributing.20to.20simplify.html#250954758">(Aug 27 2021 at 16:12)</a>:</h4>
<p>The general strategy for such things:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">data.complex.basic</span>

<span class="kn">open</span> <span class="n">complex</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span><span class="o">:</span> <span class="n">ℤ</span><span class="o">)</span> <span class="o">:</span> <span class="mi">2</span> <span class="bp">*</span> <span class="o">(</span><span class="bp">-</span><span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">ℂ</span><span class="o">)</span> <span class="bp">-</span> <span class="o">(</span><span class="mi">1</span> <span class="bp">/</span> <span class="mi">2</span><span class="o">)</span> <span class="bp">+</span> <span class="o">(</span><span class="n">b</span> <span class="bp">-</span> <span class="o">(</span><span class="mi">1</span> <span class="bp">/</span> <span class="mi">2</span><span class="o">))</span> <span class="bp">*</span> <span class="n">I</span><span class="o">)</span> <span class="bp">=</span> <span class="bp">-</span><span class="mi">2</span> <span class="bp">*</span> <span class="n">a</span> <span class="bp">-</span> <span class="mi">1</span> <span class="bp">+</span> <span class="mi">2</span> <span class="bp">*</span> <span class="n">b</span> <span class="bp">*</span> <span class="n">I</span> <span class="bp">-</span> <span class="n">I</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">field_simp</span><span class="o">,</span>
  <span class="n">ring</span><span class="o">,</span>
<span class="kd">end</span>
</code></pre></div>



<a name="250954778"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Decasting%20and%20distributing%20to%20simplify/near/250954778" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Decasting.20and.20distributing.20to.20simplify.html#250954778">(Aug 27 2021 at 16:12)</a>:</h4>
<p>(Note I removed the coercions.</p>



<a name="250954856"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Decasting%20and%20distributing%20to%20simplify/near/250954856" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Decasting.20and.20distributing.20to.20simplify.html#250954856">(Aug 27 2021 at 16:13)</a>:</h4>
<p>Illustrating the problem:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">example</span> <span class="o">:</span> <span class="o">((</span><span class="mi">1</span> <span class="bp">/</span> <span class="mi">2</span> <span class="o">:</span> <span class="n">ℤ</span><span class="o">)</span> <span class="o">:</span> <span class="n">ℂ</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="mi">0</span> <span class="o">:</span> <span class="n">ℂ</span><span class="o">)</span> <span class="o">:=</span> <span class="n">rfl</span>
</code></pre></div>



<a name="250956341"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Decasting%20and%20distributing%20to%20simplify/near/250956341" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Shadman Sakib <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Decasting.20and.20distributing.20to.20simplify.html#250956341">(Aug 27 2021 at 16:22)</a>:</h4>
<p>No the 1/2 should be coerced, but I didn't know <code>(1 / 2 : ℤ) : ℂ) = (0 : ℂ)</code></p>



<a name="250956364"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Decasting%20and%20distributing%20to%20simplify/near/250956364" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Shadman Sakib <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Decasting.20and.20distributing.20to.20simplify.html#250956364">(Aug 27 2021 at 16:23)</a>:</h4>
<p>Thank you for your help</p>



<a name="250956432"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Decasting%20and%20distributing%20to%20simplify/near/250956432" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Decasting.20and.20distributing.20to.20simplify.html#250956432">(Aug 27 2021 at 16:23)</a>:</h4>
<p>Should it be coerced from the rationals to <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="double-struck">C</mi></mrow><annotation encoding="application/x-tex">\mathbb C</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68889em;vertical-align:0em;"></span><span class="mord mathbb">C</span></span></span></span>?</p>



<a name="250957049"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Decasting%20and%20distributing%20to%20simplify/near/250957049" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Decasting.20and.20distributing.20to.20simplify.html#250957049">(Aug 27 2021 at 16:27)</a>:</h4>
<p>Because in that case, this works:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">example</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span><span class="o">:</span> <span class="n">ℤ</span><span class="o">)</span> <span class="o">:</span> <span class="mi">2</span> <span class="bp">*</span> <span class="o">(</span><span class="bp">-</span><span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">ℂ</span><span class="o">)</span> <span class="bp">-</span> <span class="o">(</span><span class="mi">1</span> <span class="bp">/</span> <span class="mi">2</span> <span class="o">:</span> <span class="n">ℚ</span><span class="o">)</span> <span class="bp">+</span> <span class="o">(</span><span class="n">b</span> <span class="bp">-</span> <span class="o">(</span><span class="mi">1</span> <span class="bp">/</span> <span class="mi">2</span> <span class="o">:</span> <span class="n">ℚ</span><span class="o">))</span> <span class="bp">*</span> <span class="n">I</span><span class="o">)</span> <span class="bp">=</span> <span class="bp">-</span><span class="mi">2</span> <span class="bp">*</span> <span class="n">a</span> <span class="bp">-</span> <span class="mi">1</span> <span class="bp">+</span> <span class="mi">2</span> <span class="bp">*</span> <span class="n">b</span> <span class="bp">*</span> <span class="n">I</span> <span class="bp">-</span> <span class="n">I</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">field_simp</span><span class="o">,</span>
  <span class="n">ring</span><span class="o">,</span>
<span class="kd">end</span>
</code></pre></div>



<a name="250957519"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Decasting%20and%20distributing%20to%20simplify/near/250957519" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Decasting.20and.20distributing.20to.20simplify.html#250957519">(Aug 27 2021 at 16:30)</a>:</h4>
<p>I tend to find the way type ascriptions work to be somewhat counter-intuitive (though it has a logic to it).  Since division has type <code>a -&gt; a -&gt; a</code>, by saying you want the result to be a rational, it causes <code>1</code> and <code>2</code> to be a rational as well.  They say casting goes "outside-in".</p>



<a name="250967145"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Decasting%20and%20distributing%20to%20simplify/near/250967145" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Decasting.20and.20distributing.20to.20simplify.html#250967145">(Aug 27 2021 at 17:40)</a>:</h4>
<p>You're subtracting 1/2 from something that lean knows is a complex number, so lean should know to coerce it to a complex number without any additional arrows</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>