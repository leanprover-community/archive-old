---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/lemma.20in.20mathlib.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/lemma.20in.20mathlib.html">lemma in mathlib</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="219618217"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/lemma%20in%20mathlib/near/219618217" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Calle Sönne <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/lemma.20in.20mathlib.html#219618217">(Dec 11 2020 at 15:20)</a>:</h4>
<p>Does anyone know of a lemma like the following in mathlib:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">subset_refined_of_subset_disjoint_cover</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">{</span><span class="n">Z</span> <span class="n">a</span> <span class="n">b</span> <span class="n">u</span> <span class="n">v</span> <span class="o">:</span> <span class="n">set</span> <span class="n">α</span><span class="o">}</span> <span class="o">(</span><span class="n">hZ</span> <span class="o">:</span> <span class="n">Z</span> <span class="bp">⊆</span> <span class="n">u</span><span class="o">)</span>
  <span class="o">(</span><span class="n">hbv</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">⊆</span> <span class="n">v</span><span class="o">)</span> <span class="o">(</span><span class="n">Zab</span> <span class="o">:</span> <span class="n">Z</span> <span class="bp">⊆</span> <span class="n">a</span> <span class="bp">∪</span> <span class="n">b</span><span class="o">)</span> <span class="o">(</span><span class="n">huv</span> <span class="o">:</span> <span class="n">u</span> <span class="bp">∩</span> <span class="n">v</span> <span class="bp">=</span> <span class="bp">∅</span><span class="o">)</span> <span class="o">:</span> <span class="n">Z</span> <span class="bp">⊆</span> <span class="n">a</span> <span class="o">:=</span>
</code></pre></div>
<p>I have looked through the partitions file, but there doesnt seem to be anything like this in there. Is there some name for lemmas about "disjoint covers by two sets" in lean? I am really not sure what to search to find this.</p>



<a name="219618327"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/lemma%20in%20mathlib/near/219618327" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Calle Sönne <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/lemma.20in.20mathlib.html#219618327">(Dec 11 2020 at 15:21)</a>:</h4>
<p><span class="user-mention silent" data-user-id="132603">Calle Sönne</span> <a href="#narrow/stream/113489-new-members/topic/lemma.20in.20mathlib/near/219618217">said</a>:</p>
<blockquote>
<p>Does anyone know of a lemma like the following in mathlib:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">subset_refined_of_subset_disjoint_cover</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">{</span><span class="n">Z</span> <span class="n">a</span> <span class="n">b</span> <span class="n">u</span> <span class="n">v</span> <span class="o">:</span> <span class="n">set</span> <span class="n">α</span><span class="o">}</span> <span class="o">(</span><span class="n">hZ</span> <span class="o">:</span> <span class="n">Z</span> <span class="bp">⊆</span> <span class="n">u</span><span class="o">)</span>
  <span class="o">(</span><span class="n">hbv</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">⊆</span> <span class="n">v</span><span class="o">)</span> <span class="o">(</span><span class="n">Zab</span> <span class="o">:</span> <span class="n">Z</span> <span class="bp">⊆</span> <span class="n">a</span> <span class="bp">∪</span> <span class="n">b</span><span class="o">)</span> <span class="o">(</span><span class="n">huv</span> <span class="o">:</span> <span class="n">u</span> <span class="bp">∩</span> <span class="n">v</span> <span class="bp">=</span> <span class="bp">∅</span><span class="o">)</span> <span class="o">:</span> <span class="n">Z</span> <span class="bp">⊆</span> <span class="n">a</span> <span class="o">:=</span>
</code></pre></div>
<p>I have looked through the partitions file, but there doesnt seem to be anything like this in there. Is there some name for lemmas about "disjoint covers by two sets" in lean? I am really not sure what to search to find this.</p>
</blockquote>
<p>I have proven this lemma myself, but I want to PR some code into mathlib so if there exists a framework for working with situations like these I should probably rewrite some of my code to use that instead</p>



<a name="219618349"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/lemma%20in%20mathlib/near/219618349" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/lemma.20in.20mathlib.html#219618349">(Dec 11 2020 at 15:21)</a>:</h4>
<p>I would just prove it by hand, this looks like a very specific lemma</p>



<a name="219618465"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/lemma%20in%20mathlib/near/219618465" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Calle Sönne <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/lemma.20in.20mathlib.html#219618465">(Dec 11 2020 at 15:22)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110064">Kenny Lau</span> <a href="#narrow/stream/113489-new-members/topic/lemma.20in.20mathlib/near/219618349">said</a>:</p>
<blockquote>
<p>I would just prove it by hand, this looks like a very specific lemma</p>
</blockquote>
<p>Yeah. And where would it go in mathlib? I would like to keep this as a separate lemma because it feels like this will be useful when working with normal spaces.</p>



<a name="219618523"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/lemma%20in%20mathlib/near/219618523" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Calle Sönne <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/lemma.20in.20mathlib.html#219618523">(Dec 11 2020 at 15:22)</a>:</h4>
<p>Because then you often end up with the situation of having a "refinement" of a disjoint cover</p>



<a name="219618716"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/lemma%20in%20mathlib/near/219618716" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Calle Sönne <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/lemma.20in.20mathlib.html#219618716">(Dec 11 2020 at 15:24)</a>:</h4>
<p>I guess what Im trying to say is that it feels like the statement should go in separation.lean (where the stuff about normal spaces is). But then again the statement itself has nothing to do with topological spaces</p>



<a name="219618975"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/lemma%20in%20mathlib/near/219618975" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/lemma.20in.20mathlib.html#219618975">(Dec 11 2020 at 15:26)</a>:</h4>
<p>What did your proof look like? Perhaps a better question is "can I write this proof in terms of one or two lemmas that already exist"?</p>



<a name="219619041"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/lemma%20in%20mathlib/near/219619041" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/lemma.20in.20mathlib.html#219619041">(Dec 11 2020 at 15:26)</a>:</h4>
<p>Kenny is arguing that this is not suitable for inclusion in a maths library, because there are probably 50 other lemmas of this complexity and the basic tools you need to prove it (Z in a union b and b in v so Z in a union v, u intersect v empty and Z in u so Z intersect v empty, Z in a union v and Z intersect v empty so Z in a) are probably all there already.</p>



<a name="219619157"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/lemma%20in%20mathlib/near/219619157" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Calle Sönne <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/lemma.20in.20mathlib.html#219619157">(Dec 11 2020 at 15:27)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110038">Kevin Buzzard</span> <a href="#narrow/stream/113489-new-members/topic/lemma.20in.20mathlib/near/219619041">said</a>:</p>
<blockquote>
<p>Kenny is arguing that this is not suitable for inclusion in a maths library, because there are probably 50 other lemmas of this complexity and the basic tools you need to prove it (Z in a union b and b in v so Z in a union v, u intersect v empty and Z in u so Z intersect v empty, Z in a union v and Z intersect v empty so Z in a) are probably all there already.</p>
</blockquote>
<p>ah so I should just make a "have" statement or something in my main lemma for this, and then prove it there</p>



<a name="219619279"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/lemma%20in%20mathlib/near/219619279" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Calle Sönne <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/lemma.20in.20mathlib.html#219619279">(Dec 11 2020 at 15:28)</a>:</h4>
<p><span class="user-mention silent" data-user-id="310045">Eric Wieser</span> <a href="#narrow/stream/113489-new-members/topic/lemma.20in.20mathlib/near/219618975">said</a>:</p>
<blockquote>
<p>What did your proof look like? Perhaps a better question is "can I write this proof in terms of one or two lemmas that already exist"?</p>
</blockquote>
<p>It used <code>set.subset_compl_iff_disjoint</code> a bunch. The rest is just basic set theory operations (transitivity of subset, intersections is commutative etc.)</p>



<a name="219619591"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/lemma%20in%20mathlib/near/219619591" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Calle Sönne <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/lemma.20in.20mathlib.html#219619591">(Dec 11 2020 at 15:30)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110038">Kevin Buzzard</span> <a href="#narrow/stream/113489-new-members/topic/lemma.20in.20mathlib/near/219619041">said</a>:</p>
<blockquote>
<p>Kenny is arguing that this is not suitable for inclusion in a maths library, because there are probably 50 other lemmas of this complexity and the basic tools you need to prove it (Z in a union b and b in v so Z in a union v, u intersect v empty and Z in u so Z intersect v empty, Z in a union v and Z intersect v empty so Z in a) are probably all there already.</p>
</blockquote>
<p>Also I need to use it twice in my main lemma, so the initial reason I made it a separate lemma was to decrease the amount of code.</p>



<a name="219619660"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/lemma%20in%20mathlib/near/219619660" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/lemma.20in.20mathlib.html#219619660">(Dec 11 2020 at 15:31)</a>:</h4>
<p>I think <a href="https://leanprover-community.github.io/mathlib_docs/find/disjoint.mono">docs#disjoint.mono</a> is most of your proof</p>



<a name="219619801"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/lemma%20in%20mathlib/near/219619801" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Calle Sönne <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/lemma.20in.20mathlib.html#219619801">(Dec 11 2020 at 15:32)</a>:</h4>
<p><span class="user-mention silent" data-user-id="310045">Eric Wieser</span> <a href="#narrow/stream/113489-new-members/topic/lemma.20in.20mathlib/near/219619660">said</a>:</p>
<blockquote>
<p>I think <a href="https://leanprover-community.github.io/mathlib_docs/find/disjoint.mono">docs#disjoint.mono</a> is most of your proof</p>
</blockquote>
<p>I will try to use this one then</p>



<a name="219619874"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/lemma%20in%20mathlib/near/219619874" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/lemma.20in.20mathlib.html#219619874">(Dec 11 2020 at 15:32)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">subset_refined_of_subset_disjoint_cover</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">{</span><span class="n">Z</span> <span class="n">a</span> <span class="n">b</span> <span class="n">u</span> <span class="n">v</span> <span class="o">:</span> <span class="n">set</span> <span class="n">α</span><span class="o">}</span> <span class="o">(</span><span class="n">hZ</span> <span class="o">:</span> <span class="n">Z</span> <span class="bp">⊆</span> <span class="n">u</span><span class="o">)</span>
  <span class="o">(</span><span class="n">hbv</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">⊆</span> <span class="n">v</span><span class="o">)</span> <span class="o">(</span><span class="n">Zab</span> <span class="o">:</span> <span class="n">Z</span> <span class="bp">⊆</span> <span class="n">a</span> <span class="bp">∪</span> <span class="n">b</span><span class="o">)</span> <span class="o">(</span><span class="n">huv</span> <span class="o">:</span> <span class="n">disjoint</span> <span class="n">u</span> <span class="n">v</span><span class="o">)</span> <span class="o">:</span> <span class="n">Z</span> <span class="bp">⊆</span> <span class="n">a</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">replace</span> <span class="n">Zab</span> <span class="o">:</span> <span class="n">Z</span> <span class="bp">≤</span> <span class="n">a</span> <span class="bp">⊔</span> <span class="n">b</span> <span class="o">:=</span> <span class="n">Zab</span><span class="o">,</span>
  <span class="n">replace</span> <span class="n">hbv</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≤</span> <span class="n">v</span> <span class="o">:=</span> <span class="n">hbv</span><span class="o">,</span>
  <span class="n">replace</span> <span class="n">hZ</span> <span class="o">:</span> <span class="n">Z</span> <span class="bp">≤</span> <span class="n">u</span> <span class="o">:=</span> <span class="n">hZ</span><span class="o">,</span>
  <span class="k">have</span> <span class="o">:=</span> <span class="n">huv.mono</span> <span class="n">hZ</span> <span class="n">hbv</span><span class="o">,</span>
  <span class="n">change</span> <span class="n">Z</span> <span class="bp">≤</span> <span class="n">a</span><span class="o">,</span>
  <span class="n">clear</span> <span class="n">hZ</span> <span class="n">hbv</span> <span class="n">huv</span><span class="o">,</span>
  <span class="n">sorry</span>
<span class="kd">end</span>
</code></pre></div>



<a name="219620066"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/lemma%20in%20mathlib/near/219620066" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/lemma.20in.20mathlib.html#219620066">(Dec 11 2020 at 15:34)</a>:</h4>
<p>Goal state is</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">Zab</span><span class="o">:</span> <span class="n">Z</span> <span class="bp">≤</span> <span class="n">a</span> <span class="bp">⊔</span> <span class="n">b</span>
<span class="n">this</span><span class="o">:</span> <span class="n">disjoint</span> <span class="n">Z</span> <span class="n">b</span>
<span class="bp">⊢</span> <span class="n">Z</span> <span class="bp">≤</span> <span class="n">a</span>
</code></pre></div>
<p>which looks easy, but I haven't found the lemma for</p>



<a name="219620125"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/lemma%20in%20mathlib/near/219620125" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Calle Sönne <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/lemma.20in.20mathlib.html#219620125">(Dec 11 2020 at 15:35)</a>:</h4>
<p><span class="user-mention silent" data-user-id="310045">Eric Wieser</span> <a href="#narrow/stream/113489-new-members/topic/lemma.20in.20mathlib/near/219620066">said</a>:</p>
<blockquote>
<p>Goal state is</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">Zab</span><span class="o">:</span> <span class="n">Z</span> <span class="bp">≤</span> <span class="n">a</span> <span class="bp">⊔</span> <span class="n">b</span>
<span class="n">this</span><span class="o">:</span> <span class="n">disjoint</span> <span class="n">Z</span> <span class="n">b</span>
<span class="bp">⊢</span> <span class="n">Z</span> <span class="bp">≤</span> <span class="n">a</span>
</code></pre></div>
<p>which looks easy, but I haven't found the lemma for</p>
</blockquote>
<p>set.subset_compl_iff_disjoint should help</p>



<a name="219620150"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/lemma%20in%20mathlib/near/219620150" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/lemma.20in.20mathlib.html#219620150">(Dec 11 2020 at 15:35)</a>:</h4>
<p>I was expecting a lemma about lattices, not sets</p>



<a name="219620193"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/lemma%20in%20mathlib/near/219620193" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Calle Sönne <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/lemma.20in.20mathlib.html#219620193">(Dec 11 2020 at 15:35)</a>:</h4>
<p>oh. I though lean would remember that we are working with lattices "that are sets"</p>



<a name="219620214"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/lemma%20in%20mathlib/near/219620214" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Calle Sönne <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/lemma.20in.20mathlib.html#219620214">(Dec 11 2020 at 15:36)</a>:</h4>
<p>but yeah then this could be stated more generally I guess</p>



<a name="219620252"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/lemma%20in%20mathlib/near/219620252" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/lemma.20in.20mathlib.html#219620252">(Dec 11 2020 at 15:36)</a>:</h4>
<p>Sure, but this should be provable for all lattices</p>



<a name="219620651"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/lemma%20in%20mathlib/near/219620651" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/lemma.20in.20mathlib.html#219620651">(Dec 11 2020 at 15:39)</a>:</h4>
<p>I think this might make a good lemma</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="c1">-- or is this right_sup?</span>
<span class="kd">lemma</span> <span class="n">disjoint.left_sup</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">_inst_1</span> <span class="o">:</span> <span class="n">complete_lattice</span> <span class="n">α</span><span class="o">]</span> <span class="o">{</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">α</span><span class="o">}</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span> <span class="bp">⊔</span> <span class="n">c</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">disjoint</span> <span class="n">a</span> <span class="n">c</span><span class="o">):</span>
    <span class="n">a</span> <span class="bp">≤</span> <span class="n">c</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">library_search</span>
</code></pre></div>



<a name="219620996"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/lemma%20in%20mathlib/near/219620996" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/lemma.20in.20mathlib.html#219620996">(Dec 11 2020 at 15:42)</a>:</h4>
<p>Assuming it's true, anyway</p>



<a name="219621010"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/lemma%20in%20mathlib/near/219621010" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Calle Sönne <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/lemma.20in.20mathlib.html#219621010">(Dec 11 2020 at 15:42)</a>:</h4>
<p><span class="user-mention silent" data-user-id="310045">Eric Wieser</span> <a href="#narrow/stream/113489-new-members/topic/lemma.20in.20mathlib/near/219620651">said</a>:</p>
<blockquote>
<p>I think this might make a good lemma</p>
<p><div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="c1">-- or is this right_sup?</span>
<span class="kd">lemma</span> <span class="n">disjoint.left_sup</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">_inst_1</span> <span class="o">:</span> <span class="n">complete_lattice</span> <span class="n">α</span><span class="o">]</span> <span class="o">{</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">α</span><span class="o">}</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span> <span class="bp">⊔</span> <span class="n">c</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">disjoint</span> <span class="n">a</span> <span class="n">c</span><span class="o">):</span>
    <span class="n">a</span> <span class="bp">≤</span> <span class="n">c</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">library_search</span>
</code></pre></div><br>
</p>
</blockquote>
<p>If it is true, in my head the reason for why it holds uses complements</p>



<a name="219621017"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/lemma%20in%20mathlib/near/219621017" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Calle Sönne <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/lemma.20in.20mathlib.html#219621017">(Dec 11 2020 at 15:42)</a>:</h4>
<p><span class="user-mention silent" data-user-id="310045">Eric Wieser</span> <a href="#narrow/stream/113489-new-members/topic/lemma.20in.20mathlib/near/219620996">said</a>:</p>
<blockquote>
<p>Assuming it's true, anyway</p>
</blockquote>
<p>yeah</p>



<a name="219621137"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/lemma%20in%20mathlib/near/219621137" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Calle Sönne <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/lemma.20in.20mathlib.html#219621137">(Dec 11 2020 at 15:43)</a>:</h4>
<p>there is this in the complement case, but maybe you knew about it already:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">disjoint_left_iff</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">is_compl</span> <span class="n">y</span> <span class="n">z</span><span class="o">)</span> <span class="o">:</span> <span class="n">disjoint</span> <span class="n">x</span> <span class="n">y</span> <span class="bp">↔</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">z</span> <span class="o">:=</span>
</code></pre></div>



<a name="219621342"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/lemma%20in%20mathlib/near/219621342" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Calle Sönne <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/lemma.20in.20mathlib.html#219621342">(Dec 11 2020 at 15:45)</a>:</h4>
<p>Oh this looks promising</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">inf_eq_bot_iff_le_compl</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">}</span> <span class="o">[</span><span class="n">bounded_distrib_lattice</span> <span class="n">α</span><span class="o">]</span> <span class="o">{</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">α</span><span class="o">}</span>
  <span class="o">(</span><span class="n">h₁</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">⊔</span> <span class="n">c</span> <span class="bp">=</span> <span class="bp">⊤</span><span class="o">)</span> <span class="o">(</span><span class="n">h₂</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">⊓</span> <span class="n">c</span> <span class="bp">=</span> <span class="bp">⊥</span><span class="o">)</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">⊓</span> <span class="n">b</span> <span class="bp">=</span> <span class="bp">⊥</span> <span class="bp">↔</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">c</span> <span class="o">:=</span>
</code></pre></div>



<a name="219621347"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/lemma%20in%20mathlib/near/219621347" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/lemma.20in.20mathlib.html#219621347">(Dec 11 2020 at 15:45)</a>:</h4>
<p><code>complete_lattice</code> may be too weak, I don't know my lattices</p>



<a name="219622719"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/lemma%20in%20mathlib/near/219622719" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/lemma.20in.20mathlib.html#219622719">(Dec 11 2020 at 15:57)</a>:</h4>
<p>My statement was wrong</p>



<a name="219622738"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/lemma%20in%20mathlib/near/219622738" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/lemma.20in.20mathlib.html#219622738">(Dec 11 2020 at 15:57)</a>:</h4>
<p>Should have been <code>b</code> not <code>c</code></p>



<a name="219622928"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/lemma%20in%20mathlib/near/219622928" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/lemma.20in.20mathlib.html#219622928">(Dec 11 2020 at 15:58)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">disjoint.left_sup</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">bounded_distrib_lattice</span> <span class="n">α</span><span class="o">]</span> <span class="o">{</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">α</span><span class="o">}</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span> <span class="bp">⊔</span> <span class="n">c</span><span class="o">)</span> <span class="o">(</span><span class="n">hd</span> <span class="o">:</span> <span class="n">disjoint</span> <span class="n">a</span> <span class="n">c</span><span class="o">):</span>
    <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="k">have</span> <span class="o">:=</span> <span class="n">inf_le_inf_left</span> <span class="n">a</span> <span class="n">h</span><span class="o">,</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">inf_idem</span><span class="o">,</span> <span class="n">inf_sup_left</span><span class="o">,</span> <span class="n">disjoint_iff.mp</span> <span class="n">hd</span><span class="o">,</span> <span class="n">sup_bot_eq</span><span class="o">,</span> <span class="n">le_inf_iff</span><span class="o">]</span> <span class="n">at</span> <span class="n">this</span><span class="o">,</span>
  <span class="n">exact</span> <span class="n">this.2</span><span class="o">,</span>
<span class="kd">end</span>
</code></pre></div>



<a name="219625111"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/lemma%20in%20mathlib/near/219625111" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/lemma.20in.20mathlib.html#219625111">(Dec 11 2020 at 16:13)</a>:</h4>
<p>Golfed:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">disjoint.left_sup</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">bounded_distrib_lattice</span> <span class="n">α</span><span class="o">]</span> <span class="o">{</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">α</span><span class="o">}</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span> <span class="bp">⊔</span> <span class="n">c</span><span class="o">)</span> <span class="o">(</span><span class="n">hd</span> <span class="o">:</span> <span class="n">disjoint</span> <span class="n">a</span> <span class="n">c</span><span class="o">):</span>
  <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span> <span class="o">:=</span>
<span class="o">(</span><span class="bp">λ</span> <span class="n">x</span><span class="o">,</span> <span class="n">le_of_inf_le_sup_le</span> <span class="n">x</span> <span class="o">(</span><span class="n">sup_le</span> <span class="n">h</span> <span class="n">le_sup_right</span><span class="o">))</span> <span class="o">((</span><span class="n">disjoint_iff.mp</span> <span class="n">hd</span><span class="o">)</span><span class="bp">.</span><span class="n">symm</span> <span class="bp">▸</span> <span class="n">bot_le</span><span class="o">)</span>
</code></pre></div>



<a name="219625189"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/lemma%20in%20mathlib/near/219625189" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/lemma.20in.20mathlib.html#219625189">(Dec 11 2020 at 16:14)</a>:</h4>
<p>This golf is a weird one - I need the lambda for elaboration to work out the types in the right order</p>



<a name="219626440"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/lemma%20in%20mathlib/near/219626440" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Calle Sönne <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/lemma.20in.20mathlib.html#219626440">(Dec 11 2020 at 16:24)</a>:</h4>
<p><span class="user-mention silent" data-user-id="310045">Eric Wieser</span> <a href="#narrow/stream/113489-new-members/topic/lemma.20in.20mathlib/near/219625111">said</a>:</p>
<blockquote>
<p>Golfed:</p>
<p><div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">disjoint.left_sup</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">bounded_distrib_lattice</span> <span class="n">α</span><span class="o">]</span> <span class="o">{</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">α</span><span class="o">}</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span> <span class="bp">⊔</span> <span class="n">c</span><span class="o">)</span> <span class="o">(</span><span class="n">hd</span> <span class="o">:</span> <span class="n">disjoint</span> <span class="n">a</span> <span class="n">c</span><span class="o">):</span>
  <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span> <span class="o">:=</span>
<span class="o">(</span><span class="bp">λ</span> <span class="n">x</span><span class="o">,</span> <span class="n">le_of_inf_le_sup_le</span> <span class="n">x</span> <span class="o">(</span><span class="n">sup_le</span> <span class="n">h</span> <span class="n">le_sup_right</span><span class="o">))</span> <span class="o">((</span><span class="n">disjoint_iff.mp</span> <span class="n">hd</span><span class="o">)</span><span class="bp">.</span><span class="n">symm</span> <span class="bp">▸</span> <span class="n">bot_le</span><span class="o">)</span>
</code></pre></div><br>
</p>
</blockquote>
<p>Oh I didnt know this existed: ▸  <span aria-label="joy" class="emoji emoji-1f602" role="img" title="joy">:joy:</span> Now I can do a lot more in term mode proofs! Thank you for the help :)</p>



<a name="219626508"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/lemma%20in%20mathlib/near/219626508" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/lemma.20in.20mathlib.html#219626508">(Dec 11 2020 at 16:24)</a>:</h4>
<p>Note that the pickiness of the triangle is why I had to use the lambda</p>



<a name="219626560"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/lemma%20in%20mathlib/near/219626560" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/lemma.20in.20mathlib.html#219626560">(Dec 11 2020 at 16:24)</a>:</h4>
<p>Also I think you probably want a different name for that lemma than what I have, given that <a href="https://leanprover-community.github.io/mathlib_docs/find/disjoint_sup_left">docs#disjoint_sup_left</a> and <a href="https://leanprover-community.github.io/mathlib_docs/find/disjoint.sup_left">docs#disjoint.sup_left</a> already exist</p>



<a name="219626828"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/lemma%20in%20mathlib/near/219626828" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/lemma.20in.20mathlib.html#219626828">(Dec 11 2020 at 16:26)</a>:</h4>
<p>Perhaps <code>disjoint.left_le_of_le_sup_right (h : a ≤ b ⊔ c)</code> and <code>disjoint.left_le_of_le_sup_left (h : a ≤ c ⊔ b)</code> or something like that, where the first <code>left</code> is because it's the left argument of <code>disjoint</code>.</p>



<a name="219660307"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/lemma%20in%20mathlib/near/219660307" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Calle Sönne <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/lemma.20in.20mathlib.html#219660307">(Dec 11 2020 at 20:49)</a>:</h4>
<p><span class="user-mention silent" data-user-id="310045">Eric Wieser</span> <a href="#narrow/stream/113489-new-members/topic/lemma.20in.20mathlib/near/219626828">said</a>:</p>
<blockquote>
<p>Perhaps <code>disjoint.left_le_of_le_sup_right (h : a ≤ b ⊔ c)</code> and <code>disjoint.left_le_of_le_sup_left (h : a ≤ c ⊔ b)</code> or something like that, where the first <code>left</code> is because it's the left argument of <code>disjoint</code>.</p>
</blockquote>
<p>I played around a bit with the left case and this was the best I could come up with:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">disjoint.left_le_of_le_sup_left</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">bounded_distrib_lattice</span> <span class="n">α</span><span class="o">]</span> <span class="o">{</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">α</span><span class="o">}</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">c</span> <span class="bp">⊔</span> <span class="n">b</span><span class="o">)</span> <span class="o">(</span><span class="n">hd</span> <span class="o">:</span> <span class="n">disjoint</span> <span class="n">a</span> <span class="n">c</span><span class="o">):</span>
  <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span> <span class="o">:=</span>
<span class="bp">@</span><span class="n">le_of_inf_le_sup_le</span> <span class="n">_</span> <span class="n">_</span> <span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">((</span><span class="n">disjoint_iff.mp</span> <span class="n">hd</span><span class="o">)</span><span class="bp">.</span><span class="n">symm</span> <span class="bp">▸</span> <span class="n">bot_le</span><span class="o">)</span> <span class="o">((</span><span class="bp">@</span><span class="n">sup_comm</span> <span class="n">_</span> <span class="n">_</span> <span class="n">c</span> <span class="n">b</span><span class="o">)</span> <span class="bp">▸</span> <span class="o">(</span><span class="n">sup_le</span> <span class="n">h</span> <span class="n">le_sup_left</span><span class="o">))</span>
</code></pre></div>
<p>Had to use <code>eq.subst</code> twice which was why I couldnt get your trick for the first one to work. So if I understood correctly, the problem with ▸ is that it does not allow any metavariables in any of the arguments and goal right? Thats why I manually gave <code>le_of_inf_le_sup_le</code>its arguments, but also <code>sup_comm</code> since there seemed to be no way of those being inferred before <code>▸</code> is applied</p>



<a name="219660394"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/lemma%20in%20mathlib/near/219660394" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Calle Sönne <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/lemma.20in.20mathlib.html#219660394">(Dec 11 2020 at 20:50)</a>:</h4>
<p>Also after playing around with it for a bit I realised that your solution with the lambda is pretty clever :)</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>