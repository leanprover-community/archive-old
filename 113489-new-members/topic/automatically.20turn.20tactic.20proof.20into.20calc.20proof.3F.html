---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/automatically.20turn.20tactic.20proof.20into.20calc.20proof.3F.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/automatically.20turn.20tactic.20proof.20into.20calc.20proof.3F.html">automatically turn tactic proof into calc proof?</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="202274895"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/automatically%20turn%20tactic%20proof%20into%20calc%20proof%3F/near/202274895" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris M <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/automatically.20turn.20tactic.20proof.20into.20calc.20proof.3F.html#202274895">(Jun 29 2020 at 06:09)</a>:</h4>
<p>Is it possible to automatically turn a tactic proof that only rewrites equations into a calc proof? It seems like this shouldn't be fundamentally hard.</p>



<a name="202276081"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/automatically%20turn%20tactic%20proof%20into%20calc%20proof%3F/near/202276081" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/automatically.20turn.20tactic.20proof.20into.20calc.20proof.3F.html#202276081">(Jun 29 2020 at 06:37)</a>:</h4>
<p>Are you imagining a tactic that is only allowed to inspect the proof term (i.e. something like <code>find_calc_proof { rw [...] }</code>) or something that you run instead of <code>rw</code>, e.g. <code>rw? [...]</code>? The second option seems very doable.</p>



<a name="202276094"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/automatically%20turn%20tactic%20proof%20into%20calc%20proof%3F/near/202276094" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/automatically.20turn.20tactic.20proof.20into.20calc.20proof.3F.html#202276094">(Jun 29 2020 at 06:37)</a>:</h4>
<p>You'd have the usual problem the round-tripping <code>pp</code> output is not 100% reliable. But it's often enough good.</p>



<a name="202276216"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/automatically%20turn%20tactic%20proof%20into%20calc%20proof%3F/near/202276216" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris M <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/automatically.20turn.20tactic.20proof.20into.20calc.20proof.3F.html#202276216">(Jun 29 2020 at 06:38)</a>:</h4>
<p>Sorry, to clarify, I'm not necessarily imagining a tactic at all. I'm imagining a program that takes as input a well-formed tactic proof, and outputs a well-formed calc proof. Since calc proofs are a little harder to write, but easier to read.</p>



<a name="202276236"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/automatically%20turn%20tactic%20proof%20into%20calc%20proof%3F/near/202276236" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/automatically.20turn.20tactic.20proof.20into.20calc.20proof.3F.html#202276236">(Jun 29 2020 at 06:39)</a>:</h4>
<p>Oh --- better to write tactics. :-) You'll have to be talking to Lean anyway to generate the intermediate expressions.</p>



<a name="202276267"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/automatically%20turn%20tactic%20proof%20into%20calc%20proof%3F/near/202276267" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/automatically.20turn.20tactic.20proof.20into.20calc.20proof.3F.html#202276267">(Jun 29 2020 at 06:39)</a>:</h4>
<p>The first option is doable as well, I'd guess --- <code>rw</code> produces pretty regularly shaped proof terms from which you can reconstruct what happened.</p>



<a name="202276332"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/automatically%20turn%20tactic%20proof%20into%20calc%20proof%3F/near/202276332" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris M <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/automatically.20turn.20tactic.20proof.20into.20calc.20proof.3F.html#202276332">(Jun 29 2020 at 06:40)</a>:</h4>
<p>Yes, I'm imagining writing a proof in tactic mode, and once the proof is finished, copy paste the proof into a "proof rewriting program" which then gives me the calc proof with all the intermediate steps clearly stated, so that others can read it more easily.</p>



<a name="202320649"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/automatically%20turn%20tactic%20proof%20into%20calc%20proof%3F/near/202320649" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jannis Limperg <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/automatically.20turn.20tactic.20proof.20into.20calc.20proof.3F.html#202320649">(Jun 29 2020 at 14:48)</a>:</h4>
<p>I think this would be very hard in general. Tactics often don't care about producing intelligible terms, so a parser that tries to figure out what steps were taken would have to determine which parts of the term are relevant and which are incidental complexity. If you limit yourself to certain tactics (e.g. only chains of <code>rw</code>), it might be doable, but your parser will then be strongly coupled to the implementations of these tactics.</p>



<a name="202392383"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/automatically%20turn%20tactic%20proof%20into%20calc%20proof%3F/near/202392383" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/automatically.20turn.20tactic.20proof.20into.20calc.20proof.3F.html#202392383">(Jun 30 2020 at 03:45)</a>:</h4>
<p>It will be much better to do this as a replacement/modifier for <code>rw</code>, so the scope is narrow. It should definitely be done as a tactic, not as some external program.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>