---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/easy.20zmod.20proof.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/easy.20zmod.20proof.html">easy zmod proof</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="211871268"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/easy%20zmod%20proof/near/211871268" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenji Nakagawa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/easy.20zmod.20proof.html#211871268">(Oct 01 2020 at 05:39)</a>:</h4>
<p>Is there a decent way to prove something about something mod n where you have a proof that if k is true, then k+n is also true, and then just bashing the small cases?<br>
Currently I have this (here the proof of <code>modfact1</code> is irrelevant except for maybe proving <code>modfact2</code>):</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">tactic.basic</span>
<span class="kn">import</span> <span class="n">data.zmod.basic</span>

<span class="kd">lemma</span> <span class="n">modfact1</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">):</span> <span class="o">((</span><span class="mi">2</span><span class="bp">^</span><span class="o">(</span><span class="mi">3</span><span class="bp">+</span><span class="n">n</span><span class="o">))</span> <span class="o">:</span> <span class="n">zmod</span> <span class="mi">7</span><span class="o">)</span><span class="bp">.</span><span class="n">val</span> <span class="bp">=</span> <span class="o">(</span><span class="mi">2</span><span class="bp">^</span><span class="n">n</span> <span class="o">:</span> <span class="n">zmod</span> <span class="mi">7</span><span class="o">)</span><span class="bp">.</span><span class="n">val</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="k">have</span> <span class="n">h2</span> <span class="o">:</span> <span class="o">(</span><span class="mi">2</span><span class="bp">^</span><span class="mi">3</span> <span class="o">:</span> <span class="n">zmod</span> <span class="mi">7</span><span class="o">)</span> <span class="bp">=</span> <span class="mi">1</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">refl</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">h4</span> <span class="o">:</span> <span class="o">(</span><span class="mi">2</span><span class="bp">^</span><span class="o">(</span><span class="mi">3</span><span class="bp">+</span><span class="n">n</span><span class="o">)</span> <span class="o">:</span> <span class="n">zmod</span> <span class="mi">7</span><span class="o">)</span><span class="bp">.</span><span class="n">val</span> <span class="bp">=</span> <span class="o">(</span><span class="mi">2</span><span class="bp">^</span><span class="mi">3</span><span class="bp">*</span><span class="mi">2</span><span class="bp">^</span><span class="n">n</span> <span class="o">:</span> <span class="n">zmod</span> <span class="mi">7</span><span class="o">)</span><span class="bp">.</span><span class="n">val</span> <span class="o">:=</span> <span class="n">congr_arg</span> <span class="n">zmod.val</span> <span class="o">(</span><span class="n">pow_add</span> <span class="mi">2</span> <span class="mi">3</span> <span class="n">n</span><span class="o">),</span>
  <span class="n">rwa</span> <span class="o">[</span><span class="n">h2</span><span class="o">,</span><span class="n">one_mul</span><span class="o">]</span> <span class="n">at</span> <span class="n">h4</span><span class="o">,</span>
<span class="kd">end</span>

<span class="kd">lemma</span> <span class="n">modfact2</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span>  <span class="o">:</span>  <span class="o">(</span><span class="mi">2</span><span class="bp">^</span><span class="n">n</span> <span class="o">:</span> <span class="n">zmod</span> <span class="mi">7</span><span class="o">)</span> <span class="bp">=</span> <span class="mi">2</span> <span class="bp">^</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">zmod</span> <span class="mi">3</span><span class="o">)</span><span class="bp">.</span><span class="n">val</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">sorry</span><span class="o">,</span>
<span class="kd">end</span>
</code></pre></div>



<a name="211871923"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/easy%20zmod%20proof/near/211871923" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/easy.20zmod.20proof.html#211871923">(Oct 01 2020 at 05:57)</a>:</h4>
<p>Not very familiar with <code>zmod</code>. But here are two options.</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">tactic.basic</span>
<span class="kn">import</span> <span class="n">tactic.fin_cases</span>
<span class="kn">import</span> <span class="n">data.zmod.basic</span>

<span class="kd">lemma</span> <span class="n">modfact2</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span>  <span class="o">:</span>  <span class="o">(</span><span class="mi">2</span><span class="bp">^</span><span class="n">n</span> <span class="o">:</span> <span class="n">zmod</span> <span class="mi">7</span><span class="o">)</span> <span class="bp">=</span> <span class="mi">2</span> <span class="bp">^</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">zmod</span> <span class="mi">3</span><span class="o">)</span><span class="bp">.</span><span class="n">val</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">set</span> <span class="n">n'</span> <span class="o">:=</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">zmod</span> <span class="mi">3</span><span class="o">)</span> <span class="k">with</span> <span class="n">hn</span><span class="o">,</span>
  <span class="n">fin_cases</span> <span class="n">n'</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">sorry</span> <span class="o">},</span> <span class="c1">-- 0 case</span>
  <span class="o">{</span> <span class="n">sorry</span> <span class="o">},</span> <span class="c1">-- 1 case</span>
  <span class="o">{</span> <span class="n">sorry</span> <span class="o">},</span> <span class="c1">-- 2 case</span>
<span class="kd">end</span>

<span class="kd">lemma</span> <span class="n">modfact2'</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span>  <span class="o">:</span>  <span class="o">(</span><span class="mi">2</span><span class="bp">^</span><span class="n">n</span> <span class="o">:</span> <span class="n">zmod</span> <span class="mi">7</span><span class="o">)</span> <span class="bp">=</span> <span class="mi">2</span> <span class="bp">^</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">zmod</span> <span class="mi">3</span><span class="o">)</span><span class="bp">.</span><span class="n">val</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">rcases</span> <span class="n">n</span> <span class="k">with</span> <span class="n">_</span><span class="bp">|</span><span class="n">_</span><span class="bp">|</span><span class="n">_</span><span class="bp">|</span><span class="n">n</span><span class="o">,</span>
  <span class="n">refl</span><span class="o">,</span>
  <span class="n">refl</span><span class="o">,</span>
  <span class="n">refl</span><span class="o">,</span>
  <span class="n">sorry</span> <span class="c1">-- 3+ case</span>
<span class="kd">end</span>
</code></pre></div>



<a name="211872234"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/easy%20zmod%20proof/near/211872234" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/easy.20zmod.20proof.html#211872234">(Oct 01 2020 at 06:05)</a>:</h4>
<p>You'll probably want to restate <code>modfact1</code> to be in <code>n + 3</code> form instead.</p>



<a name="211872273"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/easy%20zmod%20proof/near/211872273" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/easy.20zmod.20proof.html#211872273">(Oct 01 2020 at 06:06)</a>:</h4>
<p><code>dec_trivial</code> should be able to handle the <code>n &lt; 7</code> case</p>



<a name="211872453"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/easy%20zmod%20proof/near/211872453" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/easy.20zmod.20proof.html#211872453">(Oct 01 2020 at 06:11)</a>:</h4>
<p>Note that <code>.val</code> is an implementation issue that should be avoided.</p>



<a name="211872465"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/easy%20zmod%20proof/near/211872465" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/easy.20zmod.20proof.html#211872465">(Oct 01 2020 at 06:11)</a>:</h4>
<p>If you want to stay in the nats, maybe <code>2 ^ n % 7</code> is what you want.</p>



<a name="211872604"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/easy%20zmod%20proof/near/211872604" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/easy.20zmod.20proof.html#211872604">(Oct 01 2020 at 06:14)</a>:</h4>
<p><span class="user-mention" data-user-id="319839">@Kenji Nakagawa</span> </p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">modfact2'</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">),</span> <span class="n">n</span> <span class="bp">&lt;</span> <span class="mi">7</span> <span class="bp">→</span> <span class="o">(</span><span class="mi">2</span><span class="bp">^</span><span class="n">n</span> <span class="o">:</span> <span class="n">zmod</span> <span class="mi">7</span><span class="o">)</span> <span class="bp">=</span> <span class="mi">2</span> <span class="bp">^</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">zmod</span> <span class="mi">3</span><span class="o">)</span><span class="bp">.</span><span class="n">val</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">dec_trivial</span><span class="o">,</span>
<span class="kd">end</span>
</code></pre></div>



<a name="211873184"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/easy%20zmod%20proof/near/211873184" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/easy.20zmod.20proof.html#211873184">(Oct 01 2020 at 06:28)</a>:</h4>
<p><span class="user-mention" data-user-id="319839">@Kenji Nakagawa</span> </p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">modfact2'</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">),</span> <span class="n">n</span> <span class="bp">&lt;</span> <span class="mi">6</span> <span class="bp">→</span> <span class="o">(</span><span class="mi">2</span><span class="bp">^</span><span class="n">n</span> <span class="o">:</span> <span class="n">zmod</span> <span class="mi">7</span><span class="o">)</span> <span class="bp">=</span> <span class="mi">2</span> <span class="bp">^</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">zmod</span> <span class="mi">3</span><span class="o">)</span><span class="bp">.</span><span class="n">val</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">dec_trivial</span><span class="o">,</span>
<span class="kd">end</span>

<span class="kd">@[simp]</span> <span class="kd">lemma</span> <span class="n">zmod.pow_bit0</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span> <span class="o">[</span><span class="n">fact</span> <span class="o">(</span><span class="n">bit1</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">prime</span><span class="o">]</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="n">zmod</span> <span class="o">(</span><span class="n">bit1</span> <span class="n">n</span><span class="o">))</span> <span class="o">(</span><span class="n">hk</span> <span class="o">:</span> <span class="n">k</span> <span class="bp">≠</span> <span class="mi">0</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">k</span> <span class="bp">^</span> <span class="o">(</span><span class="n">bit0</span> <span class="n">n</span><span class="o">)</span> <span class="bp">=</span> <span class="mi">1</span> <span class="o">:=</span>
<span class="n">zmod.pow_card_sub_one_eq_one</span> <span class="n">hk</span>

<span class="kd">lemma</span> <span class="n">modfact2</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="mi">2</span><span class="bp">^</span><span class="n">n</span> <span class="o">:</span> <span class="n">zmod</span> <span class="mi">7</span><span class="o">)</span> <span class="bp">=</span> <span class="mi">2</span> <span class="bp">^</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">zmod</span> <span class="mi">3</span><span class="o">)</span><span class="bp">.</span><span class="n">val</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">haveI</span> <span class="o">:</span> <span class="n">fact</span> <span class="o">(</span><span class="n">nat.prime</span> <span class="mi">7</span><span class="o">)</span> <span class="o">:=</span> <span class="kd">by</span> <span class="o">{</span> <span class="n">delta</span> <span class="n">fact</span><span class="o">,</span> <span class="n">norm_num</span> <span class="o">},</span>
  <span class="k">have</span> <span class="n">h2</span> <span class="o">:</span> <span class="o">(</span><span class="mi">2</span> <span class="o">:</span> <span class="n">zmod</span> <span class="mi">7</span><span class="o">)</span> <span class="bp">≠</span> <span class="mi">0</span> <span class="o">:=</span> <span class="n">dec_trivial</span><span class="o">,</span>
  <span class="n">rw</span> <span class="bp">←</span> <span class="n">nat.mod_add_div</span> <span class="n">n</span> <span class="mi">6</span><span class="o">,</span>
  <span class="c1">-- now run `squeeze_simp [h2, pow_add, pow_mul]`</span>
  <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">h2</span><span class="o">,</span> <span class="n">pow_add</span><span class="o">,</span> <span class="n">pow_mul</span><span class="o">,</span> <span class="n">bit0_zero</span><span class="o">,</span> <span class="n">one_pow</span><span class="o">,</span> <span class="n">add_zero</span><span class="o">,</span> <span class="n">mul_one</span><span class="o">,</span> <span class="n">zmod.cast_self</span><span class="o">,</span>
    <span class="n">zmod.pow_bit0</span><span class="o">,</span> <span class="n">nat.cast_bit0</span><span class="o">,</span> <span class="n">zero_mul</span><span class="o">,</span> <span class="n">ne.def</span><span class="o">,</span> <span class="n">nat.cast_add</span><span class="o">,</span> <span class="n">not_false_iff</span><span class="o">,</span> <span class="n">nat.cast_mul</span><span class="o">],</span>
  <span class="n">apply</span> <span class="n">modfact2'</span><span class="o">,</span>
  <span class="n">apply</span> <span class="n">nat.mod_lt</span><span class="o">,</span>
  <span class="n">norm_num</span><span class="o">,</span>
<span class="kd">end</span>
</code></pre></div>



<a name="211873195"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/easy%20zmod%20proof/near/211873195" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/easy.20zmod.20proof.html#211873195">(Oct 01 2020 at 06:28)</a>:</h4>
<p>I think that <code>zmod.pow_bit0</code> should be part of mathlib</p>



<a name="211873207"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/easy%20zmod%20proof/near/211873207" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/easy.20zmod.20proof.html#211873207">(Oct 01 2020 at 06:29)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> Do you think it makes sense to teach the primality prover of <code>norm_num</code> about <code>fact</code>?</p>



<a name="211873281"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/easy%20zmod%20proof/near/211873281" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Lacker <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/easy.20zmod.20proof.html#211873281">(Oct 01 2020 at 06:30)</a>:</h4>
<p>this <code>fin_cases</code> is neat. can I somehow use that on a variable n if I just know something like <code>n &lt; 10</code>? (for nats)</p>



<a name="211873400"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/easy%20zmod%20proof/near/211873400" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/easy.20zmod.20proof.html#211873400">(Oct 01 2020 at 06:32)</a>:</h4>
<p><span class="user-mention" data-user-id="238605">@Kevin Lacker</span> <a href="https://leanprover-community.github.io/mathlib_docs/tactics.html#interval_cases">tactic#interval_cases</a> might work better for that use case.</p>



<a name="211873411"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/easy%20zmod%20proof/near/211873411" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Lacker <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/easy.20zmod.20proof.html#211873411">(Oct 01 2020 at 06:33)</a>:</h4>
<p>ooh interesting</p>



<a name="211873426"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/easy%20zmod%20proof/near/211873426" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Lacker <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/easy.20zmod.20proof.html#211873426">(Oct 01 2020 at 06:33)</a>:</h4>
<p>just as a sanity check, roughly how many goals should I expect Lean to handle at once. tens? hundreds? thousands? more? less?</p>



<a name="211873729"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/easy%20zmod%20proof/near/211873729" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/easy.20zmod.20proof.html#211873729">(Oct 01 2020 at 06:39)</a>:</h4>
<p>Hmm, I would say &lt; 10. But I don't really know</p>



<a name="211873742"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/easy%20zmod%20proof/near/211873742" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/easy.20zmod.20proof.html#211873742">(Oct 01 2020 at 06:39)</a>:</h4>
<p>Of course it depends immensely on what kind of goals you are talking about</p>



<a name="211874034"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/easy%20zmod%20proof/near/211874034" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Lacker <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/easy.20zmod.20proof.html#211874034">(Oct 01 2020 at 06:44)</a>:</h4>
<p>i basically have a simple expression of natural numbers, and i want to check that it is nonzero for n = 0 ... 1000</p>



<a name="211874075"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/easy%20zmod%20proof/near/211874075" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Lacker <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/easy.20zmod.20proof.html#211874075">(Oct 01 2020 at 06:45)</a>:</h4>
<p>but it pegs at 100% cpu whenever i just try to expand this out into 1000 goals</p>



<a name="211874812"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/easy%20zmod%20proof/near/211874812" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Lacker <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/easy.20zmod.20proof.html#211874812">(Oct 01 2020 at 06:58)</a>:</h4>
<p>well, the compiler can't even really handle 1000 of these proofs each on their own line in a file. so it's probably not going to work to do it via a tactic either....</p>



<a name="211874871"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/easy%20zmod%20proof/near/211874871" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/easy.20zmod.20proof.html#211874871">(Oct 01 2020 at 06:59)</a>:</h4>
<p><span class="user-mention" data-user-id="238605">@Kevin Lacker</span> please paste some code (and start a new thread <span aria-label="wink" class="emoji emoji-1f609" role="img" title="wink">:wink:</span>)</p>



<a name="211943329"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/easy%20zmod%20proof/near/211943329" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/easy.20zmod.20proof.html#211943329">(Oct 01 2020 at 17:14)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112680">Johan Commelin</span> <a href="#narrow/stream/113489-new-members/topic/easy.20zmod.20proof/near/211873207">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="110049">Mario Carneiro</span> Do you think it makes sense to teach the primality prover of <code>norm_num</code> about <code>fact</code>?</p>
</blockquote>
<p>I think it makes more sense to have a <code>fact.mk</code></p>



<a name="211943358"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/easy%20zmod%20proof/near/211943358" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/easy.20zmod.20proof.html#211943358">(Oct 01 2020 at 17:15)</a>:</h4>
<p>the API behind fact is pretty absent</p>



<a name="211943789"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/easy%20zmod%20proof/near/211943789" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/easy.20zmod.20proof.html#211943789">(Oct 01 2020 at 17:18)</a>:</h4>
<p>I mean, it would be nice if it could see through <code>fact</code>, instead of needing to write <code>delta fact; norm_num</code> when prove <code>fact (nat.prime 7)</code></p>



<a name="211946639"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/easy%20zmod%20proof/near/211946639" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/easy.20zmod.20proof.html#211946639">(Oct 01 2020 at 17:38)</a>:</h4>
<p>It just uses simp. Should that be a simp lemma?</p>



<a name="211946775"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/easy%20zmod%20proof/near/211946775" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/easy.20zmod.20proof.html#211946775">(Oct 01 2020 at 17:39)</a>:</h4>
<p>I guess if <code>fact.mk</code> was a simp lemma this would solve the problem</p>



<a name="211946909"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/easy%20zmod%20proof/near/211946909" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/easy.20zmod.20proof.html#211946909">(Oct 01 2020 at 17:40)</a>:</h4>
<p>I guess that would cause other problems. You almost never want to simp <code>fact</code> away.</p>



<a name="211946944"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/easy%20zmod%20proof/near/211946944" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/easy.20zmod.20proof.html#211946944">(Oct 01 2020 at 17:41)</a>:</h4>
<p>Can you do <code>norm_num [extra, simp, lemmas]</code>?</p>



<a name="211946968"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/easy%20zmod%20proof/near/211946968" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/easy.20zmod.20proof.html#211946968">(Oct 01 2020 at 17:41)</a>:</h4>
<p>Then don't simp a hypothesis</p>



<a name="211946980"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/easy%20zmod%20proof/near/211946980" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/easy.20zmod.20proof.html#211946980">(Oct 01 2020 at 17:41)</a>:</h4>
<p>yes you can</p>



<a name="211947131"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/easy%20zmod%20proof/near/211947131" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/easy.20zmod.20proof.html#211947131">(Oct 01 2020 at 17:42)</a>:</h4>
<p>I think if <code>fact.mk</code>, that is <code>p -&gt; fact p</code> was a simp lemma, then it still wouldn't simplify <code>fact</code> away unless it could prove the contents</p>



<a name="211947229"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/easy%20zmod%20proof/near/211947229" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/easy.20zmod.20proof.html#211947229">(Oct 01 2020 at 17:43)</a>:</h4>
<p>but unless you can find a way to do this with simp I don't think it should go into norm_num. But <code>delta fact</code> is a really ugly way to do it</p>



<a name="211947347"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/easy%20zmod%20proof/near/211947347" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/easy.20zmod.20proof.html#211947347">(Oct 01 2020 at 17:44)</a>:</h4>
<p>If <code>fact</code> was a one argument structure then you could write <code>&lt;by norm_num&gt;</code></p>



<a name="211947847"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/easy%20zmod%20proof/near/211947847" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/easy.20zmod.20proof.html#211947847">(Oct 01 2020 at 17:48)</a>:</h4>
<p>Sure, but then you cannot write <code>hp.pos</code> or <code>hp.one_lt</code> etc, for <code>hp : fact p.prime</code></p>



<a name="211947910"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/easy%20zmod%20proof/near/211947910" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/easy.20zmod.20proof.html#211947910">(Oct 01 2020 at 17:49)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code>  <span class="n">haveI</span> <span class="o">:</span> <span class="n">fact</span> <span class="o">(</span><span class="n">nat.prime</span> <span class="mi">7</span><span class="o">)</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">norm_num</span> <span class="o">[</span><span class="n">fact</span><span class="o">],</span>
</code></pre></div>



<a name="211947926"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/easy%20zmod%20proof/near/211947926" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/easy.20zmod.20proof.html#211947926">(Oct 01 2020 at 17:49)</a>:</h4>
<p>This works (-;</p>



<a name="211948009"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/easy%20zmod%20proof/near/211948009" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/easy.20zmod.20proof.html#211948009">(Oct 01 2020 at 17:49)</a>:</h4>
<p>you could write <code>hp.1.pos</code> <span aria-label="shrug" class="emoji emoji-1f937" role="img" title="shrug">:shrug:</span></p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>