---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/Deducing.20facts.20about.20integers.20from.20about.20rationals.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Deducing.20facts.20about.20integers.20from.20about.20rationals.html">Deducing facts about integers from about rationals</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="201456076"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Deducing%20facts%20about%20integers%20from%20about%20rationals/near/201456076" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Aniruddh Agarwal <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Deducing.20facts.20about.20integers.20from.20about.20rationals.html#201456076">(Jun 20 2020 at 01:36)</a>:</h4>
<p>If I can prove a statement for all rationals, how can I deduce the same statement for all integers? Let's consider for example the statement <code>∀ m : ℤ, m = (2 * m) / 2</code>. To be clear, I want to show something like</p>
<div class="codehilite"><pre><span></span><code><span class="kn">example</span> <span class="o">(</span><span class="n">m</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="o">(</span><span class="bp">∀</span> <span class="n">n</span> <span class="o">:</span> <span class="n">ℚ</span><span class="o">,</span> <span class="o">(</span><span class="mi">2</span> <span class="bp">*</span> <span class="n">n</span><span class="o">)</span> <span class="bp">/</span> <span class="mi">2</span> <span class="bp">=</span> <span class="n">n</span><span class="o">))</span> <span class="o">:</span> <span class="o">(</span><span class="mi">2</span> <span class="bp">*</span> <span class="n">m</span><span class="o">)</span> <span class="bp">/</span> <span class="n">m</span> <span class="bp">=</span> <span class="n">m</span> <span class="o">:=</span> <span class="n">sorry</span>
</code></pre></div>



<a name="201456135"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Deducing%20facts%20about%20integers%20from%20about%20rationals/near/201456135" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Deducing.20facts.20about.20integers.20from.20about.20rationals.html#201456135">(Jun 20 2020 at 01:38)</a>:</h4>
<p>integer divison and rational division are just different functions</p>



<a name="201456146"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Deducing%20facts%20about%20integers%20from%20about%20rationals/near/201456146" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Deducing.20facts.20about.20integers.20from.20about.20rationals.html#201456146">(Jun 20 2020 at 01:38)</a>:</h4>
<p>i'm not sure how to consider this statement as being the same as a statement about rationals</p>



<a name="201456204"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Deducing%20facts%20about%20integers%20from%20about%20rationals/near/201456204" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Deducing.20facts.20about.20integers.20from.20about.20rationals.html#201456204">(Jun 20 2020 at 01:40)</a>:</h4>
<p>here's a proof</p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="n">tactic</span>
<span class="kn">example</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">m</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">,</span> <span class="n">m</span> <span class="bp">=</span> <span class="o">(</span><span class="mi">2</span> <span class="bp">*</span> <span class="n">m</span><span class="o">)</span> <span class="bp">/</span> <span class="mi">2</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">intro</span><span class="o">,</span> <span class="n">rw</span> <span class="n">mul_comm</span><span class="o">,</span> <span class="n">rw</span> <span class="n">int</span><span class="bp">.</span><span class="n">mul_div_cancel</span><span class="o">,</span> <span class="n">norm_num</span><span class="o">,</span>
<span class="kn">end</span>
</code></pre></div>



<a name="201456221"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Deducing%20facts%20about%20integers%20from%20about%20rationals/near/201456221" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Deducing.20facts.20about.20integers.20from.20about.20rationals.html#201456221">(Jun 20 2020 at 01:41)</a>:</h4>
<p>you're asking to not only fill in the sorry, but for the proof to be "it's h up to some kind of coercion"?</p>



<a name="201456225"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Deducing%20facts%20about%20integers%20from%20about%20rationals/near/201456225" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Aniruddh Agarwal <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Deducing.20facts.20about.20integers.20from.20about.20rationals.html#201456225">(Jun 20 2020 at 01:41)</a>:</h4>
<p>Yes!</p>



<a name="201456226"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Deducing%20facts%20about%20integers%20from%20about%20rationals/near/201456226" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Deducing.20facts.20about.20integers.20from.20about.20rationals.html#201456226">(Jun 20 2020 at 01:41)</a>:</h4>
<p>It would be nice if there was a theorem saying that int.div and rat.div coincide when the denominator divides the numerator</p>



<a name="201456272"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Deducing%20facts%20about%20integers%20from%20about%20rationals/near/201456272" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Deducing.20facts.20about.20integers.20from.20about.20rationals.html#201456272">(Jun 20 2020 at 01:42)</a>:</h4>
<p>It's basically there since <code>floor</code> is defined by using <code>int.div</code>, but I don't think the exact statement is written down</p>



<a name="201456276"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Deducing%20facts%20about%20integers%20from%20about%20rationals/near/201456276" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Deducing.20facts.20about.20integers.20from.20about.20rationals.html#201456276">(Jun 20 2020 at 01:42)</a>:</h4>
<p>i think mario's theorem is enough for what aniruddh is asking</p>



<a name="201456283"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Deducing%20facts%20about%20integers%20from%20about%20rationals/near/201456283" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Aniruddh Agarwal <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Deducing.20facts.20about.20integers.20from.20about.20rationals.html#201456283">(Jun 20 2020 at 01:42)</a>:</h4>
<p>This is just a toy example, but I'm really looking for a more generic mechanism to prove things about some type <code>u</code> by proving them for a bigger type <code>v</code>.</p>



<a name="201456288"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Deducing%20facts%20about%20integers%20from%20about%20rationals/near/201456288" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Deducing.20facts.20about.20integers.20from.20about.20rationals.html#201456288">(Jun 20 2020 at 01:43)</a>:</h4>
<p>That's what <code>cast</code> is for</p>



<a name="201456291"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Deducing%20facts%20about%20integers%20from%20about%20rationals/near/201456291" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Deducing.20facts.20about.20integers.20from.20about.20rationals.html#201456291">(Jun 20 2020 at 01:43)</a>:</h4>
<p>but you chose a bad example because <code>int.div</code> doesn't lift like other functions</p>



<a name="201456350"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Deducing%20facts%20about%20integers%20from%20about%20rationals/near/201456350" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Deducing.20facts.20about.20integers.20from.20about.20rationals.html#201456350">(Jun 20 2020 at 01:44)</a>:</h4>
<p>To make it clear what the problem is with <code>int.div</code>, consider that <code>(1 / 2 : int) = 0</code></p>



<a name="201456351"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Deducing%20facts%20about%20integers%20from%20about%20rationals/near/201456351" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Deducing.20facts.20about.20integers.20from.20about.20rationals.html#201456351">(Jun 20 2020 at 01:44)</a>:</h4>
<p><a href="https://leanprover-community.github.io/mathlib_docs/tactics.html#norm_cast">tactic#norm_cast</a>, <a href="https://leanprover-community.github.io/mathlib_docs/tactics.html#push_cast">tactic#push_cast</a></p>



<a name="201456428"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Deducing%20facts%20about%20integers%20from%20about%20rationals/near/201456428" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Deducing.20facts.20about.20integers.20from.20about.20rationals.html#201456428">(Jun 20 2020 at 01:46)</a>:</h4>
<div class="codehilite"><pre><span></span><code><span class="bp">@</span><span class="o">[</span><span class="n">norm_cast</span><span class="o">]</span>
<span class="kn">lemma</span> <span class="n">int</span><span class="bp">.</span><span class="n">div_cast</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="err">∣</span> <span class="n">a</span><span class="o">)</span> <span class="o">(</span><span class="n">hb</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≠</span> <span class="mi">0</span><span class="o">)</span> <span class="o">:</span> <span class="err">↑</span><span class="o">(</span><span class="n">a</span> <span class="bp">/</span> <span class="n">b</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">ℚ</span><span class="o">)</span> <span class="bp">/</span> <span class="n">b</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">cases</span> <span class="n">h</span> <span class="k">with</span> <span class="n">k</span> <span class="n">hk</span><span class="o">,</span> <span class="n">rw</span> <span class="n">hk</span><span class="o">,</span> <span class="n">field_simp</span> <span class="o">[</span><span class="n">hb</span><span class="o">],</span> <span class="n">ring</span><span class="o">,</span>
<span class="kn">end</span>
</code></pre></div>



<a name="201456492"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Deducing%20facts%20about%20integers%20from%20about%20rationals/near/201456492" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Deducing.20facts.20about.20integers.20from.20about.20rationals.html#201456492">(Jun 20 2020 at 01:48)</a>:</h4>
<p>is this the right form for a norm_cast lemma?</p>



<a name="201458659"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Deducing%20facts%20about%20integers%20from%20about%20rationals/near/201458659" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Utensil Song <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Deducing.20facts.20about.20integers.20from.20about.20rationals.html#201458659">(Jun 20 2020 at 03:01)</a>:</h4>
<p>Is there a <a href="https://leanprover-community.github.io/mathlib_docs/tactics.html#push_cast">tactic#push_cast</a> ? Not found in the doc.</p>



<a name="201459239"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Deducing%20facts%20about%20integers%20from%20about%20rationals/near/201459239" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Deducing.20facts.20about.20integers.20from.20about.20rationals.html#201459239">(Jun 20 2020 at 03:21)</a>:</h4>
<p>I think there used to be a <code>push_cast</code> tactic, but <code>norm_cast</code> does everything now IIRC</p>



<a name="201462958"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Deducing%20facts%20about%20integers%20from%20about%20rationals/near/201462958" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Deducing.20facts.20about.20integers.20from.20about.20rationals.html#201462958">(Jun 20 2020 at 05:20)</a>:</h4>
<p>There is still a <code>push_cast</code>: <a href="https://leanprover-community.github.io/mathlib_docs/find/tactic.interactive.push_cast">docs#tactic.interactive.push_cast</a></p>
<p>The doc just got combined into the one for <code>norm_cast</code>.</p>



<a name="201469860"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Deducing%20facts%20about%20integers%20from%20about%20rationals/near/201469860" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Deducing.20facts.20about.20integers.20from.20about.20rationals.html#201469860">(Jun 20 2020 at 09:20)</a>:</h4>
<p><span class="user-mention" data-user-id="294709">@Aniruddh Agarwal</span> if you hadn't distracted everybody by using division eg if you'd asked about multiplication then you would have got an explicit solution using <code>norm_cast</code>. The <code>norm_cast</code> framework will work when you have functions A to A and B to B which commute with the coercion; then for things in A such that you've proved an equality result for the B values using only functions for which the diagram commutes, the <code>norm_cast</code> tactic will deduce the corresponding result for the A functions. The diagram doesn't commute for division</p>



<a name="201489979"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Deducing%20facts%20about%20integers%20from%20about%20rationals/near/201489979" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Deducing.20facts.20about.20integers.20from.20about.20rationals.html#201489979">(Jun 20 2020 at 18:14)</a>:</h4>
<p>Isn't <code>zify</code> supposed to solve the problem discussed in this thread?</p>



<a name="201489989"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Deducing%20facts%20about%20integers%20from%20about%20rationals/near/201489989" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Deducing.20facts.20about.20integers.20from.20about.20rationals.html#201489989">(Jun 20 2020 at 18:14)</a>:</h4>
<p><code>zify</code> only goes between <code>nat</code> and <code>int</code>, right?</p>



<a name="201490009"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Deducing%20facts%20about%20integers%20from%20about%20rationals/near/201490009" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Deducing.20facts.20about.20integers.20from.20about.20rationals.html#201490009">(Jun 20 2020 at 18:15)</a>:</h4>
<p>hmm I think <code>norm_cast</code> is supposed to solve this problem. Or is the point of <code>zify</code> that it can make better use of cast lemmas with conditions?</p>



<a name="201490117"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Deducing%20facts%20about%20integers%20from%20about%20rationals/near/201490117" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Deducing.20facts.20about.20integers.20from.20about.20rationals.html#201490117">(Jun 20 2020 at 18:17)</a>:</h4>
<p>Ooh right, we need <code>qify</code> for this thread...</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>