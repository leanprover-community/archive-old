---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/Simplifying.20decidable.20propositions.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Simplifying.20decidable.20propositions.html">Simplifying decidable propositions</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="200795524"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Simplifying%20decidable%20propositions/near/200795524" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Pedro Minicz <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Simplifying.20decidable.20propositions.html#200795524">(Jun 14 2020 at 02:06)</a>:</h4>
<p>How do I simplify decidable propositions?</p>



<a name="200795526"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Simplifying%20decidable%20propositions/near/200795526" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Pedro Minicz <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Simplifying.20decidable.20propositions.html#200795526">(Jun 14 2020 at 02:06)</a>:</h4>
<div class="codehilite"><pre><span></span><code><span class="n">def</span> <span class="n">f</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="n">bool</span> <span class="o">:=</span>
  <span class="k">if</span> <span class="n">n</span> <span class="bp">=</span> <span class="mi">0</span> <span class="k">then</span> <span class="n">tt</span> <span class="k">else</span> <span class="k">if</span> <span class="n">n</span> <span class="bp">=</span> <span class="mi">1</span> <span class="k">then</span> <span class="n">tt</span> <span class="k">else</span> <span class="n">ff</span>

<span class="kn">example</span> <span class="o">:</span> <span class="n">f</span> <span class="mi">1</span> <span class="bp">=</span> <span class="n">tt</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">unfold</span> <span class="n">f</span><span class="o">,</span>
  <span class="n">sorry</span>
<span class="kn">end</span>
</code></pre></div>



<a name="200795532"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Simplifying%20decidable%20propositions/near/200795532" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Pedro Minicz <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Simplifying.20decidable.20propositions.html#200795532">(Jun 14 2020 at 02:07)</a>:</h4>
<p>On <code>sorry</code> the goal is <code>ite (1 = 0) tt (ite (1 = 1) tt ff) = tt</code>. I know that <code>0 ≠ 1</code>, so how do I simplify past the first <code>ite</code>.</p>



<a name="200795595"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Simplifying%20decidable%20propositions/near/200795595" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Pedro Minicz <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Simplifying.20decidable.20propositions.html#200795595">(Jun 14 2020 at 02:09)</a>:</h4>
<p>I know that <code>comp_val</code> can close this particular goal, but it wouldn't be able to if the whole expression wasn't computable.</p>



<a name="200795649"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Simplifying%20decidable%20propositions/near/200795649" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Simplifying.20decidable.20propositions.html#200795649">(Jun 14 2020 at 02:11)</a>:</h4>
<p><code>norm_num</code> closes the goal</p>



<a name="200795656"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Simplifying%20decidable%20propositions/near/200795656" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Simplifying.20decidable.20propositions.html#200795656">(Jun 14 2020 at 02:11)</a>:</h4>
<p><code>split_ifs</code> does something useful</p>



<a name="200795693"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Simplifying%20decidable%20propositions/near/200795693" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Simplifying.20decidable.20propositions.html#200795693">(Jun 14 2020 at 02:12)</a>:</h4>
<div class="codehilite"><pre><span></span><code><span class="kn">example</span> <span class="o">:</span> <span class="n">f</span> <span class="mi">1</span> <span class="bp">=</span> <span class="n">tt</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">unfold</span> <span class="n">f</span><span class="o">,</span>
  <span class="n">split_ifs</span><span class="bp">;</span> <span class="n">simp</span><span class="o">,</span>
<span class="kn">end</span>
</code></pre></div>



<a name="200795706"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Simplifying%20decidable%20propositions/near/200795706" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Simplifying.20decidable.20propositions.html#200795706">(Jun 14 2020 at 02:13)</a>:</h4>
<p>I think this is closer to the answer you were looking for,</p>
<div class="codehilite"><pre><span></span><code><span class="n">def</span> <span class="n">f</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="n">bool</span> <span class="o">:=</span>
  <span class="k">if</span> <span class="n">n</span> <span class="bp">=</span> <span class="mi">0</span> <span class="k">then</span> <span class="n">tt</span> <span class="k">else</span> <span class="k">if</span> <span class="n">n</span> <span class="bp">=</span> <span class="mi">1</span> <span class="k">then</span> <span class="n">tt</span> <span class="k">else</span> <span class="n">ff</span>

<span class="kn">example</span> <span class="o">:</span> <span class="n">f</span> <span class="mi">1</span> <span class="bp">=</span> <span class="n">tt</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">unfold</span> <span class="n">f</span><span class="o">,</span>
  <span class="n">rw</span> <span class="n">if_neg</span><span class="o">,</span> <span class="n">swap</span><span class="o">,</span> <span class="o">{</span> <span class="n">norm_num</span> <span class="o">},</span>
  <span class="n">rw</span> <span class="n">if_pos</span><span class="o">,</span> <span class="n">refl</span><span class="o">,</span>
<span class="kn">end</span>
</code></pre></div>



<a name="200795755"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Simplifying%20decidable%20propositions/near/200795755" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Pedro Minicz <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Simplifying.20decidable.20propositions.html#200795755">(Jun 14 2020 at 02:15)</a>:</h4>
<p>Thank you! <code>if_pos</code>/<code>if_neg</code> work perfectly!</p>



<a name="200795866"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Simplifying%20decidable%20propositions/near/200795866" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Simplifying.20decidable.20propositions.html#200795866">(Jun 14 2020 at 02:19)</a>:</h4>
<p><code>split_ifs</code> does something like "<code>rw</code> with <code>if_pos</code> or <code>if_neg</code> at all the <code>ite</code>s in the goal"</p>



<a name="200795896"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Simplifying%20decidable%20propositions/near/200795896" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Simplifying.20decidable.20propositions.html#200795896">(Jun 14 2020 at 02:19)</a>:</h4>
<p>well, that's my mental model of it, <a href="https://leanprover-community.github.io/mathlib_docs/tactics.html#split_ifs">tactic#split_ifs</a> can say something more accurate</p>



<a name="200796709"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Simplifying%20decidable%20propositions/near/200796709" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Pedro Minicz <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Simplifying.20decidable.20propositions.html#200796709">(Jun 14 2020 at 02:45)</a>:</h4>
<p>Is there a tactic that does something like this:</p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="n">data</span><span class="bp">.</span><span class="n">real</span><span class="bp">.</span><span class="n">basic</span>

<span class="n">def</span> <span class="n">f</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="n">bool</span> <span class="o">:=</span>
  <span class="k">if</span> <span class="n">n</span> <span class="bp">=</span> <span class="mi">0</span> <span class="k">then</span> <span class="n">tt</span> <span class="k">else</span> <span class="k">if</span> <span class="n">n</span> <span class="bp">=</span> <span class="mi">1</span> <span class="k">then</span> <span class="n">tt</span> <span class="k">else</span> <span class="n">ff</span>

<span class="kn">example</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">n</span> <span class="bp">&gt;</span> <span class="mi">1</span><span class="o">,</span> <span class="n">f</span> <span class="n">n</span> <span class="bp">=</span> <span class="n">ff</span>
<span class="bp">|</span> <span class="mi">0</span> <span class="n">h</span> <span class="o">:=</span> <span class="n">false</span><span class="bp">.</span><span class="n">elim</span> <span class="o">(</span><span class="n">not_lt_bot</span> <span class="n">h</span><span class="o">)</span>
<span class="bp">|</span> <span class="mi">1</span> <span class="n">h</span> <span class="o">:=</span> <span class="n">false</span><span class="bp">.</span><span class="n">elim</span> <span class="o">(</span><span class="n">irrefl</span> <span class="mi">1</span> <span class="n">h</span><span class="o">)</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">n</span><span class="bp">+</span><span class="mi">2</span><span class="o">)</span> <span class="n">h</span> <span class="o">:=</span> <span class="k">by</span> <span class="o">{</span> <span class="n">simp</span> <span class="o">[</span><span class="n">f</span><span class="o">],</span> <span class="n">split</span><span class="o">,</span> <span class="n">cc</span><span class="o">,</span> <span class="n">linarith</span> <span class="o">}</span>
</code></pre></div>



<a name="200796768"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Simplifying%20decidable%20propositions/near/200796768" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Pedro Minicz <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Simplifying.20decidable.20propositions.html#200796768">(Jun 14 2020 at 02:47)</a>:</h4>
<p>I'd like to have a convenient <code>cases</code> on <code>ℕ</code>, without having to apply <code>cases</code>multiple times or <code>refine</code> a monstrous <code>λ x, match x with ... end</code>.</p>



<a name="200797077"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Simplifying%20decidable%20propositions/near/200797077" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Simplifying.20decidable.20propositions.html#200797077">(Jun 14 2020 at 02:58)</a>:</h4>
<p>For this example, you don't need to pattern match at all:</p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="n">data</span><span class="bp">.</span><span class="n">real</span><span class="bp">.</span><span class="n">basic</span>

<span class="n">def</span> <span class="n">f</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="n">bool</span> <span class="o">:=</span>
  <span class="k">if</span> <span class="n">n</span> <span class="bp">=</span> <span class="mi">0</span> <span class="k">then</span> <span class="n">tt</span> <span class="k">else</span> <span class="k">if</span> <span class="n">n</span> <span class="bp">=</span> <span class="mi">1</span> <span class="k">then</span> <span class="n">tt</span> <span class="k">else</span> <span class="n">ff</span>

<span class="kn">example</span> <span class="o">{</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">}</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">n</span> <span class="bp">&gt;</span> <span class="mi">1</span><span class="o">)</span> <span class="o">:</span> <span class="n">f</span> <span class="n">n</span> <span class="bp">=</span> <span class="n">ff</span> <span class="o">:=</span>
 <span class="k">by</span> <span class="o">{</span> <span class="n">simp</span> <span class="o">[</span><span class="n">f</span><span class="o">],</span> <span class="n">split</span><span class="bp">;</span> <span class="n">linarith</span> <span class="o">}</span>
</code></pre></div>



<a name="200797199"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Simplifying%20decidable%20propositions/near/200797199" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Pedro Minicz <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Simplifying.20decidable.20propositions.html#200797199">(Jun 14 2020 at 03:02)</a>:</h4>
<p>Yes, I am aware. It is just a toy example for demonstration.</p>



<a name="200797368"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Simplifying%20decidable%20propositions/near/200797368" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Simplifying.20decidable.20propositions.html#200797368">(Jun 14 2020 at 03:08)</a>:</h4>
<p>For a small number of cases you could write <code>rcases n with _|_|_|_</code>... otherwise it depends on what you want to do.</p>



<a name="200797780"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Simplifying%20decidable%20propositions/near/200797780" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Pedro Minicz <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Simplifying.20decidable.20propositions.html#200797780">(Jun 14 2020 at 03:23)</a>:</h4>
<p>Thanks that works perfectly.</p>



<a name="200797789"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Simplifying%20decidable%20propositions/near/200797789" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Pedro Minicz <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Simplifying.20decidable.20propositions.html#200797789">(Jun 14 2020 at 03:24)</a>:</h4>
<p>I had tried <code>rcases n with ⟨_|_|_⟩</code> with no success. Good to know <code>rcases</code> can handle it.</p>



<a name="200799154"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Simplifying%20decidable%20propositions/near/200799154" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Simplifying.20decidable.20propositions.html#200799154">(Jun 14 2020 at 04:13)</a>:</h4>
<p>Occasionally it's useful to do something like <code>by_cases h : x &lt; 5</code> and then in the "true" branch, <code>interval_cases h</code>, which explodes into individual cases.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>