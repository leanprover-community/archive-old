---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/Transitive.20imports.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Transitive.20imports.html">Transitive imports</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="275351238"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Transitive%20imports/near/275351238" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Martin Dvořák <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Transitive.20imports.html#275351238">(Mar 15 2022 at 09:57)</a>:</h4>
<p>If your file B requires A and your file C requires both A and B, what do you write as import in the file C? Only B, because it is shorter? Or both A and B, to make your code more robust?</p>



<a name="275351751"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Transitive%20imports/near/275351751" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Transitive.20imports.html#275351751">(Mar 15 2022 at 10:02)</a>:</h4>
<p>I personally reduce the imports because having reduced imports means it's easier to understand your position in the import tree and perform other algorithms, like looking at all the files that import one you're editing to see what breaks.</p>



<a name="275354892"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Transitive%20imports/near/275354892" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Transitive.20imports.html#275354892">(Mar 15 2022 at 10:33)</a>:</h4>
<p>This has been a topic of some discussion in the past. I don't think there is a real consensus, of course most files in mathlib transitively import hundreds of others, and nobody wants to list them all. But some people think that minimizing the set of transitive imports makes the intended background material less clear, and may make splitting / refactoring files harder.<br>
So it's basically up to individual file authors what to do for each file, but PRs changing this on many files will probably generate a lot of debate <span aria-label="grinning" class="emoji emoji-1f600" role="img" title="grinning">:grinning:</span></p>



<a name="275355023"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Transitive%20imports/near/275355023" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Transitive.20imports.html#275355023">(Mar 15 2022 at 10:34)</a>:</h4>
<p>The <code>leanproject reduce-imports</code> command can tell you about these transitive imports btw, which is useful when you have a file you know has too many imports at the top.</p>



<a name="275358648"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Transitive%20imports/near/275358648" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Martin Dvořák <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Transitive.20imports.html#275358648">(Mar 15 2022 at 11:12)</a>:</h4>
<p><span class="user-mention silent" data-user-id="127136">Alex J. Best</span> <a href="#narrow/stream/113489-new-members/topic/Transitive.20imports/near/275354892">said</a>:</p>
<blockquote>
<p>most files in mathlib transitively import hundreds of others</p>
</blockquote>
<p>Do they just import them transitively? Or there examples of a single file that requires hundreds of imports?</p>



<a name="275360905"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Transitive%20imports/near/275360905" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Vincent Beffara <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Transitive.20imports.html#275360905">(Mar 15 2022 at 11:39)</a>:</h4>
<p><a href="/user_uploads/3121/iCghlB4H5L0686Vua1O1ze_r/import_graph.dot.png">import_graph.dot.png</a> Just for fun, here is the import graph of the files in mathlib (generated by <code>leanproject import_graph</code>), there does not seem to be vertices with that huge degree.</p>
<div class="message_inline_image"><a href="/user_uploads/3121/iCghlB4H5L0686Vua1O1ze_r/import_graph.dot.png" title="import_graph.dot.png"><img src="/user_uploads/3121/iCghlB4H5L0686Vua1O1ze_r/import_graph.dot.png"></a></div>



<a name="275360962"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Transitive%20imports/near/275360962" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Vincent Beffara <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Transitive.20imports.html#275360962">(Mar 15 2022 at 11:39)</a>:</h4>
<p><a href="/user_uploads/3121/mQLbDV31eY3h79IhYbDQ_mw8/import_graph.clean.dot.png">import_graph.clean.dot.png</a> And here is the same graph with redundant imports removed everywhere for comparison.</p>
<div class="message_inline_image"><a href="/user_uploads/3121/mQLbDV31eY3h79IhYbDQ_mw8/import_graph.clean.dot.png" title="import_graph.clean.dot.png"><img src="/user_uploads/3121/mQLbDV31eY3h79IhYbDQ_mw8/import_graph.clean.dot.png"></a></div>



<a name="275361180"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Transitive%20imports/near/275361180" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Vincent Beffara <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Transitive.20imports.html#275361180">(Mar 15 2022 at 11:42)</a>:</h4>
<p>It does not look <em>that</em> different except in the top part where basic things like <code>tactic.basic</code> and <code>data.set</code> live</p>



<a name="275361203"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Transitive%20imports/near/275361203" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Transitive.20imports.html#275361203">(Mar 15 2022 at 11:42)</a>:</h4>
<p>Or if you like your hairy messes slightly more colorful, <a href="https://eric-wieser.github.io/mathlib-import-graph/">https://eric-wieser.github.io/mathlib-import-graph/</a></p>



<a name="275361478"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Transitive%20imports/near/275361478" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Martin Dvořák <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Transitive.20imports.html#275361478">(Mar 15 2022 at 11:46)</a>:</h4>
<p>How can I add <code>dot.exe</code> to the path so that <code>leanproject</code> will find it?</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="bp">$</span> <span class="n">leanproject</span> <span class="kn">import</span><span class="bp">-</span><span class="n">graph</span>
<span class="o">[</span><span class="n">WinError</span> <span class="mi">2</span><span class="o">]</span> <span class="s2">"dot"</span> <span class="n">not</span> <span class="n">found</span> <span class="k">in</span> <span class="n">path.</span>
</code></pre></div>
<p>I am on Windows 10 and <code>Git bash</code> is open.</p>



<a name="275363253"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Transitive%20imports/near/275363253" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Transitive.20imports.html#275363253">(Mar 15 2022 at 12:05)</a>:</h4>
<p><span class="user-mention silent" data-user-id="417654">Martin Dvořák</span> <a href="#narrow/stream/113489-new-members/topic/Transitive.20imports/near/275358648">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="127136">Alex J. Best</span> <a href="#narrow/stream/113489-new-members/topic/Transitive.20imports/near/275354892">said</a>:</p>
<blockquote>
<p>most files in mathlib transitively import hundreds of others</p>
</blockquote>
<p>Do they just import them transitively? Or there examples of a single file that requires hundreds of imports?</p>
</blockquote>
<p>The only files with really a lot of imports I can think of are catchall imports, like <code>tactic</code>, even some of those will be transitive though. Almost all files have <code>&lt; 10</code> maximal imports, and most have <code>&lt;=3</code>.</p>



<a name="275363360"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Transitive%20imports/near/275363360" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Transitive.20imports.html#275363360">(Mar 15 2022 at 12:06)</a>:</h4>
<p>Do you have graphviz installed? <a href="https://graphviz.org/download/#windows">https://graphviz.org/download/#windows</a></p>



<a name="275363803"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Transitive%20imports/near/275363803" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Martin Dvořák <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Transitive.20imports.html#275363803">(Mar 15 2022 at 12:11)</a>:</h4>
<p><span class="user-mention silent" data-user-id="127136">Alex J. Best</span> <a href="#narrow/stream/113489-new-members/topic/Transitive.20imports/near/275363360">said</a>:</p>
<blockquote>
<p>Do you have graphviz installed? <a href="https://graphviz.org/download/#windows">https://graphviz.org/download/#windows</a></p>
</blockquote>
<p>I am not sure what "installed" means. I run it from the graphviz folder on my command line (the Windows one).</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>