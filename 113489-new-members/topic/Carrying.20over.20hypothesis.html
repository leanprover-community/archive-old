---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/Carrying.20over.20hypothesis.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Carrying.20over.20hypothesis.html">Carrying over hypothesis</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="205684955"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Carrying%20over%20hypothesis/near/205684955" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Daan van Gent <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Carrying.20over.20hypothesis.html#205684955">(Aug 01 2020 at 14:59)</a>:</h4>
<p>I have two definitions</p>
<div class="codehilite"><pre><span></span><code><span class="kn">section</span>
<span class="kn">variables</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">α</span><span class="o">)</span>
<span class="n">def</span> <span class="n">f</span> <span class="o">[</span><span class="n">h</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≠</span> <span class="n">b</span><span class="o">]</span> <span class="o">:</span> <span class="bp">ℕ</span> <span class="o">:=</span> <span class="mi">0</span>
<span class="n">def</span> <span class="n">g</span> <span class="o">[</span><span class="n">h</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≠</span> <span class="n">b</span><span class="o">]</span> <span class="o">:</span> <span class="bp">ℕ</span> <span class="o">:=</span> <span class="n">f</span>
<span class="kn">end</span>
</code></pre></div>


<p>This fails, because in the definition of g it does not know that <code>a\ne b</code>, which is required for <code>f</code>, even though it is a hypothesis to <code>g</code>. We can fix this with defining <code>g</code> as <code>@f α a b h</code> . However, in the actual context we are working in <code>@f α a b h</code> is very long and has to be written fairly often with different parameters. What can we do?</p>



<a name="205685110"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Carrying%20over%20hypothesis/near/205685110" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Carrying.20over.20hypothesis.html#205685110">(Aug 01 2020 at 15:02)</a>:</h4>
<p><code>[h : a ≠ b]</code> is strange: <code>≠</code> is not a class</p>



<a name="205685242"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Carrying%20over%20hypothesis/near/205685242" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Daan van Gent <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Carrying.20over.20hypothesis.html#205685242">(Aug 01 2020 at 15:06)</a>:</h4>
<p>I am not sure why that is an objection? How do you suggest that we define f such that it tries to derive <code>a\ne b</code> from the context instead of having to explicitly give it as an argument?</p>



<a name="205685311"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Carrying%20over%20hypothesis/near/205685311" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anatole Dedecker <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Carrying.20over.20hypothesis.html#205685311">(Aug 01 2020 at 15:08)</a>:</h4>
<p>I think you want to use <code>{}</code> instead of <code>[]</code></p>



<a name="205685378"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Carrying%20over%20hypothesis/near/205685378" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Daan van Gent <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Carrying.20over.20hypothesis.html#205685378">(Aug 01 2020 at 15:10)</a>:</h4>
<p><span class="user-mention silent" data-user-id="268315">Anatole Dedecker</span> <a href="#narrow/stream/113489-new-members/topic/Carrying.20over.20hypothesis/near/205685311">said</a>:</p>
<blockquote>
<p>I think you want to use <code>{}</code> instead of <code>[]</code></p>
</blockquote>
<p>That changes nothing as far as I can tell.</p>



<a name="205685385"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Carrying%20over%20hypothesis/near/205685385" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Carrying.20over.20hypothesis.html#205685385">(Aug 01 2020 at 15:10)</a>:</h4>
<p>how do you expect lean to do the inference?</p>



<a name="205685477"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Carrying%20over%20hypothesis/near/205685477" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Daan van Gent <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Carrying.20over.20hypothesis.html#205685477">(Aug 01 2020 at 15:13)</a>:</h4>
<p>I mean it wants me to prove this:</p>
<div class="codehilite"><pre><span></span><code><span class="n">failed</span> <span class="n">to</span> <span class="n">synthesize</span> <span class="n">type</span> <span class="n">class</span> <span class="kn">instance</span> <span class="n">for</span>
<span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u_2</span><span class="o">,</span>
<span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">α</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≠</span> <span class="n">b</span>
<span class="err">⊢</span> <span class="n">a</span> <span class="bp">≠</span> <span class="n">b</span>
</code></pre></div>


<p>Don't you think that is rather silly?</p>



<a name="205685519"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Carrying%20over%20hypothesis/near/205685519" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Carrying.20over.20hypothesis.html#205685519">(Aug 01 2020 at 15:14)</a>:</h4>
<p>only classes go to the typeclass inference system</p>



<a name="205685528"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Carrying%20over%20hypothesis/near/205685528" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Carrying.20over.20hypothesis.html#205685528">(Aug 01 2020 at 15:15)</a>:</h4>
<p>maybe you can try <code>attribute [class] ne</code> at the beginning</p>



<a name="205685544"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Carrying%20over%20hypothesis/near/205685544" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Carrying.20over.20hypothesis.html#205685544">(Aug 01 2020 at 15:15)</a>:</h4>
<p>i.e.:</p>
<div class="codehilite"><pre><span></span><code><span class="kn">section</span>
<span class="n">attribute</span> <span class="o">[</span><span class="n">class</span><span class="o">]</span> <span class="n">ne</span>
<span class="kn">variables</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">α</span><span class="o">)</span>
<span class="n">def</span> <span class="n">f</span> <span class="o">[</span><span class="n">h</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≠</span> <span class="n">b</span><span class="o">]</span> <span class="o">:</span> <span class="bp">ℕ</span> <span class="o">:=</span> <span class="mi">0</span>
<span class="n">def</span> <span class="n">g</span> <span class="o">[</span><span class="n">h</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≠</span> <span class="n">b</span><span class="o">]</span> <span class="o">:</span> <span class="bp">ℕ</span> <span class="o">:=</span> <span class="n">f</span> <span class="n">α</span> <span class="n">a</span> <span class="n">b</span>
<span class="kn">end</span>
</code></pre></div>



<a name="205685590"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Carrying%20over%20hypothesis/near/205685590" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Carrying.20over.20hypothesis.html#205685590">(Aug 01 2020 at 15:16)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> so why don't we make <code>ne</code> a class?</p>



<a name="205685662"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Carrying%20over%20hypothesis/near/205685662" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Carrying.20over.20hypothesis.html#205685662">(Aug 01 2020 at 15:18)</a>:</h4>
<p>what? This is silly</p>



<a name="205685672"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Carrying%20over%20hypothesis/near/205685672" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Daan van Gent <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Carrying.20over.20hypothesis.html#205685672">(Aug 01 2020 at 15:18)</a>:</h4>
<p>I can confirm <code>attribute [class] ne</code> fixes the problem. I see <code>variables</code> was supposed to be <code>parameters</code> for my mwe to make sense.</p>



<a name="205685673"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Carrying%20over%20hypothesis/near/205685673" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Carrying.20over.20hypothesis.html#205685673">(Aug 01 2020 at 15:18)</a>:</h4>
<p>You could say the same thing about any term at all</p>



<a name="205685676"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Carrying%20over%20hypothesis/near/205685676" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Carrying.20over.20hypothesis.html#205685676">(Aug 01 2020 at 15:18)</a>:</h4>
<p>only props, or else you'd get diamonds ;-)</p>



<a name="205685702"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Carrying%20over%20hypothesis/near/205685702" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Carrying.20over.20hypothesis.html#205685702">(Aug 01 2020 at 15:19)</a>:</h4>
<p>maybe a better choice is <code>(h : a ≠ b . tactic.assumption)</code></p>



<a name="205685757"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Carrying%20over%20hypothesis/near/205685757" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Carrying.20over.20hypothesis.html#205685757">(Aug 01 2020 at 15:21)</a>:</h4>
<p>If you are using parameters for <code>a</code> and <code>b</code>, you may as well use it for  <code>(h : a ≠ b)</code> too and then you won't have this problem</p>



<a name="205686166"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Carrying%20over%20hypothesis/near/205686166" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Daan van Gent <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Carrying.20over.20hypothesis.html#205686166">(Aug 01 2020 at 15:33)</a>:</h4>
<p><code>(h : a ≠ b . tactic.assumption)</code> works for the mwe but somehow fails in our actual problem. That a and b are both parameters is only for the mwe. Maybe a more faithfull mwe would be</p>
<div class="codehilite"><pre><span></span><code><span class="kn">section</span>
<span class="n">attribute</span> <span class="o">[</span><span class="n">class</span><span class="o">]</span> <span class="n">ne</span>
<span class="kn">parameters</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">α</span><span class="o">)</span>
<span class="n">def</span> <span class="n">f</span> <span class="o">(</span><span class="n">b</span><span class="o">:</span><span class="err">\</span><span class="n">alpha</span><span class="o">)</span> <span class="o">[</span><span class="n">h</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≠</span> <span class="n">b</span><span class="o">]</span> <span class="o">:</span> <span class="bp">ℕ</span> <span class="o">:=</span> <span class="mi">0</span>
<span class="n">def</span> <span class="n">g</span> <span class="o">(</span><span class="n">b</span><span class="o">:</span><span class="err">\</span><span class="n">alpha</span><span class="o">)</span> <span class="o">[</span><span class="n">h</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≠</span> <span class="n">b</span><span class="o">]</span> <span class="o">:</span> <span class="bp">ℕ</span> <span class="o">:=</span> <span class="n">f</span> <span class="n">b</span>
<span class="kn">end</span>
</code></pre></div>



<a name="205686408"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Carrying%20over%20hypothesis/near/205686408" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Carrying.20over.20hypothesis.html#205686408">(Aug 01 2020 at 15:40)</a>:</h4>
<p>Why not just make a and b implicit but ask for h explicitly? It seems like by far the easiest method.</p>



<a name="205686433"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Carrying%20over%20hypothesis/near/205686433" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Carrying.20over.20hypothesis.html#205686433">(Aug 01 2020 at 15:42)</a>:</h4>
<div class="codehilite"><pre><span></span><code><span class="kn">section</span>
<span class="kn">variables</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">{</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">α</span><span class="o">}</span>
<span class="n">def</span> <span class="n">f</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≠</span> <span class="n">b</span><span class="o">)</span> <span class="o">:</span> <span class="bp">ℕ</span> <span class="o">:=</span> <span class="mi">0</span>
<span class="n">def</span> <span class="n">g</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≠</span> <span class="n">b</span><span class="o">)</span> <span class="o">:</span> <span class="bp">ℕ</span> <span class="o">:=</span> <span class="n">f</span> <span class="n">h</span>
<span class="kn">end</span>
</code></pre></div>



<a name="205686932"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Carrying%20over%20hypothesis/near/205686932" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Daan van Gent <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Carrying.20over.20hypothesis.html#205686932">(Aug 01 2020 at 15:56)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110038">Kevin Buzzard</span> <a href="#narrow/stream/113489-new-members/topic/Carrying.20over.20hypothesis/near/205686408">said</a>:</p>
<blockquote>
<p>Why not just make a and b implicit but ask for h explicitly? It seems like by far the easiest method.</p>
</blockquote>
<p>This works quite well. It feels a bit wrong somehow, but not as wrong as making \ne a class.</p>



<a name="205686958"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Carrying%20over%20hypothesis/near/205686958" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Carrying.20over.20hypothesis.html#205686958">(Aug 01 2020 at 15:57)</a>:</h4>
<p>I typically do things similar to kevin's suggestion. I think of it as a function that takes in "two distinct elements" as an argument, and I forget the "implementation detail" that the one argument is literally a proof of <code>\ne</code></p>



<a name="205688130"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Carrying%20over%20hypothesis/near/205688130" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Daan van Gent <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Carrying.20over.20hypothesis.html#205688130">(Aug 01 2020 at 16:26)</a>:</h4>
<p>Thank you all for the interesting discussion. I still have a long way to go before I get a feel of what the canonical way to do things is in Lean.</p>



<a name="205688523"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Carrying%20over%20hypothesis/near/205688523" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Carrying.20over.20hypothesis.html#205688523">(Aug 01 2020 at 16:35)</a>:</h4>
<p>to the extent that the canon exists, it's forged by seeing what works and what doesn't at the mathlib scale; in particular the canon is still very much evolving</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>