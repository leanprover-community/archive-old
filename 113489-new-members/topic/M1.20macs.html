---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/M1.20macs.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/M1.20macs.html">M1 macs</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="227370426"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/M1%20macs/near/227370426" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jake Levinson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/M1.20macs.html#227370426">(Feb 23 2021 at 01:44)</a>:</h4>
<p>Hi all,</p>
<p>I just tried to install Lean after playing through the Natural Number Game, which I came across on hackernews yesterday. Compliments to Kevin and Mohammad for a very convincing introduction! (speaking as a mathematician here <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span>)</p>
<p>I'm on a recently-acquired M1 mac and was not able to install elan through the instructions at <a href="https://leanprover-community.github.io/get_started.html">https://leanprover-community.github.io/get_started.html</a>.</p>
<p>Error message: <code>elan: unknown CPU type: arm64</code><br>
(brew and leanproject installed just fine)</p>
<p>I am technically ignorant about M1 stuff and haven't yet had to use Rosetta for anything, so I'm not sure how to fix this or what to do instead. I saw some discussion up above about getting Lean to work on an M1 mac, but don't understand it. Anyone willing to help a newbie get set up?</p>
<p>Thanks!<br>
-JL</p>



<a name="227371064"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/M1%20macs/near/227371064" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/M1.20macs.html#227371064">(Feb 23 2021 at 01:53)</a>:</h4>
<p>Welcome! I think the issue is that <code>elan</code> does not have binaries for <code>arm64</code> (yet?). Are M1 macs able to run binaries for intel macs? If so, then maybe the <code>apple-darwin</code> file here will work: <a href="https://github.com/Kha/elan/releases/tag/v0.10.3">https://github.com/Kha/elan/releases/tag/v0.10.3</a></p>



<a name="227371206"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/M1%20macs/near/227371206" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/M1.20macs.html#227371206">(Feb 23 2021 at 01:55)</a>:</h4>
<p>I haven't tried to install <code>elan</code> manually before, but the <a href="https://github.com/Kha/elan/tree/v0.10.3#installation">instructions</a> say just to run the file in a terminal after unpacking it.</p>



<a name="227372504"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/M1%20macs/near/227372504" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jake Levinson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/M1.20macs.html#227372504">(Feb 23 2021 at 02:11)</a>:</h4>
<p>Hi Bryan, thank you! Some progress now -- that installer seems to have worked and successfully installed elan. I've cloned the Lean tutorials.</p>
<p>New error message: looks like something else hasn't installed correctly (maybe <code>leanpkg</code>?): VSCode appears to be running <code>leanpkg configure</code> and getting this error:</p>
<p><code>dyld: Library not loaded: /usr/local/opt/gmp/lib/libgmp.10.dylib
  Referenced from: /Users/jake/.elan/toolchains/leanprover-community-lean-3.26.0/bin/lean
  Reason: image not found</code></p>
<p>Note -- I do have <code>gmp</code> installed already via <code>brew install gmp</code>.</p>



<a name="227372766"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/M1%20macs/near/227372766" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/M1.20macs.html#227372766">(Feb 23 2021 at 02:14)</a>:</h4>
<p>Hmm, <code>leanpkg</code> is just a <code>.lean</code> script, so I think <code>lean</code> is not able to find <code>gmp</code> for some reason.</p>



<a name="227372900"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/M1%20macs/near/227372900" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/M1.20macs.html#227372900">(Feb 23 2021 at 02:16)</a>:</h4>
<p>Is it possible that the <code>gmp</code> you got from homebrew is an <code>arm64</code> version and not compatible with a program compiled for an intel mac? (I have no idea, just guessing wildly...)</p>



<a name="227373018"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/M1%20macs/near/227373018" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/M1.20macs.html#227373018">(Feb 23 2021 at 02:17)</a>:</h4>
<p>That'll be it yeah, paths to ARM things from homebrew will be in /opt/</p>



<a name="227373436"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/M1%20macs/near/227373436" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/M1.20macs.html#227373436">(Feb 23 2021 at 02:22)</a>:</h4>
<p>you can install an intel homebrew as well and then it'll get you an intel libgmp if you use that one instead, or you can also reasonably easily compile lean natively for ARM, there's just one <code>cmake</code> arg you need which is <a href="#narrow/stream/113488-general/topic/Apple.20Silicon/near/219305416">https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Apple.20Silicon/near/219305416</a></p>



<a name="227374262"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/M1%20macs/near/227374262" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/M1.20macs.html#227374262">(Feb 23 2021 at 02:34)</a>:</h4>
<p>I suspect the former route might be easier for a new user; otherwise, if you want <code>leanproject</code> to work then you'll have to make sure you compile Lean at the correct v3.26.0 commit and then recompile when we upgrade mathlib to a new version.</p>



<a name="227380771"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/M1%20macs/near/227380771" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jake Levinson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/M1.20macs.html#227380771">(Feb 23 2021 at 04:22)</a>:</h4>
<p>Update:</p>
<p>Your suggestions worked -- recording for posterity here in case anyone else reads this: it turned out I actually already had intel homebrew installed as well (presumably because my current macbook copied everything from my previous macbook automatically when I was first setting it up).</p>
<p>But, I had to actually call that version of homebrew directly to install x86 gmp, that is <code>/usr/local/Homebrew/bin/brew install gmp</code> instead of <code>brew install gmp</code> even though the command ran in a Rosetta terminal... I guess this makes sense but wasn't obvious to me at first!</p>
<p>And after fiddling a bit more, I appear to have the tutorials up and running in VSCode!</p>
<p>Thanks Bryan and Julian!</p>
<p><code>goals accomplished</code> <span aria-label="tada" class="emoji emoji-1f389" role="img" title="tada">:tada:</span></p>



<a name="227393807"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/M1%20macs/near/227393807" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/M1.20macs.html#227393807">(Feb 23 2021 at 08:01)</a>:</h4>
<p>Oh boy, thanks for persevering!</p>



<a name="227464402"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/M1%20macs/near/227464402" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/M1.20macs.html#227464402">(Feb 23 2021 at 16:56)</a>:</h4>
<p><span class="user-mention" data-user-id="391579">@Jake Levinson</span> Glad you got things working! If you don't mind, can you try and recall all the steps you took so we can add some M1-specific instructions to our webpage?</p>



<a name="227470665"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/M1%20macs/near/227470665" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jake Levinson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/M1.20macs.html#227470665">(Feb 23 2021 at 17:35)</a>:</h4>
<p>This is going to be messy, haha. Maybe I should reinstall it all (homebrew, elan, lean, etc) from scratch now that I know how to get it working. The actual sequence involved a bunch of no doubt superfluous steps.</p>
<p>What I actually did was:</p>
<ol start="0">
<li>(I had homebrew and <code>git</code> already installed in both intel and arm64 versions, though I didn't realize I had both copies at first).</li>
<li>
<p>I ran the install command from [https://leanprover-community.github.io/install/macos.html] in Terminal:<br>
<code>/bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/leanprover-community/mathlib-tools/master/scripts/install_macos.sh)" &amp;&amp; source ~/.profile</code></p>
</li>
<li>
<p>I followed these instructions [https://osxdaily.com/2020/11/18/how-run-homebrew-x86-terminal-apple-silicon-mac/] to make a duplicate Terminal that would run using Rosetta.</p>
</li>
<li>I basically now reran a bunch of installers both terminals. Homebrew; the install command from Step 1; Bryan's suggested package for <code>elan</code>; VSCode; <code>brew install gmp</code> and <code>brew install coreutils</code>. (Some of these installers automatically declined to make a second copy of their installation.)</li>
</ol>
<p>At this point I was able to copy the tutorial using <code>leanproject get tutorials</code>. When I opened it in VSCode, it caused a bunch of "memory capacity exceeded" errors in the VSCode Infoview (I forget the exact error message, unfortunately). This stopped happening once I ran <code>leanproject build tutorials</code>. I'm not sure if that was supposed to be necessary.</p>
<p>Still, lean was still not functional because it couldn't detect gmp.</p>
<ol start="4">
<li>Finally I forced Homebrew to install the x86 gmp using Julian's suggestion. Specifically I went and found the intel Homebrew installed in <code>/usr/local/Homebrew</code> and ran the gmp installer with it as <code>/usr/local/Homebrew/bin/brew install gmp</code> instead of <code>brew install gmp</code>. (The latter command had been, I think, invoking <code>arm64</code> Homebrew even if I ran it in the Rosetta Terminal.)</li>
</ol>
<p>That seemed to do it!</p>
<p>(edit: Oh, there was more too. I think I ran some other commands like <code>pipx ensurepath</code> and maybe related stuff in both terminals. Basically I was trying to do all the steps from <a href="https://leanprover-community.github.io/install/macos_details.html">https://leanprover-community.github.io/install/macos_details.html</a>.)</p>
<p>If I have time this weekend I'll delete it all and try a fresh install.</p>



<a name="227471475"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/M1%20macs/near/227471475" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/M1.20macs.html#227471475">(Feb 23 2021 at 17:40)</a>:</h4>
<p>Thanks Jake! This is already really helpful!</p>



<a name="227471800"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/M1%20macs/near/227471800" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/M1.20macs.html#227471800">(Feb 23 2021 at 17:41)</a>:</h4>
<p>I believe <code>leanproject get tutorials</code> should've made it unnecessary to run <code>leanproject build tutorials</code>, as one of the things it does is to download the compiled files for the version of mathlib used in the tutorials. Not sure if the lack of <code>gmp</code> somehow caused Lean to be unable to find them.</p>



<a name="252549976"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/M1%20macs/near/252549976" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/M1.20macs.html#252549976">(Sep 08 2021 at 23:35)</a>:</h4>
<p><span class="user-mention" data-user-id="438769">@Ania Misiorek</span>, now that you've changed the thread title, do you see the message above from Jake Levison? He describes the steps in his successful installation on an M1 mac.</p>



<a name="252549993"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/M1%20macs/near/252549993" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/M1.20macs.html#252549993">(Sep 08 2021 at 23:35)</a>:</h4>
<p>It would be helpful to also have your report of either a successful recipe, or failure points.</p>



<a name="252550006"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/M1%20macs/near/252550006" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/M1.20macs.html#252550006">(Sep 08 2021 at 23:36)</a>:</h4>
<p>Unfortunately not many of us have M1 macs yet!</p>



<a name="252574287"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/M1%20macs/near/252574287" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Justin Pearson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/M1.20macs.html#252574287">(Sep 09 2021 at 05:47)</a>:</h4>
<p>I just compiled lean3 from the  source on my M1 Mac. elan does not yet (last time I checked) work on M1 Macs. The downside of compiling from source, is that you have git checkout release rather than the latest git commit. The latest git commit could be a bit too experimental.  After that everything just works, but you don't get elan support for different versions of lean.</p>



<a name="252574534"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/M1%20macs/near/252574534" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Justin Pearson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/M1.20macs.html#252574534">(Sep 09 2021 at 05:51)</a>:</h4>
<p>I forgot to say, you also have to install leanproject yourself via pipx.  If you haven't used your mac for development then you will have to set a quite a few things such as homebrew,  and installing the xcode command line tools.</p>



<a name="252587607"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/M1%20macs/near/252587607" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Marcus Rossel <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/M1.20macs.html#252587607">(Sep 09 2021 at 08:14)</a>:</h4>
<p>I'm not sure of the steps I took anymore, but I use <code>elan</code> on an M1 Mac.</p>



<a name="252587715"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/M1%20macs/near/252587715" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Marcus Rossel <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/M1.20macs.html#252587715">(Sep 09 2021 at 08:14)</a>:</h4>
<p>I think it involved using homebrew.</p>



<a name="252587933"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/M1%20macs/near/252587933" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Marcus Rossel <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/M1.20macs.html#252587933">(Sep 09 2021 at 08:16)</a>:</h4>
<p>There's a thread called "Lean 4 on M1 Macs" in which this is discussed.</p>



<a name="252659309"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/M1%20macs/near/252659309" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/M1.20macs.html#252659309">(Sep 09 2021 at 16:58)</a>:</h4>
<p><span class="user-mention" data-user-id="372804">@Marcus Rossel</span>  Perhaps you're using intel homebrew (and therefore rosetta'd lean)? <code>file =lean</code> and/or <code>file =elan</code> should tell you (or feel free to share the output), it'll say at the end <code>Mach-O 64-bit executable arm64</code> if it's arm64, but yeah elan isn't going to give you those.</p>
<p>Also I've tried to update most of the docs for this that I could find, but I'm pretty sure there's at least 1 PR still unmerged updating instructions (and then 1 ticket for making things "automatically work" as best they can). Certainly help is still welcome.</p>



<a name="252659408"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/M1%20macs/near/252659408" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/M1.20macs.html#252659408">(Sep 09 2021 at 16:59)</a>:</h4>
<p><span class="user-mention" data-user-id="434371">@Justin Pearson</span> </p>
<blockquote>
<p>The downside of compiling from source, is that you have git checkout release rather than the latest git commit.</p>
</blockquote>
<p>Yes definitely -- I think Brian mentioned this above in this thread, but if you don't get this commit right, you'll also find that oleans that leanproject downloads will not work on your lean (or really, they'll not be useful, and your lean will recompile things).</p>



<a name="252659772"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/M1%20macs/near/252659772" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/M1.20macs.html#252659772">(Sep 09 2021 at 17:01)</a>:</h4>
<blockquote>
<p>I forgot to say, you also have to install leanproject yourself via pipx.</p>
</blockquote>
<p>This is the outstanding PR that needs merging to update the docs -- pipx isn't necessary anymore, <code>brew install mathlibtools</code> will give you a working leanproject even on M1s.</p>
<p>I'll ping someone on that PR (<a href="https://github.com/leanprover-community/leanprover-community.github.io/pull/194">https://github.com/leanprover-community/leanprover-community.github.io/pull/194</a>) to see if we can get it merged).</p>



<a name="252844987"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/M1%20macs/near/252844987" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Hector Padilla <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/M1.20macs.html#252844987">(Sep 10 2021 at 20:22)</a>:</h4>
<p>I managed to install elan on my M1 Mac as well as the lean extension, but I get this error in VS Code: server has stopped due to signal SIGABRT</p>
<p>dyld: Library not loaded: /usr/local/opt/gmp/lib/libgmp.10.dylib<br>
  Referenced from: /Users/hec/.elan/toolchains/stable/bin/lean<br>
  Reason: image not found</p>



<a name="252846770"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/M1%20macs/near/252846770" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/M1.20macs.html#252846770">(Sep 10 2021 at 20:36)</a>:</h4>
<p>Hi! Can you:</p>
<ul>
<li>show the output of <code>file /Users/hec/.elan/toolchains/stable/bin/lean</code></li>
<li>same for <code>otool -L /Users/hec/.elan/toolchains/stable/bin/lean</code></li>
<li>explain briefly what you ran to get elan, and then what you did to get lean, and how you got vscode</li>
</ul>
<p>If you want to interpret that error -- it's saying "the dynamic linker can't find libgmp", or even simpler "lean can't find a dependency of itself while it's trying to start". And I can see from the path it's looking in that is trying to find an intel libgmp (which is going to live in <code>/usr/local/opt</code>). If you share a bit more about what you ran it'll likely help.</p>



<a name="252849696"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/M1%20macs/near/252849696" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Hector Padilla <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/M1.20macs.html#252849696">(Sep 10 2021 at 20:59)</a>:</h4>
<p>Thank you! When I run, file /Users/hec/.elan/toolchains/stable/bin/lean</p>
<p>/Users/hec/.elan/toolchains/stable/bin/lean: Mach-O 64-bit executable x86_64</p>
<p>And when I run, otool -L /Users/hec/.elan/toolchains/stable/bin/lean</p>
<div class="codehilite"><pre><span></span><code>/usr/local/opt/gmp/lib/libgmp.10.dylib (compatibility version 15.0.0, current version 15.1.0)
/usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current version 1292.60.1)
/usr/lib/libc++.1.dylib (compatibility version 1.0.0, current version 904.4.0)
</code></pre></div>

<p>I used Jake's method above to install elan. I also installed lean extension through vscode and installed vscode through their website.</p>



<a name="252850105"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/M1%20macs/near/252850105" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/M1.20macs.html#252850105">(Sep 10 2021 at 21:02)</a>:</h4>
<p>OK cool, so you have a fully intel lean and elan at least. Does <code>ls /usr/local/opt/gmp/lib</code> show that that exists (and contains that file)?</p>



<a name="252850255"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/M1%20macs/near/252850255" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Hector Padilla <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/M1.20macs.html#252850255">(Sep 10 2021 at 21:03)</a>:</h4>
<p>it says no such file or directory exists</p>



<a name="252850464"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/M1%20macs/near/252850464" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/M1.20macs.html#252850464">(Sep 10 2021 at 21:05)</a>:</h4>
<p>Aha, interesting ok. Can you try re-running <code>/usr/local/Homebrew/bin/brew install gmp</code> and let me know what it does?</p>



<a name="252852285"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/M1%20macs/near/252852285" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Hector Padilla <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/M1.20macs.html#252852285">(Sep 10 2021 at 21:19)</a>:</h4>
<p>Warning: No available formula or cask with the name "gmp".<br>
==&gt; Searching for similarly named formulae...<br>
Error: No similarly named formulae found.<br>
==&gt; Searching for a previously deleted formula (in the last month)...<br>
Error: No previously deleted formula found.<br>
==&gt; Searching taps on GitHub...<br>
Error: No formulae found in taps.</p>



<a name="252853074"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/M1%20macs/near/252853074" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/M1.20macs.html#252853074">(Sep 10 2021 at 21:25)</a>:</h4>
<p>Hrm, interesting... And if you run <code>/usr/local/Homebrew/bin/brew update</code> and then try it again?</p>



<a name="252871692"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/M1%20macs/near/252871692" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jake Levinson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/M1.20macs.html#252871692">(Sep 11 2021 at 01:18)</a>:</h4>
<p>One possibly relevant fact about my approach earlier this year: at some point, the Rosetta terminal I created stopped working. Unfortunately, it was a while ago (maybe around the start of the summer?) and I don't remember exactly what was wrong with it. But, either way, Lean and VS Code were working for me at that point (and still is), so I didn't question it...</p>



<a name="254219510"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/M1%20macs/near/254219510" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Justus Springer <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/M1.20macs.html#254219510">(Sep 21 2021 at 14:48)</a>:</h4>
<p>I found this thread as I'm considering buying an M1 mac. Besides the installation issues (which make me feel a little intimidated), is the M1 a good machine for lean? On my 5-year-old windows notebook, Lean can be pretty slow at times, which is one of the reasons I'm thinking of buying a new notebook.</p>



<a name="254221263"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/M1%20macs/near/254221263" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Trevor Fancher <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/M1.20macs.html#254221263">(Sep 21 2021 at 14:59)</a>:</h4>
<p>My M1 MacBook Air handles Lean like a champ. Installation was a pain, but I've mostly got it figured out. I built <code>elan</code> from source and then let it pull whatever lean binaries it wants (usually from a call to <code>leanproject</code>). They will be x86 binaries and they will fail to run. So then I go intro <code>elan</code>'s folder and overwrite them with the proper version of <code>lean</code> that I manually build from source. Then everything works. I can explain in more detail if anyone is interested. The benefit of this hack is that <code>leanproject</code> works.</p>



<a name="254226778"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/M1%20macs/near/254226778" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Justin Pearson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/M1.20macs.html#254226778">(Sep 21 2021 at 15:30)</a>:</h4>
<p>If you are happy with only having one version of lean, then it seems that you don't really need elan. I tend to use "leanproject --no-lean-upgrade upgrade-mathlib"  The real problem with the M1 macs is that even though you have the intel emulation , mixing it with native M1 binaries is a bit of a mess,    so it takes some planning.</p>



<a name="254229412"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/M1%20macs/near/254229412" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/M1.20macs.html#254229412">(Sep 21 2021 at 15:45)</a>:</h4>
<p><span class="user-mention silent" data-user-id="436061">Trevor Fancher</span> <a href="#narrow/stream/113489-new-members/topic/M1.20macs/near/254221263">said</a>:</p>
<blockquote>
<p>My M1 MacBook Air handles Lean like a champ. Installation was a pain, but I've mostly got it figured out. I built <code>elan</code> from source and then let it pull whatever lean binaries it wants (usually from a call to <code>leanproject</code>). They will be x86 binaries and they will fail to run. So then I go intro <code>elan</code>'s folder and overwrite them with the proper version of <code>lean</code> that I manually build from source. Then everything works. I can explain in more detail if anyone is interested. The benefit of this hack is that <code>leanproject</code> works.</p>
</blockquote>
<p>Yes, detailed instructions in this thread would definitely be helpful for others, particularly as we don't have much on M1 Macs on our website right now!</p>



<a name="254230009"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/M1%20macs/near/254230009" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Justus Springer <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/M1.20macs.html#254230009">(Sep 21 2021 at 15:49)</a>:</h4>
<p>Thanks for the info! I hope my excitement of looking forward to a fast lean environment will mitigate the installation pain.</p>



<a name="254235099"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/M1%20macs/near/254235099" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Trevor Fancher <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/M1.20macs.html#254235099">(Sep 21 2021 at 16:19)</a>:</h4>
<p><span class="user-mention" data-user-id="123965">@Bryan Gin-ge Chen</span> I'll write something up and post it back here. There are a bunch of steps, so it may take a day or so before I have time to remember/rediscover the process.</p>



<a name="254299386"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/M1%20macs/near/254299386" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Trevor Fancher <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/M1.20macs.html#254299386">(Sep 22 2021 at 00:42)</a>:</h4>
<p><span class="user-mention" data-user-id="123965">@Bryan Gin-ge Chen</span> I went ahead and put the instruction in a new thread <a class="stream-topic" data-stream-id="113489" href="/#narrow/stream/113489-new-members/topic/M1.20Macs.3A.20Installing.20the.20Lean.203.20toolchain">#new members &gt; M1 Macs: Installing the Lean 3 toolchain</a> .  I forgot just how convoluted the whole process is. It really does work, though :)</p>



<a name="254300058"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/M1%20macs/near/254300058" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/M1.20macs.html#254300058">(Sep 22 2021 at 00:53)</a>:</h4>
<p>Thanks! I've taken the liberty of editing the title to explicitly say "Lean 3".</p>



<a name="254300082"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/M1%20macs/near/254300082" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/M1.20macs.html#254300082">(Sep 22 2021 at 00:53)</a>:</h4>
<p>Oops, I guess that broke the link in your message. Sorry!</p>



<a name="254300158"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/M1%20macs/near/254300158" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Trevor Fancher <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/M1.20macs.html#254300158">(Sep 22 2021 at 00:54)</a>:</h4>
<p>No problem, I fixed it :)</p>



<a name="258978268"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/M1%20macs/near/258978268" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Hector Padilla <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/M1.20macs.html#258978268">(Oct 25 2021 at 15:44)</a>:</h4>
<p>Hey I'm still getting this SIGABRT error, does anyone know how to fix it? I tried restarting lean. I am also running on a M1 mac. <a href="/user_uploads/3121/CNwaxB6H68lI1IfexpqyPrXR/Screen-Shot-2021-10-25-at-11.43.33-AM.png">Screen-Shot-2021-10-25-at-11.43.33-AM.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/3121/CNwaxB6H68lI1IfexpqyPrXR/Screen-Shot-2021-10-25-at-11.43.33-AM.png" title="Screen-Shot-2021-10-25-at-11.43.33-AM.png"><img src="/user_uploads/3121/CNwaxB6H68lI1IfexpqyPrXR/Screen-Shot-2021-10-25-at-11.43.33-AM.png"></a></div>



<a name="259505333"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/M1%20macs/near/259505333" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/M1.20macs.html#259505333">(Oct 29 2021 at 10:17)</a>:</h4>
<p>I'm thinking about trying to get one of the new macbooks (which I'm not too happy about, but by all reports this M1 Pro is an absolute beast...). Has anyone tried Lean on one of then yet?</p>



<a name="259511167"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/M1%20macs/near/259511167" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Rute <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/M1.20macs.html#259511167">(Oct 29 2021 at 11:29)</a>:</h4>
<p><span class="user-mention" data-user-id="284160">@Eric Rodriguez</span> A few people have (both with Rosetta and installing natively).  Besides this thread, search Zulip for "apple silicon", "M1", "aarch64" and "arm".  I don't have one yet.  (I was going to buy one, but then my old company offered me my work MacBook Pro for $200 when I left.)  However, the impression I get is that it works well and is fast (even on the M1 MacBook Air, both emulated on Rosetta or installed natively), but if you are going to install it natively you currently have to compile from source which is some additional work.  Instructions are at <a class="stream-topic" data-stream-id="113489" href="/#narrow/stream/113489-new-members/topic/M1.20Macs.3A.20Installing.20the.20Lean.203.20toolchain">#new members &gt; M1 Macs: Installing the Lean 3 toolchain</a>  (There is some discussion in <a class="stream-topic" data-stream-id="113488" href="/#narrow/stream/113488-general/topic/Apple.20Silicon">#general &gt; Apple Silicon</a> about making an M1 binary to make installation easier, but it involves changes to the current GitHub workflow.)</p>



<a name="259512282"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/M1%20macs/near/259512282" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Rute <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/M1.20macs.html#259512282">(Oct 29 2021 at 11:42)</a>:</h4>
<p>Sorry, maybe I misunderstood.  Were you asking specifically about running Lean on a new M1 Pro/Max chip to get a sense of the performance?  (Given the good reviews for the early M1 chip, I'm sure it's great, but I'd also love to hear from folks how great.)</p>



<a name="259521771"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/M1%20macs/near/259521771" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/M1.20macs.html#259521771">(Oct 29 2021 at 13:12)</a>:</h4>
<p>Yes, although this is also very useful info! If I end up getting it, I'll report back :)</p>



<a name="271259682"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/M1%20macs/near/271259682" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Nick Yu <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/M1.20macs.html#271259682">(Feb 09 2022 at 10:59)</a>:</h4>
<p><span class="user-mention" data-user-id="439270">@Hector Padilla</span> Maybe check if gmp got installed in <code>/usr/local/Homebrew/opt</code> when using intel homebrew, in my case it got installed in the homebrew <code>opt</code> directory. </p>
<p>Not the best solution, but you can change the referenced shared library with <code>install_name_tool -change /usr/local/opt/gmp/lib/libgmp.10.dylib /usr/local/Homebrew/opt/gmp/lib/libgmp.10.dylib /Users/hec/.elan/toolchains/stable/bin/lean</code>.</p>



<a name="276141408"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/M1%20macs/near/276141408" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Cris Perdue <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/M1.20macs.html#276141408">(Mar 22 2022 at 03:59)</a>:</h4>
<p><span class="user-mention silent" data-user-id="477697">Nick Yu</span> <a href="#narrow/stream/113489-new-members/topic/M1.20macs/near/271259682">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="439270">Hector Padilla</span> Maybe check if gmp got installed in <code>/usr/local/Homebrew/opt</code> when using intel homebrew, in my case it got installed in the homebrew <code>opt</code> directory. </p>
<p>Not the best solution, but you can change the referenced shared library with <code>install_name_tool -change /usr/local/opt/gmp/lib/libgmp.10.dylib /usr/local/Homebrew/opt/gmp/lib/libgmp.10.dylib /Users/hec/.elan/toolchains/stable/bin/lean</code>.</p>
</blockquote>
<p>In the end I completed the install using homebrew as described at <a href="https://leanprover-community.github.io/install/macos.html">https://leanprover-community.github.io/install/macos.html</a>. But this put Lean at $HOME/.elan/toolchains/leanprover-community--lean---3.41.0/bin/lean.  So the command to fix the reference to libgmp had to point to there.</p>



<a name="276349398"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/M1%20macs/near/276349398" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jujian Zhang <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/M1.20macs.html#276349398">(Mar 23 2022 at 15:20)</a>:</h4>
<p>Recently there is an alpha release for asahilinux which is specifically made for apple M1 chips. Their is a super easy to use installer scripts. I just get Lean run locally on this Linux distro. The only problem is that visual studio code doesn’t work; so one has to use code-server which is like visual studio code but with user interface in a browser.</p>



<a name="276352494"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/M1%20macs/near/276352494" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/M1.20macs.html#276352494">(Mar 23 2022 at 15:41)</a>:</h4>
<p>Ooh, can you send a link? How come code doesn't work?</p>



<a name="276365382"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/M1%20macs/near/276365382" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jujian Zhang <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/M1.20macs.html#276365382">(Mar 23 2022 at 16:53)</a>:</h4>
<p><a href="https://asahilinux.org">https://asahilinux.org</a></p>



<a name="276365429"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/M1%20macs/near/276365429" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jujian Zhang <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/M1.20macs.html#276365429">(Mar 23 2022 at 16:53)</a>:</h4>
<p>All lean code works; it’s just visual studio code the editor doesn’t compile.</p>



<a name="276365791"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/M1%20macs/near/276365791" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jujian Zhang <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/M1.20macs.html#276365791">(Mar 23 2022 at 16:55)</a>:</h4>
<p><a href="https://github.com/coder/code-server">https://github.com/coder/code-server</a><br>
This link is vscode in browser</p>



<a name="304136059"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/M1%20macs/near/304136059" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Daniel Ever <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/M1.20macs.html#304136059">(Oct 15 2022 at 00:00)</a>:</h4>
<p>Good day to everyone! Recently I've found some more time to dive into Lean once again, but currently have problems while installing Lean on my M1 Mac Mini. I've carefully followed the steps provided here: <a href="https://leanprover-community.github.io/install/macos.html">https://leanprover-community.github.io/install/macos.html</a>, everything looked fine, but in the end after I've downloaded Mathematics_in_lean using <code>leanproject get</code>all the commands are highlighted by the red lines.</p>
<p>the explanation is "file 'data/real/basic' not found in the search path" and so on. I'd be grateful if someone could direct me to what to do next since I'm not really familiar with programming, Visual Studio and other IT-related subjects. Thanks in advance!</p>



<a name="304146236"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/M1%20macs/near/304146236" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Matt Diamond <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/M1.20macs.html#304146236">(Oct 15 2022 at 03:03)</a>:</h4>
<p>Are you using VSCode? If so, do you see <code>leanpkg.toml</code> and <code>leanpkg.path</code> at the root of the open directory?</p>



<a name="304159511"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/M1%20macs/near/304159511" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/M1.20macs.html#304159511">(Oct 15 2022 at 07:04)</a>:</h4>
<p>Yeah, often the issue is that the user did not open the root directory of a lean project with VS Code's "open folder" functionality</p>



<a name="304184596"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/M1%20macs/near/304184596" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Daniel Ever <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/M1.20macs.html#304184596">(Oct 15 2022 at 11:08)</a>:</h4>
<p><span class="user-mention silent" data-user-id="380294">Matt Diamond</span> <a href="#narrow/stream/113489-new-members/topic/M1.20macs/near/304146236">said</a>:</p>
<blockquote>
<p>Are you using VSCode? If so, do you see <code>leanpkg.toml</code> and <code>leanpkg.path</code> at the root of the open directory?</p>
</blockquote>
<p>indeed, it solved the issue! I never thought it was important since I was already insider the folder and used <code>code</code> command to get there before. Thanks for your help!</p>



<a name="318767253"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/M1%20macs/near/318767253" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Dhruv Bhatia <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/M1.20macs.html#318767253">(Dec 31 2022 at 17:48)</a>:</h4>
<p>Hello! I got a new m1 mac recently and have wanted to install lean. I've been following the instructions on <a href="https://leanprover-community.github.io/install/macos.html">https://leanprover-community.github.io/install/macos.html</a>, but get stuck at the part where I run the command <code>arch -x86_64 zsh</code>. It keeps giving me the error  <code>arch: posix_spawnp: zsh: Bad CPU type in executable</code>. I don't really have much familiarity with how these things work, so would appreciate any help!</p>



<a name="318859370"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/M1%20macs/near/318859370" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Marcus Rossel <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/M1.20macs.html#318859370">(Jan 01 2023 at 13:37)</a>:</h4>
<p><span class="user-mention" data-user-id="452188">@Dhruv Bhatia</span> You probably haven't installed Rosetta yet: <a href="https://apple.stackexchange.com/a/408379/119179">https://apple.stackexchange.com/a/408379/119179</a></p>



<a name="318949077"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/M1%20macs/near/318949077" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bolton Bailey <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/M1.20macs.html#318949077">(Jan 02 2023 at 08:12)</a>:</h4>
<p><span class="user-mention" data-user-id="372804">@Marcus Rossel</span> Note that this was the error message a <a href="#narrow/stream/113488-general/topic/Installing.20mathlib.20on.20M1.20Mac/near/291366560">friend of mine got</a> after Rosetta 2 installed apparently successfully. Do you think it really is that Rosetta is corrupted as was commented in that part of the thread, and if so, do you have a better fix than the pretty wild instructions I got on reinstalling it?</p>



<a name="318950552"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/M1%20macs/near/318950552" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Marcus Rossel <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/M1.20macs.html#318950552">(Jan 02 2023 at 08:24)</a>:</h4>
<p><span class="user-mention" data-user-id="282271">@Bolton Bailey</span> Unfortunately I'm not well-versed in this kind of topic either, but the next best thing I'd try is running the commands from a terminal that was explicitly launched using Rosetta: <a href="https://apple.stackexchange.com/a/428769">https://apple.stackexchange.com/a/428769</a></p>



<a name="319103153"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/M1%20macs/near/319103153" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Dhruv Bhatia <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/M1.20macs.html#319103153">(Jan 02 2023 at 22:48)</a>:</h4>
<p><span class="user-mention" data-user-id="372804">@Marcus Rossel</span> that worked! Thanks, I'd been banging my head against a wall for a while there!</p>



<a name="322770777"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/M1%20macs/near/322770777" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Topo_Space <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/M1.20macs.html#322770777">(Jan 21 2023 at 19:24)</a>:</h4>
<p>I have installed elan using rosetta 2 brew. can someone tell me how can I change to default brew on arm64? even when I run <code>arch -arm64 zsh</code> and type <code>brew list</code>, it still shows the x86 brew packages.</p>



<a name="322875074"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/M1%20macs/near/322875074" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Topo_Space <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/M1.20macs.html#322875074">(Jan 22 2023 at 15:32)</a>:</h4>
<p>Does somebody know what's the issue?</p>
<p><code>file 'topology/basic' not found in the search path
Use 'lean --path' to see where lean is looking, or https://leanprover-community.github.io/file-not-found.html for more</code></p>
<p>and when I check the <code>lean --path</code> it shows the following:<br>
<code>lean --path
{
  "is_user_leanpkg_path": false,
  "leanpkg_path_file": "/Users/max/Local Repository/Lean/my_project/leanpkg.path",
  "path": [
    "/Users/max/.elan/toolchains/leanprover-community--lean---3.50.3/bin/../library",
    "/Users/max/.elan/toolchains/leanprover-community--lean---3.50.3/bin/../lib/lean/library",
    "/Users/max/Local Repository/Lean/my_project/_target/deps/mathlib/src",
    "/Users/max/Local Repository/Lean/my_project/./src"
  ]
}</code></p>



<a name="322877185"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/M1%20macs/near/322877185" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/M1.20macs.html#322877185">(Jan 22 2023 at 15:51)</a>:</h4>
<p>I don't use a mac, but have you opened in VS code the <em>folder</em> you want to work in (and not only a single file)?</p>



<a name="322878595"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/M1%20macs/near/322878595" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Topo_Space <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/M1.20macs.html#322878595">(Jan 22 2023 at 16:03)</a>:</h4>
<p>yes I did</p>



<a name="322881484"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/M1%20macs/near/322881484" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Topo_Space <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/M1.20macs.html#322881484">(Jan 22 2023 at 16:28)</a>:</h4>
<p><span class="user-mention silent" data-user-id="130384">Riccardo Brasca</span> <a href="#narrow/stream/113489-new-members/topic/M1.20macs/near/322877185">said</a>:</p>
<blockquote>
<p>I don't use a mac, but have you opened in VS code the <em>folder</em> you want to work in (and not only a single file)?</p>
</blockquote>
<p>only the project must be opened with vscode. thanks for your mention. problem solved.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>