---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/New.20to.20Lean.2C.20getting.20confusing.20error.20message.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/New.20to.20Lean.2C.20getting.20confusing.20error.20message.html">New to Lean, getting confusing error message</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="261720512"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/New%20to%20Lean%2C%20getting%20confusing%20error%20message/near/261720512" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Daniel Hast <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/New.20to.20Lean.2C.20getting.20confusing.20error.20message.html#261720512">(Nov 16 2021 at 23:03)</a>:</h4>
<p>Hello, I'm somewhat new to Lean and have been working through the Mathematics in Lean book. Wasn't having any issues for most of it, but I've run into an exercise where my (very short) solution gives a baffling "invalid occurrence of field notation" error. Where would be a good place to post this to have someone more experienced in Lean take a look? I'm probably making a silly mistake but I've triple-checked my proof and can't see what's wrong.</p>



<a name="261720560"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/New%20to%20Lean%2C%20getting%20confusing%20error%20message/near/261720560" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/New.20to.20Lean.2C.20getting.20confusing.20error.20message.html#261720560">(Nov 16 2021 at 23:04)</a>:</h4>
<p>Post a <a href="https://leanprover-community.github.io/mwe.html">#mwe</a> here, you're in exactly the right place, just post fully working code so we can see the error ourselves.</p>



<a name="261720652"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/New%20to%20Lean%2C%20getting%20confusing%20error%20message/near/261720652" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Daniel Hast <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/New.20to.20Lean.2C.20getting.20confusing.20error.20message.html#261720652">(Nov 16 2021 at 23:04)</a>:</h4>
<p>Thanks, here's the code:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">example</span> <span class="o">:</span> <span class="n">inj_on</span> <span class="n">sqrt</span> <span class="o">{</span> <span class="n">x</span> <span class="bp">|</span> <span class="n">x</span> <span class="bp">≥</span> <span class="mi">0</span> <span class="o">}</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">intros</span> <span class="n">x</span> <span class="n">hx</span> <span class="n">y</span> <span class="n">hy</span> <span class="n">eq</span><span class="o">,</span>
  <span class="k">calc</span> <span class="n">x</span> <span class="bp">=</span> <span class="o">(</span><span class="n">sqrt</span> <span class="n">x</span><span class="o">)</span><span class="bp">^</span><span class="mi">2</span> <span class="o">:</span> <span class="kd">by</span> <span class="n">rw</span> <span class="n">sqr_sqrt</span> <span class="n">hx</span>
  <span class="bp">...</span> <span class="bp">=</span> <span class="o">(</span><span class="n">sqrt</span> <span class="n">y</span><span class="o">)</span><span class="bp">^</span><span class="mi">2</span> <span class="o">:</span> <span class="kd">by</span> <span class="n">rw</span> <span class="n">eq</span>
  <span class="bp">...</span> <span class="bp">=</span> <span class="n">y</span> <span class="o">:</span> <span class="kd">by</span> <span class="n">rw</span> <span class="n">sqr_sqrt</span> <span class="n">hy</span>
<span class="kd">end</span>
</code></pre></div>



<a name="261720702"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/New%20to%20Lean%2C%20getting%20confusing%20error%20message/near/261720702" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/New.20to.20Lean.2C.20getting.20confusing.20error.20message.html#261720702">(Nov 16 2021 at 23:05)</a>:</h4>
<p>Can you include the <code>import</code>s too?</p>



<a name="261720712"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/New%20to%20Lean%2C%20getting%20confusing%20error%20message/near/261720712" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/New.20to.20Lean.2C.20getting.20confusing.20error.20message.html#261720712">(Nov 16 2021 at 23:05)</a>:</h4>
<p>can you make it a <a href="https://leanprover-community.github.io/mwe.html">#mwe</a> ? If I post that into my Lean I just get errors about not knowing what x is</p>



<a name="261720791"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/New%20to%20Lean%2C%20getting%20confusing%20error%20message/near/261720791" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Daniel Hast <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/New.20to.20Lean.2C.20getting.20confusing.20error.20message.html#261720791">(Nov 16 2021 at 23:06)</a>:</h4>
<p>Oops, my mistake, now with imports included:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">data.real.sqrt</span>
<span class="kn">open</span> <span class="n">set</span> <span class="n">real</span>
<span class="kd">example</span> <span class="o">:</span> <span class="n">inj_on</span> <span class="n">sqrt</span> <span class="o">{</span> <span class="n">x</span> <span class="bp">|</span> <span class="n">x</span> <span class="bp">≥</span> <span class="mi">0</span> <span class="o">}</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">intros</span> <span class="n">x</span> <span class="n">hx</span> <span class="n">y</span> <span class="n">hy</span> <span class="n">eq</span><span class="o">,</span>
  <span class="k">calc</span> <span class="n">x</span> <span class="bp">=</span> <span class="o">(</span><span class="n">sqrt</span> <span class="n">x</span><span class="o">)</span><span class="bp">^</span><span class="mi">2</span> <span class="o">:</span> <span class="kd">by</span> <span class="n">rw</span> <span class="n">sqr_sqrt</span> <span class="n">hx</span>
  <span class="bp">...</span> <span class="bp">=</span> <span class="o">(</span><span class="n">sqrt</span> <span class="n">y</span><span class="o">)</span><span class="bp">^</span><span class="mi">2</span> <span class="o">:</span> <span class="kd">by</span> <span class="n">rw</span> <span class="n">eq</span>
  <span class="bp">...</span> <span class="bp">=</span> <span class="n">y</span> <span class="o">:</span> <span class="kd">by</span> <span class="n">rw</span> <span class="n">sqr_sqrt</span> <span class="n">hy</span>
<span class="kd">end</span>
</code></pre></div>



<a name="261720847"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/New%20to%20Lean%2C%20getting%20confusing%20error%20message/near/261720847" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/New.20to.20Lean.2C.20getting.20confusing.20error.20message.html#261720847">(Nov 16 2021 at 23:06)</a>:</h4>
<p><code>calc</code> errors are always messy to debug because the syntax is a bit unwieldy</p>



<a name="261720914"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/New%20to%20Lean%2C%20getting%20confusing%20error%20message/near/261720914" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Daniel Hast <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/New.20to.20Lean.2C.20getting.20confusing.20error.20message.html#261720914">(Nov 16 2021 at 23:07)</a>:</h4>
<p>Yeah. I can make the proof work just by using the same logic with <code>rw</code>s instead of <code>calc</code>, but I'd like to figure out what I'm doing wrong here.</p>



<a name="261721078"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/New%20to%20Lean%2C%20getting%20confusing%20error%20message/near/261721078" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/New.20to.20Lean.2C.20getting.20confusing.20error.20message.html#261721078">(Nov 16 2021 at 23:09)</a>:</h4>
<p>I have no idea why that doesn't work! The error message is super-unhelpful.</p>



<a name="261721089"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/New%20to%20Lean%2C%20getting%20confusing%20error%20message/near/261721089" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/New.20to.20Lean.2C.20getting.20confusing.20error.20message.html#261721089">(Nov 16 2021 at 23:09)</a>:</h4>
<p>does <code>sqr_sqrt</code> exist? I can only find <a href="https://leanprover-community.github.io/mathlib_docs/find/real.sq_sqrt">docs#real.sq_sqrt</a></p>



<a name="261721175"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/New%20to%20Lean%2C%20getting%20confusing%20error%20message/near/261721175" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/New.20to.20Lean.2C.20getting.20confusing.20error.20message.html#261721175">(Nov 16 2021 at 23:10)</a>:</h4>
<p>That's not the issue though, e.g.</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">data.real.sqrt</span>
<span class="kn">open</span> <span class="n">set</span> <span class="n">real</span>
<span class="kd">example</span> <span class="o">:</span> <span class="n">inj_on</span> <span class="n">sqrt</span> <span class="o">{</span> <span class="n">x</span> <span class="bp">|</span> <span class="n">x</span> <span class="bp">≥</span> <span class="mi">0</span> <span class="o">}</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">intros</span> <span class="n">x</span> <span class="n">hx</span> <span class="n">y</span> <span class="n">hy</span> <span class="n">eq</span><span class="o">,</span>
  <span class="k">calc</span> <span class="n">x</span> <span class="bp">=</span> <span class="o">(</span><span class="n">sqrt</span> <span class="n">x</span><span class="o">)</span><span class="bp">^</span><span class="mi">2</span> <span class="o">:</span> <span class="gr">sorry</span>
  <span class="bp">...</span> <span class="bp">=</span> <span class="n">y</span> <span class="o">:</span> <span class="gr">sorry</span>
<span class="kd">end</span>
<span class="c1">-- invalid occurrence of field notation</span>
</code></pre></div>



<a name="261721332"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/New%20to%20Lean%2C%20getting%20confusing%20error%20message/near/261721332" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/New.20to.20Lean.2C.20getting.20confusing.20error.20message.html#261721332">(Nov 16 2021 at 23:11)</a>:</h4>
<p>It's happy in term mode:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">data.real.sqrt</span>
<span class="kn">open</span> <span class="n">set</span> <span class="n">real</span>
<span class="kd">example</span> <span class="o">:</span> <span class="n">inj_on</span> <span class="n">sqrt</span> <span class="o">{</span> <span class="n">x</span> <span class="bp">|</span> <span class="n">x</span> <span class="bp">≥</span> <span class="mi">0</span> <span class="o">}</span> <span class="o">:=</span>
<span class="k">assume</span> <span class="n">x</span> <span class="n">hx</span> <span class="n">y</span> <span class="n">hy</span> <span class="n">eq</span><span class="o">,</span>
  <span class="k">calc</span> <span class="n">x</span> <span class="bp">=</span> <span class="o">(</span><span class="n">sqrt</span> <span class="n">x</span><span class="o">)</span><span class="bp">^</span><span class="mi">2</span> <span class="o">:</span> <span class="kd">by</span> <span class="n">rw</span> <span class="n">sq_sqrt</span> <span class="n">hx</span>
  <span class="bp">...</span> <span class="bp">=</span> <span class="o">(</span><span class="n">sqrt</span> <span class="n">y</span><span class="o">)</span><span class="bp">^</span><span class="mi">2</span> <span class="o">:</span> <span class="kd">by</span> <span class="n">rw</span> <span class="n">eq</span>
  <span class="bp">...</span> <span class="bp">=</span> <span class="n">y</span> <span class="o">:</span> <span class="kd">by</span> <span class="n">rw</span> <span class="n">sq_sqrt</span> <span class="n">hy</span>
</code></pre></div>



<a name="261721583"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/New%20to%20Lean%2C%20getting%20confusing%20error%20message/near/261721583" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Daniel Hast <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/New.20to.20Lean.2C.20getting.20confusing.20error.20message.html#261721583">(Nov 16 2021 at 23:13)</a>:</h4>
<p>I used autocomplete to find <code>sqr_sqrt</code>, so it certainly does seem to exist and behave as expected—the proof works if I replace the <code>calc</code> block with <code>rw</code>s (with <code>sqr_sqrt</code>, not <code>sq_sqrt</code>).</p>



<a name="261721763"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/New%20to%20Lean%2C%20getting%20confusing%20error%20message/near/261721763" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/New.20to.20Lean.2C.20getting.20confusing.20error.20message.html#261721763">(Nov 16 2021 at 23:15)</a>:</h4>
<p>A more minimal mwe:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">data.set.function</span>
<span class="kn">open</span> <span class="n">set</span>

<span class="kd">def</span> <span class="n">foo</span> <span class="o">:</span> <span class="n">ℕ</span> <span class="bp">→</span> <span class="n">ℕ</span> <span class="o">:=</span> <span class="gr">sorry</span>

<span class="kd">example</span> <span class="o">:</span> <span class="n">inj_on</span> <span class="n">foo</span> <span class="o">{</span> <span class="n">x</span> <span class="bp">|</span> <span class="n">x</span> <span class="bp">≥</span> <span class="mi">0</span> <span class="o">}</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">intros</span> <span class="n">x</span> <span class="n">hx</span> <span class="n">y</span> <span class="n">hy</span> <span class="n">eq</span><span class="o">,</span>
  <span class="k">calc</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">foo</span> <span class="n">x</span> <span class="o">:</span> <span class="gr">sorry</span>
     <span class="bp">...</span> <span class="bp">=</span> <span class="n">y</span> <span class="o">:</span> <span class="gr">sorry</span><span class="o">,</span>
<span class="kd">end</span>
</code></pre></div>



<a name="261721880"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/New%20to%20Lean%2C%20getting%20confusing%20error%20message/near/261721880" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Daniel Hast <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/New.20to.20Lean.2C.20getting.20confusing.20error.20message.html#261721880">(Nov 16 2021 at 23:16)</a>:</h4>
<p>It works for me in term mode too—though, oddly enough, only with <code>sqr_sqrt</code>. If I use <code>sq_sqrt</code>, it says "unknown identifier 'sq_sqrt'". Seems like this is a separate issue, though, as the above MWE illustrates.</p>



<a name="261721912"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/New%20to%20Lean%2C%20getting%20confusing%20error%20message/near/261721912" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/New.20to.20Lean.2C.20getting.20confusing.20error.20message.html#261721912">(Nov 16 2021 at 23:16)</a>:</h4>
<p>When you hover over <code>sqr_sqrt</code>, what does it tell you the full name is?</p>



<a name="261721917"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/New%20to%20Lean%2C%20getting%20confusing%20error%20message/near/261721917" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/New.20to.20Lean.2C.20getting.20confusing.20error.20message.html#261721917">(Nov 16 2021 at 23:16)</a>:</h4>
<p>I think you might be on an old mathlib, but the other issue seems to persist with new mathlib too</p>



<a name="261721944"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/New%20to%20Lean%2C%20getting%20confusing%20error%20message/near/261721944" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Daniel Hast <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/New.20to.20Lean.2C.20getting.20confusing.20error.20message.html#261721944">(Nov 16 2021 at 23:17)</a>:</h4>
<p><code>real.sqr_sqrt</code> is the full name</p>



<a name="261721968"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/New%20to%20Lean%2C%20getting%20confusing%20error%20message/near/261721968" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/New.20to.20Lean.2C.20getting.20confusing.20error.20message.html#261721968">(Nov 16 2021 at 23:17)</a>:</h4>
<p><a href="https://leanprover-community.github.io/mathlib_docs/find/real.sqr_sqrt">docs#real.sqr_sqrt</a> says that doesn't exist any more</p>



<a name="261722011"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/New%20to%20Lean%2C%20getting%20confusing%20error%20message/near/261722011" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/New.20to.20Lean.2C.20getting.20confusing.20error.20message.html#261722011">(Nov 16 2021 at 23:17)</a>:</h4>
<p>Aha</p>



<a name="261722058"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/New%20to%20Lean%2C%20getting%20confusing%20error%20message/near/261722058" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/New.20to.20Lean.2C.20getting.20confusing.20error.20message.html#261722058">(Nov 16 2021 at 23:18)</a>:</h4>
<p>You confused calc by calling a local variable <code>eq</code></p>



<a name="261722071"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/New%20to%20Lean%2C%20getting%20confusing%20error%20message/near/261722071" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Daniel Hast <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/New.20to.20Lean.2C.20getting.20confusing.20error.20message.html#261722071">(Nov 16 2021 at 23:18)</a>:</h4>
<p>Huh. I only installed lean a couple weeks ago, so I'm surprised I could be on an old version already.</p>



<a name="261722079"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/New%20to%20Lean%2C%20getting%20confusing%20error%20message/near/261722079" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/New.20to.20Lean.2C.20getting.20confusing.20error.20message.html#261722079">(Nov 16 2021 at 23:18)</a>:</h4>
<p>oh very nice!</p>



<a name="261722095"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/New%20to%20Lean%2C%20getting%20confusing%20error%20message/near/261722095" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Daniel Hast <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/New.20to.20Lean.2C.20getting.20confusing.20error.20message.html#261722095">(Nov 16 2021 at 23:18)</a>:</h4>
<p>Oh, is <code>eq</code> a reserved name? Oops, that would explain it!</p>



<a name="261722104"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/New%20to%20Lean%2C%20getting%20confusing%20error%20message/near/261722104" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/New.20to.20Lean.2C.20getting.20confusing.20error.20message.html#261722104">(Nov 16 2021 at 23:18)</a>:</h4>
<p>Nope, that's a calc bug I think</p>



<a name="261722133"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/New%20to%20Lean%2C%20getting%20confusing%20error%20message/near/261722133" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/New.20to.20Lean.2C.20getting.20confusing.20error.20message.html#261722133">(Nov 16 2021 at 23:19)</a>:</h4>
<p><span class="user-mention" data-user-id="458142">@Daniel Hast</span> <code>eq</code> is the actual name for <code>=</code> so you could imagine how this might screw things up in edge cases, but nonetheless it shouldn't have happened.</p>



<a name="261722154"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/New%20to%20Lean%2C%20getting%20confusing%20error%20message/near/261722154" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/New.20to.20Lean.2C.20getting.20confusing.20error.20message.html#261722154">(Nov 16 2021 at 23:19)</a>:</h4>
<p><code>have := x = y</code> works just fine with the bad local <code>eq</code></p>



<a name="261722166"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/New%20to%20Lean%2C%20getting%20confusing%20error%20message/near/261722166" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/New.20to.20Lean.2C.20getting.20confusing.20error.20message.html#261722166">(Nov 16 2021 at 23:19)</a>:</h4>
<p><code>calc</code> is using some bad rules to resolve the <code>=</code> notation</p>



<a name="261722178"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/New%20to%20Lean%2C%20getting%20confusing%20error%20message/near/261722178" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Daniel Hast <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/New.20to.20Lean.2C.20getting.20confusing.20error.20message.html#261722178">(Nov 16 2021 at 23:19)</a>:</h4>
<p>This is definitely what's causing it, though. I changed <code>eq</code> to <code>e</code> and it works fine.</p>



<a name="261722269"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/New%20to%20Lean%2C%20getting%20confusing%20error%20message/near/261722269" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/New.20to.20Lean.2C.20getting.20confusing.20error.20message.html#261722269">(Nov 16 2021 at 23:20)</a>:</h4>
<p>As for old versions, if you take a look at the <a class="stream" data-stream-id="116290" href="/#narrow/stream/116290-rss">#rss</a>  stream you'll be able to see how much Lean's maths library has changed in the last two weeks. It's a bit scary.</p>



<a name="261722290"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/New%20to%20Lean%2C%20getting%20confusing%20error%20message/near/261722290" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Daniel Hast <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/New.20to.20Lean.2C.20getting.20confusing.20error.20message.html#261722290">(Nov 16 2021 at 23:21)</a>:</h4>
<p>Thanks for the help!</p>



<a name="261722309"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/New%20to%20Lean%2C%20getting%20confusing%20error%20message/near/261722309" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Daniel Hast <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/New.20to.20Lean.2C.20getting.20confusing.20error.20message.html#261722309">(Nov 16 2021 at 23:21)</a>:</h4>
<p>How do I make sure I'm on the newest version of mathlib, by the way?</p>



<a name="261722328"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/New%20to%20Lean%2C%20getting%20confusing%20error%20message/near/261722328" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/New.20to.20Lean.2C.20getting.20confusing.20error.20message.html#261722328">(Nov 16 2021 at 23:21)</a>:</h4>
<p>Are you using <code>leanproject</code>?</p>



<a name="261722338"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/New%20to%20Lean%2C%20getting%20confusing%20error%20message/near/261722338" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Daniel Hast <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/New.20to.20Lean.2C.20getting.20confusing.20error.20message.html#261722338">(Nov 16 2021 at 23:21)</a>:</h4>
<p>Yes</p>



<a name="261722395"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/New%20to%20Lean%2C%20getting%20confusing%20error%20message/near/261722395" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/New.20to.20Lean.2C.20getting.20confusing.20error.20message.html#261722395">(Nov 16 2021 at 23:22)</a>:</h4>
<p>Looks like it was renamed by Yael on 9th September.</p>



<a name="261722434"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/New%20to%20Lean%2C%20getting%20confusing%20error%20message/near/261722434" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/New.20to.20Lean.2C.20getting.20confusing.20error.20message.html#261722434">(Nov 16 2021 at 23:22)</a>:</h4>
<p>Oh? Don't remember that</p>



<a name="261722467"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/New%20to%20Lean%2C%20getting%20confusing%20error%20message/near/261722467" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/New.20to.20Lean.2C.20getting.20confusing.20error.20message.html#261722467">(Nov 16 2021 at 23:22)</a>:</h4>
<p>Ah yeah, maybe. <code>sqr</code> is a weird name so I must've changed it while doing adjacent stuff.</p>



<a name="261722733"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/New%20to%20Lean%2C%20getting%20confusing%20error%20message/near/261722733" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/New.20to.20Lean.2C.20getting.20confusing.20error.20message.html#261722733">(Nov 16 2021 at 23:25)</a>:</h4>
<p>Here's something I didn't know <code>calc</code> could do:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">example</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="mi">2</span> <span class="bp">≤</span> <span class="n">n</span> <span class="bp">→</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">n</span> <span class="o">:=</span>
<span class="k">calc</span> <span class="mi">2</span> <span class="bp">≤</span> <span class="n">n</span> <span class="bp">→</span> <span class="mi">1</span> <span class="bp">≤</span> <span class="n">n</span> <span class="o">:</span> <span class="gr">sorry</span>
       <span class="bp">...</span> <span class="bp">→</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">n</span> <span class="o">:</span> <span class="gr">sorry</span>
</code></pre></div>



<a name="261722961"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/New%20to%20Lean%2C%20getting%20confusing%20error%20message/near/261722961" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/New.20to.20Lean.2C.20getting.20confusing.20error.20message.html#261722961">(Nov 16 2021 at 23:27)</a>:</h4>
<p>I think this has come up before but I can't remember why it works. I think <code>calc</code> works for <code>=</code> because <code>eq.trans</code> is tagged <code>@[trans]</code>. But what does one tag here?</p>



<a name="261723134"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/New%20to%20Lean%2C%20getting%20confusing%20error%20message/near/261723134" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/New.20to.20Lean.2C.20getting.20confusing.20error.20message.html#261723134">(Nov 16 2021 at 23:29)</a>:</h4>
<p>I created a bug report at <a href="https://github.com/leanprover-community/lean/issues/651">https://github.com/leanprover-community/lean/issues/651</a></p>



<a name="261723144"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/New%20to%20Lean%2C%20getting%20confusing%20error%20message/near/261723144" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/New.20to.20Lean.2C.20getting.20confusing.20error.20message.html#261723144">(Nov 16 2021 at 23:29)</a>:</h4>
<p>This is only the calc _tactic_ that is broken</p>



<a name="261723147"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/New%20to%20Lean%2C%20getting%20confusing%20error%20message/near/261723147" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/New.20to.20Lean.2C.20getting.20confusing.20error.20message.html#261723147">(Nov 16 2021 at 23:29)</a>:</h4>
<p>Given that the website is now quite professional-looking, I'm slightly surprised and amused that there are still "(Kevin thinks)" comments in <a href="https://leanprover-community.github.io/extras/calc.html">https://leanprover-community.github.io/extras/calc.html</a></p>



<a name="261723537"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/New%20to%20Lean%2C%20getting%20confusing%20error%20message/near/261723537" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Daniel Hast <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/New.20to.20Lean.2C.20getting.20confusing.20error.20message.html#261723537">(Nov 16 2021 at 23:33)</a>:</h4>
<p>I just figured out the issue with the outdated version of mathlib: I had downloaded the "Mathematics in Lean" project using <code>leanproject get mathematics_in_lean</code>, and presumably this came with an older version of mathlib. I ran <code>leanproject upgrade-mathlib</code> in the project directory and restarted VSCodium, and now the function is named <code>sq_sqrt</code> rather than <code>sqr_sqrt</code>.</p>



<a name="261723637"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/New%20to%20Lean%2C%20getting%20confusing%20error%20message/near/261723637" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/New.20to.20Lean.2C.20getting.20confusing.20error.20message.html#261723637">(Nov 16 2021 at 23:34)</a>:</h4>
<p>you might also find that you broke <code>mathematics_in_lean</code> too :-/ I can't guarantee that the book works with current mathlib.</p>



<a name="261723699"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/New%20to%20Lean%2C%20getting%20confusing%20error%20message/near/261723699" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Daniel Hast <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/New.20to.20Lean.2C.20getting.20confusing.20error.20message.html#261723699">(Nov 16 2021 at 23:35)</a>:</h4>
<p>Hm, it's possible. I'm almost done going through it anyway, so it's unlikely to be an issue for me.</p>



<a name="261723739"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/New%20to%20Lean%2C%20getting%20confusing%20error%20message/near/261723739" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/New.20to.20Lean.2C.20getting.20confusing.20error.20message.html#261723739">(Nov 16 2021 at 23:35)</a>:</h4>
<p>Great, you can help write the next bit :-)</p>



<a name="261723758"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/New%20to%20Lean%2C%20getting%20confusing%20error%20message/near/261723758" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Daniel Hast <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/New.20to.20Lean.2C.20getting.20confusing.20error.20message.html#261723758">(Nov 16 2021 at 23:35)</a>:</h4>
<p>What chapters are planned?</p>



<a name="261723855"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/New%20to%20Lean%2C%20getting%20confusing%20error%20message/near/261723855" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/New.20to.20Lean.2C.20getting.20confusing.20error.20message.html#261723855">(Nov 16 2021 at 23:36)</a>:</h4>
<p>I'd like to do some of the stuff in <a href="https://github.com/ImperialCollegeLondon/formalising-mathematics">https://github.com/ImperialCollegeLondon/formalising-mathematics</a> but the thing about a multi-author project is that different authors might have different opinions :-)</p>



<a name="261724077"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/New%20to%20Lean%2C%20getting%20confusing%20error%20message/near/261724077" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/New.20to.20Lean.2C.20getting.20confusing.20error.20message.html#261724077">(Nov 16 2021 at 23:39)</a>:</h4>
<p>I'm afraid we're quite a way from non-abelian Chabauty, but <a href="https://github.com/leanprover-community/mathlib/projects/13">algebraic geometry is slowly ticking along...</a></p>



<a name="261724367"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/New%20to%20Lean%2C%20getting%20confusing%20error%20message/near/261724367" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Daniel Hast <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/New.20to.20Lean.2C.20getting.20confusing.20error.20message.html#261724367">(Nov 16 2021 at 23:41)</a>:</h4>
<p>Very cool! I'm teaching commutative algebra next semester and was thinking about formalizing some of Atiyah-Macdonald in Lean.</p>



<a name="261724696"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/New%20to%20Lean%2C%20getting%20confusing%20error%20message/near/261724696" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/New.20to.20Lean.2C.20getting.20confusing.20error.20message.html#261724696">(Nov 16 2021 at 23:44)</a>:</h4>
<p>Oh we probably have all of that now but it's definitely a really good way to learn when you want to branch out away from all the learning material.</p>



<a name="261725632"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/New%20to%20Lean%2C%20getting%20confusing%20error%20message/near/261725632" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/New.20to.20Lean.2C.20getting.20confusing.20error.20message.html#261725632">(Nov 16 2021 at 23:51)</a>:</h4>
<p>Here are some of the things we learnt when formalising A-M:<br>
1) Mathematicians are really good at writing things R[1/f][1/g]=R[1/fg] (e.g. this is embedded in stuff like the proof that the presheaf on Spec(R) is a sheaf in the Stacks project) and this is not actually true when you think about it. So instead of defining a ring <code>localisation R S</code>, you should define <code>is_localisation R S A</code>, a predicate on R-algebras A saying "I satisfy the universal property". We talk about this more <a href="https://arxiv.org/abs/2101.02602">here</a> -- most of my co-authors are undergrads.</p>
<p>2) Distinct types are disjoint. This is different from set theory where you can have rings <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi><mo>⊆</mo><mi>B</mi><mo>⊆</mo><mi>C</mi></mrow><annotation encoding="application/x-tex">A\subseteq B\subseteq C</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8193em;vertical-align:-0.136em;"></span><span class="mord mathnormal">A</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">⊆</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8193em;vertical-align:-0.136em;"></span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">⊆</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">C</span></span></span></span>; in type theory you have to decide how you want to handle this. We tried making some of A,B,C terms but it didn't work out; in the end we made them all types. Along the way we <a href="https://arxiv.org/abs/2108.10700">invented heterogeneous associativity</a>. I was really surprised these ideas weren't discovered 30 years ago, but it's interesting that your immediate reaction, like mine, was "hey I bet formalising commutative algebra would be fun", whereas this was apparently not the reaction of previous users of systems such as this, perhaps because they tended to come from computer science departments.<br>
3) There's a <a href="https://twitter.com/XenaProject/status/1308693991144206336">mistake</a> in the proof of the Artin-Tate lemma in A-M! It's very hard to spot though -- don't read the thread, see if you can spot it :-) It's Prop 7.8 and the issue is the claim about each element of C being a linear combination of the y_i with coefficients in B_0. Lean didn't like this claim. Of course it's not hard to fix, it's just interesting that it's there.</p>
<div class="inline-preview-twitter"><div class="twitter-tweet"><a href="https://twitter.com/XenaProject/status/1308693991144206336"><img class="twitter-avatar" src="https://uploads.zulipusercontent.net/9686557e167ea0d81d62930b9cefbd210a469b3c/68747470733a2f2f7062732e7477696d672e636f6d2f70726f66696c655f696d616765732f313236333831303239373536303733353734342f674d69616e515f565f6e6f726d616c2e6a7067"></a><p>Hey algebra Twitter! Imperial undergraduate Kenny Lau just found a cool oversight in the proof of the Artin-Tate lemma in Atiyah--Macdonald, when formalising it in Lean. Of course the proof can be fixed. How to justify "each elt of C is a lin comb of the y_i with coeffts in B_0"? <a href="https://t.co/XnFGNpQ799">https://twitter.com/XenaProject/status/1308693991144206336/photo/1</a></p><span>- The Xena Project (@XenaProject)</span><div class="twitter-image"><a href="https://t.co/XnFGNpQ799"><img src="https://uploads.zulipusercontent.net/48cbd752e1d62018968a472dab1cac6b1f680d17/68747470733a2f2f7062732e7477696d672e636f6d2f6d656469612f45696c70733164586b41493065666b2e706e673a736d616c6c"></a></div><div class="twitter-image"><a href="https://t.co/XnFGNpQ799"><img src="https://uploads.zulipusercontent.net/a4dcb9a08efd8dcd8dffb8ab5008a1350a4fb2e0/68747470733a2f2f7062732e7477696d672e636f6d2f6d656469612f45696c70743131586341453445454f2e706e673a6d656469756d"></a></div></div></div><p><span class="user-mention" data-user-id="458142">@Daniel Hast</span></p>



<a name="261725753"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/New%20to%20Lean%2C%20getting%20confusing%20error%20message/near/261725753" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Daniel Hast <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/New.20to.20Lean.2C.20getting.20confusing.20error.20message.html#261725753">(Nov 16 2021 at 23:53)</a>:</h4>
<p>Interesting, thanks!</p>



<a name="261725877"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/New%20to%20Lean%2C%20getting%20confusing%20error%20message/near/261725877" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/New.20to.20Lean.2C.20getting.20confusing.20error.20message.html#261725877">(Nov 16 2021 at 23:55)</a>:</h4>
<p>There was a slip of a similar nature in Clausen-Scholze which we also spotted when formalising but which Peter of course fixed immediately.</p>



<a name="261726117"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/New%20to%20Lean%2C%20getting%20confusing%20error%20message/near/261726117" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/New.20to.20Lean.2C.20getting.20confusing.20error.20message.html#261726117">(Nov 16 2021 at 23:56)</a>:</h4>
<p>If you want to see some more advanced number theory in Lean you should subscribe to some of the "not-subscribed-by-default" streams such as <a class="stream" data-stream-id="304774" href="/#narrow/stream/304774-FLT-regular">#FLT regular</a> or <a class="stream" data-stream-id="267928" href="/#narrow/stream/267928-condensed-mathematics">#condensed mathematics</a> (click on the + by "STREAMS" )</p>



<a name="261727226"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/New%20to%20Lean%2C%20getting%20confusing%20error%20message/near/261727226" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/New.20to.20Lean.2C.20getting.20confusing.20error.20message.html#261727226">(Nov 17 2021 at 00:07)</a>:</h4>
<p><span class="user-mention silent" data-user-id="310045">Eric Wieser</span> <a href="#narrow/stream/113489-new-members/topic/New.20to.20Lean.2C.20getting.20confusing.20error.20message/near/261723144">said</a>:</p>
<blockquote>
<p>This is only the calc _tactic_ that is broken</p>
</blockquote>
<p>There is no <code>calc</code> tactic. <code>calc</code> in tactic mode is literally a shorthand for <code>refine calc</code>, so there is only a term mode <code>calc</code>. (Yes, this is weird and does not occur for any other tactic/term constructor in lean.)</p>



<a name="261742581"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/New%20to%20Lean%2C%20getting%20confusing%20error%20message/near/261742581" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/New.20to.20Lean.2C.20getting.20confusing.20error.20message.html#261742581">(Nov 17 2021 at 04:32)</a>:</h4>
<p>Which makes it even more puzzling that the code worked in term mode but not in tactic mode.</p>



<a name="261742668"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/New%20to%20Lean%2C%20getting%20confusing%20error%20message/near/261742668" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/New.20to.20Lean.2C.20getting.20confusing.20error.20message.html#261742668">(Nov 17 2021 at 04:33)</a>:</h4>
<p>FTR, it seems that Mario already fixed this in <a href="https://github.com/leanprover-community/lean/issues/652">lean#652</a></p>



<a name="261742753"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/New%20to%20Lean%2C%20getting%20confusing%20error%20message/near/261742753" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/New.20to.20Lean.2C.20getting.20confusing.20error.20message.html#261742753">(Nov 17 2021 at 04:35)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> Is this something that might also matter to Lean 4?</p>



<a name="261742770"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/New%20to%20Lean%2C%20getting%20confusing%20error%20message/near/261742770" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/New.20to.20Lean.2C.20getting.20confusing.20error.20message.html#261742770">(Nov 17 2021 at 04:35)</a>:</h4>
<p><code>calc</code> doesn't exist in lean 4</p>



<a name="261742928"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/New%20to%20Lean%2C%20getting%20confusing%20error%20message/near/261742928" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/New.20to.20Lean.2C.20getting.20confusing.20error.20message.html#261742928">(Nov 17 2021 at 04:38)</a>:</h4>
<p>actually that's false. The analogous issue does not appear though, in a basic test:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">def</span> <span class="n">foo</span> <span class="o">(</span><span class="n">Eq</span> <span class="o">:</span> <span class="n">Nat</span><span class="o">)</span> <span class="o">:</span> <span class="mi">1</span> <span class="bp">=</span> <span class="mi">1</span> <span class="o">:=</span>
<span class="k">calc</span> <span class="mi">1</span> <span class="bp">=</span> <span class="mi">1</span> <span class="o">:=</span> <span class="n">rfl</span>
     <span class="n">_</span> <span class="bp">=</span> <span class="mi">1</span> <span class="o">:=</span> <span class="n">rfl</span>
</code></pre></div>



<a name="261742946"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/New%20to%20Lean%2C%20getting%20confusing%20error%20message/near/261742946" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/New.20to.20Lean.2C.20getting.20confusing.20error.20message.html#261742946">(Nov 17 2021 at 04:38)</a>:</h4>
<p>the bug is a rather specific sequence of things going wrong so I would expect any reimplementation not to have the same issue</p>



<a name="261743042"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/New%20to%20Lean%2C%20getting%20confusing%20error%20message/near/261743042" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/New.20to.20Lean.2C.20getting.20confusing.20error.20message.html#261743042">(Nov 17 2021 at 04:40)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112680">Johan Commelin</span> <a href="#narrow/stream/113489-new-members/topic/New.20to.20Lean.2C.20getting.20confusing.20error.20message/near/261742581">said</a>:</p>
<blockquote>
<p>Which makes it even more puzzling that the code worked in term mode but not in tactic mode.</p>
</blockquote>
<p>Note that <code>by refine calc</code> had the same issue as <code>by calc</code></p>



<a name="261753939"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/New%20to%20Lean%2C%20getting%20confusing%20error%20message/near/261753939" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/New.20to.20Lean.2C.20getting.20confusing.20error.20message.html#261753939">(Nov 17 2021 at 08:17)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110038">Kevin Buzzard</span> <a href="#narrow/stream/113489-new-members/topic/New.20to.20Lean.2C.20getting.20confusing.20error.20message/near/261725632">said</a>:</p>
<blockquote>
<p>2) Distinct types are disjoint. This is different from set theory where you can have rings <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi><mo>⊆</mo><mi>B</mi><mo>⊆</mo><mi>C</mi></mrow><annotation encoding="application/x-tex">A\subseteq B\subseteq C</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8193em;vertical-align:-0.136em;"></span><span class="mord mathnormal">A</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">⊆</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8193em;vertical-align:-0.136em;"></span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">⊆</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">C</span></span></span></span>; in type theory you have to decide how you want to handle this. </p>
</blockquote>
<p>I claim this is not a type theory vs set theory issue. Indeed in set theory "you <em>could</em> have rings <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi><mo>⊆</mo><mi>B</mi><mo>⊆</mo><mi>C</mi></mrow><annotation encoding="application/x-tex">A\subseteq B\subseteq C</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8193em;vertical-align:-0.136em;"></span><span class="mord mathnormal">A</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">⊆</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8193em;vertical-align:-0.136em;"></span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">⊆</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">C</span></span></span></span>", but this simply don't happen. It's simply not true that <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="double-struck">Z</mi><mo>⊂</mo><mi mathvariant="double-struck">Q</mi></mrow><annotation encoding="application/x-tex">\mathbb{Z} \subset \mathbb{Q}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.728em;vertical-align:-0.0391em;"></span><span class="mord mathbb">Z</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">⊂</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8556em;vertical-align:-0.1667em;"></span><span class="mord mathbb">Q</span></span></span></span> or <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi><mo>⊂</mo><mi>A</mi><mo stretchy="false">[</mo><mi>X</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">A \subset A[X]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7224em;vertical-align:-0.0391em;"></span><span class="mord mathnormal">A</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">⊂</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">A</span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="mclose">]</span></span></span></span> are set inclusions, at least not with any construction that I'm aware of. They are simply abuse of notation, using invisible symbols for some maps.</p>



<a name="261779593"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/New%20to%20Lean%2C%20getting%20confusing%20error%20message/near/261779593" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/New.20to.20Lean.2C.20getting.20confusing.20error.20message.html#261779593">(Nov 17 2021 at 12:52)</a>:</h4>
<p>The calc bug fix is <a href="#narrow/stream/116290-rss/topic/Recent.20Commits.20to.20lean.3Amaster/near/261767373">merged</a>.</p>



<a name="261781709"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/New%20to%20Lean%2C%20getting%20confusing%20error%20message/near/261781709" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/New.20to.20Lean.2C.20getting.20confusing.20error.20message.html#261781709">(Nov 17 2021 at 13:12)</a>:</h4>
<p>(but won't actually be available in mathlib for a while longer)</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>