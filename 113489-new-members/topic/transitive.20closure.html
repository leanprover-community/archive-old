---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/transitive.20closure.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/transitive.20closure.html">transitive closure</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="207261395"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/transitive%20closure/near/207261395" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/transitive.20closure.html#207261395">(Aug 18 2020 at 13:51)</a>:</h4>
<p>If I start with a relation on a type T, is there a way way to produce another relation that is the transitive closure of T?</p>



<a name="207261846"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/transitive%20closure/near/207261846" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/transitive.20closure.html#207261846">(Aug 18 2020 at 13:55)</a>:</h4>
<p><a href="https://leanprover-community.github.io/mathlib_docs/find/eqv_gen">docs#eqv_gen</a></p>



<a name="207262007"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/transitive%20closure/near/207262007" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/transitive.20closure.html#207262007">(Aug 18 2020 at 13:56)</a>:</h4>
<p>Thanks!  I will try to play with it, in order to understand how it works!</p>



<a name="207277560"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/transitive%20closure/near/207277560" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/transitive.20closure.html#207277560">(Aug 18 2020 at 15:55)</a>:</h4>
<p>Thanks a lot: this was exactly what I needed!  Now I have a follow up question: can I use this to prove inductively properties of the transitive closure?</p>



<a name="207279309"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/transitive%20closure/near/207279309" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/transitive.20closure.html#207279309">(Aug 18 2020 at 16:08)</a>:</h4>
<p>I'm sure the recursor will be there somewhere!</p>



<a name="207280462"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/transitive%20closure/near/207280462" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/transitive.20closure.html#207280462">(Aug 18 2020 at 16:16)</a>:</h4>
<p>you can use the builtin one too</p>



<a name="207280553"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/transitive%20closure/near/207280553" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/transitive.20closure.html#207280553">(Aug 18 2020 at 16:17)</a>:</h4>
<p><code>eqv_gen</code> is the reflexive symmetric transitive closure of a relation. You want <a href="https://leanprover-community.github.io/mathlib_docs/find/relation.trans_gen">docs#relation.trans_gen</a></p>



<a name="207281121"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/transitive%20closure/near/207281121" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/transitive.20closure.html#207281121">(Aug 18 2020 at 16:21)</a>:</h4>
<p>Oops yes, I applied the mathematician's filter again</p>



<a name="207282377"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/transitive%20closure/near/207282377" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/transitive.20closure.html#207282377">(Aug 18 2020 at 16:32)</a>:</h4>
<p>I had figured out the reflexive/symmetry/transitive issue!  I am still not able to find the induction command: should it be something like</p>
<p><code>induction something with something</code>?</p>



<a name="207282447"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/transitive%20closure/near/207282447" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/transitive.20closure.html#207282447">(Aug 18 2020 at 16:33)</a>:</h4>
<p><a href="https://leanprover-community.github.io/mathlib_docs/tactics.html#induction">tactic#induction</a></p>



<a name="207289923"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/transitive%20closure/near/207289923" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/transitive.20closure.html#207289923">(Aug 18 2020 at 17:33)</a>:</h4>
<p>Thank you for your help, but I am really struggling with this.  I have produced an easy example where I cannot use induction on the transitive closure to prove the goal.  What should I apply <code>induction</code> to?</p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="n">tactic</span>

<span class="kn">inductive</span> <span class="n">zo</span> <span class="o">:</span> <span class="kt">Type</span>
<span class="bp">|</span> <span class="n">z</span> <span class="o">:</span> <span class="n">zo</span>
<span class="bp">|</span> <span class="n">o</span> <span class="o">:</span> <span class="n">zo</span>

<span class="n">def</span> <span class="n">myzo</span> <span class="o">:</span> <span class="n">zo</span> <span class="bp">→</span> <span class="n">zo</span> <span class="bp">→</span> <span class="kt">Prop</span> <span class="o">:=</span>
<span class="k">begin</span>
    <span class="n">intros</span> <span class="n">w1</span> <span class="n">w2</span><span class="o">,</span>
        <span class="n">cases</span> <span class="n">w1</span><span class="o">,</span>
        <span class="n">cases</span> <span class="n">w2</span><span class="o">,</span>
            <span class="n">exact</span> <span class="n">false</span><span class="o">,</span>
            <span class="n">exact</span> <span class="n">true</span><span class="o">,</span>
        <span class="n">cases</span> <span class="n">w2</span><span class="o">,</span>
            <span class="n">exact</span> <span class="n">true</span><span class="o">,</span>
            <span class="n">exact</span> <span class="n">false</span><span class="o">,</span>
<span class="kn">end</span>

<span class="n">def</span> <span class="n">mytot</span> <span class="o">:=</span> <span class="n">relation</span><span class="bp">.</span><span class="n">trans_gen</span> <span class="n">myzo</span>

<span class="kn">lemma</span> <span class="n">isrefl</span> <span class="o">:</span> <span class="n">mytot</span> <span class="n">zo</span><span class="bp">.</span><span class="n">o</span> <span class="n">zo</span><span class="bp">.</span><span class="n">o</span> <span class="o">:=</span>
<span class="k">begin</span>
    <span class="n">fconstructor</span><span class="o">,</span>
    <span class="n">induction</span> <span class="o">(</span><span class="n">relation</span><span class="bp">.</span><span class="n">trans_gen</span> <span class="n">zo</span><span class="bp">.</span><span class="n">o</span><span class="o">),</span>
<span class="kn">end</span>
</code></pre></div>


<p>(I have produced a shorter example.)</p>



<a name="207290037"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/transitive%20closure/near/207290037" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/transitive.20closure.html#207290037">(Aug 18 2020 at 17:34)</a>:</h4>
<p>(Also, any suggestion on how to make the previous example less bulky would definitely by welcome!  I know this is a very bad example, but I have very little knowledge of how to use Lean correctly...)</p>



<a name="207291966"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/transitive%20closure/near/207291966" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/transitive.20closure.html#207291966">(Aug 18 2020 at 17:51)</a>:</h4>
<p>Definitions shouldn't be made using tactics, so you could do something like this:</p>
<div class="codehilite"><pre><span></span><code><span class="n">def</span> <span class="n">myzo</span> <span class="o">:</span> <span class="n">zo</span> <span class="bp">-&gt;</span> <span class="n">zo</span> <span class="bp">-&gt;</span> <span class="kt">Prop</span>
<span class="bp">|</span> <span class="n">z</span> <span class="n">o</span> <span class="o">:=</span> <span class="n">true</span>
<span class="bp">|</span> <span class="n">o</span> <span class="n">z</span> <span class="o">:=</span> <span class="n">true</span>
<span class="bp">|</span> <span class="bp">_</span> <span class="bp">_</span> <span class="o">:=</span> <span class="n">false</span>
</code></pre></div>



<a name="207292184"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/transitive%20closure/near/207292184" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/transitive.20closure.html#207292184">(Aug 18 2020 at 17:52)</a>:</h4>
<p>Ok, I did not know this.  I also did not know how you could write a function without using a tactic...</p>



<a name="207292222"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/transitive%20closure/near/207292222" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/transitive.20closure.html#207292222">(Aug 18 2020 at 17:53)</a>:</h4>
<p>(I assume that the underscores <code>_ _</code> mean that anything not already defines is <code>false</code>, right?)</p>



<a name="207292597"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/transitive%20closure/near/207292597" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/transitive.20closure.html#207292597">(Aug 18 2020 at 17:56)</a>:</h4>
<p>If I use your code, I get an error on the third colon:</p>
<p><code>| o z := true</code>.</p>
<p>Lean says</p>
<p><code>equation compiler error, equation #2 has not been used in the compilation (possible solution: delete equation)</code></p>



<a name="207292755"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/transitive%20closure/near/207292755" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/transitive.20closure.html#207292755">(Aug 18 2020 at 17:58)</a>:</h4>
<p>You might need a z _ := false prior to it</p>



<a name="207292810"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/transitive%20closure/near/207292810" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/transitive.20closure.html#207292810">(Aug 18 2020 at 17:58)</a>:</h4>
<p><span class="user-mention silent" data-user-id="321459">Damiano Testa</span> <a href="#narrow/stream/113489-new-members/topic/transitive.20closure/near/207292222">said</a>:</p>
<blockquote>
<p>(I assume that the underscores <code>_ _</code> mean that anything not already defines is <code>false</code>, right?)</p>
</blockquote>
<p>Yeah, for pattern matching, <code>_</code> means "match anything", and pattern expressions effectively are tried one at a time, so <code>| _ _ := ...</code> would be a catch-all at the end.  (The <code>_</code> for arguments to functions is sort of conceptually related in that you are giving a pattern for the Lean elaborator to fill in.)</p>



<a name="207292909"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/transitive%20closure/near/207292909" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/transitive.20closure.html#207292909">(Aug 18 2020 at 17:59)</a>:</h4>
<p>Ah, I see!  That explains why the <code>z _ := false</code> would fix it!  Thanks!!</p>



<a name="207293008"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/transitive%20closure/near/207293008" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/transitive.20closure.html#207293008">(Aug 18 2020 at 17:59)</a>:</h4>
<p>Hmm, I still get an error...</p>



<a name="207293203"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/transitive%20closure/near/207293203" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/transitive.20closure.html#207293203">(Aug 18 2020 at 18:01)</a>:</h4>
<p>You certainly don't need tactics to write everything. You can do entire proofs without them, and it is recommended to avoid tactics while writing definitions</p>



<a name="207293311"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/transitive%20closure/near/207293311" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/transitive.20closure.html#207293311">(Aug 18 2020 at 18:01)</a>:</h4>
<p>your z and o are variables because you're not in the namespace.</p>



<a name="207293408"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/transitive%20closure/near/207293408" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/transitive.20closure.html#207293408">(Aug 18 2020 at 18:02)</a>:</h4>
<p>You can use <code>open zo</code> to use <code>z</code> and <code>o</code>, or explicitly refer to <code>zo.z</code> and <code>zo.o</code>.</p>



<a name="207293416"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/transitive%20closure/near/207293416" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/transitive.20closure.html#207293416">(Aug 18 2020 at 18:02)</a>:</h4>
<p>the problem with Yakov's code is that you did not <code>open zo</code> first, so <code>z</code> and <code>o</code> are treated as variables in the first pattern, making the others redundant</p>



<a name="207293433"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/transitive%20closure/near/207293433" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/transitive.20closure.html#207293433">(Aug 18 2020 at 18:02)</a>:</h4>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="n">tactic</span>

<span class="kn">inductive</span> <span class="n">zo</span> <span class="o">:</span> <span class="kt">Type</span>
<span class="bp">|</span> <span class="n">z</span> <span class="o">:</span> <span class="n">zo</span>
<span class="bp">|</span> <span class="n">o</span> <span class="o">:</span> <span class="n">zo</span>

<span class="kn">namespace</span> <span class="n">zo</span>

<span class="n">def</span> <span class="n">myzo</span> <span class="o">:</span> <span class="n">zo</span> <span class="bp">-&gt;</span> <span class="n">zo</span> <span class="bp">-&gt;</span> <span class="kt">Prop</span>
<span class="bp">|</span> <span class="n">z</span> <span class="n">o</span> <span class="o">:=</span> <span class="n">true</span>
<span class="bp">|</span> <span class="n">o</span> <span class="n">z</span> <span class="o">:=</span> <span class="n">true</span>
<span class="bp">|</span> <span class="bp">_</span> <span class="bp">_</span> <span class="o">:=</span> <span class="n">false</span>


<span class="kn">example</span> <span class="o">:</span> <span class="n">myzo</span> <span class="n">z</span> <span class="n">o</span> <span class="bp">=</span> <span class="n">true</span> <span class="o">:=</span> <span class="n">rfl</span>
<span class="kn">example</span> <span class="o">:</span> <span class="n">myzo</span> <span class="n">o</span> <span class="n">z</span> <span class="bp">=</span> <span class="n">true</span> <span class="o">:=</span> <span class="n">rfl</span>
<span class="kn">example</span> <span class="o">:</span> <span class="n">myzo</span> <span class="n">z</span> <span class="n">z</span> <span class="bp">=</span> <span class="n">false</span> <span class="o">:=</span> <span class="n">rfl</span>
<span class="kn">example</span> <span class="o">:</span> <span class="n">myzo</span> <span class="n">o</span> <span class="n">o</span> <span class="bp">=</span> <span class="n">false</span> <span class="o">:=</span> <span class="n">rfl</span>

<span class="kn">end</span> <span class="n">zo</span>
</code></pre></div>



<a name="207293526"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/transitive%20closure/near/207293526" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/transitive.20closure.html#207293526">(Aug 18 2020 at 18:03)</a>:</h4>
<p>Great: this taught me something about definitions and the fact that you do not need tactics (although I do not know how to code without using tactics...)</p>



<a name="207293579"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/transitive%20closure/near/207293579" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/transitive.20closure.html#207293579">(Aug 18 2020 at 18:03)</a>:</h4>
<p>You write definitions in term mode and prove theorems in tactic mode.</p>



<a name="207293665"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/transitive%20closure/near/207293665" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/transitive.20closure.html#207293665">(Aug 18 2020 at 18:04)</a>:</h4>
<p>You can inspect the term-mode proofs that tactic mode generates by using the <code>#print</code> command</p>



<a name="207293667"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/transitive%20closure/near/207293667" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/transitive.20closure.html#207293667">(Aug 18 2020 at 18:04)</a>:</h4>
<p>However I think a better definition for this function is <code>def myzo (a b : zo) := a ≠ b</code></p>



<a name="207293694"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/transitive%20closure/near/207293694" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/transitive.20closure.html#207293694">(Aug 18 2020 at 18:04)</a>:</h4>
<p>Is there a way now to get Lean to realize that <code>mytot z z = true</code>, using induction and the fact that <code>mytot z o = true</code> and <code>mytot o z = true</code>?</p>



<a name="207293701"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/transitive%20closure/near/207293701" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/transitive.20closure.html#207293701">(Aug 18 2020 at 18:04)</a>:</h4>
<p><code>rfl</code></p>



<a name="207293719"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/transitive%20closure/near/207293719" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/transitive.20closure.html#207293719">(Aug 18 2020 at 18:05)</a>:</h4>
<p>Sorry for the incomplete suggestion, difficult to type out all the precise statements on a phone keyboard...</p>



<a name="207293731"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/transitive%20closure/near/207293731" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/transitive.20closure.html#207293731">(Aug 18 2020 at 18:05)</a>:</h4>
<p>oh wait, what you said is false</p>



<a name="207293775"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/transitive%20closure/near/207293775" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/transitive.20closure.html#207293775">(Aug 18 2020 at 18:05)</a>:</h4>
<p>oh wait, what I said is false</p>



<a name="207293805"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/transitive%20closure/near/207293805" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/transitive.20closure.html#207293805">(Aug 18 2020 at 18:05)</a>:</h4>
<p><span class="user-mention silent" data-user-id="308899">Yakov Pechersky</span> <a href="#narrow/stream/113489-new-members/topic/transitive.20closure/near/207293719">said</a>:</p>
<blockquote>
<p>Sorry for the incomplete suggestion, difficult to type out all the precise statements on a phone keyboard...</p>
</blockquote>
<p>No problem!  To be fair, I think that I learned more from understanding where the mistake was, than by directly seeing correct code!</p>



<a name="207293861"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/transitive%20closure/near/207293861" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/transitive.20closure.html#207293861">(Aug 18 2020 at 18:06)</a>:</h4>
<p>you can prove <code>mytot z z</code> by applying the constructor for <code>trans_gen</code></p>



<a name="207293904"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/transitive%20closure/near/207293904" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/transitive.20closure.html#207293904">(Aug 18 2020 at 18:06)</a>:</h4>
<p>I imagine that "applying the constructor" has a meaning, but it escapes me...</p>



<a name="207294077"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/transitive%20closure/near/207294077" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/transitive.20closure.html#207294077">(Aug 18 2020 at 18:08)</a>:</h4>
<p>(I am really sorry: I can see that the questions that I am asking are completely basic, but I am having a hard time getting my head around to how to tell Lean to do simple things...)</p>



<a name="207294187"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/transitive%20closure/near/207294187" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/transitive.20closure.html#207294187">(Aug 18 2020 at 18:09)</a>:</h4>
<p>For this definition,</p>
<div class="codehilite"><pre><span></span><code><span class="n">def</span> <span class="n">mytot</span> <span class="o">:=</span> <span class="n">relation</span><span class="bp">.</span><span class="n">trans_gen</span> <span class="n">myzo</span>
</code></pre></div>


<p>it turns out <code>relation.trans_gen</code> is an inductive type.  Try following it's definition into the <code>mathlib</code> source code.  You'll see it has two constructors.</p>



<a name="207294300"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/transitive%20closure/near/207294300" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/transitive.20closure.html#207294300">(Aug 18 2020 at 18:10)</a>:</h4>
<p>(I only know the emacs command to follow the definition, <code>M-.</code>)</p>



<a name="207294417"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/transitive%20closure/near/207294417" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/transitive.20closure.html#207294417">(Aug 18 2020 at 18:11)</a>:</h4>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="n">tactic</span>

<span class="kn">inductive</span> <span class="n">zo</span> <span class="o">:</span> <span class="kt">Type</span>
<span class="bp">|</span> <span class="n">z</span> <span class="o">:</span> <span class="n">zo</span>
<span class="bp">|</span> <span class="n">o</span> <span class="o">:</span> <span class="n">zo</span>
<span class="kn">open</span> <span class="n">zo</span>

<span class="n">def</span> <span class="n">myzo</span> <span class="o">:</span> <span class="n">zo</span> <span class="bp">-&gt;</span> <span class="n">zo</span> <span class="bp">-&gt;</span> <span class="kt">Prop</span>
<span class="bp">|</span> <span class="n">z</span> <span class="n">o</span> <span class="o">:=</span> <span class="n">true</span>
<span class="bp">|</span> <span class="n">o</span> <span class="n">z</span> <span class="o">:=</span> <span class="n">true</span>
<span class="bp">|</span> <span class="bp">_</span> <span class="bp">_</span> <span class="o">:=</span> <span class="n">false</span>

<span class="n">def</span> <span class="n">mytot</span> <span class="o">:=</span> <span class="n">relation</span><span class="bp">.</span><span class="n">trans_gen</span> <span class="n">myzo</span>

<span class="kn">lemma</span> <span class="n">isrefl</span> <span class="o">:</span> <span class="n">mytot</span> <span class="n">o</span> <span class="n">o</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="k">have</span> <span class="n">hzo</span> <span class="o">:</span> <span class="n">myzo</span> <span class="n">z</span> <span class="n">o</span> <span class="o">:=</span> <span class="n">trivial</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">hoz</span> <span class="o">:</span> <span class="n">myzo</span> <span class="n">o</span> <span class="n">z</span> <span class="o">:=</span> <span class="n">trivial</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">toz</span> <span class="o">:</span> <span class="n">mytot</span> <span class="n">o</span> <span class="n">z</span> <span class="o">:=</span> <span class="n">relation</span><span class="bp">.</span><span class="n">trans_gen</span><span class="bp">.</span><span class="n">single</span> <span class="n">hoz</span><span class="o">,</span>
  <span class="n">exact</span> <span class="n">relation</span><span class="bp">.</span><span class="n">trans_gen</span><span class="bp">.</span><span class="n">tail</span> <span class="n">toz</span> <span class="n">hzo</span><span class="o">,</span>
<span class="kn">end</span>
</code></pre></div>



<a name="207294651"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/transitive%20closure/near/207294651" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/transitive.20closure.html#207294651">(Aug 18 2020 at 18:13)</a>:</h4>
<div class="codehilite"><pre><span></span><code><span class="kn">lemma</span> <span class="n">isrefl</span> <span class="o">:</span> <span class="n">mytot</span> <span class="n">o</span> <span class="n">o</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">apply</span> <span class="n">relation</span><span class="bp">.</span><span class="n">trans_gen</span><span class="bp">.</span><span class="n">tail</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">apply</span> <span class="n">relation</span><span class="bp">.</span><span class="n">trans_gen</span><span class="bp">.</span><span class="n">single</span><span class="o">,</span>
    <span class="k">show</span> <span class="n">myzo</span> <span class="n">o</span> <span class="n">z</span><span class="o">,</span> <span class="n">trivial</span> <span class="o">},</span>
  <span class="o">{</span> <span class="k">show</span> <span class="n">myzo</span> <span class="n">z</span> <span class="n">o</span><span class="o">,</span> <span class="n">trivial</span> <span class="o">},</span>
<span class="kn">end</span>
</code></pre></div>



<a name="207294933"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/transitive%20closure/near/207294933" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/transitive.20closure.html#207294933">(Aug 18 2020 at 18:15)</a>:</h4>
<div class="codehilite"><pre><span></span><code><span class="bp">@</span><span class="o">[</span><span class="n">trans</span><span class="o">]</span> <span class="kn">theorem</span> <span class="n">mytot</span><span class="bp">.</span><span class="n">trans</span> <span class="o">{</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span><span class="o">}</span> <span class="o">:</span> <span class="n">mytot</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">mytot</span> <span class="n">b</span> <span class="n">c</span> <span class="bp">→</span> <span class="n">mytot</span> <span class="n">a</span> <span class="n">c</span> <span class="o">:=</span>
<span class="n">relation</span><span class="bp">.</span><span class="n">trans_gen</span><span class="bp">.</span><span class="n">trans</span>

<span class="kn">theorem</span> <span class="n">mytot</span><span class="bp">.</span><span class="n">single</span> <span class="o">{</span><span class="n">a</span> <span class="n">b</span><span class="o">}</span> <span class="o">:</span> <span class="n">myzo</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">mytot</span> <span class="n">a</span> <span class="n">b</span> <span class="o">:=</span>
<span class="n">relation</span><span class="bp">.</span><span class="n">trans_gen</span><span class="bp">.</span><span class="n">single</span>

<span class="kn">lemma</span> <span class="n">isrefl</span> <span class="o">:</span> <span class="n">mytot</span> <span class="n">o</span> <span class="n">o</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">transitivity</span> <span class="n">z</span><span class="o">,</span>
  <span class="n">exact</span> <span class="n">mytot</span><span class="bp">.</span><span class="n">single</span> <span class="n">trivial</span><span class="o">,</span>
  <span class="n">exact</span> <span class="n">mytot</span><span class="bp">.</span><span class="n">single</span> <span class="n">trivial</span><span class="o">,</span>
<span class="kn">end</span>
</code></pre></div>



<a name="207295005"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/transitive%20closure/near/207295005" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/transitive.20closure.html#207295005">(Aug 18 2020 at 18:16)</a>:</h4>
<div class="codehilite"><pre><span></span><code><span class="kn">lemma</span> <span class="n">isrefl</span> <span class="o">:</span> <span class="n">mytot</span> <span class="n">o</span> <span class="n">o</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">transitivity</span> <span class="n">z</span><span class="bp">;</span> <span class="n">exact</span> <span class="n">mytot</span><span class="bp">.</span><span class="n">single</span> <span class="n">trivial</span>
</code></pre></div>



<a name="207295242"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/transitive%20closure/near/207295242" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/transitive.20closure.html#207295242">(Aug 18 2020 at 18:18)</a>:</h4>
<div class="codehilite"><pre><span></span><code><span class="kn">lemma</span> <span class="n">isrefl</span> <span class="o">:</span> <span class="n">mytot</span> <span class="n">o</span> <span class="n">o</span> <span class="o">:=</span>
<span class="n">relation</span><span class="bp">.</span><span class="n">trans_gen</span><span class="bp">.</span><span class="n">tail</span> <span class="o">(</span><span class="n">relation</span><span class="bp">.</span><span class="n">trans_gen</span><span class="bp">.</span><span class="n">single</span> <span class="bp">⟨⟩</span> <span class="o">:</span> <span class="n">mytot</span> <span class="n">o</span> <span class="n">z</span><span class="o">)</span> <span class="bp">⟨⟩</span>
</code></pre></div>



<a name="207295261"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/transitive%20closure/near/207295261" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/transitive.20closure.html#207295261">(Aug 18 2020 at 18:18)</a>:</h4>
<p>there are lots of ways to write proofs in lean</p>



<a name="207295392"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/transitive%20closure/near/207295392" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/transitive.20closure.html#207295392">(Aug 18 2020 at 18:20)</a>:</h4>
<p>You should try <a href="https://leanprover.github.io/theorem_proving_in_lean/">#tpil</a> to get a feel for the basics of constructing proof terms, dealing with inductive types and other such foundational (not basic!) stuff</p>



<a name="207295624"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/transitive%20closure/near/207295624" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/transitive.20closure.html#207295624">(Aug 18 2020 at 18:21)</a>:</h4>
<p>Yet another variation:</p>
<div class="codehilite"><pre><span></span><code><span class="kn">lemma</span> <span class="n">isrefl</span> <span class="o">:</span> <span class="n">mytot</span> <span class="n">o</span> <span class="n">o</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">dunfold</span> <span class="n">mytot</span><span class="o">,</span>
  <span class="n">transitivity</span> <span class="n">z</span><span class="bp">;</span>
    <span class="n">exact</span> <span class="n">relation</span><span class="bp">.</span><span class="n">trans_gen</span><span class="bp">.</span><span class="n">single</span> <span class="n">trivial</span><span class="o">,</span>
<span class="kn">end</span>
</code></pre></div>


<p>(undeleted; actually is different from Mario's)</p>



<a name="207295947"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/transitive%20closure/near/207295947" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/transitive.20closure.html#207295947">(Aug 18 2020 at 18:24)</a>:</h4>
<p>actually yours used transitivity of <code>trans_gen</code> while mine defined a trans lemma for <code>mytot</code> specifically</p>



<a name="207298892"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/transitive%20closure/near/207298892" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/transitive.20closure.html#207298892">(Aug 18 2020 at 18:47)</a>:</h4>
<p>Dear All, thank you very much for your insights!  I will take a very close look at what you sent, process it and absorb it, and I will see if I have further questions!  I am really really grateful!</p>



<a name="207316346"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/transitive%20closure/near/207316346" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/transitive.20closure.html#207316346">(Aug 18 2020 at 21:05)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span>   your multiple proofs of transitivity are incredibly useful to me!  I only started looking seriously at Lean since less than two weeks and I have no programming experience.  Thus, I encounter lots of traps everywhere!</p>



<a name="207374046"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/transitive%20closure/near/207374046" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/transitive.20closure.html#207374046">(Aug 19 2020 at 06:24)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span>  Now that I had a chance to look at your proofs carefully, I have a follow up question.  What is the difference between a comma and a semicolon, for instance in</p>
<p><code>lemma isrefl : mytot o o := by transitivity z; exact mytot.single trivial</code>?</p>
<p>Moreover, why after <code>transitivity z</code> do you only need to prove <code>mytot o z</code> and not also <code>mytot z o</code>?</p>
<p>I am sorry if these are more silly questions!  Thank you very much for your time!</p>



<a name="207374100"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/transitive%20closure/near/207374100" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/transitive.20closure.html#207374100">(Aug 19 2020 at 06:24)</a>:</h4>
<p>Semicolon means that the following tactic applies to all the subgoals generated by the previous one.  The <code>transitivity</code> tactic generates two subgoals.</p>
<p>Try changing the <code>by</code> into a <code>begin ... end</code> block and replace the semicolon with a comma.</p>



<a name="207374128"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/transitive%20closure/near/207374128" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/transitive.20closure.html#207374128">(Aug 19 2020 at 06:25)</a>:</h4>
<p>Ah, is this the reason why Lean then only prints out one goal?  Because all goals should be solved by the same string of commands?</p>



<a name="207374187"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/transitive%20closure/near/207374187" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/transitive.20closure.html#207374187">(Aug 19 2020 at 06:26)</a>:</h4>
<p><span class="user-mention silent" data-user-id="306601">Kyle Miller</span> <a href="#narrow/stream/113489-new-members/topic/transitive.20closure/near/207374100">said</a>:</p>
<blockquote>
<p>Try changing the <code>by</code> into a <code>begin ... end</code> block and replace the semicolon with a comma.</p>
</blockquote>
<p>I am going to do that now!</p>



<a name="207374214"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/transitive%20closure/near/207374214" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/transitive.20closure.html#207374214">(Aug 19 2020 at 06:27)</a>:</h4>
<p>Great, I understand now!  Thanks a lot!</p>



<a name="207374276"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/transitive%20closure/near/207374276" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/transitive.20closure.html#207374276">(Aug 19 2020 at 06:28)</a>:</h4>
<p>This is also using a syntax trick: the <code>;</code> is an operator that composes tactics.  If it had been a comma, the tactics after <code>by</code> would need to be enclosed in curly braces since commas have many meanings in Lean.  You can enclose the tactic proof in (unnecessary) curly braces:</p>
<div class="codehilite"><pre><span></span><code><span class="kn">lemma</span> <span class="n">isrefl</span> <span class="o">:</span> <span class="n">mytot</span> <span class="n">o</span> <span class="n">o</span> <span class="o">:=</span> <span class="k">by</span> <span class="o">{</span> <span class="n">transitivity</span> <span class="n">z</span><span class="bp">;</span> <span class="n">exact</span> <span class="n">mytot</span><span class="bp">.</span><span class="n">single</span> <span class="n">trivial</span> <span class="o">}</span>
</code></pre></div>



<a name="207374418"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/transitive%20closure/near/207374418" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/transitive.20closure.html#207374418">(Aug 19 2020 at 06:31)</a>:</h4>
<p>Ok, it is still a bit hazy, but now it is starting to make more sense!  There is a lot of work that Lean does trying to figure out what it is that you are doing.  This is sometimes confusing to me, as I am never sure about what Lean is going to ask me to prove next.  But all these conversations are really really helping me!  Thank you so much!</p>



<a name="207375067"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/transitive%20closure/near/207375067" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/transitive.20closure.html#207375067">(Aug 19 2020 at 06:45)</a>:</h4>
<p><span class="user-mention" data-user-id="306601">@Kyle Miller</span>, the style guide in fact suggests not using <code>;</code> unless you are actually creating multiple goals. It can sometimes save some characters, but is also creates an extra hurdle to a human parsing your proof, who now has to work if there really are multiples goals or not.</p>



<a name="207375223"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/transitive%20closure/near/207375223" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/transitive.20closure.html#207375223">(Aug 19 2020 at 06:48)</a>:</h4>
<p>That's a good point, but that was just a counterfactual about syntax, since it might be unclear why the curly braces are omitted -- I prefer using curly braces regardless.  (The <code>;</code> is needed there.)</p>



<a name="207376080"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/transitive%20closure/near/207376080" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/transitive.20closure.html#207376080">(Aug 19 2020 at 07:00)</a>:</h4>
<p><span class="user-mention" data-user-id="321459">@Damiano Testa</span>  This is my basic understanding of tactics, in case it helps:</p>
<p>When you write a Lean expression, there are a few kinds of holes you can leave in your code to signal that Lean should, in some capacity, help fill in the details for you.  One example is a tactic expression, with the notation <code>begin tactics-separated-by-commas end</code> or <code>by single-tactic</code>.  Lean will defer dealing with these for as long as possible.  At some point, once it figures out the type that the tactic expression should have (for example, it might be inferred from the <code>lemma</code> statement), it enters tactic mode.  Tactic mode is a special imperative programming language for constructing proofs.  Each tactic in the tactic expression is executed sequentially, and the effect of each is to somehow modify the hypotheses and goals while, in the background, constructing the thing that should eventually replace the tactic expression itself.</p>
<p>It turns out tactics are themselves Lean objects (though in the <code>meta</code> level), and you can compose tactics in different ways to produce new tactics.  We've seen <code>;</code>, which takes two tactics and produces a tactic that runs the second tactic on each goal produced by the first.  There's also <code>{ tactic1, tactic2, ..., tacticn }</code> which evaluates tactics sequentially, failing when the first one fails. There's <code>try tactic</code> to attempt a tactic, but not itself fail if the tactic fails.  There's <code>tactic1 &lt;|&gt; tactic2</code> to try the first tactic, and if it fails continue with the second.  And so on.  (These can be helpful for writing short proofs that involve lots of case analysis.)</p>
<p>So, when you are using tactic mode to prove a lemma, you're writing a program that writes a program that represents a proof!</p>



<a name="207377023"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/transitive%20closure/near/207377023" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/transitive.20closure.html#207377023">(Aug 19 2020 at 07:16)</a>:</h4>
<p><span class="user-mention" data-user-id="306601">@Kyle Miller</span> Your description polishes up and clarifies lots of misty concepts that were floating around in my mind!  Also, I did not know that you could compose tactics with the syntaxes that you described!  Thanks a lot!</p>



<a name="207377119"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/transitive%20closure/near/207377119" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/transitive.20closure.html#207377119">(Aug 19 2020 at 07:18)</a>:</h4>
<p>If you want more details, watch the videos by Rob</p>



<a name="207377132"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/transitive%20closure/near/207377132" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/transitive.20closure.html#207377132">(Aug 19 2020 at 07:19)</a>:</h4>
<p><a href="https://www.youtube.com/watch?v=o6oUjcE6Nz4&amp;list=PLlF-CfQhukNnq2kDCw2P_vI5AfXN7egP2">https://www.youtube.com/watch?v=o6oUjcE6Nz4&amp;list=PLlF-CfQhukNnq2kDCw2P_vI5AfXN7egP2</a></p>
<div class="youtube-video message_inline_image"><a data-id="o6oUjcE6Nz4" href="https://www.youtube.com/watch?v=o6oUjcE6Nz4&amp;list=PLlF-CfQhukNnq2kDCw2P_vI5AfXN7egP2"><img src="https://i.ytimg.com/vi/o6oUjcE6Nz4/default.jpg"></a></div>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>