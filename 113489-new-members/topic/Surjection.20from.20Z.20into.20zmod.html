---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/Surjection.20from.20Z.20into.20zmod.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Surjection.20from.20Z.20into.20zmod.html">Surjection from Z into zmod</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="221430484"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Surjection%20from%20Z%20into%20zmod/near/221430484" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Hanting Zhang <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Surjection.20from.20Z.20into.20zmod.html#221430484">(Jan 03 2021 at 03:07)</a>:</h4>
<p>Try as I might, I cannot complete this proof.</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">data.zmod.basic</span>

<span class="kn">open</span> <span class="n">function</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="n">surjective</span> <span class="o">(</span><span class="n">algebra_map</span> <span class="n">ℤ</span> <span class="o">(</span><span class="n">zmod</span> <span class="n">n</span><span class="o">))</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">unfold</span> <span class="n">surjective</span><span class="o">,</span>
  <span class="n">intro</span><span class="o">,</span>
  <span class="n">use</span> <span class="n">b.val</span><span class="o">,</span>
  <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">int.cast_coe_nat</span><span class="o">,</span> <span class="n">ring_hom.eq_int_cast</span><span class="o">],</span>
<span class="c1">-- n: ℕ</span>
<span class="c1">-- b: zmod n</span>
<span class="c1">-- ⊢ ↑(b.val) = b</span>
  <span class="gr">sorry</span>
<span class="kd">end</span>
</code></pre></div>
<p>How should I proceed?</p>



<a name="221430633"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Surjection%20from%20Z%20into%20zmod/near/221430633" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Surjection.20from.20Z.20into.20zmod.html#221430633">(Jan 03 2021 at 03:12)</a>:</h4>
<p>Does <code>ext</code> help?</p>



<a name="221430638"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Surjection%20from%20Z%20into%20zmod/near/221430638" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Surjection.20from.20Z.20into.20zmod.html#221430638">(Jan 03 2021 at 03:12)</a>:</h4>
<p>(deleted)</p>



<a name="221430837"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Surjection%20from%20Z%20into%20zmod/near/221430837" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Hanting Zhang <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Surjection.20from.20Z.20into.20zmod.html#221430837">(Jan 03 2021 at 03:19)</a>:</h4>
<p>No, zmod doesn't have <code>ext</code>. I guess what I'm really trying to do is identify <code>zmod n</code> with quotients of <code>ℤ</code>, but there seems to be no API for this.</p>



<a name="221430908"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Surjection%20from%20Z%20into%20zmod/near/221430908" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Hanting Zhang <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Surjection.20from.20Z.20into.20zmod.html#221430908">(Jan 03 2021 at 03:20)</a>:</h4>
<p>Maybe there is some sledgehammer to do this that I haven't found yet?</p>



<a name="221431077"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Surjection%20from%20Z%20into%20zmod/near/221431077" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Surjection.20from.20Z.20into.20zmod.html#221431077">(Jan 03 2021 at 03:26)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">example</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="n">surjective</span> <span class="o">(</span><span class="n">algebra_map</span> <span class="n">ℤ</span> <span class="o">(</span><span class="n">zmod</span> <span class="n">n</span><span class="o">))</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">intro</span> <span class="n">x</span><span class="o">,</span>
  <span class="n">use</span> <span class="n">x</span><span class="o">,</span>
  <span class="n">cases</span> <span class="n">n</span><span class="bp">;</span>
  <span class="n">simp</span><span class="o">,</span>
<span class="kd">end</span>
</code></pre></div>



<a name="221431092"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Surjection%20from%20Z%20into%20zmod/near/221431092" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Surjection.20from.20Z.20into.20zmod.html#221431092">(Jan 03 2021 at 03:27)</a>:</h4>
<p>Its a bit weird because <code>zmod n</code> is defined quite differently for <code>n=0</code> and <code>n &gt; 0</code>, for <code>n = 0</code> zmod n is just Z and for n positive it is <code>fin n</code> so sometimes you need to do cases on <code>n</code> for the proof to work.</p>



<a name="221431150"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Surjection%20from%20Z%20into%20zmod/near/221431150" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Surjection.20from.20Z.20into.20zmod.html#221431150">(Jan 03 2021 at 03:29)</a>:</h4>
<p>I'd say the lemma</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">@[simp]</span> <span class="kd">lemma</span> <span class="n">zmod.coe_coe_eq_self</span> <span class="o">{</span><span class="n">n</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">}</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">zmod</span> <span class="n">n</span><span class="o">)</span> <span class="o">:</span> <span class="o">((</span><span class="n">a</span> <span class="o">:</span> <span class="n">ℤ</span><span class="o">)</span> <span class="o">:</span> <span class="n">zmod</span> <span class="n">n</span><span class="o">)</span> <span class="bp">=</span> <span class="n">a</span> <span class="o">:=</span>
<span class="kd">by</span> <span class="o">{</span><span class="n">cases</span> <span class="n">n</span><span class="bp">;</span> <span class="n">simp</span><span class="o">}</span>
</code></pre></div>
<p>should be added to mathlib</p>



<a name="221431427"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Surjection%20from%20Z%20into%20zmod/near/221431427" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Surjection.20from.20Z.20into.20zmod.html#221431427">(Jan 03 2021 at 03:37)</a>:</h4>
<p>Maybe more useful is for me to describe my process for finding the proof:<br>
First I had, <code>intro x</code> and then <code>use x.val</code> like you did. Then I tried <code>simp</code> and the goal was <code>↑(x.val) = x</code> so I tried the tactic <code>norm_cast</code> as there were up arrows in the goal, but it didn't help, so I thought maybe using <code>val</code> was not the right format for cast to work, so switched it to <code>use x</code> so that lean would insert a cast itself, so the goal after simp was then, <code>↑↑x = x</code> so I tried library search, nothing happened so I searched mathlib for the string <code>coe_coe</code> and found a bunch of things including <a href="https://leanprover-community.github.io/mathlib_docs/find/fin.coe_coe_eq_self">docs#fin.coe_coe_eq_self</a> which seemed very useful. And so I thought that this lemma would work, as <code>zmod</code> is basically the same as <code>fin</code>, so I looked up the definition of <code>zmod</code> in mathlib  and saw it split into two cases, so at that point I knew if I did cases on <code>n</code> then <a href="https://leanprover-community.github.io/mathlib_docs/find/fin.coe_coe_eq_self">docs#fin.coe_coe_eq_self</a>  should apply to one case, and the other case might also be doable with simp.</p>



<a name="221431551"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Surjection%20from%20Z%20into%20zmod/near/221431551" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Hanting Zhang <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Surjection.20from.20Z.20into.20zmod.html#221431551">(Jan 03 2021 at 03:41)</a>:</h4>
<p>I see. Thanks for the explanation.</p>



<a name="221431609"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Surjection%20from%20Z%20into%20zmod/near/221431609" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Hanting Zhang <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Surjection.20from.20Z.20into.20zmod.html#221431609">(Jan 03 2021 at 03:42)</a>:</h4>
<p>Seeing your lemma, I tried to also do <code>lemma zmod.coe_nat_coe_eq_self {n : ℕ} (a : zmod n) : ((a.val : ℕ) : zmod n) = a := by sorry</code>, but this somehow does work?</p>



<a name="221431796"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Surjection%20from%20Z%20into%20zmod/near/221431796" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Hanting Zhang <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Surjection.20from.20Z.20into.20zmod.html#221431796">(Jan 03 2021 at 03:48)</a>:</h4>
<p>I think it's because <code>Z</code> is a ring, which might play better with <code>zmod</code>. This lemma doesn't really matter... but it would be nice to try to understand what's happening here.</p>



<a name="221431870"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Surjection%20from%20Z%20into%20zmod/near/221431870" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Surjection.20from.20Z.20into.20zmod.html#221431870">(Jan 03 2021 at 03:52)</a>:</h4>
<p>This is a good exercise! But if you want to use it for something else, I suggest simply using <a href="https://leanprover-community.github.io/mathlib_docs/find/zmod.int_cast_surjective">docs#zmod.int_cast_surjective</a></p>



<a name="221431968"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Surjection%20from%20Z%20into%20zmod/near/221431968" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Surjection.20from.20Z.20into.20zmod.html#221431968">(Jan 03 2021 at 03:54)</a>:</h4>
<p>The API for this stuff is somewhat extensive. You can find it in <code>data.zmod.basic</code></p>



<a name="221431969"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Surjection%20from%20Z%20into%20zmod/near/221431969" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Surjection.20from.20Z.20into.20zmod.html#221431969">(Jan 03 2021 at 03:54)</a>:</h4>
<p>I think the documentation of <a href="https://leanprover-community.github.io/mathlib_docs/find/zmod.cast">docs#zmod.cast</a> is wrong in that it says you can cast to a semiring, but actually you need somewhere for <code>-1</code> in <code>zmod 0</code> to go with the current definition.</p>



<a name="221432029"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Surjection%20from%20Z%20into%20zmod/near/221432029" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Surjection.20from.20Z.20into.20zmod.html#221432029">(Jan 03 2021 at 03:56)</a>:</h4>
<p>Should we make a <code>natmod n</code> :)</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>