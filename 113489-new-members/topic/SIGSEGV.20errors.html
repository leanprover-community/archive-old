---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/SIGSEGV.20errors.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/SIGSEGV.20errors.html">SIGSEGV errors</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="202672058"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/SIGSEGV%20errors/near/202672058" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Danila Kurganov <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/SIGSEGV.20errors.html#202672058">(Jul 02 2020 at 10:38)</a>:</h4>
<p>Hi. My Lean keeps giving me a SIGSEGV error every 5 minutes or so while I'm working on it, are there any general fixes for this?</p>



<a name="202672080"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/SIGSEGV%20errors/near/202672080" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/SIGSEGV.20errors.html#202672080">(Jul 02 2020 at 10:39)</a>:</h4>
<p>Are you putting .s at the end of your file? That can cause this</p>



<a name="202672093"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/SIGSEGV%20errors/near/202672093" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/SIGSEGV.20errors.html#202672093">(Jul 02 2020 at 10:39)</a>:</h4>
<p>?</p>



<a name="202672185"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/SIGSEGV%20errors/near/202672185" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Danila Kurganov <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/SIGSEGV.20errors.html#202672185">(Jul 02 2020 at 10:40)</a>:</h4>
<p>.s? I have no .s's anywhere from what I can tell</p>



<a name="202672206"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/SIGSEGV%20errors/near/202672206" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/SIGSEGV.20errors.html#202672206">(Jul 02 2020 at 10:40)</a>:</h4>
<p>The thing you were last typing is often important to debugging this kind of thing</p>



<a name="202672213"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/SIGSEGV%20errors/near/202672213" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/SIGSEGV.20errors.html#202672213">(Jul 02 2020 at 10:40)</a>:</h4>
<p>I meant <code>.</code>, but there was a new segfault introduced recently and possibly also removed recently</p>



<a name="202672228"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/SIGSEGV%20errors/near/202672228" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/SIGSEGV.20errors.html#202672228">(Jul 02 2020 at 10:41)</a>:</h4>
<p>Does it trigger again immediately on restart?</p>



<a name="202672236"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/SIGSEGV%20errors/near/202672236" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/SIGSEGV.20errors.html#202672236">(Jul 02 2020 at 10:41)</a>:</h4>
<p>If you can reliably reproduce the segfault we'd be interested to see it</p>



<a name="202672249"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/SIGSEGV%20errors/near/202672249" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Danila Kurganov <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/SIGSEGV.20errors.html#202672249">(Jul 02 2020 at 10:41)</a>:</h4>
<p>ok, here's what I've been typing: </p>
<div class="codehilite"><pre><span></span><code><span class="kn">lemma</span> <span class="n">G1mul_left_inv</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">G1</span><span class="o">)</span> <span class="o">:</span> <span class="n">a</span><span class="bp">⁻¹</span> <span class="bp">*</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">G1one</span> <span class="o">:=</span>
<span class="k">begin</span>
    <span class="n">ext</span><span class="o">,</span> <span class="n">simp</span><span class="o">,</span> <span class="c1">-- ring,</span>
    <span class="c1">-- rw mul_assoc,</span>
    <span class="c1">-- it seems like doing norm_num does some infinite loop!</span>
    <span class="n">refine</span> <span class="o">(</span><span class="n">mul_left_inj&#39;</span> <span class="bp">_</span><span class="o">)</span><span class="bp">.</span><span class="n">mp</span> <span class="bp">_</span><span class="o">,</span>
    <span class="n">exact</span> <span class="mi">2</span><span class="o">,</span>
    <span class="n">exact</span> <span class="n">two_ne_zero</span><span class="o">,</span>
    <span class="n">rw</span> <span class="o">[</span><span class="n">mul_assoc</span><span class="o">,</span> <span class="n">div_mul_cancel</span><span class="o">],</span>

    <span class="n">sorry</span>
    <span class="c1">--unfold has_inv.inv,</span>
    <span class="c1">--simp,</span>
<span class="kn">end</span>
</code></pre></div>



<a name="202672277"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/SIGSEGV%20errors/near/202672277" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/SIGSEGV.20errors.html#202672277">(Jul 02 2020 at 10:41)</a>:</h4>
<p><a href="https://leanprover-community.github.io/mwe.html">#mwe</a> please</p>



<a name="202672328"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/SIGSEGV%20errors/near/202672328" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Danila Kurganov <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/SIGSEGV.20errors.html#202672328">(Jul 02 2020 at 10:42)</a>:</h4>
<p>ok, one sec I'll try to reproduce the segfault, and fix my code block</p>



<a name="202672329"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/SIGSEGV%20errors/near/202672329" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/SIGSEGV.20errors.html#202672329">(Jul 02 2020 at 10:42)</a>:</h4>
<p>in particular we need all the imports and opens</p>



<a name="202672335"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/SIGSEGV%20errors/near/202672335" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/SIGSEGV.20errors.html#202672335">(Jul 02 2020 at 10:42)</a>:</h4>
<p>use triple backtick</p>



<a name="202672340"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/SIGSEGV%20errors/near/202672340" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/SIGSEGV.20errors.html#202672340">(Jul 02 2020 at 10:42)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib/wiki/Code-in-backticks">#backticks</a></p>



<a name="202672397"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/SIGSEGV%20errors/near/202672397" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Danila Kurganov <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/SIGSEGV.20errors.html#202672397">(Jul 02 2020 at 10:43)</a>:</h4>
<p>sweet <a href="https://github.com/leanprover-community/mathlib/wiki/Code-in-backticks">#backticks</a><br>
the whole file? <br>
my imports are:</p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="n">data</span><span class="bp">.</span><span class="n">real</span><span class="bp">.</span><span class="n">basic</span>
<span class="kn">import</span> <span class="n">tactic</span><span class="bp">.</span><span class="n">interactive</span>
<span class="kn">open</span> <span class="n">nat</span>
</code></pre></div>



<a name="202672427"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/SIGSEGV%20errors/near/202672427" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/SIGSEGV.20errors.html#202672427">(Jul 02 2020 at 10:43)</a>:</h4>
<p>enough to make the lemma in question have the errors you expect</p>



<a name="202672515"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/SIGSEGV%20errors/near/202672515" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/SIGSEGV.20errors.html#202672515">(Jul 02 2020 at 10:44)</a>:</h4>
<p>what you gave isn't enough because I don't know what <code>G1</code> and <code>G1one</code> are</p>



<a name="202672558"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/SIGSEGV%20errors/near/202672558" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Danila Kurganov <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/SIGSEGV.20errors.html#202672558">(Jul 02 2020 at 10:45)</a>:</h4>
<p>oh that's the whole file since I told simp many things, I'll just upload the whole .lean</p>



<a name="202672608"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/SIGSEGV%20errors/near/202672608" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/SIGSEGV.20errors.html#202672608">(Jul 02 2020 at 10:45)</a>:</h4>
<p>feel free to paste the entire code block here, zulip will hide it appropriately</p>



<a name="202672672"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/SIGSEGV%20errors/near/202672672" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Danila Kurganov <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/SIGSEGV.20errors.html#202672672">(Jul 02 2020 at 10:46)</a>:</h4>
<p>oh nice, that's better </p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="n">data</span><span class="bp">.</span><span class="n">real</span><span class="bp">.</span><span class="n">basic</span>

<span class="kn">import</span> <span class="n">tactic</span><span class="bp">.</span><span class="n">interactive</span>

<span class="kn">open</span> <span class="n">nat</span>


<span class="n">def</span> <span class="n">G1</span> <span class="o">:=</span> <span class="o">{</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℚ</span> <span class="bp">//</span> <span class="mi">0</span> <span class="bp">&lt;</span> <span class="n">x</span><span class="o">}</span>

<span class="n">def</span> <span class="n">G2</span> <span class="o">:=</span> <span class="o">{</span> <span class="n">x</span> <span class="o">:</span> <span class="n">ℚ</span> <span class="bp">|</span> <span class="mi">0</span> <span class="bp">&lt;</span> <span class="n">x</span><span class="o">}</span>

<span class="bp">#</span><span class="kn">check</span> <span class="n">G1</span>
<span class="bp">#</span><span class="kn">check</span> <span class="n">ℚ</span>
<span class="bp">#</span><span class="kn">check</span> <span class="n">G2</span>

<span class="kn">variable</span> <span class="n">a</span> <span class="o">:</span> <span class="n">G1</span>
<span class="bp">#</span><span class="kn">check</span> <span class="n">a</span><span class="bp">.</span><span class="n">val</span>
<span class="bp">#</span><span class="kn">check</span> <span class="n">a</span><span class="bp">.</span><span class="n">property</span>


<span class="bp">#</span><span class="kn">check</span> <span class="n">pos_of_one_div_pos</span>
<span class="bp">#</span><span class="kn">check</span> <span class="n">mul_pos</span>

<span class="kn">example</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">&lt;</span> <span class="mi">4</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">exact</span> <span class="n">four_pos</span>
<span class="kn">example</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span><span class="o">:</span> <span class="n">ℚ</span> <span class="o">)</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">b</span><span class="bp">/</span><span class="n">c</span> <span class="bp">=</span> <span class="n">a</span><span class="bp">/</span><span class="n">c</span> <span class="bp">*</span> <span class="n">b</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">library_search</span>



<span class="c1">-- so we want G1 -- a type -- to make a group</span>
<span class="kn">example</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">G1</span><span class="o">)</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">&lt;</span> <span class="n">a</span><span class="bp">.</span><span class="n">val</span> <span class="o">:=</span> <span class="n">a</span><span class="bp">.</span><span class="n">property</span> <span class="c1">--&gt; a.property stores 0 &lt; a.val</span>



<span class="c">/-</span><span class="cm">- ##Def of mul --/</span>

<span class="bp">@</span><span class="o">[</span><span class="n">simp</span><span class="o">]</span> <span class="n">def</span> <span class="n">G1mul</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">G1</span><span class="o">)</span> <span class="o">:</span> <span class="n">G1</span> <span class="o">:=</span> <span class="bp">⟨</span> <span class="o">(</span><span class="n">a</span><span class="bp">.</span><span class="n">val</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">b</span><span class="bp">.</span><span class="n">val</span> <span class="bp">/</span> <span class="mi">2</span><span class="o">),</span> <span class="n">mul_pos</span> <span class="n">a</span><span class="bp">.</span><span class="n">property</span> <span class="o">(</span><span class="n">half_pos</span> <span class="n">b</span><span class="bp">.</span><span class="n">property</span><span class="o">)</span> <span class="bp">⟩</span>
<span class="kn">instance</span> <span class="o">:</span> <span class="n">has_mul</span> <span class="n">G1</span> <span class="o">:=</span> <span class="bp">⟨</span> <span class="n">G1mul</span> <span class="bp">⟩</span> <span class="c1">-- now we have *</span>

<span class="c">/-</span><span class="cm">- ##Def of One --/</span>

<span class="bp">@</span><span class="o">[</span><span class="n">simp</span><span class="o">]</span> <span class="n">def</span> <span class="n">G1one</span>  <span class="o">:</span> <span class="n">G1</span> <span class="o">:=</span> <span class="bp">⟨</span> <span class="mi">2</span><span class="o">,</span> <span class="n">two_pos</span><span class="bp">⟩</span>
<span class="kn">instance</span> <span class="o">:</span> <span class="n">has_one</span> <span class="n">G1</span> <span class="o">:=</span> <span class="bp">⟨</span> <span class="n">G1one</span> <span class="bp">⟩</span>

<span class="c1">-- clearly follow other axioms since from field</span>

<span class="c">/-</span><span class="cm">- ##Def and Lemmas for Inverse --/</span>

<span class="kn">lemma</span> <span class="n">G1_val_pos</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">G1</span><span class="o">)</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">&lt;</span> <span class="n">a</span><span class="bp">.</span><span class="n">val</span><span class="bp">⁻¹</span>  <span class="o">:=</span>
<span class="k">begin</span>
    <span class="n">cases</span> <span class="n">a</span> <span class="k">with</span> <span class="n">x</span> <span class="n">y</span><span class="o">,</span>
    <span class="n">simp</span><span class="o">,</span> <span class="n">exact</span> <span class="n">y</span><span class="o">,</span>
<span class="kn">end</span>


<span class="n">def</span> <span class="n">G1_inv</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">G1</span><span class="o">)</span> <span class="o">:</span> <span class="n">G1</span> <span class="o">:=</span> <span class="bp">⟨</span> <span class="mi">4</span><span class="bp">/</span><span class="o">(</span><span class="n">a</span><span class="bp">.</span><span class="n">val</span><span class="o">),</span> <span class="n">mul_pos</span> <span class="n">four_pos</span> <span class="o">(</span><span class="n">G1_val_pos</span> <span class="n">a</span><span class="o">)</span><span class="bp">⟩</span>
<span class="kn">instance</span> <span class="o">:</span> <span class="n">has_inv</span> <span class="n">G1</span> <span class="o">:=</span> <span class="bp">⟨</span> <span class="n">G1_inv</span> <span class="bp">⟩</span>







<span class="c1">-- what does extensionality mean in this context?</span>
<span class="c">/-</span><span class="cm">- ##Extensionality and Simplification Lemmas  --/</span>
<span class="bp">@</span><span class="o">[</span><span class="n">ext</span><span class="o">]</span> <span class="kn">lemma</span> <span class="n">ext</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">G1</span><span class="o">)</span> <span class="o">(</span><span class="n">hVal</span> <span class="o">:</span> <span class="n">a</span><span class="bp">.</span><span class="n">val</span> <span class="bp">=</span> <span class="n">b</span><span class="bp">.</span><span class="n">val</span><span class="o">):</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">b</span> <span class="o">:=</span>
<span class="k">begin</span>
    <span class="n">cases</span> <span class="n">a</span> <span class="k">with</span> <span class="n">x</span> <span class="n">y</span><span class="o">,</span>
    <span class="n">cases</span> <span class="n">b</span> <span class="k">with</span> <span class="n">w</span> <span class="n">z</span><span class="o">,</span>
    <span class="n">simp</span> <span class="bp">*</span> <span class="n">at</span> <span class="bp">*</span><span class="o">,</span>
    <span class="c1">-- I see that simp is doing something, but what exactly is it doing?</span>
<span class="kn">end</span>

<span class="bp">@</span><span class="o">[</span><span class="n">simp</span><span class="o">]</span> <span class="kn">lemma</span> <span class="n">mul_val</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span><span class="n">G1</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">a</span> <span class="bp">*</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">val</span> <span class="bp">=</span> <span class="n">a</span><span class="bp">.</span><span class="n">val</span><span class="bp">*</span><span class="o">(</span><span class="n">b</span><span class="bp">.</span><span class="n">val</span><span class="bp">/</span><span class="mi">2</span><span class="o">)</span> <span class="o">:=</span>
<span class="k">begin</span>
    <span class="n">refl</span><span class="o">,</span>
<span class="kn">end</span>

<span class="bp">@</span><span class="o">[</span><span class="n">simp</span><span class="o">]</span> <span class="kn">lemma</span> <span class="n">G1one_div_two</span> <span class="o">:</span> <span class="n">G1one</span><span class="bp">.</span><span class="n">val</span><span class="bp">/</span><span class="mi">2</span> <span class="bp">=</span> <span class="o">(</span><span class="mi">1</span> <span class="o">:</span> <span class="n">ℚ</span><span class="o">)</span> <span class="o">:=</span>
<span class="k">begin</span>
    <span class="n">refl</span><span class="o">,</span>
<span class="kn">end</span>

<span class="bp">@</span><span class="o">[</span><span class="n">simp</span><span class="o">]</span> <span class="kn">lemma</span> <span class="n">G1one_mul_half</span> <span class="o">:</span> <span class="n">G1one</span><span class="bp">.</span><span class="n">val</span> <span class="bp">*</span> <span class="o">(</span><span class="mi">1</span><span class="bp">/</span><span class="mi">2</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="mi">1</span> <span class="o">:</span> <span class="n">ℚ</span><span class="o">)</span> <span class="o">:=</span>
<span class="k">begin</span>
    <span class="n">refl</span><span class="o">,</span>
<span class="kn">end</span>

<span class="bp">@</span><span class="o">[</span><span class="n">simp</span><span class="o">]</span> <span class="kn">lemma</span> <span class="n">G1one_mul_two_inv</span> <span class="o">:</span> <span class="n">G1one</span><span class="bp">.</span><span class="n">val</span> <span class="bp">*</span> <span class="mi">2</span><span class="bp">⁻¹</span> <span class="bp">=</span> <span class="o">(</span><span class="mi">1</span> <span class="o">:</span> <span class="n">ℚ</span> <span class="o">)</span> <span class="o">:=</span>
<span class="k">begin</span>
    <span class="n">refl</span><span class="o">,</span>
<span class="kn">end</span>


<span class="bp">@</span><span class="o">[</span><span class="n">simp</span><span class="o">]</span> <span class="kn">lemma</span> <span class="n">G1_val_mul_inv</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">G1</span><span class="o">)</span> <span class="o">:</span> <span class="n">a</span><span class="bp">.</span><span class="n">val</span> <span class="bp">*</span> <span class="n">a</span><span class="bp">⁻¹.</span><span class="n">val</span> <span class="bp">=</span> <span class="mi">4</span> <span class="o">:=</span>
<span class="k">begin</span>
    <span class="n">refine</span> <span class="o">(</span><span class="n">div_left_inj&#39;</span> <span class="bp">_</span><span class="o">)</span><span class="bp">.</span><span class="n">mp</span> <span class="bp">_</span><span class="o">,</span>
    <span class="n">exact</span> <span class="n">a</span><span class="bp">.</span><span class="n">val</span><span class="o">,</span> <span class="c1">-- DK : I don&#39;t know how it magically changed everything to a.val but I&#39;m not complaining</span>
    <span class="n">intro</span> <span class="n">h1</span><span class="o">,</span>
    <span class="k">have</span> <span class="n">h2</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">&lt;</span> <span class="n">a</span><span class="bp">.</span><span class="n">val</span> <span class="o">:=</span> <span class="n">a</span><span class="bp">.</span><span class="n">property</span><span class="o">,</span>
    <span class="n">rw</span> <span class="n">h1</span> <span class="n">at</span> <span class="n">h2</span><span class="o">,</span>
    <span class="k">by</span> <span class="n">exact</span> <span class="o">(</span><span class="n">and_not_self</span> <span class="o">(</span><span class="mi">0</span> <span class="bp">≤</span> <span class="mi">0</span><span class="o">))</span><span class="bp">.</span><span class="n">mp</span> <span class="n">h2</span><span class="o">,</span> <span class="c1">-- DK : Is there an easier way to use h2?</span>
    <span class="n">rw</span> <span class="o">[</span><span class="n">mul_comm</span><span class="o">,</span> <span class="n">mul_div_assoc</span><span class="o">,</span> <span class="n">div_self</span><span class="o">,</span> <span class="n">mul_one</span><span class="o">],</span>
    <span class="n">ring</span><span class="o">,</span>
    <span class="n">intro</span> <span class="n">h</span><span class="o">,</span>
    <span class="k">have</span> <span class="n">h2</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">&lt;</span> <span class="n">a</span><span class="bp">.</span><span class="n">val</span> <span class="o">:=</span> <span class="n">a</span><span class="bp">.</span><span class="n">property</span><span class="o">,</span> <span class="c1">-- DK : I&#39;m repeating things from before, is this good practice?</span>
    <span class="n">rw</span> <span class="n">h</span> <span class="n">at</span> <span class="n">h2</span><span class="o">,</span>
    <span class="k">by</span> <span class="n">exact</span> <span class="o">(</span><span class="n">and_not_self</span> <span class="o">(</span><span class="mi">0</span> <span class="bp">≤</span> <span class="mi">0</span><span class="o">))</span><span class="bp">.</span><span class="n">mp</span> <span class="n">h2</span><span class="o">,</span> <span class="c1">-- DK : I did it!!</span>
<span class="kn">end</span>



<span class="c">/-</span><span class="cm">- ##Group Axioms --/</span>
<span class="kn">lemma</span> <span class="n">G1mul_assoc</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">G1</span><span class="o">)</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">b</span> <span class="bp">*</span> <span class="n">c</span> <span class="bp">=</span> <span class="n">a</span> <span class="bp">*</span> <span class="o">(</span><span class="n">b</span> <span class="bp">*</span> <span class="n">c</span><span class="o">)</span> <span class="o">:=</span>
<span class="k">begin</span>
    <span class="n">ext</span><span class="o">,</span> <span class="n">simp</span><span class="o">,</span> <span class="n">ring</span><span class="o">,</span>
<span class="kn">end</span>

<span class="kn">lemma</span> <span class="n">G1one_mul</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">G1</span><span class="o">)</span> <span class="o">:</span> <span class="n">G1one</span> <span class="bp">*</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">a</span> <span class="o">:=</span>
<span class="k">begin</span>
    <span class="n">ext</span><span class="o">,</span> <span class="n">simp</span><span class="o">,</span> <span class="n">ring</span><span class="o">,</span> <span class="c1">--simp, ring, -- DK : I added G1one to simp, made it better</span>
<span class="kn">end</span>

<span class="kn">lemma</span> <span class="n">G1mul_one</span> <span class="o">(</span> <span class="n">a</span> <span class="o">:</span> <span class="n">G1</span><span class="o">)</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">G1one</span> <span class="bp">=</span> <span class="n">a</span> <span class="o">:=</span>
<span class="k">begin</span>
    <span class="n">ext</span><span class="o">,</span> <span class="n">simp</span><span class="o">,</span> <span class="n">ring</span><span class="o">,</span>
<span class="kn">end</span>

<span class="c1">-- DK : Below was &#39;G1mul_left_inv&#39; which I thought was a typo given the goal</span>
<span class="c1">-- DK : so I changed it to right, also further amending the Poof.</span>
<span class="kn">lemma</span> <span class="n">G1mul_left_inv</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">G1</span><span class="o">)</span> <span class="o">:</span> <span class="n">a</span><span class="bp">⁻¹</span> <span class="bp">*</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">G1one</span> <span class="o">:=</span>
<span class="k">begin</span>
    <span class="n">ext</span><span class="o">,</span> <span class="n">simp</span><span class="o">,</span> <span class="c1">-- ring,</span>
    <span class="c1">-- rw mul_assoc,</span>
    <span class="c1">-- it seems like doing norm_num does some infinite loop!</span>
    <span class="n">refine</span> <span class="o">(</span><span class="n">mul_left_inj&#39;</span> <span class="bp">_</span><span class="o">)</span><span class="bp">.</span><span class="n">mp</span> <span class="bp">_</span><span class="o">,</span>
    <span class="n">exact</span> <span class="mi">2</span><span class="o">,</span>
    <span class="c1">-- DK : I am using my approach from the previous question, not sure if it&#39;s ok</span>
    <span class="c1">-- DK : since it&#39;s quite different to your structure</span>
    <span class="n">exact</span> <span class="n">two_ne_zero</span><span class="o">,</span>
    <span class="n">rw</span> <span class="o">[</span><span class="n">mul_assoc</span><span class="o">,</span> <span class="n">div_mul_cancel</span><span class="o">],</span>

    <span class="n">sorry</span>
    <span class="c1">--unfold has_inv.inv,</span>
    <span class="c1">--simp,</span>
<span class="kn">end</span>


<span class="c">/-</span><span class="cm">- ##Poof G1 is a group  --/</span>
<span class="kn">instance</span> <span class="o">:</span> <span class="n">group</span> <span class="n">G1</span> <span class="o">:=</span> <span class="o">{</span>
    <span class="c1">-- mul</span>
    <span class="n">mul</span> <span class="o">:=</span> <span class="n">G1mul</span><span class="o">,</span>
    <span class="c1">-- mul_assoc</span>
    <span class="n">mul_assoc</span> <span class="o">:=</span> <span class="n">G1mul_assoc</span><span class="o">,</span>
    <span class="c1">-- one</span>
    <span class="n">one</span> <span class="o">:=</span> <span class="n">G1one</span><span class="o">,</span>
    <span class="c1">-- one_mul</span>
    <span class="n">one_mul</span> <span class="o">:=</span> <span class="n">G1one_mul</span><span class="o">,</span>
    <span class="c1">-- mul_one</span>
    <span class="n">mul_one</span> <span class="o">:=</span> <span class="n">G1mul_one</span><span class="o">,</span>
    <span class="c1">-- inv</span>
    <span class="n">inv</span> <span class="o">:=</span> <span class="n">G1_inv</span><span class="o">,</span>
    <span class="c1">-- mul_left_inv</span>
    <span class="n">mul_left_inv</span> <span class="o">:=</span> <span class="n">G1mul_left_inv</span><span class="o">,</span>
<span class="o">}</span>
</code></pre></div>



<a name="202672699"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/SIGSEGV%20errors/near/202672699" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/SIGSEGV.20errors.html#202672699">(Jul 02 2020 at 10:46)</a>:</h4>
<p>well at least it didn't segfault for me</p>



<a name="202672715"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/SIGSEGV%20errors/near/202672715" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Danila Kurganov <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/SIGSEGV.20errors.html#202672715">(Jul 02 2020 at 10:47)</a>:</h4>
<p>yeah, when I do nothing it's fine, but when I try to fix the (lemma G1mul_left_inv) at the end it does it eventually</p>
<p>i'll try to reproduce it and send over what I've done</p>



<a name="202672818"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/SIGSEGV%20errors/near/202672818" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/SIGSEGV.20errors.html#202672818">(Jul 02 2020 at 10:48)</a>:</h4>
<p>hm, the <code>norm_num</code> loop seems to be an issue with <code>simp</code> normal form battling <code>norm_num</code> normal form</p>



<a name="202672868"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/SIGSEGV%20errors/near/202672868" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/SIGSEGV.20errors.html#202672868">(Jul 02 2020 at 10:49)</a>:</h4>
<div class="codehilite"><pre><span></span><code><span class="kn">example</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">ℚ</span><span class="o">)</span> <span class="o">:</span> <span class="mi">1</span> <span class="bp">/</span> <span class="mi">2</span> <span class="bp">*</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">a</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">norm_num</span>
</code></pre></div>



<a name="202672983"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/SIGSEGV%20errors/near/202672983" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Danila Kurganov <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/SIGSEGV.20errors.html#202672983">(Jul 02 2020 at 10:51)</a>:</h4>
<p>Ok, that explains one of the infinite loops I was having!</p>



<a name="202673500"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/SIGSEGV%20errors/near/202673500" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Danila Kurganov <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/SIGSEGV.20errors.html#202673500">(Jul 02 2020 at 10:58)</a>:</h4>
<p>I think I'll just do my thing and if it segfaults again just mimic what I've done to get the server to stop. Thanks for now <span aria-label="+1" class="emoji emoji-1f44d" role="img" title="+1">:+1:</span></p>



<a name="202673602"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/SIGSEGV%20errors/near/202673602" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/SIGSEGV.20errors.html#202673602">(Jul 02 2020 at 10:59)</a>:</h4>
<p>I took the liberty of cleaning up the proofs a bit. Hope this helps:</p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="n">data</span><span class="bp">.</span><span class="n">real</span><span class="bp">.</span><span class="n">basic</span>

<span class="kn">import</span> <span class="n">tactic</span><span class="bp">.</span><span class="n">interactive</span>

<span class="kn">open</span> <span class="n">nat</span>


<span class="c1">-- One way to define a subtype (G1) out of a type (ℚ)</span>
<span class="n">def</span> <span class="n">G1</span> <span class="o">:=</span> <span class="o">{</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℚ</span> <span class="bp">//</span> <span class="mi">0</span> <span class="bp">&lt;</span> <span class="n">x</span><span class="o">}</span>
<span class="c1">-- This instead is a &quot;set&quot;</span>
<span class="n">def</span> <span class="n">G2</span> <span class="o">:=</span> <span class="o">{</span> <span class="n">x</span> <span class="o">:</span> <span class="n">ℚ</span> <span class="bp">|</span> <span class="mi">0</span> <span class="bp">&lt;</span> <span class="n">x</span><span class="o">}</span>

<span class="kn">lemma</span> <span class="n">G1</span><span class="bp">.</span><span class="n">nz</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">G1</span><span class="o">)</span> <span class="o">:</span> <span class="n">a</span><span class="bp">.</span><span class="n">val</span> <span class="bp">≠</span> <span class="mi">0</span> <span class="o">:=</span> <span class="n">ne_of_gt</span> <span class="n">a</span><span class="bp">.</span><span class="mi">2</span>

<span class="bp">@</span><span class="o">[</span><span class="n">simp</span><span class="o">]</span> <span class="n">def</span> <span class="n">G1mul</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">G1</span><span class="o">)</span> <span class="o">:</span> <span class="n">G1</span> <span class="o">:=</span> <span class="bp">⟨</span> <span class="o">(</span><span class="n">a</span><span class="bp">.</span><span class="n">val</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">b</span><span class="bp">.</span><span class="n">val</span> <span class="bp">/</span> <span class="mi">2</span><span class="o">),</span> <span class="n">mul_pos</span> <span class="n">a</span><span class="bp">.</span><span class="n">property</span> <span class="o">(</span><span class="n">half_pos</span> <span class="n">b</span><span class="bp">.</span><span class="n">property</span><span class="o">)</span> <span class="bp">⟩</span>
<span class="kn">instance</span> <span class="o">:</span> <span class="n">has_mul</span> <span class="n">G1</span> <span class="o">:=</span> <span class="bp">⟨</span> <span class="n">G1mul</span> <span class="bp">⟩</span> <span class="c1">-- now we have *</span>

<span class="bp">@</span><span class="o">[</span><span class="n">simp</span><span class="o">]</span> <span class="kn">theorem</span> <span class="n">G1_mul_val</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">G1</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">a</span> <span class="bp">*</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">val</span> <span class="bp">=</span> <span class="o">(</span><span class="n">a</span><span class="bp">.</span><span class="n">val</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">b</span><span class="bp">.</span><span class="n">val</span> <span class="bp">/</span> <span class="mi">2</span><span class="o">)</span> <span class="o">:=</span> <span class="n">rfl</span>

<span class="c">/-</span><span class="cm">- ##Def of One --/</span>

<span class="bp">@</span><span class="o">[</span><span class="n">simp</span><span class="o">]</span> <span class="n">def</span> <span class="n">G1one</span> <span class="o">:</span> <span class="n">G1</span> <span class="o">:=</span> <span class="bp">⟨</span> <span class="mi">2</span><span class="o">,</span> <span class="n">two_pos</span><span class="bp">⟩</span>
<span class="kn">instance</span> <span class="o">:</span> <span class="n">has_one</span> <span class="n">G1</span> <span class="o">:=</span> <span class="bp">⟨</span> <span class="n">G1one</span> <span class="bp">⟩</span>

<span class="bp">@</span><span class="o">[</span><span class="n">simp</span><span class="o">]</span> <span class="kn">theorem</span> <span class="n">G1_one_val</span> <span class="o">:</span> <span class="o">(</span><span class="mi">1</span> <span class="o">:</span> <span class="n">G1</span><span class="o">)</span><span class="bp">.</span><span class="n">val</span> <span class="bp">=</span> <span class="mi">2</span> <span class="o">:=</span> <span class="n">rfl</span>

<span class="c1">-- clearly follow other axioms since from field</span>

<span class="c">/-</span><span class="cm">- ##Def and Lemmas for Inverse --/</span>

<span class="kn">lemma</span> <span class="n">G1_val_pos</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">G1</span><span class="o">)</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">&lt;</span> <span class="n">a</span><span class="bp">.</span><span class="n">val</span><span class="bp">⁻¹</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">simpa</span> <span class="kn">using</span> <span class="n">a</span><span class="bp">.</span><span class="mi">2</span>

<span class="n">def</span> <span class="n">G1_inv</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">G1</span><span class="o">)</span> <span class="o">:</span> <span class="n">G1</span> <span class="o">:=</span> <span class="bp">⟨</span> <span class="mi">4</span><span class="bp">/</span><span class="o">(</span><span class="n">a</span><span class="bp">.</span><span class="n">val</span><span class="o">),</span> <span class="n">mul_pos</span> <span class="n">four_pos</span> <span class="o">(</span><span class="n">G1_val_pos</span> <span class="n">a</span><span class="o">)</span><span class="bp">⟩</span>
<span class="kn">instance</span> <span class="o">:</span> <span class="n">has_inv</span> <span class="n">G1</span> <span class="o">:=</span> <span class="bp">⟨</span> <span class="n">G1_inv</span> <span class="bp">⟩</span>

<span class="bp">@</span><span class="o">[</span><span class="n">simp</span><span class="o">]</span> <span class="kn">theorem</span> <span class="n">G1_inv_val</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">G1</span><span class="o">)</span> <span class="o">:</span> <span class="n">a</span><span class="bp">⁻¹.</span><span class="n">val</span> <span class="bp">=</span> <span class="mi">4</span> <span class="bp">/</span> <span class="n">a</span><span class="bp">.</span><span class="n">val</span> <span class="o">:=</span> <span class="n">rfl</span>


<span class="c1">-- what does extensionality mean in this context?</span>
<span class="c">/-</span><span class="cm">- ##Extensionality and Simplification Lemmas  --/</span>
<span class="bp">@</span><span class="o">[</span><span class="n">ext</span><span class="o">]</span> <span class="kn">lemma</span> <span class="n">ext</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">G1</span><span class="o">)</span> <span class="o">(</span><span class="n">hVal</span> <span class="o">:</span> <span class="n">a</span><span class="bp">.</span><span class="n">val</span> <span class="bp">=</span> <span class="n">b</span><span class="bp">.</span><span class="n">val</span><span class="o">),</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">b</span>
<span class="bp">|</span> <span class="bp">⟨</span><span class="n">x</span><span class="o">,</span><span class="n">y</span><span class="bp">⟩</span> <span class="bp">⟨</span><span class="n">w</span><span class="o">,</span> <span class="n">z</span><span class="bp">⟩</span> <span class="n">rfl</span> <span class="o">:=</span> <span class="n">rfl</span>

<span class="bp">@</span><span class="o">[</span><span class="n">simp</span><span class="o">]</span> <span class="kn">lemma</span> <span class="n">mul_val</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span><span class="n">G1</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">a</span> <span class="bp">*</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">val</span> <span class="bp">=</span> <span class="n">a</span><span class="bp">.</span><span class="n">val</span><span class="bp">*</span><span class="o">(</span><span class="n">b</span><span class="bp">.</span><span class="n">val</span><span class="bp">/</span><span class="mi">2</span><span class="o">)</span> <span class="o">:=</span> <span class="n">rfl</span>

<span class="bp">@</span><span class="o">[</span><span class="n">simp</span><span class="o">]</span> <span class="kn">lemma</span> <span class="n">G1_val_mul_inv</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">G1</span><span class="o">)</span> <span class="o">:</span> <span class="n">a</span><span class="bp">.</span><span class="n">val</span> <span class="bp">*</span> <span class="n">a</span><span class="bp">⁻¹.</span><span class="n">val</span> <span class="bp">=</span> <span class="mi">4</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">simp</span><span class="o">,</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">mul_div_cancel&#39;</span> <span class="bp">_</span> <span class="n">a</span><span class="bp">.</span><span class="n">nz</span><span class="o">],</span>
<span class="kn">end</span>



<span class="c">/-</span><span class="cm">- ##Group Axioms --/</span>
<span class="kn">lemma</span> <span class="n">G1mul_assoc</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">G1</span><span class="o">)</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">b</span> <span class="bp">*</span> <span class="n">c</span> <span class="bp">=</span> <span class="n">a</span> <span class="bp">*</span> <span class="o">(</span><span class="n">b</span> <span class="bp">*</span> <span class="n">c</span><span class="o">)</span> <span class="o">:=</span>
<span class="k">begin</span>
    <span class="n">ext</span><span class="o">,</span> <span class="n">simp</span><span class="o">,</span> <span class="n">ring</span><span class="o">,</span>
<span class="kn">end</span>

<span class="kn">lemma</span> <span class="n">G1one_mul</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">G1</span><span class="o">)</span> <span class="o">:</span> <span class="mi">1</span> <span class="bp">*</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">a</span> <span class="o">:=</span>
<span class="k">begin</span>
    <span class="n">ext</span><span class="o">,</span> <span class="n">simp</span><span class="o">,</span> <span class="n">ring</span><span class="o">,</span>
<span class="kn">end</span>

<span class="kn">lemma</span> <span class="n">G1mul_one</span> <span class="o">(</span> <span class="n">a</span> <span class="o">:</span> <span class="n">G1</span><span class="o">)</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">*</span> <span class="mi">1</span> <span class="bp">=</span> <span class="n">a</span> <span class="o">:=</span>
<span class="k">begin</span>
    <span class="n">ext</span><span class="o">,</span> <span class="n">simp</span><span class="o">,</span> <span class="n">ring</span><span class="o">,</span>
<span class="kn">end</span>

<span class="c1">-- example (a : ℚ) : 1 / 2 * a = a := by norm_num</span>

<span class="c1">-- DK : Below was &#39;G1mul_left_inv&#39; which I thought was a typo given the goal</span>
<span class="c1">-- DK : so I changed it to right, also further amending the Poof.</span>
<span class="kn">lemma</span> <span class="n">G1mul_left_inv</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">G1</span><span class="o">)</span> <span class="o">:</span> <span class="n">a</span><span class="bp">⁻¹</span> <span class="bp">*</span> <span class="n">a</span> <span class="bp">=</span> <span class="mi">1</span> <span class="o">:=</span>
<span class="k">begin</span>
    <span class="n">ext</span><span class="o">,</span> <span class="n">simp</span><span class="o">,</span> <span class="n">ring</span><span class="o">,</span>
    <span class="n">simp</span> <span class="o">[</span><span class="n">a</span><span class="bp">.</span><span class="n">nz</span><span class="o">],</span>
<span class="kn">end</span>


<span class="c">/-</span><span class="cm">- ##Poof G1 is a group  --/</span>
<span class="kn">instance</span> <span class="o">:</span> <span class="n">group</span> <span class="n">G1</span> <span class="o">:=</span> <span class="o">{</span>
    <span class="c1">-- mul</span>
    <span class="n">mul</span> <span class="o">:=</span> <span class="n">G1mul</span><span class="o">,</span>
    <span class="c1">-- mul_assoc</span>
    <span class="n">mul_assoc</span> <span class="o">:=</span> <span class="n">G1mul_assoc</span><span class="o">,</span>
    <span class="c1">-- one</span>
    <span class="n">one</span> <span class="o">:=</span> <span class="n">G1one</span><span class="o">,</span>
    <span class="c1">-- one_mul</span>
    <span class="n">one_mul</span> <span class="o">:=</span> <span class="n">G1one_mul</span><span class="o">,</span>
    <span class="c1">-- mul_one</span>
    <span class="n">mul_one</span> <span class="o">:=</span> <span class="n">G1mul_one</span><span class="o">,</span>
    <span class="c1">-- inv</span>
    <span class="n">inv</span> <span class="o">:=</span> <span class="n">G1_inv</span><span class="o">,</span>
    <span class="c1">-- mul_left_inv</span>
    <span class="n">mul_left_inv</span> <span class="o">:=</span> <span class="n">G1mul_left_inv</span><span class="o">,</span>
<span class="o">}</span>
</code></pre></div>



<a name="202674268"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/SIGSEGV%20errors/near/202674268" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Danila Kurganov <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/SIGSEGV.20errors.html#202674268">(Jul 02 2020 at 11:07)</a>:</h4>
<p>Oh that is much better than what I have</p>
<p>So does the lemma_name.ext let you use the .ext as a method onto some object?</p>
<p>maybe .ext is a bad name for it, extension</p>



<a name="202674405"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/SIGSEGV%20errors/near/202674405" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/SIGSEGV.20errors.html#202674405">(Jul 02 2020 at 11:09)</a>:</h4>
<p><code>ext</code> in this context means roughly speaking that <code>X</code> and <code>Y</code> are equal if all their "components" are equal.</p>



<a name="202674406"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/SIGSEGV%20errors/near/202674406" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/SIGSEGV.20errors.html#202674406">(Jul 02 2020 at 11:09)</a>:</h4>
<p>yes, if you give theorems names like <code>G1.foo</code> then you can write <code>a.foo</code> instead of <code>G1.foo a</code> if one of the arguments to the theorem has type <code>G1</code></p>



<a name="202674469"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/SIGSEGV%20errors/near/202674469" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/SIGSEGV.20errors.html#202674469">(Jul 02 2020 at 11:10)</a>:</h4>
<p>And sometimes, you can get away with less than all components, because for example some of the components are proofs</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>