---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/Tactics.20for.20big.20operators.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Tactics.20for.20big.20operators.html">Tactics for big operators</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="199332129"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Tactics%20for%20big%20operators/near/199332129" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Walter Moreira <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Tactics.20for.20big.20operators.html#199332129">(Jun 01 2020 at 02:44)</a>:</h4>
<p>I'm playing with the big operators, and I'm having trouble finding the right tactics to operate on its elements. In the following dummy example, I'm guessing the first step will use some combination of <code>sum_range_succ'</code> (even though I haven't figured it out yet). But my main question is the second <code>sorry</code>. How can I apply some tactic like <code>ring</code> inside of the big operator?</p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="n">data</span><span class="bp">.</span><span class="n">finset</span>
<span class="kn">import</span> <span class="n">algebra</span><span class="bp">.</span><span class="n">big_operators</span>
<span class="kn">import</span> <span class="n">tactic</span>

<span class="n">open_locale</span> <span class="n">big_operators</span>

<span class="kn">example</span> <span class="o">(</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">nonzero_comm_ring</span> <span class="n">R</span><span class="o">]</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">u</span> <span class="n">v</span> <span class="o">:</span> <span class="n">R</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">u</span> <span class="bp">*</span> <span class="n">v</span> <span class="bp">=</span> <span class="mi">1</span><span class="o">)</span>
    <span class="o">:</span> <span class="err">∑</span> <span class="n">i</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">2</span><span class="o">),</span> <span class="n">u</span> <span class="bp">*</span> <span class="n">v</span><span class="bp">^</span><span class="n">i</span> <span class="bp">=</span> <span class="n">u</span> <span class="bp">+</span> <span class="err">∑</span> <span class="n">i</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">),</span> <span class="n">v</span><span class="bp">^</span><span class="n">i</span> <span class="o">:=</span>
<span class="k">begin</span>
<span class="k">calc</span>
    <span class="err">∑</span> <span class="n">i</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">2</span><span class="o">),</span> <span class="n">u</span> <span class="bp">*</span> <span class="n">v</span><span class="bp">^</span><span class="n">i</span>  <span class="bp">=</span> <span class="n">u</span> <span class="bp">+</span> <span class="err">∑</span> <span class="n">i</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">),</span> <span class="n">u</span> <span class="bp">*</span> <span class="n">v</span><span class="bp">^</span><span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="o">:</span> <span class="k">by</span> <span class="n">sorry</span>
    <span class="bp">...</span> <span class="bp">=</span> <span class="n">u</span> <span class="bp">+</span> <span class="err">∑</span> <span class="n">i</span> <span class="k">in</span> <span class="n">finset</span><span class="bp">.</span><span class="n">range</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">),</span> <span class="n">v</span><span class="bp">^</span><span class="n">i</span> <span class="o">:</span> <span class="k">by</span> <span class="n">sorry</span>
<span class="kn">end</span>
</code></pre></div>



<a name="199332492"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Tactics%20for%20big%20operators/near/199332492" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Tactics.20for.20big.20operators.html#199332492">(Jun 01 2020 at 02:53)</a>:</h4>
<p>second step should be <code>by simp only [pow_succ, mul_assoc, h, one_mul]</code>, possibly with <code>pow_succ'</code> and/or <code>←</code> before <code>mul_assoc</code>.</p>



<a name="199332566"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Tactics%20for%20big%20operators/near/199332566" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Tactics.20for.20big.20operators.html#199332566">(Jun 01 2020 at 02:54)</a>:</h4>
<p>In the first step the only difficulty with applying <code>sum_range_succ'</code> is that you have <code>n + 2</code> while you need <code>n + 1 + 1</code>. The latter simplifies to the former but I'm not sure that they are defeq.</p>



<a name="199332670"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Tactics%20for%20big%20operators/near/199332670" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Tactics.20for.20big.20operators.html#199332670">(Jun 01 2020 at 02:57)</a>:</h4>
<p><span class="user-mention" data-user-id="269975">@Walter Moreira</span> Another approach would be to start with <code>rw finset.sum_congr rfl</code></p>



<a name="199332679"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Tactics%20for%20big%20operators/near/199332679" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Tactics.20for.20big.20operators.html#199332679">(Jun 01 2020 at 02:58)</a>:</h4>
<p>After that it should be <code>intros, straight_forward</code></p>



<a name="199333229"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Tactics%20for%20big%20operators/near/199333229" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Walter Moreira <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Tactics.20for.20big.20operators.html#199333229">(Jun 01 2020 at 03:10)</a>:</h4>
<p>Ah, I see. <code>finset.sum_congr</code> is exactly what I was looking for before embarking in the calc tactic. Thanks a lot!</p>
<p>By the way, is <code>straight_forward</code> a tactic? Or you just mean that it's easy from then on?</p>
<p>[Thanks <span class="user-mention" data-user-id="214703">@Yury G. Kudryashov</span> for the hint on <code>simp</code> as well]</p>



<a name="199333236"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Tactics%20for%20big%20operators/near/199333236" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Tactics.20for.20big.20operators.html#199333236">(Jun 01 2020 at 03:11)</a>:</h4>
<p>I mean it's easy. (It <em>should</em> be a tactic)</p>



<a name="199333241"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Tactics%20for%20big%20operators/near/199333241" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Tactics.20for.20big.20operators.html#199333241">(Jun 01 2020 at 03:11)</a>:</h4>
<p>(Just like we've been wishing for <code>schoolkid</code> and <code>undergrad</code>....)</p>



<a name="199333438"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Tactics%20for%20big%20operators/near/199333438" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Tactics.20for.20big.20operators.html#199333438">(Jun 01 2020 at 03:16)</a>:</h4>
<p>But using Yury's approach, you could probably get rid of the entire <code>calc</code> block, and prove it in a 1-line simp call.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>