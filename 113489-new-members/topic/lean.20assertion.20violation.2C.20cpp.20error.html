---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/lean.20assertion.20violation.2C.20cpp.20error.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/lean.20assertion.20violation.2C.20cpp.20error.html">lean assertion violation, cpp error</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="284768327"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/lean%20assertion%20violation%2C%20cpp%20error/near/284768327" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Peter Gumm <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/lean.20assertion.20violation.2C.20cpp.20error.html#284768327">(Jun 02 2022 at 16:16)</a>:</h4>
<p>Hi, I did install Lean under VS-Code on my Windows Computer. But after loading the tutorial and its first file "00_first_proofs.lean ", loading does not stop and I get a cpp error message:<br>
LEAN ASSERTION VIOLATION<br>
File: C:/projects/lean/src/frontends/lean/elaborator.cpp<br>
Line: 3167<br>
Task: c:\Users\gumm\tutorials\_target\deps\mathlib\src\logic\embedding.lean: equiv.subtype_injective_equiv_embedding<br>
m_ctx.match(e, *val2)<br>
LEAN ASSERTION VIOLATION<br>
File: C:/projects/lean/src/frontends/lean/elaborator.cpp<br>
Line: 3167<br>
Task: c:\Users\gumm\tutorials\_target\deps\mathlib\src\order\hom\basic.lean: order_hom.dual<br>
m_ctx.match(e, *val2)</p>



<a name="284768901"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/lean%20assertion%20violation%2C%20cpp%20error/near/284768901" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/lean.20assertion.20violation.2C.20cpp.20error.html#284768901">(Jun 02 2022 at 16:20)</a>:</h4>
<p>Aah, that old assertion violation which was fixed years ago. Have you installed a very old version of Lean somehow? If you want to study the tutorial then you need to install it with <code>leanproject</code> and then open the root directory of the project folder with VS Code. Did you follow the instructions <a href="https://leanprover-community.github.io/install/windows.html">here</a> to install Lean and leanproject?</p>



<a name="284768905"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/lean%20assertion%20violation%2C%20cpp%20error/near/284768905" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/lean.20assertion.20violation.2C.20cpp.20error.html#284768905">(Jun 02 2022 at 16:20)</a>:</h4>
<p>Can you confirm how you installed Lean? Did you follow <a href="https://leanprover-community.github.io/install/windows.html">this page</a>?</p>



<a name="284769262"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/lean%20assertion%20violation%2C%20cpp%20error/near/284769262" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Peter Gumm <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/lean.20assertion.20violation.2C.20cpp.20error.html#284769262">(Jun 02 2022 at 16:23)</a>:</h4>
<p>Yes this is exactly what I did. <br>
I installed lean via VS-Code.</p>



<a name="284769409"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/lean%20assertion%20violation%2C%20cpp%20error/near/284769409" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/lean.20assertion.20violation.2C.20cpp.20error.html#284769409">(Jun 02 2022 at 16:24)</a>:</h4>
<p>Via <code>elan</code> you mean?</p>



<a name="284769583"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/lean%20assertion%20violation%2C%20cpp%20error/near/284769583" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Peter Gumm <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/lean.20assertion.20violation.2C.20cpp.20error.html#284769583">(Jun 02 2022 at 16:26)</a>:</h4>
<p>I must admit I don't even know what elan does, yet I just blindly followed the instructions on that page.</p>



<a name="284769610"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/lean%20assertion%20violation%2C%20cpp%20error/near/284769610" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/lean.20assertion.20violation.2C.20cpp.20error.html#284769610">(Jun 02 2022 at 16:26)</a>:</h4>
<p>If you sit inside the tutorials directory in git bash, can you show us what <code>lean --version</code> says? (Let us know if you need more detailed instructions for doing that of course.)</p>



<a name="284769653"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/lean%20assertion%20violation%2C%20cpp%20error/near/284769653" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/lean.20assertion.20violation.2C.20cpp.20error.html#284769653">(Jun 02 2022 at 16:26)</a>:</h4>
<p>OK cool -- elan is basically a tool for installing lean versions. VSCode is a text editor, so a place where you can edit lean files.</p>



<a name="284770025"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/lean%20assertion%20violation%2C%20cpp%20error/near/284770025" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Peter Gumm <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/lean.20assertion.20violation.2C.20cpp.20error.html#284770025">(Jun 02 2022 at 16:29)</a>:</h4>
<p>$ lean --version<br>
Lean (version 3.42.1, commit 68455b087d87, Release)</p>



<a name="284770237"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/lean%20assertion%20violation%2C%20cpp%20error/near/284770237" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/lean.20assertion.20violation.2C.20cpp.20error.html#284770237">(Jun 02 2022 at 16:31)</a>:</h4>
<p>That looks good! The assertion violation is in Lean 3.4.2 (which looks a bit like 3.42 but is about 4 years older)</p>



<a name="284770306"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/lean%20assertion%20violation%2C%20cpp%20error/near/284770306" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Peter Gumm <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/lean.20assertion.20violation.2C.20cpp.20error.html#284770306">(Jun 02 2022 at 16:31)</a>:</h4>
<p>ok I am quite familiar with "Visual Studio" and with "VS-Code" (for Dafny, PVS, etc..)</p>



<a name="284770530"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/lean%20assertion%20violation%2C%20cpp%20error/near/284770530" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/lean.20assertion.20violation.2C.20cpp.20error.html#284770530">(Jun 02 2022 at 16:33)</a>:</h4>
<p>I might be barking up the wrong tree, but I conjecture that the issue is that <code>C:/projects/lean/src/frontends/lean/elaborator.cpp</code> is not the Lean you want to use. That version of Lean looks suspiciously "globally installed" which is not what you want at all.</p>



<a name="284770733"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/lean%20assertion%20violation%2C%20cpp%20error/near/284770733" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Peter Gumm <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/lean.20assertion.20violation.2C.20cpp.20error.html#284770733">(Jun 02 2022 at 16:35)</a>:</h4>
<p>I recall that some time ago I already tried to install Lean - but gave up frustrated. So there might be old files lying around?</p>



<a name="284770901"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/lean%20assertion%20violation%2C%20cpp%20error/near/284770901" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/lean.20assertion.20violation.2C.20cpp.20error.html#284770901">(Jun 02 2022 at 16:36)</a>:</h4>
<p>Seems likely yeah -- can you show us what <code>ls C:/projects/lean</code> looks like from git bash?</p>



<a name="284770975"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/lean%20assertion%20violation%2C%20cpp%20error/near/284770975" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/lean.20assertion.20violation.2C.20cpp.20error.html#284770975">(Jun 02 2022 at 16:37)</a>:</h4>
<p>If you go to VS Code settings and search for Lean, what does it say in <code>Lean: Executable path</code>?</p>



<a name="284771581"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/lean%20assertion%20violation%2C%20cpp%20error/near/284771581" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Peter Gumm <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/lean.20assertion.20violation.2C.20cpp.20error.html#284771581">(Jun 02 2022 at 16:42)</a>:</h4>
<p>Oh, yes, there is an old lean installation. <br>
C:\\Users\\gumm\\lean-3.4.2-windows\\bin\\lean.exe<br>
I'll remove that tonight and start the process anew. <br>
Thanks A LOT for your help so far - need to tend my kid now ...</p>



<a name="284771742"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/lean%20assertion%20violation%2C%20cpp%20error/near/284771742" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/lean.20assertion.20violation.2C.20cpp.20error.html#284771742">(Jun 02 2022 at 16:43)</a>:</h4>
<p>If you just change it to <code>lean</code> this might solve all your problems.</p>



<a name="284796495"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/lean%20assertion%20violation%2C%20cpp%20error/near/284796495" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Peter Gumm <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/lean.20assertion.20violation.2C.20cpp.20error.html#284796495">(Jun 02 2022 at 19:58)</a>:</h4>
<p><span aria-label="+1" class="emoji emoji-1f44d" role="img" title="+1">:+1:</span>  Seems, I got everything working !</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>