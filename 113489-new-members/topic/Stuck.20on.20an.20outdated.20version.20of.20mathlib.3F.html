---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/Stuck.20on.20an.20outdated.20version.20of.20mathlib.3F.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Stuck.20on.20an.20outdated.20version.20of.20mathlib.3F.html">Stuck on an outdated version of mathlib?</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="278361112"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Stuck%20on%20an%20outdated%20version%20of%20mathlib%3F/near/278361112" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jake Levinson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Stuck.20on.20an.20outdated.20version.20of.20mathlib.3F.html#278361112">(Apr 08 2022 at 20:56)</a>:</h4>
<p>I think the version of mathlib on one of my Lean projects is out of date. When I type <code>lean -version</code> I get</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">Lean</span> <span class="o">(</span><span class="n">version</span> <span class="mi">3</span><span class="bp">.</span><span class="mi">32</span><span class="bp">.</span><span class="mi">1</span><span class="o">,</span> <span class="n">commit</span> <span class="mi">35</span><span class="n">b3a9c4e2d3</span><span class="o">,</span> <span class="n">Release</span><span class="o">)</span>
</code></pre></div>
<p>But if I run <code>elan update</code> I get</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="bp">&gt;</span> <span class="n">elan</span> <span class="n">update</span>
<span class="n">info</span><span class="o">:</span> <span class="n">syncing</span> <span class="n">channel</span> <span class="n">updates</span> <span class="n">for</span> <span class="bp">'</span><span class="n">stable'</span>
<span class="n">info</span><span class="o">:</span> <span class="n">latest</span> <span class="n">update</span> <span class="n">on</span> <span class="n">stable</span><span class="o">,</span> <span class="n">lean</span> <span class="n">version</span> <span class="n">v3.42.1</span>
<span class="n">info</span><span class="o">:</span> <span class="n">syncing</span> <span class="n">channel</span> <span class="n">updates</span> <span class="n">for</span> <span class="bp">'</span><span class="n">nightly'</span>
<span class="n">info</span><span class="o">:</span> <span class="n">latest</span> <span class="n">update</span> <span class="n">on</span> <span class="n">nightly</span><span class="o">,</span> <span class="n">lean</span> <span class="n">version</span> <span class="n">nightly</span><span class="bp">-</span><span class="mi">2020</span><span class="bp">-</span><span class="mi">04</span><span class="bp">-</span><span class="mi">28</span>
<span class="n">info</span><span class="o">:</span> <span class="n">checking</span> <span class="n">for</span> <span class="n">self</span><span class="bp">-</span><span class="n">updates</span>
<span class="n">error</span><span class="o">:</span> <span class="n">failed</span> <span class="n">to</span> <span class="n">parse</span> <span class="n">latest</span> <span class="n">release</span> <span class="n">tag</span>
</code></pre></div>
<p>This might be tied to me being on an M1 mac. It caused me various weird hurdles with my initial install. (<a href="#narrow/stream/113489-new-members/topic/M1.20macs">https://leanprover.zulipchat.com/#narrow/stream/113489-new-members/topic/M1.20macs</a>)</p>



<a name="278364521"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Stuck%20on%20an%20outdated%20version%20of%20mathlib%3F/near/278364521" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jake Levinson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Stuck.20on.20an.20outdated.20version.20of.20mathlib.3F.html#278364521">(Apr 08 2022 at 21:27)</a>:</h4>
<p>I guess I didn't actually ask a question... my question is, how do I get it to update?</p>



<a name="278364671"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Stuck%20on%20an%20outdated%20version%20of%20mathlib%3F/near/278364671" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Stuck.20on.20an.20outdated.20version.20of.20mathlib.3F.html#278364671">(Apr 08 2022 at 21:29)</a>:</h4>
<p>Assuming you created those projects using <code>leanproject</code>, <code>leanproject up</code> should be the way to go.</p>



<a name="278364889"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Stuck%20on%20an%20outdated%20version%20of%20mathlib%3F/near/278364889" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jake Levinson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Stuck.20on.20an.20outdated.20version.20of.20mathlib.3F.html#278364889">(Apr 08 2022 at 21:31)</a>:</h4>
<p>That command fails:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="bp">...</span>
<span class="n">ImportError</span><span class="o">:</span> <span class="n">dlopen</span><span class="o">(</span><span class="bp">/</span><span class="n">opt</span><span class="bp">/</span><span class="n">homebrew</span><span class="bp">/</span><span class="n">lib</span><span class="bp">/</span><span class="n">python3.9</span><span class="bp">/</span><span class="n">site</span><span class="bp">-</span><span class="n">packages</span><span class="bp">/</span><span class="n">_cffi_backend.cpython</span><span class="bp">-</span><span class="mi">39</span><span class="bp">-</span><span class="n">darwin.so</span><span class="o">,</span> <span class="mi">2</span><span class="o">):</span> <span class="n">Library</span> <span class="n">not</span> <span class="n">loaded</span><span class="o">:</span> <span class="bp">/</span><span class="n">opt</span><span class="bp">/</span><span class="n">homebrew</span><span class="bp">/</span><span class="n">opt</span><span class="bp">/</span><span class="n">libffi</span><span class="bp">/</span><span class="n">lib</span><span class="bp">/</span><span class="n">libffi.7.dylib</span>
  <span class="n">Referenced</span> <span class="k">from</span><span class="o">:</span> <span class="bp">/</span><span class="n">opt</span><span class="bp">/</span><span class="n">homebrew</span><span class="bp">/</span><span class="n">lib</span><span class="bp">/</span><span class="n">python3.9</span><span class="bp">/</span><span class="n">site</span><span class="bp">-</span><span class="n">packages</span><span class="bp">/</span><span class="n">_cffi_backend.cpython</span><span class="bp">-</span><span class="mi">39</span><span class="bp">-</span><span class="n">darwin.so</span>
  <span class="n">Reason</span><span class="o">:</span> <span class="n">image</span> <span class="n">not</span> <span class="n">found</span>
</code></pre></div>
<p>I feel like I've seen this error message before, but I don't remember where...</p>



<a name="278369595"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Stuck%20on%20an%20outdated%20version%20of%20mathlib%3F/near/278369595" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Matt Diamond <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Stuck.20on.20an.20outdated.20version.20of.20mathlib.3F.html#278369595">(Apr 08 2022 at 22:24)</a>:</h4>
<p>might need to reinstall <code>libffi</code>? you could try <code>brew uninstall libffi; brew install libffi</code></p>



<a name="278369613"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Stuck%20on%20an%20outdated%20version%20of%20mathlib%3F/near/278369613" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Matt Diamond <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Stuck.20on.20an.20outdated.20version.20of.20mathlib.3F.html#278369613">(Apr 08 2022 at 22:25)</a>:</h4>
<p>it might be installed but not linked</p>



<a name="278427214"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Stuck%20on%20an%20outdated%20version%20of%20mathlib%3F/near/278427214" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jake Levinson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Stuck.20on.20an.20outdated.20version.20of.20mathlib.3F.html#278427214">(Apr 09 2022 at 19:47)</a>:</h4>
<p><span class="user-mention" data-user-id="380294">@Matt Diamond</span> <span class="user-mention" data-user-id="387244">@Yaël Dillies</span> I eventually got the commands working (I had to reinstall elan and lean in the end).</p>
<p>Now though, I keep getting "excessive memory consumption" errors in VS Code. I think (?) all of mathlib is already compiled, I have oleans files already, but e.g. a single command of <code>library_search</code> typically causes VS Code to crash now. Even plain old typing and editing in a file seems more prone to cause an outage. Any ideas on how to troubleshoot?</p>



<a name="278427581"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Stuck%20on%20an%20outdated%20version%20of%20mathlib%3F/near/278427581" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Stuck.20on.20an.20outdated.20version.20of.20mathlib.3F.html#278427581">(Apr 09 2022 at 19:55)</a>:</h4>
<p>This very much sounds like you have the <em>wrong</em> oleans. Try <code>leanproject get-c</code> again.</p>



<a name="278427661"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Stuck%20on%20an%20outdated%20version%20of%20mathlib%3F/near/278427661" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jake Levinson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Stuck.20on.20an.20outdated.20version.20of.20mathlib.3F.html#278427661">(Apr 09 2022 at 19:57)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="bp">&gt;</span> <span class="n">leanproject</span> <span class="n">get</span><span class="bp">-</span><span class="n">c</span>
<span class="n">Looking</span> <span class="n">for</span> <span class="n">lean</span><span class="bp">-</span><span class="n">topology</span> <span class="n">oleans</span> <span class="n">for</span> <span class="mi">07</span><span class="n">bfb91</span>
  <span class="n">locally...</span>
<span class="n">No</span> <span class="n">cache</span> <span class="n">available</span> <span class="n">for</span> <span class="n">revision</span> <span class="mi">07</span><span class="n">bfb91</span>
<span class="n">Looking</span> <span class="n">for</span> <span class="n">lean</span><span class="bp">-</span><span class="n">topology</span> <span class="n">oleans</span> <span class="n">for</span> <span class="n">b7d8e4d</span>
  <span class="n">locally...</span>
<span class="n">No</span> <span class="n">cache</span> <span class="n">available</span> <span class="n">for</span> <span class="n">revision</span> <span class="n">b7d8e4d</span>
<span class="n">Looking</span> <span class="n">for</span> <span class="n">lean</span><span class="bp">-</span><span class="n">topology</span> <span class="n">oleans</span> <span class="n">for</span> <span class="mi">0</span><span class="n">a2b52e</span>
  <span class="n">locally...</span>
<span class="n">No</span> <span class="n">cache</span> <span class="n">available</span> <span class="n">for</span> <span class="n">revision</span> <span class="mi">0</span><span class="n">a2b52e</span>
<span class="n">Looking</span> <span class="n">for</span> <span class="n">lean</span><span class="bp">-</span><span class="n">topology</span> <span class="n">oleans</span> <span class="n">for</span> <span class="mi">8</span><span class="n">b2359e</span>
  <span class="n">locally...</span>
<span class="n">No</span> <span class="n">cache</span> <span class="n">available</span> <span class="n">for</span> <span class="n">revision</span> <span class="mi">8</span><span class="n">b2359e</span>
<span class="n">Looking</span> <span class="n">for</span> <span class="n">lean</span><span class="bp">-</span><span class="n">topology</span> <span class="n">oleans</span> <span class="n">for</span> <span class="n">ed4a7a5</span>
  <span class="n">locally...</span>
<span class="n">No</span> <span class="n">cache</span> <span class="n">available</span> <span class="n">for</span> <span class="n">revision</span> <span class="n">ed4a7a5</span>
<span class="n">Looking</span> <span class="n">for</span> <span class="n">lean</span><span class="bp">-</span><span class="n">topology</span> <span class="n">oleans</span> <span class="n">for</span> <span class="mi">5</span><span class="n">a599b5</span>
  <span class="n">locally...</span>
<span class="n">No</span> <span class="n">cache</span> <span class="n">available</span> <span class="n">for</span> <span class="n">revision</span> <span class="mi">5</span><span class="n">a599b5</span>
<span class="n">Looking</span> <span class="n">for</span> <span class="n">lean</span><span class="bp">-</span><span class="n">topology</span> <span class="n">oleans</span> <span class="n">for</span> <span class="n">fc3ae7b</span>
  <span class="n">locally...</span>
<span class="n">No</span> <span class="n">cache</span> <span class="n">available</span> <span class="n">for</span> <span class="n">revision</span> <span class="n">fc3ae7b</span>
<span class="n">Looking</span> <span class="n">for</span> <span class="n">lean</span><span class="bp">-</span><span class="n">topology</span> <span class="n">oleans</span> <span class="n">for</span> <span class="mi">52</span><span class="n">ef265</span>
  <span class="n">locally...</span>
<span class="n">No</span> <span class="n">cache</span> <span class="n">available</span> <span class="n">for</span> <span class="n">revision</span> <span class="mi">52</span><span class="n">ef265</span>
<span class="n">Looking</span> <span class="n">for</span> <span class="n">lean</span><span class="bp">-</span><span class="n">topology</span> <span class="n">oleans</span> <span class="n">for</span> <span class="mi">57</span><span class="n">b15b3</span>
  <span class="n">locally...</span>
<span class="n">No</span> <span class="n">cache</span> <span class="n">available</span> <span class="n">for</span> <span class="n">revision</span> <span class="mi">57</span><span class="n">b15b3</span>
<span class="n">Looking</span> <span class="n">for</span> <span class="n">lean</span><span class="bp">-</span><span class="n">topology</span> <span class="n">oleans</span> <span class="n">for</span> <span class="n">a62215f</span>
  <span class="n">locally...</span>
<span class="n">No</span> <span class="n">cache</span> <span class="n">available</span> <span class="n">for</span> <span class="n">revision</span> <span class="n">a62215f</span>
<span class="n">Looking</span> <span class="n">for</span> <span class="n">lean</span><span class="bp">-</span><span class="n">topology</span> <span class="n">oleans</span> <span class="n">for</span> <span class="n">d4dee61</span>
  <span class="n">locally...</span>
<span class="n">No</span> <span class="n">cache</span> <span class="n">available</span> <span class="n">for</span> <span class="n">revision</span> <span class="n">d4dee61</span>
<span class="n">Looking</span> <span class="n">for</span> <span class="n">lean</span><span class="bp">-</span><span class="n">topology</span> <span class="n">oleans</span> <span class="n">for</span> <span class="n">dcdd346</span>
  <span class="n">locally...</span>
<span class="n">No</span> <span class="n">cache</span> <span class="n">available</span> <span class="n">for</span> <span class="n">revision</span> <span class="n">dcdd346</span>
<span class="n">Looking</span> <span class="n">for</span> <span class="n">lean</span><span class="bp">-</span><span class="n">topology</span> <span class="n">oleans</span> <span class="n">for</span> <span class="mi">5</span><span class="n">a30e79</span>
  <span class="n">locally...</span>
<span class="n">No</span> <span class="n">cache</span> <span class="n">available</span> <span class="n">for</span> <span class="n">revision</span> <span class="mi">5</span><span class="n">a30e79</span>
<span class="n">Looking</span> <span class="n">for</span> <span class="n">lean</span><span class="bp">-</span><span class="n">topology</span> <span class="n">oleans</span> <span class="n">for</span> <span class="n">c6552cc</span>
  <span class="n">locally...</span>
<span class="n">No</span> <span class="n">cache</span> <span class="n">available</span> <span class="n">for</span> <span class="n">revision</span> <span class="n">c6552cc</span>
<span class="n">Looking</span> <span class="n">for</span> <span class="n">lean</span><span class="bp">-</span><span class="n">topology</span> <span class="n">oleans</span> <span class="n">for</span> <span class="mi">431124</span><span class="n">f</span>
  <span class="n">locally...</span>
<span class="n">No</span> <span class="n">cache</span> <span class="n">available</span> <span class="n">for</span> <span class="n">revision</span> <span class="mi">431124</span><span class="n">f</span>
<span class="n">Looking</span> <span class="n">for</span> <span class="n">lean</span><span class="bp">-</span><span class="n">topology</span> <span class="n">oleans</span> <span class="n">for</span> <span class="mi">84</span><span class="n">b2ce0</span>
  <span class="n">locally...</span>
<span class="n">No</span> <span class="n">cache</span> <span class="n">available</span> <span class="n">for</span> <span class="n">revision</span> <span class="mi">84</span><span class="n">b2ce0</span>
<span class="n">Looking</span> <span class="n">for</span> <span class="n">lean</span><span class="bp">-</span><span class="n">topology</span> <span class="n">oleans</span> <span class="n">for</span> <span class="mi">25</span><span class="n">fcf7a</span>
  <span class="n">locally...</span>
<span class="n">No</span> <span class="n">cache</span> <span class="n">available</span> <span class="n">for</span> <span class="n">revision</span> <span class="mi">25</span><span class="n">fcf7a</span>
<span class="n">Looking</span> <span class="n">for</span> <span class="n">lean</span><span class="bp">-</span><span class="n">topology</span> <span class="n">oleans</span> <span class="n">for</span> <span class="mi">9</span><span class="n">e6d61a</span>
  <span class="n">locally...</span>
<span class="n">No</span> <span class="n">cache</span> <span class="n">available</span> <span class="n">for</span> <span class="n">revision</span> <span class="mi">9</span><span class="n">e6d61a</span>
<span class="n">Looking</span> <span class="n">for</span> <span class="n">lean</span><span class="bp">-</span><span class="n">topology</span> <span class="n">oleans</span> <span class="n">for</span> <span class="mi">1</span><span class="n">e6f420</span>
  <span class="n">locally...</span>
<span class="n">No</span> <span class="n">cache</span> <span class="n">available</span> <span class="n">for</span> <span class="n">revision</span> <span class="mi">1</span><span class="n">e6f420</span>
<span class="n">Looking</span> <span class="n">for</span> <span class="n">lean</span><span class="bp">-</span><span class="n">topology</span> <span class="n">oleans</span> <span class="n">for</span> <span class="mi">170</span><span class="n">c3fa</span>
  <span class="n">locally...</span>
<span class="n">No</span> <span class="n">cache</span> <span class="n">available</span> <span class="n">for</span> <span class="n">revision</span> <span class="mi">170</span><span class="n">c3fa</span>
<span class="n">Looking</span> <span class="n">for</span> <span class="n">lean</span><span class="bp">-</span><span class="n">topology</span> <span class="n">oleans</span> <span class="n">for</span> <span class="n">ebc4e68</span>
  <span class="n">locally...</span>
<span class="n">No</span> <span class="n">cache</span> <span class="n">available</span> <span class="n">for</span> <span class="n">revision</span> <span class="n">ebc4e68</span>
<span class="n">Looking</span> <span class="n">for</span> <span class="n">lean</span><span class="bp">-</span><span class="n">topology</span> <span class="n">oleans</span> <span class="n">for</span> <span class="n">f847ada</span>
  <span class="n">locally...</span>
<span class="n">No</span> <span class="n">cache</span> <span class="n">available</span> <span class="n">for</span> <span class="n">revision</span> <span class="n">f847ada</span>
<span class="n">Looking</span> <span class="n">for</span> <span class="n">lean</span><span class="bp">-</span><span class="n">topology</span> <span class="n">oleans</span> <span class="n">for</span> <span class="mi">9</span><span class="n">b8e5ca</span>
  <span class="n">locally...</span>
<span class="n">No</span> <span class="n">cache</span> <span class="n">available</span> <span class="n">for</span> <span class="n">revision</span> <span class="mi">9</span><span class="n">b8e5ca</span>
<span class="n">No</span> <span class="n">archives</span> <span class="n">available</span> <span class="n">for</span> <span class="n">any</span> <span class="n">commits</span><span class="bp">!</span>
</code></pre></div>



<a name="278427865"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Stuck%20on%20an%20outdated%20version%20of%20mathlib%3F/near/278427865" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Stuck.20on.20an.20outdated.20version.20of.20mathlib.3F.html#278427865">(Apr 09 2022 at 20:01)</a>:</h4>
<p>Oh you're on your own project. Do <code>leanproject get-m</code> then.</p>



<a name="278427925"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Stuck%20on%20an%20outdated%20version%20of%20mathlib%3F/near/278427925" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jake Levinson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Stuck.20on.20an.20outdated.20version.20of.20mathlib.3F.html#278427925">(Apr 09 2022 at 20:02)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="bp">&gt;</span> <span class="n">leanproject</span> <span class="n">get</span><span class="bp">-</span><span class="n">m</span>
<span class="n">Looking</span> <span class="n">for</span> <span class="n">mathlib</span> <span class="n">oleans</span> <span class="n">for</span> <span class="mi">2</span><span class="n">a04ec03f1</span>
  <span class="n">locally...</span>
  <span class="n">Found</span> <span class="kn">local</span> <span class="n">mathlib</span> <span class="n">oleans</span>
<span class="n">Located</span> <span class="n">matching</span> <span class="n">cache</span>
<span class="n">Applying</span> <span class="n">cache</span>
  <span class="n">files</span> <span class="n">extracted</span><span class="o">:</span> <span class="mi">2340</span> <span class="o">[</span><span class="mi">00</span><span class="o">:</span><span class="mi">04</span><span class="o">,</span> <span class="mi">553</span><span class="bp">.</span><span class="mi">28</span><span class="bp">/</span><span class="n">s</span><span class="o">]</span>
</code></pre></div>
<p>Is this equivalent to <code>leanproject get-mathlib-cache</code>? I believe I ran this command yesterday too.</p>



<a name="278428311"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Stuck%20on%20an%20outdated%20version%20of%20mathlib%3F/near/278428311" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jake Levinson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Stuck.20on.20an.20outdated.20version.20of.20mathlib.3F.html#278428311">(Apr 09 2022 at 20:12)</a>:</h4>
<p>I'm still getting memory errors, e.g.</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">excessive</span> <span class="n">memory</span> <span class="n">consumption</span> <span class="n">detected</span> <span class="n">at</span> <span class="bp">'</span><span class="n">expression</span> <span class="n">traversal'</span> <span class="o">(</span><span class="n">potential</span> <span class="n">solution</span><span class="o">:</span> <span class="n">increase</span> <span class="n">memory</span> <span class="n">consumption</span> <span class="n">threshold</span><span class="o">)</span>
</code></pre></div>
<p>This is in a 90-line file importing</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">ring_theory.polynomial.homogeneous</span>
<span class="kn">import</span> <span class="n">field_theory.is_alg_closed.basic</span>
</code></pre></div>



<a name="278428320"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Stuck%20on%20an%20outdated%20version%20of%20mathlib%3F/near/278428320" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Stuck.20on.20an.20outdated.20version.20of.20mathlib.3F.html#278428320">(Apr 09 2022 at 20:13)</a>:</h4>
<p>A shot in the dark: just in case there's something unknown wrong with them, you could try clearing all the archive files from the <code>~/.mathlib</code> folder, then when you do <code>leanproject get-mathlib-cache</code> it'll download them again. (I believe <code>leanproject get-m</code> is the same and that it's just an abbreviation.)</p>



<a name="278428367"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Stuck%20on%20an%20outdated%20version%20of%20mathlib%3F/near/278428367" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jake Levinson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Stuck.20on.20an.20outdated.20version.20of.20mathlib.3F.html#278428367">(Apr 09 2022 at 20:14)</a>:</h4>
<p>Okay, I'll try it. How do I clear those files?</p>



<a name="278428378"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Stuck%20on%20an%20outdated%20version%20of%20mathlib%3F/near/278428378" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Stuck.20on.20an.20outdated.20version.20of.20mathlib.3F.html#278428378">(Apr 09 2022 at 20:14)</a>:</h4>
<p>Maybe, after <code>leanproject get-m</code>, also <code>leanproject build</code>?</p>



<a name="278428383"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Stuck%20on%20an%20outdated%20version%20of%20mathlib%3F/near/278428383" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Stuck.20on.20an.20outdated.20version.20of.20mathlib.3F.html#278428383">(Apr 09 2022 at 20:14)</a>:</h4>
<p>You can just delete them any way you might delete files</p>



<a name="278428403"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Stuck%20on%20an%20outdated%20version%20of%20mathlib%3F/near/278428403" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jake Levinson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Stuck.20on.20an.20outdated.20version.20of.20mathlib.3F.html#278428403">(Apr 09 2022 at 20:15)</a>:</h4>
<p>Ok. But which files are you referring to? <code>~/_target/deps/mathlib/archive/</code>?</p>



<a name="278428408"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Stuck%20on%20an%20outdated%20version%20of%20mathlib%3F/near/278428408" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Stuck.20on.20an.20outdated.20version.20of.20mathlib.3F.html#278428408">(Apr 09 2022 at 20:15)</a>:</h4>
<p>On Mac, you can go to the Finder, do Go -&gt; Location, type in ~/.mathlib, then you can see all these <code>.tar.xz</code> files</p>



<a name="278428451"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Stuck%20on%20an%20outdated%20version%20of%20mathlib%3F/near/278428451" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jake Levinson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Stuck.20on.20an.20outdated.20version.20of.20mathlib.3F.html#278428451">(Apr 09 2022 at 20:16)</a>:</h4>
<p>Oh literally from my home directory.</p>



<a name="278428489"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Stuck%20on%20an%20outdated%20version%20of%20mathlib%3F/near/278428489" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Stuck.20on.20an.20outdated.20version.20of.20mathlib.3F.html#278428489">(Apr 09 2022 at 20:17)</a>:</h4>
<p>(I doubt this will fix anything, but you'll save some disk space at least. I periodically clear it out for that reason.)</p>



<a name="278428496"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Stuck%20on%20an%20outdated%20version%20of%20mathlib%3F/near/278428496" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jake Levinson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Stuck.20on.20an.20outdated.20version.20of.20mathlib.3F.html#278428496">(Apr 09 2022 at 20:17)</a>:</h4>
<p><span class="user-mention silent" data-user-id="321459">Damiano Testa</span> <a href="#narrow/stream/113489-new-members/topic/Stuck.20on.20an.20outdated.20version.20of.20mathlib.3F/near/278428378">said</a>:</p>
<blockquote>
<p>Maybe, after <code>leanproject get-m</code>, also <code>leanproject build</code>?</p>
</blockquote>
<p>I had run this previously, I'll run it again once the the cache is remade. Though, is there a way to ask it to only compile mathlib, and not the files in my actual project? A bunch of them have scratchwork or incomplete stuff or whatever, so just running <code>leanproject build</code> produces a ton of error messages.</p>



<a name="278428546"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Stuck%20on%20an%20outdated%20version%20of%20mathlib%3F/near/278428546" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jake Levinson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Stuck.20on.20an.20outdated.20version.20of.20mathlib.3F.html#278428546">(Apr 09 2022 at 20:18)</a>:</h4>
<p>(All the files in my project are in a separate directory not along the <code>_target/deps/mathlib</code> path)</p>



<a name="278429152"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Stuck%20on%20an%20outdated%20version%20of%20mathlib%3F/near/278429152" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jake Levinson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Stuck.20on.20an.20outdated.20version.20of.20mathlib.3F.html#278429152">(Apr 09 2022 at 20:33)</a>:</h4>
<p>Okay, I have deleted those files and rerun <code>leanproject get-m</code>. Still getting memory errors, in this case it happened right away as soon as I made an edit to a line in the file I was working on.</p>



<a name="278429423"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Stuck%20on%20an%20outdated%20version%20of%20mathlib%3F/near/278429423" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Stuck.20on.20an.20outdated.20version.20of.20mathlib.3F.html#278429423">(Apr 09 2022 at 20:39)</a>:</h4>
<p>I assume you restarted the Lean process too?</p>



<a name="278429491"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Stuck%20on%20an%20outdated%20version%20of%20mathlib%3F/near/278429491" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Stuck.20on.20an.20outdated.20version.20of.20mathlib.3F.html#278429491">(Apr 09 2022 at 20:40)</a>:</h4>
<p>I wonder if there's a mismatch between the version of Lean you're using for your project and the version of Lean that produced the mathlib oleans. I have to admit I don't have much experience with using mathlib as a dependency -- usually I work within mathlib itself.</p>



<a name="278429494"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Stuck%20on%20an%20outdated%20version%20of%20mathlib%3F/near/278429494" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jake Levinson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Stuck.20on.20an.20outdated.20version.20of.20mathlib.3F.html#278429494">(Apr 09 2022 at 20:40)</a>:</h4>
<p>Is that separate from closing and reopening VS Code?</p>



<a name="278429505"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Stuck%20on%20an%20outdated%20version%20of%20mathlib%3F/near/278429505" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jake Levinson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Stuck.20on.20an.20outdated.20version.20of.20mathlib.3F.html#278429505">(Apr 09 2022 at 20:41)</a>:</h4>
<p>Hmm. I don't think I know the difference. What does it mean to work within mathlib itself?</p>



<a name="278429512"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Stuck%20on%20an%20outdated%20version%20of%20mathlib%3F/near/278429512" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Stuck.20on.20an.20outdated.20version.20of.20mathlib.3F.html#278429512">(Apr 09 2022 at 20:41)</a>:</h4>
<p>That's sufficient. You can also open the command palette and do "Lean: restart"</p>



<a name="278429647"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Stuck%20on%20an%20outdated%20version%20of%20mathlib%3F/near/278429647" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jake Levinson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Stuck.20on.20an.20outdated.20version.20of.20mathlib.3F.html#278429647">(Apr 09 2022 at 20:45)</a>:</h4>
<p>Oh wow, that is so much more convenient than reopening VS Code!</p>
<p>Anyway, memory errors continue. This time I managed to edit two lines before it crashed.</p>



<a name="278429787"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Stuck%20on%20an%20outdated%20version%20of%20mathlib%3F/near/278429787" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Stuck.20on.20an.20outdated.20version.20of.20mathlib.3F.html#278429787">(Apr 09 2022 at 20:48)</a>:</h4>
<p><span class="user-mention silent" data-user-id="391579">Jake Levinson</span> <a href="#narrow/stream/113489-new-members/topic/Stuck.20on.20an.20outdated.20version.20of.20mathlib.3F/near/278429505">said</a>:</p>
<blockquote>
<p>Hmm. I don't think I know the difference. What does it mean to work within mathlib itself?</p>
</blockquote>
<p>You can create a Lean project that, rather than depending on mathlib, <em>is</em> mathlib. This is mostly useful if you're planning on eventually submitting a PR.</p>
<p>For example, here's a command to create a project that's a local branch of mathlib called "kmill_add_frobozz"</p>
<div class="codehilite" data-code-language="Text only"><pre><span></span><code>leanproject get -b mathlib:kmill_add_frobozz
</code></pre></div>



<a name="278429895"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Stuck%20on%20an%20outdated%20version%20of%20mathlib%3F/near/278429895" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Stuck.20on.20an.20outdated.20version.20of.20mathlib.3F.html#278429895">(Apr 09 2022 at 20:51)</a>:</h4>
<p><span class="user-mention" data-user-id="391579">@Jake Levinson</span> What are the contents of your <code>leanpkg.toml</code> for your project?</p>



<a name="278430131"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Stuck%20on%20an%20outdated%20version%20of%20mathlib%3F/near/278430131" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jake Levinson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Stuck.20on.20an.20outdated.20version.20of.20mathlib.3F.html#278430131">(Apr 09 2022 at 20:55)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="bp">&gt;</span> <span class="n">cat</span> <span class="n">leanpkg.toml</span>
<span class="o">[</span><span class="n">package</span><span class="o">]</span>
<span class="n">name</span> <span class="bp">=</span> <span class="s2">"lean-topology"</span>
<span class="n">version</span> <span class="bp">=</span> <span class="s2">"0.1"</span>
<span class="n">lean_version</span> <span class="bp">=</span> <span class="s2">"leanprover-community/lean:3.42.1"</span>
<span class="n">path</span> <span class="bp">=</span> <span class="s2">"src"</span>

<span class="o">[</span><span class="n">dependencies</span><span class="o">]</span>
<span class="n">mathlib</span> <span class="bp">=</span> <span class="o">{</span><span class="n">git</span> <span class="bp">=</span> <span class="s2">"https://github.com/leanprover-community/mathlib"</span><span class="o">,</span> <span class="n">rev</span> <span class="bp">=</span> <span class="s2">"2a04ec03f17ad178e2e1e596973f7eb4c9838d1a"</span><span class="o">}</span>
</code></pre></div>



<a name="278430738"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Stuck%20on%20an%20outdated%20version%20of%20mathlib%3F/near/278430738" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Stuck.20on.20an.20outdated.20version.20of.20mathlib.3F.html#278430738">(Apr 09 2022 at 21:06)</a>:</h4>
<p>I just wanted to check that your version of mathlib matched up with your version of lean -- they do. (Revision <code>2a04ec...</code> is from yesterday and uses lean 3.42.1.) Sorry, I'm pretty much out of ideas for what could be the problem now. I have both Intel Mac and Linux installations, but no M1 Mac installation.</p>



<a name="278430761"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Stuck%20on%20an%20outdated%20version%20of%20mathlib%3F/near/278430761" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jake Levinson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Stuck.20on.20an.20outdated.20version.20of.20mathlib.3F.html#278430761">(Apr 09 2022 at 21:07)</a>:</h4>
<p>Maybe I should just make a new <code>leanproject</code> and copy my files over to it.</p>



<a name="278430824"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Stuck%20on%20an%20outdated%20version%20of%20mathlib%3F/near/278430824" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jake Levinson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Stuck.20on.20an.20outdated.20version.20of.20mathlib.3F.html#278430824">(Apr 09 2022 at 21:08)</a>:</h4>
<p>I <del>was born in</del> am a child of in the 90s, so "turning it off and turning it on again" is one of my preferred troubleshooting methods.</p>



<a name="278430832"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Stuck%20on%20an%20outdated%20version%20of%20mathlib%3F/near/278430832" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Stuck.20on.20an.20outdated.20version.20of.20mathlib.3F.html#278430832">(Apr 09 2022 at 21:08)</a>:</h4>
<p>If you have time to let it run, you could try <code>lean --make _target/deps/mathlib/src</code> to rebuild the oleans yourself</p>



<a name="278430861"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Stuck%20on%20an%20outdated%20version%20of%20mathlib%3F/near/278430861" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Stuck.20on.20an.20outdated.20version.20of.20mathlib.3F.html#278430861">(Apr 09 2022 at 21:09)</a>:</h4>
<p>You can also let it compile in parallel by giving it the <code>-j</code> option, like <code>lean -j4 --make _target/deps/mathlib/src</code> to use four threads.</p>



<a name="278430925"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Stuck%20on%20an%20outdated%20version%20of%20mathlib%3F/near/278430925" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jake Levinson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Stuck.20on.20an.20outdated.20version.20of.20mathlib.3F.html#278430925">(Apr 09 2022 at 21:10)</a>:</h4>
<p>Hmm, that crashes immediately... maybe this is the sign:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="bp">/.../</span><span class="n">lean</span><span class="bp">-</span><span class="n">topology</span><span class="bp">/</span><span class="n">_target</span><span class="bp">/</span><span class="n">deps</span><span class="bp">/</span><span class="n">mathlib</span><span class="bp">/</span><span class="n">src</span><span class="bp">/</span><span class="n">topology</span><span class="bp">/</span><span class="n">category</span><span class="bp">/</span><span class="n">CompHaus</span><span class="bp">/</span><span class="n">default.lean</span><span class="o">:</span><span class="mi">1</span><span class="o">:</span><span class="mi">0</span><span class="o">:</span> <span class="n">error</span><span class="o">:</span> <span class="n">ambiguous</span> <span class="kn">import</span><span class="o">,</span>
<span class="n">it</span> <span class="n">can</span> <span class="n">be</span> <span class="bp">'/.../</span><span class="n">lean</span><span class="bp">-</span><span class="n">topology</span><span class="bp">/</span><span class="n">_target</span><span class="bp">/</span><span class="n">deps</span><span class="bp">/</span><span class="n">mathlib</span><span class="bp">/</span><span class="n">src</span><span class="bp">/</span><span class="n">topology</span><span class="bp">/</span><span class="n">connected.lean'</span>
<span class="n">or</span> <span class="bp">'/.../</span><span class="n">lean</span><span class="bp">-</span><span class="n">topology</span><span class="bp">/</span><span class="n">src</span><span class="bp">/</span><span class="n">topology</span><span class="bp">/</span><span class="n">connected.lean'</span>
</code></pre></div>



<a name="278430948"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Stuck%20on%20an%20outdated%20version%20of%20mathlib%3F/near/278430948" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jake Levinson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Stuck.20on.20an.20outdated.20version.20of.20mathlib.3F.html#278430948">(Apr 09 2022 at 21:11)</a>:</h4>
<p>So maybe this is somehow my project (which has some homemade point set topology stuff) clashing with mathlib.</p>



<a name="278430956"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Stuck%20on%20an%20outdated%20version%20of%20mathlib%3F/near/278430956" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jake Levinson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Stuck.20on.20an.20outdated.20version.20of.20mathlib.3F.html#278430956">(Apr 09 2022 at 21:11)</a>:</h4>
<p>(It popped up a bunch of messages of that form</p>



<a name="278431031"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Stuck%20on%20an%20outdated%20version%20of%20mathlib%3F/near/278431031" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Stuck.20on.20an.20outdated.20version.20of.20mathlib.3F.html#278431031">(Apr 09 2022 at 21:13)</a>:</h4>
<p>That seems promising. Maybe put all your own stuff in a subfolder, like <code>jlevinson</code> or something like that?</p>



<a name="278431112"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Stuck%20on%20an%20outdated%20version%20of%20mathlib%3F/near/278431112" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jake Levinson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Stuck.20on.20an.20outdated.20version.20of.20mathlib.3F.html#278431112">(Apr 09 2022 at 21:14)</a>:</h4>
<p>That stuff is in its own folder already (<code>lean-topology/src/topology/</code> instead of <code>lean-topology/_target/deps/mathlib/...</code>). But I'm going to try renaming those files.</p>



<a name="278431188"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Stuck%20on%20an%20outdated%20version%20of%20mathlib%3F/near/278431188" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jake Levinson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Stuck.20on.20an.20outdated.20version.20of.20mathlib.3F.html#278431188">(Apr 09 2022 at 21:16)</a>:</h4>
<p>Oh, I guess renaming the topology folder to <code>jl-topology</code> or something would be fine too. It seems that I inadvertently had both the name and folder hierarchy the same as in mathlib.</p>



<a name="278431281"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Stuck%20on%20an%20outdated%20version%20of%20mathlib%3F/near/278431281" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Stuck.20on.20an.20outdated.20version.20of.20mathlib.3F.html#278431281">(Apr 09 2022 at 21:18)</a>:</h4>
<p>Yeah, the point is to rename it so the modules show up elsewhere in the module hierarchy. (Maybe do <code>jl_topology</code> instead, because I don't think you can have hyphens in module names.)</p>



<a name="278431284"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Stuck%20on%20an%20outdated%20version%20of%20mathlib%3F/near/278431284" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jake Levinson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Stuck.20on.20an.20outdated.20version.20of.20mathlib.3F.html#278431284">(Apr 09 2022 at 21:18)</a>:</h4>
<p>Okay, now <code>lean --make _target/deps/mathlib/src</code> runs and terminates with no output after a ten seconds or so.</p>



<a name="278431298"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Stuck%20on%20an%20outdated%20version%20of%20mathlib%3F/near/278431298" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Stuck.20on.20an.20outdated.20version.20of.20mathlib.3F.html#278431298">(Apr 09 2022 at 21:18)</a>:</h4>
<p><span aria-label="thumbs up" class="emoji emoji-1f44d" role="img" title="thumbs up">:thumbs_up:</span> That means all the oleans are up-to-date</p>



<a name="278431310"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Stuck%20on%20an%20outdated%20version%20of%20mathlib%3F/near/278431310" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jake Levinson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Stuck.20on.20an.20outdated.20version.20of.20mathlib.3F.html#278431310">(Apr 09 2022 at 21:19)</a>:</h4>
<p>OK, time to try editing VS code again.</p>



<a name="278431441"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Stuck%20on%20an%20outdated%20version%20of%20mathlib%3F/near/278431441" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jake Levinson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Stuck.20on.20an.20outdated.20version.20of.20mathlib.3F.html#278431441">(Apr 09 2022 at 21:21)</a>:</h4>
<p>No dice... crashed again after editing a few lines in a larger file.</p>



<a name="278431731"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Stuck%20on%20an%20outdated%20version%20of%20mathlib%3F/near/278431731" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Stuck.20on.20an.20outdated.20version.20of.20mathlib.3F.html#278431731">(Apr 09 2022 at 21:25)</a>:</h4>
<p>Maybe try <code>lean --make src</code> now?</p>



<a name="278432151"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Stuck%20on%20an%20outdated%20version%20of%20mathlib%3F/near/278432151" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jake Levinson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Stuck.20on.20an.20outdated.20version.20of.20mathlib.3F.html#278432151">(Apr 09 2022 at 21:35)</a>:</h4>
<p>That runs OK.</p>



<a name="278432477"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Stuck%20on%20an%20outdated%20version%20of%20mathlib%3F/near/278432477" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Stuck.20on.20an.20outdated.20version.20of.20mathlib.3F.html#278432477">(Apr 09 2022 at 21:43)</a>:</h4>
<p>Are you able to edit files now if you restart lean?</p>



<a name="278432622"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Stuck%20on%20an%20outdated%20version%20of%20mathlib%3F/near/278432622" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Stuck.20on.20an.20outdated.20version.20of.20mathlib.3F.html#278432622">(Apr 09 2022 at 21:47)</a>:</h4>
<p>This should all be working now. Have you got a lot of open files in VS Code? Close all but the one you're working on. Are you using a machine with &lt;= 8 gigs of ram?</p>



<a name="278432995"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Stuck%20on%20an%20outdated%20version%20of%20mathlib%3F/near/278432995" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jake Levinson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Stuck.20on.20an.20outdated.20version.20of.20mathlib.3F.html#278432995">(Apr 09 2022 at 21:56)</a>:</h4>
<p>So I have been able to edit without further crashes in a different file that only imports <code>data.set.basic</code> from mathlib, plus importing other files I've been working on in this project, totaling ~1000 lines of code, say. (This project actually has nothing to do with topology, I just kept reusing a leanproject I created a year ago.)</p>
<p>If I work in the 90-line file with</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">ring_theory.polynomial.homogeneous</span>
<span class="kn">import</span> <span class="n">field_theory.is_alg_closed.basic</span>
</code></pre></div>
<p>then it still seems to quickly crash when I make small changes.</p>



<a name="278433005"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Stuck%20on%20an%20outdated%20version%20of%20mathlib%3F/near/278433005" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jake Levinson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Stuck.20on.20an.20outdated.20version.20of.20mathlib.3F.html#278433005">(Apr 09 2022 at 21:56)</a>:</h4>
<p>For example -- I just switched over to that file and it crashed instantly upon opening. Whereas I just spent the last half-hour successfully editing the other file.</p>



<a name="278433068"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Stuck%20on%20an%20outdated%20version%20of%20mathlib%3F/near/278433068" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jake Levinson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Stuck.20on.20an.20outdated.20version.20of.20mathlib.3F.html#278433068">(Apr 09 2022 at 21:58)</a>:</h4>
<p>I'm on an M1 Macbook Pro with 16 gigs of ram. Prior to trying out this ring theory file, I've had no problem having nine files open at once, with hundreds of lines of code each, and frequently switching between them to work on different parts.</p>



<a name="278433160"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Stuck%20on%20an%20outdated%20version%20of%20mathlib%3F/near/278433160" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jake Levinson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Stuck.20on.20an.20outdated.20version.20of.20mathlib.3F.html#278433160">(Apr 09 2022 at 22:00)</a>:</h4>
<p>This error message seems very uninformative... I have no idea if it's an <em>actual</em> memory overload, or something else. I'm not even sure how to "increase the memory consumption threshold".</p>



<a name="278433169"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Stuck%20on%20an%20outdated%20version%20of%20mathlib%3F/near/278433169" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Stuck.20on.20an.20outdated.20version.20of.20mathlib.3F.html#278433169">(Apr 09 2022 at 22:00)</a>:</h4>
<p>have you restarted vscode? if you can send the file, I have the exact same computer and things are fine here, no crashes. those first two lines don't seem to crash my computer</p>



<a name="278433217"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Stuck%20on%20an%20outdated%20version%20of%20mathlib%3F/near/278433217" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Stuck.20on.20an.20outdated.20version.20of.20mathlib.3F.html#278433217">(Apr 09 2022 at 22:00)</a>:</h4>
<p>is this file you mention editing in the hierarchy to this 90-line file?</p>



<a name="278433425"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Stuck%20on%20an%20outdated%20version%20of%20mathlib%3F/near/278433425" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jake Levinson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Stuck.20on.20an.20outdated.20version.20of.20mathlib.3F.html#278433425">(Apr 09 2022 at 22:05)</a>:</h4>
<p>The folder hierarchy is like this:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">lean</span><span class="bp">-</span><span class="n">topology</span><span class="bp">/</span>
  <span class="n">polynomials_scratch.lean</span>  <span class="c1">-- 90-lines, imports ring theory</span>
  <span class="n">src</span><span class="bp">/</span>
    <span class="n">dir1</span><span class="bp">/</span> <span class="c1">-- contains various other older things I've written</span>
    <span class="n">current</span><span class="bp">/</span> <span class="c1">-- contains 9 files totaling 1000-1500 lines, mainly importing data.set.basic</span>
  <span class="n">_target</span><span class="bp">/</span> <span class="c1">-- leads to mathlib</span>
</code></pre></div>



<a name="278433493"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Stuck%20on%20an%20outdated%20version%20of%20mathlib%3F/near/278433493" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jake Levinson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Stuck.20on.20an.20outdated.20version.20of.20mathlib.3F.html#278433493">(Apr 09 2022 at 22:07)</a>:</h4>
<p>The polynomials file is (modulo small edits) posted here: <a href="#narrow/stream/217875-Is-there-code-for-X.3F/topic/Working.20with.20polynomial.20factorizations">https://leanprover.zulipchat.com/#narrow/stream/217875-Is-there-code-for-X.3F/topic/Working.20with.20polynomial.20factorizations</a></p>



<a name="278433499"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Stuck%20on%20an%20outdated%20version%20of%20mathlib%3F/near/278433499" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jake Levinson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Stuck.20on.20an.20outdated.20version.20of.20mathlib.3F.html#278433499">(Apr 09 2022 at 22:07)</a>:</h4>
<p>Here is the current version:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">tactic</span>
<span class="kn">import</span> <span class="n">ring_theory.polynomial.homogeneous</span>
<span class="kn">import</span> <span class="n">field_theory.is_alg_closed.basic</span>

<span class="kd">variables</span> <span class="o">{</span><span class="n">K</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">field</span> <span class="n">K</span><span class="o">]</span> <span class="o">[</span><span class="n">is_alg_closed</span> <span class="n">K</span><span class="o">]</span>

<span class="kd">lemma</span> <span class="n">mv_polynomial.is_homogeneous.factor</span>
  <span class="o">{</span><span class="n">σ</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">}</span> <span class="o">{</span><span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">mv_polynomial</span> <span class="n">σ</span> <span class="n">K</span><span class="o">}</span>
  <span class="o">{</span><span class="n">n</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">}</span> <span class="o">(</span><span class="n">hg</span> <span class="o">:</span> <span class="n">g.is_homogeneous</span> <span class="n">n</span><span class="o">)</span> <span class="o">(</span><span class="n">hfg</span> <span class="o">:</span> <span class="n">f</span> <span class="bp">∣</span> <span class="n">g</span><span class="o">)</span> <span class="o">:</span>
<span class="n">f.is_homogeneous</span> <span class="o">(</span><span class="n">f.total_degree</span><span class="o">)</span> <span class="o">:=</span> <span class="gr">sorry</span>
<span class="c1">-- proof: by Damiano's argument higher up the thread (look at minimum and maximum degree parts of f)</span>

<span class="kd">lemma</span> <span class="n">mv_polynomial.prime_of_linear</span> <span class="o">{</span><span class="n">σ</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">}</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">mv_polynomial</span> <span class="n">σ</span> <span class="n">K</span><span class="o">)</span>
  <span class="o">(</span><span class="n">f_ne_zero</span> <span class="o">:</span> <span class="n">f</span> <span class="bp">≠</span> <span class="mi">0</span><span class="o">)</span> <span class="o">(</span><span class="n">hf</span> <span class="o">:</span> <span class="n">f.is_homogeneous</span> <span class="mi">1</span><span class="o">)</span> <span class="o">:</span> <span class="n">prime</span> <span class="n">f</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">split</span><span class="o">,</span> <span class="n">exact</span> <span class="n">f_ne_zero</span><span class="o">,</span>
  <span class="n">split</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">rintro</span> <span class="o">⟨</span><span class="n">g</span><span class="o">,</span> <span class="n">hg</span><span class="o">⟩,</span>
    <span class="k">have</span> <span class="n">h1</span> <span class="o">:</span> <span class="mi">1</span> <span class="bp">=</span> <span class="o">(</span><span class="n">coe</span> <span class="n">g</span><span class="bp">⁻¹</span><span class="o">)</span> <span class="bp">*</span> <span class="n">f</span><span class="o">,</span>
      <span class="n">rw</span> <span class="o">[</span><span class="bp">←</span> <span class="n">hg</span><span class="o">,</span> <span class="bp">←</span> <span class="n">units.coe_mul</span><span class="o">],</span> <span class="n">simp</span><span class="o">,</span>
    <span class="k">have</span> <span class="n">h2</span> <span class="o">:=</span> <span class="n">mv_polynomial.is_homogeneous_one</span> <span class="n">_</span> <span class="n">K</span><span class="o">,</span>
    <span class="k">have</span> <span class="n">h3</span> <span class="o">:=</span> <span class="o">(</span><span class="n">h2.factor</span> <span class="o">⟨</span><span class="n">_</span><span class="o">,</span> <span class="n">h1</span><span class="o">⟩)</span><span class="bp">.</span><span class="n">mul</span> <span class="n">hf</span><span class="o">,</span>
    <span class="n">rw</span> <span class="n">h1</span> <span class="n">at</span> <span class="n">h2</span><span class="o">,</span>
    <span class="k">have</span> <span class="n">h4</span> <span class="o">:=</span> <span class="n">mv_polynomial.is_homogeneous.inj_right</span> <span class="n">h3</span> <span class="n">h2</span> <span class="n">_</span><span class="o">,</span>
    <span class="n">exact</span> <span class="n">nat.succ_ne_zero</span> <span class="n">_</span> <span class="n">h4</span><span class="o">,</span>
    <span class="n">rw</span> <span class="bp">←</span> <span class="n">h1</span><span class="o">,</span> <span class="n">exact</span> <span class="n">one_ne_zero</span><span class="o">,</span> <span class="o">},</span>

  <span class="gr">sorry</span><span class="o">,</span>
<span class="kd">end</span>
<span class="c1">-- proof: irreducibility (by degree counting) + UFD</span>

<span class="kd">lemma</span> <span class="n">mv_polynomial.has_linear_factor</span>
  <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">mv_polynomial</span> <span class="o">(</span><span class="n">fin</span> <span class="mi">2</span><span class="o">)</span> <span class="n">K</span><span class="o">)</span> <span class="o">{</span><span class="n">n</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">}</span> <span class="o">(</span><span class="n">hf</span> <span class="o">:</span> <span class="n">f.is_homogeneous</span> <span class="n">n</span><span class="o">)</span> <span class="o">:</span>
<span class="bp">∃</span> <span class="n">x</span> <span class="o">:</span> <span class="n">mv_polynomial</span> <span class="o">(</span><span class="n">fin</span> <span class="mi">2</span><span class="o">)</span> <span class="n">K</span><span class="o">,</span> <span class="n">x.is_homogeneous</span> <span class="mi">1</span> <span class="bp">∧</span> <span class="n">x</span> <span class="bp">∣</span> <span class="n">f</span> <span class="o">:=</span> <span class="gr">sorry</span>
<span class="c1">-- proof: possibly annoying since it involves dehomogenizing</span>

<span class="kd">example</span> <span class="o">{</span><span class="n">A</span> <span class="n">B</span> <span class="n">q</span> <span class="n">c</span> <span class="o">:</span> <span class="n">mv_polynomial</span> <span class="o">(</span><span class="n">fin</span> <span class="mi">2</span><span class="o">)</span> <span class="n">K</span><span class="o">}</span> <span class="o">(</span><span class="n">hA</span> <span class="o">:</span> <span class="n">A.is_homogeneous</span> <span class="mi">1</span><span class="o">)</span> <span class="o">(</span><span class="n">hB</span> <span class="o">:</span> <span class="n">B.is_homogeneous</span> <span class="mi">2</span><span class="o">)</span>
  <span class="o">(</span><span class="n">hq</span> <span class="o">:</span> <span class="n">q.is_homogeneous</span> <span class="mi">2</span><span class="o">)</span> <span class="o">(</span><span class="n">hc</span> <span class="o">:</span> <span class="n">c.is_homogeneous</span> <span class="mi">3</span><span class="o">)</span> <span class="o">(</span><span class="n">H</span> <span class="o">:</span> <span class="n">B</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">=</span> <span class="n">A</span> <span class="bp">*</span> <span class="n">c</span><span class="o">)</span>
  <span class="o">(</span><span class="n">q_ne_zero</span> <span class="o">:</span> <span class="n">q</span> <span class="bp">≠</span> <span class="mi">0</span><span class="o">)</span> <span class="o">(</span><span class="n">A_ne_zero</span> <span class="o">:</span> <span class="n">A</span> <span class="bp">≠</span> <span class="mi">0</span><span class="o">)</span> <span class="o">:</span>
  <span class="bp">∃</span> <span class="n">x</span> <span class="o">:</span> <span class="n">mv_polynomial</span> <span class="o">(</span><span class="n">fin</span> <span class="mi">2</span><span class="o">)</span> <span class="n">K</span><span class="o">,</span> <span class="n">x.is_homogeneous</span> <span class="mi">1</span> <span class="bp">∧</span> <span class="n">x</span> <span class="bp">∣</span> <span class="n">q</span> <span class="bp">∧</span> <span class="n">x</span> <span class="bp">∣</span> <span class="n">c</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">obtain</span> <span class="o">⟨</span><span class="n">x</span><span class="o">,</span> <span class="n">hx</span><span class="o">,</span> <span class="n">hxq</span><span class="o">⟩</span> <span class="o">:=</span> <span class="n">q.has_linear_factor</span> <span class="n">hq</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">x_ne_zero</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">≠</span> <span class="mi">0</span> <span class="o">:=</span> <span class="n">ne_zero_of_dvd_ne_zero</span> <span class="n">q_ne_zero</span> <span class="n">hxq</span><span class="o">,</span>

  <span class="n">by_cases</span> <span class="n">hxc</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">∣</span> <span class="n">c</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">exact</span> <span class="o">⟨</span><span class="n">x</span><span class="o">,</span> <span class="n">hx</span><span class="o">,</span> <span class="n">hxq</span><span class="o">,</span> <span class="n">hxc</span><span class="o">⟩,</span> <span class="o">},</span>

  <span class="k">have</span> <span class="n">hxA</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">∣</span> <span class="n">A</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">apply</span> <span class="o">((</span><span class="n">x.prime_of_linear</span> <span class="n">x_ne_zero</span> <span class="n">hx</span><span class="o">)</span><span class="bp">.</span><span class="n">dvd_or_dvd</span> <span class="n">_</span><span class="o">)</span><span class="bp">.</span><span class="n">resolve_left</span> <span class="n">hxc</span><span class="o">,</span>
    <span class="n">rw</span> <span class="o">[</span><span class="n">mul_comm</span><span class="o">,</span> <span class="bp">←</span> <span class="n">H</span><span class="o">],</span>
    <span class="n">exact</span> <span class="n">hxq.trans</span> <span class="o">(</span><span class="n">dvd_mul_left</span> <span class="n">_</span> <span class="n">_</span><span class="o">),</span> <span class="o">},</span>

  <span class="c1">-- pull out factors</span>
  <span class="n">obtain</span> <span class="o">⟨</span><span class="n">y</span><span class="o">,</span> <span class="n">hqxy</span><span class="o">⟩</span> <span class="o">:=</span> <span class="n">hxq</span><span class="o">,</span>
  <span class="n">obtain</span> <span class="o">⟨</span><span class="n">A'</span><span class="o">,</span> <span class="n">hAxA'</span><span class="o">⟩</span> <span class="o">:=</span> <span class="n">hxA</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">hA'</span> <span class="o">:</span> <span class="n">A'</span> <span class="bp">∣</span> <span class="n">A</span> <span class="o">:=</span> <span class="o">⟨</span><span class="n">x</span><span class="o">,</span> <span class="n">mul_comm</span> <span class="n">x</span> <span class="n">A'</span> <span class="bp">▸</span> <span class="n">hAxA'</span><span class="o">⟩,</span>
  <span class="k">have</span> <span class="n">A'_ne_zero</span> <span class="o">:</span> <span class="n">A'</span> <span class="bp">≠</span> <span class="mi">0</span> <span class="o">:=</span> <span class="n">ne_zero_of_dvd_ne_zero</span> <span class="n">A_ne_zero</span> <span class="n">hA'</span><span class="o">,</span>

  <span class="k">have</span> <span class="n">H'</span> <span class="o">:</span> <span class="n">B</span> <span class="bp">*</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">A'</span> <span class="bp">*</span> <span class="n">c</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">rw</span> <span class="o">[</span><span class="n">hAxA'</span><span class="o">,</span> <span class="n">hqxy</span><span class="o">,</span> <span class="o">(</span><span class="kd">by</span> <span class="n">ring</span> <span class="o">:</span> <span class="n">B</span> <span class="bp">*</span> <span class="o">(</span><span class="n">x</span> <span class="bp">*</span> <span class="n">y</span><span class="o">)</span> <span class="bp">=</span> <span class="n">x</span> <span class="bp">*</span> <span class="o">(</span><span class="n">B</span> <span class="bp">*</span> <span class="n">y</span><span class="o">)),</span> <span class="n">mul_assoc</span><span class="o">]</span> <span class="n">at</span> <span class="n">H</span><span class="o">,</span>
    <span class="n">apply</span> <span class="n">cancel_monoid_with_zero.mul_left_cancel_of_ne_zero</span> <span class="n">x_ne_zero</span> <span class="n">H</span><span class="o">,</span> <span class="o">},</span>

  <span class="c1">-- now collect final goals</span>

  <span class="k">have</span> <span class="n">hyq</span> <span class="o">:</span> <span class="n">y</span> <span class="bp">∣</span> <span class="n">q</span> <span class="o">:=</span> <span class="o">⟨</span><span class="n">x</span><span class="o">,</span> <span class="n">mul_comm</span> <span class="n">x</span> <span class="n">y</span> <span class="bp">▸</span> <span class="n">hqxy</span><span class="o">⟩,</span>

  <span class="k">have</span> <span class="n">hy</span> <span class="o">:</span> <span class="n">y.is_homogeneous</span> <span class="mi">1</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">convert</span> <span class="n">hq.factor</span> <span class="n">hyq</span><span class="o">,</span>
    <span class="n">apply</span> <span class="bp">@</span><span class="n">nat.add_left_cancel</span> <span class="mi">1</span><span class="o">,</span>
    <span class="n">apply</span> <span class="n">hq.inj_right</span> <span class="n">_</span> <span class="n">q_ne_zero</span><span class="o">,</span>
    <span class="n">exact</span> <span class="o">(</span><span class="n">hqxy.symm</span> <span class="bp">▸</span> <span class="n">hx.mul</span> <span class="o">(</span><span class="n">hq.factor</span> <span class="n">hyq</span><span class="o">)),</span> <span class="o">},</span>

  <span class="k">have</span> <span class="n">hA''</span> <span class="o">:</span> <span class="n">A'.is_homogeneous</span> <span class="mi">0</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">convert</span> <span class="n">hA.factor</span> <span class="n">hA'</span><span class="o">,</span>
    <span class="n">apply</span> <span class="bp">@</span><span class="n">nat.add_left_cancel</span> <span class="mi">1</span><span class="o">,</span>
    <span class="n">apply</span> <span class="n">hA.inj_right</span> <span class="n">_</span> <span class="n">A_ne_zero</span><span class="o">,</span>
    <span class="n">exact</span> <span class="n">hAxA'.symm</span> <span class="bp">▸</span> <span class="n">hx.mul</span> <span class="o">(</span><span class="n">hA.factor</span> <span class="n">hA'</span><span class="o">),</span> <span class="o">},</span>

  <span class="k">have</span> <span class="n">A'_inv</span> <span class="o">:</span> <span class="n">mv_polynomial</span> <span class="o">(</span><span class="n">fin</span> <span class="mi">2</span><span class="o">)</span> <span class="n">K</span> <span class="o">:=</span> <span class="gr">sorry</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">A'_mul</span> <span class="o">:</span> <span class="n">A'_inv</span> <span class="bp">*</span> <span class="n">A'</span> <span class="bp">=</span> <span class="mi">1</span> <span class="o">:=</span> <span class="gr">sorry</span><span class="o">,</span>
  <span class="c1">-- inverse of a nonzero constant?</span>

  <span class="k">have</span> <span class="n">hyc</span> <span class="o">:</span> <span class="n">y</span> <span class="bp">∣</span> <span class="n">c</span><span class="o">,</span>
  <span class="o">{</span> <span class="k">have</span> <span class="n">H''</span> <span class="o">:</span> <span class="n">c</span> <span class="bp">=</span> <span class="n">y</span> <span class="bp">*</span> <span class="o">(</span><span class="n">A'_inv</span> <span class="bp">*</span> <span class="n">B</span><span class="o">),</span>
    <span class="n">symmetry</span><span class="o">,</span>
    <span class="k">calc</span> <span class="n">y</span> <span class="bp">*</span> <span class="o">(</span><span class="n">A'_inv</span> <span class="bp">*</span> <span class="n">B</span><span class="o">)</span> <span class="bp">=</span> <span class="n">A'_inv</span> <span class="bp">*</span> <span class="o">(</span><span class="n">B</span> <span class="bp">*</span> <span class="n">y</span><span class="o">)</span>  <span class="o">:</span> <span class="kd">by</span> <span class="n">ring</span>
                      <span class="bp">...</span> <span class="bp">=</span> <span class="n">A'_inv</span> <span class="bp">*</span> <span class="o">(</span><span class="n">A'</span> <span class="bp">*</span> <span class="n">c</span><span class="o">)</span> <span class="o">:</span> <span class="kd">by</span> <span class="n">rw</span> <span class="n">H'</span>
                      <span class="bp">...</span> <span class="bp">=</span> <span class="o">(</span><span class="n">A'_inv</span> <span class="bp">*</span> <span class="n">A'</span><span class="o">)</span> <span class="bp">*</span> <span class="n">c</span> <span class="o">:</span> <span class="kd">by</span> <span class="n">ring</span>
                      <span class="bp">...</span> <span class="bp">=</span> <span class="mi">1</span> <span class="bp">*</span> <span class="n">c</span>             <span class="o">:</span> <span class="kd">by</span> <span class="n">rw</span> <span class="n">A'_mul</span>
                      <span class="bp">...</span> <span class="bp">=</span> <span class="n">c</span>                 <span class="o">:</span> <span class="kd">by</span> <span class="n">ring</span><span class="o">,</span>
    <span class="n">exact</span> <span class="o">⟨</span><span class="n">_</span><span class="o">,</span> <span class="n">H''</span><span class="o">⟩,</span> <span class="o">},</span>

  <span class="n">exact</span> <span class="o">⟨</span><span class="n">y</span><span class="o">,</span> <span class="n">hy</span><span class="o">,</span> <span class="n">hyq</span><span class="o">,</span> <span class="n">hyc</span><span class="o">⟩,</span>
<span class="kd">end</span>
</code></pre></div>



<a name="278433631"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Stuck%20on%20an%20outdated%20version%20of%20mathlib%3F/near/278433631" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Stuck.20on.20an.20outdated.20version.20of.20mathlib.3F.html#278433631">(Apr 09 2022 at 22:10)</a>:</h4>
<p>this is a bit excessive, but what happens if you <code>rm -rf _target</code> and then <code>leanproject get-m</code>?</p>



<a name="278433643"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Stuck%20on%20an%20outdated%20version%20of%20mathlib%3F/near/278433643" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jake Levinson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Stuck.20on.20an.20outdated.20version.20of.20mathlib.3F.html#278433643">(Apr 09 2022 at 22:11)</a>:</h4>
<p>I can reproduce the error at this point: I simply can't have both <code>polynomials_scratch.lean</code> and a file from the other directory open at the same time without causing a crash.</p>
<p>I <em>can</em> have <code>polynomials_scratch.lean</code> open on its own, and it is fairly unstable (crashes fairly frequently, seems to run a bit slowly).</p>
<p>And, I can work on my other files (all 9 files open at once, jumping around between them) with only occasional problems.</p>



<a name="278433653"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Stuck%20on%20an%20outdated%20version%20of%20mathlib%3F/near/278433653" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jake Levinson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Stuck.20on.20an.20outdated.20version.20of.20mathlib.3F.html#278433653">(Apr 09 2022 at 22:11)</a>:</h4>
<p><span class="user-mention silent" data-user-id="284160">Eric Rodriguez</span> <a href="#narrow/stream/113489-new-members/topic/Stuck.20on.20an.20outdated.20version.20of.20mathlib.3F/near/278433631">said</a>:</p>
<blockquote>
<p>this is a bit excessive, but what happens if you <code>rm -rf _target</code> and then <code>leanproject get-m</code>?</p>
</blockquote>
<p>Happy to try it. I imagine this will take a while to re-download and recompile?</p>



<a name="278433694"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Stuck%20on%20an%20outdated%20version%20of%20mathlib%3F/near/278433694" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Stuck.20on.20an.20outdated.20version.20of.20mathlib.3F.html#278433694">(Apr 09 2022 at 22:12)</a>:</h4>
<p>it's just a redownload, should be max 5 minutes unless your internet is glacial</p>



<a name="278433716"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Stuck%20on%20an%20outdated%20version%20of%20mathlib%3F/near/278433716" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Stuck.20on.20an.20outdated.20version.20of.20mathlib.3F.html#278433716">(Apr 09 2022 at 22:13)</a>:</h4>
<p>it's weird that that's the case, because this sort of issue you raise is usually when <code>polynomials_scratch</code> would import something being edited lower down in the hierarchy. in that case, lean would have to recompile everything in-between without using oleans (just keeping it in the memory) which is completely infeasible</p>



<a name="278433805"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Stuck%20on%20an%20outdated%20version%20of%20mathlib%3F/near/278433805" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jake Levinson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Stuck.20on.20an.20outdated.20version.20of.20mathlib.3F.html#278433805">(Apr 09 2022 at 22:14)</a>:</h4>
<p>Right, that makes sense. Certainly I've occasionally encountered that in the other project. But I never touch or edit mathlib files themselves.</p>



<a name="278433900"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Stuck%20on%20an%20outdated%20version%20of%20mathlib%3F/near/278433900" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jake Levinson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Stuck.20on.20an.20outdated.20version.20of.20mathlib.3F.html#278433900">(Apr 09 2022 at 22:17)</a>:</h4>
<p>OK finished re-downloading. I can have several files from my other project open with no problem.</p>



<a name="278433908"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Stuck%20on%20an%20outdated%20version%20of%20mathlib%3F/near/278433908" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jake Levinson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Stuck.20on.20an.20outdated.20version.20of.20mathlib.3F.html#278433908">(Apr 09 2022 at 22:17)</a>:</h4>
<p>... but if I open <code>polynomials_scratch</code>, instant crash.</p>



<a name="278434034"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Stuck%20on%20an%20outdated%20version%20of%20mathlib%3F/near/278434034" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Stuck.20on.20an.20outdated.20version.20of.20mathlib.3F.html#278434034">(Apr 09 2022 at 22:20)</a>:</h4>
<p>did you restart vscode as well? aa i've never seen this</p>



<a name="278434050"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Stuck%20on%20an%20outdated%20version%20of%20mathlib%3F/near/278434050" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jake Levinson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Stuck.20on.20an.20outdated.20version.20of.20mathlib.3F.html#278434050">(Apr 09 2022 at 22:22)</a>:</h4>
<p>Yes I did. Hmm, I have another file stub from when I tried to use <code>linear_algebra.finite_dimensional</code>, I'll see if that also causes problems. I wonder if my computer is doing something weird with mathlib.</p>



<a name="278434186"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Stuck%20on%20an%20outdated%20version%20of%20mathlib%3F/near/278434186" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jake Levinson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Stuck.20on.20an.20outdated.20version.20of.20mathlib.3F.html#278434186">(Apr 09 2022 at 22:25)</a>:</h4>
<p>Never mind, that file doesn't have much in it</p>



<a name="278434233"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Stuck%20on%20an%20outdated%20version%20of%20mathlib%3F/near/278434233" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Stuck.20on.20an.20outdated.20version.20of.20mathlib.3F.html#278434233">(Apr 09 2022 at 22:26)</a>:</h4>
<p>I think it's worth trying the new <code>leanproject</code> approach just to check if it's something weirdly specific</p>



<a name="278434236"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Stuck%20on%20an%20outdated%20version%20of%20mathlib%3F/near/278434236" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jake Levinson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Stuck.20on.20an.20outdated.20version.20of.20mathlib.3F.html#278434236">(Apr 09 2022 at 22:26)</a>:</h4>
<p>Yeah, good idea. OK.</p>



<a name="278434491"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Stuck%20on%20an%20outdated%20version%20of%20mathlib%3F/near/278434491" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jake Levinson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Stuck.20on.20an.20outdated.20version.20of.20mathlib.3F.html#278434491">(Apr 09 2022 at 22:33)</a>:</h4>
<p>No, the same problems seem to arise. Very strange. I wonder if this actually <em>is</em> caused by some memory consumption threshold?</p>



<a name="278434569"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Stuck%20on%20an%20outdated%20version%20of%20mathlib%3F/near/278434569" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jake Levinson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Stuck.20on.20an.20outdated.20version.20of.20mathlib.3F.html#278434569">(Apr 09 2022 at 22:35)</a>:</h4>
<p>I also just went to check if VS Code needed to be updated, but it looks up-to-date.</p>



<a name="278434573"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Stuck%20on%20an%20outdated%20version%20of%20mathlib%3F/near/278434573" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Stuck.20on.20an.20outdated.20version.20of.20mathlib.3F.html#278434573">(Apr 09 2022 at 22:35)</a>:</h4>
<p>Are you watching your RAM while going through these attempts?</p>



<a name="278434578"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Stuck%20on%20an%20outdated%20version%20of%20mathlib%3F/near/278434578" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Stuck.20on.20an.20outdated.20version.20of.20mathlib.3F.html#278434578">(Apr 09 2022 at 22:36)</a>:</h4>
<p>I mean, if it is you can up the RAM threshold in the VSCode settings:</p>



<a name="278434623"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Stuck%20on%20an%20outdated%20version%20of%20mathlib%3F/near/278434623" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Stuck.20on.20an.20outdated.20version.20of.20mathlib.3F.html#278434623">(Apr 09 2022 at 22:36)</a>:</h4>
<p><a href="/user_uploads/3121/6NGakPD12aO-FPzKveC9dGuS/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/3121/6NGakPD12aO-FPzKveC9dGuS/image.png" title="image.png"><img src="/user_uploads/3121/6NGakPD12aO-FPzKveC9dGuS/image.png"></a></div>



<a name="278434657"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Stuck%20on%20an%20outdated%20version%20of%20mathlib%3F/near/278434657" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jake Levinson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Stuck.20on.20an.20outdated.20version.20of.20mathlib.3F.html#278434657">(Apr 09 2022 at 22:37)</a>:</h4>
<p><span class="user-mention silent" data-user-id="451983">Arthur Paulino</span> <a href="#narrow/stream/113489-new-members/topic/Stuck.20on.20an.20outdated.20version.20of.20mathlib.3F/near/278434573">said</a>:</p>
<blockquote>
<p>Are you watching your RAM while going through these attempts?</p>
</blockquote>
<p>How can I do that?</p>



<a name="278434695"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Stuck%20on%20an%20outdated%20version%20of%20mathlib%3F/near/278434695" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Stuck.20on.20an.20outdated.20version.20of.20mathlib.3F.html#278434695">(Apr 09 2022 at 22:38)</a>:</h4>
<p>Activity Monitor</p>



<a name="278434779"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Stuck%20on%20an%20outdated%20version%20of%20mathlib%3F/near/278434779" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jake Levinson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Stuck.20on.20an.20outdated.20version.20of.20mathlib.3F.html#278434779">(Apr 09 2022 at 22:40)</a>:</h4>
<p>OK I increased the memory threshold from 4096 to 12288...</p>



<a name="278434793"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Stuck%20on%20an%20outdated%20version%20of%20mathlib%3F/near/278434793" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jake Levinson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Stuck.20on.20an.20outdated.20version.20of.20mathlib.3F.html#278434793">(Apr 09 2022 at 22:40)</a>:</h4>
<p>omg that seemed to fix it</p>



<a name="278434800"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Stuck%20on%20an%20outdated%20version%20of%20mathlib%3F/near/278434800" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jake Levinson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Stuck.20on.20an.20outdated.20version.20of.20mathlib.3F.html#278434800">(Apr 09 2022 at 22:41)</a>:</h4>
<p>Now I can edit both files!</p>



<a name="278434847"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Stuck%20on%20an%20outdated%20version%20of%20mathlib%3F/near/278434847" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jake Levinson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Stuck.20on.20an.20outdated.20version.20of.20mathlib.3F.html#278434847">(Apr 09 2022 at 22:42)</a>:</h4>
<p>Maybe I really was just running out of memory...? bizarre! Maybe I just had too many Google Chrome tabs open (I noticed that my system was already using a lot of the available memory)</p>



<a name="278434855"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Stuck%20on%20an%20outdated%20version%20of%20mathlib%3F/near/278434855" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Stuck.20on.20an.20outdated.20version.20of.20mathlib.3F.html#278434855">(Apr 09 2022 at 22:42)</a>:</h4>
<p><span class="user-mention" data-user-id="391579">@Jake Levinson</span> I am not a Mac user but I am certain there's an app that allows you to monitor your memory consumption</p>



<a name="278435093"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Stuck%20on%20an%20outdated%20version%20of%20mathlib%3F/near/278435093" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Stuck.20on.20an.20outdated.20version.20of.20mathlib.3F.html#278435093">(Apr 09 2022 at 22:49)</a>:</h4>
<p>oh awesome! now that it's fixed, I have some instructions for cross-compiling Lean to ARM64, if you want to mess with that:<a href="#narrow/stream/113489-new-members/topic/M1.20Macs.3A.20Installing.20the.20Lean.203.20toolchain/near/265390589">https://leanprover.zulipchat.com/#narrow/stream/113489-new-members/topic/M1.20Macs.3A.20Installing.20the.20Lean.203.20toolchain/near/265390589</a></p>



<a name="278435166"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Stuck%20on%20an%20outdated%20version%20of%20mathlib%3F/near/278435166" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jake Levinson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Stuck.20on.20an.20outdated.20version.20of.20mathlib.3F.html#278435166">(Apr 09 2022 at 22:51)</a>:</h4>
<p>Interesting. Yeah, some of this is possibly still running on Rosetta since that was the installation pathway before. Would this make things faster / more efficient?</p>



<a name="278435180"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Stuck%20on%20an%20outdated%20version%20of%20mathlib%3F/near/278435180" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Stuck.20on.20an.20outdated.20version.20of.20mathlib.3F.html#278435180">(Apr 09 2022 at 22:51)</a>:</h4>
<p>I haven't tried, this is actually why I'm curious, I pretty much always just update myself using this script</p>



<a name="278435222"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Stuck%20on%20an%20outdated%20version%20of%20mathlib%3F/near/278435222" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Stuck.20on.20an.20outdated.20version.20of.20mathlib.3F.html#278435222">(Apr 09 2022 at 22:52)</a>:</h4>
<p>not required, just a curiosity^^</p>



<a name="278435230"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Stuck%20on%20an%20outdated%20version%20of%20mathlib%3F/near/278435230" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Stuck.20on.20an.20outdated.20version.20of.20mathlib.3F.html#278435230">(Apr 09 2022 at 22:53)</a>:</h4>
<p>note that you need to edit this line in the middle of the script:</p>
<div class="codehilite" data-code-language="Bash"><pre><span></span><code><span class="c1"># Set this to a local clone of leanprover-community/lean (that you don't mind being messed with!)</span>
<span class="nb">cd</span> ~/repos/lean
</code></pre></div>



<a name="278461703"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Stuck%20on%20an%20outdated%20version%20of%20mathlib%3F/near/278461703" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Matias Heikkilä <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Stuck.20on.20an.20outdated.20version.20of.20mathlib.3F.html#278461703">(Apr 10 2022 at 10:58)</a>:</h4>
<p><span class="user-mention" data-user-id="451983">@Arthur Paulino</span> I think the standard profiler for OSX is "instruments". Source: <a href="https://stackoverflow.com/a/11445777">https://stackoverflow.com/a/11445777</a></p>
<p>possibly a useful future reference</p>



<a name="278464031"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Stuck%20on%20an%20outdated%20version%20of%20mathlib%3F/near/278464031" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Stuck.20on.20an.20outdated.20version.20of.20mathlib.3F.html#278464031">(Apr 10 2022 at 11:52)</a>:</h4>
<p>If you just want to know how much memory/cpu/power you're using generally, there's Activity Monitor.</p>



<a name="308663013"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Stuck%20on%20an%20outdated%20version%20of%20mathlib%3F/near/308663013" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Pedro Sánchez Terraf <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Stuck.20on.20an.20outdated.20version.20of.20mathlib.3F.html#308663013">(Nov 08 2022 at 19:53)</a>:</h4>
<p><span class="user-mention silent" data-user-id="284160">Eric Rodriguez</span> <a href="#narrow/stream/113489-new-members/topic/Stuck.20on.20an.20outdated.20version.20of.20mathlib.3F/near/278434034">said</a>:</p>
<blockquote>
<p>did you restart vscode as well? aa i've never seen this</p>
</blockquote>
<p>Not sure if this question belongs to this thread, but anyway:<br>
Is it possible to work with different mathlib versions on the same instance of vscode? </p>
<p>I just realized that if I open two lean files in different repos (with different mathlib versions), vscode uses the version in the <code>_target</code> dir of the first file.</p>
<p>Is it "restarting it" the only way to get the correct mathlib version loaded?</p>



<a name="308679694"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Stuck%20on%20an%20outdated%20version%20of%20mathlib%3F/near/308679694" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Stuck.20on.20an.20outdated.20version.20of.20mathlib.3F.html#308679694">(Nov 08 2022 at 21:50)</a>:</h4>
<p>If you open two vscode windows they the problem should go away</p>



<a name="308679906"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Stuck%20on%20an%20outdated%20version%20of%20mathlib%3F/near/308679906" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Stuck.20on.20an.20outdated.20version.20of.20mathlib.3F.html#308679906">(Nov 08 2022 at 21:52)</a>:</h4>
<p>I don't think the extension can handle workspaces with multiple lean versions right now. Even though it probably should be able to handle "multi-root" workspaces, it's barely worth investing more effort into niche lean 3 tooling like that when lean 4 is around the ever-nearing corner</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>