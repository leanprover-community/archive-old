---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/format_lean.20woes.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/format_lean.20woes.html">format_lean woes</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="178000917"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/format_lean%20woes/near/178000917" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Miguel Raz Guzmán Macedo <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/format_lean.20woes.html#178000917">(Oct 12 2019 at 18:31)</a>:</h4>
<p>Hey all, brand new fedora 30 install with all lean dependencies installed. I have a simple "hello world" lean script in <code>limits.lean</code> but don't know why I get this error (I supposed its a python2/3 mishap, but I haven't moved any configs there)</p>
<div class="codehilite"><pre><span></span>⋊&gt; ~/d/l/t/src on lean-3.4.2 ⨯ format_lean --inpath limits.lean --outdir build --lib-path /usr/lib/lean-mathlib/src
Traceback (most recent call last):
  File &quot;/home/mrg/deps/lean/format_lean/bin/format_lean&quot;, line 77, in &lt;module&gt;
    Fire(render_lean_file)
  File &quot;/home/mrg/.local/lib/python3.7/site-packages/fire/core.py&quot;, line 138, in Fire
    component_trace = _Fire(component, args, parsed_flag_args, context, name)
  File &quot;/home/mrg/.local/lib/python3.7/site-packages/fire/core.py&quot;, line 471, in _Fire
    target=component.__name__)
  File &quot;/home/mrg/.local/lib/python3.7/site-packages/fire/core.py&quot;, line 675, in _CallAndUpdateTrace
    component = fn(*varargs, **kwargs)
  File &quot;/home/mrg/deps/lean/format_lean/bin/format_lean&quot;, line 30, in render_lean_file
    lean_exec_path = Path(distutils.spawn.find_executable(&#39;lean&#39;))
AttributeError: module &#39;distutils&#39; has no attribute &#39;spawn&#39;
</pre></div>



<a name="178000958"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/format_lean%20woes/near/178000958" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Miguel Raz Guzmán Macedo <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/format_lean.20woes.html#178000958">(Oct 12 2019 at 18:32)</a>:</h4>
<p>Would appreciate any help, I barely know python.</p>



<a name="178000989"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/format_lean%20woes/near/178000989" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Miguel Raz Guzmán Macedo <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/format_lean.20woes.html#178000989">(Oct 12 2019 at 18:33)</a>:</h4>
<p>Also, is there an IPython / lean interaction guide?</p>



<a name="178001042"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/format_lean%20woes/near/178001042" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/format_lean.20woes.html#178001042">(Oct 12 2019 at 18:34)</a>:</h4>
<p>Could you post your Lean project? Maybe an archive of everything except <code>_target</code></p>



<a name="178001358"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/format_lean%20woes/near/178001358" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Miguel Raz Guzmán Macedo <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/format_lean.20woes.html#178001358">(Oct 12 2019 at 18:41)</a>:</h4>
<div class="codehilite"><pre><span></span>leanpkg.toml
[package]
name = &quot;test&quot;
version = &quot;0.1&quot;
lean_version = &quot;3.4.2&quot;
path = &quot;src&quot;

[dependencies]
mathlib = {git = &quot;https://github.com/leanprover-community/mathlib&quot;, rev = &quot;27515619bcd834006f2936b292021135496b4efb&quot;}
</pre></div>



<a name="178001402"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/format_lean%20woes/near/178001402" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Miguel Raz Guzmán Macedo <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/format_lean.20woes.html#178001402">(Oct 12 2019 at 18:42)</a>:</h4>
<div class="codehilite"><pre><span></span>leanpkg.path
builtin_path
path _target/deps/mathlib/src
path ./src
</pre></div>



<a name="178001485"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/format_lean%20woes/near/178001485" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/format_lean.20woes.html#178001485">(Oct 12 2019 at 18:45)</a>:</h4>
<p>What is <code>format_lean</code>?</p>



<a name="178001490"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/format_lean%20woes/near/178001490" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/format_lean.20woes.html#178001490">(Oct 12 2019 at 18:45)</a>:</h4>
<p>Oh, Patrick's thing!</p>



<a name="178001496"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/format_lean%20woes/near/178001496" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Miguel Raz Guzmán Macedo <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/format_lean.20woes.html#178001496">(Oct 12 2019 at 18:45)</a>:</h4>
<div class="codehilite"><pre><span></span>import topology.basic
import data.real.basic

#eval 1 + 1

#check topological_space

local attribute [instance, priority 0] classical.prop_decidable

#eval 1 + 1
/-
Our first goal is to define the set of upper bounds of a set of real numbers.
This is already defined in mathlib (in a more general context), but we repeat
it for the sake of exposition Right-click &quot;upper_bounds&quot; below to get offered
to jump to mathlib&#39;s version
-/
#check upper_bounds

/-- The set of upper bounds of a set of real numbers ℝ -/
def up_bounds (A : set ℝ) := { x : ℝ | ∀ a ∈ A, a ≤ x}

/-- Predicate `is_max a A` means `a` is a maximum of `A` -/
def is_max (a : ℝ) (A : set ℝ) := a ∈ A ∧ a ∈ up_bounds A

/-
In the above definition, the symbol `∧` means &quot;and&quot;. We also see the most
visible difference between set theoretic foundations and type theoretic ones
(used by almost all proof assistants). In set theory, everything is a set, and the
only relation you get from foundations are `=` and `∈`. In type theory, there is
a meta-theoretic relation of &quot;typing&quot;: `a : ℝ` reads &quot;`a` is a real number&quot; or,
more precisely, &quot;the type of `a` is `ℝ`&quot;. Here &quot;meta-theoretic&quot; means this is not a
statement you can prove or disprove inside the theory, it&#39;s a fact that is true or
not. Here we impose this fact, in other circumstances, it would be checked by the
Lean kernel.
By contrast, `a ∈ A` is a statement inside the theory. Here it&#39;s part of the
definition, in other circumstances it could be something proven inside Lean.
-/

/- For illustrative purposes, we now define an infix version of the above predicate.
It will allow us to wite `a is_a_max_of A`, which is closer to a sentence.
-/
</pre></div>



<a name="178001548"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/format_lean%20woes/near/178001548" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Miguel Raz Guzmán Macedo <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/format_lean.20woes.html#178001548">(Oct 12 2019 at 18:46)</a>:</h4>
<p>and then in the folder that containts <code>src/limits.lean</code> I do <br>
<code>~/d/l/t/src on lean-3.4.2 ⨯ format_lean --inpath limits.lean --outdir build --lib-path /usr/lib/lean-mathlib/src</code></p>



<a name="178001718"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/format_lean%20woes/near/178001718" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/format_lean.20woes.html#178001718">(Oct 12 2019 at 18:51)</a>:</h4>
<p>Can you try running <code>format_project</code> from the root of your project?</p>



<a name="178001771"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/format_lean%20woes/near/178001771" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Miguel Raz Guzmán Macedo <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/format_lean.20woes.html#178001771">(Oct 12 2019 at 18:52)</a>:</h4>
<p>first <code>format_project</code>, then <code>format_lean</code>?</p>
<p>It says it couldn't find a <code>format.toml</code> but would continue anyways.<br>
Then rendered <code>src/limits.lean</code></p>



<a name="178001836"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/format_lean%20woes/near/178001836" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/format_lean.20woes.html#178001836">(Oct 12 2019 at 18:54)</a>:</h4>
<p>There are two scripts. <code>format_lean</code> itself was meant to render individual Lean files, not necessarily inside a proper Lean project. But I never use it, and it may be broken. <code>format_project</code> renders a whole Lean project, and should work.</p>



<a name="178001843"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/format_lean%20woes/near/178001843" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Miguel Raz Guzmán Macedo <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/format_lean.20woes.html#178001843">(Oct 12 2019 at 18:54)</a>:</h4>
<p>OK, it produced an <code>html</code> folder</p>



<a name="178001904"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/format_lean%20woes/near/178001904" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Miguel Raz Guzmán Macedo <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/format_lean.20woes.html#178001904">(Oct 12 2019 at 18:56)</a>:</h4>
<p>OK, it produced a site, but the CSS was all bungled up - (text overlapping the tactic state, no lean code showing)</p>



<a name="178001915"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/format_lean%20woes/near/178001915" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Miguel Raz Guzmán Macedo <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/format_lean.20woes.html#178001915">(Oct 12 2019 at 18:57)</a>:</h4>
<p>I opened the <code>limits.html</code> file, which I guess is the correct one, but I may be wrong.</p>



<a name="178001921"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/format_lean%20woes/near/178001921" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/format_lean.20woes.html#178001921">(Oct 12 2019 at 18:57)</a>:</h4>
<p>Your Lean code doesn't use valid <code>format_lean</code> markup</p>



<a name="178001967"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/format_lean%20woes/near/178001967" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Miguel Raz Guzmán Macedo <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/format_lean.20woes.html#178001967">(Oct 12 2019 at 18:58)</a>:</h4>
<p>Ach so. Where can I find a description of the markup specification<br>
?</p>



<a name="178006576"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/format_lean%20woes/near/178006576" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/format_lean.20woes.html#178006576">(Oct 12 2019 at 21:08)</a>:</h4>
<p><span class="user-mention" data-user-id="243947">@Miguel Raz Guzmán Macedo</span> I fixed the bug you found, and created an example at <a href="https://leanprover-community.github.io/format_lean/" target="_blank" title="https://leanprover-community.github.io/format_lean/">https://leanprover-community.github.io/format_lean/</a>.</p>



<a name="178006591"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/format_lean%20woes/near/178006591" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/format_lean.20woes.html#178006591">(Oct 12 2019 at 21:09)</a>:</h4>
<p>I'll try to write a specification of what is currently supported, but it will be very short...</p>



<a name="178006601"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/format_lean%20woes/near/178006601" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/format_lean.20woes.html#178006601">(Oct 12 2019 at 21:09)</a>:</h4>
<p>I may do that tomorrow, but creating the above three web pages exhausted the time I could allocate to this today.</p>



<a name="178007049"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/format_lean%20woes/near/178007049" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/format_lean.20woes.html#178007049">(Oct 12 2019 at 21:21)</a>:</h4>
<p>Thanks Patrick. Very shortly I will be using format-lean again and I realised just the other day that I had essentially completely forgotten what the formatter could do and how to do it.</p>



<a name="178526948"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/format_lean%20woes/near/178526948" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Miguel Raz Guzmán Macedo <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/format_lean.20woes.html#178526948">(Oct 19 2019 at 03:41)</a>:</h4>
<blockquote>
<p><span class="user-mention silent" data-user-id="243947">Miguel Raz Guzmán Macedo</span> I fixed the bug you found, and created an example at <a href="https://leanprover-community.github.io/format_lean/" target="_blank" title="https://leanprover-community.github.io/format_lean/">https://leanprover-community.github.io/format_lean/</a>.</p>
</blockquote>
<p>I tried this again after pulling your changes.<br>
the example from your repo renders perfectly on the web browser, but I not get this error...</p>
<div class="codehilite"><pre><span></span>⋊&gt; ~/p/l/f/e/src on master ⨯ format_lean --inpath sandwich.lean --outdir build --lib-path /usr/lib/lean-mathlib/src
Traceback (most recent call last):
  File &quot;/home/mrg/deps/lean/format_lean/bin/format_lean&quot;, line 77, in &lt;module&gt;
    Fire(render_lean_file)
  File &quot;/home/mrg/.local/lib/python3.7/site-packages/fire/core.py&quot;, line 138, in Fire
    component_trace = _Fire(component, args, parsed_flag_args, context, name)
  File &quot;/home/mrg/.local/lib/python3.7/site-packages/fire/core.py&quot;, line 471, in _Fire
    target=component.__name__)
  File &quot;/home/mrg/.local/lib/python3.7/site-packages/fire/core.py&quot;, line 675, in _CallAndUpdateTrace
    component = fn(*varargs, **kwargs)
  File &quot;/home/mrg/deps/lean/format_lean/bin/format_lean&quot;, line 68, in render_lean_file
    lecture_reader.read_file(inpath)
  File &quot;/home/mrg/.local/lib/python3.7/site-packages/format_lean/line_reader.py&quot;, line 48, in read_file
    self.normal_line_handler(self, line)
  File &quot;/home/mrg/.local/lib/python3.7/site-packages/format_lean/objects.py&quot;, line 370, in normal_line
    file_reader.cur_line_nb, 1)
  File &quot;/home/mrg/.local/lib/python3.7/site-packages/format_lean/server.py&quot;, line 34, in info
    raise LeanError(ret)
format_lean.server.LeanError: {&#39;msgs&#39;: [{&#39;caption&#39;: &#39;&#39;, &#39;file_name&#39;: &#39;/usr/lib/lean-mathlib/src/data/set/basic.lean&#39;, &#39;pos_col&#39;: 71, &#39;pos_line&#39;: 368, &#39;severity&#39;: &#39;error&#39;, &#39;text&#39;: &#39;(deterministic) timeout&#39;}, {&#39;caption&#39;: &#39;&#39;, &#39;file_name&#39;: &#39;/usr/lib/lean-mathlib/src/data/set/basic.lean&#39;, &#39;pos_col&#39;: 3, &#39;pos_line&#39;: 369, &#39;severity&#39;: &#39;error&#39;, &#39;text&#39;: &#39;(deterministic) timeout&#39;}], &#39;response&#39;: &#39;all_messages&#39;}
</pre></div>



<a name="178527164"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/format_lean%20woes/near/178527164" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Miguel Raz Guzmán Macedo <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/format_lean.20woes.html#178527164">(Oct 19 2019 at 03:48)</a>:</h4>
<p>Also Patrick, it's beautiful!</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>