---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/SIGSEGV.2C.20coercion.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/SIGSEGV.2C.20coercion.html">SIGSEGV, coercion</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="202674667"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/SIGSEGV%2C%20coercion/near/202674667" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Danila Kurganov <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/SIGSEGV.2C.20coercion.html#202674667">(Jul 02 2020 at 11:12)</a>:</h4>
<p>the <code>ext</code> thing does clears a few things, I was wondering how it did <code>ext</code> to things that didn't look obviously equal</p>
<p>that's a neat trick I like it makes it more like python :),</p>



<a name="202674798"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/SIGSEGV%2C%20coercion/near/202674798" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Danila Kurganov <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/SIGSEGV.2C.20coercion.html#202674798">(Jul 02 2020 at 11:14)</a>:</h4>
<p>I did want to ask, when I run your code Mario, I get errors with <code>  rw [mul_div_cancel' _ a.nz],</code> as it can't finish the proof. Is that issue also on your system? I just want to make sure my simp is the same as yours</p>



<a name="202674824"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/SIGSEGV%2C%20coercion/near/202674824" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/SIGSEGV.2C.20coercion.html#202674824">(Jul 02 2020 at 11:14)</a>:</h4>
<p>what error</p>



<a name="202674848"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/SIGSEGV%2C%20coercion/near/202674848" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Danila Kurganov <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/SIGSEGV.2C.20coercion.html#202674848">(Jul 02 2020 at 11:14)</a>:</h4>
<p>"rewrite tactic failed, did not find instance of the pattern in the target expression<br>
  a.val * (?m_1 / a.val)"</p>
<p>the line is red for me on vscode</p>



<a name="202675006"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/SIGSEGV%2C%20coercion/near/202675006" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/SIGSEGV.2C.20coercion.html#202675006">(Jul 02 2020 at 11:16)</a>:</h4>
<p>and you copied the entire rest of the file?</p>



<a name="202675015"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/SIGSEGV%2C%20coercion/near/202675015" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/SIGSEGV.2C.20coercion.html#202675015">(Jul 02 2020 at 11:16)</a>:</h4>
<p>what is the state at the error</p>



<a name="202675054"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/SIGSEGV%2C%20coercion/near/202675054" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/SIGSEGV.2C.20coercion.html#202675054">(Jul 02 2020 at 11:17)</a>:</h4>
<p>the lemma <code>G1_inv_val</code> should have fired from the <code>simp</code> on the first line resulting in the goal <code>⊢ a.val * (4 / a.val) = 4</code></p>



<a name="202675055"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/SIGSEGV%2C%20coercion/near/202675055" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Danila Kurganov <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/SIGSEGV.2C.20coercion.html#202675055">(Jul 02 2020 at 11:17)</a>:</h4>
<p>yeah, that whole thing you sent over</p>
<div class="codehilite"><pre><span></span><code><span class="n">state</span><span class="o">:</span>
<span class="mi">2</span> <span class="n">goals</span>
<span class="n">a</span> <span class="o">:</span> <span class="n">G1</span>
<span class="err">⊢</span> <span class="err">↑</span><span class="n">a</span> <span class="bp">*</span> <span class="o">(</span><span class="mi">4</span> <span class="bp">/</span> <span class="err">↑</span><span class="n">a</span><span class="o">)</span> <span class="bp">=</span> <span class="mi">4</span>

<span class="n">a</span> <span class="o">:</span> <span class="n">G1</span>
<span class="err">⊢</span> <span class="n">ℚ</span>
</code></pre></div>



<a name="202675113"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/SIGSEGV%2C%20coercion/near/202675113" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Danila Kurganov <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/SIGSEGV.2C.20coercion.html#202675113">(Jul 02 2020 at 11:18)</a>:</h4>
<p>yeah I'm not sure why mine is using arrows</p>



<a name="202675119"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/SIGSEGV%2C%20coercion/near/202675119" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/SIGSEGV.2C.20coercion.html#202675119">(Jul 02 2020 at 11:18)</a>:</h4>
<p>aha, have we changed the simp normal form for subtype.val recently? <span class="user-mention" data-user-id="112680">@Johan Commelin</span> ?</p>



<a name="202675138"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/SIGSEGV%2C%20coercion/near/202675138" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/SIGSEGV.2C.20coercion.html#202675138">(Jul 02 2020 at 11:18)</a>:</h4>
<p>I'm not using a particularly up to date mathlib, it could be my fault</p>



<a name="202675249"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/SIGSEGV%2C%20coercion/near/202675249" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/SIGSEGV.2C.20coercion.html#202675249">(Jul 02 2020 at 11:20)</a>:</h4>
<p>ok, I get the same error as you after updating</p>



<a name="202675254"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/SIGSEGV%2C%20coercion/near/202675254" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Danila Kurganov <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/SIGSEGV.2C.20coercion.html#202675254">(Jul 02 2020 at 11:20)</a>:</h4>
<p>I'm on lean 3.16.5</p>



<a name="202675269"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/SIGSEGV%2C%20coercion/near/202675269" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/SIGSEGV.2C.20coercion.html#202675269">(Jul 02 2020 at 11:20)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib/issues/3204">#3204</a></p>



<a name="202675273"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/SIGSEGV%2C%20coercion/near/202675273" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Danila Kurganov <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/SIGSEGV.2C.20coercion.html#202675273">(Jul 02 2020 at 11:20)</a>:</h4>
<p>oh nice, ok it clears a few things</p>



<a name="202675289"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/SIGSEGV%2C%20coercion/near/202675289" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/SIGSEGV.2C.20coercion.html#202675289">(Jul 02 2020 at 11:21)</a>:</h4>
<p><code>subtype</code> now uses <code>coe</code> everywhere as SNF</p>



<a name="202675294"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/SIGSEGV%2C%20coercion/near/202675294" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/SIGSEGV.2C.20coercion.html#202675294">(Jul 02 2020 at 11:21)</a>:</h4>
<p>apparently this changed a few days ago</p>



<a name="202675314"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/SIGSEGV%2C%20coercion/near/202675314" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/SIGSEGV.2C.20coercion.html#202675314">(Jul 02 2020 at 11:21)</a>:</h4>
<p>Yup, thanks to Floris. Finally readable subtypes <span aria-label="grinning face with smiling eyes" class="emoji emoji-1f601" role="img" title="grinning face with smiling eyes">:grinning_face_with_smiling_eyes:</span></p>



<a name="202675594"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/SIGSEGV%2C%20coercion/near/202675594" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/SIGSEGV.2C.20coercion.html#202675594">(Jul 02 2020 at 11:25)</a>:</h4>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="n">data</span><span class="bp">.</span><span class="n">real</span><span class="bp">.</span><span class="n">basic</span>

<span class="kn">import</span> <span class="n">tactic</span><span class="bp">.</span><span class="n">interactive</span>

<span class="kn">open</span> <span class="n">nat</span>


<span class="c1">-- One way to define a subtype (G1) out of a type (ℚ)</span>
<span class="n">def</span> <span class="n">G1</span> <span class="o">:=</span> <span class="o">{</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℚ</span> <span class="bp">//</span> <span class="mi">0</span> <span class="bp">&lt;</span> <span class="n">x</span><span class="o">}</span>
<span class="c1">-- This instead is a &quot;set&quot;</span>
<span class="n">def</span> <span class="n">G2</span> <span class="o">:=</span> <span class="o">{</span> <span class="n">x</span> <span class="o">:</span> <span class="n">ℚ</span> <span class="bp">|</span> <span class="mi">0</span> <span class="bp">&lt;</span> <span class="n">x</span><span class="o">}</span>

<span class="kn">instance</span> <span class="o">:</span> <span class="n">has_coe</span> <span class="n">G1</span> <span class="n">ℚ</span> <span class="o">:=</span> <span class="bp">⟨</span><span class="n">subtype</span><span class="bp">.</span><span class="n">val</span><span class="bp">⟩</span>

<span class="kn">lemma</span> <span class="n">G1</span><span class="bp">.</span><span class="n">nz</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">G1</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">a</span><span class="o">:</span><span class="n">ℚ</span><span class="o">)</span> <span class="bp">≠</span> <span class="mi">0</span> <span class="o">:=</span> <span class="n">ne_of_gt</span> <span class="n">a</span><span class="bp">.</span><span class="mi">2</span>

<span class="bp">@</span><span class="o">[</span><span class="n">simp</span><span class="o">]</span> <span class="n">def</span> <span class="n">G1mul</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">G1</span><span class="o">)</span> <span class="o">:</span> <span class="n">G1</span> <span class="o">:=</span> <span class="bp">⟨</span> <span class="n">a</span> <span class="bp">*</span> <span class="o">(</span><span class="n">b</span> <span class="bp">/</span> <span class="mi">2</span><span class="o">),</span> <span class="n">mul_pos</span> <span class="n">a</span><span class="bp">.</span><span class="n">property</span> <span class="o">(</span><span class="n">half_pos</span> <span class="n">b</span><span class="bp">.</span><span class="n">property</span><span class="o">)</span> <span class="bp">⟩</span>
<span class="kn">instance</span> <span class="o">:</span> <span class="n">has_mul</span> <span class="n">G1</span> <span class="o">:=</span> <span class="bp">⟨</span> <span class="n">G1mul</span> <span class="bp">⟩</span> <span class="c1">-- now we have *</span>

<span class="bp">@</span><span class="o">[</span><span class="n">simp</span><span class="o">]</span> <span class="kn">theorem</span> <span class="n">G1_mul_val</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">G1</span><span class="o">)</span> <span class="o">:</span> <span class="o">((</span><span class="n">a</span> <span class="bp">*</span> <span class="n">b</span> <span class="o">:</span> <span class="n">G1</span><span class="o">)</span> <span class="o">:</span> <span class="n">ℚ</span><span class="o">)</span> <span class="bp">=</span> <span class="n">a</span> <span class="bp">*</span> <span class="o">(</span><span class="n">b</span> <span class="bp">/</span> <span class="mi">2</span><span class="o">)</span> <span class="o">:=</span> <span class="n">rfl</span>

<span class="c">/-</span><span class="cm">- ##Def of One --/</span>

<span class="bp">@</span><span class="o">[</span><span class="n">simp</span><span class="o">]</span> <span class="n">def</span> <span class="n">G1one</span> <span class="o">:</span> <span class="n">G1</span> <span class="o">:=</span> <span class="bp">⟨</span> <span class="mi">2</span><span class="o">,</span> <span class="n">two_pos</span><span class="bp">⟩</span>
<span class="kn">instance</span> <span class="o">:</span> <span class="n">has_one</span> <span class="n">G1</span> <span class="o">:=</span> <span class="bp">⟨</span> <span class="n">G1one</span> <span class="bp">⟩</span>

<span class="bp">@</span><span class="o">[</span><span class="n">simp</span><span class="o">]</span> <span class="kn">theorem</span> <span class="n">G1_one_val</span> <span class="o">:</span> <span class="o">((</span><span class="mi">1</span> <span class="o">:</span> <span class="n">G1</span><span class="o">)</span> <span class="o">:</span> <span class="n">ℚ</span><span class="o">)</span> <span class="bp">=</span> <span class="mi">2</span> <span class="o">:=</span> <span class="n">rfl</span>

<span class="c1">-- clearly follow other axioms since from field</span>

<span class="c">/-</span><span class="cm">- ##Def and Lemmas for Inverse --/</span>

<span class="kn">lemma</span> <span class="n">G1_val_pos</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">G1</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="mi">0</span><span class="o">:</span><span class="n">ℚ</span><span class="o">)</span> <span class="bp">&lt;</span> <span class="n">a</span><span class="bp">⁻¹</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">simpa</span> <span class="kn">using</span> <span class="n">a</span><span class="bp">.</span><span class="mi">2</span>

<span class="n">def</span> <span class="n">G1_inv</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">G1</span><span class="o">)</span> <span class="o">:</span> <span class="n">G1</span> <span class="o">:=</span> <span class="bp">⟨</span> <span class="mi">4</span> <span class="bp">/</span> <span class="n">a</span><span class="o">,</span> <span class="n">mul_pos</span> <span class="n">four_pos</span> <span class="o">(</span><span class="n">G1_val_pos</span> <span class="n">a</span><span class="o">)</span><span class="bp">⟩</span>
<span class="kn">instance</span> <span class="o">:</span> <span class="n">has_inv</span> <span class="n">G1</span> <span class="o">:=</span> <span class="bp">⟨</span> <span class="n">G1_inv</span> <span class="bp">⟩</span>

<span class="bp">@</span><span class="o">[</span><span class="n">simp</span><span class="o">]</span> <span class="kn">theorem</span> <span class="n">G1_inv_val</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">G1</span><span class="o">)</span> <span class="o">:</span> <span class="o">((</span><span class="n">a</span><span class="bp">⁻¹</span> <span class="o">:</span> <span class="n">G1</span><span class="o">)</span> <span class="o">:</span> <span class="n">ℚ</span><span class="o">)</span> <span class="bp">=</span> <span class="mi">4</span> <span class="bp">/</span> <span class="n">a</span> <span class="o">:=</span> <span class="n">rfl</span>


<span class="c1">-- what does extensionality mean in this context?</span>
<span class="c">/-</span><span class="cm">- ##Extensionality and Simplification Lemmas  --/</span>
<span class="bp">@</span><span class="o">[</span><span class="n">ext</span><span class="o">]</span> <span class="kn">lemma</span> <span class="n">ext</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">G1</span><span class="o">)</span> <span class="o">(</span><span class="n">hVal</span> <span class="o">:</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">ℚ</span><span class="o">)</span> <span class="bp">=</span> <span class="n">b</span><span class="o">),</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">b</span>
<span class="bp">|</span> <span class="bp">⟨</span><span class="n">x</span><span class="o">,</span><span class="n">y</span><span class="bp">⟩</span> <span class="bp">⟨</span><span class="n">w</span><span class="o">,</span> <span class="n">z</span><span class="bp">⟩</span> <span class="n">rfl</span> <span class="o">:=</span> <span class="n">rfl</span>

<span class="bp">@</span><span class="o">[</span><span class="n">simp</span><span class="o">]</span> <span class="kn">lemma</span> <span class="n">G1_val_mul_inv</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">G1</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">a</span> <span class="bp">*</span> <span class="o">(</span><span class="n">a</span><span class="bp">⁻¹</span> <span class="o">:</span> <span class="n">G1</span><span class="o">)</span> <span class="o">:</span> <span class="n">ℚ</span><span class="o">)</span> <span class="bp">=</span> <span class="mi">4</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">simp</span><span class="o">,</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">mul_div_cancel&#39;</span> <span class="bp">_</span> <span class="n">a</span><span class="bp">.</span><span class="n">nz</span><span class="o">],</span>
<span class="kn">end</span>



<span class="c">/-</span><span class="cm">- ##Group Axioms --/</span>
<span class="kn">lemma</span> <span class="n">G1mul_assoc</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">G1</span><span class="o">)</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">b</span> <span class="bp">*</span> <span class="n">c</span> <span class="bp">=</span> <span class="n">a</span> <span class="bp">*</span> <span class="o">(</span><span class="n">b</span> <span class="bp">*</span> <span class="n">c</span><span class="o">)</span> <span class="o">:=</span>
<span class="k">begin</span>
    <span class="n">ext</span><span class="o">,</span> <span class="n">simp</span><span class="o">,</span> <span class="n">ring</span><span class="o">,</span>
<span class="kn">end</span>

<span class="kn">lemma</span> <span class="n">G1one_mul</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">G1</span><span class="o">)</span> <span class="o">:</span> <span class="mi">1</span> <span class="bp">*</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">a</span> <span class="o">:=</span>
<span class="k">begin</span>
    <span class="n">ext</span><span class="o">,</span> <span class="n">simp</span><span class="o">,</span> <span class="n">ring</span><span class="o">,</span>
<span class="kn">end</span>

<span class="kn">lemma</span> <span class="n">G1mul_one</span> <span class="o">(</span> <span class="n">a</span> <span class="o">:</span> <span class="n">G1</span><span class="o">)</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">*</span> <span class="mi">1</span> <span class="bp">=</span> <span class="n">a</span> <span class="o">:=</span>
<span class="k">begin</span>
    <span class="n">ext</span><span class="o">,</span> <span class="n">simp</span><span class="o">,</span> <span class="n">ring</span><span class="o">,</span>
<span class="kn">end</span>

<span class="c1">-- example (a : ℚ) : 1 / 2 * a = a := by norm_num</span>

<span class="c1">-- DK : Below was &#39;G1mul_left_inv&#39; which I thought was a typo given the goal</span>
<span class="c1">-- DK : so I changed it to right, also further amending the Poof.</span>
<span class="kn">lemma</span> <span class="n">G1mul_left_inv</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">G1</span><span class="o">)</span> <span class="o">:</span> <span class="n">a</span><span class="bp">⁻¹</span> <span class="bp">*</span> <span class="n">a</span> <span class="bp">=</span> <span class="mi">1</span> <span class="o">:=</span>
<span class="k">begin</span>
    <span class="n">ext</span><span class="o">,</span> <span class="n">simp</span><span class="o">,</span> <span class="n">ring</span><span class="o">,</span>
    <span class="n">simp</span> <span class="o">[</span><span class="n">a</span><span class="bp">.</span><span class="n">nz</span><span class="o">],</span>
<span class="kn">end</span>


<span class="c">/-</span><span class="cm">- ##Poof G1 is a group  --/</span>
<span class="kn">instance</span> <span class="o">:</span> <span class="n">group</span> <span class="n">G1</span> <span class="o">:=</span> <span class="o">{</span>
    <span class="c1">-- mul</span>
    <span class="n">mul</span> <span class="o">:=</span> <span class="n">G1mul</span><span class="o">,</span>
    <span class="c1">-- mul_assoc</span>
    <span class="n">mul_assoc</span> <span class="o">:=</span> <span class="n">G1mul_assoc</span><span class="o">,</span>
    <span class="c1">-- one</span>
    <span class="n">one</span> <span class="o">:=</span> <span class="n">G1one</span><span class="o">,</span>
    <span class="c1">-- one_mul</span>
    <span class="n">one_mul</span> <span class="o">:=</span> <span class="n">G1one_mul</span><span class="o">,</span>
    <span class="c1">-- mul_one</span>
    <span class="n">mul_one</span> <span class="o">:=</span> <span class="n">G1mul_one</span><span class="o">,</span>
    <span class="c1">-- inv</span>
    <span class="n">inv</span> <span class="o">:=</span> <span class="n">G1_inv</span><span class="o">,</span>
    <span class="c1">-- mul_left_inv</span>
    <span class="n">mul_left_inv</span> <span class="o">:=</span> <span class="n">G1mul_left_inv</span><span class="o">,</span>
<span class="o">}</span>
</code></pre></div>



<a name="202676021"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/SIGSEGV%2C%20coercion/near/202676021" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Danila Kurganov <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/SIGSEGV.2C.20coercion.html#202676021">(Jul 02 2020 at 11:31)</a>:</h4>
<p>Okay so now we add the has_coe thing and any <code>a.val</code> to just the normal <code>a</code>...So sort of just 'factorised' out the .val from coercion</p>



<a name="202676083"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/SIGSEGV%2C%20coercion/near/202676083" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/SIGSEGV.2C.20coercion.html#202676083">(Jul 02 2020 at 11:32)</a>:</h4>
<p>the function is still there, you will see an up arrow when lean prints it back to you</p>



<a name="202676096"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/SIGSEGV%2C%20coercion/near/202676096" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/SIGSEGV.2C.20coercion.html#202676096">(Jul 02 2020 at 11:32)</a>:</h4>
<p>but lean knows to insert the function automatically now</p>



<a name="202676107"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/SIGSEGV%2C%20coercion/near/202676107" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/SIGSEGV.2C.20coercion.html#202676107">(Jul 02 2020 at 11:32)</a>:</h4>
<p>but you do need more type ascriptions to make it happen in the right places</p>



<a name="202676231"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/SIGSEGV%2C%20coercion/near/202676231" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Danila Kurganov <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/SIGSEGV.2C.20coercion.html#202676231">(Jul 02 2020 at 11:34)</a>:</h4>
<p>ok, I guess that's good</p>



<a name="202676264"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/SIGSEGV%2C%20coercion/near/202676264" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Danila Kurganov <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/SIGSEGV.2C.20coercion.html#202676264">(Jul 02 2020 at 11:35)</a>:</h4>
<p>thanks again</p>



<a name="202689811"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/SIGSEGV%2C%20coercion/near/202689811" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/SIGSEGV.2C.20coercion.html#202689811">(Jul 02 2020 at 13:44)</a>:</h4>
<p>(wrong thread)</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>