---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/Working.20with.20add_subgroup.2Eclosure.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20add_subgroup.2Eclosure.html">Working with add_subgroup.closure</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="202293124"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20add_subgroup.closure/near/202293124" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20add_subgroup.2Eclosure.html#202293124">(Jun 29 2020 at 10:33)</a>:</h4>
<p>I've a type defined as <code>def Gᵣ (r : ℕ) := add_subgroup.closure (Bᵣ r)</code></p>
<p>I have a function <code>smul (k : G₀) (b : Bᵣ r) : Bᵣ r</code>, and would like to derive from it a function <code>smul (k : G₀) (v : Gᵣ r) : Gᵣ r</code>.<br>
There seems to be an intuitive meaning of "deconstruct v to the elements of Bᵣ it was constructed from, apply smul to those elements, and then pick the result from Gᵣ".</p>
<p>I can't really work out how to deconstruct my closure to implement this.</p>



<a name="202293589"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20add_subgroup.closure/near/202293589" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20add_subgroup.2Eclosure.html#202293589">(Jun 29 2020 at 10:39)</a>:</h4>
<p>It's not meaningful in general.</p>



<a name="202293610"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20add_subgroup.closure/near/202293610" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20add_subgroup.2Eclosure.html#202293610">(Jun 29 2020 at 10:39)</a>:</h4>
<p>I think <a href="https://leanprover-community.github.io/mathlib_docs/find/add_subgroup.closure_induction">docs#add_subgroup.closure_induction</a> is in general what you would be looking for to deconstruct the elements.</p>



<a name="202293742"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20add_subgroup.closure/near/202293742" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20add_subgroup.2Eclosure.html#202293742">(Jun 29 2020 at 10:41)</a>:</h4>
<p>Is there an example of how to use closure_induction anywhere? Can it be used as a tactic?</p>



<a name="202293851"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20add_subgroup.closure/near/202293851" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20add_subgroup.2Eclosure.html#202293851">(Jun 29 2020 at 10:42)</a>:</h4>
<p>You can't use it to make a definition.</p>



<a name="202293862"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20add_subgroup.closure/near/202293862" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20add_subgroup.2Eclosure.html#202293862">(Jun 29 2020 at 10:42)</a>:</h4>
<p>Indeed, the return type <code>p</code> has to be a <code>Prop</code></p>



<a name="202293893"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20add_subgroup.closure/near/202293893" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20add_subgroup.2Eclosure.html#202293893">(Jun 29 2020 at 10:43)</a>:</h4>
<p>I think I can work with that</p>



<a name="202293905"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20add_subgroup.closure/near/202293905" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20add_subgroup.2Eclosure.html#202293905">(Jun 29 2020 at 10:43)</a>:</h4>
<p>Your intuitive explanation is not precise because there could be more than one way to do the deconstruction.</p>



<a name="202293924"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20add_subgroup.closure/near/202293924" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20add_subgroup.2Eclosure.html#202293924">(Jun 29 2020 at 10:43)</a>:</h4>
<p>Presumably, you know some reason why this is actually not possible or not a problem.</p>



<a name="202293929"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20add_subgroup.closure/near/202293929" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20add_subgroup.2Eclosure.html#202293929">(Jun 29 2020 at 10:44)</a>:</h4>
<p>In my case all the deconstructions are equivalent</p>



<a name="202294008"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20add_subgroup.closure/near/202294008" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20add_subgroup.2Eclosure.html#202294008">(Jun 29 2020 at 10:44)</a>:</h4>
<p>Aha, then your <code>p x</code> would be something like <code>x ∈ G\_r</code></p>



<a name="202294033"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20add_subgroup.closure/near/202294033" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20add_subgroup.2Eclosure.html#202294033">(Jun 29 2020 at 10:45)</a>:</h4>
<p>Indeed</p>



<a name="202294266"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20add_subgroup.closure/near/202294266" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20add_subgroup.2Eclosure.html#202294266">(Jun 29 2020 at 10:48)</a>:</h4>
<p><span class="user-mention silent" data-user-id="310045">Eric Wieser</span> <a href="#narrow/stream/113489-new-members/topic/Working.20with.20add_subgroup.2Eclosure/near/202293742">said</a>:</p>
<blockquote>
<p>Is there an example of how to use closure_induction anywhere? Can it be used as a tactic?</p>
</blockquote>
<p>To use it in a tactic proof, with an assumption <code>hx : x ∈ G\_r</code>, you can write <code>apply add_subgroup.closure_induction hx</code>, and you would get goals corresponding to the possible destructurings of elements of a closure</p>



<a name="202294491"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20add_subgroup.closure/near/202294491" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20add_subgroup.2Eclosure.html#202294491">(Jun 29 2020 at 10:51)</a>:</h4>
<p>I think I'm getting lost in stale lean annotations in vs-code... Is there any way to clear all old errors after killing the lean server?</p>



<a name="202294589"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20add_subgroup.closure/near/202294589" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20add_subgroup.2Eclosure.html#202294589">(Jun 29 2020 at 10:53)</a>:</h4>
<p>Oh I think I misunderstood your problem.</p>



<a name="202294626"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20add_subgroup.closure/near/202294626" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20add_subgroup.2Eclosure.html#202294626">(Jun 29 2020 at 10:53)</a>:</h4>
<p>Your naming and syntax is a bit weird. Normally we write <code>r ∈ Gᵣ</code>, etc.</p>



<a name="202294700"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20add_subgroup.closure/near/202294700" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20add_subgroup.2Eclosure.html#202294700">(Jun 29 2020 at 10:54)</a>:</h4>
<p>You'd write that instead of what?</p>



<a name="202294732"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20add_subgroup.closure/near/202294732" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20add_subgroup.2Eclosure.html#202294732">(Jun 29 2020 at 10:54)</a>:</h4>
<p><code>Gᵣ r</code></p>



<a name="202294750"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20add_subgroup.closure/near/202294750" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20add_subgroup.2Eclosure.html#202294750">(Jun 29 2020 at 10:55)</a>:</h4>
<p>As a type?</p>



<a name="202294770"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20add_subgroup.closure/near/202294770" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20add_subgroup.2Eclosure.html#202294770">(Jun 29 2020 at 10:55)</a>:</h4>
<p>Oh I don't even know. What is <code>add_subgroup.closure</code>? A bundled subgroup?</p>



<a name="202294801"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20add_subgroup.closure/near/202294801" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20add_subgroup.2Eclosure.html#202294801">(Jun 29 2020 at 10:55)</a>:</h4>
<p>The closure of all elements produced under addition of the set <code>(Br r)</code></p>



<a name="202294808"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20add_subgroup.closure/near/202294808" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20add_subgroup.2Eclosure.html#202294808">(Jun 29 2020 at 10:55)</a>:</h4>
<p>I mean what is the Lean type.</p>



<a name="202294857"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20add_subgroup.closure/near/202294857" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20add_subgroup.2Eclosure.html#202294857">(Jun 29 2020 at 10:56)</a>:</h4>
<p>The lean type of what?</p>



<a name="202294862"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20add_subgroup.closure/near/202294862" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20add_subgroup.2Eclosure.html#202294862">(Jun 29 2020 at 10:56)</a>:</h4>
<p><span class="user-mention" data-user-id="110032">@Reid Barton</span> yes, it's bundled (<code>is_add_subgroup</code> is the unbundled class)</p>



<a name="202294866"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20add_subgroup.closure/near/202294866" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20add_subgroup.2Eclosure.html#202294866">(Jun 29 2020 at 10:56)</a>:</h4>
<p>What's the missing type annotation on <code>Gᵣ</code>.</p>



<a name="202294880"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20add_subgroup.closure/near/202294880" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20add_subgroup.2Eclosure.html#202294880">(Jun 29 2020 at 10:56)</a>:</h4>
<p><code>Gᵣ : ℕ → add_subgroup G</code></p>



<a name="202294896"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20add_subgroup.closure/near/202294896" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20add_subgroup.2Eclosure.html#202294896">(Jun 29 2020 at 10:56)</a>:</h4>
<p>The <code>r</code> here is really just a distraction, since it's unchanged through all the types</p>



<a name="202294941"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20add_subgroup.closure/near/202294941" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20add_subgroup.2Eclosure.html#202294941">(Jun 29 2020 at 10:57)</a>:</h4>
<p>Okay, then I still don't understand how you could use closure_induction</p>



<a name="202295024"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20add_subgroup.closure/near/202295024" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20add_subgroup.2Eclosure.html#202295024">(Jun 29 2020 at 10:59)</a>:</h4>
<p>I think I see the path forward, but I'm getting bitten by aliases for the same thing</p>



<a name="202295034"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20add_subgroup.closure/near/202295034" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20add_subgroup.2Eclosure.html#202295034">(Jun 29 2020 at 10:59)</a>:</h4>
<p>IUIC, <code>v : Gr r</code> is interpreted as <code>v : coe_sort (Gr r)</code>, i.e. <code>v : {v : G // v ∈ Gr r}</code>. So we're using syntax sugar for <code>subtype</code></p>



<a name="202295059"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20add_subgroup.closure/near/202295059" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20add_subgroup.2Eclosure.html#202295059">(Jun 29 2020 at 10:59)</a>:</h4>
<p>If I have <code>def Bᵣ (r : ℕ) := set_of (is_rblade r)</code>, is it better to write lemmas in terms of <code>is_rblade r b</code> or <code>b \in Bᵣ r</code>?</p>



<a name="202295139"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20add_subgroup.closure/near/202295139" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20add_subgroup.2Eclosure.html#202295139">(Jun 29 2020 at 11:00)</a>:</h4>
<p>Because lean doesn't seem to be very helpful when it comes to accepting the former where it expects the latter</p>



<a name="202295170"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20add_subgroup.closure/near/202295170" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20add_subgroup.2Eclosure.html#202295170">(Jun 29 2020 at 11:01)</a>:</h4>
<p>I expect <code>is_rblade</code>, unless you want to do set operations with them</p>



<a name="202295310"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20add_subgroup.closure/near/202295310" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20add_subgroup.2Eclosure.html#202295310">(Jun 29 2020 at 11:02)</a>:</h4>
<p>If you hide it behind definition <code>Br</code>, many tactics will not recognize that it's defined in terms of <code>is_rblade</code> until you <code>unfold Br</code></p>



<a name="202295617"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20add_subgroup.closure/near/202295617" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20add_subgroup.2Eclosure.html#202295617">(Jun 29 2020 at 11:06)</a>:</h4>
<p>If you really want to write <code>Bᵣ</code> and not have to unfold it, you can also use a notation instead of a <code>def</code>:</p>
<div class="codehilite"><pre><span></span><code><span class="kn">notation</span> <span class="bp">`</span><span class="n">B</span><span class="err">ᵣ</span><span class="bp">`</span> <span class="n">r</span> <span class="o">:=</span> <span class="n">set_of</span> <span class="o">(</span><span class="n">is_rblade</span> <span class="n">r</span><span class="o">)</span>
</code></pre></div>


<p>Notations are processed before tactics, so they don't confuse the tactics.</p>



<a name="202295646"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20add_subgroup.closure/near/202295646" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20add_subgroup.2Eclosure.html#202295646">(Jun 29 2020 at 11:06)</a>:</h4>
<p>Would it be better to eliminate <code>is_rblade</code>, and inline the defintion into <code>B_r</code>?</p>



<a name="202295668"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20add_subgroup.closure/near/202295668" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20add_subgroup.2Eclosure.html#202295668">(Jun 29 2020 at 11:07)</a>:</h4>
<p>With regards to the original question, I'm guessing the formalization is not optimal.</p>



<a name="202295745"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20add_subgroup.closure/near/202295745" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20add_subgroup.2Eclosure.html#202295745">(Jun 29 2020 at 11:08)</a>:</h4>
<p>There is a mathematical issue here, namely you have to check that whatever relations the elements of <code>B_r</code> satisfy as a subgroup of (something??) are preserved by <code>smul</code>. Since <code>smul</code> takes values again in <code>B_r</code> I'm guessing this is not so trivial to check.</p>



<a name="202295898"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20add_subgroup.closure/near/202295898" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20add_subgroup.2Eclosure.html#202295898">(Jun 29 2020 at 11:10)</a>:</h4>
<p>I'm stuck on the trivial goal:</p>
<div class="codehilite"><pre><span></span><code><span class="n">h1</span> <span class="o">:</span> <span class="n">is_rblade</span> <span class="n">r</span> <span class="o">(</span><span class="err">⇑</span><span class="n">fₛ</span> <span class="n">k</span> <span class="bp">*</span> <span class="n">x</span><span class="o">)</span>
<span class="err">⊢</span> <span class="err">⇑</span><span class="n">fₛ</span> <span class="n">k</span> <span class="bp">*</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">geometric_algebra</span><span class="bp">.</span><span class="n">is_rblade</span> <span class="n">r</span>
</code></pre></div>



<a name="202295938"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20add_subgroup.closure/near/202295938" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20add_subgroup.2Eclosure.html#202295938">(Jun 29 2020 at 11:11)</a>:</h4>
<p>if it's trivial, then <code>exact h1</code></p>



<a name="202295963"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20add_subgroup.closure/near/202295963" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20add_subgroup.2Eclosure.html#202295963">(Jun 29 2020 at 11:11)</a>:</h4>
<p>It can't convert between the types</p>



<a name="202296013"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20add_subgroup.closure/near/202296013" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20add_subgroup.2Eclosure.html#202296013">(Jun 29 2020 at 11:12)</a>:</h4>
<p>Can I unfold <code>∈ </code> somehow?</p>



<a name="202296014"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20add_subgroup.closure/near/202296014" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20add_subgroup.2Eclosure.html#202296014">(Jun 29 2020 at 11:12)</a>:</h4>
<p>I'm suspicious about the fact that one is displayed with <code>geometric_algebra.</code> and the other is not.</p>



<a name="202296021"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20add_subgroup.closure/near/202296021" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20add_subgroup.2Eclosure.html#202296021">(Jun 29 2020 at 11:12)</a>:</h4>
<p>I am too</p>



<a name="202296022"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20add_subgroup.closure/near/202296022" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20add_subgroup.2Eclosure.html#202296022">(Jun 29 2020 at 11:12)</a>:</h4>
<p>This is not your issue.</p>



<a name="202296058"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20add_subgroup.closure/near/202296058" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20add_subgroup.2Eclosure.html#202296058">(Jun 29 2020 at 11:12)</a>:</h4>
<p>Well, I guess it could be your issue (maybe the type is something else?) but it seems unlikely</p>



<a name="202296087"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20add_subgroup.closure/near/202296087" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20add_subgroup.2Eclosure.html#202296087">(Jun 29 2020 at 11:13)</a>:</h4>
<p><code>apply set.mem_def.mpr</code> does the trick, according to <code>suggest</code> (before the expected <code>exact h1</code>)</p>



<a name="202296098"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20add_subgroup.closure/near/202296098" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20add_subgroup.2Eclosure.html#202296098">(Jun 29 2020 at 11:13)</a>:</h4>
<p>But I have no idea what that means</p>



<a name="202296114"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20add_subgroup.closure/near/202296114" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20add_subgroup.2Eclosure.html#202296114">(Jun 29 2020 at 11:13)</a>:</h4>
<p>Also, what is the error message!</p>



<a name="202296120"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20add_subgroup.closure/near/202296120" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20add_subgroup.2Eclosure.html#202296120">(Jun 29 2020 at 11:13)</a>:</h4>
<p>Those are helpful.</p>



<a name="202296195"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20add_subgroup.closure/near/202296195" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20add_subgroup.2Eclosure.html#202296195">(Jun 29 2020 at 11:14)</a>:</h4>
<div class="codehilite"><pre><span></span><code><span class="n">invalid</span> <span class="n">type</span> <span class="n">ascription</span><span class="o">,</span> <span class="n">term</span> <span class="n">has</span> <span class="n">type</span>
  <span class="n">is_rblade</span> <span class="n">r</span> <span class="o">(</span><span class="err">⇑</span><span class="n">fₛ</span> <span class="n">k</span> <span class="bp">*</span> <span class="n">x</span><span class="o">)</span>
<span class="n">but</span> <span class="n">is</span> <span class="n">expected</span> <span class="n">to</span> <span class="k">have</span> <span class="n">type</span>
  <span class="err">⇑</span><span class="n">fₛ</span> <span class="n">k</span> <span class="bp">*</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">geometric_algebra</span><span class="bp">.</span><span class="n">is_rblade</span> <span class="n">r</span>
</code></pre></div>


<p>if I skip the <code>mem_def</code> thing</p>



<a name="202296252"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20add_subgroup.closure/near/202296252" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20add_subgroup.2Eclosure.html#202296252">(Jun 29 2020 at 11:15)</a>:</h4>
<p>Ah, <code>rw set.mem_def</code> seems more idiomatic</p>



<a name="202296291"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20add_subgroup.closure/near/202296291" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20add_subgroup.2Eclosure.html#202296291">(Jun 29 2020 at 11:15)</a>:</h4>
<p><code>set.mem_def</code> is basically by rfl, so none of this makes sense</p>



<a name="202296390"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20add_subgroup.closure/near/202296390" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20add_subgroup.2Eclosure.html#202296390">(Jun 29 2020 at 11:17)</a>:</h4>
<p>Well, I can tell you that without it,  I get that error. The snippet causing the trouble is:</p>
<div class="codehilite"><pre><span></span><code>      <span class="k">have</span> <span class="n">h1</span> <span class="o">:</span> <span class="n">is_rblade</span> <span class="n">r</span> <span class="o">((</span><span class="n">fₛ</span> <span class="n">k</span> <span class="o">:</span> <span class="n">G</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span><span class="o">)</span> <span class="o">:=</span> <span class="n">sorry</span><span class="o">,</span>
      <span class="k">have</span> <span class="n">h2</span> <span class="o">:</span> <span class="o">((</span><span class="n">fₛ</span> <span class="n">k</span> <span class="o">:</span> <span class="n">G</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span><span class="o">)</span> <span class="err">∈</span> <span class="n">B</span><span class="err">ᵣ</span> <span class="n">r</span> <span class="o">:=</span> <span class="k">begin</span>
        <span class="n">rw</span> <span class="n">set</span><span class="bp">.</span><span class="n">mem_def</span><span class="o">,</span>
        <span class="n">exact</span> <span class="n">h1</span><span class="o">,</span>
      <span class="kn">end</span><span class="o">,</span>
</code></pre></div>



<a name="202296412"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20add_subgroup.closure/near/202296412" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20add_subgroup.2Eclosure.html#202296412">(Jun 29 2020 at 11:17)</a>:</h4>
<p>Hmm, this seems impossible.</p>



<a name="202296414"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20add_subgroup.closure/near/202296414" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20add_subgroup.2Eclosure.html#202296414">(Jun 29 2020 at 11:17)</a>:</h4>
<p><del>Except, now that I try again I don't...</del></p>



<a name="202296437"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20add_subgroup.closure/near/202296437" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20add_subgroup.2Eclosure.html#202296437">(Jun 29 2020 at 11:17)</a>:</h4>
<p>(deleted)</p>



<a name="202296534"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20add_subgroup.closure/near/202296534" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20add_subgroup.2Eclosure.html#202296534">(Jun 29 2020 at 11:19)</a>:</h4>
<p>Jumped to conclusions, my lean server is running quite slowly</p>



<a name="202296550"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20add_subgroup.closure/near/202296550" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20add_subgroup.2Eclosure.html#202296550">(Jun 29 2020 at 11:19)</a>:</h4>
<p>I can confirm that removing <code>rw set.mem_def</code> _does_ cause it to give the type error above</p>



<a name="202296916"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20add_subgroup.closure/near/202296916" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20add_subgroup.2Eclosure.html#202296916">(Jun 29 2020 at 11:24)</a>:</h4>
<p>I guess this is barely possible if the type of <code>h1</code> secretly contains some metavariables, <em>and</em> Lean somehow fails to hit upon the obvious idea of unfolding the definition of <code>∈</code>, but it still seems implausible.</p>



<a name="202297071"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20add_subgroup.closure/near/202297071" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20add_subgroup.2Eclosure.html#202297071">(Jun 29 2020 at 11:27)</a>:</h4>
<p>Maybe this is more likely with this "forward reasoning" style. (Whatever you put as a proof of <code>h1</code>, you could just put for <code>h2</code> directly.)</p>



<a name="202297150"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Working%20with%20add_subgroup.closure/near/202297150" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Working.20with.20add_subgroup.2Eclosure.html#202297150">(Jun 29 2020 at 11:28)</a>:</h4>
<p>Yeah, I was able to simplify it all by doing basically that, and then set.mem_def wasn't needed</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>