---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/Getting.20prod_mk_mem_set_prod_eq.20to.20work.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Getting.20prod_mk_mem_set_prod_eq.20to.20work.html">Getting prod_mk_mem_set_prod_eq to work</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="270129283"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Getting%20prod_mk_mem_set_prod_eq%20to%20work/near/270129283" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Andrew Lubrino <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Getting.20prod_mk_mem_set_prod_eq.20to.20work.html#270129283">(Feb 01 2022 at 00:14)</a>:</h4>
<p>I know I've been asking a lot about Cartesian products, but I've been having some trouble and want to ask one more. I have the below code:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code>  <span class="kd">variables</span> <span class="o">{</span><span class="n">U</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">}</span>
  <span class="kd">variables</span> <span class="n">A</span> <span class="n">B</span> <span class="n">C</span> <span class="o">:</span> <span class="n">set</span> <span class="n">U</span>

  <span class="kd">example</span> <span class="o">:</span> <span class="n">A</span> <span class="bp">×ˢ</span> <span class="o">(</span><span class="n">B</span> <span class="bp">∩</span> <span class="n">C</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="n">A</span> <span class="bp">×ˢ</span> <span class="n">B</span><span class="o">)</span> <span class="bp">∩</span> <span class="o">(</span><span class="n">A</span> <span class="bp">×ˢ</span> <span class="n">C</span><span class="o">)</span> <span class="o">:=</span>
  <span class="k">assume</span> <span class="n">x</span> <span class="o">:</span> <span class="n">U</span><span class="o">,</span>
  <span class="k">assume</span> <span class="n">y</span> <span class="o">:</span> <span class="n">U</span><span class="o">,</span>
  <span class="k">assume</span> <span class="n">h₁</span> <span class="o">:</span> <span class="o">(</span><span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">)</span> <span class="bp">∈</span> <span class="n">A</span> <span class="bp">×ˢ</span> <span class="o">(</span><span class="n">B</span> <span class="bp">∩</span> <span class="n">C</span><span class="o">),</span>
  <span class="k">have</span> <span class="n">h₂</span> <span class="o">:</span> <span class="o">(</span><span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">)</span> <span class="bp">∈</span> <span class="n">A</span> <span class="bp">×ˢ</span> <span class="n">B</span> <span class="bp">∩</span> <span class="n">C</span> <span class="bp">=</span> <span class="o">(</span><span class="n">x</span> <span class="bp">∈</span> <span class="n">A</span> <span class="bp">∧</span> <span class="n">y</span> <span class="bp">∈</span> <span class="n">B</span> <span class="bp">∩</span> <span class="n">C</span><span class="o">),</span> <span class="k">from</span> <span class="n">prod_mk_mem_set_prod_eq</span>
</code></pre></div>
<p>In my line starting with <code>have h2</code>, I'm getting an error: <code>failed to synthesize type class instance</code>. Does anyone have an idea about how I can fix this?</p>



<a name="270129477"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Getting%20prod_mk_mem_set_prod_eq%20to%20work/near/270129477" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Getting.20prod_mk_mem_set_prod_eq.20to.20work.html#270129477">(Feb 01 2022 at 00:15)</a>:</h4>
<p>what are your <code>import</code>s?</p>



<a name="270129594"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Getting%20prod_mk_mem_set_prod_eq%20to%20work/near/270129594" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Andrew Lubrino <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Getting.20prod_mk_mem_set_prod_eq.20to.20work.html#270129594">(Feb 01 2022 at 00:17)</a>:</h4>
<p>only <code>open set</code></p>



<a name="270129610"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Getting%20prod_mk_mem_set_prod_eq%20to%20work/near/270129610" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Getting.20prod_mk_mem_set_prod_eq.20to.20work.html#270129610">(Feb 01 2022 at 00:17)</a>:</h4>
<p>you may need the brackets around the <code>B ∩ C</code> on the <code>have</code> in the last line</p>



<a name="270129670"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Getting%20prod_mk_mem_set_prod_eq%20to%20work/near/270129670" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Andrew Lubrino <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Getting.20prod_mk_mem_set_prod_eq.20to.20work.html#270129670">(Feb 01 2022 at 00:17)</a>:</h4>
<p>wow, clutch. Thanks!</p>



<a name="270138806"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Getting%20prod_mk_mem_set_prod_eq%20to%20work/near/270138806" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Andrew Lubrino <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Getting.20prod_mk_mem_set_prod_eq.20to.20work.html#270138806">(Feb 01 2022 at 01:53)</a>:</h4>
<p>Okay, I wrote up a proof in Lean about the equality of Cartesian products, but I'm having getting it to compile. I proved both sides of the equality, but I'm now getting errors when I try to finish off the proof with <code>eq_of_subset_of_subset</code>.  What command should I use to prove the equality of Cartesian products?</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code>  <span class="kd">example</span> <span class="o">:</span> <span class="n">A</span> <span class="bp">×ˢ</span> <span class="o">(</span><span class="n">B</span> <span class="bp">∩</span> <span class="n">C</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="n">A</span> <span class="bp">×ˢ</span> <span class="n">B</span><span class="o">)</span> <span class="bp">∩</span> <span class="o">(</span><span class="n">A</span> <span class="bp">×ˢ</span> <span class="n">C</span><span class="o">)</span> <span class="o">:=</span>
    <span class="n">eq_of_subset_of_subset</span>
    <span class="o">(</span><span class="k">assume</span> <span class="n">x</span> <span class="o">:</span> <span class="n">U</span><span class="o">,</span>
    <span class="k">assume</span> <span class="n">y</span> <span class="o">:</span> <span class="n">U</span><span class="o">,</span>
    <span class="k">assume</span> <span class="n">h₁</span> <span class="o">:</span> <span class="o">(</span><span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">)</span> <span class="bp">∈</span> <span class="n">A</span> <span class="bp">×ˢ</span> <span class="o">(</span><span class="n">B</span> <span class="bp">∩</span> <span class="n">C</span><span class="o">),</span>
    <span class="k">have</span> <span class="n">h₂</span> <span class="o">:</span> <span class="o">(</span><span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">)</span> <span class="bp">∈</span> <span class="n">A</span> <span class="bp">×ˢ</span> <span class="o">(</span><span class="n">B</span> <span class="bp">∩</span> <span class="n">C</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="n">x</span> <span class="bp">∈</span> <span class="n">A</span> <span class="bp">∧</span> <span class="n">y</span> <span class="bp">∈</span> <span class="n">B</span> <span class="bp">∩</span> <span class="n">C</span><span class="o">),</span> <span class="k">from</span> <span class="n">prod_mk_mem_set_prod_eq</span><span class="o">,</span>
    <span class="k">have</span> <span class="n">h₃</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">∈</span> <span class="n">A</span> <span class="bp">∧</span> <span class="n">y</span> <span class="bp">∈</span> <span class="n">B</span> <span class="bp">∩</span> <span class="n">C</span><span class="o">,</span> <span class="k">from</span> <span class="n">eq.subst</span> <span class="n">h₂</span> <span class="n">h₁</span><span class="o">,</span>
    <span class="k">have</span> <span class="n">h₄</span> <span class="o">:</span> <span class="o">(</span><span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">)</span> <span class="bp">∈</span> <span class="n">A</span> <span class="bp">×ˢ</span> <span class="n">B</span><span class="o">,</span> <span class="k">from</span>
      <span class="o">(</span><span class="k">have</span> <span class="n">h₅</span> <span class="o">:</span> <span class="n">y</span> <span class="bp">∈</span> <span class="n">B</span><span class="o">,</span> <span class="k">from</span> <span class="o">(</span><span class="n">h₃.right</span><span class="o">)</span><span class="bp">.</span><span class="n">left</span><span class="o">,</span>
      <span class="k">show</span> <span class="o">(</span><span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">)</span> <span class="bp">∈</span> <span class="n">A</span> <span class="bp">×ˢ</span> <span class="n">B</span><span class="o">,</span> <span class="k">from</span> <span class="n">mk_mem_prod</span> <span class="o">(</span><span class="n">h₃.left</span><span class="o">)</span> <span class="n">h₅</span><span class="o">),</span>
    <span class="k">have</span> <span class="n">h₅</span> <span class="o">:</span> <span class="o">(</span><span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">)</span> <span class="bp">∈</span> <span class="n">A</span> <span class="bp">×ˢ</span> <span class="n">C</span><span class="o">,</span> <span class="k">from</span>
      <span class="o">(</span><span class="k">have</span> <span class="n">h₆</span> <span class="o">:</span> <span class="n">y</span> <span class="bp">∈</span> <span class="n">C</span><span class="o">,</span> <span class="k">from</span> <span class="o">(</span><span class="n">h₃.right</span><span class="o">)</span><span class="bp">.</span><span class="n">right</span><span class="o">,</span>
      <span class="k">show</span> <span class="o">(</span><span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">)</span> <span class="bp">∈</span> <span class="n">A</span> <span class="bp">×ˢ</span> <span class="n">C</span><span class="o">,</span> <span class="k">from</span> <span class="n">mk_mem_prod</span> <span class="o">(</span><span class="n">h₃.left</span><span class="o">)</span> <span class="n">h₆</span><span class="o">),</span>
    <span class="k">show</span> <span class="o">(</span><span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">)</span> <span class="bp">∈</span> <span class="o">(</span><span class="n">A</span> <span class="bp">×ˢ</span> <span class="n">B</span><span class="o">)</span> <span class="bp">∩</span> <span class="o">(</span><span class="n">A</span> <span class="bp">×ˢ</span> <span class="n">C</span><span class="o">),</span> <span class="k">from</span> <span class="n">and.intro</span> <span class="n">h₄</span> <span class="n">h₅</span><span class="o">)</span>
    <span class="o">(</span><span class="k">assume</span> <span class="n">x</span> <span class="o">:</span> <span class="n">U</span><span class="o">,</span>
    <span class="k">assume</span> <span class="n">y</span> <span class="o">:</span> <span class="n">U</span><span class="o">,</span>
    <span class="k">assume</span> <span class="n">h₁</span> <span class="o">:</span> <span class="o">(</span><span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">)</span> <span class="bp">∈</span> <span class="o">(</span><span class="n">A</span> <span class="bp">×ˢ</span> <span class="n">B</span><span class="o">)</span> <span class="bp">∩</span> <span class="o">(</span><span class="n">A</span> <span class="bp">×ˢ</span> <span class="n">C</span><span class="o">),</span>
    <span class="k">have</span> <span class="n">h₂</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">∈</span> <span class="n">A</span> <span class="bp">∧</span> <span class="n">y</span> <span class="bp">∈</span> <span class="o">(</span><span class="n">B</span> <span class="bp">∩</span> <span class="n">C</span><span class="o">),</span> <span class="k">from</span>
      <span class="o">(</span><span class="k">have</span> <span class="n">h₃</span> <span class="o">:</span> <span class="o">(</span><span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">)</span> <span class="bp">∈</span> <span class="o">(</span><span class="n">A</span> <span class="bp">×ˢ</span> <span class="n">B</span><span class="o">),</span> <span class="k">from</span> <span class="n">h₁.left</span><span class="o">,</span>
      <span class="k">have</span> <span class="n">h₄</span> <span class="o">:</span> <span class="o">(</span><span class="n">x</span> <span class="o">,</span> <span class="n">y</span><span class="o">)</span> <span class="bp">∈</span> <span class="n">A</span> <span class="bp">×ˢ</span> <span class="n">B</span> <span class="bp">=</span> <span class="o">(</span><span class="n">x</span> <span class="bp">∈</span> <span class="n">A</span> <span class="bp">∧</span> <span class="n">y</span> <span class="bp">∈</span> <span class="n">B</span><span class="o">),</span> <span class="k">from</span> <span class="n">prod_mk_mem_set_prod_eq</span><span class="o">,</span>
      <span class="k">have</span> <span class="n">h₅</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">∈</span> <span class="n">A</span> <span class="bp">∧</span> <span class="n">y</span> <span class="bp">∈</span> <span class="n">B</span><span class="o">,</span> <span class="k">from</span> <span class="n">eq.subst</span> <span class="n">h₄</span> <span class="n">h₃</span><span class="o">,</span>
      <span class="k">have</span> <span class="n">h₆</span> <span class="o">:</span> <span class="o">(</span><span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">)</span> <span class="bp">∈</span> <span class="o">(</span><span class="n">A</span> <span class="bp">×ˢ</span> <span class="n">C</span><span class="o">),</span> <span class="k">from</span> <span class="n">h₁.right</span><span class="o">,</span>
      <span class="k">have</span> <span class="n">h₇</span> <span class="o">:</span> <span class="o">(</span><span class="n">x</span> <span class="o">,</span> <span class="n">y</span><span class="o">)</span> <span class="bp">∈</span> <span class="n">A</span> <span class="bp">×ˢ</span> <span class="n">C</span> <span class="bp">=</span> <span class="o">(</span><span class="n">x</span> <span class="bp">∈</span> <span class="n">A</span> <span class="bp">∧</span> <span class="n">y</span> <span class="bp">∈</span> <span class="n">C</span><span class="o">),</span> <span class="k">from</span> <span class="n">prod_mk_mem_set_prod_eq</span><span class="o">,</span>
      <span class="k">have</span> <span class="n">h₈</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">∈</span> <span class="n">A</span> <span class="bp">∧</span> <span class="n">y</span> <span class="bp">∈</span> <span class="n">C</span><span class="o">,</span> <span class="k">from</span> <span class="n">eq.subst</span> <span class="n">h₇</span> <span class="n">h₆</span><span class="o">,</span>
      <span class="k">show</span> <span class="n">x</span> <span class="bp">∈</span> <span class="n">A</span> <span class="bp">∧</span> <span class="n">y</span> <span class="bp">∈</span> <span class="o">(</span><span class="n">B</span> <span class="bp">∩</span> <span class="n">C</span><span class="o">),</span> <span class="k">from</span> <span class="n">and.intro</span> <span class="n">h₅.left</span> <span class="o">(</span><span class="n">and.intro</span> <span class="o">(</span><span class="n">h₅.right</span><span class="o">)</span> <span class="o">(</span><span class="n">h₈.right</span><span class="o">))),</span>
    <span class="k">have</span> <span class="n">h₃</span> <span class="o">:</span> <span class="o">(</span><span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">)</span> <span class="bp">∈</span> <span class="n">A</span> <span class="bp">×ˢ</span> <span class="o">(</span><span class="n">B</span> <span class="bp">∩</span> <span class="n">C</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="n">x</span> <span class="bp">∈</span> <span class="n">A</span> <span class="bp">∧</span> <span class="n">y</span> <span class="bp">∈</span> <span class="n">B</span> <span class="bp">∩</span> <span class="n">C</span><span class="o">),</span> <span class="k">from</span> <span class="n">prod_mk_mem_set_prod_eq</span><span class="o">,</span>
    <span class="k">show</span> <span class="o">(</span><span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">)</span> <span class="bp">∈</span> <span class="n">A</span> <span class="bp">×ˢ</span> <span class="o">(</span><span class="n">B</span> <span class="bp">∩</span> <span class="n">C</span><span class="o">),</span> <span class="k">from</span> <span class="n">eq.subst</span> <span class="n">h₃</span> <span class="n">h₂</span><span class="o">)</span>
</code></pre></div>



<a name="270141909"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Getting%20prod_mk_mem_set_prod_eq%20to%20work/near/270141909" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Andrew Lubrino <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Getting.20prod_mk_mem_set_prod_eq.20to.20work.html#270141909">(Feb 01 2022 at 02:33)</a>:</h4>
<p>I've also tried <code>ext</code> with <code>iff.intro</code>, but I'm not able to get it to work</p>



<a name="270162958"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Getting%20prod_mk_mem_set_prod_eq%20to%20work/near/270162958" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Getting.20prod_mk_mem_set_prod_eq.20to.20work.html#270162958">(Feb 01 2022 at 07:25)</a>:</h4>
<p>Is there a reason you're not using tactic mode?</p>



<a name="270163059"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Getting%20prod_mk_mem_set_prod_eq%20to%20work/near/270163059" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Getting.20prod_mk_mem_set_prod_eq.20to.20work.html#270163059">(Feb 01 2022 at 07:27)</a>:</h4>
<p><code>ext, simp</code> can probably close this, if we don't already have <a href="https://leanprover-community.github.io/mathlib_docs/find/set.prod_inter">docs#set.prod_inter</a></p>



<a name="270169786"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Getting%20prod_mk_mem_set_prod_eq%20to%20work/near/270169786" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Getting.20prod_mk_mem_set_prod_eq.20to.20work.html#270169786">(Feb 01 2022 at 08:41)</a>:</h4>
<p><span class="user-mention" data-user-id="466607">@Andrew Lubrino</span> <a href="https://leanprover-community.github.io/mwe.html">#mwe</a> . Can you please include your imports and opens in your initial post so that other people can run your code more easily?</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>