---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/def.20vs.20structure.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/def.20vs.20structure.html">def vs structure</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="203272900"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/def%20vs%20structure/near/203272900" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Nicolò Cavalleri <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/def.20vs.20structure.html#203272900">(Jul 08 2020 at 14:20)</a>:</h4>
<p>Is there a general rule of thumb to decide whether a property should be defined with <code>def : Prop</code> or as a structure/class <code>: Prop</code>?</p>



<a name="203273155"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/def%20vs%20structure/near/203273155" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/def.20vs.20structure.html#203273155">(Jul 08 2020 at 14:22)</a>:</h4>
<p>Do you want the type class inference system to handle it or not?</p>



<a name="203273292"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/def%20vs%20structure/near/203273292" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Nicolò Cavalleri <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/def.20vs.20structure.html#203273292">(Jul 08 2020 at 14:23)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110038">Kevin Buzzard</span> <a href="#narrow/stream/113489-new-members/topic/def.20vs.20structure/near/203273155">said</a>:</p>
<blockquote>
<p>Do you want the type class inference system to handle it or not?</p>
</blockquote>
<p>Actually I imagined it for class but what about a <code>structure : Prop</code>? It is not handled by class inference (or is it)?</p>



<a name="203273371"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/def%20vs%20structure/near/203273371" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/def.20vs.20structure.html#203273371">(Jul 08 2020 at 14:24)</a>:</h4>
<p>No, structures aren't handled by the type class inference system.</p>



<a name="203273444"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/def%20vs%20structure/near/203273444" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/def.20vs.20structure.html#203273444">(Jul 08 2020 at 14:24)</a>:</h4>
<p>The difference between a structure and a def is just different syntax for the default constructor, basically</p>



<a name="203273572"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/def%20vs%20structure/near/203273572" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/def.20vs.20structure.html#203273572">(Jul 08 2020 at 14:25)</a>:</h4>
<p><code>equivalence r</code> is defined to be <code>reflexive r \and symmetric r \and transitive r</code> so you build an instance with <code>\&lt;refl_proof, symm_proof, trans_proof\&gt;</code>.</p>



<a name="203273675"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/def%20vs%20structure/near/203273675" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/def.20vs.20structure.html#203273675">(Jul 08 2020 at 14:26)</a>:</h4>
<p>If they'd made it a structure then this would work, but so would <code>{reflexive := refl_proof, symmetric := symm_proof, transitive := trans_proof}</code></p>



<a name="203274296"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/def%20vs%20structure/near/203274296" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Nicolò Cavalleri <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/def.20vs.20structure.html#203274296">(Jul 08 2020 at 14:31)</a>:</h4>
<p>And is there a particular reason why they did not want the second syntax to be possible?</p>



<a name="203274339"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/def%20vs%20structure/near/203274339" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Nicolò Cavalleri <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/def.20vs.20structure.html#203274339">(Jul 08 2020 at 14:31)</a>:</h4>
<p>Coercions work in both cases right?</p>



<a name="203274500"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/def%20vs%20structure/near/203274500" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/def.20vs.20structure.html#203274500">(Jul 08 2020 at 14:32)</a>:</h4>
<p>There is a function emulating the structure behavior here. I guess it's a historical accident.</p>



<a name="203274555"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/def%20vs%20structure/near/203274555" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/def.20vs.20structure.html#203274555">(Jul 08 2020 at 14:32)</a>:</h4>
<p>Coercions don't care if the things you're going from and to are structures or just defs.</p>



<a name="203274776"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/def%20vs%20structure/near/203274776" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Nicolò Cavalleri <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/def.20vs.20structure.html#203274776">(Jul 08 2020 at 14:34)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110031">Patrick Massot</span> <a href="#narrow/stream/113489-new-members/topic/def.20vs.20structure/near/203274500">said</a>:</p>
<blockquote>
<p>There is a function emulating the structure behavior here. I guess it's a historical accident.</p>
</blockquote>
<p>So if I like better the structure syntax because I like the clarity of the second constructor, I can choose to always use structure I guess</p>



<a name="203274926"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/def%20vs%20structure/near/203274926" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/def.20vs.20structure.html#203274926">(Jul 08 2020 at 14:36)</a>:</h4>
<p>Of course you can define functions and pi types more generally with <code>def</code>; structures are limited to being inductive types with one constructor.</p>



<a name="203276546"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/def%20vs%20structure/near/203276546" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/def.20vs.20structure.html#203276546">(Jul 08 2020 at 14:49)</a>:</h4>
<p>One (minor) reason to prefer the definition using <code>and</code> is uniformity for automation. Things may know how to deal with conjunctions but not with your custom structure. Here's a contrived example:</p>
<div class="codehilite"><pre><span></span><code><span class="kn">constants</span> <span class="n">A</span> <span class="n">B</span> <span class="n">C</span> <span class="o">:</span> <span class="kt">Prop</span>
<span class="n">def</span> <span class="n">f</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">:=</span> <span class="n">A</span> <span class="bp">∧</span> <span class="n">B</span> <span class="bp">∧</span> <span class="n">C</span>

<span class="kn">structure</span> <span class="n">g</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">one</span> <span class="o">:</span> <span class="n">A</span><span class="o">)</span> <span class="o">(</span><span class="n">two</span> <span class="o">:</span> <span class="n">B</span><span class="o">)</span> <span class="o">(</span><span class="n">three</span> <span class="o">:</span> <span class="n">C</span><span class="o">)</span>

<span class="kn">example</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">f</span><span class="o">)</span> <span class="o">:</span> <span class="n">B</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">f</span><span class="o">,</span> <span class="bp">*</span><span class="o">]</span> <span class="n">at</span> <span class="bp">*</span> <span class="c1">-- works</span>
<span class="kn">example</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">g</span><span class="o">)</span> <span class="o">:</span> <span class="n">B</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">g</span><span class="o">,</span> <span class="bp">*</span><span class="o">]</span> <span class="n">at</span> <span class="bp">*</span> <span class="c1">-- fails</span>
</code></pre></div>



<a name="203279500"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/def%20vs%20structure/near/203279500" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Nicolò Cavalleri <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/def.20vs.20structure.html#203279500">(Jul 08 2020 at 15:11)</a>:</h4>
<p>Ok cool these look to be good reasons, thanks to all!</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>