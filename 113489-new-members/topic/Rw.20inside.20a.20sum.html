---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/Rw.20inside.20a.20sum.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Rw.20inside.20a.20sum.html">Rw inside a sum</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="213418020"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Rw%20inside%20a%20sum/near/213418020" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Rw.20inside.20a.20sum.html#213418020">(Oct 15 2020 at 12:41)</a>:</h4>
<p>Hi all, I have a <code>s : finset a</code> for some <code>a : Type</code> and a function <code>f : a  → b</code>, where  <code>(b : Type) [add_comm_monoid b]</code>, so I can consider the sum <code>∑ x in s, f x</code>. I also have another function <code>g: a  → b</code> and I now that <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mo>=</mo><mi>g</mi></mrow><annotation encoding="application/x-tex"> f = g</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span></span></span></span> on <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi></mrow><annotation encoding="application/x-tex">s</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">s</span></span></span></span>, but not in general. I want to prove that <code>∑ x in s, f x = ∑ x in s, g x</code>. How can I prove this? It is something like a <code>rw</code> I guess, but I do not know how tell Lean to use the fact that <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mo>=</mo><mi>g</mi></mrow><annotation encoding="application/x-tex"> f = g</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span></span></span></span> on <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi></mrow><annotation encoding="application/x-tex">s</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">s</span></span></span></span> (actually I am not even able to write this  in Lean, maybe something like <code>x ∈ s → f x = g x</code>, where <code>x : a</code>?). Thank you!</p>



<a name="213418165"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Rw%20inside%20a%20sum/near/213418165" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Rw.20inside.20a.20sum.html#213418165">(Oct 15 2020 at 12:42)</a>:</h4>
<p>I think you want to <code>apply finset.sum_congr</code>.</p>



<a name="213418502"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Rw%20inside%20a%20sum/near/213418502" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Rw.20inside.20a.20sum.html#213418502">(Oct 15 2020 at 12:45)</a>:</h4>
<p>Oh, thank you! For some reasons I tried to do it by myself without looking into the library.</p>



<a name="213418758"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Rw%20inside%20a%20sum/near/213418758" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Rw.20inside.20a.20sum.html#213418758">(Oct 15 2020 at 12:47)</a>:</h4>
<p>Is there a reason of having in <code>finset.sum_congr</code> two finsets <code>s1</code> and <code>s2</code> with the assumption that <code>s1 = s2</code>?</p>



<a name="213419177"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Rw%20inside%20a%20sum/near/213419177" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Rw.20inside.20a.20sum.html#213419177">(Oct 15 2020 at 12:50)</a>:</h4>
<p>I guess it's just to make it more general, making it possible to vary the set being summed.</p>



<a name="213419282"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Rw%20inside%20a%20sum/near/213419282" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Rw.20inside.20a.20sum.html#213419282">(Oct 15 2020 at 12:51)</a>:</h4>
<p>But usually I need <code>finset.sum_bij</code> if <code>s1</code> and <code>s2</code> are not literally the same.</p>



<a name="213419934"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Rw%20inside%20a%20sum/near/213419934" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Rw.20inside.20a.20sum.html#213419934">(Oct 15 2020 at 12:56)</a>:</h4>
<p><code>sum_bij</code> is what you need if <code>s1</code> and <code>s2</code> are not finsets of the same type.</p>



<a name="213419975"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Rw%20inside%20a%20sum/near/213419975" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Rw.20inside.20a.20sum.html#213419975">(Oct 15 2020 at 12:56)</a>:</h4>
<p>Note that there is even <code>sum_bij_ne_zero</code> which is the most awesome version of all (-;</p>



<a name="213420029"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Rw%20inside%20a%20sum/near/213420029" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Rw.20inside.20a.20sum.html#213420029">(Oct 15 2020 at 12:57)</a>:</h4>
<p>And <code>fintype.sum_congr</code> if you are looking at two sums over a fintype (i.e. <code>s1 = s2 = (univ : finset X)</code>)</p>



<a name="213420191"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Rw%20inside%20a%20sum/near/213420191" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Rw.20inside.20a.20sum.html#213420191">(Oct 15 2020 at 12:58)</a>:</h4>
<p>Wow, <code>sum_bij_ne_zero</code> is scary <span aria-label="grinning" class="emoji emoji-1f600" role="img" title="grinning">:grinning:</span></p>



<a name="213423280"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Rw%20inside%20a%20sum/near/213423280" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Rw.20inside.20a.20sum.html#213423280">(Oct 15 2020 at 13:19)</a>:</h4>
<p><span class="user-mention" data-user-id="130384">@Riccardo Brasca</span> the difficulty of some of this finite stuff was quite surprising to me. I am pretty sure that when I arrived on the scene in 2017 trying to do 1st year UG problem sheets, if all the machinery of finite sets and finite types hadn't been there I would have been completely lost and unable to use anything. But people like Mario had built this stuff before. How difficult can a finite set be? Well, <code>data.finset</code> was thousands of lines long in 2017, and it imported <code>data.multiset</code> which was also thousands of lines long -- I once printed out data.multiset onto 28 pages and would sit and read it in the bath trying to fathom out what was going on.</p>



<a name="213423437"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Rw%20inside%20a%20sum/near/213423437" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Rw.20inside.20a.20sum.html#213423437">(Oct 15 2020 at 13:20)</a>:</h4>
<p>Yes, the machinery is quite confusing at the beginning, but I guess one gets used to it.</p>



<a name="213423474"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Rw%20inside%20a%20sum/near/213423474" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Rw.20inside.20a.20sum.html#213423474">(Oct 15 2020 at 13:20)</a>:</h4>
<p>It was only much later that I realised that the point was not to see how it was built, it was to understand what the main definitions were (these files are 98% theorems)</p>



<a name="213423496"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Rw%20inside%20a%20sum/near/213423496" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Rw.20inside.20a.20sum.html#213423496">(Oct 15 2020 at 13:20)</a>:</h4>
<p>And probably sooner or later I will have to read it in details too.</p>



<a name="213423525"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Rw%20inside%20a%20sum/near/213423525" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Rw.20inside.20a.20sum.html#213423525">(Oct 15 2020 at 13:20)</a>:</h4>
<p>and to start to understand what kind of things are available</p>



<a name="213423572"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Rw%20inside%20a%20sum/near/213423572" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Rw.20inside.20a.20sum.html#213423572">(Oct 15 2020 at 13:21)</a>:</h4>
<p>Here is the way to read a file in mathilb. First, check to see if there is a module docstring. If there is, then read all of that first.</p>



<a name="213423648"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Rw%20inside%20a%20sum/near/213423648" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Rw.20inside.20a.20sum.html#213423648">(Oct 15 2020 at 13:21)</a>:</h4>
<p>And if there isn't then I guess you could even just make one yourself after you finished reading it.</p>



<a name="213423727"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Rw%20inside%20a%20sum/near/213423727" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Rw.20inside.20a.20sum.html#213423727">(Oct 15 2020 at 13:22)</a>:</h4>
<p>Secondly try and find all the definitions and all the instances (use search functionality of your viewer)</p>



<a name="213423808"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Rw%20inside%20a%20sum/near/213423808" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Rw.20inside.20a.20sum.html#213423808">(Oct 15 2020 at 13:22)</a>:</h4>
<p>Hopefully each one should have a docstring. They should tell you the main objects you're working with in this file.</p>



<a name="213423921"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Rw%20inside%20a%20sum/near/213423921" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Rw.20inside.20a.20sum.html#213423921">(Oct 15 2020 at 13:23)</a>:</h4>
<p>Then scan the theorems to work out the normal form for each new concept, i.e how things are expressed on the right hand side of simp lemmas.</p>



<a name="213423944"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Rw%20inside%20a%20sum/near/213423944" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Rw.20inside.20a.20sum.html#213423944">(Oct 15 2020 at 13:23)</a>:</h4>
<p>because simp moves things from left to right</p>



<a name="213424071"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Rw%20inside%20a%20sum/near/213424071" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Rw.20inside.20a.20sum.html#213424071">(Oct 15 2020 at 13:23)</a>:</h4>
<p>and then scan the theorems, you probably won't see anything surprising, so skip the proofs.</p>



<a name="213424158"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Rw%20inside%20a%20sum/near/213424158" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Rw.20inside.20a.20sum.html#213424158">(Oct 15 2020 at 13:24)</a>:</h4>
<p>Then if there wasn't a module docstring, pop back to the top and write one.</p>



<a name="213490209"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Rw%20inside%20a%20sum/near/213490209" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Rw.20inside.20a.20sum.html#213490209">(Oct 15 2020 at 21:28)</a>:</h4>
<p>Oh! There is a tactic for this!</p>



<a name="213490407"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Rw%20inside%20a%20sum/near/213490407" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Rw.20inside.20a.20sum.html#213490407">(Oct 15 2020 at 21:30)</a>:</h4>
<p><a href="https://leanprover-community.github.io/mathlib_docs/tactics.html#apply_congr">https://leanprover-community.github.io/mathlib_docs/tactics.html#apply_congr</a></p>



<a name="213567106"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Rw%20inside%20a%20sum/near/213567106" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Rw.20inside.20a.20sum.html#213567106">(Oct 16 2020 at 14:27)</a>:</h4>
<p>Very nice, this is exactly what I wanted! :)</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>