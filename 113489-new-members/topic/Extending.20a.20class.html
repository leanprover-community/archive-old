---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/Extending.20a.20class.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Extending.20a.20class.html">Extending a class</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="253359670"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Extending%20a%20class/near/253359670" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Andre Hernandez-Espiet (Rutgers) <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Extending.20a.20class.html#253359670">(Sep 15 2021 at 04:10)</a>:</h4>
<p>I am trying to extend one class to another (I am in a way adding axioms to an already existing list of axioms). However, when I do this, the document doesn't recognize the second set of axioms, even though it recognizes the first set fine. How do I fix this? Am I not understanding these extensions properly? I have attached a sample document below:<br>
<a href="/user_uploads/3121/8tzRzJA42XcumWtPomhyfNav/test2.lean">test2.lean</a></p>



<a name="253387139"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Extending%20a%20class/near/253387139" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Extending.20a.20class.html#253387139">(Sep 15 2021 at 09:44)</a>:</h4>
<p>Looks like the issue is that you have declared</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">variable</span> <span class="o">[</span><span class="n">I</span> <span class="o">:</span> <span class="n">incidence_geometry</span><span class="o">]</span>

<span class="kn">include</span> <span class="n">I</span>
</code></pre></div>
<p>but not something like</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">variable</span> <span class="o">[</span><span class="n">I2</span> <span class="o">:</span> <span class="n">axioms2</span><span class="o">]</span>
<span class="kn">include</span> <span class="n">I2</span>
</code></pre></div>



<a name="253387217"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Extending%20a%20class/near/253387217" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Extending.20a.20class.html#253387217">(Sep 15 2021 at 09:45)</a>:</h4>
<p>And probably you also want to write <code>omit I</code> if you include <code>I2</code>, otherwise Lean can get confused whether <code>point</code> refers to <code>I.point</code> or <code>I2.point</code></p>



<a name="253460604"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Extending%20a%20class/near/253460604" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Andre Hernandez-Espiet (Rutgers) <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Extending.20a.20class.html#253460604">(Sep 15 2021 at 18:02)</a>:</h4>
<p>It seems like this brings me closer to a solution. However, while the new axioms are being recognized, it does have the problem of not understanding which kind of point I am talking about. I did include the "omit I" line of code, but somehow it seems like I am not doing this correctly. Any ideas as to how to fix this? Attached I have the modified code.</p>
<p><a href="/user_uploads/3121/O_PryVtKFLYjsLjBWLZ0L_0y/test2.lean">test2.lean</a></p>



<a name="253461305"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Extending%20a%20class/near/253461305" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Extending.20a.20class.html#253461305">(Sep 15 2021 at 18:07)</a>:</h4>
<p>Can you either write this code inline or create a gist, rather than attaching the file to zulip? With how you're currently sending it, it doesn't render correctly for me on mobile because txt files don't have a known encoding.</p>



<a name="253462377"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Extending%20a%20class/near/253462377" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Andre Hernandez-Espiet (Rutgers) <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Extending.20a.20class.html#253462377">(Sep 15 2021 at 18:14)</a>:</h4>
<p>Is this what you are referring to?</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span>  <span class="n">data.set</span> <span class="n">tactic.interactive</span> <span class="n">set_theory.zfc</span>
<span class="kd">class</span> <span class="n">incidence_geometry</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">point</span> <span class="o">:</span> <span class="kt">Type</span> <span class="o">)</span> <span class="o">(</span><span class="n">lines</span> <span class="o">:</span> <span class="n">set</span> <span class="o">(</span><span class="n">set</span> <span class="n">point</span><span class="o">))</span>
<span class="o">(</span><span class="n">eqd</span> <span class="o">:</span> <span class="n">point</span> <span class="bp">→</span> <span class="n">point</span> <span class="bp">→</span> <span class="n">point</span> <span class="bp">→</span> <span class="n">point</span> <span class="bp">→</span> <span class="kt">Prop</span><span class="o">)</span>

<span class="o">(</span><span class="n">B</span><span class="o">:</span> <span class="n">point</span> <span class="bp">→</span> <span class="n">point</span> <span class="bp">→</span> <span class="n">point</span> <span class="bp">→</span> <span class="kt">Prop</span><span class="o">)</span>
<span class="o">[</span><span class="n">dec_B</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">a</span> <span class="n">b</span> <span class="n">c</span><span class="o">,</span> <span class="n">decidable</span> <span class="o">(</span><span class="n">B</span> <span class="n">a</span> <span class="n">b</span> <span class="n">c</span><span class="o">)]</span>
<span class="c1">-- Equidistance of 4 Points</span>
<span class="o">(</span><span class="n">P1</span> <span class="o">{}</span> <span class="o">:</span> <span class="n">point</span><span class="o">)</span> <span class="o">(</span><span class="n">P2</span> <span class="o">{}</span> <span class="o">:</span> <span class="n">point</span><span class="o">)</span> <span class="o">(</span><span class="n">P3</span> <span class="o">{}</span> <span class="o">:</span> <span class="n">point</span><span class="o">)</span>

<span class="o">(</span><span class="n">I1a</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">point</span><span class="o">),</span> <span class="n">a</span><span class="bp">≠</span><span class="n">b</span> <span class="bp">→</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">l</span> <span class="bp">∈</span>  <span class="n">lines</span><span class="o">)</span> <span class="o">,</span> <span class="n">a</span><span class="bp">∈</span> <span class="n">l</span> <span class="bp">∧</span> <span class="n">b</span><span class="bp">∈</span> <span class="n">l</span><span class="o">)</span>
<span class="o">(</span><span class="n">I1b</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">point</span><span class="o">),</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">l</span> <span class="n">l'</span><span class="bp">∈</span>  <span class="n">lines</span><span class="o">),</span> <span class="n">a</span><span class="bp">≠</span><span class="n">b</span> <span class="bp">→</span>  <span class="n">a</span><span class="bp">∈</span>  <span class="n">l</span> <span class="bp">→</span>  <span class="n">b</span><span class="bp">∈</span>  <span class="n">l</span> <span class="bp">→</span>  <span class="n">a</span><span class="bp">∈</span>  <span class="n">l'</span> <span class="bp">→</span>  <span class="n">b</span><span class="bp">∈</span>  <span class="n">l'</span>  <span class="bp">→</span><span class="n">l</span><span class="bp">=</span><span class="n">l'</span><span class="o">)</span>
<span class="o">(</span><span class="n">I2</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">l</span> <span class="bp">∈</span> <span class="n">lines</span><span class="o">,</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">X</span><span class="o">:</span><span class="n">point</span><span class="bp">×</span><span class="n">point</span><span class="o">),</span> <span class="n">X.1</span> <span class="bp">∈</span> <span class="n">l</span> <span class="bp">∧</span>  <span class="n">X.2</span> <span class="bp">∈</span> <span class="n">l</span> <span class="bp">∧</span> <span class="n">X.1</span><span class="bp">≠</span> <span class="n">X.2</span><span class="o">)</span>
<span class="o">(</span><span class="n">I3</span> <span class="o">:</span> <span class="bp">¬</span> <span class="bp">∃</span> <span class="n">l</span> <span class="bp">∈</span> <span class="n">lines</span> <span class="o">,</span> <span class="n">P1</span><span class="bp">∈</span>  <span class="n">l</span> <span class="bp">∧</span> <span class="n">P2</span><span class="bp">∈</span>  <span class="n">l</span> <span class="bp">∧</span> <span class="n">P3</span><span class="bp">∈</span>  <span class="n">l</span><span class="o">)</span>
<span class="kn">open</span> <span class="n">incidence_geometry</span>

<span class="kd">variable</span> <span class="o">[</span><span class="n">I</span> <span class="o">:</span> <span class="n">incidence_geometry</span><span class="o">]</span>

<span class="kn">include</span> <span class="n">I</span>

<span class="kd">theorem</span> <span class="n">ptoffline</span> <span class="o">{</span><span class="n">l</span> <span class="o">:</span> <span class="n">set</span> <span class="n">point</span><span class="o">}(</span><span class="n">H</span> <span class="o">:</span> <span class="n">l</span> <span class="bp">∈</span> <span class="n">lines</span><span class="o">):</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="n">point</span><span class="o">),</span> <span class="o">(</span><span class="n">p</span> <span class="bp">∉</span> <span class="n">l</span><span class="o">)</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">by_cases</span> <span class="n">h1</span><span class="o">:</span> <span class="n">P1</span><span class="bp">∉</span> <span class="n">l</span><span class="o">,</span><span class="n">use</span> <span class="n">P1</span><span class="o">,</span>
  <span class="n">by_cases</span> <span class="n">h2</span><span class="o">:</span> <span class="n">P2</span><span class="bp">∉</span> <span class="n">l</span><span class="o">,</span> <span class="n">use</span> <span class="n">P2</span><span class="o">,</span>
  <span class="n">by_cases</span> <span class="n">h3</span><span class="o">:</span> <span class="n">P3</span><span class="bp">∉</span> <span class="n">l</span><span class="o">,</span> <span class="n">use</span> <span class="n">P3</span><span class="o">,</span>
  <span class="n">push_neg</span> <span class="n">at</span> <span class="n">h1</span> <span class="n">h2</span> <span class="n">h3</span><span class="o">,</span>
  <span class="n">exfalso</span><span class="o">,</span>
  <span class="k">have</span> <span class="o">:</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">l</span><span class="bp">∈</span> <span class="n">lines</span><span class="o">),</span> <span class="o">(</span><span class="n">P1</span><span class="bp">∈</span> <span class="n">l</span> <span class="bp">∧</span> <span class="n">P2</span><span class="bp">∈</span> <span class="n">l</span><span class="bp">∧</span> <span class="n">P3</span><span class="bp">∈</span> <span class="n">l</span><span class="o">),</span>
  <span class="o">{</span>
    <span class="n">use</span> <span class="n">l</span><span class="o">,</span>
    <span class="n">exact</span> <span class="o">⟨</span><span class="n">H</span><span class="o">,</span> <span class="n">h1</span><span class="o">,</span> <span class="n">h2</span><span class="o">,</span> <span class="n">h3</span> <span class="o">⟩,</span>
  <span class="o">},</span>
  <span class="n">exact</span> <span class="n">I3</span> <span class="n">this</span><span class="o">,</span>
<span class="kd">end</span>

<span class="kd">theorem</span> <span class="n">LinesOnePt</span> <span class="o">{</span><span class="n">p</span> <span class="n">p'</span><span class="o">:</span> <span class="n">point</span><span class="o">}</span> <span class="o">{</span><span class="n">l1</span> <span class="n">l2</span> <span class="o">:</span>  <span class="n">set</span> <span class="n">point</span><span class="o">}</span> <span class="o">(</span><span class="n">l1</span><span class="bp">≠</span> <span class="n">l2</span><span class="o">)</span> <span class="o">(</span><span class="n">h1</span> <span class="o">:</span> <span class="n">l1</span> <span class="bp">∈</span> <span class="n">lines</span><span class="o">)(</span><span class="n">h2</span> <span class="o">:</span> <span class="n">l2</span> <span class="bp">∈</span>  <span class="n">lines</span><span class="o">):</span> <span class="n">p</span><span class="bp">∈</span>  <span class="n">l1</span> <span class="bp">→</span>  <span class="n">p</span><span class="bp">∈</span>  <span class="n">l2</span> <span class="bp">→</span>  <span class="n">p'</span><span class="bp">∈</span>  <span class="n">l1</span> <span class="bp">→</span>  <span class="n">p'</span><span class="bp">∈</span>  <span class="n">l2</span> <span class="bp">→</span> <span class="n">p</span><span class="bp">=</span><span class="n">p'</span><span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">intros</span> <span class="n">hyp1</span> <span class="n">hyp2</span> <span class="n">hyp3</span> <span class="n">hyp4</span><span class="o">,</span>
  <span class="n">apply</span> <span class="n">by_contra</span><span class="o">,</span>
  <span class="n">intros</span> <span class="n">h</span><span class="o">,</span>
  <span class="n">exact</span> <span class="n">H</span><span class="o">(</span> <span class="n">I1b</span> <span class="n">p</span> <span class="n">p'</span> <span class="n">l1</span> <span class="n">l2</span> <span class="n">h1</span>  <span class="n">h2</span> <span class="n">h</span> <span class="n">hyp1</span> <span class="n">hyp3</span> <span class="n">hyp2</span> <span class="n">hyp4</span><span class="o">),</span>
<span class="kd">end</span>

<span class="kd">def</span> <span class="n">parallel</span> <span class="o">(</span><span class="n">l1</span> <span class="n">l2</span> <span class="o">:</span>  <span class="n">set</span> <span class="n">point</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">:=</span> <span class="o">(</span><span class="n">l1</span> <span class="bp">∈</span> <span class="n">lines</span><span class="o">)</span><span class="bp">∧</span> <span class="o">(</span><span class="n">l2</span> <span class="bp">∈</span> <span class="n">lines</span><span class="o">)</span> <span class="bp">∧</span> <span class="n">l1</span><span class="bp">∩</span><span class="n">l2</span><span class="bp">=∅</span>

<span class="kd">class</span> <span class="n">axioms2</span> <span class="kd">extends</span> <span class="n">incidence_geometry</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">Pa</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">point</span><span class="o">),</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">l</span> <span class="bp">∈</span> <span class="n">lines</span> <span class="o">),</span> <span class="o">((</span><span class="bp">¬</span> <span class="n">a</span><span class="bp">∈</span> <span class="n">l</span><span class="o">)</span> <span class="bp">→</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">l'</span><span class="bp">∈</span>  <span class="n">lines</span><span class="o">),</span> <span class="n">parallel</span> <span class="n">l</span> <span class="n">l'</span> <span class="bp">∧</span> <span class="n">a</span> <span class="bp">∈</span> <span class="n">l'</span><span class="o">))</span>
<span class="o">(</span><span class="n">Pb</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">point</span><span class="o">),</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">l</span> <span class="bp">∈</span> <span class="n">lines</span><span class="o">),</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">l1</span> <span class="bp">∈</span> <span class="n">lines</span><span class="o">),</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">l2</span> <span class="bp">∈</span> <span class="n">lines</span><span class="o">),</span> <span class="n">parallel</span> <span class="n">l</span> <span class="n">l1</span>
<span class="bp">∧</span> <span class="n">parallel</span> <span class="n">l</span> <span class="n">l2</span> <span class="bp">∧</span> <span class="n">a</span><span class="bp">∈</span> <span class="n">l1</span> <span class="bp">→</span> <span class="bp">¬</span> <span class="n">a</span><span class="bp">∈</span> <span class="n">l2</span><span class="o">)</span>
<span class="o">(</span><span class="n">B1</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">point</span><span class="o">,</span> <span class="n">B</span> <span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="bp">→</span> <span class="n">B</span> <span class="n">c</span> <span class="n">b</span> <span class="n">a</span> <span class="o">)</span>
<span class="o">(</span><span class="n">B2</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">point</span> <span class="o">,</span> <span class="bp">∃</span> <span class="n">c</span> <span class="o">:</span> <span class="n">point</span> <span class="o">,</span> <span class="n">B</span> <span class="n">a</span> <span class="n">b</span> <span class="n">c</span><span class="o">)</span>
<span class="o">(</span><span class="n">B2b</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">a</span> <span class="n">x</span> <span class="o">:</span> <span class="n">point</span> <span class="o">,</span> <span class="n">B</span> <span class="n">a</span> <span class="n">x</span> <span class="n">a</span> <span class="bp">→</span> <span class="n">x</span><span class="bp">=</span><span class="n">a</span><span class="o">)</span>
<span class="o">(</span><span class="n">B3</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">l</span> <span class="bp">∈</span> <span class="n">lines</span><span class="o">,</span> <span class="bp">∀</span> <span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="bp">∈</span> <span class="n">l</span><span class="o">,</span> <span class="n">xor</span> <span class="o">(</span><span class="n">xor</span> <span class="o">(</span><span class="n">B</span> <span class="n">a</span> <span class="n">b</span> <span class="n">c</span><span class="o">)</span> <span class="o">(</span><span class="n">B</span> <span class="n">b</span> <span class="n">c</span> <span class="n">a</span><span class="o">))</span> <span class="o">(</span><span class="n">B</span> <span class="n">c</span> <span class="n">a</span> <span class="n">b</span><span class="o">))</span>
<span class="o">(</span><span class="n">B4</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="n">d</span><span class="o">:</span> <span class="n">point</span><span class="o">,</span> <span class="bp">∀</span> <span class="n">l</span><span class="bp">∈</span> <span class="n">lines</span><span class="o">,</span> <span class="o">(</span><span class="bp">¬</span> <span class="n">a</span> <span class="bp">∈</span> <span class="n">l</span> <span class="o">)</span> <span class="bp">∧</span><span class="o">(</span><span class="bp">¬</span> <span class="n">b</span> <span class="bp">∈</span> <span class="n">l</span> <span class="o">)</span> <span class="bp">∧</span><span class="o">(</span><span class="bp">¬</span> <span class="n">c</span> <span class="bp">∈</span> <span class="n">l</span> <span class="o">)</span> <span class="bp">∧</span> <span class="o">(</span><span class="n">d</span> <span class="bp">∈</span> <span class="n">l</span><span class="o">)</span> <span class="bp">∧</span> <span class="o">(</span><span class="n">B</span> <span class="n">a</span> <span class="n">d</span> <span class="n">b</span><span class="o">)</span> <span class="bp">→</span>
<span class="bp">∃</span> <span class="o">(</span><span class="n">e</span> <span class="o">:</span> <span class="n">point</span> <span class="o">),</span> <span class="o">(</span><span class="n">e</span> <span class="bp">∈</span> <span class="n">l</span><span class="o">)</span> <span class="bp">∧</span> <span class="o">(</span><span class="n">B</span> <span class="n">a</span> <span class="n">e</span> <span class="n">c</span> <span class="bp">∧</span> <span class="bp">¬</span> <span class="n">B</span> <span class="n">b</span> <span class="n">e</span> <span class="n">c</span><span class="o">)</span> <span class="bp">∨</span> <span class="o">(</span><span class="n">B</span> <span class="n">b</span> <span class="n">e</span> <span class="n">c</span> <span class="bp">∧</span> <span class="bp">¬</span> <span class="n">B</span> <span class="n">a</span> <span class="n">e</span> <span class="n">c</span><span class="o">))</span>
<span class="kn">open</span> <span class="n">axioms2</span>

<span class="kd">variable</span> <span class="o">[</span><span class="n">I2</span> <span class="o">:</span> <span class="n">axioms2</span><span class="o">]</span>
<span class="kn">include</span> <span class="n">I2</span>
<span class="kn">omit</span> <span class="n">I</span>

<span class="kd">def</span> <span class="n">lineseg</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">point</span><span class="o">)</span> <span class="o">:</span> <span class="n">set</span> <span class="n">point</span> <span class="o">:=</span> <span class="o">{</span><span class="n">x</span> <span class="o">:</span> <span class="n">point</span> <span class="bp">|</span> <span class="n">B</span> <span class="n">a</span> <span class="n">x</span> <span class="n">b</span><span class="o">}</span>

<span class="kd">lemma</span> <span class="n">linesegsingleton</span> <span class="o">(</span> <span class="n">a</span> <span class="o">:</span> <span class="n">point</span><span class="o">)</span> <span class="o">:</span> <span class="n">lineseg</span> <span class="n">a</span> <span class="n">a</span> <span class="bp">=</span> <span class="o">{</span><span class="n">a</span><span class="o">}</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="k">have</span> <span class="o">:=</span> <span class="n">I2</span><span class="o">,</span>
  <span class="k">have</span> <span class="o">:=</span> <span class="n">B1</span> <span class="n">a</span> <span class="n">a</span> <span class="n">a</span> <span class="o">,</span>
<span class="kd">end</span>
</code></pre></div>



<a name="253462467"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Extending%20a%20class/near/253462467" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Andre Hernandez-Espiet (Rutgers) <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Extending.20a.20class.html#253462467">(Sep 15 2021 at 18:15)</a>:</h4>
<p>sorry, I am still learning a lot of this</p>



<a name="253495426"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Extending%20a%20class/near/253495426" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Extending.20a.20class.html#253495426">(Sep 15 2021 at 22:07)</a>:</h4>
<p>Your problem is that now you have <code>axioms2.point</code> and <code>incidence_geometry.point</code>. If you make <code>point</code> an input then you can do it like this:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span>  <span class="n">data.set</span> <span class="n">tactic.interactive</span> <span class="n">set_theory.zfc</span>
<span class="kd">class</span> <span class="n">incidence_geometry</span> <span class="o">(</span><span class="n">point</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">):=</span>
<span class="o">(</span><span class="n">lines</span> <span class="o">:</span> <span class="n">set</span> <span class="o">(</span><span class="n">set</span> <span class="n">point</span><span class="o">))</span>
<span class="o">(</span><span class="n">eqd</span> <span class="o">:</span> <span class="n">point</span> <span class="bp">→</span> <span class="n">point</span> <span class="bp">→</span> <span class="n">point</span> <span class="bp">→</span> <span class="n">point</span> <span class="bp">→</span> <span class="kt">Prop</span><span class="o">)</span>

<span class="o">(</span><span class="n">B</span><span class="o">:</span> <span class="n">point</span> <span class="bp">→</span> <span class="n">point</span> <span class="bp">→</span> <span class="n">point</span> <span class="bp">→</span> <span class="kt">Prop</span><span class="o">)</span>
<span class="o">[</span><span class="n">dec_B</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">a</span> <span class="n">b</span> <span class="n">c</span><span class="o">,</span> <span class="n">decidable</span> <span class="o">(</span><span class="n">B</span> <span class="n">a</span> <span class="n">b</span> <span class="n">c</span><span class="o">)]</span>
<span class="c1">-- Equidistance of 4 Points</span>
<span class="o">(</span><span class="n">P1</span> <span class="o">{}</span> <span class="o">:</span> <span class="n">point</span><span class="o">)</span> <span class="o">(</span><span class="n">P2</span> <span class="o">{}</span> <span class="o">:</span> <span class="n">point</span><span class="o">)</span> <span class="o">(</span><span class="n">P3</span> <span class="o">{}</span> <span class="o">:</span> <span class="n">point</span><span class="o">)</span>

<span class="o">(</span><span class="n">I1a</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">point</span><span class="o">),</span> <span class="n">a</span><span class="bp">≠</span><span class="n">b</span> <span class="bp">→</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">l</span> <span class="bp">∈</span>  <span class="n">lines</span><span class="o">)</span> <span class="o">,</span> <span class="n">a</span><span class="bp">∈</span> <span class="n">l</span> <span class="bp">∧</span> <span class="n">b</span><span class="bp">∈</span> <span class="n">l</span><span class="o">)</span>
<span class="o">(</span><span class="n">I1b</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">point</span><span class="o">),</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">l</span> <span class="n">l'</span><span class="bp">∈</span>  <span class="n">lines</span><span class="o">),</span> <span class="n">a</span><span class="bp">≠</span><span class="n">b</span> <span class="bp">→</span>  <span class="n">a</span><span class="bp">∈</span>  <span class="n">l</span> <span class="bp">→</span>  <span class="n">b</span><span class="bp">∈</span>  <span class="n">l</span> <span class="bp">→</span>  <span class="n">a</span><span class="bp">∈</span>  <span class="n">l'</span> <span class="bp">→</span>  <span class="n">b</span><span class="bp">∈</span>  <span class="n">l'</span>  <span class="bp">→</span><span class="n">l</span><span class="bp">=</span><span class="n">l'</span><span class="o">)</span>
<span class="o">(</span><span class="n">I2</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">l</span> <span class="bp">∈</span> <span class="n">lines</span><span class="o">,</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">X</span><span class="o">:</span><span class="n">point</span><span class="bp">×</span><span class="n">point</span><span class="o">),</span> <span class="n">X.1</span> <span class="bp">∈</span> <span class="n">l</span> <span class="bp">∧</span>  <span class="n">X.2</span> <span class="bp">∈</span> <span class="n">l</span> <span class="bp">∧</span> <span class="n">X.1</span><span class="bp">≠</span> <span class="n">X.2</span><span class="o">)</span>
<span class="o">(</span><span class="n">I3</span> <span class="o">:</span> <span class="bp">¬</span> <span class="bp">∃</span> <span class="n">l</span> <span class="bp">∈</span> <span class="n">lines</span> <span class="o">,</span> <span class="n">P1</span><span class="bp">∈</span>  <span class="n">l</span> <span class="bp">∧</span> <span class="n">P2</span><span class="bp">∈</span>  <span class="n">l</span> <span class="bp">∧</span> <span class="n">P3</span><span class="bp">∈</span>  <span class="n">l</span><span class="o">)</span>
<span class="kn">open</span> <span class="n">incidence_geometry</span>

<span class="kd">variables</span> <span class="o">{</span><span class="n">point</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">}</span> <span class="o">[</span><span class="n">I</span> <span class="o">:</span> <span class="n">incidence_geometry</span> <span class="n">point</span><span class="o">]</span>

<span class="kd">theorem</span> <span class="n">ptoffline</span> <span class="o">{</span><span class="n">l</span> <span class="o">:</span> <span class="n">set</span> <span class="n">point</span><span class="o">}(</span><span class="n">H</span> <span class="o">:</span> <span class="n">l</span> <span class="bp">∈</span> <span class="n">I.lines</span><span class="o">):</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="n">point</span><span class="o">),</span> <span class="o">(</span><span class="n">p</span> <span class="bp">∉</span> <span class="n">l</span><span class="o">)</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">by_cases</span> <span class="n">h1</span><span class="o">:</span> <span class="n">P1</span><span class="bp">∉</span> <span class="n">l</span><span class="o">,</span><span class="n">use</span> <span class="n">P1</span><span class="o">,</span>
  <span class="n">by_cases</span> <span class="n">h2</span><span class="o">:</span> <span class="n">P2</span><span class="bp">∉</span> <span class="n">l</span><span class="o">,</span> <span class="n">use</span> <span class="n">P2</span><span class="o">,</span>
  <span class="n">by_cases</span> <span class="n">h3</span><span class="o">:</span> <span class="n">P3</span><span class="bp">∉</span> <span class="n">l</span><span class="o">,</span> <span class="n">use</span> <span class="n">P3</span><span class="o">,</span>
  <span class="n">push_neg</span> <span class="n">at</span> <span class="n">h1</span> <span class="n">h2</span> <span class="n">h3</span><span class="o">,</span>
  <span class="n">exfalso</span><span class="o">,</span>
  <span class="k">have</span> <span class="o">:</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">l</span><span class="bp">∈</span> <span class="n">lines</span><span class="o">),</span> <span class="o">(</span><span class="n">P1</span><span class="bp">∈</span> <span class="n">l</span> <span class="bp">∧</span> <span class="n">P2</span><span class="bp">∈</span> <span class="n">l</span><span class="bp">∧</span> <span class="n">P3</span><span class="bp">∈</span> <span class="n">l</span><span class="o">),</span>
  <span class="o">{</span>
    <span class="n">use</span> <span class="n">l</span><span class="o">,</span>
    <span class="n">exact</span> <span class="o">⟨</span><span class="n">H</span><span class="o">,</span> <span class="n">h1</span><span class="o">,</span> <span class="n">h2</span><span class="o">,</span> <span class="n">h3</span> <span class="o">⟩,</span>
  <span class="o">},</span>
  <span class="n">exact</span> <span class="n">I3</span> <span class="n">this</span><span class="o">,</span>
<span class="kd">end</span>

<span class="kd">theorem</span> <span class="n">LinesOnePt</span> <span class="o">{</span><span class="n">p</span> <span class="n">p'</span><span class="o">:</span> <span class="n">point</span><span class="o">}</span> <span class="o">{</span><span class="n">l1</span> <span class="n">l2</span> <span class="o">:</span>  <span class="n">set</span> <span class="n">point</span><span class="o">}</span> <span class="o">(</span><span class="n">l1</span><span class="bp">≠</span> <span class="n">l2</span><span class="o">)</span> <span class="o">(</span><span class="n">h1</span> <span class="o">:</span> <span class="n">l1</span> <span class="bp">∈</span> <span class="n">I.lines</span><span class="o">)(</span><span class="n">h2</span> <span class="o">:</span> <span class="n">l2</span> <span class="bp">∈</span>  <span class="n">I.lines</span><span class="o">):</span> <span class="n">p</span><span class="bp">∈</span>  <span class="n">l1</span> <span class="bp">→</span>  <span class="n">p</span><span class="bp">∈</span>  <span class="n">l2</span> <span class="bp">→</span>  <span class="n">p'</span><span class="bp">∈</span>  <span class="n">l1</span> <span class="bp">→</span>  <span class="n">p'</span><span class="bp">∈</span>  <span class="n">l2</span> <span class="bp">→</span> <span class="n">p</span><span class="bp">=</span><span class="n">p'</span><span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">intros</span> <span class="n">hyp1</span> <span class="n">hyp2</span> <span class="n">hyp3</span> <span class="n">hyp4</span><span class="o">,</span>
  <span class="n">apply</span> <span class="n">by_contra</span><span class="o">,</span>
  <span class="n">intros</span> <span class="n">h</span><span class="o">,</span>
  <span class="n">exact</span> <span class="n">H</span><span class="o">(</span> <span class="n">I1b</span> <span class="n">p</span> <span class="n">p'</span> <span class="n">l1</span> <span class="n">l2</span> <span class="n">h1</span>  <span class="n">h2</span> <span class="n">h</span> <span class="n">hyp1</span> <span class="n">hyp3</span> <span class="n">hyp2</span> <span class="n">hyp4</span><span class="o">),</span>
<span class="kd">end</span>

<span class="kd">def</span> <span class="n">parallel</span> <span class="o">(</span><span class="n">l1</span> <span class="n">l2</span> <span class="o">:</span>  <span class="n">set</span> <span class="n">point</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">:=</span> <span class="o">(</span><span class="n">l1</span> <span class="bp">∈</span> <span class="n">I.lines</span><span class="o">)</span><span class="bp">∧</span> <span class="o">(</span><span class="n">l2</span> <span class="bp">∈</span> <span class="n">I.lines</span><span class="o">)</span> <span class="bp">∧</span> <span class="n">l1</span><span class="bp">∩</span><span class="n">l2</span><span class="bp">=∅</span>

<span class="kd">class</span> <span class="n">axioms2</span> <span class="o">(</span><span class="n">point</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="kd">extends</span> <span class="n">incidence_geometry</span> <span class="n">point</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">Pa</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">point</span><span class="o">),</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">l</span> <span class="bp">∈</span> <span class="n">lines</span> <span class="o">),</span> <span class="o">((</span><span class="bp">¬</span> <span class="n">a</span><span class="bp">∈</span> <span class="n">l</span><span class="o">)</span> <span class="bp">→</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">l'</span><span class="bp">∈</span>  <span class="n">lines</span><span class="o">),</span> <span class="n">parallel</span> <span class="n">l</span> <span class="n">l'</span> <span class="bp">∧</span> <span class="n">a</span> <span class="bp">∈</span> <span class="n">l'</span><span class="o">))</span>
<span class="o">(</span><span class="n">Pb</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">point</span><span class="o">),</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">l</span> <span class="bp">∈</span> <span class="n">lines</span><span class="o">),</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">l1</span> <span class="bp">∈</span> <span class="n">lines</span><span class="o">),</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">l2</span> <span class="bp">∈</span> <span class="n">lines</span><span class="o">),</span> <span class="n">parallel</span> <span class="n">l</span> <span class="n">l1</span>
<span class="bp">∧</span> <span class="n">parallel</span> <span class="n">l</span> <span class="n">l2</span> <span class="bp">∧</span> <span class="n">a</span><span class="bp">∈</span> <span class="n">l1</span> <span class="bp">→</span> <span class="bp">¬</span> <span class="n">a</span><span class="bp">∈</span> <span class="n">l2</span><span class="o">)</span>
<span class="o">(</span><span class="n">B1</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">point</span><span class="o">,</span> <span class="n">B</span> <span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="bp">→</span> <span class="n">B</span> <span class="n">c</span> <span class="n">b</span> <span class="n">a</span> <span class="o">)</span>
<span class="o">(</span><span class="n">B2</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">point</span> <span class="o">,</span> <span class="bp">∃</span> <span class="n">c</span> <span class="o">:</span> <span class="n">point</span> <span class="o">,</span> <span class="n">B</span> <span class="n">a</span> <span class="n">b</span> <span class="n">c</span><span class="o">)</span>
<span class="o">(</span><span class="n">B2b</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">a</span> <span class="n">x</span> <span class="o">:</span> <span class="n">point</span> <span class="o">,</span> <span class="n">B</span> <span class="n">a</span> <span class="n">x</span> <span class="n">a</span> <span class="bp">→</span> <span class="n">x</span><span class="bp">=</span><span class="n">a</span><span class="o">)</span>
<span class="o">(</span><span class="n">B3</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">l</span> <span class="bp">∈</span> <span class="n">lines</span><span class="o">,</span> <span class="bp">∀</span> <span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="bp">∈</span> <span class="n">l</span><span class="o">,</span> <span class="n">xor</span> <span class="o">(</span><span class="n">xor</span> <span class="o">(</span><span class="n">B</span> <span class="n">a</span> <span class="n">b</span> <span class="n">c</span><span class="o">)</span> <span class="o">(</span><span class="n">B</span> <span class="n">b</span> <span class="n">c</span> <span class="n">a</span><span class="o">))</span> <span class="o">(</span><span class="n">B</span> <span class="n">c</span> <span class="n">a</span> <span class="n">b</span><span class="o">))</span>
<span class="o">(</span><span class="n">B4</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="n">d</span><span class="o">:</span> <span class="n">point</span><span class="o">,</span> <span class="bp">∀</span> <span class="n">l</span><span class="bp">∈</span> <span class="n">lines</span><span class="o">,</span> <span class="o">(</span><span class="bp">¬</span> <span class="n">a</span> <span class="bp">∈</span> <span class="n">l</span> <span class="o">)</span> <span class="bp">∧</span><span class="o">(</span><span class="bp">¬</span> <span class="n">b</span> <span class="bp">∈</span> <span class="n">l</span> <span class="o">)</span> <span class="bp">∧</span><span class="o">(</span><span class="bp">¬</span> <span class="n">c</span> <span class="bp">∈</span> <span class="n">l</span> <span class="o">)</span> <span class="bp">∧</span> <span class="o">(</span><span class="n">d</span> <span class="bp">∈</span> <span class="n">l</span><span class="o">)</span> <span class="bp">∧</span> <span class="o">(</span><span class="n">B</span> <span class="n">a</span> <span class="n">d</span> <span class="n">b</span><span class="o">)</span> <span class="bp">→</span>
<span class="bp">∃</span> <span class="o">(</span><span class="n">e</span> <span class="o">:</span> <span class="n">point</span> <span class="o">),</span> <span class="o">(</span><span class="n">e</span> <span class="bp">∈</span> <span class="n">l</span><span class="o">)</span> <span class="bp">∧</span> <span class="o">(</span><span class="n">B</span> <span class="n">a</span> <span class="n">e</span> <span class="n">c</span> <span class="bp">∧</span> <span class="bp">¬</span> <span class="n">B</span> <span class="n">b</span> <span class="n">e</span> <span class="n">c</span><span class="o">)</span> <span class="bp">∨</span> <span class="o">(</span><span class="n">B</span> <span class="n">b</span> <span class="n">e</span> <span class="n">c</span> <span class="bp">∧</span> <span class="bp">¬</span> <span class="n">B</span> <span class="n">a</span> <span class="n">e</span> <span class="n">c</span><span class="o">))</span>
<span class="kn">open</span> <span class="n">axioms2</span>

<span class="kd">variable</span> <span class="o">[</span><span class="n">I2</span> <span class="o">:</span> <span class="n">axioms2</span> <span class="n">point</span><span class="o">]</span>
<span class="kn">include</span> <span class="n">I2</span>

<span class="kd">def</span> <span class="n">lineseg</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">point</span><span class="o">)</span> <span class="o">:</span> <span class="n">set</span> <span class="n">point</span> <span class="o">:=</span> <span class="o">{</span><span class="n">x</span> <span class="o">:</span> <span class="n">point</span> <span class="bp">|</span> <span class="n">B</span> <span class="n">a</span> <span class="n">x</span> <span class="n">b</span><span class="o">}</span>

<span class="kd">lemma</span> <span class="n">linesegsingleton</span> <span class="o">(</span> <span class="n">a</span> <span class="o">:</span> <span class="n">point</span><span class="o">)</span> <span class="o">:</span> <span class="n">lineseg</span> <span class="n">a</span> <span class="n">a</span> <span class="bp">=</span> <span class="o">{</span><span class="n">a</span><span class="o">}</span> <span class="o">:=</span>
<span class="kd">begin</span>
<span class="c1">--  have := I2, -- not necessary</span>
  <span class="k">have</span> <span class="o">:=</span> <span class="n">B1</span> <span class="n">a</span> <span class="n">a</span> <span class="n">a</span> <span class="o">,</span> <span class="c1">-- now works</span>
  <span class="gr">sorry</span><span class="o">,</span>
<span class="kd">end</span>
</code></pre></div>



<a name="253511381"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Extending%20a%20class/near/253511381" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Notification Bot <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Extending.20a.20class.html#253511381">(Sep 16 2021 at 00:50)</a>:</h4>
<p><span class="user-mention silent" data-user-id="407577">Andre Hernandez-Espiet (Rutgers)</span> has marked this topic as unresolved.</p>



<a name="253511554"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Extending%20a%20class/near/253511554" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Andre Hernandez-Espiet (Rutgers) <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Extending.20a.20class.html#253511554">(Sep 16 2021 at 00:52)</a>:</h4>
<p>Actually, I tried to extend the class again and I am running into issues again. It seems like I don't entirely grasp this yet. The code is not ok with the line <code>variable [A3 : axioms3 point]</code> and gives some error about the axiom <code>C2</code> when applied at the end.</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span>  <span class="n">data.set</span> <span class="n">tactic.interactive</span> <span class="n">set_theory.zfc</span>
<span class="kd">class</span> <span class="n">incidence_geometry</span> <span class="o">(</span><span class="n">point</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">):=</span>
<span class="o">(</span><span class="n">lines</span> <span class="o">:</span> <span class="n">set</span> <span class="o">(</span><span class="n">set</span> <span class="n">point</span><span class="o">))</span>
<span class="o">(</span><span class="n">eqd</span> <span class="o">:</span> <span class="n">point</span> <span class="bp">→</span> <span class="n">point</span> <span class="bp">→</span> <span class="n">point</span> <span class="bp">→</span> <span class="n">point</span> <span class="bp">→</span> <span class="kt">Prop</span><span class="o">)</span>

<span class="o">(</span><span class="n">B</span><span class="o">:</span> <span class="n">point</span> <span class="bp">→</span> <span class="n">point</span> <span class="bp">→</span> <span class="n">point</span> <span class="bp">→</span> <span class="kt">Prop</span><span class="o">)</span>
<span class="o">[</span><span class="n">dec_B</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">a</span> <span class="n">b</span> <span class="n">c</span><span class="o">,</span> <span class="n">decidable</span> <span class="o">(</span><span class="n">B</span> <span class="n">a</span> <span class="n">b</span> <span class="n">c</span><span class="o">)]</span>
<span class="c1">-- Equidistance of 4 Points</span>
<span class="o">(</span><span class="n">P1</span> <span class="o">{}</span> <span class="o">:</span> <span class="n">point</span><span class="o">)</span> <span class="o">(</span><span class="n">P2</span> <span class="o">{}</span> <span class="o">:</span> <span class="n">point</span><span class="o">)</span> <span class="o">(</span><span class="n">P3</span> <span class="o">{}</span> <span class="o">:</span> <span class="n">point</span><span class="o">)</span>

<span class="o">(</span><span class="n">I1a</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">point</span><span class="o">),</span> <span class="n">a</span><span class="bp">≠</span><span class="n">b</span> <span class="bp">→</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">l</span> <span class="bp">∈</span>  <span class="n">lines</span><span class="o">)</span> <span class="o">,</span> <span class="n">a</span><span class="bp">∈</span> <span class="n">l</span> <span class="bp">∧</span> <span class="n">b</span><span class="bp">∈</span> <span class="n">l</span><span class="o">)</span>
<span class="o">(</span><span class="n">I1b</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">point</span><span class="o">),</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">l</span> <span class="n">l'</span><span class="bp">∈</span>  <span class="n">lines</span><span class="o">),</span> <span class="n">a</span><span class="bp">≠</span><span class="n">b</span> <span class="bp">→</span>  <span class="n">a</span><span class="bp">∈</span>  <span class="n">l</span> <span class="bp">→</span>  <span class="n">b</span><span class="bp">∈</span>  <span class="n">l</span> <span class="bp">→</span>  <span class="n">a</span><span class="bp">∈</span>  <span class="n">l'</span> <span class="bp">→</span>  <span class="n">b</span><span class="bp">∈</span>  <span class="n">l'</span>  <span class="bp">→</span><span class="n">l</span><span class="bp">=</span><span class="n">l'</span><span class="o">)</span>
<span class="o">(</span><span class="n">I2</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">l</span> <span class="bp">∈</span> <span class="n">lines</span><span class="o">,</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">X</span><span class="o">:</span><span class="n">point</span><span class="bp">×</span><span class="n">point</span><span class="o">),</span> <span class="n">X.1</span> <span class="bp">∈</span> <span class="n">l</span> <span class="bp">∧</span>  <span class="n">X.2</span> <span class="bp">∈</span> <span class="n">l</span> <span class="bp">∧</span> <span class="n">X.1</span><span class="bp">≠</span> <span class="n">X.2</span><span class="o">)</span>
<span class="o">(</span><span class="n">I3</span> <span class="o">:</span> <span class="bp">¬</span> <span class="bp">∃</span> <span class="n">l</span> <span class="bp">∈</span> <span class="n">lines</span> <span class="o">,</span> <span class="n">P1</span><span class="bp">∈</span>  <span class="n">l</span> <span class="bp">∧</span> <span class="n">P2</span><span class="bp">∈</span>  <span class="n">l</span> <span class="bp">∧</span> <span class="n">P3</span><span class="bp">∈</span>  <span class="n">l</span><span class="o">)</span>
<span class="kn">open</span> <span class="n">incidence_geometry</span>

<span class="kd">variables</span> <span class="o">{</span><span class="n">point</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">}</span> <span class="o">[</span><span class="n">A</span> <span class="o">:</span> <span class="n">incidence_geometry</span> <span class="n">point</span><span class="o">]</span>

<span class="kd">theorem</span> <span class="n">ptoffline</span> <span class="o">{</span><span class="n">l</span> <span class="o">:</span> <span class="n">set</span> <span class="n">point</span><span class="o">}(</span><span class="n">H</span> <span class="o">:</span> <span class="n">l</span> <span class="bp">∈</span> <span class="n">A.lines</span><span class="o">):</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="n">point</span><span class="o">),</span> <span class="o">(</span><span class="n">p</span> <span class="bp">∉</span> <span class="n">l</span><span class="o">)</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">by_cases</span> <span class="n">h1</span><span class="o">:</span> <span class="n">P1</span><span class="bp">∉</span> <span class="n">l</span><span class="o">,</span><span class="n">use</span> <span class="n">P1</span><span class="o">,</span>
  <span class="n">by_cases</span> <span class="n">h2</span><span class="o">:</span> <span class="n">P2</span><span class="bp">∉</span> <span class="n">l</span><span class="o">,</span> <span class="n">use</span> <span class="n">P2</span><span class="o">,</span>
  <span class="n">by_cases</span> <span class="n">h3</span><span class="o">:</span> <span class="n">P3</span><span class="bp">∉</span> <span class="n">l</span><span class="o">,</span> <span class="n">use</span> <span class="n">P3</span><span class="o">,</span>
  <span class="n">push_neg</span> <span class="n">at</span> <span class="n">h1</span> <span class="n">h2</span> <span class="n">h3</span><span class="o">,</span>
  <span class="n">exfalso</span><span class="o">,</span>
  <span class="k">have</span> <span class="o">:</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">l</span><span class="bp">∈</span> <span class="n">lines</span><span class="o">),</span> <span class="o">(</span><span class="n">P1</span><span class="bp">∈</span> <span class="n">l</span> <span class="bp">∧</span> <span class="n">P2</span><span class="bp">∈</span> <span class="n">l</span><span class="bp">∧</span> <span class="n">P3</span><span class="bp">∈</span> <span class="n">l</span><span class="o">),</span>
  <span class="o">{</span>
    <span class="n">use</span> <span class="n">l</span><span class="o">,</span>
    <span class="n">exact</span> <span class="o">⟨</span><span class="n">H</span><span class="o">,</span> <span class="n">h1</span><span class="o">,</span> <span class="n">h2</span><span class="o">,</span> <span class="n">h3</span> <span class="o">⟩,</span>
  <span class="o">},</span>
  <span class="n">exact</span> <span class="n">I3</span> <span class="n">this</span><span class="o">,</span>
<span class="kd">end</span>

<span class="kd">theorem</span> <span class="n">LinesOnePt</span> <span class="o">{</span><span class="n">p</span> <span class="n">p'</span><span class="o">:</span> <span class="n">point</span><span class="o">}</span> <span class="o">{</span><span class="n">l1</span> <span class="n">l2</span> <span class="o">:</span>  <span class="n">set</span> <span class="n">point</span><span class="o">}</span> <span class="o">(</span><span class="n">l1</span><span class="bp">≠</span> <span class="n">l2</span><span class="o">)</span> <span class="o">(</span><span class="n">h1</span> <span class="o">:</span> <span class="n">l1</span> <span class="bp">∈</span> <span class="n">A.lines</span><span class="o">)(</span><span class="n">h2</span> <span class="o">:</span> <span class="n">l2</span> <span class="bp">∈</span>  <span class="n">A.lines</span><span class="o">):</span> <span class="n">p</span><span class="bp">∈</span>  <span class="n">l1</span> <span class="bp">→</span>  <span class="n">p</span><span class="bp">∈</span>  <span class="n">l2</span> <span class="bp">→</span>  <span class="n">p'</span><span class="bp">∈</span>  <span class="n">l1</span> <span class="bp">→</span>  <span class="n">p'</span><span class="bp">∈</span>  <span class="n">l2</span> <span class="bp">→</span> <span class="n">p</span><span class="bp">=</span><span class="n">p'</span><span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">intros</span> <span class="n">hyp1</span> <span class="n">hyp2</span> <span class="n">hyp3</span> <span class="n">hyp4</span><span class="o">,</span>
  <span class="n">apply</span> <span class="n">by_contra</span><span class="o">,</span>
  <span class="n">intros</span> <span class="n">h</span><span class="o">,</span>
  <span class="n">exact</span> <span class="n">H</span><span class="o">(</span> <span class="n">I1b</span> <span class="n">p</span> <span class="n">p'</span> <span class="n">l1</span> <span class="n">l2</span> <span class="n">h1</span>  <span class="n">h2</span> <span class="n">h</span> <span class="n">hyp1</span> <span class="n">hyp3</span> <span class="n">hyp2</span> <span class="n">hyp4</span><span class="o">),</span>
<span class="kd">end</span>

<span class="kd">def</span> <span class="n">parallel</span> <span class="o">(</span><span class="n">l1</span> <span class="n">l2</span> <span class="o">:</span>  <span class="n">set</span> <span class="n">point</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">:=</span> <span class="o">(</span><span class="n">l1</span> <span class="bp">∈</span> <span class="n">A.lines</span><span class="o">)</span><span class="bp">∧</span> <span class="o">(</span><span class="n">l2</span> <span class="bp">∈</span> <span class="n">A.lines</span><span class="o">)</span> <span class="bp">∧</span> <span class="n">l1</span><span class="bp">∩</span><span class="n">l2</span><span class="bp">=∅</span>

<span class="kd">class</span> <span class="n">axioms2</span> <span class="o">(</span><span class="n">point</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="kd">extends</span> <span class="n">incidence_geometry</span> <span class="n">point</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">Pa</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">point</span><span class="o">),</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">l</span> <span class="bp">∈</span> <span class="n">lines</span> <span class="o">),</span> <span class="o">((</span><span class="bp">¬</span> <span class="n">a</span><span class="bp">∈</span> <span class="n">l</span><span class="o">)</span> <span class="bp">→</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">l'</span><span class="bp">∈</span>  <span class="n">lines</span><span class="o">),</span> <span class="n">parallel</span> <span class="n">l</span> <span class="n">l'</span> <span class="bp">∧</span> <span class="n">a</span> <span class="bp">∈</span> <span class="n">l'</span><span class="o">))</span>
<span class="o">(</span><span class="n">Pb</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">point</span><span class="o">),</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">l</span> <span class="bp">∈</span> <span class="n">lines</span><span class="o">),</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">l1</span> <span class="bp">∈</span> <span class="n">lines</span><span class="o">),</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">l2</span> <span class="bp">∈</span> <span class="n">lines</span><span class="o">),</span> <span class="n">parallel</span> <span class="n">l</span> <span class="n">l1</span>
<span class="bp">∧</span> <span class="n">parallel</span> <span class="n">l</span> <span class="n">l2</span> <span class="bp">∧</span> <span class="n">a</span><span class="bp">∈</span> <span class="n">l1</span> <span class="bp">→</span> <span class="bp">¬</span> <span class="n">a</span><span class="bp">∈</span> <span class="n">l2</span><span class="o">)</span>
<span class="o">(</span><span class="n">B1</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">point</span><span class="o">,</span> <span class="n">B</span> <span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="bp">→</span> <span class="n">B</span> <span class="n">c</span> <span class="n">b</span> <span class="n">a</span> <span class="o">)</span>
<span class="o">(</span><span class="n">B2</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">point</span> <span class="o">,</span> <span class="bp">∃</span> <span class="n">c</span> <span class="o">:</span> <span class="n">point</span> <span class="o">,</span> <span class="n">B</span> <span class="n">a</span> <span class="n">b</span> <span class="n">c</span><span class="o">)</span>
<span class="o">(</span><span class="n">B2b</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">a</span> <span class="n">x</span> <span class="o">:</span> <span class="n">point</span> <span class="o">,</span> <span class="n">B</span> <span class="n">a</span> <span class="n">x</span> <span class="n">a</span> <span class="bp">→</span> <span class="n">x</span><span class="bp">=</span><span class="n">a</span><span class="o">)</span>
<span class="o">(</span><span class="n">B3</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">l</span> <span class="bp">∈</span> <span class="n">lines</span><span class="o">,</span> <span class="bp">∀</span> <span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="bp">∈</span> <span class="n">l</span><span class="o">,</span> <span class="n">xor</span> <span class="o">(</span><span class="n">xor</span> <span class="o">(</span><span class="n">B</span> <span class="n">a</span> <span class="n">b</span> <span class="n">c</span><span class="o">)</span> <span class="o">(</span><span class="n">B</span> <span class="n">b</span> <span class="n">c</span> <span class="n">a</span><span class="o">))</span> <span class="o">(</span><span class="n">B</span> <span class="n">c</span> <span class="n">a</span> <span class="n">b</span><span class="o">))</span>
<span class="o">(</span><span class="n">B4</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="n">d</span><span class="o">:</span> <span class="n">point</span><span class="o">,</span> <span class="bp">∀</span> <span class="n">l</span><span class="bp">∈</span> <span class="n">lines</span><span class="o">,</span> <span class="o">(</span><span class="bp">¬</span> <span class="n">a</span> <span class="bp">∈</span> <span class="n">l</span> <span class="o">)</span> <span class="bp">∧</span><span class="o">(</span><span class="bp">¬</span> <span class="n">b</span> <span class="bp">∈</span> <span class="n">l</span> <span class="o">)</span> <span class="bp">∧</span><span class="o">(</span><span class="bp">¬</span> <span class="n">c</span> <span class="bp">∈</span> <span class="n">l</span> <span class="o">)</span> <span class="bp">∧</span> <span class="o">(</span><span class="n">d</span> <span class="bp">∈</span> <span class="n">l</span><span class="o">)</span> <span class="bp">∧</span> <span class="o">(</span><span class="n">B</span> <span class="n">a</span> <span class="n">d</span> <span class="n">b</span><span class="o">)</span> <span class="bp">→</span>
<span class="bp">∃</span> <span class="o">(</span><span class="n">e</span> <span class="o">:</span> <span class="n">point</span> <span class="o">),</span> <span class="o">(</span><span class="n">e</span> <span class="bp">∈</span> <span class="n">l</span><span class="o">)</span> <span class="bp">∧</span> <span class="o">(</span><span class="n">B</span> <span class="n">a</span> <span class="n">e</span> <span class="n">c</span> <span class="bp">∧</span> <span class="bp">¬</span> <span class="n">B</span> <span class="n">b</span> <span class="n">e</span> <span class="n">c</span><span class="o">)</span> <span class="bp">∨</span> <span class="o">(</span><span class="n">B</span> <span class="n">b</span> <span class="n">e</span> <span class="n">c</span> <span class="bp">∧</span> <span class="bp">¬</span> <span class="n">B</span> <span class="n">a</span> <span class="n">e</span> <span class="n">c</span><span class="o">))</span>
<span class="kn">open</span> <span class="n">axioms2</span>

<span class="kd">variable</span> <span class="o">[</span><span class="n">A2</span> <span class="o">:</span> <span class="n">axioms2</span> <span class="n">point</span><span class="o">]</span>
<span class="kn">include</span> <span class="n">A2</span>

<span class="kd">def</span> <span class="n">lineseg</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">point</span><span class="o">)</span> <span class="o">:</span> <span class="n">set</span> <span class="n">point</span> <span class="o">:=</span> <span class="o">{</span><span class="n">x</span> <span class="o">:</span> <span class="n">point</span> <span class="bp">|</span> <span class="n">B</span> <span class="n">a</span> <span class="n">x</span> <span class="n">b</span><span class="o">}</span>

<span class="kd">lemma</span> <span class="n">linesegsingleton</span> <span class="o">(</span> <span class="n">a</span> <span class="o">:</span> <span class="n">point</span><span class="o">)</span> <span class="o">:</span> <span class="n">lineseg</span> <span class="n">a</span> <span class="n">a</span> <span class="bp">=</span> <span class="o">{</span><span class="n">a</span><span class="o">}</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">dsimp</span> <span class="o">[</span><span class="n">lineseg</span><span class="o">],</span>
  <span class="n">ext</span><span class="o">,</span>
  <span class="n">split</span><span class="o">,{</span>
    <span class="n">intro</span> <span class="n">hyp</span><span class="o">,</span>
    <span class="n">simp</span> <span class="n">at</span> <span class="n">hyp</span><span class="o">,</span>
    <span class="n">simp</span><span class="o">,</span>
    <span class="gr">sorry</span><span class="o">,</span><span class="c1">--have := B2b ,</span>
  <span class="o">},</span>
  <span class="gr">sorry</span><span class="o">,</span>
<span class="kd">end</span>

<span class="kd">def</span> <span class="n">triangle</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">point</span><span class="o">)</span> <span class="o">:</span> <span class="n">set</span> <span class="n">point</span> <span class="o">:=</span><span class="n">lineseg</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">∪</span> <span class="n">lineseg</span> <span class="n">a</span> <span class="n">c</span> <span class="bp">∪</span> <span class="n">lineseg</span> <span class="n">b</span> <span class="n">c</span>

<span class="kd">theorem</span> <span class="n">PlaneSep</span> <span class="o">{</span><span class="n">l</span> <span class="o">:</span> <span class="n">set</span> <span class="n">point</span><span class="o">}</span> <span class="o">(</span><span class="n">hl</span> <span class="o">:</span> <span class="n">l</span> <span class="bp">∈</span> <span class="n">A.lines</span><span class="o">):</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">S1</span> <span class="n">S2</span> <span class="o">:</span> <span class="n">set</span> <span class="n">point</span><span class="o">),</span> <span class="n">S1</span><span class="bp">≠∅</span> <span class="bp">∧</span> <span class="n">S2</span><span class="bp">≠∅</span> <span class="bp">∧</span>
<span class="o">(</span><span class="bp">∀</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">point</span><span class="o">),</span> <span class="bp">¬</span> <span class="o">(</span><span class="n">a</span><span class="bp">∈</span> <span class="n">l</span><span class="o">)</span><span class="bp">→</span> <span class="bp">¬</span> <span class="o">(</span><span class="n">b</span><span class="bp">∈</span> <span class="n">l</span><span class="o">)</span> <span class="bp">→</span> <span class="o">((</span><span class="n">lineseg</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">∩</span> <span class="n">l</span> <span class="bp">=</span> <span class="bp">∅</span> <span class="bp">↔</span> <span class="o">((</span><span class="n">a</span><span class="bp">∈</span> <span class="n">S1</span> <span class="bp">∧</span> <span class="n">b</span><span class="bp">∈</span> <span class="n">S1</span><span class="o">)</span><span class="bp">∨</span> <span class="o">(</span><span class="n">a</span> <span class="bp">∈</span> <span class="n">S2</span> <span class="bp">∧</span> <span class="n">b</span> <span class="bp">∈</span> <span class="n">S2</span><span class="o">)))</span><span class="bp">∧</span>
<span class="o">(</span><span class="n">lineseg</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">∩</span> <span class="n">l</span> <span class="bp">≠</span> <span class="bp">∅</span> <span class="bp">↔</span> <span class="o">(</span><span class="n">a</span><span class="bp">∈</span> <span class="n">S1</span> <span class="bp">∧</span> <span class="n">b</span><span class="bp">∈</span> <span class="n">S2</span><span class="o">)</span><span class="bp">∨</span> <span class="o">(</span><span class="n">a</span> <span class="bp">∈</span> <span class="n">S2</span> <span class="bp">∧</span> <span class="n">b</span> <span class="bp">∈</span> <span class="n">S1</span><span class="o">)))):=</span>
<span class="kd">begin</span>
  <span class="n">obtain</span> <span class="o">⟨</span><span class="n">p</span><span class="o">,</span> <span class="n">hp</span> <span class="o">⟩</span>  <span class="o">:=</span> <span class="n">ptoffline</span> <span class="n">hl</span><span class="o">,</span>
  <span class="k">let</span> <span class="n">S1</span> <span class="o">:=</span> <span class="o">{</span><span class="n">x</span> <span class="o">:</span> <span class="n">point</span> <span class="bp">|</span> <span class="n">lineseg</span> <span class="n">x</span> <span class="n">p</span> <span class="bp">∩</span> <span class="n">l</span> <span class="bp">=∅</span> <span class="o">},</span>
  <span class="k">let</span> <span class="n">S2</span> <span class="o">:=</span> <span class="o">{</span><span class="n">x</span> <span class="o">:</span> <span class="n">point</span> <span class="bp">|</span> <span class="n">x</span><span class="bp">∉</span> <span class="n">l</span> <span class="bp">∧</span> <span class="n">lineseg</span> <span class="n">x</span> <span class="n">p</span> <span class="bp">∩</span> <span class="n">l</span> <span class="bp">≠</span> <span class="bp">∅</span>  <span class="o">},</span>
  <span class="n">use</span> <span class="o">[</span><span class="n">S1</span><span class="o">,</span> <span class="n">S2</span><span class="o">],</span>
  <span class="n">split</span><span class="o">,</span>
  <span class="o">{</span>
    <span class="k">have</span> <span class="o">:</span> <span class="n">p</span><span class="bp">∈</span> <span class="n">S1</span><span class="o">,{</span>
      <span class="n">dsimp</span> <span class="o">[</span><span class="n">S1</span><span class="o">],</span>

    <span class="o">},</span>
   <span class="n">intro</span> <span class="n">hyp</span><span class="o">,</span>
   <span class="n">exact</span> <span class="n">set.eq_empty_iff_forall_not_mem.mp</span> <span class="n">hyp</span> <span class="n">p</span> <span class="n">this</span><span class="o">,</span>
  <span class="o">},</span>
<span class="kd">end</span>

<span class="kd">theorem</span> <span class="n">LineSep</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">point</span><span class="o">)</span> <span class="o">(</span><span class="n">l</span> <span class="bp">∈</span> <span class="n">A.lines</span><span class="o">)</span> <span class="o">:</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">S1</span> <span class="n">S2</span> <span class="o">:</span> <span class="n">set</span> <span class="n">point</span><span class="o">),</span> <span class="n">S1</span><span class="bp">≠∅</span> <span class="bp">∧</span> <span class="n">S2</span><span class="bp">≠∅</span> <span class="bp">∧</span>
<span class="o">(</span><span class="bp">∀</span> <span class="o">(</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">point</span><span class="o">),</span> <span class="n">b</span><span class="bp">∈</span> <span class="n">S1</span> <span class="bp">∧</span> <span class="n">c</span><span class="bp">∈</span> <span class="n">S1</span> <span class="bp">↔</span> <span class="bp">¬</span> <span class="o">(</span><span class="n">a</span> <span class="bp">∈</span> <span class="n">lineseg</span> <span class="n">b</span> <span class="n">c</span><span class="o">))</span><span class="bp">∧</span>
 <span class="o">(</span><span class="bp">∀</span> <span class="o">(</span> <span class="n">d</span> <span class="n">e</span> <span class="o">:</span> <span class="n">point</span><span class="o">),</span> <span class="n">d</span><span class="bp">∈</span> <span class="n">S1</span> <span class="bp">∧</span> <span class="n">e</span><span class="bp">∈</span> <span class="n">S2</span> <span class="bp">↔</span> <span class="bp">¬</span> <span class="o">(</span><span class="n">a</span> <span class="bp">∈</span> <span class="n">lineseg</span> <span class="n">d</span> <span class="n">e</span><span class="o">))</span><span class="bp">∧</span>
 <span class="o">(</span><span class="bp">∀</span> <span class="o">(</span> <span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">point</span> <span class="o">),</span> <span class="n">f</span><span class="bp">∈</span> <span class="n">S1</span> <span class="bp">∧</span> <span class="n">g</span><span class="bp">∈</span> <span class="n">S2</span> <span class="bp">↔</span> <span class="n">a</span> <span class="bp">∈</span> <span class="n">lineseg</span> <span class="n">f</span> <span class="n">g</span> <span class="o">):=</span><span class="gr">sorry</span>

<span class="kd">def</span> <span class="n">samesideline</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">point</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">:=</span> <span class="bp">¬</span> <span class="o">(</span><span class="n">a</span> <span class="bp">∈</span> <span class="n">lineseg</span> <span class="n">b</span> <span class="n">c</span><span class="o">)</span>
<span class="kd">def</span> <span class="n">difsideline</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">point</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">:=</span> <span class="o">(</span><span class="n">a</span> <span class="bp">∈</span> <span class="n">lineseg</span> <span class="n">b</span> <span class="n">c</span><span class="o">)</span>
<span class="kd">def</span> <span class="n">ray</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">point</span><span class="o">)</span> <span class="o">:</span> <span class="n">set</span> <span class="n">point</span> <span class="o">:=</span> <span class="o">{</span><span class="n">a</span><span class="o">}</span><span class="bp">∪</span><span class="o">{</span><span class="n">x</span> <span class="o">:</span> <span class="n">point</span> <span class="bp">|</span> <span class="n">samesideline</span> <span class="n">a</span> <span class="n">b</span> <span class="n">x</span><span class="o">}</span>
<span class="kd">def</span> <span class="n">angle</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">point</span><span class="o">)</span> <span class="o">:</span> <span class="n">set</span> <span class="n">point</span> <span class="o">:=</span> <span class="n">ray</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">∪</span> <span class="n">ray</span> <span class="n">a</span> <span class="n">c</span>
<span class="kd">def</span> <span class="n">samesideplane</span> <span class="o">(</span><span class="n">l</span> <span class="o">:</span> <span class="n">set</span> <span class="n">point</span><span class="o">)</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">point</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">:=</span> <span class="n">l</span><span class="bp">∈</span> <span class="n">A.lines</span> <span class="bp">∧</span> <span class="n">lineseg</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">∩</span> <span class="n">l</span> <span class="bp">=∅</span>
<span class="kd">def</span> <span class="n">vertexray</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">point</span> <span class="o">)(</span><span class="n">h</span><span class="o">:</span> <span class="n">ray</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="o">:</span> <span class="n">point</span> <span class="o">:=</span> <span class="n">a</span>
<span class="kd">def</span> <span class="n">linetwopts</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">point</span><span class="o">)</span> <span class="o">(</span><span class="n">l</span> <span class="o">:</span> <span class="n">set</span> <span class="n">point</span><span class="o">):</span> <span class="kt">Prop</span> <span class="o">:=</span> <span class="n">l</span><span class="bp">∈</span> <span class="n">A.lines</span> <span class="bp">∧</span>  <span class="n">a</span><span class="bp">∈</span> <span class="n">l</span> <span class="bp">∧</span> <span class="n">b</span> <span class="bp">∈</span> <span class="n">l</span>

<span class="kd">lemma</span> <span class="n">linetwoptsym</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">point</span><span class="o">)</span> <span class="o">(</span><span class="n">l</span> <span class="o">:</span> <span class="n">set</span> <span class="n">point</span><span class="o">)</span> <span class="o">:</span> <span class="n">linetwopts</span> <span class="n">a</span> <span class="n">b</span> <span class="n">l</span> <span class="bp">→</span> <span class="n">linetwopts</span> <span class="n">b</span> <span class="n">a</span> <span class="n">l</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">intro</span> <span class="n">hyp</span><span class="o">,</span><span class="n">exact</span> <span class="o">⟨</span> <span class="n">hyp.1</span><span class="o">,</span> <span class="n">hyp.2.2</span><span class="o">,</span> <span class="n">hyp.2.1</span><span class="o">⟩</span> <span class="o">,</span>
<span class="kd">end</span>

<span class="kd">def</span> <span class="n">insideang</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">point</span><span class="o">)</span> <span class="o">(</span><span class="n">lab</span> <span class="n">lcb</span> <span class="o">:</span> <span class="n">set</span> <span class="n">point</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span><span class="o">:</span> <span class="n">angle</span> <span class="n">a</span> <span class="n">b</span> <span class="n">c</span><span class="o">)</span> <span class="o">(</span><span class="n">h2</span> <span class="o">:</span> <span class="n">linetwopts</span> <span class="n">a</span> <span class="n">b</span> <span class="n">lab</span><span class="o">)</span>
    <span class="o">(</span><span class="n">h3</span> <span class="o">:</span> <span class="n">linetwopts</span> <span class="n">c</span> <span class="n">b</span> <span class="n">lcb</span><span class="o">)</span> <span class="o">:=</span>
    <span class="o">{</span><span class="n">d</span> <span class="o">:</span> <span class="n">point</span> <span class="bp">|</span> <span class="n">lab</span> <span class="bp">∈</span> <span class="n">A.lines</span> <span class="bp">∧</span> <span class="n">lcb</span> <span class="bp">∈</span> <span class="n">A.lines</span> <span class="bp">∧</span> <span class="n">samesideplane</span> <span class="n">lab</span> <span class="n">d</span> <span class="n">c</span> <span class="bp">∧</span> <span class="n">samesideplane</span> <span class="n">lcb</span> <span class="n">d</span> <span class="n">a</span><span class="o">}</span>
<span class="kd">def</span> <span class="n">insidetri</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">point</span><span class="o">)</span> <span class="o">(</span><span class="n">lab</span> <span class="n">lac</span> <span class="n">lbc</span> <span class="o">:</span> <span class="n">set</span> <span class="n">point</span><span class="o">)</span>
  <span class="o">(</span><span class="n">hab</span><span class="o">:</span> <span class="n">linetwopts</span> <span class="n">a</span> <span class="n">b</span> <span class="n">lab</span><span class="o">)</span> <span class="o">(</span><span class="n">hbc</span> <span class="o">:</span> <span class="n">linetwopts</span> <span class="n">b</span> <span class="n">c</span> <span class="n">lbc</span> <span class="o">)</span> <span class="o">(</span><span class="n">hac</span> <span class="o">:</span> <span class="n">linetwopts</span> <span class="n">a</span> <span class="n">c</span> <span class="n">lac</span><span class="o">)</span>
  <span class="o">(</span><span class="n">angabc</span> <span class="o">:</span> <span class="n">angle</span> <span class="n">a</span> <span class="n">b</span> <span class="n">c</span><span class="o">)</span> <span class="o">(</span><span class="n">angbac</span> <span class="o">:</span> <span class="n">angle</span> <span class="n">b</span> <span class="n">a</span> <span class="n">c</span><span class="o">)</span> <span class="o">(</span><span class="n">angacb</span> <span class="o">:</span> <span class="n">angle</span> <span class="n">a</span> <span class="n">c</span> <span class="n">b</span><span class="o">):=</span>
  <span class="o">{</span><span class="n">x</span> <span class="o">:</span> <span class="n">point</span> <span class="bp">|</span> <span class="o">(</span><span class="n">x</span><span class="bp">∈</span> <span class="n">insideang</span> <span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="n">lab</span> <span class="n">lbc</span> <span class="n">angabc</span> <span class="n">hab</span> <span class="o">(</span><span class="n">linetwoptsym</span> <span class="n">b</span> <span class="n">c</span> <span class="n">lbc</span> <span class="n">hbc</span><span class="o">)</span><span class="bp">∧</span>
  <span class="o">(</span><span class="n">x</span><span class="bp">∈</span> <span class="n">insideang</span> <span class="n">b</span> <span class="n">a</span> <span class="n">c</span> <span class="n">lab</span> <span class="n">lac</span> <span class="n">angbac</span> <span class="o">(</span><span class="n">linetwoptsym</span> <span class="n">a</span> <span class="n">b</span> <span class="n">lab</span> <span class="n">hab</span><span class="o">)</span> <span class="o">(</span><span class="n">linetwoptsym</span> <span class="n">a</span> <span class="n">c</span> <span class="n">lac</span> <span class="n">hac</span><span class="o">))</span>
   <span class="bp">∧</span> <span class="o">(</span><span class="n">x</span><span class="bp">∈</span> <span class="n">insideang</span> <span class="n">a</span> <span class="n">c</span> <span class="n">b</span> <span class="n">lac</span> <span class="n">lbc</span> <span class="n">angacb</span> <span class="n">hac</span> <span class="n">hbc</span> <span class="o">))}</span>

<span class="kd">theorem</span> <span class="n">crossbar</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="n">d</span> <span class="o">:</span> <span class="n">point</span><span class="o">)</span> <span class="o">(</span><span class="n">lab</span> <span class="n">lcb</span> <span class="o">:</span> <span class="n">set</span> <span class="n">point</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span><span class="o">:</span> <span class="n">angle</span> <span class="n">a</span> <span class="n">b</span> <span class="n">c</span><span class="o">)</span> <span class="o">(</span><span class="n">h2</span> <span class="o">:</span> <span class="n">linetwopts</span> <span class="n">a</span> <span class="n">b</span> <span class="n">lab</span><span class="o">)</span>
    <span class="o">(</span><span class="n">h3</span> <span class="o">:</span> <span class="n">linetwopts</span> <span class="n">c</span> <span class="n">b</span> <span class="n">lcb</span><span class="o">)</span> <span class="o">(</span><span class="n">h1</span> <span class="o">:</span> <span class="n">d</span><span class="bp">∈</span> <span class="n">insideang</span> <span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="n">lab</span> <span class="n">lcb</span> <span class="n">h</span> <span class="n">h2</span> <span class="n">h3</span><span class="o">)</span> <span class="o">:</span> <span class="n">ray</span> <span class="n">a</span> <span class="n">d</span> <span class="bp">∩</span> <span class="n">lineseg</span> <span class="n">b</span> <span class="n">c</span> <span class="bp">≠</span> <span class="bp">∅</span> <span class="o">:=</span>
<span class="kd">begin</span>
<span class="gr">sorry</span><span class="o">,</span>
<span class="kd">end</span>

<span class="kd">class</span> <span class="n">axioms3</span> <span class="o">(</span><span class="n">point</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="kd">extends</span> <span class="n">axioms2</span> <span class="n">point</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">A</span><span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">point</span><span class="o">),</span> <span class="n">a</span><span class="bp">=</span><span class="n">a</span><span class="o">)</span>
<span class="o">(</span><span class="n">C1a</span><span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="n">e</span><span class="o">:</span> <span class="n">point</span><span class="o">),</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">d</span> <span class="o">:</span> <span class="n">point</span><span class="o">),</span> <span class="n">d</span><span class="bp">∈</span> <span class="n">ray</span> <span class="n">c</span> <span class="n">e</span> <span class="bp">→</span> <span class="n">eqd</span> <span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="n">d</span> <span class="o">)</span>
<span class="o">(</span><span class="n">C1b</span><span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="n">d</span> <span class="n">d1</span> <span class="n">e</span><span class="o">:</span> <span class="n">point</span><span class="o">),</span> <span class="n">d</span><span class="bp">∈</span> <span class="n">ray</span> <span class="n">c</span> <span class="n">e</span> <span class="bp">→</span> <span class="n">eqd</span> <span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="n">d</span> <span class="bp">→</span> <span class="n">eqd</span> <span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="n">d1</span> <span class="bp">→</span> <span class="n">d</span><span class="bp">=</span><span class="n">d1</span><span class="o">)</span>
<span class="o">(</span><span class="n">C2</span><span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="n">d</span> <span class="n">e</span> <span class="n">f</span> <span class="o">:</span> <span class="n">point</span><span class="o">),</span> <span class="n">eqd</span> <span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="n">d</span> <span class="bp">→</span> <span class="n">eqd</span> <span class="n">c</span> <span class="n">d</span> <span class="n">e</span> <span class="n">f</span> <span class="bp">→</span> <span class="n">eqd</span> <span class="n">a</span> <span class="n">b</span> <span class="n">e</span> <span class="n">f</span><span class="o">)</span>
<span class="o">(</span><span class="n">C3</span><span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="n">d</span> <span class="n">e</span> <span class="n">f</span> <span class="o">:</span> <span class="n">point</span><span class="o">),</span> <span class="n">B</span> <span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="bp">→</span> <span class="n">B</span> <span class="n">d</span> <span class="n">e</span> <span class="n">f</span> <span class="bp">→</span> <span class="n">eqd</span> <span class="n">a</span> <span class="n">b</span> <span class="n">d</span> <span class="n">e</span> <span class="bp">→</span> <span class="n">eqd</span> <span class="n">b</span> <span class="n">c</span> <span class="n">e</span> <span class="n">f</span><span class="bp">→</span> <span class="n">eqd</span> <span class="n">a</span> <span class="n">c</span> <span class="n">d</span> <span class="n">f</span><span class="o">)</span>
<span class="o">(</span><span class="n">C4</span><span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">point</span><span class="o">),</span> <span class="n">eqd</span> <span class="n">a</span> <span class="n">b</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span>
<span class="kn">open</span> <span class="n">axioms3</span>

<span class="kd">variable</span> <span class="o">[</span><span class="n">A3</span> <span class="o">:</span> <span class="n">axioms3</span> <span class="n">point</span><span class="o">]</span>
<span class="kn">include</span> <span class="n">A3</span>

<span class="kd">lemma</span> <span class="n">eqdsym</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="n">d</span><span class="o">:</span> <span class="n">point</span><span class="o">)</span> <span class="o">:</span> <span class="n">eqd</span> <span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="n">d</span> <span class="bp">→</span> <span class="n">eqd</span> <span class="n">c</span> <span class="n">d</span> <span class="n">a</span> <span class="n">b</span><span class="o">:=</span>
<span class="kd">begin</span>
<span class="n">intro</span> <span class="n">hyp</span><span class="o">,</span>

<span class="k">have</span> <span class="o">:=</span> <span class="n">C2</span> <span class="n">a</span> <span class="n">b</span> <span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="n">d</span> <span class="o">(</span><span class="n">C4</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="n">hyp</span><span class="o">,</span>
<span class="kd">end</span>
</code></pre></div>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>