---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/add_group.2C.20has_neg.2C.20and.20subtypes.20defined.20as.20sums.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/add_group.2C.20has_neg.2C.20and.20subtypes.20defined.20as.20sums.html">add_group, has_neg, and subtypes defined as sums</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="202204432"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/add_group%2C%20has_neg%2C%20and%20subtypes%20defined%20as%20sums/near/202204432" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/add_group.2C.20has_neg.2C.20and.20subtypes.20defined.20as.20sums.html#202204432">(Jun 27 2020 at 20:51)</a>:</h4>
<p>Here's my MVE:</p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="n">algebra</span><span class="bp">.</span><span class="n">group</span><span class="bp">.</span><span class="n">hom</span>
<span class="kn">universe</span> <span class="n">u</span>

<span class="kn">section</span>
    <span class="c1">-- these sorry&#39;s I have, but aren&#39;t relevant</span>
    <span class="kn">parameters</span> <span class="o">{</span><span class="n">G</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">}</span> <span class="o">[</span><span class="n">add_group</span> <span class="n">G</span><span class="o">]</span>
    <span class="n">def</span> <span class="n">B</span><span class="err">ᵣ</span> <span class="o">(</span><span class="n">r</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span> <span class="o">:=</span> <span class="o">{</span><span class="n">g</span> <span class="o">:</span> <span class="n">G</span> <span class="bp">//</span> <span class="n">sorry</span><span class="o">}</span>
    <span class="kn">instance</span> <span class="n">B</span><span class="err">ᵣ</span><span class="bp">_</span><span class="n">has_neg</span> <span class="o">(</span><span class="n">r</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="n">has_neg</span> <span class="o">(</span><span class="n">B</span><span class="err">ᵣ</span> <span class="n">r</span><span class="o">)</span> <span class="o">:=</span> <span class="n">sorry</span>

    <span class="c">/-</span><span class="cm"> an r-vector must be decomposable into r blades-/</span>
    <span class="n">def</span> <span class="n">is_rvector</span>  <span class="o">(</span><span class="n">r</span> <span class="o">:</span> <span class="n">nat</span><span class="o">)</span> <span class="o">(</span><span class="n">v</span> <span class="o">:</span> <span class="n">G</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">:=</span>
    <span class="bp">∃</span> <span class="o">(</span><span class="n">bs</span> <span class="o">:</span> <span class="n">list</span> <span class="o">(</span><span class="n">B</span><span class="err">ᵣ</span> <span class="n">r</span><span class="o">)),</span>
        <span class="n">v</span> <span class="bp">=</span> <span class="o">(</span><span class="n">bs</span><span class="bp">.</span><span class="n">map</span> <span class="n">subtype</span><span class="bp">.</span><span class="n">val</span><span class="o">)</span><span class="bp">.</span><span class="n">sum</span>

    <span class="c">/-</span><span class="cm"> the algebra of a single grade -/</span>
    <span class="n">def</span> <span class="n">G</span><span class="err">ᵣ</span> <span class="o">(</span><span class="n">r</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:=</span> <span class="o">{</span><span class="n">g</span> <span class="o">:</span> <span class="n">G</span> <span class="bp">//</span> <span class="n">is_rvector</span> <span class="n">r</span> <span class="n">g</span><span class="o">}</span>

    <span class="c1">-- I don&#39;t know how to obtain this without tediously expanding `list.sum` for every case.</span>
    <span class="kn">instance</span> <span class="n">g</span> <span class="o">(</span><span class="n">r</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="n">add_group</span> <span class="o">(</span><span class="n">G</span><span class="err">ᵣ</span> <span class="n">r</span><span class="o">)</span> <span class="o">:=</span> <span class="n">sorry</span>
<span class="kn">end</span>
</code></pre></div>


<p>Is there a trivial way to create an <code>instance</code> <code>add_group (Gᵣ  r)</code>? I can prove the properties one by one, but I get the feeling that mathlib already has what I need if I define <code>is_rvector</code> in a clever way.</p>



<a name="202205294"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/add_group%2C%20has_neg%2C%20and%20subtypes%20defined%20as%20sums/near/202205294" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/add_group.2C.20has_neg.2C.20and.20subtypes.20defined.20as.20sums.html#202205294">(Jun 27 2020 at 21:14)</a>:</h4>
<p>To help ward off accidental XY problems here, my actual problem is</p>
<blockquote>
<p>given a subtype <code>Br</code> of <code>G</code> where <code>[has_neg Br]</code> and <code>[add_group G]</code>, how do I form the subtype <code>Gr</code> which is the smallest subgroup of <code>G</code> which contains all of <code>Br</code>?</p>
</blockquote>



<a name="202205448"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/add_group%2C%20has_neg%2C%20and%20subtypes%20defined%20as%20sums/near/202205448" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/add_group.2C.20has_neg.2C.20and.20subtypes.20defined.20as.20sums.html#202205448">(Jun 27 2020 at 21:19)</a>:</h4>
<p>it might be better to work with sets instead of subtypes</p>



<a name="202205582"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/add_group%2C%20has_neg%2C%20and%20subtypes%20defined%20as%20sums/near/202205582" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/add_group.2C.20has_neg.2C.20and.20subtypes.20defined.20as.20sums.html#202205582">(Jun 27 2020 at 21:23)</a>:</h4>
<p>Is there any way to convert back an forth between the two?</p>



<a name="202205889"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/add_group%2C%20has_neg%2C%20and%20subtypes%20defined%20as%20sums/near/202205889" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/add_group.2C.20has_neg.2C.20and.20subtypes.20defined.20as.20sums.html#202205889">(Jun 27 2020 at 21:32)</a>:</h4>
<p>I think you've set me on the right track, thanks</p>



<a name="202222886"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/add_group%2C%20has_neg%2C%20and%20subtypes%20defined%20as%20sums/near/202222886" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/add_group.2C.20has_neg.2C.20and.20subtypes.20defined.20as.20sums.html#202222886">(Jun 28 2020 at 06:35)</a>:</h4>
<p>I think you're looking for this? <a href="https://leanprover-community.github.io/mathlib_docs/algebra/pointwise.html">https://leanprover-community.github.io/mathlib_docs/algebra/pointwise.html</a></p>



<a name="202222891"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/add_group%2C%20has_neg%2C%20and%20subtypes%20defined%20as%20sums/near/202222891" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/add_group.2C.20has_neg.2C.20and.20subtypes.20defined.20as.20sums.html#202222891">(Jun 28 2020 at 06:35)</a>:</h4>
<p>or maybe this <a href="https://leanprover-community.github.io/mathlib_docs/algebra/pi_instances.html">https://leanprover-community.github.io/mathlib_docs/algebra/pi_instances.html</a></p>



<a name="202225131"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/add_group%2C%20has_neg%2C%20and%20subtypes%20defined%20as%20sums/near/202225131" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/add_group.2C.20has_neg.2C.20and.20subtypes.20defined.20as.20sums.html#202225131">(Jun 28 2020 at 07:52)</a>:</h4>
<p>I ended up trying to use <code>add_subgroup.closure (set_of (Bᵣ r).property)</code></p>



<a name="202225254"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/add_group%2C%20has_neg%2C%20and%20subtypes%20defined%20as%20sums/near/202225254" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/add_group.2C.20has_neg.2C.20and.20subtypes.20defined.20as.20sums.html#202225254">(Jun 28 2020 at 07:56)</a>:</h4>
<p><span class="user-mention" data-user-id="310045">@Eric Wieser</span> I'm saying, in the first place don't have B_r be a subtype to begin with</p>



<a name="202225262"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/add_group%2C%20has_neg%2C%20and%20subtypes%20defined%20as%20sums/near/202225262" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/add_group.2C.20has_neg.2C.20and.20subtypes.20defined.20as.20sums.html#202225262">(Jun 28 2020 at 07:56)</a>:</h4>
<p>I think I want it to be a subtype because I want to define functions over the objects in the set</p>



<a name="202225272"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/add_group%2C%20has_neg%2C%20and%20subtypes%20defined%20as%20sums/near/202225272" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/add_group.2C.20has_neg.2C.20and.20subtypes.20defined.20as.20sums.html#202225272">(Jun 28 2020 at 07:57)</a>:</h4>
<p>and having it be a set allows for this flexibility, because you can coerce a set into a subtype but not the other way round</p>



<a name="202225273"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/add_group%2C%20has_neg%2C%20and%20subtypes%20defined%20as%20sums/near/202225273" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/add_group.2C.20has_neg.2C.20and.20subtypes.20defined.20as.20sums.html#202225273">(Jun 28 2020 at 07:57)</a>:</h4>
<p>at least idiomatically</p>



<a name="202225279"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/add_group%2C%20has_neg%2C%20and%20subtypes%20defined%20as%20sums/near/202225279" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/add_group.2C.20has_neg.2C.20and.20subtypes.20defined.20as.20sums.html#202225279">(Jun 28 2020 at 07:57)</a>:</h4>
<p>In that <code>↥</code> will be invoked automatically?</p>



<a name="202225282"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/add_group%2C%20has_neg%2C%20and%20subtypes%20defined%20as%20sums/near/202225282" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/add_group.2C.20has_neg.2C.20and.20subtypes.20defined.20as.20sums.html#202225282">(Jun 28 2020 at 07:57)</a>:</h4>
<p>yes</p>



<a name="202225332"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/add_group%2C%20has_neg%2C%20and%20subtypes%20defined%20as%20sums/near/202225332" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/add_group.2C.20has_neg.2C.20and.20subtypes.20defined.20as.20sums.html#202225332">(Jun 28 2020 at 07:58)</a>:</h4>
<p>and you can have additive closure of a set but not of a subtype</p>



<a name="202225333"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/add_group%2C%20has_neg%2C%20and%20subtypes%20defined%20as%20sums/near/202225333" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/add_group.2C.20has_neg.2C.20and.20subtypes.20defined.20as.20sums.html#202225333">(Jun 28 2020 at 07:59)</a>:</h4>
<p>at least idiomatically</p>



<a name="202225339"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/add_group%2C%20has_neg%2C%20and%20subtypes%20defined%20as%20sums/near/202225339" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/add_group.2C.20has_neg.2C.20and.20subtypes.20defined.20as.20sums.html#202225339">(Jun 28 2020 at 07:59)</a>:</h4>
<p>and you can perform set operations (intersections, unions, insertions, etc) on a set but not on a subtype</p>



<a name="202225340"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/add_group%2C%20has_neg%2C%20and%20subtypes%20defined%20as%20sums/near/202225340" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/add_group.2C.20has_neg.2C.20and.20subtypes.20defined.20as.20sums.html#202225340">(Jun 28 2020 at 07:59)</a>:</h4>
<p>at least idiomatically</p>



<a name="202225342"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/add_group%2C%20has_neg%2C%20and%20subtypes%20defined%20as%20sums/near/202225342" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/add_group.2C.20has_neg.2C.20and.20subtypes.20defined.20as.20sums.html#202225342">(Jun 28 2020 at 07:59)</a>:</h4>
<p>Thanks for the tips<br>
I actually had both <code>Gᵣ_subgroup</code> and <code>Gᵣ (r : ℕ) := ↥(Gᵣ_subgroup r)</code>.<br>
Sounds like there is no need for the separate definitions</p>



<a name="202225418"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/add_group%2C%20has_neg%2C%20and%20subtypes%20defined%20as%20sums/near/202225418" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/add_group.2C.20has_neg.2C.20and.20subtypes.20defined.20as.20sums.html#202225418">(Jun 28 2020 at 08:00)</a>:</h4>
<p>and you don't need the second one</p>



<a name="202225438"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/add_group%2C%20has_neg%2C%20and%20subtypes%20defined%20as%20sums/near/202225438" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/add_group.2C.20has_neg.2C.20and.20subtypes.20defined.20as.20sums.html#202225438">(Jun 28 2020 at 08:01)</a>:</h4>
<p>aliases are not idiomatic because <code>rw</code> and <code>simp</code> and etc cannot see through it</p>



<a name="202225446"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/add_group%2C%20has_neg%2C%20and%20subtypes%20defined%20as%20sums/near/202225446" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/add_group.2C.20has_neg.2C.20and.20subtypes.20defined.20as.20sums.html#202225446">(Jun 28 2020 at 08:01)</a>:</h4>
<p>A follow-up question - if I have <code>P := set_of p</code>, and can prove <code>∀ x : α, p x</code>, can I show <code>P = \alpha</code>?</p>



<a name="202225458"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/add_group%2C%20has_neg%2C%20and%20subtypes%20defined%20as%20sums/near/202225458" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/add_group.2C.20has_neg.2C.20and.20subtypes.20defined.20as.20sums.html#202225458">(Jun 28 2020 at 08:01)</a>:</h4>
<p>which I sometimes find annoying as well -- why can't I just make aliases that everything can see through?</p>



<a name="202225470"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/add_group%2C%20has_neg%2C%20and%20subtypes%20defined%20as%20sums/near/202225470" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/add_group.2C.20has_neg.2C.20and.20subtypes.20defined.20as.20sums.html#202225470">(Jun 28 2020 at 08:01)</a>:</h4>
<p><code>set_of</code> is also not idiomatic: use <code>{ x | P x }</code> instead</p>



<a name="202225481"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/add_group%2C%20has_neg%2C%20and%20subtypes%20defined%20as%20sums/near/202225481" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/add_group.2C.20has_neg.2C.20and.20subtypes.20defined.20as.20sums.html#202225481">(Jun 28 2020 at 08:02)</a>:</h4>
<p><code>\alpha</code> is not a set; you mean <code>set.univ</code></p>



<a name="202225523"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/add_group%2C%20has_neg%2C%20and%20subtypes%20defined%20as%20sums/near/202225523" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/add_group.2C.20has_neg.2C.20and.20subtypes.20defined.20as.20sums.html#202225523">(Jun 28 2020 at 08:02)</a>:</h4>
<p>and you can prove that using lemmas about <code>set.univ</code></p>



<a name="202225533"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/add_group%2C%20has_neg%2C%20and%20subtypes%20defined%20as%20sums/near/202225533" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/add_group.2C.20has_neg.2C.20and.20subtypes.20defined.20as.20sums.html#202225533">(Jun 28 2020 at 08:02)</a>:</h4>
<p>I think I was hoping to show type equality</p>



<a name="202225542"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/add_group%2C%20has_neg%2C%20and%20subtypes%20defined%20as%20sums/near/202225542" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/add_group.2C.20has_neg.2C.20and.20subtypes.20defined.20as.20sums.html#202225542">(Jun 28 2020 at 08:02)</a>:</h4>
<p>set equality is what you want</p>



<a name="202225551"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/add_group%2C%20has_neg%2C%20and%20subtypes%20defined%20as%20sums/near/202225551" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/add_group.2C.20has_neg.2C.20and.20subtypes.20defined.20as.20sums.html#202225551">(Jun 28 2020 at 08:02)</a>:</h4>
<p>type equality is not meaningful</p>



<a name="202225567"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/add_group%2C%20has_neg%2C%20and%20subtypes%20defined%20as%20sums/near/202225567" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/add_group.2C.20has_neg.2C.20and.20subtypes.20defined.20as.20sums.html#202225567">(Jun 28 2020 at 08:03)</a>:</h4>
<p>Perhaps I was misdirected by the codewars kata asking me to prove bool != nat into thinking that such a proof was common :)</p>



<a name="202225569"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/add_group%2C%20has_neg%2C%20and%20subtypes%20defined%20as%20sums/near/202225569" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/add_group.2C.20has_neg.2C.20and.20subtypes.20defined.20as.20sums.html#202225569">(Jun 28 2020 at 08:03)</a>:</h4>
<p>heh</p>



<a name="202225570"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/add_group%2C%20has_neg%2C%20and%20subtypes%20defined%20as%20sums/near/202225570" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/add_group.2C.20has_neg.2C.20and.20subtypes.20defined.20as.20sums.html#202225570">(Jun 28 2020 at 08:03)</a>:</h4>
<p>aha</p>



<a name="202225575"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/add_group%2C%20has_neg%2C%20and%20subtypes%20defined%20as%20sums/near/202225575" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/add_group.2C.20has_neg.2C.20and.20subtypes.20defined.20as.20sums.html#202225575">(Jun 28 2020 at 08:03)</a>:</h4>
<p>yeah we don't use type equalities</p>



<a name="202225595"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/add_group%2C%20has_neg%2C%20and%20subtypes%20defined%20as%20sums/near/202225595" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/add_group.2C.20has_neg.2C.20and.20subtypes.20defined.20as.20sums.html#202225595">(Jun 28 2020 at 08:04)</a>:</h4>
<p>we don't ask whether two types are equal</p>



<a name="202225618"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/add_group%2C%20has_neg%2C%20and%20subtypes%20defined%20as%20sums/near/202225618" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/add_group.2C.20has_neg.2C.20and.20subtypes.20defined.20as.20sums.html#202225618">(Jun 28 2020 at 08:04)</a>:</h4>
<p>just like in ZFC you don't ask whether 37 is an element of the real number pi</p>



<a name="202225651"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/add_group%2C%20has_neg%2C%20and%20subtypes%20defined%20as%20sums/near/202225651" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/add_group.2C.20has_neg.2C.20and.20subtypes.20defined.20as.20sums.html#202225651">(Jun 28 2020 at 08:05)</a>:</h4>
<p>Alright, so lets's say I use <code>∀ x : α, p x</code> to prove <code>set_of p = set.univ</code>. Can I get a free <code>coe</code> from <code>\alpha</code> to <code>P</code>?</p>



<a name="202225661"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/add_group%2C%20has_neg%2C%20and%20subtypes%20defined%20as%20sums/near/202225661" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/add_group.2C.20has_neg.2C.20and.20subtypes.20defined.20as.20sums.html#202225661">(Jun 28 2020 at 08:05)</a>:</h4>
<p>Not a coe but I believe there is an equiv for this</p>



<a name="202225698"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/add_group%2C%20has_neg%2C%20and%20subtypes%20defined%20as%20sums/near/202225698" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/add_group.2C.20has_neg.2C.20and.20subtypes.20defined.20as.20sums.html#202225698">(Jun 28 2020 at 08:06)</a>:</h4>
<p>equiv is a bijective coe?</p>



<a name="202225703"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/add_group%2C%20has_neg%2C%20and%20subtypes%20defined%20as%20sums/near/202225703" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/add_group.2C.20has_neg.2C.20and.20subtypes.20defined.20as.20sums.html#202225703">(Jun 28 2020 at 08:06)</a>:</h4>
<p>It's a bijection with computable inverse</p>



<a name="202225710"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/add_group%2C%20has_neg%2C%20and%20subtypes%20defined%20as%20sums/near/202225710" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/add_group.2C.20has_neg.2C.20and.20subtypes.20defined.20as.20sums.html#202225710">(Jun 28 2020 at 08:06)</a>:</h4>
<p>it is a function you have to apply</p>



<a name="202225721"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/add_group%2C%20has_neg%2C%20and%20subtypes%20defined%20as%20sums/near/202225721" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/add_group.2C.20has_neg.2C.20and.20subtypes.20defined.20as.20sums.html#202225721">(Jun 28 2020 at 08:07)</a>:</h4>
<p>The relevant function is usually called <code>cod_restrict</code></p>



<a name="202225778"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/add_group%2C%20has_neg%2C%20and%20subtypes%20defined%20as%20sums/near/202225778" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/add_group.2C.20has_neg.2C.20and.20subtypes.20defined.20as.20sums.html#202225778">(Jun 28 2020 at 08:08)</a>:</h4>
<p>it might be more helpful if you un <a href="https://en.wikipedia.org/wiki/XY_problem">#xy</a> this further</p>



<a name="202225779"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/add_group%2C%20has_neg%2C%20and%20subtypes%20defined%20as%20sums/near/202225779" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/add_group.2C.20has_neg.2C.20and.20subtypes.20defined.20as.20sums.html#202225779">(Jun 28 2020 at 08:08)</a>:</h4>
<p>ah yes, <a href="https://leanprover-community.github.io/mathlib_docs/find/set.cod_restrict/src">src#set.cod_restrict</a> in <code>data.set.function</code></p>



<a name="202225951"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/add_group%2C%20has_neg%2C%20and%20subtypes%20defined%20as%20sums/near/202225951" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/add_group.2C.20has_neg.2C.20and.20subtypes.20defined.20as.20sums.html#202225951">(Jun 28 2020 at 08:14)</a>:</h4>
<p><span class="user-mention" data-user-id="110064">@Kenny Lau</span>: Not sure how to un-XY further without giving my full file... If you're willing to skim ~200 lines, then I'll give you a github link. If not, I'll keep exploring myself :)</p>



<a name="202226028"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/add_group%2C%20has_neg%2C%20and%20subtypes%20defined%20as%20sums/near/202226028" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/add_group.2C.20has_neg.2C.20and.20subtypes.20defined.20as.20sums.html#202226028">(Jun 28 2020 at 08:17)</a>:</h4>
<p>The line that feels awkward to me is: <a href="https://github.com/eric-wieser/lean-ga/blob/sets-of-blades/src/geometric_algebra/nursery/chisolm.lean#L209">https://github.com/eric-wieser/lean-ga/blob/sets-of-blades/src/geometric_algebra/nursery/chisolm.lean#L209</a> (edit: fixed sorry, I must have just had a typo or something)</p>



<a name="202226030"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/add_group%2C%20has_neg%2C%20and%20subtypes%20defined%20as%20sums/near/202226030" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/add_group.2C.20has_neg.2C.20and.20subtypes.20defined.20as.20sums.html#202226030">(Jun 28 2020 at 08:17)</a>:</h4>
<p>I won't speak for kenny, but if I'm following a conversation and there's a link to a github file, I usually follow the link rather than unfollow the conversation</p>



<a name="202226362"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/add_group%2C%20has_neg%2C%20and%20subtypes%20defined%20as%20sums/near/202226362" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/add_group.2C.20has_neg.2C.20and.20subtypes.20defined.20as.20sums.html#202226362">(Jun 28 2020 at 08:26)</a>:</h4>
<p>Simplified my issue a little bit - its really just a case of working out what's idiomatic and gets me the most for free - I was able to complete my proof</p>



<a name="202226445"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/add_group%2C%20has_neg%2C%20and%20subtypes%20defined%20as%20sums/near/202226445" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/add_group.2C.20has_neg.2C.20and.20subtypes.20defined.20as.20sums.html#202226445">(Jun 28 2020 at 08:29)</a>:</h4>
<p>i find the file kind of hard to read. is there a reason you don't write something more like </p>
<div class="codehilite"><pre><span></span><code><span class="kn">lemma</span> <span class="n">vec_sym_prod_scalar</span><span class="o">:</span>
<span class="bp">∀</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">G₁</span><span class="o">),</span> <span class="bp">∃</span> <span class="n">k</span> <span class="o">:</span> <span class="n">G₀</span><span class="o">,</span> <span class="n">a</span> <span class="bp">*</span><span class="err">₊ᵥ</span> <span class="n">b</span> <span class="bp">=</span> <span class="n">fₛ</span> <span class="n">k</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">intros</span> <span class="n">a</span> <span class="n">b</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">h1</span> <span class="o">:</span> <span class="o">(</span><span class="n">a</span> <span class="bp">+</span> <span class="n">b</span><span class="o">)</span><span class="err">²ᵥ</span> <span class="bp">=</span> <span class="n">a</span><span class="err">²ᵥ</span> <span class="bp">+</span> <span class="n">b</span><span class="err">²ᵥ</span> <span class="bp">+</span> <span class="n">a</span> <span class="bp">*</span><span class="err">₊ᵥ</span> <span class="n">b</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">unfold</span> <span class="n">square_vec</span> <span class="n">sym_prod_vec</span> <span class="n">prod_vec</span><span class="o">,</span>
    <span class="n">rw</span> <span class="n">add_monoid_hom</span><span class="bp">.</span><span class="n">map_add</span> <span class="n">f</span><span class="err">ᵥ</span> <span class="n">a</span> <span class="n">b</span><span class="o">,</span>
    <span class="n">rw</span> <span class="n">left_distrib</span><span class="o">,</span>
    <span class="n">repeat</span> <span class="o">{</span><span class="n">rw</span> <span class="n">right_distrib</span><span class="o">},</span>
    <span class="n">abel</span> <span class="o">},</span>
  <span class="k">have</span> <span class="n">vec_sq_scalar</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">v</span> <span class="o">:</span> <span class="n">G₁</span><span class="o">,</span> <span class="bp">∃</span> <span class="n">k</span> <span class="o">:</span> <span class="n">G₀</span><span class="o">,</span> <span class="n">v</span><span class="err">²ᵥ</span> <span class="bp">=</span> <span class="n">fₛ</span> <span class="n">k</span><span class="o">,</span>
  <span class="n">apply</span> <span class="n">geometric_algebra</span><span class="bp">.</span><span class="n">vec_sq_scalar</span><span class="o">,</span>
  <span class="n">use</span> <span class="n">vec_sq_scalar</span> <span class="o">(</span><span class="n">a</span> <span class="bp">+</span> <span class="n">b</span><span class="o">),</span>
  <span class="bp">..</span>
<span class="kn">end</span>
</code></pre></div>



<a name="202226490"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/add_group%2C%20has_neg%2C%20and%20subtypes%20defined%20as%20sums/near/202226490" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/add_group.2C.20has_neg.2C.20and.20subtypes.20defined.20as.20sums.html#202226490">(Jun 28 2020 at 08:30)</a>:</h4>
<p>in my local copy of the master branch, typeclass inference can't find <code>has_add G₁</code></p>



<a name="202226494"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/add_group%2C%20has_neg%2C%20and%20subtypes%20defined%20as%20sums/near/202226494" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/add_group.2C.20has_neg.2C.20and.20subtypes.20defined.20as.20sums.html#202226494">(Jun 28 2020 at 08:30)</a>:</h4>
<p>master branch of mathlib? Of that repo?</p>



<a name="202226497"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/add_group%2C%20has_neg%2C%20and%20subtypes%20defined%20as%20sums/near/202226497" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/add_group.2C.20has_neg.2C.20and.20subtypes.20defined.20as.20sums.html#202226497">(Jun 28 2020 at 08:31)</a>:</h4>
<p>of that repo</p>



<a name="202226500"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/add_group%2C%20has_neg%2C%20and%20subtypes%20defined%20as%20sums/near/202226500" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/add_group.2C.20has_neg.2C.20and.20subtypes.20defined.20as.20sums.html#202226500">(Jun 28 2020 at 08:31)</a>:</h4>
<p>you linked to a branch called sets-of-blades, maybe it's fixed there. for some reason <code>git checkout origin/sets-of-blades</code> doesn't work for me</p>



<a name="202226501"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/add_group%2C%20has_neg%2C%20and%20subtypes%20defined%20as%20sums/near/202226501" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/add_group.2C.20has_neg.2C.20and.20subtypes.20defined.20as.20sums.html#202226501">(Jun 28 2020 at 08:31)</a>:</h4>
<p>Master branch is not super relevant to my question, since all the stuff I added is on another branch</p>



<a name="202226516"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/add_group%2C%20has_neg%2C%20and%20subtypes%20defined%20as%20sums/near/202226516" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/add_group.2C.20has_neg.2C.20and.20subtypes.20defined.20as.20sums.html#202226516">(Jun 28 2020 at 08:32)</a>:</h4>
<p>I think <code>has_add G₁</code> is implied by <code>[vector_space G₀ G₁]</code>?</p>



<a name="202226550"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/add_group%2C%20has_neg%2C%20and%20subtypes%20defined%20as%20sums/near/202226550" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/add_group.2C.20has_neg.2C.20and.20subtypes.20defined.20as.20sums.html#202226550">(Jun 28 2020 at 08:32)</a>:</h4>
<p>even earlier, by <code>[add_comm_group G₁]</code></p>



<a name="202226573"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/add_group%2C%20has_neg%2C%20and%20subtypes%20defined%20as%20sums/near/202226573" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/add_group.2C.20has_neg.2C.20and.20subtypes.20defined.20as.20sums.html#202226573">(Jun 28 2020 at 08:33)</a>:</h4>
<p>I didn't write that lemma (<span class="user-mention" data-user-id="296911">@Utensil Song</span>  did), so don't want to think too much about its style right now.</p>



<a name="202226643"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/add_group%2C%20has_neg%2C%20and%20subtypes%20defined%20as%20sums/near/202226643" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/add_group.2C.20has_neg.2C.20and.20subtypes.20defined.20as.20sums.html#202226643">(Jun 28 2020 at 08:35)</a>:</h4>
<p>ok i figured out my branch issues (i just nuked my local copy and did <code>leanproject get eric-wieser/lean-ga:sets-of-blades</code>)</p>



<a name="202226684"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/add_group%2C%20has_neg%2C%20and%20subtypes%20defined%20as%20sums/near/202226684" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/add_group.2C.20has_neg.2C.20and.20subtypes.20defined.20as.20sums.html#202226684">(Jun 28 2020 at 08:36)</a>:</h4>
<p>Thanks for (offering to start) helping out!</p>



<a name="202226705"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/add_group%2C%20has_neg%2C%20and%20subtypes%20defined%20as%20sums/near/202226705" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/add_group.2C.20has_neg.2C.20and.20subtypes.20defined.20as.20sums.html#202226705">(Jun 28 2020 at 08:37)</a>:</h4>
<p>well i haven't offered anything useful yet :P</p>



<a name="202226968"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/add_group%2C%20has_neg%2C%20and%20subtypes%20defined%20as%20sums/near/202226968" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/add_group.2C.20has_neg.2C.20and.20subtypes.20defined.20as.20sums.html#202226968">(Jun 28 2020 at 08:44)</a>:</h4>
<p>there's something I don't understand about the difference between tactic mode and term mode. The first lemma throws an error and the second one doesn't</p>
<div class="codehilite"><pre><span></span><code><span class="kn">lemma</span> <span class="n">vec_sym_prod_scalar2</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">G₁</span><span class="o">)</span> <span class="o">:</span> <span class="n">is_scalar</span> <span class="o">(</span><span class="n">a</span> <span class="bp">*</span><span class="err">₊ᵥ</span> <span class="n">b</span><span class="o">)</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="k">have</span> <span class="n">h1</span> <span class="o">:</span> <span class="o">(</span><span class="n">a</span> <span class="bp">+</span> <span class="n">b</span><span class="o">)</span><span class="err">²ᵥ</span> <span class="bp">=</span> <span class="n">a</span><span class="err">²ᵥ</span> <span class="bp">+</span> <span class="n">b</span><span class="err">²ᵥ</span> <span class="bp">+</span> <span class="n">a</span> <span class="bp">*</span><span class="err">₊ᵥ</span> <span class="n">b</span><span class="o">,</span>
  <span class="n">sorry</span>
<span class="kn">end</span>

<span class="kn">lemma</span> <span class="n">vec_sym_prod_scalar</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">G₁</span><span class="o">)</span> <span class="o">:</span> <span class="n">is_scalar</span> <span class="o">(</span><span class="n">a</span> <span class="bp">*</span><span class="err">₊ᵥ</span> <span class="n">b</span><span class="o">)</span> <span class="o">:=</span>
<span class="k">have</span> <span class="n">h1</span> <span class="o">:</span> <span class="o">(</span><span class="n">a</span> <span class="bp">+</span> <span class="n">b</span><span class="o">)</span><span class="err">²ᵥ</span> <span class="bp">=</span> <span class="n">a</span><span class="err">²ᵥ</span> <span class="bp">+</span> <span class="n">b</span><span class="err">²ᵥ</span> <span class="bp">+</span> <span class="n">a</span> <span class="bp">*</span><span class="err">₊ᵥ</span> <span class="n">b</span><span class="o">,</span> <span class="k">from</span> <span class="k">begin</span>
  <span class="n">sorry</span>
<span class="kn">end</span><span class="o">,</span> <span class="n">sorry</span>
</code></pre></div>



<a name="202226974"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/add_group%2C%20has_neg%2C%20and%20subtypes%20defined%20as%20sums/near/202226974" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/add_group.2C.20has_neg.2C.20and.20subtypes.20defined.20as.20sums.html#202226974">(Jun 28 2020 at 08:45)</a>:</h4>
<p>I ran into this too - it can't seem to infer the operators</p>



<a name="202226980"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/add_group%2C%20has_neg%2C%20and%20subtypes%20defined%20as%20sums/near/202226980" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/add_group.2C.20has_neg.2C.20and.20subtypes.20defined.20as.20sums.html#202226980">(Jun 28 2020 at 08:45)</a>:</h4>
<p>Putting <code>( ... : G)</code> around their use seemed to fix it for me</p>



<a name="202227095"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/add_group%2C%20has_neg%2C%20and%20subtypes%20defined%20as%20sums/near/202227095" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/add_group.2C.20has_neg.2C.20and.20subtypes.20defined.20as.20sums.html#202227095">(Jun 28 2020 at 08:48)</a>:</h4>
<div class="codehilite"><pre><span></span><code>  <span class="n">def</span> <span class="n">neg</span> <span class="o">(</span><span class="n">b</span> <span class="o">:</span> <span class="n">B</span><span class="err">ᵣ</span> <span class="n">r</span><span class="o">)</span> <span class="o">:</span> <span class="n">B</span><span class="err">ᵣ</span> <span class="n">r</span> <span class="o">:=</span> <span class="bp">⟨-</span><span class="n">b</span><span class="bp">.</span><span class="n">val</span><span class="o">,</span> <span class="k">begin</span>
    <span class="n">cases</span> <span class="n">b</span> <span class="k">with</span> <span class="n">b&#39;</span> <span class="n">hb</span><span class="o">,</span>
    <span class="n">exact</span> <span class="n">exists</span><span class="bp">.</span><span class="n">elim</span> <span class="n">hb</span> <span class="k">begin</span>
      <span class="n">intros</span> <span class="n">a</span> <span class="n">ha</span><span class="o">,</span>
      <span class="n">use</span> <span class="bp">-</span><span class="n">a</span><span class="o">,</span>
      <span class="n">simp</span> <span class="o">[</span><span class="n">ha</span><span class="o">],</span>
    <span class="kn">end</span>
  <span class="kn">end</span><span class="bp">⟩</span>

  <span class="kn">instance</span> <span class="n">has_neg</span> <span class="o">(</span><span class="n">r</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="n">has_neg</span> <span class="o">(</span><span class="n">B</span><span class="err">ᵣ</span> <span class="n">r</span><span class="o">)</span> <span class="o">:=</span> <span class="o">{</span> <span class="n">neg</span> <span class="o">:=</span> <span class="n">neg</span><span class="o">}</span>
</code></pre></div>



<a name="202227099"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/add_group%2C%20has_neg%2C%20and%20subtypes%20defined%20as%20sums/near/202227099" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/add_group.2C.20has_neg.2C.20and.20subtypes.20defined.20as.20sums.html#202227099">(Jun 28 2020 at 08:48)</a>:</h4>
<p>this isn't idiomatic: you should instead show that <code>is_rblade r b</code> implies <code>is_rblade r (-b)</code></p>



<a name="202227107"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/add_group%2C%20has_neg%2C%20and%20subtypes%20defined%20as%20sums/near/202227107" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/add_group.2C.20has_neg.2C.20and.20subtypes.20defined.20as.20sums.html#202227107">(Jun 28 2020 at 08:49)</a>:</h4>
<p>And then derive <code>neg</code> from that proof?</p>



<a name="202227166"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/add_group%2C%20has_neg%2C%20and%20subtypes%20defined%20as%20sums/near/202227166" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/add_group.2C.20has_neg.2C.20and.20subtypes.20defined.20as.20sums.html#202227166">(Jun 28 2020 at 08:50)</a>:</h4>
<p>do you know where the floating <code>end</code> on line 216 of <a href="https://github.com/eric-wieser/lean-ga/blob/sets-of-blades/src/geometric_algebra/nursery/chisolm.lean#L209">https://github.com/eric-wieser/lean-ga/blob/sets-of-blades/src/geometric_algebra/nursery/chisolm.lean#L209</a> comes from?</p>



<a name="202227173"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/add_group%2C%20has_neg%2C%20and%20subtypes%20defined%20as%20sums/near/202227173" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/add_group.2C.20has_neg.2C.20and.20subtypes.20defined.20as.20sums.html#202227173">(Jun 28 2020 at 08:51)</a>:</h4>
<p><code>section</code></p>



<a name="202227218"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/add_group%2C%20has_neg%2C%20and%20subtypes%20defined%20as%20sums/near/202227218" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/add_group.2C.20has_neg.2C.20and.20subtypes.20defined.20as.20sums.html#202227218">(Jun 28 2020 at 08:52)</a>:</h4>
<p>thanks (anonymous sections seem obviously bad to me, but I guess you're trying not to think about that sort of thing right now)</p>



<a name="202227220"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/add_group%2C%20has_neg%2C%20and%20subtypes%20defined%20as%20sums/near/202227220" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/add_group.2C.20has_neg.2C.20and.20subtypes.20defined.20as.20sums.html#202227220">(Jun 28 2020 at 08:52)</a>:</h4>
<p>also, your file has a lot of aliases, and I mean a whole lot. It is a shame that Lean cannot deal with aliases optimally, so the idiomatic thing to do is to stick with one way to write a certain thing and prove 37 lemmas about that way</p>



<a name="202227222"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/add_group%2C%20has_neg%2C%20and%20subtypes%20defined%20as%20sums/near/202227222" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/add_group.2C.20has_neg.2C.20and.20subtypes.20defined.20as.20sums.html#202227222">(Jun 28 2020 at 08:53)</a>:</h4>
<p>for example, we have 3700 lemmas about multiplication and 0 about your <code>sym_prod</code> so maybe you shouldn't use <code>sym_prod</code></p>



<a name="202227280"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/add_group%2C%20has_neg%2C%20and%20subtypes%20defined%20as%20sums/near/202227280" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/add_group.2C.20has_neg.2C.20and.20subtypes.20defined.20as.20sums.html#202227280">(Jun 28 2020 at 08:54)</a>:</h4>
<p>Regarding <code>neg</code>, is this closer to idiomatic?</p>
<div class="codehilite"><pre><span></span><code>  <span class="kn">lemma</span> <span class="n">neg_is_rblade</span> <span class="o">{</span><span class="n">b</span> <span class="o">:</span> <span class="n">G</span><span class="o">}</span> <span class="o">(</span><span class="n">hb</span> <span class="o">:</span> <span class="n">is_rblade</span> <span class="n">r</span> <span class="n">b</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">is_rblade</span> <span class="n">r</span> <span class="o">(</span><span class="bp">-</span><span class="n">b</span><span class="o">))</span> <span class="o">:=</span> <span class="k">begin</span>
    <span class="n">exact</span> <span class="n">exists</span><span class="bp">.</span><span class="n">elim</span> <span class="n">hb</span> <span class="k">begin</span>
      <span class="n">intros</span> <span class="n">a</span> <span class="n">ha</span><span class="o">,</span>
      <span class="n">use</span> <span class="bp">-</span><span class="n">a</span><span class="o">,</span>
      <span class="n">simp</span> <span class="o">[</span><span class="n">ha</span><span class="o">],</span>
    <span class="kn">end</span>
  <span class="kn">end</span>
  <span class="n">def</span> <span class="n">neg</span> <span class="o">(</span><span class="n">b</span> <span class="o">:</span> <span class="n">B</span><span class="err">ᵣ</span> <span class="n">r</span><span class="o">)</span> <span class="o">:</span> <span class="n">B</span><span class="err">ᵣ</span> <span class="n">r</span> <span class="o">:=</span> <span class="bp">⟨-</span><span class="n">b</span><span class="bp">.</span><span class="n">val</span><span class="o">,</span> <span class="n">neg_is_rblade</span> <span class="n">b</span><span class="bp">.</span><span class="n">property</span><span class="bp">⟩</span>
</code></pre></div>



<a name="202227281"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/add_group%2C%20has_neg%2C%20and%20subtypes%20defined%20as%20sums/near/202227281" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/add_group.2C.20has_neg.2C.20and.20subtypes.20defined.20as.20sums.html#202227281">(Jun 28 2020 at 08:54)</a>:</h4>
<p>yeah</p>



<a name="202227291"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/add_group%2C%20has_neg%2C%20and%20subtypes%20defined%20as%20sums/near/202227291" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/add_group.2C.20has_neg.2C.20and.20subtypes.20defined.20as.20sums.html#202227291">(Jun 28 2020 at 08:55)</a>:</h4>
<p>I'm confused, what do you suggest they do instead of use <code>sym_prod</code>?</p>



<a name="202227305"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/add_group%2C%20has_neg%2C%20and%20subtypes%20defined%20as%20sums/near/202227305" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/add_group.2C.20has_neg.2C.20and.20subtypes.20defined.20as.20sums.html#202227305">(Jun 28 2020 at 08:55)</a>:</h4>
<div class="codehilite"><pre><span></span><code><span class="bp">@</span><span class="o">[</span><span class="n">simp</span><span class="o">]</span> <span class="n">def</span> <span class="n">sym_prod</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">G</span><span class="o">)</span> <span class="o">:=</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">b</span> <span class="bp">+</span> <span class="n">b</span> <span class="bp">*</span> <span class="n">a</span>
</code></pre></div>



<a name="202227307"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/add_group%2C%20has_neg%2C%20and%20subtypes%20defined%20as%20sums/near/202227307" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/add_group.2C.20has_neg.2C.20and.20subtypes.20defined.20as.20sums.html#202227307">(Jun 28 2020 at 08:55)</a>:</h4>
<p>I suggest they forget about this definition</p>



<a name="202227345"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/add_group%2C%20has_neg%2C%20and%20subtypes%20defined%20as%20sums/near/202227345" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/add_group.2C.20has_neg.2C.20and.20subtypes.20defined.20as.20sums.html#202227345">(Jun 28 2020 at 08:56)</a>:</h4>
<p>oops I added <code>@[simp]</code> in my local version</p>



<a name="202227348"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/add_group%2C%20has_neg%2C%20and%20subtypes%20defined%20as%20sums/near/202227348" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/add_group.2C.20has_neg.2C.20and.20subtypes.20defined.20as.20sums.html#202227348">(Jun 28 2020 at 08:56)</a>:</h4>
<p>what do you mean by "forget about"?</p>



<a name="202227349"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/add_group%2C%20has_neg%2C%20and%20subtypes%20defined%20as%20sums/near/202227349" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/add_group.2C.20has_neg.2C.20and.20subtypes.20defined.20as.20sums.html#202227349">(Jun 28 2020 at 08:56)</a>:</h4>
<p>do you mean add <code>@[simp]</code>?</p>



<a name="202227355"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/add_group%2C%20has_neg%2C%20and%20subtypes%20defined%20as%20sums/near/202227355" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/add_group.2C.20has_neg.2C.20and.20subtypes.20defined.20as.20sums.html#202227355">(Jun 28 2020 at 08:57)</a>:</h4>
<p>I actually mean delete this definition, but maybe we could ask <span class="user-mention" data-user-id="110049">@Mario Carneiro</span> about how that file could become more idiomatic</p>



<a name="202227357"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/add_group%2C%20has_neg%2C%20and%20subtypes%20defined%20as%20sums/near/202227357" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/add_group.2C.20has_neg.2C.20and.20subtypes.20defined.20as.20sums.html#202227357">(Jun 28 2020 at 08:57)</a>:</h4>
<p>that file = <a href="https://github.com/eric-wieser/lean-ga/blob/sets-of-blades/src/geometric_algebra/nursery/chisolm.lean">https://github.com/eric-wieser/lean-ga/blob/sets-of-blades/src/geometric_algebra/nursery/chisolm.lean</a></p>



<a name="202227399"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/add_group%2C%20has_neg%2C%20and%20subtypes%20defined%20as%20sums/near/202227399" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/add_group.2C.20has_neg.2C.20and.20subtypes.20defined.20as.20sums.html#202227399">(Jun 28 2020 at 08:58)</a>:</h4>
<p>is giving it @[reducible] similar to deleting it? or making it a notation?<br>
I imagine the point is just that it's a pain to type out <code>a * b + b * a</code> when <code>a</code> and <code>b</code> are many characters long</p>



<a name="202227455"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/add_group%2C%20has_neg%2C%20and%20subtypes%20defined%20as%20sums/near/202227455" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/add_group.2C.20has_neg.2C.20and.20subtypes.20defined.20as.20sums.html#202227455">(Jun 28 2020 at 09:00)</a>:</h4>
<p>hence "it's a shame Lean can't handle aliases optimally"</p>



<a name="202227468"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/add_group%2C%20has_neg%2C%20and%20subtypes%20defined%20as%20sums/near/202227468" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/add_group.2C.20has_neg.2C.20and.20subtypes.20defined.20as.20sums.html#202227468">(Jun 28 2020 at 09:00)</a>:</h4>
<p>in my ideal world I would be able to write <code>sym_prod</code> in theorems and have it automatically convert to the long version when they store the theorem</p>



<a name="202227475"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/add_group%2C%20has_neg%2C%20and%20subtypes%20defined%20as%20sums/near/202227475" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/add_group.2C.20has_neg.2C.20and.20subtypes.20defined.20as.20sums.html#202227475">(Jun 28 2020 at 09:00)</a>:</h4>
<p>so people won't complain about my LHS not being in "simp-normal" form</p>



<a name="202227476"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/add_group%2C%20has_neg%2C%20and%20subtypes%20defined%20as%20sums/near/202227476" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/add_group.2C.20has_neg.2C.20and.20subtypes.20defined.20as.20sums.html#202227476">(Jun 28 2020 at 09:00)</a>:</h4>
<p>My suspicion is that we will not need <code>sym_prod</code> in its current form, only <code>sym_prod_vec</code>. The true symmetric product over G is much more complex, I think</p>



<a name="202227545"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/add_group%2C%20has_neg%2C%20and%20subtypes%20defined%20as%20sums/near/202227545" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/add_group.2C.20has_neg.2C.20and.20subtypes.20defined.20as.20sums.html#202227545">(Jun 28 2020 at 09:03)</a>:</h4>
<p>Another question about that file - I have:</p>
<div class="codehilite"><pre><span></span><code><span class="c1">-- r-vectors</span>
<span class="n">def</span> <span class="n">G</span><span class="err">ᵣ</span> <span class="o">(</span><span class="n">r</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:=</span> <span class="n">add_subgroup</span><span class="bp">.</span><span class="n">closure</span> <span class="o">(</span><span class="n">B</span><span class="err">ᵣ</span> <span class="n">r</span><span class="o">)</span>
<span class="kn">namespace</span> <span class="n">G</span><span class="err">ᵣ</span>
  <span class="kn">variables</span> <span class="o">{</span><span class="n">r</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">}</span>
  <span class="kn">instance</span> <span class="n">addgroup</span> <span class="o">:</span> <span class="n">add_comm_group</span> <span class="o">(</span><span class="n">G</span><span class="err">ᵣ</span> <span class="n">r</span><span class="o">)</span> <span class="o">:=</span> <span class="o">(</span><span class="n">G</span><span class="err">ᵣ</span> <span class="n">r</span><span class="o">)</span><span class="bp">.</span><span class="n">to_add_comm_group</span>
<span class="kn">end</span> <span class="n">G</span><span class="err">ᵣ</span>
</code></pre></div>


<p>Is the <code>add_comm_group</code> instance actually needed, or does lean already provide it? If the latter, can I write an assertion that I satisfy the type class?</p>



<a name="202227590"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/add_group%2C%20has_neg%2C%20and%20subtypes%20defined%20as%20sums/near/202227590" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/add_group.2C.20has_neg.2C.20and.20subtypes.20defined.20as.20sums.html#202227590">(Jun 28 2020 at 09:04)</a>:</h4>
<p>if you tag the definition with <code>@[reducible]</code> then you will automatically have the instance</p>



<a name="202227606"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/add_group%2C%20has_neg%2C%20and%20subtypes%20defined%20as%20sums/near/202227606" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/add_group.2C.20has_neg.2C.20and.20subtypes.20defined.20as.20sums.html#202227606">(Jun 28 2020 at 09:05)</a>:</h4>
<p><span class="user-mention" data-user-id="252300">@Jalex Stark</span> <span class="user-mention" data-user-id="110049">@Mario Carneiro</span> in my ideal world, writing <code>sym_prod a b</code> would be the <strong>same</strong> as writing <code>a * b + b * a</code> in <strong>all</strong> circumstances</p>



<a name="202227615"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/add_group%2C%20has_neg%2C%20and%20subtypes%20defined%20as%20sums/near/202227615" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/add_group.2C.20has_neg.2C.20and.20subtypes.20defined.20as.20sums.html#202227615">(Jun 28 2020 at 09:05)</a>:</h4>
<p><span class="user-mention" data-user-id="110064">@Kenny Lau</span>, for the second part of the question, how can I check if I have the instance?</p>



<a name="202227656"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/add_group%2C%20has_neg%2C%20and%20subtypes%20defined%20as%20sums/near/202227656" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/add_group.2C.20has_neg.2C.20and.20subtypes.20defined.20as.20sums.html#202227656">(Jun 28 2020 at 09:06)</a>:</h4>
<p><code>#check \la r, (by instance : add_comm_group G\_r r)</code> (be sure <strong>not</strong> to put this after a line that starts with <code>by</code>)</p>



<a name="202227667"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/add_group%2C%20has_neg%2C%20and%20subtypes%20defined%20as%20sums/near/202227667" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/add_group.2C.20has_neg.2C.20and.20subtypes.20defined.20as.20sums.html#202227667">(Jun 28 2020 at 09:06)</a>:</h4>
<p>Is it idiomatic to leave checks in files as proof that the instances you intend to satisfy are satified?</p>



<a name="202227672"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/add_group%2C%20has_neg%2C%20and%20subtypes%20defined%20as%20sums/near/202227672" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/add_group.2C.20has_neg.2C.20and.20subtypes.20defined.20as.20sums.html#202227672">(Jun 28 2020 at 09:07)</a>:</h4>
<p>no</p>



<a name="202227675"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/add_group%2C%20has_neg%2C%20and%20subtypes%20defined%20as%20sums/near/202227675" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/add_group.2C.20has_neg.2C.20and.20subtypes.20defined.20as.20sums.html#202227675">(Jun 28 2020 at 09:07)</a>:</h4>
<p>it isn't a proof</p>



<a name="202227679"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/add_group%2C%20has_neg%2C%20and%20subtypes%20defined%20as%20sums/near/202227679" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/add_group.2C.20has_neg.2C.20and.20subtypes.20defined.20as.20sums.html#202227679">(Jun 28 2020 at 09:07)</a>:</h4>
<p>you don't need that line there to use the file</p>



<a name="202227681"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/add_group%2C%20has_neg%2C%20and%20subtypes%20defined%20as%20sums/near/202227681" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/add_group.2C.20has_neg.2C.20and.20subtypes.20defined.20as.20sums.html#202227681">(Jun 28 2020 at 09:07)</a>:</h4>
<p>Right, but it acts as a unit test for the file</p>



<a name="202227685"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/add_group%2C%20has_neg%2C%20and%20subtypes%20defined%20as%20sums/near/202227685" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/add_group.2C.20has_neg.2C.20and.20subtypes.20defined.20as.20sums.html#202227685">(Jun 28 2020 at 09:08)</a>:</h4>
<p>if you "intend to satisfy the instance" then there should be theorems that make use of it</p>



<a name="202227721"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/add_group%2C%20has_neg%2C%20and%20subtypes%20defined%20as%20sums/near/202227721" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/add_group.2C.20has_neg.2C.20and.20subtypes.20defined.20as.20sums.html#202227721">(Jun 28 2020 at 09:08)</a>:</h4>
<p>we don't do unit tests</p>



<a name="202227728"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/add_group%2C%20has_neg%2C%20and%20subtypes%20defined%20as%20sums/near/202227728" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/add_group.2C.20has_neg.2C.20and.20subtypes.20defined.20as.20sums.html#202227728">(Jun 28 2020 at 09:08)</a>:</h4>
<p><span class="user-mention" data-user-id="252300">@Jalex Stark</span>: what about situations where I don't need it to satisfy any of my theorems, but users building upon my theorems do?</p>



<a name="202227733"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/add_group%2C%20has_neg%2C%20and%20subtypes%20defined%20as%20sums/near/202227733" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/add_group.2C.20has_neg.2C.20and.20subtypes.20defined.20as.20sums.html#202227733">(Jun 28 2020 at 09:09)</a>:</h4>
<p>you don't need the <code>#check</code> line to have the instance</p>



<a name="202227736"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/add_group%2C%20has_neg%2C%20and%20subtypes%20defined%20as%20sums/near/202227736" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/add_group.2C.20has_neg.2C.20and.20subtypes.20defined.20as.20sums.html#202227736">(Jun 28 2020 at 09:09)</a>:</h4>
<p>it's just there literally for you to check that the instance is there</p>



<a name="202227738"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/add_group%2C%20has_neg%2C%20and%20subtypes%20defined%20as%20sums/near/202227738" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/add_group.2C.20has_neg.2C.20and.20subtypes.20defined.20as.20sums.html#202227738">(Jun 28 2020 at 09:09)</a>:</h4>
<p>No, but if I remove the instance by accident, how would I know?</p>



<a name="202227747"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/add_group%2C%20has_neg%2C%20and%20subtypes%20defined%20as%20sums/near/202227747" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/add_group.2C.20has_neg.2C.20and.20subtypes.20defined.20as.20sums.html#202227747">(Jun 28 2020 at 09:09)</a>:</h4>
<p>then the theorems depending on that instance will complain to you</p>



<a name="202227792"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/add_group%2C%20has_neg%2C%20and%20subtypes%20defined%20as%20sums/near/202227792" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/add_group.2C.20has_neg.2C.20and.20subtypes.20defined.20as.20sums.html#202227792">(Jun 28 2020 at 09:10)</a>:</h4>
<p>But they won't, they'd complain at someone else who wrote those theorems on a different machine. Who would then complain to me</p>



<a name="202227800"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/add_group%2C%20has_neg%2C%20and%20subtypes%20defined%20as%20sums/near/202227800" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/add_group.2C.20has_neg.2C.20and.20subtypes.20defined.20as.20sums.html#202227800">(Jun 28 2020 at 09:10)</a>:</h4>
<p>"All repo not PR'd into mathlib is lost" -- Ancient Chinese Proverb</p>



<a name="202227804"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/add_group%2C%20has_neg%2C%20and%20subtypes%20defined%20as%20sums/near/202227804" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/add_group.2C.20has_neg.2C.20and.20subtypes.20defined.20as.20sums.html#202227804">(Jun 28 2020 at 09:11)</a>:</h4>
<p>you can declare the instance by <code>instance : add_comm_group G\0 := by apply_instance</code>, is that what you want?</p>



<a name="202227814"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/add_group%2C%20has_neg%2C%20and%20subtypes%20defined%20as%20sums/near/202227814" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/add_group.2C.20has_neg.2C.20and.20subtypes.20defined.20as.20sums.html#202227814">(Jun 28 2020 at 09:11)</a>:</h4>
<p>If you want <code>sym_prod a b</code> to be turned into <code>a * b + b * a</code> immediately, you can use a notation</p>



<a name="202227856"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/add_group%2C%20has_neg%2C%20and%20subtypes%20defined%20as%20sums/near/202227856" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/add_group.2C.20has_neg.2C.20and.20subtypes.20defined.20as.20sums.html#202227856">(Jun 28 2020 at 09:12)</a>:</h4>
<p>Yes, I think that's a nice compromise <span class="user-mention" data-user-id="252300">@Jalex Stark</span> , thanks. <span class="user-mention" data-user-id="110064">@Kenny Lau</span>, thanks for the advice.</p>



<a name="202227881"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/add_group%2C%20has_neg%2C%20and%20subtypes%20defined%20as%20sums/near/202227881" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/add_group.2C.20has_neg.2C.20and.20subtypes.20defined.20as.20sums.html#202227881">(Jun 28 2020 at 09:14)</a>:</h4>
<p><span class="user-mention silent" data-user-id="252300">Jalex Stark</span> <a href="#narrow/stream/113489-new-members/topic/add_group.2C.20has_neg.2C.20and.20subtypes.20defined.20as.20sums/near/202227804">said</a>:</p>
<blockquote>
<p>you can declare the instance by <code>instance : add_comm_group G\0 := by apply_instance</code>, is that what you want?</p>
</blockquote>
<p>Won't this result in two <code>add_comm_group</code> instances? If so, maybe for a test you should use <code>example</code> here instead.</p>



<a name="202227923"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/add_group%2C%20has_neg%2C%20and%20subtypes%20defined%20as%20sums/near/202227923" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/add_group.2C.20has_neg.2C.20and.20subtypes.20defined.20as.20sums.html#202227923">(Jun 28 2020 at 09:14)</a>:</h4>
<p><span class="user-mention" data-user-id="252300">@Jalex Stark</span> , that doesn't work, it seems to declare it with a name of <code>add_comm_group</code>.</p>



<a name="202227927"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/add_group%2C%20has_neg%2C%20and%20subtypes%20defined%20as%20sums/near/202227927" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/add_group.2C.20has_neg.2C.20and.20subtypes.20defined.20as.20sums.html#202227927">(Jun 28 2020 at 09:14)</a>:</h4>
<p><code>example (r : ℕ) : add_comm_group (Gᵣ r) := by apply_instance</code> is what I was after!</p>



<a name="202227985"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/add_group%2C%20has_neg%2C%20and%20subtypes%20defined%20as%20sums/near/202227985" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/add_group.2C.20has_neg.2C.20and.20subtypes.20defined.20as.20sums.html#202227985">(Jun 28 2020 at 09:16)</a>:</h4>
<p>It seems I don't need <code>@[reducible]</code>?</p>



<a name="202227990"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/add_group%2C%20has_neg%2C%20and%20subtypes%20defined%20as%20sums/near/202227990" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/add_group.2C.20has_neg.2C.20and.20subtypes.20defined.20as.20sums.html#202227990">(Jun 28 2020 at 09:16)</a>:</h4>
<p>you don't need reducible where?</p>



<a name="202227998"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/add_group%2C%20has_neg%2C%20and%20subtypes%20defined%20as%20sums/near/202227998" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/add_group.2C.20has_neg.2C.20and.20subtypes.20defined.20as.20sums.html#202227998">(Jun 28 2020 at 09:17)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110064">Kenny Lau</span> <a href="#narrow/stream/113489-new-members/topic/add_group.2C.20has_neg.2C.20and.20subtypes.20defined.20as.20sums/near/202227590">said</a>:</p>
<blockquote>
<p>if you tag the definition with <code>@[reducible]</code> then you will automatically have the instance</p>
</blockquote>
<p>On G\_r</p>



<a name="202228057"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/add_group%2C%20has_neg%2C%20and%20subtypes%20defined%20as%20sums/near/202228057" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/add_group.2C.20has_neg.2C.20and.20subtypes.20defined.20as.20sums.html#202228057">(Jun 28 2020 at 09:18)</a>:</h4>
<p>If the instance gets a bad name, you should give it a name manually</p>



<a name="202228070"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/add_group%2C%20has_neg%2C%20and%20subtypes%20defined%20as%20sums/near/202228070" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/add_group.2C.20has_neg.2C.20and.20subtypes.20defined.20as.20sums.html#202228070">(Jun 28 2020 at 09:18)</a>:</h4>
<p><code>instance G0.add_comm_group : add_comm_group G\0 := by apply_instance</code></p>



<a name="202228077"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/add_group%2C%20has_neg%2C%20and%20subtypes%20defined%20as%20sums/near/202228077" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/add_group.2C.20has_neg.2C.20and.20subtypes.20defined.20as.20sums.html#202228077">(Jun 28 2020 at 09:19)</a>:</h4>
<p>My hope was that <code>instance</code> without a name would result in no name at all. But it sounds like if you need no name at all, <code>example</code> is the right keyword.</p>



<a name="202228078"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/add_group%2C%20has_neg%2C%20and%20subtypes%20defined%20as%20sums/near/202228078" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/add_group.2C.20has_neg.2C.20and.20subtypes.20defined.20as.20sums.html#202228078">(Jun 28 2020 at 09:19)</a>:</h4>
<p>Including this instance explicitly can speed up type class search, right?</p>



<a name="202228082"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/add_group%2C%20has_neg%2C%20and%20subtypes%20defined%20as%20sums/near/202228082" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/add_group.2C.20has_neg.2C.20and.20subtypes.20defined.20as.20sums.html#202228082">(Jun 28 2020 at 09:19)</a>:</h4>
<p>no name just means it uses an automatic naming scheme which is wrong surprisingly often</p>



<a name="202228087"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/add_group%2C%20has_neg%2C%20and%20subtypes%20defined%20as%20sums/near/202228087" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/add_group.2C.20has_neg.2C.20and.20subtypes.20defined.20as.20sums.html#202228087">(Jun 28 2020 at 09:19)</a>:</h4>
<p><code>example</code> just throws away the declaration once it's been checked.</p>



<a name="202228199"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/add_group%2C%20has_neg%2C%20and%20subtypes%20defined%20as%20sums/near/202228199" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/add_group.2C.20has_neg.2C.20and.20subtypes.20defined.20as.20sums.html#202228199">(Jun 28 2020 at 09:23)</a>:</h4>
<p>(deleted)</p>



<a name="202228332"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/add_group%2C%20has_neg%2C%20and%20subtypes%20defined%20as%20sums/near/202228332" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/add_group.2C.20has_neg.2C.20and.20subtypes.20defined.20as.20sums.html#202228332">(Jun 28 2020 at 09:27)</a>:</h4>
<p>one example of bad aliasing in this file is <code>left_distrib</code>. everywhere it's used it can (and should) be replaced with the general <code>mul_add</code></p>



<a name="202228566"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/add_group%2C%20has_neg%2C%20and%20subtypes%20defined%20as%20sums/near/202228566" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/add_group.2C.20has_neg.2C.20and.20subtypes.20defined.20as.20sums.html#202228566">(Jun 28 2020 at 09:35)</a>:</h4>
<p>Yeah, I noticed that too, just didn't want to do too much cleanup to start with.</p>



<a name="202228623"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/add_group%2C%20has_neg%2C%20and%20subtypes%20defined%20as%20sums/near/202228623" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/add_group.2C.20has_neg.2C.20and.20subtypes.20defined.20as.20sums.html#202228623">(Jun 28 2020 at 09:37)</a>:</h4>
<p>( <span class="user-mention" data-user-id="296911">@Utensil Song</span> should probably look at this thread at some point )</p>



<a name="202237541"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/add_group%2C%20has_neg%2C%20and%20subtypes%20defined%20as%20sums/near/202237541" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/add_group.2C.20has_neg.2C.20and.20subtypes.20defined.20as.20sums.html#202237541">(Jun 28 2020 at 13:50)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110049">Mario Carneiro</span> <a href="#narrow/stream/113489-new-members/topic/add_group.2C.20has_neg.2C.20and.20subtypes.20defined.20as.20sums/near/202227814">said</a>:</p>
<blockquote>
<p>If you want <code>sym_prod a b</code> to be turned into <code>a * b + b * a</code> immediately, you can use a notation</p>
</blockquote>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> and I are trying out this new approach and it's working fine</p>



<a name="202237547"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/add_group%2C%20has_neg%2C%20and%20subtypes%20defined%20as%20sums/near/202237547" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/add_group.2C.20has_neg.2C.20and.20subtypes.20defined.20as.20sums.html#202237547">(Jun 28 2020 at 13:50)</a>:</h4>
<p>and I'm left here wondering why don't we use this all over mathlib</p>



<a name="202237628"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/add_group%2C%20has_neg%2C%20and%20subtypes%20defined%20as%20sums/near/202237628" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/add_group.2C.20has_neg.2C.20and.20subtypes.20defined.20as.20sums.html#202237628">(Jun 28 2020 at 13:52)</a>:</h4>
<div class="codehilite"><pre><span></span><code><span class="c1">-- make all the tactics work</span>
<span class="kn">import</span> <span class="n">tactic</span>
<span class="kn">import</span> <span class="n">algebra</span><span class="bp">.</span><span class="n">pi_instances</span>

<span class="c1">-- Let&#39;s just use Lean&#39;s definition of the naturals and not worry</span>
<span class="c1">-- about what they are or how to make them.</span>

<span class="kn">import</span> <span class="n">data</span><span class="bp">.</span><span class="n">nat</span><span class="bp">.</span><span class="n">basic</span>

<span class="c1">-- Let&#39;s now experiment</span>
<span class="kn">namespace</span> <span class="n">experiment</span>

<span class="c">/-</span><span class="cm"></span>
<span class="cm">An experiment where we try different definitions of the integers.</span>
<span class="cm">-/</span>

<span class="kn">namespace</span> <span class="n">int3</span>

<span class="kn">notation</span> <span class="bp">`ℕ</span><span class="err">²</span><span class="bp">`</span> <span class="o">:=</span> <span class="bp">ℕ</span> <span class="bp">×</span> <span class="bp">ℕ</span>

<span class="kn">namespace</span> <span class="n">natsquared</span>

<span class="kn">notation</span> <span class="bp">`</span><span class="n">first</span><span class="bp">`</span> <span class="o">:=</span> <span class="n">prod</span><span class="bp">.</span><span class="n">fst</span>
<span class="kn">notation</span> <span class="bp">`</span><span class="n">second</span><span class="bp">`</span> <span class="o">:=</span> <span class="n">prod</span><span class="bp">.</span><span class="n">snd</span>

<span class="n">def</span> <span class="n">r</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="err">²</span><span class="o">)</span> <span class="o">:=</span> <span class="n">first</span> <span class="n">a</span> <span class="bp">+</span> <span class="n">second</span> <span class="n">b</span> <span class="bp">=</span> <span class="n">second</span> <span class="n">a</span> <span class="bp">+</span> <span class="n">first</span> <span class="n">b</span>

<span class="kn">instance</span> <span class="o">:</span> <span class="n">has_equiv</span> <span class="bp">ℕ</span><span class="err">²</span> <span class="o">:=</span> <span class="bp">⟨</span><span class="n">r</span><span class="bp">⟩</span>

<span class="kn">namespace</span> <span class="n">r</span>
<span class="kn">theorem</span> <span class="n">refl</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="err">²</span><span class="o">)</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≈</span> <span class="n">a</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="c1">-- unfold it in your head</span>
  <span class="n">change</span> <span class="n">first</span> <span class="n">a</span> <span class="bp">+</span> <span class="n">second</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">second</span> <span class="n">a</span> <span class="bp">+</span> <span class="n">first</span> <span class="n">a</span><span class="o">,</span>
  <span class="c1">-- if you delete the line above, the line below still works</span>
  <span class="n">apply</span> <span class="n">add_comm</span><span class="o">,</span>
<span class="kn">end</span>

<span class="kn">theorem</span> <span class="n">symm</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="err">²</span><span class="o">)</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≈</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">b</span> <span class="bp">≈</span> <span class="n">a</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">intro</span> <span class="n">hab</span><span class="o">,</span>
  <span class="n">unfold</span> <span class="n">has_equiv</span><span class="bp">.</span><span class="n">equiv</span> <span class="n">at</span> <span class="bp">*</span><span class="o">,</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">r</span><span class="o">]</span> <span class="n">at</span> <span class="bp">*</span><span class="o">,</span>
  <span class="n">omega</span><span class="o">,</span>
<span class="kn">end</span>

<span class="kn">theorem</span> <span class="n">trans</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="err">²</span><span class="o">)</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≈</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">b</span> <span class="bp">≈</span> <span class="n">c</span> <span class="bp">→</span> <span class="n">a</span> <span class="bp">≈</span> <span class="n">c</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">intro</span> <span class="n">hab</span><span class="o">,</span>
  <span class="n">intro</span> <span class="n">hbc</span><span class="o">,</span>
  <span class="n">unfold</span> <span class="n">has_equiv</span><span class="bp">.</span><span class="n">equiv</span> <span class="n">at</span> <span class="bp">*</span><span class="o">,</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">r</span><span class="o">]</span> <span class="n">at</span> <span class="bp">*</span><span class="o">,</span>
  <span class="n">omega</span><span class="o">,</span>
<span class="kn">end</span>

<span class="kn">theorem</span> <span class="n">equiv</span> <span class="o">:</span> <span class="n">equivalence</span> <span class="n">r</span> <span class="o">:=</span>
<span class="bp">⟨</span><span class="n">refl</span><span class="o">,</span> <span class="n">symm</span><span class="o">,</span> <span class="n">trans</span><span class="bp">⟩</span>

<span class="kn">end</span> <span class="n">r</span>

<span class="kn">instance</span> <span class="o">:</span> <span class="n">setoid</span> <span class="bp">ℕ</span><span class="err">²</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">r</span> <span class="o">:=</span> <span class="n">r</span><span class="o">,</span>
  <span class="n">iseqv</span> <span class="o">:=</span> <span class="n">r</span><span class="bp">.</span><span class="n">equiv</span> <span class="o">}</span>

<span class="kn">end</span> <span class="n">natsquared</span>

<span class="c1">-- definition of int as quotient type</span>
<span class="kn">notation</span> <span class="bp">`ℤ</span><span class="mi">3</span><span class="bp">`</span> <span class="o">:=</span> <span class="n">quotient</span> <span class="n">natsquared</span><span class="bp">.</span><span class="n">setoid</span>

<span class="c1">-- theorem! It&#39;s a ring!</span>

<span class="n">def</span> <span class="n">zero</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="mi">3</span> <span class="o">:=</span> <span class="err">⟦</span><span class="mi">0</span><span class="err">⟧</span>
<span class="n">def</span> <span class="n">one</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="mi">3</span> <span class="o">:=</span> <span class="err">⟦</span><span class="mi">1</span><span class="err">⟧</span>

<span class="kn">open</span> <span class="n">natsquared</span>

<span class="bp">@</span><span class="o">[</span><span class="n">simp</span><span class="o">]</span> <span class="kn">lemma</span> <span class="n">thing</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="err">²</span><span class="o">)</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≈</span> <span class="n">b</span> <span class="bp">↔</span> <span class="n">first</span> <span class="n">a</span> <span class="bp">+</span> <span class="n">second</span> <span class="n">b</span> <span class="bp">=</span> <span class="n">second</span> <span class="n">a</span> <span class="bp">+</span> <span class="n">first</span> <span class="n">b</span> <span class="o">:=</span> <span class="n">iff</span><span class="bp">.</span><span class="n">rfl</span>

<span class="n">def</span> <span class="n">add</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="mi">3</span><span class="o">)</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="mi">3</span> <span class="o">:=</span> <span class="n">quotient</span><span class="bp">.</span><span class="n">lift_on₂</span> <span class="n">a</span> <span class="n">b</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">z</span> <span class="n">w</span><span class="o">,</span> <span class="err">⟦</span><span class="o">(</span><span class="n">z</span><span class="bp">+</span><span class="n">w</span><span class="o">)</span><span class="err">⟧</span><span class="o">)</span> <span class="k">begin</span>
  <span class="n">intros</span><span class="o">,</span>
  <span class="n">simp</span> <span class="n">at</span> <span class="bp">*</span><span class="o">,</span>
  <span class="n">omega</span><span class="o">,</span>
<span class="kn">end</span>

<span class="kn">end</span> <span class="n">int3</span>

<span class="kn">end</span> <span class="n">experiment</span>
</code></pre></div>



<a name="202237633"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/add_group%2C%20has_neg%2C%20and%20subtypes%20defined%20as%20sums/near/202237633" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/add_group.2C.20has_neg.2C.20and.20subtypes.20defined.20as.20sums.html#202237633">(Jun 28 2020 at 13:53)</a>:</h4>
<p>here, no definition, only notation, and everything works fine</p>



<a name="202237639"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/add_group%2C%20has_neg%2C%20and%20subtypes%20defined%20as%20sums/near/202237639" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/add_group.2C.20has_neg.2C.20and.20subtypes.20defined.20as.20sums.html#202237639">(Jun 28 2020 at 13:53)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> we should use this all over mathlib</p>



<a name="202237696"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/add_group%2C%20has_neg%2C%20and%20subtypes%20defined%20as%20sums/near/202237696" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/add_group.2C.20has_neg.2C.20and.20subtypes.20defined.20as.20sums.html#202237696">(Jun 28 2020 at 13:54)</a>:</h4>
<p>oh except for one thing: zero and one and add are all definitions</p>



<a name="202237772"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/add_group%2C%20has_neg%2C%20and%20subtypes%20defined%20as%20sums/near/202237772" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/add_group.2C.20has_neg.2C.20and.20subtypes.20defined.20as.20sums.html#202237772">(Jun 28 2020 at 13:57)</a>:</h4>
<p>I don't think we want <code>int3</code> to be a notation</p>



<a name="202237784"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/add_group%2C%20has_neg%2C%20and%20subtypes%20defined%20as%20sums/near/202237784" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/add_group.2C.20has_neg.2C.20and.20subtypes.20defined.20as.20sums.html#202237784">(Jun 28 2020 at 13:58)</a>:</h4>
<p>or rather, <code>ℤ3</code> should be a notation for <code>def int3 := quotient natsquared.setoid
</code></p>



<a name="202237833"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/add_group%2C%20has_neg%2C%20and%20subtypes%20defined%20as%20sums/near/202237833" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/add_group.2C.20has_neg.2C.20and.20subtypes.20defined.20as.20sums.html#202237833">(Jun 28 2020 at 13:58)</a>:</h4>
<p>I don't see any problems with <code>ℕ²</code> being a (local) notation though</p>



<a name="202237840"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/add_group%2C%20has_neg%2C%20and%20subtypes%20defined%20as%20sums/near/202237840" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/add_group.2C.20has_neg.2C.20and.20subtypes.20defined.20as.20sums.html#202237840">(Jun 28 2020 at 13:58)</a>:</h4>
<p>actually these should all probably be local notations</p>



<a name="202237859"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/add_group%2C%20has_neg%2C%20and%20subtypes%20defined%20as%20sums/near/202237859" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/add_group.2C.20has_neg.2C.20and.20subtypes.20defined.20as.20sums.html#202237859">(Jun 28 2020 at 13:59)</a>:</h4>
<p>But notations are not a substitute for defs. They are like macros, they expand on the spot</p>



<a name="202237866"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/add_group%2C%20has_neg%2C%20and%20subtypes%20defined%20as%20sums/near/202237866" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/add_group.2C.20has_neg.2C.20and.20subtypes.20defined.20as.20sums.html#202237866">(Jun 28 2020 at 13:59)</a>:</h4>
<p>that's usually <em>not</em> what you want</p>



<a name="202238093"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/add_group%2C%20has_neg%2C%20and%20subtypes%20defined%20as%20sums/near/202238093" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/add_group.2C.20has_neg.2C.20and.20subtypes.20defined.20as.20sums.html#202238093">(Jun 28 2020 at 14:05)</a>:</h4>
<p>but that's what I'm complaining about</p>



<a name="202238097"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/add_group%2C%20has_neg%2C%20and%20subtypes%20defined%20as%20sums/near/202238097" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/add_group.2C.20has_neg.2C.20and.20subtypes.20defined.20as.20sums.html#202238097">(Jun 28 2020 at 14:05)</a>:</h4>
<p>I want them to behave completely the same</p>



<a name="202238106"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/add_group%2C%20has_neg%2C%20and%20subtypes%20defined%20as%20sums/near/202238106" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/add_group.2C.20has_neg.2C.20and.20subtypes.20defined.20as.20sums.html#202238106">(Jun 28 2020 at 14:06)</a>:</h4>
<p>I guess I'm being unreasonable</p>



<a name="202238144"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/add_group%2C%20has_neg%2C%20and%20subtypes%20defined%20as%20sums/near/202238144" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/add_group.2C.20has_neg.2C.20and.20subtypes.20defined.20as.20sums.html#202238144">(Jun 28 2020 at 14:06)</a>:</h4>
<p>if everything were expanded every term would be huge right</p>



<a name="202238147"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/add_group%2C%20has_neg%2C%20and%20subtypes%20defined%20as%20sums/near/202238147" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/add_group.2C.20has_neg.2C.20and.20subtypes.20defined.20as.20sums.html#202238147">(Jun 28 2020 at 14:06)</a>:</h4>
<p>like internally, even though pp gives a short term</p>



<a name="202238906"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/add_group%2C%20has_neg%2C%20and%20subtypes%20defined%20as%20sums/near/202238906" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/add_group.2C.20has_neg.2C.20and.20subtypes.20defined.20as.20sums.html#202238906">(Jun 28 2020 at 14:27)</a>:</h4>
<p>even <code>pp</code> won't be able to provide small terms in most cases, I think</p>



<a name="202238952"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/add_group%2C%20has_neg%2C%20and%20subtypes%20defined%20as%20sums/near/202238952" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/add_group.2C.20has_neg.2C.20and.20subtypes.20defined.20as.20sums.html#202238952">(Jun 28 2020 at 14:28)</a>:</h4>
<p>But you've got the idea there - the whole point of definitions is so that term sizes don't grow exponentially as you move up in abstraction</p>



<a name="202238962"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/add_group%2C%20has_neg%2C%20and%20subtypes%20defined%20as%20sums/near/202238962" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/add_group.2C.20has_neg.2C.20and.20subtypes.20defined.20as.20sums.html#202238962">(Jun 28 2020 at 14:28)</a>:</h4>
<p>if you intend to give something an "API" then it should probably be a definition</p>



<a name="202425646"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/add_group%2C%20has_neg%2C%20and%20subtypes%20defined%20as%20sums/near/202425646" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Utensil Song <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/add_group.2C.20has_neg.2C.20and.20subtypes.20defined.20as.20sums.html#202425646">(Jun 30 2020 at 12:05)</a>:</h4>
<p>Just discovered this topic through @. Thanks for the code review and suggestions!</p>
<p>The file is mostly a messy battlefield when I was fighting with how to proceed to the next line. There're many cleanups in order, and not cleaning them up is simply because of some historical reasons and random feelings about them:</p>
<ol>
<li>The proof would become much more readable if it's rewritten into what <span class="user-mention" data-user-id="252300">@Jalex Stark</span> suggested <a href="#narrow/stream/113489-new-members/topic/add_group.2C.20has_neg.2C.20and.20subtypes.20defined.20as.20sums/near/202226445">here</a>,  I was just piecing the scalars together so I used elim to give the scalars names from the exists prop;</li>
<li>anonymous sections are indeed bad, but if I have a lemma <code>c</code> in namespace <code>a</code> and section <code>b</code>, I can't help to think it as <code>a.b.c</code>  so I left <code>b</code> empty ;</li>
<li>the  abuse of alias is partly an experiment to see how can I see through these noises when I prove things;</li>
<li>partly because I need them in the process of writing some deleted code, take <code>sym_prod</code> for an example, initially, there was no <code>sym_prod_vec</code> and only <code>sym_prod</code> since I used coe instead of homes, and I can't just use notation because I need to specify the types to give Lean the hint to automatically add coes for me, see <a href="https://github.com/pygae/lean-ga/blob/cf736df9e327ba6822f3b95e996406ec2e87f470/src/geometric_algebra/nursery/basic.lean#L89">https://github.com/pygae/lean-ga/blob/cf736df9e327ba6822f3b95e996406ec2e87f470/src/geometric_algebra/nursery/basic.lean#L89</a> </li>
<li>the existence of <code>left_distrib</code> etc. is because I need to prove this trivial thing locally to verify the local environment, like parameters/variables are working, and I left them there because I wanted to present them locally, the same place they appear in the literature(showing that they are already included in the definition, without explicit appearances in the definition) and felt annoying to have to remember from which algebraic structure <code>left_distrib</code> came from.</li>
</ol>



<a name="202426150"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/add_group%2C%20has_neg%2C%20and%20subtypes%20defined%20as%20sums/near/202426150" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/add_group.2C.20has_neg.2C.20and.20subtypes.20defined.20as.20sums.html#202426150">(Jun 30 2020 at 12:11)</a>:</h4>
<p>You don't need to remember the name of an algebraic structure to use <code>rw mul_add</code></p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>