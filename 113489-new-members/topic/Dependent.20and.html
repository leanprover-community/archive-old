---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/Dependent.20and.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dependent.20and.html">Dependent and</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="202791527"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dependent%20and/near/202791527" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Fox Thomson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dependent.20and.html#202791527">(Jul 03 2020 at 11:00)</a>:</h4>
<p>How do I say I want two statements P and Q to be true where I am using properties that depend on P in Q, for example, if I was to define something like</p>
<div class="codehilite"><pre><span></span><code><span class="n">def</span> <span class="n">is_abelian_group</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="bp">_</span><span class="o">)</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="kt">Prop</span> <span class="o">:=</span> <span class="n">is_group</span> <span class="n">α</span> <span class="bp">∧</span> <span class="o">(</span><span class="bp">∀</span> <span class="n">g</span> <span class="n">h</span> <span class="o">:</span> <span class="n">α</span><span class="o">,</span> <span class="n">g</span><span class="bp">*</span><span class="n">h</span> <span class="bp">=</span> <span class="n">h</span><span class="bp">*</span><span class="n">g</span><span class="o">)</span>
</code></pre></div>



<a name="202791687"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dependent%20and/near/202791687" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dependent.20and.html#202791687">(Jul 03 2020 at 11:02)</a>:</h4>
<div class="codehilite"><pre><span></span><code><span class="n">def</span> <span class="n">is_abelian_group</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="bp">_</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">:=</span> <span class="bp">∃</span> <span class="o">[</span><span class="n">is_group</span> <span class="n">α</span><span class="o">],</span> <span class="k">by</span> <span class="n">exactI</span> <span class="o">(</span><span class="bp">∀</span> <span class="n">g</span> <span class="n">h</span> <span class="o">:</span> <span class="n">α</span><span class="o">,</span> <span class="n">g</span><span class="bp">*</span><span class="n">h</span> <span class="bp">=</span> <span class="n">h</span><span class="bp">*</span><span class="n">g</span><span class="o">)</span>
</code></pre></div>



<a name="202792225"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dependent%20and/near/202792225" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Fox Thomson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dependent.20and.html#202792225">(Jul 03 2020 at 11:09)</a>:</h4>
<p>Thank you!</p>



<a name="202793743"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dependent%20and/near/202793743" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Fox Thomson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dependent.20and.html#202793743">(Jul 03 2020 at 11:29)</a>:</h4>
<p>I am now having trouble using this, I want to be able to say</p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="n">algebra</span><span class="bp">.</span><span class="n">group</span>

<span class="n">def</span> <span class="n">is_abelian_group</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">:=</span> <span class="bp">∃</span> <span class="o">[</span><span class="n">group</span> <span class="n">α</span><span class="o">],</span> <span class="k">by</span> <span class="n">exactI</span> <span class="o">(</span><span class="bp">∀</span> <span class="n">g</span> <span class="n">h</span> <span class="o">:</span> <span class="n">α</span><span class="o">,</span> <span class="n">g</span><span class="bp">*</span><span class="n">h</span> <span class="bp">=</span> <span class="n">h</span><span class="bp">*</span><span class="n">g</span><span class="o">)</span>

<span class="kn">lemma</span> <span class="n">abelian_group_is_group</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="o">:</span> <span class="n">is_abelian_group</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">group</span> <span class="n">α</span> <span class="o">:=</span>
<span class="k">begin</span>
    <span class="n">intro</span> <span class="n">h</span><span class="o">,</span>
    <span class="n">unfold</span> <span class="n">is_abelian_group</span> <span class="n">at</span> <span class="n">h</span><span class="o">,</span>
    <span class="n">casesI</span> <span class="n">h</span> <span class="k">with</span> <span class="n">hgroup</span> <span class="n">habelian</span><span class="o">,</span>
    <span class="n">assumption</span>
<span class="kn">end</span>
</code></pre></div>


<p>However, I get the error "induction tactic failed, recursor 'Exists.dcases_on' can only eliminate into Prop"</p>



<a name="202793910"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dependent%20and/near/202793910" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dependent.20and.html#202793910">(Jul 03 2020 at 11:31)</a>:</h4>
<p>did you want <code>is_group</code> instead of <code>group</code>?</p>



<a name="202793930"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dependent%20and/near/202793930" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dependent.20and.html#202793930">(Jul 03 2020 at 11:31)</a>:</h4>
<p><code>group A</code> is not a <code>Prop</code></p>



<a name="202794038"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dependent%20and/near/202794038" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dependent.20and.html#202794038">(Jul 03 2020 at 11:33)</a>:</h4>
<p>I think you have an <a href="https://en.wikipedia.org/wiki/XY_problem">#xy</a> problem</p>



<a name="202794497"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dependent%20and/near/202794497" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Fox Thomson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dependent.20and.html#202794497">(Jul 03 2020 at 11:39)</a>:</h4>
<p>What I was trying to do was to define a class on pgames which inducts on itself and also depended on another class, <code>class</code> does not seem to allow for inductive definitions so I was defining in the form <code>pgame → Prop</code> and using well founded recursion</p>



<a name="202794828"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dependent%20and/near/202794828" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dependent.20and.html#202794828">(Jul 03 2020 at 11:44)</a>:</h4>
<p>could you show your code?</p>



<a name="202794872"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dependent%20and/near/202794872" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dependent.20and.html#202794872">(Jul 03 2020 at 11:45)</a>:</h4>
<p>(btw <code>abelian_group</code> in mathlib is called <code>comm_group</code>)</p>



<a name="202794999"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dependent%20and/near/202794999" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Fox Thomson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dependent.20and.html#202794999">(Jul 03 2020 at 11:47)</a>:</h4>
<div class="codehilite"><pre><span></span><code><span class="n">class</span> <span class="n">similar_game</span> <span class="o">(</span><span class="n">G</span> <span class="o">:</span> <span class="n">pgame</span><span class="o">)</span> <span class="o">:=</span> <span class="o">(</span><span class="n">similar_moves</span> <span class="o">:</span> <span class="n">G</span><span class="bp">.</span><span class="n">left_moves</span> <span class="bp">=</span> <span class="n">G</span><span class="bp">.</span><span class="n">right_moves</span><span class="o">)</span>

<span class="n">def</span> <span class="n">moves</span> <span class="o">(</span><span class="n">G</span> <span class="o">:</span> <span class="n">pgame</span><span class="o">)</span> <span class="o">[</span><span class="n">similar_game</span> <span class="n">G</span><span class="o">]</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span> <span class="o">:=</span> <span class="n">G</span><span class="bp">.</span><span class="n">left_moves</span>
<span class="n">def</span> <span class="n">moves_to_left_moves</span> <span class="o">(</span><span class="n">G</span> <span class="o">:</span> <span class="n">pgame</span><span class="o">)</span> <span class="o">[</span><span class="n">similar_game</span> <span class="n">G</span><span class="o">]</span> <span class="o">:</span> <span class="n">G</span><span class="bp">.</span><span class="n">moves</span> <span class="bp">→</span> <span class="n">G</span><span class="bp">.</span><span class="n">left_moves</span> <span class="o">:=</span> <span class="n">id</span>
<span class="n">def</span> <span class="n">moves_to_right_moves</span> <span class="o">(</span><span class="n">G</span> <span class="o">:</span> <span class="n">pgame</span><span class="o">)</span> <span class="o">[</span><span class="n">h</span><span class="o">:</span><span class="n">similar_game</span> <span class="n">G</span><span class="o">]</span> <span class="o">:</span> <span class="n">G</span><span class="bp">.</span><span class="n">moves</span> <span class="bp">→</span> <span class="n">G</span><span class="bp">.</span><span class="n">right_moves</span> <span class="o">:=</span>
<span class="k">begin</span>
    <span class="n">rw</span> <span class="err">←</span><span class="n">h</span><span class="bp">.</span><span class="n">similar_moves</span><span class="o">,</span>
    <span class="n">exact</span> <span class="n">id</span>
<span class="kn">end</span>
<span class="kn">instance</span> <span class="n">moves_to_left_moves_coe</span> <span class="o">(</span><span class="n">G</span> <span class="o">:</span> <span class="n">pgame</span><span class="o">)</span> <span class="o">[</span><span class="n">similar_game</span> <span class="n">G</span><span class="o">]</span> <span class="o">:</span> <span class="n">has_coe</span> <span class="n">G</span><span class="bp">.</span><span class="n">moves</span> <span class="n">G</span><span class="bp">.</span><span class="n">left_moves</span> <span class="o">:=</span>
<span class="bp">⟨</span> <span class="n">moves_to_left_moves</span> <span class="n">G</span> <span class="bp">⟩</span>
<span class="kn">instance</span> <span class="n">moves_to_right_moves_coe</span> <span class="o">(</span><span class="n">G</span> <span class="o">:</span> <span class="n">pgame</span><span class="o">)</span> <span class="o">[</span><span class="n">similar_game</span> <span class="n">G</span><span class="o">]</span> <span class="o">:</span> <span class="n">has_coe</span> <span class="n">G</span><span class="bp">.</span><span class="n">moves</span> <span class="n">G</span><span class="bp">.</span><span class="n">right_moves</span> <span class="o">:=</span>
<span class="bp">⟨</span> <span class="n">moves_to_right_moves</span> <span class="n">G</span> <span class="bp">⟩</span>

<span class="bp">@</span><span class="o">[</span><span class="n">class</span><span class="o">]</span> <span class="n">def</span> <span class="n">impartial</span> <span class="o">:</span> <span class="n">pgame</span> <span class="bp">→</span> <span class="kt">Prop</span>
<span class="bp">|</span> <span class="n">G</span> <span class="o">:=</span> <span class="bp">∃</span> <span class="o">[</span><span class="n">similar_game</span> <span class="n">G</span><span class="o">],</span>
            <span class="k">by</span> <span class="n">exactI</span> <span class="o">(</span><span class="bp">∀</span> <span class="n">i</span> <span class="o">:</span> <span class="n">G</span><span class="bp">.</span><span class="n">moves</span><span class="o">,</span> <span class="n">G</span><span class="bp">.</span><span class="n">move_left</span> <span class="n">i</span> <span class="bp">=</span> <span class="n">G</span><span class="bp">.</span><span class="n">move_right</span> <span class="n">i</span> <span class="bp">∧</span>
                <span class="bp">∃</span> <span class="o">[</span><span class="n">similar_game</span> <span class="o">(</span><span class="n">G</span><span class="bp">.</span><span class="n">move_left</span> <span class="n">i</span><span class="o">)],</span> <span class="n">impartial</span> <span class="o">(</span><span class="n">G</span><span class="bp">.</span><span class="n">move_left</span> <span class="n">i</span><span class="o">))</span>
<span class="n">using_well_founded</span> <span class="o">{</span> <span class="n">dec_tac</span> <span class="o">:=</span> <span class="n">pgame</span><span class="bp">.</span><span class="n">pgame_wf_tac</span> <span class="o">}</span>
</code></pre></div>



<a name="202795182"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dependent%20and/near/202795182" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dependent.20and.html#202795182">(Jul 03 2020 at 11:49)</a>:</h4>
<p><code>class similar_game (G : pgame) : Prop := ...</code></p>



<a name="202795303"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dependent%20and/near/202795303" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Fox Thomson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dependent.20and.html#202795303">(Jul 03 2020 at 11:50)</a>:</h4>
<p>Thank you!</p>



<a name="202795354"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dependent%20and/near/202795354" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dependent.20and.html#202795354">(Jul 03 2020 at 11:51)</a>:</h4>
<p><code>moves</code> has an unnecessary typeclass argument</p>



<a name="202795367"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dependent%20and/near/202795367" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dependent.20and.html#202795367">(Jul 03 2020 at 11:51)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110049">Mario Carneiro</span> <a href="#narrow/stream/113489-new-members/topic/Dependent.20and/near/202795182">said</a>:</p>
<blockquote>
<p><code>class similar_game (G : pgame) : Prop := ...</code></p>
</blockquote>
<p>this is very unfortunate. why can't Lean figure out that it's a Prop?</p>



<a name="202795428"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dependent%20and/near/202795428" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dependent.20and.html#202795428">(Jul 03 2020 at 11:52)</a>:</h4>
<p>It probably could, but it doesn't try</p>



<a name="202795492"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dependent%20and/near/202795492" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dependent.20and.html#202795492">(Jul 03 2020 at 11:53)</a>:</h4>
<p>If you put <code>#lint</code> at the bottom it will tell you about unnecessary arguments</p>



<a name="202795559"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dependent%20and/near/202795559" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dependent.20and.html#202795559">(Jul 03 2020 at 11:53)</a>:</h4>
<p>Isn't this called <code>impartial_game</code> or something?</p>



<a name="202795719"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dependent%20and/near/202795719" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Fox Thomson <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dependent.20and.html#202795719">(Jul 03 2020 at 11:55)</a>:</h4>
<p>Which would be the better convention, <code>similar</code> and <code>impartial</code> or <code>similar_game</code> and <code>impartial_game</code>?</p>



<a name="202799332"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dependent%20and/near/202799332" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dependent.20and.html#202799332">(Jul 03 2020 at 12:38)</a>:</h4>
<p>Probably <code>pgame.similar</code></p>



<a name="202806304"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dependent%20and/near/202806304" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dependent.20and.html#202806304">(Jul 03 2020 at 13:59)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110049">Mario Carneiro</span> <a href="#narrow/stream/113489-new-members/topic/Dependent.20and/near/202795182">said</a>:</p>
<blockquote>
<p><code>class similar_game (G : pgame) : Prop := ...</code></p>
</blockquote>
<p>Whats the relevance of making <code>similar_game</code> a <code>Prop</code>?</p>



<a name="202807826"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Dependent%20and/near/202807826" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Utensil Song <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/Dependent.20and.html#202807826">(Jul 03 2020 at 14:14)</a>:</h4>
<p>I think its because <code>"induction tactic failed, recursor 'Exists.dcases_on' can only eliminate into Prop"</code> wants a Prop. And Lean chooses not to infer a "Prop class" for (maybe) performance reason.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>