---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113489-new-members/topic/properties.20of.20finsets.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/properties.20of.20finsets.html">properties of finsets</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="207366404"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/properties%20of%20finsets/near/207366404" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Iocta <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/properties.20of.20finsets.html#207366404">(Aug 19 2020 at 03:17)</a>:</h4>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="n">data</span><span class="bp">.</span><span class="n">set</span><span class="bp">.</span><span class="n">basic</span>
<span class="kn">import</span> <span class="n">data</span><span class="bp">.</span><span class="n">set</span><span class="bp">.</span><span class="n">finite</span>
<span class="kn">import</span> <span class="n">data</span><span class="bp">.</span><span class="n">nat</span><span class="bp">.</span><span class="n">basic</span>

<span class="n">def</span> <span class="n">p</span> <span class="o">(</span><span class="n">s</span><span class="o">:</span> <span class="n">set</span> <span class="bp">ℕ</span> <span class="o">)</span> <span class="o">[</span><span class="n">decidable</span> <span class="o">(</span><span class="n">finite</span> <span class="n">s</span><span class="o">)]:</span> <span class="bp">ℕ</span> <span class="o">:=</span> <span class="k">if</span> <span class="n">finite</span> <span class="n">s</span> <span class="k">then</span> <span class="mi">0</span> <span class="k">else</span> <span class="mi">1</span>

<span class="kn">lemma</span> <span class="n">p_finitely_additive</span> <span class="o">:</span>
 <span class="bp">¬</span> <span class="o">(</span><span class="bp">∀</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">set</span> <span class="bp">ℕ</span> <span class="o">)</span> <span class="o">[</span><span class="n">decidable</span> <span class="o">(</span><span class="n">finite</span> <span class="n">a</span><span class="o">)]</span> <span class="o">[</span><span class="n">decidable</span> <span class="o">(</span><span class="n">finite</span> <span class="n">b</span><span class="o">)]</span> <span class="o">[</span><span class="n">decidable</span> <span class="o">(</span><span class="n">finite</span> <span class="o">(</span><span class="n">a</span> <span class="err">∪</span> <span class="n">b</span><span class="o">))],</span> <span class="n">p</span> <span class="o">(</span><span class="n">a</span> <span class="err">∪</span> <span class="n">b</span><span class="o">)</span> <span class="bp">≠</span> <span class="n">p</span> <span class="n">a</span> <span class="bp">+</span> <span class="n">p</span> <span class="n">b</span> <span class="o">)</span> <span class="o">:=</span>
<span class="k">begin</span>
    <span class="n">cases</span> <span class="n">a</span><span class="bp">.</span><span class="n">finite</span><span class="o">,</span>
<span class="c1">-- expected type:</span>
<span class="c1">-- a: set ℕ</span>
<span class="c1">-- b: set ℕ</span>
<span class="c1">-- _inst_1: decidable a.finite</span>
<span class="c1">-- _inst_2: decidable b.finite</span>
<span class="c1">-- _inst_3: decidable (a ∪ b).finite</span>
<span class="c1">-- ⊢ ℕ</span>
<span class="c1">-- Messages (3)</span>
<span class="c1">-- my2.lean:527:97</span>
<span class="c1">-- failed to synthesize type class instance for</span>
<span class="c1">-- a b : set ℕ,</span>
<span class="c1">-- _inst_1 : decidable a.finite,</span>
<span class="c1">-- _inst_2 : decidable b.finite,</span>
<span class="c1">-- _inst_3 : decidable (a ∪ b).finite</span>
<span class="c1">-- ⊢ decidable (a ∪ b).finite</span>
<span class="c1">-- my2.lean:527:109</span>
<span class="c1">-- failed to synthesize type class instance for</span>
<span class="c1">-- a b : set ℕ,</span>
<span class="c1">-- _inst_1 : decidable a.finite,</span>
<span class="c1">-- _inst_2 : decidable b.finite,</span>
<span class="c1">-- _inst_3 : decidable (a ∪ b).finite</span>
<span class="c1">-- ⊢ decidable a.finite</span>
<span class="c1">-- my2.lean:527:115</span>
<span class="c1">-- failed to synthesize type class instance for</span>
<span class="c1">-- a b : set ℕ,</span>
<span class="c1">-- _inst_1 : decidable a.finite,</span>
<span class="c1">-- _inst_2 : decidable b.finite,</span>
<span class="c1">-- _inst_3 : decidable (a ∪ b).finite</span>
<span class="c1">-- ⊢ decidable b.finite</span>

<span class="kn">end</span>
</code></pre></div>



<a name="207366409"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/properties%20of%20finsets/near/207366409" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Iocta <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/properties.20of.20finsets.html#207366409">(Aug 19 2020 at 03:17)</a>:</h4>
<p>How to deal with this?</p>



<a name="207366449"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/properties%20of%20finsets/near/207366449" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/properties.20of.20finsets.html#207366449">(Aug 19 2020 at 03:18)</a>:</h4>
<p>what's up with those decidability assumptions?</p>



<a name="207366454"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/properties%20of%20finsets/near/207366454" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/properties.20of.20finsets.html#207366454">(Aug 19 2020 at 03:18)</a>:</h4>
<p>Just add <code>open_locale classical</code> to the top of the file</p>



<a name="207366457"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/properties%20of%20finsets/near/207366457" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/properties.20of.20finsets.html#207366457">(Aug 19 2020 at 03:18)</a>:</h4>
<p>it's not like that sort of property is actually computable in practice</p>



<a name="207366558"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/properties%20of%20finsets/near/207366558" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/properties.20of.20finsets.html#207366558">(Aug 19 2020 at 03:21)</a>:</h4>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="n">data</span><span class="bp">.</span><span class="n">set</span><span class="bp">.</span><span class="n">basic</span>
<span class="kn">import</span> <span class="n">data</span><span class="bp">.</span><span class="n">set</span><span class="bp">.</span><span class="n">finite</span>
<span class="kn">import</span> <span class="n">data</span><span class="bp">.</span><span class="n">nat</span><span class="bp">.</span><span class="n">basic</span>

<span class="n">noncomputable</span> <span class="n">theory</span>
<span class="n">open_locale</span> <span class="n">classical</span>
<span class="kn">open</span> <span class="n">set</span>

<span class="n">def</span> <span class="n">p</span> <span class="o">(</span><span class="n">s</span><span class="o">:</span> <span class="n">set</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="bp">ℕ</span> <span class="o">:=</span> <span class="k">if</span> <span class="n">finite</span> <span class="n">s</span> <span class="k">then</span> <span class="mi">0</span> <span class="k">else</span> <span class="mi">1</span>

<span class="kn">lemma</span> <span class="n">p_finitely_additive</span> <span class="o">:</span> <span class="bp">¬</span> <span class="o">(</span><span class="bp">∀</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">set</span> <span class="bp">ℕ</span><span class="o">),</span> <span class="n">p</span> <span class="o">(</span><span class="n">a</span> <span class="err">∪</span> <span class="n">b</span><span class="o">)</span> <span class="bp">≠</span> <span class="n">p</span> <span class="n">a</span> <span class="bp">+</span> <span class="n">p</span> <span class="n">b</span><span class="o">)</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">push_neg</span><span class="o">,</span>
  <span class="n">use</span> <span class="o">[</span><span class="err">∅</span><span class="o">,</span> <span class="err">∅</span><span class="o">],</span> <span class="n">simp</span> <span class="o">[</span><span class="n">p</span><span class="o">],</span>
<span class="kn">end</span>
</code></pre></div>



<a name="207367248"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/properties%20of%20finsets/near/207367248" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Iocta <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/properties.20of.20finsets.html#207367248">(Aug 19 2020 at 03:39)</a>:</h4>
<p>I don't have the intuition of when I need <code>[decidable _]</code> or <code>noncomputable</code></p>



<a name="207367442"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/properties%20of%20finsets/near/207367442" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/properties.20of.20finsets.html#207367442">(Aug 19 2020 at 03:45)</a>:</h4>
<p>use <code>noncomputable theory</code> and then you don't have to worry about the <code>noncomputable</code> marker</p>



<a name="207367447"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/properties%20of%20finsets/near/207367447" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/properties.20of.20finsets.html#207367447">(Aug 19 2020 at 03:45)</a>:</h4>
<p>If you're doing constructive mathematics, or something explicitly algorithmic, use <code>decidable</code>. Otherwise throw in <code>open_locale classical</code> at the first sign of trouble. After that, only add <code>noncomputable</code> if you see an error message telling you to. If you find yourself writing <code>noncomputable</code> more than once or twice in a file, add <code>noncomputable theory</code> at the top of the file.</p>



<a name="207367493"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/properties%20of%20finsets/near/207367493" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/properties.20of.20finsets.html#207367493">(Aug 19 2020 at 03:46)</a>:</h4>
<p>I thought this was part of <code>open_locale classical</code></p>



<a name="207367497"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/properties%20of%20finsets/near/207367497" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/properties.20of.20finsets.html#207367497">(Aug 19 2020 at 03:46)</a>:</h4>
<p>Oh! Maybe it is, sorry.</p>



<a name="207367507"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/properties%20of%20finsets/near/207367507" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/properties.20of.20finsets.html#207367507">(Aug 19 2020 at 03:46)</a>:</h4>
<p>it's not, at least if my test above is any indication</p>



<a name="207367597"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/properties%20of%20finsets/near/207367597" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/properties.20of.20finsets.html#207367597">(Aug 19 2020 at 03:49)</a>:</h4>
<p>here's a way to abuse the <code>localized</code> command to make it work:</p>
<div class="codehilite"><pre><span></span><code><span class="n">localized</span> <span class="s2">&quot;attribute [instance, priority 9] classical.prop_decidable</span>
<span class="s2">  noncomputable theory&quot;</span> <span class="k">in</span> <span class="n">classical</span>

<span class="n">open_locale</span> <span class="n">classical</span>
<span class="kn">open</span> <span class="n">set</span>

<span class="n">def</span> <span class="n">p</span> <span class="o">(</span><span class="n">s</span><span class="o">:</span> <span class="n">set</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="bp">ℕ</span> <span class="o">:=</span> <span class="k">if</span> <span class="n">finite</span> <span class="n">s</span> <span class="k">then</span> <span class="mi">0</span> <span class="k">else</span> <span class="mi">1</span>
</code></pre></div>



<a name="207367961"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/properties%20of%20finsets/near/207367961" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Iocta <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/properties.20of.20finsets.html#207367961">(Aug 19 2020 at 03:59)</a>:</h4>
<p>ok</p>



<a name="207375023"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/properties%20of%20finsets/near/207375023" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/properties.20of.20finsets.html#207375023">(Aug 19 2020 at 06:44)</a>:</h4>
<p><span class="user-mention" data-user-id="253355">@Iocta</span> the format is <code>(s : set ℕ)</code>, i.e. spaces around the colon and no spaces near the brackets</p>



<a name="207375050"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/properties%20of%20finsets/near/207375050" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/properties.20of.20finsets.html#207375050">(Aug 19 2020 at 06:45)</a>:</h4>
<p>and what is it with the double negation in your statement?</p>



<a name="207375242"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/properties%20of%20finsets/near/207375242" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/properties.20of.20finsets.html#207375242">(Aug 19 2020 at 06:49)</a>:</h4>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="n">data</span><span class="bp">.</span><span class="n">set</span><span class="bp">.</span><span class="n">basic</span>
<span class="kn">import</span> <span class="n">data</span><span class="bp">.</span><span class="n">set</span><span class="bp">.</span><span class="n">finite</span>
<span class="kn">import</span> <span class="n">data</span><span class="bp">.</span><span class="n">nat</span><span class="bp">.</span><span class="n">basic</span>
<span class="kn">import</span> <span class="n">data</span><span class="bp">.</span><span class="n">nat</span><span class="bp">.</span><span class="n">parity</span>

<span class="n">noncomputable</span> <span class="n">theory</span>
<span class="n">open_locale</span> <span class="n">classical</span>

<span class="kn">open</span> <span class="n">set</span>

<span class="n">def</span> <span class="n">p</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">set</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="bp">ℕ</span> <span class="o">:=</span> <span class="k">if</span> <span class="n">s</span><span class="bp">.</span><span class="n">finite</span> <span class="k">then</span> <span class="mi">0</span> <span class="k">else</span> <span class="mi">1</span>

<span class="kn">lemma</span> <span class="n">not_p_union_eq_p_add_p</span> <span class="o">:</span> <span class="bp">¬∀</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">set</span> <span class="bp">ℕ</span><span class="o">),</span> <span class="n">p</span> <span class="o">(</span><span class="n">a</span> <span class="err">∪</span> <span class="n">b</span><span class="o">)</span> <span class="bp">=</span> <span class="n">p</span> <span class="n">a</span> <span class="bp">+</span> <span class="n">p</span> <span class="n">b</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">intro</span> <span class="n">h</span><span class="o">,</span> <span class="n">specialize</span> <span class="n">h</span> <span class="o">{</span> <span class="n">n</span> <span class="bp">|</span> <span class="n">n</span> <span class="err">%</span> <span class="mi">2</span> <span class="bp">=</span> <span class="mi">0</span> <span class="o">}</span> <span class="o">{</span><span class="n">n</span> <span class="bp">|</span> <span class="n">n</span> <span class="err">%</span> <span class="mi">2</span> <span class="bp">=</span> <span class="mi">1</span><span class="o">},</span> <span class="n">unfold</span> <span class="n">p</span> <span class="n">at</span> <span class="n">h</span><span class="o">,</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">if_neg</span><span class="o">,</span> <span class="n">if_neg</span><span class="o">,</span> <span class="n">if_neg</span><span class="o">]</span> <span class="n">at</span> <span class="n">h</span><span class="o">,</span> <span class="n">cases</span> <span class="n">h</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">sorry</span> <span class="o">},</span> <span class="c1">-- ¬{n : ℕ | n % 2 = 1}.finite</span>
  <span class="o">{</span> <span class="n">sorry</span> <span class="o">},</span> <span class="c1">-- ¬{n : ℕ | n % 2 = 0}.finite</span>
  <span class="o">{</span> <span class="n">sorry</span> <span class="o">}</span>  <span class="c1">-- ¬({n : ℕ | n % 2 = 0} ∪ {n : ℕ | n % 2 = 1}).finite</span>
<span class="kn">end</span>
</code></pre></div>



<a name="207457054"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/properties%20of%20finsets/near/207457054" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Iocta <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/properties.20of.20finsets.html#207457054">(Aug 19 2020 at 20:20)</a>:</h4>
<p>How do I get a <code>finset</code> from <code>finite s</code>?</p>



<a name="207457322"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/properties%20of%20finsets/near/207457322" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/properties.20of.20finsets.html#207457322">(Aug 19 2020 at 20:22)</a>:</h4>
<p><a href="https://leanprover-community.github.io/mathlib_docs/find/set.finite.exists_finset">docs#set.finite.exists_finset</a></p>



<a name="207459550"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/properties%20of%20finsets/near/207459550" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Iocta <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/properties.20of.20finsets.html#207459550">(Aug 19 2020 at 20:44)</a>:</h4>
<p>How do I make <code>evens_not_finite</code> visible inside <code>cases h</code>?</p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="n">analysis</span><span class="bp">.</span><span class="n">normed_space</span><span class="bp">.</span><span class="n">indicator_function</span>
<span class="kn">import</span> <span class="n">measure_theory</span><span class="bp">.</span><span class="n">set_integral</span>
<span class="kn">import</span> <span class="n">analysis</span><span class="bp">.</span><span class="n">specific_limits</span>
<span class="kn">import</span> <span class="n">data</span><span class="bp">.</span><span class="n">real</span><span class="bp">.</span><span class="n">basic</span>
<span class="kn">import</span> <span class="n">data</span><span class="bp">.</span><span class="n">nat</span><span class="bp">.</span><span class="n">basic</span>
<span class="kn">import</span> <span class="n">algebra</span><span class="bp">.</span><span class="n">geom_sum</span>
<span class="kn">import</span> <span class="n">tactic</span><span class="bp">.</span><span class="n">fin_cases</span>
<span class="kn">import</span> <span class="n">data</span><span class="bp">.</span><span class="n">set</span><span class="bp">.</span><span class="n">basic</span>
<span class="kn">import</span> <span class="n">set_theory</span><span class="bp">.</span><span class="n">cardinal_ordinal</span>


<span class="kn">example</span> <span class="o">:</span> <span class="bp">¬∀</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">set</span> <span class="bp">ℕ</span><span class="o">),</span>  <span class="n">p</span> <span class="o">(</span><span class="n">a</span> <span class="err">∪</span> <span class="n">b</span><span class="o">)</span> <span class="bp">=</span> <span class="n">p</span> <span class="n">a</span> <span class="bp">+</span> <span class="n">p</span> <span class="n">b</span> <span class="o">:=</span>
<span class="c1">-- XXX Should also require (distinct: a ≠  b).</span>
<span class="k">begin</span>
  <span class="n">intro</span> <span class="n">h</span><span class="o">,</span>
  <span class="k">let</span> <span class="n">evens</span> <span class="o">:=</span> <span class="o">{</span> <span class="n">n</span> <span class="bp">|</span> <span class="n">n</span> <span class="err">%</span> <span class="mi">2</span> <span class="bp">=</span> <span class="mi">0</span> <span class="o">},</span>
  <span class="k">let</span> <span class="n">odds</span> <span class="o">:=</span> <span class="o">{</span> <span class="n">n</span> <span class="bp">|</span> <span class="n">n</span> <span class="err">%</span> <span class="mi">2</span> <span class="bp">=</span> <span class="mi">1</span> <span class="o">},</span>
  <span class="n">specialize</span> <span class="n">h</span> <span class="n">evens</span> <span class="n">odds</span><span class="o">,</span>
  <span class="k">have</span><span class="o">:</span> <span class="n">evens</span> <span class="bp">≠</span> <span class="n">odds</span><span class="o">,</span>
  <span class="o">{</span>
    <span class="k">have</span> <span class="n">zero_even</span><span class="o">:</span> <span class="mi">0</span> <span class="err">∈</span> <span class="n">evens</span><span class="o">,</span> <span class="n">sorry</span><span class="o">,</span>
    <span class="k">have</span> <span class="n">zero_not_odd</span><span class="o">:</span> <span class="mi">0</span> <span class="err">∉</span> <span class="n">odds</span><span class="o">,</span> <span class="n">sorry</span><span class="o">,</span>
    <span class="n">intro</span> <span class="n">h&#39;</span><span class="o">,</span>
    <span class="n">sorry</span><span class="o">,</span>
  <span class="o">},</span>
  <span class="n">unfold</span> <span class="n">p</span> <span class="n">at</span> <span class="n">h</span><span class="o">,</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">if_neg</span><span class="o">,</span> <span class="n">if_neg</span><span class="o">,</span> <span class="n">if_neg</span><span class="o">]</span> <span class="n">at</span> <span class="n">h</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">odds_not_finite</span><span class="o">:</span> <span class="bp">¬</span><span class="n">odds</span><span class="bp">.</span><span class="n">finite</span><span class="o">,</span>
  <span class="o">{</span>
    <span class="n">intro</span> <span class="n">h&#39;</span><span class="o">,</span>
    <span class="k">have</span> <span class="n">exists_finset_odds</span><span class="o">:</span> <span class="bp">∃</span> <span class="n">fset</span><span class="o">:</span> <span class="n">finset</span> <span class="bp">ℕ</span> <span class="o">,</span> <span class="bp">∀</span> <span class="n">x</span><span class="o">,</span> <span class="o">(</span><span class="n">x</span> <span class="err">∈</span> <span class="n">fset</span> <span class="bp">↔</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">odds</span> <span class="o">),</span>
    <span class="o">{</span>        <span class="n">exact</span> <span class="n">finite</span><span class="bp">.</span><span class="n">exists_finset</span> <span class="n">h&#39;</span><span class="o">,</span>    <span class="o">},</span>
    <span class="n">cases</span> <span class="n">exists_finset_odds</span> <span class="k">with</span> <span class="n">finset_odds</span> <span class="n">hfinset_odds</span><span class="o">,</span>
    <span class="k">have</span> <span class="n">finset_odds_bdd_above</span><span class="o">:</span> <span class="bp">∃</span> <span class="n">m</span><span class="o">:</span> <span class="n">nat</span><span class="o">,</span> <span class="bp">∀</span> <span class="n">n</span> <span class="err">∈</span> <span class="n">finset_odds</span><span class="o">,</span> <span class="n">n</span> <span class="bp">≤</span> <span class="n">m</span><span class="o">,</span> <span class="o">{</span><span class="n">exact</span> <span class="n">finset</span><span class="bp">.</span><span class="n">exists_le</span> <span class="n">finset_odds</span><span class="o">,},</span>
    <span class="n">cases</span> <span class="n">finset_odds_bdd_above</span> <span class="k">with</span> <span class="n">m</span> <span class="n">hm</span><span class="o">,</span>
    <span class="k">have</span> <span class="n">hodd_max</span><span class="o">:</span> <span class="n">m</span> <span class="bp">+</span> <span class="mi">2</span> <span class="err">∈</span> <span class="n">finset_odds</span> <span class="bp">∨</span> <span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span> <span class="err">∈</span> <span class="n">finset_odds</span><span class="o">,</span> <span class="n">sorry</span><span class="o">,</span>
    <span class="n">cases</span> <span class="n">hodd_max</span><span class="o">,</span>
    <span class="o">{</span>
        <span class="n">specialize</span> <span class="n">hm</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">2</span><span class="o">)</span> <span class="n">hodd_max</span><span class="o">,</span>
        <span class="n">finish</span><span class="o">,</span>
    <span class="o">},</span>
    <span class="o">{</span>
        <span class="n">specialize</span> <span class="n">hm</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="n">hodd_max</span><span class="o">,</span>
        <span class="n">finish</span><span class="o">,</span>
    <span class="o">}</span>
  <span class="o">},</span>
  <span class="k">have</span> <span class="n">evens_not_finite</span><span class="o">:</span> <span class="bp">¬</span> <span class="n">evens</span><span class="bp">.</span><span class="n">finite</span><span class="o">,</span>
  <span class="o">{</span>
      <span class="n">intro</span> <span class="n">h&#39;</span><span class="o">,</span>
      <span class="n">sorry</span><span class="o">,</span>
  <span class="o">},</span>
  <span class="n">cases</span> <span class="n">h</span><span class="o">,</span>
  <span class="o">{</span>
    <span class="c1">-- exact odds_not_finite, -- unknown identifier</span>
    <span class="n">sorry</span><span class="o">,</span>
  <span class="o">},</span>
  <span class="o">{</span>
    <span class="c1">-- exact evens_not_finite, -- unknown identifier</span>
    <span class="n">sorry</span><span class="o">,</span>
  <span class="o">},</span>
  <span class="o">{</span>
    <span class="k">show</span> <span class="bp">¬</span><span class="o">(</span><span class="n">evens</span> <span class="err">∪</span> <span class="n">odds</span><span class="o">)</span><span class="bp">.</span><span class="n">finite</span><span class="o">,</span>
    <span class="n">intro</span> <span class="n">h&#39;</span><span class="o">,</span>
    <span class="c1">-- Union of infinite sets is infinite, combining previous two results.</span>
    <span class="n">sorry</span><span class="o">,</span>
  <span class="o">}</span>
<span class="kn">end</span>
</code></pre></div>



<a name="207460619"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/properties%20of%20finsets/near/207460619" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/properties.20of.20finsets.html#207460619">(Aug 19 2020 at 20:55)</a>:</h4>
<p>your formatting does not make it clear that the <code>rw [if_neg, if_neg, if_neg] at h</code> line produces 4 subgoals</p>



<a name="207460880"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/properties%20of%20finsets/near/207460880" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/properties.20of.20finsets.html#207460880">(Aug 19 2020 at 20:58)</a>:</h4>
<p>here it is again with better braces:</p>
<div class="codehilite"><pre><span></span><code><span class="kn">example</span> <span class="o">:</span> <span class="bp">¬∀</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">set</span> <span class="bp">ℕ</span><span class="o">),</span>  <span class="n">p</span> <span class="o">(</span><span class="n">a</span> <span class="err">∪</span> <span class="n">b</span><span class="o">)</span> <span class="bp">=</span> <span class="n">p</span> <span class="n">a</span> <span class="bp">+</span> <span class="n">p</span> <span class="n">b</span> <span class="o">:=</span>
<span class="c1">-- XXX Should also require (distinct: a ≠  b).</span>
<span class="k">begin</span>
  <span class="n">intro</span> <span class="n">h</span><span class="o">,</span>
  <span class="k">let</span> <span class="n">evens</span> <span class="o">:=</span> <span class="o">{</span> <span class="n">n</span> <span class="bp">|</span> <span class="n">n</span> <span class="err">%</span> <span class="mi">2</span> <span class="bp">=</span> <span class="mi">0</span> <span class="o">},</span>
  <span class="k">let</span> <span class="n">odds</span> <span class="o">:=</span> <span class="o">{</span> <span class="n">n</span> <span class="bp">|</span> <span class="n">n</span> <span class="err">%</span> <span class="mi">2</span> <span class="bp">=</span> <span class="mi">1</span> <span class="o">},</span>
  <span class="n">specialize</span> <span class="n">h</span> <span class="n">evens</span> <span class="n">odds</span><span class="o">,</span>
  <span class="k">have</span><span class="o">:</span> <span class="n">evens</span> <span class="bp">≠</span> <span class="n">odds</span><span class="o">,</span>
  <span class="o">{</span> <span class="k">have</span> <span class="n">zero_even</span><span class="o">:</span> <span class="mi">0</span> <span class="err">∈</span> <span class="n">evens</span><span class="o">,</span> <span class="n">sorry</span><span class="o">,</span>
    <span class="k">have</span> <span class="n">zero_not_odd</span><span class="o">:</span> <span class="mi">0</span> <span class="err">∉</span> <span class="n">odds</span><span class="o">,</span> <span class="n">sorry</span><span class="o">,</span>
    <span class="n">intro</span> <span class="n">h&#39;</span><span class="o">,</span>
    <span class="n">sorry</span> <span class="o">},</span>
  <span class="n">unfold</span> <span class="n">p</span> <span class="n">at</span> <span class="n">h</span><span class="o">,</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">if_neg</span><span class="o">,</span> <span class="n">if_neg</span><span class="o">,</span> <span class="n">if_neg</span><span class="o">]</span> <span class="n">at</span> <span class="n">h</span><span class="o">,</span>
  <span class="o">{</span> <span class="k">have</span> <span class="n">odds_not_finite</span><span class="o">:</span> <span class="bp">¬</span><span class="n">odds</span><span class="bp">.</span><span class="n">finite</span><span class="o">,</span>
    <span class="o">{</span> <span class="n">intro</span> <span class="n">h&#39;</span><span class="o">,</span>
      <span class="k">have</span> <span class="n">exists_finset_odds</span><span class="o">:</span> <span class="bp">∃</span> <span class="n">fset</span><span class="o">:</span> <span class="n">finset</span> <span class="bp">ℕ</span> <span class="o">,</span> <span class="bp">∀</span> <span class="n">x</span><span class="o">,</span> <span class="o">(</span><span class="n">x</span> <span class="err">∈</span> <span class="n">fset</span> <span class="bp">↔</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">odds</span> <span class="o">),</span>
      <span class="o">{</span> <span class="n">exact</span> <span class="n">finite</span><span class="bp">.</span><span class="n">exists_finset</span> <span class="n">h&#39;</span> <span class="o">},</span>
      <span class="n">cases</span> <span class="n">exists_finset_odds</span> <span class="k">with</span> <span class="n">finset_odds</span> <span class="n">hfinset_odds</span><span class="o">,</span>
      <span class="k">have</span> <span class="n">finset_odds_bdd_above</span><span class="o">:</span> <span class="bp">∃</span> <span class="n">m</span><span class="o">:</span> <span class="n">nat</span><span class="o">,</span> <span class="bp">∀</span> <span class="n">n</span> <span class="err">∈</span> <span class="n">finset_odds</span><span class="o">,</span> <span class="n">n</span> <span class="bp">≤</span> <span class="n">m</span><span class="o">,</span> <span class="o">{</span><span class="n">exact</span> <span class="n">finset</span><span class="bp">.</span><span class="n">exists_le</span> <span class="n">finset_odds</span><span class="o">,},</span>
      <span class="n">cases</span> <span class="n">finset_odds_bdd_above</span> <span class="k">with</span> <span class="n">m</span> <span class="n">hm</span><span class="o">,</span>
      <span class="k">have</span> <span class="n">hodd_max</span><span class="o">:</span> <span class="n">m</span> <span class="bp">+</span> <span class="mi">2</span> <span class="err">∈</span> <span class="n">finset_odds</span> <span class="bp">∨</span> <span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span> <span class="err">∈</span> <span class="n">finset_odds</span><span class="o">,</span> <span class="n">sorry</span><span class="o">,</span>
      <span class="n">cases</span> <span class="n">hodd_max</span><span class="o">,</span>
      <span class="o">{</span> <span class="n">specialize</span> <span class="n">hm</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">2</span><span class="o">)</span> <span class="n">hodd_max</span><span class="o">,</span>
        <span class="n">finish</span> <span class="o">},</span>
      <span class="o">{</span> <span class="n">specialize</span> <span class="n">hm</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="n">hodd_max</span><span class="o">,</span>
        <span class="n">finish</span> <span class="o">}</span> <span class="o">},</span>
    <span class="k">have</span> <span class="n">evens_not_finite</span><span class="o">:</span> <span class="bp">¬</span> <span class="n">evens</span><span class="bp">.</span><span class="n">finite</span><span class="o">,</span>
    <span class="o">{</span> <span class="n">intro</span> <span class="n">h&#39;</span><span class="o">,</span>
      <span class="n">sorry</span> <span class="o">},</span>
    <span class="n">cases</span> <span class="n">h</span> <span class="o">},</span>
  <span class="o">{</span> <span class="c1">-- exact odds_not_finite, -- unknown identifier</span>
    <span class="n">sorry</span> <span class="o">},</span>
  <span class="o">{</span> <span class="c1">-- exact evens_not_finite, -- unknown identifier</span>
    <span class="n">sorry</span> <span class="o">},</span>
  <span class="o">{</span> <span class="k">show</span> <span class="bp">¬</span><span class="o">(</span><span class="n">evens</span> <span class="err">∪</span> <span class="n">odds</span><span class="o">)</span><span class="bp">.</span><span class="n">finite</span><span class="o">,</span>
    <span class="n">intro</span> <span class="n">h&#39;</span><span class="o">,</span>
    <span class="c1">-- Union of infinite sets is infinite, combining previous two results.</span>
    <span class="n">sorry</span> <span class="o">}</span>
<span class="kn">end</span>
</code></pre></div>



<a name="207460985"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/properties%20of%20finsets/near/207460985" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/properties.20of.20finsets.html#207460985">(Aug 19 2020 at 20:59)</a>:</h4>
<p>the problem should now be clear: you did all the <code>have</code>s inside a pointless branch that was proving <code>h : 1 = 1 + 1 |- false</code>, before finishing it with <code>cases h</code></p>



<a name="207461204"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/properties%20of%20finsets/near/207461204" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Iocta <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/properties.20of.20finsets.html#207461204">(Aug 19 2020 at 21:01)</a>:</h4>
<p>Oh, oops</p>



<a name="207461230"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/properties%20of%20finsets/near/207461230" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/properties.20of.20finsets.html#207461230">(Aug 19 2020 at 21:01)</a>:</h4>
<p>and here it is with the subgoals appropriately distributed:</p>
<div class="codehilite"><pre><span></span><code><span class="kn">example</span> <span class="o">:</span> <span class="bp">¬∀</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">set</span> <span class="bp">ℕ</span><span class="o">),</span>  <span class="n">p</span> <span class="o">(</span><span class="n">a</span> <span class="err">∪</span> <span class="n">b</span><span class="o">)</span> <span class="bp">=</span> <span class="n">p</span> <span class="n">a</span> <span class="bp">+</span> <span class="n">p</span> <span class="n">b</span> <span class="o">:=</span>
<span class="c1">-- XXX Should also require (distinct: a ≠  b).</span>
<span class="k">begin</span>
  <span class="n">intro</span> <span class="n">h</span><span class="o">,</span>
  <span class="k">let</span> <span class="n">evens</span> <span class="o">:=</span> <span class="o">{</span> <span class="n">n</span> <span class="bp">|</span> <span class="n">n</span> <span class="err">%</span> <span class="mi">2</span> <span class="bp">=</span> <span class="mi">0</span> <span class="o">},</span>
  <span class="k">let</span> <span class="n">odds</span> <span class="o">:=</span> <span class="o">{</span> <span class="n">n</span> <span class="bp">|</span> <span class="n">n</span> <span class="err">%</span> <span class="mi">2</span> <span class="bp">=</span> <span class="mi">1</span> <span class="o">},</span>
  <span class="n">specialize</span> <span class="n">h</span> <span class="n">evens</span> <span class="n">odds</span><span class="o">,</span>
  <span class="k">have</span><span class="o">:</span> <span class="n">evens</span> <span class="bp">≠</span> <span class="n">odds</span><span class="o">,</span>
  <span class="o">{</span> <span class="k">have</span> <span class="n">zero_even</span><span class="o">:</span> <span class="mi">0</span> <span class="err">∈</span> <span class="n">evens</span><span class="o">,</span> <span class="n">sorry</span><span class="o">,</span>
    <span class="k">have</span> <span class="n">zero_not_odd</span><span class="o">:</span> <span class="mi">0</span> <span class="err">∉</span> <span class="n">odds</span><span class="o">,</span> <span class="n">sorry</span><span class="o">,</span>
    <span class="n">intro</span> <span class="n">h&#39;</span><span class="o">,</span>
    <span class="n">sorry</span> <span class="o">},</span>
  <span class="n">unfold</span> <span class="n">p</span> <span class="n">at</span> <span class="n">h</span><span class="o">,</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">if_neg</span><span class="o">,</span> <span class="n">if_neg</span><span class="o">,</span> <span class="n">if_neg</span><span class="o">]</span> <span class="n">at</span> <span class="n">h</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">cases</span> <span class="n">h</span> <span class="o">},</span>
  <span class="o">{</span> <span class="k">show</span> <span class="bp">¬</span> <span class="n">odds</span><span class="bp">.</span><span class="n">finite</span><span class="o">,</span>
    <span class="n">intro</span> <span class="n">h&#39;</span><span class="o">,</span>
    <span class="k">have</span> <span class="n">exists_finset_odds</span><span class="o">:</span> <span class="bp">∃</span> <span class="n">fset</span><span class="o">:</span> <span class="n">finset</span> <span class="bp">ℕ</span> <span class="o">,</span> <span class="bp">∀</span> <span class="n">x</span><span class="o">,</span> <span class="o">(</span><span class="n">x</span> <span class="err">∈</span> <span class="n">fset</span> <span class="bp">↔</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">odds</span> <span class="o">),</span>
    <span class="o">{</span> <span class="n">exact</span> <span class="n">finite</span><span class="bp">.</span><span class="n">exists_finset</span> <span class="n">h&#39;</span> <span class="o">},</span>
    <span class="n">cases</span> <span class="n">exists_finset_odds</span> <span class="k">with</span> <span class="n">finset_odds</span> <span class="n">hfinset_odds</span><span class="o">,</span>
    <span class="k">have</span> <span class="n">finset_odds_bdd_above</span><span class="o">:</span> <span class="bp">∃</span> <span class="n">m</span><span class="o">:</span> <span class="n">nat</span><span class="o">,</span> <span class="bp">∀</span> <span class="n">n</span> <span class="err">∈</span> <span class="n">finset_odds</span><span class="o">,</span> <span class="n">n</span> <span class="bp">≤</span> <span class="n">m</span><span class="o">,</span> <span class="o">{</span><span class="n">exact</span> <span class="n">finset</span><span class="bp">.</span><span class="n">exists_le</span> <span class="n">finset_odds</span><span class="o">,},</span>
    <span class="n">cases</span> <span class="n">finset_odds_bdd_above</span> <span class="k">with</span> <span class="n">m</span> <span class="n">hm</span><span class="o">,</span>
    <span class="k">have</span> <span class="n">hodd_max</span><span class="o">:</span> <span class="n">m</span> <span class="bp">+</span> <span class="mi">2</span> <span class="err">∈</span> <span class="n">finset_odds</span> <span class="bp">∨</span> <span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span> <span class="err">∈</span> <span class="n">finset_odds</span><span class="o">,</span> <span class="n">sorry</span><span class="o">,</span>
    <span class="n">cases</span> <span class="n">hodd_max</span><span class="o">,</span>
    <span class="o">{</span> <span class="n">specialize</span> <span class="n">hm</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">2</span><span class="o">)</span> <span class="n">hodd_max</span><span class="o">,</span>
      <span class="n">finish</span> <span class="o">},</span>
    <span class="o">{</span> <span class="n">specialize</span> <span class="n">hm</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="n">hodd_max</span><span class="o">,</span>
      <span class="n">finish</span> <span class="o">}</span> <span class="o">},</span>
  <span class="o">{</span> <span class="k">show</span> <span class="bp">¬</span> <span class="n">evens</span><span class="bp">.</span><span class="n">finite</span><span class="o">,</span>
    <span class="n">intro</span> <span class="n">h&#39;</span><span class="o">,</span>
    <span class="n">sorry</span> <span class="o">},</span>
  <span class="o">{</span> <span class="k">show</span> <span class="bp">¬</span><span class="o">(</span><span class="n">evens</span> <span class="err">∪</span> <span class="n">odds</span><span class="o">)</span><span class="bp">.</span><span class="n">finite</span><span class="o">,</span>
    <span class="n">intro</span> <span class="n">h&#39;</span><span class="o">,</span>
    <span class="c1">-- Union of infinite sets is infinite, combining previous two results.</span>
    <span class="n">sorry</span> <span class="o">}</span>
<span class="kn">end</span>
</code></pre></div>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>