---
layout: archive
title: Zulip Chat Archive
permalink: /stream/208328-IMO-grand-challenge/topic/1962.20problem.201.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/208328-IMO-grand-challenge/index.html">IMO-grand-challenge</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/208328-IMO-grand-challenge/topic/1962.20problem.201.html">1962 problem 1</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="212352661"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/208328-IMO-grand-challenge/topic/1962%20problem%201/near/212352661" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Lacker <a href="https://leanprover-community.github.io/archive/stream/208328-IMO-grand-challenge/topic/1962.20problem.201.html#212352661">(Oct 05 2020 at 20:30)</a>:</h4>
<p>i got another formalization pull request out. <a href="https://github.com/leanprover-community/mathlib/pull/4450">https://github.com/leanprover-community/mathlib/pull/4450</a><br>
it's interesting, i feel like i spend more effort on formalizing the parts that are "trivial" to a human mathematician, rather than the parts that are "difficult" to a human mathematician.</p>



<a name="212362405"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/208328-IMO-grand-challenge/topic/1962%20problem%201/near/212362405" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/208328-IMO-grand-challenge/topic/1962.20problem.201.html#212362405">(Oct 05 2020 at 22:05)</a>:</h4>
<p>Did <a href="#narrow/stream/113489-new-members/topic/simplifying.20nat.2Edigits/near/212152395"><code>norm_digits</code></a> get PR'd? If not it probably should be --- someone other that Mario can make the PR.</p>



<a name="212362703"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/208328-IMO-grand-challenge/topic/1962%20problem%201/near/212362703" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Lacker <a href="https://leanprover-community.github.io/archive/stream/208328-IMO-grand-challenge/topic/1962.20problem.201.html#212362703">(Oct 05 2020 at 22:09)</a>:</h4>
<p>i dont feel great about PRing in a big blob of code i dont understand. but i would love for someone else to</p>



<a name="212362854"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/208328-IMO-grand-challenge/topic/1962%20problem%201/near/212362854" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Lacker <a href="https://leanprover-community.github.io/archive/stream/208328-IMO-grand-challenge/topic/1962.20problem.201.html#212362854">(Oct 05 2020 at 22:11)</a>:</h4>
<p>actually, <span class="user-mention" data-user-id="266440">@Shing Tak Lam</span> commented on the other pull request with a one-liner with <code>rw</code> that does the same thing as <code>digit_recursion</code></p>



<a name="212362867"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/208328-IMO-grand-challenge/topic/1962%20problem%201/near/212362867" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Lacker <a href="https://leanprover-community.github.io/archive/stream/208328-IMO-grand-challenge/topic/1962.20problem.201.html#212362867">(Oct 05 2020 at 22:11)</a>:</h4>
<p>so... maybe there already <em>is</em> a way to do it in the existing library, it is just a complicated one</p>



<a name="212363325"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/208328-IMO-grand-challenge/topic/1962%20problem%201/near/212363325" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/208328-IMO-grand-challenge/topic/1962.20problem.201.html#212363325">(Oct 05 2020 at 22:16)</a>:</h4>
<blockquote>
<p>it's interesting, i feel like i spend more effort on formalizing the parts that are "trivial" to a human mathematician, rather than the parts that are "difficult" to a human mathematician.</p>
</blockquote>
<p>Do you have a feeling more tactics would help? (e.g. things like <code>interval_cases</code>)</p>



<a name="212363364"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/208328-IMO-grand-challenge/topic/1962%20problem%201/near/212363364" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Shing Tak Lam <a href="https://leanprover-community.github.io/archive/stream/208328-IMO-grand-challenge/topic/1962.20problem.201.html#212363364">(Oct 05 2020 at 22:17)</a>:</h4>
<p><span class="user-mention silent" data-user-id="238605">Kevin Lacker</span> <a href="#narrow/stream/208328-IMO-grand-challenge/topic/1962.20problem.201/near/212362854">said</a>:</p>
<blockquote>
<p>actually, <span class="user-mention silent" data-user-id="266440">Shing Tak Lam</span> commented on the other pull request with a one-liner with <code>rw</code> that does the same thing as <code>digit_recursion</code></p>
</blockquote>
<p>Yes, but something like <code>digit_recursion</code> should still be in the library imo. I think <code>digits_aux</code> should really be treated as an implementation detail and the users should really only need <code>digits</code>.</p>



<a name="212363490"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/208328-IMO-grand-challenge/topic/1962%20problem%201/near/212363490" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Lacker <a href="https://leanprover-community.github.io/archive/stream/208328-IMO-grand-challenge/topic/1962.20problem.201.html#212363490">(Oct 05 2020 at 22:18)</a>:</h4>
<p>that makes sense - i ended up not being able to figure out how to use the digits aux stuff, and so i just wrote digits_helper because that was the form i wished the lemmas were in</p>



<a name="212363506"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/208328-IMO-grand-challenge/topic/1962%20problem%201/near/212363506" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Lacker <a href="https://leanprover-community.github.io/archive/stream/208328-IMO-grand-challenge/topic/1962.20problem.201.html#212363506">(Oct 05 2020 at 22:18)</a>:</h4>
<p>also because i was sick of proving 10 &gt; 2 so many times</p>



<a name="212446236"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/208328-IMO-grand-challenge/topic/1962%20problem%201/near/212446236" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Lacker <a href="https://leanprover-community.github.io/archive/stream/208328-IMO-grand-challenge/topic/1962.20problem.201.html#212446236">(Oct 06 2020 at 15:40)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110087">Scott Morrison</span> <a href="#narrow/stream/208328-IMO-grand-challenge/topic/1962.20problem.201/near/212363325">said</a>:</p>
<blockquote>
<blockquote>
<p>it's interesting, i feel like i spend more effort on formalizing the parts that are "trivial" to a human mathematician, rather than the parts that are "difficult" to a human mathematician.</p>
</blockquote>
<p>Do you have a feeling more tactics would help? (e.g. things like <code>interval_cases</code>)</p>
</blockquote>
<p>I wish there were fewer tactics, that worked in more situations. Tactics like <code>linarith</code>, <code>simp</code>, <code>ring</code>, <code>library_search</code>, <code>norm_num</code>, <code>nlinarith</code> are all convenient at times, but when I pick between them I don't feel like I'm doing advanced mathematics, I feel like that process could be automated. Perhaps the core of the library just needs to be 10x faster and more along these lines will be possible.</p>



<a name="212447140"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/208328-IMO-grand-challenge/topic/1962%20problem%201/near/212447140" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/208328-IMO-grand-challenge/topic/1962.20problem.201.html#212447140">(Oct 06 2020 at 15:47)</a>:</h4>
<p>that sounds like you are describing <code>tidy</code></p>



<a name="212448388"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/208328-IMO-grand-challenge/topic/1962%20problem%201/near/212448388" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Lacker <a href="https://leanprover-community.github.io/archive/stream/208328-IMO-grand-challenge/topic/1962.20problem.201.html#212448388">(Oct 06 2020 at 15:56)</a>:</h4>
<p>i wasn't even aware of <code>tidy</code>! i guess that goes back to the problem of, there are so many different tactics available, just becoming aware of all relevant tactics and understanding what they do is most of the effort</p>



<a name="212449676"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/208328-IMO-grand-challenge/topic/1962%20problem%201/near/212449676" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/208328-IMO-grand-challenge/topic/1962.20problem.201.html#212449676">(Oct 06 2020 at 16:06)</a>:</h4>
<p><code>tidy</code> is a kitchen sink tactic written by Scott when he got fed up with exactly what you are describing</p>



<a name="212449742"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/208328-IMO-grand-challenge/topic/1962%20problem%201/near/212449742" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/208328-IMO-grand-challenge/topic/1962.20problem.201.html#212449742">(Oct 06 2020 at 16:06)</a>:</h4>
<p>it will call <code>simp</code> and <code>ring</code> and <code>linarith</code> and all the others</p>



<a name="212452226"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/208328-IMO-grand-challenge/topic/1962%20problem%201/near/212452226" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/208328-IMO-grand-challenge/topic/1962.20problem.201.html#212452226">(Oct 06 2020 at 16:25)</a>:</h4>
<p>It's also somehow just really painful to do things with <em>actual numbers</em> in Lean.  I usually just give up, so I think it's great that you are pushing through to get us some examples of these terrible, painful proofs.  Hopefully specific examples will provide the data needed for new lemmas and more automation!</p>



<a name="212452497"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/208328-IMO-grand-challenge/topic/1962%20problem%201/near/212452497" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/208328-IMO-grand-challenge/topic/1962.20problem.201.html#212452497">(Oct 06 2020 at 16:27)</a>:</h4>
<p>Kevin have you gone through the problem sheets from Lean for the Curious Mathematician? These were specifically designed to show people how to do lots of different kinds of mathematics in Lean. There are accompanying videos which talk you through the sheets.</p>



<a name="212453173"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/208328-IMO-grand-challenge/topic/1962%20problem%201/near/212453173" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/208328-IMO-grand-challenge/topic/1962.20problem.201.html#212453173">(Oct 06 2020 at 16:33)</a>:</h4>
<p>Here's a problem with <em>actual numbers</em> which I put on a real analysis problem set a few weeks ago.  Easy on paper; most of my students did it without difficulty.  I tried to do it in Lean but abandoned the effort when it became clear how ugly a complete solution would look.</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">def</span> <span class="n">converges_to</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℕ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">:=</span> <span class="bp">∀</span> <span class="n">ε</span> <span class="bp">&gt;</span> <span class="mi">0</span><span class="o">,</span> <span class="bp">∃</span> <span class="n">M</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">,</span> <span class="bp">∀</span> <span class="n">n</span> <span class="bp">≥</span> <span class="n">M</span><span class="o">,</span> <span class="bp">|</span><span class="n">x</span> <span class="n">n</span> <span class="bp">-</span> <span class="n">a</span><span class="bp">|</span> <span class="bp">&lt;</span> <span class="n">ε</span>

<span class="kd">example</span> <span class="o">:</span> <span class="n">converges_to</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">n</span><span class="o">,</span> <span class="n">n</span> <span class="bp">/</span> <span class="o">(</span><span class="mi">7</span> <span class="bp">*</span> <span class="n">n</span> <span class="bp">-</span> <span class="mi">1</span><span class="o">))</span> <span class="o">(</span><span class="mi">1</span> <span class="bp">/</span> <span class="mi">7</span><span class="o">)</span> <span class="o">:=</span> <span class="n">sorry</span>
</code></pre></div>



<a name="212454217"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/208328-IMO-grand-challenge/topic/1962%20problem%201/near/212454217" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Lacker <a href="https://leanprover-community.github.io/archive/stream/208328-IMO-grand-challenge/topic/1962.20problem.201.html#212454217">(Oct 06 2020 at 16:43)</a>:</h4>
<p>yeah, similarly that huge thread about why <code>linarith</code> couldn't prove <code>123456 &lt; 1000000</code></p>



<a name="212454494"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/208328-IMO-grand-challenge/topic/1962%20problem%201/near/212454494" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Lacker <a href="https://leanprover-community.github.io/archive/stream/208328-IMO-grand-challenge/topic/1962.20problem.201.html#212454494">(Oct 06 2020 at 16:45)</a>:</h4>
<p>your <code>converges_to</code> example is interesting... it feels like you'd want a ton of helper lemmas</p>



<a name="212454758"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/208328-IMO-grand-challenge/topic/1962%20problem%201/near/212454758" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Lacker <a href="https://leanprover-community.github.io/archive/stream/208328-IMO-grand-challenge/topic/1962.20problem.201.html#212454758">(Oct 06 2020 at 16:48)</a>:</h4>
<p>but yeah i'd have to look through 100's of existing lemmas. so far i have only looked at the trivial arithmetic type lemmas, trying to prove things like <code>(39 * c + 24) % 39 = 24</code></p>



<a name="212454793"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/208328-IMO-grand-challenge/topic/1962%20problem%201/near/212454793" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/208328-IMO-grand-challenge/topic/1962.20problem.201.html#212454793">(Oct 06 2020 at 16:48)</a>:</h4>
<p>It depends what you mean by helper lemmas.  I specifically wanted the students to prove it using "by hand" epsilon-delta analysis, rather than by invoking theorems about limits of addition, division, etc.  So I wanted a Lean proof that did this, too.</p>



<a name="212454848"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/208328-IMO-grand-challenge/topic/1962%20problem%201/near/212454848" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Lacker <a href="https://leanprover-community.github.io/archive/stream/208328-IMO-grand-challenge/topic/1962.20problem.201.html#212454848">(Oct 06 2020 at 16:49)</a>:</h4>
<p>i see. but you end up with something like, you have two fractions of polynomials and you want to prove the inequality and it's just super cumbersome</p>



<a name="212454896"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/208328-IMO-grand-challenge/topic/1962%20problem%201/near/212454896" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/208328-IMO-grand-challenge/topic/1962.20problem.201.html#212454896">(Oct 06 2020 at 16:50)</a>:</h4>
<p>Yeah, it was terrible.  Here's where I was when I abandoned ship <span aria-label="sad" class="emoji emoji-2639" role="img" title="sad">:sad:</span> </p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">local</span> <span class="kd">notation</span> <span class="bp">`|`</span><span class="n">x</span><span class="bp">`|`</span> <span class="o">:=</span> <span class="n">abs</span> <span class="n">x</span>

<span class="kd">example</span> <span class="o">:</span> <span class="n">converges_to</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">n</span><span class="o">,</span> <span class="n">n</span> <span class="bp">/</span> <span class="o">(</span><span class="mi">7</span> <span class="bp">*</span> <span class="n">n</span> <span class="bp">-</span> <span class="mi">1</span><span class="o">))</span> <span class="o">(</span><span class="mi">1</span> <span class="bp">/</span> <span class="mi">7</span><span class="o">)</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">intros</span> <span class="n">ε</span> <span class="n">hε</span><span class="o">,</span>
  <span class="n">obtain</span> <span class="o">⟨</span><span class="n">M</span><span class="o">,</span> <span class="n">hM</span><span class="o">⟩</span> <span class="o">:</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">M</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">),</span> <span class="bp">↑</span><span class="n">M</span> <span class="bp">&gt;</span> <span class="n">max</span> <span class="o">(</span><span class="mi">1</span> <span class="bp">/</span> <span class="o">(</span><span class="mi">41</span> <span class="bp">*</span> <span class="n">ε</span><span class="o">))</span> <span class="mi">1</span> <span class="o">:=</span> <span class="n">exists_nat_gt</span> <span class="n">_</span><span class="o">,</span>
  <span class="n">use</span> <span class="n">M</span><span class="o">,</span>
  <span class="n">intros</span> <span class="n">n</span> <span class="n">hn</span><span class="o">,</span>
  <span class="k">have</span> <span class="o">:</span> <span class="n">max</span> <span class="o">(</span><span class="mi">1</span> <span class="bp">/</span> <span class="o">(</span><span class="mi">41</span> <span class="bp">*</span> <span class="n">ε</span><span class="o">))</span> <span class="mi">1</span> <span class="bp">&lt;</span> <span class="bp">↑</span><span class="n">n</span><span class="o">,</span>
  <span class="o">{</span> <span class="k">have</span> <span class="o">:</span> <span class="o">(</span><span class="n">M</span><span class="o">:</span><span class="n">ℝ</span><span class="o">)</span> <span class="bp">≤</span> <span class="n">n</span><span class="o">,</span>
    <span class="o">{</span> <span class="n">norm_cast</span><span class="o">,</span>
      <span class="n">assumption</span> <span class="o">},</span>
    <span class="n">linarith</span> <span class="o">},</span>
  <span class="k">have</span> <span class="n">h_denom</span> <span class="o">:</span> <span class="o">(</span><span class="mi">7</span><span class="o">:</span><span class="n">ℝ</span><span class="o">)</span> <span class="bp">*</span> <span class="n">n</span> <span class="bp">-</span> <span class="mi">1</span> <span class="bp">≥</span> <span class="mi">6</span> <span class="bp">*</span> <span class="n">n</span><span class="o">,</span>
  <span class="o">{</span> <span class="k">have</span> <span class="n">h_max_right</span> <span class="o">:</span> <span class="n">max</span> <span class="o">(</span><span class="mi">1</span> <span class="bp">/</span> <span class="o">(</span><span class="mi">41</span> <span class="bp">*</span> <span class="n">ε</span><span class="o">))</span> <span class="mi">1</span> <span class="bp">≥</span> <span class="mi">1</span> <span class="o">:=</span> <span class="n">le_max_right</span> <span class="n">_</span> <span class="n">_</span><span class="o">,</span> <span class="c1">--(1 / (41 * ε)) 1,</span>
    <span class="n">linarith</span> <span class="o">},</span>
  <span class="k">have</span> <span class="n">h_denom_nonzero</span> <span class="o">:</span> <span class="o">(</span><span class="mi">7</span><span class="o">:</span><span class="n">ℝ</span><span class="o">)</span> <span class="bp">*</span> <span class="n">n</span> <span class="bp">-</span> <span class="mi">1</span> <span class="bp">≠</span> <span class="mi">0</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">linarith</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">h_7</span> <span class="o">:</span> <span class="o">(</span><span class="mi">7</span><span class="o">:</span><span class="n">ℝ</span><span class="o">)</span> <span class="bp">≠</span> <span class="mi">0</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">linarith</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">h</span> <span class="o">:</span> <span class="bp">↑</span><span class="n">n</span> <span class="bp">/</span> <span class="o">(</span><span class="mi">7</span> <span class="bp">*</span> <span class="bp">↑</span><span class="n">n</span> <span class="bp">-</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="o">(</span><span class="mi">1</span><span class="o">:</span><span class="n">ℝ</span><span class="o">)</span> <span class="bp">/</span> <span class="mi">7</span> <span class="bp">=</span> <span class="mi">7</span><span class="bp">⁻¹</span> <span class="bp">*</span> <span class="o">(</span><span class="mi">7</span> <span class="bp">*</span> <span class="bp">↑</span><span class="n">n</span> <span class="bp">-</span> <span class="mi">1</span><span class="o">)</span><span class="bp">⁻¹</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">field_simp</span> <span class="o">[</span><span class="n">h_denom_nonzero</span><span class="o">,</span> <span class="n">h_7</span><span class="o">],</span>
    <span class="n">ring</span> <span class="o">},</span>
  <span class="k">have</span> <span class="n">h_denom_abs</span> <span class="o">:</span> <span class="n">abs</span> <span class="o">((</span><span class="mi">7</span><span class="o">:</span><span class="n">ℝ</span><span class="o">)</span> <span class="bp">*</span> <span class="n">n</span> <span class="bp">-</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="mi">7</span><span class="o">:</span><span class="n">ℝ</span><span class="o">)</span> <span class="bp">*</span> <span class="n">n</span> <span class="bp">-</span> <span class="mi">1</span> <span class="o">:=</span> <span class="n">abs_of_nonneg</span> <span class="o">(</span><span class="kd">by</span> <span class="n">linarith</span><span class="o">),</span>
  <span class="k">have</span> <span class="n">h_7_abs</span> <span class="o">:</span> <span class="n">abs</span> <span class="o">(</span><span class="mi">7</span><span class="o">:</span><span class="n">ℝ</span><span class="o">)</span> <span class="bp">=</span> <span class="mi">7</span> <span class="o">:=</span> <span class="n">abs_of_nonneg</span> <span class="o">(</span><span class="kd">by</span> <span class="n">linarith</span><span class="o">),</span>
  <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">abs_mul</span><span class="o">,</span> <span class="n">abs_inv</span><span class="o">,</span> <span class="bp">*</span><span class="o">],</span>
  <span class="k">suffices</span> <span class="o">:</span> <span class="mi">7</span> <span class="bp">*</span> <span class="mi">7</span><span class="bp">⁻¹</span> <span class="bp">*</span> <span class="o">(</span><span class="mi">7</span> <span class="bp">*</span> <span class="bp">↑</span><span class="n">n</span> <span class="bp">-</span> <span class="mi">1</span><span class="o">)</span><span class="bp">⁻¹</span> <span class="bp">&lt;</span> <span class="mi">7</span> <span class="bp">*</span> <span class="n">ε</span> <span class="bp">*</span> <span class="o">(</span><span class="mi">7</span> <span class="bp">*</span> <span class="bp">↑</span><span class="n">n</span> <span class="bp">-</span> <span class="mi">1</span><span class="o">)</span><span class="bp">⁻¹</span> <span class="bp">*</span> <span class="o">(</span><span class="mi">7</span> <span class="bp">*</span> <span class="bp">↑</span><span class="n">n</span> <span class="bp">-</span> <span class="mi">1</span><span class="o">),</span>
  <span class="o">{</span> <span class="k">have</span> <span class="o">:</span> <span class="o">(</span><span class="mi">0</span><span class="o">:</span><span class="n">ℝ</span><span class="o">)</span> <span class="bp">&lt;</span> <span class="mi">7</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">norm_num</span><span class="o">,</span>
    <span class="n">sorry</span> <span class="o">},</span>
  <span class="n">simp</span> <span class="o">[</span><span class="n">h_7</span><span class="o">],</span>
  <span class="k">have</span> <span class="n">h_max_left</span> <span class="o">:</span> <span class="n">max</span> <span class="o">(</span><span class="mi">1</span> <span class="bp">/</span> <span class="o">(</span><span class="mi">41</span> <span class="bp">*</span> <span class="n">ε</span><span class="o">))</span> <span class="mi">1</span> <span class="bp">≥</span> <span class="o">(</span><span class="mi">1</span> <span class="bp">/</span> <span class="o">(</span><span class="mi">41</span> <span class="bp">*</span> <span class="n">ε</span><span class="o">))</span> <span class="o">:=</span> <span class="n">le_max_left</span> <span class="n">_</span> <span class="n">_</span><span class="o">,</span>
  <span class="k">have</span> <span class="o">:</span> <span class="o">(</span><span class="mi">1</span> <span class="bp">/</span> <span class="o">(</span><span class="mi">41</span> <span class="bp">*</span> <span class="n">ε</span><span class="o">))</span> <span class="bp">≤</span> <span class="n">n</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">linarith</span><span class="o">,</span>
  <span class="n">sorry</span>
<span class="kd">end</span>
</code></pre></div>



<a name="212454941"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/208328-IMO-grand-challenge/topic/1962%20problem%201/near/212454941" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Lacker <a href="https://leanprover-community.github.io/archive/stream/208328-IMO-grand-challenge/topic/1962.20problem.201.html#212454941">(Oct 06 2020 at 16:50)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> <code>tidy</code> doesn't work on <code>(39 * c + 24) % 39 = 24</code> by the way. also, if I solve something using <code>tidy</code>, can I see what lemmas it used?</p>



<a name="212455109"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/208328-IMO-grand-challenge/topic/1962%20problem%201/near/212455109" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/208328-IMO-grand-challenge/topic/1962.20problem.201.html#212455109">(Oct 06 2020 at 16:51)</a>:</h4>
<p><span class="user-mention silent" data-user-id="238605">Kevin Lacker</span> <a href="#narrow/stream/208328-IMO-grand-challenge/topic/1962.20problem.201/near/212454941">said</a>:</p>
<blockquote>
<p>also, if I solve something using <code>tidy</code>, can I see what lemmas it used?</p>
</blockquote>
<p><code>tidy?</code></p>



<a name="212455470"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/208328-IMO-grand-challenge/topic/1962%20problem%201/near/212455470" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Lacker <a href="https://leanprover-community.github.io/archive/stream/208328-IMO-grand-challenge/topic/1962.20problem.201.html#212455470">(Oct 06 2020 at 16:54)</a>:</h4>
<p>see previously in this thread, where mario was saying i should try using <code>tidy</code></p>



<a name="212455666"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/208328-IMO-grand-challenge/topic/1962%20problem%201/near/212455666" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/208328-IMO-grand-challenge/topic/1962.20problem.201.html#212455666">(Oct 06 2020 at 16:56)</a>:</h4>
<p>No, I mean actually type <code>tidy?</code> to query <code>tidy</code>!  See <a href="https://leanprover-community.github.io/mathlib_docs/find/tactic.tidy">docs#tactic.tidy</a>.</p>



<a name="212455685"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/208328-IMO-grand-challenge/topic/1962%20problem%201/near/212455685" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Lacker <a href="https://leanprover-community.github.io/archive/stream/208328-IMO-grand-challenge/topic/1962.20problem.201.html#212455685">(Oct 06 2020 at 16:56)</a>:</h4>
<p>hmm, i can't cut and paste your code, because it doesn't recognize the <code>|</code></p>



<a name="212455702"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/208328-IMO-grand-challenge/topic/1962%20problem%201/near/212455702" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Lacker <a href="https://leanprover-community.github.io/archive/stream/208328-IMO-grand-challenge/topic/1962.20problem.201.html#212455702">(Oct 06 2020 at 16:56)</a>:</h4>
<p>oh, i see. lol</p>



<a name="212455760"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/208328-IMO-grand-challenge/topic/1962%20problem%201/near/212455760" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/208328-IMO-grand-challenge/topic/1962.20problem.201.html#212455760">(Oct 06 2020 at 16:57)</a>:</h4>
<p><span class="user-mention silent" data-user-id="238605">Kevin Lacker</span> <a href="#narrow/stream/208328-IMO-grand-challenge/topic/1962.20problem.201/near/212455685">said</a>:</p>
<blockquote>
<p>hmm, i can't cut and paste your code, because it doesn't recognize the <code>|</code></p>
</blockquote>
<p>I'll edit above to include the missing notation def, sorry!</p>



<a name="212455804"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/208328-IMO-grand-challenge/topic/1962%20problem%201/near/212455804" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Lacker <a href="https://leanprover-community.github.io/archive/stream/208328-IMO-grand-challenge/topic/1962.20problem.201.html#212455804">(Oct 06 2020 at 16:57)</a>:</h4>
<p>is a normal <code>|</code> supposed to be absolute value? or do you have to to <code>\|</code></p>



<a name="212455936"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/208328-IMO-grand-challenge/topic/1962%20problem%201/near/212455936" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Lacker <a href="https://leanprover-community.github.io/archive/stream/208328-IMO-grand-challenge/topic/1962.20problem.201.html#212455936">(Oct 06 2020 at 16:58)</a>:</h4>
<p>oh just <code>abs</code></p>



<a name="212455940"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/208328-IMO-grand-challenge/topic/1962%20problem%201/near/212455940" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Lacker <a href="https://leanprover-community.github.io/archive/stream/208328-IMO-grand-challenge/topic/1962.20problem.201.html#212455940">(Oct 06 2020 at 16:58)</a>:</h4>
<p>ok</p>



<a name="212456556"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/208328-IMO-grand-challenge/topic/1962%20problem%201/near/212456556" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Lacker <a href="https://leanprover-community.github.io/archive/stream/208328-IMO-grand-challenge/topic/1962.20problem.201.html#212456556">(Oct 06 2020 at 17:03)</a>:</h4>
<p>yeah i tried doing this differently and ran into trouble quickly. intuitively i would just be like, any big number should work, pick some random polynomial in (1/epsilon). but actually you need to map between nats and reals, and you need to handle the somewhat stupid case where epsilon is less than 1.</p>



<a name="212456694"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/208328-IMO-grand-challenge/topic/1962%20problem%201/near/212456694" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/208328-IMO-grand-challenge/topic/1962.20problem.201.html#212456694">(Oct 06 2020 at 17:04)</a>:</h4>
<p>Yep, all this.  Also fractions are hard.  Every time the denominator changes slightly you need a certificate that the new denominator is nonzero.</p>



<a name="212456759"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/208328-IMO-grand-challenge/topic/1962%20problem%201/near/212456759" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Lacker <a href="https://leanprover-community.github.io/archive/stream/208328-IMO-grand-challenge/topic/1962.20problem.201.html#212456759">(Oct 06 2020 at 17:05)</a>:</h4>
<p>something like Mathematica will solve this, right?</p>



<a name="212456833"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/208328-IMO-grand-challenge/topic/1962%20problem%201/near/212456833" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Lacker <a href="https://leanprover-community.github.io/archive/stream/208328-IMO-grand-challenge/topic/1962.20problem.201.html#212456833">(Oct 06 2020 at 17:06)</a>:</h4>
<p>it won't output a certificate, but it is probably only making valid steps, so it would be theoretically possible to do so</p>



<a name="212456917"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/208328-IMO-grand-challenge/topic/1962%20problem%201/near/212456917" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/208328-IMO-grand-challenge/topic/1962.20problem.201.html#212456917">(Oct 06 2020 at 17:07)</a>:</h4>
<p>I think Lean would solve it fairly fast, too, if I allowed myself to use, say, the whole <a href="https://leanprover-community.github.io/mathlib_docs/find/asymptotics.is_O">docs#asymptotics.is_O</a> library.</p>



<a name="212457049"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/208328-IMO-grand-challenge/topic/1962%20problem%201/near/212457049" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/208328-IMO-grand-challenge/topic/1962.20problem.201.html#212457049">(Oct 06 2020 at 17:08)</a>:</h4>
<p>But since the write-out-a-bunch-of-explicit-inequalities proof is human-trivial, I wish it were Lean-trivial too.</p>



<a name="212457084"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/208328-IMO-grand-challenge/topic/1962%20problem%201/near/212457084" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/208328-IMO-grand-challenge/topic/1962.20problem.201.html#212457084">(Oct 06 2020 at 17:08)</a>:</h4>
<p>And I mentioned it here because it reminded me of similar struggles I've seen in a couple of your IMO formalizations.</p>



<a name="212457118"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/208328-IMO-grand-challenge/topic/1962%20problem%201/near/212457118" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Lacker <a href="https://leanprover-community.github.io/archive/stream/208328-IMO-grand-challenge/topic/1962.20problem.201.html#212457118">(Oct 06 2020 at 17:08)</a>:</h4>
<p>yeah - that seems like a subproblem of the IMO challenge in a sense. if the "IMO grand challenge" is for an AI to solve IMO problems, consider a similar "IMO Trivial Challenge" where the question is, can the AI automatically solve everything that a human mathematician considers trivial</p>



<a name="212457159"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/208328-IMO-grand-challenge/topic/1962%20problem%201/near/212457159" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Lacker <a href="https://leanprover-community.github.io/archive/stream/208328-IMO-grand-challenge/topic/1962.20problem.201.html#212457159">(Oct 06 2020 at 17:09)</a>:</h4>
<p>what fraction of formalizing an IMO problem is formalizing part that a human would consider trivial? looking at the formalizations so far it's maybe... 80%?</p>



<a name="212457191"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/208328-IMO-grand-challenge/topic/1962%20problem%201/near/212457191" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Lacker <a href="https://leanprover-community.github.io/archive/stream/208328-IMO-grand-challenge/topic/1962.20problem.201.html#212457191">(Oct 06 2020 at 17:09)</a>:</h4>
<p>so if an AI strategy ends up being something like a tree search, perhaps 80% of the work trawling through this tree is actually handling the "trivial" parts</p>



<a name="212457395"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/208328-IMO-grand-challenge/topic/1962%20problem%201/near/212457395" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Lacker <a href="https://leanprover-community.github.io/archive/stream/208328-IMO-grand-challenge/topic/1962.20problem.201.html#212457395">(Oct 06 2020 at 17:11)</a>:</h4>
<p>a related question is training data - it's gonna be pretty hard to get enough training data for modern AI solutions for IMO problems, but it seems much more possible to generate a supply of trivial math problems, that are not currently trivially solvable for some Lean tactic...</p>



<a name="212460663"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/208328-IMO-grand-challenge/topic/1962%20problem%201/near/212460663" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/208328-IMO-grand-challenge/topic/1962.20problem.201.html#212460663">(Oct 06 2020 at 17:40)</a>:</h4>
<p><span class="user-mention" data-user-id="260507">@Heather Macbeth</span> Well I won't pretend it was easy, but I managed to prove your theorem:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">example</span> <span class="o">:</span> <span class="n">converges_to</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">n</span><span class="o">,</span> <span class="n">n</span> <span class="bp">/</span> <span class="o">(</span><span class="mi">7</span> <span class="bp">*</span> <span class="n">n</span> <span class="bp">-</span> <span class="mi">1</span><span class="o">))</span> <span class="o">(</span><span class="mi">1</span> <span class="bp">/</span> <span class="mi">7</span><span class="o">)</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">intros</span> <span class="n">ε</span> <span class="n">hε</span><span class="o">,</span>
  <span class="n">obtain</span> <span class="o">⟨</span><span class="n">M</span><span class="o">,</span> <span class="n">hM</span><span class="o">⟩</span> <span class="o">:</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">M</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">),</span> <span class="bp">↑</span><span class="n">M</span> <span class="bp">&gt;</span> <span class="n">max</span> <span class="o">(</span><span class="mi">1</span> <span class="bp">/</span> <span class="o">(</span><span class="mi">41</span> <span class="bp">*</span> <span class="n">ε</span><span class="o">))</span> <span class="mi">1</span> <span class="o">:=</span> <span class="n">exists_nat_gt</span> <span class="n">_</span><span class="o">,</span>
  <span class="n">use</span> <span class="n">M</span><span class="o">,</span>
  <span class="n">intros</span> <span class="n">n</span> <span class="n">hn</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">hmn</span> <span class="o">:</span> <span class="o">(</span><span class="n">M</span><span class="o">:</span><span class="n">ℝ</span><span class="o">)</span> <span class="bp">≤</span> <span class="n">n</span><span class="o">,</span> <span class="o">{</span> <span class="n">norm_cast</span><span class="o">,</span> <span class="n">assumption</span> <span class="o">},</span>
  <span class="n">obtain</span> <span class="o">⟨</span><span class="n">hn1</span><span class="o">,</span> <span class="n">hn2</span><span class="o">⟩</span> <span class="o">:=</span> <span class="n">max_lt_iff.1</span> <span class="o">(</span><span class="n">lt_of_lt_of_le</span> <span class="n">hM</span> <span class="n">hmn</span><span class="o">),</span>
  <span class="n">replace</span> <span class="n">hn1</span> <span class="o">:</span> <span class="mi">1</span> <span class="bp">/</span> <span class="n">ε</span> <span class="bp">&lt;</span> <span class="mi">41</span> <span class="bp">*</span> <span class="n">n</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">rw</span> <span class="o">[</span><span class="n">div_lt_iff'</span> <span class="n">hε</span><span class="o">],</span>
    <span class="n">rw</span> <span class="o">[</span><span class="n">div_lt_iff'</span> <span class="o">(</span><span class="n">mul_pos</span> <span class="o">(</span><span class="kd">by</span> <span class="n">norm_num</span> <span class="o">:</span> <span class="o">(</span><span class="mi">0</span><span class="o">:</span><span class="n">ℝ</span><span class="o">)</span> <span class="bp">&lt;</span> <span class="mi">41</span><span class="o">)</span> <span class="n">hε</span><span class="o">)]</span> <span class="n">at</span> <span class="n">hn1</span><span class="o">,</span>
    <span class="n">simpa</span> <span class="o">[</span><span class="n">mul_comm</span><span class="o">,</span> <span class="n">mul_assoc</span><span class="o">]</span> <span class="n">using</span> <span class="n">hn1</span> <span class="o">},</span>
  <span class="k">have</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">&lt;</span> <span class="o">(</span><span class="mi">7</span> <span class="bp">*</span> <span class="n">n</span> <span class="bp">-</span> <span class="mi">1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="o">{</span> <span class="n">linarith</span> <span class="o">},</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">div_sub_div</span> <span class="n">_</span> <span class="n">_</span> <span class="o">(</span><span class="n">ne_of_gt</span> <span class="n">this</span><span class="o">)</span> <span class="o">(</span><span class="kd">by</span> <span class="n">norm_num</span> <span class="o">:</span> <span class="o">(</span><span class="mi">7</span><span class="o">:</span><span class="n">ℝ</span><span class="o">)</span> <span class="bp">≠</span> <span class="mi">0</span><span class="o">)],</span>
  <span class="k">have</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">&lt;</span> <span class="mi">7</span> <span class="bp">*</span> <span class="o">(</span><span class="mi">7</span> <span class="bp">*</span> <span class="n">n</span> <span class="bp">-</span> <span class="mi">1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">:=</span> <span class="n">mul_pos</span> <span class="o">(</span><span class="kd">by</span> <span class="n">norm_num</span><span class="o">)</span> <span class="n">this</span><span class="o">,</span>
  <span class="n">simp</span> <span class="o">[</span><span class="n">mul_comm</span><span class="o">,</span> <span class="n">sub_sub_cancel</span><span class="o">],</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">abs_of_pos</span> <span class="o">(</span><span class="n">inv_pos.2</span> <span class="n">this</span><span class="o">),</span> <span class="bp">←</span> <span class="n">one_div</span><span class="o">,</span> <span class="n">div_lt_iff</span> <span class="n">this</span><span class="o">,</span> <span class="bp">←</span> <span class="n">div_lt_iff'</span> <span class="n">hε</span><span class="o">],</span>
  <span class="n">refine</span> <span class="n">lt_of_lt_of_le</span> <span class="n">hn1</span> <span class="n">_</span><span class="o">,</span>
  <span class="n">linarith</span><span class="o">,</span>
<span class="kd">end</span>
</code></pre></div>



<a name="212460724"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/208328-IMO-grand-challenge/topic/1962%20problem%201/near/212460724" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/208328-IMO-grand-challenge/topic/1962.20problem.201.html#212460724">(Oct 06 2020 at 17:40)</a>:</h4>
<p>Congratulations!</p>



<a name="212460728"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/208328-IMO-grand-challenge/topic/1962%20problem%201/near/212460728" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/208328-IMO-grand-challenge/topic/1962.20problem.201.html#212460728">(Oct 06 2020 at 17:40)</a>:</h4>
<p>I think the "right way" to prove this though is a way to reason about asymptotics</p>



<a name="212460754"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/208328-IMO-grand-challenge/topic/1962%20problem%201/near/212460754" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/208328-IMO-grand-challenge/topic/1962.20problem.201.html#212460754">(Oct 06 2020 at 17:41)</a>:</h4>
<p>rather than doing silly epsilon delta stuff</p>



<a name="212460794"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/208328-IMO-grand-challenge/topic/1962%20problem%201/near/212460794" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/208328-IMO-grand-challenge/topic/1962.20problem.201.html#212460794">(Oct 06 2020 at 17:41)</a>:</h4>
<p>Well, yes.</p>
<p><span class="user-mention silent" data-user-id="260507">Heather Macbeth</span> <a href="#narrow/stream/208328-IMO-grand-challenge/topic/1962.20problem.201/near/212456917">said</a>:</p>
<blockquote>
<p>I think Lean would solve it fairly fast, too, if I allowed myself to use, say, the whole <a href="https://leanprover-community.github.io/mathlib_docs/find/asymptotics.is_O">docs#asymptotics.is_O</a> library.</p>
</blockquote>



<a name="212460905"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/208328-IMO-grand-challenge/topic/1962%20problem%201/near/212460905" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/208328-IMO-grand-challenge/topic/1962.20problem.201.html#212460905">(Oct 06 2020 at 17:42)</a>:</h4>
<p>But it would be nice if both ways are possible.  Sometimes one needs to reason about inequalities among rational functions, without there being any asymptotics involved.</p>



<a name="212461086"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/208328-IMO-grand-challenge/topic/1962%20problem%201/near/212461086" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/208328-IMO-grand-challenge/topic/1962.20problem.201.html#212461086">(Oct 06 2020 at 17:44)</a>:</h4>
<p>Your point about pain around nonzero divisors is well taken. The <code>field_simps</code> tactic helps a lot with this general problem but it's still not easy</p>



<a name="212461173"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/208328-IMO-grand-challenge/topic/1962%20problem%201/near/212461173" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/208328-IMO-grand-challenge/topic/1962.20problem.201.html#212461173">(Oct 06 2020 at 17:45)</a>:</h4>
<p>The proof I gave above is I think a lot more "manual" than the one you did, with more explicit rewrite chains</p>



<a name="212461177"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/208328-IMO-grand-challenge/topic/1962%20problem%201/near/212461177" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/208328-IMO-grand-challenge/topic/1962.20problem.201.html#212461177">(Oct 06 2020 at 17:45)</a>:</h4>
<p><span class="user-mention silent" data-user-id="260507">Heather Macbeth</span> <a href="#narrow/stream/208328-IMO-grand-challenge/topic/1962.20problem.201/near/212460905">said</a>:</p>
<blockquote>
<p>But it would be nice if both ways are possible.  Sometimes one needs to reason about inequalities among rational functions, without there being any asymptotics involved.</p>
</blockquote>
<p>Here's a landmark paper from my own field that happens to require this kind of reasoning<br>
<a href="https://arxiv.org/abs/0705.0710">https://arxiv.org/abs/0705.0710</a><br>
(as one tiny human-trivial section in an article otherwise filled with difficult things)</p>



<a name="212461452"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/208328-IMO-grand-challenge/topic/1962%20problem%201/near/212461452" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Lacker <a href="https://leanprover-community.github.io/archive/stream/208328-IMO-grand-challenge/topic/1962.20problem.201.html#212461452">(Oct 06 2020 at 17:47)</a>:</h4>
<p>a lot of the nonzero stuff might be easier if the ability to prove trivial statements was a little better. e.g.</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">example</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="mi">7</span> <span class="bp">*</span> <span class="n">n</span> <span class="bp">-</span> <span class="mi">1</span> <span class="bp">≠</span> <span class="mi">0</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">tidy</span>
</code></pre></div>

<p>that doesn't work but I can imagine a world where it works.</p>



<a name="212461467"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/208328-IMO-grand-challenge/topic/1962%20problem%201/near/212461467" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/208328-IMO-grand-challenge/topic/1962.20problem.201.html#212461467">(Oct 06 2020 at 17:47)</a>:</h4>
<p>Heh, it amuses me to think that the hard part in the definition of the calabi functional on page 5 is the division</p>



<a name="212461581"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/208328-IMO-grand-challenge/topic/1962%20problem%201/near/212461581" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/208328-IMO-grand-challenge/topic/1962.20problem.201.html#212461581">(Oct 06 2020 at 17:48)</a>:</h4>
<p><span class="user-mention" data-user-id="238605">@Kevin Lacker</span> that statement is false</p>



<a name="212461617"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/208328-IMO-grand-challenge/topic/1962%20problem%201/near/212461617" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Lacker <a href="https://leanprover-community.github.io/archive/stream/208328-IMO-grand-challenge/topic/1962.20problem.201.html#212461617">(Oct 06 2020 at 17:48)</a>:</h4>
<p>really? it is not working for me right now</p>



<a name="212461623"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/208328-IMO-grand-challenge/topic/1962%20problem%201/near/212461623" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/208328-IMO-grand-challenge/topic/1962.20problem.201.html#212461623">(Oct 06 2020 at 17:48)</a>:</h4>
<p>which is one of many reasons why this is hard</p>



<a name="212461639"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/208328-IMO-grand-challenge/topic/1962%20problem%201/near/212461639" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/208328-IMO-grand-challenge/topic/1962.20problem.201.html#212461639">(Oct 06 2020 at 17:48)</a>:</h4>
<p>no, your theorem is false</p>



<a name="212461656"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/208328-IMO-grand-challenge/topic/1962%20problem%201/near/212461656" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Lacker <a href="https://leanprover-community.github.io/archive/stream/208328-IMO-grand-challenge/topic/1962.20problem.201.html#212461656">(Oct 06 2020 at 17:48)</a>:</h4>
<p>oh, because 0 - 1 is 0 in lean world</p>



<a name="212461660"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/208328-IMO-grand-challenge/topic/1962%20problem%201/near/212461660" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Lacker <a href="https://leanprover-community.github.io/archive/stream/208328-IMO-grand-challenge/topic/1962.20problem.201.html#212461660">(Oct 06 2020 at 17:48)</a>:</h4>
<p>ha</p>



<a name="212461693"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/208328-IMO-grand-challenge/topic/1962%20problem%201/near/212461693" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Lacker <a href="https://leanprover-community.github.io/archive/stream/208328-IMO-grand-challenge/topic/1962.20problem.201.html#212461693">(Oct 06 2020 at 17:49)</a>:</h4>
<p><code>example (n : ℕ) (h : n &gt; 0) : 7 * n - 1 ≠ 0 := by tidy</code> then</p>



<a name="212461715"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/208328-IMO-grand-challenge/topic/1962%20problem%201/near/212461715" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/208328-IMO-grand-challenge/topic/1962.20problem.201.html#212461715">(Oct 06 2020 at 17:49)</a>:</h4>
<p><code>linarith</code> should be able to get that</p>



<a name="212461735"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/208328-IMO-grand-challenge/topic/1962%20problem%201/near/212461735" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/208328-IMO-grand-challenge/topic/1962.20problem.201.html#212461735">(Oct 06 2020 at 17:49)</a>:</h4>
<p>maybe not because you are still using nat subtraction</p>



<a name="212461739"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/208328-IMO-grand-challenge/topic/1962%20problem%201/near/212461739" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Lacker <a href="https://leanprover-community.github.io/archive/stream/208328-IMO-grand-challenge/topic/1962.20problem.201.html#212461739">(Oct 06 2020 at 17:49)</a>:</h4>
<p>it does not</p>



<a name="212461849"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/208328-IMO-grand-challenge/topic/1962%20problem%201/near/212461849" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/208328-IMO-grand-challenge/topic/1962.20problem.201.html#212461849">(Oct 06 2020 at 17:50)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">example</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">n</span> <span class="bp">&gt;</span> <span class="mi">0</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="mi">7</span> <span class="bp">*</span> <span class="n">n</span> <span class="bp">-</span> <span class="mi">1</span> <span class="o">:</span> <span class="n">ℤ</span><span class="o">)</span> <span class="bp">≠</span> <span class="mi">0</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">linarith</span>
</code></pre></div>

<p>works</p>



<a name="212461934"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/208328-IMO-grand-challenge/topic/1962%20problem%201/near/212461934" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Lacker <a href="https://leanprover-community.github.io/archive/stream/208328-IMO-grand-challenge/topic/1962.20problem.201.html#212461934">(Oct 06 2020 at 17:51)</a>:</h4>
<p>re: the hard part of the calabi function being division, it's like playing chess. the computer can easily play chess way better than any human, even those who studied for years. but to actually pick up a chess piece and put it down on a different square, that's hard, basically cutting edge robotics, although a 5-year-old has no trouble.</p>



<a name="212461979"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/208328-IMO-grand-challenge/topic/1962%20problem%201/near/212461979" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/208328-IMO-grand-challenge/topic/1962.20problem.201.html#212461979">(Oct 06 2020 at 17:51)</a>:</h4>
<p>I guess this version is true even without the hypothesis but that becomes more of a divisibility proof than a linear arithmetic</p>



<a name="212462079"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/208328-IMO-grand-challenge/topic/1962%20problem%201/near/212462079" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/208328-IMO-grand-challenge/topic/1962.20problem.201.html#212462079">(Oct 06 2020 at 17:52)</a>:</h4>
<p>It's definitely true that formalization takes the easy things and the hard things and completely turns them on their head</p>



<a name="212462113"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/208328-IMO-grand-challenge/topic/1962%20problem%201/near/212462113" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Lacker <a href="https://leanprover-community.github.io/archive/stream/208328-IMO-grand-challenge/topic/1962.20problem.201.html#212462113">(Oct 06 2020 at 17:52)</a>:</h4>
<p>here's another thing that would be nice to be trivial: <code>example (n : ℕ) : n * n ≠ 3 := by tidy</code></p>



<a name="212462161"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/208328-IMO-grand-challenge/topic/1962%20problem%201/near/212462161" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/208328-IMO-grand-challenge/topic/1962.20problem.201.html#212462161">(Oct 06 2020 at 17:53)</a>:</h4>
<p>that could conceivably be <code>dec_trivial</code></p>



<a name="212462201"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/208328-IMO-grand-challenge/topic/1962%20problem%201/near/212462201" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/208328-IMO-grand-challenge/topic/1962.20problem.201.html#212462201">(Oct 06 2020 at 17:53)</a>:</h4>
<p>but you need a decision procedure tailored for squares</p>



<a name="212462268"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/208328-IMO-grand-challenge/topic/1962%20problem%201/near/212462268" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/208328-IMO-grand-challenge/topic/1962.20problem.201.html#212462268">(Oct 06 2020 at 17:54)</a>:</h4>
<p>the hard part is selecting the right tool for the job</p>



<a name="212462633"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/208328-IMO-grand-challenge/topic/1962%20problem%201/near/212462633" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Lacker <a href="https://leanprover-community.github.io/archive/stream/208328-IMO-grand-challenge/topic/1962.20problem.201.html#212462633">(Oct 06 2020 at 17:57)</a>:</h4>
<p>i thought this might be easier but it still doesn't tidy: <code>example (n : ℕ) : (n * n) % 4 ≠ 3 := by tidy</code> i mean i have no idea what tidy is doing under the hood, so i dont blame it per se. that just makes it clearer to a human that you can do it by cases</p>



<a name="212462671"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/208328-IMO-grand-challenge/topic/1962%20problem%201/near/212462671" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/208328-IMO-grand-challenge/topic/1962.20problem.201.html#212462671">(Oct 06 2020 at 17:57)</a>:</h4>
<p><span class="user-mention silent" data-user-id="238605">Kevin Lacker</span> <a href="#narrow/stream/208328-IMO-grand-challenge/topic/1962.20problem.201/near/212454941">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="110049">Mario Carneiro</span> <code>tidy</code> doesn't work on <code>(39 * c + 24) % 39 = 24</code> by the way. also, if I solve something using <code>tidy</code>, can I see what lemmas it used?</p>
</blockquote>
<p>The proof of <code>(39 * c + 24) % 39 = 24</code> should be two steps: apply the theorem <code>a &lt; b -&gt; (b * c + a) % b = a</code>, and then <code>norm_num</code></p>



<a name="212462867"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/208328-IMO-grand-challenge/topic/1962%20problem%201/near/212462867" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/208328-IMO-grand-challenge/topic/1962.20problem.201.html#212462867">(Oct 06 2020 at 17:58)</a>:</h4>
<p>I should remark that I'm not the <code>tidy</code> maintainer, and I would never want to be because any tactic that puts itself in a "solve every goal" situation is setting its users up for disappointment</p>



<a name="212463107"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/208328-IMO-grand-challenge/topic/1962%20problem%201/near/212463107" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/208328-IMO-grand-challenge/topic/1962.20problem.201.html#212463107">(Oct 06 2020 at 18:00)</a>:</h4>
<p><code>tidy</code> literally does what I said: it applies <code>simp</code> and <code>linarith</code> and all the other tools in the box</p>



<a name="212463143"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/208328-IMO-grand-challenge/topic/1962%20problem%201/near/212463143" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Lacker <a href="https://leanprover-community.github.io/archive/stream/208328-IMO-grand-challenge/topic/1962.20problem.201.html#212463143">(Oct 06 2020 at 18:00)</a>:</h4>
<p>right, i just don't know what all the tools in the box are</p>



<a name="212463217"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/208328-IMO-grand-challenge/topic/1962%20problem%201/near/212463217" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/208328-IMO-grand-challenge/topic/1962.20problem.201.html#212463217">(Oct 06 2020 at 18:01)</a>:</h4>
<p>well, now you know that none of them solves this without advice</p>



<a name="212463387"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/208328-IMO-grand-challenge/topic/1962%20problem%201/near/212463387" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/208328-IMO-grand-challenge/topic/1962.20problem.201.html#212463387">(Oct 06 2020 at 18:02)</a>:</h4>
<p>There are some fancy tactics but most are fairly predictable, and none do magic</p>



<a name="212463446"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/208328-IMO-grand-challenge/topic/1962%20problem%201/near/212463446" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/208328-IMO-grand-challenge/topic/1962.20problem.201.html#212463446">(Oct 06 2020 at 18:03)</a>:</h4>
<p>Case bashing is a thing you can do but it's not done automatically because it's expensive</p>



<a name="212463526"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/208328-IMO-grand-challenge/topic/1962%20problem%201/near/212463526" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/208328-IMO-grand-challenge/topic/1962.20problem.201.html#212463526">(Oct 06 2020 at 18:03)</a>:</h4>
<p>for example, you could phrase your square theorem as something about <code>(n : zmod 4) * n != 3</code> which I think you can prove by <code>dec_trivial</code></p>



<a name="212463712"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/208328-IMO-grand-challenge/topic/1962%20problem%201/near/212463712" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/208328-IMO-grand-challenge/topic/1962.20problem.201.html#212463712">(Oct 06 2020 at 18:05)</a>:</h4>
<p>Mario, while we're on this subject, can you cast an eye over Kevin's PR <a href="https://github.com/leanprover-community/mathlib/issues/4366">#4366</a> to check whether the case-bashing is done with maximal efficiency?</p>



<a name="212470289"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/208328-IMO-grand-challenge/topic/1962%20problem%201/near/212470289" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/208328-IMO-grand-challenge/topic/1962.20problem.201.html#212470289">(Oct 06 2020 at 19:00)</a>:</h4>
<p>Hm, well if you ask me (and you did), I think it would be better to state the search thusly:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">def</span> <span class="n">search_upto</span> <span class="o">(</span><span class="n">c</span> <span class="n">n</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">:=</span>
<span class="n">n</span> <span class="bp">=</span> <span class="n">c</span> <span class="bp">*</span> <span class="mi">11</span> <span class="bp">∧</span> <span class="bp">∀</span> <span class="n">m</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">,</span> <span class="n">m</span> <span class="bp">&lt;</span> <span class="n">n</span> <span class="bp">→</span> <span class="n">problem_predicate</span> <span class="n">m</span> <span class="bp">→</span> <span class="n">solution_predicate</span> <span class="n">m</span>

<span class="kd">lemma</span> <span class="n">search_upto_start</span> <span class="o">:</span> <span class="n">search_upto</span> <span class="mi">9</span> <span class="mi">99</span> <span class="o">:=</span> <span class="o">⟨</span><span class="n">rfl</span><span class="o">,</span> <span class="bp">λ</span> <span class="n">n</span> <span class="n">h</span> <span class="n">p</span><span class="o">,</span> <span class="kd">by</span> <span class="n">linarith</span> <span class="o">[</span><span class="n">ge_100</span> <span class="n">p</span><span class="o">]⟩</span>

<span class="kd">lemma</span> <span class="n">search_upto_step</span> <span class="o">{</span><span class="n">c</span> <span class="n">n</span><span class="o">}</span> <span class="o">(</span><span class="n">H</span> <span class="o">:</span> <span class="n">search_upto</span> <span class="n">c</span> <span class="n">n</span><span class="o">)</span>
  <span class="o">{</span><span class="n">c'</span> <span class="n">n'</span><span class="o">}</span> <span class="o">(</span><span class="n">ec</span> <span class="o">:</span> <span class="n">c</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">=</span> <span class="n">c'</span><span class="o">)</span> <span class="o">(</span><span class="n">en</span> <span class="o">:</span> <span class="n">n</span> <span class="bp">+</span> <span class="mi">11</span> <span class="bp">=</span> <span class="n">n'</span><span class="o">)</span>
  <span class="o">{</span><span class="n">l</span><span class="o">}</span> <span class="o">(</span><span class="n">el</span> <span class="o">:</span> <span class="n">nat.digits</span> <span class="mi">10</span> <span class="n">n</span> <span class="bp">=</span> <span class="n">l</span><span class="o">)</span>
  <span class="o">(</span><span class="n">H'</span> <span class="o">:</span> <span class="n">c</span> <span class="bp">=</span> <span class="n">sum_of_squares</span> <span class="n">l</span> <span class="bp">→</span> <span class="n">c</span> <span class="bp">=</span> <span class="mi">50</span> <span class="bp">∨</span> <span class="n">c</span> <span class="bp">=</span> <span class="mi">73</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">search_upto</span> <span class="n">c'</span> <span class="n">n'</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">subst</span> <span class="n">ec</span><span class="o">,</span> <span class="n">subst</span> <span class="n">en</span><span class="o">,</span> <span class="n">subst</span> <span class="n">el</span><span class="o">,</span>
  <span class="n">obtain</span> <span class="o">⟨</span><span class="n">rfl</span><span class="o">,</span> <span class="n">H</span><span class="o">⟩</span> <span class="o">:=</span> <span class="n">H</span><span class="o">,</span>
  <span class="n">refine</span> <span class="o">⟨</span><span class="kd">by</span> <span class="n">ring</span><span class="o">,</span> <span class="bp">λ</span> <span class="n">m</span> <span class="n">l</span> <span class="n">p</span><span class="o">,</span> <span class="n">_</span><span class="o">⟩,</span>
  <span class="n">obtain</span> <span class="o">⟨</span><span class="n">h₁</span><span class="o">,</span> <span class="o">⟨</span><span class="n">m</span><span class="o">,</span> <span class="n">rfl</span><span class="o">⟩,</span> <span class="n">h₂</span><span class="o">⟩</span> <span class="o">:=</span> <span class="n">id</span> <span class="n">p</span><span class="o">,</span>
  <span class="n">by_cases</span> <span class="n">h</span> <span class="o">:</span> <span class="mi">11</span> <span class="bp">*</span> <span class="n">m</span> <span class="bp">&lt;</span> <span class="n">c</span> <span class="bp">*</span> <span class="mi">11</span><span class="o">,</span> <span class="o">{</span> <span class="n">exact</span> <span class="n">H</span> <span class="n">_</span> <span class="n">h</span> <span class="n">p</span> <span class="o">},</span>
  <span class="k">have</span> <span class="o">:</span> <span class="n">m</span> <span class="bp">=</span> <span class="n">c</span><span class="o">,</span> <span class="o">{</span><span class="n">linarith</span><span class="o">},</span> <span class="n">subst</span> <span class="n">m</span><span class="o">,</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">nat.mul_div_cancel_left</span> <span class="n">_</span> <span class="o">(</span><span class="kd">by</span> <span class="n">norm_num</span> <span class="o">:</span> <span class="mi">11</span> <span class="bp">&gt;</span> <span class="mi">0</span><span class="o">),</span> <span class="n">mul_comm</span><span class="o">]</span> <span class="n">at</span> <span class="n">h₂</span><span class="o">,</span>
  <span class="n">refine</span> <span class="o">(</span><span class="n">H'</span> <span class="n">h₂</span><span class="o">)</span><span class="bp">.</span><span class="n">imp</span> <span class="n">_</span> <span class="n">_</span><span class="bp">;</span> <span class="o">{</span><span class="n">rintro</span> <span class="n">rfl</span><span class="o">,</span> <span class="n">norm_num</span><span class="o">}</span>
<span class="kd">end</span>

<span class="kd">lemma</span> <span class="n">search_upto_end</span> <span class="o">{</span><span class="n">c</span><span class="o">}</span> <span class="o">(</span><span class="n">H</span> <span class="o">:</span> <span class="n">search_upto</span> <span class="n">c</span> <span class="mi">1001</span><span class="o">)</span>
  <span class="o">{</span><span class="n">n</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">}</span> <span class="o">(</span><span class="n">ppn</span> <span class="o">:</span> <span class="n">problem_predicate</span> <span class="n">n</span><span class="o">)</span> <span class="o">:</span> <span class="n">solution_predicate</span> <span class="n">n</span> <span class="o">:=</span>
<span class="n">H.2</span> <span class="n">_</span> <span class="o">(</span><span class="kd">by</span> <span class="n">linarith</span> <span class="o">[</span><span class="n">lt_1000</span> <span class="n">ppn</span><span class="o">])</span> <span class="n">ppn</span>

<span class="c">/-</span><span class="cm"></span>
<span class="cm">Now we just need to combine the results from the `search` lemmas.</span>
<span class="cm">-/</span>

<span class="kd">lemma</span> <span class="n">right_direction</span> <span class="o">{</span><span class="n">n</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">}</span> <span class="o">:</span> <span class="n">problem_predicate</span> <span class="n">n</span> <span class="bp">→</span> <span class="n">solution_predicate</span> <span class="n">n</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="k">have</span> <span class="o">:=</span> <span class="n">search_upto_start</span><span class="o">,</span>
  <span class="n">iterate</span> <span class="mi">82</span> <span class="o">{</span>
    <span class="n">replace</span> <span class="o">:=</span> <span class="n">search_upto_step</span> <span class="n">this</span> <span class="o">(</span><span class="kd">by</span> <span class="n">norm_num1</span><span class="bp">;</span> <span class="n">refl</span><span class="o">)</span> <span class="o">(</span><span class="kd">by</span> <span class="n">norm_num1</span><span class="bp">;</span> <span class="n">refl</span><span class="o">)</span>
      <span class="o">(</span><span class="kd">by</span> <span class="n">norm_digits</span><span class="bp">;</span> <span class="n">refl</span><span class="o">)</span> <span class="n">dec_trivial</span> <span class="o">},</span>
  <span class="n">exact</span> <span class="n">search_upto_end</span> <span class="n">this</span>
<span class="kd">end</span>
</code></pre></div>

<p>I can add this to the PR but it depends on the <code>norm_digits</code> tactic in the other PR</p>



<a name="212470383"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/208328-IMO-grand-challenge/topic/1962%20problem%201/near/212470383" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/208328-IMO-grand-challenge/topic/1962.20problem.201.html#212470383">(Oct 06 2020 at 19:00)</a>:</h4>
<p>I dream of the day when we can prove the CFSG like this</p>



<a name="212491013"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/208328-IMO-grand-challenge/topic/1962%20problem%201/near/212491013" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/208328-IMO-grand-challenge/topic/1962.20problem.201.html#212491013">(Oct 06 2020 at 21:55)</a>:</h4>
<p>Actually, contrary to what has been said above, <code>tidy</code> doesn't try <code>linarith</code> at all.</p>



<a name="212491120"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/208328-IMO-grand-challenge/topic/1962%20problem%201/near/212491120" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/208328-IMO-grand-challenge/topic/1962.20problem.201.html#212491120">(Oct 06 2020 at 21:56)</a>:</h4>
<p><code>tidy</code> mostly uses <code>split</code>, <code>ext</code>, <code>intros</code>, <code>dsimp</code>, <code>simp</code>, <code>assumption</code>, <code>solve_by_elim</code>.</p>



<a name="212491151"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/208328-IMO-grand-challenge/topic/1962%20problem%201/near/212491151" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/208328-IMO-grand-challenge/topic/1962.20problem.201.html#212491151">(Oct 06 2020 at 21:56)</a>:</h4>
<p>That is, it is mostly a "take things apart, simplify, try to put things back together" tactic.</p>



<a name="212491205"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/208328-IMO-grand-challenge/topic/1962%20problem%201/near/212491205" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/208328-IMO-grand-challenge/topic/1962.20problem.201.html#212491205">(Oct 06 2020 at 21:57)</a>:</h4>
<p>(oh, and <code>auto_cases</code>, which tries to uses <code>cases</code> without doing case splits)</p>



<a name="212491212"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/208328-IMO-grand-challenge/topic/1962%20problem%201/near/212491212" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/208328-IMO-grand-challenge/topic/1962.20problem.201.html#212491212">(Oct 06 2020 at 21:57)</a>:</h4>
<p>This actual list is at <a href="https://github.com/leanprover-community/mathlib/blob/master/src/tactic/tidy.lean#L41">https://github.com/leanprover-community/mathlib/blob/master/src/tactic/tidy.lean#L41</a></p>



<a name="212491237"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/208328-IMO-grand-challenge/topic/1962%20problem%201/near/212491237" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/208328-IMO-grand-challenge/topic/1962.20problem.201.html#212491237">(Oct 06 2020 at 21:58)</a>:</h4>
<p>A different tactic which is more of a "kitchen sink" is <code>hint</code>, which just tries a bunch of tactics and reports which ones make progress.</p>



<a name="212491371"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/208328-IMO-grand-challenge/topic/1962%20problem%201/near/212491371" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/208328-IMO-grand-challenge/topic/1962.20problem.201.html#212491371">(Oct 06 2020 at 21:59)</a>:</h4>
<p>Unfortunately the best way to see which tactics <code>hint</code> will try out is to grep for <code>add_hint_tactic</code> in the sources, as it is hooked up nonlocally.</p>



<a name="212491404"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/208328-IMO-grand-challenge/topic/1962%20problem%201/near/212491404" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/208328-IMO-grand-challenge/topic/1962.20problem.201.html#212491404">(Oct 06 2020 at 21:59)</a>:</h4>
<p>Fortunately, on the other hand, it's therefore easy to add new tactics to its repertoire.</p>



<a name="212495006"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/208328-IMO-grand-challenge/topic/1962%20problem%201/near/212495006" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Rute <a href="https://leanprover-community.github.io/archive/stream/208328-IMO-grand-challenge/topic/1962.20problem.201.html#212495006">(Oct 06 2020 at 22:41)</a>:</h4>
<p><span class="user-mention silent" data-user-id="238605">Kevin Lacker</span> <a href="#narrow/stream/208328-IMO-grand-challenge/topic/1962.20problem.201/near/212457191">said</a>:</p>
<blockquote>
<p>so if an AI strategy ends up being something like a tree search, perhaps 80% of the work trawling through this tree is actually handling the "trivial" parts</p>
</blockquote>
<p>I think a lot of the new AI systems for ITP (TacticToe, DeepHOL, ProverBot9001, Tactician, GPT-f, etc.) are getting better at filling in these routine steps, but I agree that better evaluation and/or datasets would help.  For example, GPT-f was improved by adding in some routine calculations into the train set. Also we need to understand what types of problems these systems excel at and where the gaps are.</p>
<p>I'm not necessarily saying that GPT-f style systems are the way to go with the IMO grand challenge, and I don't want to derail the work on careful formalization and dissection of IMO problems to say just throw a 100-billion parameter black box at anything.  But at the same time, systems like Tactician have should a lot of promise without a lot of computational cost, so they could become one tool of many in the tool belt.)</p>



<a name="212495856"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/208328-IMO-grand-challenge/topic/1962%20problem%201/near/212495856" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Lacker <a href="https://leanprover-community.github.io/archive/stream/208328-IMO-grand-challenge/topic/1962.20problem.201.html#212495856">(Oct 06 2020 at 22:52)</a>:</h4>
<p>yeah, I thought GPT-f in particular was just a little too simple to be useful yet - it seems like the problems it is capable of solving are still a smaller set than some of the more complicated tactics, like <code>ring</code></p>



<a name="212495897"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/208328-IMO-grand-challenge/topic/1962%20problem%201/near/212495897" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Lacker <a href="https://leanprover-community.github.io/archive/stream/208328-IMO-grand-challenge/topic/1962.20problem.201.html#212495897">(Oct 06 2020 at 22:53)</a>:</h4>
<p>i feel like the architecture is not ideal - the GPT structure isn't really doing a tree search type thing. but i'm not sure</p>



<a name="212495990"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/208328-IMO-grand-challenge/topic/1962%20problem%201/near/212495990" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Lacker <a href="https://leanprover-community.github.io/archive/stream/208328-IMO-grand-challenge/topic/1962.20problem.201.html#212495990">(Oct 06 2020 at 22:54)</a>:</h4>
<p>the largest model is still not solving most of the 9-digit division problems</p>



<a name="212496104"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/208328-IMO-grand-challenge/topic/1962%20problem%201/near/212496104" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Lacker <a href="https://leanprover-community.github.io/archive/stream/208328-IMO-grand-challenge/topic/1962.20problem.201.html#212496104">(Oct 06 2020 at 22:56)</a>:</h4>
<p>so, is it going to be able to be extended to be something that's like, one step beyond <code>norm_num</code> or <code>nlinarith</code>, that could reduce <code>n * n = 3</code> to <code>false</code>? it seems like more parameters won't get there with the GPT-f architecture</p>



<a name="212499104"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/208328-IMO-grand-challenge/topic/1962%20problem%201/near/212499104" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Rute <a href="https://leanprover-community.github.io/archive/stream/208328-IMO-grand-challenge/topic/1962.20problem.201.html#212499104">(Oct 06 2020 at 23:36)</a>:</h4>
<p><span class="user-mention silent" data-user-id="238605">Kevin Lacker</span> <a href="#narrow/stream/208328-IMO-grand-challenge/topic/1962.20problem.201/near/212496104">said</a>:</p>
<blockquote>
<p>so, is it going to be able to be extended to be something that's like, one step beyond <code>norm_num</code> or <code>nlinarith</code>, that could reduce <code>n * n = 3</code> to <code>false</code>? it seems like more parameters won't get there with the GPT-f architecture</p>
</blockquote>
<p>GPT-f (along with the other systems I've mentioned) definitely does tree search.</p>



<a name="212499368"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/208328-IMO-grand-challenge/topic/1962%20problem%201/near/212499368" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Rute <a href="https://leanprover-community.github.io/archive/stream/208328-IMO-grand-challenge/topic/1962.20problem.201.html#212499368">(Oct 06 2020 at 23:41)</a>:</h4>
<p>Also, GPT-f is unique in that it is for MetaMath which doesn't have tactics, but that has nothing to do with the design of GPT-f.  For example, DeepHOL or Tactician both guide tactics, including tactics like <code>ring</code> and <code>nlinarith</code> when it makes sense.  The problem is that if you add a new tactic, they need to be retrained.  They don't currently have the full power of hierarchical reinforcement learning or program synthesis where one can build up high-level actions from low-level actions.</p>



<a name="212506293"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/208328-IMO-grand-challenge/topic/1962%20problem%201/near/212506293" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joseph Myers <a href="https://leanprover-community.github.io/archive/stream/208328-IMO-grand-challenge/topic/1962.20problem.201.html#212506293">(Oct 07 2020 at 01:35)</a>:</h4>
<p><span class="user-mention silent" data-user-id="238605">Kevin Lacker</span> <a href="#narrow/stream/208328-IMO-grand-challenge/topic/1962.20problem.201/near/212457159">said</a>:</p>
<blockquote>
<p>what fraction of formalizing an IMO problem is formalizing part that a human would consider trivial? looking at the formalizations so far it's maybe... 80%?</p>
</blockquote>
<p>About 95% of formalizing one (easier-than-IMO) geometry problem was teaching mathlib enough geometry for that one problem, but quite likely 80% of what went in mathlib there was also human-trivial, so that doesn't contradict your point. My formalization of the combinatorics problem from the same paper ended up taking 3000 lines of Lean, almost all concerned with trivialities.</p>



<a name="212506584"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/208328-IMO-grand-challenge/topic/1962%20problem%201/near/212506584" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/208328-IMO-grand-challenge/topic/1962.20problem.201.html#212506584">(Oct 07 2020 at 01:40)</a>:</h4>
<p>Yeah, I think there are two distinct categories of trivial there that should be teased apart. There is (1) library building, and then (2) rote application of theorems to the problem context (and then (3) actual interesting mathematics). It is fairly common for (1) to make up the majority of any given formalization project, with numbers ranging from 60% to 90% for a new area. For a well established area it might get as low as 10% but I don't think I've ever seen a formalization project actually be completely served by whatever library existed at the outset</p>



<a name="212506604"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/208328-IMO-grand-challenge/topic/1962%20problem%201/near/212506604" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/208328-IMO-grand-challenge/topic/1962.20problem.201.html#212506604">(Oct 07 2020 at 01:40)</a>:</h4>
<p>everyone builds a <code>for_mathlib</code> file</p>



<a name="212506682"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/208328-IMO-grand-challenge/topic/1962%20problem%201/near/212506682" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/208328-IMO-grand-challenge/topic/1962.20problem.201.html#212506682">(Oct 07 2020 at 01:42)</a>:</h4>
<p>But once you have actually finished the proof, you can refactor it to improve the backing library and take that down to 0%, and then you can see the proof as it would be if the library was already prepared for it. This is when the question of how much triviality becomes more interesting</p>



<a name="212506984"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/208328-IMO-grand-challenge/topic/1962%20problem%201/near/212506984" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joseph Myers <a href="https://leanprover-community.github.io/archive/stream/208328-IMO-grand-challenge/topic/1962.20problem.201.html#212506984">(Oct 07 2020 at 01:48)</a>:</h4>
<p>I've yet to formalize an olympiad problem without finding <em>something</em> to add to mathlib proper, and elementary algebra and number theory are areas that are pretty well-covered in mathlib. (Having formalized an olympiad paper with one problem in each area, I might well now prefer problems that show up gaps in mathlib over those that more routinely use mainly existing lemmas. But both kinds are useful when hoping to learn where we could do with better automation, or to provide training material for AIs.)</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>