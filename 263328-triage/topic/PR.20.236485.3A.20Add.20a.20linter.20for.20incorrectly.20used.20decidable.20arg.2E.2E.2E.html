---
layout: archive
title: Zulip Chat Archive
permalink: /stream/263328-triage/topic/PR.20.236485.3A.20Add.20a.20linter.20for.20incorrectly.20used.20decidable.20arg.2E.2E.2E.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/263328-triage/index.html">triage</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/263328-triage/topic/PR.20.236485.3A.20Add.20a.20linter.20for.20incorrectly.20used.20decidable.20arg.2E.2E.2E.html">PR #6485: Add a linter for incorrectly used decidable arg...</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="232600277"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/263328-triage/topic/PR%20%236485%3A%20Add%20a%20linter%20for%20incorrectly%20used%20decidable%20arg.../near/232600277" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Random Issue Bot <a href="https://leanprover-community.github.io/archive/stream/263328-triage/topic/PR.20.236485.3A.20Add.20a.20linter.20for.20incorrectly.20used.20decidable.20arg.2E.2E.2E.html#232600277">(Mar 31 2021 at 14:24)</a>:</h4>
<p>Today I chose PR 6485 for discussion!</p>
<p><strong><a href="https://github.com/leanprover-community/mathlib/issues/6485">Add a linter for incorrectly used decidable arguments</a></strong><br>
Created by <span class="user-mention" data-user-id="310045">@Eric Wieser</span> (@eric-wieser) on 2021-02-28<br>
Labels: WIP</p>
<p>Is this PR still relevant? Any recent updates? Anyone making progress?</p>



<a name="232602856"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/263328-triage/topic/PR%20%236485%3A%20Add%20a%20linter%20for%20incorrectly%20used%20decidable%20arg.../near/232602856" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/263328-triage/topic/PR.20.236485.3A.20Add.20a.20linter.20for.20incorrectly.20used.20decidable.20arg.2E.2E.2E.html#232602856">(Mar 31 2021 at 14:38)</a>:</h4>
<p>The linter works, but "Yury's rule of thumb" seems to lead to some unpleasant conclusions. Consider the following lemma:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">silly</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">nat</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="k">if</span> <span class="n">n</span> <span class="bp">=</span> <span class="mi">0</span> <span class="k">then</span> <span class="mi">0</span> <span class="k">else</span> <span class="n">n</span> <span class="bp">*</span> <span class="n">n</span><span class="o">)</span> <span class="bp">=</span> <span class="n">n</span> <span class="bp">*</span> <span class="n">n</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">split_ifs</span><span class="bp">;</span> <span class="n">simp</span><span class="o">[</span><span class="bp">*</span><span class="o">]</span>
</code></pre></div>
<p>This lemma includes a <a href="https://leanprover-community.github.io/mathlib_docs/find/nat.decidable_eq">docs#nat.decidable_eq</a> term in its theorem statement, which means it can't be used to rewrite a goal containing an <code>if</code> that uses <a href="https://leanprover-community.github.io/mathlib_docs/find/classical.dec_eq">docs#classical.dec_eq</a>. The solution to this is to instead write this lemma</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">silly_fixed</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">nat</span><span class="o">)</span> <span class="o">[</span><span class="n">decidable</span> <span class="o">(</span><span class="n">n</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">)]</span> <span class="o">:</span> <span class="o">(</span><span class="k">if</span> <span class="n">n</span> <span class="bp">=</span> <span class="mi">0</span> <span class="k">then</span> <span class="mi">0</span> <span class="k">else</span> <span class="n">n</span> <span class="bp">*</span> <span class="n">n</span><span class="o">)</span> <span class="bp">=</span> <span class="n">n</span> <span class="bp">*</span> <span class="n">n</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">split_ifs</span><span class="bp">;</span> <span class="n">simp</span><span class="o">[</span><span class="bp">*</span><span class="o">]</span>
</code></pre></div>
<p>This will make the statement of some lemmas significantly harder to read. Are we ok with this?</p>



<a name="232603222"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/263328-triage/topic/PR%20%236485%3A%20Add%20a%20linter%20for%20incorrectly%20used%20decidable%20arg.../near/232603222" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/263328-triage/topic/PR.20.236485.3A.20Add.20a.20linter.20for.20incorrectly.20used.20decidable.20arg.2E.2E.2E.html#232603222">(Mar 31 2021 at 14:40)</a>:</h4>
<p>I don't know what Yury thinks, but I think my rule of thumb would be not to apply Yury's rule of thumb in situations like that where there is already a constructive decidable instance in core.</p>



<a name="232604679"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/263328-triage/topic/PR%20%236485%3A%20Add%20a%20linter%20for%20incorrectly%20used%20decidable%20arg.../near/232604679" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/263328-triage/topic/PR.20.236485.3A.20Add.20a.20linter.20for.20incorrectly.20used.20decidable.20arg.2E.2E.2E.html#232604679">(Mar 31 2021 at 14:49)</a>:</h4>
<p>Here's a case where the difference matters:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">open_locale</span> <span class="n">classical</span>

<span class="sd">/-- This definition is in a classical module, so we don't care about decidability. -/</span>
<span class="kd">noncomputable</span> <span class="kd">def</span> <span class="n">update_zero</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">semiring</span> <span class="n">α</span><span class="o">]</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">α</span><span class="o">)</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">α</span> <span class="o">:=</span> <span class="n">function.update</span> <span class="n">f</span> <span class="mi">0</span> <span class="mi">0</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">nat</span><span class="o">)</span> <span class="o">:</span> <span class="n">update_zero</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">n</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">,</span> <span class="n">n</span> <span class="bp">*</span> <span class="n">n</span><span class="o">)</span> <span class="n">n</span> <span class="bp">=</span> <span class="n">n</span> <span class="bp">*</span> <span class="n">n</span> <span class="o">:=</span> <span class="kd">begin</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">update_zero</span><span class="o">,</span> <span class="n">function.update_apply</span><span class="o">],</span>
  <span class="n">rw</span> <span class="n">silly</span><span class="o">,</span>  <span class="c1">-- fails. `rw silly_fixed` works</span>
<span class="kd">end</span>
</code></pre></div>



<a name="232607069"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/263328-triage/topic/PR%20%236485%3A%20Add%20a%20linter%20for%20incorrectly%20used%20decidable%20arg.../near/232607069" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/263328-triage/topic/PR.20.236485.3A.20Add.20a.20linter.20for.20incorrectly.20used.20decidable.20arg.2E.2E.2E.html#232607069">(Mar 31 2021 at 15:03)</a>:</h4>
<p>I think <code>silly_fixed</code> is a good idea, yes.</p>



<a name="232608299"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/263328-triage/topic/PR%20%236485%3A%20Add%20a%20linter%20for%20incorrectly%20used%20decidable%20arg.../near/232608299" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/263328-triage/topic/PR.20.236485.3A.20Add.20a.20linter.20for.20incorrectly.20used.20decidable.20arg.2E.2E.2E.html#232608299">(Mar 31 2021 at 15:11)</a>:</h4>
<p>The CI logs suggest there are 363 lemmas which need a <code>[decidable_eq ℕ]</code> argument added like this.</p>



<a name="232609819"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/263328-triage/topic/PR%20%236485%3A%20Add%20a%20linter%20for%20incorrectly%20used%20decidable%20arg.../near/232609819" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/263328-triage/topic/PR.20.236485.3A.20Add.20a.20linter.20for.20incorrectly.20used.20decidable.20arg.2E.2E.2E.html#232609819">(Mar 31 2021 at 15:18)</a>:</h4>
<p>I think this is not a good idea. We should try to avoid <code>classical.dec_eq</code> being used to prove <code>decidable_eq nat</code> instead</p>



<a name="232609944"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/263328-triage/topic/PR%20%236485%3A%20Add%20a%20linter%20for%20incorrectly%20used%20decidable%20arg.../near/232609944" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/263328-triage/topic/PR.20.236485.3A.20Add.20a.20linter.20for.20incorrectly.20used.20decidable.20arg.2E.2E.2E.html#232609944">(Mar 31 2021 at 15:19)</a>:</h4>
<p>Here's a full list of the arguments we'd have to add. Things like <code>[decidable false]</code> seem particularly nonsensical.</p>
<div class="spoiler-block"><div class="spoiler-header">
</div><div class="spoiler-content" aria-hidden="true">
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="o">[</span><span class="n">decidable</span> <span class="o">((</span><span class="bp">∃</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="bp">∈</span> <span class="n">S</span><span class="o">)</span> <span class="bp">∧</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">y</span> <span class="bp">∈</span> <span class="n">S</span> <span class="bp">→</span> <span class="n">y</span> <span class="bp">≤</span> <span class="n">x</span><span class="o">)]</span>
<span class="o">[</span><span class="n">decidable</span> <span class="o">(</span><span class="mi">0</span> <span class="bp">&lt;</span> <span class="n">n</span><span class="o">)]</span>
<span class="o">[</span><span class="n">decidable</span> <span class="o">(</span><span class="mi">0</span> <span class="bp">&lt;</span> <span class="n">y</span><span class="o">)]</span>
<span class="o">[</span><span class="n">decidable</span> <span class="o">(</span><span class="mi">2</span> <span class="bp">∣</span> <span class="n">n</span><span class="o">)]</span>
<span class="o">[</span><span class="n">decidable</span> <span class="o">(</span><span class="n">_</span> <span class="bp">=</span> <span class="n">_</span><span class="o">)]</span>
<span class="o">[</span><span class="n">decidable</span> <span class="o">(</span><span class="n">_</span> <span class="bp">∈</span> <span class="n">_</span><span class="o">)]</span>
<span class="o">[</span><span class="n">decidable</span> <span class="o">(</span><span class="n">_</span> <span class="bp">≤</span> <span class="n">_</span><span class="o">)]</span>
<span class="o">[</span><span class="n">decidable</span> <span class="o">(</span><span class="n">a</span> <span class="bp">=</span> <span class="mi">0</span> <span class="bp">∨</span> <span class="n">b</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">)]</span>
<span class="o">[</span><span class="n">decidable</span> <span class="o">(</span><span class="n">a</span> <span class="bp">=</span> <span class="n">a'</span><span class="o">)]</span>
<span class="o">[</span><span class="n">decidable</span> <span class="o">(</span><span class="n">a</span> <span class="bp">∈</span> <span class="n">f.support</span><span class="o">)]</span>
<span class="o">[</span><span class="n">decidable</span> <span class="o">(</span><span class="n">a'</span> <span class="bp">=</span> <span class="n">a</span><span class="o">)]</span>
<span class="o">[</span><span class="n">decidable</span> <span class="o">(</span><span class="n">a.val</span> <span class="bp">≤</span> <span class="n">n</span> <span class="bp">/</span> <span class="mi">2</span><span class="o">)]</span>
<span class="o">[</span><span class="n">decidable</span> <span class="o">(</span><span class="n">b</span> <span class="bp">&lt;</span> <span class="n">a</span><span class="o">)]</span>
<span class="o">[</span><span class="n">decidable</span> <span class="o">(</span><span class="n">b</span> <span class="bp">∣</span> <span class="n">a</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)]</span>
<span class="o">[</span><span class="n">decidable</span> <span class="o">(</span><span class="n">bitvec.add_lsb</span> <span class="n">x</span> <span class="n">b</span> <span class="bp">%</span> <span class="mi">2</span> <span class="bp">=</span> <span class="mi">1</span><span class="o">)]</span>
<span class="o">[</span><span class="n">decidable</span> <span class="o">(</span><span class="n">c</span> <span class="bp">≤</span> <span class="n">a</span> <span class="bp">%</span> <span class="n">c</span> <span class="bp">+</span> <span class="n">b</span> <span class="bp">%</span> <span class="n">c</span><span class="o">)]</span>
<span class="o">[</span><span class="n">decidable</span> <span class="o">(</span><span class="n">d.support.sum</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="n">σ</span><span class="o">),</span> <span class="bp">⇑</span><span class="n">d</span> <span class="n">i</span><span class="o">)</span> <span class="bp">=</span> <span class="n">n</span><span class="o">)]</span>
<span class="o">[</span><span class="n">decidable</span> <span class="o">(</span><span class="n">e₂</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">)]</span>
<span class="o">[</span><span class="n">decidable</span> <span class="o">(</span><span class="n">f.same_cycle</span> <span class="n">x</span> <span class="n">y</span><span class="o">)]</span>
<span class="o">[</span><span class="n">decidable</span> <span class="o">(</span><span class="n">finsupp.single</span> <span class="n">i</span> <span class="mi">1</span> <span class="bp">=</span> <span class="n">m</span><span class="o">)]</span>
<span class="o">[</span><span class="n">decidable</span> <span class="o">(</span><span class="n">finsupp.single</span> <span class="n">i</span> <span class="n">k</span> <span class="bp">=</span> <span class="n">m</span><span class="o">)]</span>
<span class="o">[</span><span class="n">decidable</span> <span class="o">(</span><span class="n">fintype.card</span> <span class="n">K</span> <span class="bp">-</span> <span class="mi">1</span> <span class="bp">∣</span> <span class="n">i</span><span class="o">)]</span>
<span class="o">[</span><span class="n">decidable</span> <span class="o">(</span><span class="n">i</span> <span class="bp">=</span> <span class="n">f.nat_degree</span><span class="o">)]</span>
<span class="o">[</span><span class="n">decidable</span> <span class="o">(</span><span class="n">k</span> <span class="bp">=</span> <span class="mi">0</span> <span class="bp">∧</span> <span class="n">n</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">)]</span>
<span class="o">[</span><span class="n">decidable</span> <span class="o">(</span><span class="n">m</span> <span class="bp">=</span> <span class="n">finsupp.single</span> <span class="n">s</span> <span class="n">n</span><span class="o">)]</span>
<span class="o">[</span><span class="n">decidable</span> <span class="o">(</span><span class="n">n</span> <span class="bp">%</span> <span class="mi">2</span> <span class="bp">=</span> <span class="mi">1</span><span class="o">)]</span>
<span class="o">[</span><span class="n">decidable</span> <span class="o">(</span><span class="n">n</span> <span class="bp">&lt;</span> <span class="n">L.length</span><span class="o">)]</span>
<span class="o">[</span><span class="n">decidable</span> <span class="o">(</span><span class="n">n</span> <span class="bp">=</span> <span class="n">finsupp.single</span> <span class="n">s</span> <span class="mi">1</span><span class="o">)]</span>
<span class="o">[</span><span class="n">decidable</span> <span class="o">(</span><span class="n">ordnode.delta</span> <span class="bp">*</span> <span class="n">ls</span> <span class="bp">&lt;</span> <span class="n">rs</span><span class="o">)]</span>
<span class="o">[</span><span class="n">decidable</span> <span class="o">(</span><span class="n">ordnode.delta</span> <span class="bp">*</span> <span class="n">rs</span> <span class="bp">&lt;</span> <span class="n">ls</span><span class="o">)]</span>
<span class="o">[</span><span class="n">decidable</span> <span class="o">(</span><span class="n">p</span> <span class="n">a</span><span class="o">)]</span>
<span class="o">[</span><span class="n">decidable</span> <span class="o">(</span><span class="n">p</span> <span class="bp">∣</span> <span class="n">n</span><span class="o">)]</span>
<span class="o">[</span><span class="n">decidable</span> <span class="o">(</span><span class="n">p</span> <span class="bp">∧</span> <span class="n">q</span><span class="o">)]</span>
<span class="o">[</span><span class="n">decidable</span> <span class="o">(</span><span class="n">p</span> <span class="bp">∨</span> <span class="n">q</span><span class="o">)]</span>
<span class="o">[</span><span class="n">decidable</span> <span class="o">(</span><span class="n">roption.of_option</span> <span class="n">o</span><span class="o">)</span><span class="bp">.</span><span class="n">dom</span><span class="o">]</span>
<span class="o">[</span><span class="n">decidable</span> <span class="o">(</span><span class="n">roption.some</span> <span class="mi">0</span><span class="o">)</span><span class="bp">.</span><span class="n">dom</span><span class="o">]</span>
<span class="o">[</span><span class="n">decidable</span> <span class="o">(</span><span class="n">roption.some</span> <span class="n">a</span><span class="o">)</span><span class="bp">.</span><span class="n">dom</span><span class="o">]</span>
<span class="o">[</span><span class="n">decidable</span> <span class="o">(</span><span class="n">s</span> <span class="bp">∈</span> <span class="n">m.support</span><span class="o">)]</span>
<span class="o">[</span><span class="n">decidable</span> <span class="o">(</span><span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span> <span class="bp">∧</span> <span class="n">y</span> <span class="bp">&lt;</span> <span class="mi">0</span><span class="o">)]</span>
<span class="o">[</span><span class="n">decidable</span> <span class="o">(</span><span class="n">x'</span> <span class="bp">≠</span> <span class="n">x</span><span class="o">)]</span>
<span class="o">[</span><span class="n">decidable</span> <span class="o">(</span><span class="n">x.dom</span> <span class="bp">∧</span> <span class="n">y.dom</span><span class="o">)]</span>
<span class="o">[</span><span class="n">decidable</span> <span class="o">(</span><span class="n">x.val</span> <span class="bp">≤</span> <span class="n">n</span> <span class="bp">/</span> <span class="mi">2</span><span class="o">)]</span>
<span class="o">[</span><span class="n">decidable</span> <span class="o">(</span><span class="n">y</span> <span class="bp">&lt;</span> <span class="mi">0</span><span class="o">)]</span>
<span class="o">[</span><span class="n">decidable</span> <span class="o">(</span><span class="bp">¬</span><span class="n">p</span><span class="o">)]</span>
<span class="o">[</span><span class="n">decidable</span> <span class="o">(</span><span class="bp">¬</span><span class="n">P</span><span class="o">)]</span>
<span class="o">[</span><span class="n">decidable</span> <span class="o">(</span><span class="bp">↑</span><span class="n">m</span> <span class="bp">%</span> <span class="bp">↑</span><span class="n">k</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">)]</span>
<span class="o">[</span><span class="n">decidable</span> <span class="o">(</span><span class="bp">∀</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">α</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">∈</span> <span class="n">s</span><span class="o">),</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="n">α</span><span class="o">)</span> <span class="o">(</span><span class="n">H</span> <span class="o">:</span> <span class="n">i</span> <span class="bp">∈</span> <span class="n">s</span><span class="o">),</span> <span class="n">p</span> <span class="n">i</span><span class="o">)</span> <span class="n">a</span> <span class="n">h</span><span class="o">)]</span>
<span class="o">[</span><span class="n">decidable</span> <span class="o">(</span><span class="bp">∀</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">n</span> <span class="bp">≤</span> <span class="n">N</span><span class="o">),</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">H</span> <span class="o">:</span> <span class="n">k</span> <span class="bp">≤</span> <span class="n">N</span><span class="o">),</span> <span class="n">has_edist.edist</span> <span class="o">(</span><span class="n">e</span> <span class="o">(</span><span class="n">N</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="n">x</span> <span class="bp">&lt;</span> <span class="n">has_edist.edist</span> <span class="o">(</span><span class="n">e</span> <span class="n">k</span><span class="o">)</span> <span class="n">x</span><span class="o">)</span> <span class="n">n</span> <span class="n">h</span><span class="o">)]</span>
<span class="o">[</span><span class="n">decidable</span> <span class="o">(</span><span class="bp">∃</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">α</span><span class="o">),</span> <span class="n">f</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">b</span><span class="o">)]</span>
<span class="o">[</span><span class="n">decidable</span> <span class="o">(</span><span class="bp">∃</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="bp">∈</span> <span class="n">S</span><span class="o">)]</span>
<span class="o">[</span><span class="n">decidable</span> <span class="o">(</span><span class="bp">∃</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">y</span> <span class="bp">∈</span> <span class="n">S</span> <span class="bp">→</span> <span class="n">y</span> <span class="bp">≤</span> <span class="n">x</span><span class="o">)]</span>
<span class="o">[</span><span class="n">decidable</span> <span class="n">false</span><span class="o">]</span>
<span class="o">[</span><span class="n">decidable</span> <span class="n">roption.none.dom</span><span class="o">]</span>
<span class="o">[</span><span class="n">decidable</span> <span class="n">true</span><span class="o">]</span>
<span class="o">[</span><span class="n">decidable</span> <span class="n">x.dom</span><span class="o">]</span>
<span class="o">[</span><span class="n">decidable</span> <span class="n">y.dom</span><span class="o">]</span>
<span class="o">[</span><span class="n">decidable</span> <span class="bp">↑</span><span class="n">n.dom</span><span class="o">]</span>
<span class="o">[</span><span class="n">decidable_eq</span> <span class="o">((</span><span class="n">unit</span> <span class="bp">⊕</span> <span class="n">l</span><span class="o">)</span> <span class="bp">⊕</span> <span class="n">l</span><span class="o">)]</span>
<span class="o">[</span><span class="n">decidable_eq</span> <span class="o">(</span><span class="n">_</span> <span class="bp">×</span> <span class="n">_</span><span class="o">)]</span>
<span class="o">[</span><span class="n">decidable_eq</span> <span class="o">(</span><span class="n">_</span> <span class="bp">⊕</span> <span class="n">_</span><span class="o">)]</span>
<span class="o">[</span><span class="n">decidable_eq</span> <span class="o">(</span><span class="n">dihedral</span> <span class="n">n</span><span class="o">)]</span>
<span class="o">[</span><span class="n">decidable_eq</span> <span class="o">(</span><span class="n">finset</span> <span class="n">α</span><span class="o">)]</span>
<span class="o">[</span><span class="n">decidable_eq</span> <span class="o">(</span><span class="n">lucas_lehmer.X</span> <span class="o">(</span><span class="n">lucas_lehmer.q</span> <span class="o">(</span><span class="n">p'</span> <span class="bp">+</span> <span class="mi">2</span><span class="o">)))]</span>
<span class="o">[</span><span class="n">decidable_eq</span> <span class="o">(</span><span class="n">option</span> <span class="n">nnreal</span><span class="o">)]</span>
<span class="o">[</span><span class="n">decidable_eq</span> <span class="o">(</span><span class="n">option</span> <span class="n">α</span><span class="o">)]</span>
<span class="o">[</span><span class="n">decidable_eq</span> <span class="o">(</span><span class="n">quotient</span> <span class="o">(</span><span class="n">sym2.rel.setoid</span> <span class="n">V</span><span class="o">))]</span>
<span class="o">[</span><span class="n">decidable_eq</span> <span class="o">(</span><span class="n">quotient</span> <span class="n">R</span><span class="o">)]</span>
<span class="o">[</span><span class="n">decidable_eq</span> <span class="o">(</span><span class="n">unit</span> <span class="bp">⊕</span> <span class="n">l</span> <span class="bp">⊕</span> <span class="n">l</span><span class="o">)]</span>
<span class="o">[</span><span class="n">decidable_eq</span> <span class="o">(</span><span class="n">unit</span> <span class="bp">⊕</span> <span class="n">l</span><span class="o">)]</span>
<span class="o">[</span><span class="n">decidable_eq</span> <span class="o">(</span><span class="n">units</span> <span class="o">(</span><span class="n">lucas_lehmer.X</span> <span class="o">(</span><span class="n">lucas_lehmer.q</span> <span class="o">(</span><span class="n">p'</span> <span class="bp">+</span> <span class="mi">2</span><span class="o">))))]</span>
<span class="o">[</span><span class="n">decidable_eq</span> <span class="o">(</span><span class="n">units</span> <span class="o">(</span><span class="n">zmod</span> <span class="n">p</span><span class="o">))]</span>
<span class="o">[</span><span class="n">decidable_eq</span> <span class="o">(</span><span class="n">zmod</span> <span class="n">n</span><span class="o">)]</span>
<span class="o">[</span><span class="n">decidable_eq</span> <span class="o">(</span><span class="n">zmod</span> <span class="n">p</span><span class="o">)]</span>
<span class="o">[</span><span class="n">decidable_eq</span> <span class="o">(</span><span class="n">α</span> <span class="bp">→₀</span> <span class="n">ℕ</span><span class="o">)]</span>
<span class="o">[</span><span class="n">decidable_eq</span> <span class="o">(</span><span class="bp">Π</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">α</span><span class="o">),</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">α</span><span class="o">),</span> <span class="n">δ</span> <span class="n">a</span><span class="o">)</span> <span class="n">a</span><span class="o">)]</span>
<span class="o">[</span><span class="n">decidable_eq</span> <span class="o">(</span><span class="bp">Π</span> <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">α</span><span class="o">),</span> <span class="n">a_1</span> <span class="bp">∈</span> <span class="n">has_insert.insert</span> <span class="n">a</span> <span class="n">s</span> <span class="bp">→</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">α</span><span class="o">),</span> <span class="n">δ</span> <span class="n">a</span><span class="o">)</span> <span class="n">a_1</span><span class="o">)]</span>
<span class="o">[</span><span class="n">decidable_eq</span> <span class="o">(</span><span class="n">σ</span> <span class="bp">→₀</span> <span class="n">ℕ</span><span class="o">)]</span>
<span class="o">[</span><span class="n">decidable_eq</span> <span class="o">(</span><span class="n">ℕ</span> <span class="bp">→₀</span> <span class="n">F</span><span class="o">)]</span>
<span class="o">[</span><span class="n">decidable_eq</span> <span class="o">(</span><span class="n">ℕ</span> <span class="bp">→₀</span> <span class="n">R</span><span class="o">)]</span>
<span class="o">[</span><span class="n">decidable_eq</span> <span class="o">(</span><span class="n">ℕ</span> <span class="bp">→₀</span> <span class="n">α</span><span class="o">)]</span>
<span class="o">[</span><span class="n">decidable_eq</span> <span class="n">bool</span><span class="o">]</span>
<span class="o">[</span><span class="n">decidable_eq</span> <span class="n">category_theory.limits.walking_pair</span><span class="o">]</span>
<span class="o">[</span><span class="n">decidable_eq</span> <span class="n">G.dart</span><span class="o">]</span>
<span class="o">[</span><span class="n">decidable_eq</span> <span class="n">onote</span><span class="o">]</span>
<span class="o">[</span><span class="n">decidable_eq</span> <span class="n">punit</span><span class="o">]</span>
<span class="o">[</span><span class="n">decidable_eq</span> <span class="n">turing.partrec_to_TM2.K'</span><span class="o">]</span>
<span class="o">[</span><span class="n">decidable_eq</span> <span class="o">{</span><span class="n">x</span> <span class="bp">//</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">associates</span> <span class="n">α</span><span class="o">),</span> <span class="n">irreducible</span> <span class="n">x</span><span class="o">)</span> <span class="n">x</span><span class="o">}]</span>
<span class="o">[</span><span class="n">decidable_eq</span> <span class="o">{</span><span class="n">x</span> <span class="bp">//</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">M</span><span class="o">),</span> <span class="n">x</span> <span class="bp">∈</span> <span class="n">set.range</span> <span class="n">b</span><span class="o">)</span> <span class="n">x</span><span class="o">}]</span>
<span class="o">[</span><span class="n">decidable_eq</span> <span class="o">{</span><span class="n">x</span> <span class="bp">//</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">M₁</span><span class="o">),</span> <span class="n">x</span> <span class="bp">∈</span> <span class="n">set.range</span> <span class="n">v₁</span><span class="o">)</span> <span class="n">x</span><span class="o">}]</span>
<span class="o">[</span><span class="n">decidable_eq</span> <span class="o">{</span><span class="n">x</span> <span class="bp">//</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">α</span><span class="o">),</span> <span class="n">p</span> <span class="n">x</span><span class="o">)</span> <span class="n">x</span><span class="o">}]</span>
<span class="o">[</span><span class="n">decidable_eq</span> <span class="o">{</span><span class="n">x</span> <span class="bp">//</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">α</span><span class="o">),</span> <span class="n">x</span> <span class="bp">∈</span> <span class="n">has_insert.insert</span> <span class="n">a</span> <span class="n">s</span><span class="o">)</span> <span class="n">x</span><span class="o">}]</span>
<span class="o">[</span><span class="n">decidable_eq</span> <span class="o">{</span><span class="n">x</span> <span class="bp">//</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">α</span><span class="o">),</span> <span class="n">x</span> <span class="bp">∈</span> <span class="n">multiset.ndinsert</span> <span class="n">a</span> <span class="n">s</span><span class="o">)</span> <span class="n">x</span><span class="o">}]</span>
<span class="o">[</span><span class="n">decidable_eq</span> <span class="o">{</span><span class="n">x</span> <span class="bp">//</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">α</span><span class="o">),</span> <span class="bp">¬</span><span class="n">p</span> <span class="n">x</span><span class="o">)</span> <span class="n">x</span><span class="o">}]</span>
<span class="o">[</span><span class="n">decidable_eq</span> <span class="o">{</span><span class="n">x</span> <span class="bp">//</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ι</span><span class="o">),</span> <span class="n">p</span> <span class="n">x</span><span class="o">)</span> <span class="n">x</span><span class="o">}]</span>
<span class="o">[</span><span class="n">decidable_eq</span> <span class="o">{</span><span class="n">x</span> <span class="bp">//</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">),</span> <span class="n">nat.prime</span> <span class="n">x</span><span class="o">)</span> <span class="n">x</span><span class="o">}]</span>
<span class="o">[</span><span class="n">decidable_eq</span> <span class="o">{</span><span class="n">x</span> <span class="bp">//</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">),</span> <span class="n">x</span> <span class="bp">&lt;</span> <span class="mi">0</span><span class="o">)</span> <span class="n">x</span><span class="o">}]</span>
<span class="o">[</span><span class="n">decidable_eq</span> <span class="o">{</span><span class="n">x</span> <span class="bp">//</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">),</span> <span class="n">x</span> <span class="bp">&lt;</span> <span class="mi">1</span><span class="o">)</span> <span class="n">x</span><span class="o">}]</span>
<span class="o">[</span><span class="n">decidable_eq</span> <span class="o">{</span><span class="n">x</span> <span class="bp">//</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">),</span> <span class="n">x</span> <span class="bp">&lt;</span> <span class="mi">2</span><span class="o">)</span> <span class="n">x</span><span class="o">}]</span>
<span class="o">[</span><span class="n">decidable_eq</span> <span class="o">{</span><span class="n">x</span> <span class="bp">//</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">),</span> <span class="n">x</span> <span class="bp">&lt;</span> <span class="mi">3</span><span class="o">)</span> <span class="n">x</span><span class="o">}]</span>
<span class="o">[</span><span class="n">decidable_eq</span> <span class="o">{</span><span class="n">x</span> <span class="bp">//</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">),</span> <span class="n">x</span> <span class="bp">&lt;</span> <span class="n">c.blocks_fun</span> <span class="o">(</span><span class="n">c.index</span> <span class="n">j</span><span class="o">))</span> <span class="n">x</span><span class="o">}]</span>
<span class="o">[</span><span class="n">decidable_eq</span> <span class="o">{</span><span class="n">x</span> <span class="bp">//</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">),</span> <span class="n">x</span> <span class="bp">&lt;</span> <span class="n">c.length</span><span class="o">)</span> <span class="n">x</span><span class="o">}]</span>
<span class="o">[</span><span class="n">decidable_eq</span> <span class="o">{</span><span class="n">x</span> <span class="bp">//</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">),</span> <span class="n">x</span> <span class="bp">&lt;</span> <span class="n">k</span><span class="o">)</span> <span class="n">x</span><span class="o">}]</span>
<span class="o">[</span><span class="n">decidable_eq</span> <span class="o">{</span><span class="n">x</span> <span class="bp">//</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">),</span> <span class="n">x</span> <span class="bp">&lt;</span> <span class="n">l</span><span class="o">)</span> <span class="n">x</span><span class="o">}]</span>
<span class="o">[</span><span class="n">decidable_eq</span> <span class="o">{</span><span class="n">x</span> <span class="bp">//</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">),</span> <span class="n">x</span> <span class="bp">&lt;</span> <span class="n">m</span><span class="o">)</span> <span class="n">x</span><span class="o">}]</span>
<span class="o">[</span><span class="n">decidable_eq</span> <span class="o">{</span><span class="n">x</span> <span class="bp">//</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">),</span> <span class="n">x</span> <span class="bp">&lt;</span> <span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="n">x</span><span class="o">}]</span>
<span class="o">[</span><span class="n">decidable_eq</span> <span class="o">{</span><span class="n">x</span> <span class="bp">//</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">),</span> <span class="n">x</span> <span class="bp">&lt;</span> <span class="n">n</span> <span class="bp">+</span> <span class="mi">2</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="n">x</span><span class="o">}]</span>
<span class="o">[</span><span class="n">decidable_eq</span> <span class="o">{</span><span class="n">x</span> <span class="bp">//</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">),</span> <span class="n">x</span> <span class="bp">&lt;</span> <span class="n">n</span> <span class="bp">+</span> <span class="mi">2</span><span class="o">)</span> <span class="n">x</span><span class="o">}]</span>
<span class="o">[</span><span class="n">decidable_eq</span> <span class="o">{</span><span class="n">x</span> <span class="bp">//</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">),</span> <span class="n">x</span> <span class="bp">&lt;</span> <span class="n">n</span> <span class="bp">+</span> <span class="mi">3</span><span class="o">)</span> <span class="n">x</span><span class="o">}]</span>
<span class="o">[</span><span class="n">decidable_eq</span> <span class="o">{</span><span class="n">x</span> <span class="bp">//</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">),</span> <span class="n">x</span> <span class="bp">&lt;</span> <span class="n">n</span><span class="o">)</span> <span class="n">x</span><span class="o">}]</span>
<span class="o">[</span><span class="n">decidable_eq</span> <span class="o">{</span><span class="n">x</span> <span class="bp">//</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">),</span> <span class="n">x</span> <span class="bp">&lt;</span> <span class="n">n.succ</span><span class="o">)</span> <span class="n">x</span><span class="o">}]</span>
<span class="o">[</span><span class="n">decidable_eq</span> <span class="o">{</span><span class="n">x</span> <span class="bp">//</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">x</span><span class="o">)</span> <span class="n">x</span><span class="o">}]</span>
<span class="o">[</span><span class="n">decidable_eq</span> <span class="n">α</span><span class="o">]</span>
<span class="o">[</span><span class="n">decidable_eq</span> <span class="n">ℂ</span><span class="o">]</span>
<span class="o">[</span><span class="n">decidable_eq</span> <span class="n">ℕ</span><span class="o">]</span>
<span class="o">[</span><span class="n">decidable_eq</span> <span class="n">ℤ</span><span class="o">]</span>
<span class="o">[</span><span class="n">decidable_pred</span> <span class="o">(</span><span class="n">G.common_neighbors</span> <span class="n">v</span> <span class="n">w</span><span class="o">)]</span>
<span class="o">[</span><span class="n">decidable_pred</span> <span class="n">odd</span><span class="o">]</span>
<span class="o">[</span><span class="n">decidable_pred</span> <span class="n">set.univ</span><span class="o">]</span>
<span class="o">[</span><span class="n">decidable_pred</span> <span class="n">squarefree</span><span class="o">]</span>
<span class="o">[</span><span class="n">decidable_pred</span> <span class="o">{</span><span class="n">a</span> <span class="o">:</span> <span class="n">composition</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">2</span><span class="o">)</span> <span class="bp">|</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">c</span> <span class="o">:</span> <span class="n">composition</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">2</span><span class="o">)),</span> <span class="mi">1</span> <span class="bp">&lt;</span> <span class="n">c.length</span><span class="o">)</span> <span class="n">a</span><span class="o">}]</span>
<span class="o">[</span><span class="n">decidable_pred</span> <span class="o">{</span><span class="n">a</span> <span class="o">:</span> <span class="n">composition</span> <span class="n">n</span> <span class="bp">|</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">c</span> <span class="o">:</span> <span class="n">composition</span> <span class="n">n</span><span class="o">),</span> <span class="mi">1</span> <span class="bp">&lt;</span> <span class="n">c.length</span><span class="o">)</span> <span class="n">a</span><span class="o">}]</span>
<span class="o">[</span><span class="n">decidable_pred</span> <span class="o">{</span><span class="n">a</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">|</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">α</span><span class="o">),</span> <span class="bp">↥</span><span class="o">((</span><span class="bp">⇑</span><span class="n">f</span> <span class="n">a</span><span class="o">)</span><span class="bp">.</span><span class="n">is_some</span><span class="o">))</span> <span class="n">a</span><span class="o">}]</span>
<span class="o">[</span><span class="n">decidable_pred</span> <span class="o">{</span><span class="n">a</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">|</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">α</span><span class="o">),</span> <span class="n">p</span> <span class="n">x</span><span class="o">)</span> <span class="n">a</span><span class="o">}]</span>
<span class="o">[</span><span class="n">decidable_pred</span> <span class="o">{</span><span class="n">a</span> <span class="o">:</span> <span class="n">β</span> <span class="bp">|</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">b</span> <span class="o">:</span> <span class="n">β</span><span class="o">),</span> <span class="bp">↥</span><span class="o">((</span><span class="bp">⇑</span><span class="o">(</span><span class="n">f.symm</span><span class="o">)</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">is_some</span><span class="o">))</span> <span class="n">a</span><span class="o">}]</span>
<span class="o">[</span><span class="n">decidable_pred</span> <span class="bp">↑</span><span class="o">(</span><span class="n">subgroup.gpowers</span> <span class="n">a</span><span class="o">)]</span>
<span class="o">[</span><span class="n">decidable_rel</span> <span class="o">(</span><span class="n">complete_graph</span> <span class="n">V</span><span class="o">)</span><span class="bp">.</span><span class="n">adj</span><span class="o">]</span>
<span class="o">[</span><span class="n">decidable_rel</span> <span class="o">(</span><span class="n">sym2.rel</span> <span class="n">V</span><span class="o">)]</span>
<span class="o">[</span><span class="n">decidable_rel</span> <span class="n">f.same_cycle</span><span class="o">]</span>
<span class="o">[</span><span class="n">decidable_rel</span> <span class="n">has_dvd.dvd</span><span class="o">]</span>
<span class="o">[</span><span class="n">decidable_rel</span> <span class="n">has_le.le</span><span class="o">]</span>
<span class="o">[</span><span class="n">decidable_rel</span> <span class="n">has_lt.lt</span><span class="o">]</span>
<span class="o">[</span><span class="n">decidable_rel</span> <span class="n">setoid.r</span><span class="o">]</span>
</code></pre></div>
</div></div>



<a name="232609989"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/263328-triage/topic/PR%20%236485%3A%20Add%20a%20linter%20for%20incorrectly%20used%20decidable%20arg.../near/232609989" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/263328-triage/topic/PR.20.236485.3A.20Add.20a.20linter.20for.20incorrectly.20used.20decidable.20arg.2E.2E.2E.html#232609989">(Mar 31 2021 at 15:19)</a>:</h4>
<p>The only way that would happen is if you substitute into a lemma about general alpha, where the decidability proof used <code>classical.dec_eq</code>; but then that lemma is already violating yury's rule</p>



<a name="232610032"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/263328-triage/topic/PR%20%236485%3A%20Add%20a%20linter%20for%20incorrectly%20used%20decidable%20arg.../near/232610032" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/263328-triage/topic/PR.20.236485.3A.20Add.20a.20linter.20for.20incorrectly.20used.20decidable.20arg.2E.2E.2E.html#232610032">(Mar 31 2021 at 15:19)</a>:</h4>
<p>So the violation in the example above is that I unfolded <code>update_zero</code>?</p>



<a name="232610145"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/263328-triage/topic/PR%20%236485%3A%20Add%20a%20linter%20for%20incorrectly%20used%20decidable%20arg.../near/232610145" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/263328-triage/topic/PR.20.236485.3A.20Add.20a.20linter.20for.20incorrectly.20used.20decidable.20arg.2E.2E.2E.html#232610145">(Mar 31 2021 at 15:20)</a>:</h4>
<p>right; there should be a "definitional lemma" for it instead, which takes an arbitrary instance</p>



<a name="232610548"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/263328-triage/topic/PR%20%236485%3A%20Add%20a%20linter%20for%20incorrectly%20used%20decidable%20arg.../near/232610548" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/263328-triage/topic/PR.20.236485.3A.20Add.20a.20linter.20for.20incorrectly.20used.20decidable.20arg.2E.2E.2E.html#232610548">(Mar 31 2021 at 15:22)</a>:</h4>
<p>But essentially what we're saying then is that the equation compiler itself is broken?</p>



<a name="232610560"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/263328-triage/topic/PR%20%236485%3A%20Add%20a%20linter%20for%20incorrectly%20used%20decidable%20arg.../near/232610560" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/263328-triage/topic/PR.20.236485.3A.20Add.20a.20linter.20for.20incorrectly.20used.20decidable.20arg.2E.2E.2E.html#232610560">(Mar 31 2021 at 15:22)</a>:</h4>
<p>Because <code>update_zero.equations._eqn_1</code> is the bad lemma</p>



<a name="232610941"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/263328-triage/topic/PR%20%236485%3A%20Add%20a%20linter%20for%20incorrectly%20used%20decidable%20arg.../near/232610941" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/263328-triage/topic/PR.20.236485.3A.20Add.20a.20linter.20for.20incorrectly.20used.20decidable.20arg.2E.2E.2E.html#232610941">(Mar 31 2021 at 15:25)</a>:</h4>
<p>This seems like a task for <code>@[simps]</code>. Would it be hard to teach it to generalize over subsingleton instances according to Yury's rule?</p>



<a name="232611665"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/263328-triage/topic/PR%20%236485%3A%20Add%20a%20linter%20for%20incorrectly%20used%20decidable%20arg.../near/232611665" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/263328-triage/topic/PR.20.236485.3A.20Add.20a.20linter.20for.20incorrectly.20used.20decidable.20arg.2E.2E.2E.html#232611665">(Mar 31 2021 at 15:29)</a>:</h4>
<p>"generalizing over subsingleton instances" is the task that leads to inserting (arguable) nonsense like <code>[decidable false]</code></p>



<a name="232611944"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/263328-triage/topic/PR%20%236485%3A%20Add%20a%20linter%20for%20incorrectly%20used%20decidable%20arg.../near/232611944" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/263328-triage/topic/PR.20.236485.3A.20Add.20a.20linter.20for.20incorrectly.20used.20decidable.20arg.2E.2E.2E.html#232611944">(Mar 31 2021 at 15:30)</a>:</h4>
<p>It sounds like Mario is arguing that only the classical instances should be generalized</p>



<a name="232611989"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/263328-triage/topic/PR%20%236485%3A%20Add%20a%20linter%20for%20incorrectly%20used%20decidable%20arg.../near/232611989" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/263328-triage/topic/PR.20.236485.3A.20Add.20a.20linter.20for.20incorrectly.20used.20decidable.20arg.2E.2E.2E.html#232611989">(Mar 31 2021 at 15:31)</a>:</h4>
<p>Which I think is a valid argument iff there are no other diamonds that can occur for <code>decidable</code></p>



<a name="232615109"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/263328-triage/topic/PR%20%236485%3A%20Add%20a%20linter%20for%20incorrectly%20used%20decidable%20arg.../near/232615109" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/263328-triage/topic/PR.20.236485.3A.20Add.20a.20linter.20for.20incorrectly.20used.20decidable.20arg.2E.2E.2E.html#232615109">(Mar 31 2021 at 15:49)</a>:</h4>
<p>I would use <code>[decidable_eq α]</code> in the definition of <code>update_zero</code>.</p>



<a name="232615571"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/263328-triage/topic/PR%20%236485%3A%20Add%20a%20linter%20for%20incorrectly%20used%20decidable%20arg.../near/232615571" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/263328-triage/topic/PR.20.236485.3A.20Add.20a.20linter.20for.20incorrectly.20used.20decidable.20arg.2E.2E.2E.html#232615571">(Mar 31 2021 at 15:53)</a>:</h4>
<p>But you wouldn't add such an argument for <code>finsum</code>, right?</p>



<a name="232615743"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/263328-triage/topic/PR%20%236485%3A%20Add%20a%20linter%20for%20incorrectly%20used%20decidable%20arg.../near/232615743" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/263328-triage/topic/PR.20.236485.3A.20Add.20a.20linter.20for.20incorrectly.20used.20decidable.20arg.2E.2E.2E.html#232615743">(Mar 31 2021 at 15:54)</a>:</h4>
<p>I think it is okay for <code>update_zero</code> to have classical stuff internally, since the type of <code>update_zero</code> does not require any decidability</p>



<a name="232615916"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/263328-triage/topic/PR%20%236485%3A%20Add%20a%20linter%20for%20incorrectly%20used%20decidable%20arg.../near/232615916" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/263328-triage/topic/PR.20.236485.3A.20Add.20a.20linter.20for.20incorrectly.20used.20decidable.20arg.2E.2E.2E.html#232615916">(Mar 31 2021 at 15:54)</a>:</h4>
<p>You might want a version with <code>decidable_eq A</code> if you intend to use it in computational contexts, like the finset ops, but otherwise this is analogous to definitions on <code>finsupp</code> or <code>finsum</code> that are "explicitly classicalized"</p>



<a name="232616390"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/263328-triage/topic/PR%20%236485%3A%20Add%20a%20linter%20for%20incorrectly%20used%20decidable%20arg.../near/232616390" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/263328-triage/topic/PR.20.236485.3A.20Add.20a.20linter.20for.20incorrectly.20used.20decidable.20arg.2E.2E.2E.html#232616390">(Mar 31 2021 at 15:57)</a>:</h4>
<p><span class="user-mention silent" data-user-id="310045">Eric Wieser</span> <a href="#narrow/stream/263328-triage/topic/PR.20.236485.3A.20Add.20a.20linter.20for.20incorrectly.20used.20decidable.20arg.2E.2E.2E/near/232610560">said</a>:</p>
<blockquote>
<p>Because <code>update_zero.equations._eqn_1</code> is the bad lemma</p>
</blockquote>
<p>True, but this lemma is only as important as you make it. You can write your own equation lemma and use it instead of the built in one - the equation compiler "gets it right" only about 70-80% of the time, so manual equation lemmas are quite common</p>



<a name="232619412"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/263328-triage/topic/PR%20%236485%3A%20Add%20a%20linter%20for%20incorrectly%20used%20decidable%20arg.../near/232619412" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/263328-triage/topic/PR.20.236485.3A.20Add.20a.20linter.20for.20incorrectly.20used.20decidable.20arg.2E.2E.2E.html#232619412">(Mar 31 2021 at 16:14)</a>:</h4>
<p>It would be nice if there were some way to register your own lemmas as an equation lemma, so that there was no way to end up using the bad one</p>



<a name="232619481"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/263328-triage/topic/PR%20%236485%3A%20Add%20a%20linter%20for%20incorrectly%20used%20decidable%20arg.../near/232619481" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/263328-triage/topic/PR.20.236485.3A.20Add.20a.20linter.20for.20incorrectly.20used.20decidable.20arg.2E.2E.2E.html#232619481">(Mar 31 2021 at 16:15)</a>:</h4>
<p>That is, have <code>rw my_def</code> mean <code>rw my_def.equation.my_eqn_lemma</code></p>



<a name="232657796"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/263328-triage/topic/PR%20%236485%3A%20Add%20a%20linter%20for%20incorrectly%20used%20decidable%20arg.../near/232657796" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/263328-triage/topic/PR.20.236485.3A.20Add.20a.20linter.20for.20incorrectly.20used.20decidable.20arg.2E.2E.2E.html#232657796">(Mar 31 2021 at 20:14)</a>:</h4>
<p>For me difference between <code>update_zero</code> and <code>finprod</code> is that <code>finprod</code> is irreducible which means "don't unfold, use API".</p>



<a name="232657822"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/263328-triage/topic/PR%20%236485%3A%20Add%20a%20linter%20for%20incorrectly%20used%20decidable%20arg.../near/232657822" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/263328-triage/topic/PR.20.236485.3A.20Add.20a.20linter.20for.20incorrectly.20used.20decidable.20arg.2E.2E.2E.html#232657822">(Mar 31 2021 at 20:14)</a>:</h4>
<p>But probably Mario is right about <code>update_zero</code> too.</p>



<a name="232658963"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/263328-triage/topic/PR%20%236485%3A%20Add%20a%20linter%20for%20incorrectly%20used%20decidable%20arg.../near/232658963" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/263328-triage/topic/PR.20.236485.3A.20Add.20a.20linter.20for.20incorrectly.20used.20decidable.20arg.2E.2E.2E.html#232658963">(Mar 31 2021 at 20:22)</a>:</h4>
<p>So your rule would be, the API around <code>finprod</code> should always accept a decidable argument rather than finding one from the environment?</p>



<a name="232659268"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/263328-triage/topic/PR%20%236485%3A%20Add%20a%20linter%20for%20incorrectly%20used%20decidable%20arg.../near/232659268" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/263328-triage/topic/PR.20.236485.3A.20Add.20a.20linter.20for.20incorrectly.20used.20decidable.20arg.2E.2E.2E.html#232659268">(Mar 31 2021 at 20:25)</a>:</h4>
<p>It should take a decidable argument in any lemma that requires decidability in the statement. Many theorems about <code>finprod</code> won't need this, specifically <em>because</em> <code>finprod</code> itself doesn't take a decidability argument</p>



<a name="232659484"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/263328-triage/topic/PR%20%236485%3A%20Add%20a%20linter%20for%20incorrectly%20used%20decidable%20arg.../near/232659484" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/263328-triage/topic/PR.20.236485.3A.20Add.20a.20linter.20for.20incorrectly.20used.20decidable.20arg.2E.2E.2E.html#232659484">(Mar 31 2021 at 20:26)</a>:</h4>
<p>So for example if you have <code>foo x := if p x then 0 else 1</code> then the theorem <code>foo x = if p x then 0 else 1</code> will need <code>decidable (p x)</code> but <code>p x -&gt; foo x = 0</code> and <code>not (p x) -&gt; foo x = 1</code> will not</p>



<a name="265920327"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/263328-triage/topic/PR%20%236485%3A%20Add%20a%20linter%20for%20incorrectly%20used%20decidable%20arg.../near/265920327" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Random Issue Bot <a href="https://leanprover-community.github.io/archive/stream/263328-triage/topic/PR.20.236485.3A.20Add.20a.20linter.20for.20incorrectly.20used.20decidable.20arg.2E.2E.2E.html#265920327">(Dec 23 2021 at 14:17)</a>:</h4>
<p>Today I chose PR 6485 for discussion!</p>
<p><strong><a href="https://github.com/leanprover-community/mathlib/issues/6485">Add a linter for incorrectly used decidable arguments</a></strong><br>
Created by <span class="user-mention" data-user-id="310045">@Eric Wieser</span> (@eric-wieser) on 2021-02-28<br>
Labels: WIP</p>
<p>Is this PR still relevant? Any recent updates? Anyone making progress?</p>



<a name="266812448"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/263328-triage/topic/PR%20%236485%3A%20Add%20a%20linter%20for%20incorrectly%20used%20decidable%20arg.../near/266812448" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Random Issue Bot <a href="https://leanprover-community.github.io/archive/stream/263328-triage/topic/PR.20.236485.3A.20Add.20a.20linter.20for.20incorrectly.20used.20decidable.20arg.2E.2E.2E.html#266812448">(Jan 04 2022 at 14:17)</a>:</h4>
<p>Today I chose PR 6485 for discussion!</p>
<p><strong><a href="https://github.com/leanprover-community/mathlib/issues/6485">Add a linter for incorrectly used decidable arguments</a></strong><br>
Created by <span class="user-mention" data-user-id="310045">@Eric Wieser</span> (@eric-wieser) on 2021-02-28<br>
Labels: WIP</p>
<p>Is this PR still relevant? Any recent updates? Anyone making progress?</p>



<a name="277424360"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/263328-triage/topic/PR%20%236485%3A%20Add%20a%20linter%20for%20incorrectly%20used%20decidable%20arg.../near/277424360" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Random Issue Bot <a href="https://leanprover-community.github.io/archive/stream/263328-triage/topic/PR.20.236485.3A.20Add.20a.20linter.20for.20incorrectly.20used.20decidable.20arg.2E.2E.2E.html#277424360">(Apr 01 2022 at 14:14)</a>:</h4>
<p>Today I chose PR 6485 for discussion!</p>
<p><strong><a href="https://github.com/leanprover-community/mathlib/issues/6485">Add a linter for incorrectly used decidable arguments</a></strong><br>
Created by <span class="user-mention" data-user-id="310045">@Eric Wieser</span> (@eric-wieser) on 2021-02-28<br>
Labels: WIP</p>
<p>Is this PR still relevant? Any recent updates? Anyone making progress?</p>



<a name="315374928"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/263328-triage/topic/PR%20%236485%3A%20Add%20a%20linter%20for%20incorrectly%20used%20decidable%20arg.../near/315374928" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Random Issue Bot <a href="https://leanprover-community.github.io/archive/stream/263328-triage/topic/PR.20.236485.3A.20Add.20a.20linter.20for.20incorrectly.20used.20decidable.20arg.2E.2E.2E.html#315374928">(Dec 12 2022 at 14:08)</a>:</h4>
<p>Today I chose PR 6485 for discussion!</p>
<p><strong><a href="https://github.com/leanprover-community/mathlib/issues/6485">Add a linter for incorrectly used decidable arguments</a></strong><br>
Created by <span class="user-mention" data-user-id="310045">@Eric Wieser</span> (@eric-wieser) on 2021-02-28<br>
Labels: WIP</p>
<p>Is this PR still relevant? Any recent updates? Anyone making progress?</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>