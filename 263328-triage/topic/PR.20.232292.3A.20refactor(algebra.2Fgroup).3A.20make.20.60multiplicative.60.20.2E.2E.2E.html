---
layout: archive
title: Zulip Chat Archive
permalink: /stream/263328-triage/topic/PR.20.232292.3A.20refactor(algebra.2Fgroup).3A.20make.20.60multiplicative.60.20.2E.2E.2E.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/263328-triage/index.html">triage</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/263328-triage/topic/PR.20.232292.3A.20refactor(algebra.2Fgroup).3A.20make.20.60multiplicative.60.20.2E.2E.2E.html">PR #2292: refactor(algebra/group): make `multiplicative` ...</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="219342029"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/263328-triage/topic/PR%20%232292%3A%20refactor%28algebra/group%29%3A%20make%20%60multiplicative%60%20.../near/219342029" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Random Issue Bot <a href="https://leanprover-community.github.io/archive/stream/263328-triage/topic/PR.20.232292.3A.20refactor(algebra.2Fgroup).3A.20make.20.60multiplicative.60.20.2E.2E.2E.html#219342029">(Dec 09 2020 at 14:24)</a>:</h4>
<p>Today I chose PR 2292 for discussion!</p>
<p><strong><a href="https://github.com/leanprover-community/mathlib/issues/2292">refactor(algebra/group): make <code>multiplicative</code> and <code>additive</code> irreducible</a></strong><br>
Created by <span class="user-mention" data-user-id="214703">@Yury G. Kudryashov</span> (@urkud) on 2020-03-30<br>
Labels: WIP, merge-conflict</p>
<p>Is this PR still relevant? Any recent updates? Anyone making progress?</p>



<a name="219350263"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/263328-triage/topic/PR%20%232292%3A%20refactor%28algebra/group%29%3A%20make%20%60multiplicative%60%20.../near/219350263" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/263328-triage/topic/PR.20.232292.3A.20refactor(algebra.2Fgroup).3A.20make.20.60multiplicative.60.20.2E.2E.2E.html#219350263">(Dec 09 2020 at 15:20)</a>:</h4>
<p>My gut feeling is that this is worth working on, like making with_bot and with_top irreducible, so I'd be interested in hearing Yury's opinion on this one.</p>



<a name="228599102"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/263328-triage/topic/PR%20%232292%3A%20refactor%28algebra/group%29%3A%20make%20%60multiplicative%60%20.../near/228599102" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Random Issue Bot <a href="https://leanprover-community.github.io/archive/stream/263328-triage/topic/PR.20.232292.3A.20refactor(algebra.2Fgroup).3A.20make.20.60multiplicative.60.20.2E.2E.2E.html#228599102">(Mar 03 2021 at 14:21)</a>:</h4>
<p>Today I chose PR 2292 for discussion!</p>
<p><strong><a href="https://github.com/leanprover-community/mathlib/issues/2292">refactor(algebra/group): make <code>multiplicative</code> and <code>additive</code> irreducible</a></strong><br>
Created by <span class="user-mention" data-user-id="214703">@Yury G. Kudryashov</span> (@urkud) on 2020-03-30<br>
Labels: WIP</p>
<p>Is this PR still relevant? Any recent updates? Anyone making progress?</p>



<a name="228611320"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/263328-triage/topic/PR%20%232292%3A%20refactor%28algebra/group%29%3A%20make%20%60multiplicative%60%20.../near/228611320" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/263328-triage/topic/PR.20.232292.3A.20refactor(algebra.2Fgroup).3A.20make.20.60multiplicative.60.20.2E.2E.2E.html#228611320">(Mar 03 2021 at 15:30)</a>:</h4>
<p>My memory is that various things broke when we tried this and I didn't really understand why -- I could fix them but it involved making code uglier. I asked Yury for advice but I think he was very busy at that time.</p>



<a name="228693406"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/263328-triage/topic/PR%20%232292%3A%20refactor%28algebra/group%29%3A%20make%20%60multiplicative%60%20.../near/228693406" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/263328-triage/topic/PR.20.232292.3A.20refactor(algebra.2Fgroup).3A.20make.20.60multiplicative.60.20.2E.2E.2E.html#228693406">(Mar 04 2021 at 00:20)</a>:</h4>
<p>I don't know what exactly changes about <code>irreducible</code> in Lean 4.</p>



<a name="228693476"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/263328-triage/topic/PR%20%232292%3A%20refactor%28algebra/group%29%3A%20make%20%60multiplicative%60%20.../near/228693476" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/263328-triage/topic/PR.20.232292.3A.20refactor(algebra.2Fgroup).3A.20make.20.60multiplicative.60.20.2E.2E.2E.html#228693476">(Mar 04 2021 at 00:21)</a>:</h4>
<p>It makes no sense to refactor a code to something that will need another refactor for Lean 4 porting.</p>



<a name="228741186"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/263328-triage/topic/PR%20%232292%3A%20refactor%28algebra/group%29%3A%20make%20%60multiplicative%60%20.../near/228741186" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/263328-triage/topic/PR.20.232292.3A.20refactor(algebra.2Fgroup).3A.20make.20.60multiplicative.60.20.2E.2E.2E.html#228741186">(Mar 04 2021 at 09:32)</a>:</h4>
<p>I have experimented with making additive/multiplicate structures instead in <a href="https://github.com/leanprover-community/mathlib/issues/6045">#6045</a>.  It's a bit cumbersome (but will probably get easier with more automation around equivalences).<br>
The one place where I got completely stuck was with monoid algebras.</p>



<a name="228742850"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/263328-triage/topic/PR%20%232292%3A%20refactor%28algebra/group%29%3A%20make%20%60multiplicative%60%20.../near/228742850" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/263328-triage/topic/PR.20.232292.3A.20refactor(algebra.2Fgroup).3A.20make.20.60multiplicative.60.20.2E.2E.2E.html#228742850">(Mar 04 2021 at 09:46)</a>:</h4>
<p>But am I right in thinking that persevering with that experiment is a useful step forwards when it comes to mathport?</p>



<a name="228743482"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/263328-triage/topic/PR%20%232292%3A%20refactor%28algebra/group%29%3A%20make%20%60multiplicative%60%20.../near/228743482" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/263328-triage/topic/PR.20.232292.3A.20refactor(algebra.2Fgroup).3A.20make.20.60multiplicative.60.20.2E.2E.2E.html#228743482">(Mar 04 2021 at 09:51)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110043">Gabriel Ebner</span> <a href="#narrow/stream/263328-triage/topic/PR.20.232292.3A.20refactor(algebra.2Fgroup).3A.20make.20.60multiplicative.60.20.2E.2E.2E/near/228741186">said</a>:</p>
<blockquote>
<p>The one place where I got completely stuck was with monoid algebras.</p>
</blockquote>
<p>I assume that was regarding <a href="https://leanprover-community.github.io/mathlib_docs/find/monoid_algebra.to_additive">docs#monoid_algebra.to_additive</a> and <a href="https://leanprover-community.github.io/mathlib_docs/find/add_monoid_algebra.to_multiplicative">docs#add_monoid_algebra.to_multiplicative</a>?</p>



<a name="228743930"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/263328-triage/topic/PR%20%232292%3A%20refactor%28algebra/group%29%3A%20make%20%60multiplicative%60%20.../near/228743930" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/263328-triage/topic/PR.20.232292.3A.20refactor(algebra.2Fgroup).3A.20make.20.60multiplicative.60.20.2E.2E.2E.html#228743930">(Mar 04 2021 at 09:55)</a>:</h4>
<p>I remember getting completely stuck in <a href="https://github.com/leanprover-community/mathlib/issues/4402">#4402</a> when I added those, Kevin and I argued a lot about whether abusing the transparency of additive/multiplicative mattered, and then Johan pushed a golf that made it look as though the abuse wasn't there at all</p>



<a name="228745076"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/263328-triage/topic/PR%20%232292%3A%20refactor%28algebra/group%29%3A%20make%20%60multiplicative%60%20.../near/228745076" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/263328-triage/topic/PR.20.232292.3A.20refactor(algebra.2Fgroup).3A.20make.20.60multiplicative.60.20.2E.2E.2E.html#228745076">(Mar 04 2021 at 10:03)</a>:</h4>
<p>so we're now covering up abuse?</p>



<a name="228745289"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/263328-triage/topic/PR%20%232292%3A%20refactor%28algebra/group%29%3A%20make%20%60multiplicative%60%20.../near/228745289" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/263328-triage/topic/PR.20.232292.3A.20refactor(algebra.2Fgroup).3A.20make.20.60multiplicative.60.20.2E.2E.2E.html#228745289">(Mar 04 2021 at 10:04)</a>:</h4>
<p>My feelings about the evilness of abusing type equality might just date back to some traumatic childhood experience or something -- trying to get something like <code>order_dual</code> working in some case when I was still a beginner and just getting super-confused, with leaks meaning that after a while you had no idea whether <code>a &lt; b</code> meant <code>a &lt; b</code> or <code>b &lt; a</code>.</p>



<a name="228745456"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/263328-triage/topic/PR%20%232292%3A%20refactor%28algebra/group%29%3A%20make%20%60multiplicative%60%20.../near/228745456" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/263328-triage/topic/PR.20.232292.3A.20refactor(algebra.2Fgroup).3A.20make.20.60multiplicative.60.20.2E.2E.2E.html#228745456">(Mar 04 2021 at 10:06)</a>:</h4>
<p>Damiano might have had a similar experience recently. At the time I convinced myself that if you keep your head then of course you can write the code you want to write, but I remember thinking that if definitional equality could not be abused then we would never be in this mess in the first place.</p>



<a name="228745604"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/263328-triage/topic/PR%20%232292%3A%20refactor%28algebra/group%29%3A%20make%20%60multiplicative%60%20.../near/228745604" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/263328-triage/topic/PR.20.232292.3A.20refactor(algebra.2Fgroup).3A.20make.20.60multiplicative.60.20.2E.2E.2E.html#228745604">(Mar 04 2021 at 10:07)</a>:</h4>
<p>And mathematically I've very much come to terms with the fact that the map from nat to int is not "the identity", and I like the idea, to the extent that I'm happy with the idea that the map from (X,&lt;) to (order_dual X,&gt;) is also not "the identity".</p>



<a name="228746329"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/263328-triage/topic/PR%20%232292%3A%20refactor%28algebra/group%29%3A%20make%20%60multiplicative%60%20.../near/228746329" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/263328-triage/topic/PR.20.232292.3A.20refactor(algebra.2Fgroup).3A.20make.20.60multiplicative.60.20.2E.2E.2E.html#228746329">(Mar 04 2021 at 10:12)</a>:</h4>
<p>But are you happy with the idea that the map from (X,&lt;) to (order_dual (order_dual X),&lt;) is not "the identity"?</p>



<a name="228746457"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/263328-triage/topic/PR%20%232292%3A%20refactor%28algebra/group%29%3A%20make%20%60multiplicative%60%20.../near/228746457" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/263328-triage/topic/PR.20.232292.3A.20refactor(algebra.2Fgroup).3A.20make.20.60multiplicative.60.20.2E.2E.2E.html#228746457">(Mar 04 2021 at 10:13)</a>:</h4>
<p>Yes, that is a corollary of my belief system.</p>



<a name="228746470"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/263328-triage/topic/PR%20%232292%3A%20refactor%28algebra/group%29%3A%20make%20%60multiplicative%60%20.../near/228746470" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/263328-triage/topic/PR.20.232292.3A.20refactor(algebra.2Fgroup).3A.20make.20.60multiplicative.60.20.2E.2E.2E.html#228746470">(Mar 04 2021 at 10:13)</a>:</h4>
<p>It's a canonical isomorphism.</p>



<a name="228746563"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/263328-triage/topic/PR%20%232292%3A%20refactor%28algebra/group%29%3A%20make%20%60multiplicative%60%20.../near/228746563" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/263328-triage/topic/PR.20.232292.3A.20refactor(algebra.2Fgroup).3A.20make.20.60multiplicative.60.20.2E.2E.2E.html#228746563">(Mar 04 2021 at 10:14)</a>:</h4>
<p><span class="user-mention silent" data-user-id="310045">Eric Wieser</span> <a href="#narrow/stream/263328-triage/topic/PR.20.232292.3A.20refactor(algebra.2Fgroup).3A.20make.20.60multiplicative.60.20.2E.2E.2E/near/228743482">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="110043">Gabriel Ebner</span> <a href="#narrow/stream/263328-triage/topic/PR.20.232292.3A.20refactor(algebra.2Fgroup).3A.20make.20.60multiplicative.60.20.2E.2E.2E/near/228741186">said</a>:</p>
<blockquote>
<p>The one place where I got completely stuck was with monoid algebras.</p>
</blockquote>
<p>I assume that was regarding <a href="https://leanprover-community.github.io/mathlib_docs/find/monoid_algebra.to_additive">docs#monoid_algebra.to_additive</a> and <a href="https://leanprover-community.github.io/mathlib_docs/find/add_monoid_algebra.to_multiplicative">docs#add_monoid_algebra.to_multiplicative</a>?</p>
</blockquote>
<p>Yes, they're a bit tricky but they can be solved with a bit of code duplication.  The whole file is a piece of work since it very much relies on the fact that both additive and multiplicative monoid algebras reduce to the same finsupp:</p>
<blockquote>
<p>We cannot define <code>add_monoid_algebra k G := monoid_algebra k (multiplicative G)</code>, because polynomials are defined in terms of <code>add_monoid_algebra R ℕ</code>, and then <code>p.support</code> would be a <code>finset (multiplicative ℕ)</code>.</p>
</blockquote>
<p>I wonder if it would be easier to define add_monoid_algebra first, and then <code>monoid_algebra k A := add_monoid_algebra k (additive A)</code>.</p>



<a name="228747938"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/263328-triage/topic/PR%20%232292%3A%20refactor%28algebra/group%29%3A%20make%20%60multiplicative%60%20.../near/228747938" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/263328-triage/topic/PR.20.232292.3A.20refactor(algebra.2Fgroup).3A.20make.20.60multiplicative.60.20.2E.2E.2E.html#228747938">(Mar 04 2021 at 10:25)</a>:</h4>
<p>I mean, isn't that really just saying "if we define things with <code>multiplicative</code> / <code>additive</code>, then one of the APIs will be awkward to use, and mathematicians will really hate us if we choose the awkward one to be <code>add_monoid_algebra</code> as that's what polynomial uses"?</p>



<a name="228747978"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/263328-triage/topic/PR%20%232292%3A%20refactor%28algebra/group%29%3A%20make%20%60multiplicative%60%20.../near/228747978" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/263328-triage/topic/PR.20.232292.3A.20refactor(algebra.2Fgroup).3A.20make.20.60multiplicative.60.20.2E.2E.2E.html#228747978">(Mar 04 2021 at 10:25)</a>:</h4>
<p>Your suggestion just makes the users of <code>monoid_algebra</code> hate us instead, which is at least fewer users</p>



<a name="228748549"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/263328-triage/topic/PR%20%232292%3A%20refactor%28algebra/group%29%3A%20make%20%60multiplicative%60%20.../near/228748549" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/263328-triage/topic/PR.20.232292.3A.20refactor(algebra.2Fgroup).3A.20make.20.60multiplicative.60.20.2E.2E.2E.html#228748549">(Mar 04 2021 at 10:30)</a>:</h4>
<p>All the representation theorists...</p>



<a name="228748557"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/263328-triage/topic/PR%20%232292%3A%20refactor%28algebra/group%29%3A%20make%20%60multiplicative%60%20.../near/228748557" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Külshammer <a href="https://leanprover-community.github.io/archive/stream/263328-triage/topic/PR.20.232292.3A.20refactor(algebra.2Fgroup).3A.20make.20.60multiplicative.60.20.2E.2E.2E.html#228748557">(Mar 04 2021 at 10:30)</a>:</h4>
<p>But won't it be hidden from the user for <code>polynomial</code> because that has its own API but things like the group algebra are exclusively written multiplicatively and hopefully will be studied a lot in mathlib's future?</p>



<a name="228748757"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/263328-triage/topic/PR%20%232292%3A%20refactor%28algebra/group%29%3A%20make%20%60multiplicative%60%20.../near/228748757" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/263328-triage/topic/PR.20.232292.3A.20refactor(algebra.2Fgroup).3A.20make.20.60multiplicative.60.20.2E.2E.2E.html#228748757">(Mar 04 2021 at 10:32)</a>:</h4>
<p>The problem is that polynomials don't have their own API.  The add_monoid_algebra leaks through it like a sieve.</p>



<a name="228749328"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/263328-triage/topic/PR%20%232292%3A%20refactor%28algebra/group%29%3A%20make%20%60multiplicative%60%20.../near/228749328" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/263328-triage/topic/PR.20.232292.3A.20refactor(algebra.2Fgroup).3A.20make.20.60multiplicative.60.20.2E.2E.2E.html#228749328">(Mar 04 2021 at 10:36)</a>:</h4>
<p>This would be reasonable to try to fix. :-)</p>



<a name="228749410"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/263328-triage/topic/PR%20%232292%3A%20refactor%28algebra/group%29%3A%20make%20%60multiplicative%60%20.../near/228749410" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/263328-triage/topic/PR.20.232292.3A.20refactor(algebra.2Fgroup).3A.20make.20.60multiplicative.60.20.2E.2E.2E.html#228749410">(Mar 04 2021 at 10:37)</a>:</h4>
<p>Presumably it's one of those things you don't have to do all at once --- marked <code>polynomial</code> irreducible, fix a few breakages, then remove the irreducible label when you get bored/stuck, and PR your progress.</p>



<a name="228750379"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/263328-triage/topic/PR%20%232292%3A%20refactor%28algebra/group%29%3A%20make%20%60multiplicative%60%20.../near/228750379" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/263328-triage/topic/PR.20.232292.3A.20refactor(algebra.2Fgroup).3A.20make.20.60multiplicative.60.20.2E.2E.2E.html#228750379">(Mar 04 2021 at 10:45)</a>:</h4>
<p>Scott's approach sounds like the right one to me. I agree with Gabriel that there are a ton of leaks here. My experience is that these things really confuse beginners.</p>



<a name="228752268"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/263328-triage/topic/PR%20%232292%3A%20refactor%28algebra/group%29%3A%20make%20%60multiplicative%60%20.../near/228752268" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/263328-triage/topic/PR.20.232292.3A.20refactor(algebra.2Fgroup).3A.20make.20.60multiplicative.60.20.2E.2E.2E.html#228752268">(Mar 04 2021 at 11:02)</a>:</h4>
<p>Is <code>polynomial</code> really at all different from <code>add_monoid_algebra</code> other than giving things different names?</p>



<a name="228753823"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/263328-triage/topic/PR%20%232292%3A%20refactor%28algebra/group%29%3A%20make%20%60multiplicative%60%20.../near/228753823" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/263328-triage/topic/PR.20.232292.3A.20refactor(algebra.2Fgroup).3A.20make.20.60multiplicative.60.20.2E.2E.2E.html#228753823">(Mar 04 2021 at 11:15)</a>:</h4>
<p>This is exactly the sort of question which comes up. As a mathematician I would strongly argue for an API which respects what mathematicians expect to see when they come to our library. It is important to stress that there are plenty of mathematicians out there who know exactly what a polynomial and a coefficient of a polynomial is, but have no idea what a monoid is and even less idea what a monoid algebra is. I am well aware that from a CS point of view giving things more than one name is a pain, and indeed I remember the struggle I had in 2018 or so to even persuade the developers of the polynomial API to even make a <code>coeff</code> function, because their argument was that it "was already there", it was called function evaluation. But this is absolutely not the way to go if we want to attract mathematician users.</p>
<p>Monoids are like LEM, they're taught in CS departments so people with a non-maths background just assume they're taught in maths departments too. This is not the case. Monoids are unimportant because there are no good classification theorems or profound questions about them, so we go straight to groups.</p>



<a name="228754066"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/263328-triage/topic/PR%20%232292%3A%20refactor%28algebra/group%29%3A%20make%20%60multiplicative%60%20.../near/228754066" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/263328-triage/topic/PR.20.232292.3A.20refactor(algebra.2Fgroup).3A.20make.20.60multiplicative.60.20.2E.2E.2E.html#228754066">(Mar 04 2021 at 11:17)</a>:</h4>
<p>My point was not "why do we even have <code>polynomial</code>", but "how can we make this type of renaming easier"</p>



<a name="228754203"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/263328-triage/topic/PR%20%232292%3A%20refactor%28algebra/group%29%3A%20make%20%60multiplicative%60%20.../near/228754203" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/263328-triage/topic/PR.20.232292.3A.20refactor(algebra.2Fgroup).3A.20make.20.60multiplicative.60.20.2E.2E.2E.html#228754203">(Mar 04 2021 at 11:18)</a>:</h4>
<p>I think Scott has the right answer to this -- make it irreducible and stop the leaks. In the file where the API is made it can be reducible enabling slick one-line proofs which abuse defeq, and then once we have the API, lock it up.</p>



<a name="228754766"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/263328-triage/topic/PR%20%232292%3A%20refactor%28algebra/group%29%3A%20make%20%60multiplicative%60%20.../near/228754766" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/263328-triage/topic/PR.20.232292.3A.20refactor(algebra.2Fgroup).3A.20make.20.60multiplicative.60.20.2E.2E.2E.html#228754766">(Mar 04 2021 at 11:23)</a>:</h4>
<p>It might frustrate people who want to give slick proofs which abuse defeq, but surely it is a general principle of programming that you want your users to access your functions via the correct interface, and I have learnt that for mathematicians this works really well. Once they get the hang of the API they can really use it, the naming convention is brilliant and they don't ever have to worry about monoid algebras or universal properties, unless of course they want to, in which case they can just look and find out what is really going on.</p>



<a name="228754844"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/263328-triage/topic/PR%20%232292%3A%20refactor%28algebra/group%29%3A%20make%20%60multiplicative%60%20.../near/228754844" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Külshammer <a href="https://leanprover-community.github.io/archive/stream/263328-triage/topic/PR.20.232292.3A.20refactor(algebra.2Fgroup).3A.20make.20.60multiplicative.60.20.2E.2E.2E.html#228754844">(Mar 04 2021 at 11:23)</a>:</h4>
<p>I agree that monoids are not as widely studied as groups, but that doesn't mean that there are no profound questions about them, see e.g. Benjam Steinberg, Representation Theory of finite monoids, <a href="https://www.springer.com/gp/book/9783319439303">https://www.springer.com/gp/book/9783319439303</a></p>



<a name="228755514"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/263328-triage/topic/PR%20%232292%3A%20refactor%28algebra/group%29%3A%20make%20%60multiplicative%60%20.../near/228755514" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/263328-triage/topic/PR.20.232292.3A.20refactor(algebra.2Fgroup).3A.20make.20.60multiplicative.60.20.2E.2E.2E.html#228755514">(Mar 04 2021 at 11:29)</a>:</h4>
<p>Oh nice, thanks :-) It's good to have a non-commutative person around to keep me honest :-) But presumably there's nothing like classification of finite simple monoids?</p>
<p>I don't really understand computation much, but my impression is that a disadvantage of making everything irreducible is that it makes stuff I never use like #eval stop working. If there are people who want to use Lean as a CAS and multiply polynomials together then making them irreducible might have consequences. But I also have this vague idea that algorithms for multiplying things together which are good for proving are totally different to the algorithms for multiplying things together which are good for computing (e.g. there are efficient ways to multiply large matrices together which beat the naive method, but the naive method is essential if you want to prove theorems) so I kind of suspect that this CAS thing is somehow a different problem -- one would want to write other functions to do this sort of thing rather than getting the provey stuff we have to compute.</p>



<a name="228755864"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/263328-triage/topic/PR%20%232292%3A%20refactor%28algebra/group%29%3A%20make%20%60multiplicative%60%20.../near/228755864" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/263328-triage/topic/PR.20.232292.3A.20refactor(algebra.2Fgroup).3A.20make.20.60multiplicative.60.20.2E.2E.2E.html#228755864">(Mar 04 2021 at 11:32)</a>:</h4>
<p>While I do not feel that I can contribute much for the "Lean development" part of the conversation, I can confirm that</p>
<ul>
<li>had there not been a <code>coeff</code> function on <code>polynomials</code>, I am not sure that I would have played with them in the first place;</li>
<li>I am worried about using <code>order_dual</code>, since I have not been able to prove that for a non-empty <code>finset ℕ</code>, the <code>min'</code> for the usual order on ℕ and the <code>max'</code> for the <code>order_dual</code> coincide;</li>
<li>I do not think that I know what a monoid is and whenever I have to choose a typeclass, I prove the lemma assuming <code>integral_domain</code> and then start making my way down until I realize that <code>has_one</code> was enough.</li>
</ul>



<a name="228756035"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/263328-triage/topic/PR%20%232292%3A%20refactor%28algebra/group%29%3A%20make%20%60multiplicative%60%20.../near/228756035" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/263328-triage/topic/PR.20.232292.3A.20refactor(algebra.2Fgroup).3A.20make.20.60multiplicative.60.20.2E.2E.2E.html#228756035">(Mar 04 2021 at 11:34)</a>:</h4>
<p>While we are at it, if it were possible to introduce a "mathematician switch" in lean that would fictitiously introduce a goal of <code>a ≠ 0</code>, whenever you use <code>1 / a</code>, I might even consider using it myself, feeding into Lean lots of unneeded proofs that some elements are non-zero!  <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span></p>



<a name="228756274"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/263328-triage/topic/PR%20%232292%3A%20refactor%28algebra/group%29%3A%20make%20%60multiplicative%60%20.../near/228756274" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/263328-triage/topic/PR.20.232292.3A.20refactor(algebra.2Fgroup).3A.20make.20.60multiplicative.60.20.2E.2E.2E.html#228756274">(Mar 04 2021 at 11:35)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110038">Kevin Buzzard</span> <a href="#narrow/stream/263328-triage/topic/PR.20.232292.3A.20refactor(algebra.2Fgroup).3A.20make.20.60multiplicative.60.20.2E.2E.2E/near/228755514">said</a>:</p>
<blockquote>
<p>I don't really understand computation much, but my impression is that a disadvantage of making everything irreducible is that it makes stuff I never use like #eval stop working.</p>
</blockquote>
<p>I think you're confusing <code>irreducible</code> and <code>noncomputable</code> in this context:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">@[irreducible, derive[has_zero,has_one,has_add,has_repr]</span><span class="o">]</span>
<span class="kd">def</span> <span class="n">not_the_natural_numbers</span> <span class="o">:=</span> <span class="n">ℕ</span>
<span class="kd">@[irreducible]</span> <span class="kd">def</span> <span class="n">secret_number</span> <span class="o">:</span> <span class="n">not_the_natural_numbers</span> <span class="o">:=</span> <span class="mi">37</span>

<span class="k">#eval</span> <span class="n">secret_number</span> <span class="c1">-- 37</span>
</code></pre></div>
<p>But overall I agree, the definitions we should standardise on are the ones that prove well. Especially since there are many different data types that can represent polynomials, each with their own (computational) benefits.</p>



<a name="228834102"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/263328-triage/topic/PR%20%232292%3A%20refactor%28algebra/group%29%3A%20make%20%60multiplicative%60%20.../near/228834102" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/263328-triage/topic/PR.20.232292.3A.20refactor(algebra.2Fgroup).3A.20make.20.60multiplicative.60.20.2E.2E.2E.html#228834102">(Mar 04 2021 at 19:23)</a>:</h4>
<p>Back to the original topic: <a href="https://github.com/leanprover-community/mathlib/issues/6045">#6045</a> builds now.</p>



<a name="228834393"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/263328-triage/topic/PR%20%232292%3A%20refactor%28algebra/group%29%3A%20make%20%60multiplicative%60%20.../near/228834393" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/263328-triage/topic/PR.20.232292.3A.20refactor(algebra.2Fgroup).3A.20make.20.60multiplicative.60.20.2E.2E.2E.html#228834393">(Mar 04 2021 at 19:25)</a>:</h4>
<p>I've looked a bit into making polynomials work the <code>add_monoid_algebra k G := monoid_algebra k (multiplicative G)</code> definition.<br>
This actually works pretty nicely once you define <code>polynomial.support</code>, <code>polynomial.sum</code>, and use <code>polynomial.monomial</code> instead of <code>finsupp.single</code>.</p>



<a name="228834777"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/263328-triage/topic/PR%20%232292%3A%20refactor%28algebra/group%29%3A%20make%20%60multiplicative%60%20.../near/228834777" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/263328-triage/topic/PR.20.232292.3A.20refactor(algebra.2Fgroup).3A.20make.20.60multiplicative.60.20.2E.2E.2E.html#228834777">(Mar 04 2021 at 19:27)</a>:</h4>
<p>Do additive monoid algebras actually have any applications (aside from polynomials)?  If nobody cares about them, then we could define <code>polynomial R := monoid_algebra R (multiplicative ℕ)</code> directly and save hundreds of lines.</p>



<a name="228835273"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/263328-triage/topic/PR%20%232292%3A%20refactor%28algebra/group%29%3A%20make%20%60multiplicative%60%20.../near/228835273" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/263328-triage/topic/PR.20.232292.3A.20refactor(algebra.2Fgroup).3A.20make.20.60multiplicative.60.20.2E.2E.2E.html#228835273">(Mar 04 2021 at 19:30)</a>:</h4>
<p>(The <code>add_monoid_algebra</code> API leaks <code>multiplicative</code> all over the place, even now.  So it's not a great abstraction.)</p>



<a name="228849850"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/263328-triage/topic/PR%20%232292%3A%20refactor%28algebra/group%29%3A%20make%20%60multiplicative%60%20.../near/228849850" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/263328-triage/topic/PR.20.232292.3A.20refactor(algebra.2Fgroup).3A.20make.20.60multiplicative.60.20.2E.2E.2E.html#228849850">(Mar 04 2021 at 21:03)</a>:</h4>
<p>700 lines of extra proofs is a little unfortunate</p>



<a name="228854279"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/263328-triage/topic/PR%20%232292%3A%20refactor%28algebra/group%29%3A%20make%20%60multiplicative%60%20.../near/228854279" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/263328-triage/topic/PR.20.232292.3A.20refactor(algebra.2Fgroup).3A.20make.20.60multiplicative.60.20.2E.2E.2E.html#228854279">(Mar 04 2021 at 21:33)</a>:</h4>
<p>I think in the conventional world whenever someone wants to talk about an add_monoid_algebra they implicitly use <code>multiplicative</code>, although mathematicians would handle this by introducing a dummy symbol (often e or t) and writing e^x.</p>



<a name="228854580"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/263328-triage/topic/PR%20%232292%3A%20refactor%28algebra/group%29%3A%20make%20%60multiplicative%60%20.../near/228854580" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/263328-triage/topic/PR.20.232292.3A.20refactor(algebra.2Fgroup).3A.20make.20.60multiplicative.60.20.2E.2E.2E.html#228854580">(Mar 04 2021 at 21:35)</a>:</h4>
<p>This is even what we do for polynomials, of course: the symbol <code>X^</code> is a stand-in for <code>multiplicative</code>.</p>



<a name="228854760"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/263328-triage/topic/PR%20%232292%3A%20refactor%28algebra/group%29%3A%20make%20%60multiplicative%60%20.../near/228854760" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/263328-triage/topic/PR.20.232292.3A.20refactor(algebra.2Fgroup).3A.20make.20.60multiplicative.60.20.2E.2E.2E.html#228854760">(Mar 04 2021 at 21:36)</a>:</h4>
<p>(Also, my apologies for some of the mess here. I made monoid_algebra because I needed it for group rings, and only did a half-hearted job of surgering polynomials onto it.)</p>



<a name="228854896"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/263328-triage/topic/PR%20%232292%3A%20refactor%28algebra/group%29%3A%20make%20%60multiplicative%60%20.../near/228854896" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/263328-triage/topic/PR.20.232292.3A.20refactor(algebra.2Fgroup).3A.20make.20.60multiplicative.60.20.2E.2E.2E.html#228854896">(Mar 04 2021 at 21:38)</a>:</h4>
<p>Gabriel's suggestion to add <code>polynomial.support|sum</code> etc sounds like the right approach. You need to duplicate lots of theorems but of course not their proofs.</p>



<a name="229787259"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/263328-triage/topic/PR%20%232292%3A%20refactor%28algebra/group%29%3A%20make%20%60multiplicative%60%20.../near/229787259" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/263328-triage/topic/PR.20.232292.3A.20refactor(algebra.2Fgroup).3A.20make.20.60multiplicative.60.20.2E.2E.2E.html#229787259">(Mar 11 2021 at 03:25)</a>:</h4>
<p>There are many <code>polynomial</code>-like objects (polynomials and <code>mv_polynomial</code>s are in mathlib, quasi-polynomials are not there yet). While we can use <code>monoid_algebra</code> directly, it's convenient to have a place where all theorems are reformulated with <code>+</code>instead of <code>*</code>where it matters.</p>



<a name="229787459"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/263328-triage/topic/PR%20%232292%3A%20refactor%28algebra/group%29%3A%20make%20%60multiplicative%60%20.../near/229787459" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/263328-triage/topic/PR.20.232292.3A.20refactor(algebra.2Fgroup).3A.20make.20.60multiplicative.60.20.2E.2E.2E.html#229787459">(Mar 11 2021 at 03:27)</a>:</h4>
<p>Possibly, the "correct" way is to define <code>add_monoid_algebra := finsupp ...</code> then use an <code>equiv</code>alence with <code>monoid_algebra</code> to transfer the properties. This will make proofs about <code>add_monoid_algebra</code> longer (though automation may help here) but the users of <code>add_monoid_algebra</code> will be saved from dealing with <code>multiplicative</code>.</p>



<a name="230072232"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/263328-triage/topic/PR%20%232292%3A%20refactor%28algebra/group%29%3A%20make%20%60multiplicative%60%20.../near/230072232" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/263328-triage/topic/PR.20.232292.3A.20refactor(algebra.2Fgroup).3A.20make.20.60multiplicative.60.20.2E.2E.2E.html#230072232">(Mar 12 2021 at 17:58)</a>:</h4>
<p>I've mentioned this privately to Johan, but I'm personally opposed to this change (<a href="https://github.com/leanprover-community/mathlib/issues/6045">#6045</a>, that is), I think it's a regression. Even if the original <code>additive</code> and <code>multiplicative</code> are changed to structures, I want a version that is a type alias in order to facilitate a particular proof method that was the raison d'etre of the definitions in the first place</p>



<a name="230072256"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/263328-triage/topic/PR%20%232292%3A%20refactor%28algebra/group%29%3A%20make%20%60multiplicative%60%20.../near/230072256" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/263328-triage/topic/PR.20.232292.3A.20refactor(algebra.2Fgroup).3A.20make.20.60multiplicative.60.20.2E.2E.2E.html#230072256">(Mar 12 2021 at 17:59)</a>:</h4>
<p>I think it would be more useful to keep <code>additive</code> and <code>multiplicative</code> as aliases and make wrapper structures around them for particular applications such as <code>add_monoid_algebra</code></p>



<a name="230077640"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/263328-triage/topic/PR%20%232292%3A%20refactor%28algebra/group%29%3A%20make%20%60multiplicative%60%20.../near/230077640" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/263328-triage/topic/PR.20.232292.3A.20refactor(algebra.2Fgroup).3A.20make.20.60multiplicative.60.20.2E.2E.2E.html#230077640">(Mar 12 2021 at 18:38)</a>:</h4>
<p>The change makes me feel mildly uneasy too; it seemed useful to be able to say "reuse this entire proof / definition, but pass in <code>(*) = (+)</code>". Perhaps the way that's currently done isn't optimal, but the <code>structure</code>-approach of <a href="https://github.com/leanprover-community/mathlib/issues/6045">#6045</a> results in definitions which don't unfold to something as simple. I'm glad to see someone who knows more about this than me has similar concerns.</p>



<a name="230080160"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/263328-triage/topic/PR%20%232292%3A%20refactor%28algebra/group%29%3A%20make%20%60multiplicative%60%20.../near/230080160" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/263328-triage/topic/PR.20.232292.3A.20refactor(algebra.2Fgroup).3A.20make.20.60multiplicative.60.20.2E.2E.2E.html#230080160">(Mar 12 2021 at 18:57)</a>:</h4>
<p>There are problems with the "pass in (*) for (+)" approach, e.g. nsmul v pow, and the example which Ashwin Iyengar pointed out today (we write <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>g</mi><msup><mi>h</mi><mrow><mo>−</mo><mn>1</mn></mrow></msup></mrow><annotation encoding="application/x-tex">gh^{-1}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1.008548em;vertical-align:-0.19444em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mord"><span class="mord mathnormal">h</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span></span></span></span> but never <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>g</mi><mi mathvariant="normal">/</mi><mi>h</mi></mrow><annotation encoding="application/x-tex">g/h</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mord">/</span><span class="mord mathnormal">h</span></span></span></span>, and <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mo>−</mo><mi>b</mi></mrow><annotation encoding="application/x-tex">a-b</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathnormal">b</span></span></span></span> but never <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mo>+</mo><mo stretchy="false">(</mo><mo>−</mo><mi>b</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">a+(-b)</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">−</span><span class="mord mathnormal">b</span><span class="mclose">)</span></span></span></span>). But I thought that the point of this was that it has something to do with Lean 4 where...something related to this was not actually allowed?</p>



<a name="230084991"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/263328-triage/topic/PR%20%232292%3A%20refactor%28algebra/group%29%3A%20make%20%60multiplicative%60%20.../near/230084991" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/263328-triage/topic/PR.20.232292.3A.20refactor(algebra.2Fgroup).3A.20make.20.60multiplicative.60.20.2E.2E.2E.html#230084991">(Mar 12 2021 at 19:33)</a>:</h4>
<p>Right, the nsmul / pow thing is <code>n •ℕ x</code> vs <code>x ^ n</code> I assume - although if the first translated to <code>nsmul x n</code> then the problem would go away right? Maybe not something to divert this thread with. I too would like to understand how lean4 fits in.</p>



<a name="230172115"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/263328-triage/topic/PR%20%232292%3A%20refactor%28algebra/group%29%3A%20make%20%60multiplicative%60%20.../near/230172115" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/263328-triage/topic/PR.20.232292.3A.20refactor(algebra.2Fgroup).3A.20make.20.60multiplicative.60.20.2E.2E.2E.html#230172115">(Mar 13 2021 at 16:05)</a>:</h4>
<p>In the meantime would it make sense to merge <a href="https://github.com/leanprover-community/mathlib/issues/6657">#6657</a>?</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>