---
layout: archive
title: Zulip Chat Archive
permalink: /stream/263328-triage/topic/PR.20.234273.3A.20feat(data.2Fset.2Fintervals.2Fwith_bot_top).3A.20lemmas.20a.2E.2E.2E.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/263328-triage/index.html">triage</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/263328-triage/topic/PR.20.234273.3A.20feat(data.2Fset.2Fintervals.2Fwith_bot_top).3A.20lemmas.20a.2E.2E.2E.html">PR #4273: feat(data/set/intervals/with_bot_top): lemmas a...</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="215458232"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/263328-triage/topic/PR%20%234273%3A%20feat%28data/set/intervals/with_bot_top%29%3A%20lemmas%20a.../near/215458232" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Random Issue Bot <a href="https://leanprover-community.github.io/archive/stream/263328-triage/topic/PR.20.234273.3A.20feat(data.2Fset.2Fintervals.2Fwith_bot_top).3A.20lemmas.20a.2E.2E.2E.html#215458232">(Nov 03 2020 at 14:14)</a>:</h4>
<p>Today I chose PR 4273 for discussion!</p>
<p><strong><a href="https://github.com/leanprover-community/mathlib/issues/4273">feat(data/set/intervals/with_bot_top): lemmas about <code>I??</code> and <code>with_top/bot</code></a></strong><br>
Created by <span class="user-mention" data-user-id="214703">@Yury G. Kudryashov</span> (@urkud) on 2020-09-26<br>
Labels: awaiting-author, merge-conflict</p>
<p>Is this PR still relevant? Any recent updates? Anyone making progress?</p>



<a name="215461686"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/263328-triage/topic/PR%20%234273%3A%20feat%28data/set/intervals/with_bot_top%29%3A%20lemmas%20a.../near/215461686" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/263328-triage/topic/PR.20.234273.3A.20feat(data.2Fset.2Fintervals.2Fwith_bot_top).3A.20lemmas.20a.2E.2E.2E.html#215461686">(Nov 03 2020 at 14:41)</a>:</h4>
<p>For this PR we need to make <code>with_top</code> and <code>with_bot</code> irreducible.</p>



<a name="215461739"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/263328-triage/topic/PR%20%234273%3A%20feat%28data/set/intervals/with_bot_top%29%3A%20lemmas%20a.../near/215461739" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/263328-triage/topic/PR.20.234273.3A.20feat(data.2Fset.2Fintervals.2Fwith_bot_top).3A.20lemmas.20a.2E.2E.2E.html#215461739">(Nov 03 2020 at 14:41)</a>:</h4>
<p>If someone wants to help me with this refactor, tell me, please.</p>



<a name="215461829"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/263328-triage/topic/PR%20%234273%3A%20feat%28data/set/intervals/with_bot_top%29%3A%20lemmas%20a.../near/215461829" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/263328-triage/topic/PR.20.234273.3A.20feat(data.2Fset.2Fintervals.2Fwith_bot_top).3A.20lemmas.20a.2E.2E.2E.html#215461829">(Nov 03 2020 at 14:42)</a>:</h4>
<p>I started this in a branch but didn't fix all failures yet.</p>



<a name="215465831"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/263328-triage/topic/PR%20%234273%3A%20feat%28data/set/intervals/with_bot_top%29%3A%20lemmas%20a.../near/215465831" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/263328-triage/topic/PR.20.234273.3A.20feat(data.2Fset.2Fintervals.2Fwith_bot_top).3A.20lemmas.20a.2E.2E.2E.html#215465831">(Nov 03 2020 at 15:12)</a>:</h4>
<p>Which branch? I did this for with_zero and with_one and found it quite fun.</p>



<a name="215465982"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/263328-triage/topic/PR%20%234273%3A%20feat%28data/set/intervals/with_bot_top%29%3A%20lemmas%20a.../near/215465982" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/263328-triage/topic/PR.20.234273.3A.20feat(data.2Fset.2Fintervals.2Fwith_bot_top).3A.20lemmas.20a.2E.2E.2E.html#215465982">(Nov 03 2020 at 15:12)</a>:</h4>
<p>(I did a certain amount of cheating when I couldn't figure it out, e.g. making them locally reducible for a proof or two when I couldn't get to the bottom of a failure, but I'll try harder this time)</p>



<a name="215467515"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/263328-triage/topic/PR%20%234273%3A%20feat%28data/set/intervals/with_bot_top%29%3A%20lemmas%20a.../near/215467515" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/263328-triage/topic/PR.20.234273.3A.20feat(data.2Fset.2Fintervals.2Fwith_bot_top).3A.20lemmas.20a.2E.2E.2E.html#215467515">(Nov 03 2020 at 15:24)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib/tree/irreducible-with-top">https://github.com/leanprover-community/mathlib/tree/irreducible-with-top</a></p>



<a name="215467572"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/263328-triage/topic/PR%20%234273%3A%20feat%28data/set/intervals/with_bot_top%29%3A%20lemmas%20a.../near/215467572" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/263328-triage/topic/PR.20.234273.3A.20feat(data.2Fset.2Fintervals.2Fwith_bot_top).3A.20lemmas.20a.2E.2E.2E.html#215467572">(Nov 03 2020 at 15:24)</a>:</h4>
<p>I'll merge master into this branch today</p>



<a name="215971581"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/263328-triage/topic/PR%20%234273%3A%20feat%28data/set/intervals/with_bot_top%29%3A%20lemmas%20a.../near/215971581" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/263328-triage/topic/PR.20.234273.3A.20feat(data.2Fset.2Fintervals.2Fwith_bot_top).3A.20lemmas.20a.2E.2E.2E.html#215971581">(Nov 07 2020 at 20:19)</a>:</h4>
<p>I have some time for this now. I got <code>conditionally_complete_lattice</code> compiling; you might want to take a look at this <span class="user-mention" data-user-id="214703">@Yury G. Kudryashov</span> just to check that you don't think my methods are too crude. Temporarily making with_top/with_bot reducible sometimes fixes some errors and creates others. If I can't do this, I can't do <code>cases</code> on <code>a : with_top X</code> so I brutally apply the <code>with_top.rec_top_coe</code> recursor. Am I missing a trick?</p>



<a name="215971663"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/263328-triage/topic/PR%20%234273%3A%20feat%28data/set/intervals/with_bot_top%29%3A%20lemmas%20a.../near/215971663" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/263328-triage/topic/PR.20.234273.3A.20feat(data.2Fset.2Fintervals.2Fwith_bot_top).3A.20lemmas.20a.2E.2E.2E.html#215971663">(Nov 07 2020 at 20:21)</a>:</h4>
<p>Currently the main problem I see is that some algebraic instances don't work well unless I make both <code>with_top</code> and <code>with_bot</code> semireducible.</p>



<a name="215971718"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/263328-triage/topic/PR%20%234273%3A%20feat%28data/set/intervals/with_bot_top%29%3A%20lemmas%20a.../near/215971718" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/263328-triage/topic/PR.20.234273.3A.20feat(data.2Fset.2Fintervals.2Fwith_bot_top).3A.20lemmas.20a.2E.2E.2E.html#215971718">(Nov 07 2020 at 20:22)</a>:</h4>
<p>E.g., sometimes Lean can't unify two <code>has_add</code> instances on <code>with_bot</code>, one coming from <code>has_add α</code>, and another coming from <code>add_monoid α</code> via <code>add_monoid (with_bot α)</code>.</p>



<a name="215971740"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/263328-triage/topic/PR%20%234273%3A%20feat%28data/set/intervals/with_bot_top%29%3A%20lemmas%20a.../near/215971740" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/263328-triage/topic/PR.20.234273.3A.20feat(data.2Fset.2Fintervals.2Fwith_bot_top).3A.20lemmas.20a.2E.2E.2E.html#215971740">(Nov 07 2020 at 20:23)</a>:</h4>
<p>I think that this bad; we should make <code>with_top</code>/<code>with_bot</code> semireducible only if we want to use functions and theorems about <code>option</code>.</p>



<a name="215973712"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/263328-triage/topic/PR%20%234273%3A%20feat%28data/set/intervals/with_bot_top%29%3A%20lemmas%20a.../near/215973712" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/263328-triage/topic/PR.20.234273.3A.20feat(data.2Fset.2Fintervals.2Fwith_bot_top).3A.20lemmas.20a.2E.2E.2E.html#215973712">(Nov 07 2020 at 21:11)</a>:</h4>
<p>I am working on <code>ereal</code> and it seems that there are two non-defeq orders on it, one coming from <code>order_bot</code> and another from the linear order. I was seeing the same issues in <code>conditionally_complete_lattice</code>.</p>



<a name="215973779"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/263328-triage/topic/PR%20%234273%3A%20feat%28data/set/intervals/with_bot_top%29%3A%20lemmas%20a.../near/215973779" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/263328-triage/topic/PR.20.234273.3A.20feat(data.2Fset.2Fintervals.2Fwith_bot_top).3A.20lemmas.20a.2E.2E.2E.html#215973779">(Nov 07 2020 at 21:13)</a>:</h4>
<p>I don't really understand what you're saying -- are you suggesting that this PR be abandoned? Do you think that we could do some clever priority changing to sort these issues out? (I think I'm seeing the same type of problem in the order hierarchy as you're seeing in the algebra hierarchy).</p>



<a name="215974194"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/263328-triage/topic/PR%20%234273%3A%20feat%28data/set/intervals/with_bot_top%29%3A%20lemmas%20a.../near/215974194" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/263328-triage/topic/PR.20.234273.3A.20feat(data.2Fset.2Fintervals.2Fwith_bot_top).3A.20lemmas.20a.2E.2E.2E.html#215974194">(Nov 07 2020 at 21:25)</a>:</h4>
<p>Hmm. I've just solved my lattice nondefeq order issue by writing</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">@[derive [linear_order, order_bot, order_top,</span>
<span class="kd">  has_Sup, has_Inf, complete_lattice, has_add]</span><span class="o">]</span>
<span class="kd">def</span> <span class="n">ereal</span> <span class="o">:=</span> <span class="n">with_top</span> <span class="o">(</span><span class="n">with_bot</span> <span class="n">ℝ</span><span class="o">)</span>

<span class="kn">local</span> <span class="kn">attribute</span> <span class="o">[</span><span class="n">reducible</span><span class="o">]</span> <span class="n">with_bot</span> <span class="n">with_top</span>
</code></pre></div>
<p>instead of making them reducible before letting the derive handler run.</p>



<a name="215979205"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/263328-triage/topic/PR%20%234273%3A%20feat%28data/set/intervals/with_bot_top%29%3A%20lemmas%20a.../near/215979205" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/263328-triage/topic/PR.20.234273.3A.20feat(data.2Fset.2Fintervals.2Fwith_bot_top).3A.20lemmas.20a.2E.2E.2E.html#215979205">(Nov 07 2020 at 23:43)</a>:</h4>
<p>We should change some instances so that Lean can match different <code>has_add</code>s without making <code>with_bot</code> and <code>with_top</code> locally <code>semireducible</code>.</p>



<a name="215979211"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/263328-triage/topic/PR%20%234273%3A%20feat%28data/set/intervals/with_bot_top%29%3A%20lemmas%20a.../near/215979211" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/263328-triage/topic/PR.20.234273.3A.20feat(data.2Fset.2Fintervals.2Fwith_bot_top).3A.20lemmas.20a.2E.2E.2E.html#215979211">(Nov 07 2020 at 23:43)</a>:</h4>
<p>BTW, you should make them <code>semireducible</code>, not <code>reducible</code>.</p>



<a name="215979254"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/263328-triage/topic/PR%20%234273%3A%20feat%28data/set/intervals/with_bot_top%29%3A%20lemmas%20a.../near/215979254" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/263328-triage/topic/PR.20.234273.3A.20feat(data.2Fset.2Fintervals.2Fwith_bot_top).3A.20lemmas.20a.2E.2E.2E.html#215979254">(Nov 07 2020 at 23:44)</a>:</h4>
<p>Otherwise Lean treat both of them as <code>option α</code> for the purpose of instance search.</p>



<a name="215979262"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/263328-triage/topic/PR%20%234273%3A%20feat%28data/set/intervals/with_bot_top%29%3A%20lemmas%20a.../near/215979262" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/263328-triage/topic/PR.20.234273.3A.20feat(data.2Fset.2Fintervals.2Fwith_bot_top).3A.20lemmas.20a.2E.2E.2E.html#215979262">(Nov 07 2020 at 23:44)</a>:</h4>
<p>And it can apply <code>with_top</code> instance to <code>with_bot α</code>.</p>



<a name="215979281"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/263328-triage/topic/PR%20%234273%3A%20feat%28data/set/intervals/with_bot_top%29%3A%20lemmas%20a.../near/215979281" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/263328-triage/topic/PR.20.234273.3A.20feat(data.2Fset.2Fintervals.2Fwith_bot_top).3A.20lemmas.20a.2E.2E.2E.html#215979281">(Nov 07 2020 at 23:45)</a>:</h4>
<p>E.g., I added some <code>{ zero := 0, add := (+) }</code> to <code>with_bot.add_monoid</code> etc.</p>



<a name="215979287"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/263328-triage/topic/PR%20%234273%3A%20feat%28data/set/intervals/with_bot_top%29%3A%20lemmas%20a.../near/215979287" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/263328-triage/topic/PR.20.234273.3A.20feat(data.2Fset.2Fintervals.2Fwith_bot_top).3A.20lemmas.20a.2E.2E.2E.html#215979287">(Nov 07 2020 at 23:45)</a>:</h4>
<p>I thought that this will help but it doesn't. Probably we need to do the same with some <code>with_top</code> instances.</p>



<a name="215981125"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/263328-triage/topic/PR%20%234273%3A%20feat%28data/set/intervals/with_bot_top%29%3A%20lemmas%20a.../near/215981125" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/263328-triage/topic/PR.20.234273.3A.20feat(data.2Fset.2Fintervals.2Fwith_bot_top).3A.20lemmas.20a.2E.2E.2E.html#215981125">(Nov 08 2020 at 00:39)</a>:</h4>
<p>The semireducible (not reducible) trick has fixed the issues I was having with <code>ereal</code> -- thanks! I've also got <code>ennreal</code> compiling (by just making <code>with_top</code> semireducible at the top of the file and then irreducible at the bottom -- are you happy with this approach?).</p>
<p>Can you point me to a specific issue with addition so I can try and understand the problem better? I'm sure I'll run into one soon enough but I may as well try and understand what you think the big problem is.</p>



<a name="215997433"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/263328-triage/topic/PR%20%234273%3A%20feat%28data/set/intervals/with_bot_top%29%3A%20lemmas%20a.../near/215997433" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/263328-triage/topic/PR.20.234273.3A.20feat(data.2Fset.2Fintervals.2Fwith_bot_top).3A.20lemmas.20a.2E.2E.2E.html#215997433">(Nov 08 2020 at 09:06)</a>:</h4>
<p>I assume these types were <code>irreducible</code> before? If so, the instance resolution pain sounds like exactly the thing I was experiencing with ring instances on <code>tensor_algebra</code> (see the algebra.semiring_to_ring thread)</p>



<a name="216004353"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/263328-triage/topic/PR%20%234273%3A%20feat%28data/set/intervals/with_bot_top%29%3A%20lemmas%20a.../near/216004353" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/263328-triage/topic/PR.20.234273.3A.20feat(data.2Fset.2Fintervals.2Fwith_bot_top).3A.20lemmas.20a.2E.2E.2E.html#216004353">(Nov 08 2020 at 12:08)</a>:</h4>
<p><code>with_bot</code> and <code>with_top</code> were defined as <code>option</code> and were probably the default reducibility setting which I think is <code>semireducible</code>. This enables people to abuse type equality (e.g. using <code>option.some</code>) which can cause problems later on (e.g. <code>option</code> leaking out). The idea is that if you make everything <code>irreducible</code> then people are forced to write more type correct code.</p>



<a name="216017724"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/263328-triage/topic/PR%20%234273%3A%20feat%28data/set/intervals/with_bot_top%29%3A%20lemmas%20a.../near/216017724" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/263328-triage/topic/PR.20.234273.3A.20feat(data.2Fset.2Fintervals.2Fwith_bot_top).3A.20lemmas.20a.2E.2E.2E.html#216017724">(Nov 08 2020 at 17:59)</a>:</h4>
<p>I have a deadline today. I'll look into this tomorrow. BTW, you don't need <code>local attribute [irreducible]</code> at the bottom. Lean forgets about <code>local attribute [semireducible]</code> once it leaves the current section/namespace/file anyway.</p>



<a name="216018189"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/263328-triage/topic/PR%20%234273%3A%20feat%28data/set/intervals/with_bot_top%29%3A%20lemmas%20a.../near/216018189" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/263328-triage/topic/PR.20.234273.3A.20feat(data.2Fset.2Fintervals.2Fwith_bot_top).3A.20lemmas.20a.2E.2E.2E.html#216018189">(Nov 08 2020 at 18:10)</a>:</h4>
<p>Oh of course! <code>local</code> :-)</p>



<a name="216018195"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/263328-triage/topic/PR%20%234273%3A%20feat%28data/set/intervals/with_bot_top%29%3A%20lemmas%20a.../near/216018195" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/263328-triage/topic/PR.20.234273.3A.20feat(data.2Fset.2Fintervals.2Fwith_bot_top).3A.20lemmas.20a.2E.2E.2E.html#216018195">(Nov 08 2020 at 18:10)</a>:</h4>
<p>No hurry.</p>



<a name="216944700"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/263328-triage/topic/PR%20%234273%3A%20feat%28data/set/intervals/with_bot_top%29%3A%20lemmas%20a.../near/216944700" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/263328-triage/topic/PR.20.234273.3A.20feat(data.2Fset.2Fintervals.2Fwith_bot_top).3A.20lemmas.20a.2E.2E.2E.html#216944700">(Nov 16 2020 at 22:58)</a>:</h4>
<p><span class="user-mention silent" data-user-id="214703">Yury G. Kudryashov</span> <a href="#narrow/stream/263328-triage/topic/PR.20.234273.3A.20feat(data.2Fset.2Fintervals.2Fwith_bot_top).3A.20lemmas.20a.2E.2E.2E/near/215971718">said</a>:</p>
<blockquote>
<p>E.g., sometimes Lean can't unify two <code>has_add</code> instances on <code>with_bot</code>, one coming from <code>has_add α</code>, and another coming from <code>add_monoid α</code> via <code>add_monoid (with_bot α)</code>.</p>
</blockquote>
<p><span class="user-mention" data-user-id="214703">@Yury G. Kudryashov</span> I have now experienced this first hand with <code>data.polynomial.degree.basic</code>. The instances are defeq but things like <code>rw</code> would fail anyway. I changed some <code>rw</code> to <code>erw</code>, added some <code>refl</code>s etc and got the file compiling; see <a href="https://github.com/leanprover-community/mathlib/commit/8b8c6715be4596c343b8869cbb705f370984b339">this commit</a> (sorry about the instance on line 509, I was debugging and forgot to remove it). Are you suggesting that I should not persevere with this approach? Do you understand why these defeq instances can't be unified by <code>rw</code>?</p>



<a name="216945635"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/263328-triage/topic/PR%20%234273%3A%20feat%28data/set/intervals/with_bot_top%29%3A%20lemmas%20a.../near/216945635" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/263328-triage/topic/PR.20.234273.3A.20feat(data.2Fset.2Fintervals.2Fwith_bot_top).3A.20lemmas.20a.2E.2E.2E.html#216945635">(Nov 16 2020 at 23:07)</a>:</h4>
<p>The next file is <code>data.polynomial.degree.trailing_degree</code> which uses <code>some : ℕ → with_top ℕ</code>. I am a bit confused about what you want here. I had assumed we would make <code>with_top.some</code> but you didn't put it there. Do you have other plans? We have <code>with_top.some_eq_coe</code> and this is now "ill-typed" because it's <code>option.some</code>.</p>



<a name="216967704"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/263328-triage/topic/PR%20%234273%3A%20feat%28data/set/intervals/with_bot_top%29%3A%20lemmas%20a.../near/216967704" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/263328-triage/topic/PR.20.234273.3A.20feat(data.2Fset.2Fintervals.2Fwith_bot_top).3A.20lemmas.20a.2E.2E.2E.html#216967704">(Nov 17 2020 at 05:22)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> the file <code>trailing_degree</code> is one that I produced: I copied the <code>degree</code> file and did little more than <code>sed</code> to make the statements and proofs work.  In particular, I do not know how to work with <code>options</code>: let me know if I can help, but I am not understanding much of this thread...</p>



<a name="216974008"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/263328-triage/topic/PR%20%234273%3A%20feat%28data/set/intervals/with_bot_top%29%3A%20lemmas%20a.../near/216974008" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/263328-triage/topic/PR.20.234273.3A.20feat(data.2Fset.2Fintervals.2Fwith_bot_top).3A.20lemmas.20a.2E.2E.2E.html#216974008">(Nov 17 2020 at 07:49)</a>:</h4>
<p>Don't worry Damiano, this isn't your problem. It's all about a redesign of <code>with,_bot</code> so it breaks a bunch of code and the question is how best to fix it, it's a design decision.</p>



<a name="225164645"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/263328-triage/topic/PR%20%234273%3A%20feat%28data/set/intervals/with_bot_top%29%3A%20lemmas%20a.../near/225164645" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Random Issue Bot <a href="https://leanprover-community.github.io/archive/stream/263328-triage/topic/PR.20.234273.3A.20feat(data.2Fset.2Fintervals.2Fwith_bot_top).3A.20lemmas.20a.2E.2E.2E.html#225164645">(Feb 04 2021 at 14:19)</a>:</h4>
<p>Today I chose PR 4273 for discussion!</p>
<p><strong><a href="https://github.com/leanprover-community/mathlib/issues/4273">feat(data/set/intervals/with_bot_top): lemmas about <code>I??</code> and <code>with_top/bot</code></a></strong><br>
Created by <span class="user-mention" data-user-id="214703">@Yury G. Kudryashov</span> (@urkud) on 2020-09-26<br>
Labels: awaiting-author, merge-conflict</p>
<p>Is this PR still relevant? Any recent updates? Anyone making progress?</p>



<a name="235075458"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/263328-triage/topic/PR%20%234273%3A%20feat%28data/set/intervals/with_bot_top%29%3A%20lemmas%20a.../near/235075458" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Random Issue Bot <a href="https://leanprover-community.github.io/archive/stream/263328-triage/topic/PR.20.234273.3A.20feat(data.2Fset.2Fintervals.2Fwith_bot_top).3A.20lemmas.20a.2E.2E.2E.html#235075458">(Apr 18 2021 at 14:22)</a>:</h4>
<p>Today I chose PR 4273 for discussion!</p>
<p><strong><a href="https://github.com/leanprover-community/mathlib/issues/4273">feat(data/set/intervals/with_bot_top): lemmas about <code>I??</code> and <code>with_top/bot</code></a></strong><br>
Created by <span class="user-mention" data-user-id="214703">@Yury G. Kudryashov</span> (@urkud) on 2020-09-26<br>
Labels: awaiting-author, merge-conflict</p>
<p>Is this PR still relevant? Any recent updates? Anyone making progress?</p>



<a name="262594290"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/263328-triage/topic/PR%20%234273%3A%20feat%28data/set/intervals/with_bot_top%29%3A%20lemmas%20a.../near/262594290" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Random Issue Bot <a href="https://leanprover-community.github.io/archive/stream/263328-triage/topic/PR.20.234273.3A.20feat(data.2Fset.2Fintervals.2Fwith_bot_top).3A.20lemmas.20a.2E.2E.2E.html#262594290">(Nov 24 2021 at 14:19)</a>:</h4>
<p>Today I chose PR 4273 for discussion!</p>
<p><strong><a href="https://github.com/leanprover-community/mathlib/issues/4273">feat(data/set/intervals/with_bot_top): lemmas about <code>I??</code> and <code>with_top/bot</code></a></strong><br>
Created by <span class="user-mention" data-user-id="214703">@Yury G. Kudryashov</span> (@urkud) on 2020-09-26<br>
Labels: awaiting-author</p>
<p>Is this PR still relevant? Any recent updates? Anyone making progress?</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>