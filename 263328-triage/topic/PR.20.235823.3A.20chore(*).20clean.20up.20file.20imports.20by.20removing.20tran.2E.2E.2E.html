---
layout: archive
title: Zulip Chat Archive
permalink: /stream/263328-triage/topic/PR.20.235823.3A.20chore(*).20clean.20up.20file.20imports.20by.20removing.20tran.2E.2E.2E.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/263328-triage/index.html">triage</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/263328-triage/topic/PR.20.235823.3A.20chore(*).20clean.20up.20file.20imports.20by.20removing.20tran.2E.2E.2E.html">PR #5823: chore(*) clean up file imports by removing tran...</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="225021621"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/263328-triage/topic/PR%20%235823%3A%20chore%28%2A%29%20clean%20up%20file%20imports%20by%20removing%20tran.../near/225021621" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Random Issue Bot <a href="https://leanprover-community.github.io/archive/stream/263328-triage/topic/PR.20.235823.3A.20chore(*).20clean.20up.20file.20imports.20by.20removing.20tran.2E.2E.2E.html#225021621">(Feb 03 2021 at 14:22)</a>:</h4>
<p>Today I chose PR 5823 for discussion!</p>
<p><strong><a href="https://github.com/leanprover-community/mathlib/issues/5823">chore(*) clean up file imports by removing transitively included files</a></strong><br>
Created by @<strong>Alex J Best</strong> (@alexjbest) on 2021-01-21<br>
Labels: RFC, merge-conflict, question</p>
<p>Is this PR still relevant? Any recent updates? Anyone making progress?</p>



<a name="232276261"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/263328-triage/topic/PR%20%235823%3A%20chore%28%2A%29%20clean%20up%20file%20imports%20by%20removing%20tran.../near/232276261" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Random Issue Bot <a href="https://leanprover-community.github.io/archive/stream/263328-triage/topic/PR.20.235823.3A.20chore(*).20clean.20up.20file.20imports.20by.20removing.20tran.2E.2E.2E.html#232276261">(Mar 29 2021 at 14:24)</a>:</h4>
<p>Today I chose PR 5823 for discussion!</p>
<p><strong><a href="https://github.com/leanprover-community/mathlib/issues/5823">chore(*) clean up file imports by removing transitively included files</a></strong><br>
Created by @<strong>Alex J Best</strong> (@alexjbest) on 2021-01-21<br>
Labels: RFC, merge-conflict, question</p>
<p>Is this PR still relevant? Any recent updates? Anyone making progress?</p>



<a name="232329342"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/263328-triage/topic/PR%20%235823%3A%20chore%28%2A%29%20clean%20up%20file%20imports%20by%20removing%20tran.../near/232329342" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/263328-triage/topic/PR.20.235823.3A.20chore(*).20clean.20up.20file.20imports.20by.20removing.20tran.2E.2E.2E.html#232329342">(Mar 29 2021 at 20:18)</a>:</h4>
<p>My understanding is that some people think this is a bad idea for some reason?</p>



<a name="232334009"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/263328-triage/topic/PR%20%235823%3A%20chore%28%2A%29%20clean%20up%20file%20imports%20by%20removing%20tran.../near/232334009" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/263328-triage/topic/PR.20.235823.3A.20chore(*).20clean.20up.20file.20imports.20by.20removing.20tran.2E.2E.2E.html#232334009">(Mar 29 2021 at 20:52)</a>:</h4>
<p>Yes, I am one of those people</p>



<a name="232334292"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/263328-triage/topic/PR%20%235823%3A%20chore%28%2A%29%20clean%20up%20file%20imports%20by%20removing%20tran.../near/232334292" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/263328-triage/topic/PR.20.235823.3A.20chore(*).20clean.20up.20file.20imports.20by.20removing.20tran.2E.2E.2E.html#232334292">(Mar 29 2021 at 20:54)</a>:</h4>
<p>I'd argue you want the reverse, where every lemma you rely upon has its module directly imported; but that's much harder to write a linter for.</p>
<p>This is somewhat relevant, which explains a similar opinion, but applied to C and C++: <a href="https://github.com/include-what-you-use/include-what-you-use/blob/master/docs/WhyIWYU.md">https://github.com/include-what-you-use/include-what-you-use/blob/master/docs/WhyIWYU.md</a></p>



<a name="232350614"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/263328-triage/topic/PR%20%235823%3A%20chore%28%2A%29%20clean%20up%20file%20imports%20by%20removing%20tran.../near/232350614" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/263328-triage/topic/PR.20.235823.3A.20chore(*).20clean.20up.20file.20imports.20by.20removing.20tran.2E.2E.2E.html#232350614">(Mar 29 2021 at 23:21)</a>:</h4>
<p>I think I've mostly come round (to the position that it is not a sufficiently good idea to do much of it). </p>
<p>I think there is a counter-argument, however. </p>
<p>I think it is very valuable to split up files in order to reduce dependencies -- that is, if 90% of a file only needs <code>import a</code>, then rather than adding <code>import b</code> for the last 10%, you should just move that 10% to a new file. Typically, this results in naturally segmenting files based on their mathematical content. And in any case, I think we have far too many large files. :-)</p>
<p>So I will very happily endorse this sort of import refactoring!</p>
<p>Currently the best way to do this sort of refactoring is to go through the imports one by one, deleting them, and seeing if some well-delineated sub-chunk of the file stops compiling. If everything complains, of course that import is essential. However, if we went in the reverse direction, of positively including transitive dependencies, then if becomes harder to do this analysis, just because there are more import lines to analyse, most of them giving you no information.</p>
<p>I've at times done this sort of analysis -- every so often I'll stare at the dependency graph and ask "why on earth do we need to know about matrices before we can define adjunctions?" and then try to clean it up. I find it strangely soothing. :-)</p>



<a name="232410442"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/263328-triage/topic/PR%20%235823%3A%20chore%28%2A%29%20clean%20up%20file%20imports%20by%20removing%20tran.../near/232410442" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob Scholbach <a href="https://leanprover-community.github.io/archive/stream/263328-triage/topic/PR.20.235823.3A.20chore(*).20clean.20up.20file.20imports.20by.20removing.20tran.2E.2E.2E.html#232410442">(Mar 30 2021 at 11:34)</a>:</h4>
<p>Is it possible / sensible to have a structure that uses some imports only for specific sections in a file? I have a feeling a practical downside of having separate files depending on which imports one needs would be that it becomes less easy to navigate while editing.</p>



<a name="232410638"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/263328-triage/topic/PR%20%235823%3A%20chore%28%2A%29%20clean%20up%20file%20imports%20by%20removing%20tran.../near/232410638" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/263328-triage/topic/PR.20.235823.3A.20chore(*).20clean.20up.20file.20imports.20by.20removing.20tran.2E.2E.2E.html#232410638">(Mar 30 2021 at 11:36)</a>:</h4>
<p>the CS people really don't like that idea</p>



<a name="233496824"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/263328-triage/topic/PR%20%235823%3A%20chore%28%2A%29%20clean%20up%20file%20imports%20by%20removing%20tran.../near/233496824" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Random Issue Bot <a href="https://leanprover-community.github.io/archive/stream/263328-triage/topic/PR.20.235823.3A.20chore(*).20clean.20up.20file.20imports.20by.20removing.20tran.2E.2E.2E.html#233496824">(Apr 07 2021 at 14:25)</a>:</h4>
<p>Today I chose PR 5823 for discussion!</p>
<p><strong><a href="https://github.com/leanprover-community/mathlib/issues/5823">chore(*) clean up file imports by removing transitively included files</a></strong><br>
Created by @<strong>Alex J Best</strong> (@alexjbest) on 2021-01-21<br>
Labels: RFC, merge-conflict, question</p>
<p>Is this PR still relevant? Any recent updates? Anyone making progress?</p>



<a name="235686989"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/263328-triage/topic/PR%20%235823%3A%20chore%28%2A%29%20clean%20up%20file%20imports%20by%20removing%20tran.../near/235686989" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Random Issue Bot <a href="https://leanprover-community.github.io/archive/stream/263328-triage/topic/PR.20.235823.3A.20chore(*).20clean.20up.20file.20imports.20by.20removing.20tran.2E.2E.2E.html#235686989">(Apr 22 2021 at 14:24)</a>:</h4>
<p>Today I chose PR 5823 for discussion!</p>
<p><strong><a href="https://github.com/leanprover-community/mathlib/issues/5823">chore(*) clean up file imports by removing transitively included files</a></strong><br>
Created by @<strong>Alex J Best</strong> (@alexjbest) on 2021-01-21<br>
Labels: RFC, merge-conflict, question</p>
<p>Is this PR still relevant? Any recent updates? Anyone making progress?</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>