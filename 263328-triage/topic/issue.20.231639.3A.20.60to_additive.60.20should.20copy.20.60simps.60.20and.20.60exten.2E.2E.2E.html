---
layout: archive
title: Zulip Chat Archive
permalink: /stream/263328-triage/topic/issue.20.231639.3A.20.60to_additive.60.20should.20copy.20.60simps.60.20and.20.60exten.2E.2E.2E.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/263328-triage/index.html">triage</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/263328-triage/topic/issue.20.231639.3A.20.60to_additive.60.20should.20copy.20.60simps.60.20and.20.60exten.2E.2E.2E.html">issue #1639: `to_additive` should copy `simps` and `exten...</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="229856354"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/263328-triage/topic/issue%20%231639%3A%20%60to_additive%60%20should%20copy%20%60simps%60%20and%20%60exten.../near/229856354" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Random Issue Bot <a href="https://leanprover-community.github.io/archive/stream/263328-triage/topic/issue.20.231639.3A.20.60to_additive.60.20should.20copy.20.60simps.60.20and.20.60exten.2E.2E.2E.html#229856354">(Mar 11 2021 at 14:26)</a>:</h4>
<p>Today I chose issue 1639 for discussion!</p>
<p><strong><a href="https://github.com/leanprover-community/mathlib/issues/1639"><code>to_additive</code> should copy <code>simps</code> and <code>extensionality</code></a></strong><br>
Created by <span class="user-mention" data-user-id="110087">@Scott Morrison</span> (@semorrison) on 2019-10-31<br>
Labels: feature-request, meta</p>
<p>Is this issue still relevant? Any recent updates? Anyone making progress?</p>



<a name="260662301"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/263328-triage/topic/issue%20%231639%3A%20%60to_additive%60%20should%20copy%20%60simps%60%20and%20%60exten.../near/260662301" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Random Issue Bot <a href="https://leanprover-community.github.io/archive/stream/263328-triage/topic/issue.20.231639.3A.20.60to_additive.60.20should.20copy.20.60simps.60.20and.20.60exten.2E.2E.2E.html#260662301">(Nov 08 2021 at 14:19)</a>:</h4>
<p>Today I chose issue 1639 for discussion!</p>
<p><strong><a href="https://github.com/leanprover-community/mathlib/issues/1639"><code>to_additive</code> should copy <code>simps</code> and <code>extensionality</code></a></strong><br>
Created by <span class="user-mention" data-user-id="110087">@Scott Morrison</span> (@semorrison) on 2019-10-31<br>
Labels: meta, feature-request</p>
<p>Is this issue still relevant? Any recent updates? Anyone making progress?</p>



<a name="260678874"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/263328-triage/topic/issue%20%231639%3A%20%60to_additive%60%20should%20copy%20%60simps%60%20and%20%60exten.../near/260678874" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/263328-triage/topic/issue.20.231639.3A.20.60to_additive.60.20should.20copy.20.60simps.60.20and.20.60exten.2E.2E.2E.html#260678874">(Nov 08 2021 at 16:11)</a>:</h4>
<p>I think this is closed by <a href="https://github.com/leanprover-community/mathlib/issues/5487">#5487</a> as <span class="user-mention" data-user-id="111080">@Floris van Doorn</span> said there, <span class="user-mention" data-user-id="110087">@Scott Morrison</span> is there anything else you can think of that <code>to_additive</code> should be able to do but can't right now?</p>



<a name="260681827"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/263328-triage/topic/issue%20%231639%3A%20%60to_additive%60%20should%20copy%20%60simps%60%20and%20%60exten.../near/260681827" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/263328-triage/topic/issue.20.231639.3A.20.60to_additive.60.20should.20copy.20.60simps.60.20and.20.60exten.2E.2E.2E.html#260681827">(Nov 08 2021 at 16:30)</a>:</h4>
<p>I tried to <code>to_additive</code>-ize <code>has_continuous_smul</code> to <code>has_continuous_vadd</code> the other day and couldn't get anything working ... but I didn't investigate why it didn't work, nor do I know whether it's supposed to be in scope.</p>



<a name="260682149"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/263328-triage/topic/issue%20%231639%3A%20%60to_additive%60%20should%20copy%20%60simps%60%20and%20%60exten.../near/260682149" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/263328-triage/topic/issue.20.231639.3A.20.60to_additive.60.20should.20copy.20.60simps.60.20and.20.60exten.2E.2E.2E.html#260682149">(Nov 08 2021 at 16:32)</a>:</h4>
<p>The definition of the class won't work as its a structure I think, but any subsequent lemmas should work.</p>



<a name="260682224"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/263328-triage/topic/issue%20%231639%3A%20%60to_additive%60%20should%20copy%20%60simps%60%20and%20%60exten.../near/260682224" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/263328-triage/topic/issue.20.231639.3A.20.60to_additive.60.20should.20copy.20.60simps.60.20and.20.60exten.2E.2E.2E.html#260682224">(Nov 08 2021 at 16:33)</a>:</h4>
<p>In order to generate structures properly in a nice way I think lean core has to be modified to expose some more functions to tactics.</p>



<a name="260682261"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/263328-triage/topic/issue%20%231639%3A%20%60to_additive%60%20should%20copy%20%60simps%60%20and%20%60exten.../near/260682261" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/263328-triage/topic/issue.20.231639.3A.20.60to_additive.60.20should.20copy.20.60simps.60.20and.20.60exten.2E.2E.2E.html#260682261">(Nov 08 2021 at 16:33)</a>:</h4>
<p>I did try it that way, and I believe it still failed.  Let me try to reconstruct.</p>



<a name="260682838"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/263328-triage/topic/issue%20%231639%3A%20%60to_additive%60%20should%20copy%20%60simps%60%20and%20%60exten.../near/260682838" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/263328-triage/topic/issue.20.231639.3A.20.60to_additive.60.20should.20copy.20.60simps.60.20and.20.60exten.2E.2E.2E.html#260682838">(Nov 08 2021 at 16:37)</a>:</h4>
<div class="codehilite" data-code-language="Text only"><pre><span></span><code>@[to_additive] failed. Type mismatch in additive declaration.
For help, see the docstring of `to_additive.attr`, section `Troubleshooting`.
Failed to add declaration
&lt;theorem filter.tendsto.vadd : ‚àÄ {M : Type u_1} {Œ± : Type u_2} {Œ≤ : Type u_3} [_inst_1 : topological_space M]
[_inst_2 : topological_space Œ±] [_inst_3 : has_vadd M Œ±] [_inst_4 : has_continuous_smul M Œ±] {f : Œ≤ ‚Üí M}
{g : Œ≤ ‚Üí Œ±} {l : filter Œ≤} {c : M} {a : Œ±},
  tendsto f l (ùìù c) ‚Üí tendsto g l (ùìù a) ‚Üí tendsto (Œª (x : Œ≤), f x +·µ• g x) l (ùìù (c +·µ• a)) := Œª
{M : Type u_1} {Œ± : Type u_2} {Œ≤ : Type u_3} [_inst_1 : topological_space M] [_inst_2 : topological_space Œ±]
[_inst_3 : has_vadd M Œ±] [_inst_4 : has_continuous_smul M Œ±] {f : Œ≤ ‚Üí M} {g : Œ≤ ‚Üí Œ±} {l : filter Œ≤} {c : M}
{a : Œ±} (hf : tendsto f l (ùìù c)) (hg : tendsto g l (ùìù a)),
  (continuous_smul.tendsto (c, a)).comp (hf.prod_mk_nhds hg)&gt;

Nested error message:

type mismatch at application
  @has_continuous_smul M Œ± _inst_3
term
  _inst_3
has type
  has_vadd M Œ±
but is expected to have type
  has_scalar M Œ±
</code></pre></div>



<a name="260682972"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/263328-triage/topic/issue%20%231639%3A%20%60to_additive%60%20should%20copy%20%60simps%60%20and%20%60exten.../near/260682972" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/263328-triage/topic/issue.20.231639.3A.20.60to_additive.60.20should.20copy.20.60simps.60.20and.20.60exten.2E.2E.2E.html#260682972">(Nov 08 2021 at 16:38)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib/tree/has_continuous_vadd">branch#has_continuous_vadd</a></p>



<a name="260683005"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/263328-triage/topic/issue%20%231639%3A%20%60to_additive%60%20should%20copy%20%60simps%60%20and%20%60exten.../near/260683005" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/263328-triage/topic/issue.20.231639.3A.20.60to_additive.60.20should.20copy.20.60simps.60.20and.20.60exten.2E.2E.2E.html#260683005">(Nov 08 2021 at 16:39)</a>:</h4>
<p>Let me know if I'm doing it wrong!</p>



<a name="260683836"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/263328-triage/topic/issue%20%231639%3A%20%60to_additive%60%20should%20copy%20%60simps%60%20and%20%60exten.../near/260683836" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/263328-triage/topic/issue.20.231639.3A.20.60to_additive.60.20should.20copy.20.60simps.60.20and.20.60exten.2E.2E.2E.html#260683836">(Nov 08 2021 at 16:44)</a>:</h4>
<p>Ah  the problem is that <code>to_additive</code> doesn't know its meant to turn <code>has_continuous_smul</code> into <code>has_continuous_vadd</code>, if you add <code>attribute [to_additive has_continuous_vadd] has_continuous_smul</code> after you've manually defined has_continuous_vadd, I believe the filter lemma below will to_additive properly</p>



<a name="260687662"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/263328-triage/topic/issue%20%231639%3A%20%60to_additive%60%20should%20copy%20%60simps%60%20and%20%60exten.../near/260687662" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/263328-triage/topic/issue.20.231639.3A.20.60to_additive.60.20should.20copy.20.60simps.60.20and.20.60exten.2E.2E.2E.html#260687662">(Nov 08 2021 at 17:12)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib/issues/10227">#10227</a></p>
<p>Thanks <span class="user-mention" data-user-id="127136">@Alex J. Best</span>!</p>



<a name="260695187"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/263328-triage/topic/issue%20%231639%3A%20%60to_additive%60%20should%20copy%20%60simps%60%20and%20%60exten.../near/260695187" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="https://leanprover-community.github.io/archive/stream/263328-triage/topic/issue.20.231639.3A.20.60to_additive.60.20should.20copy.20.60simps.60.20and.20.60exten.2E.2E.2E.html#260695187">(Nov 08 2021 at 18:01)</a>:</h4>
<p>Yes, this issue is resolved, I closed it.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>