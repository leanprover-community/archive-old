[
    {
        "content": "<p>This mwe was working on nightly-2021-08-18<br>\nThe last line fails since nightly-2021-08-21<br>\nI could not simplify that example further, it still looks a bit convoluted...</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kd\">class</span> <span class=\"n\">L0</span>  <span class=\"n\">where</span> <span class=\"n\">f</span> <span class=\"o\">:</span> <span class=\"kt\">Type</span> <span class=\"n\">_</span>\n<span class=\"kd\">class</span> <span class=\"n\">A0</span>  <span class=\"n\">where</span> <span class=\"n\">a</span> <span class=\"o\">:</span> <span class=\"kt\">Type</span> <span class=\"n\">_</span>\n<span class=\"kd\">class</span> <span class=\"n\">B0</span>  <span class=\"n\">where</span> <span class=\"n\">b</span> <span class=\"o\">:</span> <span class=\"kt\">Type</span> <span class=\"n\">_</span>\n<span class=\"kd\">inductive</span> <span class=\"n\">F</span> <span class=\"o\">[</span><span class=\"n\">A0</span><span class=\"o\">]</span> <span class=\"o\">[</span><span class=\"n\">B0</span><span class=\"o\">]</span> <span class=\"n\">where</span>\n  <span class=\"bp\">|</span> <span class=\"n\">a</span> <span class=\"o\">(</span><span class=\"n\">_</span> <span class=\"o\">:</span> <span class=\"n\">A0.a</span><span class=\"o\">)</span>\n  <span class=\"bp\">|</span> <span class=\"n\">b</span> <span class=\"o\">(</span><span class=\"n\">_</span> <span class=\"o\">:</span> <span class=\"n\">B0.b</span><span class=\"o\">)</span>\n<span class=\"kd\">instance</span> <span class=\"o\">[</span><span class=\"n\">A0</span><span class=\"o\">]</span> <span class=\"o\">[</span><span class=\"n\">B0</span><span class=\"o\">]</span> <span class=\"o\">:</span> <span class=\"n\">L0</span> <span class=\"n\">where</span> <span class=\"n\">f</span> <span class=\"o\">:=</span> <span class=\"n\">F</span>\n<span class=\"kd\">class</span> <span class=\"n\">A1</span>\n<span class=\"kd\">instance</span> <span class=\"o\">[</span><span class=\"n\">A1</span><span class=\"o\">]</span> <span class=\"o\">:</span> <span class=\"n\">A0</span> <span class=\"n\">where</span> <span class=\"n\">a</span> <span class=\"o\">:=</span> <span class=\"n\">Nat</span>\n<span class=\"kd\">class</span> <span class=\"n\">L1</span> <span class=\"kd\">extends</span> <span class=\"n\">A1</span><span class=\"o\">,</span> <span class=\"n\">B0</span>\n<span class=\"kd\">class</span> <span class=\"n\">C0</span> <span class=\"o\">[</span><span class=\"n\">L0</span><span class=\"o\">]</span>\n<span class=\"c1\">-- instance [L1] : L0 := inferInstance</span>\n<span class=\"kd\">instance</span> <span class=\"o\">[</span><span class=\"n\">L1</span><span class=\"o\">]</span> <span class=\"o\">:</span> <span class=\"n\">C0</span> <span class=\"o\">:=</span> <span class=\"o\">⟨⟩</span>\n</code></pre></div>\n<p>Somehow, uncommenting the penultimate line helps lean, but I think it shouldn't be necessary</p>",
        "id": 250387321,
        "sender_full_name": "Michael Jam",
        "timestamp": 1629741290
    },
    {
        "content": "<p>Thanks for finding this issue. Pushed a fix for it.</p>",
        "id": 250430038,
        "sender_full_name": "Leonardo de Moura",
        "timestamp": 1629765363
    },
    {
        "content": "<blockquote>\n<p>How can I install a specific lean commit with elan?</p>\n</blockquote>\n<p>I use the following setup.<br>\nI have a toolchain for my <code>stage1</code> build directory.</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">leodemoura</span><span class=\"bp\">/</span><span class=\"n\">projects</span><span class=\"bp\">/</span><span class=\"n\">lean4</span><span class=\"bp\">/</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">release</span><span class=\"bp\">/</span><span class=\"n\">stage1</span>\n</code></pre></div>\n<p>I use <code>elan override</code> to set this toolchain in my <code>tests</code> directory.</p>",
        "id": 250430809,
        "sender_full_name": "Leonardo de Moura",
        "timestamp": 1629766135
    }
]