[
    {
        "content": "<p>I tried using docgen4 on my project with <code>\\my\\path\\to\\docgen-4 / Itertools</code>. But this is what i get when I run the server:<br>\n<a href=\"/user_uploads/3121/KWAtyMV1zpCTh8O3a2SVCnpK/image.png\">image.png</a> <a href=\"/user_uploads/3121/h7SFkj8fdo26w-dpgvsqIcP6/image.png\">image.png</a> <br>\nI tried again by specifying the directory (Itertools) where all my documentated functions are: <code>\\my\\path\\to\\docgen-4 /Itertools Itertools</code>, but i get the same thing</p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/KWAtyMV1zpCTh8O3a2SVCnpK/image.png\" title=\"image.png\"><img src=\"/user_uploads/3121/KWAtyMV1zpCTh8O3a2SVCnpK/image.png\"></a></div><div class=\"message_inline_image\"><a href=\"/user_uploads/3121/h7SFkj8fdo26w-dpgvsqIcP6/image.png\" title=\"image.png\"><img src=\"/user_uploads/3121/h7SFkj8fdo26w-dpgvsqIcP6/image.png\"></a></div>",
        "id": 272526753,
        "sender_full_name": "Joseph O",
        "timestamp": 1645287005
    },
    {
        "content": "<p>By the way, here was my build output:</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"n\">PS</span> <span class=\"n\">C</span><span class=\"o\">:</span><span class=\"bp\">\\</span><span class=\"n\">Users</span><span class=\"bp\">\\</span><span class=\"o\">[</span><span class=\"n\">REDACTED</span><span class=\"o\">]</span><span class=\"bp\">\\</span><span class=\"n\">Desktop</span><span class=\"bp\">\\</span><span class=\"n\">programming</span><span class=\"bp\">\\</span><span class=\"n\">Itertools</span><span class=\"bp\">&gt;</span> <span class=\"n\">C</span><span class=\"o\">:</span><span class=\"bp\">\\</span><span class=\"n\">clones</span><span class=\"bp\">\\</span><span class=\"n\">doc</span><span class=\"bp\">-</span><span class=\"n\">gen4</span><span class=\"bp\">\\</span><span class=\"n\">build</span><span class=\"bp\">\\</span><span class=\"n\">bin</span><span class=\"bp\">\\</span><span class=\"n\">doc</span><span class=\"bp\">-</span><span class=\"n\">gen4.exe</span> <span class=\"bp\">/</span><span class=\"n\">Itertools.lean</span> <span class=\"n\">Itertools</span>\n<span class=\"n\">Loading</span> <span class=\"n\">modules</span> <span class=\"k\">from</span><span class=\"o\">:</span> <span class=\"o\">[</span><span class=\"n\">c</span><span class=\"o\">:</span><span class=\"bp\">\\</span><span class=\"n\">users</span><span class=\"bp\">\\</span><span class=\"n\">vatis</span><span class=\"bp\">\\</span><span class=\"n\">desktop</span><span class=\"bp\">\\</span><span class=\"n\">programming</span><span class=\"bp\">\\</span><span class=\"n\">itertools</span><span class=\"bp\">\\</span><span class=\"n\">build</span><span class=\"bp\">\\</span><span class=\"n\">lib</span><span class=\"o\">]</span>\n<span class=\"n\">Processing</span> <span class=\"n\">modules</span>\n<span class=\"n\">WARNING</span><span class=\"o\">:</span> <span class=\"n\">Failed</span> <span class=\"n\">to</span> <span class=\"n\">calculate</span> <span class=\"n\">equational</span> <span class=\"n\">lemmata</span> <span class=\"n\">for</span> <span class=\"n\">Lean.expandExplicitBindersAux.loop</span><span class=\"o\">:</span> <span class=\"n\">tactic</span> <span class=\"bp\">'</span><span class=\"n\">simp'</span> <span class=\"n\">failed</span><span class=\"o\">,</span> <span class=\"n\">nested</span> <span class=\"n\">error</span><span class=\"o\">:</span>\n<span class=\"o\">(</span><span class=\"n\">deterministic</span><span class=\"o\">)</span> <span class=\"n\">timeout</span> <span class=\"n\">at</span> <span class=\"bp\">'</span><span class=\"n\">simp'</span><span class=\"o\">,</span> <span class=\"n\">maximum</span> <span class=\"n\">number</span> <span class=\"n\">of</span> <span class=\"n\">heartbeats</span> <span class=\"o\">(</span><span class=\"mi\">5000</span><span class=\"o\">)</span> <span class=\"n\">has</span> <span class=\"n\">been</span> <span class=\"n\">reached</span> <span class=\"o\">(</span><span class=\"n\">use</span> <span class=\"bp\">'</span><span class=\"kd\">set_option</span> <span class=\"n\">maxHeartbeats</span> <span class=\"bp\">&lt;</span><span class=\"n\">num</span><span class=\"bp\">&gt;'</span> <span class=\"n\">to</span> <span class=\"n\">set</span> <span class=\"n\">the</span> <span class=\"n\">limit</span><span class=\"o\">)</span>\n<span class=\"n\">Outputting</span> <span class=\"n\">HTML</span>\n<span class=\"n\">uncaught</span> <span class=\"n\">exception</span><span class=\"o\">:</span> <span class=\"n\">invalid</span> <span class=\"n\">argument</span> <span class=\"o\">(</span><span class=\"n\">error</span> <span class=\"n\">code</span><span class=\"o\">:</span> <span class=\"mi\">22</span><span class=\"o\">,</span> <span class=\"n\">invalid</span> <span class=\"n\">argument</span><span class=\"o\">)</span>\n  <span class=\"n\">file</span><span class=\"o\">:</span> <span class=\"bp\">./</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">doc</span><span class=\"bp\">/\\</span><span class=\"n\">find</span><span class=\"bp\">\\</span><span class=\"n\">Lean.SourceInfo.getPos</span><span class=\"bp\">?</span>\n</code></pre></div>",
        "id": 272526778,
        "sender_full_name": "Joseph O",
        "timestamp": 1645287059
    },
    {
        "content": "<p>Does <code>\\path\\to\\docgen-4 /Itertools/ Itertools</code>work? (notice the trailing slash)</p>",
        "id": 272527136,
        "sender_full_name": "Xubai Wang",
        "timestamp": 1645287469
    },
    {
        "content": "<p>Are there html pages in your <code>build/doc</code> directory?</p>",
        "id": 272527218,
        "sender_full_name": "Xubai Wang",
        "timestamp": 1645287537
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"414345\">Xubai Wang</span> <a href=\"#narrow/stream/270676-lean4/topic/docgen4.20not.20working.3F/near/272527218\">said</a>:</p>\n<blockquote>\n<p>Are there html pages in your <code>build/doc</code> directory?</p>\n</blockquote>\n<p>yes</p>",
        "id": 272527445,
        "sender_full_name": "Joseph O",
        "timestamp": 1645287809
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"414345\">Xubai Wang</span> <a href=\"#narrow/stream/270676-lean4/topic/docgen4.20not.20working.3F/near/272527136\">said</a>:</p>\n<blockquote>\n<p>Does <code>\\path\\to\\docgen-4 /Itertools/ Itertools</code>work? (notice the trailing slash)</p>\n</blockquote>\n<p>its the same thing</p>",
        "id": 272527620,
        "sender_full_name": "Joseph O",
        "timestamp": 1645288013
    },
    {
        "content": "<p>Is your project somewhere so we can try this ourselves?</p>",
        "id": 272527641,
        "sender_full_name": "Henrik Böving",
        "timestamp": 1645288034
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"395550\">Henrik Böving</span> <a href=\"#narrow/stream/270676-lean4/topic/docgen4.20not.20working.3F/near/272527641\">said</a>:</p>\n<blockquote>\n<p>Is your project somewhere so we can try this ourselves?</p>\n</blockquote>\n<p><a href=\"https://github.com/crabbo-rave/lean4-Itertools\">https://github.com/crabbo-rave/lean4-Itertools</a></p>",
        "id": 272527710,
        "sender_full_name": "Joseph O",
        "timestamp": 1645288088
    },
    {
        "content": "<p>Building with <code>doc-gen4 / Itertools</code> then cd-ing into <code>build/doc</code> and running a python test server with <code>python -m http.server</code> works for me. are you sure you are building and hosting this in the right way?</p>",
        "id": 272527836,
        "sender_full_name": "Henrik Böving",
        "timestamp": 1645288256
    },
    {
        "content": "<p>I did git pull<br>\nIm going to try again</p>",
        "id": 272527943,
        "sender_full_name": "Joseph O",
        "timestamp": 1645288411
    },
    {
        "content": "<p>May be a clearer approach: <br>\nRun <code>doc-gen4 /build/doc/ Itertools</code> and <code>python3 -m http.server</code>, just in your project root without changing directory. and then visit <code>http://localhost:8000/build/doc/</code> in your browser.</p>",
        "id": 272528010,
        "sender_full_name": "Xubai Wang",
        "timestamp": 1645288469
    },
    {
        "content": "<p>Thanks I will try it out</p>",
        "id": 272528027,
        "sender_full_name": "Joseph O",
        "timestamp": 1645288504
    },
    {
        "content": "<p>I get an error</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"n\">PS</span> <span class=\"n\">C</span><span class=\"o\">:</span><span class=\"bp\">\\</span><span class=\"n\">Users</span><span class=\"bp\">\\</span><span class=\"n\">rrrrr</span><span class=\"bp\">\\</span><span class=\"n\">Desktop</span><span class=\"bp\">\\</span><span class=\"n\">programming</span><span class=\"bp\">\\</span><span class=\"n\">Itertools</span><span class=\"bp\">&gt;</span> <span class=\"n\">C</span><span class=\"o\">:</span><span class=\"bp\">\\</span><span class=\"n\">clones</span><span class=\"bp\">\\</span><span class=\"n\">doc</span><span class=\"bp\">-</span><span class=\"n\">gen4</span><span class=\"bp\">\\</span><span class=\"n\">build</span><span class=\"bp\">\\</span><span class=\"n\">bin</span><span class=\"bp\">\\</span><span class=\"n\">doc</span><span class=\"bp\">-</span><span class=\"n\">gen4.exe</span>  <span class=\"bp\">/</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">doc</span><span class=\"bp\">/</span> <span class=\"n\">Itertool</span>\n<span class=\"n\">Loading</span> <span class=\"n\">modules</span> <span class=\"k\">from</span><span class=\"o\">:</span> <span class=\"o\">[</span><span class=\"n\">c</span><span class=\"o\">:</span><span class=\"bp\">\\</span><span class=\"n\">users</span><span class=\"bp\">\\</span><span class=\"n\">vatis</span><span class=\"bp\">\\</span><span class=\"n\">desktop</span><span class=\"bp\">\\</span><span class=\"n\">programming</span><span class=\"bp\">\\</span><span class=\"n\">itertools</span><span class=\"bp\">\\</span><span class=\"n\">build</span><span class=\"bp\">\\</span><span class=\"n\">lib</span><span class=\"o\">]</span>\n<span class=\"n\">uncaught</span> <span class=\"n\">exception</span><span class=\"o\">:</span> <span class=\"n\">unknown</span> <span class=\"n\">package</span> <span class=\"bp\">'</span><span class=\"n\">Itertool'</span>\n</code></pre></div>",
        "id": 272528274,
        "sender_full_name": "Joseph O",
        "timestamp": 1645288841
    },
    {
        "content": "<p>well yes your package is called Itertool<strong>s</strong></p>",
        "id": 272528294,
        "sender_full_name": "Henrik Böving",
        "timestamp": 1645288886
    },
    {
        "content": "<p>Yes</p>",
        "id": 272528298,
        "sender_full_name": "Joseph O",
        "timestamp": 1645288895
    },
    {
        "content": "<p>So you should give doc-gen that name and not the singular form</p>",
        "id": 272528371,
        "sender_full_name": "Henrik Böving",
        "timestamp": 1645288983
    },
    {
        "content": "<p>Sorry if im being a bit annoying, but isnt that what I did?</p>",
        "id": 272528398,
        "sender_full_name": "Joseph O",
        "timestamp": 1645289027
    },
    {
        "content": "<p>You wrote <code>Itertool</code> not <code>Itertools</code>.</p>",
        "id": 272528484,
        "sender_full_name": "Henrik Böving",
        "timestamp": 1645289121
    },
    {
        "content": "<p>ah i see lol</p>",
        "id": 272528564,
        "sender_full_name": "Joseph O",
        "timestamp": 1645289207
    },
    {
        "content": "<p><a href=\"/user_uploads/3121/cRvsu5GY_c7J4vTAQkBcokl2/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/cRvsu5GY_c7J4vTAQkBcokl2/image.png\" title=\"image.png\"><img src=\"/user_uploads/3121/cRvsu5GY_c7J4vTAQkBcokl2/image.png\"></a></div>",
        "id": 272528640,
        "sender_full_name": "Joseph O",
        "timestamp": 1645289283
    },
    {
        "content": "<p>Can you provide a screen capture (or ls) of your <code>build/doc</code> dir?</p>",
        "id": 272528877,
        "sender_full_name": "Xubai Wang",
        "timestamp": 1645289610
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"414345\">Xubai Wang</span> <a href=\"#narrow/stream/270676-lean4/topic/docgen4.20not.20working.3F/near/272528877\">said</a>:</p>\n<blockquote>\n<p>Can you provide a screen capture (or ls) of your <code>build/doc</code> dir?</p>\n</blockquote>\n<p>(much longer)<br>\n<a href=\"/user_uploads/3121/95rr5IrSfpTgZn6JlKDPIydu/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/95rr5IrSfpTgZn6JlKDPIydu/image.png\" title=\"image.png\"><img src=\"/user_uploads/3121/95rr5IrSfpTgZn6JlKDPIydu/image.png\"></a></div>",
        "id": 272528965,
        "sender_full_name": "Joseph O",
        "timestamp": 1645289705
    },
    {
        "content": "<p>Emmm, so the problem is here: there are only <code>find</code> folder in your <code>build/doc</code>, but a normal one should be like this: </p>\n<p><a href=\"/user_uploads/3121/6VQrh2n0XeXFIx24rxYPZjwA/截屏2022-02-20-上午12.56.29.png\">screenshot</a> </p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/6VQrh2n0XeXFIx24rxYPZjwA/截屏2022-02-20-上午12.56.29.png\" title=\"screenshot\"><img src=\"/user_uploads/3121/6VQrh2n0XeXFIx24rxYPZjwA/截屏2022-02-20-上午12.56.29.png\"></a></div><p>Which commit of doc-gen4 do you use?</p>",
        "id": 272529219,
        "sender_full_name": "Xubai Wang",
        "timestamp": 1645289948
    },
    {
        "content": "<p>I just cloned the one from github, and recently did <code>git pull</code></p>",
        "id": 272529250,
        "sender_full_name": "Joseph O",
        "timestamp": 1645289984
    },
    {
        "content": "<p>Then try <code>lake clean</code> and doc-gen it again?</p>",
        "id": 272529356,
        "sender_full_name": "Xubai Wang",
        "timestamp": 1645290020
    },
    {
        "content": "<p>i have done that a thousand times already. everytime i build the doc</p>",
        "id": 272529516,
        "sender_full_name": "Joseph O",
        "timestamp": 1645290185
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"467926\">Joseph O</span> <a href=\"#narrow/stream/270676-lean4/topic/docgen4.20not.20working.3F/near/272526778\">said</a>:</p>\n<blockquote>\n<p>By the way, here was my build output:</p>\n<p><div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"n\">PS</span> <span class=\"n\">C</span><span class=\"o\">:</span><span class=\"bp\">\\</span><span class=\"n\">Users</span><span class=\"bp\">\\</span><span class=\"o\">[</span><span class=\"n\">REDACTED</span><span class=\"o\">]</span><span class=\"bp\">\\</span><span class=\"n\">Desktop</span><span class=\"bp\">\\</span><span class=\"n\">programming</span><span class=\"bp\">\\</span><span class=\"n\">Itertools</span><span class=\"bp\">&gt;</span> <span class=\"n\">C</span><span class=\"o\">:</span><span class=\"bp\">\\</span><span class=\"n\">clones</span><span class=\"bp\">\\</span><span class=\"n\">doc</span><span class=\"bp\">-</span><span class=\"n\">gen4</span><span class=\"bp\">\\</span><span class=\"n\">build</span><span class=\"bp\">\\</span><span class=\"n\">bin</span><span class=\"bp\">\\</span><span class=\"n\">doc</span><span class=\"bp\">-</span><span class=\"n\">gen4.exe</span> <span class=\"bp\">/</span><span class=\"n\">Itertools.lean</span> <span class=\"n\">Itertools</span>\n<span class=\"n\">Loading</span> <span class=\"n\">modules</span> <span class=\"k\">from</span><span class=\"o\">:</span> <span class=\"o\">[</span><span class=\"n\">c</span><span class=\"o\">:</span><span class=\"bp\">\\</span><span class=\"n\">users</span><span class=\"bp\">\\</span><span class=\"n\">vatis</span><span class=\"bp\">\\</span><span class=\"n\">desktop</span><span class=\"bp\">\\</span><span class=\"n\">programming</span><span class=\"bp\">\\</span><span class=\"n\">itertools</span><span class=\"bp\">\\</span><span class=\"n\">build</span><span class=\"bp\">\\</span><span class=\"n\">lib</span><span class=\"o\">]</span>\n<span class=\"n\">Processing</span> <span class=\"n\">modules</span>\n<span class=\"n\">WARNING</span><span class=\"o\">:</span> <span class=\"n\">Failed</span> <span class=\"n\">to</span> <span class=\"n\">calculate</span> <span class=\"n\">equational</span> <span class=\"n\">lemmata</span> <span class=\"n\">for</span> <span class=\"n\">Lean.expandExplicitBindersAux.loop</span><span class=\"o\">:</span> <span class=\"n\">tactic</span> <span class=\"bp\">'</span><span class=\"n\">simp'</span> <span class=\"n\">failed</span><span class=\"o\">,</span> <span class=\"n\">nested</span> <span class=\"n\">error</span><span class=\"o\">:</span>\n<span class=\"o\">(</span><span class=\"n\">deterministic</span><span class=\"o\">)</span> <span class=\"n\">timeout</span> <span class=\"n\">at</span> <span class=\"bp\">'</span><span class=\"n\">simp'</span><span class=\"o\">,</span> <span class=\"n\">maximum</span> <span class=\"n\">number</span> <span class=\"n\">of</span> <span class=\"n\">heartbeats</span> <span class=\"o\">(</span><span class=\"mi\">5000</span><span class=\"o\">)</span> <span class=\"n\">has</span> <span class=\"n\">been</span> <span class=\"n\">reached</span> <span class=\"o\">(</span><span class=\"n\">use</span> <span class=\"bp\">'</span><span class=\"kd\">set_option</span> <span class=\"n\">maxHeartbeats</span> <span class=\"bp\">&lt;</span><span class=\"n\">num</span><span class=\"bp\">&gt;'</span> <span class=\"n\">to</span> <span class=\"n\">set</span> <span class=\"n\">the</span> <span class=\"n\">limit</span><span class=\"o\">)</span>\n<span class=\"n\">Outputting</span> <span class=\"n\">HTML</span>\n<span class=\"n\">uncaught</span> <span class=\"n\">exception</span><span class=\"o\">:</span> <span class=\"n\">invalid</span> <span class=\"n\">argument</span> <span class=\"o\">(</span><span class=\"n\">error</span> <span class=\"n\">code</span><span class=\"o\">:</span> <span class=\"mi\">22</span><span class=\"o\">,</span> <span class=\"n\">invalid</span> <span class=\"n\">argument</span><span class=\"o\">)</span>\n  <span class=\"n\">file</span><span class=\"o\">:</span> <span class=\"bp\">./</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">doc</span><span class=\"bp\">/\\</span><span class=\"n\">find</span><span class=\"bp\">\\</span><span class=\"n\">Lean.SourceInfo.getPos</span><span class=\"bp\">?</span>\n</code></pre></div><br>\n</p>\n</blockquote>\n<p>At first there is an uncaught exception. Probably it stops doc-gen from generating other parts of the doc. Does this error appears again and again? (Just ignore the heartbeat warning, that's problem from Lean itself)</p>",
        "id": 272529543,
        "sender_full_name": "Xubai Wang",
        "timestamp": 1645290230
    },
    {
        "content": "<p>yes</p>",
        "id": 272529607,
        "sender_full_name": "Joseph O",
        "timestamp": 1645290287
    },
    {
        "content": "<p>That's either an issue with the harcoded <code>build/doc</code> base path or with the fact that windows file system might not like a <code>?</code> in its file names, can you create a directory with a ? in its name under Windows?</p>",
        "id": 272529636,
        "sender_full_name": "Henrik Böving",
        "timestamp": 1645290353
    },
    {
        "content": "<p>Also, does your user name contain spaces?</p>",
        "id": 272529935,
        "sender_full_name": "Mauricio Collares",
        "timestamp": 1645290700
    },
    {
        "content": "<p>It doesnt, we can see it in the doc-gen log which he forgot to redact.</p>",
        "id": 272529993,
        "sender_full_name": "Henrik Böving",
        "timestamp": 1645290747
    },
    {
        "content": "<p>Looks like you're right, Windows does not support question marks in file names</p>",
        "id": 272530107,
        "sender_full_name": "Mauricio Collares",
        "timestamp": 1645290862
    },
    {
        "content": "<p><a href=\"https://docs.microsoft.com/en-us/windows/win32/fileio/naming-a-file\">https://docs.microsoft.com/en-us/windows/win32/fileio/naming-a-file</a><br>\nYes, that would unfortunately be a problem for <code>find</code>.</p>",
        "id": 272530126,
        "sender_full_name": "Xubai Wang",
        "timestamp": 1645290889
    },
    {
        "content": "<p>How much do we rely on a file based <code>find</code>?</p>",
        "id": 272530222,
        "sender_full_name": "Xubai Wang",
        "timestamp": 1645290991
    },
    {
        "content": "<p><a href=\"https://leanprover-community.github.io/mathlib4_docs/find/Nat\">docs4#Nat</a> is completely based on it.</p>",
        "id": 272530233,
        "sender_full_name": "Henrik Böving",
        "timestamp": 1645291009
    },
    {
        "content": "<p>(referring to the linking Zulip feature here).</p>",
        "id": 272530239,
        "sender_full_name": "Henrik Böving",
        "timestamp": 1645291019
    },
    {
        "content": "<p>Maybe we can link to a single <code>/find.html</code> page and rely on JavaScript to figure out the right place?</p>",
        "id": 272530386,
        "sender_full_name": "Xubai Wang",
        "timestamp": 1645291198
    },
    {
        "content": "<p>I was about to write that yes^^</p>",
        "id": 272530426,
        "sender_full_name": "Henrik Böving",
        "timestamp": 1645291206
    },
    {
        "content": "<p>Although I'm completely unfamiliar with frontend development so someone else would have to do that</p>",
        "id": 272530437,
        "sender_full_name": "Henrik Böving",
        "timestamp": 1645291223
    },
    {
        "content": "<p>Oh and there is also an open issue for the src# variant here <a href=\"https://github.com/leanprover/doc-gen4/issues/30\">https://github.com/leanprover/doc-gen4/issues/30</a> which would have to be addressed the same way then.</p>",
        "id": 272530588,
        "sender_full_name": "Henrik Böving",
        "timestamp": 1645291412
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"467926\">@Joseph O</span> For temporal workaround, you can remove these lines in <code>DocGen4/Output.lean</code> and rebuild doc-gen to disable the <code>find</code> feature and that will work for your platform.</p>\n<p><a href=\"/user_uploads/3121/jYB0ItHEhn7KtoMn7VDke7LM/截屏2022-02-20-上午1.28.22.png\">DocGen4/Output.lean</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/jYB0ItHEhn7KtoMn7VDke7LM/截屏2022-02-20-上午1.28.22.png\" title=\"DocGen4/Output.lean\"><img src=\"/user_uploads/3121/jYB0ItHEhn7KtoMn7VDke7LM/截屏2022-02-20-上午1.28.22.png\"></a></div><p><em>EDITED: also remove the \"searchable_data.bmp\" line</em>.</p>",
        "id": 272531095,
        "sender_full_name": "Xubai Wang",
        "timestamp": 1645291958
    },
    {
        "content": "<p>That's not gonna compile the next line uses the <code>json</code> variable still.</p>",
        "id": 272531222,
        "sender_full_name": "Henrik Böving",
        "timestamp": 1645292141
    },
    {
        "content": "<p>But if you comment that one out too it will</p>",
        "id": 272531293,
        "sender_full_name": "Henrik Böving",
        "timestamp": 1645292208
    },
    {
        "content": "<p>let me try rebuilding docgen4</p>",
        "id": 272535717,
        "sender_full_name": "Joseph O",
        "timestamp": 1645297214
    },
    {
        "content": "<p>first. That could fix it</p>",
        "id": 272535819,
        "sender_full_name": "Joseph O",
        "timestamp": 1645297272
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"414345\">Xubai Wang</span> <a href=\"#narrow/stream/270676-lean4/topic/docgen4.20not.20working.3F/near/272531095\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"467926\">Joseph O</span> For temporal workaround, you can remove these lines in <code>DocGen4/Output.lean</code> and rebuild doc-gen to disable the <code>find</code> feature and that will work for your platform.</p>\n<p><a href=\"/user_uploads/3121/jYB0ItHEhn7KtoMn7VDke7LM/截屏2022-02-20-上午1.28.22.png\">DocGen4/Output.lean</a></p>\n<p><em>EDITED: also remove the \"searchable_data.bmp\" line</em>.</p>\n</blockquote>\n<p>When i do that it wont build</p>",
        "id": 272536665,
        "sender_full_name": "Joseph O",
        "timestamp": 1645298198
    },
    {
        "content": "<p>I recloned it from github and that version is not building. Should I report this as an issue?</p>",
        "id": 272536810,
        "sender_full_name": "Joseph O",
        "timestamp": 1645298383
    },
    {
        "content": "<p>The version very much is building according to both my machine and the CLI, what's your error with a new cloned one?</p>",
        "id": 272536891,
        "sender_full_name": "Henrik Böving",
        "timestamp": 1645298456
    },
    {
        "content": "<p>Well it worked right now. Let me try generating documentation</p>",
        "id": 272537352,
        "sender_full_name": "Joseph O",
        "timestamp": 1645298984
    },
    {
        "content": "<p>What does this mean?</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"n\">uncaught</span> <span class=\"n\">exception</span><span class=\"o\">:</span> <span class=\"n\">invalid</span> <span class=\"n\">argument</span> <span class=\"o\">(</span><span class=\"n\">error</span> <span class=\"n\">code</span><span class=\"o\">:</span> <span class=\"mi\">22</span><span class=\"o\">,</span> <span class=\"n\">invalid</span> <span class=\"n\">argument</span><span class=\"o\">)</span>\n  <span class=\"n\">file</span><span class=\"o\">:</span> <span class=\"bp\">.\\</span><span class=\"n\">build</span><span class=\"bp\">\\</span><span class=\"n\">doc</span><span class=\"bp\">\\</span><span class=\"n\">find</span><span class=\"bp\">\\</span><span class=\"n\">Lean.SourceInfo.getPos</span><span class=\"bp\">?</span>\n</code></pre></div>\n<p>i always get it</p>",
        "id": 272537458,
        "sender_full_name": "Joseph O",
        "timestamp": 1645299078
    },
    {
        "content": "<p>Why is it working on you machine and not mine? Are you using windows?</p>",
        "id": 272537521,
        "sender_full_name": "Joseph O",
        "timestamp": 1645299128
    },
    {
        "content": "<p>No, I'm on Fedora, Xubai is on MacOS (at least his screenshots look like that) and all the CLI and automation runs some Linux flavour as well. I neither have a Windows machine nor has someone with a Windows machine yet tried to run doc-gen4 so this is why it wasnt discovered before.</p>",
        "id": 272537570,
        "sender_full_name": "Henrik Böving",
        "timestamp": 1645299212
    },
    {
        "content": "<p>No one has tried docgen4 on windows yet? This could be the problem</p>",
        "id": 272537632,
        "sender_full_name": "Joseph O",
        "timestamp": 1645299251
    },
    {
        "content": "<p>Any ideas why it doesnt work on Windows?</p>",
        "id": 272537669,
        "sender_full_name": "Joseph O",
        "timestamp": 1645299306
    },
    {
        "content": "<p>Why it doesn't work was already elaborated in detail above.</p>",
        "id": 272537681,
        "sender_full_name": "Henrik Böving",
        "timestamp": 1645299327
    },
    {
        "content": "<p>However it should work if you comment out the lines in the screenshot above as well as the next one that uses the json variable because then these directories are not created anymore.</p>",
        "id": 272537752,
        "sender_full_name": "Henrik Böving",
        "timestamp": 1645299379
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"395550\">Henrik Böving</span> <a href=\"#narrow/stream/270676-lean4/topic/docgen4.20not.20working.3F/near/272529636\">said</a>:</p>\n<blockquote>\n<p>That's either an issue with the harcoded <code>build/doc</code> base path or with the fact that windows file system might not like a <code>?</code> in its file names, can you create a directory with a ? in its name under Windows?</p>\n</blockquote>\n<p>I can try</p>",
        "id": 272537787,
        "sender_full_name": "Joseph O",
        "timestamp": 1645299419
    },
    {
        "content": "<p>Read the discussion fully we know that a ? is illegal already by now.</p>",
        "id": 272537808,
        "sender_full_name": "Henrik Böving",
        "timestamp": 1645299446
    },
    {
        "content": "<p>yeah Windows doesn't allow it</p>",
        "id": 272537816,
        "sender_full_name": "Joseph O",
        "timestamp": 1645299453
    },
    {
        "content": "<p>I can try <a href=\"#narrow/stream/270676-lean4/topic/docgen4.20not.20working.3F/near/272531095\">what this message says</a> again</p>",
        "id": 272537884,
        "sender_full_name": "Joseph O",
        "timestamp": 1645299488
    },
    {
        "content": "<p>It worked! <span aria-label=\"+1\" class=\"emoji emoji-1f44d\" role=\"img\" title=\"+1\">:+1:</span></p>",
        "id": 272538021,
        "sender_full_name": "Joseph O",
        "timestamp": 1645299635
    },
    {
        "content": "<p>Are the docstrings supposed to show up somewhere?</p>",
        "id": 272538067,
        "sender_full_name": "Joseph O",
        "timestamp": 1645299713
    },
    {
        "content": "<p>Not yet</p>",
        "id": 272538123,
        "sender_full_name": "Henrik Böving",
        "timestamp": 1645299737
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"395550\">@Henrik Böving</span> docstring now works perfectly on mathlib4 when i test it locally but when I merge it into <code>main</code>, there are <code>PANIC at Std.HashMap.find! Std.Data.HashMap:177:14: key is not in the map</code> errors.</p>",
        "id": 272538240,
        "sender_full_name": "Xubai Wang",
        "timestamp": 1645299903
    },
    {
        "content": "<p>Aha....it's a little bit annoying panics don't have a backtrace, you could try to <code>git bisect</code> the issue.</p>",
        "id": 272538345,
        "sender_full_name": "Henrik Böving",
        "timestamp": 1645300025
    },
    {
        "content": "<p>I can't reproduce it with the current doc-gen main so it's probably some interaction between a change on main and a change of yours.</p>",
        "id": 272538471,
        "sender_full_name": "Henrik Böving",
        "timestamp": 1645300179
    },
    {
        "content": "<p>Im aware that right now the lean 4 devs are worried about other things at the moment, but will there be a centralized website for lake packages like <a href=\"http://crates.io\">crates.io</a>, or is it still not known yet?</p>",
        "id": 272539807,
        "sender_full_name": "Joseph O",
        "timestamp": 1645301593
    },
    {
        "content": "<p>Not known.</p>",
        "id": 272540301,
        "sender_full_name": "Henrik Böving",
        "timestamp": 1645302122
    },
    {
        "content": "<p>I can help write a simple unofficial one based on the GitHub search <a href=\"https://github.com/search?q=lakefile.lean+in%3Apath&amp;type=Code\">https://github.com/search?q=lakefile.lean+in%3Apath&amp;type=Code</a>, much like that of <a href=\"https://lib.rs/\">lib.rs</a>.</p>",
        "id": 272540346,
        "sender_full_name": "Xubai Wang",
        "timestamp": 1645302156
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"414345\">Xubai Wang</span> <a href=\"#narrow/stream/270676-lean4/topic/docgen4.20not.20working.3F/near/272540346\">said</a>:</p>\n<blockquote>\n<p>I can help write a simple unofficial one based on the GitHub search <a href=\"https://github.com/search?q=lakefile.lean+in%3Apath&amp;type=Code\">https://github.com/search?q=lakefile.lean+in%3Apath&amp;type=Code</a>.</p>\n</blockquote>\n<p>Wow 625k</p>",
        "id": 272540377,
        "sender_full_name": "Joseph O",
        "timestamp": 1645302200
    },
    {
        "content": "<p>Lots of those are false positives by the relatively liberal github search</p>",
        "id": 272540390,
        "sender_full_name": "Henrik Böving",
        "timestamp": 1645302218
    },
    {
        "content": "<p>If you do end up writing one I would love to help</p>",
        "id": 272540400,
        "sender_full_name": "Joseph O",
        "timestamp": 1645302232
    },
    {
        "content": "<p>I would estimate the amount of Lean 4 projects out there is at most in the 100s at the moment.</p>",
        "id": 272540403,
        "sender_full_name": "Henrik Böving",
        "timestamp": 1645302235
    },
    {
        "content": "<p>Yeah towards the end it is not counting lakefile.lean anymore: <a href=\"/user_uploads/3121/81CP2aWpQDUKssYxiUZus6sk/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/81CP2aWpQDUKssYxiUZus6sk/image.png\" title=\"image.png\"><img src=\"/user_uploads/3121/81CP2aWpQDUKssYxiUZus6sk/image.png\"></a></div>",
        "id": 272540495,
        "sender_full_name": "Joseph O",
        "timestamp": 1645302323
    }
]