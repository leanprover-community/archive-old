[
    {
        "content": "<p>The VSCode extension for Lean4 works properly on my project when I open it as long as I stay within the file that I opened to. When I switch tabs to a different Lean file, I immediately get this output:</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"n\">Watchdog</span> <span class=\"n\">error</span><span class=\"o\">:</span> <span class=\"n\">Got</span> <span class=\"n\">unknown</span> <span class=\"n\">document</span> <span class=\"n\">URI</span> <span class=\"o\">(</span><span class=\"n\">file</span><span class=\"o\">:</span><span class=\"bp\">///</span><span class=\"n\">filename</span><span class=\"o\">)</span>\n<span class=\"o\">[</span><span class=\"n\">Info</span>  <span class=\"bp\">-</span> <span class=\"mi\">1</span><span class=\"o\">:</span><span class=\"mi\">28</span><span class=\"o\">:</span><span class=\"mi\">01</span> <span class=\"n\">PM</span><span class=\"o\">]</span> <span class=\"n\">Connection</span> <span class=\"n\">to</span> <span class=\"n\">server</span> <span class=\"n\">got</span> <span class=\"n\">closed.</span> <span class=\"n\">Server</span> <span class=\"n\">will</span> <span class=\"n\">restart.</span>\n<span class=\"o\">[</span><span class=\"n\">Error</span> <span class=\"bp\">-</span> <span class=\"mi\">1</span><span class=\"o\">:</span><span class=\"mi\">28</span><span class=\"o\">:</span><span class=\"mi\">01</span> <span class=\"n\">PM</span><span class=\"o\">]</span> <span class=\"n\">Request</span> <span class=\"n\">textDocument</span><span class=\"bp\">/</span><span class=\"n\">documentSymbol</span> <span class=\"n\">failed.</span>\n<span class=\"n\">Error</span><span class=\"o\">:</span> <span class=\"n\">Connection</span> <span class=\"n\">got</span> <span class=\"n\">disposed.</span>\n    <span class=\"n\">at</span> <span class=\"n\">Object.dispose</span> <span class=\"o\">(</span><span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">arjun</span><span class=\"bp\">/.</span><span class=\"n\">vscode</span><span class=\"bp\">/</span><span class=\"n\">extensions</span><span class=\"bp\">/</span><span class=\"n\">leanprover.lean4</span><span class=\"bp\">-</span><span class=\"mi\">0</span><span class=\"bp\">.</span><span class=\"mi\">0</span><span class=\"bp\">.</span><span class=\"mi\">20</span><span class=\"bp\">/</span><span class=\"n\">out</span><span class=\"bp\">/</span><span class=\"n\">extension.js</span><span class=\"o\">:</span><span class=\"mi\">2</span><span class=\"o\">:</span><span class=\"mi\">145468</span><span class=\"o\">)</span>\n</code></pre></div>\n<p>and then the extension doesn't work anymore until I restart VSCode.</p>\n<p>Has anybody else had this experience? Any help will be appreciated.</p>",
        "id": 232013137,
        "sender_full_name": "Arjun Viswanathan",
        "timestamp": 1616783873
    },
    {
        "content": "<p>I'm getting this inconsistently on 4.0.0-m2 with 0.0.2 for the extension. Mine is slightly more verbose:</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"n\">Watchdog</span> <span class=\"n\">error</span><span class=\"o\">:</span> <span class=\"n\">Got</span> <span class=\"n\">unknown</span> <span class=\"n\">document</span> <span class=\"n\">URI</span> <span class=\"o\">(</span><span class=\"n\">file</span><span class=\"o\">:</span><span class=\"bp\">///</span><span class=\"n\">Users</span><span class=\"bp\">/</span><span class=\"n\">zzz</span><span class=\"bp\">/</span><span class=\"n\">test_dir</span><span class=\"bp\">/</span><span class=\"n\">testfile2.lean</span><span class=\"o\">)</span>\n<span class=\"o\">[</span><span class=\"n\">Info</span>  <span class=\"bp\">-</span> <span class=\"mi\">2</span><span class=\"o\">:</span><span class=\"mi\">19</span><span class=\"o\">:</span><span class=\"mi\">18</span> <span class=\"n\">PM</span><span class=\"o\">]</span> <span class=\"n\">Connection</span> <span class=\"n\">to</span> <span class=\"n\">server</span> <span class=\"n\">got</span> <span class=\"n\">closed.</span> <span class=\"n\">Server</span> <span class=\"n\">will</span> <span class=\"n\">restart.</span>\n<span class=\"o\">[</span><span class=\"n\">Error</span> <span class=\"bp\">-</span> <span class=\"mi\">2</span><span class=\"o\">:</span><span class=\"mi\">19</span><span class=\"o\">:</span><span class=\"mi\">18</span> <span class=\"n\">PM</span><span class=\"o\">]</span> <span class=\"n\">Request</span> <span class=\"n\">textDocument</span><span class=\"bp\">/</span><span class=\"n\">documentSymbol</span> <span class=\"n\">failed.</span>\n<span class=\"n\">Error</span><span class=\"o\">:</span> <span class=\"n\">Connection</span> <span class=\"n\">got</span> <span class=\"n\">disposed.</span>\n    <span class=\"n\">at</span> <span class=\"n\">Object.dispose</span> <span class=\"o\">(</span><span class=\"bp\">/</span><span class=\"n\">Users</span><span class=\"bp\">/</span><span class=\"n\">zzz</span><span class=\"bp\">/.</span><span class=\"n\">vscode</span><span class=\"bp\">/</span><span class=\"n\">extensions</span><span class=\"bp\">/</span><span class=\"n\">leanprover.lean4</span><span class=\"bp\">-</span><span class=\"mi\">0</span><span class=\"bp\">.</span><span class=\"mi\">0</span><span class=\"bp\">.</span><span class=\"mi\">20</span><span class=\"bp\">/</span><span class=\"n\">out</span><span class=\"bp\">/</span><span class=\"n\">extension.js</span><span class=\"o\">:</span><span class=\"mi\">2</span><span class=\"o\">:</span><span class=\"mi\">145468</span><span class=\"o\">)</span>\n    <span class=\"n\">at</span> <span class=\"n\">Object.dispose</span> <span class=\"o\">(</span><span class=\"bp\">/</span><span class=\"n\">Users</span><span class=\"bp\">/</span><span class=\"n\">zzz</span><span class=\"bp\">/.</span><span class=\"n\">vscode</span><span class=\"bp\">/</span><span class=\"n\">extensions</span><span class=\"bp\">/</span><span class=\"n\">leanprover.lean4</span><span class=\"bp\">-</span><span class=\"mi\">0</span><span class=\"bp\">.</span><span class=\"mi\">0</span><span class=\"bp\">.</span><span class=\"mi\">20</span><span class=\"bp\">/</span><span class=\"n\">out</span><span class=\"bp\">/</span><span class=\"n\">extension.js</span><span class=\"o\">:</span><span class=\"mi\">2</span><span class=\"o\">:</span><span class=\"mi\">225640</span><span class=\"o\">)</span>\n    <span class=\"n\">at</span> <span class=\"n\">C.handleConnectionClosed</span> <span class=\"o\">(</span><span class=\"bp\">/</span><span class=\"n\">Users</span><span class=\"bp\">/</span><span class=\"n\">zzz</span><span class=\"bp\">/.</span><span class=\"n\">vscode</span><span class=\"bp\">/</span><span class=\"n\">extensions</span><span class=\"bp\">/</span><span class=\"n\">leanprover.lean4</span><span class=\"bp\">-</span><span class=\"mi\">0</span><span class=\"bp\">.</span><span class=\"mi\">0</span><span class=\"bp\">.</span><span class=\"mi\">20</span><span class=\"bp\">/</span><span class=\"n\">out</span><span class=\"bp\">/</span><span class=\"n\">extension.js</span><span class=\"o\">:</span><span class=\"mi\">2</span><span class=\"o\">:</span><span class=\"mi\">225853</span><span class=\"o\">)</span>\n    <span class=\"n\">at</span> <span class=\"n\">C.handleConnectionClosed</span> <span class=\"o\">(</span><span class=\"bp\">/</span><span class=\"n\">Users</span><span class=\"bp\">/</span><span class=\"n\">zzz</span><span class=\"bp\">/.</span><span class=\"n\">vscode</span><span class=\"bp\">/</span><span class=\"n\">extensions</span><span class=\"bp\">/</span><span class=\"n\">leanprover.lean4</span><span class=\"bp\">-</span><span class=\"mi\">0</span><span class=\"bp\">.</span><span class=\"mi\">0</span><span class=\"bp\">.</span><span class=\"mi\">20</span><span class=\"bp\">/</span><span class=\"n\">out</span><span class=\"bp\">/</span><span class=\"n\">extension.js</span><span class=\"o\">:</span><span class=\"mi\">2</span><span class=\"o\">:</span><span class=\"mi\">286241</span><span class=\"o\">)</span>\n    <span class=\"n\">at</span> <span class=\"n\">t</span> <span class=\"o\">(</span><span class=\"bp\">/</span><span class=\"n\">Users</span><span class=\"bp\">/</span><span class=\"n\">zzz</span><span class=\"bp\">/.</span><span class=\"n\">vscode</span><span class=\"bp\">/</span><span class=\"n\">extensions</span><span class=\"bp\">/</span><span class=\"n\">leanprover.lean4</span><span class=\"bp\">-</span><span class=\"mi\">0</span><span class=\"bp\">.</span><span class=\"mi\">0</span><span class=\"bp\">.</span><span class=\"mi\">20</span><span class=\"bp\">/</span><span class=\"n\">out</span><span class=\"bp\">/</span><span class=\"n\">extension.js</span><span class=\"o\">:</span><span class=\"mi\">2</span><span class=\"o\">:</span><span class=\"mi\">223942</span><span class=\"o\">)</span>\n    <span class=\"n\">at</span> <span class=\"n\">invoke</span> <span class=\"o\">(</span><span class=\"bp\">/</span><span class=\"n\">Users</span><span class=\"bp\">/</span><span class=\"n\">zzz</span><span class=\"bp\">/.</span><span class=\"n\">vscode</span><span class=\"bp\">/</span><span class=\"n\">extensions</span><span class=\"bp\">/</span><span class=\"n\">leanprover.lean4</span><span class=\"bp\">-</span><span class=\"mi\">0</span><span class=\"bp\">.</span><span class=\"mi\">0</span><span class=\"bp\">.</span><span class=\"mi\">20</span><span class=\"bp\">/</span><span class=\"n\">out</span><span class=\"bp\">/</span><span class=\"n\">extension.js</span><span class=\"o\">:</span><span class=\"mi\">2</span><span class=\"o\">:</span><span class=\"mi\">147081</span><span class=\"o\">)</span>\n    <span class=\"n\">at</span> <span class=\"n\">o.fire</span> <span class=\"o\">(</span><span class=\"bp\">/</span><span class=\"n\">Users</span><span class=\"bp\">/</span><span class=\"n\">zzz</span><span class=\"bp\">/.</span><span class=\"n\">vscode</span><span class=\"bp\">/</span><span class=\"n\">extensions</span><span class=\"bp\">/</span><span class=\"n\">leanprover.lean4</span><span class=\"bp\">-</span><span class=\"mi\">0</span><span class=\"bp\">.</span><span class=\"mi\">0</span><span class=\"bp\">.</span><span class=\"mi\">20</span><span class=\"bp\">/</span><span class=\"n\">out</span><span class=\"bp\">/</span><span class=\"n\">extension.js</span><span class=\"o\">:</span><span class=\"mi\">2</span><span class=\"o\">:</span><span class=\"mi\">147842</span><span class=\"o\">)</span>\n    <span class=\"n\">at</span> <span class=\"n\">Y</span> <span class=\"o\">(</span><span class=\"bp\">/</span><span class=\"n\">Users</span><span class=\"bp\">/</span><span class=\"n\">zzz</span><span class=\"bp\">/.</span><span class=\"n\">vscode</span><span class=\"bp\">/</span><span class=\"n\">extensions</span><span class=\"bp\">/</span><span class=\"n\">leanprover.lean4</span><span class=\"bp\">-</span><span class=\"mi\">0</span><span class=\"bp\">.</span><span class=\"mi\">0</span><span class=\"bp\">.</span><span class=\"mi\">20</span><span class=\"bp\">/</span><span class=\"n\">out</span><span class=\"bp\">/</span><span class=\"n\">extension.js</span><span class=\"o\">:</span><span class=\"mi\">2</span><span class=\"o\">:</span><span class=\"mi\">134726</span><span class=\"o\">)</span>\n    <span class=\"n\">at</span> <span class=\"n\">invoke</span> <span class=\"o\">(</span><span class=\"bp\">/</span><span class=\"n\">Users</span><span class=\"bp\">/</span><span class=\"n\">zzz</span><span class=\"bp\">/.</span><span class=\"n\">vscode</span><span class=\"bp\">/</span><span class=\"n\">extensions</span><span class=\"bp\">/</span><span class=\"n\">leanprover.lean4</span><span class=\"bp\">-</span><span class=\"mi\">0</span><span class=\"bp\">.</span><span class=\"mi\">0</span><span class=\"bp\">.</span><span class=\"mi\">20</span><span class=\"bp\">/</span><span class=\"n\">out</span><span class=\"bp\">/</span><span class=\"n\">extension.js</span><span class=\"o\">:</span><span class=\"mi\">2</span><span class=\"o\">:</span><span class=\"mi\">147081</span><span class=\"o\">)</span>\n    <span class=\"n\">at</span> <span class=\"n\">o.fire</span> <span class=\"o\">(</span><span class=\"bp\">/</span><span class=\"n\">Users</span><span class=\"bp\">/</span><span class=\"n\">zzz</span><span class=\"bp\">/.</span><span class=\"n\">vscode</span><span class=\"bp\">/</span><span class=\"n\">extensions</span><span class=\"bp\">/</span><span class=\"n\">leanprover.lean4</span><span class=\"bp\">-</span><span class=\"mi\">0</span><span class=\"bp\">.</span><span class=\"mi\">0</span><span class=\"bp\">.</span><span class=\"mi\">20</span><span class=\"bp\">/</span><span class=\"n\">out</span><span class=\"bp\">/</span><span class=\"n\">extension.js</span><span class=\"o\">:</span><span class=\"mi\">2</span><span class=\"o\">:</span><span class=\"mi\">147842</span><span class=\"o\">)</span>\n    <span class=\"n\">at</span> <span class=\"n\">m.fireClose</span> <span class=\"o\">(</span><span class=\"bp\">/</span><span class=\"n\">Users</span><span class=\"bp\">/</span><span class=\"n\">zzz</span><span class=\"bp\">/.</span><span class=\"n\">vscode</span><span class=\"bp\">/</span><span class=\"n\">extensions</span><span class=\"bp\">/</span><span class=\"n\">leanprover.lean4</span><span class=\"bp\">-</span><span class=\"mi\">0</span><span class=\"bp\">.</span><span class=\"mi\">0</span><span class=\"bp\">.</span><span class=\"mi\">20</span><span class=\"bp\">/</span><span class=\"n\">out</span><span class=\"bp\">/</span><span class=\"n\">extension.js</span><span class=\"o\">:</span><span class=\"mi\">2</span><span class=\"o\">:</span><span class=\"mi\">159295</span><span class=\"o\">)</span>\n    <span class=\"n\">at</span> <span class=\"n\">Socket.</span><span class=\"bp\">&lt;</span><span class=\"n\">anonymous</span><span class=\"bp\">&gt;</span> <span class=\"o\">(</span><span class=\"bp\">/</span><span class=\"n\">Users</span><span class=\"bp\">/</span><span class=\"n\">zzz</span><span class=\"bp\">/.</span><span class=\"n\">vscode</span><span class=\"bp\">/</span><span class=\"n\">extensions</span><span class=\"bp\">/</span><span class=\"n\">leanprover.lean4</span><span class=\"bp\">-</span><span class=\"mi\">0</span><span class=\"bp\">.</span><span class=\"mi\">0</span><span class=\"bp\">.</span><span class=\"mi\">20</span><span class=\"bp\">/</span><span class=\"n\">out</span><span class=\"bp\">/</span><span class=\"n\">extension.js</span><span class=\"o\">:</span><span class=\"mi\">2</span><span class=\"o\">:</span><span class=\"mi\">160080</span><span class=\"o\">)</span>\n    <span class=\"n\">at</span> <span class=\"n\">Socket.emit</span> <span class=\"o\">(</span><span class=\"n\">events.js</span><span class=\"o\">:</span><span class=\"mi\">315</span><span class=\"o\">:</span><span class=\"mi\">20</span><span class=\"o\">)</span>\n    <span class=\"n\">at</span> <span class=\"n\">Pipe.</span><span class=\"bp\">&lt;</span><span class=\"n\">anonymous</span><span class=\"bp\">&gt;</span> <span class=\"o\">(</span><span class=\"n\">net.js</span><span class=\"o\">:</span><span class=\"mi\">674</span><span class=\"o\">:</span><span class=\"mi\">12</span><span class=\"o\">)</span>\n</code></pre></div>",
        "id": 232019397,
        "sender_full_name": "Chris B",
        "timestamp": 1616786828
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"248359\">@Arjun Viswanathan</span> This might just be an issue with stable. The instructions for the vscode extension say to use the nightly build of lean4, and that does seem to prevent this.</p>",
        "id": 232020164,
        "sender_full_name": "Chris B",
        "timestamp": 1616787199
    },
    {
        "content": "<p>Yup, this has been fixed a few days ago: <a href=\"https://github.com/leanprover/lean4/pull/344/commits/a266f584d551185703d44e2d3142eeb5c026ce82\">https://github.com/leanprover/lean4/pull/344/commits/a266f584d551185703d44e2d3142eeb5c026ce82</a></p>",
        "id": 232024638,
        "sender_full_name": "Gabriel Ebner",
        "timestamp": 1616789271
    }
]