[
    {
        "content": "<p>I have Cat and Trn structures already made as part of a project on categories. Here's a function I was trying to define:</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kd\">def</span> <span class=\"n\">Comp</span> <span class=\"o\">(</span><span class=\"n\">C</span> <span class=\"o\">:</span> <span class=\"n\">Cat</span> <span class=\"o\">)</span> <span class=\"o\">(</span> <span class=\"n\">D</span> <span class=\"o\">:</span> <span class=\"n\">Cat</span> <span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">g</span> <span class=\"o\">:</span> <span class=\"n\">Trn</span> <span class=\"n\">C</span> <span class=\"n\">D</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">f</span> <span class=\"o\">:</span> <span class=\"n\">Trn</span> <span class=\"n\">C</span> <span class=\"n\">D</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">p</span> <span class=\"o\">:</span> <span class=\"n\">g.Dom</span> <span class=\"bp\">=</span> <span class=\"n\">f.Cod</span><span class=\"o\">)</span> <span class=\"o\">:=</span> <span class=\"n\">g</span>\n</code></pre></div>\n<p>It's an attempt at vertical composition and the p is a witness to the compatibility. </p>\n<p>I get this error:</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"n\">Main.lean</span><span class=\"o\">:</span><span class=\"mi\">255</span><span class=\"o\">:</span><span class=\"mi\">77</span><span class=\"o\">:</span> <span class=\"n\">error</span><span class=\"o\">:</span> <span class=\"n\">don't</span> <span class=\"n\">know</span> <span class=\"n\">how</span> <span class=\"n\">to</span> <span class=\"n\">synthesize</span> <span class=\"n\">implicit</span> <span class=\"n\">argument</span>\n  <span class=\"bp\">@</span><span class=\"n\">Trn.Cod</span> <span class=\"n\">C</span> <span class=\"n\">D</span> <span class=\"n\">f</span> <span class=\"o\">(</span><span class=\"bp\">?</span><span class=\"n\">m.3459</span> <span class=\"n\">C</span> <span class=\"n\">D</span> <span class=\"n\">g</span> <span class=\"n\">f</span><span class=\"o\">)</span>\n<span class=\"n\">context</span><span class=\"o\">:</span>\n<span class=\"n\">C</span> <span class=\"n\">D</span> <span class=\"o\">:</span> <span class=\"n\">Cat</span>\n<span class=\"n\">g</span> <span class=\"n\">f</span> <span class=\"o\">:</span> <span class=\"n\">Trn</span> <span class=\"n\">C</span> <span class=\"n\">D</span>\n<span class=\"bp\">‚ä¢</span> <span class=\"n\">Cat</span>\n</code></pre></div>\n<p>I'm not sure what the ?m.3459 really is. But it seems like equality of structures is giving me some trouble. I guess I assumed that equality type would be meaningful for structures, so maybe it's that.</p>\n<p>Does anyone know how to fix this error?</p>",
        "id": 317985808,
        "sender_full_name": "Dean Young",
        "timestamp": 1672075509
    },
    {
        "content": "<p><a href=\"https://leanprover-community.github.io/mwe.html\">#mwe</a> ?</p>",
        "id": 317986975,
        "sender_full_name": "Reid Barton",
        "timestamp": 1672076097
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110032\">Reid Barton</span> <a href=\"#narrow/stream/270676-lean4/topic/can't.20synthesize.20argument/near/317986975\">said</a>:</p>\n<blockquote>\n<p><a href=\"https://leanprover-community.github.io/mwe.html\">#mwe</a> ?</p>\n</blockquote>\n<p>Here you go:</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kd\">structure</span> <span class=\"n\">Cat</span> <span class=\"n\">where</span>\n<span class=\"n\">Obj</span>   <span class=\"o\">:</span> <span class=\"kt\">Type</span> <span class=\"mi\">1</span>\n<span class=\"n\">Mor</span>   <span class=\"o\">:</span> <span class=\"kt\">Type</span> <span class=\"mi\">1</span>\n<span class=\"n\">Dom</span> <span class=\"o\">:</span> <span class=\"n\">Mor</span> <span class=\"bp\">-&gt;</span> <span class=\"n\">Obj</span>\n<span class=\"n\">Cod</span> <span class=\"o\">:</span> <span class=\"n\">Mor</span> <span class=\"bp\">-&gt;</span> <span class=\"n\">Obj</span>\n<span class=\"n\">Id</span> <span class=\"o\">:</span> <span class=\"n\">Obj</span> <span class=\"bp\">-&gt;</span> <span class=\"n\">Mor</span>\n\n<span class=\"n\">Comp</span> <span class=\"o\">:</span> <span class=\"k\">forall</span> <span class=\"o\">(</span><span class=\"n\">G</span> <span class=\"o\">:</span> <span class=\"n\">Mor</span><span class=\"o\">),</span> <span class=\"k\">forall</span> <span class=\"o\">(</span><span class=\"n\">F</span> <span class=\"o\">:</span> <span class=\"n\">Mor</span><span class=\"o\">),</span> <span class=\"k\">forall</span> <span class=\"o\">(</span><span class=\"n\">_</span> <span class=\"o\">:</span> <span class=\"n\">Dom</span> <span class=\"n\">G</span> <span class=\"bp\">=</span> <span class=\"n\">Cod</span> <span class=\"n\">F</span><span class=\"o\">),</span> <span class=\"n\">Mor</span>\n\n<span class=\"n\">DomId</span> <span class=\"o\">:</span> <span class=\"k\">forall</span> <span class=\"o\">(</span><span class=\"n\">C</span> <span class=\"o\">:</span> <span class=\"n\">Obj</span><span class=\"o\">),</span> <span class=\"n\">Dom</span> <span class=\"o\">(</span><span class=\"n\">Id</span> <span class=\"n\">C</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"n\">C</span>\n\n<span class=\"n\">CodId</span> <span class=\"o\">:</span> <span class=\"k\">forall</span> <span class=\"o\">(</span><span class=\"n\">C</span> <span class=\"o\">:</span> <span class=\"n\">Obj</span><span class=\"o\">),</span> <span class=\"n\">Cod</span> <span class=\"o\">(</span><span class=\"n\">Id</span> <span class=\"n\">C</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"n\">C</span>\n\n<span class=\"n\">DomComp</span> <span class=\"o\">:</span> <span class=\"k\">forall</span> <span class=\"o\">(</span><span class=\"n\">G</span> <span class=\"o\">:</span> <span class=\"n\">Mor</span><span class=\"o\">),</span> <span class=\"k\">forall</span> <span class=\"o\">(</span><span class=\"n\">F</span> <span class=\"o\">:</span> <span class=\"n\">Mor</span><span class=\"o\">),</span> <span class=\"k\">forall</span> <span class=\"o\">(</span><span class=\"n\">p</span> <span class=\"o\">:</span> <span class=\"n\">Dom</span> <span class=\"n\">G</span> <span class=\"bp\">=</span> <span class=\"n\">Cod</span> <span class=\"n\">F</span><span class=\"o\">),</span> <span class=\"n\">Dom</span> <span class=\"o\">(</span><span class=\"n\">Comp</span> <span class=\"n\">G</span> <span class=\"n\">F</span> <span class=\"n\">p</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"n\">Dom</span> <span class=\"n\">F</span>\n\n<span class=\"n\">CodComp</span> <span class=\"o\">:</span> <span class=\"k\">forall</span> <span class=\"o\">(</span><span class=\"n\">G</span> <span class=\"o\">:</span> <span class=\"n\">Mor</span><span class=\"o\">),</span> <span class=\"k\">forall</span> <span class=\"o\">(</span><span class=\"n\">F</span> <span class=\"o\">:</span> <span class=\"n\">Mor</span><span class=\"o\">),</span> <span class=\"k\">forall</span> <span class=\"o\">(</span><span class=\"n\">p</span> <span class=\"o\">:</span> <span class=\"n\">Dom</span> <span class=\"n\">G</span> <span class=\"bp\">=</span> <span class=\"n\">Cod</span> <span class=\"n\">F</span><span class=\"o\">),</span> <span class=\"n\">Cod</span> <span class=\"o\">(</span><span class=\"n\">Comp</span> <span class=\"n\">G</span> <span class=\"n\">F</span> <span class=\"n\">p</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"n\">Cod</span> <span class=\"n\">G</span>\n\n<span class=\"n\">CompComp</span> <span class=\"o\">:</span>\n<span class=\"k\">forall</span> <span class=\"o\">(</span><span class=\"n\">H</span> <span class=\"o\">:</span> <span class=\"n\">Mor</span><span class=\"o\">),</span>\n<span class=\"k\">forall</span> <span class=\"o\">(</span><span class=\"n\">G</span> <span class=\"o\">:</span> <span class=\"n\">Mor</span><span class=\"o\">),</span>\n<span class=\"k\">forall</span> <span class=\"o\">(</span><span class=\"n\">F</span> <span class=\"o\">:</span> <span class=\"n\">Mor</span><span class=\"o\">),</span>\n<span class=\"k\">forall</span> <span class=\"o\">(</span><span class=\"n\">p</span> <span class=\"o\">:</span> <span class=\"n\">Dom</span> <span class=\"n\">H</span> <span class=\"bp\">=</span> <span class=\"n\">Cod</span> <span class=\"n\">G</span><span class=\"o\">),</span>\n<span class=\"k\">forall</span> <span class=\"o\">(</span><span class=\"n\">q</span> <span class=\"o\">:</span> <span class=\"n\">Dom</span> <span class=\"n\">G</span> <span class=\"bp\">=</span> <span class=\"n\">Cod</span> <span class=\"n\">F</span><span class=\"o\">),</span>\n<span class=\"n\">Comp</span> <span class=\"n\">H</span> <span class=\"o\">(</span><span class=\"n\">Comp</span> <span class=\"n\">G</span> <span class=\"n\">F</span> <span class=\"n\">q</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">Eq.trans</span> <span class=\"n\">p</span> <span class=\"o\">(</span><span class=\"n\">Eq.symm</span> <span class=\"o\">(</span><span class=\"n\">CodComp</span> <span class=\"n\">G</span> <span class=\"n\">F</span> <span class=\"n\">q</span><span class=\"o\">)))</span> <span class=\"bp\">=</span> <span class=\"n\">Comp</span> <span class=\"o\">(</span><span class=\"n\">Comp</span> <span class=\"n\">H</span> <span class=\"n\">G</span> <span class=\"n\">p</span><span class=\"o\">)</span> <span class=\"n\">F</span> <span class=\"o\">(</span><span class=\"n\">Eq.trans</span> <span class=\"o\">(</span><span class=\"n\">DomComp</span> <span class=\"n\">H</span> <span class=\"n\">G</span> <span class=\"n\">p</span><span class=\"o\">)</span> <span class=\"n\">q</span><span class=\"o\">)</span>\n\n<span class=\"kd\">structure</span> <span class=\"n\">Fun</span> <span class=\"o\">(</span><span class=\"n\">Dom</span> <span class=\"o\">:</span> <span class=\"n\">Cat</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">Cod</span> <span class=\"o\">:</span> <span class=\"n\">Cat</span><span class=\"o\">)</span> <span class=\"n\">where</span>\n<span class=\"n\">Obj</span> <span class=\"o\">:</span> <span class=\"n\">Dom.Obj</span> <span class=\"bp\">-&gt;</span> <span class=\"n\">Cod.Obj</span>\n<span class=\"n\">Mor</span> <span class=\"o\">:</span> <span class=\"n\">Dom.Mor</span> <span class=\"bp\">-&gt;</span> <span class=\"n\">Cod.Mor</span>\n\n<span class=\"n\">Id</span>  <span class=\"o\">:</span> <span class=\"k\">forall</span> <span class=\"o\">(</span><span class=\"n\">C</span> <span class=\"o\">:</span> <span class=\"n\">Dom.Obj</span><span class=\"o\">),</span> <span class=\"n\">Mor</span> <span class=\"o\">(</span><span class=\"n\">Dom.Id</span> <span class=\"n\">C</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"n\">Cod.Id</span> <span class=\"o\">(</span><span class=\"n\">Obj</span> <span class=\"n\">C</span><span class=\"o\">)</span>\n\n<span class=\"n\">DomObj</span> <span class=\"o\">:</span> <span class=\"k\">forall</span> <span class=\"o\">(</span><span class=\"n\">f</span> <span class=\"o\">:</span> <span class=\"n\">Dom.Mor</span><span class=\"o\">),</span> <span class=\"n\">Cod.Dom</span> <span class=\"o\">(</span><span class=\"n\">Mor</span> <span class=\"n\">f</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"n\">Obj</span> <span class=\"o\">(</span><span class=\"n\">Dom.Dom</span> <span class=\"n\">f</span><span class=\"o\">)</span>\n\n<span class=\"n\">CodObj</span> <span class=\"o\">:</span> <span class=\"k\">forall</span> <span class=\"o\">(</span><span class=\"n\">f</span> <span class=\"o\">:</span> <span class=\"n\">Dom.Mor</span><span class=\"o\">),</span> <span class=\"n\">Cod.Cod</span> <span class=\"o\">(</span><span class=\"n\">Mor</span> <span class=\"n\">f</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"n\">Obj</span> <span class=\"o\">(</span><span class=\"n\">Dom.Cod</span> <span class=\"n\">f</span><span class=\"o\">)</span>\n\n<span class=\"n\">MorComp</span> <span class=\"o\">:</span> <span class=\"k\">forall</span> <span class=\"o\">(</span><span class=\"n\">G</span> <span class=\"o\">:</span> <span class=\"n\">Dom.Mor</span><span class=\"o\">),</span>\n<span class=\"k\">forall</span> <span class=\"o\">(</span><span class=\"n\">F</span> <span class=\"o\">:</span> <span class=\"n\">Dom.Mor</span><span class=\"o\">),</span>\n<span class=\"k\">forall</span> <span class=\"o\">(</span><span class=\"n\">p</span> <span class=\"o\">:</span> <span class=\"n\">Dom.Dom</span> <span class=\"n\">G</span> <span class=\"bp\">=</span> <span class=\"n\">Dom.Cod</span> <span class=\"n\">F</span><span class=\"o\">),</span>\n<span class=\"n\">Mor</span> <span class=\"o\">(</span><span class=\"n\">Dom.Comp</span> <span class=\"n\">G</span> <span class=\"n\">F</span> <span class=\"n\">p</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"o\">(</span><span class=\"n\">Cod.Comp</span> <span class=\"o\">(</span><span class=\"n\">Mor</span> <span class=\"n\">G</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">Mor</span> <span class=\"n\">F</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">Eq.trans</span> <span class=\"o\">(</span><span class=\"n\">DomObj</span> <span class=\"n\">G</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">Eq.trans</span> <span class=\"o\">(</span><span class=\"n\">congrArg</span> <span class=\"n\">Obj</span> <span class=\"n\">p</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">Eq.symm</span> <span class=\"o\">(</span><span class=\"n\">CodObj</span> <span class=\"n\">F</span><span class=\"o\">)))))</span>\n\n<span class=\"kd\">structure</span> <span class=\"n\">Trn</span> <span class=\"o\">(</span><span class=\"n\">C</span> <span class=\"o\">:</span> <span class=\"n\">Cat</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">D</span> <span class=\"o\">:</span> <span class=\"n\">Cat</span><span class=\"o\">)</span> <span class=\"n\">where</span>\n<span class=\"n\">Dom</span> <span class=\"o\">:</span> <span class=\"n\">Fun</span> <span class=\"n\">C</span> <span class=\"n\">CodCod</span>\n<span class=\"n\">Cod</span> <span class=\"o\">:</span> <span class=\"n\">Fun</span> <span class=\"n\">C</span> <span class=\"n\">CodCod</span>\n<span class=\"n\">Val</span> <span class=\"o\">:</span> <span class=\"n\">C.Obj</span> <span class=\"bp\">-&gt;</span> <span class=\"n\">D.Mor</span>\n<span class=\"n\">DomVal</span> <span class=\"o\">:</span> <span class=\"k\">forall</span> <span class=\"o\">(</span><span class=\"n\">X</span> <span class=\"o\">:</span> <span class=\"n\">C.Obj</span><span class=\"o\">),</span> <span class=\"n\">D.Dom</span> <span class=\"o\">(</span><span class=\"n\">Val</span> <span class=\"n\">X</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"n\">Dom.Obj</span> <span class=\"n\">X</span>\n<span class=\"n\">CodVal</span> <span class=\"o\">:</span> <span class=\"k\">forall</span> <span class=\"o\">(</span><span class=\"n\">X</span> <span class=\"o\">:</span> <span class=\"n\">C.Obj</span><span class=\"o\">),</span> <span class=\"n\">D.Cod</span> <span class=\"o\">(</span><span class=\"n\">Val</span> <span class=\"n\">X</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"n\">Cod.Obj</span> <span class=\"n\">X</span>\n<span class=\"n\">Comm</span> <span class=\"o\">:</span> <span class=\"k\">forall</span> <span class=\"o\">(</span><span class=\"n\">f</span> <span class=\"o\">:</span> <span class=\"n\">C.Mor</span><span class=\"o\">),</span> <span class=\"n\">D.Comp</span> <span class=\"o\">(</span><span class=\"n\">Cod.Mor</span> <span class=\"n\">f</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">Val</span> <span class=\"o\">(</span><span class=\"n\">C.Dom</span> <span class=\"n\">f</span><span class=\"o\">))</span> <span class=\"o\">(</span><span class=\"n\">Eq.trans</span> <span class=\"o\">(</span><span class=\"n\">Cod.DomObj</span> <span class=\"n\">f</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">Eq.symm</span> <span class=\"o\">(</span><span class=\"n\">CodVal</span> <span class=\"o\">(</span><span class=\"n\">C.Dom</span> <span class=\"n\">f</span><span class=\"o\">))))</span>  <span class=\"bp\">=</span> <span class=\"n\">D.Comp</span> <span class=\"o\">(</span><span class=\"n\">Val</span> <span class=\"o\">(</span><span class=\"n\">C.Cod</span> <span class=\"n\">f</span><span class=\"o\">))</span> <span class=\"o\">(</span><span class=\"n\">Dom.Mor</span> <span class=\"n\">f</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">Eq.trans</span> <span class=\"o\">(</span><span class=\"n\">DomVal</span> <span class=\"o\">(</span><span class=\"n\">C.Cod</span> <span class=\"n\">f</span><span class=\"o\">))</span> <span class=\"o\">(</span><span class=\"n\">Eq.symm</span> <span class=\"o\">(</span><span class=\"n\">Dom.CodObj</span> <span class=\"n\">f</span><span class=\"o\">)))</span>\n\n<span class=\"kd\">def</span> <span class=\"n\">Comp</span> <span class=\"o\">(</span><span class=\"n\">C</span> <span class=\"o\">:</span> <span class=\"n\">Cat</span> <span class=\"o\">)</span> <span class=\"o\">(</span> <span class=\"n\">D</span> <span class=\"o\">:</span> <span class=\"n\">Cat</span> <span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">g</span> <span class=\"o\">:</span> <span class=\"n\">Trn</span> <span class=\"n\">C</span> <span class=\"n\">D</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">f</span> <span class=\"o\">:</span> <span class=\"n\">Trn</span> <span class=\"n\">C</span> <span class=\"n\">D</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">p</span> <span class=\"o\">:</span> <span class=\"n\">g.Dom</span> <span class=\"bp\">=</span> <span class=\"n\">f.Cod</span><span class=\"o\">)</span> <span class=\"o\">:=</span> <span class=\"n\">g</span>\n</code></pre></div>",
        "id": 317987365,
        "sender_full_name": "Dean Young",
        "timestamp": 1672076369
    },
    {
        "content": "<p>I'm assuming CodCod was not supposed to be a free variable (i.e. quantified at Dom and Cod, separately)</p>",
        "id": 317993857,
        "sender_full_name": "Sebastian Ullrich",
        "timestamp": 1672080673
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110024\">Sebastian Ullrich</span> <a href=\"#narrow/stream/270676-lean4/topic/can't.20synthesize.20argument/near/317993857\">said</a>:</p>\n<blockquote>\n<p>I'm assuming CodCod was not supposed to be a free variable (i.e. quantified at Dom and Cod, separately)</p>\n</blockquote>\n<p>yeah-let me edit that</p>",
        "id": 318000244,
        "sender_full_name": "Dean Young",
        "timestamp": 1672085081
    }
]