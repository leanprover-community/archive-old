[
    {
        "content": "<p>I just had a moment to try out widgets while traveling. First of all, amazing work! However, I got into few troubles while reading the <a href=\"https://leanprover.github.io/lean4/doc/examples/widgets.lean.html\">doc</a>.</p>\n<ol>\n<li>It is not explained what \"RPC method\" is. What does the RPC stand for?</li>\n<li>When I copy paste the code snippets the formatting is all messed up. For example copy pasting the <code>getType</code> method to VS Code I get</li>\n</ol>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kn\">open</span> <span class=\"n\">Server</span> <span class=\"n\">RequestM</span> <span class=\"k\">in</span>\n<span class=\"kd\">@[serverRpcMethod]</span>\n<span class=\"kd\">def</span>\n<span class=\"n\">getType</span> <span class=\"o\">(</span>\n<span class=\"n\">params</span> <span class=\"o\">:</span>\n<span class=\"n\">GetTypeParams</span><span class=\"o\">)</span> <span class=\"o\">:</span>\n<span class=\"n\">RequestM</span> <span class=\"o\">(</span>\n<span class=\"n\">RequestTask</span>\n<span class=\"n\">CodeWithInfos</span><span class=\"o\">)</span>\n<span class=\"bp\">...</span>\n</code></pre></div>\n<ol start=\"3\">\n<li>When building the rubiks cube example I got an error the following error. I have zero experience with web development, so it is gibberish to me.</li>\n</ol>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"n\">error</span><span class=\"o\">:</span> <span class=\"bp\">&gt;</span> <span class=\"n\">npm</span> <span class=\"n\">run</span> <span class=\"n\">build</span> <span class=\"c1\">-- --tsxName rubiks    # in directory ./widget</span>\n<span class=\"n\">error</span><span class=\"o\">:</span> <span class=\"n\">stdout</span><span class=\"o\">:</span>\n\n<span class=\"bp\">&gt;</span> <span class=\"n\">rubiks</span><span class=\"bp\">-</span><span class=\"n\">cube</span><span class=\"bp\">@</span><span class=\"mi\">1</span><span class=\"bp\">.</span><span class=\"mi\">0</span><span class=\"bp\">.</span><span class=\"mi\">0</span> <span class=\"n\">build</span> <span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">tomass</span><span class=\"bp\">/</span><span class=\"n\">Documents</span><span class=\"bp\">/</span><span class=\"n\">lean4</span><span class=\"bp\">-</span><span class=\"n\">samples</span><span class=\"bp\">/</span><span class=\"n\">RubiksCube</span><span class=\"bp\">/</span><span class=\"n\">widget</span>\n<span class=\"bp\">&gt;</span> <span class=\"n\">rollup</span> <span class=\"c1\">--environment NODE_ENV:production --config \"--tsxName\" \"rubiks\"</span>\n<span class=\"n\">error</span><span class=\"o\">:</span> <span class=\"n\">stderr</span><span class=\"o\">:</span>\n<span class=\"n\">sh</span><span class=\"o\">:</span> <span class=\"mi\">1</span><span class=\"o\">:</span> <span class=\"n\">rollup</span><span class=\"o\">:</span> <span class=\"n\">not</span> <span class=\"n\">found</span>\n<span class=\"n\">npm</span> <span class=\"n\">ERR</span><span class=\"bp\">!</span> <span class=\"n\">code</span> <span class=\"n\">ELIFECYCLE</span>\n<span class=\"n\">npm</span> <span class=\"n\">ERR</span><span class=\"bp\">!</span> <span class=\"n\">syscall</span> <span class=\"n\">spawn</span>\n<span class=\"n\">npm</span> <span class=\"n\">ERR</span><span class=\"bp\">!</span> <span class=\"n\">file</span> <span class=\"n\">sh</span>\n<span class=\"n\">npm</span> <span class=\"n\">ERR</span><span class=\"bp\">!</span> <span class=\"n\">errno</span> <span class=\"n\">ENOENT</span>\n<span class=\"n\">npm</span> <span class=\"n\">ERR</span><span class=\"bp\">!</span> <span class=\"n\">rubiks</span><span class=\"bp\">-</span><span class=\"n\">cube</span><span class=\"bp\">@</span><span class=\"mi\">1</span><span class=\"bp\">.</span><span class=\"mi\">0</span><span class=\"bp\">.</span><span class=\"mi\">0</span> <span class=\"n\">build</span><span class=\"o\">:</span> <span class=\"bp\">`</span><span class=\"n\">rollup</span> <span class=\"c1\">--environment NODE_ENV:production --config \"--tsxName\" \"rubiks\"`</span>\n<span class=\"n\">npm</span> <span class=\"n\">ERR</span><span class=\"bp\">!</span> <span class=\"n\">spawn</span> <span class=\"n\">ENOENT</span>\n<span class=\"n\">npm</span> <span class=\"n\">ERR</span><span class=\"bp\">!</span>\n<span class=\"n\">npm</span> <span class=\"n\">ERR</span><span class=\"bp\">!</span> <span class=\"n\">Failed</span> <span class=\"n\">at</span> <span class=\"n\">the</span> <span class=\"n\">rubiks</span><span class=\"bp\">-</span><span class=\"n\">cube</span><span class=\"bp\">@</span><span class=\"mi\">1</span><span class=\"bp\">.</span><span class=\"mi\">0</span><span class=\"bp\">.</span><span class=\"mi\">0</span> <span class=\"n\">build</span> <span class=\"n\">script.</span>\n<span class=\"n\">npm</span> <span class=\"n\">ERR</span><span class=\"bp\">!</span> <span class=\"n\">This</span> <span class=\"n\">is</span> <span class=\"n\">probably</span> <span class=\"n\">not</span> <span class=\"n\">a</span> <span class=\"n\">problem</span> <span class=\"k\">with</span> <span class=\"n\">npm.</span> <span class=\"n\">There</span> <span class=\"n\">is</span> <span class=\"n\">likely</span> <span class=\"n\">additional</span> <span class=\"n\">logging</span> <span class=\"n\">output</span> <span class=\"n\">above.</span>\n\n<span class=\"n\">npm</span> <span class=\"n\">ERR</span><span class=\"bp\">!</span> <span class=\"n\">A</span> <span class=\"n\">complete</span> <span class=\"n\">log</span> <span class=\"n\">of</span> <span class=\"n\">this</span> <span class=\"n\">run</span> <span class=\"n\">can</span> <span class=\"n\">be</span> <span class=\"n\">found</span> <span class=\"k\">in</span><span class=\"o\">:</span>\n<span class=\"n\">npm</span> <span class=\"n\">ERR</span><span class=\"bp\">!</span>     <span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">tomass</span><span class=\"bp\">/.</span><span class=\"n\">npm</span><span class=\"bp\">/</span><span class=\"n\">_logs</span><span class=\"bp\">/</span><span class=\"mi\">2022</span><span class=\"bp\">-</span><span class=\"mi\">08</span><span class=\"bp\">-</span><span class=\"mi\">11</span><span class=\"n\">T23_53_44_208Z</span><span class=\"bp\">-</span><span class=\"n\">debug.log</span>\n<span class=\"n\">error</span><span class=\"o\">:</span> <span class=\"n\">external</span> <span class=\"n\">command</span> <span class=\"bp\">`</span><span class=\"n\">npm</span><span class=\"bp\">`</span> <span class=\"n\">exited</span> <span class=\"k\">with</span> <span class=\"n\">code</span> <span class=\"mi\">1</span>\n</code></pre></div>",
        "id": 293028833,
        "sender_full_name": "Tomas Skrivan",
        "timestamp": 1660262927
    },
    {
        "content": "<p>RPC stands for \"remote procedure call\". It's basically a way for a program running inside VSCode to directly call a function inside the lean executable (or vice versa)</p>",
        "id": 293031142,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1660265118
    },
    {
        "content": "<p>Check your npm versions, this is what I'm using:</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"o\">(</span><span class=\"n\">base</span><span class=\"o\">)</span> <span class=\"n\">chris</span><span class=\"bp\">@</span><span class=\"n\">clovett15</span><span class=\"o\">:</span><span class=\"bp\">~/</span><span class=\"n\">git</span><span class=\"bp\">/</span><span class=\"n\">lean4</span><span class=\"bp\">-</span><span class=\"n\">samples</span><span class=\"bp\">/</span><span class=\"n\">RubiksCube</span><span class=\"bp\">/</span><span class=\"n\">widget</span><span class=\"bp\">$</span> <span class=\"n\">npm</span> <span class=\"c1\">--version</span>\n<span class=\"mi\">8</span><span class=\"bp\">.</span><span class=\"mi\">5</span><span class=\"bp\">.</span><span class=\"mi\">5</span>\n<span class=\"o\">(</span><span class=\"n\">base</span><span class=\"o\">)</span> <span class=\"n\">chris</span><span class=\"bp\">@</span><span class=\"n\">clovett15</span><span class=\"o\">:</span><span class=\"bp\">~/</span><span class=\"n\">git</span><span class=\"bp\">/</span><span class=\"n\">lean4</span><span class=\"bp\">-</span><span class=\"n\">samples</span><span class=\"bp\">/</span><span class=\"n\">RubiksCube</span><span class=\"bp\">/</span><span class=\"n\">widget</span><span class=\"bp\">$</span> <span class=\"n\">node</span> <span class=\"c1\">--version</span>\n<span class=\"n\">v16.15.0</span>\n</code></pre></div>\n<p>then I do this:</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"n\">cd</span> <span class=\"n\">widget</span>\n<span class=\"n\">npm</span> <span class=\"n\">install</span>\n<span class=\"n\">cd</span> <span class=\"bp\">..</span>\n<span class=\"n\">lake</span> <span class=\"n\">build</span> <span class=\"n\">rubiksJs</span>\n<span class=\"n\">lake</span> <span class=\"n\">build</span>\n<span class=\"n\">code</span> <span class=\"bp\">.</span>\n</code></pre></div>\n<p>If you are on Windows you may need some other fixes I'm working on.</p>",
        "id": 293031380,
        "sender_full_name": "Chris Lovett",
        "timestamp": 1660265351
    },
    {
        "content": "<blockquote>\n<p>When I copy paste the code snippets the formatting is all messed up. For example copy pasting the <code>getType</code> method to VS Code I get</p>\n</blockquote>\n<p>Ah that's unfortunate. The tutorial is compiled from a literate Lean file <a href=\"https://github.com/leanprover/lean4/blob/104196e599b3f7ff00ceffec112dc4a705cc279d/doc/examples/widgets.lean\">here</a>, we should probably link it from the leanink html. (CC <span class=\"user-mention\" data-user-id=\"110024\">@Sebastian Ullrich</span> )</p>",
        "id": 293061128,
        "sender_full_name": "Wojciech Nawrocki",
        "timestamp": 1660290774
    },
    {
        "content": "<blockquote>\n<p>When building the rubiks cube example I got an error the following error. I have zero experience with web development, so it is gibberish to me</p>\n</blockquote>\n<p>It looks like the widget build forgot to install its dependencies. As Chris says, you may have an old Node.js version or something, but it's hard to say. However you should not have to run all these steps yourself. The following two steps suffice for me on a fresh clone:</p>\n<div class=\"codehilite\" data-code-language=\"Bash\"><pre><span></span><code>lake build rubiksJs\ncode Rubiks.lean\n</code></pre></div>\n<p>If these don't suffice, it's a bug I'd say.</p>",
        "id": 293061968,
        "sender_full_name": "Wojciech Nawrocki",
        "timestamp": 1660291042
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"128280\">Wojciech Nawrocki</span> <a href=\"#narrow/stream/270676-lean4/topic/Testing.20out.20widgets/near/293061128\">said</a>:</p>\n<blockquote>\n<blockquote>\n<p>When I copy paste the code snippets the formatting is all messed up. For example copy pasting the <code>getType</code> method to VS Code I get</p>\n</blockquote>\n<p>Ah that's unfortunate. The tutorial is compiled from a literate Lean file <a href=\"https://github.com/leanprover/lean4/blob/104196e599b3f7ff00ceffec112dc4a705cc279d/doc/examples/widgets.lean\">here</a>, we should probably link it from the leanink html. (CC <span class=\"user-mention silent\" data-user-id=\"110024\">Sebastian Ullrich</span> )</p>\n</blockquote>\n<p>We can do that, would be even better to fix this in LeanInk though</p>",
        "id": 293062521,
        "sender_full_name": "Sebastian Ullrich",
        "timestamp": 1660291184
    },
    {
        "content": "<blockquote>\n<p>It is not explained what \"RPC method\" is. What does the RPC stand for?</p>\n</blockquote>\n<p>The acronym is now expanded in the tutorial.</p>",
        "id": 293066267,
        "sender_full_name": "Wojciech Nawrocki",
        "timestamp": 1660293170
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"128280\">Wojciech Nawrocki</span> <a href=\"#narrow/stream/270676-lean4/topic/Testing.20out.20widgets/near/293061968\">said</a>:</p>\n<blockquote>\n<blockquote>\n<p>When building the rubiks cube example I got an error the following error. I have zero experience with web development, so it is gibberish to me</p>\n</blockquote>\n<p>It looks like the widget build forgot to install its dependencies. As Chris says, you may have an old Node.js version or something, but it's hard to say. However you should not have to run all these steps yourself. The following two steps suffice for me on a fresh clone:</p>\n<div class=\"codehilite\" data-code-language=\"Bash\"><pre><span></span><code>lake build rubiksJs\ncode Rubiks.lean\n</code></pre></div>\n<p>If these don't suffice, it's a bug I'd say.</p>\n</blockquote>\n<p>This unfortunately does not work for me. </p>\n<p>I have <code>npm --version = 6.14.4</code> and <code>nodejs --version = v10.19.0</code>. I guess these are default versions on Ubuuntu 20.04. Do I need to upgrade? (I have tried few upgrade commands from stack exchange but without success yet)</p>",
        "id": 293090363,
        "sender_full_name": "Tomas Skrivan",
        "timestamp": 1660304296
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"346070\">Tomas Skrivan</span> <a href=\"#narrow/stream/270676-lean4/topic/Testing.20out.20widgets/near/293090363\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"128280\">Wojciech Nawrocki</span> <a href=\"#narrow/stream/270676-lean4/topic/Testing.20out.20widgets/near/293061968\">said</a>:</p>\n<blockquote>\n<blockquote>\n<p>When building the rubiks cube example I got an error the following error. I have zero experience with web development, so it is gibberish to me</p>\n</blockquote>\n<p>It looks like the widget build forgot to install its dependencies. As Chris says, you may have an old Node.js version or something, but it's hard to say. However you should not have to run all these steps yourself. The following two steps suffice for me on a fresh clone:</p>\n<div class=\"codehilite\" data-code-language=\"Bash\"><pre><span></span><code>lake build rubiksJs\ncode Rubiks.lean\n</code></pre></div>\n<p>If these don't suffice, it's a bug I'd say.</p>\n</blockquote>\n<p>This unfortunately does not work for me. </p>\n<p>I have <code>npm --version = 6.14.4</code> and <code>nodejs --version = v10.19.0</code>. I guess these are default versions on Ubuuntu 20.04. Do I need to upgrade? (I have tried few upgrade commands from stack exchange but without success yet)</p>\n</blockquote>\n<p>I see, these are very old versions. I can't say for sure that this will solve the issue but it's definitely worth trying a newer one. A good user-directory installation method is <a href=\"https://github.com/nvm-sh/nvm\">nvm</a>, it'll pull something newer than your distro's version. It works basically like <code>elan</code>.</p>",
        "id": 293094586,
        "sender_full_name": "Wojciech Nawrocki",
        "timestamp": 1660305901
    },
    {
        "content": "<p>Great, got it working now. It is super cool!</p>",
        "id": 293096494,
        "sender_full_name": "Tomas Skrivan",
        "timestamp": 1660306532
    }
]