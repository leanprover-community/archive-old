[
    {
        "content": "<p>I'm having a terrible time building lean4 from source on macos. A week or two ago I could do this fine, but today I'm out of luck.</p>\n<p>I'm running on Big Sur, with XCode installed, and the XCode command line tools installed. I've run <code>brew install cmake gmp ccache</code> per the <a href=\"https://leanprover.github.io/lean4/doc/make/osx-10.9.html\">macos build instructions</a>.</p>\n<p>Running</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"n\">mkdir</span> <span class=\"bp\">-</span><span class=\"n\">p</span> <span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">release</span>\n<span class=\"n\">cd</span> <span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">release</span>\n<span class=\"n\">cmake</span> <span class=\"bp\">../..</span>\n<span class=\"n\">make</span>\n</code></pre></div>\n<p>gives me</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"o\">[</span> <span class=\"mi\">78</span><span class=\"bp\">%</span><span class=\"o\">]</span> <span class=\"n\">Built</span> <span class=\"n\">target</span> <span class=\"n\">leancpp</span>\n<span class=\"o\">[</span>    <span class=\"o\">]</span> <span class=\"n\">Building</span> <span class=\"bp\">../</span><span class=\"n\">stdlib</span><span class=\"bp\">//</span><span class=\"n\">Init</span><span class=\"bp\">/</span><span class=\"n\">Data.c</span>\n<span class=\"n\">clang</span><span class=\"o\">:</span> <span class=\"n\">error</span><span class=\"o\">:</span> <span class=\"n\">invalid</span> <span class=\"n\">version</span> <span class=\"n\">number</span> <span class=\"k\">in</span> <span class=\"bp\">'-</span><span class=\"n\">mmacosx</span><span class=\"bp\">-</span><span class=\"n\">version</span><span class=\"bp\">-</span><span class=\"n\">min</span><span class=\"bp\">='</span>\n</code></pre></div>\n<p>Adding <code>export MACOSX_DEPLOYMENT_TARGET=10.14</code> resolves this issue (CI already does this; I'll make a PR for the manual), but then I get:</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"o\">[</span>    <span class=\"o\">]</span> <span class=\"n\">Building</span> <span class=\"bp\">/</span><span class=\"n\">Users</span><span class=\"bp\">/</span><span class=\"n\">scott</span><span class=\"bp\">/</span><span class=\"n\">projects</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"bp\">/</span><span class=\"n\">lean4</span><span class=\"bp\">/</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">release</span><span class=\"bp\">/</span><span class=\"n\">stage0</span><span class=\"bp\">/</span><span class=\"n\">bin</span><span class=\"bp\">/</span><span class=\"n\">lean</span>\n<span class=\"n\">ld</span><span class=\"o\">:</span> <span class=\"n\">library</span> <span class=\"n\">not</span> <span class=\"n\">found</span> <span class=\"n\">for</span> <span class=\"bp\">-</span><span class=\"n\">lSystem</span>\n<span class=\"n\">clang</span><span class=\"o\">:</span> <span class=\"n\">error</span><span class=\"o\">:</span> <span class=\"n\">linker</span> <span class=\"n\">command</span> <span class=\"n\">failed</span> <span class=\"k\">with</span> <span class=\"n\">exit</span> <span class=\"n\">code</span> <span class=\"mi\">1</span> <span class=\"o\">(</span><span class=\"n\">use</span> <span class=\"bp\">-</span><span class=\"n\">v</span> <span class=\"n\">to</span> <span class=\"n\">see</span> <span class=\"n\">invocation</span><span class=\"o\">)</span>\n</code></pre></div>\n<p>Does anyone know what to do to fix this? Has anyone successfully built lean4 on macos recently?</p>",
        "id": 256672653,
        "sender_full_name": "Scott Morrison",
        "timestamp": 1633654218
    },
    {
        "content": "<p>Yes you need <code>MACOSX_DEPLOYMENT_TARGET</code> set</p>",
        "id": 256675299,
        "sender_full_name": "Julian Berman",
        "timestamp": 1633656394
    },
    {
        "content": "<p>This changed recently I think, not sure why, but also I put lean 4 in a tap</p>",
        "id": 256675315,
        "sender_full_name": "Julian Berman",
        "timestamp": 1633656408
    },
    {
        "content": "<p>So you can feel free to use that as well</p>",
        "id": 256675320,
        "sender_full_name": "Julian Berman",
        "timestamp": 1633656414
    },
    {
        "content": "<p><code>brew install --head julian/tap/lean</code></p>",
        "id": 256675333,
        "sender_full_name": "Julian Berman",
        "timestamp": 1633656433
    },
    {
        "content": "<p>Otherwise if you want to do it yourself you need <a href=\"https://github.com/Julian/homebrew-tap/blob/master/Formula/lean.rb#L20\">https://github.com/Julian/homebrew-tap/blob/master/Formula/lean.rb#L20</a></p>",
        "id": 256675345,
        "sender_full_name": "Julian Berman",
        "timestamp": 1633656455
    },
    {
        "content": "<p>Very frustrating. <code>brew install --build-from-source --head julian/tap/lean</code> does indeed work. Using the tap is not satisfactory: I would really prefer to just be able to do this with <code>cmake</code> and <code>make</code>, so that I can pass other compiler flags.</p>",
        "id": 256677396,
        "sender_full_name": "Scott Morrison",
        "timestamp": 1633658288
    },
    {
        "content": "<p>I've tried using the same arguments for <code>cmake</code> and <code>make</code> that <code>brew install --build-from-source --verbose</code> reports using:</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"n\">cmake</span> <span class=\"bp\">../..</span> <span class=\"bp\">-</span><span class=\"n\">DCMAKE_INSTALL_PREFIX</span><span class=\"bp\">=/</span><span class=\"n\">usr</span><span class=\"bp\">/</span><span class=\"kn\">local</span><span class=\"bp\">/</span><span class=\"n\">Cellar</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"bp\">/</span><span class=\"mi\">2</span> <span class=\"bp\">-</span><span class=\"n\">DCMAKE_INSTALL_LIBDIR</span><span class=\"bp\">=</span><span class=\"n\">lib</span> <span class=\"bp\">-</span><span class=\"n\">DCMAKE_BUILD_TYPE</span><span class=\"bp\">=</span><span class=\"n\">Release</span> <span class=\"bp\">-</span><span class=\"n\">DCMAKE_FIND_FRAMEWORK</span><span class=\"bp\">=</span><span class=\"n\">LAST</span> <span class=\"bp\">-</span><span class=\"n\">DCMAKE_VERBOSE_MAKEFILE</span><span class=\"bp\">=</span><span class=\"n\">ON</span> <span class=\"bp\">-</span><span class=\"n\">Wno</span><span class=\"bp\">-</span><span class=\"n\">dev</span> <span class=\"bp\">-</span><span class=\"n\">DBUILD_TESTING</span><span class=\"bp\">=</span><span class=\"n\">OFF</span> <span class=\"bp\">-</span><span class=\"n\">DCMAKE_OSX_SYSROOT</span><span class=\"bp\">=/</span><span class=\"n\">Library</span><span class=\"bp\">/</span><span class=\"n\">Developer</span><span class=\"bp\">/</span><span class=\"n\">CommandLineTools</span><span class=\"bp\">/</span><span class=\"n\">SDKs</span><span class=\"bp\">/</span><span class=\"n\">MacOSX11.sdk</span>\n\n<span class=\"n\">make</span> <span class=\"n\">MACOSX_DEPLOYMENT_TARGET</span><span class=\"bp\">=</span><span class=\"mi\">11</span><span class=\"bp\">.</span><span class=\"mi\">00</span> <span class=\"bp\">-</span><span class=\"n\">j36</span>\n</code></pre></div>\n<p>but I still get the same <code>ld: library not found for -lSystem</code> error.</p>\n<p>There is some difference between the environment <code>brew install</code> is providing and the terminal. :-(</p>",
        "id": 256677667,
        "sender_full_name": "Scott Morrison",
        "timestamp": 1633658500
    },
    {
        "content": "<p>Fair enough. Perhaps which compiler you've got first on your path?</p>",
        "id": 256677907,
        "sender_full_name": "Julian Berman",
        "timestamp": 1633658691
    },
    {
        "content": "<p>Otherwise when I compile manually I do...</p>",
        "id": 256677915,
        "sender_full_name": "Julian Berman",
        "timestamp": 1633658697
    },
    {
        "content": "<p><code>rm -rf build/release &amp;&amp; mkdir -p build/release &amp;&amp; cd build/release &amp;&amp; cmake -DCMAKE_INSTALL_PREFIX=/opt/lean4/nightly/ ../.. &amp;&amp; make -j36 SDKROOT=$(xcrun --sdk macosx --show-sdk-path) MACOSX_DEPLOYMENT_TARGET=11.00</code></p>",
        "id": 256677946,
        "sender_full_name": "Julian Berman",
        "timestamp": 1633658722
    },
    {
        "content": "<p>Perhaps try that just in case?</p>",
        "id": 256677950,
        "sender_full_name": "Julian Berman",
        "timestamp": 1633658727
    },
    {
        "content": "<p>Looks like the <code>SDKROOT</code> might be the trick.</p>",
        "id": 256678145,
        "sender_full_name": "Scott Morrison",
        "timestamp": 1633658895
    },
    {
        "content": "<p>Great.</p>",
        "id": 256678155,
        "sender_full_name": "Julian Berman",
        "timestamp": 1633658903
    },
    {
        "content": "<p>This might be due to the following changed line: <a href=\"https://github.com/leanprover/lean4/blob/305d035f17d9b4d0297c0345bf67e5b9b360595b/src/CMakeLists.txt#L431\">https://github.com/leanprover/lean4/blob/305d035f17d9b4d0297c0345bf67e5b9b360595b/src/CMakeLists.txt#L431</a><br>\nCould you post the output of <code>grep LEANC_OPTS build/release/stage1/stdlib.make</code>?</p>",
        "id": 256747405,
        "sender_full_name": "Sebastian Ullrich",
        "timestamp": 1633703049
    },
    {
        "content": "<p>Mine:</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"bp\">~/</span><span class=\"n\">Development</span><span class=\"bp\">/</span><span class=\"n\">lean4</span> <span class=\"n\">is</span> <span class=\"n\">a</span> <span class=\"n\">git</span> <span class=\"n\">repository</span> <span class=\"n\">on</span> <span class=\"n\">master</span>\n<span class=\"bp\">⊙</span>  <span class=\"n\">grep</span> <span class=\"n\">LEANC_OPTS</span> <span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">release</span><span class=\"bp\">/</span><span class=\"n\">stage1</span><span class=\"bp\">/</span><span class=\"n\">stdlib.make</span>                                                                                                                                 <span class=\"n\">julian</span><span class=\"bp\">@</span><span class=\"n\">Airm</span>\n        <span class=\"n\">LEANC_OPTS</span><span class=\"bp\">+=</span><span class=\"s2\">\" -O3 -DNDEBUG -isysroot/Library/Developer/CommandLineTools/SDKs/MacOSX.sdk -mmacosx-version-min=11.00\"</span><span class=\"bp\">\\</span>\n        <span class=\"bp\">+</span><span class=\"s2\">\"/Users/julian/Development/lean4/build/release/stage1/bin/leanmake\"</span> <span class=\"n\">lib</span> <span class=\"n\">PKG</span><span class=\"bp\">=</span><span class=\"n\">Init</span> <span class=\"bp\">$</span><span class=\"o\">(</span><span class=\"n\">LEANMAKE_OPTS</span><span class=\"o\">)</span> <span class=\"n\">LEANC_OPTS</span><span class=\"bp\">+=-</span><span class=\"n\">DLEAN_EXPORTING</span>\n        <span class=\"bp\">+</span><span class=\"s2\">\"/Users/julian/Development/lean4/build/release/stage1/bin/leanmake\"</span> <span class=\"n\">lib</span> <span class=\"n\">PKG</span><span class=\"bp\">=</span><span class=\"n\">Std</span> <span class=\"bp\">$</span><span class=\"o\">(</span><span class=\"n\">LEANMAKE_OPTS</span><span class=\"o\">)</span> <span class=\"n\">LEANC_OPTS</span><span class=\"bp\">+=-</span><span class=\"n\">DLEAN_EXPORTING</span>\n        <span class=\"bp\">+</span><span class=\"s2\">\"/Users/julian/Development/lean4/build/release/stage1/bin/leanmake\"</span> <span class=\"n\">lib</span> <span class=\"n\">PKG</span><span class=\"bp\">=</span><span class=\"n\">Lean</span> <span class=\"bp\">$</span><span class=\"o\">(</span><span class=\"n\">LEANMAKE_OPTS</span><span class=\"o\">)</span> <span class=\"n\">LEANC_OPTS</span><span class=\"bp\">+=-</span><span class=\"n\">DLEAN_EXPORTING</span>\n\n<span class=\"bp\">~/</span><span class=\"n\">Development</span><span class=\"bp\">/</span><span class=\"n\">lean4</span> <span class=\"n\">is</span> <span class=\"n\">a</span> <span class=\"n\">git</span> <span class=\"n\">repository</span> <span class=\"n\">on</span> <span class=\"n\">master</span>\n<span class=\"bp\">⊙</span>  <span class=\"n\">xcrun</span> <span class=\"c1\">--sdk macosx --show-sdk-path                                                                                                                                               julian@Airm</span>\n<span class=\"bp\">/</span><span class=\"n\">Library</span><span class=\"bp\">/</span><span class=\"n\">Developer</span><span class=\"bp\">/</span><span class=\"n\">CommandLineTools</span><span class=\"bp\">/</span><span class=\"n\">SDKs</span><span class=\"bp\">/</span><span class=\"n\">MacOSX.sdk</span>\n</code></pre></div>",
        "id": 256757680,
        "sender_full_name": "Julian Berman",
        "timestamp": 1633707120
    },
    {
        "content": "<p>Thanks. We're working on a fix.</p>",
        "id": 256757793,
        "sender_full_name": "Sebastian Ullrich",
        "timestamp": 1633707158
    },
    {
        "content": "<p>It should work without any extra flags again now</p>",
        "id": 256767125,
        "sender_full_name": "Sebastian Ullrich",
        "timestamp": 1633710898
    },
    {
        "content": "<p>Thanks! I can confirm I don't need <code>MACOSX_DEPLOYMENT_TARGET</code> (which for me was newly required). Though supplying <code>SDKROOT</code> still is necessary (but that was at least for me always necessary)</p>",
        "id": 256779241,
        "sender_full_name": "Julian Berman",
        "timestamp": 1633715726
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"110024\">@Sebastian Ullrich</span> fyi, you probably have already noticed this, but in case you missed it, that fix broke the Nix CI macOS build</p>",
        "id": 256793265,
        "sender_full_name": "Mac",
        "timestamp": 1633721453
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"321696\">@Julian Berman</span> CMake has some built-in logic for inferring the SDK, which seems to work on CI and on Leo's machine, but apparently not on yours for some reason</p>",
        "id": 256796249,
        "sender_full_name": "Sebastian Ullrich",
        "timestamp": 1633722774
    },
    {
        "content": "<p>Hrm. OK, not sure why -- though I guess let's see which bucket Scott falls into, probably not mine if he hasn't had to set it till now.</p>",
        "id": 256798664,
        "sender_full_name": "Julian Berman",
        "timestamp": 1633723896
    },
    {
        "content": "<p>Unfortunately on <code>master</code>, without any flags, I am still failing with</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"o\">[</span>    <span class=\"o\">]</span> <span class=\"n\">Linking</span> <span class=\"bp\">/</span><span class=\"n\">Users</span><span class=\"bp\">/</span><span class=\"n\">scott</span><span class=\"bp\">/</span><span class=\"n\">projects</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"bp\">/</span><span class=\"n\">lean4</span><span class=\"bp\">/</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">release</span><span class=\"bp\">/</span><span class=\"n\">stage1</span><span class=\"bp\">/</span><span class=\"n\">bin</span><span class=\"bp\">/</span><span class=\"n\">leanc</span>\n<span class=\"n\">ld</span><span class=\"o\">:</span> <span class=\"n\">library</span> <span class=\"n\">not</span> <span class=\"n\">found</span> <span class=\"n\">for</span> <span class=\"bp\">-</span><span class=\"n\">lSystem</span>\n<span class=\"n\">clang</span><span class=\"o\">:</span> <span class=\"n\">error</span><span class=\"o\">:</span> <span class=\"n\">linker</span> <span class=\"n\">command</span> <span class=\"n\">failed</span> <span class=\"k\">with</span> <span class=\"n\">exit</span> <span class=\"n\">code</span> <span class=\"mi\">1</span> <span class=\"o\">(</span><span class=\"n\">use</span> <span class=\"bp\">-</span><span class=\"n\">v</span> <span class=\"n\">to</span> <span class=\"n\">see</span> <span class=\"n\">invocation</span><span class=\"o\">)</span>\n</code></pre></div>",
        "id": 256808173,
        "sender_full_name": "Scott Morrison",
        "timestamp": 1633728268
    },
    {
        "content": "<p>And</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"n\">make</span> <span class=\"bp\">-</span><span class=\"n\">j36</span> <span class=\"n\">SDKROOT</span><span class=\"bp\">=$</span><span class=\"o\">(</span><span class=\"n\">xcrun</span> <span class=\"c1\">--sdk macosx --show-sdk-path)</span>\n</code></pre></div>\n<p>works.</p>",
        "id": 256809164,
        "sender_full_name": "Scott Morrison",
        "timestamp": 1633728816
    },
    {
        "content": "<p>For reference <code>xcrun</code> is reporting <code>/Library/Developer/CommandLineTools/SDKs/MacOSX.sdk</code>, and in <code>/Library/Developer/CommandLineTools/SDKs/</code> I have</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"bp\">%</span> <span class=\"n\">ls</span> <span class=\"bp\">-</span><span class=\"n\">al</span>\n<span class=\"n\">total</span> <span class=\"mi\">0</span>\n<span class=\"n\">drwxr</span><span class=\"bp\">-</span><span class=\"n\">xr</span><span class=\"bp\">-</span><span class=\"n\">x</span>  <span class=\"mi\">6</span> <span class=\"n\">root</span>  <span class=\"n\">wheel</span>  <span class=\"mi\">192</span>  <span class=\"mi\">8</span> <span class=\"n\">Oct</span> <span class=\"mi\">12</span><span class=\"o\">:</span><span class=\"mi\">39</span> <span class=\"bp\">.</span>\n<span class=\"n\">drwxr</span><span class=\"bp\">-</span><span class=\"n\">xr</span><span class=\"bp\">-</span><span class=\"n\">x</span>  <span class=\"mi\">5</span> <span class=\"n\">root</span>  <span class=\"n\">admin</span>  <span class=\"mi\">160</span>  <span class=\"mi\">8</span> <span class=\"n\">Oct</span> <span class=\"mi\">11</span><span class=\"o\">:</span><span class=\"mi\">08</span> <span class=\"bp\">..</span>\n<span class=\"n\">lrwxr</span><span class=\"bp\">-</span><span class=\"n\">xr</span><span class=\"bp\">-</span><span class=\"n\">x</span>  <span class=\"mi\">1</span> <span class=\"n\">root</span>  <span class=\"n\">wheel</span>   <span class=\"mi\">14</span>  <span class=\"mi\">8</span> <span class=\"n\">Oct</span> <span class=\"mi\">12</span><span class=\"o\">:</span><span class=\"mi\">39</span> <span class=\"n\">MacOSX.sdk</span> <span class=\"bp\">-&gt;</span> <span class=\"n\">MacOSX11.3.sdk</span>\n<span class=\"n\">drwxr</span><span class=\"bp\">-</span><span class=\"n\">xr</span><span class=\"bp\">-</span><span class=\"n\">x</span>  <span class=\"mi\">7</span> <span class=\"n\">root</span>  <span class=\"n\">wheel</span>  <span class=\"mi\">224</span> <span class=\"mi\">30</span> <span class=\"n\">Nov</span>  <span class=\"mi\">2020</span> <span class=\"n\">MacOSX11.1.sdk</span>\n<span class=\"n\">drwxr</span><span class=\"bp\">-</span><span class=\"n\">xr</span><span class=\"bp\">-</span><span class=\"n\">x</span>  <span class=\"mi\">7</span> <span class=\"n\">root</span>  <span class=\"n\">wheel</span>  <span class=\"mi\">224</span>  <span class=\"mi\">8</span> <span class=\"n\">Oct</span> <span class=\"mi\">12</span><span class=\"o\">:</span><span class=\"mi\">39</span> <span class=\"n\">MacOSX11.3.sdk</span>\n<span class=\"n\">lrwxr</span><span class=\"bp\">-</span><span class=\"n\">xr</span><span class=\"bp\">-</span><span class=\"n\">x</span>  <span class=\"mi\">1</span> <span class=\"n\">root</span>  <span class=\"n\">wheel</span>   <span class=\"mi\">14</span>  <span class=\"mi\">8</span> <span class=\"n\">Oct</span> <span class=\"mi\">12</span><span class=\"o\">:</span><span class=\"mi\">38</span> <span class=\"n\">MacOSX11.sdk</span> <span class=\"bp\">-&gt;</span> <span class=\"n\">MacOSX11.3.sdk</span>\n</code></pre></div>",
        "id": 256809318,
        "sender_full_name": "Scott Morrison",
        "timestamp": 1633728905
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"110087\">@Scott Morrison</span> That's weird though, it must have succeeded for <code>stage0/bin/lean</code> this time? Could you try again with a clean build directory and <code>make -j36 VERBOSE=1</code>, and post the cmdlines after \"Linking ...\" if the error persists?</p>",
        "id": 256851155,
        "sender_full_name": "Sebastian Ullrich",
        "timestamp": 1633766928
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"o\">[</span>    <span class=\"o\">]</span> <span class=\"n\">Linking</span> <span class=\"bp\">/</span><span class=\"n\">Users</span><span class=\"bp\">/</span><span class=\"n\">scott</span><span class=\"bp\">/</span><span class=\"n\">projects</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"bp\">/</span><span class=\"n\">lean4</span><span class=\"bp\">/</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">release</span><span class=\"bp\">/</span><span class=\"n\">stage1</span><span class=\"bp\">/</span><span class=\"n\">bin</span><span class=\"bp\">/</span><span class=\"n\">leanc</span>\n<span class=\"bp\">/</span><span class=\"n\">Users</span><span class=\"bp\">/</span><span class=\"n\">scott</span><span class=\"bp\">/</span><span class=\"n\">projects</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"bp\">/</span><span class=\"n\">lean4</span><span class=\"bp\">/</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">release</span><span class=\"bp\">/</span><span class=\"n\">stage1</span><span class=\"bp\">/</span><span class=\"n\">leanc.sh</span> <span class=\"bp\">-</span><span class=\"n\">o</span> <span class=\"s2\">\"/Users/scott/projects/lean/lean4/build/release/stage1/bin/leanc\"</span> <span class=\"bp\">/</span><span class=\"n\">Users</span><span class=\"bp\">/</span><span class=\"n\">scott</span><span class=\"bp\">/</span><span class=\"n\">projects</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"bp\">/</span><span class=\"n\">lean4</span><span class=\"bp\">/</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">release</span><span class=\"bp\">/</span><span class=\"n\">stage1</span><span class=\"bp\">/</span><span class=\"n\">temp</span><span class=\"bp\">/</span><span class=\"n\">Leanc.o</span> <span class=\"bp\">-</span><span class=\"n\">lleanshared</span>  <span class=\"bp\">-</span><span class=\"n\">Wl</span><span class=\"o\">,</span><span class=\"bp\">-</span><span class=\"n\">rpath</span><span class=\"o\">,</span><span class=\"bp\">@</span><span class=\"n\">executable_path</span><span class=\"bp\">/../</span><span class=\"n\">lib</span> <span class=\"bp\">-</span><span class=\"n\">Wl</span><span class=\"o\">,</span><span class=\"bp\">-</span><span class=\"n\">rpath</span><span class=\"o\">,</span><span class=\"bp\">@</span><span class=\"n\">executable_path</span><span class=\"bp\">/../</span><span class=\"n\">lib</span><span class=\"bp\">/</span><span class=\"n\">lean</span>\n<span class=\"n\">ld</span><span class=\"o\">:</span> <span class=\"n\">library</span> <span class=\"n\">not</span> <span class=\"n\">found</span> <span class=\"n\">for</span> <span class=\"bp\">-</span><span class=\"n\">lSystem</span>\n<span class=\"n\">clang</span><span class=\"o\">:</span> <span class=\"n\">error</span><span class=\"o\">:</span> <span class=\"n\">linker</span> <span class=\"n\">command</span> <span class=\"n\">failed</span> <span class=\"k\">with</span> <span class=\"n\">exit</span> <span class=\"n\">code</span> <span class=\"mi\">1</span> <span class=\"o\">(</span><span class=\"n\">use</span> <span class=\"bp\">-</span><span class=\"n\">v</span> <span class=\"n\">to</span> <span class=\"n\">see</span> <span class=\"n\">invocation</span><span class=\"o\">)</span>\n<span class=\"n\">make</span><span class=\"o\">[</span><span class=\"mi\">7</span><span class=\"o\">]:</span> <span class=\"bp\">***</span> <span class=\"o\">[</span><span class=\"bp\">/</span><span class=\"n\">Users</span><span class=\"bp\">/</span><span class=\"n\">scott</span><span class=\"bp\">/</span><span class=\"n\">projects</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"bp\">/</span><span class=\"n\">lean4</span><span class=\"bp\">/</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">release</span><span class=\"bp\">/</span><span class=\"n\">stage1</span><span class=\"bp\">/</span><span class=\"n\">bin</span><span class=\"bp\">/</span><span class=\"n\">leanc</span><span class=\"o\">]</span> <span class=\"n\">Error</span> <span class=\"mi\">1</span>\n<span class=\"n\">make</span><span class=\"o\">[</span><span class=\"mi\">6</span><span class=\"o\">]:</span> <span class=\"bp\">***</span> <span class=\"o\">[</span><span class=\"n\">Leanc</span><span class=\"o\">]</span> <span class=\"n\">Error</span> <span class=\"mi\">2</span>\n<span class=\"n\">make</span><span class=\"o\">[</span><span class=\"mi\">5</span><span class=\"o\">]:</span> <span class=\"bp\">***</span> <span class=\"o\">[</span><span class=\"n\">CMakeFiles</span><span class=\"bp\">/</span><span class=\"n\">leanc</span><span class=\"o\">]</span> <span class=\"n\">Error</span> <span class=\"mi\">2</span>\n<span class=\"n\">make</span><span class=\"o\">[</span><span class=\"mi\">4</span><span class=\"o\">]:</span> <span class=\"bp\">***</span> <span class=\"o\">[</span><span class=\"n\">CMakeFiles</span><span class=\"bp\">/</span><span class=\"n\">leanc.dir</span><span class=\"bp\">/</span><span class=\"n\">all</span><span class=\"o\">]</span> <span class=\"n\">Error</span> <span class=\"mi\">2</span>\n<span class=\"n\">make</span><span class=\"o\">[</span><span class=\"mi\">4</span><span class=\"o\">]:</span> <span class=\"bp\">***</span> <span class=\"n\">Waiting</span> <span class=\"n\">for</span> <span class=\"n\">unfinished</span> <span class=\"n\">jobs....</span>\n<span class=\"n\">mv</span> <span class=\"s2\">\"../build/release/stage1/lib/temp/Leanpkg/Build.c.tmp\"</span> <span class=\"s2\">\"../build/release/stage1/lib/temp/Leanpkg/Build.c\"</span>\n<span class=\"n\">mv</span> <span class=\"s2\">\"../build/release/stage1/lib/temp/Leanpkg/Manifest.c.tmp\"</span> <span class=\"s2\">\"../build/release/stage1/lib/temp/Leanpkg/Manifest.c\"</span>\n<span class=\"o\">[</span>    <span class=\"o\">]</span> <span class=\"n\">Building</span> <span class=\"bp\">../</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">release</span><span class=\"bp\">/</span><span class=\"n\">stage1</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"bp\">/</span><span class=\"n\">temp</span><span class=\"bp\">/</span><span class=\"n\">Leanpkg</span><span class=\"bp\">/</span><span class=\"n\">Build.c</span>\n<span class=\"o\">[</span>    <span class=\"o\">]</span> <span class=\"n\">Building</span> <span class=\"n\">Leanpkg</span><span class=\"bp\">/</span><span class=\"n\">Resolve.lean</span>\n<span class=\"bp\">/</span><span class=\"n\">Users</span><span class=\"bp\">/</span><span class=\"n\">scott</span><span class=\"bp\">/</span><span class=\"n\">projects</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"bp\">/</span><span class=\"n\">lean4</span><span class=\"bp\">/</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">release</span><span class=\"bp\">/</span><span class=\"n\">stage1</span><span class=\"bp\">/</span><span class=\"n\">leanc.sh</span> <span class=\"bp\">-</span><span class=\"n\">c</span> <span class=\"bp\">-</span><span class=\"n\">o</span> <span class=\"bp\">../</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">release</span><span class=\"bp\">/</span><span class=\"n\">stage1</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"bp\">/</span><span class=\"n\">temp</span><span class=\"bp\">/</span><span class=\"n\">Leanpkg</span><span class=\"bp\">/</span><span class=\"n\">Build.o</span> <span class=\"bp\">../</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">release</span><span class=\"bp\">/</span><span class=\"n\">stage1</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"bp\">/</span><span class=\"n\">temp</span><span class=\"bp\">/</span><span class=\"n\">Leanpkg</span><span class=\"bp\">/</span><span class=\"n\">Build.c</span> <span class=\"bp\">-</span><span class=\"n\">O3</span> <span class=\"bp\">-</span><span class=\"n\">DNDEBUG</span> <span class=\"bp\">-</span><span class=\"n\">isysroot</span><span class=\"bp\">/</span><span class=\"n\">Library</span><span class=\"bp\">/</span><span class=\"n\">Developer</span><span class=\"bp\">/</span><span class=\"n\">CommandLineTools</span><span class=\"bp\">/</span><span class=\"n\">SDKs</span><span class=\"bp\">/</span><span class=\"n\">MacOSX11.3.sdk</span>\n<span class=\"bp\">/</span><span class=\"n\">Users</span><span class=\"bp\">/</span><span class=\"n\">scott</span><span class=\"bp\">/</span><span class=\"n\">projects</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"bp\">/</span><span class=\"n\">lean4</span><span class=\"bp\">/</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">release</span><span class=\"bp\">/</span><span class=\"n\">stage0</span><span class=\"bp\">/</span><span class=\"n\">bin</span><span class=\"bp\">/</span><span class=\"n\">lean</span> <span class=\"bp\">-</span><span class=\"n\">s40000</span> <span class=\"bp\">-</span><span class=\"n\">o</span> <span class=\"s2\">\"../build/release/stage1/lib/lean/Leanpkg/Resolve.olean\"</span> <span class=\"c1\">--c=\"../build/release/stage1/lib/temp/Leanpkg/Resolve.c.tmp\" Leanpkg/Resolve.lean</span>\n<span class=\"o\">[</span>    <span class=\"o\">]</span> <span class=\"n\">Building</span> <span class=\"bp\">../</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">release</span><span class=\"bp\">/</span><span class=\"n\">stage1</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"bp\">/</span><span class=\"n\">temp</span><span class=\"bp\">/</span><span class=\"n\">Leanpkg</span><span class=\"bp\">/</span><span class=\"n\">Manifest.c</span>\n<span class=\"bp\">/</span><span class=\"n\">Users</span><span class=\"bp\">/</span><span class=\"n\">scott</span><span class=\"bp\">/</span><span class=\"n\">projects</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"bp\">/</span><span class=\"n\">lean4</span><span class=\"bp\">/</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">release</span><span class=\"bp\">/</span><span class=\"n\">stage1</span><span class=\"bp\">/</span><span class=\"n\">leanc.sh</span> <span class=\"bp\">-</span><span class=\"n\">c</span> <span class=\"bp\">-</span><span class=\"n\">o</span> <span class=\"bp\">../</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">release</span><span class=\"bp\">/</span><span class=\"n\">stage1</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"bp\">/</span><span class=\"n\">temp</span><span class=\"bp\">/</span><span class=\"n\">Leanpkg</span><span class=\"bp\">/</span><span class=\"n\">Manifest.o</span> <span class=\"bp\">../</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">release</span><span class=\"bp\">/</span><span class=\"n\">stage1</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"bp\">/</span><span class=\"n\">temp</span><span class=\"bp\">/</span><span class=\"n\">Leanpkg</span><span class=\"bp\">/</span><span class=\"n\">Manifest.c</span> <span class=\"bp\">-</span><span class=\"n\">O3</span> <span class=\"bp\">-</span><span class=\"n\">DNDEBUG</span> <span class=\"bp\">-</span><span class=\"n\">isysroot</span><span class=\"bp\">/</span><span class=\"n\">Library</span><span class=\"bp\">/</span><span class=\"n\">Developer</span><span class=\"bp\">/</span><span class=\"n\">CommandLineTools</span><span class=\"bp\">/</span><span class=\"n\">SDKs</span><span class=\"bp\">/</span><span class=\"n\">MacOSX11.3.sdk</span>\n<span class=\"n\">mv</span> <span class=\"s2\">\"../build/release/stage1/lib/temp/Leanpkg/Resolve.c.tmp\"</span> <span class=\"s2\">\"../build/release/stage1/lib/temp/Leanpkg/Resolve.c\"</span>\n<span class=\"o\">[</span>    <span class=\"o\">]</span> <span class=\"n\">Building</span> <span class=\"n\">Leanpkg.lean</span>\n<span class=\"bp\">/</span><span class=\"n\">Users</span><span class=\"bp\">/</span><span class=\"n\">scott</span><span class=\"bp\">/</span><span class=\"n\">projects</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"bp\">/</span><span class=\"n\">lean4</span><span class=\"bp\">/</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">release</span><span class=\"bp\">/</span><span class=\"n\">stage0</span><span class=\"bp\">/</span><span class=\"n\">bin</span><span class=\"bp\">/</span><span class=\"n\">lean</span> <span class=\"bp\">-</span><span class=\"n\">s40000</span> <span class=\"bp\">-</span><span class=\"n\">o</span> <span class=\"s2\">\"../build/release/stage1/lib/lean/Leanpkg.olean\"</span> <span class=\"c1\">--c=\"../build/release/stage1/lib/temp/Leanpkg.c.tmp\" Leanpkg.lean</span>\n<span class=\"o\">[</span>    <span class=\"o\">]</span> <span class=\"n\">Building</span> <span class=\"bp\">../</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">release</span><span class=\"bp\">/</span><span class=\"n\">stage1</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"bp\">/</span><span class=\"n\">temp</span><span class=\"bp\">/</span><span class=\"n\">Leanpkg</span><span class=\"bp\">/</span><span class=\"n\">Resolve.c</span>\n<span class=\"bp\">/</span><span class=\"n\">Users</span><span class=\"bp\">/</span><span class=\"n\">scott</span><span class=\"bp\">/</span><span class=\"n\">projects</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"bp\">/</span><span class=\"n\">lean4</span><span class=\"bp\">/</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">release</span><span class=\"bp\">/</span><span class=\"n\">stage1</span><span class=\"bp\">/</span><span class=\"n\">leanc.sh</span> <span class=\"bp\">-</span><span class=\"n\">c</span> <span class=\"bp\">-</span><span class=\"n\">o</span> <span class=\"bp\">../</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">release</span><span class=\"bp\">/</span><span class=\"n\">stage1</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"bp\">/</span><span class=\"n\">temp</span><span class=\"bp\">/</span><span class=\"n\">Leanpkg</span><span class=\"bp\">/</span><span class=\"n\">Resolve.o</span> <span class=\"bp\">../</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">release</span><span class=\"bp\">/</span><span class=\"n\">stage1</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"bp\">/</span><span class=\"n\">temp</span><span class=\"bp\">/</span><span class=\"n\">Leanpkg</span><span class=\"bp\">/</span><span class=\"n\">Resolve.c</span> <span class=\"bp\">-</span><span class=\"n\">O3</span> <span class=\"bp\">-</span><span class=\"n\">DNDEBUG</span> <span class=\"bp\">-</span><span class=\"n\">isysroot</span><span class=\"bp\">/</span><span class=\"n\">Library</span><span class=\"bp\">/</span><span class=\"n\">Developer</span><span class=\"bp\">/</span><span class=\"n\">CommandLineTools</span><span class=\"bp\">/</span><span class=\"n\">SDKs</span><span class=\"bp\">/</span><span class=\"n\">MacOSX11.3.sdk</span>\n<span class=\"n\">mv</span> <span class=\"s2\">\"../build/release/stage1/lib/temp/Leanpkg.c.tmp\"</span> <span class=\"s2\">\"../build/release/stage1/lib/temp/Leanpkg.c\"</span>\n<span class=\"o\">[</span>    <span class=\"o\">]</span> <span class=\"n\">Building</span> <span class=\"bp\">../</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">release</span><span class=\"bp\">/</span><span class=\"n\">stage1</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"bp\">/</span><span class=\"n\">temp</span><span class=\"bp\">/</span><span class=\"n\">Leanpkg.c</span>\n<span class=\"bp\">/</span><span class=\"n\">Users</span><span class=\"bp\">/</span><span class=\"n\">scott</span><span class=\"bp\">/</span><span class=\"n\">projects</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"bp\">/</span><span class=\"n\">lean4</span><span class=\"bp\">/</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">release</span><span class=\"bp\">/</span><span class=\"n\">stage1</span><span class=\"bp\">/</span><span class=\"n\">leanc.sh</span> <span class=\"bp\">-</span><span class=\"n\">c</span> <span class=\"bp\">-</span><span class=\"n\">o</span> <span class=\"bp\">../</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">release</span><span class=\"bp\">/</span><span class=\"n\">stage1</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"bp\">/</span><span class=\"n\">temp</span><span class=\"bp\">/</span><span class=\"n\">Leanpkg.o</span> <span class=\"bp\">../</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">release</span><span class=\"bp\">/</span><span class=\"n\">stage1</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"bp\">/</span><span class=\"n\">temp</span><span class=\"bp\">/</span><span class=\"n\">Leanpkg.c</span> <span class=\"bp\">-</span><span class=\"n\">O3</span> <span class=\"bp\">-</span><span class=\"n\">DNDEBUG</span> <span class=\"bp\">-</span><span class=\"n\">isysroot</span><span class=\"bp\">/</span><span class=\"n\">Library</span><span class=\"bp\">/</span><span class=\"n\">Developer</span><span class=\"bp\">/</span><span class=\"n\">CommandLineTools</span><span class=\"bp\">/</span><span class=\"n\">SDKs</span><span class=\"bp\">/</span><span class=\"n\">MacOSX11.3.sdk</span>\n<span class=\"o\">[</span>    <span class=\"o\">]</span> <span class=\"n\">Linking</span> <span class=\"bp\">/</span><span class=\"n\">Users</span><span class=\"bp\">/</span><span class=\"n\">scott</span><span class=\"bp\">/</span><span class=\"n\">projects</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"bp\">/</span><span class=\"n\">lean4</span><span class=\"bp\">/</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">release</span><span class=\"bp\">/</span><span class=\"n\">stage1</span><span class=\"bp\">/</span><span class=\"n\">bin</span><span class=\"bp\">/</span><span class=\"n\">leanpkg</span>\n<span class=\"bp\">/</span><span class=\"n\">Users</span><span class=\"bp\">/</span><span class=\"n\">scott</span><span class=\"bp\">/</span><span class=\"n\">projects</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"bp\">/</span><span class=\"n\">lean4</span><span class=\"bp\">/</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">release</span><span class=\"bp\">/</span><span class=\"n\">stage1</span><span class=\"bp\">/</span><span class=\"n\">leanc.sh</span> <span class=\"bp\">-</span><span class=\"n\">o</span> <span class=\"s2\">\"/Users/scott/projects/lean/lean4/build/release/stage1/bin/leanpkg\"</span> <span class=\"bp\">../</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">release</span><span class=\"bp\">/</span><span class=\"n\">stage1</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"bp\">/</span><span class=\"n\">temp</span><span class=\"bp\">/</span><span class=\"n\">Leanpkg</span><span class=\"bp\">/</span><span class=\"n\">LeanVersion.o</span> <span class=\"bp\">../</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">release</span><span class=\"bp\">/</span><span class=\"n\">stage1</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"bp\">/</span><span class=\"n\">temp</span><span class=\"bp\">/</span><span class=\"n\">Leanpkg</span><span class=\"bp\">/</span><span class=\"n\">Proc.o</span> <span class=\"bp\">../</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">release</span><span class=\"bp\">/</span><span class=\"n\">stage1</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"bp\">/</span><span class=\"n\">temp</span><span class=\"bp\">/</span><span class=\"n\">Leanpkg</span><span class=\"bp\">/</span><span class=\"n\">Manifest.o</span> <span class=\"bp\">../</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">release</span><span class=\"bp\">/</span><span class=\"n\">stage1</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"bp\">/</span><span class=\"n\">temp</span><span class=\"bp\">/</span><span class=\"n\">Leanpkg</span><span class=\"bp\">/</span><span class=\"n\">Git.o</span> <span class=\"bp\">../</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">release</span><span class=\"bp\">/</span><span class=\"n\">stage1</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"bp\">/</span><span class=\"n\">temp</span><span class=\"bp\">/</span><span class=\"n\">Leanpkg</span><span class=\"bp\">/</span><span class=\"n\">Build.o</span> <span class=\"bp\">../</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">release</span><span class=\"bp\">/</span><span class=\"n\">stage1</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"bp\">/</span><span class=\"n\">temp</span><span class=\"bp\">/</span><span class=\"n\">Leanpkg</span><span class=\"bp\">/</span><span class=\"n\">Resolve.o</span> <span class=\"bp\">../</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">release</span><span class=\"bp\">/</span><span class=\"n\">stage1</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"bp\">/</span><span class=\"n\">temp</span><span class=\"bp\">/</span><span class=\"n\">Leanpkg</span><span class=\"bp\">/</span><span class=\"n\">Toml.o</span> <span class=\"bp\">../</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">release</span><span class=\"bp\">/</span><span class=\"n\">stage1</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"bp\">/</span><span class=\"n\">temp</span><span class=\"bp\">/</span><span class=\"n\">Leanpkg.o</span> <span class=\"bp\">-</span><span class=\"n\">lleanshared</span>  <span class=\"bp\">-</span><span class=\"n\">Wl</span><span class=\"o\">,</span><span class=\"bp\">-</span><span class=\"n\">rpath</span><span class=\"o\">,</span><span class=\"bp\">@</span><span class=\"n\">executable_path</span><span class=\"bp\">/../</span><span class=\"n\">lib</span> <span class=\"bp\">-</span><span class=\"n\">Wl</span><span class=\"o\">,</span><span class=\"bp\">-</span><span class=\"n\">rpath</span><span class=\"o\">,</span><span class=\"bp\">@</span><span class=\"n\">executable_path</span><span class=\"bp\">/../</span><span class=\"n\">lib</span><span class=\"bp\">/</span><span class=\"n\">lean</span>\n<span class=\"n\">ld</span><span class=\"o\">:</span> <span class=\"n\">library</span> <span class=\"n\">not</span> <span class=\"n\">found</span> <span class=\"n\">for</span> <span class=\"bp\">-</span><span class=\"n\">lSystem</span>\n<span class=\"n\">clang</span><span class=\"o\">:</span> <span class=\"n\">error</span><span class=\"o\">:</span> <span class=\"n\">linker</span> <span class=\"n\">command</span> <span class=\"n\">failed</span> <span class=\"k\">with</span> <span class=\"n\">exit</span> <span class=\"n\">code</span> <span class=\"mi\">1</span> <span class=\"o\">(</span><span class=\"n\">use</span> <span class=\"bp\">-</span><span class=\"n\">v</span> <span class=\"n\">to</span> <span class=\"n\">see</span> <span class=\"n\">invocation</span><span class=\"o\">)</span>\n<span class=\"n\">make</span><span class=\"o\">[</span><span class=\"mi\">7</span><span class=\"o\">]:</span> <span class=\"bp\">***</span> <span class=\"o\">[</span><span class=\"bp\">/</span><span class=\"n\">Users</span><span class=\"bp\">/</span><span class=\"n\">scott</span><span class=\"bp\">/</span><span class=\"n\">projects</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"bp\">/</span><span class=\"n\">lean4</span><span class=\"bp\">/</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">release</span><span class=\"bp\">/</span><span class=\"n\">stage1</span><span class=\"bp\">/</span><span class=\"n\">bin</span><span class=\"bp\">/</span><span class=\"n\">leanpkg</span><span class=\"o\">]</span> <span class=\"n\">Error</span> <span class=\"mi\">1</span>\n<span class=\"n\">make</span><span class=\"o\">[</span><span class=\"mi\">6</span><span class=\"o\">]:</span> <span class=\"bp\">***</span> <span class=\"o\">[</span><span class=\"n\">Leanpkg</span><span class=\"o\">]</span> <span class=\"n\">Error</span> <span class=\"mi\">2</span>\n<span class=\"n\">make</span><span class=\"o\">[</span><span class=\"mi\">5</span><span class=\"o\">]:</span> <span class=\"bp\">***</span> <span class=\"o\">[</span><span class=\"n\">CMakeFiles</span><span class=\"bp\">/</span><span class=\"n\">leanpkg</span><span class=\"o\">]</span> <span class=\"n\">Error</span> <span class=\"mi\">2</span>\n<span class=\"n\">make</span><span class=\"o\">[</span><span class=\"mi\">4</span><span class=\"o\">]:</span> <span class=\"bp\">***</span> <span class=\"o\">[</span><span class=\"n\">CMakeFiles</span><span class=\"bp\">/</span><span class=\"n\">leanpkg.dir</span><span class=\"bp\">/</span><span class=\"n\">all</span><span class=\"o\">]</span> <span class=\"n\">Error</span> <span class=\"mi\">2</span>\n<span class=\"n\">make</span><span class=\"o\">[</span><span class=\"mi\">3</span><span class=\"o\">]:</span> <span class=\"bp\">***</span> <span class=\"o\">[</span><span class=\"n\">all</span><span class=\"o\">]</span> <span class=\"n\">Error</span> <span class=\"mi\">2</span>\n<span class=\"n\">make</span><span class=\"o\">[</span><span class=\"mi\">2</span><span class=\"o\">]:</span> <span class=\"bp\">***</span> <span class=\"o\">[</span><span class=\"n\">stage1</span><span class=\"bp\">-</span><span class=\"kd\">prefix</span><span class=\"bp\">/</span><span class=\"n\">src</span><span class=\"bp\">/</span><span class=\"n\">stage1</span><span class=\"bp\">-</span><span class=\"n\">stamp</span><span class=\"bp\">/</span><span class=\"n\">stage1</span><span class=\"bp\">-</span><span class=\"n\">build</span><span class=\"o\">]</span> <span class=\"n\">Error</span> <span class=\"mi\">2</span>\n<span class=\"n\">make</span><span class=\"o\">[</span><span class=\"mi\">1</span><span class=\"o\">]:</span> <span class=\"bp\">***</span> <span class=\"o\">[</span><span class=\"n\">CMakeFiles</span><span class=\"bp\">/</span><span class=\"n\">stage1.dir</span><span class=\"bp\">/</span><span class=\"n\">all</span><span class=\"o\">]</span> <span class=\"n\">Error</span> <span class=\"mi\">2</span>\n<span class=\"n\">make</span><span class=\"o\">:</span> <span class=\"bp\">***</span> <span class=\"o\">[</span><span class=\"n\">all</span><span class=\"o\">]</span> <span class=\"n\">Error</span> <span class=\"mi\">2</span>\n</code></pre></div>",
        "id": 256851617,
        "sender_full_name": "Scott Morrison",
        "timestamp": 1633767373
    },
    {
        "content": "<p>But <code>make lean VERBOSE=1</code> works?</p>",
        "id": 256851731,
        "sender_full_name": "Sebastian Ullrich",
        "timestamp": 1633767492
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"bp\">$</span> <span class=\"n\">make</span> <span class=\"n\">lean</span> <span class=\"n\">VERBOSE</span><span class=\"bp\">=</span><span class=\"mi\">1</span>\n<span class=\"n\">make</span><span class=\"o\">:</span> <span class=\"bp\">***</span> <span class=\"n\">No</span> <span class=\"n\">rule</span> <span class=\"n\">to</span> <span class=\"n\">make</span> <span class=\"n\">target</span> <span class=\"bp\">`</span><span class=\"n\">lean'.</span>  <span class=\"n\">Stop.</span>\n</code></pre></div>",
        "id": 256851791,
        "sender_full_name": "Scott Morrison",
        "timestamp": 1633767573
    },
    {
        "content": "<p>Ah, try again in <code>stage1/</code></p>",
        "id": 256851862,
        "sender_full_name": "Sebastian Ullrich",
        "timestamp": 1633767642
    },
    {
        "content": "<p>Yes, that works.</p>",
        "id": 256851885,
        "sender_full_name": "Scott Morrison",
        "timestamp": 1633767678
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"n\">make</span><span class=\"o\">[</span><span class=\"mi\">4</span><span class=\"o\">]:</span> <span class=\"n\">Nothing</span> <span class=\"n\">to</span> <span class=\"n\">be</span> <span class=\"n\">done</span> <span class=\"n\">for</span> <span class=\"bp\">`</span><span class=\"n\">lean'.</span>\n</code></pre></div>",
        "id": 256851890,
        "sender_full_name": "Scott Morrison",
        "timestamp": 1633767688
    },
    {
        "content": "<p>Ok, thanks. And after <code>rm bin/lean</code>?</p>",
        "id": 256851907,
        "sender_full_name": "Sebastian Ullrich",
        "timestamp": 1633767715
    },
    {
        "content": "<p>Wait, I can see the mistake</p>",
        "id": 256851986,
        "sender_full_name": "Sebastian Ullrich",
        "timestamp": 1633767766
    },
    {
        "content": "<p>This should fix it; will merge after CI is green <a href=\"https://github.com/Kha/lean4/commit/2ab8a38daa36650ad70f40f2290bf9c22ae0406e\">https://github.com/Kha/lean4/commit/2ab8a38daa36650ad70f40f2290bf9c22ae0406e</a></p>",
        "id": 256852133,
        "sender_full_name": "Sebastian Ullrich",
        "timestamp": 1633767937
    },
    {
        "content": "<p>That commit works beautifully for me. :-)</p>",
        "id": 256852757,
        "sender_full_name": "Scott Morrison",
        "timestamp": 1633768589
    },
    {
        "content": "<p>Works here too now without any options. Thanks Sebastian.</p>",
        "id": 256877065,
        "sender_full_name": "Julian Berman",
        "timestamp": 1633792607
    }
]