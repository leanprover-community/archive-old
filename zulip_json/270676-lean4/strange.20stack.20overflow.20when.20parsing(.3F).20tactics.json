[
    {
        "content": "<p>I have a command which takes in a block of tactic syntax which it runs on a certain sets on goals. I do this with the following line:</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code>        <span class=\"k\">let</span> <span class=\"o\">⟨</span><span class=\"n\">_</span><span class=\"o\">,</span> <span class=\"n\">s</span><span class=\"o\">⟩</span> <span class=\"bp\">←</span> <span class=\"o\">(</span><span class=\"n\">Tactic.evalTacticSeq</span> <span class=\"n\">termination</span> <span class=\"o\">{</span> <span class=\"n\">main</span> <span class=\"o\">:=</span> <span class=\"n\">totMVars.get</span><span class=\"bp\">!</span> <span class=\"mi\">0</span><span class=\"o\">,</span> <span class=\"n\">elaborator</span> <span class=\"o\">:=</span> <span class=\"n\">Name.anonymous</span> <span class=\"o\">})</span><span class=\"bp\">.</span><span class=\"n\">run</span> <span class=\"o\">{</span> <span class=\"n\">goals</span> <span class=\"o\">:=</span> <span class=\"n\">totMVars</span> <span class=\"o\">}</span>\n        <span class=\"n\">unless</span> <span class=\"n\">s.goals.length</span> <span class=\"bp\">=</span> <span class=\"mi\">0</span> <span class=\"k\">do</span> <span class=\"n\">throwError</span> <span class=\"s2\">\"tactic block didn't solve all goals\"</span>\n</code></pre></div>\n<p>where <code>termination</code> is the <code>Syntax</code> of the tactics. So far it always magically worked, that I get the goal view when I put the cursor among the tactics. Now the tactics still work as intended, but clicking anywhere among the tactic block gives me <code>Stack overflow detected. Aborting.</code> instead of an output. This just changes when I put <code>set_option pp.all true</code>. Then everything displays correctly. Any ideas on what's happening here?</p>",
        "id": 252747820,
        "sender_full_name": "Jakob von Raumer",
        "timestamp": 1631260968
    },
    {
        "content": "<p>Sometimes™ it also give me a bit of more helpful output:</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"o\">[</span><span class=\"n\">Error</span> <span class=\"bp\">-</span> <span class=\"mi\">10</span><span class=\"o\">:</span><span class=\"mi\">19</span><span class=\"o\">:</span><span class=\"mi\">52</span><span class=\"o\">]</span> <span class=\"n\">Request</span> <span class=\"n\">textDocument</span><span class=\"bp\">/</span><span class=\"n\">documentHighlight</span> <span class=\"n\">failed.</span>\n  <span class=\"n\">Message</span><span class=\"o\">:</span> <span class=\"n\">Server</span> <span class=\"n\">process</span> <span class=\"n\">for</span> <span class=\"n\">file</span><span class=\"o\">:</span><span class=\"bp\">///</span><span class=\"n\">data1</span><span class=\"bp\">/</span><span class=\"n\">jakob</span><span class=\"bp\">/</span><span class=\"n\">iit</span><span class=\"bp\">/</span><span class=\"n\">Examples</span><span class=\"bp\">/</span><span class=\"n\">ConTy.lean</span> <span class=\"n\">crashed</span><span class=\"o\">,</span> <span class=\"n\">likely</span> <span class=\"n\">due</span> <span class=\"n\">to</span> <span class=\"n\">a</span> <span class=\"n\">stack</span> <span class=\"n\">overflow</span> <span class=\"k\">in</span> <span class=\"n\">user</span> <span class=\"n\">code.</span>\n  <span class=\"n\">Code</span><span class=\"o\">:</span> <span class=\"bp\">-</span><span class=\"mi\">32603</span>\n</code></pre></div>",
        "id": 252749730,
        "sender_full_name": "Jakob von Raumer",
        "timestamp": 1631262042
    },
    {
        "content": "<p>It's also strange that having</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kd\">set_option</span> <span class=\"n\">pp.explicit</span> <span class=\"n\">true</span>\n<span class=\"kd\">set_option</span> <span class=\"n\">pp.universes</span> <span class=\"n\">true</span>\n<span class=\"kd\">set_option</span> <span class=\"n\">pp.notation</span> <span class=\"n\">false</span>\n</code></pre></div>\n<p>doesn't help, only <code>pp.all</code> makes it work <span aria-label=\"confused\" class=\"emoji emoji-1f615\" role=\"img\" title=\"confused\">:confused:</span></p>",
        "id": 252749969,
        "sender_full_name": "Jakob von Raumer",
        "timestamp": 1631262145
    },
    {
        "content": "<p><code>pp.analyze</code> is already off? (defaults to off since 10/8)</p>",
        "id": 252751191,
        "sender_full_name": "Sebastian Ullrich",
        "timestamp": 1631262825
    },
    {
        "content": "<p>Oh, that's the culprit, I think? It crashes when it's on</p>",
        "id": 252751399,
        "sender_full_name": "Jakob von Raumer",
        "timestamp": 1631262910
    },
    {
        "content": "<p>FWIW no matter the option, what's definitely not working anymore is the syntax highlighting, which did work with the June version</p>",
        "id": 252751560,
        "sender_full_name": "Jakob von Raumer",
        "timestamp": 1631262967
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"110789\">@Jakob von Raumer</span> Could you please create an issue with a mwe?</p>",
        "id": 252788178,
        "sender_full_name": "Leonardo de Moura",
        "timestamp": 1631281161
    },
    {
        "content": "<p>I'll try, not so easy to separate it from the rest</p>",
        "id": 252794778,
        "sender_full_name": "Jakob von Raumer",
        "timestamp": 1631283830
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"110789\">@Jakob von Raumer</span> Thanks a bunch!</p>",
        "id": 252794986,
        "sender_full_name": "Leonardo de Moura",
        "timestamp": 1631283918
    },
    {
        "content": "<p>In particular, it only happened on hover/in the goal view, not at e.g. a <code>done</code> <span aria-label=\"scream\" class=\"emoji emoji-1f631\" role=\"img\" title=\"scream\">:scream:</span></p>",
        "id": 252797298,
        "sender_full_name": "Sebastian Ullrich",
        "timestamp": 1631284919
    },
    {
        "content": "<p>The thing is, there are no overflows when I make the example smaller...</p>",
        "id": 252797434,
        "sender_full_name": "Jakob von Raumer",
        "timestamp": 1631284970
    },
    {
        "content": "<p>But then, the goals in <code>totMVars</code> aren't \"broken\", I can solve them...</p>",
        "id": 252797509,
        "sender_full_name": "Jakob von Raumer",
        "timestamp": 1631285010
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"bp\">#</span><span class=\"mi\">41852</span> <span class=\"mi\">0x00007f50f10facfe</span> <span class=\"k\">in</span> <span class=\"n\">l___private_Lean_Meta_ExprDefEq_0__Lean_Meta_isDefEqQuick</span> <span class=\"o\">()</span> <span class=\"k\">from</span> <span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">javra2</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---nightly-2021-09-08/bin/../lib/lean/libleanshared.so</span>\n<span class=\"bp\">#</span><span class=\"mi\">41853</span> <span class=\"mi\">0x00007f50f10fda5d</span> <span class=\"k\">in</span> <span class=\"n\">l___private_Lean_Meta_ExprDefEq_0__Lean_Meta_isDefEqQuickOther</span> <span class=\"o\">()</span> <span class=\"k\">from</span> <span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">javra2</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---nightly-2021-09-08/bin/../lib/lean/libleanshared.so</span>\n<span class=\"bp\">#</span><span class=\"mi\">41854</span> <span class=\"mi\">0x00007f50f10facfe</span> <span class=\"k\">in</span> <span class=\"n\">l___private_Lean_Meta_ExprDefEq_0__Lean_Meta_isDefEqQuick</span> <span class=\"o\">()</span> <span class=\"k\">from</span> <span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">javra2</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---nightly-2021-09-08/bin/../lib/lean/libleanshared.so</span>\n<span class=\"bp\">#</span><span class=\"mi\">41855</span> <span class=\"mi\">0x00007f50f10fda5d</span> <span class=\"k\">in</span> <span class=\"n\">l___private_Lean_Meta_ExprDefEq_0__Lean_Meta_isDefEqQuickOther</span> <span class=\"o\">()</span> <span class=\"k\">from</span> <span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">javra2</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---nightly-2021-09-08/bin/../lib/lean/libleanshared.so</span>\n<span class=\"bp\">#</span><span class=\"mi\">41856</span> <span class=\"mi\">0x00007f50f10facfe</span> <span class=\"k\">in</span> <span class=\"n\">l___private_Lean_Meta_ExprDefEq_0__Lean_Meta_isDefEqQuick</span> <span class=\"o\">()</span> <span class=\"k\">from</span> <span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">javra2</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---nightly-2021-09-08/bin/../lib/lean/libleanshared.so</span>\n<span class=\"bp\">#</span><span class=\"mi\">41857</span> <span class=\"mi\">0x00007f50f1123229</span> <span class=\"k\">in</span> <span class=\"n\">l_Lean_Meta_isExprDefEqAuxImpl___lambda__1</span> <span class=\"o\">()</span> <span class=\"k\">from</span> <span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">javra2</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---nightly-2021-09-08/bin/../lib/lean/libleanshared.so</span>\n<span class=\"bp\">#</span><span class=\"mi\">41858</span> <span class=\"mi\">0x00007f50f112beda</span> <span class=\"k\">in</span> <span class=\"n\">l_Lean_Meta_isExprDefEqAuxImpl___lambda__2</span> <span class=\"o\">()</span> <span class=\"k\">from</span> <span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">javra2</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---nightly-2021-09-08/bin/../lib/lean/libleanshared.so</span>\n<span class=\"bp\">#</span><span class=\"mi\">41859</span> <span class=\"mi\">0x00007f50f1049257</span> <span class=\"k\">in</span> <span class=\"n\">lean_is_expr_def_eq</span> <span class=\"o\">()</span> <span class=\"k\">from</span> <span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">javra2</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---nightly-2021-09-08/bin/../lib/lean/libleanshared.so</span>\n<span class=\"bp\">#</span><span class=\"mi\">41860</span> <span class=\"mi\">0x00007f50f10625ee</span> <span class=\"k\">in</span> <span class=\"n\">l___private_Lean_Meta_ExprDefEq_0__Lean_Meta_checkTypesAndAssign</span> <span class=\"o\">()</span> <span class=\"k\">from</span> <span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">javra2</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---nightly-2021-09-08/bin/../lib/lean/libleanshared.so</span>\n<span class=\"bp\">#</span><span class=\"mi\">41861</span> <span class=\"mi\">0x00007f50f10cdbad</span> <span class=\"k\">in</span> <span class=\"n\">l___private_Lean_Meta_ExprDefEq_0__Lean_Meta_processAssignment_process___lambda__1</span> <span class=\"o\">()</span> <span class=\"k\">from</span> <span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">javra2</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---nightly-2021-09-08/bin/../lib/lean/libleanshared.so</span>\n<span class=\"bp\">#</span><span class=\"mi\">41862</span> <span class=\"mi\">0x00007f50f10d2eff</span> <span class=\"k\">in</span> <span class=\"n\">l___private_Lean_Meta_ExprDefEq_0__Lean_Meta_processAssignment_process</span> <span class=\"o\">()</span> <span class=\"k\">from</span> <span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">javra2</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---nightly-2021-09-08/bin/../lib/lean/libleanshared.so</span>\n<span class=\"bp\">#</span><span class=\"mi\">41863</span> <span class=\"mi\">0x00007f50f10d3b27</span> <span class=\"k\">in</span> <span class=\"n\">l___private_Lean_Meta_ExprDefEq_0__Lean_Meta_processAssignment___lambda__1</span> <span class=\"o\">()</span> <span class=\"k\">from</span> <span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">javra2</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---nightly-2021-09-08/bin/../lib/lean/libleanshared.so</span>\n<span class=\"bp\">#</span><span class=\"mi\">41864</span> <span class=\"mi\">0x00007f50f10d5d40</span> <span class=\"k\">in</span> <span class=\"n\">l___private_Lean_Meta_ExprDefEq_0__Lean_Meta_processAssignment</span> <span class=\"o\">()</span> <span class=\"k\">from</span> <span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">javra2</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---nightly-2021-09-08/bin/../lib/lean/libleanshared.so</span>\n<span class=\"bp\">#</span><span class=\"mi\">41865</span> <span class=\"mi\">0x00007f50f10d97e9</span> <span class=\"k\">in</span> <span class=\"n\">l___private_Lean_Meta_ExprDefEq_0__Lean_Meta_processAssignment_x27</span> <span class=\"o\">()</span> <span class=\"k\">from</span> <span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">javra2</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---nightly-2021-09-08/bin/../lib/lean/libleanshared.so</span>\n<span class=\"bp\">#</span><span class=\"mi\">41866</span> <span class=\"mi\">0x00007f50f10ffcda</span> <span class=\"k\">in</span> <span class=\"n\">l___private_Lean_Meta_ExprDefEq_0__Lean_Meta_isDefEqQuickOther___lambda__2</span> <span class=\"o\">()</span> <span class=\"k\">from</span> <span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">javra2</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---nightly-2021-09-08/bin/../lib/lean/libleanshared.so</span>\n<span class=\"bp\">#</span><span class=\"mi\">41867</span> <span class=\"mi\">0x00007f50f10ffa34</span> <span class=\"k\">in</span> <span class=\"n\">l___private_Lean_Meta_ExprDefEq_0__Lean_Meta_isDefEqQuickOther</span> <span class=\"o\">()</span> <span class=\"k\">from</span> <span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">javra2</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---nightly-2021-09-08/bin/../lib/lean/libleanshared.so</span>\n<span class=\"bp\">#</span><span class=\"mi\">41868</span> <span class=\"mi\">0x00007f50f10facfe</span> <span class=\"k\">in</span> <span class=\"n\">l___private_Lean_Meta_ExprDefEq_0__Lean_Meta_isDefEqQuick</span> <span class=\"o\">()</span> <span class=\"k\">from</span> <span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">javra2</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---nightly-2021-09-08/bin/../lib/lean/libleanshared.so</span>\n<span class=\"bp\">#</span><span class=\"mi\">41869</span> <span class=\"mi\">0x00007f50f11251f6</span> <span class=\"k\">in</span> <span class=\"n\">l_Lean_Meta_isExprDefEqAuxImpl___lambda__1</span> <span class=\"o\">()</span> <span class=\"k\">from</span> <span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">javra2</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---nightly-2021-09-08/bin/../lib/lean/libleanshared.so</span>\n<span class=\"bp\">#</span><span class=\"mi\">41870</span> <span class=\"mi\">0x00007f50f112beda</span> <span class=\"k\">in</span> <span class=\"n\">l_Lean_Meta_isExprDefEqAuxImpl___lambda__2</span> <span class=\"o\">()</span> <span class=\"k\">from</span> <span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">javra2</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---nightly-2021-09-08/bin/../lib/lean/libleanshared.so</span>\n<span class=\"bp\">#</span><span class=\"mi\">41871</span> <span class=\"mi\">0x00007f50f1049257</span> <span class=\"k\">in</span> <span class=\"n\">lean_is_expr_def_eq</span> <span class=\"o\">()</span> <span class=\"k\">from</span> <span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">javra2</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---nightly-2021-09-08/bin/../lib/lean/libleanshared.so</span>\n<span class=\"bp\">#</span><span class=\"mi\">41872</span> <span class=\"mi\">0x00007f50f16846a5</span> <span class=\"k\">in</span> <span class=\"n\">l_Lean_Meta_checkpointDefEq___at_Lean_Meta_isExprDefEq___spec__1</span> <span class=\"o\">()</span> <span class=\"k\">from</span> <span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">javra2</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---nightly-2021-09-08/bin/../lib/lean/libleanshared.so</span>\n<span class=\"bp\">#</span><span class=\"mi\">41873</span> <span class=\"mi\">0x00007f50f16879ec</span> <span class=\"k\">in</span> <span class=\"n\">l_Lean_Meta_isExprDefEq</span> <span class=\"o\">()</span> <span class=\"k\">from</span> <span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">javra2</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---nightly-2021-09-08/bin/../lib/lean/libleanshared.so</span>\n<span class=\"bp\">#</span><span class=\"mi\">41874</span> <span class=\"mi\">0x00007f50f22ac2c0</span> <span class=\"k\">in</span> <span class=\"n\">l_Lean_PrettyPrinter_Delaborator_TopDownAnalyze_tryUnify</span> <span class=\"o\">()</span> <span class=\"k\">from</span> <span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">javra2</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---nightly-2021-09-08/bin/../lib/lean/libleanshared.so</span>\n<span class=\"bp\">#</span><span class=\"mi\">41875</span> <span class=\"mi\">0x00007f50f22b1c68</span> <span class=\"k\">in</span> <span class=\"n\">l_Std_Range_forIn_loop___at_Lean_PrettyPrinter_Delaborator_TopDownAnalyze_canBottomUp___spec__1</span> <span class=\"o\">()</span> <span class=\"k\">from</span> <span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">javra2</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---nightly-2021-09-08/bin/../lib/lean/libleanshared.so</span>\n<span class=\"bp\">#</span><span class=\"mi\">41876</span> <span class=\"mi\">0x00007f50f22b5140</span> <span class=\"k\">in</span> <span class=\"n\">l_Lean_PrettyPrinter_Delaborator_TopDownAnalyze_canBottomUp___lambda__3</span> <span class=\"o\">()</span> <span class=\"k\">from</span> <span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">javra2</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---nightly-2021-09-08/bin/../lib/lean/libleanshared.so</span>\n<span class=\"bp\">#</span><span class=\"mi\">41877</span> <span class=\"mi\">0x00007f50f22b71d4</span> <span class=\"k\">in</span> <span class=\"n\">l_Lean_PrettyPrinter_Delaborator_TopDownAnalyze_canBottomUp___lambda__4</span> <span class=\"o\">()</span> <span class=\"k\">from</span> <span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">javra2</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---nightly-2021-09-08/bin/../lib/lean/libleanshared.so</span>\n<span class=\"bp\">#</span><span class=\"mi\">41878</span> <span class=\"mi\">0x00007f50f22b32a3</span> <span class=\"k\">in</span> <span class=\"n\">l_Lean_PrettyPrinter_Delaborator_TopDownAnalyze_canBottomUp</span> <span class=\"o\">()</span> <span class=\"k\">from</span> <span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">javra2</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---nightly-2021-09-08/bin/../lib/lean/libleanshared.so</span>\n<span class=\"bp\">#</span><span class=\"mi\">41879</span> <span class=\"mi\">0x00007f50f22c92a0</span> <span class=\"k\">in</span> <span class=\"n\">l_Std_Range_forIn_loop___at_Lean_PrettyPrinter_Delaborator_TopDownAnalyze_analyzeAppStagedCore_collectBottomUps___spec__1</span> <span class=\"o\">()</span> <span class=\"k\">from</span> <span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">javra2</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---nightly-2021-09-08/bin/../lib/lean/libleanshared.so</span>\n<span class=\"bp\">#</span><span class=\"mi\">41880</span> <span class=\"mi\">0x00007f50f22cb6ff</span> <span class=\"k\">in</span> <span class=\"n\">l_List_forIn_loop___at_Lean_PrettyPrinter_Delaborator_TopDownAnalyze_analyzeAppStagedCore_collectBottomUps___spec__2</span> <span class=\"o\">()</span> <span class=\"k\">from</span> <span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">javra2</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---nightly-2021-09-08/bin/../lib/lean/libleanshared.so</span>\n<span class=\"bp\">#</span><span class=\"mi\">41881</span> <span class=\"mi\">0x00007f50f22cc1d5</span> <span class=\"k\">in</span> <span class=\"n\">l_Lean_PrettyPrinter_Delaborator_TopDownAnalyze_analyzeAppStagedCore_collectBottomUps</span> <span class=\"o\">()</span> <span class=\"k\">from</span> <span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">javra2</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---nightly-2021-09-08/bin/../lib/lean/libleanshared.so</span>\n<span class=\"bp\">#</span><span class=\"mi\">41882</span> <span class=\"mi\">0x00007f50f22f27a2</span> <span class=\"k\">in</span> <span class=\"n\">l_Lean_PrettyPrinter_Delaborator_TopDownAnalyze_analyzeAppStagedCore</span> <span class=\"o\">()</span> <span class=\"k\">from</span> <span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">javra2</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---nightly-2021-09-08/bin/../lib/lean/libleanshared.so</span>\n<span class=\"bp\">#</span><span class=\"mi\">41883</span> <span class=\"mi\">0x00007f50f22f17c2</span> <span class=\"k\">in</span> <span class=\"n\">l_Lean_PrettyPrinter_Delaborator_TopDownAnalyze_analyze_analyzeAppStaged___lambda__1</span> <span class=\"o\">()</span> <span class=\"k\">from</span> <span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">javra2</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---nightly-2021-09-08/bin/../lib/lean/libleanshared.so</span>\n<span class=\"bp\">#</span><span class=\"mi\">41884</span> <span class=\"mi\">0x00007f50f22f6011</span> <span class=\"k\">in</span> <span class=\"n\">l_Lean_PrettyPrinter_Delaborator_TopDownAnalyze_analyze_analyzeAppStaged</span> <span class=\"o\">()</span> <span class=\"k\">from</span> <span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">javra2</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---nightly-2021-09-08/bin/../lib/lean/libleanshared.so</span>\n<span class=\"bp\">#</span><span class=\"mi\">41885</span> <span class=\"mi\">0x00007f50f24f123a</span> <span class=\"k\">in</span> <span class=\"n\">lean_apply_7</span> <span class=\"o\">()</span> <span class=\"k\">from</span> <span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">javra2</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---nightly-2021-09-08/bin/../lib/lean/libleanshared.so</span>\n<span class=\"bp\">#</span><span class=\"mi\">41886</span> <span class=\"mi\">0x00007f50f22b7774</span> <span class=\"k\">in</span> <span class=\"n\">l_Lean_PrettyPrinter_Delaborator_TopDownAnalyze_withKnowing___rarg</span> <span class=\"o\">()</span> <span class=\"k\">from</span> <span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">javra2</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---nightly-2021-09-08/bin/../lib/lean/libleanshared.so</span>\n<span class=\"bp\">#</span><span class=\"mi\">41887</span> <span class=\"mi\">0x00007f50f230a4a4</span> <span class=\"k\">in</span> <span class=\"n\">l_Lean_PrettyPrinter_Delaborator_TopDownAnalyze_analyze_analyzeApp___lambda__1</span> <span class=\"o\">()</span> <span class=\"k\">from</span> <span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">javra2</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---nightly-2021-09-08/bin/../lib/lean/libleanshared.so</span>\n<span class=\"bp\">#</span><span class=\"mi\">41888</span> <span class=\"mi\">0x00007f50f230ad78</span> <span class=\"k\">in</span> <span class=\"n\">l_Lean_PrettyPrinter_Delaborator_TopDownAnalyze_analyze_analyzeApp___lambda__1___boxed</span> <span class=\"o\">()</span> <span class=\"k\">from</span> <span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">javra2</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---nightly-2021-09-08/bin/../lib/lean/libleanshared.so</span>\n<span class=\"bp\">#</span><span class=\"mi\">41889</span> <span class=\"mi\">0x00007f50f24f4109</span> <span class=\"k\">in</span> <span class=\"n\">lean_apply_9</span> <span class=\"o\">()</span> <span class=\"k\">from</span> <span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">javra2</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---nightly-2021-09-08/bin/../lib/lean/libleanshared.so</span>\n<span class=\"bp\">#</span><span class=\"mi\">41890</span> <span class=\"mi\">0x00007f50f22ec05d</span> <span class=\"k\">in</span> <span class=\"n\">l_Lean_PrettyPrinter_Delaborator_TopDownAnalyze_analyze_analyzeApp</span> <span class=\"o\">()</span> <span class=\"k\">from</span> <span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">javra2</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---nightly-2021-09-08/bin/../lib/lean/libleanshared.so</span>\n<span class=\"bp\">#</span><span class=\"mi\">41891</span> <span class=\"mi\">0x00007f50f22e9e3b</span> <span class=\"k\">in</span> <span class=\"n\">l_Lean_PrettyPrinter_Delaborator_TopDownAnalyze_analyze___lambda__1</span> <span class=\"o\">()</span> <span class=\"k\">from</span> <span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">javra2</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---nightly-2021-09-08/bin/../lib/lean/libleanshared.so</span>\n<span class=\"bp\">#</span><span class=\"mi\">41892</span> <span class=\"mi\">0x00007f50f22ee721</span> <span class=\"k\">in</span> <span class=\"n\">l_Lean_PrettyPrinter_Delaborator_TopDownAnalyze_analyze</span> <span class=\"o\">()</span> <span class=\"k\">from</span> <span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">javra2</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---nightly-2021-09-08/bin/../lib/lean/libleanshared.so</span>\n<span class=\"bp\">#</span><span class=\"mi\">41893</span> <span class=\"mi\">0x00007f50f24f1a36</span> <span class=\"k\">in</span> <span class=\"n\">lean_apply_7</span> <span class=\"o\">()</span> <span class=\"k\">from</span> <span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">javra2</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---nightly-2021-09-08/bin/../lib/lean/libleanshared.so</span>\n<span class=\"bp\">#</span><span class=\"mi\">41894</span> <span class=\"mi\">0x00007f50f22e8799</span> <span class=\"k\">in</span> <span class=\"n\">l_Lean_PrettyPrinter_Delaborator_SubExpr_descend___at_Lean_PrettyPrinter_Delaborator_TopDownAnalyze_analyze___spec__2</span> <span class=\"o\">()</span> <span class=\"k\">from</span> <span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">javra2</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---nightly-2021-09-08/bin/../lib/lean/libleanshared.so</span>\n<span class=\"bp\">#</span><span class=\"mi\">41895</span> <span class=\"mi\">0x00007f50f24f280b</span> <span class=\"k\">in</span> <span class=\"n\">lean_apply_8</span> <span class=\"o\">()</span> <span class=\"k\">from</span> <span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">javra2</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---nightly-2021-09-08/bin/../lib/lean/libleanshared.so</span>\n<span class=\"bp\">#</span><span class=\"mi\">41896</span> <span class=\"mi\">0x00007f50f24ef45a</span> <span class=\"k\">in</span> <span class=\"n\">lean_apply_6</span> <span class=\"o\">()</span> <span class=\"k\">from</span> <span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">javra2</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---nightly-2021-09-08/bin/../lib/lean/libleanshared.so</span>\n<span class=\"bp\">#</span><span class=\"mi\">41897</span> <span class=\"mi\">0x00007f50f1620321</span> <span class=\"k\">in</span> <span class=\"n\">l___private_Lean_Meta_Basic_0__Lean_Meta_withNewFVar___rarg</span> <span class=\"o\">()</span> <span class=\"k\">from</span> <span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">javra2</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---nightly-2021-09-08/bin/../lib/lean/libleanshared.so</span>\n<span class=\"bp\">#</span><span class=\"mi\">41898</span> <span class=\"mi\">0x00007f50f1620712</span> <span class=\"k\">in</span> <span class=\"n\">l___private_Lean_Meta_Basic_0__Lean_Meta_withLocalDeclImp___rarg</span> <span class=\"o\">()</span> <span class=\"k\">from</span> <span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">javra2</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---nightly-2021-09-08/bin/../lib/lean/libleanshared.so</span>\n<span class=\"bp\">#</span><span class=\"mi\">41899</span> <span class=\"mi\">0x00007f50f22f06e8</span> <span class=\"k\">in</span> <span class=\"n\">l_Lean_Meta_withLocalDecl___at_Lean_PrettyPrinter_Delaborator_TopDownAnalyze_analyze_analyzeLam___spec__3___rarg</span> <span class=\"o\">()</span> <span class=\"k\">from</span> <span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">javra2</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---nightly-2021-09-08/bin/../lib/lean/libleanshared.so</span>\n</code></pre></div>",
        "id": 252799562,
        "sender_full_name": "Jakob von Raumer",
        "timestamp": 1631285786
    },
    {
        "content": "<p>I can't comment about Lean 4, but for Lean 3 debugging even a gigantic <a href=\"https://leanprover-community.github.io/mwe.html\">#mwe</a> is better than no mwe</p>",
        "id": 252803802,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1631287580
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110038\">Kevin Buzzard</span> <a href=\"#narrow/stream/270676-lean4/topic/strange.20stack.20overflow.20when.20parsing.28.3F.29.20tactics/near/252803802\">said</a>:</p>\n<blockquote>\n<p>I can't comment about Lean 4, but for Lean 3 debugging even a gigantic <a href=\"https://leanprover-community.github.io/mwe.html\">#mwe</a> is better than no mwe</p>\n</blockquote>\n<p>Well in that sense <a href=\"https://github.com/javra/iit/blob/main/Examples/ConTy.lean\">https://github.com/javra/iit/blob/main/Examples/ConTy.lean</a> is a gigantic \"M\"NWE.</p>",
        "id": 252804130,
        "sender_full_name": "Jakob von Raumer",
        "timestamp": 1631287734
    },
    {
        "content": "<p>and how do I reproduce?</p>",
        "id": 252804486,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1631287883
    },
    {
        "content": "<p>Load the file and put your cursor after e.g. the first <code>repeat assumption</code></p>",
        "id": 252804824,
        "sender_full_name": "Jakob von Raumer",
        "timestamp": 1631288025
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"n\">leanpkg</span> <span class=\"n\">print</span><span class=\"bp\">-</span><span class=\"n\">paths</span><span class=\"bp\">`</span> <span class=\"n\">failed</span><span class=\"o\">:</span>\n\n<span class=\"n\">stderr</span><span class=\"o\">:</span>\n<span class=\"n\">configuring</span> <span class=\"n\">iit</span> <span class=\"mi\">0</span><span class=\"bp\">.</span><span class=\"mi\">1</span>\n<span class=\"n\">no</span> <span class=\"n\">such</span> <span class=\"n\">file</span> <span class=\"n\">or</span> <span class=\"n\">directory</span> <span class=\"o\">(</span><span class=\"n\">error</span> <span class=\"n\">code</span><span class=\"o\">:</span> <span class=\"mi\">2</span><span class=\"o\">)</span>\n  <span class=\"n\">file</span><span class=\"o\">:</span> <span class=\"bp\">./</span><span class=\"n\">IIT</span><span class=\"bp\">/</span><span class=\"n\">InfoviewBug.lean</span>\n</code></pre></div>",
        "id": 252804921,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1631288054
    },
    {
        "content": "<p>fixed</p>",
        "id": 252805088,
        "sender_full_name": "Jakob von Raumer",
        "timestamp": 1631288111
    },
    {
        "content": "<p>yeah I can reproduce the stack overflow here</p>",
        "id": 252805262,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1631288176
    },
    {
        "content": "<p>Sebastian helped me to get the above call, so it's definitely an issue of <code>Lean.Meta.ExprDefEq.isDefEqQuick</code> and <code>Lean.Meta.ExprDefEq.isDefEqQuickOther</code> looping. The lines above look like the first two.</p>",
        "id": 252805463,
        "sender_full_name": "Jakob von Raumer",
        "timestamp": 1631288253
    }
]