[
    {
        "content": "<p>Thank you very much. By looking at a few examples related to <code>Lean.Meta.apply</code>, I was able to produce working code for what I wanted:</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"n\">syntax</span> <span class=\"o\">(</span><span class=\"n\">name</span> <span class=\"o\">:=</span> <span class=\"n\">introunittac</span><span class=\"o\">)</span> <span class=\"s2\">\"introunittac\"</span> <span class=\"o\">:</span> <span class=\"n\">tactic</span>\n\n<span class=\"kd\">@[tactic introunittac]</span> <span class=\"kd\">def</span> <span class=\"n\">introunittacT</span> <span class=\"o\">:</span> <span class=\"n\">Tactic</span> <span class=\"o\">:=</span> <span class=\"k\">fun</span> <span class=\"n\">stx</span> <span class=\"bp\">=&gt;</span> <span class=\"k\">do</span>\n  <span class=\"k\">let</span> <span class=\"n\">mvar</span> <span class=\"bp\">←</span> <span class=\"n\">getMainGoal</span>\n  <span class=\"n\">logInfo</span> <span class=\"n\">m</span><span class=\"bp\">!</span><span class=\"s2\">\"The goal is {mvar}\"</span>\n  <span class=\"k\">let</span> <span class=\"o\">(</span><span class=\"n\">fvar</span><span class=\"o\">,</span> <span class=\"n\">mvar'</span><span class=\"o\">)</span> <span class=\"bp\">←</span> <span class=\"n\">Meta.intro</span> <span class=\"n\">mvar</span> <span class=\"bp\">`</span><span class=\"n\">x</span>\n  <span class=\"k\">let</span> <span class=\"n\">ctx</span> <span class=\"bp\">←</span> <span class=\"n\">getLCtx</span>\n  <span class=\"n\">logInfo</span> <span class=\"n\">m</span><span class=\"bp\">!</span><span class=\"s2\">\"The new goal is {mvar'}\"</span>\n  <span class=\"k\">let</span> <span class=\"n\">res</span> <span class=\"bp\">←</span> <span class=\"n\">Meta.apply</span> <span class=\"n\">mvar'</span> <span class=\"o\">(</span><span class=\"n\">mkConst</span> <span class=\"bp\">``</span><span class=\"n\">Unit.unit</span><span class=\"o\">)</span>\n  <span class=\"n\">return</span> <span class=\"o\">()</span>\n\n<span class=\"kd\">example</span> <span class=\"o\">:</span> <span class=\"n\">Nat</span> <span class=\"bp\">→</span> <span class=\"n\">Unit</span> <span class=\"o\">:=</span> <span class=\"kd\">by</span>\n  <span class=\"n\">introunittac</span>\n</code></pre></div>",
        "id": 277681410,
        "sender_full_name": "Anand Rao",
        "timestamp": 1649047535
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"303675\">Anand Rao</span> has marked this topic as resolved.</p>",
        "id": 277681458,
        "sender_full_name": "Notification Bot",
        "timestamp": 1649047568
    }
]