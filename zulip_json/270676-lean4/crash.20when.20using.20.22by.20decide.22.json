[
    {
        "content": "<p>The last line of the following code causes a server crash in VS-code --</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kd\">structure</span> <span class=\"n\">BreakfastStats</span> <span class=\"n\">where</span>\n  <span class=\"n\">edible</span><span class=\"o\">:</span> <span class=\"n\">Bool</span>\n  <span class=\"n\">drinkable</span><span class=\"o\">:</span> <span class=\"n\">Bool</span>\n  <span class=\"n\">spreadable</span><span class=\"o\">:</span> <span class=\"n\">Bool</span>\n\n<span class=\"kd\">inductive</span> <span class=\"n\">Breakfast</span><span class=\"o\">:</span> <span class=\"n\">BreakfastStats</span> <span class=\"bp\">-&gt;</span> <span class=\"kt\">Type</span> <span class=\"n\">where</span>\n<span class=\"bp\">|</span> <span class=\"n\">burrito</span><span class=\"o\">:</span> <span class=\"n\">Breakfast</span> <span class=\"o\">{</span><span class=\"n\">edible</span><span class=\"o\">:=</span><span class=\"n\">true</span><span class=\"o\">,</span> <span class=\"n\">drinkable</span><span class=\"o\">:=</span><span class=\"n\">false</span><span class=\"o\">,</span> <span class=\"n\">spreadable</span><span class=\"o\">:=</span><span class=\"n\">false</span><span class=\"o\">}</span>\n<span class=\"bp\">|</span> <span class=\"n\">eggs</span><span class=\"o\">:</span> <span class=\"n\">Breakfast</span> <span class=\"o\">{</span><span class=\"n\">edible</span><span class=\"o\">:=</span><span class=\"n\">true</span><span class=\"o\">,</span> <span class=\"n\">drinkable</span><span class=\"o\">:=</span><span class=\"n\">false</span><span class=\"o\">,</span> <span class=\"n\">spreadable</span><span class=\"o\">:=</span><span class=\"n\">false</span><span class=\"o\">}</span>\n<span class=\"bp\">|</span> <span class=\"n\">yogurt</span><span class=\"o\">:</span> <span class=\"n\">Breakfast</span> <span class=\"o\">{</span><span class=\"n\">edible</span><span class=\"o\">:=</span><span class=\"n\">true</span><span class=\"o\">,</span> <span class=\"n\">drinkable</span><span class=\"o\">:=</span><span class=\"n\">true</span><span class=\"o\">,</span> <span class=\"n\">spreadable</span><span class=\"o\">:=</span><span class=\"n\">true</span><span class=\"o\">}</span>\n<span class=\"bp\">|</span> <span class=\"n\">cream_cheese</span><span class=\"o\">:</span> <span class=\"n\">Breakfast</span> <span class=\"o\">{</span><span class=\"n\">edible</span><span class=\"o\">:=</span><span class=\"n\">true</span><span class=\"o\">,</span> <span class=\"n\">drinkable</span><span class=\"o\">:=</span><span class=\"n\">false</span><span class=\"o\">,</span> <span class=\"n\">spreadable</span><span class=\"o\">:=</span><span class=\"n\">true</span><span class=\"o\">}</span>\n<span class=\"bp\">|</span> <span class=\"n\">coffee</span><span class=\"o\">:</span> <span class=\"n\">Breakfast</span> <span class=\"o\">{</span><span class=\"n\">edible</span><span class=\"o\">:=</span><span class=\"n\">false</span><span class=\"o\">,</span> <span class=\"n\">drinkable</span><span class=\"o\">:=</span><span class=\"n\">true</span><span class=\"o\">,</span> <span class=\"n\">spreadable</span><span class=\"o\">:=</span><span class=\"n\">false</span><span class=\"o\">}</span>\n<span class=\"kn\">open</span> <span class=\"n\">Breakfast</span>\n\n<span class=\"kd\">def</span> <span class=\"n\">eat</span> <span class=\"o\">(</span><span class=\"n\">b</span><span class=\"o\">:</span> <span class=\"n\">Breakfast</span> <span class=\"n\">T</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">_</span><span class=\"o\">:</span> <span class=\"n\">T.edible</span> <span class=\"bp\">=</span> <span class=\"n\">true</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"n\">String</span> <span class=\"o\">:=</span>\n  <span class=\"k\">match</span> <span class=\"n\">b</span> <span class=\"k\">with</span>\n  <span class=\"bp\">|</span> <span class=\"n\">burrito</span> <span class=\"bp\">=&gt;</span> <span class=\"s2\">\"delicious\"</span>\n  <span class=\"bp\">|</span> <span class=\"n\">eggs</span> <span class=\"bp\">=&gt;</span> <span class=\"s2\">\"nice\"</span>\n  <span class=\"bp\">|</span> <span class=\"n\">cream_cheese</span> <span class=\"bp\">=&gt;</span> <span class=\"s2\">\"good with a bagel\"</span>\n  <span class=\"bp\">|</span> <span class=\"n\">yogurt</span> <span class=\"bp\">=&gt;</span> <span class=\"s2\">\"healthy i guess\"</span>\n\n<span class=\"k\">#eval</span> <span class=\"n\">eat</span> <span class=\"n\">burrito</span> <span class=\"o\">(</span><span class=\"kd\">by</span> <span class=\"n\">decide</span><span class=\"o\">)</span>\n<span class=\"k\">#eval</span> <span class=\"n\">eat</span> <span class=\"n\">coffee</span> <span class=\"o\">(</span><span class=\"kd\">by</span> <span class=\"n\">decide</span><span class=\"o\">)</span>\n</code></pre></div>\n<p>the stderr output is this --</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"o\">[</span><span class=\"n\">Error</span> <span class=\"bp\">-</span> <span class=\"mi\">11</span><span class=\"o\">:</span><span class=\"mi\">26</span><span class=\"o\">:</span><span class=\"mi\">12</span> <span class=\"n\">AM</span><span class=\"o\">]</span> <span class=\"n\">Request</span> <span class=\"n\">textDocument</span><span class=\"bp\">/</span><span class=\"n\">semanticTokens</span><span class=\"bp\">/</span><span class=\"n\">full</span> <span class=\"n\">failed.</span>\n<span class=\"n\">Error</span><span class=\"o\">:</span> <span class=\"n\">Connection</span> <span class=\"n\">got</span> <span class=\"n\">disposed.</span>\n    <span class=\"n\">at</span> <span class=\"n\">Object.dispose</span> <span class=\"o\">(</span><span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">mark</span><span class=\"bp\">/.</span><span class=\"n\">vscode</span><span class=\"bp\">-</span><span class=\"n\">server</span><span class=\"bp\">/</span><span class=\"n\">extensions</span><span class=\"bp\">/</span><span class=\"n\">leanprover.lean4</span><span class=\"bp\">-</span><span class=\"mi\">0</span><span class=\"bp\">.</span><span class=\"mi\">0</span><span class=\"bp\">.</span><span class=\"mi\">95</span><span class=\"bp\">/</span><span class=\"n\">dist</span><span class=\"bp\">/</span><span class=\"n\">extension.js</span><span class=\"o\">:</span><span class=\"mi\">2</span><span class=\"o\">:</span><span class=\"mi\">560633</span><span class=\"o\">)</span>\n    <span class=\"n\">at</span> <span class=\"n\">Object.dispose</span> <span class=\"o\">(</span><span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">mark</span><span class=\"bp\">/.</span><span class=\"n\">vscode</span><span class=\"bp\">-</span><span class=\"n\">server</span><span class=\"bp\">/</span><span class=\"n\">extensions</span><span class=\"bp\">/</span><span class=\"n\">leanprover.lean4</span><span class=\"bp\">-</span><span class=\"mi\">0</span><span class=\"bp\">.</span><span class=\"mi\">0</span><span class=\"bp\">.</span><span class=\"mi\">95</span><span class=\"bp\">/</span><span class=\"n\">dist</span><span class=\"bp\">/</span><span class=\"n\">extension.js</span><span class=\"o\">:</span><span class=\"mi\">2</span><span class=\"o\">:</span><span class=\"mi\">647247</span><span class=\"o\">)</span>\n    <span class=\"n\">at</span> <span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">mark</span><span class=\"bp\">/.</span><span class=\"n\">vscode</span><span class=\"bp\">-</span><span class=\"n\">server</span><span class=\"bp\">/</span><span class=\"n\">extensions</span><span class=\"bp\">/</span><span class=\"n\">leanprover.lean4</span><span class=\"bp\">-</span><span class=\"mi\">0</span><span class=\"bp\">.</span><span class=\"mi\">0</span><span class=\"bp\">.</span><span class=\"mi\">95</span><span class=\"bp\">/</span><span class=\"n\">dist</span><span class=\"bp\">/</span><span class=\"n\">extension.js</span><span class=\"o\">:</span><span class=\"mi\">2</span><span class=\"o\">:</span><span class=\"mi\">642942</span>\n    <span class=\"n\">at</span> <span class=\"n\">runMicrotasks</span> <span class=\"o\">(</span><span class=\"bp\">&lt;</span><span class=\"n\">anonymous</span><span class=\"bp\">&gt;</span><span class=\"o\">)</span>\n    <span class=\"n\">at</span> <span class=\"n\">processTicksAndRejections</span> <span class=\"o\">(</span><span class=\"n\">node</span><span class=\"o\">:</span><span class=\"n\">internal</span><span class=\"bp\">/</span><span class=\"n\">process</span><span class=\"bp\">/</span><span class=\"n\">task_queues</span><span class=\"o\">:</span><span class=\"mi\">96</span><span class=\"o\">:</span><span class=\"mi\">5</span><span class=\"o\">)</span>\n<span class=\"o\">[</span><span class=\"n\">Error</span> <span class=\"bp\">-</span> <span class=\"mi\">11</span><span class=\"o\">:</span><span class=\"mi\">26</span><span class=\"o\">:</span><span class=\"mi\">12</span> <span class=\"n\">AM</span><span class=\"o\">]</span> <span class=\"n\">Request</span> <span class=\"n\">textDocument</span><span class=\"bp\">/</span><span class=\"n\">documentSymbol</span> <span class=\"n\">failed.</span>\n<span class=\"n\">Error</span><span class=\"o\">:</span> <span class=\"n\">Connection</span> <span class=\"n\">got</span> <span class=\"n\">disposed.</span>\n    <span class=\"n\">at</span> <span class=\"n\">Object.dispose</span> <span class=\"o\">(</span><span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">mark</span><span class=\"bp\">/.</span><span class=\"n\">vscode</span><span class=\"bp\">-</span><span class=\"n\">server</span><span class=\"bp\">/</span><span class=\"n\">extensions</span><span class=\"bp\">/</span><span class=\"n\">leanprover.lean4</span><span class=\"bp\">-</span><span class=\"mi\">0</span><span class=\"bp\">.</span><span class=\"mi\">0</span><span class=\"bp\">.</span><span class=\"mi\">95</span><span class=\"bp\">/</span><span class=\"n\">dist</span><span class=\"bp\">/</span><span class=\"n\">extension.js</span><span class=\"o\">:</span><span class=\"mi\">2</span><span class=\"o\">:</span><span class=\"mi\">560633</span><span class=\"o\">)</span>\n    <span class=\"n\">at</span> <span class=\"n\">Object.dispose</span> <span class=\"o\">(</span><span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">mark</span><span class=\"bp\">/.</span><span class=\"n\">vscode</span><span class=\"bp\">-</span><span class=\"n\">server</span><span class=\"bp\">/</span><span class=\"n\">extensions</span><span class=\"bp\">/</span><span class=\"n\">leanprover.lean4</span><span class=\"bp\">-</span><span class=\"mi\">0</span><span class=\"bp\">.</span><span class=\"mi\">0</span><span class=\"bp\">.</span><span class=\"mi\">95</span><span class=\"bp\">/</span><span class=\"n\">dist</span><span class=\"bp\">/</span><span class=\"n\">extension.js</span><span class=\"o\">:</span><span class=\"mi\">2</span><span class=\"o\">:</span><span class=\"mi\">647247</span><span class=\"o\">)</span>\n    <span class=\"n\">at</span> <span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">mark</span><span class=\"bp\">/.</span><span class=\"n\">vscode</span><span class=\"bp\">-</span><span class=\"n\">server</span><span class=\"bp\">/</span><span class=\"n\">extensions</span><span class=\"bp\">/</span><span class=\"n\">leanprover.lean4</span><span class=\"bp\">-</span><span class=\"mi\">0</span><span class=\"bp\">.</span><span class=\"mi\">0</span><span class=\"bp\">.</span><span class=\"mi\">95</span><span class=\"bp\">/</span><span class=\"n\">dist</span><span class=\"bp\">/</span><span class=\"n\">extension.js</span><span class=\"o\">:</span><span class=\"mi\">2</span><span class=\"o\">:</span><span class=\"mi\">642942</span>\n    <span class=\"n\">at</span> <span class=\"n\">runMicrotasks</span> <span class=\"o\">(</span><span class=\"bp\">&lt;</span><span class=\"n\">anonymous</span><span class=\"bp\">&gt;</span><span class=\"o\">)</span>\n    <span class=\"n\">at</span> <span class=\"n\">processTicksAndRejections</span> <span class=\"o\">(</span><span class=\"n\">node</span><span class=\"o\">:</span><span class=\"n\">internal</span><span class=\"bp\">/</span><span class=\"n\">process</span><span class=\"bp\">/</span><span class=\"n\">task_queues</span><span class=\"o\">:</span><span class=\"mi\">96</span><span class=\"o\">:</span><span class=\"mi\">5</span><span class=\"o\">)</span>\n<span class=\"n\">Watchdog</span> <span class=\"n\">error</span><span class=\"o\">:</span> <span class=\"n\">Got</span> <span class=\"bp\">`</span><span class=\"n\">shutdown</span><span class=\"bp\">`</span> <span class=\"n\">request</span><span class=\"o\">,</span> <span class=\"n\">expected</span> <span class=\"n\">an</span> <span class=\"bp\">`</span><span class=\"n\">exit</span><span class=\"bp\">`</span> <span class=\"n\">notification</span>\n<span class=\"n\">libc</span><span class=\"bp\">++</span><span class=\"n\">abi</span><span class=\"o\">:</span> <span class=\"n\">terminating</span> <span class=\"k\">with</span> <span class=\"n\">uncaught</span> <span class=\"n\">exception</span> <span class=\"n\">of</span> <span class=\"n\">type</span> <span class=\"n\">lean</span><span class=\"o\">::</span><span class=\"n\">exception</span><span class=\"o\">:</span> <span class=\"n\">incomplete</span> <span class=\"n\">case</span>\n<span class=\"o\">[</span><span class=\"n\">Error</span> <span class=\"bp\">-</span> <span class=\"mi\">11</span><span class=\"o\">:</span><span class=\"mi\">26</span><span class=\"o\">:</span><span class=\"mi\">13</span> <span class=\"n\">AM</span><span class=\"o\">]</span> <span class=\"n\">Request</span> <span class=\"n\">textDocument</span><span class=\"bp\">/</span><span class=\"n\">documentSymbol</span> <span class=\"n\">failed.</span>\n  <span class=\"n\">Message</span><span class=\"o\">:</span> <span class=\"n\">Server</span> <span class=\"n\">process</span> <span class=\"n\">for</span> <span class=\"n\">file</span><span class=\"o\">:</span><span class=\"bp\">///</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">mark</span><span class=\"bp\">/</span><span class=\"n\">pullbacks</span><span class=\"bp\">/</span><span class=\"n\">Pullbacks.lean</span> <span class=\"n\">crashed</span><span class=\"o\">,</span> <span class=\"n\">likely</span> <span class=\"n\">due</span> <span class=\"n\">to</span> <span class=\"n\">a</span> <span class=\"n\">stack</span> <span class=\"n\">overflow</span> <span class=\"n\">or</span> <span class=\"n\">a</span> <span class=\"n\">bug.</span>\n  <span class=\"n\">Code</span><span class=\"o\">:</span> <span class=\"bp\">-</span><span class=\"mi\">32902</span>\n</code></pre></div>",
        "id": 301853648,
        "sender_full_name": "Mark Wilhelm",
        "timestamp": 1664648848
    },
    {
        "content": "<p>/me is feeling hungry now</p>",
        "id": 301856673,
        "sender_full_name": "Newell Jensen",
        "timestamp": 1664650890
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover/lean4/pull/1697\">lean4#1697</a></p>",
        "id": 302762304,
        "sender_full_name": "Gabriel Ebner",
        "timestamp": 1665101552
    }
]