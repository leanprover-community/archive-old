[
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kd\">def</span> <span class=\"n\">cardinal.setoid</span> <span class=\"o\">:</span> <span class=\"n\">Setoid</span> <span class=\"kt\">Type</span> <span class=\"o\">:=</span> <span class=\"gr\">sorry</span>\n\n<span class=\"kd\">def</span> <span class=\"n\">cardinal</span> <span class=\"o\">:=</span> <span class=\"n\">Quotient</span> <span class=\"n\">cardinal.setoid</span> <span class=\"c1\">-- invalid field notation</span>\n\n<span class=\"kd\">def</span> <span class=\"n\">cardinal2</span> <span class=\"o\">:=</span> <span class=\"n\">Quotient</span> <span class=\"n\">cardinal.setoid</span> <span class=\"c1\">-- works fine</span>\n</code></pre></div>\n<p>Is this expected? I think this is a natural way to define cardinal but if the setoid needs to go in another namespace then so be it.</p>",
        "id": 240513207,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1622141314
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110038\">Kevin Buzzard</span> <a href=\"#narrow/stream/270676-lean4/topic/invalid.20field.20notation/near/240513207\">said</a>:</p>\n<blockquote>\n<p>Is this expected? I think this is a natural way to define cardinal but if the setoid needs to go in another namespace then so be it.</p>\n</blockquote>\n<p>Currently, you cannot refer to a name that is inside the namespace of a local variable, i.e.:</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"n\">abbrev</span> <span class=\"n\">Foo.bar</span> <span class=\"o\">:</span> <span class=\"kt\">Type</span> <span class=\"o\">:=</span> <span class=\"n\">Nat</span>\n<span class=\"k\">#check</span> <span class=\"n\">Foo.bar</span> <span class=\"c1\">-- works</span>\n<span class=\"k\">#check</span> <span class=\"k\">fun</span> <span class=\"o\">(</span><span class=\"n\">Foo</span> <span class=\"o\">:</span> <span class=\"n\">Unit</span><span class=\"o\">)</span> <span class=\"bp\">=&gt;</span> <span class=\"n\">Foo.bar</span> <span class=\"c1\">-- fails</span>\n</code></pre></div>\n<p>I am not sure if there is a reason for this limitation or if it is just an oversight. Note that as a workaround, you could write either:</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kd\">def</span> <span class=\"n\">cardinal</span> <span class=\"o\">:=</span> <span class=\"n\">Quotient</span> <span class=\"n\">_root_.cardinal.setoid</span>\n<span class=\"kd\">def</span> <span class=\"n\">cardinal</span> <span class=\"o\">:=</span> <span class=\"kd\">by</span> <span class=\"n\">clear</span> <span class=\"n\">cardinal</span><span class=\"bp\">;</span> <span class=\"n\">exact</span> <span class=\"n\">cardinal.setoid</span>\n</code></pre></div>",
        "id": 240520364,
        "sender_full_name": "Daniel Selsam",
        "timestamp": 1622144377
    }
]