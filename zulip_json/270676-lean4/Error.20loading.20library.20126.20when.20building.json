[
    {
        "content": "<p>I'm having problem when compiling lean code.<br>\nAfter cloning the latest version of <code>https://github.com/abentkamp/duper</code>, I ran <code>lake build</code> in the folder and lean raised an error</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"n\">libc</span><span class=\"bp\">++</span><span class=\"n\">abi</span><span class=\"o\">:</span> <span class=\"n\">terminating</span> <span class=\"bp\">&lt;...&gt;</span><span class=\"n\">lean</span><span class=\"o\">::</span><span class=\"n\">exception</span><span class=\"o\">:</span> <span class=\"n\">error</span> <span class=\"n\">loading</span> <span class=\"n\">library</span> <span class=\"n\">Duper</span><span class=\"bp\">-</span><span class=\"n\">Util</span><span class=\"bp\">-</span><span class=\"n\">Misc.dll</span><span class=\"o\">:</span> <span class=\"mi\">126</span>\n<span class=\"n\">error</span><span class=\"o\">:</span> <span class=\"n\">external</span> <span class=\"n\">command</span> <span class=\"bp\">`&lt;...\\</span><span class=\"n\">lean.exe</span><span class=\"bp\">&gt;`</span> <span class=\"n\">exited</span> <span class=\"k\">with</span> <span class=\"n\">code</span> <span class=\"mi\">3221226505</span>\n</code></pre></div>\n<p>What should I do to make it work?<br>\nThe complete error message:</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"n\">stderr</span><span class=\"o\">:</span>\n<span class=\"n\">info</span><span class=\"o\">:</span> <span class=\"n\">Building</span> <span class=\"n\">Duper.Clause</span>\n<span class=\"n\">error</span><span class=\"o\">:</span> <span class=\"bp\">&gt;</span> <span class=\"n\">LEAN_PATH</span><span class=\"bp\">=.\\</span><span class=\"n\">lean_packages</span><span class=\"bp\">\\</span><span class=\"n\">std</span><span class=\"bp\">\\</span><span class=\"n\">build</span><span class=\"bp\">\\</span><span class=\"n\">lib</span><span class=\"bp\">;.\\</span><span class=\"n\">build</span><span class=\"bp\">\\</span><span class=\"n\">lib</span> <span class=\"bp\">&lt;...&gt;\\</span><span class=\"n\">lean.exe</span> <span class=\"bp\">.\\.\\.\\</span><span class=\"n\">Duper</span><span class=\"bp\">\\</span><span class=\"n\">Clause.lean</span> <span class=\"bp\">-</span><span class=\"n\">R</span> <span class=\"bp\">.\\.\\.</span> <span class=\"bp\">-</span><span class=\"n\">o</span> <span class=\"bp\">.\\</span><span class=\"n\">build</span><span class=\"bp\">\\</span><span class=\"n\">lib</span><span class=\"bp\">\\</span><span class=\"n\">Duper</span><span class=\"bp\">\\</span><span class=\"n\">Clause.olean</span> <span class=\"bp\">-</span><span class=\"n\">i</span> <span class=\"bp\">.\\</span><span class=\"n\">build</span><span class=\"bp\">\\</span><span class=\"n\">lib</span><span class=\"bp\">\\</span><span class=\"n\">Duper</span><span class=\"bp\">\\</span><span class=\"n\">Clause.ilean</span> <span class=\"bp\">-</span><span class=\"n\">c</span> <span class=\"bp\">.\\</span><span class=\"n\">build</span><span class=\"bp\">\\</span><span class=\"n\">ir</span><span class=\"bp\">\\</span><span class=\"n\">Duper</span><span class=\"bp\">\\</span><span class=\"n\">Clause.c</span> <span class=\"c1\">--load-dynlib=Duper-Util-Misc.dll --load-dynlib=Duper-Expr.dll --load-dynlib=Duper-Order.dll</span>\n<span class=\"n\">error</span><span class=\"o\">:</span> <span class=\"n\">stderr</span><span class=\"o\">:</span>\n<span class=\"n\">libc</span><span class=\"bp\">++</span><span class=\"n\">abi</span><span class=\"o\">:</span> <span class=\"n\">terminating</span> <span class=\"n\">due</span> <span class=\"n\">to</span> <span class=\"n\">uncaught</span> <span class=\"n\">exception</span> <span class=\"n\">of</span> <span class=\"n\">type</span> <span class=\"n\">lean</span><span class=\"o\">::</span><span class=\"n\">exception</span><span class=\"o\">:</span> <span class=\"n\">error</span> <span class=\"n\">loading</span> <span class=\"n\">library</span> <span class=\"n\">Duper</span><span class=\"bp\">-</span><span class=\"n\">Util</span><span class=\"bp\">-</span><span class=\"n\">Misc.dll</span><span class=\"o\">:</span> <span class=\"mi\">126</span>\n<span class=\"n\">error</span><span class=\"o\">:</span> <span class=\"n\">external</span> <span class=\"n\">command</span> <span class=\"bp\">`</span><span class=\"n\">c</span><span class=\"o\">:</span><span class=\"bp\">\\</span><span class=\"n\">Users</span><span class=\"bp\">\\</span><span class=\"n\">yiche</span><span class=\"bp\">\\.</span><span class=\"n\">elan</span><span class=\"bp\">\\</span><span class=\"n\">toolchains</span><span class=\"bp\">\\</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---nightly-2022-11-19\\bin\\lean.exe` exited with code 3221226505</span>\n</code></pre></div>",
        "id": 311557468,
        "sender_full_name": "Yicheng Qian",
        "timestamp": 1669111525
    },
    {
        "content": "<p>Ah. I've tried WSL, and it compiled successfully. However I just can't get it to compile on Windows.</p>",
        "id": 311652922,
        "sender_full_name": "Yicheng Qian",
        "timestamp": 1669133042
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"315577\">@Mac</span> 126 is <code>ERROR_MOD_NOT_FOUND</code>, so the <code>PATH</code> may not be correctly set up. Unfortunately, the error message doesn't tell us whether the mentioned DLL or any of its dependencies was not found.</p>",
        "id": 311654753,
        "sender_full_name": "Sebastian Ullrich",
        "timestamp": 1669133602
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"110024\">@Sebastian Ullrich</span>  Yeah the problem is that augmented PATH environment variable does not properly forward to the worker processes on Windows. This is a relatively recent phenomenon that I think may be related to the changes in <a href=\"https://github.com/leanprover/lean4/pull/1739\">lean4#1759</a>. However, I have a fix in the works which should solve this regardless. This plan is deploy it with the v4.1.0 release by the end of the month.</p>",
        "id": 311928336,
        "sender_full_name": "Mac",
        "timestamp": 1669252005
    }
]