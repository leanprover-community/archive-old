[
    {
        "content": "<p>The second release of <em>Functional Programming in Lean</em> is up. This release completes Chapter 1. As always, feedback is more than welcome here or via email.</p>\n<p>I hope you find it useful! It's available at <a href=\"https://leanprover.github.io/functional_programming_in_lean/\">https://leanprover.github.io/functional_programming_in_lean/</a> .</p>",
        "id": 288866895,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1657228455
    },
    {
        "content": "<p>Hello again! The third release is up. It contains <a href=\"https://leanprover.github.io/functional_programming_in_lean/hello-world.html\">Chapter 2</a>, which describes <code>IO</code>, <code>lake</code>, and introduces <code>do</code>-notation.</p>",
        "id": 292333157,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1659897377
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"354934\">@David Thrane Christiansen</span> One note: the <code>feline</code> example could use <code>lake new feline exe</code> instead to generate just an executable configuration.</p>",
        "id": 292346818,
        "sender_full_name": "Mac",
        "timestamp": 1659914030
    },
    {
        "content": "<p>I love the way you introduce IO actions, no monoids in the category of endofunctors, no algebraic effects; 10/10 :).<br>\nA few very minor observations:<br>\na) 2.1 - Anatomy of a Greeting</p>\n<blockquote>\n<p>Because this action doesn't read any interesting information from the environment in the process of emitting the string, IO.println has type String → IO Unit</p>\n</blockquote>\n<p>I don't think it's immediately obvious as to what the type would be if it did indeed read anything interesting from the environment, but perhaps it's just my inability to process the sentence properly :).</p>\n<p>b) 2.2 - IO Actions vs Values</p>\n<blockquote>\n<p>It's structure....</p>\n</blockquote>\n<p>Just a typo from 'Its structure'.</p>\n<p>c) 2.4 - Main<br>\nThis is more so a nitpick and realistically completely irrelevant in a Lean book, but in specifically C (and rules are different in C++):<br>\n0) you'll never see a standard-compliant <code>main</code> that returns void unless you want to rely on <code>/* or in some other implementation-defined manner. */</code> in the standard<br>\n1) technically, any function in C that does not specify <code>void</code> in the parameter list takes any number of arguments; as such, especially main should be explicitly labelled as <code>int main(void)</code> if you want the one that takes no arguments</p>",
        "id": 292347610,
        "sender_full_name": "František Silváši",
        "timestamp": 1659915151
    },
    {
        "content": "<p>The counter worker/cook analogy is really nice but it threw me off a bit upon first reading and I had to do a mental \"flip\" when I reached the conclusion.</p>\n<p>Once I got to the end of the paragraph it was clear the counter worker is the IO monad that interacts with the real world but my expectation reading initially was exactly the opposite:  I, the client, am interacting with the nice/clean/polite and friendly counter worker Lean (it also made sense in the sense of requesting what I want, i.e. being declarative) while, behind the scenes, the cook (the runtime) does all the \"heavy lifting\".</p>",
        "id": 292356015,
        "sender_full_name": "Tom",
        "timestamp": 1659927625
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"315577\">Mac</span> <a href=\"#narrow/stream/270676-lean4/topic/New.20release.20of.20Functional.20Programming.20in.20Lean/near/292346818\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"354934\">David Thrane Christiansen</span> One note: the <code>feline</code> example could use <code>lake new feline exe</code> instead to generate just an executable configuration.</p>\n</blockquote>\n<p>Thanks! I'll consider revising it. I think there's some value in people editing the file, just to get the experience, but it's also nice to show the available conveniences.</p>",
        "id": 292367191,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1659942496
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"364929\">@František Silváši</span> I've created an issue on my tracker to make sure I follow up on these points - they'll be fixed in the next release. Thank you! And given that C has a strong culture of reading and adhering to standards, rather than just what implementations actually do, I think it's important to respect it so as not to lose C programmers who are less sold on Lean. This feedback is very valuable (as are the other points), so thank you very much!</p>",
        "id": 292367900,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1659943073
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"515083\">@Tom</span> thanks for the feedback! I'll think a bit more about that analogy.</p>",
        "id": 292367996,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1659943125
    },
    {
        "content": "<p>I like the analogy and I read it correctly from the beginning but of course I already know about monads. David, maybe you could simply insert a stronger hint at the very beginning clarifying who is the cook and who is the counter worker.</p>",
        "id": 292380672,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1659952214
    },
    {
        "content": "<p>A couple of comments on chapter 1:</p>\n<ul>\n<li>1.6 Polymorphism-Option<br>\nMight be worth mentioning coercion allows the body of <code>List.head?</code> to be written</li>\n</ul>\n<div class=\"codehilite\" data-code-language=\"def\"><pre><span></span><code>  match xs with\n  | [] =&gt; none\n  | y :: _ =&gt; y\n</code></pre></div>\n<p>and Lean infers the <code>y</code> really means <code>some y</code>. This may be a little advanced for an introductory text, but it is the sort of thing that could catch out newcomers from languages where the <code>some</code> is mandatory. Perhaps it would be better in the <code>Additional Conveniences</code> section.</p>\n<ul>\n<li>1.7 Additional Conveniences<br>\nWould be worth mentioning that match cases can be combined when the expression on the RHS is the same, so the <code>halve</code> example  can be written:</li>\n</ul>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kd\">def</span> <span class=\"n\">halve</span> <span class=\"o\">:</span> <span class=\"n\">Nat</span> <span class=\"bp\">→</span> <span class=\"n\">Nat</span>\n  <span class=\"bp\">|</span> <span class=\"mi\">0</span>\n  <span class=\"bp\">|</span> <span class=\"mi\">1</span> <span class=\"bp\">=&gt;</span> <span class=\"mi\">0</span>\n  <span class=\"bp\">|</span> <span class=\"n\">n</span> <span class=\"bp\">+</span> <span class=\"mi\">2</span> <span class=\"bp\">=&gt;</span> <span class=\"n\">halve</span> <span class=\"n\">n</span> <span class=\"bp\">+</span> <span class=\"mi\">1</span>\n</code></pre></div>",
        "id": 293342718,
        "sender_full_name": "Paul  Chisholm",
        "timestamp": 1660452493
    },
    {
        "content": "<p>Another couple of things it would be good to cover:</p>\n<ul>\n<li>The difference between <code>=</code> and <code>==</code> (even if just to note <code>==</code> is used for the moment and <code>=</code> will be explained in <code>From Programming to Proving</code>).</li>\n<li>Explanation of the <code>.name</code> notation where Lean infers the namespace from context (I see this in a couple of the examples and in Zulip topics, but not in the documentation yet that I have observed).</li>\n</ul>",
        "id": 293360228,
        "sender_full_name": "Paul  Chisholm",
        "timestamp": 1660469841
    },
    {
        "content": "<p>Note that we would usually write</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kd\">def</span> <span class=\"n\">halve</span> <span class=\"o\">:</span> <span class=\"n\">Nat</span> <span class=\"bp\">-&gt;</span> <span class=\"n\">Nat</span>\n  <span class=\"bp\">|</span> <span class=\"mi\">0</span> <span class=\"bp\">|</span> <span class=\"mi\">1</span> <span class=\"bp\">=&gt;</span> <span class=\"mi\">0</span>\n  <span class=\"bp\">|</span> <span class=\"n\">n</span> <span class=\"bp\">+</span> <span class=\"mi\">2</span> <span class=\"bp\">=&gt;</span> <span class=\"n\">halve</span> <span class=\"n\">n</span> <span class=\"bp\">+</span> <span class=\"mi\">1</span>\n</code></pre></div>\n<p>Not splitting the combined case out over multiple lines</p>",
        "id": 293360775,
        "sender_full_name": "Henrik Böving",
        "timestamp": 1660470213
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"383769\">@Paul  Chisholm</span> thanks for the feedback!</p>\n<blockquote>\n<p>Lean infers the <code>y</code> really means <code>some y</code></p>\n</blockquote>\n<p>I'm intentionally avoiding all coercions until the feature can be explained properly. Lean has so many features that their interactions can be quite overwhelming even for people with deep experience with proof assistants and functional programming, and this text is intended for readers with zero experience in either. I need to be careful in how much they get in chapter 1, but coercions are absolutely on the radar for later in the book, and this is a good example.</p>",
        "id": 293376955,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1660479930
    },
    {
        "content": "<p>I've created issues in my repository tracking each of the points that you brought up. I think that Ch1 is already longer than it should be, but it's certainly important to get to all of them at some point. Thanks again!</p>",
        "id": 293377344,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1660480153
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"354934\">@David Thrane Christiansen</span> Thanks for the response. The book is shaping up nicely. I think it will be an invaluable resource for Lean programming.<br>\n<span class=\"user-mention\" data-user-id=\"395550\">@Henrik Böving</span> That formatting makes sense. Is there, or is there planned, a Lean style guidelines, or even an automated code formatter?</p>",
        "id": 293447680,
        "sender_full_name": "Paul  Chisholm",
        "timestamp": 1660517626
    },
    {
        "content": "<p>The plan is to eventually get the delaborator to a point where it can act as a pretty printer for Lean. However right now it isn't even guaranteed to produce things that typecheck/evaluate to the same thing as their input properly so that is still a long way to go but we have people investigating and working on the issue right now.</p>",
        "id": 293447805,
        "sender_full_name": "Henrik Böving",
        "timestamp": 1660517763
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"364929\">@František Silváši 🦉</span> Thanks again for the comment! I've fixed the issues you identified on my main branch, and the corrections will find their way into the imminent release.</p>",
        "id": 299346723,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1663435525
    },
    {
        "content": "<p>It's that time again! There's a fresh release of <em>Functional Programming in Lean</em> available for your reading pleasure. This time around, the first half of the type class chapter is available. It's later than usual this month due to my summer vacation and ICFP, but releases will be returning to the usual schedule next month.</p>\n<p>As usual, feedback is welcome both here and in my email. Thank you for reading it!</p>",
        "id": 299464860,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1663526019
    },
    {
        "content": "<p>Thank you!  </p>\n<p>Very minor nit:   On the first page,  you write:</p>\n<blockquote>\n<p>an instance is created that contains an implementation of each operation for the new type. For <strong>instance</strong>, a type class named Add</p>\n</blockquote>\n<p>I wonder if in this case the second instance <span aria-label=\"upside down\" class=\"emoji emoji-1f643\" role=\"img\" title=\"upside down\">:upside_down:</span> of the world \"instance\" (emphasis mine) would be better served with \"example\" for clarity's sake.  (This also re-occurs later in the chapter)</p>",
        "id": 299491203,
        "sender_full_name": "Tom",
        "timestamp": 1663553244
    },
    {
        "content": "<p>Good description of type classes.</p>\n<p>A few minor typos:</p>\n<ul>\n<li>3.1, Overloaded Addition,  second paragraph. \"While an understanding the full...\" -&gt; \"While an understanding <em>of</em> the full...\"</li>\n<li>3.1, Overloaded Multiplication, first paragraph. \"...with the same time\" -&gt; \"...with the same <em>type</em>\"</li>\n<li>3.1, Literal Numbers, second last paragraph. Missing '.' at end of the second sentence, immediately before 'Just'.</li>\n<li>3.2, Methods and Implicit Arguments, first paragraph. \"because the declaring a\" -&gt; \"because declaring a\"</li>\n<li>3.2, Methods and Implicit Arguments, third paragraph. \"\"In order for the Lean\" -&gt; \"In order for Lean\"</li>\n<li>3.3, Heterogenous Overloadings, second paragraph. \"For instance, given the above two instances...\" -&gt; \"Given the above two instances...\". The repeated use of 'instance' seems awkward.</li>\n</ul>",
        "id": 299493118,
        "sender_full_name": "Paul  Chisholm",
        "timestamp": 1663555230
    },
    {
        "content": "<p>This reads very coherently, I genuinely like this.</p>\n<p>I have two notes that are of stylistic nature and can be safely disregarded :).<br>\n0) In 3.1. - <code>open Plus (plus)</code> the 'selective export of plus' feature is first introduced (unless I am misremembering!) here, which is a section 'Classes and Instances'; it feels to me a little bit buried here if this is to be the first exposition to the feature. Maybe its first mention in 2.3. 'Libraries and Imports' might be a nicer place.</p>\n<p>1) In 3.1. - 'Conversion to Strings', in the context of:</p>\n<blockquote>\n<p>Additionally, if a type has a ToString instance, then it can be used to display the result of #eval...</p>\n</blockquote>\n<p>This is, to me, begging for a short explanation of the difference between <code>Repr</code> and <code>ToString</code>, but I can also imagine this being elsewhere (or not present at all :)), as there are admittedly better contexts for this.</p>\n<p>Again, this is very much a 'personal take', do feel more than encouraged to ignore this, there's nothing wrong with either of these :).</p>",
        "id": 299715956,
        "sender_full_name": "František Silváši 🦉",
        "timestamp": 1663667505
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"383769\">@Paul  Chisholm</span>  I've fixed all those in the latest version, thanks! And sorry it took me a bit to get back to you here.</p>",
        "id": 306877412,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1667069666
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"364929\">@František Silváši 🦉</span> These are very good suggestions that I've put into the book's issue tracker.</p>",
        "id": 306877451,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1667069694
    },
    {
        "content": "<p>Halloween is approaching, but there's no need to be afraid of proofs or of type classes.</p>\n<p>A new release of <em>Functional Programming in Lean</em>  is up, containing the rest of the chapter on type classes as well as updates based on your excellent feedback. This release also contains a short interlude that lightly introduces the idea of propositions, proofs, and truth, because they were really necessary in order to explain things like <code>GetElem</code>.</p>\n<p>As always, your feedback is much appreciated.</p>",
        "id": 306877473,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1667069713
    },
    {
        "content": "<p>In <a href=\"https://leanprover.github.io/functional_programming_in_lean/type-classes/coercion.html\">https://leanprover.github.io/functional_programming_in_lean/type-classes/coercion.html</a>, the last section seems outdated since <code>CoeHead</code> and <code>CoeTail</code> are discussed in this chapter.</p>",
        "id": 306890182,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1667079569
    },
    {
        "content": "<p>A very minor point: in several places you use tree names as examples, but this will add completely unnecessary friction for people whose native language isn't English. I have no idea what is a birch or a beech. I understand that it doesn't matter, but it still slows me a tiny bit while reading.</p>",
        "id": 306890317,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1667079701
    },
    {
        "content": "<p>In <a href=\"https://leanprover.github.io/functional_programming_in_lean/type-classes/coercion.html\">https://leanprover.github.io/functional_programming_in_lean/type-classes/coercion.html</a>, there is an inconsistency betwenn <code>howMany</code> and <code>howMuch</code>.</p>",
        "id": 306890484,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1667079865
    },
    {
        "content": "<p>In <a href=\"https://leanprover.github.io/functional_programming_in_lean/type-classes/pos.html#another-representation\">https://leanprover.github.io/functional_programming_in_lean/type-classes/pos.html#another-representation</a> I don't understand the example, but maybe I forgot a previous explanation of this syntax.</p>",
        "id": 306890550,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1667079950
    },
    {
        "content": "<p>Oh I see: this is the syntax to overload the constructor name, right? I always forget about this possibility.</p>",
        "id": 306890658,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1667080054
    },
    {
        "content": "<p>Another good chapter :).</p>\n<p>Minor notes - once again, really just stylistic (in addition to what Patrick's already mentioned):</p>\n<p>In 4.5 - Equality and Ordering, in the context of:</p>\n<blockquote>\n<p>From the perspective of mathematics, two functions are equal if they map equal inputs to equal outputs, so this statement is even true, though it requires a two-line proof to convince Lean of this fact.</p>\n</blockquote>\n<p>Mathematics doesn't technically 'need to' do extensional, it's just the common set-theoretic one; might be worth rephrasing.</p>\n<p>In 4.6 - Chaining Coercions:<br>\nThere's a mention of CoeHead that's like: oh yeah, this exists. I would actually be interested in seeing an example of where this is useful, because frankly, I can't think of one and a quick grep of the Lean 4 repo comes up with a single instance of this, some deep in Syntax that's far from immediately straightforward to understand.</p>\n<p>In 4.6  - Design Considerations</p>\n<blockquote>\n<p>'First off,coercion' - typo, space after comma</p>\n</blockquote>\n<p>Very enjoyable read btw.</p>",
        "id": 306903659,
        "sender_full_name": "František Silváši 🦉",
        "timestamp": 1667093321
    },
    {
        "content": "<p>Thanks for this!</p>\n<p>In the coercions chapter should the need to tag coercion methods with <code>@[coe]</code> be mentioned? I'm not clear on when that attribute is required but I do know that it can trip one up.</p>",
        "id": 306905380,
        "sender_full_name": "Arien Malec",
        "timestamp": 1667095223
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"364929\">František Silváši 🦉</span> <a href=\"#narrow/stream/270676-lean4/topic/New.20release.20of.20Functional.20Programming.20in.20Lean/near/306903659\">said</a>:</p>\n<blockquote>\n<p>In 4.5 - Equality and Ordering, in the context of:</p>\n<blockquote>\n<p>From the perspective of mathematics, two functions are equal if they map equal inputs to equal outputs, so this statement is even true, though it requires a two-line proof to convince Lean of this fact.</p>\n</blockquote>\n<p>Mathematics doesn't technically 'need to' do extensional, it's just the common set-theoretic one; might be worth rephrasing.</p>\n</blockquote>\n<p>At the level of detail of this book about mathematics, I think it is really pointless to mention that some extremely specialized areas of mathematics need more refined versions of function equality. This has nothing to do with foundations of mathematics, it is simply the meaning of the word function in informal real world mathematics.</p>",
        "id": 306935887,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1667123999
    },
    {
        "content": "<p>I don't necessarily disagree; that doesn't mean the sentence can't be phrased in a slightly different way that also includes the fact that this is 'merely' the most common interpretation. Of course, this is exceedingly minor :).</p>",
        "id": 306986940,
        "sender_full_name": "František Silváši 🦉",
        "timestamp": 1667150751
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"110031\">@Patrick Massot</span> Thanks for all the great suggestions! I've fixed the errors in the development version of the book, and I added a little reminder about the structure constructor syntax in the exercise. WRT the tree names: I realy don't want to use lists of numbers, as my experience is that meaningful examples are much more meaningful for most people. But it sounds like picking trees from my local ecosystem is not a good solution for a big population of readers, so I'll think about some different themes to use (or at least drop some of the more similar-sounding ones).</p>",
        "id": 308119202,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1667645665
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"364929\">@František Silváši 🦉</span> : I'm aiming for a level of mathematics background here that is quite low. Just as I'm not planning on having an extensive discussion of constructive vs classical reasoning (except just enough to talk about computable vs noncomputable definitions), I'm not planning on talking about intensional vs extensional characterizations of functions or any such thing. I'll be mostly just appealing to the ideas of sets and functions that people learn when they're 13 years old, because that's not what this is about. I suspect that anyone with the background to stumble over this will also be in a position to realize that they're at a different level.</p>\n<p>Thanks!</p>",
        "id": 308119828,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1667645959
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"542196\">Arien Malec</span> <a href=\"#narrow/stream/270676-lean4/topic/New.20release.20of.20Functional.20Programming.20in.20Lean/near/306905380\">said</a>:</p>\n<blockquote>\n<p>Thanks for this!</p>\n<p>In the coercions chapter should the need to tag coercion methods with <code>@[coe]</code> be mentioned? I'm not clear on when that attribute is required but I do know that it can trip one up.</p>\n</blockquote>\n<p>I'm actually not aware of that attribute! I can't find any instances of it in the Lean source code. Can you point me to some information so I can investigate? Thanks!</p>",
        "id": 308121052,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1667646267
    },
    {
        "content": "<p>Here’s the thread where I ran into the coercion registration issue:</p>\n<p><a href=\"#narrow/stream/270676-lean4/topic/norm_cast.20not.20seeing.20coercion.3F\">https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/norm_cast.20not.20seeing.20coercion.3F</a></p>",
        "id": 308155036,
        "sender_full_name": "Arien Malec",
        "timestamp": 1667661446
    },
    {
        "content": "<p>I am following _Functional programming in lean_ and trying to define a basic type which is ordered.<br>\nI am puzzled as to why I get an error when I try to evaluate the &lt; operator:</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kd\">inductive</span> <span class=\"n\">Bit</span> <span class=\"n\">where</span>\n   <span class=\"bp\">|</span> <span class=\"n\">zero</span> <span class=\"o\">:</span> <span class=\"n\">Bit</span>\n   <span class=\"bp\">|</span> <span class=\"n\">one</span> <span class=\"o\">:</span> <span class=\"n\">Bit</span>\n\n<span class=\"kn\">open</span> <span class=\"n\">Bit</span>\n\n<span class=\"kd\">def</span> <span class=\"n\">Bit.compare</span> <span class=\"o\">(</span><span class=\"n\">x</span> <span class=\"n\">y</span> <span class=\"o\">:</span> <span class=\"n\">Bit</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"n\">Ordering</span> <span class=\"o\">:=</span>\n   <span class=\"k\">match</span> <span class=\"o\">(</span><span class=\"n\">x</span><span class=\"o\">,</span> <span class=\"n\">y</span><span class=\"o\">)</span> <span class=\"k\">with</span>\n   <span class=\"bp\">|</span> <span class=\"o\">(</span><span class=\"n\">zero</span><span class=\"o\">,</span> <span class=\"n\">zero</span><span class=\"o\">)</span> <span class=\"bp\">=&gt;</span> <span class=\"n\">Ordering.eq</span>\n   <span class=\"bp\">|</span> <span class=\"o\">(</span><span class=\"n\">zero</span><span class=\"o\">,</span> <span class=\"n\">one</span><span class=\"o\">)</span> <span class=\"bp\">=&gt;</span> <span class=\"n\">Ordering.lt</span>\n   <span class=\"bp\">|</span> <span class=\"o\">(</span><span class=\"n\">one</span><span class=\"o\">,</span> <span class=\"n\">zero</span><span class=\"o\">)</span> <span class=\"bp\">=&gt;</span> <span class=\"n\">Ordering.gt</span>\n   <span class=\"bp\">|</span> <span class=\"o\">(</span><span class=\"n\">one</span><span class=\"o\">,</span> <span class=\"n\">one</span><span class=\"o\">)</span> <span class=\"bp\">=&gt;</span> <span class=\"n\">Ordering.eq</span>\n\n<span class=\"kd\">instance</span> <span class=\"o\">:</span> <span class=\"n\">Ord</span> <span class=\"n\">Bit</span> <span class=\"n\">where</span>\n   <span class=\"n\">compare</span> <span class=\"o\">:=</span> <span class=\"n\">Bit.compare</span>\n\n<span class=\"k\">#eval</span> <span class=\"n\">zero</span> <span class=\"bp\">&lt;</span> <span class=\"n\">zero</span> <span class=\"c1\">-- &lt;- failed to synthesize</span>\n</code></pre></div>",
        "id": 308164755,
        "sender_full_name": "Petar Maymounkov",
        "timestamp": 1667666234
    },
    {
        "content": "<p>This topic was moved here from <a class=\"stream-topic\" data-stream-id=\"270676\" href=\"/#narrow/stream/270676-lean4/topic/instantiating.20Ord.20and.20.22failed.20to.20synthesize.20instance.22\">#lean4 &gt; instantiating Ord and \"failed to synthesize instance\"</a> by <span class=\"user-mention silent\" data-user-id=\"295150\">Petar Maymounkov</span>.</p>",
        "id": 308165221,
        "sender_full_name": "Notification Bot",
        "timestamp": 1667666552
    },
    {
        "content": "<p>Currently <code>Ord</code> does not automatically imply <code>LT</code> (which powers <code>&lt;</code>). This is likely to improve soon: <a href=\"https://github.com/leanprover/lean4/issues/1777\">https://github.com/leanprover/lean4/issues/1777</a></p>",
        "id": 308165321,
        "sender_full_name": "Sebastian Ullrich",
        "timestamp": 1667666619
    },
    {
        "content": "<p>You can use</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kd\">instance</span> <span class=\"o\">:</span> <span class=\"n\">LT</span> <span class=\"n\">Bit</span> <span class=\"o\">:=</span> <span class=\"n\">ltOfOrd</span>\n</code></pre></div>\n<p>for now</p>",
        "id": 308165404,
        "sender_full_name": "Sebastian Ullrich",
        "timestamp": 1667666658
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110024\">Sebastian Ullrich</span> <a href=\"#narrow/stream/270676-lean4/topic/New.20release.20of.20Functional.20Programming.20in.20Lean/near/308165321\">said</a>:</p>\n<blockquote>\n<p>Currently <code>Ord</code> does not automatically imply <code>LT</code> (which powers <code>&lt;</code>). This is likely to improve soon: <a href=\"https://github.com/leanprover/lean4/issues/1777\">https://github.com/leanprover/lean4/issues/1777</a></p>\n</blockquote>\n<p>But I have the same issue with LT:</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kd\">inductive</span> <span class=\"n\">Bit</span> <span class=\"n\">where</span>\n   <span class=\"bp\">|</span> <span class=\"n\">zero</span> <span class=\"o\">:</span> <span class=\"n\">Bit</span>\n   <span class=\"bp\">|</span> <span class=\"n\">one</span> <span class=\"o\">:</span> <span class=\"n\">Bit</span>\n\n<span class=\"kn\">open</span> <span class=\"n\">Bit</span>\n\n<span class=\"kd\">def</span> <span class=\"n\">Bit.lt</span> <span class=\"o\">(</span><span class=\"n\">x</span> <span class=\"n\">y</span> <span class=\"o\">:</span> <span class=\"n\">Bit</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"kt\">Prop</span> <span class=\"o\">:=</span>\n   <span class=\"k\">match</span> <span class=\"o\">(</span><span class=\"n\">x</span><span class=\"o\">,</span> <span class=\"n\">y</span><span class=\"o\">)</span> <span class=\"k\">with</span>\n   <span class=\"bp\">|</span> <span class=\"o\">(</span><span class=\"n\">zero</span><span class=\"o\">,</span> <span class=\"n\">zero</span><span class=\"o\">)</span> <span class=\"bp\">=&gt;</span> <span class=\"n\">false</span>\n   <span class=\"bp\">|</span> <span class=\"o\">(</span><span class=\"n\">zero</span><span class=\"o\">,</span> <span class=\"n\">one</span><span class=\"o\">)</span> <span class=\"bp\">=&gt;</span> <span class=\"n\">true</span>\n   <span class=\"bp\">|</span> <span class=\"o\">(</span><span class=\"n\">one</span><span class=\"o\">,</span> <span class=\"n\">zero</span><span class=\"o\">)</span> <span class=\"bp\">=&gt;</span> <span class=\"n\">false</span>\n   <span class=\"bp\">|</span> <span class=\"o\">(</span><span class=\"n\">one</span><span class=\"o\">,</span> <span class=\"n\">one</span><span class=\"o\">)</span> <span class=\"bp\">=&gt;</span> <span class=\"n\">false</span>\n\n<span class=\"kd\">instance</span> <span class=\"o\">:</span> <span class=\"n\">LT</span> <span class=\"n\">Bit</span> <span class=\"n\">where</span>\n   <span class=\"n\">lt</span> <span class=\"o\">:=</span> <span class=\"n\">lt</span>\n\n<span class=\"k\">#eval</span> <span class=\"n\">zero</span> <span class=\"bp\">&lt;</span> <span class=\"n\">zero</span> <span class=\"c1\">-- &lt;-- fail</span>\n</code></pre></div>",
        "id": 308165470,
        "sender_full_name": "Petar Maymounkov",
        "timestamp": 1667666711
    },
    {
        "content": "<p>Ah, you cannot <code>#eval</code> propositions - they don't have a value. Lean is trying to be helpful and convert it to a <code>Bool</code> using the <code>Decidable</code> typeclass, but there is no instance of that for <code>Bit</code>. If you use <code>ltOfOrd</code> as above, you get a <code>Decidable</code> instance for free.</p>",
        "id": 308165780,
        "sender_full_name": "Sebastian Ullrich",
        "timestamp": 1667666889
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kd\">def</span> <span class=\"n\">Bit.lt</span> <span class=\"o\">(</span><span class=\"n\">x</span> <span class=\"n\">y</span> <span class=\"o\">:</span> <span class=\"n\">Bit</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"n\">Bool</span> <span class=\"o\">:=</span>  <span class=\"c1\">-- Bool!</span>\n   <span class=\"k\">match</span> <span class=\"o\">(</span><span class=\"n\">x</span><span class=\"o\">,</span> <span class=\"n\">y</span><span class=\"o\">)</span> <span class=\"k\">with</span>\n   <span class=\"bp\">|</span> <span class=\"o\">(</span><span class=\"n\">zero</span><span class=\"o\">,</span> <span class=\"n\">zero</span><span class=\"o\">)</span> <span class=\"bp\">=&gt;</span> <span class=\"n\">false</span>\n   <span class=\"bp\">|</span> <span class=\"o\">(</span><span class=\"n\">zero</span><span class=\"o\">,</span> <span class=\"n\">one</span><span class=\"o\">)</span> <span class=\"bp\">=&gt;</span> <span class=\"n\">true</span>\n   <span class=\"bp\">|</span> <span class=\"o\">(</span><span class=\"n\">one</span><span class=\"o\">,</span> <span class=\"n\">zero</span><span class=\"o\">)</span> <span class=\"bp\">=&gt;</span> <span class=\"n\">false</span>\n   <span class=\"bp\">|</span> <span class=\"o\">(</span><span class=\"n\">one</span><span class=\"o\">,</span> <span class=\"n\">one</span><span class=\"o\">)</span> <span class=\"bp\">=&gt;</span> <span class=\"n\">false</span>\n\n<span class=\"kd\">instance</span> <span class=\"o\">:</span> <span class=\"n\">LT</span> <span class=\"n\">Bit</span> <span class=\"n\">where</span>\n   <span class=\"n\">lt</span> <span class=\"n\">a</span> <span class=\"n\">b</span> <span class=\"o\">:=</span> <span class=\"n\">lt</span> <span class=\"n\">a</span> <span class=\"n\">b</span>\n</code></pre></div>\n<p>also works fwiw</p>",
        "id": 308165905,
        "sender_full_name": "Sebastian Ullrich",
        "timestamp": 1667666968
    },
    {
        "content": "<p>Is that true? I think you still have to register it</p>",
        "id": 308165909,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1667666969
    },
    {
        "content": "<p>it is true</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kd\">instance</span> <span class=\"o\">:</span> <span class=\"n\">Ord</span> <span class=\"n\">Bit</span> <span class=\"n\">where</span>\n   <span class=\"n\">compare</span> <span class=\"o\">:=</span> <span class=\"n\">Bit.compare</span>\n\n<span class=\"kd\">instance</span> <span class=\"o\">:</span> <span class=\"n\">LT</span> <span class=\"n\">Bit</span> <span class=\"o\">:=</span> <span class=\"n\">ltOfOrd</span>\n\n<span class=\"k\">#eval</span> <span class=\"n\">zero</span> <span class=\"bp\">&lt;</span> <span class=\"n\">zero</span> <span class=\"c1\">-- works</span>\n</code></pre></div>",
        "id": 308166101,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1667667081
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover/lean4/blob/999b61007cbae0cad15172fcad5cffba43c13488/src/Init/Data/Ord.lean#L71-L72\">https://github.com/leanprover/lean4/blob/999b61007cbae0cad15172fcad5cffba43c13488/src/Init/Data/Ord.lean#L71-L72</a></p>",
        "id": 308166107,
        "sender_full_name": "Sebastian Ullrich",
        "timestamp": 1667667086
    },
    {
        "content": "<p>Since we're already using <code>ltOfOrd</code>, it's fine to infer the rest</p>",
        "id": 308166188,
        "sender_full_name": "Sebastian Ullrich",
        "timestamp": 1667667128
    },
    {
        "content": "<p>I would have thought that declaring the instance would make that instance not apply anymore since it is wrapped</p>",
        "id": 308166208,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1667667140
    },
    {
        "content": "<p>that is, here:</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kd\">instance</span> <span class=\"n\">myLt</span> <span class=\"o\">:</span> <span class=\"n\">LT</span> <span class=\"n\">Bit</span> <span class=\"o\">:=</span> <span class=\"n\">ltOfOrd</span>\n</code></pre></div>\n<p>we would end up with <code>Decidable (@LT.lt Bit myLt)</code> instead of <code>Decidable (@LT.lt Bit ltOfOrd)</code></p>",
        "id": 308166299,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1667667197
    },
    {
        "content": "<p>Typeclass inference unfolds reducibles and instances</p>",
        "id": 308166568,
        "sender_full_name": "Sebastian Ullrich",
        "timestamp": 1667667386
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"542196\">Arien Malec</span> <a href=\"#narrow/stream/270676-lean4/topic/New.20release.20of.20Functional.20Programming.20in.20Lean/near/308155036\">said</a>:</p>\n<blockquote>\n<p>Here’s the thread where I ran into the coercion registration issue:</p>\n<p><a href=\"#narrow/stream/270676-lean4/topic/norm_cast.20not.20seeing.20coercion.3F\">https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/norm_cast.20not.20seeing.20coercion.3F</a></p>\n</blockquote>\n<p>As far as I can tell, this is a  mathlib4 concern, rather than one of Lean <em>per se</em>. Mathlib4 is explicitly out of scope for this book. But thanks!</p>",
        "id": 308172724,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1667671392
    },
    {
        "content": "<p>I noticed something minor in chapter 4.4:</p>\n<blockquote>\n<p>much like a Java ArrayList, a C++ std::vector, or a Rust std::vec.</p>\n</blockquote>\n<p>The data structure in Rust is actually called <code>Vec</code> (with an upper case V), <code>std::vec</code> is just the module where that data structure is defined. <code>std::vec::Vec</code> is also part of the <a href=\"https://doc.rust-lang.org/stable/std/prelude/index.html\">prelude</a> so it probably makes sense to refer to it as just <code>Vec</code>.</p>",
        "id": 308180200,
        "sender_full_name": "eyelash",
        "timestamp": 1667677083
    },
    {
        "content": "<p>I also find the sentence \"arrays occupy a contiguous region of memory, which is much better for processor caches\" a bit confusing since AFAIK (someone please correct me if I'm wrong) the values of the array are still boxed in Lean, so only the pointers are stored in a contiguous region, especially after the comparison to C++ and Rust where the values themselves are actually stored in a contiguous region of memory.</p>",
        "id": 308181857,
        "sender_full_name": "eyelash",
        "timestamp": 1667678307
    },
    {
        "content": "<p>Scalars will be stored unboxed. But, yeah, many objects are boxed P:</p>",
        "id": 308183760,
        "sender_full_name": "James Gallicchio",
        "timestamp": 1667679847
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"354934\">@David Thrane Christiansen</span> none of that code depended on Mathlib4</p>",
        "id": 308187650,
        "sender_full_name": "Arien Malec",
        "timestamp": 1667682845
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"422011\">eyelash</span> <a href=\"#narrow/stream/270676-lean4/topic/New.20release.20of.20Functional.20Programming.20in.20Lean/near/308180200\">said</a>:</p>\n<blockquote>\n<p>I noticed something minor in chapter 4.4:</p>\n<blockquote>\n<p>much like a Java ArrayList, a C++ std::vector, or a Rust std::vec.</p>\n</blockquote>\n<p>The data structure in Rust is actually called <code>Vec</code> (with an upper case V), <code>std::vec</code> is just the module where that data structure is defined. <code>std::vec::Vec</code> is also part of the <a href=\"https://doc.rust-lang.org/stable/std/prelude/index.html\">prelude</a> so it probably makes sense to refer to it as just <code>Vec</code>.</p>\n</blockquote>\n<p>Thanks! I fixed this in the latest development release.</p>",
        "id": 308189338,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1667684315
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"422011\">eyelash</span> <a href=\"#narrow/stream/270676-lean4/topic/New.20release.20of.20Functional.20Programming.20in.20Lean/near/308181857\">said</a>:</p>\n<blockquote>\n<p>I also find the sentence \"arrays occupy a contiguous region of memory, which is much better for processor caches\" a bit confusing since AFAIK (someone please correct me if I'm wrong) the values of the array are still boxed in Lean, so only the pointers are stored in a contiguous region, especially after the comparison to C++ and Rust where the values themselves are actually stored in a contiguous region of memory.</p>\n</blockquote>\n<p>This is a good point, so I've created an issue to track it.</p>",
        "id": 308189367,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1667684347
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"542196\">Arien Malec</span> <a href=\"#narrow/stream/270676-lean4/topic/New.20release.20of.20Functional.20Programming.20in.20Lean/near/308187650\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"354934\">David Thrane Christiansen</span> none of that code depended on Mathlib4</p>\n</blockquote>\n<p>As far as I can see, that attribute only exists in mathlib4. But I'll ask about it next time I talk to Lean developers on the phone - I could very well be overlooking something.</p>",
        "id": 308189475,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1667684444
    },
    {
        "content": "<p>It's in std4 now <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Tactic.NormCast.Attr.coe#doc\">docs4#Tactic.NormCast.Attr.coe</a></p>",
        "id": 308193265,
        "sender_full_name": "Sebastian Ullrich",
        "timestamp": 1667687586
    },
    {
        "content": "<p>In <a href=\"https://leanprover.github.io/functional_programming_in_lean/type-classes/coercion.html\">https://leanprover.github.io/functional_programming_in_lean/type-classes/coercion.html</a> <code>#eval (buildResponse \"Functional Programming in Lean\" Str \"Programming is fun!\").asString</code> the <code>.asString</code> call doesn't work for me with <code>the environment does not contain 'JSON.asString'</code>.</p>",
        "id": 308272447,
        "sender_full_name": "Evgenia Karunus",
        "timestamp": 1667751232
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"422011\">eyelash</span> <a href=\"#narrow/stream/270676-lean4/topic/New.20release.20of.20Functional.20Programming.20in.20Lean/near/308181857\">said</a>:</p>\n<blockquote>\n<p>I also find the sentence \"arrays occupy a contiguous region of memory, which is much better for processor caches\" a bit confusing since AFAIK (someone please correct me if I'm wrong) the values of the array are still boxed in Lean, so only the pointers are stored in a contiguous region, especially after the comparison to C++ and Rust where the values themselves are actually stored in a contiguous region of memory.</p>\n</blockquote>\n<p>I fixed this in the latest development version. It's now more clear that it's referring to the array itself being in a contiguous block, rather than having a pointer at each node like a linked list. Thanks again!</p>",
        "id": 312357283,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1669473993
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"480079\">Evgenia Karunus</span> <a href=\"#narrow/stream/270676-lean4/topic/New.20release.20of.20Functional.20Programming.20in.20Lean/near/308272447\">said</a>:</p>\n<blockquote>\n<p>In <a href=\"https://leanprover.github.io/functional_programming_in_lean/type-classes/coercion.html\">https://leanprover.github.io/functional_programming_in_lean/type-classes/coercion.html</a> <code>#eval (buildResponse \"Functional Programming in Lean\" Str \"Programming is fun!\").asString</code> the <code>.asString</code> call doesn't work for me with <code>the environment does not contain 'JSON.asString'</code>.</p>\n</blockquote>\n<p>Thanks for this. The implementation of <code>JSON.asString</code> is a bit hairy, so I was hoping to get away with not having it along. I'll beautify it and add it in the next release.</p>",
        "id": 312357774,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1669474234
    },
    {
        "content": "<p>The November release is out at <a href=\"https://leanprover.github.io/functional_programming_in_lean/\">https://leanprover.github.io/functional_programming_in_lean/</a> ! The new chapter covers monads, and I'm now hard at work on writing about monad transformers.</p>\n<p>Thank you all for your ongoing support and feedback, the book is much improved by your comments.</p>",
        "id": 313156778,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1669842748
    },
    {
        "content": "<p>The way you present the motivation in terms of obvious patterns before using the \"M\" word is lovely.</p>",
        "id": 313163961,
        "sender_full_name": "Arien Malec",
        "timestamp": 1669845264
    },
    {
        "content": "<p>Thanks! The M-word is scary for people who haven't seen it before, and experience in classrooms has made it crystal clear to me that most people do better seeing examples before definitions, so that's how I tried to write it.</p>",
        "id": 313164635,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1669845504
    },
    {
        "content": "<p>Did you take a look at \"programming in Lean\"? This is a half-finished lean 3 book from five years ago which taught me what a monad was (by going through four examples). I suspect Jeremy wrote it, he's good at writing stuff which teaches me things</p>",
        "id": 313167086,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1669846397
    },
    {
        "content": "<p>Yup, that was me. Bas Spitters once told me that the reason that there are so many monad tutorials online is that everyone who finally understands them is so proud of themselves that they are compelled to write a tutorial. I visited Microsoft in the summer of 2016 and I learned how to use monads. I was so proud of myself that I wrote a tutorial.</p>",
        "id": 313188687,
        "sender_full_name": "Jeremy Avigad",
        "timestamp": 1669857974
    },
    {
        "content": "<p>For some of the readers I want to reach, I think that the definition-first approach taken in his book will not work as well as the example-first approach that I'm going for here. I'm also intentionally trying to avoid mathematical jargon, though I didn't entirely succeed :-)</p>",
        "id": 313229229,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1669884666
    },
    {
        "content": "<p>I've had a brief look and I think the example first approach is very good. Even though I am a mathematician by training I hate all of the 'monads are a part of category theory' nonsense, since it does not help you to understand anything and I was slightly sad that keeps appearing.</p>",
        "id": 313230604,
        "sender_full_name": "Moritz Doll",
        "timestamp": 1669885231
    },
    {
        "content": "<p>Ideally, there are different learning resources for different audiences, adapted to their specific needs. I know people who learned Haskell after knowing a fair bit of category theory already, and they had quite different challenges in learning to program with monads than most people!</p>\n<p>Programming with monads requires approximately zero category theory, just as you really don't need to know any graph theory to implement A* search for pathfinding in a game.</p>",
        "id": 313231458,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1669885547
    },
    {
        "content": "<p>I think this chapter still lacks an introduction warning readers that you will first solve a problem in a very painful way for the sake of motivating some abstract gadget. Otherwise innocent readers will simply be terrified by the first examples.</p>",
        "id": 313249448,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1669891715
    },
    {
        "content": "<p>And, as far as I remember, Jeremy's explanation doesn't feature any category theory.</p>",
        "id": 313249797,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1669891805
    },
    {
        "content": "<p>It might also help to give people a taste of what the final result is, since otherwise it's not really clear where it is all going. The endpoint of the <code>Option</code> example is not really that satisfactory:</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kd\">def</span> <span class=\"n\">firstThirdFifthSeventh</span> <span class=\"o\">(</span><span class=\"n\">xs</span> <span class=\"o\">:</span> <span class=\"n\">List</span> <span class=\"n\">α</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"n\">Option</span> <span class=\"o\">(</span><span class=\"n\">α</span> <span class=\"bp\">×</span> <span class=\"n\">α</span> <span class=\"bp\">×</span> <span class=\"n\">α</span> <span class=\"bp\">×</span> <span class=\"n\">α</span><span class=\"o\">)</span> <span class=\"o\">:=</span>\n  <span class=\"n\">xs</span><span class=\"o\">[</span><span class=\"mi\">0</span><span class=\"o\">]</span><span class=\"bp\">?</span> <span class=\"bp\">~~&gt;</span> <span class=\"k\">fun</span> <span class=\"n\">first</span> <span class=\"bp\">=&gt;</span>\n  <span class=\"n\">xs</span><span class=\"o\">[</span><span class=\"mi\">2</span><span class=\"o\">]</span><span class=\"bp\">?</span> <span class=\"bp\">~~&gt;</span> <span class=\"k\">fun</span> <span class=\"n\">third</span> <span class=\"bp\">=&gt;</span>\n  <span class=\"n\">xs</span><span class=\"o\">[</span><span class=\"mi\">4</span><span class=\"o\">]</span><span class=\"bp\">?</span> <span class=\"bp\">~~&gt;</span> <span class=\"k\">fun</span> <span class=\"n\">fifth</span> <span class=\"bp\">=&gt;</span>\n  <span class=\"n\">xs</span><span class=\"o\">[</span><span class=\"mi\">6</span><span class=\"o\">]</span><span class=\"bp\">?</span> <span class=\"bp\">~~&gt;</span> <span class=\"k\">fun</span> <span class=\"n\">seventh</span> <span class=\"bp\">=&gt;</span>\n  <span class=\"n\">some</span> <span class=\"o\">(</span><span class=\"n\">first</span><span class=\"o\">,</span> <span class=\"n\">third</span><span class=\"o\">,</span> <span class=\"n\">fifth</span><span class=\"o\">,</span> <span class=\"n\">seventh</span><span class=\"o\">)</span>\n</code></pre></div>\n<p>I sure am glad I don't have to write that and can do this instead:</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kd\">def</span> <span class=\"n\">firstThirdFifthSeventh</span> <span class=\"o\">(</span><span class=\"n\">xs</span> <span class=\"o\">:</span> <span class=\"n\">List</span> <span class=\"n\">α</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"n\">Option</span> <span class=\"o\">(</span><span class=\"n\">α</span> <span class=\"bp\">×</span> <span class=\"n\">α</span> <span class=\"bp\">×</span> <span class=\"n\">α</span> <span class=\"bp\">×</span> <span class=\"n\">α</span><span class=\"o\">)</span> <span class=\"o\">:=</span> <span class=\"k\">do</span>\n  <span class=\"n\">return</span> <span class=\"o\">(</span><span class=\"bp\">←</span> <span class=\"n\">xs</span><span class=\"o\">[</span><span class=\"mi\">0</span><span class=\"o\">]</span><span class=\"bp\">?</span><span class=\"o\">,</span> <span class=\"bp\">←</span> <span class=\"n\">xs</span><span class=\"o\">[</span><span class=\"mi\">2</span><span class=\"o\">]</span><span class=\"bp\">?</span><span class=\"o\">,</span> <span class=\"bp\">←</span> <span class=\"n\">xs</span><span class=\"o\">[</span><span class=\"mi\">4</span><span class=\"o\">]</span><span class=\"bp\">?</span><span class=\"o\">,</span> <span class=\"bp\">←</span> <span class=\"n\">xs</span><span class=\"o\">[</span><span class=\"mi\">6</span><span class=\"o\">]</span><span class=\"bp\">?</span><span class=\"o\">)</span>\n</code></pre></div>",
        "id": 313251231,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1669892270
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110031\">Patrick Massot</span> <a href=\"#narrow/stream/270676-lean4/topic/New.20release.20of.20Functional.20Programming.20in.20Lean/near/313249448\">said</a>:</p>\n<blockquote>\n<p>I think this chapter still lacks an introduction warning readers that you will first solve a problem in a very painful way for the sake of motivating some abstract gadget. Otherwise innocent readers will simply be terrified by the first examples.</p>\n</blockquote>\n<p>well the handrolled Monadic functions specialized to <code>Option</code>, etc. is exactly how Rust gets on, with some special <code>?</code> syntax for <code>Option</code> and <code>Result</code> where short circuiting on failure is what's wanted. And and the piles of nested function calls is exactly how Promise based async code used to work in JS until everyone borrowed <code>async/await</code> from C# which ultimately was from…Haskell (via Simon Marlow).</p>",
        "id": 313321487,
        "sender_full_name": "Arien Malec",
        "timestamp": 1669912784
    },
    {
        "content": "<p>Mario, the only difference between what appears in the book and your example is some syntactic sugar right? In that case, I think an easy fix without breaking too much the flow would be to add this right before the section <a href=\"https://leanprover.github.io/functional_programming_in_lean/monads.html#logging\">Logging</a>:</p>\n<p>\"In Section 5.3 we'll learn some that we have some syntactic sugar which can simplify this even further to:</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kd\">def</span> <span class=\"n\">firstThirdFifthSeventh</span> <span class=\"o\">(</span><span class=\"n\">xs</span> <span class=\"o\">:</span> <span class=\"n\">List</span> <span class=\"n\">α</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"n\">Option</span> <span class=\"o\">(</span><span class=\"n\">α</span> <span class=\"bp\">×</span> <span class=\"n\">α</span> <span class=\"bp\">×</span> <span class=\"n\">α</span> <span class=\"bp\">×</span> <span class=\"n\">α</span><span class=\"o\">)</span> <span class=\"o\">:=</span> <span class=\"k\">do</span>\n  <span class=\"n\">return</span> <span class=\"o\">(</span><span class=\"bp\">←</span> <span class=\"n\">xs</span><span class=\"o\">[</span><span class=\"mi\">0</span><span class=\"o\">]</span><span class=\"bp\">?</span><span class=\"o\">,</span> <span class=\"bp\">←</span> <span class=\"n\">xs</span><span class=\"o\">[</span><span class=\"mi\">2</span><span class=\"o\">]</span><span class=\"bp\">?</span><span class=\"o\">,</span> <span class=\"bp\">←</span> <span class=\"n\">xs</span><span class=\"o\">[</span><span class=\"mi\">4</span><span class=\"o\">]</span><span class=\"bp\">?</span><span class=\"o\">,</span> <span class=\"bp\">←</span> <span class=\"n\">xs</span><span class=\"o\">[</span><span class=\"mi\">6</span><span class=\"o\">]</span><span class=\"bp\">?</span><span class=\"o\">)</span>\n</code></pre></div>\n<p>But for now we'll postpone explanation of this syntax in order to consider several more examples.\"</p>\n<p>This succinct version should then also be included in Section 5.3. (<span class=\"user-mention\" data-user-id=\"354934\">@David Thrane Christiansen</span> of course, these are only suggestions!)</p>",
        "id": 313361994,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1669924073
    },
    {
        "content": "<p>These are great suggestions, thanks everyone!</p>",
        "id": 313362320,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1669924164
    },
    {
        "content": "<p>I saw a certain trend on Mastodon today, I wonder if it's helpful here as well...</p>\n<div class=\"spoiler-block\"><div class=\"spoiler-header\">\n<p>ChatGPT on \"write biblical verses in the style of the king james bible in the form of a rap explaining the concept of monads from functional programming\"</p>\n</div><div class=\"spoiler-content\" aria-hidden=\"true\">\n<p>Verse 1:</p>\n<p>In the beginning, God created the code<br>\nAnd with it, the concept of monads bestowed<br>\nA way to compose functions in a pure mode<br>\nA building block for functional programming, it bode</p>\n<p>Chorus:</p>\n<p>Monads, monads, the building blocks of code<br>\nA way to create functional flows<br>\nAn abstract concept, but one that we must hold<br>\nFor the power of functional programming to unfold</p>\n<p>Verse 2:</p>\n<p>Monads allow us to bind and chain<br>\nFunctions together, without causing pain<br>\nTo the purity of the code, we remain<br>\nAs monads ensure our functions remain the same</p>\n<p>Chorus:</p>\n<p>Monads, monads, the building blocks of code<br>\nA way to create functional flows<br>\nAn abstract concept, but one that we must hold<br>\nFor the power of functional programming to unfold</p>\n<p>Bridge:</p>\n<p>Monads may seem complex at first glance<br>\nBut with study and practice, they will enhance<br>\nYour understanding of functional programming's advance<br>\nAnd open up new possibilities in your code's expanse</p>\n<p>Chorus:</p>\n<p>Monads, monads, the building blocks of code<br>\nA way to create functional flows<br>\nAn abstract concept, but one that we must hold<br>\nFor the power of functional programming to unfold</p>\n</div></div>",
        "id": 313539581,
        "sender_full_name": "Sebastian Ullrich",
        "timestamp": 1669999156
    },
    {
        "content": "<p>Another chapter written with a very good 'flow' to it :).  <em>Maybe</em> introducing the way of creating infix notations in a chapter 'Monad' is not ideal, but I understand it's very much on 'needed now' bases. This book is excellent.</p>",
        "id": 313718543,
        "sender_full_name": "František Silváši 🦉",
        "timestamp": 1670090497
    },
    {
        "content": "<p>Hi everyone! There's a new release out at <a href=\"https://leanprover.github.io/functional_programming_in_lean/\">https://leanprover.github.io/functional_programming_in_lean/</a>, with a chapter on <code>Applicative</code> that takes a few necessary detours through universe polymorphism and structure inheritance. I haven't yet made the improvements suggested up-thread, but they're certainly on the radar still. Thanks again for reading!</p>",
        "id": 320118783,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1673211612
    },
    {
        "content": "<p>Next up is monad transformers. It's already half written, but I realized that I needed to already have <code>Applicative</code> to make progress so I backtracked a bit :-) It was a busy December.</p>",
        "id": 320118868,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1673211685
    },
    {
        "content": "<p>In Universes &gt; <code>Prop</code> and Polymorphism:</p>\n<blockquote>\n<p><code>Prop</code> is at the bottom of the universe hierarchy, and the type of <code>Prop</code> is <code>Type</code>. This means that lists of propositions have type <code>List Type</code>:</p>\n</blockquote>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kd\">def</span> <span class=\"n\">someTruePropositions</span> <span class=\"o\">:</span> <span class=\"n\">List</span> <span class=\"kt\">Prop</span> <span class=\"o\">:=</span> <span class=\"o\">[</span>\n  <span class=\"mi\">1</span> <span class=\"bp\">+</span> <span class=\"mi\">1</span> <span class=\"bp\">=</span> <span class=\"mi\">2</span><span class=\"o\">,</span>\n  <span class=\"s2\">\"Hello, \"</span> <span class=\"bp\">++</span> <span class=\"s2\">\"world!\"</span> <span class=\"bp\">=</span> <span class=\"s2\">\"Hello, world!\"</span>\n<span class=\"o\">]</span>\n</code></pre></div>\n<p>... should the \"have type <code>List Type</code>\" actually be \"have type <code>List Prop</code>\"?</p>",
        "id": 320123781,
        "sender_full_name": "Marcus Rossel",
        "timestamp": 1673215948
    },
    {
        "content": "<p>Yes it should be i think.</p>",
        "id": 320125032,
        "sender_full_name": "Henrik Böving",
        "timestamp": 1673217077
    },
    {
        "content": "<p>The fact that <code>Prop : Type</code> is irrelevant here, I think</p>",
        "id": 320125148,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1673217182
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"372804\">Marcus Rossel</span> <a href=\"#narrow/stream/270676-lean4/topic/New.20release.20of.20Functional.20Programming.20in.20Lean/near/320123781\">said</a>:</p>\n<blockquote>\n<p>In Universes &gt; <code>Prop</code> and Polymorphism:</p>\n<blockquote>\n<p><code>Prop</code> is at the bottom of the universe hierarchy, and the type of <code>Prop</code> is <code>Type</code>. This means that lists of propositions have type <code>List Type</code>:</p>\n</blockquote>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kd\">def</span> <span class=\"n\">someTruePropositions</span> <span class=\"o\">:</span> <span class=\"n\">List</span> <span class=\"kt\">Prop</span> <span class=\"o\">:=</span> <span class=\"o\">[</span>\n  <span class=\"mi\">1</span> <span class=\"bp\">+</span> <span class=\"mi\">1</span> <span class=\"bp\">=</span> <span class=\"mi\">2</span><span class=\"o\">,</span>\n  <span class=\"s2\">\"Hello, \"</span> <span class=\"bp\">++</span> <span class=\"s2\">\"world!\"</span> <span class=\"bp\">=</span> <span class=\"s2\">\"Hello, world!\"</span>\n<span class=\"o\">]</span>\n</code></pre></div>\n<p>... should the \"have type <code>List Type</code>\" actually be \"have type <code>List Prop</code>\"?</p>\n</blockquote>\n<p>Nice catch!</p>",
        "id": 320224620,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1673270690
    },
    {
        "content": "<p>All right, it's fixed in the development release of the book. Thanks again!</p>",
        "id": 320391739,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1673336547
    },
    {
        "content": "<p>In the section on types, it looks like this sentence is missing a word: <code>To use a type that can represent the negative integers, provide a it directly:</code></p>",
        "id": 320898419,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1673518331
    },
    {
        "content": "<p>In functions and definitions, I think you meant</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"n\">so</span> <span class=\"n\">the</span> <span class=\"n\">preceding</span> <span class=\"n\">function</span> <span class=\"n\">types</span> <span class=\"n\">can</span> <span class=\"n\">be</span> <span class=\"n\">written</span> <span class=\"bp\">`</span><span class=\"n\">Nat</span> <span class=\"bp\">-&gt;</span> <span class=\"n\">Nat</span><span class=\"bp\">`</span> <span class=\"n\">and</span> <span class=\"bp\">`</span><span class=\"n\">Nat</span> <span class=\"bp\">-&gt;</span> <span class=\"n\">Nat</span> <span class=\"bp\">-&gt;</span> <span class=\"n\">Nat</span><span class=\"bp\">`</span><span class=\"o\">,</span> <span class=\"n\">respectively.</span>\n</code></pre></div>\n<p>rather than</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"n\">so</span> <span class=\"n\">the</span> <span class=\"n\">preceding</span> <span class=\"n\">function</span> <span class=\"n\">types</span> <span class=\"n\">can</span> <span class=\"n\">be</span> <span class=\"n\">written</span> <span class=\"bp\">`</span><span class=\"n\">Nat</span> <span class=\"bp\">-&gt;</span> <span class=\"n\">Bool</span><span class=\"bp\">`</span> <span class=\"n\">and</span> <span class=\"bp\">`</span><span class=\"n\">Nat</span> <span class=\"bp\">-&gt;</span> <span class=\"n\">Nat</span> <span class=\"bp\">-&gt;</span> <span class=\"n\">Nat</span><span class=\"bp\">`</span><span class=\"o\">,</span> <span class=\"n\">respectively.</span>\n</code></pre></div>",
        "id": 320899227,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1673518604
    },
    {
        "content": "<p>In Polymorphism, <code>Just as C# and Java require type arguments to provided explicitly</code> should be <code>Just as C# and Java require type arguments to be provided explicitly </code></p>",
        "id": 320906677,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1673520701
    },
    {
        "content": "<p>I think it would be helpful to note that while you are working through inheritance of structures, it generally better to use typeclasses rather than structural inheritance to encapsulate common behavior.</p>",
        "id": 321033201,
        "sender_full_name": "Arien Malec",
        "timestamp": 1673557163
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"387244\">Yaël Dillies</span> <a href=\"#narrow/stream/270676-lean4/topic/New.20release.20of.20Functional.20Programming.20in.20Lean/near/320898419\">said</a>:</p>\n<blockquote>\n<p>In the section on types, it looks like this sentence is missing a word: <code>To use a type that can represent the negative integers, provide a it directly:</code></p>\n</blockquote>\n<p>Thanks! It was actually just a spurious \"a\", which is now deleted.</p>",
        "id": 321320654,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1673687985
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"387244\">Yaël Dillies</span> <a href=\"#narrow/stream/270676-lean4/topic/New.20release.20of.20Functional.20Programming.20in.20Lean/near/320899227\">said</a>:</p>\n<blockquote>\n<p>In functions and definitions, I think you meant</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"n\">so</span> <span class=\"n\">the</span> <span class=\"n\">preceding</span> <span class=\"n\">function</span> <span class=\"n\">types</span> <span class=\"n\">can</span> <span class=\"n\">be</span> <span class=\"n\">written</span> <span class=\"bp\">`</span><span class=\"n\">Nat</span> <span class=\"bp\">-&gt;</span> <span class=\"n\">Nat</span><span class=\"bp\">`</span> <span class=\"n\">and</span> <span class=\"bp\">`</span><span class=\"n\">Nat</span> <span class=\"bp\">-&gt;</span> <span class=\"n\">Nat</span> <span class=\"bp\">-&gt;</span> <span class=\"n\">Nat</span><span class=\"bp\">`</span><span class=\"o\">,</span> <span class=\"n\">respectively.</span>\n</code></pre></div>\n<p>rather than</p>\n<p><div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"n\">so</span> <span class=\"n\">the</span> <span class=\"n\">preceding</span> <span class=\"n\">function</span> <span class=\"n\">types</span> <span class=\"n\">can</span> <span class=\"n\">be</span> <span class=\"n\">written</span> <span class=\"bp\">`</span><span class=\"n\">Nat</span> <span class=\"bp\">-&gt;</span> <span class=\"n\">Bool</span><span class=\"bp\">`</span> <span class=\"n\">and</span> <span class=\"bp\">`</span><span class=\"n\">Nat</span> <span class=\"bp\">-&gt;</span> <span class=\"n\">Nat</span> <span class=\"bp\">-&gt;</span> <span class=\"n\">Nat</span><span class=\"bp\">`</span><span class=\"o\">,</span> <span class=\"n\">respectively.</span>\n</code></pre></div><br>\n</p>\n</blockquote>\n<p>Thanks! I've fixed it. This was one of the few types shown in the book that wasn't machine-checked - I've rectified that now :-)</p>",
        "id": 321321524,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1673688375
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"387244\">Yaël Dillies</span> <a href=\"#narrow/stream/270676-lean4/topic/New.20release.20of.20Functional.20Programming.20in.20Lean/near/320906677\">said</a>:</p>\n<blockquote>\n<p>In Polymorphism, <code>Just as C# and Java require type arguments to provided explicitly</code> should be <code>Just as C# and Java require type arguments to be provided explicitly </code></p>\n</blockquote>\n<p>This is now fixed as well. Thank you for your sharp eyes and careful attention!</p>",
        "id": 321321578,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1673688417
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"542196\">Arien Malec</span> <a href=\"#narrow/stream/270676-lean4/topic/New.20release.20of.20Functional.20Programming.20in.20Lean/near/321033201\">said</a>:</p>\n<blockquote>\n<p>I think it would be helpful to note that while you are working through inheritance of structures, it generally better to use typeclasses rather than structural inheritance to encapsulate common behavior.</p>\n</blockquote>\n<p>This is a good note to have somewhere, but I don't think it should be there because inheritance of type classes has not yet been introduced. I'll think about the right place to put it, along with a way of explaining why.</p>",
        "id": 321321673,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1673688467
    },
    {
        "content": "<p>You know a chapter is great when 'the best' people can find is minor typos! :)</p>\n<ul>\n<li>6.2: Checking whether an [sic] value of type α is in the subtype...</li>\n<li>6.7: Defining a class defines a structure, and additionally creates a [sic] empty table of instances...</li>\n</ul>",
        "id": 321348088,
        "sender_full_name": "František Silváši 🦉",
        "timestamp": 1673699007
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"364929\">František Silváši 🦉</span> <a href=\"#narrow/stream/270676-lean4/topic/New.20release.20of.20Functional.20Programming.20in.20Lean/near/321348088\">said</a>:</p>\n<blockquote>\n<p>You know a chapter is great when 'the best' people can find is minor typos! :)</p>\n<ul>\n<li>6.2: Checking whether an [sic] value of type α is in the subtype...</li>\n<li>6.7: Defining a class defines a structure, and additionally creates a [sic] empty table of instances...</li>\n</ul>\n</blockquote>\n<p><span aria-label=\"embarrassed\" class=\"emoji emoji-1f633\" role=\"img\" title=\"embarrassed\">:embarrassed:</span> I should have caught those proofreading! Sorry, and thanks for the kind way of pointing them out :-)</p>",
        "id": 321363644,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1673705895
    },
    {
        "content": "<ul>\n<li>2.6 : Missing <code>s</code> in <code>While most language allow</code></li>\n<li>\n<ol start=\"3\">\n<li>: The sentence <code>Computer-aided theorem provers like Lean are designed to allow mathematicians to write proofs while omitting many details, while the software fills in the missing explicit steps, decreasing the likelihood of oversights or mistakes.</code> reads a bit heavy. Maybe because of the duplicated \"while\"?</li>\n</ol>\n</li>\n<li>\n<ol start=\"3\">\n<li><code>propositions are a kind of type</code>. I know \"type\" is referring to <code>p : Prop</code>, but it could be misread as meaning <code>Prop</code> because of the singular</li>\n</ol>\n</li>\n</ul>",
        "id": 321525149,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1673811678
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"354934\">David Thrane Christiansen</span> <a href=\"#narrow/stream/270676-lean4/topic/New.20release.20of.20Functional.20Programming.20in.20Lean/near/321321673\">said</a>:</p>\n<blockquote>\n<p>This is a good note to have somewhere, but I don't think it should be there because inheritance of type classes has not yet been introduced. I'll think about the right place to put it, along with a way of explaining why.</p>\n</blockquote>\n<p>How about a footnote, possibly with a forward reference?</p>",
        "id": 321558686,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1673841594
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"387244\">Yaël Dillies</span> <a href=\"#narrow/stream/270676-lean4/topic/New.20release.20of.20Functional.20Programming.20in.20Lean/near/321525149\">said</a>:</p>\n<blockquote>\n<ul>\n<li>2.6 : Missing <code>s</code> in <code>While most language allow</code></li>\n<li>\n<ol start=\"3\">\n<li>: The sentence <code>Computer-aided theorem provers like Lean are designed to allow mathematicians to write proofs while omitting many details, while the software fills in the missing explicit steps, decreasing the likelihood of oversights or mistakes.</code> reads a bit heavy. Maybe because of the duplicated \"while\"?</li>\n</ol>\n</li>\n<li>\n<ol start=\"3\">\n<li><code>propositions are a kind of type</code>. I know \"type\" is referring to <code>p : Prop</code>, but it could be misread as meaning <code>Prop</code> because of the singular</li>\n</ol>\n</li>\n</ul>\n</blockquote>\n<p>Thanks, these are fixed in the development branch!</p>",
        "id": 321588493,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1673859231
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"197836\">Jireh Loreaux</span> <a href=\"#narrow/stream/270676-lean4/topic/New.20release.20of.20Functional.20Programming.20in.20Lean/near/321558686\">said</a>:</p>\n<blockquote>\n<p>How about a footnote, possibly with a forward reference?</p>\n</blockquote>\n<p>I don't think footnotes work well in writing that's intended to be consumed online - they end up being a bit like endnotes in paper books, where they're so inconvenient to consult that they might as well not be there. And Markdown/mdbook unfortunately doesn't have reasonable support for asides, marginalia, or other things that work well for this task.</p>\n<p>I'll puzzle over it.</p>",
        "id": 321588993,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1673859411
    },
    {
        "content": "<p>Footnotes with return hyperlinks (generally denoted by a ↩) I find to be easily read even online, but it's fine if you disagree. Dealing with non-linearity of topics is always hard.</p>",
        "id": 321677561,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1673885906
    },
    {
        "content": "<p>I haven't really got this far yet*, but while I was reading ahead, I noticed that in <a href=\"https://leanprover.github.io/functional_programming_in_lean/functor-applicative-monad/applicative.html#validated-input\">6.2 Applicative Functors: Validated Input</a> the code block following \"Finally, these three components can be combined using seq:\" is the same as the previous code block, whereas the following text implies that it should define <code>checkInput</code>.</p>\n<p>*I'm finding myself a bit confounded by the <a href=\"https://leanprover.github.io/functional_programming_in_lean/type-classes/polymorphism.html#even-number-literals\">Even Number Literals</a> exercise in 4.2. But that's another story.</p>",
        "id": 322915381,
        "sender_full_name": "Ian Young",
        "timestamp": 1674427527
    }
]