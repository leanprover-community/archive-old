[
    {
        "content": "<p>A minor thing that's slightly annoying is that in the following, there's a substitution that isn't applied. I think it's a general  ∃! thing (although I haven't checked).</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"kn\">import</span> <span class=\"n\">ring_theory</span><span class=\"bp\">.</span><span class=\"n\">ideal</span><span class=\"bp\">.</span><span class=\"n\">basic</span>\n<span class=\"kn\">example</span> <span class=\"o\">(</span><span class=\"n\">X</span> <span class=\"o\">:</span> <span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">)</span> <span class=\"o\">[</span><span class=\"n\">comm_ring</span> <span class=\"n\">X</span><span class=\"o\">]</span> <span class=\"o\">[</span><span class=\"n\">local_ring</span> <span class=\"n\">X</span><span class=\"o\">]</span> <span class=\"o\">(</span><span class=\"n\">I</span> <span class=\"o\">:</span> <span class=\"n\">ideal</span> <span class=\"n\">X</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">hI</span> <span class=\"o\">:</span> <span class=\"n\">I</span><span class=\"bp\">.</span><span class=\"n\">is_maximal</span><span class=\"o\">):</span> <span class=\"n\">false</span> <span class=\"o\">:=</span>\n<span class=\"k\">begin</span>\n  <span class=\"n\">rcases</span> <span class=\"n\">local_ring</span><span class=\"bp\">.</span><span class=\"n\">maximal_ideal_unique</span> <span class=\"n\">X</span> <span class=\"k\">with</span> <span class=\"bp\">⟨</span><span class=\"n\">p</span><span class=\"o\">,</span> <span class=\"n\">hpmax</span><span class=\"o\">,</span> <span class=\"n\">hp</span><span class=\"bp\">⟩</span><span class=\"o\">,</span> <span class=\"c1\">-- (λ (I : ideal X), I.is_maximal) y</span>\n  <span class=\"n\">simp</span> <span class=\"n\">only</span> <span class=\"o\">[]</span> <span class=\"n\">at</span> <span class=\"n\">hp</span><span class=\"o\">,</span> <span class=\"c1\">--changes to y.is_maximal</span>\n  <span class=\"n\">sorry</span><span class=\"o\">,</span>\n<span class=\"kn\">end</span>\n</code></pre></div>",
        "id": 209835428,
        "sender_full_name": "Kenji Nakagawa",
        "timestamp": 1599858505
    },
    {
        "content": "<p>Not that it helps, but <code>delta at hp</code> would work in place of that <code>simp only</code> I think.</p>",
        "id": 209838143,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1599860186
    },
    {
        "content": "<p>The definition of the <code>∃!</code> notation is in terms of</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">def</span> <span class=\"n\">exists_unique</span> <span class=\"o\">{</span><span class=\"n\">α</span> <span class=\"o\">:</span> <span class=\"n\">Sort</span> <span class=\"n\">u</span><span class=\"o\">}</span> <span class=\"o\">(</span><span class=\"n\">p</span> <span class=\"o\">:</span> <span class=\"n\">α</span> <span class=\"bp\">→</span> <span class=\"kt\">Prop</span><span class=\"o\">)</span> <span class=\"o\">:=</span>\n<span class=\"bp\">∃</span> <span class=\"n\">x</span><span class=\"o\">,</span> <span class=\"n\">p</span> <span class=\"n\">x</span> <span class=\"bp\">∧</span> <span class=\"bp\">∀</span> <span class=\"n\">y</span><span class=\"o\">,</span> <span class=\"n\">p</span> <span class=\"n\">y</span> <span class=\"bp\">→</span> <span class=\"n\">y</span> <span class=\"bp\">=</span> <span class=\"n\">x</span>\n</code></pre></div>\n\n\n<p>When you destructure this using <code>rcases</code>, you're observing the<code>p y</code> with <code>p = λ (I : ideal X), I.is_maximal</code>.  To do the beta reduction, you can use <code>dsimp only at hp</code>.</p>",
        "id": 209839048,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1599860748
    }
]