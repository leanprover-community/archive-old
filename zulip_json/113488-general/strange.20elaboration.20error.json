[
    {
        "content": "<p>Hi, the following code fails with a strange error:</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kn\">import</span> <span class=\"n\">geometry.manifold.diffeomorph</span>\n\n<span class=\"n\">open_locale</span> <span class=\"n\">manifold</span>\n\n<span class=\"kd\">variables</span> <span class=\"o\">{</span><span class=\"bp\">ğ•œ</span> <span class=\"o\">:</span> <span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span> <span class=\"o\">[</span><span class=\"n\">nondiscrete_normed_field</span> <span class=\"bp\">ğ•œ</span><span class=\"o\">]</span>\n<span class=\"o\">{</span><span class=\"n\">E</span> <span class=\"o\">:</span> <span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span> <span class=\"o\">[</span><span class=\"n\">normed_group</span> <span class=\"n\">E</span><span class=\"o\">]</span> <span class=\"o\">[</span><span class=\"n\">normed_space</span> <span class=\"bp\">ğ•œ</span> <span class=\"n\">E</span><span class=\"o\">]</span>\n<span class=\"o\">{</span><span class=\"n\">E'</span> <span class=\"o\">:</span> <span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span> <span class=\"o\">[</span><span class=\"n\">normed_group</span> <span class=\"n\">E'</span><span class=\"o\">]</span> <span class=\"o\">[</span><span class=\"n\">normed_space</span> <span class=\"bp\">ğ•œ</span> <span class=\"n\">E'</span><span class=\"o\">]</span>\n<span class=\"o\">{</span><span class=\"n\">H</span> <span class=\"o\">:</span> <span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span> <span class=\"o\">[</span><span class=\"n\">topological_space</span> <span class=\"n\">H</span><span class=\"o\">]</span>\n<span class=\"o\">{</span><span class=\"n\">H'</span> <span class=\"o\">:</span> <span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span> <span class=\"o\">[</span><span class=\"n\">topological_space</span> <span class=\"n\">H'</span><span class=\"o\">]</span>\n<span class=\"o\">(</span><span class=\"n\">I</span> <span class=\"o\">:</span> <span class=\"n\">model_with_corners</span> <span class=\"bp\">ğ•œ</span> <span class=\"n\">E</span> <span class=\"n\">H</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">I'</span> <span class=\"o\">:</span> <span class=\"n\">model_with_corners</span> <span class=\"bp\">ğ•œ</span> <span class=\"n\">E'</span> <span class=\"n\">H'</span><span class=\"o\">)</span>\n\n<span class=\"kd\">variables</span> <span class=\"o\">(</span><span class=\"n\">M</span> <span class=\"o\">:</span> <span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">)</span> <span class=\"o\">[</span><span class=\"n\">topological_space</span> <span class=\"n\">M</span><span class=\"o\">]</span> <span class=\"o\">[</span><span class=\"n\">charted_space</span> <span class=\"n\">H</span> <span class=\"n\">M</span><span class=\"o\">]</span> <span class=\"o\">[</span><span class=\"n\">smooth_manifold_with_corners</span> <span class=\"n\">I</span> <span class=\"n\">M</span><span class=\"o\">]</span>\n<span class=\"o\">(</span><span class=\"n\">M'</span> <span class=\"o\">:</span> <span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">)</span> <span class=\"o\">[</span><span class=\"n\">topological_space</span> <span class=\"n\">M'</span><span class=\"o\">]</span> <span class=\"o\">[</span><span class=\"n\">charted_space</span> <span class=\"n\">H'</span> <span class=\"n\">M'</span><span class=\"o\">]</span> <span class=\"o\">[</span><span class=\"n\">smooth_manifold_with_corners</span> <span class=\"n\">I'</span> <span class=\"n\">M'</span><span class=\"o\">]</span>\n<span class=\"o\">(</span><span class=\"n\">n</span> <span class=\"o\">:</span> <span class=\"n\">with_top</span> <span class=\"n\">â„•</span><span class=\"o\">)</span>\n\n<span class=\"kn\">namespace</span> <span class=\"n\">times_diffeomorph</span>\n\n<span class=\"kd\">lemma</span> <span class=\"n\">to_equiv_inj</span> <span class=\"o\">:</span> <span class=\"n\">function.injective</span> <span class=\"o\">(</span><span class=\"bp\">Î»</span> <span class=\"n\">h</span> <span class=\"o\">:</span> <span class=\"n\">M</span> <span class=\"bp\">â‰ƒâ‚˜^</span><span class=\"n\">n</span><span class=\"bp\">âŸ®</span><span class=\"n\">I</span><span class=\"o\">,</span> <span class=\"n\">I'</span><span class=\"bp\">âŸ¯</span> <span class=\"n\">M'</span><span class=\"o\">,</span> <span class=\"n\">h.to_equiv</span><span class=\"o\">)</span>\n<span class=\"bp\">|</span> <span class=\"o\">âŸ¨</span><span class=\"n\">e</span><span class=\"o\">,</span> <span class=\"n\">_</span><span class=\"o\">,</span> <span class=\"n\">_</span><span class=\"o\">âŸ©</span> <span class=\"o\">âŸ¨</span><span class=\"n\">e'</span><span class=\"o\">,</span> <span class=\"n\">_</span><span class=\"o\">,</span> <span class=\"n\">_</span><span class=\"o\">âŸ©</span> <span class=\"n\">rfl</span> <span class=\"o\">:=</span> <span class=\"n\">rfl</span>\n\n<span class=\"kd\">lemma</span> <span class=\"n\">ext</span> <span class=\"o\">{</span><span class=\"n\">h</span> <span class=\"n\">h'</span> <span class=\"o\">:</span> <span class=\"n\">M</span> <span class=\"bp\">â‰ƒâ‚˜^</span><span class=\"n\">n</span><span class=\"bp\">âŸ®</span><span class=\"n\">I</span><span class=\"o\">,</span> <span class=\"n\">I'</span><span class=\"bp\">âŸ¯</span> <span class=\"n\">M'</span><span class=\"o\">}</span> <span class=\"o\">(</span><span class=\"n\">H</span> <span class=\"o\">:</span> <span class=\"bp\">âˆ€</span> <span class=\"n\">x</span><span class=\"o\">,</span> <span class=\"n\">h</span> <span class=\"n\">x</span> <span class=\"bp\">=</span> <span class=\"n\">h'</span> <span class=\"n\">x</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"n\">h</span> <span class=\"bp\">=</span> <span class=\"n\">h'</span> <span class=\"o\">:=</span>\n<span class=\"kd\">by</span> <span class=\"o\">{</span> <span class=\"n\">apply</span> <span class=\"n\">to_equiv_inj</span><span class=\"o\">,</span> <span class=\"n\">ext</span><span class=\"o\">,</span> <span class=\"n\">apply</span> <span class=\"n\">H</span> <span class=\"o\">}</span>\n\n<span class=\"kd\">end</span> <span class=\"n\">times_diffeomorph</span>\n</code></pre></div>\n<p>Error message:</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"mi\">21</span><span class=\"o\">:</span><span class=\"mi\">7</span><span class=\"o\">:</span> <span class=\"n\">kernel</span> <span class=\"n\">failed</span> <span class=\"n\">to</span> <span class=\"n\">type</span> <span class=\"n\">check</span> <span class=\"n\">declaration</span> <span class=\"bp\">'</span><span class=\"n\">ext'</span> <span class=\"n\">this</span> <span class=\"n\">is</span> <span class=\"n\">usually</span> <span class=\"n\">due</span> <span class=\"n\">to</span> <span class=\"n\">a</span> <span class=\"n\">buggy</span> <span class=\"n\">tactic</span> <span class=\"n\">or</span> <span class=\"n\">a</span> <span class=\"n\">bug</span> <span class=\"k\">in</span> <span class=\"n\">the</span> <span class=\"n\">builtin</span> <span class=\"n\">elaborator</span>\n<span class=\"n\">elaborated</span> <span class=\"n\">type</span><span class=\"o\">:</span>\n  <span class=\"bp\">âˆ€</span> <span class=\"o\">{</span><span class=\"bp\">ğ•œ</span> <span class=\"o\">:</span> <span class=\"kt\">Type</span> <span class=\"n\">u_1</span><span class=\"o\">}</span> <span class=\"o\">[</span><span class=\"n\">_inst_1</span> <span class=\"o\">:</span> <span class=\"n\">nondiscrete_normed_field</span> <span class=\"bp\">ğ•œ</span><span class=\"o\">]</span> <span class=\"o\">{</span><span class=\"n\">E</span> <span class=\"o\">:</span> <span class=\"kt\">Type</span> <span class=\"n\">u_2</span><span class=\"o\">}</span> <span class=\"o\">[</span><span class=\"n\">_inst_2</span> <span class=\"o\">:</span> <span class=\"n\">normed_group</span> <span class=\"n\">E</span><span class=\"o\">]</span>\n  <span class=\"o\">[</span><span class=\"n\">_inst_3</span> <span class=\"o\">:</span> <span class=\"n\">normed_space</span> <span class=\"bp\">ğ•œ</span> <span class=\"n\">E</span><span class=\"o\">]</span> <span class=\"o\">{</span><span class=\"n\">E'</span> <span class=\"o\">:</span> <span class=\"kt\">Type</span> <span class=\"n\">u_3</span><span class=\"o\">}</span> <span class=\"o\">[</span><span class=\"n\">_inst_4</span> <span class=\"o\">:</span> <span class=\"n\">normed_group</span> <span class=\"n\">E'</span><span class=\"o\">]</span> <span class=\"o\">[</span><span class=\"n\">_inst_5</span> <span class=\"o\">:</span> <span class=\"n\">normed_space</span> <span class=\"bp\">ğ•œ</span> <span class=\"n\">E'</span><span class=\"o\">]</span>\n  <span class=\"o\">[</span><span class=\"n\">_inst_6</span> <span class=\"o\">:</span> <span class=\"n\">topological_space</span> <span class=\"n\">H</span><span class=\"o\">]</span> <span class=\"o\">{</span><span class=\"n\">H'</span> <span class=\"o\">:</span> <span class=\"kt\">Type</span> <span class=\"n\">u_5</span><span class=\"o\">}</span> <span class=\"o\">[</span><span class=\"n\">_inst_7</span> <span class=\"o\">:</span> <span class=\"n\">topological_space</span> <span class=\"n\">H'</span><span class=\"o\">]</span> <span class=\"o\">(</span><span class=\"n\">I</span> <span class=\"o\">:</span> <span class=\"n\">model_with_corners</span> <span class=\"bp\">ğ•œ</span> <span class=\"n\">E</span> <span class=\"n\">H</span><span class=\"o\">)</span>\n  <span class=\"o\">(</span><span class=\"n\">I'</span> <span class=\"o\">:</span> <span class=\"n\">model_with_corners</span> <span class=\"bp\">ğ•œ</span> <span class=\"n\">E'</span> <span class=\"n\">H'</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">M</span> <span class=\"o\">:</span> <span class=\"kt\">Type</span> <span class=\"n\">u_6</span><span class=\"o\">)</span> <span class=\"o\">[</span><span class=\"n\">_inst_8</span> <span class=\"o\">:</span> <span class=\"n\">topological_space</span> <span class=\"n\">M</span><span class=\"o\">]</span> <span class=\"o\">[</span><span class=\"n\">_inst_9</span> <span class=\"o\">:</span> <span class=\"n\">charted_space</span> <span class=\"n\">H</span> <span class=\"n\">M</span><span class=\"o\">]</span>\n  <span class=\"o\">[</span><span class=\"n\">_inst_10</span> <span class=\"o\">:</span> <span class=\"n\">smooth_manifold_with_corners</span> <span class=\"n\">I</span> <span class=\"n\">M</span><span class=\"o\">]</span> <span class=\"o\">(</span><span class=\"n\">M'</span> <span class=\"o\">:</span> <span class=\"kt\">Type</span> <span class=\"n\">u_7</span><span class=\"o\">)</span> <span class=\"o\">[</span><span class=\"n\">_inst_11</span> <span class=\"o\">:</span> <span class=\"n\">topological_space</span> <span class=\"n\">M'</span><span class=\"o\">]</span>\n  <span class=\"o\">[</span><span class=\"n\">_inst_12</span> <span class=\"o\">:</span> <span class=\"n\">charted_space</span> <span class=\"n\">H'</span> <span class=\"n\">M'</span><span class=\"o\">]</span> <span class=\"o\">[</span><span class=\"n\">_inst_13</span> <span class=\"o\">:</span> <span class=\"n\">smooth_manifold_with_corners</span> <span class=\"n\">I'</span> <span class=\"n\">M'</span><span class=\"o\">]</span> <span class=\"o\">(</span><span class=\"n\">n</span> <span class=\"o\">:</span> <span class=\"n\">with_top</span> <span class=\"n\">â„•</span><span class=\"o\">)</span> <span class=\"o\">{</span><span class=\"n\">H_1</span> <span class=\"o\">:</span> <span class=\"kt\">Type</span> <span class=\"n\">u_4</span><span class=\"o\">}</span>\n  <span class=\"o\">{</span><span class=\"n\">h</span> <span class=\"n\">h'</span> <span class=\"o\">:</span> <span class=\"n\">M</span> <span class=\"bp\">â‰ƒâ‚˜^</span> <span class=\"n\">n</span><span class=\"bp\">âŸ®</span><span class=\"n\">I</span><span class=\"o\">,</span><span class=\"n\">I'</span><span class=\"bp\">âŸ¯</span><span class=\"n\">M'</span><span class=\"o\">},</span> <span class=\"o\">(</span><span class=\"bp\">âˆ€</span> <span class=\"o\">(</span><span class=\"n\">x</span> <span class=\"o\">:</span> <span class=\"n\">M</span><span class=\"o\">),</span> <span class=\"bp\">â‡‘</span><span class=\"n\">h</span> <span class=\"n\">x</span> <span class=\"bp\">=</span> <span class=\"bp\">â‡‘</span><span class=\"n\">h'</span> <span class=\"n\">x</span><span class=\"o\">)</span> <span class=\"bp\">â†’</span> <span class=\"n\">h</span> <span class=\"bp\">=</span> <span class=\"n\">h'</span>\n<span class=\"n\">elaborated</span> <span class=\"n\">value</span><span class=\"o\">:</span>\n  <span class=\"bp\">Î»</span> <span class=\"o\">{</span><span class=\"bp\">ğ•œ</span> <span class=\"o\">:</span> <span class=\"kt\">Type</span> <span class=\"n\">u_1</span><span class=\"o\">}</span> <span class=\"o\">[</span><span class=\"n\">_inst_1</span> <span class=\"o\">:</span> <span class=\"n\">nondiscrete_normed_field</span> <span class=\"bp\">ğ•œ</span><span class=\"o\">]</span> <span class=\"o\">{</span><span class=\"n\">E</span> <span class=\"o\">:</span> <span class=\"kt\">Type</span> <span class=\"n\">u_2</span><span class=\"o\">}</span> <span class=\"o\">[</span><span class=\"n\">_inst_2</span> <span class=\"o\">:</span> <span class=\"n\">normed_group</span> <span class=\"n\">E</span><span class=\"o\">]</span>\n  <span class=\"o\">[</span><span class=\"n\">_inst_3</span> <span class=\"o\">:</span> <span class=\"n\">normed_space</span> <span class=\"bp\">ğ•œ</span> <span class=\"n\">E</span><span class=\"o\">]</span> <span class=\"o\">{</span><span class=\"n\">E'</span> <span class=\"o\">:</span> <span class=\"kt\">Type</span> <span class=\"n\">u_3</span><span class=\"o\">}</span> <span class=\"o\">[</span><span class=\"n\">_inst_4</span> <span class=\"o\">:</span> <span class=\"n\">normed_group</span> <span class=\"n\">E'</span><span class=\"o\">]</span> <span class=\"o\">[</span><span class=\"n\">_inst_5</span> <span class=\"o\">:</span> <span class=\"n\">normed_space</span> <span class=\"bp\">ğ•œ</span> <span class=\"n\">E'</span><span class=\"o\">]</span>\n  <span class=\"o\">[</span><span class=\"n\">_inst_6</span> <span class=\"o\">:</span> <span class=\"n\">topological_space</span> <span class=\"n\">H</span><span class=\"o\">]</span> <span class=\"o\">{</span><span class=\"n\">H'</span> <span class=\"o\">:</span> <span class=\"kt\">Type</span> <span class=\"n\">u_5</span><span class=\"o\">}</span> <span class=\"o\">[</span><span class=\"n\">_inst_7</span> <span class=\"o\">:</span> <span class=\"n\">topological_space</span> <span class=\"n\">H'</span><span class=\"o\">]</span> <span class=\"o\">(</span><span class=\"n\">I</span> <span class=\"o\">:</span> <span class=\"n\">model_with_corners</span> <span class=\"bp\">ğ•œ</span> <span class=\"n\">E</span> <span class=\"n\">H</span><span class=\"o\">)</span>\n  <span class=\"o\">(</span><span class=\"n\">I'</span> <span class=\"o\">:</span> <span class=\"n\">model_with_corners</span> <span class=\"bp\">ğ•œ</span> <span class=\"n\">E'</span> <span class=\"n\">H'</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">M</span> <span class=\"o\">:</span> <span class=\"kt\">Type</span> <span class=\"n\">u_6</span><span class=\"o\">)</span> <span class=\"o\">[</span><span class=\"n\">_inst_8</span> <span class=\"o\">:</span> <span class=\"n\">topological_space</span> <span class=\"n\">M</span><span class=\"o\">]</span> <span class=\"o\">[</span><span class=\"n\">_inst_9</span> <span class=\"o\">:</span> <span class=\"n\">charted_space</span> <span class=\"n\">H</span> <span class=\"n\">M</span><span class=\"o\">]</span>\n  <span class=\"o\">[</span><span class=\"n\">_inst_10</span> <span class=\"o\">:</span> <span class=\"n\">smooth_manifold_with_corners</span> <span class=\"n\">I</span> <span class=\"n\">M</span><span class=\"o\">]</span> <span class=\"o\">(</span><span class=\"n\">M'</span> <span class=\"o\">:</span> <span class=\"kt\">Type</span> <span class=\"n\">u_7</span><span class=\"o\">)</span> <span class=\"o\">[</span><span class=\"n\">_inst_11</span> <span class=\"o\">:</span> <span class=\"n\">topological_space</span> <span class=\"n\">M'</span><span class=\"o\">]</span>\n  <span class=\"o\">[</span><span class=\"n\">_inst_12</span> <span class=\"o\">:</span> <span class=\"n\">charted_space</span> <span class=\"n\">H'</span> <span class=\"n\">M'</span><span class=\"o\">]</span> <span class=\"o\">[</span><span class=\"n\">_inst_13</span> <span class=\"o\">:</span> <span class=\"n\">smooth_manifold_with_corners</span> <span class=\"n\">I'</span> <span class=\"n\">M'</span><span class=\"o\">]</span> <span class=\"o\">(</span><span class=\"n\">n</span> <span class=\"o\">:</span> <span class=\"n\">with_top</span> <span class=\"n\">â„•</span><span class=\"o\">)</span> <span class=\"o\">{</span><span class=\"n\">H_1</span> <span class=\"o\">:</span> <span class=\"kt\">Type</span> <span class=\"n\">u_4</span><span class=\"o\">}</span>\n  <span class=\"o\">{</span><span class=\"n\">h</span> <span class=\"n\">h'</span> <span class=\"o\">:</span> <span class=\"n\">M</span> <span class=\"bp\">â‰ƒâ‚˜^</span> <span class=\"n\">n</span><span class=\"bp\">âŸ®</span><span class=\"n\">I</span><span class=\"o\">,</span><span class=\"n\">I'</span><span class=\"bp\">âŸ¯</span><span class=\"n\">M'</span><span class=\"o\">}</span> <span class=\"o\">(</span><span class=\"n\">H_1</span> <span class=\"o\">:</span> <span class=\"bp\">âˆ€</span> <span class=\"o\">(</span><span class=\"n\">x</span> <span class=\"o\">:</span> <span class=\"n\">M</span><span class=\"o\">),</span> <span class=\"bp\">â‡‘</span><span class=\"n\">h</span> <span class=\"n\">x</span> <span class=\"bp\">=</span> <span class=\"bp\">â‡‘</span><span class=\"n\">h'</span> <span class=\"n\">x</span><span class=\"o\">),</span>\n    <span class=\"n\">to_equiv_inj</span> <span class=\"n\">I</span> <span class=\"n\">I'</span> <span class=\"n\">M</span> <span class=\"n\">M'</span> <span class=\"n\">n</span> <span class=\"o\">(</span><span class=\"n\">equiv.ext</span> <span class=\"o\">(</span><span class=\"bp\">Î»</span> <span class=\"o\">(</span><span class=\"n\">x</span> <span class=\"o\">:</span> <span class=\"n\">M</span><span class=\"o\">),</span> <span class=\"n\">H_1</span> <span class=\"n\">x</span><span class=\"o\">))</span>\n<span class=\"n\">nested</span> <span class=\"n\">exception</span> <span class=\"n\">message</span><span class=\"o\">:</span>\n<span class=\"n\">failed</span> <span class=\"n\">to</span> <span class=\"n\">add</span> <span class=\"n\">declaration</span> <span class=\"n\">to</span> <span class=\"n\">environment</span><span class=\"o\">,</span> <span class=\"n\">it</span> <span class=\"n\">contains</span> <span class=\"kn\">local</span> <span class=\"kd\">constants</span>\n</code></pre></div>\n<p><span class=\"user-mention\" data-user-id=\"110043\">@Gabriel Ebner</span> Do you know what does this error message mean? How can I avoid it?</p>",
        "id": 228625767,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1614790290
    },
    {
        "content": "<p>I think I need to install new fonts...</p>",
        "id": 228626024,
        "sender_full_name": "Gabriel Ebner",
        "timestamp": 1614790391
    },
    {
        "content": "<p>I think last time I saw this message it was a stupid mistake I made...</p>",
        "id": 228626323,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1614790503
    },
    {
        "content": "<p>I wonder what is <code>{H_1 : Type u_4}</code> in the error message</p>",
        "id": 228626623,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1614790600
    },
    {
        "content": "<p><code>{H_1 : Type u_4}</code> looks suspicious there?</p>",
        "id": 228626633,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1614790603
    },
    {
        "content": "<p>Try renaming <code>H</code> to <code>H_not_the_a_bug_again</code>?</p>",
        "id": 228626674,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1614790618
    },
    {
        "content": "<p>Oh, you have both a type <code>H</code> and a hypothesis <code>H</code>, and it's getting them confused</p>",
        "id": 228626764,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1614790649
    },
    {
        "content": "<p>Indeed, it's about the H:</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kd\">lemma</span> <span class=\"n\">ext</span> <span class=\"o\">{</span><span class=\"n\">h</span> <span class=\"n\">h'</span> <span class=\"o\">:</span> <span class=\"n\">M</span> <span class=\"bp\">â‰ƒâ‚˜^</span><span class=\"n\">n</span><span class=\"bp\">âŸ®</span><span class=\"n\">I</span><span class=\"o\">,</span> <span class=\"n\">I'</span><span class=\"bp\">âŸ¯</span> <span class=\"n\">M'</span><span class=\"o\">}</span> <span class=\"o\">(</span><span class=\"n\">H</span> <span class=\"o\">:</span> <span class=\"bp\">âˆ€</span> <span class=\"n\">x</span><span class=\"o\">,</span> <span class=\"n\">h</span> <span class=\"n\">x</span> <span class=\"bp\">=</span> <span class=\"n\">h'</span> <span class=\"n\">x</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"n\">h</span> <span class=\"bp\">=</span> <span class=\"n\">h'</span> <span class=\"o\">:=</span>\n<span class=\"kd\">by</span> <span class=\"k\">do</span>\n<span class=\"n\">unfreezing</span> <span class=\"n\">revert_all</span><span class=\"o\">,</span>\n<span class=\"n\">tgt</span> <span class=\"bp\">â†</span> <span class=\"n\">target</span><span class=\"o\">,</span>\n<span class=\"n\">trace</span> <span class=\"n\">tgt.list_local_consts</span>\n<span class=\"c1\">-- [H]</span>\n</code></pre></div>",
        "id": 228626919,
        "sender_full_name": "Gabriel Ebner",
        "timestamp": 1614790694
    },
    {
        "content": "<p>If I rename the assumption <code>H</code> to something else, it works.</p>",
        "id": 228626925,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1614790695
    },
    {
        "content": "<p>this isn't really the <code>a</code> bug, since both variables were named by the user, introducing some explicit name shadowing that some tactics automatically dedup</p>",
        "id": 228707935,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1614826637
    }
]