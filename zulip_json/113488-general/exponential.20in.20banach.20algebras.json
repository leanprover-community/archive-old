[
    {
        "content": "<p>Hello everyone ! I recently opened <a href=\"https://github.com/leanprover-community/mathlib/issues/8576\">#8576</a> wich defines exponential in a Banach algebra. As written in the PR description, it is not completely ready for review, but I wanted to open the PR anyway because I'd like to get as many opinions as possibles on my code as soon as possible. I also have a few specific questions about design decisions :</p>\n<ul>\n<li><strong>Explicit parameters</strong> : currently, both the field and the algebra are explicit parameters. I think the field has to be explicit anyway because it can't be inferred and a type can be a normed algebra over two distinct fields. But the algebra could be inferred 1) when the function is applied 2) by explicitely giving the type of the function. In my opinion it's more readable if it is explicit, because I feel like <code>exp ‚Ñù</code> reads as \"real exponential\", not \"the exponential in an arbitrary Banach <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"double-struck\">R</mi></mrow><annotation encoding=\"application/x-tex\">\\R</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68889em;vertical-align:0em;\"></span><span class=\"mord mathbb\">R</span></span></span></span>-algebra\", so having <code>exp ‚Ñù ‚Ñù</code> and <code>exp ‚Ñù ùî∏</code> is better to me, but I'd like your opinion on that.</li>\n<li><strong>Normal form for \"in the disc of convergence\"</strong> : if the base field is not <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"double-struck\">R</mi></mrow><annotation encoding=\"application/x-tex\">\\R</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68889em;vertical-align:0em;\"></span><span class=\"mord mathbb\">R</span></span></span></span> or <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"double-struck\">C</mi></mrow><annotation encoding=\"application/x-tex\">\\mathbb{C}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68889em;vertical-align:0em;\"></span><span class=\"mord mathbb\">C</span></span></span></span>, the exponential map is not well-defined everywhere (p-adics are a counterexample). So I have multiple lemmas requiring for some variable to be in the disc of convergence, and I don't know if I should write it as <code>‚Üë‚à•x‚à•‚Çä &lt; (exp_series ùïÇ ùî∏).radius</code> or <code>x ‚àà emetric.ball (0 : ùî∏) (exp_series ùïÇ ùî∏).radius</code>. Currently I just use whatever is more convenient in the proof but that's a bad heuristic, so I'd like your opinion on that too.</li>\n<li><strong>Future of <code>complex.exp</code> and <code>real.exp</code></strong> : In the PR, I prove that this general definition agrees with <code>complex.exp</code> and <code>real.exp</code>. The question is : should the new definition replace the old ones ? That is, do we want anyone using <code>real.exp</code> to import a whole chunk of the analysis and topology library of mathlib ? In my opinion this is not a big problem since in most cases you want to use the derivative of <code>exp</code> anyway so you end up importing analysis, but I'm not experienced enough to take this decision. </li>\n</ul>\n<p>Thanks in advance !</p>",
        "id": 248773988,
        "sender_full_name": "Anatole Dedecker",
        "timestamp": 1628434061
    },
    {
        "content": "<p>About the last question, I would get rid of <code>real.exp</code> and <code>complex.exp</code>, especially their ugly proofs of differentiability. But I guess <span class=\"user-mention\" data-user-id=\"110049\">@Mario Carneiro</span> has a different opinion.</p>",
        "id": 248910428,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1628544333
    },
    {
        "content": "<p>I don't mind having a less ugly proof of differentiability, but the definition of <code>real.exp</code> should not depend on a \"huge chunk of analysis\", which I'm sure is even larger than the huge chunk of topology that originally motivated the redefinition of <code>real</code></p>",
        "id": 248910687,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1628544454
    },
    {
        "content": "<p>We could keep declaration of <code>real.exp</code>, especially since <code>exp ‚Ñù ‚Ñù</code> is indeed a bit bad to read, but reproving all its properties from the general theory.</p>",
        "id": 248910822,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1628544522
    },
    {
        "content": "<p>I still miss the good old days when real numbers were defined properly.</p>",
        "id": 248910847,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1628544539
    },
    {
        "content": "<p>having a proof of equivalence seems fine to me, and will help with all the advanced material</p>",
        "id": 248910854,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1628544543
    },
    {
        "content": "<p>the real numbers <em>are</em> defined properly, the way they are in the textbooks</p>",
        "id": 248910901,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1628544576
    },
    {
        "content": "<p>they just aren't defined in neo-Bourbaki style</p>",
        "id": 248910920,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1628544592
    },
    {
        "content": "<p>I'm sure we would understand the performance issues now, and have fast real numbers properly defined.</p>",
        "id": 248910927,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1628544596
    },
    {
        "content": "<p>That's not how they are defined in good textbooks.</p>",
        "id": 248910979,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1628544607
    },
    {
        "content": "<p>And our definition wasn't neo-Bourbaki, it was good old Bourbaki.</p>",
        "id": 248911010,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1628544628
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"268315\">Anatole Dedecker</span> has marked this topic as resolved.</p>",
        "id": 249513780,
        "sender_full_name": "Notification Bot",
        "timestamp": 1629035550
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"268315\">Anatole Dedecker</span> has marked this topic as unresolved.</p>",
        "id": 249513783,
        "sender_full_name": "Notification Bot",
        "timestamp": 1629035553
    },
    {
        "content": "<p>What's wrong with having (relatively) large dependencies for <code>real</code>/<code>exp</code>/whatever? Especially if it reduces the total amount of LOC we need to maintain.</p>",
        "id": 258125329,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1634605027
    },
    {
        "content": "<p>I understand that before CI it was a problem.</p>",
        "id": 258125354,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1634605054
    },
    {
        "content": "<p>I don't think there's a huge problem. But CI is still an issue (we have some ad-hoc runners helping the CI queue, while we get more online), and the total compilation time is still a huge pain when refactoring anything low level. Having to wait several hours between rounds of changes is not efficient.</p>",
        "id": 258125678,
        "sender_full_name": "Scott Morrison",
        "timestamp": 1634605310
    },
    {
        "content": "<p>But I agree reducing compile time can't come at the arbitrary expense of good library design.</p>",
        "id": 258125752,
        "sender_full_name": "Scott Morrison",
        "timestamp": 1634605351
    },
    {
        "content": "<p>It's not clear that changing the definition of <code>exp</code> to something based on the general exponential function will increase the total compile time.</p>",
        "id": 258128482,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1634607662
    },
    {
        "content": "<p>(and yes, I think that analytic functions should be used in more places)</p>",
        "id": 258128577,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1634607746
    },
    {
        "content": "<p>Perhaps I'm missing something mathematically; but what's the benefit of defining <a href=\"https://leanprover-community.github.io/mathlib_docs/find/exp\">docs#exp</a> over an arbitrary base ring ùïÇ vs just using ‚Ñö?</p>\n<p>Is <a href=\"https://leanprover-community.github.io/mathlib_docs/find/exp_series\">docs#exp_series</a> meaningful today in the absence of <a href=\"https://leanprover-community.github.io/mathlib_docs/find/char_zero\">docs#char_zero</a>? It looks to me like it ends up truncating the terms that would be a divide by zero, which doesn't seem particularly useful.</p>",
        "id": 278641841,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1649731531
    },
    {
        "content": "<p><a href=\"https://leanprover-community.github.io/mathlib_docs/find/padic.char_zero\">docs#padic.char_zero</a></p>",
        "id": 278647206,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1649737760
    },
    {
        "content": "<p>AFAIR, <span class=\"user-mention\" data-user-id=\"110038\">@Kevin Buzzard</span> asked to define it over any field.</p>",
        "id": 278647290,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1649737847
    },
    {
        "content": "<p>I'm certainly in favour of a general field.  Whether assuming <code>char_zero</code> or not, it depends.  It might be fun if some identities also work without the assumption...</p>",
        "id": 278651117,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1649743012
    },
    {
        "content": "<p>I need it over the p-adic numbers which are characteristic 0. I don't have any use for it in char p</p>",
        "id": 278657604,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1649748984
    },
    {
        "content": "<p>Whether the identities work or not without <code>char_zero</code>; is it reasonable to define <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>e</mi><mi>x</mi><mi>p</mi><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mn>1</mn><mo>+</mo><mi>x</mi><mo>+</mo><mfrac><msup><mi>x</mi><mn>2</mn></msup><mn>2</mn></mfrac></mrow><annotation encoding=\"application/x-tex\">exp(x) = 1 + x + \\frac{x^2}{2}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">e</span><span class=\"mord mathnormal\">x</span><span class=\"mord mathnormal\">p</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">x</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.7278em;vertical-align:-0.0833em;\"></span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6667em;vertical-align:-0.0833em;\"></span><span class=\"mord mathnormal\">x</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.3629em;vertical-align:-0.345em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.0179em;\"><span style=\"top:-2.655em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">2</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">x</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8913em;\"><span style=\"top:-2.931em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">‚Äã</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.345em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span> in characteristic 3? Because that's what we do right now, and it seems like nonsense to me, because the terms we're removing aren't zero in real life, they're undefined.</p>",
        "id": 278660214,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1649750814
    },
    {
        "content": "<p>(regarding my <code>rat</code> suggestion, perhaps I'm under the false impression that every char_zero normed algebra over a field must also be a normed algebra over the rationals)</p>",
        "id": 278660376,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1649750919
    },
    {
        "content": "<p>I guess that in char p &gt; 0 the correct thing is to use something like <a href=\"https://en.wikipedia.org/wiki/Divided_power_structure\">https://en.wikipedia.org/wiki/Divided_power_structure</a></p>",
        "id": 278660921,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1649751298
    },
    {
        "content": "<p>I agree that 1+x+x^2/2 is not a useful function in char 3 (or at least not useful to me). Note that Johan's suggestion involves a lot of extra structure on a ring, basically you're saying \"give me a whole bunch of elements <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>c</mi><mi>n</mi></msub><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">c_n(x)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">c</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span class=\"vlist-s\">‚Äã</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">x</span><span class=\"mclose\">)</span></span></span></span> satisfying axioms which are satisfied by <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>x</mi><mi>n</mi></msup><mi mathvariant=\"normal\">/</mi><mi>n</mi><mo stretchy=\"false\">!</mo></mrow><annotation encoding=\"application/x-tex\">x^n/n!</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6644em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span></span></span></span></span><span class=\"mord\">/</span><span class=\"mord mathnormal\">n</span><span class=\"mclose\">!</span></span></span></span> and then just add the <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>c</mi><mi>n</mi></msub><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">c_n(x)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">c</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span class=\"vlist-s\">‚Äã</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">x</span><span class=\"mclose\">)</span></span></span></span> up instead\" (in fact we don't add them up, we do other things with them, but that's another story). If the ring is a <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"double-struck\">Q</mi></mrow><annotation encoding=\"application/x-tex\">\\mathbb{Q}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8556em;vertical-align:-0.1667em;\"></span><span class=\"mord mathbb\">Q</span></span></span></span>-algebra then there are unique choices for the <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>c</mi><mi>n</mi></msub><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">c_n(x)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">c</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span class=\"vlist-s\">‚Äã</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">x</span><span class=\"mclose\">)</span></span></span></span>, but in char p there can be others. Note that you don't attempt to define these when <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi><mo>=</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">x=1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">x</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">1</span></span></span></span>, you do it only for \"small\" <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi></mrow><annotation encoding=\"application/x-tex\">x</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">x</span></span></span></span> (all <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi></mrow><annotation encoding=\"application/x-tex\">x</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">x</span></span></span></span> in an ideal).</p>",
        "id": 278662160,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1649752194
    },
    {
        "content": "<p>However let me stress that the usual exponential and logarithm play a useful role much earlier on in the <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>p</mi></mrow><annotation encoding=\"application/x-tex\">p</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\">p</span></span></span></span>-adic theory (the story of when things converge is different, but the basic ideas are the same).</p>",
        "id": 278662559,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1649752408
    },
    {
        "content": "<p>I'm not even claiming that <code>1+x+x^2</code> in characteristic 3 isn't a useful function, just that it's not deserving of the name <code>exp</code></p>",
        "id": 278662927,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1649752637
    },
    {
        "content": "<p>People aren't going to use exp in char 3 so maybe it doesn't matter what it's called?</p>",
        "id": 278662979,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1649752667
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span> <a href=\"#narrow/stream/113488-general/topic/exponential.20in.20banach.20algebras/near/278662927\">said</a>:</p>\n<blockquote>\n<p>I'm not even claiming that <code>1+x+x^2</code> in characteristic 3 isn't a useful function, just that it's not deserving of the name <code>exp</code></p>\n</blockquote>\n<p><code>1 + x - x^2</code>, you mean?</p>",
        "id": 278663062,
        "sender_full_name": "Ya√´l Dillies",
        "timestamp": 1649752698
    },
    {
        "content": "<p>I'm advocating for putting <code>[char_zero ùïÇ]</code> on the definition (even though it would be unused), as a clear indication than the name only makes sense in that situation</p>",
        "id": 278663327,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1649752850
    },
    {
        "content": "<p>And then my follow up question is \"if I do that, is there any A for which <code>ùïÇ = ‚Ñö</code> isn't a valid choice?\"</p>",
        "id": 278663496,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1649752941
    },
    {
        "content": "<p>What is A here? We'll need it for Q-algebras with a notion of convergence.</p>",
        "id": 278666727,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1649754806
    },
    {
        "content": "<p><a href=\"https://leanprover-community.github.io/mathlib_docs/find/exp\">docs#exp</a></p>",
        "id": 278671754,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1649757871
    },
    {
        "content": "<p><code>ùî∏</code> is the algebra in which we're computing the exponential</p>",
        "id": 278671765,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1649757880
    },
    {
        "content": "<p><code>ùïÇ</code> is some nonsense argument that doesn't actually matter, see <a href=\"https://leanprover-community.github.io/mathlib_docs/find/exp_eq_exp\">docs#exp_eq_exp</a></p>",
        "id": 278671783,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1649757899
    },
    {
        "content": "<p>Won't you then have to carry <code>normed_space ‚Ñö ùî∏</code> everywhere? I'm hitting something similar in <a href=\"https://github.com/leanprover-community/mathlib/pull/13379\">#13379</a> where I could prove stuff about <code>normed_space ‚Ñö E</code> but if you do you will need to assume that all your real normed spaces are also rational normed spaces (unless I missed an instance?)</p>",
        "id": 278674895,
        "sender_full_name": "Ya√´l Dillies",
        "timestamp": 1649760047
    },
    {
        "content": "<p>I'm currently trying to work out if this is true:</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kd\">instance</span> <span class=\"n\">normed_algebra_rat</span> <span class=\"o\">{</span><span class=\"bp\">ùïú</span><span class=\"o\">}</span> <span class=\"o\">[</span><span class=\"n\">normed_division_ring</span> <span class=\"bp\">ùïú</span><span class=\"o\">]</span> <span class=\"o\">[</span><span class=\"n\">char_zero</span> <span class=\"bp\">ùïú</span><span class=\"o\">]</span> <span class=\"o\">:</span> <span class=\"n\">normed_algebra</span> <span class=\"n\">‚Ñö</span> <span class=\"bp\">ùïú</span> <span class=\"o\">:=</span>\n</code></pre></div>",
        "id": 278675673,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1649760704
    },
    {
        "content": "<p>given that a normed field is not a normed ring which is a field (because the conventions on norms are different for rings and fields) I think it's only wise to check these things carefully!</p>",
        "id": 278676539,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1649761243
    },
    {
        "content": "<p>I can't seem to prove it, likely because it's not true</p>",
        "id": 278676742,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1649761384
    },
    {
        "content": "<p>Fundamentally it seems I need some typeclass that says  that the norm preserves casts of rationals / naturals / integers</p>",
        "id": 278676850,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1649761452
    },
    {
        "content": "<p>Many many lemmas under <code>analysis.convex.</code> need such a typeclass.</p>",
        "id": 278676899,
        "sender_full_name": "Ya√´l Dillies",
        "timestamp": 1649761497
    },
    {
        "content": "<p>I think \"preserves cast of nat\" probably implies all the rest?</p>",
        "id": 278677023,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1649761568
    },
    {
        "content": "<p>Is there a more mathematical notion for this?</p>",
        "id": 278677054,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1649761590
    },
    {
        "content": "<p>I did manage to prove a few results that were a bit surprising in that direction. Let me dig out...</p>",
        "id": 278677092,
        "sender_full_name": "Ya√´l Dillies",
        "timestamp": 1649761622
    },
    {
        "content": "<p>(some examples: <a href=\"https://leanprover-community.github.io/mathlib_docs/find/pi.normed_space\">docs#pi.normed_space</a> satisfies such a typeclass, <a href=\"https://leanprover-community.github.io/mathlib_docs/find/euclidean_space\">docs#euclidean_space</a> does not)</p>",
        "id": 278677171,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1649761647
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span> <a href=\"#narrow/stream/113488-general/topic/exponential.20in.20banach.20algebras/near/278675673\">said</a>:</p>\n<blockquote>\n<p>I'm currently trying to work out if this is true:</p>\n<p><div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kd\">instance</span> <span class=\"n\">normed_algebra_rat</span> <span class=\"o\">{</span><span class=\"bp\">ùïú</span><span class=\"o\">}</span> <span class=\"o\">[</span><span class=\"n\">normed_division_ring</span> <span class=\"bp\">ùïú</span><span class=\"o\">]</span> <span class=\"o\">[</span><span class=\"n\">char_zero</span> <span class=\"bp\">ùïú</span><span class=\"o\">]</span> <span class=\"o\">:</span> <span class=\"n\">normed_algebra</span> <span class=\"n\">‚Ñö</span> <span class=\"bp\">ùïú</span> <span class=\"o\">:=</span>\n</code></pre></div><br>\n</p>\n</blockquote>\n<p>Unless I'm confused, the p-adics are a counterexample.</p>",
        "id": 278677611,
        "sender_full_name": "Reid Barton",
        "timestamp": 1649761933
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"387244\">Ya√´l Dillies</span> <a href=\"#narrow/stream/113488-general/topic/exponential.20in.20banach.20algebras/near/278676899\">said</a>:</p>\n<blockquote>\n<p>Many many lemmas under <code>analysis.convex.</code> need such a typeclass.</p>\n</blockquote>\n<p>The stereotypical example is <a href=\"https://leanprover-community.github.io/mathlib_docs/find/convex_on_norm\">docs#convex_on_norm</a></p>",
        "id": 278677702,
        "sender_full_name": "Ya√´l Dillies",
        "timestamp": 1649762027
    },
    {
        "content": "<p><a href=\"https://leanprover-community.github.io/mathlib_docs/find/normed_algebra\">docs#normed_algebra</a></p>",
        "id": 278677793,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1649762072
    },
    {
        "content": "<p>Oh wait, it already exists?!</p>",
        "id": 278677826,
        "sender_full_name": "Ya√´l Dillies",
        "timestamp": 1649762105
    },
    {
        "content": "<p>Reid, <a href=\"https://leanprover-community.github.io/mathlib_docs/find/padic_norm_e.norm_int_le_one\">docs#padic_norm_e.norm_int_le_one</a> does seem to confirm you're correct</p>",
        "id": 278677859,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1649762124
    },
    {
        "content": "<p><code> normed_algebra ‚Ñö ùïú</code> needs <code>normed_field ‚Ñö</code> -- is there an instance of this? Number theorists have lots of norms that they want to put on the rationals.</p>",
        "id": 278677971,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1649762182
    },
    {
        "content": "<p>Yes, the real one <a href=\"https://leanprover-community.github.io/mathlib_docs/find/rat.normed_field\">docs#rat.normed_field</a></p>",
        "id": 278678087,
        "sender_full_name": "Reid Barton",
        "timestamp": 1649762274
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"268315\">@Anatole Dedecker</span>, turns out <a href=\"https://leanprover-community.github.io/mathlib_docs/find/normed_algebra\">docs#normed_algebra</a> is what we wanted all along.</p>",
        "id": 278678318,
        "sender_full_name": "Ya√´l Dillies",
        "timestamp": 1649762435
    },
    {
        "content": "<p>Over the reals, I take it?</p>",
        "id": 278678450,
        "sender_full_name": "Reid Barton",
        "timestamp": 1649762535
    },
    {
        "content": "<p>We wanted to state lemmas more generally than for <code>‚Ñù</code>.</p>",
        "id": 278678615,
        "sender_full_name": "Ya√´l Dillies",
        "timestamp": 1649762644
    },
    {
        "content": "<p>Yael, it sounds like you're talking about something different to what I was asking about</p>",
        "id": 278678879,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1649762832
    },
    {
        "content": "<p>I believe it's related, because the answer to your question is also an answer to mine.</p>",
        "id": 278678940,
        "sender_full_name": "Ya√´l Dillies",
        "timestamp": 1649762881
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib/pull/13384\">#13384</a> is the strongest instance I was able to prove</p>",
        "id": 278679403,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1649763128
    },
    {
        "content": "<p>Just wanted to comment since I'm the author of the <code>exp</code> files. Indeed the case of a field with nonzero characteristic is a bit stupid. I must admit that I didn't have a lot of other examples in mind than <code>real</code> and <code>complex</code> at the time, I barely knew about p-adics, so I was really over-generalizing without thinking much about it <span aria-label=\"sweat smile\" class=\"emoji emoji-1f605\" role=\"img\" title=\"sweat smile\">:sweat_smile:</span></p>",
        "id": 278679435,
        "sender_full_name": "Anatole Dedecker",
        "timestamp": 1649763150
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"387244\">Ya√´l Dillies</span> <a href=\"#narrow/stream/113488-general/topic/exponential.20in.20banach.20algebras/near/278678318\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"268315\">Anatole Dedecker</span>, turns out <a href=\"https://leanprover-community.github.io/mathlib_docs/find/normed_algebra\">docs#normed_algebra</a> is what we wanted all along.</p>\n</blockquote>\n<p>Oh is it ? I have to find what was the problem again <span aria-label=\"sweat smile\" class=\"emoji emoji-1f605\" role=\"img\" title=\"sweat smile\">:sweat_smile:</span> (Since it seems not to be clear, Yael is talking about related problem we faced while trying to generalize the base field)</p>",
        "id": 278679605,
        "sender_full_name": "Anatole Dedecker",
        "timestamp": 1649763272
    },
    {
        "content": "<p>(the base field of <code>exp</code> or the base field of <code>normed_algebra</code>?)</p>",
        "id": 278680105,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1649763603
    },
    {
        "content": "<p>The base field for convexity, it is not related to exponential</p>",
        "id": 278680194,
        "sender_full_name": "Anatole Dedecker",
        "timestamp": 1649763660
    },
    {
        "content": "<p>I still think we should definitely be able to make everything an exponential over the rational though, and it connects with something that has been talked about before : we should remove the dependence on the norm in the <em>definition</em> of exp, so that we can have an exponential for matrices that is completely independent of the norm that the user wants to put on its matrices. Of course all the theorems related to the convergence radius, or differentiability, will depend on a norm, but it may allow us to reserve the <code>normed_algebra</code> hypothesis for cases where it is really needed.</p>",
        "id": 278680555,
        "sender_full_name": "Anatole Dedecker",
        "timestamp": 1649763898
    },
    {
        "content": "<p>I'm not completely sure, but I even think that <a href=\"https://leanprover-community.github.io/mathlib_docs/find/exp_series_radius_eq_top\">docs#exp_series_radius_eq_top</a> could be done with just the assumption that we indeed have a normed algebra over Q</p>",
        "id": 278681144,
        "sender_full_name": "Anatole Dedecker",
        "timestamp": 1649764286
    },
    {
        "content": "<p>The problem was that <code>‚à•a ‚Ä¢ x + b ‚Ä¢ y‚à•</code> is not necessarily <code>a ‚Ä¢ ‚à•x‚à•</code>, so we couldn't turn convex combinations within the norm to convex combinations outside the norm.</p>",
        "id": 278681303,
        "sender_full_name": "Ya√´l Dillies",
        "timestamp": 1649764369
    },
    {
        "content": "<p>From <span class=\"user-mention\" data-user-id=\"260507\">@Heather Macbeth</span>'s comment on <a href=\"https://github.com/leanprover-community/mathlib/pull/13384\">#13384</a>, I realize the answer is probably \"yes, it suffices to only provide <code>exp</code> if a normed ‚Ñö-algebra structure is available on A, but different choices of the ring A might need a different <code>normed_field</code> structure on <code>‚Ñö</code> to the one that's currently canonical (<a href=\"https://leanprover-community.github.io/mathlib_docs/find/rat.normed_field\">docs#rat.normed_field</a>)\"</p>",
        "id": 278809050,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1649844551
    },
    {
        "content": "<p>Which means we want don't want to specialize to <code>Q</code>, so users can provide a type synonym carrying an alternative <code>normed_field</code> structure?</p>",
        "id": 278809204,
        "sender_full_name": "Scott Morrison",
        "timestamp": 1649844665
    },
    {
        "content": "<p>Even if I really like <code>p</code>-adic norms, I think <a href=\"https://leanprover-community.github.io/mathlib_docs/find/rat.normed_field\">docs#rat.normed_field</a> is a reasonable instance. We can use type synonyms for <code>p</code>-adic norms on <code>Q</code>.</p>",
        "id": 278809425,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1649844823
    },
    {
        "content": "<p>I didn't see Scott's answer <span aria-label=\"grinning\" class=\"emoji emoji-1f600\" role=\"img\" title=\"grinning\">:grinning:</span></p>",
        "id": 278809544,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1649844889
    },
    {
        "content": "<p>Eric: That sounds right to me. The power series for the exponential function converges for x=p^2 if Q has the p-adic norm as does the power series for log(1+x). One proof that exp and log define inverse bijections between a small disc in Qp centre 0 and a small disc centre 1 is \"it's true for the reals because of calculus, so the formal power series must be inverse of each other so it works for the p-adics too\"</p>",
        "id": 278809603,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1649844946
    },
    {
        "content": "<p>I'm not sure I care about norms on Q, I don't think I want to use exp and log on Q, only on Qp</p>",
        "id": 278809676,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1649844986
    },
    {
        "content": "<p>Kevin, you realize that I'm talking about <code>exp ‚Ñö A : A ‚Üí A</code>, right? Would you call this \"exp on ‚Ñö\" or \"exp on A\"?</p>",
        "id": 278810113,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1649845326
    },
    {
        "content": "<p>Regarding making the exponential work over matrices without picking a norm, <a href=\"https://github.com/leanprover-community/mathlib/pull/13426\">#13426</a> takes a step towards this goal</p>",
        "id": 278940699,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1649927375
    },
    {
        "content": "<p>Oh indeed, thanks !</p>",
        "id": 278941613,
        "sender_full_name": "Anatole Dedecker",
        "timestamp": 1649927993
    },
    {
        "content": "<p>I've a branch elsewhere that does the rest, which I'll rebase once that is merged</p>",
        "id": 278942272,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1649928419
    },
    {
        "content": "<p>After that change we can obviously just remove ùïÇ from the definition (in favor of using ‚Ñö internally), as the definition doesn't depend on its normed or even topological space structure any more</p>",
        "id": 279053938,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1650004591
    },
    {
        "content": "<p>(the requirements are now just <code>[field ùïÇ] [ring ùî∏] [algebra ùïÇ ùî∏] [topological_space ùî∏] [topological_ring ùî∏] [has_continuous_const_smul ùïÇ ùî∏]</code>)</p>",
        "id": 279054432,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1650005302
    },
    {
        "content": "<p>I'm sorry to cause all this trouble just from this claim (which I've never followed up on) that \"number theorists use p-adic log I promise\"..</p>",
        "id": 279055260,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1650006258
    },
    {
        "content": "<p>Following up on claims like that is what your students are for, right? ;)</p>",
        "id": 279055423,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1650006428
    },
    {
        "content": "<p>I'm confused again about <span class=\"user-mention\" data-user-id=\"110038\">@Kevin Buzzard</span>'s p-adic norm speculations; I was able to show that for any two normed algebras over different fields, <code>(exp_series ùïÇ ùî∏).radius = (exp_series ùïÇ' ùî∏).radius</code>; so it seems there would be no motivation for putting a different norm on <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"double-struck\">Q</mi></mrow><annotation encoding=\"application/x-tex\">\\mathbb{Q}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8556em;vertical-align:-0.1667em;\"></span><span class=\"mord mathbb\">Q</span></span></span></span> anyway.</p>",
        "id": 281505670,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1651880260
    },
    {
        "content": "<p>Either that, or the existing lemmas stated in terms of <a href=\"https://leanprover-community.github.io/mathlib_docs/find/formal_multilinear_series.radius\">docs#formal_multilinear_series.radius</a> are of no use in the p-adic case as they require too strong a sense of convergence</p>",
        "id": 281505836,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1651880388
    },
    {
        "content": "<p>Either way, it increasingly seems like there's no point even mentioning any other field in the lemmas</p>",
        "id": 281505903,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1651880421
    },
    {
        "content": "<p>(My original plan was to leave <code>ùïÇ</code> in the lemmas but not the definitions, but that creates a lot of annoyance for... nothing?)</p>",
        "id": 281505945,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1651880478
    },
    {
        "content": "<p>The formal exponential power series <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>‚àë</mo><msup><mi>x</mi><mi>n</mi></msup><mi mathvariant=\"normal\">/</mi><mi>n</mi><mo stretchy=\"false\">!</mo></mrow><annotation encoding=\"application/x-tex\">\\sum x^n/n!</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mop op-symbol small-op\" style=\"position:relative;top:0em;\">‚àë</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6644em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span></span></span></span></span><span class=\"mord\">/</span><span class=\"mord mathnormal\">n</span><span class=\"mclose\">!</span></span></span></span> converges in a p-adic field iff <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"normal\">‚à£</mi><mi>x</mi><mi mathvariant=\"normal\">‚à£</mi><mo>&lt;</mo><mi mathvariant=\"normal\">‚à£</mi><mi>p</mi><msup><mi mathvariant=\"normal\">‚à£</mi><mrow><mn>1</mn><mi mathvariant=\"normal\">/</mi><mo stretchy=\"false\">(</mo><mi>p</mi><mo>‚àí</mo><mn>1</mn><mo stretchy=\"false\">)</mo></mrow></msup></mrow><annotation encoding=\"application/x-tex\">|x|&lt; |p|^{1/(p-1)}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">‚à£</span><span class=\"mord mathnormal\">x</span><span class=\"mord\">‚à£</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">&lt;</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.138em;vertical-align:-0.25em;\"></span><span class=\"mord\">‚à£</span><span class=\"mord mathnormal\">p</span><span class=\"mord\"><span class=\"mord\">‚à£</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.888em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1/</span><span class=\"mopen mtight\">(</span><span class=\"mord mathnormal mtight\">p</span><span class=\"mbin mtight\">‚àí</span><span class=\"mord mtight\">1</span><span class=\"mclose mtight\">)</span></span></span></span></span></span></span></span></span></span></span></span> and in particular the answer depends on <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>p</mi></mrow><annotation encoding=\"application/x-tex\">p</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\">p</span></span></span></span>.</p>",
        "id": 281526212,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1651909451
    },
    {
        "content": "<p>Is a padic field a normed algebra over Q? My guess is that it must not be</p>",
        "id": 281526290,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1651909636
    },
    {
        "content": "<p>Because if it were, then I have a proof that it converges everywhere</p>",
        "id": 281526339,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1651909685
    },
    {
        "content": "<p>When you say Q do you mean \"Q with some fixed norm on it that isn't the p-adic norm\"?</p>",
        "id": 281526345,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1651909711
    },
    {
        "content": "<p>Any norm</p>",
        "id": 281526348,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1651909726
    },
    {
        "content": "<p><a href=\"https://leanprover-community.github.io/mathlib_docs/find/normed_algebra\">docs#normed_algebra</a></p>",
        "id": 281526360,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1651909759
    },
    {
        "content": "<p>See my comment above about the radius of convergence being equal for all choices of field (...that satisfy <a href=\"https://leanprover-community.github.io/mathlib_docs/find/nondiscrete_normed_field\">docs#nondiscrete_normed_field</a> and normed_algebra)</p>",
        "id": 281526366,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1651909796
    },
    {
        "content": "<p>There is [normed_field k] in that definition, which says to me the incorrect (in number theory) statement \"there's only one norm on the rationals\"</p>",
        "id": 281526421,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1651909856
    },
    {
        "content": "<p>Sure, but that's not important here</p>",
        "id": 281526425,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1651909877
    },
    {
        "content": "<p>Let's say you can pick a type synonym <code>number_theory_rat</code> and put whatever norm you like on it</p>",
        "id": 281526433,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1651909914
    },
    {
        "content": "<p>My claim is that no matter what you do, it won't satisfy that typeclass</p>",
        "id": 281526474,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1651909930
    },
    {
        "content": "<p>I can't see any problem with making Qp into a normed algebra over Q</p>",
        "id": 281526481,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1651909944
    },
    {
        "content": "<p>Is Qp a <a href=\"https://leanprover-community.github.io/mathlib_docs/find/complete_space\">docs#complete_space</a>?</p>",
        "id": 281526503,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1651909967
    },
    {
        "content": "<p>Qp seems a normed algebra</p>",
        "id": 281526510,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1651909988
    },
    {
        "content": "<p>Yes, it is complete, as metric space</p>",
        "id": 281526520,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1651910006
    },
    {
        "content": "<p>The norm of n! is not n! in the p-adic case. Does this help?</p>",
        "id": 281526592,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1651910117
    },
    {
        "content": "<p>Any integer has norm at most 1</p>",
        "id": 281526597,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1651910151
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span> <a href=\"#narrow/stream/113488-general/topic/exponential.20in.20banach.20algebras/near/281505670\">said</a>:</p>\n<blockquote>\n<p>I'm confused again about <span class=\"user-mention silent\" data-user-id=\"110038\">Kevin Buzzard</span>'s p-adic norm speculations; I was able to show that for any two normed algebras over different fields, <code>(exp_series ùïÇ ùî∏).radius = (exp_series ùïÇ' ùî∏).radius</code>; so it seems there would be no motivation for putting a different norm on <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"double-struck\">Q</mi></mrow><annotation encoding=\"application/x-tex\">\\mathbb{Q}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8556em;vertical-align:-0.1667em;\"></span><span class=\"mord mathbb\">Q</span></span></span></span> anyway.</p>\n</blockquote>\n<p>But here we are changing  <code>ùî∏</code>, aren't we?</p>",
        "id": 281526639,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1651910165
    },
    {
        "content": "<p>Sure, but I think I also have a proof that <code>(exp_series ‚Ñö A).radius = ‚ä§</code> for one particular choice of norm on Q, and any A</p>",
        "id": 281526664,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1651910251
    },
    {
        "content": "<p>I'll check if I had any unexpected typeclasses that I haven't mentioned here</p>",
        "id": 281526719,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1651910290
    },
    {
        "content": "<p>But this depends on the particular norm, right? Qp is a normed algebra over Q with the p-adic norm</p>",
        "id": 281526806,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1651910408
    },
    {
        "content": "<p>Ah thanks, you've made me realize my confusion. The escape is \"there is no <code>normed_algebra Q Qp</code> instance possible using the default norm on Q\"</p>",
        "id": 281527055,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1651910751
    },
    {
        "content": "<p>I can certainly believe that. If you're doing p-adic stuff then the norm on Q coming from the map Q -&gt; R and the usual norm on R plays no role</p>",
        "id": 281527503,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1651911488
    },
    {
        "content": "<p>Fields like R and Qp are compete with respect to one canonical norm, but Q lives in all of these and gets a different norm from each inclusion</p>",
        "id": 281527597,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1651911646
    },
    {
        "content": "<p>Same goes for Z</p>",
        "id": 281527603,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1651911662
    }
]