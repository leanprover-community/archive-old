[
    {
        "content": "<p>To whom it may concern, </p>\n<p>To make my widget-view thing work in vscode, I modified the code for the vscode extension's infoview quite a lot. In particular infoview.ts is now just a dumb pipe that forwards all the server messages to the webview which is running some react code to update the infoview. So all of the code to do with formatting messages and handling the state of the infoview is now done in the webview javascript. The HTML of the webview page is set once and then the rest is done with server messages and code running in the webview.</p>\n<p>But I broke stuff like freezing the state and the red highlighting thing. I don't want to cause a regression in functionality so I thought I'd make a thread where we can chat about what should be in the featureset for this overhauled version, or perhaps it is best left alone.</p>\n<p>My questions are: </p>\n<ol>\n<li>does anyone use the red code highlighting feature? (sometimes when you hover over an error message or goal the relevant sourcetext will be highlighted in red.) </li>\n<li>the goal view came with output freezing, which I intend to keep, are there any other features of the infoview that are needed by anyone? Filtering different members of the local variables list should be possible using the widget system.</li>\n</ol>",
        "id": 196886471,
        "sender_full_name": "Edward Ayers",
        "timestamp": 1588939154
    },
    {
        "content": "<p>I never use the red thing. For a very long time I thought this was a bug, before someone told me it is a feature.</p>",
        "id": 196886673,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1588939309
    },
    {
        "content": "<p>About 2, see <a href=\"https://github.com/leanprover/vscode-lean/issues/151\" title=\"https://github.com/leanprover/vscode-lean/issues/151\">https://github.com/leanprover/vscode-lean/issues/151</a></p>",
        "id": 196886727,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1588939328
    },
    {
        "content": "<p>I only just found out about the red highlighting feature. I only ever use Display Goal, never Display Messages.</p>",
        "id": 196888175,
        "sender_full_name": "Chris Hughes",
        "timestamp": 1588940431
    },
    {
        "content": "<blockquote>\n<p>does anyone use the red code highlighting feature? (sometimes when you hover over an error message or goal the relevant sourcetext will be highlighted in red.) </p>\n</blockquote>\n<p>Oh, I almost forgot about that. That's perfect for the feature I just PR'd, <a href=\"https://github.com/leanprover-community/vscode-lean/issues/158\" title=\"https://github.com/leanprover-community/vscode-lean/issues/158\">vscode-lean#158</a>, which adds a \"sticky position\" flag to give live goal feedback somewhere other than the current cursor position. Right now there is no visible indicator of where it is or even if it is on, so a little red line on the mark would help.</p>",
        "id": 196888176,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1588940431
    },
    {
        "content": "<p>Maybe it would be cool to have that the infoview produces a goal state etc under your cursor, and then you have the option to 'pin' the state, then the infoview will report what is going on at that cursor position and the cursor infoview will render below that</p>",
        "id": 196894419,
        "sender_full_name": "Edward Ayers",
        "timestamp": 1588944113
    },
    {
        "content": "<p>This sounds great! The infoview has definitely needed a refactoring along the lines you described for a while.</p>",
        "id": 196904300,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1588949300
    },
    {
        "content": "<p>Would anyone mind if the 'Display Messages' command and button in vscode was dropped (So there is only 'Display Goal'? What is the use case for it? In the overhauled version there is a collapsible section called All Messages that is always present instead.</p>",
        "id": 201168607,
        "sender_full_name": "Edward Ayers",
        "timestamp": 1592412551
    },
    {
        "content": "<p>I sometimes find it useful to use when there's a red underline on one character which I can't spot, and the display messages button helps find it</p>",
        "id": 201168812,
        "sender_full_name": "Bhavik Mehta",
        "timestamp": 1592412641
    },
    {
        "content": "<p>All messages would be fine instead though</p>",
        "id": 201168840,
        "sender_full_name": "Bhavik Mehta",
        "timestamp": 1592412657
    },
    {
        "content": "<p>Yeah the idea of the new version is that it would display both the goals and all of the messages always. And if there are too many all messages you can just collapse it.</p>",
        "id": 201168918,
        "sender_full_name": "Edward Ayers",
        "timestamp": 1592412704
    },
    {
        "content": "<blockquote>\n<p>all of the messages always</p>\n</blockquote>\n<p>There are two collapsible sections: one for the errors on the current line (shown by default), and another one for all errors in the current file (hidden by default).  You can toggle them individually.</p>",
        "id": 201169064,
        "sender_full_name": "Gabriel Ebner",
        "timestamp": 1592412766
    },
    {
        "content": "<p>What's the difference between the new version and the existing version?</p>",
        "id": 201169168,
        "sender_full_name": "Bhavik Mehta",
        "timestamp": 1592412822
    },
    {
        "content": "<p>The new version is a complete overhaul so there are a ton of differences.</p>",
        "id": 201169295,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1592412867
    },
    {
        "content": "<p>Sure, but I mean in relation to the info which Ed is talking about</p>",
        "id": 201169341,
        "sender_full_name": "Bhavik Mehta",
        "timestamp": 1592412899
    },
    {
        "content": "<p>Maybe these screenshots help? <a href=\"/user_uploads/3121/9IDYsNOsMjB_nzDVFCgjcKc3/Screenshot-2020-06-17-12.57.56.png\">Screenshot-2020-06-17-12.57.56.png</a> <a href=\"/user_uploads/3121/uCgaz69HM-LwrAdGHc7x2UQv/Screenshot-2020-06-17-12.58.19.png\">Screenshot-2020-06-17-12.58.19.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/9IDYsNOsMjB_nzDVFCgjcKc3/Screenshot-2020-06-17-12.57.56.png\" title=\"Screenshot-2020-06-17-12.57.56.png\"><img src=\"/user_uploads/3121/9IDYsNOsMjB_nzDVFCgjcKc3/Screenshot-2020-06-17-12.57.56.png\"></a></div><div class=\"message_inline_image\"><a href=\"/user_uploads/3121/uCgaz69HM-LwrAdGHc7x2UQv/Screenshot-2020-06-17-12.58.19.png\" title=\"Screenshot-2020-06-17-12.58.19.png\"><img src=\"/user_uploads/3121/uCgaz69HM-LwrAdGHc7x2UQv/Screenshot-2020-06-17-12.58.19.png\"></a></div>",
        "id": 201169748,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1592413115
    },
    {
        "content": "<p>I just noticed that the blue bar to the left of the \"Tactic State\" widget changes to yellow when I resize the window. Is that intentional?</p>",
        "id": 201169897,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1592413192
    },
    {
        "content": "<p>Ah yeah that clears it up perfectly, thanks!</p>",
        "id": 201170048,
        "sender_full_name": "Bhavik Mehta",
        "timestamp": 1592413225
    },
    {
        "content": "<p>I find this blue line distracting, and it feels like it's eating some of our precious horizontal space.</p>",
        "id": 201170232,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1592413285
    },
    {
        "content": "<blockquote>\n<p>changes to yellow</p>\n</blockquote>\n<p>I also find this irritating.  It also lights up yellow when I move around with the cursor.</p>",
        "id": 201170270,
        "sender_full_name": "Gabriel Ebner",
        "timestamp": 1592413297
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"123965\">Bryan Gin-ge Chen</span> <a href=\"#narrow/stream/113488-general/topic/vscode.20infoview.20overhaul/near/201169897\">said</a>:</p>\n<blockquote>\n<p>I just noticed that the blue bar to the left of the \"Tactic State\" widget changes to yellow when I resize the window. Is that intentional?</p>\n</blockquote>\n<p>It changes to yellow when the state changed and it's updating, so I am guessing what is happening is that resizing the window is changing the 'region of interest' and this causes it to update</p>",
        "id": 201170326,
        "sender_full_name": "Edward Ayers",
        "timestamp": 1592413320
    },
    {
        "content": "<p>And when there's no info it switches between \"no info found\" and \"updating...\", which I can't stand either.</p>",
        "id": 201170368,
        "sender_full_name": "Gabriel Ebner",
        "timestamp": 1592413325
    },
    {
        "content": "<p>:)</p>",
        "id": 201170391,
        "sender_full_name": "Edward Ayers",
        "timestamp": 1592413337
    },
    {
        "content": "<p>Glad that people are speaking out</p>",
        "id": 201170451,
        "sender_full_name": "Edward Ayers",
        "timestamp": 1592413360
    },
    {
        "content": "<p>We are still very grateful for your work!</p>",
        "id": 201170888,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1592413562
    },
    {
        "content": "<p>On Lean 3.4.2 with an empty file I'm still seeing the \"Error updating: . Try again.\" message.</p>",
        "id": 201172120,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1592414183
    },
    {
        "content": "<p>Ok to get rid of the flashy color change issue i've put an easing animation on the colour change so that it changes colour slowly. Would people rather that the vertical bar is removed and that the title state changes colour or keep the vertical bar? My reasoning behind the bar is that it looks similar to the orange in the text editor gutter when a lean file is loading</p>",
        "id": 201173365,
        "sender_full_name": "Edward Ayers",
        "timestamp": 1592414742
    },
    {
        "content": "<p>A new vscode extension pre-release for today's Lean release, now with widget trace message support.  The widget branch has been merged, so this will be the next vscode extension release.  I think all issues that were publicly mentioned in the last thread are fixed now.  Please let me know about additional bugs, otherwise this will land in your vscode.<br>\n<a href=\"/user_uploads/3121/o22pLoH-K9mTeP395zvPEdxh/lean-0.15.15.vsix\">lean-0.15.15.vsix</a></p>",
        "id": 201978535,
        "sender_full_name": "Gabriel Ebner",
        "timestamp": 1593096343
    },
    {
        "content": "<p>Did we lose \"pause\" functionality?</p>",
        "id": 201979839,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1593096887
    },
    {
        "content": "<p>(he says, staring at the output of the linter at the end of a very long file)</p>",
        "id": 201979892,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1593096911
    },
    {
        "content": "<p>Hmm, that's supposed to be the \"pin\", which pins the current position.  But that seems to disable error messages..</p>",
        "id": 201980874,
        "sender_full_name": "Gabriel Ebner",
        "timestamp": 1593097332
    },
    {
        "content": "<p>There is a pause icon but it doesn't seem to behave as the play / pause icons do in the current version. If I click the (new) pause icon and then move the cursor, the icon changes back and the info view changes too, whereas with the current version of the extension, the entire infoview window is frozen until I click play again.</p>",
        "id": 201982322,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1593097979
    },
    {
        "content": "<p>Oh yeah, the pause button is pretty broken. <span aria-label=\"sad\" class=\"emoji emoji-2639\" role=\"img\" title=\"sad\">:sad:</span></p>",
        "id": 201984465,
        "sender_full_name": "Gabriel Ebner",
        "timestamp": 1593098959
    },
    {
        "content": "<p>Pinning is fixed now.  As a workaround for pausing, you can first pin and then pause the pinned view. :-/<br>\n<a href=\"/user_uploads/3121/4JivvBpHALZAvX6GDteMsC9i/lean-0.15.15.vsix\">lean-0.15.15.vsix</a></p>",
        "id": 201985797,
        "sender_full_name": "Gabriel Ebner",
        "timestamp": 1593099493
    },
    {
        "content": "<p>Not a bug, but a feature request!:<br>\nFirst let me say widgets are amazing, I love using the new info view.<br>\nOne thing that would make it even better would be a jump to definition / or expand to include the definition in the tooltips.<br>\nFor example you're doing a long proof and some unfolding and rewriting and you end up with a term in your goal you don't know the definition of, with widgets you can see the type which is great, but sometimes seeing the definition is helpful for next steps, or jumping to the definition to check out nearby lemmas.<br>\nI had a go at implementing this myself, but got a bit stymied, as the vscode jump to def is position is based on the position of the cursor in the file, so I couldn't see how to repurpose it quickly, I imagine from within lean in the widget code it might be easier to find the code location, but I also don't yet know how put the right html in the widget to get to get vscode to jump to that location anyway.<br>\nSo if someone knows how to do this I think it would be very cool!</p>",
        "id": 201987989,
        "sender_full_name": "Alex J. Best",
        "timestamp": 1593100414
    },
    {
        "content": "<blockquote>\n<p>jump to definition</p>\n</blockquote>\n<p>I'd suggest the following implementation:</p>\n<ul>\n<li>The goal widget (in <code>interactive_expr.lean</code>) annotates the output with links to filename &amp; line number (these are accessible from meta code)</li>\n<li>Define a html syntax to relay these links to the vscode extension.</li>\n<li>Make the vscode extension recognize these links and hook them up correctly.</li>\n</ul>",
        "id": 201988357,
        "sender_full_name": "Gabriel Ebner",
        "timestamp": 1593100592
    },
    {
        "content": "<p>If pausing will only work for pinned views, maybe the pause button should be hidden for non-pinned views?</p>\n<p>Pausing still seems to be canceled after I edit the file.</p>\n<p>Also, if I start with my cursor in a <code>#print</code> statement or in a tactic block, the info view doesn't display the info there until I click or move the cursor.</p>",
        "id": 201990404,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1593101615
    },
    {
        "content": "<p>This might be for a future release, but could we get a command / keyboard shortcut to expand /collapse the \"all messages\" widget? Maybe the old ctrl+alt+shift+enter?</p>",
        "id": 201990756,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1593101793
    },
    {
        "content": "<p>I've been using the extension development host to test and the launched extension seems to reliably crash on close if I leave it open for longer than a few minutes.</p>",
        "id": 201991925,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1593102359
    },
    {
        "content": "<p>I don't see any messages in the debug console though.</p>",
        "id": 201992056,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1593102405
    },
    {
        "content": "<p>We cannot click the <code>Try this</code> links.</p>",
        "id": 202003615,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1593108193
    },
    {
        "content": "<p>The widget view swallows the body of <code>let</code> statements.</p>",
        "id": 202012912,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1593112768
    },
    {
        "content": "<p>Compare the tactic state in widget and plain text at the end of the first line in:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"kn\">example</span> <span class=\"o\">:</span> <span class=\"n\">true</span> <span class=\"o\">:=</span>\n<span class=\"k\">begin</span>\n  <span class=\"k\">let</span> <span class=\"n\">n</span> <span class=\"o\">:=</span> <span class=\"mi\">0</span><span class=\"o\">,</span>\n  <span class=\"n\">trivial</span>\n<span class=\"kn\">end</span>\n</code></pre></div>",
        "id": 202013060,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1593112833
    },
    {
        "content": "<p>Last update for today: the pausing now also works for non-pinned views.  Try this also works.  <a href=\"/user_uploads/3121/EF9yu7h85seaFdonR5bsrg6R/lean-0.15.15.vsix\">lean-0.15.15.vsix</a></p>\n<ul>\n<li>The let display unfortunately needs to be fixed in lean (<a href=\"https://github.com/leanprover-community/lean/issues/360\">lean#360</a>), or patched in mathlib</li>\n<li>The ctrl+alt+shift+enter shortcut is filed (<a href=\"https://github.com/leanprover-community/vscode-lean/issues/188\">vscode-lean#188</a>)<br>\nI hope I didn't miss anything here.</li>\n</ul>",
        "id": 202031756,
        "sender_full_name": "Gabriel Ebner",
        "timestamp": 1593122908
    },
    {
        "content": "<p>Thanks!</p>",
        "id": 202031793,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1593122962
    },
    {
        "content": "<p>Zulip says the VSCode extension repo should move to leanprover-community</p>",
        "id": 202031820,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1593122989
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover/vscode-lean/issues/188\">leanprover/vscode-lean#188</a></p>",
        "id": 202032683,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1593123598
    },
    {
        "content": "<p>The type of the term under the cursor no longer shows up in the status bar. Do we still want this feature? I've found it useful sometimes, but it's not very discoverable and probably most people don't know it exists. If people still want it, the quickest way I can see to fix it is to add back some of <a href=\"https://github.com/leanprover/vscode-lean/blob/0df334aa2ae537c264c6ff6076f4753771178a19/src/infoview.ts#L377\">this code</a>, but I haven't studied the new info view code yet, so that might be too hacky.</p>",
        "id": 202060926,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1593157577
    },
    {
        "content": "<p>I didn't notice it was gone because I've never used it.  You could use the same approach as now and send a message to the extension (using <code>post</code>) from the <code>Info</code> component when it updates.</p>",
        "id": 202065131,
        "sender_full_name": "Gabriel Ebner",
        "timestamp": 1593160841
    },
    {
        "content": "<p>Gabriel won't like this comment, but we lost the <code>goals accomplished</code> color.</p>",
        "id": 202065175,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1593160881
    },
    {
        "content": "<p>The <code>goals accomplished</code> color was the default text color.  It's actually gained color: it's now blue.</p>",
        "id": 202065444,
        "sender_full_name": "Gabriel Ebner",
        "timestamp": 1593161054
    },
    {
        "content": "<p>Unfortunately, this now needs to be fixed in core lean (we can also patch it from mathlib)</p>",
        "id": 202065493,
        "sender_full_name": "Gabriel Ebner",
        "timestamp": 1593161079
    },
    {
        "content": "<p>It's not blue here.</p>",
        "id": 202065545,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1593161110
    },
    {
        "content": "<p>Maybe I have an outdated extension.</p>",
        "id": 202065566,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1593161126
    },
    {
        "content": "<p>You could also have an outdated mathlib/lean.  The tactic state rendering (including the color and text for \"goals accomplished\") is now implemented in lean.</p>",
        "id": 202065727,
        "sender_full_name": "Gabriel Ebner",
        "timestamp": 1593161254
    },
    {
        "content": "<p>My mathlib is from yesterday afternoon.</p>",
        "id": 202065793,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1593161292
    },
    {
        "content": "<p>It may be too old.</p>",
        "id": 202065795,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1593161298
    },
    {
        "content": "<p>It's from the bump to 3.16.5 commit.</p>",
        "id": 202065814,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1593161317
    },
    {
        "content": "<p>But I don't see any commit that seem relevant.</p>",
        "id": 202065873,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1593161361
    },
    {
        "content": "<p>Ok, I also have a mathlib with 3.16.4.  And my \"goals accomplished\" is blue.</p>",
        "id": 202065978,
        "sender_full_name": "Gabriel Ebner",
        "timestamp": 1593161418
    },
    {
        "content": "<p>Then you have an outdated mathlib</p>",
        "id": 202066016,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1593161452
    },
    {
        "content": "<p>I'm on the latest extension and 3.16.5, it's blue for me too.</p>",
        "id": 202066019,
        "sender_full_name": "Rob Lewis",
        "timestamp": 1593161455
    },
    {
        "content": "<p>It's 3.16.5 now.</p>",
        "id": 202066026,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1593161458
    },
    {
        "content": "<p>Weird, it's blue again now. But the font size is now tiny.</p>",
        "id": 202066664,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1593161816
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"127136\">Alex J. Best</span> <a href=\"#narrow/stream/113488-general/topic/vscode.20infoview.20overhaul/near/201987989\">said</a>:</p>\n<blockquote>\n<p>One thing that would make it even better would be a jump to definition / or expand to include the definition in the tooltips. ...</p>\n</blockquote>\n<p>Hi Alex! Thanks for this, another idea for implementing this would be to change the type of <code>tactic.save_widget</code> so that it also supports actions like 'reveal definition' instead of just 'insert text' implemented at the moment.</p>",
        "id": 202076814,
        "sender_full_name": "Edward Ayers",
        "timestamp": 1593169656
    },
    {
        "content": "<p>Thanks so much to <span class=\"user-mention\" data-user-id=\"110043\">@Gabriel Ebner</span>  for patiently reviewing my code.</p>",
        "id": 202076896,
        "sender_full_name": "Edward Ayers",
        "timestamp": 1593169701
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110038\">Kevin Buzzard</span> <a href=\"#narrow/stream/113488-general/topic/vscode.20infoview.20overhaul/near/201979839\">said</a>:</p>\n<blockquote>\n<p>Did we lose \"pause\" functionality?</p>\n</blockquote>\n<p>Wrt pausing. Is the problem that it is buggy or that it works differently to previously? I reimplemented the pausing from scratch so if there is a difference in behaviour it's just because I didn't look at how the old pausing works carefully enough.</p>",
        "id": 202077090,
        "sender_full_name": "Edward Ayers",
        "timestamp": 1593169836
    },
    {
        "content": "<p>Yesterday the pause did not work on the main (non-pinned) info.  If you pressed pause and then moved the cursor, then it would immediately unpause.</p>",
        "id": 202077174,
        "sender_full_name": "Gabriel Ebner",
        "timestamp": 1593169913
    },
    {
        "content": "<p>But that's fixed now.</p>",
        "id": 202077224,
        "sender_full_name": "Gabriel Ebner",
        "timestamp": 1593169928
    },
    {
        "content": "<p>Some more requests, I might be able to work on some of these this weekend:</p>\n<ul>\n<li>The README still needs to be updated (I promised to help with this, so I'll work on this first.)</li>\n<li>Could we get a way to pause \"all messages\"?</li>\n<li>The keyboard shortcut that expands \"all messages\" only seems to work when the info view window is focused, which makes it less convenient. Could we get it to work from the editor window as well? (Also, it seems to now be ctrl+opt+shift+enter on mac, whereas the old all messages was cmd+opt+shift+enter)</li>\n<li>Could we add tooltips to the various icons in the info view?</li>\n<li>It can be a little tough to tell where one widget ends and the next one begins. Can we update the styling somehow to make that clearer? Maybe the top-level widget headers should have a different color background? Or maybe there should be more indentation, or some outlining?</li>\n</ul>",
        "id": 202109404,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1593187437
    },
    {
        "content": "<ul>\n<li>Thank you for taking care of the README!</li>\n<li>Pausing all messages is implemented now.</li>\n<li>I don't think we have a shortcut to expand all messages.</li>\n<li>Tooltips work for me.</li>\n<li>I agree that the styling could use a bit of love.  To me it feels much more crowded than the current info view.  I'd prefer to avoid indentation though, horizontal screen real estate is already a scarce commodity with mathlib theorem statements.</li>\n</ul>",
        "id": 202115337,
        "sender_full_name": "Gabriel Ebner",
        "timestamp": 1593190539
    },
    {
        "content": "<p>The expand all messages shortcut is implemented.  Complain if you want this to be a toggle instead.</p>",
        "id": 202116002,
        "sender_full_name": "Gabriel Ebner",
        "timestamp": 1593190894
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110043\">Gabriel Ebner</span> <a href=\"#narrow/stream/113488-general/topic/vscode.20infoview.20overhaul/near/202116002\">said</a>:</p>\n<blockquote>\n<p>The expand all messages shortcut is implemented.  Complain if you want this to be a toggle instead.</p>\n</blockquote>\n<p>Yes, it'd be nice if it were a toggle. <span aria-label=\"smile\" class=\"emoji emoji-263a\" role=\"img\" title=\"smile\">:smile:</span> (I'm not sure why I thought it was implemented before. Maybe I had all messages in focus and pressing enter expanded / collapsed it?)</p>\n<p>Tooltips also work for me, but it takes a bit longer than I expected.</p>\n<p>In this screenshot, (from <a href=\"#narrow/stream/116395-maths/topic/Multiplication.20on.20int.20is.20well-defined/near/202240104\">Kevin's thread</a>), you can see that <code>p</code>, <code>q</code>, <code>r</code>, ... are all squished together in the tactic state to form one giant variable <code>pqrstuvw</code>: <a href=\"/user_uploads/3121/wbM8J_zO0D7sqFyyrmPB0Gpe/Screenshot-2020-06-28-11.07.56.png\">Screenshot-2020-06-28-11.07.56.png</a> </p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/wbM8J_zO0D7sqFyyrmPB0Gpe/Screenshot-2020-06-28-11.07.56.png\" title=\"Screenshot-2020-06-28-11.07.56.png\"><img src=\"/user_uploads/3121/wbM8J_zO0D7sqFyyrmPB0Gpe/Screenshot-2020-06-28-11.07.56.png\"></a></div><p>(going through the info view code today, hopefully README PR tonight...)</p>",
        "id": 202240689,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1593357234
    },
    {
        "content": "<p>should be fixed by <a href=\"https://github.com/leanprover-community/lean/issues/365\">lean#365</a></p>",
        "id": 202247985,
        "sender_full_name": "Edward Ayers",
        "timestamp": 1593368275
    },
    {
        "content": "<p>When I have two variables with the same type consecutive in the context, the tactic state view seems to concatenate their names without a space. This doesn't happen with an underscore. <a href=\"/user_uploads/3121/CljFApDg0TJtmn2cG0m4TZVL/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/CljFApDg0TJtmn2cG0m4TZVL/image.png\" title=\"image.png\"><img src=\"/user_uploads/3121/CljFApDg0TJtmn2cG0m4TZVL/image.png\"></a></div>",
        "id": 202350763,
        "sender_full_name": "Rob Lewis",
        "timestamp": 1593455605
    },
    {
        "content": "<p>Any ideas?</p>",
        "id": 202350771,
        "sender_full_name": "Rob Lewis",
        "timestamp": 1593455610
    },
    {
        "content": "<p>Also, I still have the extension installed from a .vsix file, do you know if there's a way to go back to the marketplace version?</p>",
        "id": 202350856,
        "sender_full_name": "Rob Lewis",
        "timestamp": 1593455645
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"110596\">@Rob Lewis</span>  is this the same issue as the previous message in the thread?</p>",
        "id": 202350970,
        "sender_full_name": "Alex J. Best",
        "timestamp": 1593455720
    },
    {
        "content": "<p>Oh, haha, it is. Sorry.</p>",
        "id": 202351010,
        "sender_full_name": "Rob Lewis",
        "timestamp": 1593455750
    },
    {
        "content": "<p>There is no going back.  You will get the new version anyhow as soon as Bryan is finished with the readme.</p>",
        "id": 202354289,
        "sender_full_name": "Gabriel Ebner",
        "timestamp": 1593457416
    },
    {
        "content": "<p>Is the <code>let</code> bug fixed?</p>",
        "id": 202354502,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1593457514
    },
    {
        "content": "<p>The let bug is unfortunately in Lean, but we can also fix it from mathlib.  I wanted to fix this in mathlib after <a href=\"https://github.com/leanprover-community/mathlib/issues/3181\">#3181</a>.</p>",
        "id": 202354686,
        "sender_full_name": "Gabriel Ebner",
        "timestamp": 1593457579
    },
    {
        "content": "<p>Since let-values seem to be strangely important to you: <a href=\"https://github.com/leanprover-community/mathlib/issues/3228\">#3228</a></p>",
        "id": 202358186,
        "sender_full_name": "Gabriel Ebner",
        "timestamp": 1593459462
    },
    {
        "content": "<p>Thanks!</p>",
        "id": 202359334,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1593460061
    },
    {
        "content": "<p>Is it strange to want to see the let values?</p>",
        "id": 202359369,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1593460080
    },
    {
        "content": "<p>No, not at all.</p>",
        "id": 202359446,
        "sender_full_name": "Gabriel Ebner",
        "timestamp": 1593460114
    },
    {
        "content": "<p>The main use I have for seeing the let values is that their absence indicates to me that I used <code>have</code> by accident.</p>",
        "id": 202362222,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1593461655
    },
    {
        "content": "<p>The first draft of the vscode-lean README refresh is finally done: <a href=\"https://github.com/leanprover/vscode/issues/202\">leanprover/vscode#202</a> </p>\n<p>Since I made a ton of changes, it'd be great to get some feedback. See the PR'd README <a href=\"https://github.com/leanprover/vscode-lean/blob/8889d29907bfa2c357af5fadcb17ab66eab95280/README.md\">here</a>. Any comments, criticisms and corrections appreciated!</p>",
        "id": 202957147,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1594017271
    },
    {
        "content": "<p>The first link of your post gives me a 404.</p>",
        "id": 202959296,
        "sender_full_name": "Jasmin Blanchette",
        "timestamp": 1594019855
    },
    {
        "content": "<p>It should be <code>vscode-lean</code> instead of merely <code>vscode</code>.</p>",
        "id": 202959462,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1594020038
    },
    {
        "content": "<p>Muhaha.</p>",
        "id": 202991420,
        "sender_full_name": "Gabriel Ebner",
        "timestamp": 1594043096
    },
    {
        "content": "<p>I'm streaming tomorrow and I'm going to have <code>let</code>s. Is there any way I can their definitions showing up?</p>",
        "id": 202999588,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1594047147
    },
    {
        "content": "<p>Hopefully this will be fixed by then.</p>",
        "id": 202999874,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1594047302
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"112680\">Johan Commelin</span> <a href=\"#narrow/stream/113488-general/topic/vscode.20infoview.20overhaul/near/202959462\">said</a>:</p>\n<blockquote>\n<p>It should be <code>vscode-lean</code> instead of merely <code>vscode</code>.</p>\n</blockquote>\n<p>whoops, fixed, though vscode-lean 0.16.0 has been released in the meantime!</p>",
        "id": 203000598,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1594047635
    },
    {
        "content": "<p>Bryan this readme is gorgeous!</p>",
        "id": 203001183,
        "sender_full_name": "Edward Ayers",
        "timestamp": 1594047916
    },
    {
        "content": "<p>Thanks Ed, I hope it accurately captures how to use all the new features! I was up a bit late working on it, so I wouldn't be surprised if I got some / many things wrong...</p>",
        "id": 203001438,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1594048031
    },
    {
        "content": "<p>Oh wooah -- to anyone only half-paying attention here and who thinks that they know everything about the tactic state -- Bryan's README indicates that there are now a gazillion new tricks that you can do with this new \"widget\" version.</p>",
        "id": 203001527,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1594048080
    },
    {
        "content": "<p>My only worry is that if we update the looks of the infoview in the future then some of the screenshots might need to be redone. But maybe it's ok to have slightly out of date screenshots because they still convey the functionality well.</p>",
        "id": 203002310,
        "sender_full_name": "Edward Ayers",
        "timestamp": 1594048551
    },
    {
        "content": "<p>Isn't the screenshot using some parentheses plugins?</p>",
        "id": 203003034,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1594048929
    },
    {
        "content": "<p>Oh yeah, I did have bracket pair colorizer turned on. Hope that's not too distracting.</p>",
        "id": 203003327,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1594049088
    },
    {
        "content": "<p>I think it's fine</p>",
        "id": 203003360,
        "sender_full_name": "Edward Ayers",
        "timestamp": 1594049108
    },
    {
        "content": "<p>The new README looks awesome</p>",
        "id": 203003368,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1594049111
    },
    {
        "content": "<p>Should we render it somewhere on the community website too? We should also move the leanproject documentation there, it's currently too difficult to find</p>",
        "id": 203003436,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1594049155
    },
    {
        "content": "<p>It seems there is a missing icon at <a href=\"https://github.com/leanprover/vscode-lean/blob/master/media/reveal-file-location.png\">https://github.com/leanprover/vscode-lean/blob/master/media/reveal-file-location.png</a></p>\n<div class=\"message_inline_image\"><a href=\"https://github.com/leanprover/vscode-lean/blob/master/media/reveal-file-location.png\"><img src=\"https://raw.githubusercontent.com/leanprover/vscode-lean/master/media/reveal-file-location.png\"></a></div>",
        "id": 203003565,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1594049222
    },
    {
        "content": "<p>Whoops, thanks for catching that! <a href=\"https://github.com/leanprover/vscode-lean/pull/203\">https://github.com/leanprover/vscode-lean/pull/203</a></p>",
        "id": 203004053,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1594049509
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110038\">Kevin Buzzard</span> <a href=\"#narrow/stream/113488-general/topic/vscode.20infoview.20overhaul/near/202999588\">said</a>:</p>\n<blockquote>\n<p>I'm streaming tomorrow and I'm going to have <code>let</code>s. Is there any way I can their definitions showing up?</p>\n</blockquote>\n<p>The formatting of the tactic state is now tied to the mathlib version essentially, so you need to update mathlib to see lets.  The fix was merged on June 30.</p>",
        "id": 203005493,
        "sender_full_name": "Gabriel Ebner",
        "timestamp": 1594050287
    },
    {
        "content": "<p>Indeed I'm way behind, I'm back on June 28th. Thanks!</p>",
        "id": 203009168,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1594051936
    },
    {
        "content": "<p>Looks like my vscode has just updated and given me the new widgets. This is amazing.</p>\n<p>Of course, I have a (very little) complaint :-) In the attached <a href=\"/user_uploads/3121/iYIkvyEAdApayJ6kAQ-F7EXW/vscode.png\">image</a>, you can see that I don't have access to the button to close the type display, because the type is too large. If the button could be (also?) in the upper left corner, to the left of <code>Prop</code>, it would help!</p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/iYIkvyEAdApayJ6kAQ-F7EXW/vscode.png\" title=\"image\"><img src=\"/user_uploads/3121/iYIkvyEAdApayJ6kAQ-F7EXW/vscode.png\"></a></div>",
        "id": 203020957,
        "sender_full_name": "Sebastien Gouezel",
        "timestamp": 1594058294
    },
    {
        "content": "<p>oh dear that's a bug. As a quick fix, you can scroll to the far right of the infoview with the scrollbar at the bottom to get to the close button</p>",
        "id": 203021257,
        "sender_full_name": "Edward Ayers",
        "timestamp": 1594058437
    },
    {
        "content": "<p>alternatively, you should be able to dismiss it by clicking elsewhere in the view?</p>",
        "id": 203021296,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1594058462
    },
    {
        "content": "<p>That's not a bug, I can scroll right (a lot) to get access to the button, or enlarge a lot the corresponding window. So, my message is more a feature request than a bug report.</p>",
        "id": 203021391,
        "sender_full_name": "Sebastien Gouezel",
        "timestamp": 1594058516
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110049\">Mario Carneiro</span> <a href=\"#narrow/stream/113488-general/topic/vscode.20infoview.20overhaul/near/203021296\">said</a>:</p>\n<blockquote>\n<p>alternatively, you should be able to dismiss it by clicking elsewhere in the view?</p>\n</blockquote>\n<p>elsewhere in the expression</p>",
        "id": 203021498,
        "sender_full_name": "Edward Ayers",
        "timestamp": 1594058559
    },
    {
        "content": "<p>I can't get my version of infoview to scroll, it always word wraps instead...</p>",
        "id": 203021634,
        "sender_full_name": "Edward Ayers",
        "timestamp": 1594058625
    },
    {
        "content": "<p>It wraps words if it's a complicated type, but if there are many types when you select a large expression, it doesn't.</p>",
        "id": 203021872,
        "sender_full_name": "Sebastien Gouezel",
        "timestamp": 1594058733
    },
    {
        "content": "<p>Oooh, I've finally updated my branch to latest master. This is sweeeet. <span aria-label=\"sweet potato\" class=\"emoji emoji-1f360\" role=\"img\" title=\"sweet potato\">:sweet_potato:</span> <span aria-label=\"candy\" class=\"emoji emoji-1f36c\" role=\"img\" title=\"candy\">:candy:</span> <span aria-label=\"pancakes\" class=\"emoji emoji-1f95e\" role=\"img\" title=\"pancakes\">:pancakes:</span> <span aria-label=\"honey\" class=\"emoji emoji-1f36f\" role=\"img\" title=\"honey\">:honey:</span></p>",
        "id": 203022128,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1594058879
    },
    {
        "content": "<p>It seems that the 0.16.0 extension no longer works with SSH-Remote VSCode</p>",
        "id": 203024285,
        "sender_full_name": "Yakov Pechersky",
        "timestamp": 1594060088
    },
    {
        "content": "<p>I see no contents in <code>Lean infoview</code></p>",
        "id": 203024325,
        "sender_full_name": "Yakov Pechersky",
        "timestamp": 1594060115
    },
    {
        "content": "<p>What version of Lean is your project using?</p>",
        "id": 203024373,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1594060147
    },
    {
        "content": "<p>Still able to see output in <code>Problems</code> in the tab next to Termianl</p>",
        "id": 203024378,
        "sender_full_name": "Yakov Pechersky",
        "timestamp": 1594060150
    },
    {
        "content": "<p>What's the most straightforward way to check that?</p>",
        "id": 203024430,
        "sender_full_name": "Yakov Pechersky",
        "timestamp": 1594060180
    },
    {
        "content": "<p>What does <code>version</code> say in <code>leanpkg.toml</code>?</p>",
        "id": 203024458,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1594060195
    },
    {
        "content": "<p>I think the issue is that the infoview now uses its own separate server connection (whereas before it used the same one as the editor), and this is probably too complicated for the remote vscode functionality to keep track of.</p>",
        "id": 203024551,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1594060235
    },
    {
        "content": "<p>We'll need to think about related stuff to get \"live share\" to work too.</p>",
        "id": 203024611,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1594060267
    },
    {
        "content": "<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">lean_version</span> <span class=\"bp\">=</span> <span class=\"s2\">&quot;leanprover-community/lean:3.16.5&quot;</span>\n<span class=\"n\">path</span> <span class=\"bp\">=</span> <span class=\"s2\">&quot;src&quot;</span>\n\n<span class=\"o\">[</span><span class=\"n\">dependencies</span><span class=\"o\">]</span>\n<span class=\"n\">mathlib</span> <span class=\"bp\">=</span> <span class=\"o\">{</span><span class=\"n\">git</span> <span class=\"bp\">=</span> <span class=\"s2\">&quot;https://github.com/leanprover-community/mathlib&quot;</span><span class=\"o\">,</span> <span class=\"n\">rev</span> <span class=\"bp\">=</span> <span class=\"s2\">&quot;f06e4e00a32ce6a349a0d2b0e3a65cd453599dbd&quot;</span><span class=\"o\">}</span><span class=\"bp\">```</span>\n</code></pre></div>",
        "id": 203024654,
        "sender_full_name": "Yakov Pechersky",
        "timestamp": 1594060295
    },
    {
        "content": "<p>=C I'm going to have to downgrade =C</p>",
        "id": 203024697,
        "sender_full_name": "Yakov Pechersky",
        "timestamp": 1594060322
    },
    {
        "content": "<p>Here's the page we'll have to study to fix this: <a href=\"https://code.visualstudio.com/api/advanced-topics/remote-extensions\">https://code.visualstudio.com/api/advanced-topics/remote-extensions</a></p>",
        "id": 203024954,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1594060448
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"123965\">Bryan Gin-ge Chen</span> <a href=\"#narrow/stream/113488-general/topic/vscode.20infoview.20overhaul/near/203024551\">said</a>:</p>\n<blockquote>\n<p>I think the issue is that the infoview now uses its own separate server connection (whereas before it used the same one as the editor), and this is probably too complicated for the remote vscode functionality to keep track of.</p>\n</blockquote>\n<p>It's not just the server connection of the infoview (which is tunneled over regular webview messages; if clicking buttons in the infoview used to work then this shouldn't be the issue).  There is also an HTTP server that we run on localhost, which is very likely to be a problem: <a href=\"https://github.com/leanprover/vscode-lean/blob/bcece76b9cff5a06653510b0dea7c58692c84f30/src/staticserver.ts\">https://github.com/leanprover/vscode-lean/blob/bcece76b9cff5a06653510b0dea7c58692c84f30/src/staticserver.ts</a></p>",
        "id": 203025202,
        "sender_full_name": "Gabriel Ebner",
        "timestamp": 1594060623
    },
    {
        "content": "<p><a href=\"https://code.visualstudio.com/api/advanced-topics/remote-extensions\">https://code.visualstudio.com/api/advanced-topics/remote-extensions</a></p>",
        "id": 203025239,
        "sender_full_name": "Edward Ayers",
        "timestamp": 1594060653
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110043\">Gabriel Ebner</span> <a href=\"#narrow/stream/113488-general/topic/vscode.20infoview.20overhaul/near/203025202\">said</a>:</p>\n<blockquote>\n<p>It's not just the server connection of the infoview (which is tunneled over regular webview messages; if clicking buttons in the infoview used to work then this shouldn't be the issue).  There is also an HTTP server that we run on localhost, which is very likely to be a problem: <a href=\"https://github.com/leanprover/vscode-lean/blob/bcece76b9cff5a06653510b0dea7c58692c84f30/src/staticserver.ts\">https://github.com/leanprover/vscode-lean/blob/bcece76b9cff5a06653510b0dea7c58692c84f30/src/staticserver.ts</a></p>\n</blockquote>\n<p>Ah, true. But I thought that was added a while back. <span class=\"user-mention\" data-user-id=\"308899\">@Yakov Pechersky</span> was the most recent previous version of the extension working for you?</p>",
        "id": 203025360,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1594060714
    },
    {
        "content": "<p>Just downgraded to 0.15.1,  and the <code>Lean Goal</code> window shows info as before today.</p>",
        "id": 203025476,
        "sender_full_name": "Yakov Pechersky",
        "timestamp": 1594060791
    },
    {
        "content": "<p>I get <code>Failed to load resource: net::ERR_CONNECTION_REFUSED</code> in the webview developer tools if I use it remotely</p>",
        "id": 203025621,
        "sender_full_name": "Edward Ayers",
        "timestamp": 1594060872
    },
    {
        "content": "<p>I think the problem is that this line is not resolving index.js correctly: <a href=\"https://github.com/leanprover/vscode-lean/blob/bcece76b9cff5a06653510b0dea7c58692c84f30/src/infoview.ts#L363\">https://github.com/leanprover/vscode-lean/blob/bcece76b9cff5a06653510b0dea7c58692c84f30/src/infoview.ts#L363</a></p>",
        "id": 203025860,
        "sender_full_name": "Edward Ayers",
        "timestamp": 1594061004
    },
    {
        "content": "<p>Yep, that looks just like to workaround HTTP server that we use to serve the <code>index.js</code>.</p>",
        "id": 203026394,
        "sender_full_name": "Gabriel Ebner",
        "timestamp": 1594061287
    },
    {
        "content": "<p>This looks useful: <a href=\"https://code.visualstudio.com/api/advanced-topics/remote-extensions#forwarding-localhost\">https://code.visualstudio.com/api/advanced-topics/remote-extensions#forwarding-localhost</a></p>",
        "id": 203026440,
        "sender_full_name": "Gabriel Ebner",
        "timestamp": 1594061320
    },
    {
        "content": "<p>Hello! Is there a way to inlcude a <span aria-label=\"party ball\" class=\"emoji emoji-1f38a\" role=\"img\" title=\"party ball\">:party_ball:</span> whenever a <code>goals accomplished</code> is reached at the end of a lemma/theorem/proof?</p>",
        "id": 203349269,
        "sender_full_name": "Miguel Raz Guzm치n Macedo",
        "timestamp": 1594267832
    },
    {
        "content": "<p>I'm on 3.16.5 lean version and 0.16.1 vscode extension and heard the legend that emojis had been added...</p>",
        "id": 203349293,
        "sender_full_name": "Miguel Raz Guzm치n Macedo",
        "timestamp": 1594267883
    },
    {
        "content": "<p>We had such an emoji for 2 or 3 weeks... but it was decided that it would be better to have something sober and professional. (Even though the atmosphere here on Zulip is extremely relaxed and we make fun with emojis all the time.)</p>",
        "id": 203349371,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1594267973
    },
    {
        "content": "<p>... Can I toggle a \"fun\" string option somewhere?</p>",
        "id": 203349445,
        "sender_full_name": "Miguel Raz Guzm치n Macedo",
        "timestamp": 1594268135
    },
    {
        "content": "<p>Also, <span aria-label=\"broken heart\" class=\"emoji emoji-1f494\" role=\"img\" title=\"broken heart\">:broken_heart:</span> on the <span aria-label=\"thumbs down\" class=\"emoji emoji-1f44e\" role=\"img\" title=\"thumbs down\">:thumbs_down:</span> vs Emojis :(</p>",
        "id": 203349513,
        "sender_full_name": "Miguel Raz Guzm치n Macedo",
        "timestamp": 1594268201
    },
    {
        "content": "<p>Maybe we can have a vscode setting to change the string so users can do this for themselves?</p>",
        "id": 203349578,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1594268329
    },
    {
        "content": "<p>Yup, just modifying the <code>goals accomplished</code> string in VSCode seems reasonable.</p>",
        "id": 203349606,
        "sender_full_name": "Miguel Raz Guzm치n Macedo",
        "timestamp": 1594268360
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"243947\">Miguel Raz Guzm치n Macedo</span> <a href=\"#narrow/stream/113488-general/topic/vscode.20infoview.20overhaul/near/203349513\">said</a>:</p>\n<blockquote>\n<p>Also, <span aria-label=\"broken heart\" class=\"emoji emoji-1f494\" role=\"img\" title=\"broken heart\">:broken_heart:</span> on the <span aria-label=\"thumbs down\" class=\"emoji emoji-1f44e\" role=\"img\" title=\"thumbs down\">:thumbs_down:</span> vs Emojis :(</p>\n</blockquote>\n<p>Sure, I get it. <span aria-label=\"oops\" class=\"emoji emoji-1f643\" role=\"img\" title=\"oops\">:oops:</span> <span aria-label=\"shrug\" class=\"emoji emoji-1f937\" role=\"img\" title=\"shrug\">:shrug:</span> But not everyone is well-versed in emoji... so it might be better to default to the universal world-dominating lang. <span aria-label=\"see no evil\" class=\"emoji emoji-1f648\" role=\"img\" title=\"see no evil\">:see_no_evil:</span> </p>\n<p>(Aside: why is there no <code>:emoji:</code>?)</p>",
        "id": 203349792,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1594268643
    },
    {
        "content": "<p>In the JuliaLang Slack/Zulip we uploaded custom emojis for the Unicode Consortium :D</p>",
        "id": 203349846,
        "sender_full_name": "Miguel Raz Guzm치n Macedo",
        "timestamp": 1594268759
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"243947\">@Miguel Raz Guzm치n Macedo</span> Note that, really, replacing the \"goals accomplished\" string with an emoji isn't enough. It should actually play the imperial march to be complete.</p>",
        "id": 203349963,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1594268931
    },
    {
        "content": "<p>We might as well just rick roll people on every completed proof amirite <span aria-label=\"sweat smile\" class=\"emoji emoji-1f605\" role=\"img\" title=\"sweat smile\">:sweat_smile:</span></p>",
        "id": 203349972,
        "sender_full_name": "Miguel Raz Guzm치n Macedo",
        "timestamp": 1594268964
    },
    {
        "content": "<p>But if you do it every time, it isn't rickrolling anymore, right?</p>",
        "id": 203350064,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1594269080
    },
    {
        "content": "<p>Only on April fools, and once.</p>\n<p>Just to keep people on their toes.</p>",
        "id": 203350206,
        "sender_full_name": "Miguel Raz Guzm치n Macedo",
        "timestamp": 1594269276
    },
    {
        "content": "<p>I think the goals accomplished message could have a special CSS class and the extension setting should allow CSS code.</p>",
        "id": 203359782,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1594281860
    },
    {
        "content": "<p>See <a href=\"https://github.com/leanprover-community/mathlib/blob/master/src/tactic/interactive_expr.lean#L305\">https://github.com/leanprover-community/mathlib/blob/master/src/tactic/interactive_expr.lean#L305</a></p>",
        "id": 203359850,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1594281927
    },
    {
        "content": "<p>I tried to modify it to make that line bigger but failed. <span class=\"user-mention\" data-user-id=\"121918\">@Edward Ayers</span> is there any documentation we could read here?</p>",
        "id": 203359936,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1594281977
    },
    {
        "content": "<p>how did it fail?</p>",
        "id": 203367268,
        "sender_full_name": "Edward Ayers",
        "timestamp": 1594287543
    },
    {
        "content": "<p>The stylesheet that is loaded in by default is called 'tachyons' and the <a href=\"http://tachyons.io/docs/\">docs are here</a>. I wanted a set of default styles that were configurable without having to use lots of inline styles or needing to change a stylesheet so it seemed like a good enough fit.</p>",
        "id": 203367444,
        "sender_full_name": "Edward Ayers",
        "timestamp": 1594287667
    },
    {
        "content": "<p>You can also add your own inline styles if you prefer</p>",
        "id": 203367478,
        "sender_full_name": "Edward Ayers",
        "timestamp": 1594287697
    },
    {
        "content": "<p>So eg you could do <code>h \"div\" [style [(\"font-size\", \"1.5rem\")]] [\"goals accomplished\"]</code>.</p>",
        "id": 203367627,
        "sender_full_name": "Edward Ayers",
        "timestamp": 1594287814
    },
    {
        "content": "<p>Having custom classes for things and then making a stylesheet somewhere is a bad idea because now the widgets will behave differently across different editor setups.</p>",
        "id": 203367858,
        "sender_full_name": "Edward Ayers",
        "timestamp": 1594287983
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110049\">Mario Carneiro</span> <a href=\"#narrow/stream/113488-general/topic/vscode.20infoview.20overhaul/near/203349578\">said</a>:</p>\n<blockquote>\n<p>Maybe we can have a vscode setting to change the string so users can do this for themselves?</p>\n</blockquote>\n<p>With widgets you can do this in mathlib, make a custom environment option for 'fun mode' and then edit <a href=\"https://github.com/leanprover-community/mathlib/blob/master/src/tactic/interactive_expr.lean#L305\">this line</a> to check for the fun mode option.</p>",
        "id": 203368019,
        "sender_full_name": "Edward Ayers",
        "timestamp": 1594288101
    },
    {
        "content": "<p>The help is wanted is not about tachyons, it's about <code>h</code> in <code>h \"div\" [style [(\"font-size\", \"1.5rem\")]] [\"goals accomplished\"]</code></p>",
        "id": 203368412,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1594288420
    },
    {
        "content": "<p>The other source of widget docs is <a href=\"https://github.com/leanprover-community/lean/blob/05d7184a6642e240e7bc659420267595893ad7bd/library/init/meta/widget/basic.lean#L14\">here</a></p>",
        "id": 203369141,
        "sender_full_name": "Edward Ayers",
        "timestamp": 1594289034
    },
    {
        "content": "<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">meta</span> <span class=\"n\">def</span> <span class=\"n\">rainbow</span> <span class=\"o\">{</span><span class=\"n\">풤</span><span class=\"o\">}</span> <span class=\"o\">:</span> <span class=\"n\">string</span> <span class=\"bp\"></span> <span class=\"n\">html</span> <span class=\"n\">풤</span>\n<span class=\"bp\">|</span> <span class=\"n\">x</span> <span class=\"o\">:=</span>\n  <span class=\"k\">let</span> <span class=\"n\">r</span> <span class=\"o\">:=</span> <span class=\"o\">[</span><span class=\"s2\">&quot;red&quot;</span><span class=\"o\">,</span> <span class=\"s2\">&quot;gold&quot;</span><span class=\"o\">,</span> <span class=\"s2\">&quot;yellow&quot;</span><span class=\"o\">,</span> <span class=\"s2\">&quot;green&quot;</span><span class=\"o\">,</span> <span class=\"s2\">&quot;blue&quot;</span><span class=\"o\">,</span> <span class=\"s2\">&quot;purple&quot;</span><span class=\"o\">]</span> <span class=\"k\">in</span>\n  <span class=\"n\">h</span> <span class=\"s2\">&quot;div&quot;</span> <span class=\"o\">[</span><span class=\"n\">cn</span> <span class=\"s2\">&quot;f2&quot;</span><span class=\"o\">]</span> <span class=\"err\">$</span> <span class=\"n\">list</span><span class=\"bp\">.</span><span class=\"n\">map_with_index</span> <span class=\"o\">(</span><span class=\"bp\">풭</span> <span class=\"n\">i</span> <span class=\"o\">(</span><span class=\"n\">x</span><span class=\"o\">:</span> <span class=\"n\">char</span><span class=\"o\">),</span> <span class=\"n\">h</span> <span class=\"s2\">&quot;span&quot;</span> <span class=\"o\">[</span><span class=\"n\">cn</span> <span class=\"err\">$</span> <span class=\"s2\">&quot;&quot;</span> <span class=\"bp\">&lt;|</span> <span class=\"n\">list</span><span class=\"bp\">.</span><span class=\"n\">nth</span> <span class=\"n\">r</span> <span class=\"o\">(</span><span class=\"n\">i</span> <span class=\"err\">%</span> <span class=\"n\">r</span><span class=\"bp\">.</span><span class=\"n\">length</span><span class=\"o\">)]</span> <span class=\"o\">[</span><span class=\"n\">x</span><span class=\"bp\">.</span><span class=\"n\">to_string</span><span class=\"o\">])</span> <span class=\"err\">$</span> <span class=\"n\">string</span><span class=\"bp\">.</span><span class=\"n\">to_list</span> <span class=\"n\">x</span>\n\n<span class=\"bp\">#</span><span class=\"n\">html</span> <span class=\"o\">(</span><span class=\"n\">rainbow</span> <span class=\"s2\">&quot;goals accomplished&quot;</span><span class=\"o\">)</span>\n</code></pre></div>",
        "id": 203369223,
        "sender_full_name": "Edward Ayers",
        "timestamp": 1594289071
    },
    {
        "content": "<p>He means <a href=\"https://leanprover-community.github.io/mathlib_docs/core/init/meta/widget/basic.html\">https://leanprover-community.github.io/mathlib_docs/core/init/meta/widget/basic.html</a></p>",
        "id": 203369521,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1594289330
    },
    {
        "content": "<p>Thanks!</p>",
        "id": 203369522,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1594289331
    },
    {
        "content": "<p>It looks like the \"filter\" (that filters out statements in the context) is not very permanent; if you set it somewhere it only applies to that specific place.</p>",
        "id": 203370170,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1594289796
    },
    {
        "content": "<p>Yes, Ed knows. It will be fixed eventually.</p>",
        "id": 203370267,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1594289882
    },
    {
        "content": "<p>ok thanks</p>",
        "id": 203370434,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1594290020
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"308899\">Yakov Pechersky</span> <a href=\"#narrow/stream/113488-general/topic/vscode.20infoview.20overhaul/near/203024285\">said</a>:</p>\n<blockquote>\n<p>It seems that the 0.16.0 extension no longer works with SSH-Remote VSCode</p>\n</blockquote>\n<p>Downgrading to an earlier version such as 0.15.15 will make the problem go away for now. Hopefully, an update is released that makes Lean Infoview work in remote containers as well.</p>",
        "id": 203767970,
        "sender_full_name": "Amanda Hauer",
        "timestamp": 1594672741
    },
    {
        "content": "<p>It's definitely on our radar. The big feature we'd like to go after first is getting \"Live Share\" to work. It's likely that in the course of investigating that we'll learn things that will help us with SSH-Remote compatibility as well.</p>",
        "id": 203771517,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1594674473
    },
    {
        "content": "<p>I'm currently working on a Dutch mini-localisation. Can I overwrite the \"goals accomplished\" message?</p>",
        "id": 205441735,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1596084629
    },
    {
        "content": "<p>(Other than that, I'm mostly just doing <code>meta def tactic.interactive.dutch_name := tactic.interactive.english_name</code>)</p>",
        "id": 205441746,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1596084679
    },
    {
        "content": "<p>I think you can copy the override that's done in mathlib. Here's where \"goals accomplished <span aria-label=\"tada\" class=\"emoji emoji-1f389\" role=\"img\" title=\"tada\">:tada:</span> \" is: <a href=\"https://github.com/leanprover-community/mathlib/blob/593b1bb5ff4c241a677ef9a617d404d4b6b06c32/src/tactic/interactive_expr.lean#L331\">https://github.com/leanprover-community/mathlib/blob/593b1bb5ff4c241a677ef9a617d404d4b6b06c32/src/tactic/interactive_expr.lean#L331</a> and the bottom of the file shows the attributes used to override the widgets in core Lean.</p>",
        "id": 205441955,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1596085034
    },
    {
        "content": "<p>So I would copy-paste-edit <code>tactic_view_component</code><br>\nand then issue something like</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">attribute</span> <span class=\"o\">[</span><span class=\"n\">vm_override</span> <span class=\"n\">custom_tactic_view_componenent</span><span class=\"o\">]</span> <span class=\"n\">widget_override</span><span class=\"bp\">.</span><span class=\"n\">tactic_view_component</span>\n</code></pre></div>\n\n\n<p>Is that right?</p>",
        "id": 205443983,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1596087959
    },
    {
        "content": "<p>I have no idea how vm overrides work</p>",
        "id": 205444024,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1596087972
    },
    {
        "content": "<p>I also don't really know. Maybe <span class=\"user-mention\" data-user-id=\"121918\">@Edward Ayers</span> can help?</p>",
        "id": 205444397,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1596088609
    },
    {
        "content": "<p>(deleted)</p>",
        "id": 205447353,
        "sender_full_name": "Gabriel Ebner",
        "timestamp": 1596092787
    },
    {
        "content": "<p>Yes, that should work.</p>",
        "id": 205447371,
        "sender_full_name": "Gabriel Ebner",
        "timestamp": 1596092835
    },
    {
        "content": "<p>I think it would be better to override <code>tactic.save_info</code></p>",
        "id": 205460722,
        "sender_full_name": "Edward Ayers",
        "timestamp": 1596103384
    },
    {
        "content": "<p>The idea of <code>tactic_component</code> is it's just a component that lets you access the tactic state</p>",
        "id": 205460831,
        "sender_full_name": "Edward Ayers",
        "timestamp": 1596103457
    },
    {
        "content": "<p>So you shouldn't have to copy that code</p>",
        "id": 205460840,
        "sender_full_name": "Edward Ayers",
        "timestamp": 1596103468
    },
    {
        "content": "<p>I acknoledge that the docs could be better for all of this</p>",
        "id": 205460905,
        "sender_full_name": "Edward Ayers",
        "timestamp": 1596103526
    },
    {
        "content": "<p>This is the second time someone wanted to change the goals accomplished message so we should rewrite <code>interactive_expr.lean</code>so that it reads the goals-accomplished message from a separate component or from an entry in environment options.</p>",
        "id": 205461134,
        "sender_full_name": "Edward Ayers",
        "timestamp": 1596103695
    },
    {
        "content": "<p>EDIT: Sorry I misread <code>tactic_view_component</code> as <code>tactic_component</code></p>",
        "id": 205461218,
        "sender_full_name": "Edward Ayers",
        "timestamp": 1596103801
    },
    {
        "content": "<p>Isn't there a rule of three? But I'm sure this a third person who doesn't mind asking for this (-;</p>",
        "id": 205461854,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1596104275
    },
    {
        "content": "<p>If Ed has time for this game then I think that offer a copy button is much more important, especially now that VSCode completely prevents any copy-paste from the info view.</p>",
        "id": 205462098,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1596104468
    },
    {
        "content": "<p>it prevents copy paste from the infoview!?</p>",
        "id": 205462121,
        "sender_full_name": "Edward Ayers",
        "timestamp": 1596104504
    },
    {
        "content": "<p>Yes, I think several people complained about this recently.</p>",
        "id": 205462941,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1596105225
    },
    {
        "content": "<p><a href=\"#narrow/stream/113488-general/topic/can't.20copy.20in.20widget.20mode\">https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/can't.20copy.20in.20widget.20mode</a></p>",
        "id": 205463008,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1596105249
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"121918\">Edward Ayers</span> <a href=\"#narrow/stream/113488-general/topic/vscode.20infoview.20overhaul/near/205462121\">said</a>:</p>\n<blockquote>\n<p>it prevents copy paste from the infoview!?</p>\n</blockquote>\n<p>Not for me</p>",
        "id": 205463469,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1596105646
    },
    {
        "content": "<p>It's just that the cover on hover and the cover on select are almost the same</p>",
        "id": 205463516,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1596105697
    },
    {
        "content": "<p>So you don't really see that you are selecting something</p>",
        "id": 205463526,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1596105705
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib/issues/3633\">#3633</a></p>\n<p><a href=\"/user_uploads/3121/qiFWVSQ-QDobUfBLKdXPJTvT/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/qiFWVSQ-QDobUfBLKdXPJTvT/image.png\" title=\"image.png\"><img src=\"/user_uploads/3121/qiFWVSQ-QDobUfBLKdXPJTvT/image.png\"></a></div>",
        "id": 205465482,
        "sender_full_name": "Edward Ayers",
        "timestamp": 1596107301
    },
    {
        "content": "<p>Wow, is this new?</p>",
        "id": 205465504,
        "sender_full_name": "Gabriel Ebner",
        "timestamp": 1596107327
    },
    {
        "content": "<p>fresh from my keyboard</p>",
        "id": 205465511,
        "sender_full_name": "Edward Ayers",
        "timestamp": 1596107338
    },
    {
        "content": "<p>I think we need to update mathlib's fork of the expression widgets.</p>",
        "id": 205465523,
        "sender_full_name": "Gabriel Ebner",
        "timestamp": 1596107359
    },
    {
        "content": "<p>The above is using the mathlib version rn</p>",
        "id": 205465541,
        "sender_full_name": "Edward Ayers",
        "timestamp": 1596107387
    },
    {
        "content": "<p><a href=\"/user_uploads/3121/HuXgEMv87QczmC1qrcdLa2xx/doesnt_show_for_me.png\">doesnt_show_for_me.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/HuXgEMv87QczmC1qrcdLa2xx/doesnt_show_for_me.png\" title=\"doesnt_show_for_me.png\"><img src=\"/user_uploads/3121/HuXgEMv87QczmC1qrcdLa2xx/doesnt_show_for_me.png\"></a></div>",
        "id": 205465625,
        "sender_full_name": "Gabriel Ebner",
        "timestamp": 1596107468
    },
    {
        "content": "<p>have you co'd <a href=\"https://github.com/leanprover-community/mathlib/issues/3633\">#3633</a> ?</p>",
        "id": 205465703,
        "sender_full_name": "Edward Ayers",
        "timestamp": 1596107531
    },
    {
        "content": "<p>Ah, I should've read the line above your screenshot. <span aria-label=\"smile\" class=\"emoji emoji-1f642\" role=\"img\" title=\"smile\">:smile:</span></p>",
        "id": 205465755,
        "sender_full_name": "Gabriel Ebner",
        "timestamp": 1596107587
    }
]