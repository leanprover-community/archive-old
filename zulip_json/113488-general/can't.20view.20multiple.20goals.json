[
    {
        "content": "<p>This came up in teaching:</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kn\">import</span> <span class=\"n\">tactic</span>\n\n<span class=\"c1\">-- First we do the question using Prop (optimised for proving)</span>\n\n<span class=\"kd\">variables</span> <span class=\"o\">(</span><span class=\"n\">P</span> <span class=\"n\">Q</span> <span class=\"n\">R</span> <span class=\"n\">S</span> <span class=\"n\">U</span> <span class=\"o\">:</span> <span class=\"kt\">Prop</span><span class=\"o\">)</span>\n\n<span class=\"kd\">theorem</span> <span class=\"n\">trick</span> <span class=\"o\">{</span><span class=\"n\">Q</span> <span class=\"o\">:</span> <span class=\"kt\">Prop</span><span class=\"o\">}</span> <span class=\"o\">(</span><span class=\"n\">hQ</span> <span class=\"o\">:</span> <span class=\"n\">Q</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"n\">Q</span> <span class=\"bp\">↔</span> <span class=\"n\">true</span> <span class=\"o\">:=</span>\n<span class=\"n\">iff_of_true</span> <span class=\"n\">hQ</span> <span class=\"n\">trivial</span>\n<span class=\"kd\">theorem</span> <span class=\"n\">trick2</span> <span class=\"o\">{</span><span class=\"n\">Q</span> <span class=\"o\">:</span> <span class=\"kt\">Prop</span><span class=\"o\">}</span> <span class=\"o\">(</span><span class=\"n\">hQ</span> <span class=\"o\">:</span> <span class=\"bp\">¬</span> <span class=\"n\">Q</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"n\">Q</span> <span class=\"bp\">↔</span> <span class=\"n\">false</span> <span class=\"o\">:=</span>\n<span class=\"n\">iff_false_intro</span> <span class=\"n\">hQ</span>\n<span class=\"kd\">example</span> <span class=\"o\">:</span> <span class=\"bp\">∀</span> <span class=\"n\">P</span> <span class=\"n\">Q</span> <span class=\"n\">R</span> <span class=\"n\">S</span> <span class=\"n\">U</span> <span class=\"o\">:</span> <span class=\"kt\">Prop</span><span class=\"o\">,</span>\n  <span class=\"bp\">¬</span> <span class=\"o\">(</span>\n<span class=\"o\">(</span><span class=\"n\">Q</span> <span class=\"bp\">∨</span> <span class=\"n\">P</span> <span class=\"bp\">∨</span> <span class=\"n\">U</span><span class=\"o\">)</span> <span class=\"bp\">∧</span> <span class=\"o\">(</span><span class=\"n\">U</span> <span class=\"bp\">∨</span> <span class=\"bp\">¬</span><span class=\"n\">Q</span> <span class=\"bp\">∨</span> <span class=\"n\">S</span><span class=\"o\">)</span> <span class=\"bp\">∧</span> <span class=\"o\">(</span><span class=\"n\">U</span> <span class=\"bp\">∨</span> <span class=\"n\">Q</span> <span class=\"bp\">∨</span> <span class=\"bp\">¬</span><span class=\"n\">R</span><span class=\"o\">)</span> <span class=\"bp\">∧</span> <span class=\"o\">(</span><span class=\"n\">P</span> <span class=\"bp\">∨</span> <span class=\"n\">R</span> <span class=\"bp\">∨</span> <span class=\"bp\">¬</span><span class=\"n\">S</span><span class=\"o\">)</span> <span class=\"bp\">∧</span>\n<span class=\"o\">(</span><span class=\"n\">P</span> <span class=\"bp\">∨</span> <span class=\"n\">S</span> <span class=\"bp\">∨</span> <span class=\"n\">R</span><span class=\"o\">)</span> <span class=\"bp\">∧</span> <span class=\"o\">(</span><span class=\"n\">R</span> <span class=\"bp\">∨</span> <span class=\"bp\">¬</span><span class=\"n\">U</span> <span class=\"bp\">∨</span> <span class=\"n\">Q</span><span class=\"o\">)</span> <span class=\"bp\">∧</span> <span class=\"o\">(</span><span class=\"n\">R</span> <span class=\"bp\">∨</span> <span class=\"n\">S</span> <span class=\"bp\">∨</span> <span class=\"bp\">¬</span><span class=\"n\">U</span><span class=\"o\">)</span> <span class=\"bp\">∧</span> <span class=\"o\">(</span><span class=\"bp\">¬</span><span class=\"n\">S</span> <span class=\"bp\">∨</span> <span class=\"bp\">¬</span><span class=\"n\">R</span> <span class=\"bp\">∨</span> <span class=\"n\">U</span><span class=\"o\">)</span> <span class=\"bp\">∧</span>\n<span class=\"o\">(</span><span class=\"n\">U</span> <span class=\"bp\">∨</span> <span class=\"bp\">¬</span><span class=\"n\">Q</span> <span class=\"bp\">∨</span> <span class=\"bp\">¬</span><span class=\"n\">R</span><span class=\"o\">)</span> <span class=\"bp\">∧</span> <span class=\"o\">(</span><span class=\"bp\">¬</span><span class=\"n\">Q</span> <span class=\"bp\">∨</span> <span class=\"n\">U</span> <span class=\"bp\">∨</span> <span class=\"bp\">¬</span><span class=\"n\">S</span><span class=\"o\">)</span> <span class=\"bp\">∧</span> <span class=\"o\">(</span><span class=\"bp\">¬</span><span class=\"n\">P</span> <span class=\"bp\">∨</span> <span class=\"bp\">¬</span><span class=\"n\">R</span> <span class=\"bp\">∨</span> <span class=\"n\">Q</span><span class=\"o\">)</span> <span class=\"bp\">∧</span> <span class=\"o\">(</span><span class=\"n\">S</span> <span class=\"bp\">∨</span> <span class=\"bp\">¬</span><span class=\"n\">U</span> <span class=\"bp\">∨</span> <span class=\"bp\">¬</span><span class=\"n\">P</span><span class=\"o\">)</span> <span class=\"bp\">∧</span>\n<span class=\"o\">(</span><span class=\"bp\">¬</span><span class=\"n\">R</span> <span class=\"bp\">∨</span> <span class=\"bp\">¬</span><span class=\"n\">P</span> <span class=\"bp\">∨</span> <span class=\"n\">U</span><span class=\"o\">)</span> <span class=\"bp\">∧</span> <span class=\"o\">(</span><span class=\"n\">S</span> <span class=\"bp\">∨</span> <span class=\"bp\">¬</span><span class=\"n\">R</span> <span class=\"bp\">∨</span> <span class=\"bp\">¬</span><span class=\"n\">U</span><span class=\"o\">)</span> <span class=\"bp\">∧</span> <span class=\"o\">(</span><span class=\"bp\">¬</span><span class=\"n\">R</span> <span class=\"bp\">∨</span> <span class=\"bp\">¬</span><span class=\"n\">Q</span> <span class=\"bp\">∨</span> <span class=\"bp\">¬</span><span class=\"n\">S</span><span class=\"o\">)</span> <span class=\"bp\">∧</span> <span class=\"o\">(</span><span class=\"n\">Q</span> <span class=\"bp\">∨</span> <span class=\"n\">R</span> <span class=\"bp\">∨</span> <span class=\"n\">S</span><span class=\"o\">)</span> <span class=\"bp\">∧</span>\n<span class=\"o\">(</span><span class=\"bp\">¬</span><span class=\"n\">U</span> <span class=\"bp\">∨</span> <span class=\"n\">P</span> <span class=\"bp\">∨</span> <span class=\"bp\">¬</span><span class=\"n\">Q</span><span class=\"o\">)</span> <span class=\"bp\">∧</span> <span class=\"o\">(</span><span class=\"n\">R</span> <span class=\"bp\">∨</span> <span class=\"bp\">¬</span><span class=\"n\">Q</span> <span class=\"bp\">∨</span> <span class=\"bp\">¬</span><span class=\"n\">P</span><span class=\"o\">)</span> <span class=\"bp\">∧</span> <span class=\"o\">(</span><span class=\"n\">P</span> <span class=\"bp\">∨</span> <span class=\"n\">R</span> <span class=\"bp\">∨</span> <span class=\"bp\">¬</span><span class=\"n\">Q</span><span class=\"o\">)</span> <span class=\"bp\">∧</span> <span class=\"o\">(</span><span class=\"n\">S</span> <span class=\"bp\">∨</span> <span class=\"n\">P</span> <span class=\"bp\">∨</span> <span class=\"n\">Q</span><span class=\"o\">)</span> <span class=\"bp\">∧</span>\n<span class=\"o\">(</span><span class=\"n\">R</span> <span class=\"bp\">∨</span> <span class=\"n\">P</span> <span class=\"bp\">∨</span> <span class=\"n\">U</span><span class=\"o\">)</span> <span class=\"bp\">∧</span> <span class=\"o\">(</span><span class=\"bp\">¬</span><span class=\"n\">U</span> <span class=\"bp\">∨</span> <span class=\"n\">Q</span> <span class=\"bp\">∨</span> <span class=\"n\">R</span><span class=\"o\">)</span> <span class=\"bp\">∧</span> <span class=\"o\">(</span><span class=\"bp\">¬</span><span class=\"n\">U</span> <span class=\"bp\">∨</span> <span class=\"n\">R</span> <span class=\"bp\">∨</span> <span class=\"bp\">¬</span><span class=\"n\">Q</span><span class=\"o\">)</span> <span class=\"bp\">∧</span> <span class=\"o\">(</span><span class=\"bp\">¬</span><span class=\"n\">S</span> <span class=\"bp\">∨</span> <span class=\"bp\">¬</span><span class=\"n\">U</span> <span class=\"bp\">∨</span> <span class=\"bp\">¬</span><span class=\"n\">Q</span><span class=\"o\">)</span> <span class=\"bp\">∧</span>\n<span class=\"o\">(</span><span class=\"bp\">¬</span><span class=\"n\">U</span> <span class=\"bp\">∨</span> <span class=\"bp\">¬</span><span class=\"n\">S</span> <span class=\"bp\">∨</span> <span class=\"n\">R</span><span class=\"o\">)</span> <span class=\"bp\">∧</span> <span class=\"o\">(</span><span class=\"bp\">¬</span><span class=\"n\">S</span> <span class=\"bp\">∨</span> <span class=\"n\">P</span> <span class=\"bp\">∨</span> <span class=\"n\">U</span><span class=\"o\">)</span> <span class=\"bp\">∧</span> <span class=\"o\">(</span><span class=\"n\">P</span> <span class=\"bp\">∨</span> <span class=\"n\">Q</span> <span class=\"bp\">∨</span> <span class=\"bp\">¬</span><span class=\"n\">R</span><span class=\"o\">)</span> <span class=\"bp\">∧</span> <span class=\"o\">(</span><span class=\"bp\">¬</span><span class=\"n\">S</span> <span class=\"bp\">∨</span> <span class=\"bp\">¬</span><span class=\"n\">R</span> <span class=\"bp\">∨</span> <span class=\"n\">U</span><span class=\"o\">)</span> <span class=\"bp\">∧</span>\n<span class=\"o\">(</span><span class=\"bp\">¬</span><span class=\"n\">Q</span> <span class=\"bp\">∨</span> <span class=\"bp\">¬</span><span class=\"n\">S</span> <span class=\"bp\">∨</span> <span class=\"n\">U</span><span class=\"o\">)</span> <span class=\"bp\">∧</span> <span class=\"o\">(</span><span class=\"n\">P</span> <span class=\"bp\">∨</span> <span class=\"n\">R</span> <span class=\"bp\">∨</span> <span class=\"bp\">¬</span><span class=\"n\">Q</span><span class=\"o\">)</span> <span class=\"bp\">∧</span> <span class=\"o\">(</span><span class=\"n\">P</span> <span class=\"bp\">∨</span> <span class=\"n\">Q</span> <span class=\"bp\">∨</span> <span class=\"bp\">¬</span><span class=\"n\">S</span><span class=\"o\">)</span> <span class=\"bp\">∧</span> <span class=\"o\">(</span><span class=\"n\">U</span> <span class=\"bp\">∨</span> <span class=\"bp\">¬</span><span class=\"n\">S</span> <span class=\"bp\">∨</span> <span class=\"bp\">¬</span><span class=\"n\">P</span><span class=\"o\">)</span> <span class=\"bp\">∧</span>\n<span class=\"o\">(</span><span class=\"bp\">¬</span><span class=\"n\">U</span> <span class=\"bp\">∨</span> <span class=\"n\">R</span> <span class=\"bp\">∨</span> <span class=\"bp\">¬</span><span class=\"n\">P</span><span class=\"o\">)</span> <span class=\"bp\">∧</span> <span class=\"o\">(</span><span class=\"bp\">¬</span><span class=\"n\">U</span> <span class=\"bp\">∨</span> <span class=\"n\">P</span> <span class=\"bp\">∨</span> <span class=\"bp\">¬</span><span class=\"n\">Q</span><span class=\"o\">)</span> <span class=\"bp\">∧</span> <span class=\"o\">(</span><span class=\"bp\">¬</span><span class=\"n\">R</span> <span class=\"bp\">∨</span> <span class=\"bp\">¬</span><span class=\"n\">P</span> <span class=\"bp\">∨</span> <span class=\"n\">S</span><span class=\"o\">)</span> <span class=\"bp\">∧</span> <span class=\"o\">(</span><span class=\"n\">R</span> <span class=\"bp\">∨</span> <span class=\"n\">S</span> <span class=\"bp\">∨</span> <span class=\"bp\">¬</span><span class=\"n\">U</span><span class=\"o\">)</span> <span class=\"bp\">∧</span>\n<span class=\"o\">(</span><span class=\"n\">P</span> <span class=\"bp\">∨</span> <span class=\"bp\">¬</span><span class=\"n\">U</span> <span class=\"bp\">∨</span> <span class=\"n\">Q</span><span class=\"o\">)</span> <span class=\"bp\">∧</span> <span class=\"o\">(</span><span class=\"bp\">¬</span><span class=\"n\">S</span> <span class=\"bp\">∨</span> <span class=\"n\">R</span> <span class=\"bp\">∨</span> <span class=\"n\">P</span><span class=\"o\">)</span> <span class=\"bp\">∧</span> <span class=\"o\">(</span><span class=\"bp\">¬</span><span class=\"n\">P</span> <span class=\"bp\">∨</span> <span class=\"bp\">¬</span><span class=\"n\">Q</span> <span class=\"bp\">∨</span> <span class=\"bp\">¬</span><span class=\"n\">R</span><span class=\"o\">)</span> <span class=\"bp\">∧</span> <span class=\"o\">(</span><span class=\"bp\">¬</span><span class=\"n\">P</span> <span class=\"bp\">∨</span> <span class=\"n\">R</span> <span class=\"bp\">∨</span> <span class=\"bp\">¬</span><span class=\"n\">S</span><span class=\"o\">))</span> <span class=\"o\">:=</span>\n<span class=\"kd\">begin</span>\n  <span class=\"n\">intros</span><span class=\"o\">,</span>\n  <span class=\"n\">by_cases</span> <span class=\"n\">hP</span> <span class=\"o\">:</span> <span class=\"n\">P</span><span class=\"bp\">;</span><span class=\"n\">rw</span> <span class=\"n\">trick</span> <span class=\"n\">hP</span><span class=\"bp\">;</span> <span class=\"n\">try</span> <span class=\"o\">{</span><span class=\"n\">rw</span> <span class=\"n\">iff_false_intro</span> <span class=\"n\">hP</span><span class=\"o\">}</span><span class=\"bp\">;</span> <span class=\"n\">clear</span> <span class=\"n\">hP</span><span class=\"bp\">;</span> <span class=\"n\">simp</span><span class=\"bp\">;</span>\n  <span class=\"n\">by_cases</span> <span class=\"n\">hP</span> <span class=\"o\">:</span> <span class=\"n\">Q</span><span class=\"bp\">;</span><span class=\"n\">rw</span> <span class=\"n\">trick</span> <span class=\"n\">hP</span><span class=\"bp\">;</span> <span class=\"n\">try</span> <span class=\"o\">{</span><span class=\"n\">rw</span> <span class=\"n\">iff_false_intro</span> <span class=\"n\">hP</span><span class=\"o\">}</span><span class=\"bp\">;</span> <span class=\"n\">clear</span> <span class=\"n\">hP</span><span class=\"bp\">;</span> <span class=\"n\">simp</span><span class=\"bp\">;</span> <span class=\"c1\">-- &lt;- should be 4 goals here</span>\n  <span class=\"n\">by_cases</span> <span class=\"n\">hP</span> <span class=\"o\">:</span> <span class=\"n\">R</span><span class=\"bp\">;</span><span class=\"n\">rw</span> <span class=\"n\">trick</span> <span class=\"n\">hP</span><span class=\"bp\">;</span> <span class=\"n\">try</span> <span class=\"o\">{</span><span class=\"n\">rw</span> <span class=\"n\">iff_false_intro</span> <span class=\"n\">hP</span><span class=\"o\">}</span><span class=\"bp\">;</span> <span class=\"n\">clear</span> <span class=\"n\">hP</span><span class=\"bp\">;</span> <span class=\"n\">simp</span><span class=\"bp\">;</span>\n  <span class=\"n\">by_cases</span> <span class=\"n\">hP</span> <span class=\"o\">:</span> <span class=\"n\">S</span><span class=\"bp\">;</span><span class=\"n\">rw</span> <span class=\"n\">trick</span> <span class=\"n\">hP</span><span class=\"bp\">;</span> <span class=\"n\">try</span> <span class=\"o\">{</span><span class=\"n\">rw</span> <span class=\"n\">iff_false_intro</span> <span class=\"n\">hP</span><span class=\"o\">}</span><span class=\"bp\">;</span> <span class=\"n\">clear</span> <span class=\"n\">hP</span><span class=\"bp\">;</span> <span class=\"n\">simp</span><span class=\"bp\">;</span>\n  <span class=\"n\">by_cases</span> <span class=\"n\">hP</span> <span class=\"o\">:</span> <span class=\"n\">U</span><span class=\"bp\">;</span><span class=\"n\">rw</span> <span class=\"n\">trick</span> <span class=\"n\">hP</span><span class=\"bp\">;</span> <span class=\"n\">try</span> <span class=\"o\">{</span><span class=\"n\">rw</span> <span class=\"n\">iff_false_intro</span> <span class=\"n\">hP</span><span class=\"o\">}</span><span class=\"bp\">;</span> <span class=\"n\">clear</span> <span class=\"n\">hP</span><span class=\"bp\">;</span> <span class=\"n\">simp</span><span class=\"o\">,</span>\n<span class=\"kd\">end</span>\n</code></pre></div>\n\n<p>I wanted to inspect the goals part way through the proof, but I was surprised to find that changing the semicolon at the end of the second cases line of the proof to a comma still only let me see one goal -- I'm sure I've used this trick in the past to temporarily view multiple goals just to check things aren't going arwy in one of these crazy semicolony proofs.</p>",
        "id": 212936087,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1602366424
    },
    {
        "content": "<p>PS one can check that there are four goals after the highlighted semicolon, because you can put <code>sorry</code> four times even though the infoview says there's only one goal.</p>",
        "id": 212936233,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1602366658
    },
    {
        "content": "<p>I think this is discussed at the re-opened <a href=\"https://github.com/leanprover-community/lean/issues/201\">lean#201</a></p>",
        "id": 212937156,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1602368124
    }
]