[
    {
        "content": "<h1>Status of the mathlib4 port</h1>\n<p>The porting process has started!</p>\n<p>There's been a lot of work going on, and various public and private conversations --- time for an update.</p>\n<p>The plan is roughly as follows:</p>\n<ul>\n<li>We're already porting files from mathlib3 to mathlib4.</li>\n<li>We want lots more people to help with this, and to learn how to review porting PRs.</li>\n<li>Porting tactics is moving along; many of the major tactics are now ported, or in PR form, but there is a long tail of less frequently used tactics that remains.</li>\n<li>The future is Lean 4. That is, from the maintainers point of view, on any question where the needs of mathlib3 and mathlib4 are in conflict, mathlib4 wins.</li>\n<li>When files have been ported, we are adding a \"This file in synchronized with mathlib4\" label.</li>\n<li>If you want to make a PR to mathlib3 that touches a file with this label, you're expected to making a matching PR to mathlib4, to keep the files in synch.</li>\n<li>We expect and understand that as more files are synchronized, and as more peoples' efforts turn from mathlib3 to mathlib4, it is going to become harder to make successful PRs to mathlib3, and slower to receive a review.</li>\n<li>As yet, we don't really now the timescale over which this will happen: this is not an announcement that this is imminent, but a warning that it is coming!</li>\n<li>Eventually we <em>may</em> have \"flag day\", after which we stop accepting PRs to mathlib3 entirely.</li>\n</ul>\n<h2>Resources</h2>\n<ul>\n<li>If you are not subscribed to the mathlib4 stream on zulip, I'd encourage you to do so!</li>\n<li>There is a <a href=\"https://github.com/leanprover-community/mathlib4/wiki\">wiki page</a> giving some advice on porting. Edits and contributions to this are highly encouraged!</li>\n<li>There is a <a href=\"https://www.youtube.com/watch?v=-Nu0mSeABK0\">video tutorial</a> showing a simple example of porting a file.</li>\n<li>The mathlib4 <a href=\"https://github.com/leanprover-community/mathlib4/pulls\">pull-request list</a> has lots of PRs which you can help out on. Feel free to jump in and contribute changes to PRs, or to make comments, or to review.</li>\n<li>In <code>mathlib</code>, you can run <code>scripts/port_status.py</code> to obtain a list of files which it is currently possible to port.</li>\n<li>In <code>mathlib</code>, you can <code>cd src &amp;&amp; leanproject import-graph --to data.rat.order --reduce --exclude-tactics --port-status out.pdf</code>, and get a nice colour coded PDF showing the import hierarchy of your favourite file, to help plan porting and ascertain progress.</li>\n<li>The <a href=\"https://github.com/leanprover-community/mathlib/wiki/mathlib4-port-status\">port status</a> wiki page tracks the current state of porting.</li>\n<li>There is a <a href=\"https://github.com/leanprover-community/mathport/tree/master/Oneshot\">one-shot mode</a> for mathport which lets you quickly try out a change, and see what mathport will do with it.</li>\n</ul>\n<h2>Timeline</h2>\n<p>Right now it's hard to estimate. We're constrained by being at the very beginning of the import hierarchy, so the frontier isn't very wide yet, so it's hard to evaluate what the workload-to-contributors ratio is!</p>\n<p>As an example, here's today's output from <code>scripts/port_status.py</code>:</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"bp\">#</span> <span class=\"n\">The</span> <span class=\"n\">following</span> <span class=\"n\">files</span> <span class=\"k\">have</span> <span class=\"n\">all</span> <span class=\"n\">dependencies</span> <span class=\"n\">ported</span> <span class=\"n\">already</span><span class=\"o\">,</span> <span class=\"n\">and</span> <span class=\"n\">should</span> <span class=\"n\">be</span> <span class=\"n\">ready</span> <span class=\"n\">to</span> <span class=\"n\">port</span><span class=\"o\">:</span>\n<span class=\"bp\">#</span> <span class=\"n\">Earlier</span> <span class=\"n\">items</span> <span class=\"k\">in</span> <span class=\"n\">the</span> <span class=\"n\">list</span> <span class=\"n\">are</span> <span class=\"n\">required</span> <span class=\"k\">in</span> <span class=\"n\">more</span> <span class=\"n\">places</span> <span class=\"k\">in</span> <span class=\"n\">mathlib.</span>\n<span class=\"n\">logic.equiv.defs</span>    <span class=\"c1\">-- PRd as mathlib4#550</span>\n<span class=\"n\">order.basic</span>    <span class=\"c1\">-- PRd as mathlib4#556</span>\n<span class=\"n\">logic.function.iterate</span>    <span class=\"c1\">-- WIP hrmacbeth</span>\n<span class=\"n\">algebra.ne_zero</span>    <span class=\"c1\">-- PRd as #557</span>\n<span class=\"n\">algebra.group.units</span>    <span class=\"c1\">-- PRd as mathlib4#549</span>\n<span class=\"n\">data.pi.algebra</span>    <span class=\"c1\">-- WIP PR mathlib4#564</span>\n<span class=\"n\">logic.relation</span>    <span class=\"c1\">-- PRd as mathlib4#565</span>\n<span class=\"n\">control.functor</span>\n<span class=\"n\">lean_core.data.vector</span>\n<span class=\"n\">data.char</span>\n<span class=\"n\">data.rat.init</span>\n<span class=\"n\">category_theory.elementwise</span>\n<span class=\"n\">data.stream.defs</span>\n<span class=\"n\">data.rbtree.init</span>\n<span class=\"n\">data.num.basic</span>\n<span class=\"n\">data.lazy_list</span>\n<span class=\"n\">data.nat.bits</span>\n<span class=\"n\">data.typevec</span>\n<span class=\"n\">data.rbtree.default_lt</span>\n<span class=\"n\">lean_core.data.dlist</span>\n<span class=\"n\">control.ulift</span>\n<span class=\"n\">lean_core.data.buffer</span>\n<span class=\"n\">algebra.pempty_instances</span>\n<span class=\"n\">lean_core.data.buffer.parser</span>\n<span class=\"n\">group_theory.eckmann_hilton</span>\n<span class=\"n\">data.two_pointing</span>\n<span class=\"n\">data.vector3</span>\n<span class=\"n\">data.json</span>\n<span class=\"n\">data.mllist</span>\n<span class=\"n\">data.option.n_ary</span>\n<span class=\"n\">data.sigma.default</span>\n<span class=\"n\">control.basic</span>\n<span class=\"n\">algebra.hierarchy_design</span>\n<span class=\"n\">algebra.group.commutator</span>\n</code></pre></div>\n<p>This list has been sorted according to the number of downstream dependencies; so it's important to work on the top of the list first. In fact, people have been doing this, as evidenced by the comments pointing to active PRs.</p>\n<p>To look a bit further ahead, we should use <code>leanproject import-graph</code>. Here's the output for <code>algebra.order.field.defs</code>.</p>\n<p><a href=\"/user_uploads/3121/LgZCDkgL1Ooq9b2eDcWCABB9/algebra.order.field.defs.png\">algebra.order.field.defs.png</a></p>\n<ul>\n<li>Green indicates a file that's been done.</li>\n<li>Darker blue is a file that has an open PR (or at least someone has marked it as WIP in the port-status wiki page).</li>\n<li>Orange would indicate that someone has written some other comment in the port-status wiki file, possibly an explanation of why porting this file is currently blocked.</li>\n<li>Light blue is a file that someone should start porting!</li>\n</ul>\n<p>I think it's very early days for extrapolating how long the whole porting process will take. Here's a heuristic that we can argue about, and see how true it ends up. Say each file takes a separate PR (pessimistic: multiple files can be done at once, and sequential PRs can be prepared and reviewed concurrently), and that each PR takes three days to process (wildly optimistic?). If we have maximum parallelism, then the time to reach any particular target is just the depth in the import graph --- the distance from the earliest not-green node to the target node. This heuristic would say:</p>\n<ul>\n<li><a href=\"/user_uploads/3121/ooYPRppRvMRmqcUaaTAAMa3u/algebra.order.field.defs.pdf\">algebra.order.field.defs.pdf</a> : depth 12, ~1 month</li>\n<li><a href=\"/user_uploads/3121/HZiHKbozCcUyRF8r4A-fik7U/data.rat.order.pdf\">data.rat.order.pdf</a> : depth 19, ~2 months (up to 9 files on a level)</li>\n<li><a href=\"/user_uploads/3121/jDNXwEzMU_emT_hD4OXs5-vF/category_theory.limits.yoneda.pdf\">category_theory.limits.yoneda.pdf</a> : depth 29, ~3 months (this development is quite \"linear\"; there's never more than 4 files at a level)</li>\n<li><a href=\"/user_uploads/3121/OOa1Xpp3hyDj2T0_u6VgIcIg/data.fintype.basic.pdf\">data.fintype.basic.pdf</a> : depth 38, ~4 months</li>\n<li><a href=\"/user_uploads/3121/f4Zcv3ljmNbbpHS89th0er2A/topology.instances.real.pdf\">topology.instances.real.pdf</a> : depth 75, ~8 months</li>\n</ul>\n<p>I've posted this in the \"general\" stream, but I'd encourage everyone to come across to the mathlib4 stream for further discussion, just to get everyone used to hanging out there. :-)</p>",
        "id": 309124681,
        "sender_full_name": "Scott Morrison",
        "timestamp": 1668138376
    },
    {
        "content": "<p>Continuing the timeline example:</p>\n<div class=\"codehilite\" data-code-language=\"Python\"><pre><span></span><code><span class=\"o\">&gt;&gt;&gt;</span> <span class=\"n\">nx</span><span class=\"o\">.</span><span class=\"n\">dag_longest_path</span><span class=\"p\">(</span><span class=\"n\">G</span><span class=\"p\">)</span>\n<span class=\"p\">[</span><span class=\"s1\">'data.rbtree.init'</span><span class=\"p\">,</span> <span class=\"s1\">'data.rbmap.basic'</span><span class=\"p\">,</span> <span class=\"s1\">'data.list.defs'</span><span class=\"p\">,</span> <span class=\"s1\">'data.string.defs'</span><span class=\"p\">,</span> <span class=\"s1\">'meta.expr'</span><span class=\"p\">,</span> <span class=\"s1\">'tactic.binder_matching'</span><span class=\"p\">,</span> <span class=\"s1\">'tactic.core'</span><span class=\"p\">,</span> <span class=\"s1\">'tactic.algebra'</span><span class=\"p\">,</span> <span class=\"s1\">'tactic.to_additive'</span><span class=\"p\">,</span> <span class=\"s1\">'tactic.lint.default'</span><span class=\"p\">,</span> <span class=\"s1\">'tactic.interactive'</span><span class=\"p\">,</span> <span class=\"s1\">'tactic.hint'</span><span class=\"p\">,</span> <span class=\"s1\">'tactic.norm_cast'</span><span class=\"p\">,</span> <span class=\"s1\">'tactic.tidy'</span><span class=\"p\">,</span> <span class=\"s1\">'tactic.obviously'</span><span class=\"p\">,</span> <span class=\"s1\">'tactic.basic'</span><span class=\"p\">,</span> <span class=\"s1\">'logic.unique'</span><span class=\"p\">,</span> <span class=\"s1\">'logic.equiv.defs'</span><span class=\"p\">,</span> <span class=\"s1\">'order.synonym'</span><span class=\"p\">,</span> <span class=\"s1\">'order.compare'</span><span class=\"p\">,</span> <span class=\"s1\">'order.monotone'</span><span class=\"p\">,</span> <span class=\"s1\">'order.lattice'</span><span class=\"p\">,</span> <span class=\"s1\">'order.bounded_order'</span><span class=\"p\">,</span> <span class=\"s1\">'order.heyting.basic'</span><span class=\"p\">,</span> <span class=\"s1\">'order.boolean_algebra'</span><span class=\"p\">,</span> <span class=\"s1\">'order.symm_diff'</span><span class=\"p\">,</span> <span class=\"s1\">'data.set.basic'</span><span class=\"p\">,</span> <span class=\"s1\">'data.set.prod'</span><span class=\"p\">,</span> <span class=\"s1\">'data.set.function'</span><span class=\"p\">,</span> <span class=\"s1\">'logic.equiv.set'</span><span class=\"p\">,</span> <span class=\"s1\">'order.rel_iso'</span><span class=\"p\">,</span> <span class=\"s1\">'order.hom.basic'</span><span class=\"p\">,</span> <span class=\"s1\">'algebra.order.group.defs'</span><span class=\"p\">,</span> <span class=\"s1\">'algebra.order.group.type_tags'</span><span class=\"p\">,</span> <span class=\"s1\">'algebra.order.with_zero'</span><span class=\"p\">,</span> <span class=\"s1\">'data.nat.order'</span><span class=\"p\">,</span> <span class=\"s1\">'algebra.group_power.ring'</span><span class=\"p\">,</span> <span class=\"s1\">'algebra.group_power.order'</span><span class=\"p\">,</span> <span class=\"s1\">'data.nat.pow'</span><span class=\"p\">,</span> <span class=\"s1\">'algebra.group_power.lemmas'</span><span class=\"p\">,</span>\n<span class=\"s1\">'algebra.group_power.default'</span><span class=\"p\">,</span> <span class=\"s1\">'data.list.big_operators'</span><span class=\"p\">,</span> <span class=\"s1\">'data.list.count'</span><span class=\"p\">,</span> <span class=\"s1\">'data.list.pairwise'</span><span class=\"p\">,</span> <span class=\"s1\">'data.list.chain'</span><span class=\"p\">,</span> <span class=\"s1\">'data.list.range'</span><span class=\"p\">,</span> <span class=\"s1\">'data.list.perm'</span><span class=\"p\">,</span> <span class=\"s1\">'data.multiset.basic'</span><span class=\"p\">,</span> <span class=\"s1\">'algebra.big_operators.multiset'</span><span class=\"p\">,</span> <span class=\"s1\">'data.multiset.bind'</span><span class=\"p\">,</span> <span class=\"s1\">'data.multiset.powerset'</span><span class=\"p\">,</span> <span class=\"s1\">'data.multiset.nodup'</span><span class=\"p\">,</span> <span class=\"s1\">'data.multiset.dedup'</span><span class=\"p\">,</span> <span class=\"s1\">'data.multiset.finset_ops'</span><span class=\"p\">,</span> <span class=\"s1\">'data.finset.basic'</span><span class=\"p\">,</span> <span class=\"s1\">'data.finset.card'</span><span class=\"p\">,</span> <span class=\"s1\">'data.finset.option'</span><span class=\"p\">,</span> <span class=\"s1\">'data.finset.lattice'</span><span class=\"p\">,</span> <span class=\"s1\">'data.finset.powerset'</span><span class=\"p\">,</span> <span class=\"s1\">'data.fintype.basic'</span><span class=\"p\">,</span> <span class=\"s1\">'algebra.char_zero'</span><span class=\"p\">,</span> <span class=\"s1\">'data.int.char_zero'</span><span class=\"p\">,</span> <span class=\"s1\">'data.rat.cast'</span><span class=\"p\">,</span> <span class=\"s1\">'tactic.norm_num'</span><span class=\"p\">,</span> <span class=\"s1\">'tactic.abel'</span><span class=\"p\">,</span> <span class=\"s1\">'algebra.module.basic'</span><span class=\"p\">,</span> <span class=\"s1\">'data.set.pointwise.basic'</span><span class=\"p\">,</span> <span class=\"s1\">'group_theory.submonoid.pointwise'</span><span class=\"p\">,</span> <span class=\"s1\">'group_theory.subgroup.basic'</span><span class=\"p\">,</span> <span class=\"s1\">'ring_theory.subring.basic'</span><span class=\"p\">,</span> <span class=\"s1\">'algebra.group_ring_action'</span><span class=\"p\">,</span> <span class=\"s1\">'algebra.ring.aut'</span><span class=\"p\">,</span> <span class=\"s1\">'algebra.star.basic'</span><span class=\"p\">,</span> <span class=\"s1\">'algebra.module.linear_map'</span><span class=\"p\">,</span> <span class=\"s1\">'algebra.module.equiv'</span><span class=\"p\">,</span> <span class=\"s1\">'algebra.module.submodule.basic'</span><span class=\"p\">,</span> <span class=\"s1\">'algebra.module.submodule.lattice'</span><span class=\"p\">,</span> <span class=\"s1\">'linear_algebra.basic'</span><span class=\"p\">,</span> <span class=\"s1\">'linear_algebra.span'</span><span class=\"p\">,</span> <span class=\"s1\">'algebra.algebra.basic'</span><span class=\"p\">,</span> <span class=\"s1\">'linear_algebra.prod'</span><span class=\"p\">,</span> <span class=\"s1\">'linear_algebra.linear_independent'</span><span class=\"p\">,</span> <span class=\"s1\">'linear_algebra.basis'</span><span class=\"p\">,</span> <span class=\"s1\">'linear_algebra.bilinear_map'</span><span class=\"p\">,</span> <span class=\"s1\">'algebra.module.submodule.bilinear'</span><span class=\"p\">,</span> <span class=\"s1\">'linear_algebra.tensor_product'</span><span class=\"p\">,</span> <span class=\"s1\">'algebra.algebra.bilinear'</span><span class=\"p\">,</span> <span class=\"s1\">'algebra.algebra.operations'</span><span class=\"p\">,</span> <span class=\"s1\">'ring_theory.ideal.operations'</span><span class=\"p\">,</span> <span class=\"s1\">'algebra.algebra.subalgebra.basic'</span><span class=\"p\">,</span> <span class=\"s1\">'algebra.algebra.tower'</span><span class=\"p\">,</span> <span class=\"s1\">'ring_theory.adjoin.basic'</span><span class=\"p\">,</span> <span class=\"s1\">'data.mv_polynomial.basic'</span><span class=\"p\">,</span> <span class=\"s1\">'data.mv_polynomial.rename'</span><span class=\"p\">,</span> <span class=\"s1\">'data.mv_polynomial.monad'</span><span class=\"p\">,</span> <span class=\"s1\">'data.mv_polynomial.variables'</span><span class=\"p\">,</span> <span class=\"s1\">'data.mv_polynomial.equiv'</span><span class=\"p\">,</span> <span class=\"s1\">'ring_theory.polynomial.basic'</span><span class=\"p\">,</span> <span class=\"s1\">'ring_theory.adjoin.fg'</span><span class=\"p\">,</span> <span class=\"s1\">'ring_theory.algebra_tower'</span><span class=\"p\">,</span> <span class=\"s1\">'ring_theory.finiteness'</span><span class=\"p\">,</span> <span class=\"s1\">'field_theory.finiteness'</span><span class=\"p\">,</span> <span class=\"s1\">'linear_algebra.finite_dimensional'</span><span class=\"p\">,</span> <span class=\"s1\">'linear_algebra.matrix.finite_dimensional'</span><span class=\"p\">,</span> <span class=\"s1\">'linear_algebra.matrix.to_lin'</span><span class=\"p\">,</span> <span class=\"s1\">'linear_algebra.matrix.basis'</span><span class=\"p\">,</span> <span class=\"s1\">'linear_algebra.determinant'</span><span class=\"p\">,</span> <span class=\"s1\">'topology.algebra.module.basic'</span><span class=\"p\">,</span> <span class=\"s1\">'analysis.normed.field.basic'</span><span class=\"p\">,</span> <span class=\"s1\">'analysis.normed_space.basic'</span><span class=\"p\">,</span> <span class=\"s1\">'analysis.normed.order.basic'</span><span class=\"p\">,</span> <span class=\"s1\">'analysis.locally_convex.basic'</span><span class=\"p\">,</span> <span class=\"s1\">'analysis.locally_convex.balanced_core_hull'</span><span class=\"p\">,</span> <span class=\"s1\">'topology.algebra.module.finite_dimension'</span><span class=\"p\">,</span> <span class=\"s1\">'analysis.convex.topology'</span><span class=\"p\">,</span> <span class=\"s1\">'topology.algebra.module.locally_convex'</span><span class=\"p\">,</span> <span class=\"s1\">'analysis.seminorm'</span><span class=\"p\">,</span> <span class=\"s1\">'analysis.locally_convex.bounded'</span><span class=\"p\">,</span> <span class=\"s1\">'topology.algebra.uniform_convergence'</span><span class=\"p\">,</span> <span class=\"s1\">'topology.algebra.module.strong_topology'</span><span class=\"p\">,</span> <span class=\"s1\">'analysis.normed_space.operator_norm'</span><span class=\"p\">,</span> <span class=\"s1\">'analysis.normed_space.multilinear'</span><span class=\"p\">,</span> <span class=\"s1\">'analysis.normed_space.bounded_linear_maps'</span><span class=\"p\">,</span> <span class=\"s1\">'analysis.calculus.fderiv'</span><span class=\"p\">,</span> <span class=\"s1\">'analysis.calculus.deriv'</span><span class=\"p\">,</span> <span class=\"s1\">'analysis.calculus.local_extr'</span><span class=\"p\">,</span> <span class=\"s1\">'analysis.calculus.mean_value'</span><span class=\"p\">,</span> <span class=\"s1\">'analysis.calculus.cont_diff'</span><span class=\"p\">,</span> <span class=\"s1\">'analysis.complex.real_deriv'</span><span class=\"p\">,</span> <span class=\"s1\">'analysis.special_functions.exp_deriv'</span><span class=\"p\">,</span> <span class=\"s1\">'analysis.special_functions.log.deriv'</span><span class=\"p\">,</span> <span class=\"s1\">'analysis.special_functions.pow_deriv'</span><span class=\"p\">,</span> <span class=\"s1\">'analysis.convex.specific_functions'</span><span class=\"p\">,</span> <span class=\"s1\">'analysis.special_functions.trigonometric.complex'</span><span class=\"p\">,</span> <span class=\"s1\">'analysis.special_functions.trigonometric.arctan'</span><span class=\"p\">,</span> <span class=\"s1\">'measure_theory.function.special_functions'</span><span class=\"p\">,</span> <span class=\"s1\">'measure_theory.integral.mean_inequalities'</span><span class=\"p\">,</span> <span class=\"s1\">'measure_theory.function.simple_func_dense'</span><span class=\"p\">,</span> <span class=\"s1\">'measure_theory.function.strongly_measurable'</span><span class=\"p\">,</span> <span class=\"s1\">'measure_theory.function.ae_eq_fun'</span><span class=\"p\">,</span> <span class=\"s1\">'measure_theory.function.lp_space'</span><span class=\"p\">,</span> <span class=\"s1\">'measure_theory.function.lp_order'</span><span class=\"p\">,</span> <span class=\"s1\">'measure_theory.function.l1_space'</span><span class=\"p\">,</span> <span class=\"s1\">'measure_theory.function.simple_func_dense_lp'</span><span class=\"p\">,</span> <span class=\"s1\">'measure_theory.integral.set_to_l1'</span><span class=\"p\">,</span> <span class=\"s1\">'measure_theory.integral.bochner'</span><span class=\"p\">,</span> <span class=\"s1\">'measure_theory.integral.set_integral'</span><span class=\"p\">,</span> <span class=\"s1\">'measure_theory.function.ae_eq_of_integral'</span><span class=\"p\">,</span> <span class=\"s1\">'measure_theory.measure.with_density_vector_measure'</span><span class=\"p\">,</span> <span class=\"s1\">'measure_theory.decomposition.lebesgue'</span><span class=\"p\">,</span> <span class=\"s1\">'measure_theory.decomposition.radon_nikodym'</span><span class=\"p\">,</span> <span class=\"s1\">'measure_theory.function.conditional_expectation.basic'</span><span class=\"p\">,</span> <span class=\"s1\">'measure_theory.function.conditional_expectation.indicator'</span><span class=\"p\">,</span> <span class=\"s1\">'measure_theory.function.conditional_expectation.real'</span><span class=\"p\">,</span> <span class=\"s1\">'probability.process.filtration'</span><span class=\"p\">,</span> <span class=\"s1\">'probability.process.adapted'</span><span class=\"p\">,</span> <span class=\"s1\">'probability.process.stopping'</span><span class=\"p\">,</span> <span class=\"s1\">'probability.process.hitting_time'</span><span class=\"p\">,</span> <span class=\"s1\">'probability.martingale.basic'</span><span class=\"p\">,</span> <span class=\"s1\">'probability.martingale.upcrossing'</span><span class=\"p\">,</span> <span class=\"s1\">'probability.martingale.convergence'</span><span class=\"p\">,</span> <span class=\"s1\">'probability.martingale.borel_cantelli'</span><span class=\"p\">,</span> <span class=\"s1\">'probability.borel_cantelli'</span><span class=\"p\">]</span>\n</code></pre></div>\n<p>This path has length 162. So that might also give a bit of a pointer in which direction to look for optimizing the porting PR process.</p>",
        "id": 309145858,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1668154256
    },
    {
        "content": "<p>There are <em>so many</em> dubious imports in that chain. :-)</p>",
        "id": 309163182,
        "sender_full_name": "Scott Morrison",
        "timestamp": 1668161863
    },
    {
        "content": "<p>Actually, I bet it has already dropped some after <a href=\"https://github.com/leanprover-community/mathlib/pull/17435\">#17435</a> merged.</p>",
        "id": 309163678,
        "sender_full_name": "Scott Morrison",
        "timestamp": 1668162064
    },
    {
        "content": "<p>I can take a look at reducing the dependencies of and on <code>linear_algebra.finite_dimensional</code>, that's a pretty fundamental file that is deep in the tree</p>",
        "id": 309164824,
        "sender_full_name": "Anne Baanen",
        "timestamp": 1668162520
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"238446\">@Anne Baanen</span> concerning <code>finite_dimensional</code> you can have a look at the discussion in <a href=\"https://github.com/leanprover-community/mathlib/pull/17401\">#17401</a>. It would be nice to be able to import <code>linear_algebra.free_module.finite.basic</code>in <code>linear_algebra.finite_dimensional</code>, but this is currently impossible.</p>",
        "id": 309179618,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1668168642
    },
    {
        "content": "<p>It's a bit of a tangled mess at the moment. My approach is going to be:</p>\n<ul>\n<li>split off the definition of <code>finrank</code> from <code>finite_dimensional</code> (needed for <code>linear_algebra.free_module.finite.rank</code>)</li>\n<li>move the last part of <code>finsupp_vector_space</code> to <code>finite_dimensional</code> (doesn't need any <code>finsupp</code> specific results)</li>\n<li>move <code>free</code> and <code>finite</code> instances for <code>linear_map</code> to a new file and/or rework <code>matrix.to_lin</code> to use <code>module.finite</code> instead of <code>finite_dimensional</code></li>\n</ul>",
        "id": 309189139,
        "sender_full_name": "Anne Baanen",
        "timestamp": 1668171921
    },
    {
        "content": "<p>Here's another fun game you can do with that list: mark all the modules containing theorems that appear in the <em>theorem</em> dependency graph of the borel-cantelli lemma. The unmarked modules are ones which are imported but for which <em>no</em> theorems in the file contribute to the proof, which makes them highly likely to be a spurious import which deserves a file split somewhere</p>",
        "id": 309190162,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1668172353
    },
    {
        "content": "<p>Why does <code>topology.algebra.module.basic</code> import <code>linear_algebra.determinant</code>?</p>",
        "id": 309203396,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1668177127
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib/commit/5b36c868a1947a1ad17245be6fd280c9b91b1f6c#diff-4268c2431deac11bcaa91df861afa3b1dc02646ea27b354938035233a272efaa\">https://github.com/leanprover-community/mathlib/commit/5b36c868a1947a1ad17245be6fd280c9b91b1f6c#diff-4268c2431deac11bcaa91df861afa3b1dc02646ea27b354938035233a272efaa</a></p>",
        "id": 309204309,
        "sender_full_name": "Moritz Doll",
        "timestamp": 1668177429
    },
    {
        "content": "<p>Shall I move that to <code>topology.algebra.module.determinant</code> then?</p>",
        "id": 309208321,
        "sender_full_name": "Anne Baanen",
        "timestamp": 1668178770
    },
    {
        "content": "<p>(I have very little idea how much counts as \"basic\" for this part of the library)</p>",
        "id": 309208400,
        "sender_full_name": "Anne Baanen",
        "timestamp": 1668178796
    },
    {
        "content": "<p>I think I added the <code>linear_algebra.determinant</code> import (to be able to say that the determinant is a continuous function, or something like that), and at the time I decided that determinant was more basic than continuous linear maps, as most of linear algebra is already imported in this file (as well as big operators, and so on).</p>",
        "id": 309211617,
        "sender_full_name": "Sebastien Gouezel",
        "timestamp": 1668179812
    },
    {
        "content": "<p>(deleted)</p>",
        "id": 309213813,
        "sender_full_name": "Anatole Dedecker",
        "timestamp": 1668180528
    },
    {
        "content": "<p>Where is the \"This file in synchronized with mathlib4\" label and what does it look like?</p>",
        "id": 309214704,
        "sender_full_name": "Martin Dvořák",
        "timestamp": 1668180836
    },
    {
        "content": "<p>below the title. see <a href=\"https://leanprover-community.github.io/mathlib_docs/logic/lemmas.html\">https://leanprover-community.github.io/mathlib_docs/logic/lemmas.html</a></p>",
        "id": 309215103,
        "sender_full_name": "Moritz Doll",
        "timestamp": 1668180956
    },
    {
        "content": "<p>11 messages were moved here from <a class=\"stream-topic\" data-stream-id=\"113488\" href=\"/#narrow/stream/113488-general/topic/mathlib4.20porting.20status\">#general &gt; mathlib4 porting status</a> by <span class=\"user-mention silent\" data-user-id=\"238446\">Anne Baanen</span>.</p>",
        "id": 309221187,
        "sender_full_name": "Notification Bot",
        "timestamp": 1668182879
    },
    {
        "content": "<p>Is it always a docstring right under imports?</p>",
        "id": 309234351,
        "sender_full_name": "Martin Dvořák",
        "timestamp": 1668187869
    }
]