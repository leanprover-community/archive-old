[
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"122318\">@Tobias Grosser</span> I have an account now. How do I use it?</p>",
        "id": 135489637,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1539110606
    },
    {
        "content": "<blockquote>\n<p><span class=\"user-mention\" data-user-id=\"122318\">@Tobias Grosser</span> I have an account now. How do I use it?</p>\n</blockquote>\n<p>We need a Would-you-please-move-this-to-another-thread-Thank-you-emoji</p>",
        "id": 135490060,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1539110938
    },
    {
        "content": "<p>Looks like the instructions are at <a href=\"https://cfarm.tetaneutral.net/machines/list/\" target=\"_blank\" title=\"https://cfarm.tetaneutral.net/machines/list/\">https://cfarm.tetaneutral.net/machines/list/</a>, just ssh into one of the machines</p>",
        "id": 135491195,
        "sender_full_name": "Reid Barton",
        "timestamp": 1539111882
    },
    {
        "content": "<p>it requires a password and I don't know where to get the password from</p>",
        "id": 135491224,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1539111931
    },
    {
        "content": "<p>Oh, uh... hmm. I would assume you're supposed to use ssh certificates but I also don't see how to set that up</p>",
        "id": 135491301,
        "sender_full_name": "Reid Barton",
        "timestamp": 1539111981
    },
    {
        "content": "<p>I just requested an account a minute or two ago, so I don't know.<br>\nI see there is a Login link in the top right of the web page though</p>",
        "id": 135491328,
        "sender_full_name": "Reid Barton",
        "timestamp": 1539112022
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"112680\">@Johan Commelin</span>, indeed. Sorry for this distraction.</p>",
        "id": 135497171,
        "sender_full_name": "Tobias Grosser",
        "timestamp": 1539117438
    },
    {
        "content": "<p>I use my ssh key to login. Not sure how this is handled today, but either you should have had a way to specify a password when registering or an ssh key, I assume.</p>",
        "id": 135497287,
        "sender_full_name": "Tobias Grosser",
        "timestamp": 1539117549
    },
    {
        "content": "<p>The website states: Once your account is created, you will be able to upload SSH keys and gain SSH access to all machines of the platform.</p>",
        "id": 135497370,
        "sender_full_name": "Tobias Grosser",
        "timestamp": 1539117623
    },
    {
        "content": "<p>So seems you need to wait until your account is confirmed.</p>",
        "id": 135497395,
        "sender_full_name": "Tobias Grosser",
        "timestamp": 1539117658
    },
    {
        "content": "<p>I have an account now and I uploaded an SSH public key using the web interface but it takes some time for the key to be propagated to the machines. Kenny are you in the same situation?</p>",
        "id": 135503836,
        "sender_full_name": "Reid Barton",
        "timestamp": 1539124528
    },
    {
        "content": "<p>I have no idea what SSH is</p>",
        "id": 135504194,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1539124860
    },
    {
        "content": "<p>what do you mean by upload an SSH public key</p>",
        "id": 135504205,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1539124872
    },
    {
        "content": "<p>You'll want to do something like this <a href=\"https://help.github.com/articles/generating-a-new-ssh-key-and-adding-it-to-the-ssh-agent/#platform-windows\" target=\"_blank\" title=\"https://help.github.com/articles/generating-a-new-ssh-key-and-adding-it-to-the-ssh-agent/#platform-windows\">https://help.github.com/articles/generating-a-new-ssh-key-and-adding-it-to-the-ssh-agent/#platform-windows</a></p>",
        "id": 135504482,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1539125196
    },
    {
        "content": "<p>Yes, then you can use the cfarm web interface to add the ssh key to your account</p>",
        "id": 135505466,
        "sender_full_name": "Reid Barton",
        "timestamp": 1539126292
    },
    {
        "content": "<blockquote>\n<p><span class=\"user-mention\" data-user-id=\"112680\">@Johan Commelin</span>, indeed. Sorry for this distraction.</p>\n</blockquote>\n<p>No worries (-;</p>",
        "id": 135511481,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1539134448
    },
    {
        "content": "<p>So what do I do when they ask me for the password?</p>",
        "id": 135566947,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1539204251
    },
    {
        "content": "<p>Upload an ssh key, so it doesn't ask you for a password?</p>",
        "id": 135571403,
        "sender_full_name": "Scott Morrison",
        "timestamp": 1539209358
    },
    {
        "content": "<p>it's still asking me for a password</p>",
        "id": 135571587,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1539209627
    },
    {
        "content": "<p>and 1.5 hour has already passed</p>",
        "id": 135571589,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1539209631
    },
    {
        "content": "<p>I had to wait at least several hours (haven't tried to log in today)</p>",
        "id": 135571947,
        "sender_full_name": "Reid Barton",
        "timestamp": 1539210079
    },
    {
        "content": "<p>I can now log in. Time to see if I can build lean on a POWER8 system</p>",
        "id": 135581252,
        "sender_full_name": "Reid Barton",
        "timestamp": 1539224183
    },
    {
        "content": "<p>ok, got this working now... 2406 is the CPU% column</p>\n<div class=\"codehilite\"><pre><span></span> 31366 rwbarton  20   0 10.851g 3.304g  15872 S  2406  1.3  50:19.98 lean\n</pre></div>",
        "id": 135584158,
        "sender_full_name": "Reid Barton",
        "timestamp": 1539229743
    },
    {
        "content": "<p>The big sparc machine had unsatisfactory results--the release version of lean crashed, and the debug version mostly doesn't crash, but building mathlib did trigger some assertion and is super slow.</p>\n<div class=\"codehilite\"><pre><span></span>LEAN ASSERTION VIOLATION\nFile: /home/rwbarton/lean/lean/src/library/type_context.cpp\nLine: 1230\nTask: /home/rwbarton/lean/mathlib2/computability/primrec.lean: primcodable.prod\nidx &lt; m_tmp_data-&gt;m_uassignment.size()\n</pre></div>",
        "id": 135584219,
        "sender_full_name": "Reid Barton",
        "timestamp": 1539229856
    },
    {
        "content": "<p>mathlib on the POWER8 machine:</p>\n<div class=\"codehilite\"><pre><span></span>&gt; lean --make .\n28590.38user 105.69system 18:55.94elapsed 2526%CPU (0avgtext+0avgdata 10297280maxresident)k\n</pre></div>\n\n\n<p>Pretty parallel but not so good single-threaded performance</p>",
        "id": 135584707,
        "sender_full_name": "Reid Barton",
        "timestamp": 1539230838
    },
    {
        "content": "<p>Maybe tomorrow I'll try the xeons</p>",
        "id": 135584713,
        "sender_full_name": "Reid Barton",
        "timestamp": 1539230862
    },
    {
        "content": "<p>Aha, this machine is actually 20 cores with 8-way SMT (IBM equivalent of hyperthreading)</p>",
        "id": 135585081,
        "sender_full_name": "Reid Barton",
        "timestamp": 1539231557
    },
    {
        "content": "<p>I wonder if that means a well-chosen cpu set would be faster</p>",
        "id": 135585133,
        "sender_full_name": "Reid Barton",
        "timestamp": 1539231641
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"110032\">@Reid Barton</span> could you teach me how to use it?</p>",
        "id": 135594900,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1539248003
    },
    {
        "content": "<p>I just connect ssh and then do <code>lean --make</code>?</p>",
        "id": 135594908,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1539248016
    },
    {
        "content": "<p>how do I make sure I'm using the server's CPU?</p>",
        "id": 135594914,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1539248029
    },
    {
        "content": "<p>ok I can see that it automatically redirects me to the server</p>",
        "id": 135595827,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1539249073
    },
    {
        "content": "<p>but now how do I communicate between the server and my computer?</p>",
        "id": 135595836,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1539249083
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"110064\">@Kenny Lau</span> What kind of communication do you want?</p>",
        "id": 135595896,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1539249126
    },
    {
        "content": "<p>You can copy files</p>",
        "id": 135595903,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1539249133
    },
    {
        "content": "<p>how?</p>",
        "id": 135595904,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1539249135
    },
    {
        "content": "<p><code>scp</code></p>",
        "id": 135595907,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1539249146
    },
    {
        "content": "<p>It uses <code>ssh</code></p>",
        "id": 135595915,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1539249153
    },
    {
        "content": "<p>But what do you want to copy?</p>",
        "id": 135595919,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1539249162
    },
    {
        "content": "<p>Can't you just <code>git clone</code> on that server?</p>",
        "id": 135595926,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1539249171
    },
    {
        "content": "<p>then how do I send the olean files back?</p>",
        "id": 135595937,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1539249189
    },
    {
        "content": "<p>Aah, from the server to your box?</p>",
        "id": 135595952,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1539249202
    },
    {
        "content": "<p>both ways</p>",
        "id": 135595957,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1539249208
    },
    {
        "content": "<p>Both times <code>scp</code> on your box</p>",
        "id": 135595961,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1539249222
    },
    {
        "content": "<p>how to use <code>scp</code>?</p>",
        "id": 135595967,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1539249229
    },
    {
        "content": "<p><code>scp my_file.olean server:~/destination.olean</code></p>",
        "id": 135596019,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1539249259
    },
    {
        "content": "<p><code>scp -r server:~/a_directory/ my_directory/</code> ## recursive</p>",
        "id": 135596028,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1539249280
    },
    {
        "content": "<p>what is <code>-R</code>?</p>",
        "id": 135596053,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1539249315
    },
    {
        "content": "<p>Sorry, should be <code>-r</code>.</p>",
        "id": 135596062,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1539249326
    },
    {
        "content": "<p><code>scp</code> can also be used as <code>scp server1:path1 server2:path2</code>. It's pretty general (-;</p>",
        "id": 135596091,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1539249359
    },
    {
        "content": "<p>I guess there are ways to recurse and only copy olean files.</p>",
        "id": 135596150,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1539249382
    },
    {
        "content": "<p>Maybe <code>rsync</code> can help. It will also use your ssh keys.</p>",
        "id": 135596157,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1539249393
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"110064\">@Kenny Lau</span> What OS are you on?</p>",
        "id": 135596163,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1539249404
    },
    {
        "content": "<p>windows</p>",
        "id": 135596166,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1539249407
    },
    {
        "content": "<p>/me shuts his eyes while Tux <span class=\"emoji emoji-1f427\" title=\"penguin\">:penguin:</span> slaps Kenny in the face.</p>",
        "id": 135596196,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1539249455
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"110064\">@Kenny Lau</span> I'm not sure if <code>rsync</code> is available. Can you try if it is?</p>",
        "id": 135596251,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1539249490
    },
    {
        "content": "<p>it is</p>",
        "id": 135596254,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1539249495
    },
    {
        "content": "<p>You're lucky (-;</p>",
        "id": 135596261,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1539249506
    },
    {
        "content": "<p>I'm using something that has the unix commands</p>",
        "id": 135596264,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1539249507
    },
    {
        "content": "<p>Do you know <code>man</code>?</p>",
        "id": 135596372,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1539249622
    },
    {
        "content": "<p>oh no <code>scp</code> is copying the files one by one</p>",
        "id": 135596412,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1539249671
    },
    {
        "content": "<p>it will take years</p>",
        "id": 135596418,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1539249676
    },
    {
        "content": "<p><code>Ctrl-C</code></p>",
        "id": 135596427,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1539249700
    },
    {
        "content": "<p>Also try <code>man man</code>.</p>",
        "id": 135596429,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1539249706
    },
    {
        "content": "<p>so how do I even use this if I can't copy the files</p>",
        "id": 135596489,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1539249750
    },
    {
        "content": "<p>Did you try <code>man man</code>?</p>",
        "id": 135596494,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1539249763
    },
    {
        "content": "<p>yes</p>",
        "id": 135596498,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1539249775
    },
    {
        "content": "<p>What happened?</p>",
        "id": 135596508,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1539249786
    },
    {
        "content": "<p>i get a long manual?</p>",
        "id": 135596512,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1539249791
    },
    {
        "content": "<p>Great. Try <code>man rsync</code></p>",
        "id": 135596514,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1539249799
    },
    {
        "content": "<p>how do I refer to my computer from the server?</p>",
        "id": 135596578,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1539249879
    },
    {
        "content": "<p>That's harder.</p>",
        "id": 135596583,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1539249887
    },
    {
        "content": "<p>:(</p>",
        "id": 135596587,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1539249893
    },
    {
        "content": "<p>You can setup a reverse tunnel using ssh</p>",
        "id": 135596588,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1539249897
    },
    {
        "content": "<p>See <code>man ssh</code></p>",
        "id": 135596600,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1539249902
    },
    {
        "content": "<p>But why would you want that?</p>",
        "id": 135596614,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1539249923
    },
    {
        "content": "<p>I don't have rsync, but the server has rsync</p>",
        "id": 135596636,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1539249951
    },
    {
        "content": "<p>Aah, to use <code>rsync</code> the other side needs some form of an ssh server I think. So that won't help you.</p>",
        "id": 135596704,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1539250008
    },
    {
        "content": "<p>A better solution would be to install rsync locally.</p>",
        "id": 135596713,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1539250019
    },
    {
        "content": "<p>how do I do that?</p>",
        "id": 135596720,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1539250026
    },
    {
        "content": "<p>I dunno. Haven't touched windows in 15 years.</p>",
        "id": 135596727,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1539250045
    },
    {
        "content": "<p>just treat me as using bash</p>",
        "id": 135596729,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1539250052
    },
    {
        "content": "<p>You know that the latest Total War series also runs on Linux?</p>",
        "id": 135596734,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1539250068
    },
    {
        "content": "<p>ok so I <code>rsync</code>ed lean and mathlib, but now I can't run lean.exe</p>",
        "id": 135598090,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1539251850
    },
    {
        "content": "<p>You won't be able to do what you want with a Windows host machine</p>",
        "id": 135599665,
        "sender_full_name": "Andrew Ashworth",
        "timestamp": 1539253869
    },
    {
        "content": "<p>Oleans aren't compatible between operating systems</p>",
        "id": 135599674,
        "sender_full_name": "Andrew Ashworth",
        "timestamp": 1539253891
    },
    {
        "content": "<p>exes are certainly not compatible between operating systems</p>",
        "id": 135605471,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1539262028
    },
    {
        "content": "<p>this is so sad</p>",
        "id": 135610588,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1539267012
    },
    {
        "content": "<p>Right. Please blame Bill Gates.</p>",
        "id": 135610648,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1539267068
    },
    {
        "content": "<p>so then how do you install lean on linux?</p>",
        "id": 135610978,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1539267369
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"110064\">@Kenny Lau</span> Would you mind explaining the bigger goal that you have in mind with this service?</p>",
        "id": 135611116,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1539267494
    },
    {
        "content": "<p>Also is X installed on that server, can you do ssh with X forwarding? If so, just install VScode, and run it on the server. The rest is history.</p>",
        "id": 135611154,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1539267545
    },
    {
        "content": "<p>But I guess that you can't have X forwarding.</p>",
        "id": 135611165,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1539267556
    },
    {
        "content": "<p>well with this service I can test the compile times quicklier</p>",
        "id": 135611189,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1539267582
    },
    {
        "content": "<p>Have you looked at the travis config?</p>",
        "id": 135611361,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1539267728
    },
    {
        "content": "<p>For mathlib on github</p>",
        "id": 135611366,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1539267735
    },
    {
        "content": "<p>It will tell Travis how to compile mathlib. I guess it could also tell you how to use this server</p>",
        "id": 135611378,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1539267755
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover/mathlib/blob/master/.travis.yml\" target=\"_blank\" title=\"https://github.com/leanprover/mathlib/blob/master/.travis.yml\">https://github.com/leanprover/mathlib/blob/master/.travis.yml</a></p>",
        "id": 135611385,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1539267773
    },
    {
        "content": "<div class=\"codehilite\"><pre><span></span>[kc_kennylau@gcc2-power8 ~]$ curl https://raw.githubusercontent.com/Kha/elan/master/elan-init.sh -sSf | sh -s -- --default-toolchain none -y\ninfo: downloading installer\ncurl: (22) The requested URL returned error: 404 Not Found\nelan: command failed: curl -sSfL https://github.com/Kha/elan/releases/download/v0.7.1/elan-powerpc64le-unknown-linux-gnu.tar.gz -o /tmp/tmp.Yt4psW5eYO/elan-init.tar.gz\n</pre></div>",
        "id": 135611432,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1539267836
    },
    {
        "content": "<p><code>which wget</code></p>",
        "id": 135611536,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1539267933
    },
    {
        "content": "<p>Oh nvm</p>",
        "id": 135611546,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1539267945
    },
    {
        "content": "<p>I didn't read the error</p>",
        "id": 135611550,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1539267948
    },
    {
        "content": "<p>That <code>elan</code> command is asking <code>curl</code> to write something to <code>/tmp/</code>. Maybe you don't have permissions there?</p>",
        "id": 135611649,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1539268020
    },
    {
        "content": "<p>But <code>curl</code> is also getting a 404</p>",
        "id": 135611686,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1539268063
    },
    {
        "content": "<p>Before that</p>",
        "id": 135611689,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1539268066
    },
    {
        "content": "<p>then how did Tobias Grosser manage to do it</p>",
        "id": 135611768,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1539268116
    },
    {
        "content": "<p>This explains why: <a href=\"https://github.com/Kha/elan/releases/\" target=\"_blank\" title=\"https://github.com/Kha/elan/releases/\">https://github.com/Kha/elan/releases/</a></p>",
        "id": 135611771,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1539268120
    },
    {
        "content": "<p>You are on a powerpc</p>",
        "id": 135611780,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1539268127
    },
    {
        "content": "<p>That architecture is not supported by <code>elan</code>.</p>",
        "id": 135611791,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1539268136
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"122318\">@Tobias Grosser</span> Can you tell how you did this?</p>",
        "id": 135611801,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1539268147
    },
    {
        "content": "<p>I did not get anything running on powerpc</p>",
        "id": 135612036,
        "sender_full_name": "Tobias Grosser",
        "timestamp": 1539268307
    },
    {
        "content": "<p>$ssh <a href=\"http://gcc20.fsffrance.org\" target=\"_blank\" title=\"http://gcc20.fsffrance.org\">gcc20.fsffrance.org</a></p>",
        "id": 135612101,
        "sender_full_name": "Tobias Grosser",
        "timestamp": 1539268332
    },
    {
        "content": "<p>In fact, I did not use the compilefarm to compile lean.</p>",
        "id": 135612170,
        "sender_full_name": "Tobias Grosser",
        "timestamp": 1539268397
    },
    {
        "content": "<p>I would start with <a href=\"http://gcc20.fsffrance.org\" target=\"_blank\" title=\"http://gcc20.fsffrance.org\">gcc20.fsffrance.org</a></p>",
        "id": 135612179,
        "sender_full_name": "Tobias Grosser",
        "timestamp": 1539268405
    },
    {
        "content": "<p>The easiest is probably to create a linux docker image with a current lean environment.</p>",
        "id": 135612241,
        "sender_full_name": "Tobias Grosser",
        "timestamp": 1539268442
    },
    {
        "content": "<p>And then use udocker to run it.</p>",
        "id": 135612267,
        "sender_full_name": "Tobias Grosser",
        "timestamp": 1539268447
    },
    {
        "content": "<p>Also, I am not sure kenny why you want to copy files.</p>",
        "id": 135612274,
        "sender_full_name": "Tobias Grosser",
        "timestamp": 1539268461
    },
    {
        "content": "<p>ignore the part about copying files</p>",
        "id": 135612283,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1539268470
    },
    {
        "content": "<p>OK.</p>",
        "id": 135612287,
        "sender_full_name": "Tobias Grosser",
        "timestamp": 1539268476
    },
    {
        "content": "<p>In theory you should be able to just run:</p>",
        "id": 135612298,
        "sender_full_name": "Tobias Grosser",
        "timestamp": 1539268490
    },
    {
        "content": "<p>grosser@gcc20:~$       curl <a href=\"https://raw.githubusercontent.com/Kha/elan/master/elan-init.sh\" target=\"_blank\" title=\"https://raw.githubusercontent.com/Kha/elan/master/elan-init.sh\">https://raw.githubusercontent.com/Kha/elan/master/elan-init.sh</a> -sSf | sh -s -- --default-toolchain none -y<br>\ninfo: downloading installer</p>\n<p>/tmp/tmp.OXhfu8gCPt/elan-init: /lib/x86_64-linux-gnu/libc.so.6: version <code>GLIBC_2.15' not found (required by /tmp/tmp.OXhfu8gCPt/elan-init)\n/tmp/tmp.OXhfu8gCPt/elan-init: /lib/x86_64-linux-gnu/libc.so.6: version </code>GLIBC_2.14' not found (required by /tmp/tmp.OXhfu8gCPt/elan-init)<br>\ngrosser@gcc20:~$</p>",
        "id": 135612306,
        "sender_full_name": "Tobias Grosser",
        "timestamp": 1539268499
    },
    {
        "content": "<p>Unfortunately this gives an error</p>",
        "id": 135612314,
        "sender_full_name": "Tobias Grosser",
        "timestamp": 1539268505
    },
    {
        "content": "<p>As the glibc version is not correct.</p>",
        "id": 135612324,
        "sender_full_name": "Tobias Grosser",
        "timestamp": 1539268513
    },
    {
        "content": "<p>What you can do instead on gcc20:</p>\n<div class=\"codehilite\"><pre><span></span>curl https://raw.githubusercontent.com/indigo-dc/udocker/master/udocker.py &gt; udocker\nchmod u+rx ./udocker\n./udocker install\n./udocker pull ubuntu\n./udocker create --name=lean ubuntu\n./udocker run lean\napt-get update\napt-get install curl git\ncurl https://raw.githubusercontent.com/Kha/elan/master/elan-init.sh -sSf | sh -s -- --default-toolchain none -y\n git clone https://github.com/leanprover/mathlib.git\nleanpkg --make\n</pre></div>\n\n\n<p>to get back into your lean folder just run</p>\n<div class=\"codehilite\"><pre><span></span>./udocker run lean\ncd mathlib\nls\n</pre></div>",
        "id": 135613129,
        "sender_full_name": "Tobias Grosser",
        "timestamp": 1539269114
    },
    {
        "content": "<p>I feel obliged to point out that copying build results from the farm machines isn't good practice in terms of security, even if the risks are low for olean files. Better to only copy things to the farm machines.</p>",
        "id": 135613307,
        "sender_full_name": "Reid Barton",
        "timestamp": 1539269254
    },
    {
        "content": "<p>I would suggest using the machines gcc120-gcc123, I got 10 minutes mathlib build time on gcc120 and elan worked without any issues. Note they are on nonstandard ports (45000 through 45003 respectively)</p>",
        "id": 135624545,
        "sender_full_name": "Reid Barton",
        "timestamp": 1539280481
    },
    {
        "content": "<p>Though Scott's machine is still the leader at 8 minutes.</p>",
        "id": 135624586,
        "sender_full_name": "Reid Barton",
        "timestamp": 1539280550
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"110032\">@Reid Barton</span>, this seems to be a great idea.</p>",
        "id": 135628807,
        "sender_full_name": "Tobias Grosser",
        "timestamp": 1539284746
    },
    {
        "content": "<p>Did not see gcc120ff</p>",
        "id": 135628814,
        "sender_full_name": "Tobias Grosser",
        "timestamp": 1539284753
    },
    {
        "content": "<p>I did <code>curl https://raw.githubusercontent.com/Kha/elan/master/elan-init.sh -sSf | sh</code> and it said elan has been installed when in fact it hasn't been.</p>",
        "id": 135638198,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1539294283
    },
    {
        "content": "<p>and I thus can't install elan.</p>",
        "id": 135638203,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1539294288
    },
    {
        "content": "<p>I tried on both gcc120 port 45000 and gcc121 port 45001</p>",
        "id": 135638264,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1539294355
    },
    {
        "content": "<p>Did you do the step printed out at the end of the elan output, i.e., <code>source &lt;something&gt;</code>?</p>",
        "id": 135638319,
        "sender_full_name": "Reid Barton",
        "timestamp": 1539294373
    },
    {
        "content": "<p>Or log out and log back in</p>",
        "id": 135638323,
        "sender_full_name": "Reid Barton",
        "timestamp": 1539294378
    },
    {
        "content": "<div class=\"codehilite\"><pre><span></span>[kc_kennylau@gcc120 ~]$ curl https://raw.githubusercontent.com/Kha/elan/master/elan-init.sh -sSf | sh\ninfo: downloading installer\n\nWelcome to Lean!\n\nThis will download and install Elan, a tool for managing different Lean\nversions used in packages you create or download. It will also install a\ndefault version of Lean and its package manager, leanpkg, for editing files not\nbelonging to any package.\n\nIt will add the leanpkg, lean, and elan commands to Elan&#39;s bin directory,\nlocated at:\n\n  /home/kc_kennylau/.elan/bin\n\nThis path will then be added to your PATH environment variable by modifying the\nprofile files located at:\n\n  /home/kc_kennylau/.profile\n  /home/kc_kennylau/.bash_profile\n\nYou can uninstall at any time with elan self uninstall and these changes will\nbe reverted.\n\nCurrent installation options:\n\n     default toolchain: stable\n  modify PATH variable: yes\n\n1) Proceed with installation (default)\n2) Customize installation\n3) Cancel installation\n1\n\ninfo: updating existing elan installation\n\n\nElan is installed now. Great!\n\nTo get started you need Elan&#39;s bin directory ($HOME/.elan/bin) in your PATH\nenvironment variable. Next time you log in this will be done automatically.\n\nTo configure your current shell run source $HOME/.elan/env\n[kc_kennylau@gcc120 ~]$ source $HOME/.lean/env\n-bash: /home/kc_kennylau/.lean/env: No such file or directory\n</pre></div>",
        "id": 135640639,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1539297208
    },
    {
        "content": "<p>Hmm, that is odd. It worked for me</p>",
        "id": 135640694,
        "sender_full_name": "Reid Barton",
        "timestamp": 1539297258
    },
    {
        "content": "<p>i'm on windows using msys2 mingw 64, if that makes any difference</p>",
        "id": 135640704,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1539297278
    },
    {
        "content": "<p>Wait no! you typed it wrong</p>",
        "id": 135640724,
        "sender_full_name": "Reid Barton",
        "timestamp": 1539297315
    },
    {
        "content": "<p><code>.elan</code> not <code>.lean</code></p>",
        "id": 135640726,
        "sender_full_name": "Reid Barton",
        "timestamp": 1539297321
    },
    {
        "content": "<p>I'm stupid.</p>",
        "id": 135640804,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1539297390
    },
    {
        "content": "<p>it worked now</p>",
        "id": 135640807,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1539297392
    },
    {
        "content": "<p>I wonder who thought naming the downloader for <code>lean</code> an anagram of <code>lean</code> was a good idea :P</p>",
        "id": 135640834,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1539297446
    },
    {
        "content": "<p>Maybe they should have chosen a less easily confused name, like <code>rustup</code></p>",
        "id": 135640838,
        "sender_full_name": "Reid Barton",
        "timestamp": 1539297457
    },
    {
        "content": "<p>you want the downloader for lean to be called <code>rustup</code>? That's indeed less easily confused with <code>lean</code></p>",
        "id": 135640888,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1539297492
    }
]