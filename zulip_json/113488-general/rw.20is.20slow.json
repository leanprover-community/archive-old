[
    {
        "content": "<div class=\"codehilite\"><pre><span></span><span class=\"kn\">set_option</span> <span class=\"n\">profiler</span> <span class=\"n\">true</span>\n<span class=\"kn\">theorem</span> <span class=\"n\">test_rw</span> <span class=\"o\">:</span> <span class=\"n\">true</span> <span class=\"o\">:=</span>\n<span class=\"k\">begin</span>\n  <span class=\"k\">have</span> <span class=\"o\">:</span> <span class=\"mi\">7</span> <span class=\"bp\">*</span> <span class=\"o\">(</span><span class=\"mi\">8</span> <span class=\"bp\">+</span> <span class=\"mi\">9</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"mi\">7</span> <span class=\"bp\">*</span> <span class=\"mi\">8</span> <span class=\"bp\">+</span> <span class=\"mi\">7</span> <span class=\"bp\">*</span> <span class=\"mi\">9</span><span class=\"o\">,</span> <span class=\"n\">rw</span> <span class=\"n\">mul_add</span><span class=\"o\">,</span>\n  <span class=\"k\">have</span> <span class=\"o\">:</span> <span class=\"mi\">7</span> <span class=\"bp\">*</span> <span class=\"o\">(</span><span class=\"mi\">8</span> <span class=\"bp\">+</span> <span class=\"mi\">9</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"mi\">7</span> <span class=\"bp\">*</span> <span class=\"mi\">8</span> <span class=\"bp\">+</span> <span class=\"mi\">7</span> <span class=\"bp\">*</span> <span class=\"mi\">9</span><span class=\"o\">,</span> <span class=\"n\">rw</span> <span class=\"n\">mul_add</span><span class=\"o\">,</span>\n  <span class=\"k\">have</span> <span class=\"o\">:</span> <span class=\"mi\">7</span> <span class=\"bp\">*</span> <span class=\"o\">(</span><span class=\"mi\">8</span> <span class=\"bp\">+</span> <span class=\"mi\">9</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"mi\">7</span> <span class=\"bp\">*</span> <span class=\"mi\">8</span> <span class=\"bp\">+</span> <span class=\"mi\">7</span> <span class=\"bp\">*</span> <span class=\"mi\">9</span><span class=\"o\">,</span> <span class=\"n\">rw</span> <span class=\"n\">mul_add</span><span class=\"o\">,</span>\n  <span class=\"k\">have</span> <span class=\"o\">:</span> <span class=\"mi\">7</span> <span class=\"bp\">*</span> <span class=\"o\">(</span><span class=\"mi\">8</span> <span class=\"bp\">+</span> <span class=\"mi\">9</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"mi\">7</span> <span class=\"bp\">*</span> <span class=\"mi\">8</span> <span class=\"bp\">+</span> <span class=\"mi\">7</span> <span class=\"bp\">*</span> <span class=\"mi\">9</span><span class=\"o\">,</span> <span class=\"n\">rw</span> <span class=\"n\">mul_add</span><span class=\"o\">,</span>\n  <span class=\"k\">have</span> <span class=\"o\">:</span> <span class=\"mi\">7</span> <span class=\"bp\">*</span> <span class=\"o\">(</span><span class=\"mi\">8</span> <span class=\"bp\">+</span> <span class=\"mi\">9</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"mi\">7</span> <span class=\"bp\">*</span> <span class=\"mi\">8</span> <span class=\"bp\">+</span> <span class=\"mi\">7</span> <span class=\"bp\">*</span> <span class=\"mi\">9</span><span class=\"o\">,</span> <span class=\"n\">rw</span> <span class=\"n\">mul_add</span><span class=\"o\">,</span>\n  <span class=\"k\">have</span> <span class=\"o\">:</span> <span class=\"mi\">7</span> <span class=\"bp\">*</span> <span class=\"o\">(</span><span class=\"mi\">8</span> <span class=\"bp\">+</span> <span class=\"mi\">9</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"mi\">7</span> <span class=\"bp\">*</span> <span class=\"mi\">8</span> <span class=\"bp\">+</span> <span class=\"mi\">7</span> <span class=\"bp\">*</span> <span class=\"mi\">9</span><span class=\"o\">,</span> <span class=\"n\">rw</span> <span class=\"n\">mul_add</span><span class=\"o\">,</span>\n  <span class=\"k\">have</span> <span class=\"o\">:</span> <span class=\"mi\">7</span> <span class=\"bp\">*</span> <span class=\"o\">(</span><span class=\"mi\">8</span> <span class=\"bp\">+</span> <span class=\"mi\">9</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"mi\">7</span> <span class=\"bp\">*</span> <span class=\"mi\">8</span> <span class=\"bp\">+</span> <span class=\"mi\">7</span> <span class=\"bp\">*</span> <span class=\"mi\">9</span><span class=\"o\">,</span> <span class=\"n\">rw</span> <span class=\"n\">mul_add</span><span class=\"o\">,</span>\n  <span class=\"k\">have</span> <span class=\"o\">:</span> <span class=\"mi\">7</span> <span class=\"bp\">*</span> <span class=\"o\">(</span><span class=\"mi\">8</span> <span class=\"bp\">+</span> <span class=\"mi\">9</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"mi\">7</span> <span class=\"bp\">*</span> <span class=\"mi\">8</span> <span class=\"bp\">+</span> <span class=\"mi\">7</span> <span class=\"bp\">*</span> <span class=\"mi\">9</span><span class=\"o\">,</span> <span class=\"n\">rw</span> <span class=\"n\">mul_add</span><span class=\"o\">,</span>\n  <span class=\"k\">have</span> <span class=\"o\">:</span> <span class=\"mi\">7</span> <span class=\"bp\">*</span> <span class=\"o\">(</span><span class=\"mi\">8</span> <span class=\"bp\">+</span> <span class=\"mi\">9</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"mi\">7</span> <span class=\"bp\">*</span> <span class=\"mi\">8</span> <span class=\"bp\">+</span> <span class=\"mi\">7</span> <span class=\"bp\">*</span> <span class=\"mi\">9</span><span class=\"o\">,</span> <span class=\"n\">rw</span> <span class=\"n\">mul_add</span><span class=\"o\">,</span>\n  <span class=\"k\">have</span> <span class=\"o\">:</span> <span class=\"mi\">7</span> <span class=\"bp\">*</span> <span class=\"o\">(</span><span class=\"mi\">8</span> <span class=\"bp\">+</span> <span class=\"mi\">9</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"mi\">7</span> <span class=\"bp\">*</span> <span class=\"mi\">8</span> <span class=\"bp\">+</span> <span class=\"mi\">7</span> <span class=\"bp\">*</span> <span class=\"mi\">9</span><span class=\"o\">,</span> <span class=\"n\">rw</span> <span class=\"n\">mul_add</span><span class=\"o\">,</span>\n<span class=\"kn\">end</span>\n</pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span>parsing took 5.08s\nelaboration of test_rw took 211ms\n</pre></div>",
        "id": 193702673,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1586682464
    },
    {
        "content": "<p>I think this is the most shocking of all my test results</p>",
        "id": 193702675,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1586682477
    },
    {
        "content": "<p>because <code>rw</code> is in core</p>",
        "id": 193702713,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1586682483
    },
    {
        "content": "<p>just because it's in core doesn't mean it's fast</p>",
        "id": 193702719,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1586682508
    },
    {
        "content": "<p>in fact that mostly means it hasn't been touched in a long time</p>",
        "id": 193702724,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1586682524
    },
    {
        "content": "<div class=\"codehilite\"><pre><span></span>parsing took 142ms\n</pre></div>\n\n\n<p>???</p>",
        "id": 193702725,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1586682528
    },
    {
        "content": "<p>but actually I think you are benchmarking <code>have</code> with these examples</p>",
        "id": 193702730,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1586682546
    },
    {
        "content": "<p>yeah, kenny's computer is weird</p>",
        "id": 193702733,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1586682559
    },
    {
        "content": "<p>I can't believe my desktop is 40 times faster than it though</p>",
        "id": 193702734,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1586682566
    },
    {
        "content": "<p>I get 1.17 s</p>",
        "id": 193702737,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1586682576
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110049\">Mario Carneiro</span> <a href=\"#narrow/stream/113488-general/topic/rw.20is.20slow/near/193702730\" title=\"#narrow/stream/113488-general/topic/rw.20is.20slow/near/193702730\">said</a>:</p>\n<blockquote>\n<p>but actually I think you are benchmarking <code>have</code> with these examples</p>\n</blockquote>\n<p>this reminds me of the story of the man on the bike</p>",
        "id": 193702754,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1586682584
    },
    {
        "content": "<p>Which version of Lean are you using?</p>",
        "id": 193702760,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1586682591
    },
    {
        "content": "<p>3.7.2</p>",
        "id": 193702806,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1586682607
    },
    {
        "content": "<p>I'm on 3.8.0</p>",
        "id": 193702807,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1586682611
    },
    {
        "content": "<p>a man on a bike would pass through a security guard on the border every week with a big bag of sand; every time the security would check the bag very carefully, but every time the security would find nothing; 2 years after the guard retired, he met the man by chance, and finally asks him: what were you smuggling the whole time?</p>\n<p>it was the bikes</p>",
        "id": 193702816,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1586682655
    },
    {
        "content": "<p>Okay, updating to 3.8 really made parsing 5 times faster on my machine</p>",
        "id": 193702865,
        "sender_full_name": "Markus Himmel",
        "timestamp": 1586682729
    },
    {
        "content": "<p>control:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"kn\">set_option</span> <span class=\"n\">profiler</span> <span class=\"n\">true</span>\n<span class=\"kn\">theorem</span> <span class=\"n\">test_have</span> <span class=\"o\">:</span> <span class=\"n\">true</span> <span class=\"o\">:=</span>\n<span class=\"k\">begin</span>\n  <span class=\"k\">have</span> <span class=\"o\">:</span> <span class=\"mi\">7</span> <span class=\"bp\">*</span> <span class=\"o\">(</span><span class=\"mi\">8</span> <span class=\"bp\">+</span> <span class=\"mi\">9</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"mi\">7</span> <span class=\"bp\">*</span> <span class=\"mi\">8</span> <span class=\"bp\">+</span> <span class=\"mi\">7</span> <span class=\"bp\">*</span> <span class=\"mi\">9</span><span class=\"o\">,</span> <span class=\"n\">sorry</span><span class=\"o\">,</span>\n  <span class=\"k\">have</span> <span class=\"o\">:</span> <span class=\"mi\">7</span> <span class=\"bp\">*</span> <span class=\"o\">(</span><span class=\"mi\">8</span> <span class=\"bp\">+</span> <span class=\"mi\">9</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"mi\">7</span> <span class=\"bp\">*</span> <span class=\"mi\">8</span> <span class=\"bp\">+</span> <span class=\"mi\">7</span> <span class=\"bp\">*</span> <span class=\"mi\">9</span><span class=\"o\">,</span> <span class=\"n\">sorry</span><span class=\"o\">,</span>\n  <span class=\"k\">have</span> <span class=\"o\">:</span> <span class=\"mi\">7</span> <span class=\"bp\">*</span> <span class=\"o\">(</span><span class=\"mi\">8</span> <span class=\"bp\">+</span> <span class=\"mi\">9</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"mi\">7</span> <span class=\"bp\">*</span> <span class=\"mi\">8</span> <span class=\"bp\">+</span> <span class=\"mi\">7</span> <span class=\"bp\">*</span> <span class=\"mi\">9</span><span class=\"o\">,</span> <span class=\"n\">sorry</span><span class=\"o\">,</span>\n  <span class=\"k\">have</span> <span class=\"o\">:</span> <span class=\"mi\">7</span> <span class=\"bp\">*</span> <span class=\"o\">(</span><span class=\"mi\">8</span> <span class=\"bp\">+</span> <span class=\"mi\">9</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"mi\">7</span> <span class=\"bp\">*</span> <span class=\"mi\">8</span> <span class=\"bp\">+</span> <span class=\"mi\">7</span> <span class=\"bp\">*</span> <span class=\"mi\">9</span><span class=\"o\">,</span> <span class=\"n\">sorry</span><span class=\"o\">,</span>\n  <span class=\"k\">have</span> <span class=\"o\">:</span> <span class=\"mi\">7</span> <span class=\"bp\">*</span> <span class=\"o\">(</span><span class=\"mi\">8</span> <span class=\"bp\">+</span> <span class=\"mi\">9</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"mi\">7</span> <span class=\"bp\">*</span> <span class=\"mi\">8</span> <span class=\"bp\">+</span> <span class=\"mi\">7</span> <span class=\"bp\">*</span> <span class=\"mi\">9</span><span class=\"o\">,</span> <span class=\"n\">sorry</span><span class=\"o\">,</span>\n  <span class=\"k\">have</span> <span class=\"o\">:</span> <span class=\"mi\">7</span> <span class=\"bp\">*</span> <span class=\"o\">(</span><span class=\"mi\">8</span> <span class=\"bp\">+</span> <span class=\"mi\">9</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"mi\">7</span> <span class=\"bp\">*</span> <span class=\"mi\">8</span> <span class=\"bp\">+</span> <span class=\"mi\">7</span> <span class=\"bp\">*</span> <span class=\"mi\">9</span><span class=\"o\">,</span> <span class=\"n\">sorry</span><span class=\"o\">,</span>\n  <span class=\"k\">have</span> <span class=\"o\">:</span> <span class=\"mi\">7</span> <span class=\"bp\">*</span> <span class=\"o\">(</span><span class=\"mi\">8</span> <span class=\"bp\">+</span> <span class=\"mi\">9</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"mi\">7</span> <span class=\"bp\">*</span> <span class=\"mi\">8</span> <span class=\"bp\">+</span> <span class=\"mi\">7</span> <span class=\"bp\">*</span> <span class=\"mi\">9</span><span class=\"o\">,</span> <span class=\"n\">sorry</span><span class=\"o\">,</span>\n  <span class=\"k\">have</span> <span class=\"o\">:</span> <span class=\"mi\">7</span> <span class=\"bp\">*</span> <span class=\"o\">(</span><span class=\"mi\">8</span> <span class=\"bp\">+</span> <span class=\"mi\">9</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"mi\">7</span> <span class=\"bp\">*</span> <span class=\"mi\">8</span> <span class=\"bp\">+</span> <span class=\"mi\">7</span> <span class=\"bp\">*</span> <span class=\"mi\">9</span><span class=\"o\">,</span> <span class=\"n\">sorry</span><span class=\"o\">,</span>\n  <span class=\"k\">have</span> <span class=\"o\">:</span> <span class=\"mi\">7</span> <span class=\"bp\">*</span> <span class=\"o\">(</span><span class=\"mi\">8</span> <span class=\"bp\">+</span> <span class=\"mi\">9</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"mi\">7</span> <span class=\"bp\">*</span> <span class=\"mi\">8</span> <span class=\"bp\">+</span> <span class=\"mi\">7</span> <span class=\"bp\">*</span> <span class=\"mi\">9</span><span class=\"o\">,</span> <span class=\"n\">sorry</span><span class=\"o\">,</span>\n  <span class=\"k\">have</span> <span class=\"o\">:</span> <span class=\"mi\">7</span> <span class=\"bp\">*</span> <span class=\"o\">(</span><span class=\"mi\">8</span> <span class=\"bp\">+</span> <span class=\"mi\">9</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"mi\">7</span> <span class=\"bp\">*</span> <span class=\"mi\">8</span> <span class=\"bp\">+</span> <span class=\"mi\">7</span> <span class=\"bp\">*</span> <span class=\"mi\">9</span><span class=\"o\">,</span> <span class=\"n\">sorry</span><span class=\"o\">,</span>\n  <span class=\"n\">trivial</span>\n<span class=\"kn\">end</span>\n</pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span>parsing took 445ms\nelaboration of test_rw took 176ms\n</pre></div>",
        "id": 193702869,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1586682753
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"260921\">Markus Himmel</span> <a href=\"#narrow/stream/113488-general/topic/rw.20is.20slow/near/193702865\" title=\"#narrow/stream/113488-general/topic/rw.20is.20slow/near/193702865\">said</a>:</p>\n<blockquote>\n<p>Okay, updating to 3.8 really made parsing 5 times faster on my machine</p>\n</blockquote>\n<p>the problem is that codewars doesn't use 3.8</p>",
        "id": 193702870,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1586682767
    },
    {
        "content": "<p>Yep, I just updated and the test is much faster</p>",
        "id": 193702885,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1586682814
    },
    {
        "content": "<p>codewars uses Lean 3.7.2</p>",
        "id": 193702933,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1586682874
    },
    {
        "content": "<p>and <span class=\"user-mention\" data-user-id=\"260921\">@Markus Himmel</span> managed to stay below the time limit</p>",
        "id": 193702936,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1586682888
    },
    {
        "content": "<p>in Lean 3.7.2</p>",
        "id": 193702938,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1586682892
    },
    {
        "content": "<p>Great! Could you please use all that speed to unstuck me on <a href=\"#narrow/stream/217875-Is-there.20code.20for.20X.3F/topic/Bolzano-Weirstrass/near/193682245\" title=\"#narrow/stream/217875-Is-there.20code.20for.20X.3F/topic/Bolzano-Weirstrass/near/193682245\">https://leanprover.zulipchat.com/#narrow/stream/217875-Is-there.20code.20for.20X.3F/topic/Bolzano-Weirstrass/near/193682245</a>?</p>",
        "id": 193702939,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1586682893
    },
    {
        "content": "<p>I haven't been watching the changes carefully, <span class=\"user-mention\" data-user-id=\"110043\">@Gabriel Ebner</span> <span class=\"user-mention\" data-user-id=\"123965\">@Bryan Gin-ge Chen</span> any idea what the culprit is?</p>",
        "id": 193702948,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1586682918
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110031\">Patrick Massot</span> <a href=\"#narrow/stream/113488-general/topic/rw.20is.20slow/near/193702939\" title=\"#narrow/stream/113488-general/topic/rw.20is.20slow/near/193702939\">said</a>:</p>\n<blockquote>\n<p>Great! Could you please use all that speed to unstuck me on <a href=\"#narrow/stream/217875-Is-there.20code.20for.20X.3F/topic/Bolzano-Weirstrass/near/193682245\" title=\"#narrow/stream/217875-Is-there.20code.20for.20X.3F/topic/Bolzano-Weirstrass/near/193682245\">https://leanprover.zulipchat.com/#narrow/stream/217875-Is-there.20code.20for.20X.3F/topic/Bolzano-Weirstrass/near/193682245</a>?</p>\n</blockquote>\n<p>?? I never even saw this!</p>\n<div class=\"codehilite\"><pre><span></span>You are not subscribed to stream Is there code for X?\n</pre></div>",
        "id": 193703016,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1586683003
    },
    {
        "content": "<p>and on codewars, which is the only benchmark that matters:</p>\n<div class=\"codehilite\"><pre><span></span>/workspace/src/Solution.lean:2:8\nparsing took 1.18s\n\n/workspace/src/Solution.lean:2:8\nelaboration of test_rw took 87.7ms\n</pre></div>",
        "id": 193703029,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1586683039
    },
    {
        "content": "<p>so maybe I can still use <code>rw</code> in my solution</p>",
        "id": 193703036,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1586683051
    },
    {
        "content": "<p>Oh wow and the coolest corollary of not being subscribed to the stream is that every time I reload it it comes up in a different colour!</p>",
        "id": 193703042,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1586683064
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110049\">Mario Carneiro</span> <a href=\"#narrow/stream/113488-general/topic/rw.20is.20slow/near/193702948\" title=\"#narrow/stream/113488-general/topic/rw.20is.20slow/near/193702948\">said</a>:</p>\n<blockquote>\n<p>any idea what the culprit is?</p>\n</blockquote>\n<p>What's the problem?  I thought it is faster in Lean 3.8?  (It should be even faster in Lean 3.9.)</p>",
        "id": 193703316,
        "sender_full_name": "Gabriel Ebner",
        "timestamp": 1586683582
    },
    {
        "content": "<p>what changed?</p>",
        "id": 193703330,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1586683643
    },
    {
        "content": "<p>not a problem per se, I just don't like when things mysteriously get better</p>",
        "id": 193703335,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1586683667
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/lean/issues/180\" title=\"https://github.com/leanprover-community/lean/issues/180\">lean#180</a></p>",
        "id": 193703336,
        "sender_full_name": "Gabriel Ebner",
        "timestamp": 1586683669
    },
    {
        "content": "<p>Kenny complained, and I pushed a fix.</p>",
        "id": 193703337,
        "sender_full_name": "Gabriel Ebner",
        "timestamp": 1586683681
    },
    {
        "content": "<p>oh right</p>",
        "id": 193703378,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1586683718
    },
    {
        "content": "<p>so this is used in the parsers for various tactics?</p>",
        "id": 193703381,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1586683731
    },
    {
        "content": "<p>Mario did you see <a href=\"https://github.com/leanprover-community/lean/issues/186\" title=\"https://github.com/leanprover-community/lean/issues/186\">lean#186</a>?</p>",
        "id": 193703391,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1586683791
    },
    {
        "content": "<p>I guess this affects various things.  All tactic parsers use <code>reflect</code>, and when the <code>has_reflect</code> instance is implemented using <code>subst</code> or expression quotations, then it will be magically faster now.</p>",
        "id": 193703449,
        "sender_full_name": "Gabriel Ebner",
        "timestamp": 1586683823
    },
    {
        "content": "<div class=\"codehilite\"><pre><span></span><code><span class=\"kn\">set_option</span> <span class=\"n\">profiler</span> <span class=\"n\">true</span>\n<span class=\"c1\">-- parsing took 2.07s</span>\n<span class=\"kn\">theorem</span> <span class=\"n\">test</span> <span class=\"o\">(</span><span class=\"n\">H</span> <span class=\"o\">:</span> <span class=\"n\">true</span> <span class=\"bp\">=</span> <span class=\"n\">true</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"n\">true</span> <span class=\"o\">:=</span>\n<span class=\"k\">begin</span>\n  <span class=\"n\">rw</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">rw</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">rw</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">rw</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">rw</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">rw</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">rw</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">rw</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">rw</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">rw</span> <span class=\"n\">H</span><span class=\"o\">,</span>\n  <span class=\"n\">rw</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">rw</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">rw</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">rw</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">rw</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">rw</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">rw</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">rw</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">rw</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">rw</span> <span class=\"n\">H</span><span class=\"o\">,</span>\n  <span class=\"n\">rw</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">rw</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">rw</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">rw</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">rw</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">rw</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">rw</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">rw</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">rw</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">rw</span> <span class=\"n\">H</span><span class=\"o\">,</span>\n  <span class=\"n\">rw</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">rw</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">rw</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">rw</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">rw</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">rw</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">rw</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">rw</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">rw</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">rw</span> <span class=\"n\">H</span><span class=\"o\">,</span>\n  <span class=\"n\">rw</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">rw</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">rw</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">rw</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">rw</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">rw</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">rw</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">rw</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">rw</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">rw</span> <span class=\"n\">H</span><span class=\"o\">,</span>\n  <span class=\"n\">rw</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">rw</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">rw</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">rw</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">rw</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">rw</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">rw</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">rw</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">rw</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">rw</span> <span class=\"n\">H</span><span class=\"o\">,</span>\n  <span class=\"n\">rw</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">rw</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">rw</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">rw</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">rw</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">rw</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">rw</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">rw</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">rw</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">rw</span> <span class=\"n\">H</span><span class=\"o\">,</span>\n  <span class=\"n\">rw</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">rw</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">rw</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">rw</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">rw</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">rw</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">rw</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">rw</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">rw</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">rw</span> <span class=\"n\">H</span><span class=\"o\">,</span>\n  <span class=\"n\">rw</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">rw</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">rw</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">rw</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">rw</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">rw</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">rw</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">rw</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">rw</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">rw</span> <span class=\"n\">H</span><span class=\"o\">,</span>\n  <span class=\"n\">rw</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">rw</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">rw</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">rw</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">rw</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">rw</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">rw</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">rw</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">rw</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">rw</span> <span class=\"n\">H</span><span class=\"o\">,</span>\n<span class=\"kn\">end</span>\n</code></pre></div>",
        "id": 205312696,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1595990268
    },
    {
        "content": "<p>control:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"kn\">set_option</span> <span class=\"n\">profiler</span> <span class=\"n\">true</span>\n<span class=\"c1\">-- parsing took 1.24ms</span>\n<span class=\"kn\">theorem</span> <span class=\"n\">test</span> <span class=\"o\">(</span><span class=\"n\">H</span> <span class=\"o\">:</span> <span class=\"n\">true</span> <span class=\"bp\">=</span> <span class=\"n\">true</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"n\">true</span> <span class=\"bp\">=</span> <span class=\"n\">true</span> <span class=\"o\">:=</span>\n<span class=\"n\">H</span><span class=\"bp\">.</span><span class=\"n\">trans</span> <span class=\"err\">$</span> <span class=\"n\">H</span><span class=\"bp\">.</span><span class=\"n\">trans</span> <span class=\"err\">$</span> <span class=\"n\">H</span><span class=\"bp\">.</span><span class=\"n\">trans</span> <span class=\"err\">$</span> <span class=\"n\">H</span><span class=\"bp\">.</span><span class=\"n\">trans</span> <span class=\"err\">$</span> <span class=\"n\">H</span><span class=\"bp\">.</span><span class=\"n\">trans</span> <span class=\"err\">$</span> <span class=\"n\">H</span><span class=\"bp\">.</span><span class=\"n\">trans</span> <span class=\"err\">$</span> <span class=\"n\">H</span><span class=\"bp\">.</span><span class=\"n\">trans</span> <span class=\"err\">$</span> <span class=\"n\">H</span><span class=\"bp\">.</span><span class=\"n\">trans</span> <span class=\"err\">$</span> <span class=\"n\">H</span><span class=\"bp\">.</span><span class=\"n\">trans</span> <span class=\"err\">$</span> <span class=\"n\">H</span><span class=\"bp\">.</span><span class=\"n\">trans</span> <span class=\"err\">$</span>\n<span class=\"n\">H</span><span class=\"bp\">.</span><span class=\"n\">trans</span> <span class=\"err\">$</span> <span class=\"n\">H</span><span class=\"bp\">.</span><span class=\"n\">trans</span> <span class=\"err\">$</span> <span class=\"n\">H</span><span class=\"bp\">.</span><span class=\"n\">trans</span> <span class=\"err\">$</span> <span class=\"n\">H</span><span class=\"bp\">.</span><span class=\"n\">trans</span> <span class=\"err\">$</span> <span class=\"n\">H</span><span class=\"bp\">.</span><span class=\"n\">trans</span> <span class=\"err\">$</span> <span class=\"n\">H</span><span class=\"bp\">.</span><span class=\"n\">trans</span> <span class=\"err\">$</span> <span class=\"n\">H</span><span class=\"bp\">.</span><span class=\"n\">trans</span> <span class=\"err\">$</span> <span class=\"n\">H</span><span class=\"bp\">.</span><span class=\"n\">trans</span> <span class=\"err\">$</span> <span class=\"n\">H</span><span class=\"bp\">.</span><span class=\"n\">trans</span> <span class=\"err\">$</span> <span class=\"n\">H</span><span class=\"bp\">.</span><span class=\"n\">trans</span> <span class=\"err\">$</span>\n<span class=\"n\">H</span><span class=\"bp\">.</span><span class=\"n\">trans</span> <span class=\"err\">$</span> <span class=\"n\">H</span><span class=\"bp\">.</span><span class=\"n\">trans</span> <span class=\"err\">$</span> <span class=\"n\">H</span><span class=\"bp\">.</span><span class=\"n\">trans</span> <span class=\"err\">$</span> <span class=\"n\">H</span><span class=\"bp\">.</span><span class=\"n\">trans</span> <span class=\"err\">$</span> <span class=\"n\">H</span><span class=\"bp\">.</span><span class=\"n\">trans</span> <span class=\"err\">$</span> <span class=\"n\">H</span><span class=\"bp\">.</span><span class=\"n\">trans</span> <span class=\"err\">$</span> <span class=\"n\">H</span><span class=\"bp\">.</span><span class=\"n\">trans</span> <span class=\"err\">$</span> <span class=\"n\">H</span><span class=\"bp\">.</span><span class=\"n\">trans</span> <span class=\"err\">$</span> <span class=\"n\">H</span><span class=\"bp\">.</span><span class=\"n\">trans</span> <span class=\"err\">$</span> <span class=\"n\">H</span><span class=\"bp\">.</span><span class=\"n\">trans</span> <span class=\"err\">$</span>\n<span class=\"n\">H</span><span class=\"bp\">.</span><span class=\"n\">trans</span> <span class=\"err\">$</span> <span class=\"n\">H</span><span class=\"bp\">.</span><span class=\"n\">trans</span> <span class=\"err\">$</span> <span class=\"n\">H</span><span class=\"bp\">.</span><span class=\"n\">trans</span> <span class=\"err\">$</span> <span class=\"n\">H</span><span class=\"bp\">.</span><span class=\"n\">trans</span> <span class=\"err\">$</span> <span class=\"n\">H</span><span class=\"bp\">.</span><span class=\"n\">trans</span> <span class=\"err\">$</span> <span class=\"n\">H</span><span class=\"bp\">.</span><span class=\"n\">trans</span> <span class=\"err\">$</span> <span class=\"n\">H</span><span class=\"bp\">.</span><span class=\"n\">trans</span> <span class=\"err\">$</span> <span class=\"n\">H</span><span class=\"bp\">.</span><span class=\"n\">trans</span> <span class=\"err\">$</span> <span class=\"n\">H</span><span class=\"bp\">.</span><span class=\"n\">trans</span> <span class=\"err\">$</span> <span class=\"n\">H</span><span class=\"bp\">.</span><span class=\"n\">trans</span> <span class=\"err\">$</span>\n<span class=\"n\">H</span><span class=\"bp\">.</span><span class=\"n\">trans</span> <span class=\"err\">$</span> <span class=\"n\">H</span><span class=\"bp\">.</span><span class=\"n\">trans</span> <span class=\"err\">$</span> <span class=\"n\">H</span><span class=\"bp\">.</span><span class=\"n\">trans</span> <span class=\"err\">$</span> <span class=\"n\">H</span><span class=\"bp\">.</span><span class=\"n\">trans</span> <span class=\"err\">$</span> <span class=\"n\">H</span><span class=\"bp\">.</span><span class=\"n\">trans</span> <span class=\"err\">$</span> <span class=\"n\">H</span><span class=\"bp\">.</span><span class=\"n\">trans</span> <span class=\"err\">$</span> <span class=\"n\">H</span><span class=\"bp\">.</span><span class=\"n\">trans</span> <span class=\"err\">$</span> <span class=\"n\">H</span><span class=\"bp\">.</span><span class=\"n\">trans</span> <span class=\"err\">$</span> <span class=\"n\">H</span><span class=\"bp\">.</span><span class=\"n\">trans</span> <span class=\"err\">$</span> <span class=\"n\">H</span><span class=\"bp\">.</span><span class=\"n\">trans</span> <span class=\"err\">$</span>\n<span class=\"n\">H</span><span class=\"bp\">.</span><span class=\"n\">trans</span> <span class=\"err\">$</span> <span class=\"n\">H</span><span class=\"bp\">.</span><span class=\"n\">trans</span> <span class=\"err\">$</span> <span class=\"n\">H</span><span class=\"bp\">.</span><span class=\"n\">trans</span> <span class=\"err\">$</span> <span class=\"n\">H</span><span class=\"bp\">.</span><span class=\"n\">trans</span> <span class=\"err\">$</span> <span class=\"n\">H</span><span class=\"bp\">.</span><span class=\"n\">trans</span> <span class=\"err\">$</span> <span class=\"n\">H</span><span class=\"bp\">.</span><span class=\"n\">trans</span> <span class=\"err\">$</span> <span class=\"n\">H</span><span class=\"bp\">.</span><span class=\"n\">trans</span> <span class=\"err\">$</span> <span class=\"n\">H</span><span class=\"bp\">.</span><span class=\"n\">trans</span> <span class=\"err\">$</span> <span class=\"n\">H</span><span class=\"bp\">.</span><span class=\"n\">trans</span> <span class=\"err\">$</span> <span class=\"n\">H</span><span class=\"bp\">.</span><span class=\"n\">trans</span> <span class=\"err\">$</span>\n<span class=\"n\">H</span><span class=\"bp\">.</span><span class=\"n\">trans</span> <span class=\"err\">$</span> <span class=\"n\">H</span><span class=\"bp\">.</span><span class=\"n\">trans</span> <span class=\"err\">$</span> <span class=\"n\">H</span><span class=\"bp\">.</span><span class=\"n\">trans</span> <span class=\"err\">$</span> <span class=\"n\">H</span><span class=\"bp\">.</span><span class=\"n\">trans</span> <span class=\"err\">$</span> <span class=\"n\">H</span><span class=\"bp\">.</span><span class=\"n\">trans</span> <span class=\"err\">$</span> <span class=\"n\">H</span><span class=\"bp\">.</span><span class=\"n\">trans</span> <span class=\"err\">$</span> <span class=\"n\">H</span><span class=\"bp\">.</span><span class=\"n\">trans</span> <span class=\"err\">$</span> <span class=\"n\">H</span><span class=\"bp\">.</span><span class=\"n\">trans</span> <span class=\"err\">$</span> <span class=\"n\">H</span><span class=\"bp\">.</span><span class=\"n\">trans</span> <span class=\"err\">$</span> <span class=\"n\">H</span><span class=\"bp\">.</span><span class=\"n\">trans</span> <span class=\"err\">$</span>\n<span class=\"n\">H</span><span class=\"bp\">.</span><span class=\"n\">trans</span> <span class=\"err\">$</span> <span class=\"n\">H</span><span class=\"bp\">.</span><span class=\"n\">trans</span> <span class=\"err\">$</span> <span class=\"n\">H</span><span class=\"bp\">.</span><span class=\"n\">trans</span> <span class=\"err\">$</span> <span class=\"n\">H</span><span class=\"bp\">.</span><span class=\"n\">trans</span> <span class=\"err\">$</span> <span class=\"n\">H</span><span class=\"bp\">.</span><span class=\"n\">trans</span> <span class=\"err\">$</span> <span class=\"n\">H</span><span class=\"bp\">.</span><span class=\"n\">trans</span> <span class=\"err\">$</span> <span class=\"n\">H</span><span class=\"bp\">.</span><span class=\"n\">trans</span> <span class=\"err\">$</span> <span class=\"n\">H</span><span class=\"bp\">.</span><span class=\"n\">trans</span> <span class=\"err\">$</span> <span class=\"n\">H</span><span class=\"bp\">.</span><span class=\"n\">trans</span> <span class=\"err\">$</span> <span class=\"n\">H</span><span class=\"bp\">.</span><span class=\"n\">trans</span> <span class=\"err\">$</span>\n<span class=\"n\">H</span><span class=\"bp\">.</span><span class=\"n\">trans</span> <span class=\"err\">$</span> <span class=\"n\">H</span><span class=\"bp\">.</span><span class=\"n\">trans</span> <span class=\"err\">$</span> <span class=\"n\">H</span><span class=\"bp\">.</span><span class=\"n\">trans</span> <span class=\"err\">$</span> <span class=\"n\">H</span><span class=\"bp\">.</span><span class=\"n\">trans</span> <span class=\"err\">$</span> <span class=\"n\">H</span><span class=\"bp\">.</span><span class=\"n\">trans</span> <span class=\"err\">$</span> <span class=\"n\">H</span><span class=\"bp\">.</span><span class=\"n\">trans</span> <span class=\"err\">$</span> <span class=\"n\">H</span><span class=\"bp\">.</span><span class=\"n\">trans</span> <span class=\"err\">$</span> <span class=\"n\">H</span><span class=\"bp\">.</span><span class=\"n\">trans</span> <span class=\"err\">$</span> <span class=\"n\">H</span><span class=\"bp\">.</span><span class=\"n\">trans</span> <span class=\"err\">$</span> <span class=\"n\">H</span><span class=\"bp\">.</span><span class=\"n\">trans</span> <span class=\"err\">$</span>\n<span class=\"n\">H</span><span class=\"bp\">.</span><span class=\"n\">trans</span> <span class=\"err\">$</span> <span class=\"n\">H</span><span class=\"bp\">.</span><span class=\"n\">trans</span> <span class=\"err\">$</span> <span class=\"n\">H</span><span class=\"bp\">.</span><span class=\"n\">trans</span> <span class=\"err\">$</span> <span class=\"n\">H</span><span class=\"bp\">.</span><span class=\"n\">trans</span> <span class=\"err\">$</span> <span class=\"n\">H</span><span class=\"bp\">.</span><span class=\"n\">trans</span> <span class=\"err\">$</span> <span class=\"n\">H</span><span class=\"bp\">.</span><span class=\"n\">trans</span> <span class=\"err\">$</span> <span class=\"n\">H</span><span class=\"bp\">.</span><span class=\"n\">trans</span> <span class=\"err\">$</span> <span class=\"n\">H</span><span class=\"bp\">.</span><span class=\"n\">trans</span> <span class=\"err\">$</span> <span class=\"n\">H</span><span class=\"bp\">.</span><span class=\"n\">trans</span> <span class=\"err\">$</span> <span class=\"n\">H</span><span class=\"bp\">.</span><span class=\"n\">trans</span> <span class=\"err\">$</span> <span class=\"n\">rfl</span>\n</code></pre></div>",
        "id": 205312783,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1595990371
    },
    {
        "content": "<p>so a difference of 2000x</p>",
        "id": 205312786,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1595990381
    },
    {
        "content": "<p>faster when chained:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"kn\">set_option</span> <span class=\"n\">profiler</span> <span class=\"n\">true</span>\n<span class=\"c1\">-- parsing took 38.9ms</span>\n<span class=\"kn\">theorem</span> <span class=\"n\">test</span> <span class=\"o\">(</span><span class=\"n\">H</span> <span class=\"o\">:</span> <span class=\"n\">true</span> <span class=\"bp\">=</span> <span class=\"n\">true</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"n\">true</span> <span class=\"o\">:=</span>\n<span class=\"k\">begin</span>\n  <span class=\"n\">rw</span> <span class=\"o\">[</span><span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">H</span><span class=\"o\">,</span>\n      <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">H</span><span class=\"o\">,</span>\n      <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">H</span><span class=\"o\">,</span>\n      <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">H</span><span class=\"o\">,</span>\n      <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">H</span><span class=\"o\">,</span>\n      <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">H</span><span class=\"o\">,</span>\n      <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">H</span><span class=\"o\">,</span>\n      <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">H</span><span class=\"o\">,</span>\n      <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">H</span><span class=\"o\">,</span>\n      <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">H</span><span class=\"o\">],</span>\n<span class=\"kn\">end</span>\n</code></pre></div>",
        "id": 205312951,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1595990599
    },
    {
        "content": "<p>Shouldn't the control be repeating some other tactic  a bunch?</p>",
        "id": 205314514,
        "sender_full_name": "Alex J. Best",
        "timestamp": 1595992601
    },
    {
        "content": "<p>Of course <code>rw</code> is not exactly <code>.trans</code>. Maybe write a term-mode proof of</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"kn\">theorem</span> <span class=\"n\">test</span> <span class=\"o\">(</span><span class=\"n\">H</span> <span class=\"o\">:</span> <span class=\"n\">true</span> <span class=\"bp\">=</span> <span class=\"n\">true</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">f</span> <span class=\"o\">:</span> <span class=\"kt\">Prop</span> <span class=\"bp\">-&gt;</span> <span class=\"kt\">Prop</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"n\">f</span> <span class=\"n\">true</span> <span class=\"bp\">=</span> <span class=\"n\">f</span> <span class=\"n\">true</span> <span class=\"o\">:=</span>\n</code></pre></div>\n\n\n<p>instead</p>",
        "id": 205317370,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1595997000
    },
    {
        "content": "<p>What I'm mostly surprised by is the massive difference between the chained and unchained <code>rw</code>'s</p>",
        "id": 205317411,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1595997022
    },
    {
        "content": "<p>I've noticed this before. I tended not to chain rewrites until I realised it gave a speedup</p>",
        "id": 205324589,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1596006752
    },
    {
        "content": "<p>brilliant</p>",
        "id": 205326215,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1596008194
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"110049\">@Mario Carneiro</span> is there some hidden bug in the parsing of <code>rw</code> that makes it slow? I remember <span class=\"user-mention\" data-user-id=\"260921\">@Markus Himmel</span> telling me that <code>split</code> has a hidden bug</p>",
        "id": 205326951,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1596008870
    },
    {
        "content": "<p>As Alex says, try a control which uses lots of tactics, particularly ones without arguments like <code>skip</code></p>",
        "id": 205327498,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1596009309
    },
    {
        "content": "<div class=\"codehilite\"><pre><span></span><code><span class=\"kn\">set_option</span> <span class=\"n\">profiler</span> <span class=\"n\">true</span>\n<span class=\"c1\">-- parsing took 4.33ms</span>\n<span class=\"kn\">theorem</span> <span class=\"n\">test</span> <span class=\"o\">(</span><span class=\"n\">H</span> <span class=\"o\">:</span> <span class=\"n\">true</span> <span class=\"bp\">=</span> <span class=\"n\">true</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"n\">true</span> <span class=\"o\">:=</span>\n<span class=\"k\">begin</span>\n  <span class=\"n\">skip</span><span class=\"o\">,</span> <span class=\"n\">skip</span><span class=\"o\">,</span> <span class=\"n\">skip</span><span class=\"o\">,</span> <span class=\"n\">skip</span><span class=\"o\">,</span> <span class=\"n\">skip</span><span class=\"o\">,</span> <span class=\"n\">skip</span><span class=\"o\">,</span> <span class=\"n\">skip</span><span class=\"o\">,</span> <span class=\"n\">skip</span><span class=\"o\">,</span> <span class=\"n\">skip</span><span class=\"o\">,</span> <span class=\"n\">skip</span><span class=\"o\">,</span>\n  <span class=\"n\">skip</span><span class=\"o\">,</span> <span class=\"n\">skip</span><span class=\"o\">,</span> <span class=\"n\">skip</span><span class=\"o\">,</span> <span class=\"n\">skip</span><span class=\"o\">,</span> <span class=\"n\">skip</span><span class=\"o\">,</span> <span class=\"n\">skip</span><span class=\"o\">,</span> <span class=\"n\">skip</span><span class=\"o\">,</span> <span class=\"n\">skip</span><span class=\"o\">,</span> <span class=\"n\">skip</span><span class=\"o\">,</span> <span class=\"n\">skip</span><span class=\"o\">,</span>\n  <span class=\"n\">skip</span><span class=\"o\">,</span> <span class=\"n\">skip</span><span class=\"o\">,</span> <span class=\"n\">skip</span><span class=\"o\">,</span> <span class=\"n\">skip</span><span class=\"o\">,</span> <span class=\"n\">skip</span><span class=\"o\">,</span> <span class=\"n\">skip</span><span class=\"o\">,</span> <span class=\"n\">skip</span><span class=\"o\">,</span> <span class=\"n\">skip</span><span class=\"o\">,</span> <span class=\"n\">skip</span><span class=\"o\">,</span> <span class=\"n\">skip</span><span class=\"o\">,</span>\n  <span class=\"n\">skip</span><span class=\"o\">,</span> <span class=\"n\">skip</span><span class=\"o\">,</span> <span class=\"n\">skip</span><span class=\"o\">,</span> <span class=\"n\">skip</span><span class=\"o\">,</span> <span class=\"n\">skip</span><span class=\"o\">,</span> <span class=\"n\">skip</span><span class=\"o\">,</span> <span class=\"n\">skip</span><span class=\"o\">,</span> <span class=\"n\">skip</span><span class=\"o\">,</span> <span class=\"n\">skip</span><span class=\"o\">,</span> <span class=\"n\">skip</span><span class=\"o\">,</span>\n  <span class=\"n\">skip</span><span class=\"o\">,</span> <span class=\"n\">skip</span><span class=\"o\">,</span> <span class=\"n\">skip</span><span class=\"o\">,</span> <span class=\"n\">skip</span><span class=\"o\">,</span> <span class=\"n\">skip</span><span class=\"o\">,</span> <span class=\"n\">skip</span><span class=\"o\">,</span> <span class=\"n\">skip</span><span class=\"o\">,</span> <span class=\"n\">skip</span><span class=\"o\">,</span> <span class=\"n\">skip</span><span class=\"o\">,</span> <span class=\"n\">skip</span><span class=\"o\">,</span>\n  <span class=\"n\">skip</span><span class=\"o\">,</span> <span class=\"n\">skip</span><span class=\"o\">,</span> <span class=\"n\">skip</span><span class=\"o\">,</span> <span class=\"n\">skip</span><span class=\"o\">,</span> <span class=\"n\">skip</span><span class=\"o\">,</span> <span class=\"n\">skip</span><span class=\"o\">,</span> <span class=\"n\">skip</span><span class=\"o\">,</span> <span class=\"n\">skip</span><span class=\"o\">,</span> <span class=\"n\">skip</span><span class=\"o\">,</span> <span class=\"n\">skip</span><span class=\"o\">,</span>\n  <span class=\"n\">skip</span><span class=\"o\">,</span> <span class=\"n\">skip</span><span class=\"o\">,</span> <span class=\"n\">skip</span><span class=\"o\">,</span> <span class=\"n\">skip</span><span class=\"o\">,</span> <span class=\"n\">skip</span><span class=\"o\">,</span> <span class=\"n\">skip</span><span class=\"o\">,</span> <span class=\"n\">skip</span><span class=\"o\">,</span> <span class=\"n\">skip</span><span class=\"o\">,</span> <span class=\"n\">skip</span><span class=\"o\">,</span> <span class=\"n\">skip</span><span class=\"o\">,</span>\n  <span class=\"n\">skip</span><span class=\"o\">,</span> <span class=\"n\">skip</span><span class=\"o\">,</span> <span class=\"n\">skip</span><span class=\"o\">,</span> <span class=\"n\">skip</span><span class=\"o\">,</span> <span class=\"n\">skip</span><span class=\"o\">,</span> <span class=\"n\">skip</span><span class=\"o\">,</span> <span class=\"n\">skip</span><span class=\"o\">,</span> <span class=\"n\">skip</span><span class=\"o\">,</span> <span class=\"n\">skip</span><span class=\"o\">,</span> <span class=\"n\">skip</span><span class=\"o\">,</span>\n  <span class=\"n\">skip</span><span class=\"o\">,</span> <span class=\"n\">skip</span><span class=\"o\">,</span> <span class=\"n\">skip</span><span class=\"o\">,</span> <span class=\"n\">skip</span><span class=\"o\">,</span> <span class=\"n\">skip</span><span class=\"o\">,</span> <span class=\"n\">skip</span><span class=\"o\">,</span> <span class=\"n\">skip</span><span class=\"o\">,</span> <span class=\"n\">skip</span><span class=\"o\">,</span> <span class=\"n\">skip</span><span class=\"o\">,</span> <span class=\"n\">skip</span><span class=\"o\">,</span>\n  <span class=\"n\">skip</span><span class=\"o\">,</span> <span class=\"n\">skip</span><span class=\"o\">,</span> <span class=\"n\">skip</span><span class=\"o\">,</span> <span class=\"n\">skip</span><span class=\"o\">,</span> <span class=\"n\">skip</span><span class=\"o\">,</span> <span class=\"n\">skip</span><span class=\"o\">,</span> <span class=\"n\">skip</span><span class=\"o\">,</span> <span class=\"n\">skip</span><span class=\"o\">,</span> <span class=\"n\">skip</span><span class=\"o\">,</span> <span class=\"n\">skip</span><span class=\"o\">,</span>\n<span class=\"kn\">end</span>\n</code></pre></div>",
        "id": 205328289,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1596009906
    },
    {
        "content": "<p>It's all argument parsing. Your first test is about 520 ms for me, and with</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"kn\">import</span> <span class=\"n\">tactic</span>\n\n<span class=\"kn\">namespace</span> <span class=\"n\">tactic</span>\n<span class=\"kn\">namespace</span> <span class=\"n\">interactive</span>\n<span class=\"n\">setup_tactic_parser</span>\n\n<span class=\"n\">meta</span> <span class=\"n\">def</span> <span class=\"n\">foo</span> <span class=\"o\">(</span><span class=\"n\">q</span> <span class=\"o\">:</span> <span class=\"n\">parse</span> <span class=\"n\">rw_rules</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">l</span> <span class=\"o\">:</span> <span class=\"n\">parse</span> <span class=\"n\">location</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">cfg</span> <span class=\"o\">:</span> <span class=\"n\">rewrite_cfg</span> <span class=\"o\">:=</span> <span class=\"o\">{})</span> <span class=\"o\">:</span> <span class=\"n\">tactic</span> <span class=\"n\">unit</span> <span class=\"o\">:=</span>\n<span class=\"n\">skip</span>\n<span class=\"kn\">end</span> <span class=\"n\">interactive</span>\n<span class=\"kn\">end</span> <span class=\"n\">tactic</span>\n\n<span class=\"kn\">set_option</span> <span class=\"n\">profiler</span> <span class=\"n\">true</span>\n<span class=\"kn\">theorem</span> <span class=\"n\">test</span> <span class=\"o\">(</span><span class=\"n\">H</span> <span class=\"o\">:</span> <span class=\"n\">true</span> <span class=\"bp\">=</span> <span class=\"n\">true</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"n\">true</span> <span class=\"o\">:=</span>\n<span class=\"k\">begin</span>\n  <span class=\"n\">foo</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">foo</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">foo</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">foo</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">foo</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">foo</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">foo</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">foo</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">foo</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">foo</span> <span class=\"n\">H</span><span class=\"o\">,</span>\n  <span class=\"n\">foo</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">foo</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">foo</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">foo</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">foo</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">foo</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">foo</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">foo</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">foo</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">foo</span> <span class=\"n\">H</span><span class=\"o\">,</span>\n  <span class=\"n\">foo</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">foo</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">foo</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">foo</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">foo</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">foo</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">foo</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">foo</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">foo</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">foo</span> <span class=\"n\">H</span><span class=\"o\">,</span>\n  <span class=\"n\">foo</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">foo</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">foo</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">foo</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">foo</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">foo</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">foo</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">foo</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">foo</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">foo</span> <span class=\"n\">H</span><span class=\"o\">,</span>\n  <span class=\"n\">foo</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">foo</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">foo</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">foo</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">foo</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">foo</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">foo</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">foo</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">foo</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">foo</span> <span class=\"n\">H</span><span class=\"o\">,</span>\n  <span class=\"n\">foo</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">foo</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">foo</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">foo</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">foo</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">foo</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">foo</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">foo</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">foo</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">foo</span> <span class=\"n\">H</span><span class=\"o\">,</span>\n  <span class=\"n\">foo</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">foo</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">foo</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">foo</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">foo</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">foo</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">foo</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">foo</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">foo</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">foo</span> <span class=\"n\">H</span><span class=\"o\">,</span>\n  <span class=\"n\">foo</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">foo</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">foo</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">foo</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">foo</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">foo</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">foo</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">foo</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">foo</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">foo</span> <span class=\"n\">H</span><span class=\"o\">,</span>\n  <span class=\"n\">foo</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">foo</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">foo</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">foo</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">foo</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">foo</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">foo</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">foo</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">foo</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">foo</span> <span class=\"n\">H</span><span class=\"o\">,</span>\n  <span class=\"n\">foo</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">foo</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">foo</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">foo</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">foo</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">foo</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">foo</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">foo</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">foo</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">foo</span> <span class=\"n\">H</span><span class=\"o\">,</span>\n<span class=\"kn\">end</span>\n</code></pre></div>\n\n\n<p>it's about the same, while deleting the <code>cfg</code> argument drops it to 420 ms, deleting <code>l</code> drops to 300 ms, changing the <code>q</code> parser to <code>(q : parse (rw_rule_p texpr)) </code> drops to 240 ms, and <code>(q : parse texpr)</code> drops to 60 ms. As I said in another thread, parser combinators in lean are expensive because inlining sucks</p>",
        "id": 205328401,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1596010012
    },
    {
        "content": "<p>thanks</p>",
        "id": 205330100,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1596011580
    }
]