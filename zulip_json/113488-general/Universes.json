[
    {
        "content": "<p>Below I have a definition of category and a proof that the category of categories is a category... sort of. There's of course universe issues, which is maybe the most interesting part.</p>\n<p>I want my definition of category to take in a universe. And I want to be able to express a strictly higher universe given any universe. That way, with my closed form Next_universe(Universe u) I can express that the category of categories is indeed a category... for any choice of universe to start with.</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kd\">notation</span> <span class=\"s2\">\"Σ\"</span> <span class=\"s2\">\"(\"</span> <span class=\"n\">X</span> <span class=\"s2\">\":\"</span> <span class=\"n\">A</span> <span class=\"s2\">\")\"</span> <span class=\"s2\">\":\"</span> <span class=\"n\">F</span> <span class=\"bp\">=&gt;</span> <span class=\"bp\">Σ'</span> <span class=\"o\">(</span><span class=\"n\">X</span> <span class=\"o\">:</span> <span class=\"n\">A</span><span class=\"o\">),</span> <span class=\"n\">F</span>\n<span class=\"kd\">notation</span> <span class=\"s2\">\"Π\"</span> <span class=\"s2\">\"(\"</span> <span class=\"n\">X</span> <span class=\"s2\">\":\"</span> <span class=\"n\">A</span> <span class=\"s2\">\")\"</span> <span class=\"s2\">\":\"</span> <span class=\"n\">F</span> <span class=\"bp\">=&gt;</span> <span class=\"k\">forall</span> <span class=\"o\">(</span><span class=\"n\">X</span> <span class=\"o\">:</span> <span class=\"n\">A</span><span class=\"o\">),</span> <span class=\"n\">F</span>\n<span class=\"kd\">notation</span> <span class=\"s2\">\"(\"</span>  <span class=\"n\">x</span>  <span class=\"s2\">\":\"</span>  <span class=\"n\">X</span>  <span class=\"s2\">\")\"</span> <span class=\"s2\">\"↦\"</span> <span class=\"n\">F</span> <span class=\"bp\">=&gt;</span> <span class=\"o\">(</span><span class=\"k\">fun</span> <span class=\"o\">(</span><span class=\"n\">x</span> <span class=\"o\">:</span> <span class=\"n\">X</span><span class=\"o\">)</span> <span class=\"bp\">=&gt;</span> <span class=\"n\">F</span><span class=\"o\">)</span>\n<span class=\"kd\">notation</span> <span class=\"s2\">\"*\"</span> <span class=\"bp\">=&gt;</span> <span class=\"n\">Unit.unit</span>\n<span class=\"kd\">notation</span> <span class=\"s2\">\"⊛\"</span> <span class=\"bp\">=&gt;</span> <span class=\"n\">Unit</span>\n<span class=\"kd\">notation</span> <span class=\"n\">x</span> <span class=\"s2\">\"≡\"</span> <span class=\"n\">y</span> <span class=\"bp\">=&gt;</span> <span class=\"bp\">Σ</span><span class=\"o\">(</span><span class=\"n\">_</span><span class=\"o\">:</span><span class=\"n\">x</span><span class=\"bp\">=</span><span class=\"n\">y</span><span class=\"o\">):</span><span class=\"bp\">⊛</span>\n<span class=\"kd\">def</span> <span class=\"n\">Refl</span> <span class=\"o\">{</span><span class=\"n\">X</span> <span class=\"o\">:</span> <span class=\"kt\">Type</span> <span class=\"n\">_</span><span class=\"o\">}</span> <span class=\"o\">(</span><span class=\"n\">x</span> <span class=\"o\">:</span> <span class=\"n\">X</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"n\">x</span><span class=\"bp\">≡</span><span class=\"n\">x</span> <span class=\"o\">:=</span> <span class=\"n\">PSigma.mk</span> <span class=\"o\">(</span><span class=\"n\">Eq.refl</span> <span class=\"n\">x</span><span class=\"o\">)</span> <span class=\"bp\">*</span>\n<span class=\"kd\">def</span> <span class=\"n\">Symm</span> <span class=\"o\">{</span><span class=\"n\">X</span> <span class=\"o\">:</span> <span class=\"kt\">Type</span> <span class=\"n\">_</span><span class=\"o\">}</span> <span class=\"o\">{</span><span class=\"n\">x</span> <span class=\"o\">:</span> <span class=\"n\">X</span><span class=\"o\">}</span> <span class=\"o\">{</span><span class=\"n\">y</span> <span class=\"o\">:</span> <span class=\"n\">X</span><span class=\"o\">}</span> <span class=\"o\">(</span><span class=\"n\">f</span><span class=\"o\">:</span><span class=\"bp\">Σ</span><span class=\"o\">(</span><span class=\"n\">_</span> <span class=\"o\">:</span> <span class=\"n\">x</span> <span class=\"bp\">=</span> <span class=\"n\">y</span><span class=\"o\">):</span><span class=\"bp\">⊛</span><span class=\"o\">):(</span><span class=\"n\">y</span><span class=\"bp\">≡</span><span class=\"n\">x</span><span class=\"o\">)</span> <span class=\"o\">:=</span> <span class=\"n\">PSigma.mk</span> <span class=\"o\">(</span><span class=\"n\">Eq.symm</span> <span class=\"n\">f.1</span><span class=\"o\">)</span> <span class=\"bp\">*</span>\n<span class=\"kd\">notation</span> <span class=\"s2\">\"-\"</span> <span class=\"n\">p</span> <span class=\"bp\">=&gt;</span> <span class=\"n\">Symm</span> <span class=\"n\">p</span>\n<span class=\"kd\">def</span> <span class=\"n\">Trns</span> <span class=\"o\">{</span><span class=\"n\">X</span> <span class=\"o\">:</span> <span class=\"kt\">Type</span> <span class=\"n\">_</span><span class=\"o\">}</span> <span class=\"o\">{</span><span class=\"n\">x</span> <span class=\"o\">:</span> <span class=\"n\">X</span><span class=\"o\">}</span> <span class=\"o\">{</span><span class=\"n\">y</span> <span class=\"o\">:</span> <span class=\"n\">X</span><span class=\"o\">}</span> <span class=\"o\">{</span><span class=\"n\">z</span> <span class=\"o\">:</span> <span class=\"n\">X</span><span class=\"o\">}</span> <span class=\"o\">(</span><span class=\"n\">f</span> <span class=\"o\">:</span> <span class=\"bp\">Σ</span><span class=\"o\">(</span><span class=\"n\">_</span> <span class=\"o\">:</span> <span class=\"n\">x</span> <span class=\"bp\">=</span> <span class=\"n\">y</span><span class=\"o\">):</span><span class=\"bp\">⊛</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">g</span> <span class=\"o\">:</span> <span class=\"bp\">Σ</span><span class=\"o\">(</span><span class=\"n\">_</span> <span class=\"o\">:</span> <span class=\"n\">y</span> <span class=\"bp\">=</span> <span class=\"n\">z</span><span class=\"o\">):</span><span class=\"bp\">⊛</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"o\">(</span><span class=\"n\">x</span><span class=\"bp\">≡</span><span class=\"n\">z</span><span class=\"o\">):=</span> <span class=\"n\">PSigma.mk</span> <span class=\"o\">(</span><span class=\"n\">Eq.trans</span> <span class=\"n\">f.1</span> <span class=\"n\">g.1</span><span class=\"o\">)</span> <span class=\"bp\">*</span>\n<span class=\"kd\">notation</span> <span class=\"n\">p</span> <span class=\"s2\">\"~\"</span> <span class=\"n\">q</span> <span class=\"bp\">=&gt;</span> <span class=\"n\">Trns</span> <span class=\"n\">p</span> <span class=\"n\">q</span>\n<span class=\"kd\">def</span> <span class=\"n\">Push</span> <span class=\"o\">{</span><span class=\"n\">X</span><span class=\"o\">:</span><span class=\"kt\">Type</span> <span class=\"n\">_</span><span class=\"o\">}{</span><span class=\"n\">Y</span><span class=\"o\">:</span><span class=\"kt\">Type</span> <span class=\"n\">_</span><span class=\"o\">}{</span><span class=\"n\">x</span><span class=\"o\">:</span><span class=\"n\">X</span><span class=\"o\">}{</span><span class=\"n\">y</span><span class=\"o\">:</span><span class=\"n\">X</span><span class=\"o\">}(</span><span class=\"n\">f</span><span class=\"o\">:</span><span class=\"bp\">Π</span><span class=\"o\">(</span><span class=\"n\">_</span><span class=\"o\">:</span><span class=\"n\">X</span><span class=\"o\">):</span><span class=\"n\">Y</span><span class=\"o\">)(</span><span class=\"n\">p</span><span class=\"o\">:</span><span class=\"n\">x</span><span class=\"bp\">≡</span><span class=\"n\">y</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"o\">(</span><span class=\"n\">f</span> <span class=\"n\">x</span> <span class=\"bp\">≡</span> <span class=\"n\">f</span> <span class=\"n\">y</span><span class=\"o\">)</span> <span class=\"o\">:=</span> <span class=\"o\">⟨</span><span class=\"n\">congrArg</span> <span class=\"n\">f</span> <span class=\"n\">p.1</span><span class=\"o\">,</span> <span class=\"bp\">*</span><span class=\"o\">⟩</span>\n<span class=\"kd\">def</span> <span class=\"n\">Cat</span> <span class=\"o\">:=</span>\n<span class=\"bp\">Σ</span><span class=\"o\">(</span><span class=\"n\">Obj</span><span class=\"o\">:</span><span class=\"kt\">Type</span> <span class=\"n\">_</span><span class=\"o\">):</span>\n<span class=\"bp\">Σ</span><span class=\"o\">(</span><span class=\"n\">Hom</span><span class=\"o\">:</span><span class=\"bp\">Π</span><span class=\"o\">(</span><span class=\"n\">_</span><span class=\"o\">:</span><span class=\"n\">Obj</span><span class=\"o\">):</span><span class=\"bp\">Π</span><span class=\"o\">(</span><span class=\"n\">_</span><span class=\"o\">:</span><span class=\"n\">Obj</span><span class=\"o\">):(</span><span class=\"kt\">Type</span> <span class=\"n\">_</span><span class=\"o\">)):</span>\n<span class=\"bp\">Σ</span><span class=\"o\">(</span><span class=\"n\">Id</span><span class=\"o\">:</span><span class=\"bp\">Π</span><span class=\"o\">(</span><span class=\"n\">X</span><span class=\"o\">:</span><span class=\"n\">Obj</span><span class=\"o\">):(</span><span class=\"n\">Hom</span> <span class=\"n\">X</span> <span class=\"n\">X</span><span class=\"o\">)):</span>\n<span class=\"bp\">Σ</span><span class=\"o\">(</span><span class=\"n\">Cmp</span><span class=\"o\">:</span><span class=\"bp\">Π</span><span class=\"o\">(</span><span class=\"n\">X</span><span class=\"o\">:</span><span class=\"n\">Obj</span><span class=\"o\">):</span><span class=\"bp\">Π</span><span class=\"o\">(</span><span class=\"n\">Y</span><span class=\"o\">:</span><span class=\"n\">Obj</span><span class=\"o\">):</span><span class=\"bp\">Π</span><span class=\"o\">(</span><span class=\"n\">Z</span><span class=\"o\">:</span><span class=\"n\">Obj</span><span class=\"o\">):</span><span class=\"bp\">Π</span><span class=\"o\">(</span><span class=\"n\">_</span><span class=\"o\">:</span><span class=\"n\">Hom</span> <span class=\"n\">X</span> <span class=\"n\">Y</span><span class=\"o\">):</span><span class=\"bp\">Π</span><span class=\"o\">(</span><span class=\"n\">_</span><span class=\"o\">:</span><span class=\"n\">Hom</span> <span class=\"n\">Y</span> <span class=\"n\">Z</span><span class=\"o\">):(</span><span class=\"n\">Hom</span> <span class=\"n\">X</span> <span class=\"n\">Z</span><span class=\"o\">)):</span>\n<span class=\"bp\">Σ</span><span class=\"o\">(</span><span class=\"n\">_</span><span class=\"o\">:</span><span class=\"bp\">Π</span><span class=\"o\">(</span><span class=\"n\">X</span><span class=\"o\">:</span><span class=\"n\">Obj</span><span class=\"o\">):</span><span class=\"bp\">Π</span><span class=\"o\">(</span><span class=\"n\">Y</span><span class=\"o\">:</span><span class=\"n\">Obj</span><span class=\"o\">):</span><span class=\"bp\">Π</span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"o\">:</span><span class=\"n\">Hom</span> <span class=\"n\">X</span> <span class=\"n\">Y</span><span class=\"o\">):(</span><span class=\"n\">Cmp</span> <span class=\"n\">X</span> <span class=\"n\">Y</span> <span class=\"n\">Y</span><span class=\"o\">)</span> <span class=\"n\">f</span> <span class=\"o\">(</span><span class=\"n\">Id</span> <span class=\"n\">Y</span><span class=\"o\">)</span> <span class=\"bp\">≡</span> <span class=\"n\">f</span><span class=\"o\">):</span>\n<span class=\"bp\">Σ</span><span class=\"o\">(</span><span class=\"n\">_</span><span class=\"o\">:</span><span class=\"bp\">Π</span><span class=\"o\">(</span><span class=\"n\">X</span><span class=\"o\">:</span><span class=\"n\">Obj</span><span class=\"o\">):</span><span class=\"bp\">Π</span><span class=\"o\">(</span><span class=\"n\">Y</span><span class=\"o\">:</span><span class=\"n\">Obj</span><span class=\"o\">):</span><span class=\"bp\">Π</span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"o\">:</span><span class=\"n\">Hom</span> <span class=\"n\">X</span> <span class=\"n\">Y</span><span class=\"o\">):(</span><span class=\"n\">Cmp</span> <span class=\"n\">X</span> <span class=\"n\">X</span> <span class=\"n\">Y</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">Id</span> <span class=\"n\">X</span><span class=\"o\">)</span> <span class=\"n\">f</span> <span class=\"bp\">≡</span> <span class=\"n\">f</span><span class=\"o\">):</span>\n<span class=\"bp\">Σ</span><span class=\"o\">(</span><span class=\"n\">_</span><span class=\"o\">:</span><span class=\"bp\">Π</span><span class=\"o\">(</span><span class=\"n\">W</span><span class=\"o\">:</span><span class=\"n\">Obj</span><span class=\"o\">):</span><span class=\"bp\">Π</span><span class=\"o\">(</span><span class=\"n\">X</span><span class=\"o\">:</span><span class=\"n\">Obj</span><span class=\"o\">):</span><span class=\"bp\">Π</span><span class=\"o\">(</span><span class=\"n\">Y</span><span class=\"o\">:</span><span class=\"n\">Obj</span><span class=\"o\">):</span><span class=\"bp\">Π</span><span class=\"o\">(</span><span class=\"n\">Z</span><span class=\"o\">:</span><span class=\"n\">Obj</span><span class=\"o\">):</span><span class=\"bp\">Π</span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"o\">:</span><span class=\"n\">Hom</span> <span class=\"n\">W</span> <span class=\"n\">X</span><span class=\"o\">):</span><span class=\"bp\">Π</span><span class=\"o\">(</span><span class=\"n\">g</span><span class=\"o\">:</span><span class=\"n\">Hom</span> <span class=\"n\">X</span> <span class=\"n\">Y</span><span class=\"o\">):</span><span class=\"bp\">Π</span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"o\">:</span><span class=\"n\">Hom</span> <span class=\"n\">Y</span> <span class=\"n\">Z</span><span class=\"o\">):(</span><span class=\"n\">Cmp</span> <span class=\"n\">W</span> <span class=\"n\">X</span> <span class=\"n\">Z</span><span class=\"o\">)</span> <span class=\"n\">f</span> <span class=\"o\">(</span><span class=\"n\">Cmp</span> <span class=\"n\">X</span> <span class=\"n\">Y</span> <span class=\"n\">Z</span> <span class=\"n\">g</span> <span class=\"n\">h</span><span class=\"o\">)</span> <span class=\"bp\">≡</span> <span class=\"n\">Cmp</span> <span class=\"n\">W</span> <span class=\"n\">Y</span> <span class=\"n\">Z</span> <span class=\"o\">(</span><span class=\"n\">Cmp</span> <span class=\"n\">W</span> <span class=\"n\">X</span> <span class=\"n\">Y</span> <span class=\"n\">f</span> <span class=\"n\">g</span><span class=\"o\">)</span> <span class=\"n\">h</span><span class=\"o\">):</span>\n<span class=\"bp\">⊛</span>\n\n<span class=\"kd\">def</span> <span class=\"n\">Obj</span> <span class=\"o\">(</span><span class=\"n\">C</span> <span class=\"o\">:</span> <span class=\"n\">Cat</span><span class=\"o\">)</span> <span class=\"o\">:=</span> <span class=\"n\">C.1</span>\n\n<span class=\"kd\">def</span> <span class=\"n\">Hom</span> <span class=\"o\">{</span><span class=\"n\">C</span> <span class=\"o\">:</span> <span class=\"n\">Cat</span> <span class=\"o\">}(</span><span class=\"n\">X</span> <span class=\"o\">:</span> <span class=\"n\">Obj</span> <span class=\"n\">C</span><span class=\"o\">)(</span><span class=\"n\">Y</span> <span class=\"o\">:</span> <span class=\"n\">Obj</span> <span class=\"n\">C</span><span class=\"o\">)</span> <span class=\"o\">:=</span> <span class=\"n\">C.2.1</span> <span class=\"n\">X</span> <span class=\"n\">Y</span>\n\n<span class=\"kd\">def</span> <span class=\"n\">Idn</span> <span class=\"o\">{</span> <span class=\"n\">C</span> <span class=\"o\">:</span> <span class=\"n\">Cat</span> <span class=\"o\">}</span> <span class=\"o\">(</span><span class=\"n\">X</span> <span class=\"o\">:</span> <span class=\"n\">Obj</span> <span class=\"n\">C</span><span class=\"o\">)</span> <span class=\"o\">:=</span> <span class=\"n\">C.2.2.1</span> <span class=\"n\">X</span>\n<span class=\"kd\">notation</span> <span class=\"s2\">\"𝟙\"</span> <span class=\"n\">X</span> <span class=\"bp\">=&gt;</span> <span class=\"n\">Idn</span> <span class=\"n\">X</span> <span class=\"c\">/-</span><span class=\"cm\">REVISE-/</span>\n\n<span class=\"kd\">def</span> <span class=\"n\">Cmp</span> <span class=\"o\">{</span><span class=\"n\">C</span> <span class=\"o\">:</span> <span class=\"n\">Cat</span><span class=\"o\">}</span> <span class=\"o\">{</span><span class=\"n\">X</span> <span class=\"o\">:</span> <span class=\"n\">Obj</span> <span class=\"n\">C</span><span class=\"o\">}</span> <span class=\"o\">{</span><span class=\"n\">Y</span> <span class=\"o\">:</span> <span class=\"n\">Obj</span> <span class=\"n\">C</span><span class=\"o\">}</span> <span class=\"o\">{</span><span class=\"n\">Z</span> <span class=\"o\">:</span> <span class=\"n\">Obj</span> <span class=\"n\">C</span><span class=\"o\">}</span> <span class=\"o\">(</span><span class=\"n\">f</span> <span class=\"o\">:</span> <span class=\"n\">Hom</span> <span class=\"n\">X</span> <span class=\"n\">Y</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">g</span> <span class=\"o\">:</span> <span class=\"n\">Hom</span> <span class=\"n\">Y</span> <span class=\"n\">Z</span><span class=\"o\">)</span> <span class=\"o\">:=</span> <span class=\"n\">C.2.2.2.1</span> <span class=\"n\">X</span> <span class=\"n\">Y</span> <span class=\"n\">Z</span> <span class=\"n\">f</span> <span class=\"n\">g</span>\n<span class=\"kd\">notation</span> <span class=\"n\">g</span> <span class=\"s2\">\"∘\"</span> <span class=\"n\">f</span> <span class=\"bp\">=&gt;</span> <span class=\"n\">Cmp</span> <span class=\"n\">f</span> <span class=\"n\">g</span>\n\n<span class=\"kd\">def</span> <span class=\"n\">Id1</span> <span class=\"o\">{</span><span class=\"n\">C</span> <span class=\"o\">:</span> <span class=\"n\">Cat</span><span class=\"o\">}</span> <span class=\"o\">{</span><span class=\"n\">X</span> <span class=\"o\">:</span> <span class=\"n\">Obj</span> <span class=\"n\">C</span><span class=\"o\">}</span> <span class=\"o\">{</span><span class=\"n\">Y</span> <span class=\"o\">:</span> <span class=\"n\">Obj</span> <span class=\"n\">C</span><span class=\"o\">}</span> <span class=\"o\">(</span><span class=\"n\">f</span> <span class=\"o\">:</span> <span class=\"n\">Hom</span> <span class=\"n\">X</span> <span class=\"n\">Y</span><span class=\"o\">)</span> <span class=\"o\">:=</span> <span class=\"n\">C.2.2.2.2.2.1</span> <span class=\"n\">X</span> <span class=\"n\">Y</span> <span class=\"n\">f</span>\n\n<span class=\"kd\">def</span> <span class=\"n\">Id2</span> <span class=\"o\">{</span><span class=\"n\">C</span> <span class=\"o\">:</span> <span class=\"n\">Cat</span><span class=\"o\">}</span> <span class=\"o\">{</span><span class=\"n\">X</span> <span class=\"o\">:</span> <span class=\"n\">Obj</span> <span class=\"n\">C</span><span class=\"o\">}</span> <span class=\"o\">{</span><span class=\"n\">Y</span> <span class=\"o\">:</span> <span class=\"n\">Obj</span> <span class=\"n\">C</span><span class=\"o\">}</span> <span class=\"o\">(</span><span class=\"n\">f</span> <span class=\"o\">:</span> <span class=\"n\">Hom</span> <span class=\"n\">X</span> <span class=\"n\">Y</span><span class=\"o\">)</span> <span class=\"o\">:=</span> <span class=\"n\">C.2.2.2.2.1</span> <span class=\"n\">X</span> <span class=\"n\">Y</span> <span class=\"n\">f</span>\n\n<span class=\"kd\">def</span> <span class=\"n\">Ass</span> <span class=\"o\">{</span><span class=\"n\">C</span> <span class=\"o\">:</span> <span class=\"n\">Cat</span><span class=\"o\">}</span> <span class=\"o\">{</span><span class=\"n\">W</span> <span class=\"o\">:</span> <span class=\"n\">Obj</span> <span class=\"n\">C</span><span class=\"o\">}</span> <span class=\"o\">{</span><span class=\"n\">X</span> <span class=\"o\">:</span> <span class=\"n\">Obj</span> <span class=\"n\">C</span><span class=\"o\">}</span> <span class=\"o\">{</span><span class=\"n\">Y</span> <span class=\"o\">:</span> <span class=\"n\">Obj</span> <span class=\"n\">C</span><span class=\"o\">}</span> <span class=\"o\">{</span><span class=\"n\">Z</span> <span class=\"o\">:</span> <span class=\"n\">Obj</span> <span class=\"n\">C</span><span class=\"o\">}</span> <span class=\"o\">(</span><span class=\"n\">f</span> <span class=\"o\">:</span> <span class=\"n\">Hom</span> <span class=\"n\">W</span> <span class=\"n\">X</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">g</span> <span class=\"o\">:</span> <span class=\"n\">Hom</span> <span class=\"n\">X</span> <span class=\"n\">Y</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">h</span> <span class=\"o\">:</span> <span class=\"n\">Hom</span> <span class=\"n\">Y</span> <span class=\"n\">Z</span><span class=\"o\">)</span> <span class=\"o\">:=</span> <span class=\"n\">C.2.2.2.2.2.2.1</span> <span class=\"n\">W</span> <span class=\"n\">X</span> <span class=\"n\">Y</span> <span class=\"n\">Z</span> <span class=\"n\">f</span> <span class=\"n\">g</span> <span class=\"n\">h</span>\n<span class=\"kd\">def</span> <span class=\"n\">CatHom</span> <span class=\"o\">(</span><span class=\"n\">C</span> <span class=\"o\">:</span> <span class=\"n\">Cat</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">D</span> <span class=\"o\">:</span> <span class=\"n\">Cat</span><span class=\"o\">)</span> <span class=\"o\">:=</span>\n<span class=\"bp\">Σ</span><span class=\"o\">(</span><span class=\"n\">FunObj</span> <span class=\"o\">:</span> <span class=\"bp\">Π</span><span class=\"o\">(</span><span class=\"n\">_</span> <span class=\"o\">:</span> <span class=\"n\">Obj</span> <span class=\"n\">C</span><span class=\"o\">):</span><span class=\"n\">Obj</span> <span class=\"n\">D</span><span class=\"o\">):</span>\n<span class=\"bp\">Σ</span><span class=\"o\">(</span><span class=\"n\">FunHom</span> <span class=\"o\">:</span> <span class=\"bp\">Π</span><span class=\"o\">(</span><span class=\"n\">X</span> <span class=\"o\">:</span> <span class=\"n\">Obj</span> <span class=\"n\">C</span><span class=\"o\">):</span><span class=\"bp\">Π</span><span class=\"o\">(</span><span class=\"n\">Y</span> <span class=\"o\">:</span> <span class=\"n\">Obj</span> <span class=\"n\">C</span><span class=\"o\">):</span><span class=\"bp\">Π</span><span class=\"o\">(</span><span class=\"n\">_</span> <span class=\"o\">:</span> <span class=\"n\">Hom</span> <span class=\"n\">X</span> <span class=\"n\">Y</span><span class=\"o\">):</span><span class=\"n\">Hom</span> <span class=\"o\">(</span><span class=\"n\">FunObj</span> <span class=\"n\">X</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">FunObj</span> <span class=\"n\">Y</span><span class=\"o\">)):</span>\n<span class=\"bp\">Σ</span><span class=\"o\">(</span><span class=\"n\">_</span> <span class=\"o\">:</span> <span class=\"bp\">Π</span><span class=\"o\">(</span><span class=\"n\">X</span> <span class=\"o\">:</span> <span class=\"n\">Obj</span> <span class=\"n\">C</span><span class=\"o\">):</span> <span class=\"n\">FunHom</span> <span class=\"n\">X</span> <span class=\"n\">X</span> <span class=\"o\">(</span><span class=\"n\">Idn</span> <span class=\"n\">X</span><span class=\"o\">)</span> <span class=\"bp\">≡</span> <span class=\"n\">Idn</span> <span class=\"o\">(</span><span class=\"n\">FunObj</span> <span class=\"n\">X</span><span class=\"o\">)):</span>\n<span class=\"bp\">Σ</span><span class=\"o\">(</span><span class=\"n\">_</span> <span class=\"o\">:</span> <span class=\"bp\">Π</span><span class=\"o\">(</span><span class=\"n\">X</span> <span class=\"o\">:</span> <span class=\"n\">Obj</span> <span class=\"n\">C</span><span class=\"o\">):</span><span class=\"bp\">Π</span><span class=\"o\">(</span><span class=\"n\">Y</span> <span class=\"o\">:</span> <span class=\"n\">Obj</span> <span class=\"n\">C</span><span class=\"o\">):</span><span class=\"bp\">Π</span><span class=\"o\">(</span><span class=\"n\">Z</span> <span class=\"o\">:</span> <span class=\"n\">Obj</span> <span class=\"n\">C</span><span class=\"o\">):</span><span class=\"bp\">Π</span><span class=\"o\">(</span><span class=\"n\">f</span> <span class=\"o\">:</span> <span class=\"n\">Hom</span> <span class=\"n\">X</span> <span class=\"n\">Y</span><span class=\"o\">):</span><span class=\"bp\">Π</span><span class=\"o\">(</span><span class=\"n\">g</span> <span class=\"o\">:</span> <span class=\"n\">Hom</span> <span class=\"n\">Y</span> <span class=\"n\">Z</span><span class=\"o\">):</span><span class=\"n\">Cmp</span> <span class=\"o\">(</span><span class=\"n\">FunHom</span> <span class=\"n\">X</span> <span class=\"n\">Y</span> <span class=\"n\">f</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">FunHom</span> <span class=\"n\">Y</span> <span class=\"n\">Z</span> <span class=\"n\">g</span><span class=\"o\">)</span> <span class=\"bp\">≡</span> <span class=\"n\">FunHom</span> <span class=\"n\">X</span> <span class=\"n\">Z</span> <span class=\"o\">(</span><span class=\"n\">Cmp</span> <span class=\"n\">f</span> <span class=\"n\">g</span><span class=\"o\">)):</span>\n<span class=\"bp\">⊛</span>\n\n<span class=\"kd\">def</span> <span class=\"n\">CatHomObj</span> <span class=\"o\">{</span><span class=\"n\">C</span> <span class=\"o\">:</span> <span class=\"n\">Cat</span><span class=\"o\">}</span> <span class=\"o\">{</span><span class=\"n\">D</span> <span class=\"o\">:</span> <span class=\"n\">Cat</span><span class=\"o\">}</span> <span class=\"o\">(</span><span class=\"n\">F</span> <span class=\"o\">:</span> <span class=\"n\">CatHom</span> <span class=\"n\">C</span> <span class=\"n\">D</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">X</span> <span class=\"o\">:</span> <span class=\"n\">Obj</span> <span class=\"n\">C</span><span class=\"o\">)</span> <span class=\"o\">:=</span> <span class=\"n\">F.1</span> <span class=\"n\">X</span>\n<span class=\"kd\">notation</span><span class=\"o\">:</span><span class=\"mi\">99</span> <span class=\"n\">F</span> <span class=\"s2\">\"[\"</span> <span class=\"n\">X</span><span class=\"o\">:</span><span class=\"mi\">100</span> <span class=\"s2\">\"]\"</span> <span class=\"bp\">=&gt;</span> <span class=\"n\">CatHomObj</span> <span class=\"n\">F</span> <span class=\"n\">X</span>\n\n<span class=\"kd\">def</span> <span class=\"n\">CatHomHom</span> <span class=\"o\">{</span><span class=\"n\">C</span> <span class=\"o\">:</span> <span class=\"n\">Cat</span><span class=\"o\">}</span> <span class=\"o\">{</span><span class=\"n\">D</span> <span class=\"o\">:</span> <span class=\"n\">Cat</span><span class=\"o\">}</span> <span class=\"o\">{</span><span class=\"n\">X</span> <span class=\"o\">:</span> <span class=\"n\">Obj</span> <span class=\"n\">C</span><span class=\"o\">}</span> <span class=\"o\">{</span><span class=\"n\">Y</span> <span class=\"o\">:</span> <span class=\"n\">Obj</span> <span class=\"n\">C</span><span class=\"o\">}</span> <span class=\"o\">(</span><span class=\"n\">F</span> <span class=\"o\">:</span> <span class=\"n\">CatHom</span> <span class=\"n\">C</span> <span class=\"n\">D</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">f</span> <span class=\"o\">:</span> <span class=\"n\">Hom</span> <span class=\"n\">X</span> <span class=\"n\">Y</span><span class=\"o\">)</span> <span class=\"o\">:=</span> <span class=\"n\">F.2.1</span> <span class=\"n\">X</span> <span class=\"n\">Y</span> <span class=\"n\">f</span>\n<span class=\"kd\">notation</span><span class=\"o\">:</span><span class=\"mi\">89</span> <span class=\"n\">F</span> <span class=\"s2\">\"[\"</span> <span class=\"n\">f</span><span class=\"o\">:</span><span class=\"mi\">90</span> <span class=\"s2\">\"]\"</span> <span class=\"bp\">=&gt;</span> <span class=\"n\">CatHomHom</span> <span class=\"n\">F</span> <span class=\"n\">f</span>\n\n<span class=\"kd\">def</span> <span class=\"n\">CatHomIdn</span> <span class=\"o\">{</span><span class=\"n\">C</span> <span class=\"o\">:</span> <span class=\"n\">Cat</span><span class=\"o\">}</span> <span class=\"o\">{</span><span class=\"n\">D</span> <span class=\"o\">:</span> <span class=\"n\">Cat</span><span class=\"o\">}</span> <span class=\"o\">(</span><span class=\"n\">F</span> <span class=\"o\">:</span> <span class=\"n\">CatHom</span> <span class=\"n\">C</span> <span class=\"n\">D</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">X</span> <span class=\"o\">:</span> <span class=\"n\">Obj</span> <span class=\"n\">C</span><span class=\"o\">)</span> <span class=\"o\">:=</span> <span class=\"n\">F.2.2.1</span> <span class=\"n\">X</span>\n\n<span class=\"kd\">def</span> <span class=\"n\">CatHomCmp</span> <span class=\"o\">{</span><span class=\"n\">C</span> <span class=\"o\">:</span> <span class=\"n\">Cat</span><span class=\"o\">}</span> <span class=\"o\">{</span><span class=\"n\">D</span> <span class=\"o\">:</span> <span class=\"n\">Cat</span><span class=\"o\">}</span> <span class=\"o\">{</span><span class=\"n\">X</span> <span class=\"o\">:</span> <span class=\"n\">Obj</span> <span class=\"n\">C</span><span class=\"o\">}</span> <span class=\"o\">{</span><span class=\"n\">Y</span> <span class=\"o\">:</span> <span class=\"n\">Obj</span> <span class=\"n\">C</span><span class=\"o\">}</span> <span class=\"o\">{</span><span class=\"n\">Z</span> <span class=\"o\">:</span> <span class=\"n\">Obj</span> <span class=\"n\">C</span><span class=\"o\">}</span> <span class=\"o\">(</span><span class=\"n\">F</span> <span class=\"o\">:</span> <span class=\"n\">CatHom</span> <span class=\"n\">C</span> <span class=\"n\">D</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">f</span> <span class=\"o\">:</span> <span class=\"n\">Hom</span> <span class=\"n\">X</span> <span class=\"n\">Y</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">g</span> <span class=\"o\">:</span> <span class=\"n\">Hom</span> <span class=\"n\">Y</span> <span class=\"n\">Z</span><span class=\"o\">)</span> <span class=\"o\">:=</span> <span class=\"n\">F.2.2.2.1</span> <span class=\"n\">X</span> <span class=\"n\">Y</span> <span class=\"n\">Z</span> <span class=\"n\">f</span> <span class=\"n\">g</span>\n<span class=\"kd\">def</span> <span class=\"n\">CatIdn</span> <span class=\"o\">(</span><span class=\"n\">C</span> <span class=\"o\">:</span> <span class=\"n\">Cat</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"n\">CatHom</span> <span class=\"n\">C</span> <span class=\"n\">C</span> <span class=\"o\">:=</span>\n<span class=\"o\">⟨</span>\n<span class=\"o\">(</span><span class=\"n\">X</span> <span class=\"o\">:</span> <span class=\"n\">Obj</span> <span class=\"n\">C</span><span class=\"o\">)</span><span class=\"bp\">↦</span><span class=\"n\">X</span><span class=\"o\">,</span>\n<span class=\"o\">(</span><span class=\"n\">X</span> <span class=\"o\">:</span> <span class=\"n\">Obj</span> <span class=\"n\">C</span><span class=\"o\">)</span><span class=\"bp\">↦</span><span class=\"o\">(</span><span class=\"n\">Y</span> <span class=\"o\">:</span> <span class=\"n\">Obj</span> <span class=\"n\">C</span><span class=\"o\">)</span><span class=\"bp\">↦</span><span class=\"o\">(</span><span class=\"n\">f</span> <span class=\"o\">:</span> <span class=\"n\">Hom</span> <span class=\"n\">X</span> <span class=\"n\">Y</span><span class=\"o\">)</span><span class=\"bp\">↦</span><span class=\"n\">f</span><span class=\"o\">,</span>\n<span class=\"o\">(</span><span class=\"n\">X</span> <span class=\"o\">:</span> <span class=\"n\">Obj</span> <span class=\"n\">C</span><span class=\"o\">)</span><span class=\"bp\">↦</span><span class=\"n\">Refl</span> <span class=\"o\">(</span><span class=\"n\">Idn</span> <span class=\"n\">X</span><span class=\"o\">),</span>\n<span class=\"o\">(</span><span class=\"n\">X</span> <span class=\"o\">:</span> <span class=\"n\">Obj</span> <span class=\"n\">C</span><span class=\"o\">)</span><span class=\"bp\">↦</span><span class=\"o\">(</span><span class=\"n\">Y</span> <span class=\"o\">:</span> <span class=\"n\">Obj</span> <span class=\"n\">C</span><span class=\"o\">)</span><span class=\"bp\">↦</span><span class=\"o\">(</span><span class=\"n\">Z</span> <span class=\"o\">:</span> <span class=\"n\">Obj</span> <span class=\"n\">C</span><span class=\"o\">)</span><span class=\"bp\">↦</span><span class=\"o\">(</span><span class=\"n\">f</span> <span class=\"o\">:</span> <span class=\"n\">Hom</span> <span class=\"n\">X</span> <span class=\"n\">Y</span><span class=\"o\">)</span><span class=\"bp\">↦</span><span class=\"o\">(</span><span class=\"n\">g</span> <span class=\"o\">:</span> <span class=\"n\">Hom</span> <span class=\"n\">Y</span> <span class=\"n\">Z</span><span class=\"o\">)</span><span class=\"bp\">↦</span><span class=\"n\">Refl</span> <span class=\"o\">(</span><span class=\"n\">Cmp</span> <span class=\"n\">f</span> <span class=\"n\">g</span><span class=\"o\">),</span>\n<span class=\"bp\">*</span>\n<span class=\"o\">⟩</span>\n<span class=\"kd\">def</span> <span class=\"n\">CatCmp</span> <span class=\"o\">(</span><span class=\"n\">C</span> <span class=\"o\">:</span> <span class=\"n\">Cat</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">D</span> <span class=\"o\">:</span> <span class=\"n\">Cat</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">E</span> <span class=\"o\">:</span> <span class=\"n\">Cat</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">F</span> <span class=\"o\">:</span> <span class=\"n\">CatHom</span> <span class=\"n\">C</span> <span class=\"n\">D</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">G</span> <span class=\"o\">:</span> <span class=\"n\">CatHom</span> <span class=\"n\">D</span> <span class=\"n\">E</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"o\">(</span><span class=\"n\">CatHom</span> <span class=\"n\">C</span> <span class=\"n\">E</span><span class=\"o\">)</span> <span class=\"o\">:=</span>\n<span class=\"o\">⟨</span>\n<span class=\"o\">(</span><span class=\"n\">X</span> <span class=\"o\">:</span> <span class=\"n\">Obj</span> <span class=\"n\">C</span><span class=\"o\">)</span><span class=\"bp\">↦</span><span class=\"o\">(</span><span class=\"n\">G.1</span><span class=\"o\">)</span> <span class=\"o\">((</span><span class=\"n\">F.1</span><span class=\"o\">)</span> <span class=\"n\">X</span><span class=\"o\">),</span>\n<span class=\"o\">(</span><span class=\"n\">X</span> <span class=\"o\">:</span> <span class=\"n\">Obj</span> <span class=\"n\">C</span><span class=\"o\">)</span><span class=\"bp\">↦</span><span class=\"o\">(</span><span class=\"n\">Y</span> <span class=\"o\">:</span> <span class=\"n\">Obj</span> <span class=\"n\">C</span><span class=\"o\">)</span><span class=\"bp\">↦</span><span class=\"o\">(</span><span class=\"n\">f</span> <span class=\"o\">:</span> <span class=\"n\">Hom</span> <span class=\"n\">X</span> <span class=\"n\">Y</span><span class=\"o\">)</span><span class=\"bp\">↦</span><span class=\"o\">(</span><span class=\"n\">G.2.1</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">F.1</span> <span class=\"n\">X</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">F.1</span> <span class=\"n\">Y</span><span class=\"o\">)</span> <span class=\"o\">((</span><span class=\"n\">F.2.1</span><span class=\"o\">)</span> <span class=\"n\">X</span> <span class=\"n\">Y</span> <span class=\"n\">f</span><span class=\"o\">),</span>\n<span class=\"o\">(</span><span class=\"n\">X</span> <span class=\"o\">:</span> <span class=\"n\">Obj</span> <span class=\"n\">C</span><span class=\"o\">)</span><span class=\"bp\">↦</span><span class=\"n\">Trns</span> <span class=\"o\">(</span> <span class=\"n\">Push</span> <span class=\"o\">(</span><span class=\"n\">G.2.1</span> <span class=\"o\">(</span><span class=\"n\">F.1</span> <span class=\"n\">X</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">F.1</span> <span class=\"n\">X</span><span class=\"o\">))</span> <span class=\"o\">(</span><span class=\"n\">F.2.2.1</span> <span class=\"n\">X</span><span class=\"o\">)</span> <span class=\"o\">)</span> <span class=\"o\">((</span><span class=\"n\">G.2.2.1</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">F.1</span> <span class=\"n\">X</span><span class=\"o\">)),</span>\n<span class=\"o\">(</span><span class=\"n\">X</span> <span class=\"o\">:</span> <span class=\"n\">Obj</span> <span class=\"n\">C</span><span class=\"o\">)</span><span class=\"bp\">↦</span><span class=\"o\">(</span><span class=\"n\">Y</span> <span class=\"o\">:</span> <span class=\"n\">Obj</span> <span class=\"n\">C</span><span class=\"o\">)</span><span class=\"bp\">↦</span><span class=\"o\">(</span><span class=\"n\">Z</span> <span class=\"o\">:</span> <span class=\"n\">Obj</span> <span class=\"n\">C</span><span class=\"o\">)</span><span class=\"bp\">↦</span><span class=\"o\">(</span><span class=\"n\">f</span> <span class=\"o\">:</span> <span class=\"n\">Hom</span> <span class=\"n\">X</span> <span class=\"n\">Y</span><span class=\"o\">)</span><span class=\"bp\">↦</span><span class=\"o\">(</span><span class=\"n\">g</span> <span class=\"o\">:</span> <span class=\"n\">Hom</span> <span class=\"n\">Y</span> <span class=\"n\">Z</span><span class=\"o\">)</span><span class=\"bp\">↦</span>\n<span class=\"o\">(</span>\n<span class=\"n\">Trns</span>\n<span class=\"o\">(</span><span class=\"n\">CatHomCmp</span> <span class=\"n\">G</span>  <span class=\"o\">(</span><span class=\"n\">F</span><span class=\"o\">[</span><span class=\"n\">f</span><span class=\"o\">])</span> <span class=\"o\">(</span><span class=\"n\">F</span><span class=\"o\">[</span><span class=\"n\">g</span><span class=\"o\">]))</span>\n<span class=\"o\">(</span><span class=\"n\">Push</span> <span class=\"o\">(</span><span class=\"n\">G.2.1</span> <span class=\"o\">(</span><span class=\"n\">F</span><span class=\"o\">[</span><span class=\"n\">X</span><span class=\"o\">])</span> <span class=\"o\">(</span><span class=\"n\">F</span><span class=\"o\">[</span><span class=\"n\">Z</span><span class=\"o\">]))</span> <span class=\"o\">(</span><span class=\"n\">CatHomCmp</span> <span class=\"n\">F</span> <span class=\"n\">f</span> <span class=\"n\">g</span><span class=\"o\">))</span>\n<span class=\"o\">),</span>\n<span class=\"bp\">*</span><span class=\"o\">⟩</span>\n\n<span class=\"kd\">def</span> <span class=\"n\">CatId1</span> <span class=\"o\">(</span><span class=\"n\">C</span> <span class=\"o\">:</span> <span class=\"n\">Cat</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">D</span> <span class=\"o\">:</span> <span class=\"n\">Cat</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">F</span> <span class=\"o\">:</span> <span class=\"n\">CatHom</span> <span class=\"n\">C</span> <span class=\"n\">D</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"o\">((</span><span class=\"n\">CatCmp</span> <span class=\"n\">C</span> <span class=\"n\">D</span> <span class=\"n\">D</span><span class=\"o\">)</span> <span class=\"n\">F</span> <span class=\"o\">(</span><span class=\"n\">CatIdn</span> <span class=\"n\">D</span><span class=\"o\">)</span> <span class=\"bp\">≡</span> <span class=\"n\">F</span><span class=\"o\">)</span> <span class=\"o\">:=</span> <span class=\"o\">⟨(</span><span class=\"n\">Refl</span> <span class=\"n\">F</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"mi\">1</span><span class=\"o\">,</span> <span class=\"bp\">*</span><span class=\"o\">⟩</span>\n\n<span class=\"kd\">def</span> <span class=\"n\">CatId2</span> <span class=\"o\">(</span><span class=\"n\">C</span> <span class=\"o\">:</span> <span class=\"n\">Cat</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">D</span> <span class=\"o\">:</span> <span class=\"n\">Cat</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">F</span> <span class=\"o\">:</span> <span class=\"n\">CatHom</span> <span class=\"n\">C</span> <span class=\"n\">D</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"o\">((</span><span class=\"n\">CatCmp</span> <span class=\"n\">C</span> <span class=\"n\">C</span> <span class=\"n\">D</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">CatIdn</span> <span class=\"n\">C</span><span class=\"o\">)</span> <span class=\"n\">F</span> <span class=\"bp\">≡</span> <span class=\"n\">F</span><span class=\"o\">)</span> <span class=\"o\">:=</span> <span class=\"o\">⟨(</span><span class=\"n\">Refl</span> <span class=\"n\">F</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"mi\">1</span><span class=\"o\">,</span> <span class=\"bp\">*</span><span class=\"o\">⟩</span>\n\n<span class=\"kd\">def</span> <span class=\"n\">CatAss</span> <span class=\"o\">(</span><span class=\"n\">B</span> <span class=\"o\">:</span> <span class=\"n\">Cat</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">C</span> <span class=\"o\">:</span> <span class=\"n\">Cat</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">D</span> <span class=\"o\">:</span> <span class=\"n\">Cat</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">E</span> <span class=\"o\">:</span> <span class=\"n\">Cat</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">F</span> <span class=\"o\">:</span> <span class=\"n\">CatHom</span> <span class=\"n\">B</span> <span class=\"n\">C</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">G</span> <span class=\"o\">:</span> <span class=\"n\">CatHom</span> <span class=\"n\">C</span> <span class=\"n\">D</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">H</span> <span class=\"o\">:</span> <span class=\"n\">CatHom</span> <span class=\"n\">D</span> <span class=\"n\">E</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"o\">(</span><span class=\"n\">CatCmp</span> <span class=\"n\">B</span> <span class=\"n\">C</span> <span class=\"n\">E</span> <span class=\"n\">F</span> <span class=\"o\">(</span><span class=\"n\">CatCmp</span> <span class=\"n\">C</span> <span class=\"n\">D</span> <span class=\"n\">E</span> <span class=\"n\">G</span> <span class=\"n\">H</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"n\">CatCmp</span> <span class=\"n\">B</span> <span class=\"n\">D</span> <span class=\"n\">E</span> <span class=\"o\">(</span><span class=\"n\">CatCmp</span> <span class=\"n\">B</span> <span class=\"n\">C</span> <span class=\"n\">D</span> <span class=\"n\">F</span> <span class=\"n\">G</span><span class=\"o\">)</span> <span class=\"n\">H</span><span class=\"o\">)</span> <span class=\"o\">:=</span> <span class=\"o\">(</span><span class=\"n\">Refl</span> <span class=\"o\">(</span><span class=\"n\">CatCmp</span> <span class=\"n\">B</span> <span class=\"n\">C</span> <span class=\"n\">E</span> <span class=\"n\">F</span> <span class=\"o\">(</span><span class=\"n\">CatCmp</span> <span class=\"n\">C</span> <span class=\"n\">D</span> <span class=\"n\">E</span> <span class=\"n\">G</span> <span class=\"n\">H</span><span class=\"o\">)))</span><span class=\"bp\">.</span><span class=\"mi\">1</span>\n</code></pre></div>",
        "id": 320311344,
        "sender_full_name": "Kind Bubble",
        "timestamp": 1673292301
    },
    {
        "content": "<p>Are you deliberately using <code>Sigma</code> for everything instead of structures? That would save you from all the <code>.2.2.2.2.2</code> stuff</p>",
        "id": 320311621,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1673292376
    },
    {
        "content": "<p>Yeah I wanted the Sigma and Product \"purism\".</p>",
        "id": 320313102,
        "sender_full_name": "Kind Bubble",
        "timestamp": 1673292801
    },
    {
        "content": "<p>is there such thing as a successor universe or something like that?</p>",
        "id": 320313214,
        "sender_full_name": "Kind Bubble",
        "timestamp": 1673292838
    },
    {
        "content": "<p>That \"purism\" (or perhaps moreso, the new notations you give it) makes it a lot harder for other people to read your code, which probably means fewer people will help out</p>",
        "id": 320322208,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1673295108
    },
    {
        "content": "<blockquote>\n<p>I want my definition of category to take in a universe. </p>\n</blockquote>\n<p>It already does; in fact, it takes two universes, one for each <code>Type _</code></p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"k\">#check</span> <span class=\"n\">Cat</span>\n<span class=\"c1\">-- Cat.{u_1, u_2} : Type (max (u_1 + 1) (max 0 u_1 u_2) u_1 (u_2 + 1))</span>\n</code></pre></div>",
        "id": 320323635,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1673295674
    },
    {
        "content": "<p>Ok let me fix up my notation and ask a different way - I want the category of categories to be a category and I suspect that will give me issues unless it just knows to pick a higher universe?</p>",
        "id": 320339236,
        "sender_full_name": "Kind Bubble",
        "timestamp": 1673301648
    },
    {
        "content": "<p>It will be easier to help you if you have code that demonstrates a problem with an error rather than code that doesn't yet have a problem</p>",
        "id": 320340458,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1673302148
    },
    {
        "content": "<p>Thanks for all your help. I'm a bit new so I'm getting used to things.</p>\n<p>One question is how to show equality of structures using equality of the constituents:</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kd\">variable</span> <span class=\"o\">{</span><span class=\"n\">X</span> <span class=\"o\">:</span> <span class=\"kt\">Type</span><span class=\"o\">}</span>\n<span class=\"kd\">variable</span> <span class=\"o\">{</span><span class=\"n\">x</span> <span class=\"o\">:</span> <span class=\"n\">X</span><span class=\"o\">}</span>\n<span class=\"kd\">variable</span> <span class=\"o\">{</span><span class=\"n\">y</span><span class=\"o\">:</span> <span class=\"n\">X</span><span class=\"o\">}</span>\n<span class=\"kd\">variable</span> <span class=\"o\">{</span><span class=\"n\">p</span> <span class=\"o\">:</span> <span class=\"n\">x</span> <span class=\"bp\">=</span> <span class=\"n\">y</span><span class=\"o\">}</span>\n<span class=\"kd\">structure</span> <span class=\"n\">Example</span> <span class=\"n\">where</span>\n    <span class=\"n\">Z</span> <span class=\"o\">:</span> <span class=\"kt\">Type</span> <span class=\"n\">_</span>\n    <span class=\"n\">z</span> <span class=\"o\">:</span> <span class=\"n\">Z</span>\n<span class=\"kd\">def</span> <span class=\"n\">A</span><span class=\"o\">:=</span> <span class=\"o\">{</span> <span class=\"n\">Z</span> <span class=\"o\">:=</span> <span class=\"n\">X</span><span class=\"o\">,</span> <span class=\"n\">z</span> <span class=\"o\">:=</span> <span class=\"n\">x</span> <span class=\"o\">:</span> <span class=\"n\">Example</span><span class=\"o\">}</span>\n<span class=\"kd\">def</span> <span class=\"n\">B</span> <span class=\"o\">:=</span> <span class=\"o\">{</span><span class=\"n\">Z</span> <span class=\"o\">:=</span> <span class=\"n\">X</span><span class=\"o\">,</span> <span class=\"n\">z</span> <span class=\"o\">:=</span> <span class=\"n\">y</span> <span class=\"o\">:</span> <span class=\"n\">Example</span><span class=\"o\">}</span>\n<span class=\"kd\">def</span> <span class=\"n\">AequalsB</span> <span class=\"o\">:</span> <span class=\"n\">A</span> <span class=\"bp\">=</span> <span class=\"n\">B</span> <span class=\"o\">:=</span> <span class=\"gr\">sorry</span>\n</code></pre></div>",
        "id": 320345894,
        "sender_full_name": "Kind Bubble",
        "timestamp": 1673304367
    },
    {
        "content": "<p>I looked up <a href=\"https://leanprover-community.github.io/mathlib_docs/find/category_theory.Cat\">docs#category_theory.Cat</a> in mathlib and found its type is currently <code>Type (max (u+1) u (v+1))</code>, which is obviously not ideal and should be ascribed as <code>Type (max (u+1) (v+1))</code> ...</p>",
        "id": 320346320,
        "sender_full_name": "Junyan Xu",
        "timestamp": 1673304593
    },
    {
        "content": "<p>You can check <a href=\"https://leanprover.github.io/theorem_proving_in_lean/inductive_types.html?highlight=universe\">TPIL</a> (7.8. Axiomatic Details) which anwsers the question</p>\n<blockquote>\n<p>Since an inductive type lives in Sort u for some u, it is reasonable to ask which universe levels u can be instantiated to.</p>\n</blockquote>\n<p>(Both structures and sigma types are implemented as inductive types)<br>\n(I should probably provide a Lean 4 reference, but I'm not familiar with them...)</p>",
        "id": 320347144,
        "sender_full_name": "Junyan Xu",
        "timestamp": 1673304971
    },
    {
        "content": "<blockquote>\n<p>One question is how to show equality of structures using equality of the constituents:</p>\n</blockquote>\n<p>As for this question, Lean reports some errors as it parses your code:</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kd\">variable</span> <span class=\"o\">{</span><span class=\"n\">X</span> <span class=\"o\">:</span> <span class=\"kt\">Type</span><span class=\"o\">}</span>\n<span class=\"kd\">variable</span> <span class=\"o\">{</span><span class=\"n\">x</span> <span class=\"o\">:</span> <span class=\"n\">X</span><span class=\"o\">}</span>\n<span class=\"kd\">variable</span> <span class=\"o\">{</span><span class=\"n\">y</span><span class=\"o\">:</span> <span class=\"n\">X</span><span class=\"o\">}</span>\n<span class=\"kd\">variable</span> <span class=\"o\">{</span><span class=\"n\">p</span> <span class=\"o\">:</span> <span class=\"n\">x</span> <span class=\"bp\">=</span> <span class=\"n\">y</span><span class=\"o\">}</span> <span class=\"c1\">-- if I comment this out then the error below doesn't occur; not sure why</span>\n<span class=\"kd\">structure</span> <span class=\"n\">Example</span> <span class=\"n\">where</span> <span class=\"c1\">-- (kernel) declaration has free variables 'Example.mk.injEq'</span>\n    <span class=\"n\">Z</span> <span class=\"o\">:</span> <span class=\"kt\">Type</span> <span class=\"n\">_</span>\n    <span class=\"n\">z</span> <span class=\"o\">:</span> <span class=\"n\">Z</span>\n\n<span class=\"kd\">def</span> <span class=\"n\">A</span><span class=\"o\">:=</span> <span class=\"o\">{</span> <span class=\"n\">Z</span> <span class=\"o\">:=</span> <span class=\"n\">X</span><span class=\"o\">,</span> <span class=\"n\">z</span> <span class=\"o\">:=</span> <span class=\"n\">x</span> <span class=\"o\">:</span> <span class=\"n\">Example</span><span class=\"o\">}</span>\n<span class=\"kd\">def</span> <span class=\"n\">B</span> <span class=\"o\">:=</span> <span class=\"o\">{</span><span class=\"n\">Z</span> <span class=\"o\">:=</span> <span class=\"n\">X</span><span class=\"o\">,</span> <span class=\"n\">z</span> <span class=\"o\">:=</span> <span class=\"n\">y</span> <span class=\"o\">:</span> <span class=\"n\">Example</span><span class=\"o\">}</span>\n<span class=\"kd\">def</span> <span class=\"n\">AequalsB</span> <span class=\"o\">:</span> <span class=\"n\">A</span> <span class=\"bp\">=</span> <span class=\"n\">B</span> <span class=\"o\">:=</span> <span class=\"gr\">sorry</span> <span class=\"c\">/-</span><span class=\"cm\"> don't know how to synthesize implicit argument</span>\n<span class=\"cm\">  this is because `A` is a function of `X` and `x` and similarly for `B`; you need to</span>\n<span class=\"cm\">  write `@A X x = @B X y`. But actually it's the same as `@A X x = @A X y`, since</span>\n<span class=\"cm\">  `A` is the same as `B`: -/</span>\n<span class=\"kd\">example</span> <span class=\"o\">:</span> <span class=\"bp\">@</span><span class=\"n\">A</span> <span class=\"bp\">=</span> <span class=\"bp\">@</span><span class=\"n\">B</span> <span class=\"o\">:=</span> <span class=\"n\">rfl</span>\n</code></pre></div>\n<p>And here are some solutions to the problem after making some corrections:</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kd\">structure</span> <span class=\"n\">Example</span> <span class=\"n\">where</span>\n    <span class=\"n\">Z</span> <span class=\"o\">:</span> <span class=\"kt\">Type</span> <span class=\"n\">_</span>\n    <span class=\"n\">z</span> <span class=\"o\">:</span> <span class=\"n\">Z</span>\n\n<span class=\"kd\">variable</span> <span class=\"o\">{</span><span class=\"n\">X</span> <span class=\"o\">:</span> <span class=\"kt\">Type</span><span class=\"o\">}</span> <span class=\"o\">{</span><span class=\"n\">x</span> <span class=\"n\">y</span> <span class=\"o\">:</span> <span class=\"n\">X</span><span class=\"o\">}</span> <span class=\"o\">{</span><span class=\"n\">p</span> <span class=\"o\">:</span> <span class=\"n\">x</span> <span class=\"bp\">=</span> <span class=\"n\">y</span><span class=\"o\">}</span>\n\n<span class=\"kd\">def</span> <span class=\"n\">A</span><span class=\"o\">:=</span> <span class=\"o\">{</span> <span class=\"n\">Z</span> <span class=\"o\">:=</span> <span class=\"n\">X</span><span class=\"o\">,</span> <span class=\"n\">z</span> <span class=\"o\">:=</span> <span class=\"n\">x</span> <span class=\"o\">:</span> <span class=\"n\">Example</span><span class=\"o\">}</span>\n<span class=\"kd\">def</span> <span class=\"n\">B</span> <span class=\"o\">:=</span> <span class=\"o\">{</span><span class=\"n\">Z</span> <span class=\"o\">:=</span> <span class=\"n\">X</span><span class=\"o\">,</span> <span class=\"n\">z</span> <span class=\"o\">:=</span> <span class=\"n\">y</span> <span class=\"o\">:</span> <span class=\"n\">Example</span><span class=\"o\">}</span>\n\n<span class=\"kd\">lemma</span> <span class=\"n\">AequalsB</span> <span class=\"o\">:</span> <span class=\"bp\">@</span><span class=\"n\">A</span> <span class=\"n\">X</span> <span class=\"n\">x</span> <span class=\"bp\">=</span> <span class=\"bp\">@</span><span class=\"n\">B</span> <span class=\"n\">X</span> <span class=\"n\">y</span> <span class=\"o\">:=</span> <span class=\"kd\">by</span>\n  <span class=\"n\">rw</span> <span class=\"o\">[</span><span class=\"n\">A</span><span class=\"o\">,</span> <span class=\"n\">B</span><span class=\"o\">,</span> <span class=\"n\">p</span><span class=\"o\">]</span>\n\n<span class=\"kd\">lemma</span> <span class=\"n\">AequalsB'</span> <span class=\"o\">:</span> <span class=\"bp\">@</span><span class=\"n\">A</span> <span class=\"n\">X</span> <span class=\"n\">x</span> <span class=\"bp\">=</span> <span class=\"bp\">@</span><span class=\"n\">B</span> <span class=\"n\">X</span> <span class=\"n\">y</span> <span class=\"o\">:=</span> <span class=\"kd\">by</span>\n  <span class=\"n\">congr</span> <span class=\"c1\">-- also works</span>\n\n<span class=\"kd\">lemma</span> <span class=\"n\">AequalsB''</span> <span class=\"o\">:</span> <span class=\"bp\">@</span><span class=\"n\">A</span> <span class=\"n\">X</span> <span class=\"n\">x</span> <span class=\"bp\">=</span> <span class=\"bp\">@</span><span class=\"n\">B</span> <span class=\"n\">X</span> <span class=\"n\">y</span> <span class=\"o\">:=</span> <span class=\"kd\">by</span>\n  <span class=\"n\">ext</span> <span class=\"c\">/-</span><span class=\"cm\"> if you add `@[ext]` before `structure Example`, `ext` here</span>\n<span class=\"cm\">    generates two goals `A.Z = B.Z` and `HEq A.z B.z`, but I don't recommend you</span>\n<span class=\"cm\">    deal with `HEq` as a beginner. -/</span>\n</code></pre></div>",
        "id": 320351048,
        "sender_full_name": "Junyan Xu",
        "timestamp": 1673307014
    }
]