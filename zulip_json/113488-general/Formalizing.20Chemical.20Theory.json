[
    {
        "content": "<p>We are excited to share a new Lean project! Introducing <a href=\"https://github.com/ATOMSLab/LeanChemicalTheories\">LeanChemicalTheories</a>. We are a research group in Chemical Engineering who have been learning Lean 3 and using it to formalize proofs in science and engineering. </p>\n<p>So far, we've formalized some proofs in adsorption, chemical reaction kinetics, thermodynamics, and molecular mechanics. In our longest proof, in which we formalize the derivation of <a href=\"https://en.wikipedia.org/wiki/BET_theory\">BET adsorption theory</a>, we invoke infinite geometric series. We've also formalized some undergraduate physics proofs, in particular the derivation of the kinematic equations from an introductory Physics course (we worked through these to figure out how to work through engineering calculus problems in Lean). We've made some progress on proofs in introductory transport phenomena (uses PDEs) and quantum mechanics (Hilbert spaces, complex numbers), and would love to do proofs in statistical mechanics, as well (random numbers, N-dimensional integrals, etc.). <span class=\"user-mention\" data-user-id=\"474115\">@Max Bobbin</span> has been the main driver of the project, with important contributions from <span class=\"user-mention\" data-user-id=\"459354\">@Parivash</span>, <span class=\"user-mention\" data-user-id=\"480695\">@Samiha Sharlin</span>, and <span class=\"user-mention\" data-user-id=\"459337\">@Catherine Wraback</span>.</p>\n<p>We're still cleaning up our proofs and writing a manuscript for a chemical science audience, but we have made enough progress to share this with the Zulip community. Let us know what you think!</p>",
        "id": 288754664,
        "sender_full_name": "Tyler Josephson",
        "timestamp": 1657161658
    },
    {
        "content": "<p>The Zulip community and all the online training materials have been invaluable! Thanks especially to <span class=\"user-mention\" data-user-id=\"310045\">@Eric Wieser</span>, <span class=\"user-mention\" data-user-id=\"110038\">@Kevin Buzzard</span>, <span class=\"user-mention\" data-user-id=\"110031\">@Patrick Massot</span> , <span class=\"user-mention\" data-user-id=\"112680\">@Johan Commelin</span>, <span class=\"user-mention\" data-user-id=\"123965\">@Bryan Gin-ge Chen</span>,  <span class=\"user-mention\" data-user-id=\"387244\">@Yaël Dillies</span>, <span class=\"user-mention\" data-user-id=\"459227\">@Violeta Hernández</span>, and <span class=\"user-mention\" data-user-id=\"110032\">@Reid Barton</span> for helping us with our many questions so far!</p>",
        "id": 288754703,
        "sender_full_name": "Tyler Josephson",
        "timestamp": 1657161710
    },
    {
        "content": "<p>One question we have up front is: how can we format our GitHub so it looks nice like the mathlib documentation, with a title and typeset preamble on top, with proofs to follow, such as this <a href=\"https://leanprover-community.github.io/mathlib_docs/analysis/calculus/deriv.html\">example</a>?</p>",
        "id": 288756803,
        "sender_full_name": "Tyler Josephson",
        "timestamp": 1657163888
    },
    {
        "content": "<p>I am not an expert and this should not be construed as expert advice. The mathlib documentation is generated with <a href=\"https://github.com/leanprover-community/doc-gen\">https://github.com/leanprover-community/doc-gen</a></p>",
        "id": 288757817,
        "sender_full_name": "Huỳnh Trần Khanh",
        "timestamp": 1657164981
    },
    {
        "content": "<p>There's an example of how to set doc-gen up on your own project at <a href=\"https://github.com/ImperialCollegeLondon/M40001_lean/pull/5/files\">https://github.com/ImperialCollegeLondon/M40001_lean/pull/5/files</a></p>",
        "id": 288775150,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1657181648
    },
    {
        "content": "<p>I assume <a href=\"https://github.com/ATOMSLab/LeanChemicalTheories/blob/25675a61bc5cf3c5205cb116be2cf84d2763cfa1/src/Adsorption/BETInfinite.lean#L5\">this line</a> is the formalization of BET you refer to?</p>",
        "id": 288777826,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1657183303
    },
    {
        "content": "<p>This BET statement is extremely weird. What's the point of introducing all those variables that are defined in terms of each other anyway? There are also several unneeded assumptions. One is very easy to spot, you can type <code>#lint</code> at the bottom of this file and it will tell you that your assumption <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>V</mi><mn>0</mn></msub><mo mathvariant=\"normal\">≠</mo><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">V_0 \\neq 0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.22222em;\">V</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.2222em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">0</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\"><span class=\"mrel\"><span class=\"mord vbox\"><span class=\"thinbox\"><span class=\"rlap\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"inner\"><span class=\"mord\"><span class=\"mrel\"></span></span></span><span class=\"fix\"></span></span></span></span></span><span class=\"mrel\">=</span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">0</span></span></span></span> is never user. What the linter doesn't see however is that your assumption <code>hsum</code> and <code>hsum2</code> are simply saying: \"I don't want to do some parts of the proof, so let me it put them as assumptions\".</p>",
        "id": 288788574,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1657189779
    },
    {
        "content": "<p>Putting aside those <code>hsum</code> and <code>hsum2</code> \"assumptions\", the mathematical content of that proof is:</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kd\">theorem</span> <span class=\"n\">BET₁</span> <span class=\"o\">{</span><span class=\"n\">x</span> <span class=\"o\">:</span> <span class=\"n\">ℝ</span><span class=\"o\">}</span> <span class=\"o\">(</span><span class=\"n\">C</span> <span class=\"o\">:</span> <span class=\"n\">ℝ</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">hx1</span><span class=\"o\">:</span> <span class=\"n\">x</span> <span class=\"bp\">&lt;</span> <span class=\"mi\">1</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">hx2</span> <span class=\"o\">:</span> <span class=\"mi\">0</span> <span class=\"bp\">&lt;</span> <span class=\"n\">x</span><span class=\"o\">)</span> <span class=\"o\">:</span>\n  <span class=\"o\">(</span><span class=\"bp\">∑'</span> <span class=\"n\">k</span> <span class=\"o\">:</span> <span class=\"n\">ℕ</span><span class=\"o\">,</span> <span class=\"o\">(</span><span class=\"n\">k</span> <span class=\"bp\">+</span> <span class=\"mi\">1</span> <span class=\"o\">:</span> <span class=\"n\">ℝ</span><span class=\"o\">)</span><span class=\"bp\">*</span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"bp\">^</span><span class=\"o\">(</span><span class=\"n\">k</span><span class=\"bp\">+</span><span class=\"mi\">1</span><span class=\"o\">)</span> <span class=\"bp\">*</span> <span class=\"n\">C</span><span class=\"o\">))</span><span class=\"bp\">/</span><span class=\"o\">(</span><span class=\"mi\">1</span> <span class=\"bp\">+</span> <span class=\"bp\">∑'</span> <span class=\"n\">k</span><span class=\"o\">,</span> <span class=\"n\">x</span><span class=\"bp\">^</span><span class=\"o\">(</span><span class=\"n\">k</span><span class=\"bp\">+</span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"bp\">*</span> <span class=\"n\">C</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"n\">C</span><span class=\"bp\">*</span><span class=\"n\">x</span><span class=\"bp\">/</span><span class=\"o\">((</span><span class=\"mi\">1</span> <span class=\"bp\">-</span> <span class=\"n\">x</span><span class=\"o\">)</span><span class=\"bp\">*</span><span class=\"o\">(</span><span class=\"mi\">1</span> <span class=\"bp\">-</span> <span class=\"n\">x</span> <span class=\"bp\">+</span> <span class=\"n\">C</span><span class=\"bp\">*</span><span class=\"n\">x</span><span class=\"o\">))</span> <span class=\"o\">:=</span>\n<span class=\"gr\">sorry</span>\n</code></pre></div>",
        "id": 288788700,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1657189858
    },
    {
        "content": "<p>And by the way <code>hx2 : -1 &lt; x</code> would be good enough.</p>",
        "id": 288788745,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1657189893
    },
    {
        "content": "<p>I think it greatly would greatly help to first prove that mathematical part and then derive your original statement from it, for instance as in</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kd\">theorem</span> <span class=\"n\">BET</span>\n<span class=\"o\">(</span><span class=\"n\">θ</span> <span class=\"o\">:</span> <span class=\"n\">ℕ</span> <span class=\"bp\">→</span> <span class=\"n\">ℝ</span> <span class=\"o\">){</span> <span class=\"n\">k1</span> <span class=\"n\">k2</span> <span class=\"n\">kads</span> <span class=\"n\">kdes</span> <span class=\"n\">a</span> <span class=\"n\">b</span> <span class=\"n\">C</span> <span class=\"n\">P</span> <span class=\"n\">q</span> <span class=\"n\">A</span> <span class=\"n\">V₀</span> <span class=\"n\">Vads</span> <span class=\"n\">x</span> <span class=\"n\">y</span> <span class=\"n\">c</span> <span class=\"o\">:</span> <span class=\"n\">ℝ</span><span class=\"o\">}</span>\n<span class=\"c1\">--(hsum : summable (λ (b : ℕ), ↑b * θ b)) -- This is automatic</span>\n<span class=\"c1\">--(hsum2 : summable (λ (b : ℕ), θ b)) -- This is automatic</span>\n<span class=\"c1\">-- Equations</span>\n<span class=\"o\">(</span><span class=\"n\">h1</span> <span class=\"o\">:</span> <span class=\"bp\">∀</span> <span class=\"n\">k</span><span class=\"o\">,</span> <span class=\"n\">θ</span> <span class=\"o\">(</span><span class=\"n\">k</span><span class=\"bp\">+</span><span class=\"mi\">1</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"o\">(</span><span class=\"n\">x</span> <span class=\"bp\">^</span> <span class=\"o\">(</span><span class=\"n\">k</span><span class=\"bp\">+</span><span class=\"mi\">1</span><span class=\"o\">))</span> <span class=\"bp\">*</span> <span class=\"n\">C</span> <span class=\"bp\">*</span> <span class=\"n\">θ</span> <span class=\"mi\">0</span><span class=\"o\">)</span>\n<span class=\"o\">(</span><span class=\"n\">hA</span> <span class=\"o\">:</span> <span class=\"n\">A</span> <span class=\"bp\">=</span> <span class=\"bp\">∑'</span> <span class=\"o\">(</span><span class=\"n\">k</span> <span class=\"o\">:</span> <span class=\"n\">ℕ</span><span class=\"o\">),</span> <span class=\"n\">θ</span> <span class=\"n\">k</span><span class=\"o\">)</span>\n<span class=\"o\">(</span><span class=\"n\">hVads</span> <span class=\"o\">:</span> <span class=\"n\">Vads</span> <span class=\"bp\">=</span>  <span class=\"n\">V₀</span> <span class=\"bp\">*</span> <span class=\"bp\">∑'</span> <span class=\"o\">(</span><span class=\"n\">k</span> <span class=\"o\">:</span> <span class=\"n\">ℕ</span><span class=\"o\">),</span> <span class=\"n\">k</span> <span class=\"bp\">*</span> <span class=\"n\">θ</span> <span class=\"n\">k</span><span class=\"o\">)</span>\n<span class=\"o\">(</span><span class=\"n\">hq</span> <span class=\"o\">:</span> <span class=\"n\">q</span> <span class=\"bp\">=</span> <span class=\"n\">Vads</span><span class=\"bp\">/</span><span class=\"n\">A</span><span class=\"o\">)</span>\n<span class=\"c1\">-- Definitions</span>\n<span class=\"o\">(</span><span class=\"n\">hC</span><span class=\"o\">:</span> <span class=\"n\">C</span> <span class=\"bp\">=</span> <span class=\"n\">y</span><span class=\"bp\">/</span><span class=\"n\">x</span><span class=\"o\">)</span>\n<span class=\"o\">(</span><span class=\"n\">hy</span><span class=\"o\">:</span> <span class=\"n\">y</span> <span class=\"bp\">=</span> <span class=\"n\">k1</span><span class=\"bp\">/</span><span class=\"n\">k2</span><span class=\"bp\">*</span><span class=\"n\">P</span><span class=\"o\">)</span>\n<span class=\"o\">(</span><span class=\"n\">hx</span><span class=\"o\">:</span> <span class=\"n\">x</span> <span class=\"bp\">=</span> <span class=\"n\">kads</span><span class=\"bp\">/</span><span class=\"n\">kdes</span><span class=\"bp\">*</span><span class=\"n\">P</span><span class=\"o\">)</span>\n<span class=\"o\">(</span><span class=\"n\">hc</span><span class=\"o\">:</span> <span class=\"n\">c</span> <span class=\"bp\">=</span> <span class=\"n\">k1</span><span class=\"bp\">/</span><span class=\"n\">k2</span><span class=\"o\">)</span>\n<span class=\"o\">(</span><span class=\"n\">ha</span><span class=\"o\">:</span> <span class=\"n\">a</span> <span class=\"bp\">=</span> <span class=\"n\">V₀</span><span class=\"bp\">*</span><span class=\"n\">c</span><span class=\"o\">)</span>\n<span class=\"o\">(</span><span class=\"n\">hb</span><span class=\"o\">:</span> <span class=\"n\">b</span> <span class=\"bp\">=</span> <span class=\"n\">kads</span><span class=\"bp\">/</span><span class=\"n\">kdes</span><span class=\"o\">)</span>\n<span class=\"c1\">-- Constraints</span>\n<span class=\"o\">(</span><span class=\"n\">hx1</span><span class=\"o\">:</span> <span class=\"n\">x</span><span class=\"bp\">&lt;</span><span class=\"mi\">1</span><span class=\"o\">)</span>\n<span class=\"o\">(</span><span class=\"n\">hx2</span> <span class=\"o\">:</span> <span class=\"mi\">0</span> <span class=\"bp\">&lt;</span> <span class=\"n\">x</span><span class=\"o\">)</span>\n<span class=\"c1\">-- (hV₀ : V₀ ≠ 0)  This assumption was useless</span>\n<span class=\"o\">(</span><span class=\"n\">hθ</span> <span class=\"o\">:</span> <span class=\"n\">θ</span> <span class=\"mi\">0</span> <span class=\"bp\">≠</span> <span class=\"mi\">0</span><span class=\"o\">)</span>\n<span class=\"o\">:</span>\n<span class=\"n\">q</span> <span class=\"bp\">=</span> <span class=\"n\">a</span><span class=\"bp\">*</span><span class=\"n\">P</span><span class=\"bp\">/</span><span class=\"o\">((</span><span class=\"mi\">1</span><span class=\"bp\">-</span><span class=\"n\">b</span><span class=\"bp\">*</span><span class=\"n\">P</span><span class=\"o\">)</span><span class=\"bp\">*</span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"bp\">-</span><span class=\"n\">b</span><span class=\"bp\">*</span><span class=\"n\">P</span><span class=\"bp\">+</span><span class=\"n\">c</span><span class=\"bp\">*</span><span class=\"n\">P</span><span class=\"o\">))</span>\n<span class=\"o\">:=</span>\n<span class=\"kd\">begin</span>\n  <span class=\"k\">have</span> <span class=\"n\">hsum2</span> <span class=\"o\">:</span> <span class=\"n\">summable</span> <span class=\"n\">θ</span><span class=\"o\">,</span>\n  <span class=\"o\">{</span> <span class=\"n\">refine</span> <span class=\"o\">(</span><span class=\"n\">summable_nat_add_iff</span> <span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">mp</span> <span class=\"n\">_</span><span class=\"o\">,</span>\n    <span class=\"n\">simp</span> <span class=\"n\">only</span> <span class=\"o\">[</span><span class=\"n\">h1</span><span class=\"o\">,</span> <span class=\"n\">pow_succ'</span><span class=\"o\">,</span> <span class=\"n\">mul_assoc</span><span class=\"o\">],</span>\n    <span class=\"n\">exact</span> <span class=\"o\">(</span><span class=\"n\">summable_geometric_of_lt_1</span> <span class=\"n\">hx2.le</span> <span class=\"n\">hx1</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">mul_right</span> <span class=\"n\">_</span> <span class=\"o\">},</span>\n  <span class=\"k\">have</span> <span class=\"n\">hxnorm</span> <span class=\"o\">:</span> <span class=\"bp\">∥</span><span class=\"n\">x</span><span class=\"bp\">∥</span> <span class=\"bp\">&lt;</span> <span class=\"mi\">1</span><span class=\"o\">,</span> <span class=\"kd\">by</span> <span class=\"n\">refine</span> <span class=\"n\">abs_lt.mpr</span> <span class=\"o\">⟨</span><span class=\"n\">_</span><span class=\"o\">,</span> <span class=\"n\">_</span><span class=\"o\">⟩</span> <span class=\"bp\">;</span> <span class=\"n\">linarith</span><span class=\"o\">,</span>\n  <span class=\"k\">have</span> <span class=\"n\">hsum</span> <span class=\"o\">:</span> <span class=\"n\">summable</span> <span class=\"o\">(</span><span class=\"bp\">λ</span> <span class=\"n\">k</span> <span class=\"o\">:</span> <span class=\"n\">ℕ</span><span class=\"o\">,</span> <span class=\"bp\">↑</span><span class=\"n\">k</span> <span class=\"bp\">*</span> <span class=\"n\">θ</span> <span class=\"n\">k</span><span class=\"o\">),</span>\n  <span class=\"o\">{</span> <span class=\"n\">refine</span> <span class=\"o\">(</span><span class=\"n\">summable_nat_add_iff</span> <span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">mp</span> <span class=\"n\">_</span><span class=\"o\">,</span>\n    <span class=\"n\">simp</span> <span class=\"n\">only</span> <span class=\"o\">[</span><span class=\"n\">h1</span><span class=\"o\">,</span> <span class=\"bp\">←</span> <span class=\"n\">mul_assoc</span><span class=\"o\">],</span>\n    <span class=\"n\">refine</span> <span class=\"n\">summable.mul_right</span> <span class=\"n\">_</span> <span class=\"o\">(</span><span class=\"n\">summable.mul_right</span> <span class=\"n\">_</span> <span class=\"n\">_</span><span class=\"o\">),</span>\n    <span class=\"n\">set</span> <span class=\"n\">u</span> <span class=\"o\">:=</span> <span class=\"bp\">λ</span> <span class=\"n\">k</span> <span class=\"o\">:</span><span class=\"n\">ℕ</span><span class=\"o\">,</span> <span class=\"o\">(</span><span class=\"n\">k</span> <span class=\"o\">:</span> <span class=\"n\">ℝ</span><span class=\"o\">)</span> <span class=\"bp\">*</span> <span class=\"n\">x</span> <span class=\"bp\">^</span> <span class=\"n\">k</span><span class=\"o\">,</span>\n    <span class=\"n\">change</span> <span class=\"n\">summable</span> <span class=\"o\">(</span><span class=\"bp\">λ</span> <span class=\"o\">(</span><span class=\"n\">n</span> <span class=\"o\">:</span> <span class=\"n\">ℕ</span><span class=\"o\">),</span> <span class=\"n\">u</span> <span class=\"o\">(</span><span class=\"n\">n</span><span class=\"bp\">+</span><span class=\"mi\">1</span><span class=\"o\">)),</span>\n    <span class=\"n\">refine</span> <span class=\"o\">(</span><span class=\"n\">summable_nat_add_iff</span> <span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">mpr</span> <span class=\"n\">_</span><span class=\"o\">,</span>\n    <span class=\"n\">simpa</span> <span class=\"n\">using</span> <span class=\"n\">summable_pow_mul_geometric_of_norm_lt_1</span> <span class=\"mi\">1</span> <span class=\"n\">hxnorm</span> <span class=\"o\">},</span>\n  <span class=\"k\">have</span> <span class=\"n\">hy'</span> <span class=\"o\">:</span> <span class=\"n\">y</span> <span class=\"bp\">=</span> <span class=\"n\">C</span><span class=\"bp\">*</span><span class=\"n\">x</span><span class=\"o\">,</span> <span class=\"k\">from</span>  <span class=\"o\">(</span><span class=\"n\">div_eq_iff</span> <span class=\"n\">hx2.ne.symm</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">mp</span> <span class=\"n\">hC.symm</span><span class=\"o\">,</span>\n  <span class=\"n\">rw</span> <span class=\"o\">[</span><span class=\"n\">hq</span><span class=\"o\">,</span> <span class=\"n\">hVads</span><span class=\"o\">,</span> <span class=\"n\">hA</span><span class=\"o\">,</span> <span class=\"n\">ha</span><span class=\"o\">,</span> <span class=\"n\">hb</span><span class=\"o\">,</span> <span class=\"n\">hc</span><span class=\"o\">,</span> <span class=\"bp\">←</span> <span class=\"n\">hx</span><span class=\"o\">,</span> <span class=\"n\">mul_assoc</span><span class=\"o\">,</span> <span class=\"bp\">←</span><span class=\"n\">hy</span><span class=\"o\">,</span> <span class=\"n\">hy'</span><span class=\"o\">,</span> <span class=\"n\">mul_div_assoc</span><span class=\"o\">,</span> <span class=\"n\">tsum_eq_zero_add</span> <span class=\"n\">hsum</span><span class=\"o\">,</span> <span class=\"n\">tsum_eq_zero_add</span> <span class=\"n\">hsum2</span><span class=\"o\">],</span>\n  <span class=\"k\">have</span> <span class=\"o\">:</span> <span class=\"bp\">∀</span> <span class=\"n\">k</span> <span class=\"o\">:</span> <span class=\"n\">ℕ</span><span class=\"o\">,</span> <span class=\"o\">(</span><span class=\"n\">k</span> <span class=\"bp\">+</span> <span class=\"mi\">1</span> <span class=\"o\">:</span> <span class=\"n\">ℝ</span><span class=\"o\">)</span> <span class=\"bp\">*</span> <span class=\"o\">(</span><span class=\"n\">x</span> <span class=\"bp\">^</span> <span class=\"o\">(</span><span class=\"n\">k</span> <span class=\"bp\">+</span> <span class=\"mi\">1</span><span class=\"o\">)</span> <span class=\"bp\">*</span> <span class=\"n\">C</span> <span class=\"bp\">*</span> <span class=\"n\">θ</span> <span class=\"mi\">0</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"o\">((</span><span class=\"n\">k</span> <span class=\"bp\">+</span> <span class=\"mi\">1</span> <span class=\"o\">:</span> <span class=\"n\">ℝ</span><span class=\"o\">)</span> <span class=\"bp\">*</span> <span class=\"o\">(</span><span class=\"n\">x</span> <span class=\"bp\">^</span> <span class=\"o\">(</span><span class=\"n\">k</span> <span class=\"bp\">+</span> <span class=\"mi\">1</span><span class=\"o\">)</span> <span class=\"bp\">*</span> <span class=\"n\">C</span><span class=\"o\">))</span> <span class=\"bp\">*</span> <span class=\"n\">θ</span> <span class=\"mi\">0</span><span class=\"o\">,</span>\n  <span class=\"kd\">by</span> <span class=\"n\">simp</span> <span class=\"o\">[</span><span class=\"n\">mul_assoc</span><span class=\"o\">],</span>\n  <span class=\"n\">simp</span> <span class=\"n\">only</span> <span class=\"o\">[</span><span class=\"n\">nat.cast_zero</span><span class=\"o\">,</span> <span class=\"n\">zero_mul</span><span class=\"o\">,</span> <span class=\"n\">zero_add</span><span class=\"o\">,</span> <span class=\"n\">nat.cast_one</span><span class=\"o\">,</span> <span class=\"n\">one_mul</span><span class=\"o\">,</span> <span class=\"n\">nat.cast_add</span><span class=\"o\">,</span> <span class=\"n\">h1</span><span class=\"o\">,</span> <span class=\"n\">this</span><span class=\"o\">],</span>\n  <span class=\"n\">rw</span> <span class=\"o\">[</span><span class=\"n\">tsum_mul_right</span><span class=\"o\">,</span> <span class=\"n\">tsum_mul_right</span><span class=\"o\">,</span><span class=\"k\">show</span> <span class=\"bp\">∀</span> <span class=\"n\">z</span> <span class=\"o\">:</span> <span class=\"n\">ℝ</span><span class=\"o\">,</span> <span class=\"n\">θ</span> <span class=\"mi\">0</span> <span class=\"bp\">+</span> <span class=\"n\">z</span> <span class=\"bp\">*</span> <span class=\"n\">θ</span> <span class=\"mi\">0</span> <span class=\"bp\">=</span> <span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"bp\">+</span><span class=\"n\">z</span><span class=\"o\">)</span><span class=\"bp\">*</span><span class=\"n\">θ</span> <span class=\"mi\">0</span><span class=\"o\">,</span> <span class=\"kd\">by</span> <span class=\"o\">{</span><span class=\"n\">intro</span> <span class=\"n\">z</span><span class=\"o\">,</span> <span class=\"n\">rw</span> <span class=\"o\">[</span><span class=\"n\">add_mul</span><span class=\"o\">,</span> <span class=\"n\">one_mul</span><span class=\"o\">]</span> <span class=\"o\">},</span>\n      <span class=\"n\">mul_div_mul_right</span> <span class=\"n\">_</span> <span class=\"n\">_</span> <span class=\"n\">hθ</span><span class=\"o\">,</span> <span class=\"n\">BET₁</span> <span class=\"n\">C</span> <span class=\"n\">hx1</span> <span class=\"n\">hx2</span><span class=\"o\">,</span> <span class=\"bp\">←</span> <span class=\"n\">mul_div_assoc</span><span class=\"o\">]</span>\n<span class=\"kd\">end</span>\n</code></pre></div>\n<p>where I removed the unneeded assumptions.</p>",
        "id": 288788882,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1657189975
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"310045\">@Eric Wieser</span> yep - that's the BET formalization. </p>\n<p><span class=\"user-mention\" data-user-id=\"110031\">@Patrick Massot</span> Thanks for helping us shorten the proof! We wrestled a bit with the types and assumptions around hsum and hsum2 - nice to see a cleaner way to do it. </p>\n<p>Part of the \"weirdness\" of the BET statement is that the variables that are defined have chemical meaning (better in-line comments and documentation will be coming). For example, A is the area of the surface and Vads is the amount of adsorbed gas, and q is the amount adsorbed per unit area. Some of these variables don't appear in the final expression, but are used when deriving it.</p>",
        "id": 288792581,
        "sender_full_name": "Tyler Josephson",
        "timestamp": 1657192708
    },
    {
        "content": "<p>I understand they have chemical meaning of course.  But they play no role in this statement. In isolation, this is only making things complicated. It would make sense if you had a full theory with several definitions and lemmas.</p>",
        "id": 288792838,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1657192897
    },
    {
        "content": "<p>I also find it very suspicious that the formula for <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>θ</mi></mrow><annotation encoding=\"application/x-tex\">\\theta</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">θ</span></span></span></span> cannot be expressed in a single way including <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>θ</mi><mn>0</mn></msub></mrow><annotation encoding=\"application/x-tex\">\\theta_0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">θ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">0</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>. Are you sure you formalized what you intended to formalize?</p>",
        "id": 288793202,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1657193130
    },
    {
        "content": "<p>I mean your sequence satisfies <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>θ</mi><mrow><mi>k</mi><mo>+</mo><mn>1</mn></mrow></msub><mo>=</mo><mi>x</mi><msub><mi>θ</mi><mi>k</mi></msub></mrow><annotation encoding=\"application/x-tex\">\\theta_{k+1} = x\\theta_k</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.9028em;vertical-align:-0.2083em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">θ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03148em;\">k</span><span class=\"mbin mtight\">+</span><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2083em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8444em;vertical-align:-0.15em;\"></span><span class=\"mord mathnormal\">x</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">θ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03148em;\">k</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> for all <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>k</mi></mrow><annotation encoding=\"application/x-tex\">k</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03148em;\">k</span></span></span></span> except for <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>k</mi><mo>=</mo><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">k = 0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03148em;\">k</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">0</span></span></span></span> where <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>θ</mi><mrow><mn>0</mn><mo>+</mo><mn>1</mn></mrow></msub><mo>=</mo><mi>x</mi><mi>C</mi><msub><mi>θ</mi><mn>0</mn></msub></mrow><annotation encoding=\"application/x-tex\">\\theta_{0 + 1} = xC\\theta_0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.9028em;vertical-align:-0.2083em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">θ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">0</span><span class=\"mbin mtight\">+</span><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2083em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8444em;vertical-align:-0.15em;\"></span><span class=\"mord mathnormal\">x</span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">C</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">θ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">0</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>. Is that really what you intended?</p>",
        "id": 288793438,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1657193283
    },
    {
        "content": "<p><a href=\"/user_uploads/3121/ZZ4s2pcnLBpSDrBqbGN7gtFr/Brunauer38-BET-theory.pdf\">Brunauer38-BET-theory.pdf</a> <br>\nThe original paper is here, if you're curious. We're actually following a slightly different derivation in the current proof, but plan to modify this one to more closely follow the original (proving Eq. 26 first, and then Eq. 28).</p>\n<p>Indeed, our sequence for $\\theta$ is different for the first index compared to all others - this is part of the theory. For $k=0$, the layer of adsorbed molecules interact with the surface, and for $k &gt; 0$, the molecules lay on top of other molecules. So, these layers have different interaction strengths, and require different constants (and a weird setup for the summation).</p>",
        "id": 288796443,
        "sender_full_name": "Tyler Josephson",
        "timestamp": 1657195382
    },
    {
        "content": "<p>I am definitely cheering at your effort formalizing stuff from chemistry and physics. However, I'm really unsure about the style of your code. </p>\n<p>I have randomly stumbled to the directory about the translational invariance of Lennard Jones potential.</p>\n<p>The invariance is just a consequence that the the potential <code>V</code> around a particle is <code>V(x) = f(|x-p|)</code> where <code>p</code> is particle position. It can be generalized even more, but radially symmetric potentials are very common. Mathlib benefits greatly from keeping things very general such that it provides a good API to build on top of. The way your code/theorems are stated and formulated do not seem to support that </p>\n<p>So for example, I would expect to define Lennard-Jones potential as a function and then state the properties of that function.</p>\n<p>Now specifically about potentials and constitutive relations. For example, I would expect theorems like: if you have a function <code>V(x, y)</code> that is invariant under transformation <code>V(R*x+t, R*y+t)</code> for any <code>R</code> rotation matrix and any vector <code>t</code>. Then there is a function <code>U</code> s.t. <code>V(x, y) = U(|x-y|)</code>. Of course this implication goes  the other way and the special case it that LJ potential is translationaly invariant.</p>\n<p>Even more generalization, this statement has to be some special case of a theorem from Classical Invariant theory. Unfortunately, I have always failed to learn this theory properly, so I can't point you to the exact theorem.</p>",
        "id": 288800684,
        "sender_full_name": "Tomas Skrivan",
        "timestamp": 1657197853
    },
    {
        "content": "<p>Also I really do not see the benefit of the theorem assumptions like <code>hC := C = y/x</code>. It is just a definition of <code>C</code>, isn't this what <code>let</code> bindings are for? That is the benefit of having it as an assumption?</p>",
        "id": 288801107,
        "sender_full_name": "Tomas Skrivan",
        "timestamp": 1657198074
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"346070\">Tomas Skrivan</span> <a href=\"#narrow/stream/113488-general/topic/Formalizing.20Chemical.20Theory/near/288800684\">said</a>:</p>\n<blockquote>\n<p>Even more generalization, this statement has to be some special case of a theorem from Classical Invariant theory. Unfortunately, I have always failed to learn this theory properly, so I can't point you to the exact theorem.</p>\n</blockquote>\n<p>Are you thinking of the First Fundamental Theorem?  For instance, Theorem 10.2, p. 114 of <a href=\"http://www.math.iitb.ac.in/~shripad/Wilberd/KP-Primer.pdf\">this reference</a>.</p>",
        "id": 288801622,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1657198324
    },
    {
        "content": "<p>Yeah I think that would be it. At some point I probably understood the statement but now it is mostly gibberish to me :(</p>",
        "id": 288802503,
        "sender_full_name": "Tomas Skrivan",
        "timestamp": 1657198764
    },
    {
        "content": "<p>It is simply saying that a (polynomial) function that is invariant under the orthogonal group (i.e. the group of rotations) is a function of the scalar products of the involved arguments.  It takes a bit of unpacking, but it is saying that the only meaningful quantities to talk about that are unchanged by rotations are scalar products.  The difference <code>x-y</code> in your formula is a consequence of translations.</p>",
        "id": 288802877,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1657198959
    },
    {
        "content": "<p>Yes that is roughly what I remember it saying on high level.</p>\n<p>However I was working with a function like: <code>F(A, x y) = F(R*A*S, R*x, S*y)</code> for every rotation matrix <code>R, S</code> and I totally failed at applying the FFT to this case. Or maybe it was even more complicated, I don't remember not important here.</p>\n<p>The point is that the way it is formulated it quite impenetrable to a physicist or a chemist.</p>",
        "id": 288803449,
        "sender_full_name": "Tomas Skrivan",
        "timestamp": 1657199283
    },
    {
        "content": "<p>Oh, I totally agree with the impenetrability: not just for physicists or chemists, but for anyone who has not learned the classical formalism of invariant theory.  The brackets <code>(i|j)</code> are a great example of shrouding an easy concept with an inscrutable symbol!  Who would think that it means \"take the scalar products\"?</p>",
        "id": 288803877,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1657199502
    },
    {
        "content": "<p>I think I've put my finger on what's weird about this code; it doesn't contain a single definition! (At least according to a github search)</p>",
        "id": 288813086,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1657203913
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"346070\">Tomas Skrivan</span> <a href=\"#narrow/stream/113488-general/topic/Formalizing.20Chemical.20Theory/near/288800684\">said</a>:</p>\n<blockquote>\n<p>I am definitely cheering at your effort formalizing stuff from chemistry and physics. However, I'm really unsure about the style of your code. </p>\n<p>I have randomly stumbled to the directory about the translational invariance of Lennard Jones potential.</p>\n<p>The invariance is just a consequence that the the potential <code>V</code> around a particle is <code>V(x) = f(|x-p|)</code> where <code>p</code> is particle position. It can be generalized even more, but radially symmetric potentials are very common. Mathlib benefits greatly from keeping things very general such that it provides a good API to build on top of. The way your code/theorems are stated and formulated do not seem to support that </p>\n<p>So for example, I would expect to define Lennard-Jones potential as a function and then state the properties of that function.</p>\n<p>Now specifically about potentials and constitutive relations. For example, I would expect theorems like: if you have a function <code>V(x, y)</code> that is invariant under transformation <code>V(R*x+t, R*y+t)</code> for any <code>R</code> rotation matrix and any vector <code>t</code>. Then there is a function <code>U</code> s.t. <code>V(x, y) = U(|x-y|)</code>. Of course this implication goes  the other way and the special case it that LJ potential is translationaly invariant.</p>\n<p>Even more generalization, this statement has to be some special case of a theorem from Classical Invariant theory. Unfortunately, I have always failed to learn this theory properly, so I can't point you to the exact theorem.</p>\n</blockquote>\n<p>Ahh, great suggestions for the LJ potential - approaching this from a \"function\"-based perspective makes a lot of sense! We started with this overly-simple proof as we've learned Lean, with an aim to generalize to both translation and rotation invariance of LJ, and eventually to \"all pairwise interaction potentials.\" Treating these as functions will be much more powerful. We'd love to leverage invariance in mathlib, but understanding that (and getting our types and definitions straightened out) has been a barrier so far.</p>",
        "id": 288824593,
        "sender_full_name": "Tyler Josephson",
        "timestamp": 1657208691
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"346070\">Tomas Skrivan</span> <a href=\"#narrow/stream/113488-general/topic/Formalizing.20Chemical.20Theory/near/288801107\">said</a>:</p>\n<blockquote>\n<p>Also I really do not see the benefit of the theorem assumptions like <code>hC := C = y/x</code>. It is just a definition of <code>C</code>, isn't this what <code>let</code> bindings are for? That is the benefit of having it as an assumption?</p>\n</blockquote>\n<p>Also great suggestion! <span class=\"user-mention\" data-user-id=\"474115\">@Max Bobbin</span> - let's learn more how <code>let</code> works and try that out.</p>",
        "id": 288824710,
        "sender_full_name": "Tyler Josephson",
        "timestamp": 1657208758
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span> <a href=\"#narrow/stream/113488-general/topic/Formalizing.20Chemical.20Theory/near/288813086\">said</a>:</p>\n<blockquote>\n<p>I think I've put my finger on what's weird about this code; it doesn't contain a single definition! (At least according to a github search)</p>\n</blockquote>\n<p>I've tried to use def a couple of times but could never figure out exactly how or why to use it or the power, but I understand that we have a lot of places we could use it. Tomas gave the suggestion of using def for our Lennard-Jones potential and then writing theorems about that. I've read the Lean textbook and the def chapter, but I think I'm still missing some things about it. Do you have any examples you could point me towards or any suggestions to use def in our Github? From there I could go forward and start understanding def and learning it better</p>",
        "id": 288828694,
        "sender_full_name": "Max Bobbin",
        "timestamp": 1657210500
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span> <a href=\"#narrow/stream/113488-general/topic/Formalizing.20Chemical.20Theory/near/288813086\">said</a>:</p>\n<blockquote>\n<p>I think I've put my finger on what's weird about this code; it doesn't contain a single definition! (At least according to a github search)</p>\n</blockquote>\n<p>Good catch! Indeed, we haven't used <code>def</code> anywhere, yet - will learn more about these and try to improve the structure. We've mostly been introducing terms as premises, and drawing conclusions from them. We can definitely see some cases where that would be a better model for setting these up (define the LJ potential as a function, and then prove statements about it, rather than give it as a premise). But other proofs, like for the kinematic equations, I don't quite see how a definition would be appropriate. We're not trying to define position and prove the properties it has; we want to show that position, velocity, and acceleration, so defined, lead to this equation or that equation. What do you think?</p>",
        "id": 288829903,
        "sender_full_name": "Tyler Josephson",
        "timestamp": 1657210990
    },
    {
        "content": "<p>I now remember that I gave up on looking at <a href=\"https://github.com/ATOMSLab/LeanChemicalTheories/blob/main/src/Kinematics/Kinematic_Equations\">the kinematics stuff</a> because the filename is missing <code>.lean</code> and so GitHub does not highlight it!</p>",
        "id": 288844709,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1657217556
    },
    {
        "content": "<p>(deleted)</p>",
        "id": 288844806,
        "sender_full_name": "Max Bobbin",
        "timestamp": 1657217608
    },
    {
        "content": "<p>Yes, I just fixed those problems. We made some of the files in Github and copied the code over and forgot to add the .lean. That should be fixed right now, sorry for that</p>",
        "id": 288844987,
        "sender_full_name": "Max Bobbin",
        "timestamp": 1657217693
    },
    {
        "content": "<p>Also, besides learning about def, I also noticed that a big chunk of our proofs is algebra, I've learned a lot about different simplifying tactics that help reduce code lines, but is there any other suggestions you all have to help us elevate the headache of algebraic simplification in Lean? BET is a good example where we have a rw line with 20 or so theorems used just to simplify the addition of two division structures.</p>",
        "id": 288845394,
        "sender_full_name": "Max Bobbin",
        "timestamp": 1657217885
    },
    {
        "content": "<p>In CSTR_Balance.lean is it necessary to define new axioms?</p>",
        "id": 288888213,
        "sender_full_name": "Brandon Brown",
        "timestamp": 1657245769
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"243102\">@Brandon Brown</span> No it isn't. That is very old, one of the first things I did where I was playing around with stuff. Those axioms are useless and easily can lead to problems. I just never got around to changing that</p>",
        "id": 288888288,
        "sender_full_name": "Max Bobbin",
        "timestamp": 1657245870
    },
    {
        "content": "<p>I would recommend switching to <code>let</code> bindings. That way, just simply calling <code>simp</code> should reduce the statement to Patrick's reformulation:</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kd\">theorem</span> <span class=\"n\">BET₁</span> <span class=\"o\">{</span><span class=\"n\">x</span> <span class=\"o\">:</span> <span class=\"n\">ℝ</span><span class=\"o\">}</span> <span class=\"o\">(</span><span class=\"n\">C</span> <span class=\"o\">:</span> <span class=\"n\">ℝ</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">hx1</span><span class=\"o\">:</span> <span class=\"n\">x</span> <span class=\"bp\">&lt;</span> <span class=\"mi\">1</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">hx2</span> <span class=\"o\">:</span> <span class=\"mi\">0</span> <span class=\"bp\">&lt;</span> <span class=\"n\">x</span><span class=\"o\">)</span> <span class=\"o\">:</span>\n  <span class=\"o\">(</span><span class=\"bp\">∑'</span> <span class=\"n\">k</span> <span class=\"o\">:</span> <span class=\"n\">ℕ</span><span class=\"o\">,</span> <span class=\"o\">(</span><span class=\"n\">k</span> <span class=\"bp\">+</span> <span class=\"mi\">1</span> <span class=\"o\">:</span> <span class=\"n\">ℝ</span><span class=\"o\">)</span><span class=\"bp\">*</span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"bp\">^</span><span class=\"o\">(</span><span class=\"n\">k</span><span class=\"bp\">+</span><span class=\"mi\">1</span><span class=\"o\">)</span> <span class=\"bp\">*</span> <span class=\"n\">C</span><span class=\"o\">))</span><span class=\"bp\">/</span><span class=\"o\">(</span><span class=\"mi\">1</span> <span class=\"bp\">+</span> <span class=\"bp\">∑'</span> <span class=\"n\">k</span><span class=\"o\">,</span> <span class=\"n\">x</span><span class=\"bp\">^</span><span class=\"o\">(</span><span class=\"n\">k</span><span class=\"bp\">+</span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"bp\">*</span> <span class=\"n\">C</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"n\">C</span><span class=\"bp\">*</span><span class=\"n\">x</span><span class=\"bp\">/</span><span class=\"o\">((</span><span class=\"mi\">1</span> <span class=\"bp\">-</span> <span class=\"n\">x</span><span class=\"o\">)</span><span class=\"bp\">*</span><span class=\"o\">(</span><span class=\"mi\">1</span> <span class=\"bp\">-</span> <span class=\"n\">x</span> <span class=\"bp\">+</span> <span class=\"n\">C</span><span class=\"bp\">*</span><span class=\"n\">x</span><span class=\"o\">))</span> <span class=\"o\">:=</span>\n<span class=\"gr\">sorry</span>\n</code></pre></div>\n<p>Which should be fairly easy to prove. The left side is (modulo some constants), derivative of geometric series divided by geometric series. You can eliminate those sums as these series have explicit formulas. After that is is just a matter of algebra and <code>ring</code> tactic or something similar might do the job.</p>",
        "id": 288900699,
        "sender_full_name": "Tomas Skrivan",
        "timestamp": 1657259074
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"346070\">@Tomas Skrivan</span>  I see what you mean by using Let and I remember trying to use it before, but I couldn't get it to work last time because it started to get in an application of Types that I didn't understand. Would you mind elaborating on the application of let? If I wanted to use let to write hC : C = y/x, like you suggested, would it be something like:</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"k\">let</span> <span class=\"n\">hC</span> <span class=\"o\">:=</span> <span class=\"n\">C</span> <span class=\"bp\">=</span> <span class=\"n\">y</span><span class=\"bp\">/</span><span class=\"n\">x</span>\n</code></pre></div>\n<p>I was also looking at using set, ie</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"n\">set</span><span class=\"bp\">!</span> <span class=\"n\">C</span><span class=\"o\">:=</span> <span class=\"n\">y</span><span class=\"bp\">/</span><span class=\"n\">x</span> <span class=\"k\">with</span> <span class=\"n\">hC</span>\n</code></pre></div>\n<p>but that created a new instance of C</p>",
        "id": 288960574,
        "sender_full_name": "Max Bobbin",
        "timestamp": 1657296507
    },
    {
        "content": "<p>You can use <code>let</code> like this:</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kd\">example</span> <span class=\"o\">(</span><span class=\"n\">m</span> <span class=\"n\">n</span> <span class=\"o\">:</span> <span class=\"n\">ℕ</span><span class=\"o\">)</span> <span class=\"o\">:</span>\n    <span class=\"k\">let</span> <span class=\"n\">lhs</span> <span class=\"o\">:=</span> <span class=\"n\">m</span> <span class=\"bp\">+</span> <span class=\"n\">n</span> <span class=\"k\">in</span>\n    <span class=\"k\">let</span> <span class=\"n\">rhs</span> <span class=\"o\">:=</span> <span class=\"n\">n</span> <span class=\"bp\">+</span> <span class=\"n\">m</span> <span class=\"k\">in</span>\n    <span class=\"n\">lhs</span> <span class=\"bp\">=</span> <span class=\"n\">rhs</span> <span class=\"o\">:=</span>\n<span class=\"kd\">by</span> <span class=\"n\">simp</span>\n</code></pre></div>",
        "id": 288961228,
        "sender_full_name": "Tomas Skrivan",
        "timestamp": 1657296806
    },
    {
        "content": "<p>So the statement would look something like:</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kd\">theorem</span> <span class=\"n\">BET</span> <span class=\"o\">(</span><span class=\"n\">V₀</span> <span class=\"n\">x</span> <span class=\"n\">y</span> <span class=\"n\">c</span> <span class=\"o\">:</span> <span class=\"n\">ℝ</span><span class=\"o\">}</span> <span class=\"o\">(</span><span class=\"n\">hx1</span> <span class=\"o\">:</span> <span class=\"n\">x</span> <span class=\"bp\">&lt;</span> <span class=\"mi\">1</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">hx2</span> <span class=\"o\">:</span> <span class=\"mi\">0</span> <span class=\"bp\">&lt;</span> <span class=\"n\">x</span><span class=\"o\">)</span> <span class=\"o\">:</span>\n   <span class=\"n\">a</span> <span class=\"o\">:=</span> <span class=\"bp\">...</span> <span class=\"k\">in</span>\n   <span class=\"n\">b</span> <span class=\"o\">:=</span> <span class=\"bp\">...</span> <span class=\"k\">in</span>\n   <span class=\"n\">P</span> <span class=\"o\">:=</span> <span class=\"bp\">...</span> <span class=\"k\">in</span>\n   <span class=\"n\">q</span> <span class=\"o\">:=</span> <span class=\"bp\">...</span> <span class=\"k\">in</span>\n   <span class=\"n\">q</span> <span class=\"bp\">=</span> <span class=\"n\">a</span><span class=\"bp\">*</span><span class=\"n\">P</span><span class=\"bp\">/</span><span class=\"o\">((</span><span class=\"mi\">1</span><span class=\"bp\">-</span><span class=\"n\">b</span><span class=\"bp\">*</span><span class=\"n\">P</span><span class=\"o\">)</span><span class=\"bp\">*</span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"bp\">-</span><span class=\"n\">b</span><span class=\"bp\">*</span><span class=\"n\">P</span><span class=\"bp\">+</span><span class=\"n\">c</span><span class=\"bp\">*</span><span class=\"n\">P</span><span class=\"o\">))</span>\n<span class=\"o\">:=</span> <span class=\"bp\">...</span>\n</code></pre></div>",
        "id": 288961887,
        "sender_full_name": "Tomas Skrivan",
        "timestamp": 1657297140
    },
    {
        "content": "<p>I think you missed the <code>let</code></p>",
        "id": 288962411,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1657297428
    },
    {
        "content": "<p>That should probably be</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kd\">theorem</span> <span class=\"n\">BET</span> <span class=\"o\">(</span><span class=\"n\">V₀</span> <span class=\"n\">x</span> <span class=\"n\">y</span> <span class=\"n\">c</span> <span class=\"o\">:</span> <span class=\"n\">ℝ</span><span class=\"o\">}</span> <span class=\"o\">(</span><span class=\"n\">hx1</span> <span class=\"o\">:</span> <span class=\"n\">x</span> <span class=\"bp\">&lt;</span> <span class=\"mi\">1</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">hx2</span> <span class=\"o\">:</span> <span class=\"mi\">0</span> <span class=\"bp\">&lt;</span> <span class=\"n\">x</span><span class=\"o\">)</span> <span class=\"o\">:</span>\n   <span class=\"k\">let</span> <span class=\"n\">a</span> <span class=\"o\">:=</span> <span class=\"bp\">...</span><span class=\"o\">,</span>\n       <span class=\"n\">b</span> <span class=\"o\">:=</span> <span class=\"bp\">...</span><span class=\"o\">,</span>\n       <span class=\"n\">P</span> <span class=\"o\">:=</span> <span class=\"bp\">...</span><span class=\"o\">,</span>\n       <span class=\"n\">q</span> <span class=\"o\">:=</span> <span class=\"bp\">...</span> <span class=\"k\">in</span>\n  <span class=\"n\">q</span> <span class=\"bp\">=</span> <span class=\"n\">a</span><span class=\"bp\">*</span><span class=\"n\">P</span><span class=\"bp\">/</span><span class=\"o\">((</span><span class=\"mi\">1</span><span class=\"bp\">-</span><span class=\"n\">b</span><span class=\"bp\">*</span><span class=\"n\">P</span><span class=\"o\">)</span><span class=\"bp\">*</span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"bp\">-</span><span class=\"n\">b</span><span class=\"bp\">*</span><span class=\"n\">P</span><span class=\"bp\">+</span><span class=\"n\">c</span><span class=\"bp\">*</span><span class=\"n\">P</span><span class=\"o\">))</span>\n<span class=\"o\">:=</span> <span class=\"bp\">...</span>\n</code></pre></div>",
        "id": 288962514,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1657297468
    },
    {
        "content": "<p>Ohhh, I see. I was thinking you meant use Let in the actual proof part, but we can use let in the objective statement. That is interesting, thank you</p>",
        "id": 288962558,
        "sender_full_name": "Max Bobbin",
        "timestamp": 1657297484
    },
    {
        "content": "<p>So when I have this</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code>  <span class=\"k\">let</span> <span class=\"n\">a</span> <span class=\"o\">:=</span> <span class=\"n\">V₀</span><span class=\"bp\">*</span><span class=\"n\">C</span><span class=\"o\">,</span>\n      <span class=\"n\">b</span> <span class=\"o\">:=</span> <span class=\"n\">x</span><span class=\"bp\">/</span><span class=\"n\">P</span><span class=\"o\">,</span>\n      <span class=\"n\">c</span> <span class=\"o\">:=</span> <span class=\"n\">y</span><span class=\"bp\">/</span><span class=\"n\">P</span><span class=\"o\">,</span>\n      <span class=\"n\">q</span> <span class=\"o\">:=</span> <span class=\"n\">Vads</span><span class=\"bp\">/</span><span class=\"n\">A</span> <span class=\"k\">in</span>\n  <span class=\"n\">q</span> <span class=\"bp\">=</span> <span class=\"n\">a</span><span class=\"bp\">*</span><span class=\"n\">P</span><span class=\"bp\">/</span><span class=\"o\">((</span><span class=\"mi\">1</span><span class=\"bp\">-</span><span class=\"n\">b</span><span class=\"bp\">*</span><span class=\"n\">P</span><span class=\"o\">)</span><span class=\"bp\">*</span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"bp\">-</span><span class=\"n\">b</span><span class=\"bp\">*</span><span class=\"n\">P</span><span class=\"bp\">+</span><span class=\"n\">c</span><span class=\"bp\">*</span><span class=\"n\">P</span><span class=\"o\">))</span>\n</code></pre></div>\n<p>it gets rid of the relationship premises, which cleans up the statement a lot, but now I'm at a point where I have a goal</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code> <span class=\"n\">P</span> <span class=\"bp\">≠</span> <span class=\"mi\">0</span>\n</code></pre></div>\n<p>With the old proof, I could use linarith to show that this is true because I have 0 &lt; x and an explicit relation between P and x through those premises. Is there a way to show that relation from the let statements?</p>",
        "id": 288965891,
        "sender_full_name": "Max Bobbin",
        "timestamp": 1657299207
    },
    {
        "content": "<p>Nevermind, you can use intro <span aria-label=\"laughing\" class=\"emoji emoji-1f606\" role=\"img\" title=\"laughing\">:laughing:</span>, not sure why I thought it was more complicated then that</p>",
        "id": 288966486,
        "sender_full_name": "Max Bobbin",
        "timestamp": 1657299507
    },
    {
        "content": "<p>There is a new version of BET on the github that uses the suggestions given in this chain</p>",
        "id": 288974313,
        "sender_full_name": "Max Bobbin",
        "timestamp": 1657303656
    },
    {
        "content": "<p>Presumably</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"o\">(</span><span class=\"n\">hA</span> <span class=\"o\">:</span> <span class=\"n\">A</span> <span class=\"bp\">=</span> <span class=\"bp\">∑'</span> <span class=\"o\">(</span><span class=\"n\">k</span> <span class=\"o\">:</span> <span class=\"n\">ℕ</span><span class=\"o\">),</span> <span class=\"n\">θ</span> <span class=\"n\">k</span><span class=\"o\">)</span>\n<span class=\"o\">(</span><span class=\"n\">hVads</span> <span class=\"o\">:</span> <span class=\"n\">Vads</span> <span class=\"bp\">=</span>  <span class=\"n\">V₀</span> <span class=\"bp\">*</span> <span class=\"bp\">∑'</span> <span class=\"o\">(</span><span class=\"n\">k</span> <span class=\"o\">:</span> <span class=\"n\">ℕ</span><span class=\"o\">),</span> <span class=\"n\">k</span> <span class=\"bp\">*</span> <span class=\"n\">θ</span> <span class=\"n\">k</span><span class=\"o\">)</span>\n</code></pre></div>\n<p>can also be moved into the <code>let</code>?</p>",
        "id": 288982881,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1657308235
    },
    {
        "content": "<p>That is true, just added that</p>",
        "id": 288984311,
        "sender_full_name": "Max Bobbin",
        "timestamp": 1657309091
    },
    {
        "content": "<p>Latest form</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kd\">theorem</span> <span class=\"n\">BET_regression_form</span>\n<span class=\"o\">(</span><span class=\"n\">θ</span> <span class=\"o\">:</span> <span class=\"n\">ℕ</span> <span class=\"bp\">→</span> <span class=\"n\">ℝ</span> <span class=\"o\">){</span><span class=\"n\">P</span> <span class=\"n\">V₀</span> <span class=\"n\">x</span> <span class=\"n\">y</span><span class=\"o\">:</span> <span class=\"n\">ℝ</span><span class=\"o\">}</span>\n<span class=\"c1\">-- Equations</span>\n<span class=\"o\">(</span><span class=\"n\">h1</span> <span class=\"o\">:</span> <span class=\"k\">let</span> <span class=\"n\">C</span> <span class=\"o\">:=</span> <span class=\"n\">y</span><span class=\"bp\">/</span><span class=\"n\">x</span> <span class=\"k\">in</span> <span class=\"bp\">∀</span> <span class=\"n\">k</span><span class=\"o\">,</span> <span class=\"n\">θ</span> <span class=\"o\">(</span><span class=\"n\">k</span><span class=\"bp\">+</span><span class=\"mi\">1</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"o\">(</span><span class=\"n\">x</span> <span class=\"bp\">^</span> <span class=\"o\">(</span><span class=\"n\">k</span><span class=\"bp\">+</span><span class=\"mi\">1</span><span class=\"o\">))</span> <span class=\"bp\">*</span> <span class=\"n\">C</span> <span class=\"bp\">*</span> <span class=\"n\">θ</span> <span class=\"mi\">0</span><span class=\"o\">)</span>\n<span class=\"c1\">-- Constraints</span>\n<span class=\"o\">(</span><span class=\"n\">hx1</span><span class=\"o\">:</span> <span class=\"n\">x</span><span class=\"bp\">&lt;</span><span class=\"mi\">1</span><span class=\"o\">)</span>\n<span class=\"o\">(</span><span class=\"n\">hx2</span> <span class=\"o\">:</span> <span class=\"mi\">0</span> <span class=\"bp\">&lt;</span> <span class=\"n\">x</span><span class=\"o\">)</span>\n<span class=\"o\">(</span><span class=\"n\">hθ</span> <span class=\"o\">:</span> <span class=\"n\">θ</span> <span class=\"mi\">0</span> <span class=\"bp\">≠</span> <span class=\"mi\">0</span><span class=\"o\">)</span>\n<span class=\"o\">(</span><span class=\"n\">hP</span> <span class=\"o\">:</span> <span class=\"n\">P</span> <span class=\"bp\">≠</span> <span class=\"mi\">0</span><span class=\"o\">)</span>\n<span class=\"o\">:</span>\n  <span class=\"k\">let</span> <span class=\"n\">a</span> <span class=\"o\">:=</span> <span class=\"n\">V₀</span><span class=\"bp\">*</span><span class=\"n\">y</span><span class=\"bp\">/</span><span class=\"n\">P</span><span class=\"o\">,</span>\n      <span class=\"n\">b</span> <span class=\"o\">:=</span> <span class=\"n\">x</span><span class=\"bp\">/</span><span class=\"n\">P</span><span class=\"o\">,</span>\n      <span class=\"n\">c</span> <span class=\"o\">:=</span> <span class=\"n\">y</span><span class=\"bp\">/</span><span class=\"n\">P</span><span class=\"o\">,</span>\n      <span class=\"n\">Vads</span> <span class=\"o\">:=</span>  <span class=\"n\">V₀</span> <span class=\"bp\">*</span> <span class=\"bp\">∑'</span> <span class=\"o\">(</span><span class=\"n\">k</span> <span class=\"o\">:</span> <span class=\"n\">ℕ</span><span class=\"o\">),</span> <span class=\"n\">k</span> <span class=\"bp\">*</span> <span class=\"n\">θ</span> <span class=\"n\">k</span><span class=\"o\">,</span>\n      <span class=\"n\">A</span> <span class=\"o\">:=</span>  <span class=\"bp\">∑'</span> <span class=\"o\">(</span><span class=\"n\">k</span> <span class=\"o\">:</span> <span class=\"n\">ℕ</span><span class=\"o\">),</span> <span class=\"n\">θ</span> <span class=\"n\">k</span><span class=\"o\">,</span>\n      <span class=\"n\">q</span> <span class=\"o\">:=</span> <span class=\"n\">Vads</span><span class=\"bp\">/</span><span class=\"n\">A</span> <span class=\"k\">in</span>\n  <span class=\"n\">q</span> <span class=\"bp\">=</span> <span class=\"n\">a</span><span class=\"bp\">*</span><span class=\"n\">P</span><span class=\"bp\">/</span><span class=\"o\">((</span><span class=\"mi\">1</span><span class=\"bp\">-</span><span class=\"n\">b</span><span class=\"bp\">*</span><span class=\"n\">P</span><span class=\"o\">)</span><span class=\"bp\">*</span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"bp\">-</span><span class=\"n\">b</span><span class=\"bp\">*</span><span class=\"n\">P</span><span class=\"bp\">+</span><span class=\"n\">c</span><span class=\"bp\">*</span><span class=\"n\">P</span><span class=\"o\">))</span>\n<span class=\"o\">:=</span>\n</code></pre></div>",
        "id": 288984386,
        "sender_full_name": "Max Bobbin",
        "timestamp": 1657309145
    },
    {
        "content": "<p>You can also define the function/series <code>θ</code> with <code>let</code>.  The initial value <code>θ 0</code> has to be a parameter though.</p>",
        "id": 288990552,
        "sender_full_name": "Tomas Skrivan",
        "timestamp": 1657312815
    },
    {
        "content": "<p>I was running intro trouble implementing theta with let, and I wanted to try it through def. </p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kd\">variables</span> <span class=\"o\">{</span><span class=\"n\">x</span> <span class=\"n\">θ₀</span> <span class=\"o\">:</span> <span class=\"n\">ℝ</span><span class=\"o\">}</span>\n\n<span class=\"kd\">def</span> <span class=\"n\">seq</span> <span class=\"o\">:</span>  <span class=\"n\">ℕ</span> <span class=\"bp\">→</span> <span class=\"n\">ℝ</span>\n<span class=\"bp\">|</span><span class=\"o\">(</span><span class=\"mi\">0</span><span class=\"o\">:</span><span class=\"n\">ℕ</span><span class=\"o\">)</span>           <span class=\"o\">:=</span> <span class=\"n\">θ₀</span>\n<span class=\"bp\">|</span><span class=\"o\">(</span><span class=\"n\">nat.succ</span> <span class=\"n\">n</span><span class=\"o\">:</span><span class=\"n\">ℕ</span><span class=\"o\">)</span> <span class=\"o\">:=</span> <span class=\"n\">x</span><span class=\"bp\">^</span><span class=\"o\">(</span><span class=\"n\">nat.succ</span> <span class=\"n\">n</span><span class=\"o\">)</span><span class=\"bp\">*</span><span class=\"n\">θ₀</span>\n</code></pre></div>\n<p>This is my first time experimenting with def, but I think I set it up correctly. Only problem is Lean throughs a \"don't know how to synthesize placeholder\" error in the proof statement when I attempt to say <code>seq k</code></p>",
        "id": 288995491,
        "sender_full_name": "Max Bobbin",
        "timestamp": 1657315890
    },
    {
        "content": "<p><code>seq</code> takes in <code>x</code> and <code>θ₀</code> as variables, but it does not know where to find them. It would be better if you make the variables explicit (via <code>variables (x θ₀ : ℝ)</code>), and write <code>seq x θ₀ k</code> instead.</p>",
        "id": 288997623,
        "sender_full_name": "Andrew Yang",
        "timestamp": 1657317306
    },
    {
        "content": "<p>I don't see the need for cases, couldn't you define it as</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kn\">import</span> <span class=\"n\">data.real.basic</span>\n\n<span class=\"kd\">variables</span> <span class=\"o\">(</span><span class=\"n\">x</span> <span class=\"n\">θ₀</span> <span class=\"o\">:</span> <span class=\"n\">ℝ</span><span class=\"o\">)</span>\n\n<span class=\"kd\">def</span> <span class=\"n\">seq</span> <span class=\"o\">(</span><span class=\"n\">n</span> <span class=\"o\">:</span> <span class=\"n\">ℕ</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"n\">ℝ</span> <span class=\"o\">:=</span> <span class=\"n\">x</span><span class=\"bp\">^</span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"bp\">*</span><span class=\"n\">θ₀</span>\n</code></pre></div>",
        "id": 289016441,
        "sender_full_name": "Bolton Bailey",
        "timestamp": 1657338566
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span> <a href=\"#narrow/stream/113488-general/topic/Formalizing.20Chemical.20Theory/near/288775150\">said</a>:</p>\n<blockquote>\n<p>There's an example of how to set doc-gen up on your own project at <a href=\"https://github.com/ImperialCollegeLondon/M40001_lean/pull/5/files\">https://github.com/ImperialCollegeLondon/M40001_lean/pull/5/files</a></p>\n</blockquote>\n<p>Hi Eric, I was trying to setup our project using the steps you shared here. It is getting stuck at the first step trying to install elan.. Do you know what's this about? <br>\n<a href=\"/user_uploads/3121/HBVC7IR707j-_ZJdwjNUGBTe/Screen-Shot-2022-07-27-at-1.51.07-PM.png\">Screen-Shot-2022-07-27-at-1.51.07-PM.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/HBVC7IR707j-_ZJdwjNUGBTe/Screen-Shot-2022-07-27-at-1.51.07-PM.png\" title=\"Screen-Shot-2022-07-27-at-1.51.07-PM.png\"><img src=\"/user_uploads/3121/HBVC7IR707j-_ZJdwjNUGBTe/Screen-Shot-2022-07-27-at-1.51.07-PM.png\"></a></div>",
        "id": 291085839,
        "sender_full_name": "Samiha Sharlin",
        "timestamp": 1658944856
    },
    {
        "content": "<p>Try using <a href=\"https://raw.githubusercontent.com/leanprover/elan/master/elan-init.sh\">https://raw.githubusercontent.com/leanprover/elan/master/elan-init.sh</a> instead of <a href=\"https://raw.githubusercontent.com/Kha/elan/master/elan-init.sh\">https://raw.githubusercontent.com/Kha/elan/master/elan-init.sh</a></p>",
        "id": 291086443,
        "sender_full_name": "Mauricio Collares",
        "timestamp": 1658945065
    },
    {
        "content": "<p>Huh. Can you copy/paste the URL that curl mentions?</p>",
        "id": 291086456,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1658945072
    },
    {
        "content": "<p>The problem is that there is a version missing in the curl url (between the two slashes).</p>",
        "id": 291086755,
        "sender_full_name": "Mauricio Collares",
        "timestamp": 1658945179
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover/elan/releases/download/v1.4.1/elan-x86_64-unknown-linux-gnu.tar.gz\">https://github.com/leanprover/elan/releases/download/v1.4.1/elan-x86_64-unknown-linux-gnu.tar.gz</a> is a valid URL, <a href=\"https://github.com/leanprover/elan/releases/download//elan-x86_64-unknown-linux-gnu.tar.gz\">https://github.com/leanprover/elan/releases/download//elan-x86_64-unknown-linux-gnu.tar.gz</a> isn't</p>",
        "id": 291086817,
        "sender_full_name": "Mauricio Collares",
        "timestamp": 1658945200
    },
    {
        "content": "<p>But the snippet that determines the latest release changed in <a href=\"https://github.com/leanprover/elan/commit/c58659942e5ce83b91b91a4a55bbf5722e90c423\">https://github.com/leanprover/elan/commit/c58659942e5ce83b91b91a4a55bbf5722e90c423</a>, which is present in <a href=\"https://raw.githubusercontent.com/leanprover/elan/master/elan-init.sh\">https://raw.githubusercontent.com/leanprover/elan/master/elan-init.sh</a> but not in  <a href=\"https://raw.githubusercontent.com/Kha/elan/master/elan-init.sh\">https://raw.githubusercontent.com/Kha/elan/master/elan-init.sh</a></p>",
        "id": 291086903,
        "sender_full_name": "Mauricio Collares",
        "timestamp": 1658945241
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"325367\">Mauricio Collares</span> <a href=\"#narrow/stream/113488-general/topic/Formalizing.20Chemical.20Theory/near/291086443\">said</a>:</p>\n<blockquote>\n<p>Try using <a href=\"https://raw.githubusercontent.com/leanprover/elan/master/elan-init.sh\">https://raw.githubusercontent.com/leanprover/elan/master/elan-init.sh</a> instead of <a href=\"https://raw.githubusercontent.com/Kha/elan/master/elan-init.sh\">https://raw.githubusercontent.com/Kha/elan/master/elan-init.sh</a></p>\n</blockquote>\n<p>Thank you so much <span class=\"user-mention\" data-user-id=\"325367\">@Mauricio Collares</span> and <span class=\"user-mention\" data-user-id=\"307953\">@Ruben Van de Velde</span> ! The modified link works and got things to work out quite further. I am now having issues with generating html docs. Got some errors pertaining to our lean files earlier (incomplete proofs and inclusion of #check). After fixing all those, it still gets stuck building the html docs. This time I am not seeing any file name where the error is. I suppose it’s not the lean files anymore? <br>\n<a href=\"/user_uploads/3121/emB0X29eOWKCwmdj-bj-IyGt/Screen-Shot-2022-07-28-at-11.51.50-AM.png\">Screen-Shot-2022-07-28-at-11.51.50-AM.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/emB0X29eOWKCwmdj-bj-IyGt/Screen-Shot-2022-07-28-at-11.51.50-AM.png\" title=\"Screen-Shot-2022-07-28-at-11.51.50-AM.png\"><img src=\"/user_uploads/3121/emB0X29eOWKCwmdj-bj-IyGt/Screen-Shot-2022-07-28-at-11.51.50-AM.png\"></a></div>",
        "id": 291213055,
        "sender_full_name": "Samiha Sharlin",
        "timestamp": 1659023721
    },
    {
        "content": "<p>See PR comment</p>",
        "id": 291216521,
        "sender_full_name": "Mauricio Collares",
        "timestamp": 1659025055
    },
    {
        "content": "<p>I think that template might not work so well any more</p>",
        "id": 291218473,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1659026035
    },
    {
        "content": "<p>I made the PR to Kevin's repo a long time ago, and doc-gen has changed in the meantime</p>",
        "id": 291218555,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1659026056
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"480695\">@Samiha Sharlin</span> Might still be worth a try applying the second fix in <a href=\"https://github.com/ImperialCollegeLondon/M40001_lean/pull/5/files\">https://github.com/ImperialCollegeLondon/M40001_lean/pull/5/files</a>, because I get an empty json file without it and a valid json file with it. But like Eric said, other fixes might be required.</p>",
        "id": 291219215,
        "sender_full_name": "Mauricio Collares",
        "timestamp": 1659026348
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"325367\">@Mauricio Collares</span>, I pushed a different fix which is the one that I use at <a href=\"https://github.com/pygae/lean-ga\">https://github.com/pygae/lean-ga</a></p>",
        "id": 291219393,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1659026424
    },
    {
        "content": "<p>Ah, I missed that! Thanks for pointing it out.</p>",
        "id": 291219419,
        "sender_full_name": "Mauricio Collares",
        "timestamp": 1659026440
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"325367\">Mauricio Collares</span> <a href=\"#narrow/stream/113488-general/topic/Formalizing.20Chemical.20Theory/near/291219215\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"480695\">Samiha Sharlin</span> Might still be worth a try applying the second fix in <a href=\"https://github.com/ImperialCollegeLondon/M40001_lean/pull/5/files\">https://github.com/ImperialCollegeLondon/M40001_lean/pull/5/files</a>, because I get an empty json file without it and a valid json file with it. But like Eric said, other fixes might be required.</p>\n</blockquote>\n<p>Thank you! It works with this second fix! (but not completely). &lt;<a href=\"https://atomslab.github.io/LeanChemicalTheories/Adsorption/BETInfinite.html\">https://atomslab.github.io/LeanChemicalTheories/Adsorption/BETInfinite.html</a>&gt;<br>\nIs there something we need to add to our lean files so it connects to GitHub repo when we click source in the webpage.. ? That's the only part that didn't work I guess. I am also going to give <span class=\"user-mention\" data-user-id=\"310045\">@Eric Wieser</span> 's method for lean-ga a try and see if that works for me!</p>",
        "id": 291244873,
        "sender_full_name": "Samiha Sharlin",
        "timestamp": 1659038746
    },
    {
        "content": "<p>Yes, you can fix the source links; see my lean-ga version for the code to do so</p>",
        "id": 291245586,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1659039089
    },
    {
        "content": "<p>But it probably won't work if you copy the whole thing</p>",
        "id": 291245611,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1659039102
    },
    {
        "content": "<p>This line is the one that sets the source link: <a href=\"https://github.com/ATOMSLab/LeanChemicalTheories/blob/fe31998d5d9dd4addb0e86f18f03d1cf210542a7/.github/workflows/main.yml#L76\">https://github.com/ATOMSLab/LeanChemicalTheories/blob/fe31998d5d9dd4addb0e86f18f03d1cf210542a7/.github/workflows/main.yml#L76</a></p>",
        "id": 291245802,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1659039205
    }
]