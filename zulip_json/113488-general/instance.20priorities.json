[
    {
        "content": "<div class=\"codehilite\"><pre><span></span><code><span class=\"kn\">import</span> <span class=\"n\">algebra</span><span class=\"bp\">.</span><span class=\"n\">ring</span>\n\n<span class=\"kn\">universe</span> <span class=\"n\">u</span>\n\n<span class=\"n\">local</span> <span class=\"n\">attribute</span> <span class=\"o\">[</span><span class=\"n\">priority</span> <span class=\"mi\">1</span><span class=\"o\">]</span> <span class=\"n\">ring</span><span class=\"bp\">.</span><span class=\"n\">to_monoid</span>\n<span class=\"n\">local</span> <span class=\"n\">attribute</span> <span class=\"o\">[</span><span class=\"n\">priority</span> <span class=\"mi\">2000</span><span class=\"o\">]</span> <span class=\"n\">group</span><span class=\"bp\">.</span><span class=\"n\">to_monoid</span>\n\n<span class=\"kn\">variables</span> <span class=\"o\">{</span><span class=\"n\">G</span> <span class=\"o\">:</span> <span class=\"kt\">Type</span> <span class=\"n\">u</span><span class=\"o\">}</span> <span class=\"o\">[</span><span class=\"n\">group</span> <span class=\"n\">G</span><span class=\"o\">]</span>\n\n<span class=\"kn\">set_option</span> <span class=\"n\">trace</span><span class=\"bp\">.</span><span class=\"n\">class_instances</span> <span class=\"n\">true</span>\n<span class=\"bp\">#</span><span class=\"kn\">check</span> <span class=\"o\">(</span><span class=\"k\">by</span> <span class=\"n\">apply_instance</span> <span class=\"o\">:</span> <span class=\"n\">monoid</span> <span class=\"n\">G</span><span class=\"o\">)</span>\n</code></pre></div>",
        "id": 199244688,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1590825386
    },
    {
        "content": "<p>one would expect <code>group.to_monoid</code> to have higher priority than <code>ring.to_monoid</code> right</p>",
        "id": 199244689,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1590825400
    },
    {
        "content": "<p>but the trace looks like this:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"o\">[</span><span class=\"n\">class_instances</span><span class=\"o\">]</span>  <span class=\"n\">class</span><span class=\"bp\">-</span><span class=\"kn\">instance</span> <span class=\"n\">resolution</span> <span class=\"n\">trace</span>\n<span class=\"o\">[</span><span class=\"n\">class_instances</span><span class=\"o\">]</span> <span class=\"o\">(</span><span class=\"mi\">0</span><span class=\"o\">)</span> <span class=\"err\">?</span><span class=\"n\">x_0</span> <span class=\"o\">:</span> <span class=\"n\">monoid</span> <span class=\"n\">G</span> <span class=\"o\">:=</span> <span class=\"bp\">@</span><span class=\"n\">ring</span><span class=\"bp\">.</span><span class=\"n\">to_monoid</span> <span class=\"err\">?</span><span class=\"n\">x_1</span> <span class=\"err\">?</span><span class=\"n\">x_2</span>\n<span class=\"o\">[</span><span class=\"n\">class_instances</span><span class=\"o\">]</span> <span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"o\">)</span> <span class=\"err\">?</span><span class=\"n\">x_2</span> <span class=\"o\">:</span> <span class=\"n\">ring</span> <span class=\"n\">G</span> <span class=\"o\">:=</span> <span class=\"bp\">@</span><span class=\"n\">domain</span><span class=\"bp\">.</span><span class=\"n\">to_ring</span> <span class=\"err\">?</span><span class=\"n\">x_3</span> <span class=\"err\">?</span><span class=\"n\">x_4</span>\n<span class=\"o\">[</span><span class=\"n\">class_instances</span><span class=\"o\">]</span> <span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"o\">)</span> <span class=\"err\">?</span><span class=\"n\">x_4</span> <span class=\"o\">:</span> <span class=\"n\">domain</span> <span class=\"n\">G</span> <span class=\"o\">:=</span> <span class=\"bp\">@</span><span class=\"n\">integral_domain</span><span class=\"bp\">.</span><span class=\"n\">to_domain</span> <span class=\"err\">?</span><span class=\"n\">x_5</span> <span class=\"err\">?</span><span class=\"n\">x_6</span>\n<span class=\"o\">[</span><span class=\"n\">class_instances</span><span class=\"o\">]</span> <span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"o\">)</span> <span class=\"err\">?</span><span class=\"n\">x_2</span> <span class=\"o\">:</span> <span class=\"n\">ring</span> <span class=\"n\">G</span> <span class=\"o\">:=</span> <span class=\"bp\">@</span><span class=\"n\">comm_ring</span><span class=\"bp\">.</span><span class=\"n\">to_ring</span> <span class=\"err\">?</span><span class=\"n\">x_3</span> <span class=\"err\">?</span><span class=\"n\">x_4</span>\n<span class=\"o\">[</span><span class=\"n\">class_instances</span><span class=\"o\">]</span> <span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"o\">)</span> <span class=\"err\">?</span><span class=\"n\">x_4</span> <span class=\"o\">:</span> <span class=\"n\">comm_ring</span> <span class=\"n\">G</span> <span class=\"o\">:=</span> <span class=\"bp\">@</span><span class=\"n\">integral_domain</span><span class=\"bp\">.</span><span class=\"n\">to_comm_ring</span> <span class=\"err\">?</span><span class=\"n\">x_5</span> <span class=\"err\">?</span><span class=\"n\">x_6</span>\n<span class=\"o\">[</span><span class=\"n\">class_instances</span><span class=\"o\">]</span> <span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"o\">)</span> <span class=\"err\">?</span><span class=\"n\">x_4</span> <span class=\"o\">:</span> <span class=\"n\">comm_ring</span> <span class=\"n\">G</span> <span class=\"o\">:=</span> <span class=\"bp\">@</span><span class=\"n\">nonzero_comm_ring</span><span class=\"bp\">.</span><span class=\"n\">to_comm_ring</span> <span class=\"err\">?</span><span class=\"n\">x_5</span> <span class=\"err\">?</span><span class=\"n\">x_6</span>\n<span class=\"o\">[</span><span class=\"n\">class_instances</span><span class=\"o\">]</span> <span class=\"o\">(</span><span class=\"mi\">3</span><span class=\"o\">)</span> <span class=\"err\">?</span><span class=\"n\">x_6</span> <span class=\"o\">:</span> <span class=\"n\">nonzero_comm_ring</span> <span class=\"n\">G</span> <span class=\"o\">:=</span> <span class=\"bp\">@</span><span class=\"n\">integral_domain</span><span class=\"bp\">.</span><span class=\"n\">to_nonzero_comm_ring</span> <span class=\"err\">?</span><span class=\"n\">x_7</span> <span class=\"err\">?</span><span class=\"n\">x_8</span>\n<span class=\"o\">[</span><span class=\"n\">class_instances</span><span class=\"o\">]</span> <span class=\"o\">(</span><span class=\"mi\">0</span><span class=\"o\">)</span> <span class=\"err\">?</span><span class=\"n\">x_0</span> <span class=\"o\">:</span> <span class=\"n\">monoid</span> <span class=\"n\">G</span> <span class=\"o\">:=</span> <span class=\"bp\">@</span><span class=\"n\">ring_hom</span><span class=\"bp\">.</span><span class=\"n\">monoid</span> <span class=\"err\">?</span><span class=\"n\">x_1</span> <span class=\"err\">?</span><span class=\"n\">x_2</span>\n<span class=\"n\">failed</span> <span class=\"n\">is_def_eq</span>\n<span class=\"o\">[</span><span class=\"n\">class_instances</span><span class=\"o\">]</span> <span class=\"o\">(</span><span class=\"mi\">0</span><span class=\"o\">)</span> <span class=\"err\">?</span><span class=\"n\">x_0</span> <span class=\"o\">:</span> <span class=\"n\">monoid</span> <span class=\"n\">G</span> <span class=\"o\">:=</span> <span class=\"bp\">@</span><span class=\"n\">semiring</span><span class=\"bp\">.</span><span class=\"n\">to_monoid</span> <span class=\"err\">?</span><span class=\"n\">x_3</span> <span class=\"err\">?</span><span class=\"n\">x_4</span>\n<span class=\"o\">[</span><span class=\"n\">class_instances</span><span class=\"o\">]</span> <span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"o\">)</span> <span class=\"err\">?</span><span class=\"n\">x_4</span> <span class=\"o\">:</span> <span class=\"n\">semiring</span> <span class=\"n\">G</span> <span class=\"o\">:=</span> <span class=\"bp\">@</span><span class=\"n\">nonzero_semiring</span><span class=\"bp\">.</span><span class=\"n\">to_semiring</span> <span class=\"err\">?</span><span class=\"n\">x_5</span> <span class=\"err\">?</span><span class=\"n\">x_6</span>\n<span class=\"o\">[</span><span class=\"n\">class_instances</span><span class=\"o\">]</span> <span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"o\">)</span> <span class=\"err\">?</span><span class=\"n\">x_6</span> <span class=\"o\">:</span> <span class=\"n\">nonzero_semiring</span> <span class=\"n\">G</span> <span class=\"o\">:=</span> <span class=\"bp\">@</span><span class=\"n\">nonzero_comm_semiring</span><span class=\"bp\">.</span><span class=\"n\">to_nonzero_semiring</span> <span class=\"err\">?</span><span class=\"n\">x_7</span> <span class=\"err\">?</span><span class=\"n\">x_8</span>\n<span class=\"o\">[</span><span class=\"n\">class_instances</span><span class=\"o\">]</span> <span class=\"o\">(</span><span class=\"mi\">3</span><span class=\"o\">)</span> <span class=\"err\">?</span><span class=\"n\">x_8</span> <span class=\"o\">:</span> <span class=\"n\">nonzero_comm_semiring</span> <span class=\"n\">G</span> <span class=\"o\">:=</span> <span class=\"bp\">@</span><span class=\"n\">nonzero_comm_ring</span><span class=\"bp\">.</span><span class=\"n\">to_nonzero_comm_semiring</span> <span class=\"err\">?</span><span class=\"n\">x_9</span> <span class=\"err\">?</span><span class=\"n\">x_10</span>\n<span class=\"o\">[</span><span class=\"n\">class_instances</span><span class=\"o\">]</span> <span class=\"o\">(</span><span class=\"mi\">4</span><span class=\"o\">)</span> <span class=\"err\">?</span><span class=\"n\">x_10</span> <span class=\"o\">:</span> <span class=\"n\">nonzero_comm_ring</span> <span class=\"n\">G</span> <span class=\"o\">:=</span> <span class=\"bp\">@</span><span class=\"n\">integral_domain</span><span class=\"bp\">.</span><span class=\"n\">to_nonzero_comm_ring</span> <span class=\"err\">?</span><span class=\"n\">x_11</span> <span class=\"err\">?</span><span class=\"n\">x_12</span>\n<span class=\"o\">[</span><span class=\"n\">class_instances</span><span class=\"o\">]</span> <span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"o\">)</span> <span class=\"err\">?</span><span class=\"n\">x_4</span> <span class=\"o\">:</span> <span class=\"n\">semiring</span> <span class=\"n\">G</span> <span class=\"o\">:=</span> <span class=\"bp\">@</span><span class=\"n\">ring</span><span class=\"bp\">.</span><span class=\"n\">to_semiring</span> <span class=\"err\">?</span><span class=\"n\">x_5</span> <span class=\"err\">?</span><span class=\"n\">x_6</span>\n<span class=\"o\">[</span><span class=\"n\">class_instances</span><span class=\"o\">]</span> <span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"o\">)</span> <span class=\"err\">?</span><span class=\"n\">x_6</span> <span class=\"o\">:</span> <span class=\"n\">ring</span> <span class=\"n\">G</span> <span class=\"o\">:=</span> <span class=\"bp\">@</span><span class=\"n\">domain</span><span class=\"bp\">.</span><span class=\"n\">to_ring</span> <span class=\"err\">?</span><span class=\"n\">x_7</span> <span class=\"err\">?</span><span class=\"n\">x_8</span>\n<span class=\"o\">[</span><span class=\"n\">class_instances</span><span class=\"o\">]</span> <span class=\"o\">(</span><span class=\"mi\">3</span><span class=\"o\">)</span> <span class=\"err\">?</span><span class=\"n\">x_8</span> <span class=\"o\">:</span> <span class=\"n\">domain</span> <span class=\"n\">G</span> <span class=\"o\">:=</span> <span class=\"bp\">@</span><span class=\"n\">integral_domain</span><span class=\"bp\">.</span><span class=\"n\">to_domain</span> <span class=\"err\">?</span><span class=\"n\">x_9</span> <span class=\"err\">?</span><span class=\"n\">x_10</span>\n<span class=\"o\">[</span><span class=\"n\">class_instances</span><span class=\"o\">]</span> <span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"o\">)</span> <span class=\"err\">?</span><span class=\"n\">x_6</span> <span class=\"o\">:</span> <span class=\"n\">ring</span> <span class=\"n\">G</span> <span class=\"o\">:=</span> <span class=\"bp\">@</span><span class=\"n\">comm_ring</span><span class=\"bp\">.</span><span class=\"n\">to_ring</span> <span class=\"err\">?</span><span class=\"n\">x_7</span> <span class=\"err\">?</span><span class=\"n\">x_8</span>\n<span class=\"o\">[</span><span class=\"n\">class_instances</span><span class=\"o\">]</span> <span class=\"o\">(</span><span class=\"mi\">3</span><span class=\"o\">)</span> <span class=\"err\">?</span><span class=\"n\">x_8</span> <span class=\"o\">:</span> <span class=\"n\">comm_ring</span> <span class=\"n\">G</span> <span class=\"o\">:=</span> <span class=\"bp\">@</span><span class=\"n\">integral_domain</span><span class=\"bp\">.</span><span class=\"n\">to_comm_ring</span> <span class=\"err\">?</span><span class=\"n\">x_9</span> <span class=\"err\">?</span><span class=\"n\">x_10</span>\n<span class=\"o\">[</span><span class=\"n\">class_instances</span><span class=\"o\">]</span> <span class=\"o\">(</span><span class=\"mi\">3</span><span class=\"o\">)</span> <span class=\"err\">?</span><span class=\"n\">x_8</span> <span class=\"o\">:</span> <span class=\"n\">comm_ring</span> <span class=\"n\">G</span> <span class=\"o\">:=</span> <span class=\"bp\">@</span><span class=\"n\">nonzero_comm_ring</span><span class=\"bp\">.</span><span class=\"n\">to_comm_ring</span> <span class=\"err\">?</span><span class=\"n\">x_9</span> <span class=\"err\">?</span><span class=\"n\">x_10</span>\n<span class=\"o\">[</span><span class=\"n\">class_instances</span><span class=\"o\">]</span> <span class=\"o\">(</span><span class=\"mi\">4</span><span class=\"o\">)</span> <span class=\"err\">?</span><span class=\"n\">x_10</span> <span class=\"o\">:</span> <span class=\"n\">nonzero_comm_ring</span> <span class=\"n\">G</span> <span class=\"o\">:=</span> <span class=\"bp\">@</span><span class=\"n\">integral_domain</span><span class=\"bp\">.</span><span class=\"n\">to_nonzero_comm_ring</span> <span class=\"err\">?</span><span class=\"n\">x_11</span> <span class=\"err\">?</span><span class=\"n\">x_12</span>\n<span class=\"o\">[</span><span class=\"n\">class_instances</span><span class=\"o\">]</span> <span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"o\">)</span> <span class=\"err\">?</span><span class=\"n\">x_4</span> <span class=\"o\">:</span> <span class=\"n\">semiring</span> <span class=\"n\">G</span> <span class=\"o\">:=</span> <span class=\"bp\">@</span><span class=\"n\">comm_semiring</span><span class=\"bp\">.</span><span class=\"n\">to_semiring</span> <span class=\"err\">?</span><span class=\"n\">x_5</span> <span class=\"err\">?</span><span class=\"n\">x_6</span>\n<span class=\"o\">[</span><span class=\"n\">class_instances</span><span class=\"o\">]</span> <span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"o\">)</span> <span class=\"err\">?</span><span class=\"n\">x_6</span> <span class=\"o\">:</span> <span class=\"n\">comm_semiring</span> <span class=\"n\">G</span> <span class=\"o\">:=</span> <span class=\"bp\">@</span><span class=\"n\">nonzero_comm_semiring</span><span class=\"bp\">.</span><span class=\"n\">to_comm_semiring</span> <span class=\"err\">?</span><span class=\"n\">x_7</span> <span class=\"err\">?</span><span class=\"n\">x_8</span>\n<span class=\"o\">[</span><span class=\"n\">class_instances</span><span class=\"o\">]</span> <span class=\"o\">(</span><span class=\"mi\">3</span><span class=\"o\">)</span> <span class=\"err\">?</span><span class=\"n\">x_8</span> <span class=\"o\">:</span> <span class=\"n\">nonzero_comm_semiring</span> <span class=\"n\">G</span> <span class=\"o\">:=</span> <span class=\"bp\">@</span><span class=\"n\">nonzero_comm_ring</span><span class=\"bp\">.</span><span class=\"n\">to_nonzero_comm_semiring</span> <span class=\"err\">?</span><span class=\"n\">x_9</span> <span class=\"err\">?</span><span class=\"n\">x_10</span>\n<span class=\"o\">[</span><span class=\"n\">class_instances</span><span class=\"o\">]</span> <span class=\"o\">(</span><span class=\"mi\">4</span><span class=\"o\">)</span> <span class=\"err\">?</span><span class=\"n\">x_10</span> <span class=\"o\">:</span> <span class=\"n\">nonzero_comm_ring</span> <span class=\"n\">G</span> <span class=\"o\">:=</span> <span class=\"bp\">@</span><span class=\"n\">integral_domain</span><span class=\"bp\">.</span><span class=\"n\">to_nonzero_comm_ring</span> <span class=\"err\">?</span><span class=\"n\">x_11</span> <span class=\"err\">?</span><span class=\"n\">x_12</span>\n<span class=\"o\">[</span><span class=\"n\">class_instances</span><span class=\"o\">]</span> <span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"o\">)</span> <span class=\"err\">?</span><span class=\"n\">x_6</span> <span class=\"o\">:</span> <span class=\"n\">comm_semiring</span> <span class=\"n\">G</span> <span class=\"o\">:=</span> <span class=\"bp\">@</span><span class=\"n\">comm_ring</span><span class=\"bp\">.</span><span class=\"n\">to_comm_semiring</span> <span class=\"err\">?</span><span class=\"n\">x_7</span> <span class=\"err\">?</span><span class=\"n\">x_8</span>\n<span class=\"o\">[</span><span class=\"n\">class_instances</span><span class=\"o\">]</span> <span class=\"o\">(</span><span class=\"mi\">3</span><span class=\"o\">)</span> <span class=\"err\">?</span><span class=\"n\">x_8</span> <span class=\"o\">:</span> <span class=\"n\">comm_ring</span> <span class=\"n\">G</span> <span class=\"o\">:=</span> <span class=\"bp\">@</span><span class=\"n\">integral_domain</span><span class=\"bp\">.</span><span class=\"n\">to_comm_ring</span> <span class=\"err\">?</span><span class=\"n\">x_9</span> <span class=\"err\">?</span><span class=\"n\">x_10</span>\n<span class=\"o\">[</span><span class=\"n\">class_instances</span><span class=\"o\">]</span> <span class=\"o\">(</span><span class=\"mi\">3</span><span class=\"o\">)</span> <span class=\"err\">?</span><span class=\"n\">x_8</span> <span class=\"o\">:</span> <span class=\"n\">comm_ring</span> <span class=\"n\">G</span> <span class=\"o\">:=</span> <span class=\"bp\">@</span><span class=\"n\">nonzero_comm_ring</span><span class=\"bp\">.</span><span class=\"n\">to_comm_ring</span> <span class=\"err\">?</span><span class=\"n\">x_9</span> <span class=\"err\">?</span><span class=\"n\">x_10</span>\n<span class=\"o\">[</span><span class=\"n\">class_instances</span><span class=\"o\">]</span> <span class=\"o\">(</span><span class=\"mi\">4</span><span class=\"o\">)</span> <span class=\"err\">?</span><span class=\"n\">x_10</span> <span class=\"o\">:</span> <span class=\"n\">nonzero_comm_ring</span> <span class=\"n\">G</span> <span class=\"o\">:=</span> <span class=\"bp\">@</span><span class=\"n\">integral_domain</span><span class=\"bp\">.</span><span class=\"n\">to_nonzero_comm_ring</span> <span class=\"err\">?</span><span class=\"n\">x_11</span> <span class=\"err\">?</span><span class=\"n\">x_12</span>\n<span class=\"o\">[</span><span class=\"n\">class_instances</span><span class=\"o\">]</span> <span class=\"o\">(</span><span class=\"mi\">0</span><span class=\"o\">)</span> <span class=\"err\">?</span><span class=\"n\">x_0</span> <span class=\"o\">:</span> <span class=\"n\">monoid</span> <span class=\"n\">G</span> <span class=\"o\">:=</span> <span class=\"bp\">@</span><span class=\"n\">group</span><span class=\"bp\">.</span><span class=\"n\">to_monoid</span> <span class=\"err\">?</span><span class=\"n\">x_1</span> <span class=\"err\">?</span><span class=\"n\">x_2</span>\n<span class=\"o\">[</span><span class=\"n\">class_instances</span><span class=\"o\">]</span> <span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"o\">)</span> <span class=\"err\">?</span><span class=\"n\">x_2</span> <span class=\"o\">:</span> <span class=\"n\">group</span> <span class=\"n\">G</span> <span class=\"o\">:=</span> <span class=\"bp\">_</span><span class=\"n\">inst_1</span>\n</code></pre></div>",
        "id": 199244692,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1590825411
    },
    {
        "content": "<p>so what exactly does setting priorities do?</p>",
        "id": 199244696,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1590825442
    },
    {
        "content": "<p>Try <code>local attribute [instance, priority 1]</code></p>",
        "id": 199244921,
        "sender_full_name": "Chris Hughes",
        "timestamp": 1590825833
    },
    {
        "content": "<p>All of the attributes have a priority setting, I don't think Lean knows you mean the instance priority.</p>",
        "id": 199244966,
        "sender_full_name": "Chris Hughes",
        "timestamp": 1590825866
    },
    {
        "content": "<p>aha</p>",
        "id": 199244979,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1590825921
    },
    {
        "content": "<p>thanks</p>",
        "id": 199245032,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1590826011
    },
    {
        "content": "<p>Can I change simp priority to change the behaviour of the simplifier?</p>",
        "id": 199245176,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1590826258
    },
    {
        "content": "<p>I think you can, but I'm not sure how useful this is. It's still going to apply every lemma it can, but in a different order, and if that makes a difference to what you end up with, then you have a non normalising <code>simp</code>.</p>",
        "id": 199245443,
        "sender_full_name": "Chris Hughes",
        "timestamp": 1590826814
    },
    {
        "content": "<p>Also, I think it still simplifies the deepest sub expressions it can first, this ordering takes priority over the ordering given by setting the <code>priority</code>. I vaguely remember a conversation about this.</p>",
        "id": 199245489,
        "sender_full_name": "Chris Hughes",
        "timestamp": 1590826923
    },
    {
        "content": "<p>Oh I see, because <code>simp</code> is supposed to be a confluent rewriting system it shouldn't matter what order things get done in</p>",
        "id": 199245890,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1590827875
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110044\">Chris Hughes</span> <a href=\"#narrow/stream/113488-general/topic/instance.20priorities/near/199245443\">said</a>:</p>\n<blockquote>\n<p>I think you can, but I'm not sure how useful this is. It's still going to apply every lemma it can, but in a different order, and if that makes a difference to what you end up with, then you have a non normalising <code>simp</code>.</p>\n</blockquote>\n<p>It can matter... if you greedily simplify <code>ring_hom.of bla</code> then later on you have to do typeclass resolution to apply <code>is_ring_hom.map_add</code>, whereas <code>ring_hom.map_add</code> is a no-brainer for <code>simp</code>. So I would like to simplify <code>ring_hom.of f x = f x</code> as late as possible.</p>",
        "id": 199246126,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1590828268
    },
    {
        "content": "<p>Even with priorities, because it simplifies the deepest subexpression first it will still greedily simplify <code>ring_hom.of bla</code> before applying <code>ring_hom.map_add</code></p>",
        "id": 199246191,
        "sender_full_name": "Chris Hughes",
        "timestamp": 1590828406
    }
]