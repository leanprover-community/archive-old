[
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"123965\">@Bryan Gin-ge Chen</span> in your version of the web editor, is it possible to get only tactic state and not all messages?</p>",
        "id": 167590065,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1559923767
    },
    {
        "content": "<p>I tried <a href=\"https://bryangingechen.github.io/lean/lean-web-editor/#url=https%3A%2F%2Fraw.githubusercontent.com%2FPatrickMassot%2Flean-tutorials%2Fmaster%2Fsrc%2Ffirst_proofs.lean\" target=\"_blank\" title=\"https://bryangingechen.github.io/lean/lean-web-editor/#url=https%3A%2F%2Fraw.githubusercontent.com%2FPatrickMassot%2Flean-tutorials%2Fmaster%2Fsrc%2Ffirst_proofs.lean\">https://bryangingechen.github.io/lean/lean-web-editor/#url=https%3A%2F%2Fraw.githubusercontent.com%2FPatrickMassot%2Flean-tutorials%2Fmaster%2Fsrc%2Ffirst_proofs.lean</a> and it works great but displaying all messages at once is really confusing</p>",
        "id": 167590188,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1559923857
    },
    {
        "content": "<p>Not at the moment but I can try to add that functionality. Any UI preferences?</p>",
        "id": 167590195,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1559923864
    },
    {
        "content": "<p>There could be a switch somewhere, but it should also be configurable in the url, so we can link to tutorials having the expected behavior (or else make that behavior the default one)</p>",
        "id": 167590295,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1559923938
    },
    {
        "content": "<p>Sounds good, I'll see what I can do.</p>",
        "id": 167590444,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1559924055
    },
    {
        "content": "<p>Thanks!</p>",
        "id": 167591255,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1559924735
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"110031\">@Patrick Massot</span> I ended up copying the behavior of the vscode extension (and stole the icons too). Give it a try now (you may need to clear your cache).</p>",
        "id": 167614062,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1559941753
    },
    {
        "content": "<p>It works!</p>",
        "id": 167614346,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1559942008
    },
    {
        "content": "<p>Thanks!</p>",
        "id": 167614351,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1559942010
    },
    {
        "content": "<p>It looks like VScode, except it still displays \"no goals\", which feels old-fashioned...</p>",
        "id": 167614421,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1559942050
    },
    {
        "content": "<p><span aria-label=\"wink\" class=\"emoji emoji-1f609\" role=\"img\" title=\"wink\">:wink:</span></p>",
        "id": 167614426,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1559942057
    },
    {
        "content": "<p>Also easily fixable... maybe in the next update.</p>",
        "id": 167614867,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1559942444
    },
    {
        "content": "<p>I want to be able to post a theorem from my algebraic geometry course as something that people can play with using the Lean web editor. My problem is that I want to post a super-non-intimidating-for-mathematicians file, which needs some other imports in the repo which are of a far more CS nature. Basically I only want the students to see the interface. I don't have time with mathlib PR's for this stuff, my code works fine for me and I'm sure it's not mathlib-ready. One cheap fix, however, would simply be to cut and paste all the imported code used above the code I want them to see, in one big file, and then put the \"imported\" code into some invisible box which is not displayed on the web editor. Line numbers will be weird but I don't care. Can this be done?</p>",
        "id": 185603301,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1579013772
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"123965\">@Bryan Gin-ge Chen</span> I guess that at least in ObservableHQ this is easy, right?</p>",
        "id": 185603657,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1579013983
    },
    {
        "content": "<p>You'll have to do something a little bit cleverer than that if you want the user to be able to use <code>import</code>, since as you describe it the <code>import</code>s won't all be at the top of the actual file that Lean sees, then</p>",
        "id": 185604206,
        "sender_full_name": "Reid Barton",
        "timestamp": 1579014349
    },
    {
        "content": "<p>No, I think Kevin suugests to avoid <code>import</code>, by literally copy-pasting the code. (Manual import, so to speak.)</p>",
        "id": 185604462,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1579014500
    },
    {
        "content": "<p>He then wants to hide the copy-pasted code from the user, using some javascript magic.</p>",
        "id": 185604490,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1579014519
    },
    {
        "content": "<p>Doing this with the community web editor would definitely require modifying the editor code. My impression was that <span class=\"user-mention\" data-user-id=\"132175\">@Mohammad Pedramfar</span>'s  code for the natural number game supported something like this though. </p>\n<p>I'll see if I can cook up an Observable notebook later tonight.</p>",
        "id": 185604506,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1579014534
    },
    {
        "content": "<p>Right but it means that <code>import</code> in the user's code will break. But perhaps this isn't an issue for you.</p>",
        "id": 185604568,
        "sender_full_name": "Reid Barton",
        "timestamp": 1579014585
    },
    {
        "content": "<p>Yup. This quickly becomes messy.</p>",
        "id": 185604700,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1579014661
    },
    {
        "content": "<p>There will be no import in the user's code. It will just be a one-off file to experiment with so that people can compare the Lean proof to the maths proof without having to install Lean. Bryan -- yes you're right, I could definitely do it with the Lean game maker. Maybe this is easiest!</p>",
        "id": 185610957,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1579018496
    },
    {
        "content": "<p>Having failed to install lean on 3 different systems, I turned to the Lean Web Editor, as mentioned in TPIL. Is there a page that says how to use it? I want to create a variable of type Integer, which seems to need \\mathbb{Z}, but I don't know how to type it. Sigh.</p>",
        "id": 186594703,
        "sender_full_name": "Tim Daly",
        "timestamp": 1579997559
    },
    {
        "content": "<p>You can just write <code>int</code></p>",
        "id": 186594715,
        "sender_full_name": "Chris Hughes",
        "timestamp": 1579997585
    },
    {
        "content": "<p>Where can I find more information about how to use this editor?</p>",
        "id": 186594807,
        "sender_full_name": "Tim Daly",
        "timestamp": 1579997752
    },
    {
        "content": "<p>Is there a Docker version of Lean?</p>",
        "id": 186594859,
        "sender_full_name": "Tim Daly",
        "timestamp": 1579997851
    },
    {
        "content": "<p>Which OS?</p>",
        "id": 186594979,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1579998071
    },
    {
        "content": "<p>I mean, on which OS did you try to install Lean?</p>",
        "id": 186595033,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1579998160
    },
    {
        "content": "<p>Ubuntu, MAC, Windows.</p>",
        "id": 186595050,
        "sender_full_name": "Tim Daly",
        "timestamp": 1579998194
    },
    {
        "content": "<p>Ubuntu, for example, complains during apt-get that the repos are insecure.</p>",
        "id": 186595062,
        "sender_full_name": "Tim Daly",
        "timestamp": 1579998232
    },
    {
        "content": "<p>The first google hit goes to a page that says to install git, libgmp-dev, and cmake... but nothing else.</p>",
        "id": 186595124,
        "sender_full_name": "Tim Daly",
        "timestamp": 1579998321
    },
    {
        "content": "<p>I \"installed\" lean on ubuntu and the ./lean binary \"runs\" but does nothing.</p>",
        "id": 186595139,
        "sender_full_name": "Tim Daly",
        "timestamp": 1579998362
    },
    {
        "content": "<p>mac : <a href=\"https://github.com/leanprover-community/mathlib/blob/master/docs/install/macos.md\" target=\"_blank\" title=\"https://github.com/leanprover-community/mathlib/blob/master/docs/install/macos.md\">https://github.com/leanprover-community/mathlib/blob/master/docs/install/macos.md</a><br>\nubuntu : <a href=\"https://github.com/leanprover-community/mathlib/blob/master/docs/install/debian.md\" target=\"_blank\" title=\"https://github.com/leanprover-community/mathlib/blob/master/docs/install/debian.md\">https://github.com/leanprover-community/mathlib/blob/master/docs/install/debian.md</a></p>",
        "id": 186595174,
        "sender_full_name": "Joe",
        "timestamp": 1579998395
    },
    {
        "content": "<p>I have no problem following these</p>",
        "id": 186595178,
        "sender_full_name": "Joe",
        "timestamp": 1579998416
    },
    {
        "content": "<p>Once more, \"with feeling\", as my music teacher said.</p>",
        "id": 186595231,
        "sender_full_name": "Tim Daly",
        "timestamp": 1579998539
    },
    {
        "content": "<p>Note that just running \"<code>lean</code>\" from the command line doesn't return any output. You can run <code>lean -h</code> instead to see the basic command-line help string. However, you most likely don't want to use lean solely from the command line. Instead, lean should usually be used interactively in conjunction with either VS Code or emacs. It looks like mathlib's <a href=\"https://github.com/leanprover-community/mathlib/blob/master/docs/install/project.md\" target=\"_blank\" title=\"https://github.com/leanprover-community/mathlib/blob/master/docs/install/project.md\">\"Creating a Lean project\" doc</a> assumes you want to use VS Code. If you prefer emacs, I guess you'd want to look <a href=\"https://github.com/leanprover/lean-mode/\" target=\"_blank\" title=\"https://github.com/leanprover/lean-mode/\">here</a> as well.</p>\n<p>Also, the community version of the web editor has some instructions on how to input special characters if you click on the purple (?): <a href=\"https://leanprover-community.github.io/lean-web-editor\" target=\"_blank\" title=\"https://leanprover-community.github.io/lean-web-editor\">https://leanprover-community.github.io/lean-web-editor</a></p>",
        "id": 186595445,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1579998957
    },
    {
        "content": "<p>Thanks. That worked. I've never seen anything require so many packages to install. I thought lean was a C++ program. No wonder my efforts to hand-install lean failed. My attempts to use emacs failed so I installed vscode.</p>",
        "id": 186596599,
        "sender_full_name": "Tim Daly",
        "timestamp": 1580001229
    },
    {
        "content": "<p>Is there some magic incantation to tell vscode to execute something like #check</p>",
        "id": 186598191,
        "sender_full_name": "Tim Daly",
        "timestamp": 1580004418
    },
    {
        "content": "<p>Not sure what you mean. You type <code>#check</code> in front of the expression you want to type-check, in both the web editor and VS Code.</p>",
        "id": 186598522,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1580005117
    },
    {
        "content": "<p>Something like this:</p>\n<p><a href=\"/user_uploads/3121/p6ygafzZQPsK-avkkWSNusKG/Screenshot-2020-01-25-21.20.26.png\" target=\"_blank\" title=\"Screenshot-2020-01-25-21.20.26.png\">Screenshot-2020-01-25-21.20.26.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/p6ygafzZQPsK-avkkWSNusKG/Screenshot-2020-01-25-21.20.26.png\" target=\"_blank\" title=\"Screenshot-2020-01-25-21.20.26.png\"><img src=\"/user_uploads/3121/p6ygafzZQPsK-avkkWSNusKG/Screenshot-2020-01-25-21.20.26.png\"></a></div>",
        "id": 186598583,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1580005270
    },
    {
        "content": "<p>vscode was installed without the lean extension. I finally found it.</p>",
        "id": 186598588,
        "sender_full_name": "Tim Daly",
        "timestamp": 1580005308
    },
    {
        "content": "<blockquote>\n<p>Thanks. That worked. I've never seen anything require so many packages to install. I thought lean was a C++ program. No wonder my efforts to hand-install lean failed. My attempts to use emacs failed so I installed vscode.</p>\n</blockquote>\n<p>Indeed lean is a C++ program. The installation procedure is to go to the <a href=\"https://leanprover.github.io\" target=\"_blank\" title=\"https://leanprover.github.io\">official website</a>, search for a link called Download, then a link called binaries and click on the link relevant to your platform on <a href=\"https://github.com/leanprover/lean/releases/tag/v3.4.2\" target=\"_blank\" title=\"https://github.com/leanprover/lean/releases/tag/v3.4.2\">https://github.com/leanprover/lean/releases/tag/v3.4.2</a>. Then you need to know how to unpack a zip or tar.gz archive on your platform. Was that the blocking step?</p>",
        "id": 186618335,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1580039624
    },
    {
        "content": "<p>Or maybe you mean that you didn't only want the Lean C++ program but also a lot of user-friendly supporting tool? Then you'll indeed need an editor, probably also an editor plugin talking to Lean. Maybe you also want to use Lean libraries created by other people. Then you'll need to download that as well, but this requires reading a bit more documentation, and maybe use python tools to make it easier. Then indeed you depend on quite a few packages, but only the Lean binaries are Lean itself.</p>",
        "id": 186618457,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1580039817
    },
    {
        "content": "<p>All that being said, I'd be curious to learn more about \"Ubuntu, for example, complains during apt-get that the repos are insecure.\".  What repos are you talking about?</p>",
        "id": 186618609,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1580040002
    },
    {
        "content": "<p>Ok, for background, I've been programming for 50 years and an open source lead developer since 1997. So, 'tar' isn't the issue.I've been using emacs since the late 70s so I have a 'user-friendly supporting tool'. For Axiom installs you only need to type 'apt-get install axiom' and then 'axiom'. Or, if you prefer, there is a Docker version of Axiom. All of the documentation is in PDF.  I hardly know how to make it easier.</p>\n<p>The usual game is to 'git clone the repo and type 'make' to get a useful system. The tar-make path leaves me with 3 binaries. The ./lean binary appears to do nothing. So I followed with a Google search, found the PPA extensions for apt, did the repo-setup / apt update, and the apt-get. But the PPAs appear to be unsigned so apt is unhappy. Similar losses on Mac and Windows (and Windows WSL). The Google search did not show me the 'wget' link. Being a trusting soul I executed that command sequence and (almost) got a useable system (modulo the emacs/vscode issue). I was just astonished at the number of packages, including whole languages like python, got installed.</p>\n<p>Somehow Lean can talk to the vscode editor, can accept input, and show output. But apparently this won't work from the command line (or I'm just being too slow to understand). On Unix systems one tends to expect that programs accept stdin and write to stdout so that all of the other tooling 'just works'. Is there a way to point it at a file and just get the output?</p>\n<p>Obviously, my mindset is the problem. To use Lean effectively I have to adopt a whole new tool chain. That is going to make it very painful to package and ship it as part of Axiom. I need things like test automation during build so proofs are checked at build time. I need the proof-checker available as a separate tool. I need to integrate the lean system with the Axiom command line so you can #check, for example.I realize, coming from the \"other side\" of computational mathematics, that I'm not the usual lean customer. Nevertheless, I feel it is important to merge Lean and Axiom seamlessly.</p>\n<p>Rather than complaining, is there a way I can help?</p>",
        "id": 186622506,
        "sender_full_name": "Tim Daly",
        "timestamp": 1580046291
    },
    {
        "content": "<p>The first \"tooling\" of interest would be a way to take an input file and \"compile it\" to a fully elaborated proof that only needs the proof checker (no libraries, no tactics).The proof checker should accept that \"compiled form\" and accept or reject it.</p>",
        "id": 186623229,
        "sender_full_name": "Tim Daly",
        "timestamp": 1580047539
    },
    {
        "content": "<p>My understanding is that the proof checker only needs the trusted kernel as support.</p>",
        "id": 186623272,
        "sender_full_name": "Tim Daly",
        "timestamp": 1580047590
    },
    {
        "content": "<p>I do agree that using and installing Lean is very different from other apps.  Part of this I think is that while lean is a compiler (and can compiler programs from the command line), its interactivity is what is more important.  If you just want to check/compile a lean file from the command line, you can use <code>lean my_lean_file.lean</code>.  However, Lean has no REPL.  It does however have a server <code>lean --server</code> which can be used to communicate with it interactively by a machine.  (It is unusable by a human directly.)  I think this is how emacs and vs code communicate with Lean.  The server is really designed for interactive and incremental checking of a lean file while it is being worked on and hence is frustrating to use for direct communication.  However, some have been able to make Lean communicate with external processes that aren't editors by using the Lean server.  For example, <span class=\"user-mention\" data-user-id=\"110596\">@Rob Lewis</span> and <span class=\"user-mention\" data-user-id=\"110187\">@Minchao Wu</span>  have built a <a href=\"https://robertylewis.com/leanmm/\" target=\"_blank\" title=\"https://robertylewis.com/leanmm/\">bi-directional connection between Lean and Mathematica</a>.</p>\n<p>I'm also building a small python prototype which I'm using to communicate with Lean directly for the purpose of machine learning.  I'll put that on GitHub in a few days.</p>",
        "id": 186623273,
        "sender_full_name": "Jason Rute",
        "timestamp": 1580047601
    },
    {
        "content": "<p>To be clear, I think none of us think that installing Lean is as easy as it could be.  And using Lean from an external application is a huge pain.  I think the official word from Microsoft research is to wait for Lean 4.  (And they won't let you make any changes to Lean directly except in your own fork.)  However, I think as a community we can find work arounds and better documentation for Lean 3.</p>",
        "id": 186623342,
        "sender_full_name": "Jason Rute",
        "timestamp": 1580047754
    },
    {
        "content": "<p>The way I am using the Lean server (and I imagine how Rob and Minchao are also doing it) is to send a JSON sync request to the server and then wait not only for the response to that request, but also an \"all_messages\" response which contains any compiler errors.  The round trip takes about 0.1 seconds which is pretty slow IMO.  See more discussion on <a href=\"#narrow/stream/219941-Machine-Learning.20for.20Theorem.20Proving/topic/ML.20for.20Lean.3A.20How.20to.20do.20it.3F\" title=\"#narrow/stream/219941-Machine-Learning.20for.20Theorem.20Proving/topic/ML.20for.20Lean.3A.20How.20to.20do.20it.3F\">this topic</a>.  (Actually, you might want to check out that whole stream.)</p>",
        "id": 186623529,
        "sender_full_name": "Jason Rute",
        "timestamp": 1580048101
    },
    {
        "content": "<p>I built programs for Microsoft in the past. I used a commercial program that built \".msi\" files (if memory serves) that could automatically install all of the programs in the right place. My customer set (Intel and Police) just wanted \"point and click\" installs. I'm surprised that a Microsoft-related Lean program doesn't have this tooling. In addition, the documentation had a LOT of pictures (about 2 per page) along with a lot of \"click on the blue box now\".</p>",
        "id": 186623536,
        "sender_full_name": "Tim Daly",
        "timestamp": 1580048106
    },
    {
        "content": "<p>re: the MMA-Lean link... why would you need to translate \"x^2-2*x+1\" into fully elaborated code? You have systems on either end that can parse expressions. I'm rewriting the Axiom system to accept / produce Lean proofs at the user-level source code.</p>",
        "id": 186623695,
        "sender_full_name": "Tim Daly",
        "timestamp": 1580048389
    },
    {
        "content": "<p>Axiom should store fully elaborated code that a proof checker can check. But that is never user visible. It is only used when the Axiom \"Oracle\" wants to supply an answer to Lean (e.g. a GCD result) so Lean can trust the answer.</p>",
        "id": 186623818,
        "sender_full_name": "Tim Daly",
        "timestamp": 1580048577
    },
    {
        "content": "<p>From my little experience, the usual Lean output is not easy to parse by a machine.  However one can write a custom parser for expressions, which is what they do.  They could have made it more generic (like s-expressions or JSON), but I guess they wanted to directly put the AST into Mathematica code.</p>",
        "id": 186623881,
        "sender_full_name": "Jason Rute",
        "timestamp": 1580048695
    },
    {
        "content": "<p>In your system <span class=\"user-mention\" data-user-id=\"223495\">@Tim Daly</span> what would you be sending to Lean and what would you be getting back?  Are you sending a proof of a specific result, like <code>theorem xx123 : nat.gcd 6 9 == 3 := &lt;some proof&gt;</code>?  Are you just getting back just something indicating whether that proof is correct or not?  Or is it more complicated?</p>",
        "id": 186624239,
        "sender_full_name": "Jason Rute",
        "timestamp": 1580049264
    },
    {
        "content": "<p>Thanks for the Lewis/Wu paper link. I know what I'm doing for the rest of the day.</p>",
        "id": 186624295,
        "sender_full_name": "Tim Daly",
        "timestamp": 1580049368
    },
    {
        "content": "<p>re: Lean/Axiom communication. These are \"peer\" systems so each needs/provides services. Axiom has 10k algorithms that need to be proven correct so it needs Lean (and an associated \"computer algebra\" mathlib-like library on the Lean side). Lean needs to be able to use heavy algorithms (like Groebner basis) with the associated proof so it can get \"Oracle\" answers. I am not at the stage of defining the communication link. </p>\n<p>But (I think) Lean is the combination of a trusted core, and as of Lean 4, the rest of it will be Lean code. If that is the case it should be possible to re-implement the trusted core in Lisp and embed all of Lean inside Axiom. That way there is no \"communication link\" as each system has shared data representations.</p>",
        "id": 186624545,
        "sender_full_name": "Tim Daly",
        "timestamp": 1580049840
    },
    {
        "content": "<p>Instead of being \"a proof system\" and \"a computer algebra system\", it becomes a \"computational mathematics\" system.</p>",
        "id": 186624607,
        "sender_full_name": "Tim Daly",
        "timestamp": 1580049892
    },
    {
        "content": "<p>By the way, in Lean 4, I think instead of this custom JSON server, they will switch to the Language Server Protocol.  I don't know that it will change much, but Lean 4 might also make it quicker and easier to communicate with Lean.</p>",
        "id": 186625200,
        "sender_full_name": "Jason Rute",
        "timestamp": 1580050971
    },
    {
        "content": "<p>As for the proving and running algorithms, will they be running in Axiom or Lean?  For example, the user wants a calculation of <code>gcd 6 9</code>.  Would that calculation be done in Axiom with an algorithm verified by Lean offline to be correct?  Would that calculation be done entirely in Lean?  Or would Axiom compute some sort of proof witness that would be checked in Lean?  (I'm not sure what that would be for gcd, but for an integral it could be a proof that the integrand is the derivative of the Axiom computed solution.)</p>",
        "id": 186625530,
        "sender_full_name": "Jason Rute",
        "timestamp": 1580051544
    },
    {
        "content": "<p>One of the key problems with the idea of a peer-to-peer communication interface is context. Axiom allows full runtime, first class dependent type construction. So the types are \"part of the session\". Since dependent types are undecidable Axiom uses built-in heuristics to resolve types at runtime. That mean, of course, that if you try to communicate the expression \"x^2-2*x+1\", you also have to communicate the type of \"x\" and the type of the coefficient ring (is it modular?) as well as the type of the whole expression.</p>\n<p>Merging Lean and Axiom in a common system means that the runtime dependent types are shared and Lean can know that this is a polynomial with coefficients mod p. Similarly, the question above about doing integration means that Lean has access to Axiom's implementation of the Risch algorithm.</p>",
        "id": 186626036,
        "sender_full_name": "Tim Daly",
        "timestamp": 1580052541
    },
    {
        "content": "<p>Tim, my message was specifically answering \"I've never seen anything require so many packages to install. I thought lean was a C++ program.\" Of course I would like the supporting tools to be easier to install. But Lean itself is trivial to install.</p>",
        "id": 186628620,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1580057204
    },
    {
        "content": "<p>As for the \"I'm surprised that a Microsoft-related Lean program doesn't have this tooling.\" rant, I think you are confused by the relation between Microsoft whose business is to sell software to users and Microsoft Research where Leo is working on a research project that is not looking for users yet.</p>",
        "id": 186628703,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1580057378
    },
    {
        "content": "<p>The Lean community is certainly trying to attract users, but Microsoft research is not.</p>",
        "id": 186628748,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1580057405
    },
    {
        "content": "<p>Now let's try to improve things. You wrote you found a Lean PPA. I tried to google it and found <a href=\"https://launchpad.net/~leanprover/+archive/ubuntu/lean\" target=\"_blank\" title=\"https://launchpad.net/~leanprover/+archive/ubuntu/lean\">https://launchpad.net/~leanprover/+archive/ubuntu/lean</a>. Is that what you found? It doesn't seem too dangerous since it says the last build was in 2016, but of course it could still fool a couple of people. Does anyone know how we could take it down? Or even better, get write access? Does anyone know how to reach Soonho Kong nowadays?</p>",
        "id": 186628999,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1580057937
    },
    {
        "content": "<p>Thanks for pointing this out. <span class=\"user-mention\" data-user-id=\"112857\">@Leonardo de Moura</span> made the PPA inaccessible, it should soon be deleted completely!</p>",
        "id": 186629441,
        "sender_full_name": "Sebastian Ullrich",
        "timestamp": 1580058618
    },
    {
        "content": "<blockquote>\n<p>The first \"tooling\" of interest would be a way to take an input file and \"compile it\" to a fully elaborated proof that only needs the proof checker (no libraries, no tactics).The proof checker should accept that \"compiled form\" and accept or reject it.</p>\n</blockquote>\n<p>That is already available: <code>lean myfile.lean --export=myexportedfile</code>.</p>",
        "id": 186629467,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1580058670
    },
    {
        "content": "<p>I don't expect that Leo is the person doing the tooling. If I still had access to the MSI tool I would try to remember how to create a windows install file. I'm also thinking of making a Docker image, as I did with Axiom. First I have to get a few clues about the details of fighting with the machine. But I think that a Docker image would be most useful as it installs and runs on every platform.</p>",
        "id": 186630697,
        "sender_full_name": "Tim Daly",
        "timestamp": 1580060747
    },
    {
        "content": "<p>Wow. A 10 megabyte output file for a 3 line program.  Us there a file description somewhere?</p>",
        "id": 186630810,
        "sender_full_name": "Tim Daly",
        "timestamp": 1580060886
    },
    {
        "content": "<p>Running the Lean server (or the Lean command line) from Docker should be easy.  Lean in Emacs might also be straight forward if you use the command line Emacs (and have it running inside Docker).    Would we be able to easily set up Lean for VS Code with Docker?</p>",
        "id": 186638503,
        "sender_full_name": "Jason Rute",
        "timestamp": 1580073426
    },
    {
        "content": "<blockquote>\n<p>The first \"tooling\" of interest would be a way to take an input file and \"compile it\" to a fully elaborated proof that only needs the proof checker (no libraries, no tactics).The proof checker should accept that \"compiled form\" and accept or reject it.</p>\n</blockquote>\n<p>You might be interested in <span class=\"user-mention\" data-user-id=\"110049\">@Mario Carneiro</span>'s <a href=\"https://github.com/digama0/mm0\" target=\"_blank\" title=\"https://github.com/digama0/mm0\">MM0</a>.  The idea is that it is a sort of \"assembly language\" for proof assistants (or a trusted core) for which one could \"compile\" Lean code (or that of any other proof assistant).  It should be relatively easy and quick to check MM0 code.  (The hard part is actually writing the Lean to MM0 \"compiler\", and checking that the MM0 proof is a proof of what you think it is.)</p>",
        "id": 186638896,
        "sender_full_name": "Jason Rute",
        "timestamp": 1580074050
    },
    {
        "content": "<p>My plan is too hook up <span class=\"user-mention\" data-user-id=\"228466\">@Chris B</span>'s <a href=\"https://github.com/ammkrn/nanoda/\" target=\"_blank\" title=\"https://github.com/ammkrn/nanoda/\">nanoda</a> to the <a href=\"https://github.com/digama0/mm0/blob/master/examples/lean.mm1\" target=\"_blank\" title=\"https://github.com/digama0/mm0/blob/master/examples/lean.mm1\">lean.mm1</a> axiomatization with a bit of proof logging for things like definitional equality proofs. Almost all the missing pieces are in place for this, although I haven't started working on this pipeline specifically yet</p>",
        "id": 186651782,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1580098187
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"110049\">@Mario Carneiro</span> It took me a while to get the Lean3 -&gt; lean4 changes working since they went deeper than I thought, but I got those done since we last spoke and literally just finished the first version of the revised tracing branch a few hours ago.</p>",
        "id": 186653229,
        "sender_full_name": "Chris B",
        "timestamp": 1580100909
    },
    {
        "content": "<p>Well the first version I don't hate. I'll polish it up some more by the end of this weekend.</p>",
        "id": 186653286,
        "sender_full_name": "Chris B",
        "timestamp": 1580100986
    },
    {
        "content": "<p>Are the lean 3 -&gt; 4 changes backward incompatible?</p>",
        "id": 186653580,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1580101545
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"223495\">@Tim Daly</span> If you're talking about the export file's size, it's because the export file includes the prelude + your stuff. The prelude's export file only takes a few seconds to parse and check. You can read about what the stuff in the export file means (and maybe get some insight into how the kernel sees Lean terms) here <a href=\"https://github.com/leanprover/lean/blob/master/doc/export_format.md\" target=\"_blank\" title=\"https://github.com/leanprover/lean/blob/master/doc/export_format.md\">https://github.com/leanprover/lean/blob/master/doc/export_format.md</a><br>\nFun fact, Mathlib's export file is ~230 mb and &gt; 8 million lines.</p>",
        "id": 186653582,
        "sender_full_name": "Chris B",
        "timestamp": 1580101548
    },
    {
        "content": "<p>Oh, that helps a lot to guess how it compares with <a href=\"http://set.mm\" target=\"_blank\" title=\"http://set.mm\">set.mm</a></p>",
        "id": 186653626,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1580101583
    },
    {
        "content": "<p>which is 30 MB compressed</p>",
        "id": 186653633,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1580101595
    },
    {
        "content": "<p>I'm glad to hear there is only one order of magnitude difference, I was worried the tactic proofs might be a lot worse than that</p>",
        "id": 186653643,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1580101640
    },
    {
        "content": "<p>when you throw in defeq proofs it will probably double in size</p>",
        "id": 186653685,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1580101684
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"110049\">@Mario Carneiro</span> They're incompatible in that the code that I wrote is hella different, but the new version of nanoda can check lean3 export files.</p>",
        "id": 186653710,
        "sender_full_name": "Chris B",
        "timestamp": 1580101800
    },
    {
        "content": "<p>what's new in the kernel?</p>",
        "id": 186653755,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1580101818
    },
    {
        "content": "<p>the lean.mm1 axiomatization doesn't cover mutual recursion (because the thesis version doesn't either)</p>",
        "id": 186653771,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1580101884
    },
    {
        "content": "<p>wait, is there such a thing as lean 4 export files?</p>",
        "id": 186653777,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1580101916
    },
    {
        "content": "<p>my understanding is that lean 4 has no export format right now and may ship without one</p>",
        "id": 186653819,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1580101960
    },
    {
        "content": "<p>They removed the whole concept of reduction rules in favor of what Sebastian referred to as hard-coded recursors for both inductive and quotient, there's some new gadgetry for mutual definitions, and some of the typechecker stuff is different, esp the procedure for unfolding/delta reduction. I think the C++ version of lean3's checker was closer.</p>",
        "id": 186653823,
        "sender_full_name": "Chris B",
        "timestamp": 1580101979
    },
    {
        "content": "<p>Well the kernel has these new declaration types called Opaque, Theorem, and Mutual that are in the kernel but don't have any lean3 representation. So I've made code for them, but they don't appear in lean3 export files.</p>",
        "id": 186653843,
        "sender_full_name": "Chris B",
        "timestamp": 1580102031
    },
    {
        "content": "<p>Opaque and Theorem are similar to Definition.</p>",
        "id": 186653884,
        "sender_full_name": "Chris B",
        "timestamp": 1580102050
    },
    {
        "content": "<p>I forgot to ask Sebastian about them, but I was pretty sure they were meant to be lean 4 export items, like #OPAQUE ..., #THEOREM ... since they're in like the same 'class' of kernel item.</p>",
        "id": 186653900,
        "sender_full_name": "Chris B",
        "timestamp": 1580102128
    },
    {
        "content": "<p>Actually I think I did ask, but the kernel wasn't his wheelhouse so he wasn't sure. Or something.</p>",
        "id": 186653944,
        "sender_full_name": "Chris B",
        "timestamp": 1580102175
    },
    {
        "content": "<p>I guess these are like definition except the kernel won't unfold them? Or something?</p>",
        "id": 186653963,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1580102250
    },
    {
        "content": "<p>I assume that while heuristics etc for delta reduction may have changed the basic principle is still the same, so my thesis doesn't need to change there</p>",
        "id": 186654012,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1580102336
    },
    {
        "content": "<p>Oh abbreviation is the other one. Opaque and Abbreviation were like enum variants of ReducibilityHint in lean3, which dictates how definitions are unfolded yeah.</p>",
        "id": 186654058,
        "sender_full_name": "Chris B",
        "timestamp": 1580102356
    },
    {
        "content": "<p>Even Opaque definitions don't really change anything in the axiomatization since you can just say that they could be unfolded but aren't</p>",
        "id": 186654068,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1580102397
    },
    {
        "content": "<p>hardcoded inductives and quotients aren't really a problem, I mean they were basically hardcoded anyway with an \"extensible\" system with exactly two extensions and no external access</p>",
        "id": 186654121,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1580102463
    },
    {
        "content": "<p>There's also a new thing for handling all of the unique names, <code>local_ctx</code>, but I can only sort of pseudo-code read c++ and the implementation is over my head.</p>",
        "id": 186654171,
        "sender_full_name": "Chris B",
        "timestamp": 1580102529
    },
    {
        "content": "<p>Mutual sounds like something new though... an equation compiled definition understood natively by the kernel? Like Agda?</p>",
        "id": 186654174,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1580102557
    },
    {
        "content": "<p>The kernel only defines it as a type of declaration, it doesn't actually get used by the stuff you get in an export file, but the constructor gets called in the files that implement the equation compiler yeah.</p>",
        "id": 186654357,
        "sender_full_name": "Chris B",
        "timestamp": 1580102856
    },
    {
        "content": "<p>So the content associated with a Mutual declaration is the same as that of a regular declaration? (e.g. the lean 3 analogue being <code>@[mutual] def foo := bar</code>)</p>",
        "id": 186654620,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1580103295
    },
    {
        "content": "<p>and delta reduction works as normal?</p>",
        "id": 186654645,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1580103349
    },
    {
        "content": "<p>Did you implement any of this for nanoda, or are you just recognizing the (hypothetical) syntax?</p>",
        "id": 186654701,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1580103429
    },
    {
        "content": "<p>Most of it is implemented. The part of lean4's inductive that deal with nested inductive I haven't done yet since I wanted to get a C++ person's opinion on how <code>local_ctx</code> works, and the new declaration types exist but don't do anything because they're never called. w.r.t the mutual thing, from the kernel's perspective it's like a <code>Vec&lt;Definition&gt;</code> where <code>Definition</code> is the <code>def my_thing : A := ...</code> variety, and they're marked meta. The process for checking whether they're admissible is like iterating over them with the same procedure as for definitions.</p>",
        "id": 186654964,
        "sender_full_name": "Chris B",
        "timestamp": 1580103923
    },
    {
        "content": "<p>Oh, Mutual definitions are always meta? well in that case I will ignore them :P</p>",
        "id": 186655435,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1580104769
    },
    {
        "content": "<p>If they're being checked in the kernel at least.</p>",
        "id": 186656179,
        "sender_full_name": "Chris B",
        "timestamp": 1580106115
    },
    {
        "content": "<p>I've built a Docker version of Lean. Unfortunately it seems that <a href=\"http://hub.docker.com\" target=\"_blank\" title=\"http://hub.docker.com\">hub.docker.com</a> (hosted on amazon's cloud) seems to be down at the moment. Once I figure out some other path (or hub.docker recovers) I'll make it available.</p>",
        "id": 186743275,
        "sender_full_name": "Tim Daly",
        "timestamp": 1580173240
    },
    {
        "content": "<p>When you say a “Docker version of Lean”, can you use the docker version for vs code or emacs?  If so, are they also running in the Docker container?</p>",
        "id": 186752411,
        "sender_full_name": "Jason Rute",
        "timestamp": 1580185733
    },
    {
        "content": "<p>vscode is installed in the docker. I am playing around with an emacs version. Hopefully I can get both in one image.</p>",
        "id": 186752719,
        "sender_full_name": "Tim Daly",
        "timestamp": 1580186247
    },
    {
        "content": "<p>I didn’t realize you could run a GUI from a Docker container.  This will be interesting.</p>",
        "id": 186773946,
        "sender_full_name": "Jason Rute",
        "timestamp": 1580211218
    },
    {
        "content": "<p>Emacs runs fine. Apparently Docker has moved/merged with Kubernetes so I'm behind the curve on yet another technology. It takes forever to understand how to build one of these things so it might take a while. Kubernetes is more network capable . Axiom uses X11 for its graphics and browser front-ends and has used a remote X11 server successfully. I suspect there is a way to get vscode to \"network\" so I'm going to dig into that. I may be able to get lean --server to pipe to a network using ns. There are many \"variables in play\" here and I still have a lot to learn.<br>\nThere won't be much more to say until I get happy with the results. </p>\n<p>That said, I think that a Docker/(Kubernetes?) solution provides a trivial-to-install, stable platform for releases that run everywhere. I think that a Kubernetes version of Lean \"in the cloud\" is also possible, perhaps connected to <span class=\"user-mention\" data-user-id=\"116034\">@William Stein</span> 's Sage system or the Jupiter notebooks. </p>\n<p>I think that a \"point and click\" version of Lean would be easier for mathematicians and students to use.</p>",
        "id": 186792099,
        "sender_full_name": "Tim Daly",
        "timestamp": 1580224653
    },
    {
        "content": "<p>That's one thing I have wanted to look into, but never actually got to it: Since VScode runs on electron, it should be easy to run the editor front-end on a simple laptop, and run the back-end (including Lean) on some heavy-duty server. Does anyone have a clue how hard it is to pull this off?</p>",
        "id": 186792889,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1580225121
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"123965\">@Bryan Gin-ge Chen</span> I think you also linked us to some \"VScode in the browser\" thing. Did that ever take off? I already lost that link, so I don't even know how to find the project atm.</p>",
        "id": 186793236,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1580225293
    },
    {
        "content": "<p>The closest thing I can think of is the <a href=\"https://github.com/Microsoft/monaco-editor\" target=\"_blank\" title=\"https://github.com/Microsoft/monaco-editor\">monaco editor</a> which is what the lean-web-editor uses.</p>",
        "id": 186793635,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1580225531
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"223495\">@Tim Daly</span> re docker. I just unearthed this post by William Stein <a href=\"#narrow/stream/113489-new-members/topic/Installation.20and.20usage.20instructions/near/147247975\" title=\"#narrow/stream/113489-new-members/topic/Installation.20and.20usage.20instructions/near/147247975\">https://leanprover.zulipchat.com/#narrow/stream/113489-new-members/topic/Installation.20and.20usage.20instructions/near/147247975</a></p>",
        "id": 186793999,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1580225776
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"123965\">@Bryan Gin-ge Chen</span> I think I found it: <a href=\"https://stackblitz.com/\" target=\"_blank\" title=\"https://stackblitz.com/\">https://stackblitz.com/</a></p>",
        "id": 186794039,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1580225811
    },
    {
        "content": "<p>OK, I don't think I've seen stackblitz before but it looks cool!</p>",
        "id": 186794419,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1580226038
    },
    {
        "content": "<p>Ooh, maybe it was Patrick who showed it to me</p>",
        "id": 186794608,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1580226145
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"116034\">@William Stein</span> is way ahead of me. Cocalc is certainly a better path than I'm taking, especially since it helps William and has real company backing. Anyone who has used Cocalc for Lean, please post instructions.</p>",
        "id": 186795851,
        "sender_full_name": "Tim Daly",
        "timestamp": 1580227055
    },
    {
        "content": "<p>It works out of the box!</p>",
        "id": 186796027,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1580227168
    },
    {
        "content": "<p>The only thing you need to know is that it reads leanpkg.path from the root directory and I believe this can't be changed</p>",
        "id": 186796140,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1580227221
    },
    {
        "content": "<p>Gotta love <span class=\"user-mention\" data-user-id=\"116034\">@William Stein</span> 's work. He's a good guy and needs the support. Besides, now I can go back to being lost in Lean.</p>",
        "id": 186797150,
        "sender_full_name": "Tim Daly",
        "timestamp": 1580227820
    }
]