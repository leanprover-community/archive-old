[
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"572658\">Dean Young</span> <a href=\"#narrow/stream/113486-announce/topic/MathemaTeX/near/318308501\">said</a>:</p>\n<blockquote>\n<p><a href=\"/user_uploads/3121/CFv4t1VbB7NsYjChmfRLn0Nc/Screen-Shot-2022-12-28-at-1.43.19-PM.png\">Screen-Shot-2022-12-28-at-1.43.19-PM.png</a></p>\n<p>Take a look at this screenshot from a PDF I made using MathemaTex! Would you care for this \\lean{} environment in .TeX? Reach out to me here or at <a href=\"mailto:edeany@nyu.edu\">edeany@nyu.edu</a>.</p>\n</blockquote>\n<p>Could you explain what we're looking at here? From the screenshot,it looks like <code>\\lean{}</code> just draws a box; perhaps you could write a longer description of what exactly it is you're announcing, since I assume it's more than that!</p>",
        "id": 318324729,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1672261437
    },
    {
        "content": "<p>...but not on #announce please!</p>",
        "id": 318325611,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1672261955
    },
    {
        "content": "<p>cc: <span class=\"user-mention\" data-user-id=\"572658\">@Dean Young</span></p>",
        "id": 318325757,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1672262030
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span> <a href=\"#narrow/stream/113488-general/topic/MathemaTeX/near/318324729\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"572658\">Dean Young</span> <a href=\"#narrow/stream/113486-announce/topic/MathemaTeX/near/318308501\">said</a>:</p>\n<blockquote>\n<p><a href=\"/user_uploads/3121/CFv4t1VbB7NsYjChmfRLn0Nc/Screen-Shot-2022-12-28-at-1.43.19-PM.png\">Screen-Shot-2022-12-28-at-1.43.19-PM.png</a></p>\n<p>Take a look at this screenshot from a PDF I made using MathemaTex! Would you care for this \\lean{} environment in .TeX? Reach out to me here or at <a href=\"mailto:edeany@nyu.edu\">edeany@nyu.edu</a>.</p>\n</blockquote>\n<p>Could you explain what we're looking at here? From the screenshot,it looks like <code>\\lean{}</code> just draws a box; perhaps you could write a longer description of what exactly it is you're announcing, since I assume it's more than that!</p>\n</blockquote>\n<p>[A] Where we're headed. </p>\n<p>Mathematex is going to be a Latex library that compiles and runs lean and scores of other softwares. The basic concept is that the code is run at the server of <a href=\"http://linearlibrary.org\">linearlibrary.org</a> (which is down right now for maintenance). I was thinking that the same compilation for the latex file could shoot the code over to the server and update the associated output.txt file. Ideally this would be done with as much as possible packed into a Latex library. I thought that the convenience of the Mathematex package could be enough to make more people try out Lean, Coq, Mizar, Isabelle, etc. And secondly I wanted a professional looking workflow for my work on the computer.</p>\n<p>[B] Where we're at.</p>\n<p>Right now it's not on my server, just my laptop. The \"workflow\" part is done and I want to see about making this concept work online through this linearlibrary website I've created. The picture shows lean code which compiled at the same command as the .tex file on my MacBook Pro. It's also pretty good looking except for not having return-lines in some places where it should.</p>",
        "id": 318333318,
        "sender_full_name": "Dean Young",
        "timestamp": 1672266252
    },
    {
        "content": "<p>P.S. One con is that latex doesn't read unicode. I thought that a good solution would be to have the associated lean file for any serious checks whereas the pdf can have any macros at all compiled using the .tex macro system. To get the associated lean file, the $ and the \\ are all deleted. Meanwhile the \\lean{} environment has a fixed width font, maybe with the possibility of adding in some code coloring? I liked the prospects of coloring definitions blue or something like that.</p>",
        "id": 318333899,
        "sender_full_name": "Dean Young",
        "timestamp": 1672266624
    },
    {
        "content": "<p>I'm interested in modifications and advice about [A] from anyone who is interested in the idea.</p>",
        "id": 318334696,
        "sender_full_name": "Dean Young",
        "timestamp": 1672267165
    },
    {
        "content": "<p><a href=\"/user_uploads/3121/yACi-MEH-eyf6YIYO6eWq34U/Screen-Shot-2022-12-28-at-1.43.19-PM.png\">Screen-Shot-2022-12-28-at-1.43.19-PM.png</a> <a href=\"/user_uploads/3121/_VjYdLBe_uuWq6F1ikjHEQnQ/Screen-Shot-2022-12-28-at-5.40.47-PM.png\">Screen-Shot-2022-12-28-at-5.40.47-PM.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/yACi-MEH-eyf6YIYO6eWq34U/Screen-Shot-2022-12-28-at-1.43.19-PM.png\" title=\"Screen-Shot-2022-12-28-at-1.43.19-PM.png\"><img src=\"/user_uploads/3121/yACi-MEH-eyf6YIYO6eWq34U/Screen-Shot-2022-12-28-at-1.43.19-PM.png\"></a></div><div class=\"message_inline_image\"><a href=\"/user_uploads/3121/_VjYdLBe_uuWq6F1ikjHEQnQ/Screen-Shot-2022-12-28-at-5.40.47-PM.png\" title=\"Screen-Shot-2022-12-28-at-5.40.47-PM.png\"><img src=\"/user_uploads/3121/_VjYdLBe_uuWq6F1ikjHEQnQ/Screen-Shot-2022-12-28-at-5.40.47-PM.png\"></a></div>",
        "id": 318334840,
        "sender_full_name": "Dean Young",
        "timestamp": 1672267265
    },
    {
        "content": "<p><a href=\"http://\">Uploading Screen Shot 2022-12-28 at 5.42.10 PM.png…</a></p>",
        "id": 318334938,
        "sender_full_name": "Dean Young",
        "timestamp": 1672267343
    },
    {
        "content": "<p>Do you know about the existing ways we write Lean code into LaTeX? There we have already solved the Unicode issue.</p>",
        "id": 318338812,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1672270019
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"387244\">Yaël Dillies</span> <a href=\"#narrow/stream/113488-general/topic/MathemaTeX/near/318338812\">said</a>:</p>\n<blockquote>\n<p>Do you know about the existing ways we write Lean code into LaTeX? There we have already solved the Unicode issue.</p>\n</blockquote>\n<p>Actually I hadn't heard of this. What is the way?</p>",
        "id": 318343563,
        "sender_full_name": "Dean Young",
        "timestamp": 1672273890
    },
    {
        "content": "<p>One such way is to use LuaTeX or XeTeX instead of pdfLaTeX, along with a font with wider support like DejavuSansMono</p>",
        "id": 318365932,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1672296345
    },
    {
        "content": "<p>For example, I write stuff like <code>\\texttt{g$_1$.nt $\\oplus$ g$_2$.nt}</code> for <code>g₁.nt ⊕ g₂.nt</code> which works but is a bit annoying.</p>",
        "id": 318371583,
        "sender_full_name": "Martin Dvořák",
        "timestamp": 1672300553
    },
    {
        "content": "<p>You definitely don't need to do that Martin</p>",
        "id": 318374838,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1672302487
    },
    {
        "content": "<p>Yeah I use minted and it just works</p>",
        "id": 318396153,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1672312013
    },
    {
        "content": "<p>Is it this package?<br>\n<a href=\"https://ctan.org/pkg/minted?lang=en\">https://ctan.org/pkg/minted?lang=en</a></p>",
        "id": 318396410,
        "sender_full_name": "Martin Dvořák",
        "timestamp": 1672312101
    },
    {
        "content": "<p>Yes</p>",
        "id": 318396710,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1672312209
    },
    {
        "content": "<p>I include <code>\\usepackage(minted)</code> and do </p>\n<div class=\"codehilite\" data-code-language=\"Text only\"><pre><span></span><code>\\begin{minted}{lean}\n  code here\n\\end{minted}\n</code></pre></div>\n<p>to get lean in my LaTeX documents including beamer (you might have to tag the frames as fragile in beamer)</p>",
        "id": 318397228,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1672312395
    },
    {
        "content": "<p>Here's an example which someone doing my course last year wrote (they wanted to change some default options and add some unicode):</p>\n<div class=\"codehilite\" data-code-language=\"Text only\"><pre><span></span><code>\\usepackage{minted}\n\\usepackage{newunicodechar}\n\\newunicodechar{Ñ}{\\ensuremath{\\mathcal{N}}}\n\\newunicodechar{ᵐ}{\\ensuremath{^m}}\n\\newunicodechar{ᶜ}{\\ensuremath{^c}}\n\\newunicodechar{ᶠ}{\\ensuremath{^f}}\n</code></pre></div>\n<p>and then</p>\n<div class=\"codehilite\" data-code-language=\"Text only\"><pre><span></span><code>\\begin{minted}[mathescape, numbersep=5pt, frame=lines, framesep=2mm, fontsize=\\small]{Lean}\nlemma eventually.mono {p q : α → Prop} {f : filter α}\n  (hp : ∀ᶠ x in f, p x) (hq : ∀ x, p x → q x) :\n  ∀ᶠ x in f, q x\n\\end{minted}\n</code></pre></div>",
        "id": 318397934,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1672312652
    },
    {
        "content": "<p>The newunicodechar stuff isn't needed so much if you use a different font like the DejaVuSansMono package with non-pdfLaTeX; but is an approach that I've used before too.</p>",
        "id": 318455973,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1672333948
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"572658\">@Dean Young</span>, addressing <a href=\"#narrow/stream/113488-general/topic/MathemaTeX/near/318333318\">your original post</a> rather than this tangent about <em>formatting</em> Lean in LaTeX; it's hard for me to believe that <em>running</em> Lean from LaTeX is a useful thing to do, for numerous reasons:</p>\n<ul>\n<li>Building Lean can be slow. If I edit some wording in my paper, I don't want to wait for it to rerun the embedding Lean every time (you can of course solve this with caching like <code>minted</code> does)</li>\n<li>A big part of lean is the fact that it is an <em>interactive</em> theorem prover. When used in an editor designed for writing Lean, you get told all the errors messages and goal states as you are writing, which are crucial for actually developing proofs. Running <code>lean --make</code> from the command line every time you do this is already a very ineffective way to work; having to wait for LaTeX to turn this output into a PDF only makes it more painful!</li>\n<li>Lean often requires a lot of boilerplate which is just noise for mathematical papers where you really only want to include abridged key results (and link to actual working code hosted in a way that is easy for the reader to run)</li>\n</ul>",
        "id": 318459552,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1672335396
    },
    {
        "content": "<p>I think there <em>is</em> a useful tool hiding here somewhere; sometimes I'll edit Lean code in a paper to fix line-wrapping etc, and accidentally introduce an error that's not present in the supplemental code repository. A way of marking up Lean files such that I can write <code>\\includeleansnippet{some_file.lean}{some-marker-ids}</code> to include certain lines of a file (by finding markers not line numbers) or something would ensure that these don't fall out of sync.</p>\n<p>I wouldn't be surprised if there are LaTeX packages that provide such a mechanism already for other programming languages.</p>",
        "id": 318459807,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1672335502
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"572658\">Dean Young</span> <a href=\"#narrow/stream/113488-general/topic/MathemaTeX/near/318333318\">said</a>:</p>\n<blockquote>\n<p>Mathematex is going to be a Latex library that compiles and runs lean and scores of other softwares. The basic concept is that the code is run at the server of <a href=\"http://linearlibrary.org\">linearlibrary.org</a> (which is down right now for maintenance).</p>\n</blockquote>\n<p>Running arbitrary user code on your own servers is probably not something you want to go anywhere near unless you really know what you're doing when it comes to sandboxing / rate limiting / authentication. See for instance how github stopped running CI for new users to prevent people asking their servers to mine cryptocurrency!</p>",
        "id": 318460236,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1672335708
    },
    {
        "content": "<p>Hmm ok. Thanks for all of this information. I'll go with minted then, except I want to keep the visual style of what I had. It seems minted requires a download?</p>",
        "id": 318505939,
        "sender_full_name": "Dean Young",
        "timestamp": 1672360976
    },
    {
        "content": "<p>A download of what? LaTeX doesn't come preinstalled on most systems, so a download of some kind seems unavoidable.</p>",
        "id": 318529063,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1672380004
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span> <a href=\"#narrow/stream/113488-general/topic/MathemaTeX/near/318529063\">said</a>:</p>\n<blockquote>\n<p>A download of what? LaTeX doesn't come preinstalled on most systems, so a download of some kind seems unavoidable.</p>\n</blockquote>\n<p>It was just some trouble with the package. Here was the error and solution for me:</p>\n<p><a href=\"https://tex.stackexchange.com/questions/99475/how-to-invoke-latex-with-the-shell-escape-flag-in-texstudio-former-texmakerx\">https://tex.stackexchange.com/questions/99475/how-to-invoke-latex-with-the-shell-escape-flag-in-texstudio-former-texmakerx</a></p>\n<p>I'm not sure if anyone else had the same problem.</p>",
        "id": 318599817,
        "sender_full_name": "Dean Young",
        "timestamp": 1672411150
    },
    {
        "content": "<p>Thanks all for your help in steering me towards the work that's been done. It seems there's not the space I thought there was for this idea. I decided to go with minted plus the tcolorbox I was using. If anyone wants the look it goes like this:</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"bp\">\\</span><span class=\"kd\">begin</span><span class=\"o\">{</span><span class=\"n\">tcolorbox</span><span class=\"o\">}[</span><span class=\"n\">width</span><span class=\"bp\">=</span><span class=\"mi\">5</span><span class=\"bp\">.</span><span class=\"mi\">5</span><span class=\"n\">in</span><span class=\"o\">,</span><span class=\"n\">colback</span><span class=\"bp\">=</span><span class=\"o\">{</span><span class=\"n\">white</span><span class=\"o\">},</span><span class=\"n\">title</span><span class=\"bp\">=</span><span class=\"o\">{</span><span class=\"bp\">\\</span><span class=\"kd\">begin</span><span class=\"o\">{</span><span class=\"n\">center</span><span class=\"o\">}</span><span class=\"bp\">\\</span><span class=\"n\">texttt</span><span class=\"o\">{</span><span class=\"n\">Lean</span> <span class=\"bp\">\\</span><span class=\"n\">thepythoncounter</span><span class=\"o\">}</span> <span class=\"bp\">\\</span><span class=\"n\">addtocounter</span><span class=\"o\">{</span><span class=\"n\">pythoncounter</span><span class=\"o\">}{</span><span class=\"mi\">1</span><span class=\"o\">}</span>  <span class=\"bp\">\\</span><span class=\"kd\">end</span><span class=\"o\">{</span><span class=\"n\">center</span><span class=\"o\">}},</span><span class=\"n\">colbacktitle</span><span class=\"bp\">=</span><span class=\"n\">Red</span><span class=\"o\">,</span><span class=\"n\">coltitle</span><span class=\"bp\">=</span><span class=\"n\">black</span><span class=\"o\">]</span>\n<span class=\"bp\">\\</span><span class=\"kd\">begin</span><span class=\"o\">{</span><span class=\"n\">minted</span><span class=\"o\">}{</span><span class=\"n\">lean</span><span class=\"o\">}</span>\n<span class=\"kd\">def</span> <span class=\"n\">a</span> <span class=\"o\">:=</span> <span class=\"mi\">1</span>\n<span class=\"bp\">\\</span><span class=\"kd\">end</span><span class=\"o\">{</span><span class=\"n\">minted</span><span class=\"o\">}</span>\n<span class=\"bp\">\\</span><span class=\"kd\">end</span><span class=\"o\">{</span><span class=\"n\">tcolorbox</span><span class=\"o\">}</span>\n</code></pre></div>\n<p>with:</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"bp\">\\</span><span class=\"n\">usepackage</span><span class=\"o\">{</span><span class=\"n\">tcolorbox</span><span class=\"o\">,</span> <span class=\"n\">minted</span><span class=\"o\">}</span>\n</code></pre></div>",
        "id": 318626672,
        "sender_full_name": "Dean Young",
        "timestamp": 1672420677
    },
    {
        "content": "<p><a href=\"/user_uploads/3121/gMo8wiPZoIJBwezOmlVnApHW/Screen-Shot-2022-12-30-at-12.18.56-PM.png\">Screen-Shot-2022-12-30-at-12.18.56-PM.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/gMo8wiPZoIJBwezOmlVnApHW/Screen-Shot-2022-12-30-at-12.18.56-PM.png\" title=\"Screen-Shot-2022-12-30-at-12.18.56-PM.png\"><img src=\"/user_uploads/3121/gMo8wiPZoIJBwezOmlVnApHW/Screen-Shot-2022-12-30-at-12.18.56-PM.png\"></a></div>",
        "id": 318626945,
        "sender_full_name": "Dean Young",
        "timestamp": 1672420748
    },
    {
        "content": "<p>I think <code>minted</code> has some built-in integration with tcolorbox available, although I've never used it</p>",
        "id": 318627974,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1672421174
    }
]