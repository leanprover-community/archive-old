[
    {
        "content": "<p>I have the definition of manifold over a normed field in Lean. You can see it in the following link<br>\n<a href=\"https://github.com/truonghoangle/manifolds\" target=\"_blank\" title=\"https://github.com/truonghoangle/manifolds\">https://github.com/truonghoangle/manifolds</a><br>\nIf you do not mind, please can you give me advice about it, special name of function or section and approach way to the definition of tangent bundle.</p>",
        "id": 165394519,
        "sender_full_name": "Hoang Le Truong",
        "timestamp": 1557553316
    },
    {
        "content": "<p>Are you aware of the fact that <span class=\"user-mention\" data-user-id=\"110050\">@Sebastien Gouezel</span> is also working on manifolds? Did you coordinate with him?</p>",
        "id": 165394777,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1557553666
    },
    {
        "content": "<p>When I began with manifold, I did not known <span class=\"user-mention\" data-user-id=\"110050\">@Sebastien Gouezel</span>  is also working on manifolds. Now I will contact him.</p>",
        "id": 165395019,
        "sender_full_name": "Hoang Le Truong",
        "timestamp": 1557554070
    },
    {
        "content": "<p>Here is one discussion: <a href=\"#narrow/stream/116395-maths/topic/Multiple.20differentiability\" title=\"#narrow/stream/116395-maths/topic/Multiple.20differentiability\">https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Multiple.20differentiability</a></p>",
        "id": 165395088,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1557554182
    },
    {
        "content": "<p>Here is another one that might be relevant: <a href=\"#narrow/stream/113488-general/topic/out_param\" title=\"#narrow/stream/113488-general/topic/out_param\">https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/out_param</a></p>",
        "id": 165395103,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1557554248
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"116065\">@Hoang Le Truong</span> Here is another attempt by Patrick: <a href=\"https://github.com/PatrickMassot/lean-differential-topology\" target=\"_blank\" title=\"https://github.com/PatrickMassot/lean-differential-topology\">https://github.com/PatrickMassot/lean-differential-topology</a></p>",
        "id": 165395192,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1557554400
    },
    {
        "content": "<p>Thank <span class=\"user-mention\" data-user-id=\"112680\">@Johan Commelin</span> for your information</p>",
        "id": 165395262,
        "sender_full_name": "Hoang Le Truong",
        "timestamp": 1557554419
    },
    {
        "content": "<p>The current state of thingsI have done on manifolds is in <a href=\"https://github.com/sgouezel/mathlib/blob/manifold4/src/geometry/manifolds/basic.lean\" target=\"_blank\" title=\"https://github.com/sgouezel/mathlib/blob/manifold4/src/geometry/manifolds/basic.lean\">https://github.com/sgouezel/mathlib/blob/manifold4/src/geometry/manifolds/basic.lean</a>. I am going for a more general approach, that would also encompass manifolds with boundaries, or manifolds with corners, or Thurston's (G,X) structures, but essentially the basic definitions are the same as yours, i.e., an atlas such that the changes of charts belong to some class of maps (called a groupoid, as in the fundamental textbook of Kobayashi and Nomizu). What I have done so far:</p>\n<ul>\n<li>extended the material on derivatives, to get access to a convenient API (PRed in <a href=\"https://github.com/leanprover-community/mathlib/issues/966\" target=\"_blank\" title=\"https://github.com/leanprover-community/mathlib/issues/966\">#966</a>)</li>\n<li>defined local equivalences, just like you do except I use genuine functions instead of pfuns, to avoid defining yet another notion of derivatives (and I don't care what the functions do outside of their domains and codomains), and defined a basic interface for them (in <a href=\"https://github.com/sgouezel/mathlib/blob/manifold4/src/geometry/manifolds/local_equiv.lean\" target=\"_blank\" title=\"https://github.com/sgouezel/mathlib/blob/manifold4/src/geometry/manifolds/local_equiv.lean\">https://github.com/sgouezel/mathlib/blob/manifold4/src/geometry/manifolds/local_equiv.lean</a>). The fact that this is a good choice has been questioned by several people on Zulip, who encouraged me to use pfuns as you do, but for now it seems to go rather smoothly -- I need to develop the library further to see what the advantages and drawbacks are.</li>\n<li>defined C^n functions, and proved basic properties (invariance under addition, composition, and so on), in <a href=\"https://github.com/sgouezel/mathlib/blob/manifold4/src/geometry/manifolds/times_cont_diff.lean\" target=\"_blank\" title=\"https://github.com/sgouezel/mathlib/blob/manifold4/src/geometry/manifolds/times_cont_diff.lean\">https://github.com/sgouezel/mathlib/blob/manifold4/src/geometry/manifolds/times_cont_diff.lean</a></li>\n<li>defined general manifolds based on groupoids. As well as diffeomorphisms (for the groupoid structure), and proved that the inverse or the composition of two diffeomorphisms is a diffeomorphism (this is not so obvious) in <a href=\"https://github.com/sgouezel/mathlib/blob/manifold4/src/geometry/manifolds/basic.lean\" target=\"_blank\" title=\"https://github.com/sgouezel/mathlib/blob/manifold4/src/geometry/manifolds/basic.lean\">https://github.com/sgouezel/mathlib/blob/manifold4/src/geometry/manifolds/basic.lean</a>. Specialized to smooth manifolds, for which I am now defining the tangent space.</li>\n</ul>\n<p>My goal would be to go up to the Whitney embedding theorem (any smooth real manifold embeds in R^N for large enough N), which is a non-trivial theorem, to stress-test the definitions and the interface.</p>",
        "id": 165398498,
        "sender_full_name": "Sebastien Gouezel",
        "timestamp": 1557559998
    },
    {
        "content": "<p>One important point in library-building, I think, is that writing down definitions is not enough: you need to prove theorems, to see how definitions work out well or not, and what interface you need for the proofs. For instance, the first statement I settled to prove is that the composition of diffeomorphisms is a diffeomorphism. This showed me that I needed to implement a serious interface to local equivs, that now takes over 800 lines. And now defining the tangent space shows me gaps in this interface, that I will have to fill.</p>",
        "id": 165398847,
        "sender_full_name": "Sebastien Gouezel",
        "timestamp": 1557560682
    },
    {
        "content": "<p>My goal would be to go up to the Hodge theorem. I also think that the definition is right through the proof of the theorems. For instance about tangent bundle, we have three ways to give the definition.  Moreover, for complex manifold, we have three tangent bundle.  I am struggling between approachable approach on complex, real number and general ways.</p>",
        "id": 165399819,
        "sender_full_name": "Hoang Le Truong",
        "timestamp": 1557562300
    },
    {
        "content": "<p>Do you want to state the Hodge theorem or also prove it?</p>",
        "id": 165400014,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1557562660
    },
    {
        "content": "<p>Either of them would be fantastic!</p>",
        "id": 165400015,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1557562679
    },
    {
        "content": "<p>I am going for a general way (over any field), as follows: let <code>charts x</code> be the set of all charts around <code>x</code>. If <code>e</code> and <code>e'</code> are such charts, they yield a linear map from <code>E</code> to <code>E</code>, the derivative of <code>e' o e^{-1}</code>. Take the quotient of <code>(charts x) × E</code> under these identifications, this gives the tangent space. Hopefully, this should be easily generalizable to define exterior or symmetric products of the tangent bundle, opening the way to Riemannian metrics and to differential forms. But before doing the general case, I will stick to tangent spaces for now.</p>",
        "id": 165400502,
        "sender_full_name": "Sebastien Gouezel",
        "timestamp": 1557563409
    },
    {
        "content": "<p>Another definition would be to choose one chart around each point, and only use this one to define the tangent space. This avoid taking a quotient, but it is less canonical. I will have to do it at some point, though, because I will want the derivative of a map to be a bounded linear map between tangent spaces, and for this I need a normed space structure on the tangent space, for which there is no canonical choice.</p>",
        "id": 165400611,
        "sender_full_name": "Sebastien Gouezel",
        "timestamp": 1557563527
    },
    {
        "content": "<p>I think there will be painful points in any case, the only question is whether the API will be able to hide them</p>",
        "id": 165400701,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1557563631
    },
    {
        "content": "<p>Yes, it is definitely going to be nontrivial.</p>",
        "id": 165401048,
        "sender_full_name": "Sebastien Gouezel",
        "timestamp": 1557564010
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"112680\">@Johan Commelin</span>  I want to prove it but first step is to give the statement of the Hodge theorem</p>",
        "id": 165403659,
        "sender_full_name": "Hoang Le Truong",
        "timestamp": 1557568064
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"110050\">@Sebastien Gouezel</span> are you think how definition of tangent space via derivations is good</p>",
        "id": 165404064,
        "sender_full_name": "Hoang Le Truong",
        "timestamp": 1557568606
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"110031\">@Patrick Massot</span> can you explain detaily about whether the API will be able to hide them</p>",
        "id": 165404136,
        "sender_full_name": "Hoang Le Truong",
        "timestamp": 1557568758
    },
    {
        "content": "<p>Definition of tangent space via derivations is very nice, but as far as I remember proofs that it behaves well require localizing functions around the point, and while this works well over R this creates problems over C where you don't have partitions of unity. And this construction is really specific to tangent spaces, while the stupid approach using equivalence classes of vectors should be generalizable to other vector bundles.</p>",
        "id": 165404286,
        "sender_full_name": "Sebastien Gouezel",
        "timestamp": 1557569027
    },
    {
        "content": "<blockquote>\n<p>One important point in library-building, I think, is that writing down definitions is not enough: you need to prove theorems, to see how definitions work out well or not, and what interface you need for the proofs.</p>\n</blockquote>\n<p>Tom Hales' project does not need proofs, so for this project one <em>might</em> find that writing down definitions is in many cases enough. If the goal is just to formalise statements of theorems then this might provide far fewer demands on the definition-builder.</p>",
        "id": 165404699,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1557569730
    },
    {
        "content": "<p>With complex maifold we have real tangent bundle, complexified tangent bundle and holomorphic tangent bundle. In fact, we begin with real tangent bundle. So I don't understand what the problems over C is.</p>",
        "id": 165405061,
        "sender_full_name": "Hoang Le Truong",
        "timestamp": 1557570382
    },
    {
        "content": "<p>You don't need to separate the real case and the complex case: there is a definition which works for both at the same time. So, to minimize work, it is probably better to use this one.</p>",
        "id": 165407103,
        "sender_full_name": "Sebastien Gouezel",
        "timestamp": 1557573726
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"110050\">@Sebastien Gouezel</span> I read carefully the definition of very general manifold. It is very nice. I have question:What is the definition of submanifold? Is the definition of submanifold dependent on model space?</p>",
        "id": 165883850,
        "sender_full_name": "Hoang Le Truong",
        "timestamp": 1558083744
    },
    {
        "content": "<p>Can you comment on why your <code>local_equiv α  β</code> actually involves maps defined on all of <code>α</code> and  <code>β</code>, rather than just the indicated subsets?   This seems to be asking for trouble later.  Among other things, it means that an empty type cannot have a local equivalence with a nonempty one, which is a problem if <code>α</code> and  <code>β</code> arise naturally as subtypes of something else.  Can you not use maps <code>α → roption β</code> and <code>β → roption α</code> or something like that?  That way, the <code>eq_on_source</code> thing would become unnecessary.</p>",
        "id": 166246445,
        "sender_full_name": "Neil Strickland",
        "timestamp": 1558513071
    },
    {
        "content": "<p>There are pros and cons to both approaches, i.e. (1): functions defined everywhere, but you don't care about the values outside of the source, and (2): roption, i.e., really kill the values outside of source.</p>\n<p>In (1), if functions are equal on the source but different outside, then they are not equal, while you want to think of them as the same function. That's the role of <code>eq_on_source</code>, which is definitely an annoyance.</p>\n<p>In (2), your function does not take values in the right space, and this calls for trouble. For instance, if you want to define the derivative of a function <code>f : M -&gt; M' </code> where <code>M</code> and <code>M'</code> are manifolds, what you do is write <code>f</code> in charts, i.e., consider <code>e' o f o e^{-1}</code> where <code>e</code> and <code>e'</code> are charts around <code>x</code>and <code>f x</code>, and then you differentiate. With the roption approach, what you get is a function from <code>E</code> to <code>roption E'</code>, so you can not define the derivative as the limit of <code>(f(x+hv)-f(x))/h</code> when <code>h</code>tends to <code>0</code> (or an equivalent definition using small o) as it does not make sense to subtract elements of <code>roption E'</code>, or to divide them by a scalar. So, you would need to extend many algebraic definitions to <code>roption</code>, or to restrict your function to some suitable set and play some nontrivial dance there. </p>\n<p>I have the feeling that (2) will create many more concrete problems than (1). Most of the time, we don't care at all about equality of charts, we just use one given chart and that's it. While having to reproject your function back to <code>E</code>to do some algebraic manipulation happens all the time. That's why I went for (1). But you are not the first person to voice concerns about this choice.</p>",
        "id": 166259295,
        "sender_full_name": "Sebastien Gouezel",
        "timestamp": 1558524940
    },
    {
        "content": "<p>You can define the derivative when the function is defined on an open set around the target point</p>",
        "id": 166260363,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1558526014
    },
    {
        "content": "<p>the little o definition with a filter for roption functions actually makes this pretty painless</p>",
        "id": 166260436,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1558526071
    },
    {
        "content": "<p>Jeremy and I worked it out a while ago</p>",
        "id": 166260450,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1558526091
    },
    {
        "content": "<p>You can definitely work it out. The same for continuity: there is already an API for continuity of partial functions, crafted by Jeremy. Except that it is some amount of work. Then when you want to talk about C^k functions, or analytic functions, or Besov functions, or whatever, and even if you have already done it for functions you will need to spend some time to define again the same notions for partial functions (with a well developed API if you want these notions to be usable). This is completely avoided by the approach (1), at the expense of the mild annoyance that equality between charts (which is essentially never used) is not the right notion.</p>",
        "id": 166260990,
        "sender_full_name": "Sebastien Gouezel",
        "timestamp": 1558526642
    },
    {
        "content": "<p>You don't want to lift every algebraic operation to roption exactly; you use the monad structure for that</p>",
        "id": 166261014,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1558526651
    },
    {
        "content": "<p>I'm not sure it's true to say it's completely avoided; instead you have to build an API for <code>eq_on_bla</code> and <code>local_equiv</code> and such. It's moving the work elsewhere</p>",
        "id": 166261063,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1558526720
    },
    {
        "content": "<p>I think in any case you will need to build an API for <code>local_equiv</code>. Even with partial functions, you will need to bundle two partial functions which are inverse to each other on their respective domains, and see how they compose and so on.</p>",
        "id": 166261246,
        "sender_full_name": "Sebastien Gouezel",
        "timestamp": 1558526890
    },
    {
        "content": "<p>no, that's equiv of subtypes</p>",
        "id": 166261374,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1558527037
    },
    {
        "content": "<p>Not really, because you want to be able to compose them even when when the target of the first one is not the source of the second one, by automatically taking the intersection of the domains. Composition of roption-valued functions does that automatically, but composition of equivs of subtypes does not.</p>",
        "id": 166261712,
        "sender_full_name": "Sebastien Gouezel",
        "timestamp": 1558527372
    },
    {
        "content": "<p>that's true. I guess you need to forget about the domains in the types in your case</p>",
        "id": 166261828,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1558527517
    },
    {
        "content": "<p>still I like the fact that using subtypes gives you topology for free... can roption do the same?</p>",
        "id": 166261884,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1558527595
    },
    {
        "content": "<p>2) With the roption approach, I change a function <code>E → roption E</code> to function <code> E → E</code> by <br>\n<code>def ext_by_zero(f : β →. α) (z:β) : α := \nif  h:z ∈  f.dom    then f.fn z h else 0</code><br>\nWhen we only work on <code>x ∈ f.dom</code></p>",
        "id": 166262151,
        "sender_full_name": "Hoang Le Truong",
        "timestamp": 1558527850
    },
    {
        "content": "<p>Fisrt I work only with complex field and   definition of <code>manifold ℂ β</code> <code>local_equiv α  β</code> also work only funtions <code>α → β</code>.  But we can change ℂ to any field <code>k</code>.  When we work on field <code>𝔽₁</code> then empty function joint theory as absorbing element.  Therefore I choose <code>local_equiv α  β</code> include empty function</p>",
        "id": 166262200,
        "sender_full_name": "Hoang Le Truong",
        "timestamp": 1558527937
    },
    {
        "content": "<p>I think the natural topology on roption A is the one-point compactification</p>",
        "id": 166262206,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1558527947
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"110294\">@Johannes Hölzl</span> Do you know a way to do the topology of <code>roption A</code> with filters?</p>",
        "id": 166262394,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1558528088
    },
    {
        "content": "<p>I am still puzzled by my question that started this thread: how come a <code>simp</code>invocation can create a ghost duplication of some objects, that disappears if one adds a <code>rw</code> just before, in <a href=\"https://github.com/sgouezel/mathlib/blob/f6d6492e7a8b892b4a22fb010fb12d1a4695d38a/src/geometry/manifolds/mderiv.lean#L604\" target=\"_blank\" title=\"https://github.com/sgouezel/mathlib/blob/f6d6492e7a8b892b4a22fb010fb12d1a4695d38a/src/geometry/manifolds/mderiv.lean#L604\">https://github.com/sgouezel/mathlib/blob/f6d6492e7a8b892b4a22fb010fb12d1a4695d38a/src/geometry/manifolds/mderiv.lean#L604</a>. Any hint on what is going on would be welcome.</p>",
        "id": 166270560,
        "sender_full_name": "Sebastien Gouezel",
        "timestamp": 1558534056
    },
    {
        "content": "<p>I wonder whether it would be useful to introduce germs of functions here (a \"germ of a function f : X -&gt; Y at x : X\" is a neighborhood N of x together with a function N -&gt; Y, modulo the relation that two germs agree if they have a common restriction to a smaller neighborhood). Notions like continuity, derivatives and all higher-order information is local--meaning it only depends on the germ.</p>",
        "id": 166369091,
        "sender_full_name": "Reid Barton",
        "timestamp": 1558623763
    },
    {
        "content": "<p>I guess it's better to only allow continuous functions, so that you can compose germs.</p>",
        "id": 166369956,
        "sender_full_name": "Reid Barton",
        "timestamp": 1558624292
    },
    {
        "content": "<p>I think that it would be best if the foundations of manifolds used sheaves explicitly.  If you don't do it explicitly then I think you end up duplicating a lot of the ideas anyway.  Many of the most popular manifolds are algebraic varieties, and you make the interface with algebraic geometry much smoother if you use similar foundations.  In that context, germs become very natural.</p>",
        "id": 166370260,
        "sender_full_name": "Neil Strickland",
        "timestamp": 1558624491
    },
    {
        "content": "<p>This has been discussed, but Patrick and Sebastien both said that this is not a good strategy for the general theory of manifolds. I trust their judgment.</p>",
        "id": 166370988,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1558624944
    },
    {
        "content": "<p>Maybe for them, many of the most popular manifolds are not algebraic varieties.</p>",
        "id": 166378545,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1558630087
    },
    {
        "content": "<p>For me, elliptic curves are surfaces, and they are all the same :)</p>",
        "id": 166386742,
        "sender_full_name": "Sebastien Gouezel",
        "timestamp": 1558636090
    },
    {
        "content": "<p>yeah that's not a good sign</p>",
        "id": 166386752,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1558636104
    },
    {
        "content": "<p>I spent many years studying their moduli spaces!</p>",
        "id": 166386778,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1558636134
    },
    {
        "content": "<p>For you it's the one point set.</p>",
        "id": 166386798,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1558636147
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"110050\">@Sebastien Gouezel</span> Aren't you interested in varying an almost complex structure on that unique elliptic curve?</p>",
        "id": 166387124,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1558636350
    },
    {
        "content": "<p>Of course I am joking. Teichmüller space is one of my favorite playgrounds.</p>",
        "id": 166387241,
        "sender_full_name": "Sebastien Gouezel",
        "timestamp": 1558636427
    },
    {
        "content": "<blockquote>\n<p>I wonder whether it would be useful to introduce germs of functions here (a \"germ of a function f : X -&gt; Y at x : X\" is a neighborhood N of x together with a function N -&gt; Y, modulo the relation that two germs agree if they have a common restriction to a smaller neighborhood). Notions like continuity, derivatives and all higher-order information is local--meaning it only depends on the germ.</p>\n</blockquote>\n<p>I considered this, or at least introducting predicates <code>locally_equal_at</code> and <code>locally_equal_within_at</code>. Finally, I decided that it does not help much to simplify other arguments, so I haven't introduced the definition, but I am still using it implicitely at some places, see for instance <a href=\"https://github.com/sgouezel/mathlib/blob/6d693c310ab036171dabadcf8924e5bc15ec8054/src/geometry/manifolds/mderiv.lean#L552\" target=\"_blank\" title=\"https://github.com/sgouezel/mathlib/blob/6d693c310ab036171dabadcf8924e5bc15ec8054/src/geometry/manifolds/mderiv.lean#L552\">https://github.com/sgouezel/mathlib/blob/6d693c310ab036171dabadcf8924e5bc15ec8054/src/geometry/manifolds/mderiv.lean#L552</a></p>",
        "id": 166388579,
        "sender_full_name": "Sebastien Gouezel",
        "timestamp": 1558637369
    },
    {
        "content": "<blockquote>\n<p>I think that it would be best if the foundations of manifolds used sheaves explicitly.  If you don't do it explicitly then I think you end up duplicating a lot of the ideas anyway.  Many of the most popular manifolds are algebraic varieties, and you make the interface with algebraic geometry much smoother if you use similar foundations.  In that context, germs become very natural.</p>\n</blockquote>\n<p>We should have a FAQ dedicated only to this question. This is an old algebraic geometry people fantasy relying on no mathematical content as far as we've seen. Pretending to define smooth manifold as ringed spaces only adds definitions without buying anything, and then the idea stops completely as soon as you want extra structure on your manifold.</p>",
        "id": 166392547,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1558640260
    },
    {
        "content": "<p>What extra structure do you have in mind?  You can certainly do vector bundles, tangent bundles, metrics, symplectic structures, connections, curvature, exterior derivatives, almost complex structures very naturally from the ringed space viewpoint.</p>",
        "id": 166395885,
        "sender_full_name": "Neil Strickland",
        "timestamp": 1558642666
    },
    {
        "content": "<p>Triangulations. Flows. Much of Riemannian geometry (for instance geodesic flow or Jacobi fields). Connected sums. Knots and surgery. Open book structure in contact manifolds. Thurston's <code>(G,X)</code> structures. PDEs. Perelman's geometrization theorem (yes, we're aiming high :). And many other things that a true differential geometer would know much better than me (I am more into dynamical systems and probability theory).</p>\n<p>Understand me well: I am not saying that none of this can be formalized in terms of ringed spaces. However, when doing anything about these concepts I think it would only come in the way and make things more complicated to state and prove.</p>",
        "id": 166399795,
        "sender_full_name": "Sebastien Gouezel",
        "timestamp": 1558645349
    },
    {
        "content": "<p>There's also the pragmatic point that there are no written sources for anything on Sebastien's list written using the \"locally ringed space foundations\".</p>",
        "id": 166404433,
        "sender_full_name": "Scott Morrison",
        "timestamp": 1558649067
    },
    {
        "content": "<p>I mean, ideally one's foundations should become irrelevant at some stage of the development, though I don't know whether this is going to be the case for everything on Sebastien's list.</p>",
        "id": 166404585,
        "sender_full_name": "Reid Barton",
        "timestamp": 1558649276
    },
    {
        "content": "<p>Well, I guess the main point is that eventually one will want to have the description in terms of atlases regardless of whether it is chosen as the definition or not.</p>",
        "id": 166404798,
        "sender_full_name": "Reid Barton",
        "timestamp": 1558649463
    },
    {
        "content": "<p>This post is beginning to read like my Langlands brain dump from earlier this week. Can we get it into an issue somehow? That would rely on fleshing some of the ideas out</p>",
        "id": 166425990,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1558678228
    },
    {
        "content": "<blockquote>\n<p>What extra structure do you have in mind?  You can certainly do vector bundles, tangent bundles, metrics, symplectic structures, connections, curvature, exterior derivatives, almost complex structures very naturally from the ringed space viewpoint.</p>\n</blockquote>\n<p>Do you mean: you can define manifolds as ringed space then derive existence of atlases and do everything naturally from there? If not then could you elaborate? Let's go for simpler stuff. What is your ringed definition of manifolds with boundary for instance?</p>",
        "id": 166427681,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1558680403
    },
    {
        "content": "<p>I've never used manifolds with boundary, so I don't know exactly how functions on them are supposed to behave. But I'll take a stab:<br>\nA manifold with boundary of dimension <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">n</annotation></semantics></math></span><span aria-hidden=\"true\" class=\"katex-html\"><span class=\"strut\" style=\"height:0.43056em;\"></span><span class=\"strut bottom\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"base\"><span class=\"mord mathit\">n</span></span></span></span> is a locally ringed space <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mo>(</mo><mi>X</mi><mo separator=\"true\">,</mo><mrow><mi mathvariant=\"script\">O</mi></mrow><mo>)</mo></mrow><annotation encoding=\"application/x-tex\">(X, \\mathcal{O})</annotation></semantics></math></span><span aria-hidden=\"true\" class=\"katex-html\"><span class=\"strut\" style=\"height:0.75em;\"></span><span class=\"strut bottom\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"base\"><span class=\"mopen\">(</span><span class=\"mord mathit\" style=\"margin-right:0.07847em;\">X</span><span class=\"mpunct\">,</span><span class=\"mord\"><span class=\"mord mathcal\" style=\"margin-right:0.02778em;\">O</span></span><span class=\"mclose\">)</span></span></span></span>, such that: there exists an open set <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>U</mi></mrow><annotation encoding=\"application/x-tex\">U</annotation></semantics></math></span><span aria-hidden=\"true\" class=\"katex-html\"><span class=\"strut\" style=\"height:0.68333em;\"></span><span class=\"strut bottom\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"base\"><span class=\"mord mathit\" style=\"margin-right:0.10903em;\">U</span></span></span></span> with the properties</p>\n<ul>\n<li>for every point <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>x</mi><mo>∈</mo><mi>U</mi></mrow><annotation encoding=\"application/x-tex\">x \\in U</annotation></semantics></math></span><span aria-hidden=\"true\" class=\"katex-html\"><span class=\"strut\" style=\"height:0.68333em;\"></span><span class=\"strut bottom\" style=\"height:0.72243em;vertical-align:-0.0391em;\"></span><span class=\"base\"><span class=\"mord mathit\">x</span><span class=\"mrel\">∈</span><span class=\"mord mathit\" style=\"margin-right:0.10903em;\">U</span></span></span></span> there is an open neighbourhood <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><msub><mi>U</mi><mi>x</mi></msub></mrow><annotation encoding=\"application/x-tex\">U_x</annotation></semantics></math></span><span aria-hidden=\"true\" class=\"katex-html\"><span class=\"strut\" style=\"height:0.68333em;\"></span><span class=\"strut bottom\" style=\"height:0.83333em;vertical-align:-0.15em;\"></span><span class=\"base\"><span class=\"mord\"><span class=\"mord mathit\" style=\"margin-right:0.10903em;\">U</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.151392em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.10903em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathit mtight\">x</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"></span></span></span></span></span></span></span></span> such that the induced LRS <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mo>(</mo><msub><mi>U</mi><mi>x</mi></msub><mo separator=\"true\">,</mo><mrow><mi mathvariant=\"script\">O</mi></mrow><msub><mi mathvariant=\"normal\">∣</mi><msub><mi>U</mi><mi>x</mi></msub></msub><mo>)</mo></mrow><annotation encoding=\"application/x-tex\">(U_x, \\mathcal{O}|_{U_x})</annotation></semantics></math></span><span aria-hidden=\"true\" class=\"katex-html\"><span class=\"strut\" style=\"height:0.75em;\"></span><span class=\"strut bottom\" style=\"height:1.0001em;vertical-align:-0.2501em;\"></span><span class=\"base\"><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathit\" style=\"margin-right:0.10903em;\">U</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.151392em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.10903em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathit mtight\">x</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mord\"><span class=\"mord mathcal\" style=\"margin-right:0.02778em;\">O</span></span><span class=\"mord\"><span class=\"mord mathrm\">∣</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.32833099999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mord mathit mtight\" style=\"margin-right:0.10903em;\">U</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.16454285714285719em;\"><span style=\"top:-2.357em;margin-left:-0.10903em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mathit mtight\">x</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2501em;\"></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span> is isomorphic (as LRS) to the standard open <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">n</annotation></semantics></math></span><span aria-hidden=\"true\" class=\"katex-html\"><span class=\"strut\" style=\"height:0.43056em;\"></span><span class=\"strut bottom\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"base\"><span class=\"mord mathit\">n</span></span></span></span>-ball with the sheaf of <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><msup><mi>C</mi><mi>k</mi></msup></mrow><annotation encoding=\"application/x-tex\">C^k</annotation></semantics></math></span><span aria-hidden=\"true\" class=\"katex-html\"><span class=\"strut\" style=\"height:0.849108em;\"></span><span class=\"strut bottom\" style=\"height:0.849108em;vertical-align:0em;\"></span><span class=\"base\"><span class=\"mord\"><span class=\"mord mathit\" style=\"margin-right:0.07153em;\">C</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.849108em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathit mtight\" style=\"margin-right:0.03148em;\">k</span></span></span></span></span></span></span></span></span></span></span> functions on it;</li>\n<li>for every point <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>x</mi><mo>∉</mo><mi>U</mi></mrow><annotation encoding=\"application/x-tex\">x \\notin U</annotation></semantics></math></span><span aria-hidden=\"true\" class=\"katex-html\"><span class=\"strut\" style=\"height:0.68333em;\"></span><span class=\"strut bottom\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"base\"><span class=\"mord mathit\">x</span><span class=\"mrel\">∉</span><span class=\"mord mathit\" style=\"margin-right:0.10903em;\">U</span></span></span></span>, there is an open neighbourhood <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><msub><mi>U</mi><mi>x</mi></msub></mrow><annotation encoding=\"application/x-tex\">U_x</annotation></semantics></math></span><span aria-hidden=\"true\" class=\"katex-html\"><span class=\"strut\" style=\"height:0.68333em;\"></span><span class=\"strut bottom\" style=\"height:0.83333em;vertical-align:-0.15em;\"></span><span class=\"base\"><span class=\"mord\"><span class=\"mord mathit\" style=\"margin-right:0.10903em;\">U</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.151392em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.10903em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathit mtight\">x</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"></span></span></span></span></span></span></span></span> such that the induced LRS <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mo>(</mo><msub><mi>U</mi><mi>x</mi></msub><mo separator=\"true\">,</mo><mrow><mi mathvariant=\"script\">O</mi></mrow><msub><mi mathvariant=\"normal\">∣</mi><msub><mi>U</mi><mi>x</mi></msub></msub><mo>)</mo></mrow><annotation encoding=\"application/x-tex\">(U_x, \\mathcal{O}|_{U_x})</annotation></semantics></math></span><span aria-hidden=\"true\" class=\"katex-html\"><span class=\"strut\" style=\"height:0.75em;\"></span><span class=\"strut bottom\" style=\"height:1.0001em;vertical-align:-0.2501em;\"></span><span class=\"base\"><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathit\" style=\"margin-right:0.10903em;\">U</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.151392em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.10903em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathit mtight\">x</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mord\"><span class=\"mord mathcal\" style=\"margin-right:0.02778em;\">O</span></span><span class=\"mord\"><span class=\"mord mathrm\">∣</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.32833099999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mord mathit mtight\" style=\"margin-right:0.10903em;\">U</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.16454285714285719em;\"><span style=\"top:-2.357em;margin-left:-0.10903em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mathit mtight\">x</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2501em;\"></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span> is isomorphic (as LRS) to the standard half <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">n</annotation></semantics></math></span><span aria-hidden=\"true\" class=\"katex-html\"><span class=\"strut\" style=\"height:0.43056em;\"></span><span class=\"strut bottom\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"base\"><span class=\"mord mathit\">n</span></span></span></span>-ball with the sheaf of <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><msup><mi>C</mi><mi>k</mi></msup></mrow><annotation encoding=\"application/x-tex\">C^k</annotation></semantics></math></span><span aria-hidden=\"true\" class=\"katex-html\"><span class=\"strut\" style=\"height:0.849108em;\"></span><span class=\"strut bottom\" style=\"height:0.849108em;vertical-align:0em;\"></span><span class=\"base\"><span class=\"mord\"><span class=\"mord mathit\" style=\"margin-right:0.07153em;\">C</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.849108em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathit mtight\" style=\"margin-right:0.03148em;\">k</span></span></span></span></span></span></span></span></span></span></span> functions on it.</li>\n</ul>",
        "id": 166428018,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1558680956
    },
    {
        "content": "<p>And what is the boundary then?</p>",
        "id": 166428142,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1558681092
    },
    {
        "content": "<p>The interior consists of all points that have an open neighbourhood isomorphic to the standard open <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">n</annotation></semantics></math></span><span aria-hidden=\"true\" class=\"katex-html\"><span class=\"strut\" style=\"height:0.43056em;\"></span><span class=\"strut bottom\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"base\"><span class=\"mord mathit\">n</span></span></span></span>-ball. The boundary is the complement of the interior.</p>",
        "id": 166428163,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1558681148
    },
    {
        "content": "<p>Or do you mean that you want the boundary as LRS?</p>",
        "id": 166428175,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1558681178
    },
    {
        "content": "<p>I guess you can take the induced reduced LRS structure on the closed subset.</p>",
        "id": 166428282,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1558681312
    },
    {
        "content": "<p>I mean how do you recognize the interior using only the sheaf?</p>",
        "id": 166428399,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1558681438
    },
    {
        "content": "<p>What I just said: it's the subspace of points that have a neighbourhood isomorphic to the standard open <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">n</annotation></semantics></math></span><span aria-hidden=\"true\" class=\"katex-html\"><span class=\"strut\" style=\"height:0.43056em;\"></span><span class=\"strut bottom\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"base\"><span class=\"mord mathit\">n</span></span></span></span>-ball.</p>",
        "id": 166428453,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1558681484
    },
    {
        "content": "<p>Hint: a function <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>f</mi></mrow><annotation encoding=\"application/x-tex\">f</annotation></semantics></math></span><span aria-hidden=\"true\" class=\"katex-html\"><span class=\"strut\" style=\"height:0.69444em;\"></span><span class=\"strut bottom\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"base\"><span class=\"mord mathit\" style=\"margin-right:0.10764em;\">f</span></span></span></span> on the half <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">n</annotation></semantics></math></span><span aria-hidden=\"true\" class=\"katex-html\"><span class=\"strut\" style=\"height:0.43056em;\"></span><span class=\"strut bottom\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"base\"><span class=\"mord mathit\">n</span></span></span></span>-ball is <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><msup><mi>C</mi><mi>k</mi></msup></mrow><annotation encoding=\"application/x-tex\">C^k</annotation></semantics></math></span><span aria-hidden=\"true\" class=\"katex-html\"><span class=\"strut\" style=\"height:0.849108em;\"></span><span class=\"strut bottom\" style=\"height:0.849108em;vertical-align:0em;\"></span><span class=\"base\"><span class=\"mord\"><span class=\"mord mathit\" style=\"margin-right:0.07153em;\">C</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.849108em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathit mtight\" style=\"margin-right:0.03148em;\">k</span></span></span></span></span></span></span></span></span></span></span> at <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>x</mi></mrow><annotation encoding=\"application/x-tex\">x</annotation></semantics></math></span><span aria-hidden=\"true\" class=\"katex-html\"><span class=\"strut\" style=\"height:0.43056em;\"></span><span class=\"strut bottom\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"base\"><span class=\"mord mathit\">x</span></span></span></span> is there is an open neighborhood <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>U</mi></mrow><annotation encoding=\"application/x-tex\">U</annotation></semantics></math></span><span aria-hidden=\"true\" class=\"katex-html\"><span class=\"strut\" style=\"height:0.68333em;\"></span><span class=\"strut bottom\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"base\"><span class=\"mord mathit\" style=\"margin-right:0.10903em;\">U</span></span></span></span> of <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>x</mi></mrow><annotation encoding=\"application/x-tex\">x</annotation></semantics></math></span><span aria-hidden=\"true\" class=\"katex-html\"><span class=\"strut\" style=\"height:0.43056em;\"></span><span class=\"strut bottom\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"base\"><span class=\"mord mathit\">x</span></span></span></span> in <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><msup><mi mathvariant=\"double-struck\">R</mi><mi>n</mi></msup></mrow><annotation encoding=\"application/x-tex\">\\mathbb{R}^n</annotation></semantics></math></span><span aria-hidden=\"true\" class=\"katex-html\"><span class=\"strut\" style=\"height:0.68889em;\"></span><span class=\"strut bottom\" style=\"height:0.68889em;vertical-align:0em;\"></span><span class=\"base\"><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathbb\">R</span></span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.664392em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathit mtight\">n</span></span></span></span></span></span></span></span></span></span></span> and a function from <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>U</mi></mrow><annotation encoding=\"application/x-tex\">U</annotation></semantics></math></span><span aria-hidden=\"true\" class=\"katex-html\"><span class=\"strut\" style=\"height:0.68333em;\"></span><span class=\"strut bottom\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"base\"><span class=\"mord mathit\" style=\"margin-right:0.10903em;\">U</span></span></span></span> to <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mrow><mi mathvariant=\"double-struck\">R</mi></mrow></mrow><annotation encoding=\"application/x-tex\">\\mathbb{R}</annotation></semantics></math></span><span aria-hidden=\"true\" class=\"katex-html\"><span class=\"strut\" style=\"height:0.68889em;\"></span><span class=\"strut bottom\" style=\"height:0.68889em;vertical-align:0em;\"></span><span class=\"base\"><span class=\"mord\"><span class=\"mord mathbb\">R</span></span></span></span></span> which restricts to <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>f</mi></mrow><annotation encoding=\"application/x-tex\">f</annotation></semantics></math></span><span aria-hidden=\"true\" class=\"katex-html\"><span class=\"strut\" style=\"height:0.69444em;\"></span><span class=\"strut bottom\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"base\"><span class=\"mord mathit\" style=\"margin-right:0.10764em;\">f</span></span></span></span></p>",
        "id": 166428481,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1558681554
    },
    {
        "content": "<p>What you define is everything</p>",
        "id": 166428537,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1558681575
    },
    {
        "content": "<p>I think</p>",
        "id": 166428546,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1558681593
    },
    {
        "content": "<p>Hmm, maybe you're saved by topology</p>",
        "id": 166428586,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1558681649
    },
    {
        "content": "<blockquote>\n<p>Hmm, maybe you're saved by topology</p>\n</blockquote>\n<p>Yup, that was my guess.</p>",
        "id": 166428598,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1558681671
    },
    {
        "content": "<p>The sheaf is useless but the half ball is not homeomorphic to a full ball</p>",
        "id": 166428601,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1558681681
    },
    {
        "content": "<p>That won't save you for manifolds with corners</p>",
        "id": 166428655,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1558681696
    },
    {
        "content": "<p>What is a manifold with corners?</p>",
        "id": 166428660,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1558681715
    },
    {
        "content": "<p>Locally modeled on a product of lines and closed half lines</p>",
        "id": 166428666,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1558681739
    },
    {
        "content": "<p>Eg. <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mo>[</mo><mn>0</mn><mo separator=\"true\">,</mo><mn>1</mn><msup><mo>]</mo><mn>2</mn></msup></mrow><annotation encoding=\"application/x-tex\">[0, 1]^2</annotation></semantics></math></span><span aria-hidden=\"true\" class=\"katex-html\"><span class=\"strut\" style=\"height:0.8141079999999999em;\"></span><span class=\"strut bottom\" style=\"height:1.064108em;vertical-align:-0.25em;\"></span><span class=\"base\"><span class=\"mopen\">[</span><span class=\"mord mathrm\">0</span><span class=\"mpunct\">,</span><span class=\"mord mathrm\">1</span><span class=\"mclose\"><span class=\"mclose\">]</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathrm mtight\">2</span></span></span></span></span></span></span></span></span></span></span></p>",
        "id": 166428680,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1558681763
    },
    {
        "content": "<blockquote>\n<p>Locally modeled on a product of lines and closed half lines</p>\n</blockquote>\n<p>This sounds suspiciously close to a LRS definition.</p>",
        "id": 166428691,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1558681786
    },
    {
        "content": "<p>The corners are topologically impossible to distinguish from the codimension 1 strata of the boundary, and functions won't help you</p>",
        "id": 166428740,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1558681807
    },
    {
        "content": "<p>This sounds suspiciously close to an atlas deifnition</p>",
        "id": 166428752,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1558681836
    },
    {
        "content": "<p>I mean that:<br>\n1. Points of an open set <code>U</code> biject with homomorphisms <code>C^∞(U,ℝ) → ℝ</code> of <code>ℝ</code>-algebras<br>\n2. Vector  bundles are the same as locally free modules over the structure sheaf.  Fibres can be recovered by tensoring with characters as in 1.<br>\n3. Vector fields are <code>ℝ</code>-linear derivations, and individual tangent vectors are derivations with respect to a character as in 1.<br>\n4. The module of one-form fields is dual to the module of vector fields.  The full de Rham complex is the exterior algebra of the one-form fields over the structure sheaf.<br>\n5. Connections on a vector bundle are actions of the Lie algebra of vector fields on the module of sections<br>\nAnd so on.</p>\n<p>You can make all these definitions in a fairly straightforward and uniform way for any <code>ℝ</code>-algebra, and thus for sheaves of <code>ℝ</code>-algebras.  You can prove properties for the sheaf of smooth functions on <code>ℝⁿ</code>, and deduce that they also hold for any ringed space that is locally isomorphic to that, which is the definition of a manifold.</p>",
        "id": 166428753,
        "sender_full_name": "Neil Strickland",
        "timestamp": 1558681838
    },
    {
        "content": "<blockquote>\n<p>The corners are topologically impossible to distinguish from the codimension 1 strata of the boundary, and functions won't help you</p>\n</blockquote>\n<p>So we define it as a stratified LRS...</p>",
        "id": 166428783,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1558681902
    },
    {
        "content": "<p>It seems to me that the atlas definition also needs extra data. The strata are part of the data, right?</p>",
        "id": 166428851,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1558681984
    },
    {
        "content": "<p>No they are not</p>",
        "id": 166428855,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1558681994
    },
    {
        "content": "<p>Hmm, ok</p>",
        "id": 166428858,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1558682010
    },
    {
        "content": "<p>A diffeomorphism won't send a half plane to a quarter of plane</p>",
        "id": 166428876,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1558682036
    },
    {
        "content": "<p>And of course none of this will bring you <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mo>(</mo><mi>G</mi><mo separator=\"true\">,</mo><mi>X</mi><mo>)</mo></mrow><annotation encoding=\"application/x-tex\">(G, X)</annotation></semantics></math></span><span aria-hidden=\"true\" class=\"katex-html\"><span class=\"strut\" style=\"height:0.75em;\"></span><span class=\"strut bottom\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"base\"><span class=\"mopen\">(</span><span class=\"mord mathit\">G</span><span class=\"mpunct\">,</span><span class=\"mord mathit\" style=\"margin-right:0.07847em;\">X</span><span class=\"mclose\">)</span></span></span></span>-structures (for instance manifolds equipped with an atlas whose coordinate changes are in a given subgroup of <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>G</mi><mi>L</mi><mo>(</mo><mi>n</mi><mo separator=\"true\">,</mo><mrow><mi mathvariant=\"double-struck\">R</mi></mrow><mo>)</mo></mrow><annotation encoding=\"application/x-tex\">GL(n, \\mathbb{R})</annotation></semantics></math></span><span aria-hidden=\"true\" class=\"katex-html\"><span class=\"strut\" style=\"height:0.75em;\"></span><span class=\"strut bottom\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"base\"><span class=\"mord mathit\">G</span><span class=\"mord mathit\">L</span><span class=\"mopen\">(</span><span class=\"mord mathit\">n</span><span class=\"mpunct\">,</span><span class=\"mord\"><span class=\"mord mathbb\">R</span></span><span class=\"mclose\">)</span></span></span></span>)</p>",
        "id": 166428995,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1558682158
    },
    {
        "content": "<p>Neil, I'm sure you know this is all a joke. How can you hope to prove anything without reducing to the usual definitions? For instance, how to you equip <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>T</mi><mi>M</mi></mrow><annotation encoding=\"application/x-tex\">TM</annotation></semantics></math></span><span aria-hidden=\"true\" class=\"katex-html\"><span class=\"strut\" style=\"height:0.68333em;\"></span><span class=\"strut bottom\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"base\"><span class=\"mord mathit\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord mathit\" style=\"margin-right:0.10903em;\">M</span></span></span></span> with a manifold structure and prove <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>T</mi><mi>M</mi><mo>→</mo><mi>M</mi></mrow><annotation encoding=\"application/x-tex\">TM \\to M</annotation></semantics></math></span><span aria-hidden=\"true\" class=\"katex-html\"><span class=\"strut\" style=\"height:0.68333em;\"></span><span class=\"strut bottom\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"base\"><span class=\"mord mathit\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord mathit\" style=\"margin-right:0.10903em;\">M</span><span class=\"mrel\">→</span><span class=\"mord mathit\" style=\"margin-right:0.10903em;\">M</span></span></span></span> is a submersion?</p>",
        "id": 166429092,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1558682269
    },
    {
        "content": "<p>Anyway, I should go and mark exams instead of feeding trolls</p>",
        "id": 166429163,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1558682342
    },
    {
        "content": "<p>You certainly need to reduce things to properties of smooth functions on <code>ℝⁿ</code>.  The only question is how to organise reduction to local properties.  Standard books on differential geometry typically do not do this in a very thorough way that would be suitable for formalisation.  If you try to fill in the details, you will end up recreating a lot of sheaf-theoretic stuff.  In my opinion, it would be more efficient to build a decent library of sheaf theory, which will be needed for other reasons anyway, and use that explicitly.</p>",
        "id": 166429686,
        "sender_full_name": "Neil Strickland",
        "timestamp": 1558682923
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"110038\">@Kevin Buzzard</span> I saw your MathOverflow post on manifolds did not have an answer, and coincidentally I was browsing through the archive of formal proof today and saw this: <a href=\"https://www.isa-afp.org/entries/Smooth_Manifolds.html\" target=\"_blank\" title=\"https://www.isa-afp.org/entries/Smooth_Manifolds.html\">https://www.isa-afp.org/entries/Smooth_Manifolds.html</a>. I have not had the time to read the paper so I do not know how much it overlaps with current efforts, but I thought I'd mention it.</p>",
        "id": 171727843,
        "sender_full_name": "Andrew Ashworth",
        "timestamp": 1564088708
    },
    {
        "content": "<p>Hah, in the paper the authors wrote (<a href=\"http://home.in.tum.de/~immler/documents/immler2018manifolds.pdf\" target=\"_blank\" title=\"http://home.in.tum.de/~immler/documents/immler2018manifolds.pdf\">http://home.in.tum.de/~immler/documents/immler2018manifolds.pdf</a>) they complain about simple type theory and ambiguous math textbooks.</p>",
        "id": 171728528,
        "sender_full_name": "Andrew Ashworth",
        "timestamp": 1564089304
    },
    {
        "content": "<p>Post a response!</p>",
        "id": 171728815,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1564089619
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"110050\">@Sebastien Gouezel</span> How far are we from defining a manifold structure on projective space?</p>\n<ol>\n<li>Define projective space as a type. (Can be done for any field. Should later be connected to rational points of a scheme.)</li>\n<li>Setup the coordinate charts</li>\n<li>In the case that the base field is <code>ℝ</code> or <code>ℂ</code>, show that the coordinate changes belong to suitable groupoids.</li>\n<li>Done?</li>\n</ol>",
        "id": 178952515,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1571924586
    },
    {
        "content": "<p>Yes, that's it. All of this should be pretty straightforward, at least if you use the naive version of projective space, i.e., quotient a finite dimensional vector space minus 0 by scalar multiplication. Even more straightforward would be to do it over the vector space <code>fin (n+1) -&gt; K</code>, where one could use the standard <code>n+1</code> affine charts.</p>",
        "id": 178958686,
        "sender_full_name": "Sebastien Gouezel",
        "timestamp": 1571927991
    },
    {
        "content": "<p>Yes, that's what I was thinking of.</p>",
        "id": 178958821,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1571928074
    },
    {
        "content": "<p>Are you working on things like open submanifolds, submersions, closed submanifolds defined by a regular value of a structomorphism, etc...?</p>",
        "id": 178958937,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1571928146
    },
    {
        "content": "<p>Basically, I think I'm asking: what's the table of contents for your future PRs?</p>",
        "id": 178959145,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1571928276
    },
    {
        "content": "<p>KP^n is a special case of Gr(n,k)</p>",
        "id": 178960384,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1571928995
    },
    {
        "content": "<p>There are too many special cases here...</p>",
        "id": 178960557,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1571929087
    },
    {
        "content": "<p>It's also a special case of a weighted projective space</p>",
        "id": 178960576,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1571929105
    },
    {
        "content": "<p>it's also a special case of a projective variety</p>",
        "id": 178962904,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1571930347
    },
    {
        "content": "<p>Come on! This is about manifolds. It's clearly a special case of a symmetric space</p>",
        "id": 178963076,
        "sender_full_name": "Reid Barton",
        "timestamp": 1571930438
    },
    {
        "content": "<p>Exactly... and my reflex is therefore to not make any examples at all... They are always to specific</p>",
        "id": 178963387,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1571930652
    },
    {
        "content": "<p>But I think we need examples at some point.</p>",
        "id": 178963403,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1571930671
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/lean-perfectoid-spaces/tree/master/src/examples\" target=\"_blank\" title=\"https://github.com/leanprover-community/lean-perfectoid-spaces/tree/master/src/examples\">https://github.com/leanprover-community/lean-perfectoid-spaces/tree/master/src/examples</a></p>",
        "id": 178974034,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1571937003
    },
    {
        "content": "<p>I think Kenny at some point tried to make projective n-space as a scheme and failed---maybe it was even projective 1-space? We had to glue schemes, which meant we had to glue sheaves, and then we started down some rabbithole...</p>",
        "id": 178974172,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1571937073
    },
    {
        "content": "<p>yeah I became lost in definition unfolding</p>",
        "id": 178974275,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1571937132
    },
    {
        "content": "<p>I am a little bit tired of definitions, so I think I will start proving a theorem, and see along the way which definitions I need. I would like to prove that an  <code>n</code>-dimensional real manifold embeds into <code>R^{2n+1}</code>. This requires a partition of unity to embed it first in <code>R^N</code> for some large <code>N</code>, and then Sard theorem to decrease progressively the dimension by projecting along a typical direction and keeping an embedding. Given the amount of prerequisites, I expect this to be a long-term project :)</p>",
        "id": 178977593,
        "sender_full_name": "Sebastien Gouezel",
        "timestamp": 1571939020
    },
    {
        "content": "<p>Is the <code>2n+1</code> \"useful\"? Of course it is nice to know. But isn't the <code>N</code>-version good enough for all practical purposes? I am really quite ignorant about these things...</p>",
        "id": 178982654,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1571941946
    },
    {
        "content": "<p>Another nice long term goal (from my POV) would be Chow's theorem (closed analytic in P^n =&gt; algebraic). But maybe we should do some complex analysis first <span aria-label=\"lol\" class=\"emoji emoji-1f606\" role=\"img\" title=\"lol\">:lol:</span></p>",
        "id": 178982756,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1571941995
    },
    {
        "content": "<p>The <code>2n+1</code> is nice, although not optimal: one can do <code>2n</code>, and even <code>2n-1</code> when <code>n</code> is not a power of two (but this is much more difficult). But what is really interesting is the proof, as it involves several tools that are really important.</p>",
        "id": 178983722,
        "sender_full_name": "Sebastien Gouezel",
        "timestamp": 1571942478
    },
    {
        "content": "<p>Just for the fun: do you know the smallest dimension <code>N(n)</code> such that any <code>n</code>-dimensional manifold can be immersed in <code>R^N</code>?</p>",
        "id": 178988773,
        "sender_full_name": "Sebastien Gouezel",
        "timestamp": 1571945707
    },
    {
        "content": "<p>It is <code>N(n) = 2n-a(n)</code>, where <code>a(n)</code> is the number of ones in the base-2 expansion of <code>n</code>...</p>",
        "id": 178988859,
        "sender_full_name": "Sebastien Gouezel",
        "timestamp": 1571945768
    },
    {
        "content": "<p>... lol, nice.</p>",
        "id": 178989136,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1571945948
    },
    {
        "content": "<p>do you know a 3D manifold that doesn't fit in 4D?</p>",
        "id": 179010764,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1571962334
    },
    {
        "content": "<p>oh, I guess that's covered by your more precise statement about <code>2n-a(n)</code></p>",
        "id": 179010801,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1571962428
    },
    {
        "content": "<blockquote>\n<p>It is <code>N(n) = 2n-a(n)</code>, where <code>a(n)</code> is the number of ones in the base-2 expansion of <code>n</code>...</p>\n</blockquote>\n<p>I don't see how you can immerse S^1 in R :P</p>",
        "id": 179027452,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1571988109
    },
    {
        "content": "<p>I could edit my message to add the assumption <code>n &gt; 1</code> (I wish we could also do that for published papers :), but it is more honest to add it just now. So, standing assumption: <code>n &gt; 1</code>. And I just checked the paper, there is also a compactness assumption by the way.</p>",
        "id": 179034636,
        "sender_full_name": "Sebastien Gouezel",
        "timestamp": 1571995543
    },
    {
        "content": "<p>A similar thing happens for proper holomorphic embedding of Stein manifolds (i.e. complex manifolds with sufficiently many nontrivial C-valued functions, more or less) into affine C^n. The case of open Riemann surfaces is a special case where we don't know if we can drop one more dimension in the target to match the uniform formula that works for all dimensions \\geq 2. We know we can put them in C^3,  the formula suggests C^2, though there are no counterexamples known.</p>",
        "id": 179189676,
        "sender_full_name": "David Michael Roberts",
        "timestamp": 1572214893
    },
    {
        "content": "<blockquote>\n<p>I am a little bit tired of definitions, so I think I will start proving a theorem, and see along the way which definitions I need. I would like to prove that an  <code>n</code>-dimensional real manifold embeds into <code>R^{2n+1}</code>. This requires a partition of unity to embed it first in <code>R^N</code> for some large <code>N</code>, and then Sard theorem to decrease progressively the dimension by projecting along a typical direction and keeping an embedding. Given the amount of prerequisites, I expect this to be a long-term project :)</p>\n</blockquote>\n<p><span class=\"user-mention\" data-user-id=\"110050\">@Sebastien Gouezel</span> It just occurred to me that we are also getting towards a situation where we can <em>state</em> some form of Stokes' theorem. Does anyone know of a formalization of Stokes' theorem? The best I could find was an MSc project in Edinburgh that started working on it: <a href=\"http://citeseerx.ist.psu.edu/viewdoc/download;jsessionid=E6816A068653DFB139039B8F47C180AC?doi=10.1.1.64.7036&amp;rep=rep1&amp;type=pdf\" target=\"_blank\" title=\"http://citeseerx.ist.psu.edu/viewdoc/download;jsessionid=E6816A068653DFB139039B8F47C180AC?doi=10.1.1.64.7036&amp;rep=rep1&amp;type=pdf\">http://citeseerx.ist.psu.edu/viewdoc/download;jsessionid=E6816A068653DFB139039B8F47C180AC?doi=10.1.1.64.7036&amp;rep=rep1&amp;type=pdf</a> But I don't think they actually managed to get to Stokes' theorem.</p>",
        "id": 183135477,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1576052159
    },
    {
        "content": "<p>You have <a href=\"https://www.isa-afp.org/entries/Green.html\" target=\"_blank\" title=\"https://www.isa-afp.org/entries/Green.html\">https://www.isa-afp.org/entries/Green.html</a> for the 2-dimensional version, but I don't know of a general version. I think we are still pretty far in Lean: first one would need material of linear algebra on alternating forms, and then define differential forms and their integrals. Once one can state the theorem, I think proving it will not be hard (it just boils down to: use a partition of unity to reduce it to the half-space in <code>R^d</code>, and then integrate by parts in the vertical direction).</p>",
        "id": 183137524,
        "sender_full_name": "Sebastien Gouezel",
        "timestamp": 1576054245
    },
    {
        "content": "<p>I agree that we aren't ready to do it right away. But it might be a nice goal to work towards</p>",
        "id": 183137765,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1576054515
    },
    {
        "content": "<p>It seems that you are currently moving towards partition of unity</p>",
        "id": 183137789,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1576054542
    },
    {
        "content": "<p>It's definitely a nice middle-term goal, yes.</p>",
        "id": 183139166,
        "sender_full_name": "Sebastien Gouezel",
        "timestamp": 1576055872
    }
]