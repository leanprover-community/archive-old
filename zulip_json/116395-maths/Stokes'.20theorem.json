[
    {
        "content": "<p>Occasionally I run into people who say \"what is all this fuss about getting all of an undergraduate(UG) curriculum into Lean, basically this was already done by Mizar and pretty much all of it is in Coq\". I would always forcefully argue that this was not the case -- just because there is a bunch of UG maths in these systems does not mean we have a full UG curriculum. My standard counterexample was finiteness of class group of a number field, and in fact I could even twist the knife by observing that even though some of these provers have been around for 30 or 40 years, none of them even had the <em>definition</em> of the class group of a number field, something which was in certain cases known to Gauss.</p>\n<p>But I see in my ArXiv daily posting today that <a href=\"https://arxiv.org/abs/2102.02600\">I am now out of date</a> -- congratulations to Anne, Sander, Ashvni and Filippo, who have proved the class group of a number field is finite in Lean. At Imperial we also teach the result about finite generation of the unit group (this is a far-reaching generalisation of the theory of the Pell equation, at least if you state precisely how many generators the unit group has), but this result certainly looks very accessible now. My other standard counterexample was insolvability of the quintic, but this is now done in Coq by Cyril and Assia and others, and people who follow the <a class=\"stream\" data-stream-id=\"240192\" href=\"/#narrow/stream/240192-Berkeley-Lean-Seminar\">#Berkeley Lean Seminar</a> stream will know that they're well on the way to doing this in Lean too.</p>\n<p>So I need a new taunt, and I'm going for Stokes' theorem, in the form I learnt it in my final year UG course, which was for smooth manifolds with boundary -- the \"Stokes-Cartan\" or \"generalized Stokes theorem\" <a href=\"https://en.wikipedia.org/wiki/Stokes%27_theorem#Formulation_for_smooth_manifolds_with_boundary\">here</a>. </p>\n<p>How far are we from having this in Lean? And is this already done, or being worked on, in other theorem provers?</p>\n<p>Once this is done, we are perhaps getting to the point where perhaps the union of all theorem provers really does look like it covers the vast majority of an undergraduate pure mathematics degree (of course we can then start talking about MSc's...).</p>",
        "id": 225338723,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1612550268
    },
    {
        "content": "<p>Complex analysis is covered in isabelle and HOL Light but I don't know how comprehensive it is; that might be another example</p>",
        "id": 225339191,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1612550540
    },
    {
        "content": "<p>I am just assuming that all complex analysis is done in these HOL systems, however my impression is that their ability to work with complex manifolds is not good, so perhaps another candidate theorem is the statement that a non-constant map between two compact Riemann surfaces has a degree, a weak form of which would be the statement that there exists some positive integer d such that away from a finite set in the target, the pre-image of a point in the target is d points in the source.</p>",
        "id": 225339698,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1612550833
    },
    {
        "content": "<p>what undergraduate learns that though?</p>",
        "id": 225339898,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1612550928
    },
    {
        "content": "<p>I learnt that in the 3rd year Riemann surfaces course</p>",
        "id": 225339922,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1612550944
    },
    {
        "content": "<p>I suppose riemann surfaces are covered in a complex analysis course?</p>",
        "id": 225339939,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1612550953
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"246273\">@Bhavik Mehta</span> is this still taught in Cambridge, do you know?</p>",
        "id": 225339958,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1612550970
    },
    {
        "content": "<p>My university didn't have anything more specialized than \"complex analysis\"</p>",
        "id": 225339996,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1612551000
    },
    {
        "content": "<p>for undergrads, at least</p>",
        "id": 225340058,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1612551012
    },
    {
        "content": "<p>Yeah, Riemann surfaces are a third-year undergraduate course in Cambridge</p>",
        "id": 225340140,
        "sender_full_name": "Bhavik Mehta",
        "timestamp": 1612551062
    },
    {
        "content": "<p>UK universities might be more specialised, because they are catering for people who were only doing maths and two other subjects since the age of 16 and are only doing maths courses from 18 onwards. The UK UG system is more high-powered than the US system in general. On the other hand the US PhD system is much better than the UK system, where funding runs out after 3.5 years and you're expected to basically have a thesis by then. In the US I think the average is more like 5 years. In the UK you start with an advisor on day 1.</p>",
        "id": 225340206,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1612551115
    },
    {
        "content": "<p>I saw the degree of maps between Riemann surfaces before finishing my BSc</p>",
        "id": 225342460,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1612552134
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"214703\">@Yury G. Kudryashov</span> has a baby version of Stokes' theorem, not yet PR'd.  (It's for boxes in <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi mathvariant=\"double-struck\">R</mi><mi>n</mi></msup></mrow><annotation encoding=\"application/x-tex\">\\mathbb{R}^n</annotation></semantics></math></span><span aria-hidden=\"true\" class=\"katex-html\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68889em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathbb\">R</span></span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.664392em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span></span></span></span></span></span></span></span>.). And in Isabelle they have Green's theorem, for some kind of domain (C^1 or piecewise C^1?) in the plane.</p>",
        "id": 225356121,
        "sender_full_name": "Heather Macbeth",
        "timestamp": 1612558920
    },
    {
        "content": "<p>But for \"proper\" Stokes' theorem, on manifolds, we'll need, among other things, a fully functioning library for tensors on manifolds.  At the moment we don't even have the definition of a vector bundle ... unsurprisingly, it's not easy!</p>",
        "id": 225356364,
        "sender_full_name": "Heather Macbeth",
        "timestamp": 1612559029
    },
    {
        "content": "<p>Yes I'm very very well aware that it's not at all easy. This is why it's a good challenge. I know we have Patrick's formalised definition of an UG degree (which is a very precise list of things showing up in one specific degree taught in France) but if you're prepared to use the more flexible one of \"whatever someone in Cambridge or Harvard or Princeton or any one of 100 other decent institutions teach in the first three or four years\" (which is I think a definition that most people in maths departments would agree was a reasonable interpretation of \"an undergraduate degree\") then we can see that there are still a few serious challenges left. Good challenges drive the area forwards of course.</p>",
        "id": 225357890,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1612559310
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"260507\">Heather Macbeth</span> <a href=\"#narrow/stream/116395-maths/topic/Stokes'.20theorem/near/225356364\">said</a>:</p>\n<blockquote>\n<p>But for \"proper\" Stokes' theorem, on manifolds, we'll need, among other things, a fully functioning library for tensors on manifolds.  At the moment we don't even have the definition of a vector bundle ... unsurprisingly, it's not easy!</p>\n</blockquote>\n<p>I thought there was a PR for vector bundles somewhere?</p>",
        "id": 225372774,
        "sender_full_name": "Adam Topaz",
        "timestamp": 1612568716
    },
    {
        "content": "<p>I remember discussing this.</p>",
        "id": 225372783,
        "sender_full_name": "Adam Topaz",
        "timestamp": 1612568720
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib/issues/4658\">#4658</a> looks like it hasn't been touched in a little while. (and it's for topological vector bundles)</p>",
        "id": 225372881,
        "sender_full_name": "Adam Topaz",
        "timestamp": 1612568808
    },
    {
        "content": "<p>I'm going to rewrite my Stokes theorem to require only integrability instead of continuity, then PR it.</p>",
        "id": 225379719,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1612576226
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib/issues/4658\">#4658</a> looks like it has a bunch of typeclass relaxations for <code>dual</code> that should be cherry picked</p>",
        "id": 225397512,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1612600084
    },
    {
        "content": "<p>I bet we assumed continuity in my UG course but unfortunately all the notes are in my office and we're in lockdown in the UK...</p>",
        "id": 225399589,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1612601852
    },
    {
        "content": "<p>Thanks Kevin! You mention Dirichlet's Units Theorem: indeed, we thought about this as a possible future project, we mention this in the closing remarks. We will see...</p>",
        "id": 225422046,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1612632894
    },
    {
        "content": "<p>Hi, I've finally formalized a generalized version of Stokes' theorem. Sorry <span class=\"user-mention\" data-user-id=\"110050\">@Sebastien Gouezel</span> and <span class=\"user-mention\" data-user-id=\"110031\">@Patrick Massot</span>, the proof is for a kind of Henstock integral. The reason of choosing this integral is that this way we get the following statement: if <code>f : ι → (ι → ℝ) → E</code> is a family of functions differentiable on a box <code>[l, c]</code> with derivatives <code>f' i : (ι → ℝ) →L[ℝ] E</code>, then <code>λ x : ι → ℝ, ∑ i, f' i x</code> is Henstock integrable on <code>[l, c]</code> with integral equal to the sum of integrals of <code>f</code> over faces of <code>[l, u]</code>.</p>",
        "id": 251071156,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1630172801
    },
    {
        "content": "<p>I'm going to prove that in case of <code>[second_countable_topology E]</code> and a Bochner integrable <code>f</code>, it is Henstock integrable with the same integral, then we'll have Stokes' theorem for the Bochner integral.</p>",
        "id": 251071203,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1630172871
    },
    {
        "content": "<p>The code is in <a href=\"https://github.com/leanprover-community/mathlib/tree/stokes-new\">branch#stokes-new</a>. I'll split it into PRs tonight.</p>",
        "id": 251071253,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1630172893
    },
    {
        "content": "<p>We really need an emoji for integrals (-;</p>",
        "id": 251071285,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1630172940
    },
    {
        "content": "<p>Ouch, <img alt=\":bourbaki:\" class=\"emoji\" src=\"https://zulip-avatars.s3.amazonaws.com/3121/emoji/images/17547.png\" title=\"bourbaki\"> has quite a double meaning if you use it like that <span aria-label=\"oops\" class=\"emoji emoji-1f643\" role=\"img\" title=\"oops\">:oops:</span> <span aria-label=\"see no evil\" class=\"emoji emoji-1f648\" role=\"img\" title=\"see no evil\">:see_no_evil:</span> <span aria-label=\"rofl\" class=\"emoji emoji-1f923\" role=\"img\" title=\"rofl\">:rofl:</span></p>",
        "id": 251071330,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1630172991
    },
    {
        "content": "<p>This is great news! Hopefully this will unlock many things, especially complex analysis whose continuing absence is more and more embarassing.</p>",
        "id": 251074974,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1630176882
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"110038\">@Kevin Buzzard</span> <span class=\"user-mention\" data-user-id=\"260507\">@Heather Macbeth</span>  I'm sorry it took much longer than I expected.</p>",
        "id": 251079542,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1630181765
    },
    {
        "content": "<p>Lint catches lots of missing docstrings and a few unused <code>[fintype ι]</code> arguments.</p>",
        "id": 251084013,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1630186615
    },
    {
        "content": "<p>BTW, I need a name for</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kd\">def</span> <span class=\"n\">name_me</span> <span class=\"o\">{</span><span class=\"n\">ι</span> <span class=\"n\">α</span> <span class=\"o\">:</span> <span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span> <span class=\"o\">(</span><span class=\"n\">i</span> <span class=\"o\">:</span> <span class=\"n\">ι</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">x</span> <span class=\"o\">:</span> <span class=\"n\">α</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">f</span> <span class=\"o\">:</span> <span class=\"o\">({</span><span class=\"n\">i</span><span class=\"o\">}</span><span class=\"bp\">ᶜ</span> <span class=\"o\">:</span> <span class=\"n\">set</span> <span class=\"n\">ι</span><span class=\"o\">)</span> <span class=\"bp\">→</span> <span class=\"n\">α</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"n\">ι</span> <span class=\"bp\">→</span> <span class=\"n\">α</span> <span class=\"o\">:=</span>\n<span class=\"bp\">λ</span> <span class=\"n\">j</span><span class=\"o\">,</span> <span class=\"k\">if</span> <span class=\"n\">h</span> <span class=\"o\">:</span> <span class=\"n\">j</span> <span class=\"bp\">=</span> <span class=\"n\">i</span> <span class=\"k\">then</span> <span class=\"n\">x</span> <span class=\"k\">else</span> <span class=\"n\">f</span> <span class=\"o\">⟨</span><span class=\"n\">j</span><span class=\"o\">,</span> <span class=\"n\">h</span><span class=\"o\">⟩</span>\n</code></pre></div>\n<p>or its <code>function.update</code>-style dependent version.</p>",
        "id": 251099262,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1630204774
    },
    {
        "content": "<p>Directly related question: for <code>p : ι → Prop</code> do we already have in the library a way to break <code>ι → α</code> as a product, i.e.,</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code> <span class=\"o\">({</span><span class=\"n\">x</span> <span class=\"bp\">//</span> <span class=\"n\">p</span> <span class=\"n\">x</span><span class=\"o\">}</span> <span class=\"bp\">→</span> <span class=\"n\">α</span><span class=\"o\">)</span> <span class=\"bp\">×</span> <span class=\"o\">({</span><span class=\"n\">x</span> <span class=\"bp\">//</span> <span class=\"bp\">¬</span> <span class=\"n\">p</span> <span class=\"n\">x</span><span class=\"o\">}</span> <span class=\"bp\">→</span> <span class=\"n\">α</span><span class=\"o\">)</span> <span class=\"bp\">≃</span> <span class=\"o\">(</span><span class=\"n\">ι</span> <span class=\"bp\">→</span> <span class=\"n\">α</span><span class=\"o\">)</span>\n</code></pre></div>\n<p>?</p>",
        "id": 251112597,
        "sender_full_name": "Sebastien Gouezel",
        "timestamp": 1630221062
    },
    {
        "content": "<p>I think that will exist as two separate equivs</p>",
        "id": 251112625,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1630221104
    },
    {
        "content": "<p>one to split <code>(A -&gt; C) x (B -&gt; C) ~= (A + B -&gt; C)</code> and one for <code>{x // p x} + {x // ¬ p x} ~= ι</code></p>",
        "id": 251112687,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1630221147
    },
    {
        "content": "<p><a href=\"https://leanprover-community.github.io/mathlib_docs/find/equiv.sum_compl\">docs#equiv.sum_compl</a> and <a href=\"https://leanprover-community.github.io/mathlib_docs/find/equiv.sum_arrow_equiv_prod_arrow\">docs#equiv.sum_arrow_equiv_prod_arrow</a></p>",
        "id": 251112795,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1630221288
    },
    {
        "content": "<p>Thanks!</p>",
        "id": 251112974,
        "sender_full_name": "Sebastien Gouezel",
        "timestamp": 1630221493
    },
    {
        "content": "<p>As the name for Yury: <code>function.extend_compl</code>, and have only the dependent version?</p>",
        "id": 251115046,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1630223915
    },
    {
        "content": "<p>This is great!</p>",
        "id": 251119141,
        "sender_full_name": "Chris Birkbeck",
        "timestamp": 1630228442
    },
    {
        "content": "<p>Congratulations <span class=\"user-mention\" data-user-id=\"214703\">@Yury G. Kudryashov</span>!  It will be great to have this in mathlib.</p>\n<p><span class=\"user-mention silent\" data-user-id=\"214703\">Yury G. Kudryashov</span> <a href=\"#narrow/stream/116395-maths/topic/Stokes'.20theorem/near/251071203\">said</a>:</p>\n<blockquote>\n<p>I'm going to prove that in case of <code>[second_countable_topology E]</code> and a Bochner integrable <code>f</code>, it is Henstock integrable with the same integral, then we'll have Stokes' theorem for the Bochner integral.</p>\n</blockquote>\n<p>Looking ahead, do we want a version of this theorem which applies to an arbitrary finite-dimensional real vector space (equipped with say Haar measure), generalized from your current version which applies to <code>ι → ℝ</code>?</p>\n<p>Also, I wonder what the right generalization of trace/divergence is in that context.  We would like the trace of a real linear map from <code>ι → ℝ</code> to <code>ι → E</code> to be an element of <code>E</code> (more generally, the divergence of a differentiable function from <code>ι → ℝ</code> to <code>ι → E</code>); that's how things work in Yury's current version of Stokes.  We would also like the trace of a real linear map from <code>V</code> to <code>V</code> (more generally, the divergence of a differentiable function from <code>V</code> to <code>V</code>) to live in <code>ℝ</code>.</p>\n<p>Mathematically, one would say:  it makes sense to consider the trace of a real linear map from <code>A</code> to <code>B</code> to live in <code>C</code>, if <code>B</code> is canonically isomorphic to <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>A</mi><mo>⊗</mo><mi>C</mi></mrow><annotation encoding=\"application/x-tex\">A\\otimes C</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.76666em;vertical-align:-0.08333em;\"></span><span class=\"mord mathnormal\">A</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">⊗</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">C</span></span></span></span>.  But this \"canonically isomorphic\" is not very Lean-friendly.</p>",
        "id": 251385509,
        "sender_full_name": "Heather Macbeth",
        "timestamp": 1630416934
    },
    {
        "content": "<p>I've been whishing for an <code>is_tensor_product R M N P</code> before, which should say something like: <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>M</mi><msub><mo>⊗</mo><mi>R</mi></msub><mi>N</mi><mo><mover><mo><mo>≅</mo></mo><mtext>can.</mtext></mover></mo><mi>P</mi></mrow><annotation encoding=\"application/x-tex\">M \\otimes_R N \\stackrel{\\text{can.}}{\\cong} P</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.83333em;vertical-align:-0.15em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">M</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\"><span class=\"mbin\">⊗</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.32833099999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.00773em;\">R</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.1903920000000001em;vertical-align:-0.055499999999999994em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">N</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\"><span class=\"mop op-limits\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.1348920000000002em;\"><span style=\"top:-2.9445em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span><span class=\"mop\">≅</span></span></span><span style=\"top:-3.7335000000000003em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord text mtight\"><span class=\"mord mtight\">can.</span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.055499999999999994em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">P</span></span></span></span></p>",
        "id": 251388198,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1630417958
    },
    {
        "content": "<p>Ah!  I did think of this but wondered if it would be too baroque.  Maybe it's what we need!</p>",
        "id": 251388269,
        "sender_full_name": "Heather Macbeth",
        "timestamp": 1630417992
    },
    {
        "content": "<p>Do you have other use cases in mind, Johan?</p>",
        "id": 251388344,
        "sender_full_name": "Heather Macbeth",
        "timestamp": 1630418022
    },
    {
        "content": "<p><code>is_tensor_product R (polynomial R) A (polynomial A)</code></p>",
        "id": 251388390,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1630418042
    },
    {
        "content": "<p>and things like that</p>",
        "id": 251388432,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1630418046
    },
    {
        "content": "<p>it would be good if we can make sure that it works for both modules and algebras</p>",
        "id": 251388496,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1630418077
    },
    {
        "content": "<p>For that matter, I have been wondering if it would be useful to have <code>is_dual R M N</code>, so that the double dual of a finite-dimensional vector space can be considered to be itself.</p>",
        "id": 251388549,
        "sender_full_name": "Heather Macbeth",
        "timestamp": 1630418100
    },
    {
        "content": "<p>But I'm not sure if that is possible. Because saying that <code>P</code> is canonically isomorphic (as algebra) to the <code>M (x) N</code> is a stronger statement than saying it is canonically isomorphic (as module).</p>",
        "id": 251388660,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1630418140
    },
    {
        "content": "<p>Anyway, to make your suggestion here explicit for the Stokes situation, we would have:</p>\n<ul>\n<li><code>is_tensor_product ℝ (ι → ℝ) E (ι → E)</code></li>\n<li><code>is_tensor_product ℝ V ℝ V</code></li>\n</ul>\n<p>The former is rather similar to your polynomial example.</p>",
        "id": 251389758,
        "sender_full_name": "Heather Macbeth",
        "timestamp": 1630418512
    },
    {
        "content": "<p>The tensor product for modules and for algebras require different things, and this class will include data.</p>",
        "id": 251389770,
        "sender_full_name": "Adam Topaz",
        "timestamp": 1630418514
    },
    {
        "content": "<p>This is similar to something I was asking for about (co)limits in the category theory library here: <br>\n<a href=\"#narrow/stream/217875-Is-there.20code.20for.20X.3F/topic/limits.20as.20a.20class.3F/near/247014056\">https://leanprover.zulipchat.com/#narrow/stream/217875-Is-there.20code.20for.20X.3F/topic/limits.20as.20a.20class.3F/near/247014056</a></p>",
        "id": 251390241,
        "sender_full_name": "Adam Topaz",
        "timestamp": 1630418669
    },
    {
        "content": "<p>Bhavik wasn't happy about that ;)</p>",
        "id": 251390312,
        "sender_full_name": "Adam Topaz",
        "timestamp": 1630418697
    },
    {
        "content": "<p>I suppose nobody doubts the usefulness of an internal direct sum decomposition, expressing that <code>V</code> is canonically isomorphic to <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>W</mi><mn>1</mn></msub><mo>⊕</mo><msub><mi>W</mi><mn>2</mn></msub></mrow><annotation encoding=\"application/x-tex\">W_1\\oplus W_2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.83333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">W</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">⊕</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.83333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">W</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>.  And this is rather analogous.</p>",
        "id": 251390872,
        "sender_full_name": "Heather Macbeth",
        "timestamp": 1630418897
    },
    {
        "content": "<p>I'm making this branch ready for review (while moving some parts to small PRs). I'm not sure what is the better way to formulate the main theorem: use <code>ι</code> as the index type for the whole space and <code>{i}ᶜ</code> as the index type for a face, or <code>fin (n + 1)</code> and <code>fin n</code>?</p>",
        "id": 254135300,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1632181062
    },
    {
        "content": "<p>In the latter case I'll use <a href=\"https://leanprover-community.github.io/mathlib_docs/find/fin.insert_nth\">docs#fin.insert_nth</a> instead of <code>coe</code>.</p>",
        "id": 254135441,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1632181158
    },
    {
        "content": "<p>It looks like <code>ι</code> is a more general solution (that's why I used it) but I tried to transfer the result to a function defined on <code>ℝ × ℝ</code> and this was far from convenient.</p>",
        "id": 254135604,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1632181244
    },
    {
        "content": "<p>I was thinking that before transferring to <code>ℝ × ℝ</code>, it would be nice to state a version for a general finite-dimensional vector space, equipped with a basis of the dual.</p>",
        "id": 254135684,
        "sender_full_name": "Heather Macbeth",
        "timestamp": 1632181303
    },
    {
        "content": "<p>Given a volume form on a finite-dimensional vector space and an element of its dual (which determines a hyperplane, i.e. pair of sides of the box), there's an induced volume form on the hyperplane.  So your Stokes can be stated in this context.</p>",
        "id": 254135873,
        "sender_full_name": "Heather Macbeth",
        "timestamp": 1632181424
    },
    {
        "content": "<p>By volume form I just mean top-rank <a href=\"https://leanprover-community.github.io/mathlib_docs/find/alternating_map\">docs#alternating_map</a></p>",
        "id": 254135993,
        "sender_full_name": "Heather Macbeth",
        "timestamp": 1632181503
    },
    {
        "content": "<p>(but one needs to prove that such a thing induces a measure)</p>",
        "id": 254136028,
        "sender_full_name": "Heather Macbeth",
        "timestamp": 1632181527
    },
    {
        "content": "<p>I think that we can have this (see below) now and replace the proof with a more general one later.</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kd\">lemma</span> <span class=\"n\">integral_divergence_prod_of_forall_has_deriv_within_at</span> <span class=\"o\">(</span><span class=\"n\">f</span> <span class=\"o\">:</span> <span class=\"n\">ℝ</span> <span class=\"bp\">×</span> <span class=\"n\">ℝ</span> <span class=\"bp\">→</span> <span class=\"n\">E</span> <span class=\"bp\">×</span> <span class=\"n\">E</span><span class=\"o\">)</span>\n  <span class=\"o\">(</span><span class=\"n\">f'</span> <span class=\"o\">:</span> <span class=\"n\">ℝ</span> <span class=\"bp\">×</span> <span class=\"n\">ℝ</span> <span class=\"bp\">→</span> <span class=\"n\">ℝ</span> <span class=\"bp\">×</span> <span class=\"n\">ℝ</span> <span class=\"bp\">→</span><span class=\"n\">L</span><span class=\"o\">[</span><span class=\"n\">ℝ</span><span class=\"o\">]</span> <span class=\"n\">E</span> <span class=\"bp\">×</span> <span class=\"n\">E</span><span class=\"o\">)</span> <span class=\"o\">{</span><span class=\"n\">a</span> <span class=\"n\">b</span> <span class=\"o\">:</span> <span class=\"n\">ℝ</span> <span class=\"bp\">×</span> <span class=\"n\">ℝ</span><span class=\"o\">}</span> <span class=\"o\">(</span><span class=\"n\">hle</span> <span class=\"o\">:</span> <span class=\"n\">a</span> <span class=\"bp\">≤</span> <span class=\"n\">b</span><span class=\"o\">)</span>\n  <span class=\"o\">(</span><span class=\"n\">Hd</span> <span class=\"o\">:</span> <span class=\"bp\">∀</span> <span class=\"n\">x</span> <span class=\"bp\">∈</span> <span class=\"n\">Icc</span> <span class=\"n\">a</span> <span class=\"n\">b</span><span class=\"o\">,</span> <span class=\"n\">has_fderiv_within_at</span> <span class=\"n\">f</span> <span class=\"o\">(</span><span class=\"n\">f'</span> <span class=\"n\">x</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">Icc</span> <span class=\"n\">a</span> <span class=\"n\">b</span><span class=\"o\">)</span> <span class=\"n\">x</span><span class=\"o\">)</span>\n  <span class=\"o\">(</span><span class=\"n\">Hi</span> <span class=\"o\">:</span> <span class=\"n\">integrable_on</span> <span class=\"o\">(</span><span class=\"bp\">λ</span> <span class=\"n\">x</span><span class=\"o\">,</span> <span class=\"o\">(</span><span class=\"n\">f'</span> <span class=\"n\">x</span> <span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"o\">,</span> <span class=\"mi\">0</span><span class=\"o\">))</span><span class=\"bp\">.</span><span class=\"mi\">1</span> <span class=\"bp\">+</span> <span class=\"o\">(</span><span class=\"n\">f'</span> <span class=\"n\">x</span> <span class=\"o\">(</span><span class=\"mi\">0</span><span class=\"o\">,</span> <span class=\"mi\">1</span><span class=\"o\">))</span><span class=\"bp\">.</span><span class=\"mi\">2</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">Icc</span> <span class=\"n\">a</span> <span class=\"n\">b</span><span class=\"o\">))</span> <span class=\"o\">:</span>\n  <span class=\"bp\">∫</span> <span class=\"n\">x</span> <span class=\"k\">in</span> <span class=\"n\">Icc</span> <span class=\"n\">a</span> <span class=\"n\">b</span><span class=\"o\">,</span> <span class=\"o\">(</span><span class=\"n\">f'</span> <span class=\"n\">x</span> <span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"o\">,</span> <span class=\"mi\">0</span><span class=\"o\">))</span><span class=\"bp\">.</span><span class=\"mi\">1</span> <span class=\"bp\">+</span> <span class=\"o\">(</span><span class=\"n\">f'</span> <span class=\"n\">x</span> <span class=\"o\">(</span><span class=\"mi\">0</span><span class=\"o\">,</span> <span class=\"mi\">1</span><span class=\"o\">))</span><span class=\"bp\">.</span><span class=\"mi\">2</span> <span class=\"bp\">=</span>\n    <span class=\"o\">(</span><span class=\"bp\">∫</span> <span class=\"n\">x</span> <span class=\"k\">in</span> <span class=\"n\">a.1..b.1</span><span class=\"o\">,</span> <span class=\"o\">(</span><span class=\"n\">f</span> <span class=\"o\">(</span><span class=\"n\">x</span><span class=\"o\">,</span> <span class=\"n\">b.2</span><span class=\"o\">))</span><span class=\"bp\">.</span><span class=\"mi\">2</span><span class=\"o\">)</span> <span class=\"bp\">-</span> <span class=\"o\">(</span><span class=\"bp\">∫</span> <span class=\"n\">x</span> <span class=\"k\">in</span> <span class=\"n\">a.1..b.1</span><span class=\"o\">,</span> <span class=\"o\">(</span><span class=\"n\">f</span> <span class=\"o\">(</span><span class=\"n\">x</span><span class=\"o\">,</span> <span class=\"n\">a.2</span><span class=\"o\">))</span><span class=\"bp\">.</span><span class=\"mi\">2</span><span class=\"o\">)</span> <span class=\"bp\">+</span>\n      <span class=\"o\">(</span><span class=\"bp\">∫</span> <span class=\"n\">y</span> <span class=\"k\">in</span> <span class=\"n\">a.2..b.2</span><span class=\"o\">,</span> <span class=\"o\">(</span><span class=\"n\">f</span> <span class=\"o\">(</span><span class=\"n\">b.1</span><span class=\"o\">,</span> <span class=\"n\">y</span><span class=\"o\">))</span><span class=\"bp\">.</span><span class=\"mi\">1</span><span class=\"o\">)</span> <span class=\"bp\">-</span> <span class=\"bp\">∫</span> <span class=\"n\">y</span> <span class=\"k\">in</span> <span class=\"n\">a.2..b.2</span><span class=\"o\">,</span> <span class=\"o\">(</span><span class=\"n\">f</span> <span class=\"o\">(</span><span class=\"n\">a.1</span><span class=\"o\">,</span> <span class=\"n\">y</span><span class=\"o\">))</span><span class=\"bp\">.</span><span class=\"mi\">1</span> <span class=\"o\">:=</span>\n</code></pre></div>",
        "id": 254139197,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1632184094
    },
    {
        "content": "<p>It's in <a href=\"https://github.com/leanprover-community/mathlib/tree/stokes-new\">branch#stokes-new</a></p>",
        "id": 254139435,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1632184310
    },
    {
        "content": "<p>Now I also have</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kd\">lemma</span> <span class=\"n\">integral_circle_darg_of_differentiable_on</span> <span class=\"o\">{</span><span class=\"n\">R</span> <span class=\"o\">:</span> <span class=\"n\">ℝ</span><span class=\"o\">}</span> <span class=\"o\">(</span><span class=\"n\">h0</span> <span class=\"o\">:</span> <span class=\"mi\">0</span> <span class=\"bp\">≤</span> <span class=\"n\">R</span><span class=\"o\">)</span> <span class=\"o\">{</span><span class=\"n\">f</span> <span class=\"o\">:</span> <span class=\"n\">ℂ</span> <span class=\"bp\">→</span> <span class=\"n\">E</span><span class=\"o\">}</span>\n  <span class=\"o\">(</span><span class=\"n\">hd</span> <span class=\"o\">:</span> <span class=\"n\">differentiable_on</span> <span class=\"n\">ℂ</span> <span class=\"n\">f</span> <span class=\"o\">(</span><span class=\"n\">closed_ball</span> <span class=\"mi\">0</span> <span class=\"n\">R</span><span class=\"o\">))</span> <span class=\"o\">:</span>\n  <span class=\"bp\">∫</span> <span class=\"o\">(</span><span class=\"n\">θ</span> <span class=\"o\">:</span> <span class=\"n\">ℝ</span><span class=\"o\">)</span> <span class=\"k\">in</span> <span class=\"mi\">0</span><span class=\"bp\">..</span><span class=\"mi\">2</span> <span class=\"bp\">*</span> <span class=\"n\">π</span><span class=\"o\">,</span> <span class=\"n\">f</span> <span class=\"o\">(</span><span class=\"n\">R</span> <span class=\"bp\">*</span> <span class=\"n\">exp</span> <span class=\"o\">(</span><span class=\"n\">θ</span> <span class=\"bp\">*</span> <span class=\"n\">I</span><span class=\"o\">))</span> <span class=\"bp\">=</span> <span class=\"o\">(</span><span class=\"mi\">2</span> <span class=\"bp\">*</span> <span class=\"n\">π</span><span class=\"o\">)</span> <span class=\"bp\">•</span> <span class=\"n\">f</span> <span class=\"mi\">0</span> <span class=\"o\">:=</span>\n</code></pre></div>\n<p>and</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kd\">lemma</span> <span class=\"n\">integral_circle_eq_zero_of_differentiable_on</span> <span class=\"o\">{</span><span class=\"n\">R</span> <span class=\"o\">:</span> <span class=\"n\">ℝ</span><span class=\"o\">}</span> <span class=\"o\">(</span><span class=\"n\">h0</span> <span class=\"o\">:</span> <span class=\"mi\">0</span> <span class=\"bp\">≤</span> <span class=\"n\">R</span><span class=\"o\">)</span> <span class=\"o\">{</span><span class=\"n\">f</span> <span class=\"o\">:</span> <span class=\"n\">ℂ</span> <span class=\"bp\">→</span> <span class=\"n\">E</span><span class=\"o\">}</span>\n  <span class=\"o\">(</span><span class=\"n\">hd</span> <span class=\"o\">:</span> <span class=\"n\">differentiable_on</span> <span class=\"n\">ℂ</span> <span class=\"n\">f</span> <span class=\"o\">(</span><span class=\"n\">closed_ball</span> <span class=\"mi\">0</span> <span class=\"n\">R</span><span class=\"o\">))</span> <span class=\"o\">:</span>\n  <span class=\"bp\">∫</span> <span class=\"o\">(</span><span class=\"n\">θ</span> <span class=\"o\">:</span> <span class=\"n\">ℝ</span><span class=\"o\">)</span> <span class=\"k\">in</span> <span class=\"mi\">0</span><span class=\"bp\">..</span><span class=\"mi\">2</span> <span class=\"bp\">*</span> <span class=\"n\">π</span><span class=\"o\">,</span> <span class=\"o\">(</span><span class=\"n\">R</span> <span class=\"bp\">*</span> <span class=\"n\">exp</span> <span class=\"o\">(</span><span class=\"n\">θ</span> <span class=\"bp\">*</span> <span class=\"n\">I</span><span class=\"o\">)</span> <span class=\"bp\">*</span> <span class=\"n\">I</span> <span class=\"o\">:</span> <span class=\"n\">ℂ</span><span class=\"o\">)</span> <span class=\"bp\">•</span> <span class=\"n\">f</span> <span class=\"o\">(</span><span class=\"n\">R</span> <span class=\"bp\">*</span> <span class=\"n\">exp</span> <span class=\"o\">(</span><span class=\"n\">θ</span> <span class=\"bp\">*</span> <span class=\"n\">I</span><span class=\"o\">))</span> <span class=\"bp\">=</span> <span class=\"mi\">0</span> <span class=\"o\">:=</span>\n</code></pre></div>",
        "id": 254281584,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1632259888
    },
    {
        "content": "<p>As you can see, these lemmas use <code>∫ (θ : ℝ) in 0..2 * π,</code> to speak about integrals over the circle.</p>",
        "id": 254281701,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1632259926
    },
    {
        "content": "<p>This fact makes them less readable.</p>",
        "id": 254281737,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1632259942
    },
    {
        "content": "<p>Also, I want to show</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kd\">lemma</span> <span class=\"n\">integral_unit_circle_div_sub_of_differentiable_on</span> <span class=\"o\">{</span><span class=\"n\">w</span> <span class=\"o\">:</span> <span class=\"n\">ℂ</span><span class=\"o\">}</span> <span class=\"o\">(</span><span class=\"n\">h</span> <span class=\"o\">:</span> <span class=\"n\">abs</span> <span class=\"n\">w</span> <span class=\"bp\">&lt;</span> <span class=\"mi\">1</span><span class=\"o\">)</span>\n  <span class=\"o\">{</span><span class=\"n\">f</span> <span class=\"o\">:</span> <span class=\"n\">ℂ</span> <span class=\"bp\">→</span> <span class=\"n\">E</span><span class=\"o\">}</span> <span class=\"o\">(</span><span class=\"n\">hd</span> <span class=\"o\">:</span> <span class=\"n\">differentiable_on</span> <span class=\"n\">ℂ</span> <span class=\"n\">f</span> <span class=\"o\">(</span><span class=\"n\">closed_ball</span> <span class=\"o\">(</span><span class=\"mi\">0</span> <span class=\"o\">:</span> <span class=\"n\">ℂ</span><span class=\"o\">)</span> <span class=\"mi\">1</span><span class=\"o\">))</span> <span class=\"o\">:</span>\n  <span class=\"bp\">∫</span> <span class=\"o\">(</span><span class=\"n\">θ</span> <span class=\"o\">:</span> <span class=\"n\">ℝ</span><span class=\"o\">)</span> <span class=\"k\">in</span> <span class=\"mi\">0</span><span class=\"bp\">..</span><span class=\"mi\">2</span> <span class=\"bp\">*</span> <span class=\"n\">π</span><span class=\"o\">,</span> <span class=\"o\">((</span><span class=\"n\">exp</span> <span class=\"o\">(</span><span class=\"n\">θ</span> <span class=\"bp\">*</span> <span class=\"n\">I</span><span class=\"o\">)</span> <span class=\"bp\">*</span> <span class=\"n\">I</span><span class=\"o\">)</span> <span class=\"bp\">/</span> <span class=\"o\">(</span><span class=\"n\">exp</span> <span class=\"o\">(</span><span class=\"n\">θ</span> <span class=\"bp\">*</span> <span class=\"n\">I</span><span class=\"o\">)</span> <span class=\"bp\">-</span> <span class=\"n\">w</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"n\">ℂ</span><span class=\"o\">)</span> <span class=\"bp\">•</span>\n    <span class=\"n\">f</span> <span class=\"o\">(</span><span class=\"n\">exp</span> <span class=\"o\">(</span><span class=\"n\">θ</span> <span class=\"bp\">*</span> <span class=\"n\">I</span><span class=\"o\">))</span> <span class=\"bp\">=</span> <span class=\"mi\">2</span> <span class=\"bp\">•</span> <span class=\"n\">π</span> <span class=\"bp\">•</span> <span class=\"n\">I</span> <span class=\"bp\">•</span> <span class=\"n\">f</span> <span class=\"n\">w</span> <span class=\"o\">:=</span>\n</code></pre></div>",
        "id": 254281769,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1632259959
    },
    {
        "content": "<p>The proof I have in mind is the following one. Put <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>R</mi><mi>w</mi></msub><mo stretchy=\"false\">(</mo><mi>z</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mfrac><mrow><mi>z</mi><mo>+</mo><mi>w</mi></mrow><mrow><mover accent=\"true\"><mi>w</mi><mo>ˉ</mo></mover><mi>z</mi><mo>+</mo><mn>1</mn></mrow></mfrac></mrow><annotation encoding=\"application/x-tex\">R_w(z)=\\frac{z+w}{\\bar wz+1}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.00773em;\">R</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.151392em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.00773em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02691em;\">w</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.04398em;\">z</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.205662em;vertical-align:-0.403331em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.802331em;\"><span style=\"top:-2.655em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord accent mtight\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.56778em;\"><span style=\"top:-2.7em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02691em;\">w</span></span><span style=\"top:-2.7em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"accent-body\" style=\"left:-0.16666em;\"><span class=\"mord mtight\">ˉ</span></span></span></span></span></span></span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.04398em;\">z</span><span class=\"mbin mtight\">+</span><span class=\"mord mtight\">1</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.04398em;\">z</span><span class=\"mbin mtight\">+</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02691em;\">w</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.403331em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span>. Then apply <code>integral_circle_darg_of_differentiable_on</code> to <code>f ∘ R_w</code>.</p>",
        "id": 254281881,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1632260030
    },
    {
        "content": "<p>So, just to check I understand the statements correctly, this is Cauchy's integral formula right?</p>",
        "id": 254282239,
        "sender_full_name": "Chris Birkbeck",
        "timestamp": 1632260194
    },
    {
        "content": "<p>There are two obstacles:</p>\n<ol>\n<li>I need some facts about automorphisms of the unit disc (e.g., I need to know that <code>R_w</code> maps the unit disc and the unit circle to themselves).</li>\n<li>The LHS will differ from the goal by a change of variables, and I'll have to prove something about its derivative.</li>\n</ol>",
        "id": 254282240,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1632260197
    },
    {
        "content": "<p>I have Cauchy's integral formula for the center of a disc, and I want it for any point in the disc.</p>",
        "id": 254282295,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1632260226
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"214703\">Yury G. Kudryashov</span> <a href=\"#narrow/stream/116395-maths/topic/Stokes'.20theorem/near/254281881\">said</a>:</p>\n<blockquote>\n<p>The proof I have in mind is the following one. Put <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>R</mi><mi>w</mi></msub><mo stretchy=\"false\">(</mo><mi>z</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mfrac><mrow><mi>z</mi><mo>+</mo><mi>w</mi></mrow><mrow><mover accent=\"true\"><mi>w</mi><mo>ˉ</mo></mover><mi>z</mi><mo>+</mo><mn>1</mn></mrow></mfrac></mrow><annotation encoding=\"application/x-tex\">R_w(z)=\\frac{z+w}{\\bar wz+1}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.00773em;\">R</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.151392em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.00773em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02691em;\">w</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.04398em;\">z</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.205662em;vertical-align:-0.403331em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.802331em;\"><span style=\"top:-2.655em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord accent mtight\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.56778em;\"><span style=\"top:-2.7em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02691em;\">w</span></span><span style=\"top:-2.7em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"accent-body\" style=\"left:-0.16666em;\"><span class=\"mord mtight\">ˉ</span></span></span></span></span></span></span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.04398em;\">z</span><span class=\"mbin mtight\">+</span><span class=\"mord mtight\">1</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.04398em;\">z</span><span class=\"mbin mtight\">+</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02691em;\">w</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.403331em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span>. Then apply <code>integral_circle_darg_of_differentiable_on</code> to <code>f ∘ R_w</code>.</p>\n</blockquote>\n<p>I guess this is just a Moebius transformation, but I'm not sure if that helps</p>",
        "id": 254282710,
        "sender_full_name": "Chris Birkbeck",
        "timestamp": 1632260434
    },
    {
        "content": "<p>It'd be nice to convert </p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"bp\">∫</span> <span class=\"o\">(</span><span class=\"n\">θ</span> <span class=\"o\">:</span> <span class=\"n\">ℝ</span><span class=\"o\">)</span> <span class=\"k\">in</span> <span class=\"mi\">0</span><span class=\"bp\">..</span><span class=\"mi\">2</span> <span class=\"bp\">*</span> <span class=\"n\">π</span><span class=\"o\">,</span> <span class=\"n\">f</span> <span class=\"o\">(</span><span class=\"n\">R</span> <span class=\"bp\">*</span> <span class=\"n\">exp</span> <span class=\"o\">(</span><span class=\"n\">θ</span> <span class=\"bp\">*</span> <span class=\"n\">I</span><span class=\"o\">))</span>\n</code></pre></div>\n<p>to an integral over the circle</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"n\">R</span> <span class=\"bp\">⁻¹</span> <span class=\"bp\">∫</span> <span class=\"o\">(</span><span class=\"n\">z</span> <span class=\"o\">:</span> <span class=\"n\">sphere</span> <span class=\"o\">(</span><span class=\"mi\">0</span><span class=\"o\">:</span><span class=\"n\">ℂ</span><span class=\"o\">)</span> <span class=\"n\">R</span><span class=\"o\">),</span> <span class=\"n\">f</span> <span class=\"o\">(</span><span class=\"n\">z</span><span class=\"o\">)</span>\n</code></pre></div>\n<p>For this we need that the <a href=\"https://leanprover-community.github.io/mathlib_docs/find/measure_theory.measure.map\">docs#measure_theory.measure.map</a> of the restriction of Lebesgue measure to <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">[</mo><mn>0</mn><mo separator=\"true\">,</mo><mn>2</mn><mi>π</mi><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">[0,2\\pi]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">[</span><span class=\"mord\">0</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">2</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">π</span><span class=\"mclose\">]</span></span></span></span> under the exponential map is equal to Hausdorff measure on the circle.  <span class=\"user-mention\" data-user-id=\"252920\">@Alex Kontorovich</span> and I were discussing something similar the other day, but for Haar measure.</p>",
        "id": 254282961,
        "sender_full_name": "Heather Macbeth",
        "timestamp": 1632260584
    },
    {
        "content": "<p>Do we already have a <code>volume</code> on the circle? Which measure is it?</p>",
        "id": 254283130,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1632260672
    },
    {
        "content": "<p>In <code>analysis/fourier</code> I use Haar measure, but I would be glad to switch over to Hausdorff at some point.</p>\n<p><a href=\"https://leanprover-community.github.io/mathlib_docs/find/circle.measure_theory.measure_space\">docs#circle.measure_theory.measure_space</a></p>",
        "id": 254283182,
        "sender_full_name": "Heather Macbeth",
        "timestamp": 1632260705
    },
    {
        "content": "<p>But I don't think the rotation-invariance of Hausdorff measure is obvious from what is currently in mathlib?</p>",
        "id": 254283224,
        "sender_full_name": "Heather Macbeth",
        "timestamp": 1632260724
    },
    {
        "content": "<p>We know that isometries preserve Hausdorff measures.</p>",
        "id": 254283257,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1632260748
    },
    {
        "content": "<p>Ah, then I guess it is!</p>",
        "id": 254283350,
        "sender_full_name": "Heather Macbeth",
        "timestamp": 1632260784
    },
    {
        "content": "<p><a href=\"https://leanprover-community.github.io/mathlib_docs/find/isometric.hausdorff_measure_image\">docs#isometric.hausdorff_measure_image</a></p>",
        "id": 254283381,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1632260798
    },
    {
        "content": "<p>Someone should reformulate this using <code>map</code>.</p>",
        "id": 254283411,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1632260812
    },
    {
        "content": "<p>But this will be an integral over a measure, not <code>dz</code>.</p>",
        "id": 254283514,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1632260879
    },
    {
        "content": "<p>Still, good enough for most purposes.</p>",
        "id": 254283643,
        "sender_full_name": "Heather Macbeth",
        "timestamp": 1632260943
    },
    {
        "content": "<p>It's better than with <code>exp (θ * I)</code> but doesn't give me change of variables \"for free\".</p>",
        "id": 254283855,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1632261047
    },
    {
        "content": "<p>By the way, could you prove the mean value property for harmonic functions in n-space by a generalization of your plane argument?</p>",
        "id": 254283893,
        "sender_full_name": "Heather Macbeth",
        "timestamp": 1632261065
    },
    {
        "content": "<p>What do you call \"your plane argument\"?</p>",
        "id": 254283940,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1632261095
    },
    {
        "content": "<p>Pick some (volume-preserving?) parametrization of a punctured (n-1)-sphere which identifies it with a (n-1)-parallelliped.</p>",
        "id": 254283950,
        "sender_full_name": "Heather Macbeth",
        "timestamp": 1632261103
    },
    {
        "content": "<p>I don't know.</p>",
        "id": 254284118,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1632261189
    },
    {
        "content": "<p>Can you deduce it from some sort of Stokes' theorem?</p>",
        "id": 254284202,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1632261241
    },
    {
        "content": "<p>Yes</p>",
        "id": 254284645,
        "sender_full_name": "Heather Macbeth",
        "timestamp": 1632261482
    },
    {
        "content": "<p>The we should do it this way.</p>",
        "id": 254285312,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1632261830
    },
    {
        "content": "<p>I mean, define integrals of differential forms etc.</p>",
        "id": 254285380,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1632261854
    },
    {
        "content": "<p>In the long term, yes, but in the short term it would be nice to have the mean value property immediately by a trick, just as for Cauchy's formula.</p>",
        "id": 254285474,
        "sender_full_name": "Heather Macbeth",
        "timestamp": 1632261919
    },
    {
        "content": "<p>Let me say it this way: I'm not going to work on a proof by a trick here. Anyone else is welcome to do it.</p>",
        "id": 254285622,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1632261993
    },
    {
        "content": "<p>Pushed existing code to <a href=\"https://github.com/leanprover-community/mathlib/tree/stokes-new\">branch#stokes-new</a>.</p>",
        "id": 254285780,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1632262084
    },
    {
        "content": "<p>(done)</p>",
        "id": 254285814,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1632262109
    },
    {
        "content": "<p>Are we in a position do prove that weight 2 modular forms of level Gamma with no boundedness conditions at the cusps biject with Gamma-invariant holomorphic one-forms on the upper half plane? It's an equiv of complex vector spaces and the map sends <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>f</mi><mo stretchy=\"false\">(</mo><mi>z</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">f(z)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.04398em;\">z</span><span class=\"mclose\">)</span></span></span></span> to <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>f</mi><mo stretchy=\"false\">(</mo><mi>z</mi><mo stretchy=\"false\">)</mo><mi>d</mi><mi>z</mi></mrow><annotation encoding=\"application/x-tex\">f(z)dz</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.04398em;\">z</span><span class=\"mclose\">)</span><span class=\"mord mathnormal\">d</span><span class=\"mord mathnormal\" style=\"margin-right:0.04398em;\">z</span></span></span></span>.</p>",
        "id": 254286465,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1632262497
    },
    {
        "content": "<p>We don't have Cauchy formula yet (only a particular case).</p>",
        "id": 254286927,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1632262772
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"260507\">@Heather Macbeth</span> Since you've already worked on this, could you please prove some formulas for change of variables in integrals over circles in <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"double-struck\">C</mi></mrow><annotation encoding=\"application/x-tex\">\\mathbb C</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68889em;vertical-align:0em;\"></span><span class=\"mord mathbb\">C</span></span></span></span>?</p>",
        "id": 254287052,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1632262834
    },
    {
        "content": "<p>What formulas did you have in mind?</p>",
        "id": 254287109,
        "sender_full_name": "Heather Macbeth",
        "timestamp": 1632262882
    },
    {
        "content": "<p>I want to say that the integral <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mo>∫</mo><msup><mi>S</mi><mn>1</mn></msup></msub><mi>f</mi><mo stretchy=\"false\">(</mo><mi>z</mi><mo stretchy=\"false\">)</mo><mi>d</mi><mi>z</mi></mrow><annotation encoding=\"application/x-tex\">\\int_{S^1} f(z)dz</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.1608200000000002em;vertical-align:-0.35582em;\"></span><span class=\"mop\"><span class=\"mop op-symbol small-op\" style=\"margin-right:0.19445em;position:relative;top:-0.0005599999999999772em;\">∫</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.16659999999999997em;\"><span style=\"top:-2.34418em;margin-left:-0.19445em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05764em;\">S</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7463142857142857em;\"><span style=\"top:-2.786em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\">1</span></span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.35582em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.04398em;\">z</span><span class=\"mclose\">)</span><span class=\"mord mathnormal\">d</span><span class=\"mord mathnormal\" style=\"margin-right:0.04398em;\">z</span></span></span></span> does not depend on the choice of a parametrization.</p>",
        "id": 254287231,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1632262935
    },
    {
        "content": "<p>You can assume that <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>f</mi></mrow><annotation encoding=\"application/x-tex\">f</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span></span></span></span> is differentiable, if you want.</p>",
        "id": 254287280,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1632262971
    },
    {
        "content": "<p>And the change of variables is a Möbius transformation (see above).</p>",
        "id": 254287338,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1632263013
    },
    {
        "content": "<p>OMG, the diff is already 5K lines...<br>\n/me is going to make some smaller PRs to reduce the diff.</p>",
        "id": 254287842,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1632263311
    },
    {
        "content": "<p>BTW, do we have a way to create a <code>diffeomorph</code> between two spheres from a local diffeomorphism between the ambient spaces?</p>",
        "id": 254289458,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1632264246
    },
    {
        "content": "<p>Good question.  You can use <a href=\"https://leanprover-community.github.io/mathlib_docs/find/times_cont_mdiff.cod_restrict_sphere\">docs#times_cont_mdiff.cod_restrict_sphere</a>  and <a href=\"https://leanprover-community.github.io/mathlib_docs/find/times_cont_mdiff_coe_sphere\">docs#times_cont_mdiff_coe_sphere</a> combined to create an times_cont_mdiff map in each direction, then check the pair are inverse to each other.</p>",
        "id": 254290258,
        "sender_full_name": "Heather Macbeth",
        "timestamp": 1632264829
    },
    {
        "content": "<p>See <a href=\"https://leanprover-community.github.io/mathlib_docs/find/times_cont_mdiff_neg_sphere\">docs#times_cont_mdiff_neg_sphere</a> for an example of creating the times_cont_mdiff map.</p>",
        "id": 254290317,
        "sender_full_name": "Heather Macbeth",
        "timestamp": 1632264864
    },
    {
        "content": "<p>I think about introducing a definition for <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mo>∫</mo><msup><mi>S</mi><mn>1</mn></msup></msub><mi>f</mi><mo stretchy=\"false\">(</mo><mi>z</mi><mo stretchy=\"false\">)</mo><mtext> </mtext><mi>d</mi><mi>z</mi></mrow><annotation encoding=\"application/x-tex\">\\int_{S^1} f(z)\\,dz</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.1608200000000002em;vertical-align:-0.35582em;\"></span><span class=\"mop\"><span class=\"mop op-symbol small-op\" style=\"margin-right:0.19445em;position:relative;top:-0.0005599999999999772em;\">∫</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.16659999999999997em;\"><span style=\"top:-2.34418em;margin-left:-0.19445em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05764em;\">S</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7463142857142857em;\"><span style=\"top:-2.786em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\">1</span></span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.35582em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.04398em;\">z</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\">d</span><span class=\"mord mathnormal\" style=\"margin-right:0.04398em;\">z</span></span></span></span>.</p>",
        "id": 254294732,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1632267842
    },
    {
        "content": "<p>And we can use, e.g., <code>∮</code> as notation.</p>",
        "id": 254294868,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1632267957
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"214703\">Yury G. Kudryashov</span> <a href=\"#narrow/stream/116395-maths/topic/Stokes'.20theorem/near/254281701\">said</a>:</p>\n<blockquote>\n<p>As you can see, these lemmas use <code>∫ (θ : ℝ) in 0..2 * π,</code> to speak about integrals over the circle.</p>\n</blockquote>\n<p>Maybe this is time we depart from usual mathematical practice and use <code>τ</code> in place of <code>π</code>.</p>",
        "id": 254320493,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1632291695
    },
    {
        "content": "<p>I prefer to use <code>π</code>. And the man problem is that I need a specific parametrization <code>z(t)</code> of the circle an explicit <code>dz/dt</code> in the integral.</p>",
        "id": 254350799,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1632309655
    },
    {
        "content": "<p>Progress report: I have Cauchy integral formula for any point inside a circle modulo a formula for the integral <code>∫ dz/(z-w)</code>.</p>",
        "id": 255068309,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1632756635
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib/issues/9405\">#9405</a> <a href=\"https://github.com/leanprover-community/mathlib/issues/9406\">#9406</a> <a href=\"https://github.com/leanprover-community/mathlib/issues/9409\">#9409</a> <a href=\"https://github.com/leanprover-community/mathlib/issues/9410\">#9410</a> are some dependencies I need for this formula.</p>",
        "id": 255072510,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1632758185
    },
    {
        "content": "<p>All on the queue now!</p>",
        "id": 255152377,
        "sender_full_name": "Scott Morrison",
        "timestamp": 1632796836
    },
    {
        "content": "<p>I'm going to prove that <code>exp_map_circle</code> sends volume to volume.</p>",
        "id": 255332020,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1632882700
    },
    {
        "content": "<p>With current definition <code>λ x, x * I</code>, there is a multiplier <code>2π</code>. <span class=\"user-mention\" data-user-id=\"260507\">@Heather Macbeth</span> what do you think about changing the definition of <code>exp_map_circle</code> to <code>λ x, x * 2 * π * I</code>?</p>",
        "id": 255332139,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1632882784
    },
    {
        "content": "<p>In this case the kernel of <code>exp_map_circle_hom</code> will be <code>range (coe : int → real)</code> and <code>exp_map_circle</code> will map <code>restrict volume (Ioc 0 1)</code> to <code>volume</code>.</p>",
        "id": 255332252,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1632882875
    },
    {
        "content": "<p>cons: def must be moved after the definition of <code>π</code>.</p>",
        "id": 255332324,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1632882947
    },
    {
        "content": "<p>OTOH, your <code>exp_map_circle</code> agrees with <code>complex.arg</code>.</p>",
        "id": 255333344,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1632883876
    },
    {
        "content": "<p>Probably, we should have both.</p>",
        "id": 255333355,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1632883886
    },
    {
        "content": "<p>I would prefer the existing definition because it is a local isometry.  But I would be happy to change <a href=\"https://leanprover-community.github.io/mathlib_docs/find/haar_circle\">docs#haar_circle</a> to give a total measure of <code>2 * π</code> for the circle, rather than 1.</p>",
        "id": 255333744,
        "sender_full_name": "Heather Macbeth",
        "timestamp": 1632884189
    },
    {
        "content": "<p>I like to have a probability measure.</p>",
        "id": 255333875,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1632884329
    },
    {
        "content": "<p>BTW, with the current definition of the circle, <code>exp_map_circle</code> is not a local isometry.</p>",
        "id": 255333907,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1632884361
    },
    {
        "content": "<p>If you want to have a local isometry, you should define circle as <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"double-struck\">R</mi><mi mathvariant=\"normal\">/</mi><mi mathvariant=\"double-struck\">Z</mi></mrow><annotation encoding=\"application/x-tex\">\\mathbb R/\\mathbb Z</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathbb\">R</span><span class=\"mord\">/</span><span class=\"mord mathbb\">Z</span></span></span></span>.</p>",
        "id": 255333935,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1632884389
    },
    {
        "content": "<p>I mean, currently the distance between <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span> and <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>−</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">-1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.72777em;vertical-align:-0.08333em;\"></span><span class=\"mord\">−</span><span class=\"mord\">1</span></span></span></span> is <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>2</mn></mrow><annotation encoding=\"application/x-tex\">2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">2</span></span></span></span>, not <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>π</mi></mrow><annotation encoding=\"application/x-tex\">\\pi</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">π</span></span></span></span>.</p>",
        "id": 255334062,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1632884445
    },
    {
        "content": "<p>Oh, I am using the intrinsic/Riemannian metric</p>",
        "id": 255334091,
        "sender_full_name": "Heather Macbeth",
        "timestamp": 1632884469
    },
    {
        "content": "<p>But the current <code>metric_space</code> structure on <code>circle</code> uses a different metric.</p>",
        "id": 255334114,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1632884498
    },
    {
        "content": "<p>That's true -- I didn't mean that it was literally a local isometry in Lean, just that that's my reason for preferring the current definition.</p>",
        "id": 255334196,
        "sender_full_name": "Heather Macbeth",
        "timestamp": 1632884549
    },
    {
        "content": "<p>About the total measure of <code>haar_circle</code>: what's more convenient for integration?</p>",
        "id": 255334352,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1632884689
    },
    {
        "content": "<p>I mean, did you have to add <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>2</mn><mi>π</mi></mrow><annotation encoding=\"application/x-tex\">2\\pi</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">2</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">π</span></span></span></span> because of the current definition, or you would have to add <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>2</mn><mi>π</mi></mrow><annotation encoding=\"application/x-tex\">1/2\\pi</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1/2</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">π</span></span></span></span> if we had total measure = <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>2</mn><mi>π</mi></mrow><annotation encoding=\"application/x-tex\">2\\pi</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">2</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">π</span></span></span></span>?</p>",
        "id": 255334410,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1632884750
    },
    {
        "content": "<p>AFAIR, in Fourier series it's more convenient to have total measure = 1.</p>",
        "id": 255334485,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1632884801
    },
    {
        "content": "<p>That's right, it was more convenient in <code>analysis/fourier</code> to have total measure 1.  But I was being a bit lazy when I did that -- I think we should have a strong presupposition that subsets of R^n get Hausdorff measure/submanifold measure</p>",
        "id": 255334621,
        "sender_full_name": "Heather Macbeth",
        "timestamp": 1632884934
    },
    {
        "content": "<p>So I'd be happy to go through the Fourier file and insert <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>2</mn><mi>π</mi></mrow><annotation encoding=\"application/x-tex\">2\\pi</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">2</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">π</span></span></span></span>'s everywhere</p>",
        "id": 255334644,
        "sender_full_name": "Heather Macbeth",
        "timestamp": 1632884964
    },
    {
        "content": "<p>For your main goal, can you follow these steps?  I think they are all desirable to have individually:</p>\n<ol>\n<li>The quotient map from <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"double-struck\">R</mi></mrow><annotation encoding=\"application/x-tex\">\\mathbb{R}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68889em;vertical-align:0em;\"></span><span class=\"mord mathbb\">R</span></span></span></span> to <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"double-struck\">R</mi><mi mathvariant=\"normal\">/</mi><mi>T</mi><mi mathvariant=\"double-struck\">Z</mi></mrow><annotation encoding=\"application/x-tex\">\\mathbb{R}/T\\mathbb{Z}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathbb\">R</span><span class=\"mord\">/</span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord mathbb\">Z</span></span></span></span> sends volume to volume (or more precisely, sends restriction-of-volume-to-[0,T] to volume)</li>\n<li>There is an isomorphism of length spaces between <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"double-struck\">R</mi><mi mathvariant=\"normal\">/</mi><mn>2</mn><mi>π</mi><mi mathvariant=\"double-struck\">Z</mi></mrow><annotation encoding=\"application/x-tex\">\\mathbb{R}/2\\pi\\mathbb{Z}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathbb\">R</span><span class=\"mord\">/2</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">π</span><span class=\"mord mathbb\">Z</span></span></span></span> and the circle</li>\n<li>An isomorphism of length spaces induces an isomorphism of Hausdorff measure</li>\n</ol>",
        "id": 255334775,
        "sender_full_name": "Heather Macbeth",
        "timestamp": 1632885073
    },
    {
        "content": "<p>I'm going to stick to Haar measure for now.</p>",
        "id": 255334920,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1632885197
    },
    {
        "content": "<p>Otherwise I'll do as you suggest.</p>",
        "id": 255334934,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1632885210
    },
    {
        "content": "<p>I see, in that case something like</p>\n<ol>\n<li>The quotient map from <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"double-struck\">R</mi></mrow><annotation encoding=\"application/x-tex\">\\mathbb{R}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68889em;vertical-align:0em;\"></span><span class=\"mord mathbb\">R</span></span></span></span> to <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"double-struck\">R</mi><mi mathvariant=\"normal\">/</mi><mi>T</mi><mi mathvariant=\"double-struck\">Z</mi></mrow><annotation encoding=\"application/x-tex\">\\mathbb{R}/T\\mathbb{Z}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathbb\">R</span><span class=\"mord\">/</span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord mathbb\">Z</span></span></span></span> sends volume to volume (or more precisely, sends restriction-of-volume-to-[0,T] to volume)</li>\n<li>There is an isomorphism of topological groups between <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"double-struck\">R</mi><mi mathvariant=\"normal\">/</mi><mn>2</mn><mi>π</mi><mi mathvariant=\"double-struck\">Z</mi></mrow><annotation encoding=\"application/x-tex\">\\mathbb{R}/2\\pi\\mathbb{Z}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathbb\">R</span><span class=\"mord\">/2</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">π</span><span class=\"mord mathbb\">Z</span></span></span></span> and the circle</li>\n</ol>",
        "id": 255335003,
        "sender_full_name": "Heather Macbeth",
        "timestamp": 1632885245
    },
    {
        "content": "<p>(Note that there is an open PR of one of my students containing point 2: <a href=\"https://github.com/leanprover-community/mathlib/issues/8559\">#8559</a>)</p>",
        "id": 255335034,
        "sender_full_name": "Heather Macbeth",
        "timestamp": 1632885271
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib/issues/8559\">#8559</a> does not define a <code>homeomorph</code>.</p>",
        "id": 255337571,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1632887291
    },
    {
        "content": "<p>I'm going to add lemmas about <code>complex.angle</code>, then merge master once <a href=\"https://github.com/leanprover-community/mathlib/issues/8559\">#8559</a> is ready.</p>",
        "id": 255338762,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1632888338
    },
    {
        "content": "<p>Hi, I moved some code from <a href=\"https://github.com/leanprover-community/mathlib/issues/8903\">#8903</a> to <a href=\"https://github.com/leanprover-community/mathlib/issues/9496\">#9496</a>. I think that <code>analysis/box_integral</code> folder in <a href=\"https://github.com/leanprover-community/mathlib/issues/9496\">#9496</a> is ready for review. For historical reasons, it depends on <a href=\"https://github.com/leanprover-community/mathlib/issues/9422\">#9422</a> but I can drop this dependency if needed.</p>",
        "id": 255821352,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1633130385
    },
    {
        "content": "<p>If I can somehow make reviewing these 4K lines of code easier, then tell me, please.</p>",
        "id": 255821523,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1633130522
    },
    {
        "content": "<p><code>box/basic.lean</code> and <code>box/box_induction.lean</code> look great. :-)</p>",
        "id": 255822666,
        "sender_full_name": "Scott Morrison",
        "timestamp": 1633131433
    },
    {
        "content": "<p>Rebased (squashing history) to drop dependency on <a href=\"https://github.com/leanprover-community/mathlib/issues/9422\">#9422</a>, fixed linter.</p>",
        "id": 255961981,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1633278041
    },
    {
        "content": "<p>Wow, this is a 4000 lines PR!</p>",
        "id": 255962161,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1633278233
    },
    {
        "content": "<p>And I don't think that it makes sense to split it :(</p>",
        "id": 255962226,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1633278286
    },
    {
        "content": "<p>I hope our exotic integration theory expert will have a lot of courage ( Sébastien <span aria-label=\"looking\" class=\"emoji emoji-1f440\" role=\"img\" title=\"looking\">:looking:</span> )</p>",
        "id": 255962332,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1633278386
    },
    {
        "content": "<p>I remember that <span class=\"user-mention\" data-user-id=\"110050\">@Sebastien Gouezel</span> was definitely not enthusiastic about adding Henstock integration to mathlib.</p>",
        "id": 255962586,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1633278659
    },
    {
        "content": "<p>That's why he is our expert: he knows about Henstock integration</p>",
        "id": 255962710,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1633278774
    },
    {
        "content": "<p>And I don't know if anyone used this version of Henstock integral in <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi mathvariant=\"double-struck\">R</mi><mi>n</mi></msup></mrow><annotation encoding=\"application/x-tex\">\\mathbb R^n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68889em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord mathbb\">R</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.664392em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span></span></span></span></span></span></span></span>.</p>",
        "id": 255962712,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1633278775
    },
    {
        "content": "<p>Most of the code is the same for all box integrals, so you only need to know about Riemann integral to review it.</p>",
        "id": 255963289,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1633279330
    },
    {
        "content": "<p>Actually, if we have a student who wants to learn more about Riemann integral (and related definitions), then reading this PR may be a good way to do it.</p>",
        "id": 255963621,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1633279686
    },
    {
        "content": "<p>IMHO, Henstock integral is exotic only because Riemann integral was defined much earlier. The definition is almost the same, and the proofs are either the same, or simpler.</p>",
        "id": 255963663,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1633279755
    },
    {
        "content": "<p>I'm perfectly happy to add Henstock integration to mathlib, especially with the nice applications towards complex analysis. My point was that the \"main\" integration theory in mathlib should remain Lebesgue integration, though, because it makes sense in a much more general setting, and has in general nicer properties.</p>",
        "id": 255964240,
        "sender_full_name": "Sebastien Gouezel",
        "timestamp": 1633280362
    },
    {
        "content": "<p>Ping here</p>",
        "id": 256292467,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1633457425
    },
    {
        "content": "<p>Working on it :-)</p>",
        "id": 256312702,
        "sender_full_name": "Sebastien Gouezel",
        "timestamp": 1633465240
    },
    {
        "content": "<p>Thanks a lot for a review!</p>",
        "id": 256510752,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1633570850
    },
    {
        "content": "<p>Going through your comments, I've noticed that <em>all</em> of my <code>part (box ι)</code> are better expressed as <code>with_bot (box ι)</code>. I'll try to change to <code>with_bot</code>. If it doesn't cause a large diff, then I'll push it.</p>",
        "id": 256510946,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1633571040
    },
    {
        "content": "<p>Push anyway, I think that's a good idea.</p>",
        "id": 256527359,
        "sender_full_name": "Sebastien Gouezel",
        "timestamp": 1633586046
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib/issues/9630\">#9630</a> is a new dependency that is about <code>finset</code>s, not integrals, so you don't have to be Sebastien to review it.</p>",
        "id": 256899150,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1633813864
    }
]