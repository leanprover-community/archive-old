[
    {
        "content": "<div class=\"codehilite\"><pre><span></span><span class=\"kn\">import</span> <span class=\"n\">analysis</span><span class=\"bp\">.</span><span class=\"n\">real</span> <span class=\"n\">analysis</span><span class=\"bp\">.</span><span class=\"n\">complex</span>\n\n<span class=\"kn\">theorem</span> <span class=\"n\">complex</span><span class=\"bp\">.</span><span class=\"n\">conj_sub</span> <span class=\"o\">(</span><span class=\"n\">z</span> <span class=\"n\">w</span> <span class=\"o\">:</span> <span class=\"n\">ℂ</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"n\">complex</span><span class=\"bp\">.</span><span class=\"n\">conj</span> <span class=\"o\">(</span><span class=\"n\">z</span> <span class=\"bp\">-</span> <span class=\"n\">w</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"n\">complex</span><span class=\"bp\">.</span><span class=\"n\">conj</span> <span class=\"n\">z</span> <span class=\"bp\">-</span> <span class=\"n\">complex</span><span class=\"bp\">.</span><span class=\"n\">conj</span> <span class=\"n\">w</span> <span class=\"o\">:=</span>\n<span class=\"n\">complex</span><span class=\"bp\">.</span><span class=\"n\">conj_add</span> <span class=\"bp\">_</span> <span class=\"bp\">_</span>\n\n<span class=\"kn\">theorem</span> <span class=\"n\">complex</span><span class=\"bp\">.</span><span class=\"n\">uniform_continuous_conj</span> <span class=\"o\">:</span> <span class=\"n\">uniform_continuous</span> <span class=\"n\">complex</span><span class=\"bp\">.</span><span class=\"n\">conj</span> <span class=\"o\">:=</span>\n<span class=\"n\">uniform_continuous_of_metric</span><span class=\"bp\">.</span><span class=\"mi\">2</span> <span class=\"err\">$</span> <span class=\"bp\">λ</span> <span class=\"n\">ε</span> <span class=\"n\">hε</span><span class=\"o\">,</span> <span class=\"bp\">⟨</span><span class=\"n\">ε</span><span class=\"o\">,</span> <span class=\"n\">hε</span><span class=\"o\">,</span>\n<span class=\"bp\">λ</span> <span class=\"n\">z</span> <span class=\"n\">w</span> <span class=\"n\">hzw</span><span class=\"o\">,</span> <span class=\"k\">show</span> <span class=\"n\">complex</span><span class=\"bp\">.</span><span class=\"n\">abs</span> <span class=\"bp\">_</span> <span class=\"bp\">&lt;</span> <span class=\"n\">ε</span><span class=\"o\">,</span> <span class=\"k\">by</span> <span class=\"n\">rwa</span> <span class=\"o\">[</span><span class=\"err\">←</span> <span class=\"n\">complex</span><span class=\"bp\">.</span><span class=\"n\">conj_sub</span><span class=\"o\">,</span> <span class=\"n\">complex</span><span class=\"bp\">.</span><span class=\"n\">abs_conj</span><span class=\"o\">]</span><span class=\"bp\">⟩</span>\n\n<span class=\"kn\">theorem</span> <span class=\"n\">complex</span><span class=\"bp\">.</span><span class=\"n\">uniform_continuous_re</span> <span class=\"o\">:</span> <span class=\"n\">uniform_continuous</span> <span class=\"n\">complex</span><span class=\"bp\">.</span><span class=\"n\">re</span> <span class=\"o\">:=</span>\n<span class=\"n\">uniform_continuous_of_metric</span><span class=\"bp\">.</span><span class=\"mi\">2</span> <span class=\"err\">$</span> <span class=\"bp\">λ</span> <span class=\"n\">ε</span> <span class=\"n\">hε</span><span class=\"o\">,</span> <span class=\"bp\">⟨</span><span class=\"n\">ε</span><span class=\"o\">,</span> <span class=\"n\">hε</span><span class=\"o\">,</span> <span class=\"bp\">λ</span> <span class=\"n\">z</span> <span class=\"n\">w</span> <span class=\"n\">hzw</span><span class=\"o\">,</span>\n<span class=\"k\">calc</span>  <span class=\"n\">dist</span> <span class=\"n\">z</span><span class=\"bp\">.</span><span class=\"n\">re</span> <span class=\"n\">w</span><span class=\"bp\">.</span><span class=\"n\">re</span>\n    <span class=\"bp\">≤</span> <span class=\"n\">complex</span><span class=\"bp\">.</span><span class=\"n\">abs</span> <span class=\"o\">(</span><span class=\"n\">z</span><span class=\"bp\">-</span><span class=\"n\">w</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"n\">complex</span><span class=\"bp\">.</span><span class=\"n\">abs_re_le_abs</span> <span class=\"o\">(</span><span class=\"n\">z</span><span class=\"bp\">-</span><span class=\"n\">w</span><span class=\"o\">)</span>\n<span class=\"bp\">...</span> <span class=\"bp\">&lt;</span> <span class=\"n\">ε</span> <span class=\"o\">:</span> <span class=\"n\">hzw</span><span class=\"bp\">⟩</span>\n\n<span class=\"kn\">theorem</span> <span class=\"n\">complex</span><span class=\"bp\">.</span><span class=\"n\">uniform_continuous_im</span> <span class=\"o\">:</span> <span class=\"n\">uniform_continuous</span> <span class=\"n\">complex</span><span class=\"bp\">.</span><span class=\"n\">im</span> <span class=\"o\">:=</span>\n<span class=\"n\">uniform_continuous_of_metric</span><span class=\"bp\">.</span><span class=\"mi\">2</span> <span class=\"err\">$</span> <span class=\"bp\">λ</span> <span class=\"n\">ε</span> <span class=\"n\">hε</span><span class=\"o\">,</span> <span class=\"bp\">⟨</span><span class=\"n\">ε</span><span class=\"o\">,</span> <span class=\"n\">hε</span><span class=\"o\">,</span> <span class=\"bp\">λ</span> <span class=\"n\">z</span> <span class=\"n\">w</span> <span class=\"n\">hzw</span><span class=\"o\">,</span>\n<span class=\"k\">calc</span>  <span class=\"n\">dist</span> <span class=\"n\">z</span><span class=\"bp\">.</span><span class=\"n\">im</span> <span class=\"n\">w</span><span class=\"bp\">.</span><span class=\"n\">im</span>\n    <span class=\"bp\">≤</span> <span class=\"n\">complex</span><span class=\"bp\">.</span><span class=\"n\">abs</span> <span class=\"o\">(</span><span class=\"n\">z</span><span class=\"bp\">-</span><span class=\"n\">w</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"n\">complex</span><span class=\"bp\">.</span><span class=\"n\">abs_im_le_abs</span> <span class=\"o\">(</span><span class=\"n\">z</span><span class=\"bp\">-</span><span class=\"n\">w</span><span class=\"o\">)</span>\n<span class=\"bp\">...</span> <span class=\"bp\">&lt;</span> <span class=\"n\">ε</span> <span class=\"o\">:</span> <span class=\"n\">hzw</span><span class=\"bp\">⟩</span>\n\n<span class=\"kn\">example</span> <span class=\"o\">(</span><span class=\"n\">f</span> <span class=\"o\">:</span> <span class=\"n\">filter</span> <span class=\"n\">ℂ</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">hf</span> <span class=\"o\">:</span> <span class=\"n\">cauchy</span> <span class=\"n\">f</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"bp\">∃</span> <span class=\"n\">x</span><span class=\"o\">,</span> <span class=\"n\">f</span> <span class=\"bp\">≤</span> <span class=\"n\">nhds</span> <span class=\"n\">x</span> <span class=\"o\">:=</span>\n<span class=\"k\">let</span> <span class=\"bp\">⟨</span><span class=\"n\">xr</span><span class=\"o\">,</span> <span class=\"n\">hxr</span><span class=\"bp\">⟩</span> <span class=\"o\">:=</span> <span class=\"n\">complete_space</span><span class=\"bp\">.</span><span class=\"n\">complete</span>\n  <span class=\"o\">(</span><span class=\"n\">cauchy_map</span> <span class=\"n\">complex</span><span class=\"bp\">.</span><span class=\"n\">uniform_continuous_re</span> <span class=\"n\">hf</span><span class=\"o\">)</span> <span class=\"k\">in</span>\n<span class=\"k\">let</span> <span class=\"bp\">⟨</span><span class=\"n\">xi</span><span class=\"o\">,</span> <span class=\"n\">hxi</span><span class=\"bp\">⟩</span> <span class=\"o\">:=</span> <span class=\"n\">complete_space</span><span class=\"bp\">.</span><span class=\"n\">complete</span>\n  <span class=\"o\">(</span><span class=\"n\">cauchy_map</span> <span class=\"n\">complex</span><span class=\"bp\">.</span><span class=\"n\">uniform_continuous_im</span> <span class=\"n\">hf</span><span class=\"o\">)</span> <span class=\"k\">in</span>\n<span class=\"bp\">⟨⟨</span><span class=\"n\">xr</span><span class=\"o\">,</span> <span class=\"n\">xi</span><span class=\"bp\">⟩</span><span class=\"o\">,</span> <span class=\"n\">sorry</span><span class=\"bp\">⟩</span>\n\n<span class=\"c\">/-</span><span class=\"cm\"></span>\n<span class=\"cm\">state:</span>\n<span class=\"cm\">f : filter ℂ,</span>\n<span class=\"cm\">hf : cauchy f,</span>\n<span class=\"cm\">xr : ℝ,</span>\n<span class=\"cm\">hxr : filter.map complex.re f ≤ nhds xr,</span>\n<span class=\"cm\">xi : ℝ,</span>\n<span class=\"cm\">hxi : filter.map complex.im f ≤ nhds xi</span>\n<span class=\"cm\">⊢ f ≤ nhds {re := xr, im := xi}</span>\n<span class=\"cm\">-/</span>\n</pre></div>\n\n\n<p>half-completed proof</p>",
        "id": 135222007,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1538693976
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"120943\">@Andreas Swerdlow</span></p>",
        "id": 135222089,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1538694020
    },
    {
        "content": "<div class=\"codehilite\"><pre><span></span><span class=\"kn\">import</span> <span class=\"n\">analysis</span><span class=\"bp\">.</span><span class=\"n\">real</span> <span class=\"n\">analysis</span><span class=\"bp\">.</span><span class=\"n\">complex</span>\n\n<span class=\"kn\">theorem</span> <span class=\"n\">complex</span><span class=\"bp\">.</span><span class=\"n\">conj_sub</span> <span class=\"o\">(</span><span class=\"n\">z</span> <span class=\"n\">w</span> <span class=\"o\">:</span> <span class=\"n\">ℂ</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"n\">complex</span><span class=\"bp\">.</span><span class=\"n\">conj</span> <span class=\"o\">(</span><span class=\"n\">z</span> <span class=\"bp\">-</span> <span class=\"n\">w</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"n\">complex</span><span class=\"bp\">.</span><span class=\"n\">conj</span> <span class=\"n\">z</span> <span class=\"bp\">-</span> <span class=\"n\">complex</span><span class=\"bp\">.</span><span class=\"n\">conj</span> <span class=\"n\">w</span> <span class=\"o\">:=</span>\n<span class=\"n\">complex</span><span class=\"bp\">.</span><span class=\"n\">conj_add</span> <span class=\"bp\">_</span> <span class=\"bp\">_</span>\n\n<span class=\"kn\">theorem</span> <span class=\"n\">complex</span><span class=\"bp\">.</span><span class=\"n\">uniform_continuous_conj</span> <span class=\"o\">:</span> <span class=\"n\">uniform_continuous</span> <span class=\"n\">complex</span><span class=\"bp\">.</span><span class=\"n\">conj</span> <span class=\"o\">:=</span>\n<span class=\"n\">uniform_continuous_of_metric</span><span class=\"bp\">.</span><span class=\"mi\">2</span> <span class=\"err\">$</span> <span class=\"bp\">λ</span> <span class=\"n\">ε</span> <span class=\"n\">hε</span><span class=\"o\">,</span> <span class=\"bp\">⟨</span><span class=\"n\">ε</span><span class=\"o\">,</span> <span class=\"n\">hε</span><span class=\"o\">,</span>\n<span class=\"bp\">λ</span> <span class=\"n\">z</span> <span class=\"n\">w</span> <span class=\"n\">hzw</span><span class=\"o\">,</span> <span class=\"k\">show</span> <span class=\"n\">complex</span><span class=\"bp\">.</span><span class=\"n\">abs</span> <span class=\"bp\">_</span> <span class=\"bp\">&lt;</span> <span class=\"n\">ε</span><span class=\"o\">,</span> <span class=\"k\">by</span> <span class=\"n\">rwa</span> <span class=\"o\">[</span><span class=\"err\">←</span> <span class=\"n\">complex</span><span class=\"bp\">.</span><span class=\"n\">conj_sub</span><span class=\"o\">,</span> <span class=\"n\">complex</span><span class=\"bp\">.</span><span class=\"n\">abs_conj</span><span class=\"o\">]</span><span class=\"bp\">⟩</span>\n\n<span class=\"kn\">theorem</span> <span class=\"n\">complex</span><span class=\"bp\">.</span><span class=\"n\">uniform_continuous_re</span> <span class=\"o\">:</span> <span class=\"n\">uniform_continuous</span> <span class=\"n\">complex</span><span class=\"bp\">.</span><span class=\"n\">re</span> <span class=\"o\">:=</span>\n<span class=\"n\">uniform_continuous_of_metric</span><span class=\"bp\">.</span><span class=\"mi\">2</span> <span class=\"err\">$</span> <span class=\"bp\">λ</span> <span class=\"n\">ε</span> <span class=\"n\">hε</span><span class=\"o\">,</span> <span class=\"bp\">⟨</span><span class=\"n\">ε</span><span class=\"o\">,</span> <span class=\"n\">hε</span><span class=\"o\">,</span> <span class=\"bp\">λ</span> <span class=\"n\">z</span> <span class=\"n\">w</span> <span class=\"n\">hzw</span><span class=\"o\">,</span>\n<span class=\"k\">calc</span>  <span class=\"n\">dist</span> <span class=\"n\">z</span><span class=\"bp\">.</span><span class=\"n\">re</span> <span class=\"n\">w</span><span class=\"bp\">.</span><span class=\"n\">re</span>\n    <span class=\"bp\">≤</span> <span class=\"n\">complex</span><span class=\"bp\">.</span><span class=\"n\">abs</span> <span class=\"o\">(</span><span class=\"n\">z</span><span class=\"bp\">-</span><span class=\"n\">w</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"n\">complex</span><span class=\"bp\">.</span><span class=\"n\">abs_re_le_abs</span> <span class=\"o\">(</span><span class=\"n\">z</span><span class=\"bp\">-</span><span class=\"n\">w</span><span class=\"o\">)</span>\n<span class=\"bp\">...</span> <span class=\"bp\">&lt;</span> <span class=\"n\">ε</span> <span class=\"o\">:</span> <span class=\"n\">hzw</span><span class=\"bp\">⟩</span>\n\n<span class=\"kn\">theorem</span> <span class=\"n\">complex</span><span class=\"bp\">.</span><span class=\"n\">uniform_continuous_im</span> <span class=\"o\">:</span> <span class=\"n\">uniform_continuous</span> <span class=\"n\">complex</span><span class=\"bp\">.</span><span class=\"n\">im</span> <span class=\"o\">:=</span>\n<span class=\"n\">uniform_continuous_of_metric</span><span class=\"bp\">.</span><span class=\"mi\">2</span> <span class=\"err\">$</span> <span class=\"bp\">λ</span> <span class=\"n\">ε</span> <span class=\"n\">hε</span><span class=\"o\">,</span> <span class=\"bp\">⟨</span><span class=\"n\">ε</span><span class=\"o\">,</span> <span class=\"n\">hε</span><span class=\"o\">,</span> <span class=\"bp\">λ</span> <span class=\"n\">z</span> <span class=\"n\">w</span> <span class=\"n\">hzw</span><span class=\"o\">,</span>\n<span class=\"k\">calc</span>  <span class=\"n\">dist</span> <span class=\"n\">z</span><span class=\"bp\">.</span><span class=\"n\">im</span> <span class=\"n\">w</span><span class=\"bp\">.</span><span class=\"n\">im</span>\n    <span class=\"bp\">≤</span> <span class=\"n\">complex</span><span class=\"bp\">.</span><span class=\"n\">abs</span> <span class=\"o\">(</span><span class=\"n\">z</span><span class=\"bp\">-</span><span class=\"n\">w</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"n\">complex</span><span class=\"bp\">.</span><span class=\"n\">abs_im_le_abs</span> <span class=\"o\">(</span><span class=\"n\">z</span><span class=\"bp\">-</span><span class=\"n\">w</span><span class=\"o\">)</span>\n<span class=\"bp\">...</span> <span class=\"bp\">&lt;</span> <span class=\"n\">ε</span> <span class=\"o\">:</span> <span class=\"n\">hzw</span><span class=\"bp\">⟩</span>\n\n<span class=\"kn\">theorem</span> <span class=\"n\">complex</span><span class=\"bp\">.</span><span class=\"n\">uniform_continuous_of_real</span> <span class=\"o\">:</span> <span class=\"n\">uniform_continuous</span> <span class=\"n\">complex</span><span class=\"bp\">.</span><span class=\"n\">of_real</span> <span class=\"o\">:=</span>\n<span class=\"n\">uniform_continuous_of_metric</span><span class=\"bp\">.</span><span class=\"mi\">2</span> <span class=\"err\">$</span> <span class=\"bp\">λ</span> <span class=\"n\">ε</span> <span class=\"n\">hε</span><span class=\"o\">,</span> <span class=\"bp\">⟨</span><span class=\"n\">ε</span><span class=\"o\">,</span> <span class=\"n\">hε</span><span class=\"o\">,</span> <span class=\"bp\">λ</span> <span class=\"n\">z</span> <span class=\"n\">w</span> <span class=\"n\">hzw</span><span class=\"o\">,</span>\n<span class=\"k\">calc</span>  <span class=\"n\">dist</span> <span class=\"o\">(</span><span class=\"n\">complex</span><span class=\"bp\">.</span><span class=\"n\">of_real</span> <span class=\"n\">z</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">complex</span><span class=\"bp\">.</span><span class=\"n\">of_real</span> <span class=\"n\">w</span><span class=\"o\">)</span>\n    <span class=\"bp\">=</span> <span class=\"n\">dist</span> <span class=\"n\">z</span> <span class=\"n\">w</span> <span class=\"o\">:</span> <span class=\"n\">complex</span><span class=\"bp\">.</span><span class=\"n\">abs_of_real</span> <span class=\"bp\">_</span>\n<span class=\"bp\">...</span> <span class=\"bp\">&lt;</span> <span class=\"n\">ε</span> <span class=\"o\">:</span> <span class=\"n\">hzw</span><span class=\"bp\">⟩</span>\n\n<span class=\"kn\">example</span> <span class=\"o\">(</span><span class=\"n\">f</span> <span class=\"o\">:</span> <span class=\"n\">filter</span> <span class=\"n\">ℂ</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">hf</span> <span class=\"o\">:</span> <span class=\"n\">cauchy</span> <span class=\"n\">f</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"bp\">∃</span> <span class=\"n\">x</span><span class=\"o\">,</span> <span class=\"n\">f</span> <span class=\"bp\">≤</span> <span class=\"n\">nhds</span> <span class=\"n\">x</span> <span class=\"o\">:=</span>\n<span class=\"k\">let</span> <span class=\"bp\">⟨</span><span class=\"n\">xr</span><span class=\"o\">,</span> <span class=\"n\">hxr</span><span class=\"bp\">⟩</span> <span class=\"o\">:=</span> <span class=\"n\">complete_space</span><span class=\"bp\">.</span><span class=\"n\">complete</span>\n  <span class=\"o\">(</span><span class=\"n\">cauchy_map</span> <span class=\"n\">complex</span><span class=\"bp\">.</span><span class=\"n\">uniform_continuous_re</span> <span class=\"n\">hf</span><span class=\"o\">)</span> <span class=\"k\">in</span>\n<span class=\"k\">let</span> <span class=\"bp\">⟨</span><span class=\"n\">xi</span><span class=\"o\">,</span> <span class=\"n\">hxi</span><span class=\"bp\">⟩</span> <span class=\"o\">:=</span> <span class=\"n\">complete_space</span><span class=\"bp\">.</span><span class=\"n\">complete</span>\n  <span class=\"o\">(</span><span class=\"n\">cauchy_map</span> <span class=\"n\">complex</span><span class=\"bp\">.</span><span class=\"n\">uniform_continuous_im</span> <span class=\"n\">hf</span><span class=\"o\">)</span> <span class=\"k\">in</span>\n<span class=\"k\">have</span> <span class=\"n\">hxr2</span> <span class=\"o\">:</span> <span class=\"n\">filter</span><span class=\"bp\">.</span><span class=\"n\">tendsto</span> <span class=\"o\">(</span><span class=\"n\">complex</span><span class=\"bp\">.</span><span class=\"n\">of_real</span> <span class=\"err\">∘</span> <span class=\"n\">complex</span><span class=\"bp\">.</span><span class=\"n\">re</span><span class=\"o\">)</span> <span class=\"n\">f</span> <span class=\"o\">(</span><span class=\"n\">nhds</span> <span class=\"o\">(</span><span class=\"n\">complex</span><span class=\"bp\">.</span><span class=\"n\">of_real</span> <span class=\"n\">xr</span><span class=\"o\">)),</span>\n  <span class=\"k\">from</span> <span class=\"n\">filter</span><span class=\"bp\">.</span><span class=\"n\">tendsto</span><span class=\"bp\">.</span><span class=\"n\">comp</span> <span class=\"n\">hxr</span> <span class=\"o\">(</span><span class=\"n\">continuous</span><span class=\"bp\">.</span><span class=\"n\">tendsto</span>\n    <span class=\"o\">(</span><span class=\"n\">uniform_continuous</span><span class=\"bp\">.</span><span class=\"n\">continuous</span> <span class=\"n\">complex</span><span class=\"bp\">.</span><span class=\"n\">uniform_continuous_of_real</span><span class=\"o\">)</span> <span class=\"n\">xr</span><span class=\"o\">),</span>\n<span class=\"k\">have</span> <span class=\"n\">hxi2</span> <span class=\"o\">:</span> <span class=\"n\">filter</span><span class=\"bp\">.</span><span class=\"n\">tendsto</span> <span class=\"o\">(</span><span class=\"n\">complex</span><span class=\"bp\">.</span><span class=\"n\">of_real</span> <span class=\"err\">∘</span> <span class=\"n\">complex</span><span class=\"bp\">.</span><span class=\"n\">im</span><span class=\"o\">)</span> <span class=\"n\">f</span> <span class=\"o\">(</span><span class=\"n\">nhds</span> <span class=\"o\">(</span><span class=\"n\">complex</span><span class=\"bp\">.</span><span class=\"n\">of_real</span> <span class=\"n\">xi</span><span class=\"o\">)),</span>\n  <span class=\"k\">from</span> <span class=\"n\">filter</span><span class=\"bp\">.</span><span class=\"n\">tendsto</span><span class=\"bp\">.</span><span class=\"n\">comp</span> <span class=\"n\">hxi</span> <span class=\"o\">(</span><span class=\"n\">continuous</span><span class=\"bp\">.</span><span class=\"n\">tendsto</span>\n    <span class=\"o\">(</span><span class=\"n\">uniform_continuous</span><span class=\"bp\">.</span><span class=\"n\">continuous</span> <span class=\"n\">complex</span><span class=\"bp\">.</span><span class=\"n\">uniform_continuous_of_real</span><span class=\"o\">)</span> <span class=\"n\">xi</span><span class=\"o\">),</span>\n<span class=\"k\">have</span> <span class=\"n\">filter</span><span class=\"bp\">.</span><span class=\"n\">tendsto</span> <span class=\"o\">(</span><span class=\"bp\">λ</span> <span class=\"n\">z</span><span class=\"o\">:</span><span class=\"n\">ℂ</span><span class=\"o\">,</span> <span class=\"o\">(</span><span class=\"n\">z</span><span class=\"bp\">.</span><span class=\"n\">re</span> <span class=\"bp\">+</span> <span class=\"n\">z</span><span class=\"bp\">.</span><span class=\"n\">im</span> <span class=\"bp\">*</span> <span class=\"n\">complex</span><span class=\"bp\">.</span><span class=\"n\">I</span><span class=\"o\">:</span><span class=\"n\">ℂ</span><span class=\"o\">))</span> <span class=\"n\">f</span> <span class=\"o\">(</span><span class=\"n\">nhds</span> <span class=\"bp\">_</span><span class=\"o\">),</span>\n  <span class=\"k\">from</span> <span class=\"n\">tendsto_add</span> <span class=\"n\">hxr2</span> <span class=\"o\">(</span><span class=\"n\">tendsto_mul</span> <span class=\"n\">hxi2</span> <span class=\"o\">(</span><span class=\"bp\">@</span><span class=\"n\">tendsto_const_nhds</span> <span class=\"bp\">_</span> <span class=\"bp\">_</span> <span class=\"bp\">_</span> <span class=\"n\">complex</span><span class=\"bp\">.</span><span class=\"n\">I</span> <span class=\"bp\">_</span><span class=\"o\">)),</span>\n<span class=\"bp\">⟨</span><span class=\"o\">(</span><span class=\"n\">xr</span><span class=\"bp\">+</span><span class=\"n\">xi</span><span class=\"bp\">*</span><span class=\"n\">complex</span><span class=\"bp\">.</span><span class=\"n\">I</span><span class=\"o\">),</span> <span class=\"k\">by</span> <span class=\"n\">rw</span> <span class=\"o\">[</span><span class=\"n\">funext</span> <span class=\"n\">complex</span><span class=\"bp\">.</span><span class=\"n\">re_add_im</span><span class=\"o\">]</span> <span class=\"n\">at</span> <span class=\"n\">this</span><span class=\"bp\">;</span> <span class=\"n\">rw</span> <span class=\"o\">[</span><span class=\"err\">←</span> <span class=\"o\">(</span><span class=\"n\">filter</span><span class=\"bp\">.</span><span class=\"n\">map_id</span> <span class=\"o\">:</span> <span class=\"bp\">_</span> <span class=\"bp\">=</span> <span class=\"n\">f</span><span class=\"o\">)]</span><span class=\"bp\">;</span> <span class=\"n\">exact</span> <span class=\"n\">this</span><span class=\"bp\">⟩</span>\n</pre></div>",
        "id": 135222945,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1538695274
    },
    {
        "content": "<p>complete proof</p>",
        "id": 135222946,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1538695275
    },
    {
        "content": "<p>Wow thank you!</p>",
        "id": 135224448,
        "sender_full_name": "Andreas Swerdlow",
        "timestamp": 1538697497
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"122022\">@Joseph Corneli</span> look what Kenny did</p>",
        "id": 135224468,
        "sender_full_name": "Andreas Swerdlow",
        "timestamp": 1538697548
    },
    {
        "content": "<p>I should probably extract a lemma</p>",
        "id": 135224585,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1538697681
    },
    {
        "content": "<p>that proof looks like a good advertisement for bundling continuous functions</p>",
        "id": 135224597,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1538697708
    },
    {
        "content": "<p>For a while I was thinking that maybe we want to work with continuous functions as a predicate, but compositional proofs of continuity really suck from a readability standpoint</p>",
        "id": 135224662,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1538697768
    },
    {
        "content": "<p>another thing to refactor :P</p>",
        "id": 135224685,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1538697797
    },
    {
        "content": "<div class=\"codehilite\"><pre><span></span><span class=\"kn\">import</span> <span class=\"n\">analysis</span><span class=\"bp\">.</span><span class=\"n\">real</span> <span class=\"n\">analysis</span><span class=\"bp\">.</span><span class=\"n\">complex</span>\n\n<span class=\"kn\">theorem</span> <span class=\"n\">complex</span><span class=\"bp\">.</span><span class=\"n\">conj_sub</span> <span class=\"o\">(</span><span class=\"n\">z</span> <span class=\"n\">w</span> <span class=\"o\">:</span> <span class=\"n\">ℂ</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"n\">complex</span><span class=\"bp\">.</span><span class=\"n\">conj</span> <span class=\"o\">(</span><span class=\"n\">z</span> <span class=\"bp\">-</span> <span class=\"n\">w</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"n\">complex</span><span class=\"bp\">.</span><span class=\"n\">conj</span> <span class=\"n\">z</span> <span class=\"bp\">-</span> <span class=\"n\">complex</span><span class=\"bp\">.</span><span class=\"n\">conj</span> <span class=\"n\">w</span> <span class=\"o\">:=</span>\n<span class=\"n\">complex</span><span class=\"bp\">.</span><span class=\"n\">conj_add</span> <span class=\"bp\">_</span> <span class=\"bp\">_</span>\n\n<span class=\"kn\">theorem</span> <span class=\"n\">complex</span><span class=\"bp\">.</span><span class=\"n\">uniform_continuous_conj</span> <span class=\"o\">:</span> <span class=\"n\">uniform_continuous</span> <span class=\"n\">complex</span><span class=\"bp\">.</span><span class=\"n\">conj</span> <span class=\"o\">:=</span>\n<span class=\"n\">uniform_continuous_of_metric</span><span class=\"bp\">.</span><span class=\"mi\">2</span> <span class=\"err\">$</span> <span class=\"bp\">λ</span> <span class=\"n\">ε</span> <span class=\"n\">hε</span><span class=\"o\">,</span> <span class=\"bp\">⟨</span><span class=\"n\">ε</span><span class=\"o\">,</span> <span class=\"n\">hε</span><span class=\"o\">,</span>\n<span class=\"bp\">λ</span> <span class=\"n\">z</span> <span class=\"n\">w</span> <span class=\"n\">hzw</span><span class=\"o\">,</span> <span class=\"k\">show</span> <span class=\"n\">complex</span><span class=\"bp\">.</span><span class=\"n\">abs</span> <span class=\"bp\">_</span> <span class=\"bp\">&lt;</span> <span class=\"n\">ε</span><span class=\"o\">,</span> <span class=\"k\">by</span> <span class=\"n\">rwa</span> <span class=\"o\">[</span><span class=\"err\">←</span> <span class=\"n\">complex</span><span class=\"bp\">.</span><span class=\"n\">conj_sub</span><span class=\"o\">,</span> <span class=\"n\">complex</span><span class=\"bp\">.</span><span class=\"n\">abs_conj</span><span class=\"o\">]</span><span class=\"bp\">⟩</span>\n\n<span class=\"kn\">theorem</span> <span class=\"n\">complex</span><span class=\"bp\">.</span><span class=\"n\">uniform_continuous_re</span> <span class=\"o\">:</span> <span class=\"n\">uniform_continuous</span> <span class=\"n\">complex</span><span class=\"bp\">.</span><span class=\"n\">re</span> <span class=\"o\">:=</span>\n<span class=\"n\">uniform_continuous_of_metric</span><span class=\"bp\">.</span><span class=\"mi\">2</span> <span class=\"err\">$</span> <span class=\"bp\">λ</span> <span class=\"n\">ε</span> <span class=\"n\">hε</span><span class=\"o\">,</span> <span class=\"bp\">⟨</span><span class=\"n\">ε</span><span class=\"o\">,</span> <span class=\"n\">hε</span><span class=\"o\">,</span> <span class=\"bp\">λ</span> <span class=\"n\">z</span> <span class=\"n\">w</span> <span class=\"n\">hzw</span><span class=\"o\">,</span>\n<span class=\"k\">calc</span>  <span class=\"n\">dist</span> <span class=\"n\">z</span><span class=\"bp\">.</span><span class=\"n\">re</span> <span class=\"n\">w</span><span class=\"bp\">.</span><span class=\"n\">re</span>\n    <span class=\"bp\">≤</span> <span class=\"n\">complex</span><span class=\"bp\">.</span><span class=\"n\">abs</span> <span class=\"o\">(</span><span class=\"n\">z</span><span class=\"bp\">-</span><span class=\"n\">w</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"n\">complex</span><span class=\"bp\">.</span><span class=\"n\">abs_re_le_abs</span> <span class=\"o\">(</span><span class=\"n\">z</span><span class=\"bp\">-</span><span class=\"n\">w</span><span class=\"o\">)</span>\n<span class=\"bp\">...</span> <span class=\"bp\">&lt;</span> <span class=\"n\">ε</span> <span class=\"o\">:</span> <span class=\"n\">hzw</span><span class=\"bp\">⟩</span>\n\n<span class=\"kn\">theorem</span> <span class=\"n\">complex</span><span class=\"bp\">.</span><span class=\"n\">uniform_continuous_im</span> <span class=\"o\">:</span> <span class=\"n\">uniform_continuous</span> <span class=\"n\">complex</span><span class=\"bp\">.</span><span class=\"n\">im</span> <span class=\"o\">:=</span>\n<span class=\"n\">uniform_continuous_of_metric</span><span class=\"bp\">.</span><span class=\"mi\">2</span> <span class=\"err\">$</span> <span class=\"bp\">λ</span> <span class=\"n\">ε</span> <span class=\"n\">hε</span><span class=\"o\">,</span> <span class=\"bp\">⟨</span><span class=\"n\">ε</span><span class=\"o\">,</span> <span class=\"n\">hε</span><span class=\"o\">,</span> <span class=\"bp\">λ</span> <span class=\"n\">z</span> <span class=\"n\">w</span> <span class=\"n\">hzw</span><span class=\"o\">,</span>\n<span class=\"k\">calc</span>  <span class=\"n\">dist</span> <span class=\"n\">z</span><span class=\"bp\">.</span><span class=\"n\">im</span> <span class=\"n\">w</span><span class=\"bp\">.</span><span class=\"n\">im</span>\n    <span class=\"bp\">≤</span> <span class=\"n\">complex</span><span class=\"bp\">.</span><span class=\"n\">abs</span> <span class=\"o\">(</span><span class=\"n\">z</span><span class=\"bp\">-</span><span class=\"n\">w</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"n\">complex</span><span class=\"bp\">.</span><span class=\"n\">abs_im_le_abs</span> <span class=\"o\">(</span><span class=\"n\">z</span><span class=\"bp\">-</span><span class=\"n\">w</span><span class=\"o\">)</span>\n<span class=\"bp\">...</span> <span class=\"bp\">&lt;</span> <span class=\"n\">ε</span> <span class=\"o\">:</span> <span class=\"n\">hzw</span><span class=\"bp\">⟩</span>\n\n<span class=\"kn\">theorem</span> <span class=\"n\">complex</span><span class=\"bp\">.</span><span class=\"n\">uniform_continuous_of_real</span> <span class=\"o\">:</span> <span class=\"n\">uniform_continuous</span> <span class=\"n\">complex</span><span class=\"bp\">.</span><span class=\"n\">of_real</span> <span class=\"o\">:=</span>\n<span class=\"n\">uniform_continuous_of_metric</span><span class=\"bp\">.</span><span class=\"mi\">2</span> <span class=\"err\">$</span> <span class=\"bp\">λ</span> <span class=\"n\">ε</span> <span class=\"n\">hε</span><span class=\"o\">,</span> <span class=\"bp\">⟨</span><span class=\"n\">ε</span><span class=\"o\">,</span> <span class=\"n\">hε</span><span class=\"o\">,</span> <span class=\"bp\">λ</span> <span class=\"n\">z</span> <span class=\"n\">w</span> <span class=\"n\">hzw</span><span class=\"o\">,</span>\n<span class=\"k\">calc</span>  <span class=\"n\">dist</span> <span class=\"o\">(</span><span class=\"n\">complex</span><span class=\"bp\">.</span><span class=\"n\">of_real</span> <span class=\"n\">z</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">complex</span><span class=\"bp\">.</span><span class=\"n\">of_real</span> <span class=\"n\">w</span><span class=\"o\">)</span>\n    <span class=\"bp\">=</span> <span class=\"n\">dist</span> <span class=\"n\">z</span> <span class=\"n\">w</span> <span class=\"o\">:</span> <span class=\"n\">complex</span><span class=\"bp\">.</span><span class=\"n\">abs_of_real</span> <span class=\"bp\">_</span>\n<span class=\"bp\">...</span> <span class=\"bp\">&lt;</span> <span class=\"n\">ε</span> <span class=\"o\">:</span> <span class=\"n\">hzw</span><span class=\"bp\">⟩</span>\n\n<span class=\"kn\">theorem</span> <span class=\"n\">complex</span><span class=\"bp\">.</span><span class=\"n\">continuous_conj</span> <span class=\"o\">:</span> <span class=\"n\">continuous</span> <span class=\"n\">complex</span><span class=\"bp\">.</span><span class=\"n\">conj</span> <span class=\"o\">:=</span>\n<span class=\"n\">uniform_continuous</span><span class=\"bp\">.</span><span class=\"n\">continuous</span> <span class=\"n\">complex</span><span class=\"bp\">.</span><span class=\"n\">uniform_continuous_conj</span>\n\n<span class=\"kn\">theorem</span> <span class=\"n\">complex</span><span class=\"bp\">.</span><span class=\"n\">continuous_re</span> <span class=\"o\">:</span> <span class=\"n\">continuous</span> <span class=\"n\">complex</span><span class=\"bp\">.</span><span class=\"n\">re</span> <span class=\"o\">:=</span>\n<span class=\"n\">uniform_continuous</span><span class=\"bp\">.</span><span class=\"n\">continuous</span> <span class=\"n\">complex</span><span class=\"bp\">.</span><span class=\"n\">uniform_continuous_re</span>\n\n<span class=\"kn\">theorem</span> <span class=\"n\">complex</span><span class=\"bp\">.</span><span class=\"n\">continuous_im</span> <span class=\"o\">:</span> <span class=\"n\">continuous</span> <span class=\"n\">complex</span><span class=\"bp\">.</span><span class=\"n\">im</span> <span class=\"o\">:=</span>\n<span class=\"n\">uniform_continuous</span><span class=\"bp\">.</span><span class=\"n\">continuous</span> <span class=\"n\">complex</span><span class=\"bp\">.</span><span class=\"n\">uniform_continuous_im</span>\n\n<span class=\"kn\">theorem</span> <span class=\"n\">complex</span><span class=\"bp\">.</span><span class=\"n\">continuous_of_real</span> <span class=\"o\">:</span> <span class=\"n\">continuous</span> <span class=\"n\">complex</span><span class=\"bp\">.</span><span class=\"n\">of_real</span> <span class=\"o\">:=</span>\n<span class=\"n\">uniform_continuous</span><span class=\"bp\">.</span><span class=\"n\">continuous</span> <span class=\"n\">complex</span><span class=\"bp\">.</span><span class=\"n\">uniform_continuous_of_real</span>\n\n<span class=\"kn\">theorem</span> <span class=\"n\">complex</span><span class=\"bp\">.</span><span class=\"n\">filter_le_iff</span> <span class=\"o\">(</span><span class=\"n\">f</span> <span class=\"o\">:</span> <span class=\"n\">filter</span> <span class=\"n\">ℂ</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">z</span> <span class=\"o\">:</span> <span class=\"n\">ℂ</span><span class=\"o\">)</span> <span class=\"o\">:</span>\n  <span class=\"n\">f</span> <span class=\"bp\">≤</span> <span class=\"n\">nhds</span> <span class=\"n\">z</span> <span class=\"bp\">↔</span> <span class=\"n\">filter</span><span class=\"bp\">.</span><span class=\"n\">tendsto</span> <span class=\"n\">complex</span><span class=\"bp\">.</span><span class=\"n\">re</span> <span class=\"n\">f</span> <span class=\"o\">(</span><span class=\"n\">nhds</span> <span class=\"n\">z</span><span class=\"bp\">.</span><span class=\"n\">re</span><span class=\"o\">)</span> <span class=\"bp\">∧</span> <span class=\"n\">filter</span><span class=\"bp\">.</span><span class=\"n\">tendsto</span> <span class=\"n\">complex</span><span class=\"bp\">.</span><span class=\"n\">im</span> <span class=\"n\">f</span> <span class=\"o\">(</span><span class=\"n\">nhds</span> <span class=\"n\">z</span><span class=\"bp\">.</span><span class=\"n\">im</span><span class=\"o\">)</span> <span class=\"o\">:=</span>\n<span class=\"bp\">⟨λ</span> <span class=\"n\">h</span><span class=\"o\">,</span> <span class=\"bp\">⟨</span><span class=\"n\">le_trans</span> <span class=\"o\">(</span><span class=\"n\">filter</span><span class=\"bp\">.</span><span class=\"n\">map_mono</span> <span class=\"n\">h</span><span class=\"o\">)</span>\n    <span class=\"o\">(</span><span class=\"n\">continuous</span><span class=\"bp\">.</span><span class=\"n\">tendsto</span> <span class=\"n\">complex</span><span class=\"bp\">.</span><span class=\"n\">continuous_re</span> <span class=\"n\">z</span><span class=\"o\">),</span>\n  <span class=\"n\">le_trans</span> <span class=\"o\">(</span><span class=\"n\">filter</span><span class=\"bp\">.</span><span class=\"n\">map_mono</span> <span class=\"n\">h</span><span class=\"o\">)</span>\n    <span class=\"o\">(</span><span class=\"n\">continuous</span><span class=\"bp\">.</span><span class=\"n\">tendsto</span> <span class=\"n\">complex</span><span class=\"bp\">.</span><span class=\"n\">continuous_im</span> <span class=\"n\">z</span><span class=\"o\">)</span><span class=\"bp\">⟩</span><span class=\"o\">,</span>\n<span class=\"bp\">λ</span> <span class=\"bp\">⟨</span><span class=\"n\">hr</span><span class=\"o\">,</span> <span class=\"n\">hi</span><span class=\"bp\">⟩</span><span class=\"o\">,</span>\n<span class=\"k\">have</span> <span class=\"n\">hr2</span> <span class=\"o\">:</span> <span class=\"n\">filter</span><span class=\"bp\">.</span><span class=\"n\">tendsto</span> <span class=\"o\">(</span><span class=\"bp\">λ</span> <span class=\"n\">z</span><span class=\"o\">:</span><span class=\"n\">ℂ</span><span class=\"o\">,</span> <span class=\"o\">(</span><span class=\"n\">z</span><span class=\"bp\">.</span><span class=\"n\">re</span><span class=\"o\">:</span><span class=\"n\">ℂ</span><span class=\"o\">))</span> <span class=\"n\">f</span> <span class=\"o\">(</span><span class=\"n\">nhds</span> <span class=\"n\">z</span><span class=\"bp\">.</span><span class=\"n\">re</span><span class=\"o\">),</span>\n  <span class=\"k\">from</span> <span class=\"n\">filter</span><span class=\"bp\">.</span><span class=\"n\">tendsto</span><span class=\"bp\">.</span><span class=\"n\">comp</span> <span class=\"n\">hr</span> <span class=\"o\">(</span><span class=\"n\">continuous</span><span class=\"bp\">.</span><span class=\"n\">tendsto</span>\n    <span class=\"o\">(</span><span class=\"n\">complex</span><span class=\"bp\">.</span><span class=\"n\">continuous_of_real</span><span class=\"o\">)</span> <span class=\"n\">z</span><span class=\"bp\">.</span><span class=\"n\">re</span><span class=\"o\">),</span>\n<span class=\"k\">have</span> <span class=\"n\">hi2</span> <span class=\"o\">:</span> <span class=\"n\">filter</span><span class=\"bp\">.</span><span class=\"n\">tendsto</span> <span class=\"o\">(</span><span class=\"bp\">λ</span> <span class=\"n\">z</span><span class=\"o\">:</span><span class=\"n\">ℂ</span><span class=\"o\">,</span> <span class=\"o\">(</span><span class=\"n\">z</span><span class=\"bp\">.</span><span class=\"n\">im</span><span class=\"o\">:</span><span class=\"n\">ℂ</span><span class=\"o\">))</span> <span class=\"n\">f</span> <span class=\"o\">(</span><span class=\"n\">nhds</span> <span class=\"n\">z</span><span class=\"bp\">.</span><span class=\"n\">im</span><span class=\"o\">),</span>\n  <span class=\"k\">from</span> <span class=\"n\">filter</span><span class=\"bp\">.</span><span class=\"n\">tendsto</span><span class=\"bp\">.</span><span class=\"n\">comp</span> <span class=\"n\">hi</span> <span class=\"o\">(</span><span class=\"n\">continuous</span><span class=\"bp\">.</span><span class=\"n\">tendsto</span>\n    <span class=\"o\">(</span><span class=\"n\">complex</span><span class=\"bp\">.</span><span class=\"n\">continuous_of_real</span><span class=\"o\">)</span> <span class=\"n\">z</span><span class=\"bp\">.</span><span class=\"n\">im</span><span class=\"o\">),</span>\n<span class=\"k\">have</span> <span class=\"bp\">_</span> <span class=\"o\">:=</span> <span class=\"n\">tendsto_add</span> <span class=\"n\">hr2</span> <span class=\"o\">(</span><span class=\"n\">tendsto_mul</span> <span class=\"n\">hi2</span> <span class=\"o\">(</span><span class=\"bp\">@</span><span class=\"n\">tendsto_const_nhds</span> <span class=\"bp\">_</span> <span class=\"bp\">_</span> <span class=\"bp\">_</span> <span class=\"n\">complex</span><span class=\"bp\">.</span><span class=\"n\">I</span> <span class=\"bp\">_</span><span class=\"o\">)),</span>\n<span class=\"k\">by</span> <span class=\"n\">rw</span> <span class=\"o\">[</span><span class=\"n\">funext</span> <span class=\"n\">complex</span><span class=\"bp\">.</span><span class=\"n\">re_add_im</span><span class=\"o\">,</span> <span class=\"n\">complex</span><span class=\"bp\">.</span><span class=\"n\">re_add_im</span><span class=\"o\">]</span> <span class=\"n\">at</span> <span class=\"n\">this</span><span class=\"bp\">;</span> <span class=\"n\">rw</span> <span class=\"o\">[</span><span class=\"err\">←</span> <span class=\"o\">(</span><span class=\"n\">filter</span><span class=\"bp\">.</span><span class=\"n\">map_id</span> <span class=\"o\">:</span> <span class=\"bp\">_</span> <span class=\"bp\">=</span> <span class=\"n\">f</span><span class=\"o\">)]</span><span class=\"bp\">;</span> <span class=\"n\">exact</span> <span class=\"n\">this</span><span class=\"bp\">⟩</span>\n\n<span class=\"kn\">example</span> <span class=\"o\">(</span><span class=\"n\">f</span> <span class=\"o\">:</span> <span class=\"n\">filter</span> <span class=\"n\">ℂ</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">hf</span> <span class=\"o\">:</span> <span class=\"n\">cauchy</span> <span class=\"n\">f</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"bp\">∃</span> <span class=\"n\">x</span><span class=\"o\">,</span> <span class=\"n\">f</span> <span class=\"bp\">≤</span> <span class=\"n\">nhds</span> <span class=\"n\">x</span> <span class=\"o\">:=</span>\n<span class=\"k\">let</span> <span class=\"bp\">⟨</span><span class=\"n\">xr</span><span class=\"o\">,</span> <span class=\"n\">hxr</span><span class=\"bp\">⟩</span> <span class=\"o\">:=</span> <span class=\"n\">complete_space</span><span class=\"bp\">.</span><span class=\"n\">complete</span>\n  <span class=\"o\">(</span><span class=\"n\">cauchy_map</span> <span class=\"n\">complex</span><span class=\"bp\">.</span><span class=\"n\">uniform_continuous_re</span> <span class=\"n\">hf</span><span class=\"o\">)</span> <span class=\"k\">in</span>\n<span class=\"k\">let</span> <span class=\"bp\">⟨</span><span class=\"n\">xi</span><span class=\"o\">,</span> <span class=\"n\">hxi</span><span class=\"bp\">⟩</span> <span class=\"o\">:=</span> <span class=\"n\">complete_space</span><span class=\"bp\">.</span><span class=\"n\">complete</span>\n  <span class=\"o\">(</span><span class=\"n\">cauchy_map</span> <span class=\"n\">complex</span><span class=\"bp\">.</span><span class=\"n\">uniform_continuous_im</span> <span class=\"n\">hf</span><span class=\"o\">)</span> <span class=\"k\">in</span>\n<span class=\"bp\">⟨⟨</span><span class=\"n\">xr</span><span class=\"o\">,</span><span class=\"n\">xi</span><span class=\"bp\">⟩</span><span class=\"o\">,</span> <span class=\"o\">(</span><span class=\"n\">complex</span><span class=\"bp\">.</span><span class=\"n\">filter_le_iff</span> <span class=\"bp\">_</span> <span class=\"bp\">_</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"mi\">2</span> <span class=\"bp\">⟨</span><span class=\"n\">hxr</span><span class=\"o\">,</span> <span class=\"n\">hxi</span><span class=\"bp\">⟩⟩</span>\n</pre></div>",
        "id": 135225113,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1538698377
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"120943\">@Andreas Swerdlow</span></p>",
        "id": 135225115,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1538698379
    },
    {
        "content": "<p>I think there should be another way to say this in terms of the product topology</p>",
        "id": 135225373,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1538698721
    },
    {
        "content": "<p>That is, this should follow from the fact that C is homeomorphic to R x R with <code>re</code> and <code>im</code> as the projections</p>",
        "id": 135225386,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1538698758
    },
    {
        "content": "<p>is this a fact yet? and will that be easier to use?</p>",
        "id": 135225448,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1538698847
    },
    {
        "content": "<p>that remains to be seen</p>",
        "id": 135225459,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1538698875
    },
    {
        "content": "<p>I don't think we have homeos yet (<span class=\"user-mention\" data-user-id=\"110031\">@Patrick Massot</span> ? <span class=\"user-mention\" data-user-id=\"110294\">@Johannes Hölzl</span> ?)</p>",
        "id": 135225466,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1538698897
    },
    {
        "content": "<p>But I think you can prove <code>filter_le_iff</code> pretty easily if you do it on a product space with fst and snd</p>",
        "id": 135225526,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1538698974
    },
    {
        "content": "<p>And in any case what you really need is just plain continuity of the relevant functions and I think you already have that</p>",
        "id": 135225593,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1538699055
    },
    {
        "content": "<p>I see</p>",
        "id": 135225605,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1538699099
    },
    {
        "content": "<p>wait, does C have the metric topology or the product topology by definition?</p>",
        "id": 135225695,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1538699254
    },
    {
        "content": "<p>metric</p>",
        "id": 135238089,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1538722695
    },
    {
        "content": "<p>Those are meant to be defeq</p>",
        "id": 135238108,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1538722758
    },
    {
        "content": "<p>C isn't even defined to be a product</p>",
        "id": 135238160,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1538722815
    },
    {
        "content": "<p>I meant that product topology and metric topology on a product of metric spaces are defeq, I don't really know how C is constructed in Lean</p>",
        "id": 135238183,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1538722863
    },
    {
        "content": "<p>It is possible to state this theorem using <code>(co)map</code> on topologies. You want to say that the topology on C is induced by the map <code>\\lam z, (z.re, z.im)</code>, or coinduced by <code>\\lam p, p.1 + I p.2</code></p>",
        "id": 135238252,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1538723006
    },
    {
        "content": "<blockquote>\n<p>I meant that product topology and metric topology on a product of metric spaces are defeq, I don't really know how C is constructed in Lean</p>\n</blockquote>\n<p>are they?</p>",
        "id": 135238944,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1538724012
    },
    {
        "content": "<p>isn't it a theorem?</p>",
        "id": 135238945,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1538724014
    },
    {
        "content": "<p>that involves drawing a cirlce inside a square inside a circle inside a square?</p>",
        "id": 135238948,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1538724024
    },
    {
        "content": "<blockquote>\n<p>that involves drawing a cirlce inside a square inside a circle inside a square?</p>\n</blockquote>\n<p>Can Lean do that?</p>",
        "id": 135238959,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1538724052
    },
    {
        "content": "<p>there is no circle in Lean. The product metric is defined as the max metric</p>",
        "id": 135238974,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1538724107
    },
    {
        "content": "<p>oh well then it isn't defeq to the metric in C then</p>",
        "id": 135239022,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1538724146
    },
    {
        "content": "<p>the metric in C is the circle metric</p>",
        "id": 135239023,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1538724151
    },
    {
        "content": "<p>the balls in C are circles because it uses the metric topology</p>",
        "id": 135239046,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1538724226
    },
    {
        "content": "<p>Right, but not the product metric...</p>",
        "id": 135239110,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1538724304
    },
    {
        "content": "<p>if we wanted, we could define the topology on C as the product topology (or rather a mapping thereof), and then the typeclass would force us to prove this theorem</p>",
        "id": 135239123,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1538724361
    },
    {
        "content": "<p>but given that C has no pre-existing topology on it, it seems okay to just use the metric topology as the definition; but this means that we don't get any help with the homeo proof</p>",
        "id": 135239177,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1538724448
    },
    {
        "content": "<p>I mean, my filter lemma <em>is</em> the homeomorphism</p>",
        "id": 135239231,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1538724503
    },
    {
        "content": "<blockquote>\n<p>I don't think we have homeos yet (Patrick Massot** ? Johannes Hölzl ?)</p>\n</blockquote>\n<p>This is not in mathlib, mostly because I don't know whether it should use the category theory stuff or be as in <a href=\"https://github.com/PatrickMassot/lean-scratchpad/blob/master/src/homeos.lean\" target=\"_blank\" title=\"https://github.com/PatrickMassot/lean-scratchpad/blob/master/src/homeos.lean\">https://github.com/PatrickMassot/lean-scratchpad/blob/master/src/homeos.lean</a></p>",
        "id": 135239236,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1538724527
    },
    {
        "content": "<p>no categories in the definition</p>",
        "id": 135239319,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1538724667
    },
    {
        "content": "<p>it should be 100% topology</p>",
        "id": 135239323,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1538724676
    },
    {
        "content": "<p>do you want me to PR that file then?</p>",
        "id": 135239329,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1538724691
    },
    {
        "content": "<p>I don't see why not... I will leave the merging to Johannes though since he's been involved more</p>",
        "id": 135239379,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1538724755
    },
    {
        "content": "<p>I really think the circle metric is the right one</p>",
        "id": 135239463,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1538724913
    },
    {
        "content": "<p>hmm, never mind</p>",
        "id": 135239471,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1538724946
    },
    {
        "content": "<p>The circle <em>metric</em> is certainly the right one, but I wonder if the <em>topology</em> should be defined using something like <code>comap re \\sqcap comap im</code></p>",
        "id": 135239608,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1538725198
    },
    {
        "content": "<p>which will make your filter theorem essentially by definition, and the bulk of that proof will be transferred to the construction of the metric_space instance</p>",
        "id": 135239681,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1538725282
    }
]