[
    {
        "content": "<p>Hi, I have the following code where I explicitely constructed an equivalence between two types <code>α</code> and <code>β → γ</code>, and all types are fintypes. I want to conclude that <code>α.card = γ.card ^ β.card</code> but I have a problem with instances. I would like to something like this:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"kn\">import</span> <span class=\"n\">data</span><span class=\"bp\">.</span><span class=\"n\">fintype</span>\n<span class=\"kn\">open</span> <span class=\"n\">fintype</span>\n\n<span class=\"kn\">variables</span> <span class=\"o\">{</span><span class=\"n\">α</span> <span class=\"o\">:</span> <span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span> <span class=\"o\">{</span><span class=\"n\">β</span> <span class=\"o\">:</span> <span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span> <span class=\"o\">{</span><span class=\"n\">γ</span> <span class=\"o\">:</span> <span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span>\n<span class=\"kn\">variables</span> <span class=\"o\">[</span><span class=\"n\">fintype</span> <span class=\"n\">α</span><span class=\"o\">]</span> <span class=\"o\">[</span><span class=\"n\">fintype</span> <span class=\"n\">β</span><span class=\"o\">]</span> <span class=\"o\">[</span><span class=\"n\">fintype</span> <span class=\"n\">γ</span><span class=\"o\">]</span>\n<span class=\"kn\">variables</span> <span class=\"o\">[</span><span class=\"n\">decidable_eq</span> <span class=\"n\">α</span><span class=\"o\">]</span>\n<span class=\"kn\">variables</span> <span class=\"o\">(</span><span class=\"n\">f</span> <span class=\"o\">:</span> <span class=\"n\">α</span> <span class=\"err\">≃</span> <span class=\"o\">(</span><span class=\"n\">β</span> <span class=\"bp\">→</span> <span class=\"n\">γ</span><span class=\"o\">))</span>\n\n<span class=\"kn\">example</span> <span class=\"o\">:</span> <span class=\"n\">card</span> <span class=\"n\">α</span> <span class=\"bp\">=</span> <span class=\"n\">card</span> <span class=\"n\">γ</span> <span class=\"err\">^</span> <span class=\"n\">card</span> <span class=\"n\">β</span> <span class=\"o\">:=</span>\n<span class=\"k\">calc</span> <span class=\"n\">card</span> <span class=\"n\">α</span> <span class=\"bp\">=</span> <span class=\"bp\">@</span><span class=\"n\">card</span> <span class=\"o\">(</span><span class=\"n\">β</span> <span class=\"bp\">→</span> <span class=\"n\">γ</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">of_equiv</span> <span class=\"n\">α</span> <span class=\"n\">f</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"n\">eq</span><span class=\"bp\">.</span><span class=\"n\">symm</span> <span class=\"err\">$</span> <span class=\"n\">of_equiv_card</span> <span class=\"n\">f</span>\n        <span class=\"bp\">...</span> <span class=\"bp\">=</span> <span class=\"n\">card</span> <span class=\"n\">γ</span> <span class=\"err\">^</span> <span class=\"n\">card</span> <span class=\"n\">β</span> <span class=\"o\">:</span> <span class=\"n\">card_fun</span>\n</pre></div>\n\n\n<p>The problem is I have two different instances of <code>fintype (β → γ) </code>. The one coming from <code>fintype.of_equiv</code> (which <code>of_equiv_card</code> uses) and one coming from <code>pi.fintype</code> (which <code>card_fun</code> uses).  How could I solve this? Or should I try a completely different route?</p>",
        "id": 156362890,
        "sender_full_name": "Casper Putz",
        "timestamp": 1547813228
    },
    {
        "content": "<p>Something like this?</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"kn\">example</span> <span class=\"o\">:</span> <span class=\"n\">card</span> <span class=\"n\">α</span> <span class=\"bp\">=</span> <span class=\"n\">card</span> <span class=\"n\">β</span> <span class=\"err\">^</span> <span class=\"n\">card</span> <span class=\"n\">γ</span> <span class=\"o\">:=</span>\n<span class=\"k\">calc</span> <span class=\"n\">card</span> <span class=\"n\">α</span> <span class=\"bp\">=</span> <span class=\"bp\">@</span><span class=\"n\">card</span> <span class=\"o\">(</span><span class=\"n\">β</span> <span class=\"bp\">→</span> <span class=\"n\">γ</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">of_equiv</span> <span class=\"n\">α</span> <span class=\"n\">f</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"n\">eq</span><span class=\"bp\">.</span><span class=\"n\">symm</span> <span class=\"err\">$</span> <span class=\"n\">of_equiv_card</span> <span class=\"n\">f</span>\n        <span class=\"bp\">...</span> <span class=\"bp\">=</span> <span class=\"n\">card</span> <span class=\"o\">(</span><span class=\"n\">β</span> <span class=\"bp\">→</span> <span class=\"n\">γ</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"k\">by</span> <span class=\"n\">congr</span>\n        <span class=\"bp\">...</span> <span class=\"bp\">=</span> <span class=\"n\">card</span> <span class=\"n\">γ</span> <span class=\"err\">^</span> <span class=\"n\">card</span> <span class=\"n\">β</span> <span class=\"o\">:</span> <span class=\"n\">card_fun</span>\n</pre></div>",
        "id": 156363177,
        "sender_full_name": "Chris Hughes",
        "timestamp": 1547813685
    },
    {
        "content": "<p>Yes! I also needed <code>[decidable_eq β]</code>, but then it worked :). Thanks!</p>",
        "id": 156363562,
        "sender_full_name": "Casper Putz",
        "timestamp": 1547814232
    }
]