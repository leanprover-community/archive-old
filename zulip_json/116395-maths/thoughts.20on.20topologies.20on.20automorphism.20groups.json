[
    {
        "content": "<p>So I set <span class=\"user-mention\" data-user-id=\"460212\">@Sebastian Monnet</span> the challenge of defining the Krull topology on an infinite Galois group. To my mild surprise, he defined a topology on <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mrow><mi mathvariant=\"normal\">A</mi><mi mathvariant=\"normal\">u</mi><mi mathvariant=\"normal\">t</mi></mrow><mi>K</mi></msub><mo stretchy=\"false\">(</mo><mi>L</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">\\mathrm{Aut}_K(L)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathrm\">Aut</span></span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3283em;\"><span style=\"top:-2.55em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.07153em;\">K</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">L</span><span class=\"mclose\">)</span></span></span></span> for any extension <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>K</mi><mo>→</mo><mi>L</mi></mrow><annotation encoding=\"application/x-tex\">K\\to L</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">K</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">→</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\">L</span></span></span></span> of fields; the field automorphisms of <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>L</mi></mrow><annotation encoding=\"application/x-tex\">L</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\">L</span></span></span></span> fixing <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>K</mi></mrow><annotation encoding=\"application/x-tex\">K</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">K</span></span></span></span> pointwise have a...\"natural\"(?)...topology and who even cares about algebraic, normal and separable.</p>\n<p>This surprised me initially but now I'm coming to terms with it. Sebastian worked out the general story; it seems to work in some huge generality. If L is a type with a <code>foo</code> structure (e.g. a group, a K-algebra, a K-algebra and also a field), then <code>L</code> has subfoos (e.g. subgroups, intermediate fields...). The idea is that some of these subfoos should be deemed \"small\", e.g. for intermediate fields the small ones are the ones finite-dimensional over K. The axioms for small subfoos you need are that the subfoo generated by two small subfoos is small (recall Sebastian's earlier questions about why E1 sup E2 is f.d. over K if E1 and E2 are) and that the image of a small subfoo under a foo-automorphism of L is a small subfoo. This is enough to put a topology on the foo-automorphisms of L.</p>\n<p>You use Patrick's <a href=\"https://leanprover-community.github.io/mathlib_docs/find/group_filter_basis\">docs#group_filter_basis</a> (which he originally wrote for the perfectoid project and then rewrote and got into mathlib to help Maria's project). The collection of subgroups you use are, for each small subfoo E, the foo-automorphisms of L which fix E pointwise. These are going to be the basis of neighbourhoods of the identity; the content of what Patrick formalised is that if these subgroups satisfy some axioms (conjugate of a subgroup is a subgroup, intersection of two subgroups contains a subgroup) then there's a group topology with these as a filter basis of the identity. The two axioms for the group filter basis subgroup translate into the two axioms for small foos.</p>\n<p>So is this of any use? Here are examples. If L/K is an algebraic normal and separable extension and if a small subextension is a finite-dimensional one then you get the Krull topology on Gal(L/K) this way. If L/K is a random extension and we're topologising Aut_K(L) then you get a topology which is neither compact nor Hausdorff in general. The topology depends on a notion of smallness. if you let E run through the finite-dimensional-over-K subextensions (i.e. f.g. K-modules) then L isn't in general the union of the E's so the topology isn't in general Hausdorff. If you let E run through the finitely-generated-over-K subextensions (i.e. f.g. K-fields) then the topology is now Hausdorff I think but it isn't in general compact. I don't know when it's profinite in general, although it's certainly profinite for Galois groups.</p>\n<p>Other examples. If <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>L</mi><mo>=</mo><mo stretchy=\"false\">(</mo><msub><mi mathvariant=\"double-struck\">Q</mi><mi>p</mi></msub><mi mathvariant=\"normal\">/</mi><msub><mi mathvariant=\"double-struck\">Z</mi><mi>p</mi></msub><msup><mo stretchy=\"false\">)</mo><mi>n</mi></msup></mrow><annotation encoding=\"application/x-tex\">L=(\\mathbb{Q}_p/\\mathbb{Z}_p)^n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\">L</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.0361em;vertical-align:-0.2861em;\"></span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathbb\">Q</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">p</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span><span class=\"mord\">/</span><span class=\"mord\"><span class=\"mord mathbb\">Z</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">p</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span><span class=\"mclose\"><span class=\"mclose\">)</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6644em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span></span></span></span></span></span></span></span> and we consider <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>L</mi></mrow><annotation encoding=\"application/x-tex\">L</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\">L</span></span></span></span> as an abelian group and let the small subgroups be the finite ones, then Aut(L) is GL_n(Z_p) with the correct (profinite) topology, and if <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>L</mi><mo>=</mo><mo stretchy=\"false\">(</mo><mi mathvariant=\"double-struck\">Q</mi><mi mathvariant=\"normal\">/</mi><mi mathvariant=\"double-struck\">Z</mi><msup><mo stretchy=\"false\">)</mo><mi>n</mi></msup></mrow><annotation encoding=\"application/x-tex\">L=(\\mathbb{Q}/\\mathbb{Z})^n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\">L</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord mathbb\">Q</span><span class=\"mord\">/</span><span class=\"mord mathbb\">Z</span><span class=\"mclose\"><span class=\"mclose\">)</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6644em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span></span></span></span></span></span></span></span> as an abelian group and small = finite then Aut(L)=GL_n(Z-hat) with the profinite topology. I suspect that there will also be cases in algebraic geometry where we have a direct limit of finite etale ring extensions and where the automorphism group is some pi_1 with the correct topology.</p>\n<p>Has anyone seen this \"Monnet topology\" before in other situations? Sebastian worked out a version which works for an object of a general category, with small subobjects. I didn't know whether this was a step too far as far as Lean was concerned, if all we really want is the Krull topology on a Galois group, in the sense that I wasn't sure whether doing it category-theoretically would then make it a pain to get the actual topology on things we want like <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mrow><mi mathvariant=\"normal\">G</mi><mi mathvariant=\"normal\">a</mi><mi mathvariant=\"normal\">l</mi></mrow><mo stretchy=\"false\">(</mo><mover accent=\"true\"><mi mathvariant=\"double-struck\">Q</mi><mo stretchy=\"true\">‾</mo></mover><mi mathvariant=\"normal\">/</mi><mi mathvariant=\"double-struck\">Q</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">\\mathrm{Gal}(\\overline{\\mathbb{Q}}/\\mathbb{Q})</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.1389em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathrm\">Gal</span></span><span class=\"mopen\">(</span><span class=\"mord overline\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8889em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathbb\">Q</span></span></span><span style=\"top:-3.8089em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"overline-line\" style=\"border-bottom-width:0.04em;\"></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1667em;\"><span></span></span></span></span></span><span class=\"mord\">/</span><span class=\"mord mathbb\">Q</span><span class=\"mclose\">)</span></span></span></span>.</p>",
        "id": 266186017,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1640623287
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"243562\">@Adam Topaz</span> <span class=\"user-mention\" data-user-id=\"130609\">@Antoine Chambert-Loir</span> <span class=\"user-mention\" data-user-id=\"110031\">@Patrick Massot</span> <span class=\"user-mention\" data-user-id=\"260507\">@Heather Macbeth</span> do automorphisms of other mathematical objects want profinite-like topologies like this?</p>",
        "id": 266186154,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1640623392
    },
    {
        "content": "<p>I don't know, because this is not the way I define the Krull topology on the Galois group — I prefer to view it as the topology of simple convergence on elements of the Galois group, viewed as maps. In this direction, Bourbaki has a full chapter (General topology, chapter X) devoted to topologies on function spaces, all built on the same way, uniform convergence on a selected family of subsets.</p>",
        "id": 266187200,
        "sender_full_name": "Antoine Chambert-Loir",
        "timestamp": 1640624216
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"110038\">@Kevin Buzzard</span> There is a general formalism developed by Grothendieck (I don't remember exactly where, but certainly it's used in SGA in the context of etale fundamental groups) about prorepresentability of functors -- this is how one can show that the etale fundamental group is profinite, when you consider it as the automorphism group of a fibre functor, Tannakian fundamental groups being proalgebraic, etc. OTOH I don't know if this fits exactly with the context you're considering here.</p>",
        "id": 266187807,
        "sender_full_name": "Adam Topaz",
        "timestamp": 1640624624
    },
    {
        "content": "<p>As revealed by  <a href=\"https://github.com/leanprover-community/mathlib/blob/b28734c8d2bf09f6d5648d48065833db5dd5eaa5/src/topology/algebra/filter_basis.lean#L34\">this line</a>, the group filter basis stuff also comes straight from Bourbaki's GT.</p>",
        "id": 266188245,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1640624993
    },
    {
        "content": "<p>And I don't know these examples (I don't even know the Galois theory case).</p>",
        "id": 266188367,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1640625076
    },
    {
        "content": "<p>As for \"small subobjects\" there is a standard notion in category theory: see <a href=\"https://www.ncatlab.org/nlab/show/compact+object\">https://www.ncatlab.org/nlab/show/compact+object</a></p>\n<p>Essentially, <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>X</mi></mrow><annotation encoding=\"application/x-tex\">X</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span></span></span></span> is small if <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mrow><mi mathvariant=\"normal\">H</mi><mi mathvariant=\"normal\">o</mi><mi mathvariant=\"normal\">m</mi></mrow><mo stretchy=\"false\">(</mo><mi>X</mi><mo separator=\"true\">,</mo><mo>−</mo><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">\\mathrm{Hom}(X,-)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathrm\">Hom</span></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">−</span><span class=\"mclose\">)</span></span></span></span> commutes with filtered colimits.</p>",
        "id": 266189444,
        "sender_full_name": "Adam Topaz",
        "timestamp": 1640625959
    }
]