[
    {
        "content": "<p>What is this? <a href=\"https://github.com/leanprover-community/mathlib/blob/b36831204c0db0c18b35918b56ffd3df55707c9e/src/topology/subset_properties.lean#L441\" target=\"_blank\" title=\"https://github.com/leanprover-community/mathlib/blob/b36831204c0db0c18b35918b56ffd3df55707c9e/src/topology/subset_properties.lean#L441\">The empty set is irreducible</a>? Whatever next? 1 is prime? Can I change the definition and add that the set is non-empty? I think that this is the standard convention (I just checked in Hartshorne and he has the empty set as not irreducible).</p>",
        "id": 186878069,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1580298401
    },
    {
        "content": "<p>The zero ring is a field</p>",
        "id": 186878715,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1580299018
    },
    {
        "content": "<p>The empty space is connected: <a href=\"https://github.com/leanprover-community/mathlib/blob/b36831204c0db0c18b35918b56ffd3df55707c9e/src/topology/subset_properties.lean#L512\" target=\"_blank\" title=\"https://github.com/leanprover-community/mathlib/blob/b36831204c0db0c18b35918b56ffd3df55707c9e/src/topology/subset_properties.lean#L512\">https://github.com/leanprover-community/mathlib/blob/b36831204c0db0c18b35918b56ffd3df55707c9e/src/topology/subset_properties.lean#L512</a></p>",
        "id": 186878725,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1580299034
    },
    {
        "content": "<p><a href=\"https://ncatlab.org/nlab/show/too+simple+to+be+simple\" target=\"_blank\" title=\"https://ncatlab.org/nlab/show/too+simple+to+be+simple\">https://ncatlab.org/nlab/show/too+simple+to+be+simple</a></p>",
        "id": 186878766,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1580299074
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"110038\">@Kevin Buzzard</span> I think a refactor is in order (-;</p>",
        "id": 186878833,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1580299103
    },
    {
        "content": "<p>adding a nonempty conjunct seems like it would just make proofs ugly. Maybe a rename is in order?</p>",
        "id": 186880775,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1580300942
    },
    {
        "content": "<p>Not a single one of the theorems about irreducible requires the assumption that the the set is nonempty</p>",
        "id": 186880825,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1580301002
    },
    {
        "content": "<p>I don't have much reference for irreducibility, but I am willing to defend the choice of empty set as connected</p>",
        "id": 186881187,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1580301361
    },
    {
        "content": "<p>I'm not in favor of complicating definitions if there is no theorem requiring this complication. I would wait to see a theorem where we need assumptions excluding empty or zero.</p>",
        "id": 186881385,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1580301498
    },
    {
        "content": "<p>In my class we're proving that every Noetherian space is uniquely a union of its irreducible components</p>",
        "id": 186882050,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1580302094
    },
    {
        "content": "<p>I don't think it's a problem, since you have to state what you mean by \"component\" carefully anyway. If you use a partition (equivalence relation), the empty set doesn't even come up</p>",
        "id": 186882314,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1580302354
    },
    {
        "content": "<p>it looks like the difference between \"singleton\" and \"subsingleton\" to me</p>",
        "id": 186882455,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1580302503
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"110049\">@Mario Carneiro</span> So why do you require that primes are &gt; 1, or that <code>1 ≠ 0</code> in fields?</p>",
        "id": 186882492,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1580302546
    },
    {
        "content": "<p>Maybe there should be subprimes?</p>",
        "id": 186882551,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1580302574
    },
    {
        "content": "<p>how about <code>prime'</code> aka prime-prime?</p>",
        "id": 186882579,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1580302599
    },
    {
        "content": "<p>that almost sounds plausible</p>",
        "id": 186882580,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1580302602
    },
    {
        "content": "<p>I've thought about dropping 1 != 0 in domains/fields as well. I don't have a super clear idea on why it's there</p>",
        "id": 186882598,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1580302639
    },
    {
        "content": "<p>can someone call the moderators?</p>",
        "id": 186882625,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1580302668
    },
    {
        "content": "<p>the fact that inverses in a field explicitly talk about != 0 makes it a bit more natural, but in domains it's out of the blue</p>",
        "id": 186882687,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1580302689
    },
    {
        "content": "<p>I guess it's all the same answer.</p>",
        "id": 186882710,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1580302714
    },
    {
        "content": "<p>It's some sort of underlying principle</p>",
        "id": 186882743,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1580302744
    },
    {
        "content": "<p>I'm not a big fan of arguments that point to a classification theorem; that's just one theorem, and it's not even a particularly easy one to use most of the time. I consider it much more important to have the everyday theorems be simple</p>",
        "id": 186882895,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1580302840
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"110049\">@Mario Carneiro</span> There is a notion of spectral spaces: <a href=\"https://en.wikipedia.org/wiki/Spectral_space\" target=\"_blank\" title=\"https://en.wikipedia.org/wiki/Spectral_space\">https://en.wikipedia.org/wiki/Spectral_space</a><br>\nUsually, the empty space is considered to be spectral.<br>\nEvery spectral space is homeomorphic to <code>Spec(R)</code> for some commutative ring <code>R</code>.<br>\nPrime ideals are by definition not allowed to be the entire ring. If we remove this condition, then <code>Spec(R)</code> will never be empty.</p>",
        "id": 186894827,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1580311245
    },
    {
        "content": "<p><code>R/(some prime ideal)</code> is an integral domain.</p>",
        "id": 186894886,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1580311274
    },
    {
        "content": "<p>Which connects back to the <code>1 ≠ 0</code> issue.</p>",
        "id": 186894908,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1580311292
    },
    {
        "content": "<p>Also, <code>Spec(Integral_domain)</code> is irreducible. Which connects back to the irreducibility discussion.</p>",
        "id": 186894986,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1580311323
    },
    {
        "content": "<p>These are examples of the underlying principle.</p>",
        "id": 186896147,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1580311970
    },
    {
        "content": "<p>Yes, and even though we don't really care about spectral spaces yet, in mathlib; I think if you flatten the carpet in one corner, you'll get bumps in another corner.</p>",
        "id": 186896881,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1580312403
    },
    {
        "content": "<p>I'm not sure if it's worth the mental reprogramming to deviate from standard maths</p>",
        "id": 186896919,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1580312421
    },
    {
        "content": "<p><code>x/0</code> and <code>nat.sub</code> are already causing enough headaches.</p>",
        "id": 186896979,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1580312458
    },
    {
        "content": "<p>I don't think the maths headaches are ever as big as the Lean headaches, when it comes to very slightly nonstandard definitions.</p>",
        "id": 186899927,
        "sender_full_name": "Chris Hughes",
        "timestamp": 1580314098
    },
    {
        "content": "<blockquote>\n<p>I don't think it's a problem, since you have to state what you mean by \"component\" carefully anyway. If you use a partition (equivalence relation), the empty set doesn't even come up</p>\n</blockquote>\n<p>No. Irreducible components can overlap, they're not like connected components.</p>",
        "id": 186900006,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1580314148
    },
    {
        "content": "<blockquote>\n<p>What is this? <a href=\"https://github.com/leanprover-community/mathlib/blob/b36831204c0db0c18b35918b56ffd3df55707c9e/src/topology/subset_properties.lean#L441\" target=\"_blank\" title=\"https://github.com/leanprover-community/mathlib/blob/b36831204c0db0c18b35918b56ffd3df55707c9e/src/topology/subset_properties.lean#L441\">The empty set is irreducible</a>? Whatever next? 1 is prime? Can I change the definition and add that the set is non-empty? I think that this is the standard convention (I just checked in Hartshorne and he has the empty set as not irreducible).</p>\n</blockquote>\n<p>Yes</p>",
        "id": 186901543,
        "sender_full_name": "Reid Barton",
        "timestamp": 1580315008
    },
    {
        "content": "<p>...is the correct answer.</p>",
        "id": 186901595,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1580315039
    },
    {
        "content": "<blockquote>\n<p>I don't think the maths headaches are ever as big as the Lean headaches, when it comes to very slightly nonstandard definitions.</p>\n</blockquote>\n<p>It depends on whether you want non-Lean-using mathematicians to be able to recognise the statements.</p>\n<p>I think there is a difference between \"maths says it's undefined, but Lean gives some rubbish definition anyways\" and \"maths says it is defined as <code>X</code>, but Lean says it's defined as <code>X'</code>\".<br>\n<code>x/0</code> is an example of the first kind. But changing the definition of irreducible or integral domain etc is an example of the 2nd kind.</p>",
        "id": 186915932,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1580323770
    },
    {
        "content": "<p>I think it might be difficult to formalise maths without tidying it up along the way. That's part of the point of formalising it, you learn the correct definitions.</p>",
        "id": 186918420,
        "sender_full_name": "Chris Hughes",
        "timestamp": 1580325449
    },
    {
        "content": "<p>For me the issue is also about choosing the correct definition, but I put more weight on the <a href=\"https://stacks.math.columbia.edu/tag/004V\" target=\"_blank\" title=\"https://stacks.math.columbia.edu/tag/004V\">definition</a> being used in the 6932 pages of the Stacks project than the approximately 0 uses of <code>irreducible</code> in mathlib.</p>",
        "id": 186926375,
        "sender_full_name": "Reid Barton",
        "timestamp": 1580330368
    },
    {
        "content": "<p>That's why I said to change the name. This isn't a problem if the mathlib notion isn't called \"irreducible\"</p>",
        "id": 186948729,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1580349510
    },
    {
        "content": "<p>also that statistic is pretty skewed. You aren't even comparing similar things (number of pages of one thing to number of uses of another)</p>",
        "id": 186948753,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1580349563
    },
    {
        "content": "<p>It is very rare to see choices like this explained in the literature. They just pick something and then you the reader are wondering why it was done that way. They go to great lengths explaining the consequences but many of them apply in other versions of the definition too so you have to do some archaeology to find out why the author chose that convention.</p>",
        "id": 186948843,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1580349711
    },
    {
        "content": "<p>I like to delay such choices until the math itself tells me the answer. After the 5th or 6th consecutive theorem that requires me to talk about nonempty irreducible spaces, I will think \"hm, seems like this would be simpler to say if I had a name for this combo\". But don't make guesses about this based on what is done in informal math because the details often differ</p>",
        "id": 186948937,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1580349824
    },
    {
        "content": "<p>I really didn't want to get dragged into a discussion here, but the guy who has written a single coherent 6000-page document summarizing an extremely popular subject that is close to 100 years old is infinitely better placed to make that kind of judgment than you or I ever could be.</p>",
        "id": 186950166,
        "sender_full_name": "Reid Barton",
        "timestamp": 1580351540
    },
    {
        "content": "<p>Surely de Jong had some reason to go to the trouble of including the extra words \"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>X</mi></mrow><annotation encoding=\"application/x-tex\">X</annotation></semantics></math></span><span aria-hidden=\"true\" class=\"katex-html\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.07847em;\">X</span></span></span></span> is not empty, and\" and it seems foolish to bet that in the formalization, actually, it's better to omit them.</p>",
        "id": 186950268,
        "sender_full_name": "Reid Barton",
        "timestamp": 1580351664
    },
    {
        "content": "<p>You are betting against not only the expertise of de Jong but also that of many, many others</p>",
        "id": 186950390,
        "sender_full_name": "Reid Barton",
        "timestamp": 1580351856
    },
    {
        "content": "<p>Maybe. If that's the case, as I said, the math (written by de Jong) will say it too</p>",
        "id": 186950460,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1580351940
    },
    {
        "content": "<p>But there are a large number of commutative algebra books that make a commutativity assumption that is irrelevant for half of the contained theorems</p>",
        "id": 186950523,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1580352006
    },
    {
        "content": "<p>This kind of thing is done, I think, to delimit the scope of thought and make it clear what the topic is, but this is a non-mathematical justification</p>",
        "id": 186950537,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1580352091
    },
    {
        "content": "<p>In all likelihood, after making it through those 6000 pages I will agree with de Jong's choice. But the refactoring is cheap, and I will be in a much better position to see what actually needs to be done once we get to that point. It's not about disagreement for the sake of it, it's about generating reasons for actions</p>",
        "id": 186950635,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1580352243
    },
    {
        "content": "<p>Keep in mind also that the \"trivial\" tactic is much more powerful in informal maths. There is no real cost to dealing with trivial cases in informal developments regardless of which way they fall</p>",
        "id": 186950825,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1580352540
    },
    {
        "content": "<p>I think this is a really interesting thread. I have long worried about this sort of stuff, from way before I got interested in computer formalisation. The first thing I think should be stressed is that, as both Reid and I and probably most of the other mathematicians here know, is that our conventions (trivial ring isn't a field or an ID, univ isn't a prime ideal or a maximal ideal, empty set isn't irreducible, 1 isn't a prime number, trivial group isn't simple...) are all globally coherent and part of a bigger picture which one could regard as a convention. Beyond some point it becomes manifestly clear that our conventions are correct in the sense that they isolate ideas which are central to the more advanced theory, e.g. the spectrum of a commutative ring is the prime ideals and this definition turns out to be of huge importance in mathematics; this observation alone makes it clear that one needs a word for what mathematicians currently call a prime ideal.</p>\n<p>Mario is challenging the conventions, which of course is a very healthy thing to do. What I know for sure is that our chosen conventions work and make the \"classification theorems\" (every positive integer is uniquely the product of primes, every Noetherian topological space is uniquely a union of maximal irreducible subspaces etc) very \"clean\". Mario complains that classifications are hard to formalise / hard to use, or whatever, but in real life mathematics they are used everywhere; if we let 1 be a prime then we would forever be dealing with special cases, for example, even though I can see that 1 satisfies many of the basic properties of primes developed before the classification theorem (e.g. <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>p</mi><mo>∣</mo><mi>a</mi><mi>b</mi><mtext>  </mtext><mo>⟹</mo><mtext>  </mtext><mi>p</mi><mo>∣</mo><mi>a</mi></mrow><annotation encoding=\"application/x-tex\">p\\mid ab\\implies p\\mid a</annotation></semantics></math></span><span aria-hidden=\"true\" class=\"katex-html\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">p</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">∣</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.71844em;vertical-align:-0.024em;\"></span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\">b</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">⟹</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">p</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">∣</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">a</span></span></span></span> or <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>p</mi><mo>∣</mo><mi>b</mi></mrow><annotation encoding=\"application/x-tex\">p\\mid b</annotation></semantics></math></span><span aria-hidden=\"true\" class=\"katex-html\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">p</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">∣</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">b</span></span></span></span> is true for <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>p</mi><mo>=</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">p=1</annotation></semantics></math></span><span aria-hidden=\"true\" class=\"katex-html\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\">p</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span> and indeed this property classifies positive integers which are either prime or 1; and these super-basic results are the kind of things which formalisers find very important because they use them all the time when building their APIs).  To give another example, Mario points out that the fundamental results on mathlib-irreducible topological spaces go through very nicely even when the empty set is allowed, although we all know that the classification theorem will fail in the sense that it will have to deal with the empty set as a special case, just like the uniqueness of prime factorization would have to make a special case for factorizations involving 1.</p>\n<p>The conclusion I want to draw is that these more primitive notions (e.g. the notion of being 1 or prime, or being mathlib-irreducible) seem to play some important role in formalisation, but ultimately the more subtle notions (the conventions which Reid and I are backing) come to the fore later on. My proposal then is simply to rename current mathlib's <code>irreducible</code> (which includes the empty set) as <code>preirreducible</code>, and then have another section of lemmas for <code>irreducible</code> which is defined to be <code>preirreducible</code> + <code>nonempty</code>.</p>",
        "id": 186957199,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1580363539
    },
    {
        "content": "<blockquote>\n<p>Mario complains that classifications are hard to formalise / hard to use, or whatever, but in real life mathematics they are used everywhere</p>\n</blockquote>\n<p>To clarify, I mean to say that a classification theorem is a \"heavyweight\" theorem, so I tolerate a higher number of assumptions and more complex consequences in this case. This is in contrast to theorems like \"a finite set is compact\" where you really don't want extra side conditions in the way because they are used more frequently.</p>",
        "id": 186958475,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1580365986
    },
    {
        "content": "<p>what I call \"rarely used\" theorems are \"frequently used\" in maths, while theorems that are \"frequently used\" by my definition are used so commonly and implicitly in maths that they aren't mentioned at all</p>",
        "id": 186958527,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1580366053
    },
    {
        "content": "<p>I'm on board with the latter proposal for <code>preirreducible</code> sets</p>",
        "id": 186958559,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1580366142
    },
    {
        "content": "<p>So, are we going to have <code>preprime</code> numbers as well?</p>",
        "id": 186959140,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1580367083
    },
    {
        "content": "<p>I think this could be fun (-;</p>",
        "id": 186959142,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1580367093
    },
    {
        "content": "<p>If it is useful, sure</p>",
        "id": 186959144,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1580367101
    },
    {
        "content": "<p>The definition of prime in Lean always struck me as odd, it is a conjunction of two seemingly unrelated statements. On the other hand the concept of prime is clearly the right one. I could imagine seeing up the preliminaries of the theory with preprimes</p>",
        "id": 186960597,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1580369480
    },
    {
        "content": "<p>It is the same condition, specialized once to n = 0 and once to n = 2. It's just that we write the product of 0 things as <code>1</code> and \"implies the empty disjunction\" as <code>not</code>.</p>",
        "id": 186992267,
        "sender_full_name": "Reid Barton",
        "timestamp": 1580394997
    },
    {
        "content": "<p>For n = 1 the condition is a tautology and for n &gt;= 3 it follows from the case n = 2 by induction, so we can omit those.</p>",
        "id": 186992349,
        "sender_full_name": "Reid Barton",
        "timestamp": 1580395053
    },
    {
        "content": "<p>It's the same story for integral domains, connected spaces, irreducible spaces, connected graphs etc.</p>",
        "id": 186992446,
        "sender_full_name": "Reid Barton",
        "timestamp": 1580395107
    },
    {
        "content": "<p>I only noticed this term that <code>semilattice_sup_bot</code>was precisely what you needed for all finite joins to exist: the two axioms are n=0 and n=2.</p>",
        "id": 186998032,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1580398451
    }
]