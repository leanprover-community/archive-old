[
    {
        "content": "<p>I need what is apparently called the \"fourth isomorphism theorem\" for R-modules, R a commutative ring. Of course more generally we will need all the isomorphism theorems for groups and R-modules, plus various extra bits and bobs. I might do some of this today in a coding session with the undergraduates. I propose doing the thing I actually want, which is that if <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>R</mi></mrow><annotation encoding=\"application/x-tex\">R</annotation></semantics></math></span><span aria-hidden=\"true\" class=\"katex-html\"><span class=\"strut\" style=\"height:0.68333em;\"></span><span class=\"strut bottom\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"base\"><span class=\"mord mathit\" style=\"margin-right:0.00773em;\">R</span></span></span></span> is a general ring (commutativity not necessary) and <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>N</mi></mrow><annotation encoding=\"application/x-tex\">N</annotation></semantics></math></span><span aria-hidden=\"true\" class=\"katex-html\"><span class=\"strut\" style=\"height:0.68333em;\"></span><span class=\"strut bottom\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"base\"><span class=\"mord mathit\" style=\"margin-right:0.10903em;\">N</span></span></span></span> is a sub-<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>R</mi></mrow><annotation encoding=\"application/x-tex\">R</annotation></semantics></math></span><span aria-hidden=\"true\" class=\"katex-html\"><span class=\"strut\" style=\"height:0.68333em;\"></span><span class=\"strut bottom\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"base\"><span class=\"mord mathit\" style=\"margin-right:0.00773em;\">R</span></span></span></span>-module of the <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>R</mi></mrow><annotation encoding=\"application/x-tex\">R</annotation></semantics></math></span><span aria-hidden=\"true\" class=\"katex-html\"><span class=\"strut\" style=\"height:0.68333em;\"></span><span class=\"strut bottom\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"base\"><span class=\"mord mathit\" style=\"margin-right:0.00773em;\">R</span></span></span></span>-module <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>M</mi></mrow><annotation encoding=\"application/x-tex\">M</annotation></semantics></math></span><span aria-hidden=\"true\" class=\"katex-html\"><span class=\"strut\" style=\"height:0.68333em;\"></span><span class=\"strut bottom\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"base\"><span class=\"mord mathit\" style=\"margin-right:0.10903em;\">M</span></span></span></span> then there's a canonical order-preserving bijection between submodules of <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>M</mi><mi mathvariant=\"normal\">/</mi><mi>N</mi></mrow><annotation encoding=\"application/x-tex\">M/N</annotation></semantics></math></span><span aria-hidden=\"true\" class=\"katex-html\"><span class=\"strut\" style=\"height:0.75em;\"></span><span class=\"strut bottom\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"base\"><span class=\"mord mathit\" style=\"margin-right:0.10903em;\">M</span><span class=\"mord mathrm\">/</span><span class=\"mord mathit\" style=\"margin-right:0.10903em;\">N</span></span></span></span> and submodules of <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>M</mi></mrow><annotation encoding=\"application/x-tex\">M</annotation></semantics></math></span><span aria-hidden=\"true\" class=\"katex-html\"><span class=\"strut\" style=\"height:0.68333em;\"></span><span class=\"strut bottom\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"base\"><span class=\"mord mathit\" style=\"margin-right:0.10903em;\">M</span></span></span></span> containing <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>N</mi></mrow><annotation encoding=\"application/x-tex\">N</annotation></semantics></math></span><span aria-hidden=\"true\" class=\"katex-html\"><span class=\"strut\" style=\"height:0.68333em;\"></span><span class=\"strut bottom\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"base\"><span class=\"mord mathit\" style=\"margin-right:0.10903em;\">N</span></span></span></span>. My proposal is that I write this code at about 2pm today UK time so before then perhaps I should have a clue about the best way to say this. Here are some dumb questions.</p>\n<p>The reason I want this is that I want that a quotient module of a Noetherian module is Noetherian. Because Noetherian modules are not yet in mathlib, but they are in mathlib-community, am I right in thinking I should be doing this work in a fork of the mathlib-community repo?</p>\n<p>What should this file be called? <code>fourth_isomorphism_theorem.lean</code> sounds daft. Should it just be tagged onto quotient_module.lean in <code>linear_algebra</code>? I don't know how much more commutative algebra should up in this directory -- this stuff is not linear algebra any more.</p>\n<p>Those of us who care about Galois insertions might now point out that the result I want is perhaps something to do with Galois insertions or Galois connections. Currently my instinct is to completely ignore all of this because I don't see what it buys us. I'd be interested in opinions. My proposal is to write an equiv between the type of submodules of M/N and the type of submodules of M containing N and then prove that it is order-preserving. Now my (good) understanding of <code>equiv</code> tells me exactly what I should be proving about the constructions. But my (poor) understanding of lattices doesn't tell me exactly what I should be proving about the order: I mean -- I know I should be proving that the constructions in each direction preserve inclusion, but should I be proving that some map is some morphism of lattices, or something? </p>\n<p>My goal is that a quotient module of a Noetherian module is Noetherian, and I want the proof to be \"this set is well-founded, by definition of Noetherian module, and hence this subset is well-founded, so we're done\". What structures should I be using to formalise this statement in order for it to be mathlib-ready?</p>",
        "id": 133249273,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1535965462
    },
    {
        "content": "<p>Gaargh. I've checked out the <code>noetherian</code> branch of community mathlib and it doesn't build. <code>order/conditionally_complete_lattice.lean</code> has a problem in line 128 for example: </p>\n<div class=\"codehilite\"><pre><span></span><span class=\"c\">/-</span><span class=\"cm\">-Adding a point to a set preserves its boundedness above.-/</span>\n<span class=\"bp\">@</span><span class=\"o\">[</span><span class=\"n\">simp</span><span class=\"o\">]</span> <span class=\"kn\">lemma</span> <span class=\"n\">bdd_above_insert</span> <span class=\"o\">:</span> <span class=\"n\">bdd_above</span> <span class=\"o\">(</span><span class=\"n\">insert</span> <span class=\"n\">a</span> <span class=\"n\">s</span><span class=\"o\">)</span> <span class=\"bp\">↔</span> <span class=\"n\">bdd_above</span> <span class=\"n\">s</span> <span class=\"o\">:=</span>\n<span class=\"bp\">⟨</span><span class=\"k\">show</span> <span class=\"n\">bdd_above</span> <span class=\"o\">(</span><span class=\"n\">insert</span> <span class=\"n\">a</span> <span class=\"n\">s</span><span class=\"o\">)</span> <span class=\"bp\">→</span> <span class=\"n\">bdd_above</span> <span class=\"n\">s</span><span class=\"o\">,</span> <span class=\"k\">from</span> <span class=\"n\">bdd_above_subset</span> <span class=\"o\">(</span><span class=\"k\">by</span> <span class=\"n\">simp</span><span class=\"o\">),</span>\n <span class=\"k\">show</span> <span class=\"n\">bdd_above</span> <span class=\"n\">s</span> <span class=\"bp\">→</span> <span class=\"n\">bdd_above</span> <span class=\"o\">(</span><span class=\"n\">insert</span> <span class=\"n\">a</span> <span class=\"n\">s</span><span class=\"o\">),</span> <span class=\"k\">by</span> <span class=\"n\">rw</span><span class=\"o\">[</span><span class=\"n\">insert_eq</span><span class=\"o\">]</span><span class=\"bp\">;</span> <span class=\"n\">finish</span><span class=\"bp\">⟩</span>\n</pre></div>\n\n\n<p>-&gt;</p>\n<div class=\"codehilite\"><pre><span></span>α : Type u,\n_inst_1 : semilattice_sup α,\ns : set α,\na : α\n⊢ bdd_above s → bdd_above (insert a s)\nconditionally_complete_lattice.lean:131:62: error\n\nsolve1 tactic failed, focused goal has not been solved\nstate:\nα : Type u,\n_inst_1 : semilattice_sup α,\ns : set α,\na : α,\na_1 : bdd_above s,\na_2 : ¬bdd_above (insert a s)\n⊢ false\n</pre></div>\n\n\n<p>(<code>finish</code> is failing). Is there an easy fix for this?</p>",
        "id": 133253484,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1535972334
    },
    {
        "content": "<p><code>finish [bdd_above_insert]</code>?</p>",
        "id": 133253600,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1535972498
    },
    {
        "content": "<p>but there are 100 errors</p>",
        "id": 133253683,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1535972612
    },
    {
        "content": "<p>so I'd rather find out what's going on</p>",
        "id": 133253685,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1535972620
    },
    {
        "content": "<p>Maybe your <code>olean</code> files aren't matching with this branch? Did you try a recompile from scratch?</p>",
        "id": 133253804,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1535972748
    },
    {
        "content": "<p>maybe I messed up. I thought I'd done exactly that</p>",
        "id": 133253841,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1535972763
    },
    {
        "content": "<p>I've removed all the olean files and am trying again</p>",
        "id": 133253870,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1535972830
    },
    {
        "content": "<p>Dumb question: if I clone a lean repo, make all the .olean files, and then checkout a different branch, do all the .olean files magically disappear?</p>",
        "id": 133253923,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1535972890
    },
    {
        "content": "<p>Nope. They are in <code>.gitignore</code>. So git doesn't touch them.</p>",
        "id": 133254408,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1535973709
    },
    {
        "content": "<p>Also, Lean should know which olean files to rebuild. But sometimes it happens that a olean file is flying around were the corresponding lean file was removed. This produces strange results sometimes...</p>",
        "id": 133254454,
        "sender_full_name": "Johannes Hölzl",
        "timestamp": 1535973751
    },
    {
        "content": "<p>So if you are on a very recent <code>mathlib:master</code>, and you've built. Then you checkout <code>noetherian</code> which is a couple of days old, then you get <code>olean</code>-files that are too new.</p>",
        "id": 133254456,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1535973759
    },
    {
        "content": "<p>no there are still errors.</p>",
        "id": 133254459,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1535973767
    },
    {
        "content": "<p>I removed all .olean files and the noetherian branch does not compile. Is this to do with \"This branch is 2 commits ahead, 37 commits behind leanprover:master.\"?</p>",
        "id": 133254464,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1535973783
    },
    {
        "content": "<p>Is there a magic merge type command I can type to rebase or whatever the right word is?</p>",
        "id": 133254469,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1535973802
    },
    {
        "content": "<p>With <code>noetherian</code> checked out, you could try <code>git merge master</code>.</p>",
        "id": 133254480,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1535973826
    },
    {
        "content": "<p>There shouldn't be any conflicts.</p>",
        "id": 133254519,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1535973844
    },
    {
        "content": "<p><code>git merge master</code> reports <code>already up to date</code> and nothing seemed to happen.</p>",
        "id": 133254531,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1535973888
    },
    {
        "content": "<p>It would be really nice to get a working <code>noetherian.lean</code> by 2pm</p>",
        "id": 133254533,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1535973902
    },
    {
        "content": "<p>I can happily dump the entire repo and clone again.</p>",
        "id": 133254547,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1535973921
    },
    {
        "content": "<p>Give me 2 minutes</p>",
        "id": 133254553,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1535973956
    },
    {
        "content": "<div class=\"codehilite\"><pre><span></span>git checkout master\ngit pull\ngit checkout noetherian\ngit merge master\ngit push origin noetherian\n</pre></div>",
        "id": 133254638,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1535974051
    },
    {
        "content": "<p>Can you checkout <code>noetherian</code> and <code>git pull origin noetherian</code>?</p>",
        "id": 133254646,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1535974077
    },
    {
        "content": "<p>I'm building using <code>nightly-2018-06-21</code>. Is this an issue?</p>",
        "id": 133254687,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1535974089
    },
    {
        "content": "<p>I just cloned again from github</p>",
        "id": 133254693,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1535974107
    },
    {
        "content": "<p>I'll also rebuild. But this machine is not the fastest in the world.</p>",
        "id": 133254704,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1535974150
    },
    {
        "content": "<p>Will switching lean version change the behaviour of <code>finish</code>?</p>",
        "id": 133254881,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1535974409
    },
    {
        "content": "<p>I'm glad your version of 2pm is still 90 minutes away...</p>",
        "id": 133254935,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1535974468
    },
    {
        "content": "<p>Oh!</p>",
        "id": 133254941,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1535974485
    },
    {
        "content": "<p>I might have found my erro</p>",
        "id": 133254944,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1535974493
    },
    {
        "content": "<p>r</p>",
        "id": 133254945,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1535974495
    },
    {
        "content": "<p>I think I just don't understand branches. Maybe I thought I had pulled but I hadn't pulled.</p>",
        "id": 133254968,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1535974539
    },
    {
        "content": "<p>Does my little log of shell commands make sense to you?</p>",
        "id": 133255015,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1535974569
    },
    {
        "content": "<p>I just cloned the repo again</p>",
        "id": 133255019,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1535974585
    },
    {
        "content": "<p>I pushed a commit that merges the latest master into <code>noetherian</code></p>",
        "id": 133255040,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1535974627
    },
    {
        "content": "<p>Woohow... I'm also getting boatloads of errors.</p>",
        "id": 133255302,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1535974931
    },
    {
        "content": "<p>Did I break the system?</p>",
        "id": 133255308,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1535974940
    },
    {
        "content": "<p>which version of Lean are you using?</p>",
        "id": 133255417,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1535975092
    },
    {
        "content": "<p>Whatever <code>elan</code> gave me. I think/hope the most recent. Let me check.</p>",
        "id": 133255438,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1535975119
    },
    {
        "content": "<p><code>Lean (version 3.4.1, commit 17fe3decaf8a, Release)</code></p>",
        "id": 133255457,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1535975150
    },
    {
        "content": "<p>Everything is complaining that <code>data/set/basic.lean</code> uses sorry.</p>",
        "id": 133255549,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1535975228
    },
    {
        "content": "<p>so <code>data/set/basic.lean</code> works fine in regular mathlib but I have an error in community mathlib</p>",
        "id": 133255648,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1535975362
    },
    {
        "content": "<div class=\"codehilite\"><pre><span></span><span class=\"bp\">@</span><span class=\"o\">[</span><span class=\"n\">simp</span><span class=\"o\">]</span> <span class=\"kn\">theorem</span> <span class=\"n\">insert_diff_singleton</span> <span class=\"o\">{</span><span class=\"n\">a</span> <span class=\"o\">:</span> <span class=\"n\">α</span><span class=\"o\">}</span> <span class=\"o\">{</span><span class=\"n\">s</span> <span class=\"o\">:</span> <span class=\"n\">set</span> <span class=\"n\">α</span><span class=\"o\">}</span> <span class=\"o\">:</span>\n  <span class=\"n\">insert</span> <span class=\"n\">a</span> <span class=\"o\">(</span><span class=\"n\">s</span> <span class=\"err\">\\</span> <span class=\"o\">{</span><span class=\"n\">a</span><span class=\"o\">})</span> <span class=\"bp\">=</span> <span class=\"n\">insert</span> <span class=\"n\">a</span> <span class=\"n\">s</span> <span class=\"o\">:=</span>\n<span class=\"k\">by</span> <span class=\"n\">simp</span> <span class=\"o\">[</span><span class=\"n\">insert_eq</span><span class=\"o\">,</span> <span class=\"n\">union_diff_self</span><span class=\"o\">]</span>\n</pre></div>\n\n\n<p>takes an age to compile and then I get a deterministic time-out</p>",
        "id": 133255745,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1535975500
    },
    {
        "content": "<p>what does <code>git status</code> say? Are there any changed files?</p>",
        "id": 133255803,
        "sender_full_name": "Johannes Hölzl",
        "timestamp": 1535975537
    },
    {
        "content": "<p>I only just cloned</p>",
        "id": 133256008,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1535975825
    },
    {
        "content": "<div class=\"codehilite\"><pre><span></span><span class=\"n\">buzzard</span><span class=\"bp\">@</span><span class=\"n\">ebony</span><span class=\"o\">:</span><span class=\"bp\">~/</span><span class=\"n\">lean</span><span class=\"bp\">-</span><span class=\"n\">projects</span><span class=\"bp\">/</span><span class=\"n\">mathlib</span><span class=\"bp\">-</span><span class=\"n\">community</span><span class=\"err\">$</span> <span class=\"n\">git</span> <span class=\"n\">status</span>\n<span class=\"n\">On</span> <span class=\"n\">branch</span> <span class=\"n\">noetherian</span>\n<span class=\"n\">Your</span> <span class=\"n\">branch</span> <span class=\"n\">is</span> <span class=\"n\">up</span><span class=\"bp\">-</span><span class=\"n\">to</span><span class=\"bp\">-</span><span class=\"n\">date</span> <span class=\"k\">with</span> <span class=\"err\">&#39;</span><span class=\"n\">origin</span><span class=\"bp\">/</span><span class=\"n\">noetherian&#39;</span><span class=\"bp\">.</span>\n<span class=\"n\">nothing</span> <span class=\"n\">to</span> <span class=\"n\">commit</span><span class=\"o\">,</span> <span class=\"n\">working</span> <span class=\"n\">directory</span> <span class=\"n\">clean</span>\n<span class=\"n\">buzzard</span><span class=\"bp\">@</span><span class=\"n\">ebony</span><span class=\"o\">:</span><span class=\"bp\">~/</span><span class=\"n\">lean</span><span class=\"bp\">-</span><span class=\"n\">projects</span><span class=\"bp\">/</span><span class=\"n\">mathlib</span><span class=\"bp\">-</span><span class=\"n\">community</span><span class=\"err\">$</span>\n</pre></div>",
        "id": 133256024,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1535975859
    },
    {
        "content": "<p>The latest commit on the <code>noetherian</code> branch is a merging in <code>master</code>. I just did that.</p>",
        "id": 133256027,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1535975868
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"112680\">@Johan Commelin</span>, rebasing might have been better than merging. :-) (Says someone who only learnt to rebase last week.)</p>",
        "id": 133256033,
        "sender_full_name": "Scott Morrison",
        "timestamp": 1535975880
    },
    {
        "content": "<p>The issue existed before the merge</p>",
        "id": 133256073,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1535975889
    },
    {
        "content": "<p>I noticed the noetherian branch was broken, too.</p>",
        "id": 133256076,
        "sender_full_name": "Scott Morrison",
        "timestamp": 1535975897
    },
    {
        "content": "<p>Sorry, should have said something!</p>",
        "id": 133256079,
        "sender_full_name": "Scott Morrison",
        "timestamp": 1535975906
    },
    {
        "content": "<p>is the master branch broken?</p>",
        "id": 133256096,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1535975930
    },
    {
        "content": "<p>[of community-mathlib]</p>",
        "id": 133256224,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1535976033
    },
    {
        "content": "<p>no, it's good</p>",
        "id": 133256260,
        "sender_full_name": "Scott Morrison",
        "timestamp": 1535976068
    },
    {
        "content": "<p>which version of Lean are you using?</p>",
        "id": 133256280,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1535976111
    },
    {
        "content": "<p>I'm guessing the culprit is Mario's changes data/set/basic</p>",
        "id": 133256283,
        "sender_full_name": "Scott Morrison",
        "timestamp": 1535976116
    },
    {
        "content": "<p>What are these \"versions\" of which you speak? I use elan, so running lean automatically runs whichever version each respository says it needs. :-)</p>",
        "id": 133256361,
        "sender_full_name": "Scott Morrison",
        "timestamp": 1535976168
    },
    {
        "content": "<p>Looking at the leanpkg.toml for mathlib, that's 3.4.1</p>",
        "id": 133256378,
        "sender_full_name": "Scott Morrison",
        "timestamp": 1535976188
    },
    {
        "content": "<p>Ok, what should we do?</p>",
        "id": 133256482,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1535976314
    },
    {
        "content": "<p>Can we still rebase?</p>",
        "id": 133256491,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1535976328
    },
    {
        "content": "<p>Then we can use a built latest master branch, and look at the 5 changes or so, that are introduced by noetherian</p>",
        "id": 133256511,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1535976359
    },
    {
        "content": "<p>Oh I can work around this, I don't need it to compile. I will just work with mathlib master and not use the Noetherian branch.</p>",
        "id": 133256573,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1535976385
    },
    {
        "content": "<p>Sure, but you want to work on noetherian modules, right?</p>",
        "id": 133256588,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1535976408
    },
    {
        "content": "<p>So you want the TFAE theorem</p>",
        "id": 133256596,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1535976418
    },
    {
        "content": "<p>And that is on the noetherian branch, and it depends on changes to <code>data/set/basic.lean</code> that seem to cause wreckage.</p>",
        "id": 133256616,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1535976447
    },
    {
        "content": "<p>right</p>",
        "id": 133256624,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1535976461
    },
    {
        "content": "<p>so I'll just not have noetherian modules and I can still do the thing I was planning on doing, which was proving the 4th isomorphism theorem for R-modules</p>",
        "id": 133256675,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1535976491
    },
    {
        "content": "<p>we just don't get the application</p>",
        "id": 133256678,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1535976497
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"110294\">@Johannes Hölzl</span> <span class=\"user-mention\" data-user-id=\"110524\">@Scott Morrison</span> would it be ok to rewrite history on this branch?</p>",
        "id": 133256680,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1535976499
    },
    {
        "content": "<p>It's OK, I have changed my plans</p>",
        "id": 133256690,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1535976513
    },
    {
        "content": "<p>fine with me :-)</p>",
        "id": 133256691,
        "sender_full_name": "Scott Morrison",
        "timestamp": 1535976513
    },
    {
        "content": "<p>And you don't get the lattice structure and all the other foundational stuff that Mario did.</p>",
        "id": 133256706,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1535976535
    },
    {
        "content": "<p>I don't need this stuff right now</p>",
        "id": 133256717,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1535976548
    },
    {
        "content": "<p>I just need it at some point</p>",
        "id": 133256723,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1535976556
    },
    {
        "content": "<p>it's no longer time-critical</p>",
        "id": 133256725,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1535976559
    },
    {
        "content": "<p>Should I rebase it?</p>",
        "id": 133256729,
        "sender_full_name": "Johannes Hölzl",
        "timestamp": 1535976561
    },
    {
        "content": "<p>Yes please.</p>",
        "id": 133256735,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1535976570
    },
    {
        "content": "<p>I don't mind either way</p>",
        "id": 133256736,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1535976572
    },
    {
        "content": "<p>Throw away my merge commit.</p>",
        "id": 133256739,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1535976577
    },
    {
        "content": "<p>just a second I need to fix some stuff which broke by Marios <code>data/set/basic.lean</code> changes</p>",
        "id": 133257077,
        "sender_full_name": "Johannes Hölzl",
        "timestamp": 1535976977
    },
    {
        "content": "<p><code>noetherian</code> is now rebased and fixes the problems with the simp set. But maybe we just shouldn't add <code>singleton_union</code> and <code>union_singleton</code> to the simp set...</p>",
        "id": 133257831,
        "sender_full_name": "Johannes Hölzl",
        "timestamp": 1535977925
    },
    {
        "content": "<p>Thanks a lot!</p>",
        "id": 133258618,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1535978782
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"110038\">@Kevin Buzzard</span> A fresh clone should repair your issues.</p>",
        "id": 133258637,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1535978800
    },
    {
        "content": "<p><em>A clone of Kevin Buzzard arrives with a wrench</em></p>",
        "id": 133258753,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1535978898
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"110038\">@Kevin Buzzard</span> What did you end up doing?</p>",
        "id": 133266146,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1535988057
    },
    {
        "content": "<div class=\"codehilite\"><pre><span></span><span class=\"kn\">import</span> <span class=\"n\">linear_algebra</span><span class=\"bp\">.</span><span class=\"n\">quotient_module</span>\n\n<span class=\"kn\">open</span> <span class=\"n\">is_submodule</span>\n\n<span class=\"n\">local</span> <span class=\"n\">attribute</span> <span class=\"o\">[</span><span class=\"kn\">instance</span><span class=\"o\">]</span> <span class=\"n\">quotient_rel</span>\n\n<span class=\"kn\">definition</span> <span class=\"n\">module</span><span class=\"bp\">.</span><span class=\"n\">correspondence_theorem</span> <span class=\"o\">(</span><span class=\"n\">R</span> <span class=\"o\">:</span> <span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">)</span> <span class=\"o\">[</span><span class=\"n\">ring</span> <span class=\"n\">R</span><span class=\"o\">]</span> <span class=\"o\">(</span><span class=\"n\">M</span> <span class=\"o\">:</span> <span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">)</span> <span class=\"o\">[</span><span class=\"n\">module</span> <span class=\"n\">R</span> <span class=\"n\">M</span><span class=\"o\">]</span>\n  <span class=\"o\">(</span><span class=\"n\">N</span> <span class=\"o\">:</span> <span class=\"n\">set</span> <span class=\"n\">M</span><span class=\"o\">)</span> <span class=\"o\">[</span><span class=\"n\">is_submodule</span> <span class=\"n\">N</span><span class=\"o\">]</span> <span class=\"o\">:</span>\n<span class=\"o\">{</span><span class=\"n\">Xbar</span> <span class=\"o\">:</span> <span class=\"n\">set</span> <span class=\"o\">(</span><span class=\"n\">quotient</span> <span class=\"n\">M</span> <span class=\"n\">N</span><span class=\"o\">)</span> <span class=\"bp\">//</span> <span class=\"n\">is_submodule</span> <span class=\"n\">Xbar</span><span class=\"o\">}</span> <span class=\"err\">≃</span> <span class=\"o\">{</span><span class=\"n\">X</span> <span class=\"o\">:</span> <span class=\"n\">set</span> <span class=\"n\">M</span> <span class=\"bp\">//</span> <span class=\"n\">is_submodule</span> <span class=\"n\">X</span> <span class=\"bp\">∧</span> <span class=\"n\">N</span> <span class=\"err\">⊆</span> <span class=\"n\">X</span><span class=\"o\">}</span> <span class=\"o\">:=</span>\n<span class=\"o\">{</span> <span class=\"n\">to_fun</span> <span class=\"o\">:=</span> <span class=\"bp\">λ</span> <span class=\"n\">Xbar</span><span class=\"o\">,</span> <span class=\"bp\">⟨</span><span class=\"n\">quotient</span><span class=\"bp\">.</span><span class=\"n\">mk</span> <span class=\"bp\">⁻¹</span><span class=\"err\">&#39;</span> <span class=\"n\">Xbar</span><span class=\"bp\">.</span><span class=\"mi\">1</span><span class=\"o\">,</span><span class=\"bp\">⟨</span>\n    <span class=\"bp\">@@</span><span class=\"n\">is_submodule</span><span class=\"bp\">.</span><span class=\"n\">preimage</span> <span class=\"bp\">_</span> <span class=\"bp\">_</span> <span class=\"bp\">_</span> <span class=\"n\">Xbar</span><span class=\"bp\">.</span><span class=\"mi\">2</span> <span class=\"bp\">_</span> <span class=\"o\">(</span><span class=\"n\">is_linear_map_quotient_mk</span> <span class=\"n\">N</span><span class=\"o\">),</span>\n    <span class=\"bp\">λ</span> <span class=\"n\">n</span> <span class=\"n\">Hn</span><span class=\"o\">,</span><span class=\"k\">begin</span>\n      <span class=\"k\">show</span> <span class=\"n\">quotient</span><span class=\"bp\">.</span><span class=\"n\">mk</span> <span class=\"n\">n</span> <span class=\"err\">∈</span> <span class=\"n\">Xbar</span><span class=\"bp\">.</span><span class=\"n\">val</span><span class=\"o\">,</span>\n      <span class=\"k\">have</span> <span class=\"o\">:</span> <span class=\"err\">⟦</span><span class=\"n\">n</span><span class=\"err\">⟧</span> <span class=\"bp\">=</span> <span class=\"err\">⟦</span><span class=\"mi\">0</span><span class=\"err\">⟧</span><span class=\"o\">,</span>\n        <span class=\"n\">apply</span> <span class=\"n\">quotient</span><span class=\"bp\">.</span><span class=\"n\">sound</span><span class=\"o\">,</span>\n        <span class=\"k\">show</span> <span class=\"n\">n</span> <span class=\"bp\">-</span> <span class=\"mi\">0</span> <span class=\"err\">∈</span> <span class=\"n\">N</span><span class=\"o\">,</span>\n        <span class=\"n\">simpa</span><span class=\"o\">,</span>\n      <span class=\"n\">rw</span> <span class=\"n\">this</span><span class=\"o\">,</span>\n      <span class=\"n\">haveI</span> <span class=\"o\">:=</span> <span class=\"n\">Xbar</span><span class=\"bp\">.</span><span class=\"n\">property</span><span class=\"o\">,</span>\n      <span class=\"k\">show</span> <span class=\"o\">(</span><span class=\"mi\">0</span> <span class=\"o\">:</span> <span class=\"n\">quotient</span> <span class=\"n\">M</span> <span class=\"n\">N</span><span class=\"o\">)</span> <span class=\"err\">∈</span> <span class=\"n\">Xbar</span><span class=\"bp\">.</span><span class=\"n\">val</span><span class=\"o\">,</span>\n      <span class=\"n\">exact</span> <span class=\"bp\">@</span><span class=\"n\">is_submodule</span><span class=\"bp\">.</span><span class=\"n\">zero</span> <span class=\"bp\">_</span> <span class=\"bp\">_</span> <span class=\"bp\">_</span> <span class=\"bp\">_</span> <span class=\"n\">Xbar</span><span class=\"bp\">.</span><span class=\"n\">val</span> <span class=\"bp\">_</span><span class=\"o\">,</span>\n<span class=\"kn\">end</span><span class=\"bp\">⟩⟩</span><span class=\"o\">,</span>\n  <span class=\"n\">inv_fun</span> <span class=\"o\">:=</span> <span class=\"bp\">λ</span> <span class=\"n\">X</span><span class=\"o\">,</span> <span class=\"bp\">⟨</span><span class=\"o\">((</span><span class=\"n\">quotient</span><span class=\"bp\">.</span><span class=\"n\">mk</span> <span class=\"err\">&#39;&#39;</span> <span class=\"n\">X</span><span class=\"bp\">.</span><span class=\"n\">val</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"n\">set</span> <span class=\"o\">(</span><span class=\"n\">quotient</span> <span class=\"n\">M</span> <span class=\"n\">N</span><span class=\"o\">)),</span>\n    <span class=\"k\">by</span> <span class=\"n\">haveI</span> <span class=\"o\">:=</span> <span class=\"n\">X</span><span class=\"bp\">.</span><span class=\"mi\">2</span><span class=\"bp\">.</span><span class=\"mi\">1</span><span class=\"bp\">;</span> <span class=\"n\">exact</span> <span class=\"n\">is_submodule</span><span class=\"bp\">.</span><span class=\"n\">image</span> <span class=\"o\">(</span><span class=\"n\">is_linear_map_quotient_mk</span> <span class=\"n\">N</span><span class=\"o\">)</span><span class=\"bp\">⟩</span><span class=\"o\">,</span>\n  <span class=\"n\">left_inv</span> <span class=\"o\">:=</span> <span class=\"bp\">λ</span> <span class=\"bp\">⟨</span><span class=\"n\">Pbar</span><span class=\"o\">,</span><span class=\"bp\">_⟩</span><span class=\"o\">,</span><span class=\"n\">subtype</span><span class=\"bp\">.</span><span class=\"n\">eq</span> <span class=\"err\">$</span> <span class=\"n\">set</span><span class=\"bp\">.</span><span class=\"n\">image_preimage_eq</span> <span class=\"n\">quotient</span><span class=\"bp\">.</span><span class=\"n\">exists_rep</span><span class=\"o\">,</span>\n  <span class=\"n\">right_inv</span> <span class=\"o\">:=</span> <span class=\"bp\">λ</span> <span class=\"bp\">⟨</span><span class=\"n\">P</span><span class=\"o\">,</span><span class=\"n\">HP</span><span class=\"bp\">⟩</span><span class=\"o\">,</span> <span class=\"n\">subtype</span><span class=\"bp\">.</span><span class=\"n\">eq</span> <span class=\"err\">$</span> <span class=\"n\">set</span><span class=\"bp\">.</span><span class=\"n\">ext</span> <span class=\"err\">$</span> <span class=\"bp\">λ</span> <span class=\"n\">x</span><span class=\"o\">,</span><span class=\"bp\">⟨</span><span class=\"k\">begin</span>\n    <span class=\"n\">intro</span> <span class=\"n\">H</span><span class=\"o\">,</span>\n    <span class=\"k\">have</span> <span class=\"n\">H2</span> <span class=\"o\">:</span> <span class=\"bp\">∃</span> <span class=\"o\">(</span><span class=\"n\">y</span> <span class=\"o\">:</span> <span class=\"n\">M</span><span class=\"o\">),</span> <span class=\"n\">y</span> <span class=\"err\">∈</span> <span class=\"n\">P</span> <span class=\"bp\">∧</span> <span class=\"n\">y</span> <span class=\"bp\">≈</span> <span class=\"n\">x</span><span class=\"o\">,</span>\n      <span class=\"n\">simpa</span> <span class=\"kn\">using</span> <span class=\"n\">H</span><span class=\"o\">,</span>\n    <span class=\"n\">rcases</span> <span class=\"n\">H2</span> <span class=\"k\">with</span> <span class=\"bp\">⟨</span><span class=\"n\">y</span><span class=\"o\">,</span><span class=\"n\">H3</span><span class=\"o\">,</span><span class=\"n\">H4</span><span class=\"bp\">⟩</span><span class=\"o\">,</span>\n    <span class=\"n\">rw</span> <span class=\"n\">quotient_rel_eq</span> <span class=\"n\">at</span> <span class=\"n\">H4</span><span class=\"o\">,</span>\n    <span class=\"k\">have</span> <span class=\"n\">H5</span> <span class=\"o\">:</span> <span class=\"n\">y</span> <span class=\"bp\">-</span> <span class=\"o\">(</span><span class=\"n\">y</span> <span class=\"bp\">-</span> <span class=\"n\">x</span><span class=\"o\">)</span> <span class=\"err\">∈</span> <span class=\"n\">P</span><span class=\"o\">,</span>\n      <span class=\"n\">refine</span> <span class=\"bp\">@</span><span class=\"n\">is_submodule</span><span class=\"bp\">.</span><span class=\"n\">sub</span> <span class=\"bp\">_</span> <span class=\"bp\">_</span> <span class=\"bp\">_</span> <span class=\"bp\">_</span> <span class=\"bp\">_</span> <span class=\"n\">HP</span><span class=\"bp\">.</span><span class=\"mi\">1</span> <span class=\"bp\">_</span> <span class=\"bp\">_</span> <span class=\"n\">H3</span> <span class=\"bp\">_</span><span class=\"o\">,</span> <span class=\"c1\">-- fixing type class inference issues</span>\n      <span class=\"n\">exact</span> <span class=\"n\">HP</span><span class=\"bp\">.</span><span class=\"mi\">2</span> <span class=\"n\">H4</span><span class=\"o\">,</span> <span class=\"c1\">-- goal still x ∈ P.val, but H5 is y - (y - x) ∈ P.val</span>\n    <span class=\"n\">convert</span> <span class=\"n\">H5</span><span class=\"o\">,</span> <span class=\"c1\">-- goal is now x = y - (y - x)</span>\n    <span class=\"n\">simp</span><span class=\"o\">,</span> <span class=\"c1\">-- solves this</span>\n  <span class=\"kn\">end</span>\n  <span class=\"o\">,</span><span class=\"k\">by</span> <span class=\"n\">apply</span> <span class=\"n\">set</span><span class=\"bp\">.</span><span class=\"n\">subset_preimage_image</span><span class=\"bp\">⟩</span><span class=\"o\">,</span>\n<span class=\"o\">}</span>\n</pre></div>",
        "id": 133267878,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1535990563
    },
    {
        "content": "<p>4th isomorphism theorem!</p>",
        "id": 133267879,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1535990568
    },
    {
        "content": "<p>I spent about an hour talking about the mathematics (some of the audience had not seen quotient groups before) and then about an hour writing the code, although I would never have done it if Chris hadn't shown up and occasionally made comments like \"oh you need to put <code>local attribute [instance] quotient_rel</code>\".</p>",
        "id": 133267919,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1535990633
    },
    {
        "content": "<p>It's only a bijection between the sets, but checking that it's inclusion-preserving will be trivial because this is just a diagram chase using functions, not using the module properties at all. Note the excessive number of <code>@</code>s in the proof; this is apparently (according to <span class=\"user-mention\" data-user-id=\"110044\">@Chris Hughes</span> ) because Chris has figured out how to make type class inference work OK for quotient structures, but quotient modules haven't been through his filter yet.</p>",
        "id": 133267998,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1535990720
    },
    {
        "content": "<p>Chris -- what needs doing?</p>",
        "id": 133268001,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1535990729
    },
    {
        "content": "<p>Ok, that's really cool! So this was basically a very successful live Lean coding session in front of students!</p>",
        "id": 133268214,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1535990991
    },
    {
        "content": "<p><code>to_fun</code> was particularly painful. There are tricks here which would have made my life a lot easier, someone just needs to take the tricks from quotient groups and apply them here.</p>",
        "id": 133268371,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1535991165
    },
    {
        "content": "<p>So, how far are we from showing that quotient of Noetherian is Noetherian?</p>",
        "id": 133268612,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1535991440
    },
    {
        "content": "<p>By now it is math-trivial...</p>",
        "id": 133268620,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1535991453
    },
    {
        "content": "<p>But in Lean? We need that a suitable sublattice of a well-founded lattice is well-founded. And we need to glue everything.</p>",
        "id": 133268689,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1535991489
    },
    {
        "content": "<p>Very easy. I think it's just an application of <code>inv_image_wf</code> with the isomorphism.</p>",
        "id": 133268697,
        "sender_full_name": "Chris Hughes",
        "timestamp": 1535991500
    },
    {
        "content": "<p>But you also need <code>S \\sub T \\iff f S \\sub f T</code></p>",
        "id": 133268722,
        "sender_full_name": "Chris Hughes",
        "timestamp": 1535991540
    },
    {
        "content": "<p>I'm just doing that now. I just used <code>tidy</code> for the first time <span class=\"emoji emoji-1f600\" title=\"grinning\">:grinning:</span></p>",
        "id": 133269273,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1535992274
    },
    {
        "content": "<p>In fact both inclusions are <code>by tidy</code></p>",
        "id": 133269333,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1535992437
    },
    {
        "content": "<p>OK dumb question: where is the construction which gives a module from a submodule?</p>",
        "id": 133271268,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1535995571
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover/mathlib/blob/master/linear_algebra/subtype_module.lean\" target=\"_blank\" title=\"https://github.com/leanprover/mathlib/blob/master/linear_algebra/subtype_module.lean\">https://github.com/leanprover/mathlib/blob/master/linear_algebra/subtype_module.lean</a></p>",
        "id": 133271286,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1535995646
    },
    {
        "content": "<p>Thanks.</p>",
        "id": 133271296,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1535995678
    },
    {
        "content": "<p>This could potentially be <code>subtype_instance</code>d</p>",
        "id": 133271342,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1535995714
    },
    {
        "content": "<p>so now I find myself proving that a submodule of a submodule is a submodule :-/</p>",
        "id": 133271824,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1535996482
    },
    {
        "content": "<p>Yes... that is really annoying.</p>",
        "id": 133271968,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1535996726
    },
    {
        "content": "<p>In the end we'll want some lattice inclusion for that part of the story as well. And it seems you are already proving it.</p>",
        "id": 133272026,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1535996776
    },
    {
        "content": "<p>tidy is just pwning a lot of these goals. It's just a lot of chasing trivialities around and perhaps tidy is just the thing for it.</p>",
        "id": 133275777,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1536003434
    },
    {
        "content": "<p>Yes, my goal before I go to bed today is to prove that submodules and quotient modules of Noetherian modules are Noetherian.</p>",
        "id": 133275793,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1536003479
    },
    {
        "content": "<p>Do you check what kind of proofs <code>tidy</code> generates? Or do you just write <code>by tidy</code> and move on?</p>",
        "id": 133275837,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1536003538
    },
    {
        "content": "<p>I write <code>by tidy</code> and then observe that in contrast to Scott I am unable to immediately see what proofs it generates, so I am forced to move on.</p>",
        "id": 133277571,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1536006389
    },
    {
        "content": "<p>you could use the hole command to see what it does</p>",
        "id": 133277630,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1536006485
    },
    {
        "content": "<p>I need some advice. I have <code>f : equiv X Y</code> between two types both of which have <code>`le</code>. I have proved a &lt;= b -&gt; f a &lt;= f b<code> and </code>c &lt;= d -&gt; f.symm c &lt;= f.symm d<code> (so f is an equivalence of preorders). I now want to deduce </code>a  &lt; b &lt;-&gt; f a &lt; f b` and I just wrote a boring proof of this. I feel like I'm missing some trick.</p>",
        "id": 133278197,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1536007728
    },
    {
        "content": "<p>This is the least boring proof I could come up with</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"kn\">import</span> <span class=\"n\">data</span><span class=\"bp\">.</span><span class=\"n\">equiv</span><span class=\"bp\">.</span><span class=\"n\">basic</span>\n<span class=\"kn\">variables</span> <span class=\"o\">{</span><span class=\"n\">α</span> <span class=\"o\">:</span> <span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span> <span class=\"o\">{</span><span class=\"n\">β</span> <span class=\"o\">:</span> <span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span> <span class=\"o\">[</span><span class=\"n\">preorder</span> <span class=\"n\">α</span><span class=\"o\">]</span> <span class=\"o\">[</span><span class=\"n\">preorder</span> <span class=\"n\">β</span><span class=\"o\">]</span>\n\n<span class=\"kn\">example</span> <span class=\"o\">(</span><span class=\"n\">f</span> <span class=\"o\">:</span> <span class=\"n\">α</span> <span class=\"err\">≃</span> <span class=\"n\">β</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">hf</span> <span class=\"o\">:</span> <span class=\"bp\">∀</span> <span class=\"n\">a</span> <span class=\"n\">b</span><span class=\"o\">,</span> <span class=\"n\">a</span> <span class=\"bp\">≤</span> <span class=\"n\">b</span> <span class=\"bp\">→</span> <span class=\"n\">f</span> <span class=\"n\">a</span> <span class=\"bp\">≤</span> <span class=\"n\">f</span> <span class=\"n\">b</span><span class=\"o\">)</span>\n  <span class=\"o\">(</span><span class=\"n\">hf&#39;</span> <span class=\"o\">:</span> <span class=\"bp\">∀</span> <span class=\"n\">a</span> <span class=\"n\">b</span><span class=\"o\">,</span> <span class=\"n\">a</span> <span class=\"bp\">≤</span> <span class=\"n\">b</span> <span class=\"bp\">→</span> <span class=\"n\">f</span><span class=\"bp\">.</span><span class=\"n\">symm</span> <span class=\"n\">a</span> <span class=\"bp\">≤</span> <span class=\"n\">f</span><span class=\"bp\">.</span><span class=\"n\">symm</span> <span class=\"n\">b</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"bp\">∀</span> <span class=\"n\">a</span> <span class=\"n\">b</span><span class=\"o\">,</span> <span class=\"n\">a</span> <span class=\"bp\">&lt;</span> <span class=\"n\">b</span> <span class=\"bp\">↔</span> <span class=\"n\">f</span> <span class=\"n\">a</span> <span class=\"bp\">&lt;</span> <span class=\"n\">f</span> <span class=\"n\">b</span> <span class=\"o\">:=</span>\n<span class=\"k\">have</span> <span class=\"bp\">∀</span> <span class=\"n\">a</span> <span class=\"n\">b</span><span class=\"o\">,</span> <span class=\"n\">a</span> <span class=\"bp\">≤</span> <span class=\"n\">b</span> <span class=\"bp\">↔</span> <span class=\"n\">f</span> <span class=\"n\">a</span> <span class=\"bp\">≤</span> <span class=\"n\">f</span> <span class=\"n\">b</span><span class=\"o\">,</span> <span class=\"k\">from</span> <span class=\"bp\">λ</span> <span class=\"n\">a</span> <span class=\"n\">b</span><span class=\"o\">,</span>\n<span class=\"bp\">⟨</span><span class=\"n\">hf</span> <span class=\"n\">a</span> <span class=\"n\">b</span><span class=\"o\">,</span> <span class=\"bp\">λ</span> <span class=\"n\">h</span><span class=\"o\">,</span> <span class=\"k\">by</span> <span class=\"n\">rw</span> <span class=\"o\">[</span><span class=\"err\">←</span> <span class=\"n\">equiv</span><span class=\"bp\">.</span><span class=\"n\">inverse_apply_apply</span> <span class=\"n\">f</span> <span class=\"n\">a</span><span class=\"o\">,</span> <span class=\"err\">←</span> <span class=\"n\">equiv</span><span class=\"bp\">.</span><span class=\"n\">inverse_apply_apply</span> <span class=\"n\">f</span> <span class=\"n\">b</span><span class=\"o\">]</span><span class=\"bp\">;</span>\n  <span class=\"n\">exact</span> <span class=\"n\">hf&#39;</span> <span class=\"o\">(</span><span class=\"n\">f</span> <span class=\"n\">a</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">f</span> <span class=\"n\">b</span><span class=\"o\">)</span> <span class=\"n\">h</span><span class=\"bp\">⟩</span><span class=\"o\">,</span>\n<span class=\"bp\">λ</span> <span class=\"n\">a</span> <span class=\"n\">b</span><span class=\"o\">,</span> <span class=\"k\">by</span> <span class=\"n\">simp</span> <span class=\"o\">[</span><span class=\"n\">lt_iff_le_not_le</span><span class=\"o\">,</span> <span class=\"n\">this</span><span class=\"o\">]</span>\n</pre></div>",
        "id": 133278580,
        "sender_full_name": "Chris Hughes",
        "timestamp": 1536008563
    },
    {
        "content": "<p>I am wondering now if this proof should be generated by a tactic. I have beefed up my f to an equivalence of sets-equipped-with-le and then anything that I can define in a reasonable way just using le should be the same on both sides.</p>",
        "id": 133279287,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1536010167
    },
    {
        "content": "<p>You should use the theorems about order isomorphisms</p>",
        "id": 133280969,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1536013334
    },
    {
        "content": "<p>right.</p>",
        "id": 133281184,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1536013805
    },
    {
        "content": "<p>I am drowning in trivialities, switching between your <code>is_submodule M</code>, the subtype <code>{X : set M // is_submodule X}</code>, and related subtypes such as <code>{X : set M // is_submodule X \\and X \\sub N}</code>.</p>",
        "id": 133281198,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1536013871
    },
    {
        "content": "<p>furthermore there is a hot tub full of teenage girls about 10 metres from me and they're getting really loud</p>",
        "id": 133281203,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1536013921
    },
    {
        "content": "<p>I think it might be about time to tell my daughter to quieten down a bit. I can't really think straight any more</p>",
        "id": 133281245,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1536013962
    },
    {
        "content": "<p>OK sanity restored (they're all asleep). <span class=\"user-mention\" data-user-id=\"110049\">@Mario Carneiro</span> or <span class=\"user-mention\" data-user-id=\"110031\">@Patrick Massot</span>  I need advice -- mostly about management of code . I have proved subs of Noeth mods are Noeth and I have essentially proved quotients of Noeth mods are Noeth. Currently the proofs are horrible, it was getting harder and harder to work last night and some lemmas are called <code>temp_name</code> etc so I don't even feel it's ready to PR. But I have momentum and I'd like to finish the job. Currently in the <code>noetherian</code> branch of community mathlib (which I am actively working on) there's a bunch of stuff at the beginning of <code>noetherian.lean</code> which Mario wrote and which has nothing to do with Noetherian stuff -- it sets up a new type <code>submodule R M</code> which is the R-submodules of the R-module M. Mario set it up as a structure but it has precisely the structure of a subtype, it's the subsets of M with some property. The...whatever they're called...are called <code>N.s</code> (the subset) and <code>N.sub</code> (the proof it's a submodule) rather than <code>N.val</code> and <code>N.property</code>. Which is preferable and why? I propose moving this stuff somewhere else, because I want to use this language in the correspondence theorem. The proof that subquotients of Noetherian things are Noetherian naturally uses this submodule lattice all over the place but I want to use the same language for the correspondence theorem. Currently I've moved the definition of submodule to <code>submodule.lean</code> in <code>linear_algebra</code> even though it's not linear algebra in my opinion -- this is absolutely commutative ring theory. My main organisational problem is that I now want to prove things like \"there's an injective map <code>submodule R (quotient M N) -&gt; submodule R M</code> which I've proved in some sense -- I have a Lean theorem saying some interpretation of this -- but I am convinced I'm not using the right language. Mario proved <code>submodule R M</code> (see how much easier it is to understand if you use maths notation rather than alpha beta?) is a partial order so now I seem to want to prove theorems about order embeddings, and use the fact that if <code>X -&gt; Y</code> is an order embedding then the order on <code>X</code> is induced from the order of <code>Y</code> somehow. Where do I look for this theorem and the relevant definitions -- are these theorems about orders, or semi-bot-sup-lattices, or what? Should this go into yet another file, called <code>submodule_order.lean</code> or does it all go in <code>submodule.lean</code> -- should this file be in ring theory or linear algebra, etc etc? </p>\n<p>What I'm trying to say is: the maths is now in Lean, but it's not in a good state. When I was writing the schemes repo I would just dump it all in and move on. But Scott and others have convinced me that this is not a good long term plan, so I now want to spend just an hour or two making it as mathlib-ready as I can before actually PR'ing it. If anyone has any comments on (a) the merits of creating random new files like submodule.lean and where they should go or (b) the abstract theorem I should be proving about the relationship between the partial orders <code>submodule R (quotient M N)</code> and <code>submodule R M</code> (there's an injective map from the left to the right which preserves the order relation; this must already be a concept in Lean) then I'd be grateful to hear them. I am reluctant to put any more commutative ring theory into <code>linear_algebra</code> by the way.</p>",
        "id": 133298907,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1536050524
    },
    {
        "content": "<p>did you sleep?</p>",
        "id": 133298942,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1536050591
    },
    {
        "content": "<p>I did. The joys of earplugs.</p>",
        "id": 133298951,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1536050606
    },
    {
        "content": "<p>I've just spent 2 hours tidying up though</p>",
        "id": 133298957,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1536050623
    },
    {
        "content": "<p>Kenny do you know what kind of Lean structure I have? I have two partial orders X and Y, an injection X -&gt; Y, and a proof that a &lt;= b iff f a &lt;= f b. Furthermore (although I don't know if this is relevant) if f a &lt;= d &lt;= f b then there exists c such that f c = d.</p>",
        "id": 133299046,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1536050746
    },
    {
        "content": "<p>I don't even know what kind of mathematical structure you have</p>",
        "id": 133299103,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1536050790
    },
    {
        "content": "<p>Do you know about <a href=\"https://github.com/leanprover/mathlib/blob/master/order/order_iso.lean\" target=\"_blank\" title=\"https://github.com/leanprover/mathlib/blob/master/order/order_iso.lean\">https://github.com/leanprover/mathlib/blob/master/order/order_iso.lean</a>?</p>",
        "id": 133299133,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1536050847
    },
    {
        "content": "<p>It seems to be exactly the file you want</p>",
        "id": 133299204,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1536050930
    },
    {
        "content": "<p>right -- thanks. I've never looked at that file I don't think. This is exactly why I asked here :-)</p>",
        "id": 133299219,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1536050953
    },
    {
        "content": "<p>Aah so that's the meaning of the symbol <code>≼o</code> which I've seen several times before :-)</p>",
        "id": 133299231,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1536050977
    },
    {
        "content": "<p>Your PR should also certainly create a whole new folder <code>commutative_algebra</code>. It's time!</p>",
        "id": 133299325,
        "sender_full_name": "Scott Morrison",
        "timestamp": 1536051090
    },
    {
        "content": "<p>Thanks Scott. OK so current proposal: new directory <code>commutative_algebra</code>, move file <code>noetherian.lean</code> into it, leave current files about modules where they are, nonsense about order embeddings in a file called something like <code>module_order.lean</code>(is this a bad name?) perhaps in ring_theory (because this part works for general rings), and now short proofs that subquotients of Noetherian modules are Noetherian ends up in Noetherian.lean. Hmm. Maybe even this part should be done for general rings; the theory very quickly becomes a commutative-ring-only theory, but this very basic part seems to work in general (we are doing \"Noetherian left modules\" I suspect, but I don't think it's an unreasonable convention to have \"all modules over a non-comm ring, if not stated otherwise, are left modules\" -- I think that's the current convention anyway.</p>",
        "id": 133299632,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1536051513
    },
    {
        "content": "<p>The 4th isomorphism theorem needed some rewriting after Chris' changes to quotient modules. What is really striking now is that the theorem is still pretty much the same, but the <em>complete</em> proof that the correspondence is order-preserving is <code>by tidy</code>. Commutative algebra comes with a whole bunch of diagram chases and my intial impression is that <code>tidy</code> seems like it will be a really useful tool. I don't know if Mario is worried that compile times will go through the roof though...</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"kn\">import</span> <span class=\"n\">ring_theory</span><span class=\"bp\">.</span><span class=\"n\">submodule</span>\n<span class=\"kn\">import</span> <span class=\"n\">linear_algebra</span><span class=\"bp\">.</span><span class=\"n\">quotient_module</span> <span class=\"c1\">-- I propose moving this to ring_theory</span>\n<span class=\"kn\">import</span> <span class=\"n\">tactic</span><span class=\"bp\">.</span><span class=\"n\">tidy</span>\n<span class=\"kn\">import</span> <span class=\"n\">order</span><span class=\"bp\">.</span><span class=\"n\">order_iso</span>\n\n<span class=\"kn\">open</span> <span class=\"n\">is_submodule</span>\n<span class=\"kn\">open</span> <span class=\"n\">quotient_module</span>\n\n<span class=\"kn\">definition</span> <span class=\"n\">module</span><span class=\"bp\">.</span><span class=\"n\">correspondence_equiv</span> <span class=\"o\">(</span><span class=\"n\">R</span><span class=\"o\">)</span> <span class=\"o\">[</span><span class=\"n\">ring</span> <span class=\"n\">R</span><span class=\"o\">]</span> <span class=\"o\">(</span><span class=\"n\">M</span><span class=\"o\">)</span> <span class=\"o\">[</span><span class=\"n\">module</span> <span class=\"n\">R</span> <span class=\"n\">M</span><span class=\"o\">]</span> <span class=\"o\">(</span><span class=\"n\">N</span> <span class=\"o\">:</span> <span class=\"n\">set</span> <span class=\"n\">M</span><span class=\"o\">)</span> <span class=\"o\">[</span><span class=\"n\">is_submodule</span> <span class=\"n\">N</span><span class=\"o\">]</span> <span class=\"o\">:</span>\n<span class=\"o\">(</span><span class=\"n\">has_le</span><span class=\"bp\">.</span><span class=\"n\">le</span> <span class=\"o\">:</span> <span class=\"n\">submodule</span> <span class=\"n\">R</span> <span class=\"o\">(</span><span class=\"n\">quotient</span> <span class=\"n\">M</span> <span class=\"n\">N</span><span class=\"o\">)</span> <span class=\"bp\">→</span> <span class=\"n\">submodule</span> <span class=\"n\">R</span> <span class=\"o\">(</span><span class=\"n\">quotient</span> <span class=\"n\">M</span> <span class=\"n\">N</span><span class=\"o\">)</span> <span class=\"bp\">→</span> <span class=\"kt\">Prop</span><span class=\"o\">)</span> <span class=\"err\">≃</span><span class=\"n\">o</span>\n<span class=\"o\">(</span><span class=\"n\">has_le</span><span class=\"bp\">.</span><span class=\"n\">le</span> <span class=\"o\">:</span> <span class=\"o\">{</span><span class=\"n\">X</span> <span class=\"o\">:</span> <span class=\"n\">submodule</span> <span class=\"n\">R</span> <span class=\"n\">M</span> <span class=\"bp\">//</span> <span class=\"n\">N</span> <span class=\"err\">⊆</span> <span class=\"n\">X</span><span class=\"o\">}</span> <span class=\"bp\">→</span> <span class=\"o\">{</span><span class=\"n\">X</span> <span class=\"o\">:</span> <span class=\"n\">submodule</span> <span class=\"n\">R</span> <span class=\"n\">M</span> <span class=\"bp\">//</span> <span class=\"n\">N</span> <span class=\"err\">⊆</span> <span class=\"n\">X</span><span class=\"o\">}</span> <span class=\"bp\">→</span> <span class=\"kt\">Prop</span><span class=\"o\">)</span> <span class=\"o\">:=</span> <span class=\"o\">{</span>\n  <span class=\"n\">to_fun</span> <span class=\"o\">:=</span> <span class=\"bp\">λ</span> <span class=\"n\">Xbar</span><span class=\"o\">,</span> <span class=\"bp\">⟨</span><span class=\"n\">submodule</span><span class=\"bp\">.</span><span class=\"n\">pullback</span> <span class=\"o\">(</span><span class=\"n\">mk</span> <span class=\"o\">:</span> <span class=\"n\">M</span> <span class=\"bp\">→</span> <span class=\"o\">(</span><span class=\"n\">quotient</span> <span class=\"n\">M</span> <span class=\"n\">N</span><span class=\"o\">))</span>\n    <span class=\"o\">(</span><span class=\"n\">is_linear_map_quotient_mk</span> <span class=\"n\">N</span><span class=\"o\">)</span> <span class=\"n\">Xbar</span><span class=\"o\">,</span><span class=\"bp\">λ</span> <span class=\"n\">n</span> <span class=\"n\">Hn</span><span class=\"o\">,</span><span class=\"k\">begin</span>\n      <span class=\"k\">show</span> <span class=\"err\">↑</span><span class=\"n\">n</span> <span class=\"err\">∈</span> <span class=\"n\">Xbar</span><span class=\"bp\">.</span><span class=\"n\">s</span><span class=\"o\">,</span>\n      <span class=\"n\">haveI</span> <span class=\"o\">:=</span> <span class=\"n\">Xbar</span><span class=\"bp\">.</span><span class=\"n\">sub</span><span class=\"o\">,</span>\n      <span class=\"k\">have</span> <span class=\"o\">:</span> <span class=\"o\">((</span><span class=\"mi\">0</span> <span class=\"o\">:</span> <span class=\"n\">M</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"n\">quotient</span> <span class=\"n\">M</span> <span class=\"n\">N</span><span class=\"o\">)</span> <span class=\"err\">∈</span> <span class=\"n\">Xbar</span><span class=\"bp\">.</span><span class=\"n\">s</span><span class=\"o\">,</span>\n        <span class=\"n\">exact</span> <span class=\"bp\">@</span><span class=\"n\">is_submodule</span><span class=\"bp\">.</span><span class=\"n\">zero</span> <span class=\"bp\">_</span> <span class=\"bp\">_</span> <span class=\"bp\">_</span> <span class=\"bp\">_</span> <span class=\"n\">Xbar</span><span class=\"bp\">.</span><span class=\"n\">s</span> <span class=\"bp\">_</span><span class=\"o\">,</span>\n      <span class=\"n\">suffices</span> <span class=\"o\">:</span> <span class=\"o\">(</span><span class=\"n\">n</span> <span class=\"o\">:</span> <span class=\"n\">quotient</span> <span class=\"n\">M</span> <span class=\"n\">N</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"o\">(</span><span class=\"mi\">0</span> <span class=\"o\">:</span> <span class=\"n\">M</span><span class=\"o\">),</span>\n        <span class=\"n\">rwa</span> <span class=\"n\">this</span><span class=\"o\">,</span>\n      <span class=\"n\">rw</span> <span class=\"n\">quotient_module</span><span class=\"bp\">.</span><span class=\"n\">eq</span><span class=\"o\">,</span>\n      <span class=\"n\">simp</span> <span class=\"o\">[</span><span class=\"n\">Hn</span><span class=\"o\">],</span>\n    <span class=\"kn\">end</span><span class=\"bp\">⟩</span><span class=\"o\">,</span>\n  <span class=\"n\">inv_fun</span> <span class=\"o\">:=</span> <span class=\"bp\">λ</span> <span class=\"n\">X</span><span class=\"o\">,</span> <span class=\"n\">submodule</span><span class=\"bp\">.</span><span class=\"n\">pushforward</span> <span class=\"n\">mk</span> <span class=\"o\">(</span><span class=\"n\">is_linear_map_quotient_mk</span> <span class=\"n\">N</span><span class=\"o\">)</span> <span class=\"n\">X</span><span class=\"bp\">.</span><span class=\"n\">val</span><span class=\"o\">,</span>\n  <span class=\"n\">left_inv</span> <span class=\"o\">:=</span> <span class=\"bp\">λ</span> <span class=\"n\">P</span><span class=\"o\">,</span> <span class=\"n\">submodule</span><span class=\"bp\">.</span><span class=\"n\">eq</span> <span class=\"err\">$</span> <span class=\"n\">set</span><span class=\"bp\">.</span><span class=\"n\">image_preimage_eq</span> <span class=\"n\">quotient_module</span><span class=\"bp\">.</span><span class=\"n\">quotient</span><span class=\"bp\">.</span><span class=\"n\">exists_rep</span><span class=\"o\">,</span>\n  <span class=\"n\">right_inv</span> <span class=\"o\">:=</span> <span class=\"bp\">λ</span> <span class=\"bp\">⟨</span><span class=\"n\">P</span><span class=\"o\">,</span><span class=\"n\">HP</span><span class=\"bp\">⟩</span><span class=\"o\">,</span> <span class=\"n\">subtype</span><span class=\"bp\">.</span><span class=\"n\">eq</span> <span class=\"err\">$</span> <span class=\"k\">begin</span>\n    <span class=\"k\">show</span> <span class=\"n\">submodule</span><span class=\"bp\">.</span><span class=\"n\">pullback</span> <span class=\"n\">mk</span> <span class=\"bp\">_</span> <span class=\"o\">(</span><span class=\"n\">submodule</span><span class=\"bp\">.</span><span class=\"n\">pushforward</span> <span class=\"n\">mk</span> <span class=\"bp\">_</span> <span class=\"n\">P</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"n\">P</span><span class=\"o\">,</span>\n    <span class=\"n\">ext</span> <span class=\"n\">x</span><span class=\"o\">,</span>\n    <span class=\"n\">split</span><span class=\"o\">,</span><span class=\"n\">swap</span><span class=\"o\">,</span><span class=\"n\">apply</span> <span class=\"n\">set</span><span class=\"bp\">.</span><span class=\"n\">subset_preimage_image</span><span class=\"o\">,</span>\n    <span class=\"n\">rintro</span> <span class=\"bp\">⟨</span><span class=\"n\">y</span><span class=\"o\">,</span><span class=\"n\">Hy</span><span class=\"o\">,</span><span class=\"n\">Hyx</span><span class=\"bp\">⟩</span><span class=\"o\">,</span>\n    <span class=\"n\">change</span> <span class=\"o\">(</span><span class=\"n\">y</span> <span class=\"o\">:</span> <span class=\"n\">quotient</span> <span class=\"n\">M</span> <span class=\"n\">N</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"n\">x</span> <span class=\"n\">at</span> <span class=\"n\">Hyx</span><span class=\"o\">,</span>\n    <span class=\"n\">rw</span> <span class=\"n\">quotient_module</span><span class=\"bp\">.</span><span class=\"n\">eq</span> <span class=\"n\">at</span> <span class=\"n\">Hyx</span><span class=\"o\">,</span>\n    <span class=\"n\">suffices</span> <span class=\"o\">:</span> <span class=\"n\">y</span> <span class=\"bp\">-</span> <span class=\"o\">(</span><span class=\"n\">y</span> <span class=\"bp\">-</span> <span class=\"n\">x</span><span class=\"o\">)</span> <span class=\"err\">∈</span> <span class=\"n\">P</span><span class=\"o\">,</span>\n      <span class=\"n\">simpa</span><span class=\"o\">,</span>\n    <span class=\"n\">haveI</span> <span class=\"o\">:=</span> <span class=\"n\">P</span><span class=\"bp\">.</span><span class=\"n\">sub</span><span class=\"o\">,</span>\n    <span class=\"n\">exact</span> <span class=\"n\">is_submodule</span><span class=\"bp\">.</span><span class=\"n\">sub</span> <span class=\"n\">Hy</span> <span class=\"o\">(</span><span class=\"n\">HP</span> <span class=\"n\">Hyx</span><span class=\"o\">),</span>\n  <span class=\"kn\">end</span><span class=\"o\">,</span>\n  <span class=\"n\">ord</span> <span class=\"o\">:=</span> <span class=\"k\">by</span> <span class=\"n\">tidy</span><span class=\"o\">,</span> <span class=\"c1\">-- I love you Scott Morrison</span>\n<span class=\"o\">}</span>\n</pre></div>",
        "id": 133396163,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1536174678
    },
    {
        "content": "<p>Well, <code>tidy</code> can also tell you the proof. That will shave a bit of time off future compiles.</p>",
        "id": 133396242,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1536174738
    },
    {
        "content": "<p>Use the hole command, Luke!</p>",
        "id": 133396246,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1536174750
    },
    {
        "content": "<p><code>  ord := begin intros a b, dsimp at *, simp at *, fsplit, work_on_goal 0 { intros a_1 a_2 a_3, simp at *, solve_by_elim }, intros a_1 a_2 a_3, induction a_2, work_on_goal 0 { simp at *, solve_by_elim }, refl end, -- I love you Scott Morrison</code></p>",
        "id": 133396341,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1536174846
    },
    {
        "content": "<p>Should I use that proof instead? I am tempted to change the comment to \"this proof brought to you by tidy\"</p>",
        "id": 133396363,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1536174878
    },
    {
        "content": "<p>I don't think we want that kind of proof in mathlib</p>",
        "id": 133396406,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1536174938
    },
    {
        "content": "<p>But it should be very easy to clean</p>",
        "id": 133396410,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1536174950
    },
    {
        "content": "<p>or else you can leave <code>by tidy</code></p>",
        "id": 133396471,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1536174984
    },
    {
        "content": "<p>we already have proofs by tidy (somewhat hidden by autoparam)</p>",
        "id": 133396481,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1536175008
    },
    {
        "content": "<p>If you leave <code>tidy</code> there, what does the profiler say?</p>",
        "id": 133396482,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1536175010
    },
    {
        "content": "<p>I guess it is pretty fast.</p>",
        "id": 133396489,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1536175021
    },
    {
        "content": "<p>And the proof looks a lot more readable to me if it is just <code>tidy</code> (-;</p>",
        "id": 133396503,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1536175039
    }
]