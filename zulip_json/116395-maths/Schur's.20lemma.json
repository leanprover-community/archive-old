[
    {
        "content": "<p>I'm wanting to formalise Schur's lemma (<a href=\"https://en.wikipedia.org/wiki/Schur%27s_lemma\">https://en.wikipedia.org/wiki/Schur%27s_lemma</a>) in mathlib but I'm not sure at what level of generalisation I should do it.</p>\n<ol>\n<li>\n<p>Proving just the lemma about group representations</p>\n</li>\n<li>\n<p>Proving the lemma that every non-zero morphism between simple modules is an isomorphism (and then view group representations as modules over the group ring)</p>\n</li>\n<li>\n<p>Generalise even further by viewing it as a category theory lemma (that would encompass for example both the case of simple modules and the case of simple groups - I'm not 100% sure how to do it)</p>\n</li>\n</ol>",
        "id": 270960805,
        "sender_full_name": "Pierre-Alexandre Bazin",
        "timestamp": 1644231188
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"475844\">@Pierre-Alexandre Bazin</span> I think (3) has been done.</p>",
        "id": 270960941,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1644231274
    },
    {
        "content": "<p>But the specialization to (1) isn't completely trivial. One would need to show that the categorical assumptions apply.</p>",
        "id": 270960994,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1644231313
    },
    {
        "content": "<p>Here's a dump:</p>\n<div class=\"codehilite\" data-code-language=\"Bash\"><pre><span></span><code>$ rg Schur\ndocs/undergrad.yaml\n<span class=\"m\">70</span>:    Schur<span class=\"s1\">'s lemma: '</span>https://en.wikipedia.org/wiki/Schur%27s_lemma<span class=\"s1\">'</span>\n<span class=\"s1\">115:    orthogonality of irreducible characters: '</span>https://en.wikipedia.org/wiki/Schur_orthogonality_relations<span class=\"s1\">'</span>\n\n<span class=\"s1\">src/group_theory/schur_zassenhaus.lean</span>\n<span class=\"s1\">12:# The Schur-Zassenhaus Theorem</span>\n<span class=\"s1\">14:In this file we prove the Schur-Zassenhaus theorem.</span>\n<span class=\"s1\">18:- `exists_right_complement'</span>_of_coprime<span class=\"sb\">`</span> : The **Schur-Zassenhaus** theorem:\n<span class=\"m\">21</span>:- <span class=\"sb\">`</span>exists_left_complement<span class=\"s1\">'_of_coprime`  The **Schur-Zassenhaus** theorem:</span>\n<span class=\"s1\">183:/-! ## Proof of the Schur-Zassenhaus theorem</span>\n<span class=\"s1\">185:In this section, we prove the Schur-Zassenhaus theorem.</span>\n<span class=\"s1\">331:/-- **Schur-Zassenhaus** for normal subgroups:</span>\n<span class=\"s1\">339:/-- **Schur-Zassenhaus** for normal subgroups:</span>\n<span class=\"s1\">364:/-- **Schur-Zassenhaus** for normal subgroups:</span>\n<span class=\"s1\">372:/-- **Schur-Zassenhaus** for normal subgroups:</span>\n\n<span class=\"s1\">src/ring_theory/simple_module.lean</span>\n<span class=\"s1\">21:  * Schur'</span>s Lemma: <span class=\"sb\">`</span>bijective_or_eq_zero<span class=\"sb\">`</span> shows that a linear map between simple modules\n<span class=\"m\">26</span>:  * Unify with the work on Schur<span class=\"s1\">'s Lemma in a category theory context</span>\n<span class=\"s1\">118:/-- **Schur'</span>s Lemma** <span class=\"k\">for</span> linear maps between <span class=\"o\">(</span>possibly distinct<span class=\"o\">)</span> simple modules -/\n<span class=\"m\">134</span>:/-- Schur<span class=\"s1\">'s Lemma makes the endomorphism ring of a simple module a division ring. -/</span>\n\n<span class=\"s1\">src/algebra/algebra/spectrum.lean</span>\n<span class=\"s1\">317:-- We will use this both to show eigenvalues exist, and to prove Schur'</span>s lemma.\n\nsrc/category_theory/preadditive/schur.lean\n<span class=\"m\">13</span>:# Schur<span class=\"s1\">'s lemma</span>\n<span class=\"s1\">14:We first prove the part of Schur'</span>s Lemma that holds <span class=\"k\">in</span> any preadditive category with kernels,\n<span class=\"m\">18</span>:Second, we prove Schur<span class=\"s1\">'s lemma for `ùïú`-linear categories with finite dimensional hom spaces,</span>\n<span class=\"s1\">38:The part of **Schur'</span>s lemma** that holds <span class=\"k\">in</span> any preadditive category with kernels:\n<span class=\"m\">49</span>:As a corollary of Schur<span class=\"s1\">'s lemma for preadditive categories,</span>\n<span class=\"s1\">67:Part of **Schur'</span>s lemma** <span class=\"k\">for</span> <span class=\"sb\">`</span>ùïú<span class=\"sb\">`</span>-linear categories:\n<span class=\"m\">94</span>:An auxiliary lemma <span class=\"k\">for</span> Schur<span class=\"s1\">'s lemma.</span>\n<span class=\"s1\">123:**Schur'</span>s lemma** <span class=\"k\">for</span> endomorphisms <span class=\"k\">in</span> <span class=\"sb\">`</span>ùïú<span class=\"sb\">`</span>-linear categories.\n<span class=\"m\">136</span>:**Schur<span class=\"err\">'</span>s lemma** <span class=\"k\">for</span> <span class=\"sb\">`</span>ùïú<span class=\"sb\">`</span>-linear categories:\n</code></pre></div>",
        "id": 270961051,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1644231355
    },
    {
        "content": "<p>Oh, I'll look at this</p>",
        "id": 270961775,
        "sender_full_name": "Pierre-Alexandre Bazin",
        "timestamp": 1644231755
    },
    {
        "content": "<p>Also how do you do this term search over all the mathlib ?</p>",
        "id": 270963493,
        "sender_full_name": "Pierre-Alexandre Bazin",
        "timestamp": 1644232709
    },
    {
        "content": "<p>In VSCode you can click the magnifying class in the top-left of the screen (or press <code>ctrl+shift+F</code>) to search all files in your current project.</p>",
        "id": 270963580,
        "sender_full_name": "Floris van Doorn",
        "timestamp": 1644232777
    },
    {
        "content": "<p><code>rg</code> is ripgrep (<a href=\"https://github.com/BurntSushi/ripgrep\">https://github.com/BurntSushi/ripgrep</a>) which just searches for text in files in a sensible way, it works pretty well in mathlib</p>",
        "id": 270963660,
        "sender_full_name": "Alex J. Best",
        "timestamp": 1644232821
    },
    {
        "content": "<p>But it relies a bit on theorems being labelled with their common names in doc-strings which isn't always the case, adding more docstrings with human recognizable names is very welcome <span aria-label=\"smile\" class=\"emoji emoji-1f642\" role=\"img\" title=\"smile\">:smile:</span></p>",
        "id": 270963750,
        "sender_full_name": "Alex J. Best",
        "timestamp": 1644232893
    },
    {
        "content": "<p>I would like to make progress here. This is on the UG list and it's also related to group cohomology. We have the category of R-modules for R a ring IIRC. Do we have the category of G-modules for G a group or are we supposed to use monoid_algebra ulift int G or some nonsense like this?</p>\n<p>Here is a concrete question. If 3 is done then can we cross Schur's lemma off the UG list? If not, what is the precise Lean form of the lemma which needs to be proved before we can? <span class=\"user-mention\" data-user-id=\"110031\">@Patrick Massot</span> do you have an opinion about this? I think it's time we finished the algebra and group theory parts of the UG curriculum</p>",
        "id": 270965355,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1644233962
    },
    {
        "content": "<p>We want something like <a href=\"https://en.wikipedia.org/wiki/Schur%27s_lemma#Statement_and_Proof_of_the_Lemma\">https://en.wikipedia.org/wiki/Schur%27s_lemma#Statement_and_Proof_of_the_Lemma</a></p>",
        "id": 270968960,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1644236076
    },
    {
        "content": "<p>I'm trying to write a Lean sketch of the statement</p>",
        "id": 270973123,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1644238325
    },
    {
        "content": "<p>Actually, it seems a group representation is never defined explicitly in mathlib - maybe we should define it as a k-linear action of G over a k-vector space and then prove it's in fact a module over the group ring of k ?</p>",
        "id": 270973614,
        "sender_full_name": "Pierre-Alexandre Bazin",
        "timestamp": 1644238563
    },
    {
        "content": "<p>Or we could directly define it as a module over the group ring</p>",
        "id": 270973674,
        "sender_full_name": "Pierre-Alexandre Bazin",
        "timestamp": 1644238587
    },
    {
        "content": "<p>There was some previous discussion about this in the following thread: <a href=\"#narrow/stream/116395-maths/topic/Representation.20Theory/near/265624695\">https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Representation.20Theory/near/265624695</a></p>",
        "id": 270974256,
        "sender_full_name": "Julian K√ºlshammer",
        "timestamp": 1644238915
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib/blob/master/src/ring_theory/simple_module.lean#L118L158\">https://github.com/leanprover-community/mathlib/blob/master/src/ring_theory/simple_module.lean#L118L158</a> looks very much like what we want.</p>",
        "id": 270975776,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1644239712
    },
    {
        "content": "<p>Missing stuff:</p>\n<ul>\n<li>connection between <a href=\"https://leanprover-community.github.io/mathlib_docs/find/is_simple_module\">docs#is_simple_module</a> and <a href=\"https://leanprover-community.github.io/mathlib_docs/find/category_theory.simple\">docs#category_theory.simple</a></li>\n<li>for reasons of definitional equality, I think it's good if representations are modeled with a lot of redundancy. Something like</li>\n</ul>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kn\">local</span> <span class=\"kd\">notation</span> <span class=\"n\">K</span><span class=\"bp\">`</span><span class=\"o\">[</span><span class=\"bp\">`</span><span class=\"n\">G</span><span class=\"bp\">`</span><span class=\"o\">]</span><span class=\"bp\">`</span> <span class=\"o\">:=</span> <span class=\"n\">monoid_algebra</span> <span class=\"n\">K</span> <span class=\"n\">G</span>\n\n<span class=\"kd\">variables</span> <span class=\"o\">{</span><span class=\"n\">G</span> <span class=\"n\">K</span> <span class=\"n\">V</span> <span class=\"n\">V‚ÇÅ</span> <span class=\"n\">V‚ÇÇ</span> <span class=\"o\">:</span> <span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span> <span class=\"o\">[</span><span class=\"n\">monoid</span> <span class=\"n\">G</span><span class=\"o\">]</span> <span class=\"o\">[</span><span class=\"n\">ring</span> <span class=\"n\">K</span><span class=\"o\">]</span>\n<span class=\"kd\">variables</span> <span class=\"o\">[</span><span class=\"n\">add_comm_group</span> <span class=\"n\">V</span><span class=\"o\">]</span> <span class=\"o\">[</span><span class=\"n\">distrib_mul_action</span> <span class=\"n\">G</span> <span class=\"n\">V</span><span class=\"o\">]</span> <span class=\"o\">[</span><span class=\"n\">module</span> <span class=\"n\">K</span> <span class=\"n\">V</span><span class=\"o\">]</span> <span class=\"o\">[</span><span class=\"n\">module</span> <span class=\"o\">(</span><span class=\"n\">K</span><span class=\"o\">[</span><span class=\"n\">G</span><span class=\"o\">])</span> <span class=\"n\">V</span><span class=\"o\">]</span>\n<span class=\"kd\">variables</span> <span class=\"o\">[</span><span class=\"n\">is_scalar_tower</span> <span class=\"n\">G</span> <span class=\"o\">(</span><span class=\"n\">K</span><span class=\"o\">[</span><span class=\"n\">G</span><span class=\"o\">])</span> <span class=\"n\">V</span><span class=\"o\">]</span> <span class=\"o\">[</span><span class=\"n\">is_scalar_tower</span> <span class=\"n\">K</span> <span class=\"o\">(</span><span class=\"n\">K</span><span class=\"o\">[</span><span class=\"n\">G</span><span class=\"o\">])</span> <span class=\"n\">V</span><span class=\"o\">]</span>\n</code></pre></div>\n<p>What we need is easy ways to deduce half of this information from the other half.</p>",
        "id": 270976143,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1644239883
    },
    {
        "content": "<p>For example, if we know <code>module (K[G]) V</code> then maybe a tactic can add <code>[distrib_mul_action G V]</code> and <code>[is_scalar_tower G (K[G]) V]</code>.</p>",
        "id": 270976241,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1644239944
    },
    {
        "content": "<p>Vice versa, if <code>[distrib_mul_action G V] [module K V]</code> are known, then</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"o\">[</span><span class=\"n\">module</span> <span class=\"o\">(</span><span class=\"n\">K</span><span class=\"o\">[</span><span class=\"n\">G</span><span class=\"o\">])</span> <span class=\"n\">V</span><span class=\"o\">]</span> <span class=\"o\">[</span><span class=\"n\">is_scalar_tower</span> <span class=\"n\">G</span> <span class=\"o\">(</span><span class=\"n\">K</span><span class=\"o\">[</span><span class=\"n\">G</span><span class=\"o\">])</span> <span class=\"n\">V</span><span class=\"o\">]</span> <span class=\"o\">[</span><span class=\"n\">is_scalar_tower</span> <span class=\"n\">K</span> <span class=\"o\">(</span><span class=\"n\">K</span><span class=\"o\">[</span><span class=\"n\">G</span><span class=\"o\">])</span> <span class=\"n\">V</span><span class=\"o\">]</span>\n</code></pre></div>\n<p>can be added provided there is a suitable linearity condition satisfied.</p>",
        "id": 270976404,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1644240017
    },
    {
        "content": "<p>Also missing, afaik:</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kd\">instance</span> <span class=\"n\">monoid_algebra.monoid_action</span> <span class=\"o\">:</span> <span class=\"n\">distrib_mul_action</span> <span class=\"n\">G</span> <span class=\"o\">(</span><span class=\"n\">K</span><span class=\"o\">[</span><span class=\"n\">G</span><span class=\"o\">])</span> <span class=\"o\">:=</span>\n<span class=\"o\">{</span> <span class=\"n\">smul</span> <span class=\"o\">:=</span> <span class=\"bp\">Œª</span> <span class=\"n\">g</span> <span class=\"n\">x</span><span class=\"o\">,</span> <span class=\"n\">monoid_algebra.of</span> <span class=\"n\">K</span> <span class=\"n\">G</span> <span class=\"n\">g</span> <span class=\"bp\">*</span> <span class=\"n\">x</span><span class=\"o\">,</span>\n  <span class=\"n\">one_smul</span> <span class=\"o\">:=</span> <span class=\"bp\">Œª</span> <span class=\"n\">x</span><span class=\"o\">,</span> <span class=\"kd\">by</span> <span class=\"n\">simp</span> <span class=\"n\">only</span> <span class=\"o\">[</span><span class=\"n\">map_one</span><span class=\"o\">,</span> <span class=\"n\">one_mul</span><span class=\"o\">],</span>\n  <span class=\"n\">mul_smul</span> <span class=\"o\">:=</span> <span class=\"kd\">by</span> <span class=\"o\">{</span> <span class=\"n\">intros</span><span class=\"o\">,</span> <span class=\"n\">simp</span> <span class=\"n\">only</span> <span class=\"o\">[</span><span class=\"n\">map_mul</span><span class=\"o\">,</span> <span class=\"n\">mul_assoc</span><span class=\"o\">]</span> <span class=\"o\">},</span>\n  <span class=\"n\">smul_add</span> <span class=\"o\">:=</span> <span class=\"kd\">by</span> <span class=\"o\">{</span> <span class=\"n\">intros</span><span class=\"o\">,</span> <span class=\"n\">simp</span> <span class=\"n\">only</span> <span class=\"o\">[</span><span class=\"n\">mul_add</span><span class=\"o\">]</span> <span class=\"o\">},</span>\n  <span class=\"n\">smul_zero</span> <span class=\"o\">:=</span> <span class=\"bp\">Œª</span> <span class=\"n\">g</span><span class=\"o\">,</span> <span class=\"n\">mul_zero</span> <span class=\"n\">_</span> <span class=\"o\">}</span>\n</code></pre></div>",
        "id": 270976476,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1644240055
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"310045\">@Eric Wieser</span> If you have some time to figure out the best way to set up all the scalar actions involved here, that would be really great. Getting the basic definition right has basically been blocking all progress in representation theory in mathlib for &gt; 2 years.</p>",
        "id": 270976586,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1644240117
    },
    {
        "content": "<p><del>I think that second action is <a href=\"https://leanprover-community.github.io/mathlib_docs/find/finsupp.comap_mul_action\">docs#finsupp.comap_mul_action</a>, which cannot be an instance as it causes diamonds</del></p>",
        "id": 270977968,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1644240762
    },
    {
        "content": "<p><del>Hmm, actually <code>finsupp.comap_mul_action</code> is the action by <code>g‚Åª¬π</code> instead of <code>g</code>, just to make things more confusing</del></p>",
        "id": 270978770,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1644241116
    },
    {
        "content": "<p>Sorry, it's me that's confused after all. <a href=\"https://leanprover-community.github.io/mathlib_docs/find/finsupp.comap_mul_action\">docs#finsupp.comap_mul_action</a> is indeed a different generalization of that instance, and the two really coincide when <code>group G</code>:</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kn\">import</span> <span class=\"n\">algebra.monoid_algebra.basic</span>\n\n<span class=\"kd\">variables</span> <span class=\"o\">{</span><span class=\"n\">G</span> <span class=\"n\">K</span> <span class=\"o\">:</span> <span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span>\n\n<span class=\"kd\">noncomputable</span> <span class=\"kd\">instance</span> <span class=\"n\">monoid_algebra.monoid_action</span> <span class=\"o\">[</span><span class=\"n\">monoid</span> <span class=\"n\">G</span><span class=\"o\">]</span> <span class=\"o\">[</span><span class=\"n\">ring</span> <span class=\"n\">K</span><span class=\"o\">]</span> <span class=\"o\">:</span>\n  <span class=\"n\">distrib_mul_action</span> <span class=\"n\">G</span> <span class=\"o\">(</span><span class=\"n\">monoid_algebra</span> <span class=\"n\">K</span> <span class=\"n\">G</span><span class=\"o\">)</span> <span class=\"o\">:=</span>\n<span class=\"o\">{</span> <span class=\"n\">smul</span> <span class=\"o\">:=</span> <span class=\"bp\">Œª</span> <span class=\"n\">g</span> <span class=\"n\">x</span><span class=\"o\">,</span> <span class=\"n\">monoid_algebra.of</span> <span class=\"n\">K</span> <span class=\"n\">G</span> <span class=\"n\">g</span> <span class=\"bp\">*</span> <span class=\"n\">x</span><span class=\"o\">,</span>\n  <span class=\"n\">one_smul</span> <span class=\"o\">:=</span> <span class=\"bp\">Œª</span> <span class=\"n\">x</span><span class=\"o\">,</span> <span class=\"kd\">by</span> <span class=\"n\">simp</span> <span class=\"n\">only</span> <span class=\"o\">[</span><span class=\"n\">map_one</span><span class=\"o\">,</span> <span class=\"n\">one_mul</span><span class=\"o\">],</span>\n  <span class=\"n\">mul_smul</span> <span class=\"o\">:=</span> <span class=\"kd\">by</span> <span class=\"o\">{</span> <span class=\"n\">intros</span><span class=\"o\">,</span> <span class=\"n\">simp</span> <span class=\"n\">only</span> <span class=\"o\">[</span><span class=\"n\">map_mul</span><span class=\"o\">,</span> <span class=\"n\">mul_assoc</span><span class=\"o\">]</span> <span class=\"o\">},</span>\n  <span class=\"n\">smul_add</span> <span class=\"o\">:=</span> <span class=\"kd\">by</span> <span class=\"o\">{</span> <span class=\"n\">intros</span><span class=\"o\">,</span> <span class=\"n\">simp</span> <span class=\"n\">only</span> <span class=\"o\">[</span><span class=\"n\">mul_add</span><span class=\"o\">]</span> <span class=\"o\">},</span>\n  <span class=\"n\">smul_zero</span> <span class=\"o\">:=</span> <span class=\"bp\">Œª</span> <span class=\"n\">g</span><span class=\"o\">,</span> <span class=\"n\">mul_zero</span> <span class=\"n\">_</span> <span class=\"o\">}</span>\n\n<span class=\"kn\">attribute</span> <span class=\"o\">[</span><span class=\"n\">ext</span><span class=\"o\">]</span> <span class=\"n\">distrib_mul_action</span> <span class=\"n\">mul_action</span> <span class=\"n\">has_scalar</span>\n\n<span class=\"kd\">lemma</span> <span class=\"n\">monoid_algebra.monoid_action_eq_comap</span> <span class=\"o\">[</span><span class=\"n\">group</span> <span class=\"n\">G</span><span class=\"o\">]</span> <span class=\"o\">[</span><span class=\"n\">ring</span> <span class=\"n\">K</span><span class=\"o\">]:</span>\n  <span class=\"o\">(</span><span class=\"n\">finsupp.comap_distrib_mul_action</span> <span class=\"o\">:</span> <span class=\"n\">distrib_mul_action</span> <span class=\"n\">G</span> <span class=\"o\">(</span><span class=\"n\">G</span> <span class=\"bp\">‚Üí‚ÇÄ</span> <span class=\"n\">K</span><span class=\"o\">))</span> <span class=\"bp\">=</span> <span class=\"n\">monoid_algebra.monoid_action</span> <span class=\"o\">:=</span>\n  <span class=\"kd\">begin</span>\n    <span class=\"n\">ext</span><span class=\"o\">,</span>\n    <span class=\"n\">dsimp</span> <span class=\"o\">[(</span><span class=\"bp\">‚Ä¢</span><span class=\"o\">)],</span>\n    <span class=\"n\">rw</span> <span class=\"o\">[</span><span class=\"n\">monoid_algebra.single_mul_apply</span><span class=\"o\">,</span> <span class=\"n\">one_mul</span><span class=\"o\">],</span>\n  <span class=\"kd\">end</span>\n</code></pre></div>",
        "id": 270979631,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1644241515
    },
    {
        "content": "<p>This (the action of the inverse) comes from the fact that if G acts (on the left) on M, then normally G would act on the right on <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>H</mi><mi>o</mi><msub><mi>m</mi><mi>k</mi></msub><mo stretchy=\"false\">(</mo><mi>M</mi><mo separator=\"true\">,</mo><mi>N</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">Hom_k(M,N)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">Ho</span><span class=\"mord\"><span class=\"mord mathnormal\">m</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03148em;\">k</span></span></span></span><span class=\"vlist-s\">‚Äã</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">M</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">N</span><span class=\"mclose\">)</span></span></span></span>. But since <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>k</mi><mi>G</mi></mrow><annotation encoding=\"application/x-tex\">kG</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03148em;\">k</span><span class=\"mord mathnormal\">G</span></span></span></span> is a Hopf algebra, you can convert the right action into a left action using the antipode, which in the case of group algebras is the map <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>g</mi><mo>‚Ü¶</mo><msup><mi>g</mi><mrow><mo>‚àí</mo><mn>1</mn></mrow></msup></mrow><annotation encoding=\"application/x-tex\">g\\mapsto g^{-1}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.7054em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">g</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">‚Ü¶</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.0085em;vertical-align:-0.1944em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">g</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">‚àí</span><span class=\"mord mtight\">1</span></span></span></span></span></span></span></span></span></span></span></span>.</p>",
        "id": 270979987,
        "sender_full_name": "Julian K√ºlshammer",
        "timestamp": 1644241696
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"310045\">@Eric Wieser</span> So what would you suggest as the Lean way to talk about representations?</p>",
        "id": 270979999,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1644241706
    },
    {
        "content": "<p><a href=\"https://leanprover-community.github.io/mathlib_docs/find/monoid_algebra.comap_distrib_mul_action_self\">docs#monoid_algebra.comap_distrib_mul_action_self</a> is a slightly clearer version</p>",
        "id": 270980133,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1644241796
    },
    {
        "content": "<p>I don't really know what representations are right now so am not sure I can help without doing some background reading.</p>",
        "id": 270980272,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1644241855
    },
    {
        "content": "<p>In case others haven't seen it, <a href=\"https://github.com/leanprover-community/mathlib/pull/11574\">#11574</a> seem relevant here</p>",
        "id": 270980293,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1644241865
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"310045\">@Eric Wieser</span> A <code>K</code>-linear representation of a group <code>G</code> is a <code>K</code>-module <code>V</code>, together with a <code>distrib_mul_action G V</code> such that <code>Œª v, g ‚Ä¢ v</code> is <code>K</code>-linear for all <code>g : G</code>.</p>",
        "id": 270980681,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1644242072
    },
    {
        "content": "<p>A different way to say exactly the same thing, is to say that <code>V</code> is a <code>monoid_algebra K G</code>-module.</p>",
        "id": 270980733,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1644242095
    },
    {
        "content": "<p>Of course \"a different way to say the same thing\" is nice in pen-and-paper maths, but can cause some headaches in Lean.</p>",
        "id": 270980827,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1644242130
    },
    {
        "content": "<p>The first message is <a href=\"https://leanprover-community.github.io/mathlib_docs/find/distrib_mul_action.to_linear_map\">docs#distrib_mul_action.to_linear_map</a> <code>K V g</code>, right?</p>",
        "id": 270980927,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1644242165
    },
    {
        "content": "<p>Right, I think it is <code>smul_comm_class K G V</code></p>",
        "id": 270981234,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1644242294
    },
    {
        "content": "<p>So here's a better version of my list of <code>variables</code> upstairs:</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kn\">local</span> <span class=\"kd\">notation</span> <span class=\"n\">K</span><span class=\"bp\">`</span><span class=\"o\">[</span><span class=\"bp\">`</span><span class=\"n\">G</span><span class=\"bp\">`</span><span class=\"o\">]</span><span class=\"bp\">`</span> <span class=\"o\">:=</span> <span class=\"n\">monoid_algebra</span> <span class=\"n\">K</span> <span class=\"n\">G</span>\n\n<span class=\"kd\">variables</span> <span class=\"o\">{</span><span class=\"n\">G</span> <span class=\"n\">K</span> <span class=\"n\">V</span> <span class=\"n\">V‚ÇÅ</span> <span class=\"n\">V‚ÇÇ</span> <span class=\"o\">:</span> <span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span> <span class=\"o\">[</span><span class=\"n\">monoid</span> <span class=\"n\">G</span><span class=\"o\">]</span> <span class=\"o\">[</span><span class=\"n\">ring</span> <span class=\"n\">K</span><span class=\"o\">]</span>\n<span class=\"kd\">variables</span> <span class=\"o\">[</span><span class=\"n\">add_comm_group</span> <span class=\"n\">V</span><span class=\"o\">]</span>\n<span class=\"kd\">variables</span> <span class=\"o\">[</span><span class=\"n\">distrib_mul_action</span> <span class=\"n\">G</span> <span class=\"n\">V</span><span class=\"o\">]</span> <span class=\"o\">[</span><span class=\"n\">module</span> <span class=\"n\">K</span> <span class=\"n\">V</span><span class=\"o\">]</span> <span class=\"o\">[</span><span class=\"n\">smul_comm_class</span> <span class=\"n\">K</span> <span class=\"n\">G</span> <span class=\"n\">V</span><span class=\"o\">]</span>\n<span class=\"kd\">variables</span> <span class=\"o\">[</span><span class=\"n\">module</span> <span class=\"o\">(</span><span class=\"n\">K</span><span class=\"o\">[</span><span class=\"n\">G</span><span class=\"o\">])</span> <span class=\"n\">V</span><span class=\"o\">]</span>\n<span class=\"kd\">variables</span> <span class=\"o\">[</span><span class=\"n\">is_scalar_tower</span> <span class=\"n\">G</span> <span class=\"o\">(</span><span class=\"n\">K</span><span class=\"o\">[</span><span class=\"n\">G</span><span class=\"o\">])</span> <span class=\"n\">V</span><span class=\"o\">]</span> <span class=\"o\">[</span><span class=\"n\">is_scalar_tower</span> <span class=\"n\">K</span> <span class=\"o\">(</span><span class=\"n\">K</span><span class=\"o\">[</span><span class=\"n\">G</span><span class=\"o\">])</span> <span class=\"n\">V</span><span class=\"o\">]</span>\n</code></pre></div>",
        "id": 270981414,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1644242375
    },
    {
        "content": "<p>The claim is that</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kd\">variables</span> <span class=\"o\">[</span><span class=\"n\">distrib_mul_action</span> <span class=\"n\">G</span> <span class=\"n\">V</span><span class=\"o\">]</span> <span class=\"o\">[</span><span class=\"n\">module</span> <span class=\"n\">K</span> <span class=\"n\">V</span><span class=\"o\">]</span> <span class=\"o\">[</span><span class=\"n\">smul_comm_class</span> <span class=\"n\">K</span> <span class=\"n\">G</span> <span class=\"n\">V</span><span class=\"o\">]</span>\n<span class=\"c1\">-- this line ‚Üì is the same mathematical content as this line ‚Üë</span>\n<span class=\"kd\">variables</span> <span class=\"o\">[</span><span class=\"n\">module</span> <span class=\"o\">(</span><span class=\"n\">K</span><span class=\"o\">[</span><span class=\"n\">G</span><span class=\"o\">])</span> <span class=\"n\">V</span><span class=\"o\">]</span>\n</code></pre></div>",
        "id": 270981656,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1644242449
    },
    {
        "content": "<p>Propositionally asserting that the two lines are compatible is done on the last line, by</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kd\">variables</span> <span class=\"o\">[</span><span class=\"n\">is_scalar_tower</span> <span class=\"n\">G</span> <span class=\"o\">(</span><span class=\"n\">K</span><span class=\"o\">[</span><span class=\"n\">G</span><span class=\"o\">])</span> <span class=\"n\">V</span><span class=\"o\">]</span> <span class=\"o\">[</span><span class=\"n\">is_scalar_tower</span> <span class=\"n\">K</span> <span class=\"o\">(</span><span class=\"n\">K</span><span class=\"o\">[</span><span class=\"n\">G</span><span class=\"o\">])</span> <span class=\"n\">V</span><span class=\"o\">]</span>\n</code></pre></div>",
        "id": 270981836,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1644242510
    },
    {
        "content": "<p>The forward direction of your <code>‚Üì</code> is precisely <code>action_to_module</code> from <a href=\"https://github.com/leanprover-community/mathlib/pull/11574\">#11574</a></p>",
        "id": 270981941,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1644242539
    },
    {
        "content": "<p>My question that I don't have an answer to - what happens when <code>V = K[G]</code>? Does the action agree with left-multiplication?</p>",
        "id": 270982819,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1644242887
    },
    {
        "content": "<p>Yes, it looks like it to me.</p>",
        "id": 270983149,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1644243021
    },
    {
        "content": "<p>In that case we ought to be able to remove the diamond</p>",
        "id": 270983418,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1644243138
    },
    {
        "content": "<p>even if we can't, a non-defeq diamond is a lot less bad than a non-equal diamond</p>",
        "id": 270983473,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1644243163
    },
    {
        "content": "<p>I've opened <a href=\"https://github.com/leanprover-community/mathlib/pull/11900\">#11900</a> to remove the <code>group G</code> requirement from <code>finsupp.comap_distrib_mul_action</code></p>",
        "id": 270988854,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1644245539
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span> <a href=\"#narrow/stream/116395-maths/topic/Schur's.20lemma/near/270980133\">said</a>:</p>\n<blockquote>\n<p><a href=\"https://leanprover-community.github.io/mathlib_docs/find/monoid_algebra.comap_distrib_mul_action_self\">docs#monoid_algebra.comap_distrib_mul_action_self</a> is a slightly clearer version</p>\n</blockquote>\n<p>I'm pretty sure this instance forms a non-equal diamond when <code>G = kÀ£</code></p>",
        "id": 270990004,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1644246004
    },
    {
        "content": "<p>That's exactly a common example in maths. So we better get that one right (-;</p>",
        "id": 270990762,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1644246254
    },
    {
        "content": "<p>What exactly is the diamond you are thinking of? (In this common example, <code>k</code> will be a field, hence commutative).</p>",
        "id": 270990896,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1644246296
    },
    {
        "content": "<p>I'm trying to prove it now</p>",
        "id": 270991381,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1644246480
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"sd\">/-- The actions by `monoid_algebra.comap_distrib_mul_action_self` and</span>\n<span class=\"sd\">`monoid_algebra.distrib_mul_action` are incompatible in the case when `G = kÀ£` and</span>\n<span class=\"sd\">`kÀ£` is nontrivial -/</span>\n<span class=\"kd\">example</span> <span class=\"o\">[</span><span class=\"n\">semiring</span> <span class=\"n\">k</span><span class=\"o\">]</span> <span class=\"o\">[</span><span class=\"n\">nontrivial</span> <span class=\"n\">k</span><span class=\"bp\">À£</span><span class=\"o\">]:</span>\n  <span class=\"o\">(</span><span class=\"n\">monoid_algebra.comap_distrib_mul_action_self</span> <span class=\"o\">:</span> <span class=\"n\">distrib_mul_action</span> <span class=\"n\">k</span><span class=\"bp\">À£</span> <span class=\"o\">(</span><span class=\"n\">monoid_algebra</span> <span class=\"n\">k</span> <span class=\"n\">k</span><span class=\"bp\">À£</span><span class=\"o\">))</span> <span class=\"bp\">‚â†</span>\n    <span class=\"n\">monoid_algebra.distrib_mul_action</span> <span class=\"o\">:=</span>\n<span class=\"kd\">begin</span>\n  <span class=\"n\">obtain</span> <span class=\"o\">‚ü®</span><span class=\"n\">u</span> <span class=\"o\">:</span> <span class=\"n\">k</span><span class=\"bp\">À£</span><span class=\"o\">,</span> <span class=\"n\">hu</span><span class=\"o\">‚ü©</span> <span class=\"o\">:=</span> <span class=\"n\">exists_ne</span> <span class=\"o\">(</span><span class=\"mi\">1</span> <span class=\"o\">:</span> <span class=\"n\">k</span><span class=\"bp\">À£</span><span class=\"o\">),</span>\n  <span class=\"n\">haveI</span> <span class=\"o\">:</span> <span class=\"n\">nontrivial</span> <span class=\"n\">k</span> <span class=\"o\">:=</span> <span class=\"o\">‚ü®‚ü®</span><span class=\"n\">u</span><span class=\"o\">,</span> <span class=\"mi\">1</span><span class=\"o\">,</span> <span class=\"n\">units.ext.ne</span> <span class=\"n\">hu</span><span class=\"o\">‚ü©‚ü©,</span>\n  <span class=\"n\">intro</span> <span class=\"n\">h</span><span class=\"o\">,</span>\n  <span class=\"n\">replace</span> <span class=\"n\">h</span> <span class=\"o\">:=</span> <span class=\"n\">congr_arg</span> <span class=\"o\">(</span><span class=\"bp\">Œª</span> <span class=\"n\">x</span> <span class=\"o\">:</span> <span class=\"n\">distrib_mul_action</span> <span class=\"n\">_</span> <span class=\"n\">_</span><span class=\"o\">,</span> <span class=\"n\">x.to_mul_action.to_has_scalar.smul</span><span class=\"o\">)</span> <span class=\"n\">h</span><span class=\"o\">,</span>\n  <span class=\"n\">replace</span> <span class=\"n\">h</span> <span class=\"o\">:=</span> <span class=\"n\">finsupp.congr_fun</span> <span class=\"o\">(</span><span class=\"n\">congr_fun</span> <span class=\"o\">(</span><span class=\"n\">congr_fun</span> <span class=\"n\">h</span> <span class=\"n\">u</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">single</span> <span class=\"n\">u</span> <span class=\"mi\">1</span><span class=\"o\">))</span> <span class=\"n\">u</span><span class=\"o\">,</span>\n  <span class=\"n\">dsimp</span> <span class=\"n\">only</span> <span class=\"n\">at</span> <span class=\"n\">h</span><span class=\"o\">,</span>\n  <span class=\"n\">rw</span> <span class=\"o\">[</span><span class=\"n\">comap_smul_single</span><span class=\"o\">,</span> <span class=\"n\">smul_apply</span><span class=\"o\">,</span> <span class=\"n\">single_eq_same</span><span class=\"o\">,</span> <span class=\"n\">smul_eq_mul</span><span class=\"o\">,</span> <span class=\"n\">units.smul_def</span><span class=\"o\">,</span> <span class=\"n\">smul_eq_mul</span><span class=\"o\">,</span>\n    <span class=\"n\">mul_one</span><span class=\"o\">,</span> <span class=\"n\">single_eq_pi_single</span><span class=\"o\">]</span> <span class=\"n\">at</span> <span class=\"n\">h</span><span class=\"o\">,</span>\n  <span class=\"n\">apply</span> <span class=\"n\">hu</span><span class=\"o\">,</span>\n  <span class=\"n\">ext</span><span class=\"o\">,</span>\n  <span class=\"n\">rw</span> <span class=\"bp\">‚Üê</span><span class=\"n\">h</span><span class=\"o\">,</span>\n  <span class=\"n\">dsimp</span><span class=\"o\">,</span>\n  <span class=\"n\">by_cases</span> <span class=\"n\">huu</span> <span class=\"o\">:</span> <span class=\"n\">u</span> <span class=\"bp\">*</span> <span class=\"n\">u</span> <span class=\"bp\">=</span> <span class=\"n\">u</span><span class=\"o\">,</span>\n  <span class=\"o\">{</span> <span class=\"n\">rw</span> <span class=\"o\">[</span><span class=\"n\">huu</span><span class=\"o\">,</span> <span class=\"n\">pi.single_eq_same</span><span class=\"o\">],</span> <span class=\"o\">},</span>\n  <span class=\"o\">{</span> <span class=\"n\">rw</span> <span class=\"n\">pi.single_eq_of_ne'</span> <span class=\"n\">huu</span> <span class=\"n\">at</span> <span class=\"n\">h</span><span class=\"o\">,</span>\n    <span class=\"n\">exact</span> <span class=\"o\">(</span><span class=\"n\">u.ne_zero</span> <span class=\"n\">h.symm</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">elim</span><span class=\"o\">,</span> <span class=\"o\">}</span>\n<span class=\"kd\">end</span>\n</code></pre></div>",
        "id": 270993437,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1644247276
    },
    {
        "content": "<p>Should I add the <code>finsupp</code> version of that <code>example</code> next to <code>finsupp.comap_mul_action</code> to warn of the dangers?</p>\n<div class=\"spoiler-block\"><div class=\"spoiler-header\">\n</div><div class=\"spoiler-content\" aria-hidden=\"true\">\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kd\">example</span> <span class=\"o\">[</span><span class=\"n\">semiring</span> <span class=\"n\">k</span><span class=\"o\">]</span> <span class=\"o\">[</span><span class=\"n\">nontrivial</span> <span class=\"n\">k</span><span class=\"bp\">À£</span><span class=\"o\">]:</span>\n  <span class=\"o\">(</span><span class=\"n\">finsupp.comap_distrib_mul_action</span> <span class=\"o\">:</span> <span class=\"n\">distrib_mul_action</span> <span class=\"n\">k</span><span class=\"bp\">À£</span> <span class=\"o\">(</span><span class=\"n\">k</span><span class=\"bp\">À£</span> <span class=\"bp\">‚Üí‚ÇÄ</span> <span class=\"n\">k</span> <span class=\"o\">))</span> <span class=\"bp\">‚â†</span>\n    <span class=\"n\">finsupp.distrib_mul_action</span> <span class=\"n\">_</span> <span class=\"n\">_</span> <span class=\"o\">:=</span>\n<span class=\"kd\">begin</span>\n  <span class=\"n\">obtain</span> <span class=\"o\">‚ü®</span><span class=\"n\">u</span> <span class=\"o\">:</span> <span class=\"n\">k</span><span class=\"bp\">À£</span><span class=\"o\">,</span> <span class=\"n\">hu</span><span class=\"o\">‚ü©</span> <span class=\"o\">:=</span> <span class=\"n\">exists_ne</span> <span class=\"o\">(</span><span class=\"mi\">1</span> <span class=\"o\">:</span> <span class=\"n\">k</span><span class=\"bp\">À£</span><span class=\"o\">),</span>\n  <span class=\"n\">haveI</span> <span class=\"o\">:</span> <span class=\"n\">nontrivial</span> <span class=\"n\">k</span> <span class=\"o\">:=</span> <span class=\"o\">‚ü®‚ü®</span><span class=\"n\">u</span><span class=\"o\">,</span> <span class=\"mi\">1</span><span class=\"o\">,</span> <span class=\"n\">units.ext.ne</span> <span class=\"n\">hu</span><span class=\"o\">‚ü©‚ü©,</span>\n  <span class=\"n\">intro</span> <span class=\"n\">h</span><span class=\"o\">,</span>\n  <span class=\"n\">replace</span> <span class=\"n\">h</span> <span class=\"o\">:=</span> <span class=\"n\">congr_arg</span> <span class=\"o\">(</span><span class=\"bp\">Œª</span> <span class=\"n\">x</span> <span class=\"o\">:</span> <span class=\"n\">distrib_mul_action</span> <span class=\"n\">_</span> <span class=\"n\">_</span><span class=\"o\">,</span> <span class=\"n\">x.to_mul_action.to_has_scalar.smul</span><span class=\"o\">)</span> <span class=\"n\">h</span><span class=\"o\">,</span>\n  <span class=\"n\">replace</span> <span class=\"n\">h</span> <span class=\"o\">:=</span> <span class=\"n\">finsupp.congr_fun</span> <span class=\"o\">(</span><span class=\"n\">congr_fun</span> <span class=\"o\">(</span><span class=\"n\">congr_fun</span> <span class=\"n\">h</span> <span class=\"n\">u</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">single</span> <span class=\"n\">u</span> <span class=\"mi\">1</span><span class=\"o\">))</span> <span class=\"n\">u</span><span class=\"o\">,</span>\n  <span class=\"n\">dsimp</span> <span class=\"n\">only</span> <span class=\"n\">at</span> <span class=\"n\">h</span><span class=\"o\">,</span>\n  <span class=\"n\">rw</span> <span class=\"o\">[</span><span class=\"n\">comap_smul_single</span><span class=\"o\">,</span> <span class=\"n\">smul_apply</span><span class=\"o\">,</span> <span class=\"n\">single_eq_same</span><span class=\"o\">,</span> <span class=\"n\">smul_eq_mul</span><span class=\"o\">,</span> <span class=\"n\">units.smul_def</span><span class=\"o\">,</span> <span class=\"n\">smul_eq_mul</span><span class=\"o\">,</span>\n    <span class=\"n\">mul_one</span><span class=\"o\">,</span> <span class=\"n\">single_eq_pi_single</span><span class=\"o\">]</span> <span class=\"n\">at</span> <span class=\"n\">h</span><span class=\"o\">,</span>\n  <span class=\"n\">apply</span> <span class=\"n\">hu</span><span class=\"o\">,</span>\n  <span class=\"n\">ext</span><span class=\"o\">,</span>\n  <span class=\"n\">rw</span> <span class=\"bp\">‚Üê</span><span class=\"n\">h</span><span class=\"o\">,</span>\n  <span class=\"n\">dsimp</span><span class=\"o\">,</span>\n  <span class=\"n\">by_cases</span> <span class=\"n\">huu</span> <span class=\"o\">:</span> <span class=\"n\">u</span> <span class=\"bp\">*</span> <span class=\"n\">u</span> <span class=\"bp\">=</span> <span class=\"n\">u</span><span class=\"o\">,</span>\n  <span class=\"o\">{</span> <span class=\"n\">rw</span> <span class=\"o\">[</span><span class=\"n\">huu</span><span class=\"o\">,</span> <span class=\"n\">pi.single_eq_same</span><span class=\"o\">],</span> <span class=\"o\">},</span>\n  <span class=\"o\">{</span> <span class=\"n\">rw</span> <span class=\"n\">pi.single_eq_of_ne'</span> <span class=\"n\">huu</span> <span class=\"n\">at</span> <span class=\"n\">h</span><span class=\"o\">,</span>\n    <span class=\"n\">exact</span> <span class=\"o\">(</span><span class=\"n\">u.ne_zero</span> <span class=\"n\">h.symm</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">elim</span><span class=\"o\">,</span> <span class=\"o\">}</span>\n<span class=\"kd\">end</span>\n</code></pre></div>\n</div></div>",
        "id": 270993913,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1644247462
    },
    {
        "content": "<blockquote>\n<p>connection between <a href=\"https://leanprover-community.github.io/mathlib_docs/find/is_simple_module\">docs#is_simple_module</a> and <a href=\"https://leanprover-community.github.io/mathlib_docs/find/category_theory.simple\">docs#category_theory.simple</a></p>\n</blockquote>\n<p>I'm working on this</p>",
        "id": 271000339,
        "sender_full_name": "Pierre-Alexandre Bazin",
        "timestamp": 1644249913
    },
    {
        "content": "<p>Yes, that's a part of the story we're sure about :-)</p>",
        "id": 271001627,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1644250374
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span> <a href=\"#narrow/stream/116395-maths/topic/Schur's.20lemma/near/270990004\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span> <a href=\"#narrow/stream/116395-maths/topic/Schur's.20lemma/near/270980133\">said</a>:</p>\n<blockquote>\n<p><a href=\"https://leanprover-community.github.io/mathlib_docs/find/monoid_algebra.comap_distrib_mul_action_self\">docs#monoid_algebra.comap_distrib_mul_action_self</a> is a slightly clearer version</p>\n</blockquote>\n<p>I'm pretty sure this instance forms a non-equal diamond when <code>G = kÀ£</code></p>\n</blockquote>\n<p><a href=\"https://github.com/leanprover-community/mathlib/pull/11918\">#11918</a> proves that this forms a diamond and as a result changes <code>monoid_algebra.comap_distrib_mul_action_self</code> to a <code>def</code>.</p>",
        "id": 271096897,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1644310309
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span> <a href=\"#narrow/stream/116395-maths/topic/Schur's.20lemma/near/270983418\">said</a>:</p>\n<blockquote>\n<p>In that case we ought to be able to remove the diamond</p>\n</blockquote>\n<p>We can make _this_ diamond defeq by changing</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kd\">instance</span> <span class=\"o\">:</span> <span class=\"n\">has_mul</span> <span class=\"o\">(</span><span class=\"n\">monoid_algebra</span> <span class=\"n\">k</span> <span class=\"n\">G</span><span class=\"o\">)</span> <span class=\"o\">:=</span>\n<span class=\"o\">‚ü®</span><span class=\"bp\">Œª</span><span class=\"n\">f</span> <span class=\"n\">g</span><span class=\"o\">,</span> <span class=\"n\">f.sum</span> <span class=\"bp\">$</span> <span class=\"bp\">Œª</span><span class=\"n\">a‚ÇÅ</span> <span class=\"n\">b‚ÇÅ</span><span class=\"o\">,</span> <span class=\"n\">g.sum</span> <span class=\"bp\">$</span> <span class=\"bp\">Œª</span><span class=\"n\">a‚ÇÇ</span> <span class=\"n\">b‚ÇÇ</span><span class=\"o\">,</span> <span class=\"n\">single</span> <span class=\"o\">(</span><span class=\"n\">a‚ÇÅ</span> <span class=\"bp\">*</span> <span class=\"n\">a‚ÇÇ</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">b‚ÇÅ</span> <span class=\"bp\">*</span> <span class=\"n\">b‚ÇÇ</span><span class=\"o\">)‚ü©</span>\n</code></pre></div>\n<p>to</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kd\">instance</span> <span class=\"o\">:</span> <span class=\"n\">has_mul</span> <span class=\"o\">(</span><span class=\"n\">monoid_algebra</span> <span class=\"n\">k</span> <span class=\"n\">G</span><span class=\"o\">)</span> <span class=\"o\">:=</span>\n<span class=\"o\">‚ü®</span><span class=\"bp\">Œª</span><span class=\"n\">f</span> <span class=\"n\">g</span><span class=\"o\">,</span> <span class=\"n\">f.sum</span> <span class=\"bp\">$</span> <span class=\"bp\">Œª</span><span class=\"n\">a‚ÇÅ</span> <span class=\"n\">b‚ÇÅ</span><span class=\"o\">,</span> <span class=\"n\">b‚ÇÅ</span> <span class=\"bp\">‚Ä¢</span> <span class=\"n\">g.sum</span> <span class=\"bp\">$</span> <span class=\"bp\">Œª</span><span class=\"n\">a‚ÇÇ</span> <span class=\"n\">b‚ÇÇ</span><span class=\"o\">,</span> <span class=\"n\">single</span> <span class=\"o\">(</span><span class=\"n\">a‚ÇÅ</span> <span class=\"bp\">*</span> <span class=\"n\">a‚ÇÇ</span><span class=\"o\">)</span> <span class=\"n\">b‚ÇÇ</span><span class=\"o\">‚ü©</span>\n</code></pre></div>\n<p>Note that this diamond only occurs at all though if we allow the instance that I mention above as forming an unsolvable diamond...</p>",
        "id": 271117266,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1644321855
    },
    {
        "content": "<p>Pull request <a href=\"https://github.com/leanprover-community/mathlib/pull/11927\">#11927</a> makes the link between simple modules and the Module category.</p>",
        "id": 271148387,
        "sender_full_name": "Pierre-Alexandre Bazin",
        "timestamp": 1644335767
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"310045\">@Eric Wieser</span> Can we make <code>G</code> act on <code>k[G]</code> from the right?</p>",
        "id": 271239307,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1644391438
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"475844\">@Pierre-Alexandre Bazin</span> Thanks for your PR! I left two comments.</p>",
        "id": 271239527,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1644391631
    },
    {
        "content": "<p>One further remark, do you think the subproofs are useful as stand-alone lemmas for possible future work? If so, please extract them into their own <code>lemma</code>s.</p>",
        "id": 271239553,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1644391672
    },
    {
        "content": "<p>I don't think acting from the right vs left makes any difference to the potential for diamonds</p>",
        "id": 271247067,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1644397403
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"475844\">Pierre-Alexandre Bazin</span> <a href=\"#narrow/stream/116395-maths/topic/Schur's.20lemma/near/270973674\">said</a>:</p>\n<blockquote>\n<p>Or we could directly define it as a module over the group ring</p>\n</blockquote>\n<p>I vote for not doing this. I think we should define a group representation as a linear action on a module. We already have <a href=\"https://leanprover-community.github.io/mathlib_docs/find/lie_module\">docs#lie_module</a> and this has worked well so far. We did not define Lie algebra representations as representations of their universal enveloping algebra (though we do have this equivalence).</p>",
        "id": 271248256,
        "sender_full_name": "Oliver Nash",
        "timestamp": 1644398151
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span> <a href=\"#narrow/stream/116395-maths/topic/Schur's.20lemma/near/271247067\">said</a>:</p>\n<blockquote>\n<p>I don't think acting from the right vs left makes any difference to the potential for diamonds</p>\n</blockquote>\n<p>Why not? Because then there will be two different actions: one on the left, one on the right. So the diamond vanishes because it doesn't even typecheck.</p>",
        "id": 271266012,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1644407960
    },
    {
        "content": "<p>The same diamond should exist on both sides</p>",
        "id": 271270514,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1644410612
    },
    {
        "content": "<p>The only reason it doesn't right now is that we're missing the right action by the units (corresponding to the right action by the underlying ring), but that's not a deliberate omission</p>",
        "id": 271270586,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1644410648
    },
    {
        "content": "<p>Ok, fair enough. (But who would multiply with a <code>units K</code> on the right?? <span aria-label=\"rofl\" class=\"emoji emoji-1f923\" role=\"img\" title=\"rofl\">:rofl:</span>)</p>",
        "id": 271271132,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1644410962
    },
    {
        "content": "<p>I can see someone maybe wanting to do that if <code>k</code> is not commutative</p>",
        "id": 271273632,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1644412232
    },
    {
        "content": "<p>Would it be a solution to strongly suggest to the user to use a typeclass synonym for <code>units K</code> if they want to take it as <code>G</code> in the <code>monoid_algebra K G</code>?</p>",
        "id": 271274404,
        "sender_full_name": "Julian K√ºlshammer",
        "timestamp": 1644412608
    },
    {
        "content": "<p>Like <code>Gm K</code>?</p>",
        "id": 271282308,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1644415579
    },
    {
        "content": "<p>What would be the difference between that synonym and the units themselves?</p>",
        "id": 271283361,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1644416033
    },
    {
        "content": "<p>Different instances?</p>",
        "id": 271283549,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1644416101
    },
    {
        "content": "<p>But I'm not sure if that's the right solution</p>",
        "id": 271283585,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1644416116
    },
    {
        "content": "<p>Right, my question is which instance you would remove</p>",
        "id": 271284329,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1644416415
    },
    {
        "content": "<p><code>Gm R</code> is only defined for commutative rings <code>R</code>. Maybe that helps.</p>",
        "id": 271285295,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1644416825
    },
    {
        "content": "<p>Really, I think that expressions of the form <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mo>‚àë</mo><mrow><mi>g</mi><mo>‚àà</mo><mi>G</mi></mrow></msub><msub><mi>c</mi><mi>g</mi></msub><mtext>‚Ä¢</mtext><mo stretchy=\"false\">[</mo><mi>g</mi><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">‚àë_{g ‚àà G} c_g ‚Ä¢ [g]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.1858em;vertical-align:-0.4358em;\"></span><span class=\"mop\"><span class=\"mop op-symbol small-op\" style=\"position:relative;top:0em;\">‚àë</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1786em;\"><span style=\"top:-2.4003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03588em;\">g</span><span class=\"mrel mtight\">‚àà</span><span class=\"mord mathnormal mtight\">G</span></span></span></span></span><span class=\"vlist-s\">‚Äã</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.4358em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">c</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03588em;\">g</span></span></span></span><span class=\"vlist-s\">‚Äã</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span><span class=\"mord\">‚Ä¢</span><span class=\"mopen\">[</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">g</span><span class=\"mclose\">]</span></span></span></span> with <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>c</mi><mi>g</mi></msub><mo>‚àà</mo><mi>K</mi></mrow><annotation encoding=\"application/x-tex\">c_g ‚àà K</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8252em;vertical-align:-0.2861em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">c</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03588em;\">g</span></span></span></span><span class=\"vlist-s\">‚Äã</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">‚àà</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">K</span></span></span></span> should only accept scalar multiplication by <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi><mo>‚àà</mo><mi>K</mi></mrow><annotation encoding=\"application/x-tex\">x ‚àà K</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.5782em;vertical-align:-0.0391em;\"></span><span class=\"mord mathnormal\">x</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">‚àà</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">K</span></span></span></span> on the left and by <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>h</mi><mo>‚àà</mo><mi>G</mi></mrow><annotation encoding=\"application/x-tex\">h ‚àà G</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.7335em;vertical-align:-0.0391em;\"></span><span class=\"mord mathnormal\">h</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">‚àà</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\">G</span></span></span></span> on the right.</p>",
        "id": 271285591,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1644416927
    },
    {
        "content": "<p>That's what the notation forces on you.</p>",
        "id": 271285615,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1644416936
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"317890\">@Julian K√ºlshammer</span> Do people consider <code>monoid_algebra R G</code> for non-commutative <code>R</code>?</p>",
        "id": 271285660,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1644416954
    },
    {
        "content": "<p>With that rule you can't scalar multiply by <code>nat</code></p>",
        "id": 271285669,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1644416958
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"112680\">Johan Commelin</span> <a href=\"#narrow/stream/116395-maths/topic/Schur's.20lemma/near/271285660\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"317890\">Julian K√ºlshammer</span> Do people consider <code>monoid_algebra R G</code> for non-commutative <code>R</code>?</p>\n</blockquote>\n<p>I think <span class=\"user-mention\" data-user-id=\"240862\">@Oliver Nash</span> did in the context of lie algebras; <code>monoid_algebra</code> doubles as a <code>magma_algebra</code></p>",
        "id": 271285878,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1644417031
    },
    {
        "content": "<p>But do we need an action from <code>K</code> on the right?</p>",
        "id": 271285982,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1644417087
    },
    {
        "content": "<p>And more importantly, do we need an action from <code>units K</code> on the right. I very much doubt this.</p>",
        "id": 271286076,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1644417116
    },
    {
        "content": "<p>Note that in the WIP <a href=\"https://github.com/leanprover-community/mathlib/pull/10716\">#10716</a> I attempt to change <code>algebra R A</code> to additionally require that <code>A</code> has a compatible right-<code>R</code> action</p>",
        "id": 271286284,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1644417199
    },
    {
        "content": "<p>In which case yes, we need a <code>k</code>-action from the right for <code>monoid_algebra k G</code> to be a <code>k</code>-algebra.</p>",
        "id": 271286359,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1644417234
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"112680\">@Johan Commelin</span> Usually by a (not necessarily commutative) <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>R</mi></mrow><annotation encoding=\"application/x-tex\">R</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.00773em;\">R</span></span></span></span>-algebra <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>A</mi></mrow><annotation encoding=\"application/x-tex\">A</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\">A</span></span></span></span> one means that <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>R</mi></mrow><annotation encoding=\"application/x-tex\">R</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.00773em;\">R</span></span></span></span> is commutative and that the action of <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>R</mi></mrow><annotation encoding=\"application/x-tex\">R</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.00773em;\">R</span></span></span></span> is central on <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>A</mi></mrow><annotation encoding=\"application/x-tex\">A</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\">A</span></span></span></span>. There is the more general concept , slightly confusingly called a <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"normal\">Œõ</mi></mrow><annotation encoding=\"application/x-tex\">\\Lambda</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord\">Œõ</span></span></span></span>-ring, which is the same as a monoid object in the category of <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"normal\">Œõ</mi></mrow><annotation encoding=\"application/x-tex\">\\Lambda</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord\">Œõ</span></span></span></span>-<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"normal\">Œõ</mi></mrow><annotation encoding=\"application/x-tex\">\\Lambda</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord\">Œõ</span></span></span></span>-bimodules. In this case one usually doesn't assume that <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"normal\">Œõ</mi></mrow><annotation encoding=\"application/x-tex\">\\Lambda</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord\">Œõ</span></span></span></span> is commutative. And people (e.g. one of my PhD students) in particular work with skew group rings.</p>",
        "id": 271286618,
        "sender_full_name": "Julian K√ºlshammer",
        "timestamp": 1644417328
    },
    {
        "content": "<p>One option would just to be state that we don't care about diamonds - we seem to have them all over the place anyway. One I found just now:</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kn\">import</span> <span class=\"n\">ring_theory.algebraic</span>\n<span class=\"kd\">universes</span> <span class=\"n\">u</span> <span class=\"n\">v</span>\n<span class=\"kd\">variables</span> <span class=\"o\">(</span><span class=\"n\">R'</span> <span class=\"o\">:</span> <span class=\"kt\">Type</span> <span class=\"n\">u</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">S'</span> <span class=\"o\">:</span> <span class=\"kt\">Type</span> <span class=\"n\">v</span><span class=\"o\">)</span>\n<span class=\"n\">open_locale</span> <span class=\"n\">polynomial</span>\n<span class=\"kn\">open</span> <span class=\"n\">polynomial</span>\n\n<span class=\"sd\">/-- `polynomial.has_scalar_pi` forms a diamond. -/</span>\n<span class=\"kd\">example</span> <span class=\"o\">[</span><span class=\"n\">semiring</span> <span class=\"n\">R'</span><span class=\"o\">]</span> <span class=\"o\">[</span><span class=\"n\">nontrivial</span> <span class=\"n\">R'</span><span class=\"o\">]</span> <span class=\"o\">:</span>\n  <span class=\"n\">polynomial.has_scalar_pi</span> <span class=\"n\">_</span> <span class=\"n\">_</span> <span class=\"bp\">‚â†</span> <span class=\"o\">(</span><span class=\"n\">pi.has_scalar</span> <span class=\"o\">:</span> <span class=\"n\">has_scalar</span> <span class=\"o\">(</span><span class=\"n\">R'</span><span class=\"o\">[</span><span class=\"n\">X</span><span class=\"o\">])</span> <span class=\"o\">(</span><span class=\"n\">R'</span> <span class=\"bp\">‚Üí</span> <span class=\"n\">R'</span><span class=\"o\">[</span><span class=\"n\">X</span><span class=\"o\">]))</span> <span class=\"o\">:=</span>\n<span class=\"kd\">begin</span>\n  <span class=\"n\">intro</span> <span class=\"n\">h</span><span class=\"o\">,</span>\n  <span class=\"n\">simp_rw</span> <span class=\"o\">[</span><span class=\"n\">has_scalar.ext_iff</span><span class=\"o\">,</span> <span class=\"n\">function.funext_iff</span><span class=\"o\">,</span> <span class=\"n\">polynomial.ext_iff</span><span class=\"o\">]</span> <span class=\"n\">at</span> <span class=\"n\">h</span><span class=\"o\">,</span>\n  <span class=\"n\">simpa</span> <span class=\"n\">using</span> <span class=\"n\">h</span> <span class=\"n\">X</span> <span class=\"mi\">1</span> <span class=\"mi\">1</span> <span class=\"mi\">0</span><span class=\"o\">,</span>\n<span class=\"kd\">end</span>\n</code></pre></div>",
        "id": 271289280,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1644418392
    },
    {
        "content": "<p>(de-<code>instance</code>d in <a href=\"https://github.com/leanprover-community/mathlib/pull/11935\">#11935</a>)</p>",
        "id": 271291491,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1644419275
    },
    {
        "content": "<p>That whole <code>section pi</code> looks a bit weird anyways</p>",
        "id": 271292145,
        "sender_full_name": "Reid Barton",
        "timestamp": 1644419533
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span> <a href=\"#narrow/stream/116395-maths/topic/Schur's.20lemma/near/271285878\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"112680\">Johan Commelin</span> <a href=\"#narrow/stream/116395-maths/topic/Schur's.20lemma/near/271285660\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"317890\">Julian K√ºlshammer</span> Do people consider <code>monoid_algebra R G</code> for non-commutative <code>R</code>?</p>\n</blockquote>\n<p>I think <span class=\"user-mention silent\" data-user-id=\"240862\">Oliver Nash</span> did in the context of lie algebras; <code>monoid_algebra</code> doubles as a <code>magma_algebra</code></p>\n</blockquote>\n<p>That's right. In my application <code>R</code> was commutative but the key result I needed was <a href=\"https://leanprover-community.github.io/mathlib_docs/find/monoid_algebra.lift_magma\">docs#monoid_algebra.lift_magma</a> and this does not assume commutative coefficients.</p>",
        "id": 271292648,
        "sender_full_name": "Oliver Nash",
        "timestamp": 1644419737
    },
    {
        "content": "<p>One hacky way would be to define a right action of <code>list G</code> on <code>monoid_algebra R G</code>. Where <code>[g]</code> acts in the expected way. And longer lists act by repeated scalar multiplication (= first applying <code>list.prod</code> and then doing the scalar multiplication).</p>",
        "id": 271296359,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1644421155
    },
    {
        "content": "<p>It would recover the notation that is used on paper <span aria-label=\"rofl\" class=\"emoji emoji-1f923\" role=\"img\" title=\"rofl\">:rofl:</span></p>",
        "id": 271296394,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1644421168
    },
    {
        "content": "<p>you'd need to define <code>*</code> on <code>list</code> for that to work</p>",
        "id": 271299004,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1644422124
    },
    {
        "content": "<p>I had added those polynomial pi scalar instances to think of polynomials as functions. What was my conceptual mistake? I'd like to understand what I got wrong.</p>",
        "id": 271299595,
        "sender_full_name": "Yakov Pechersky",
        "timestamp": 1644422328
    },
    {
        "content": "<p>Well maybe I'm just not managing to reconstruct the kind of situation where you would want to use this instance.</p>",
        "id": 271301025,
        "sender_full_name": "Reid Barton",
        "timestamp": 1644422824
    },
    {
        "content": "<p>It's usually not that natural to think of polynomials as functions (e.g. because the function might not determine the polynomial). But mainly, I would expect (maybe naively) this instance to built out of other instances such as: if <code>R</code> acts on <code>S</code> then <code>a -&gt; R</code> acts on <code>a -&gt; S</code> (pointwise)</p>",
        "id": 271301287,
        "sender_full_name": "Reid Barton",
        "timestamp": 1644422920
    },
    {
        "content": "<p>I have some unpushed branches on tropical polynomials that I think used these. So while I don't have them published, I guess we can uninstance them. </p>\n<p>If we consider polynomials not as algebraic objects but as more high school terms, they're taught as functions. The function one gets through eval or aeval is uniquely determined over some semirings (fundamental theorem etc etc). That's the pointwise instance what I was \"using\" in these cases.</p>",
        "id": 271323181,
        "sender_full_name": "Yakov Pechersky",
        "timestamp": 1644430321
    },
    {
        "content": "<p><del>Your pointwise instance was acting on the domain though, which is not how any of our other instances act</del></p>",
        "id": 271333069,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1644434551
    },
    {
        "content": "<p>Actually, that looks like it's really the same sort of diamond as the <a href=\"https://leanprover-community.github.io/mathlib_docs/find/pi.has_scalar'\">docs#pi.has_scalar'</a> one I made a thread about a while ago</p>",
        "id": 271333346,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1644434677
    },
    {
        "content": "<p>Ah, I found (thanks to Rob's CI script) where I was using the instance:</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"c1\">-- f(X) = ‚àö(X ^ 3 ‚àí 3 X + 1),</span>\n<span class=\"c1\">-- which is a root of Y ^ 2 ‚àí (X ^ 3 ‚àí 3 X + 1), is an algebraic function</span>\n<span class=\"kd\">example</span> <span class=\"o\">:</span> <span class=\"n\">is_algebraic</span> <span class=\"o\">(</span><span class=\"n\">polynomial</span> <span class=\"n\">‚Ñ§</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"bp\">Œª</span> <span class=\"n\">x</span><span class=\"o\">,</span> <span class=\"n\">complex.cpow</span> <span class=\"o\">(</span><span class=\"n\">x</span> <span class=\"bp\">^</span> <span class=\"mi\">3</span> <span class=\"bp\">-</span> <span class=\"mi\">3</span> <span class=\"bp\">‚Ä¢</span> <span class=\"n\">x</span> <span class=\"bp\">+</span> <span class=\"mi\">1</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"mi\">1</span> <span class=\"bp\">/</span> <span class=\"mi\">2</span><span class=\"o\">))</span> <span class=\"o\">:=</span> <span class=\"gr\">sorry</span>\n</code></pre></div>\n<p><a href=\"https://github.com/pechersky/gouvea/blob/main/src/chapters/ch001/pg010.lean#L47-L72\">https://github.com/pechersky/gouvea/blob/main/src/chapters/ch001/pg010.lean#L47-L72</a></p>",
        "id": 273190192,
        "sender_full_name": "Yakov Pechersky",
        "timestamp": 1645766580
    }
]