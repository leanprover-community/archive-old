[
    {
        "content": "<p>Here's a new thread for installation questions.</p>",
        "id": 135290991,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1538786055
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"131794\">@Charles Rezk</span> What system are you using, e.g. windows, mac, linux? There's some basic advice by Kevin Buzzard <a href=\"https://xenaproject.wordpress.com/2017/12/02/how-to-install-mathlib-and-keep-it-up-to-date/\" target=\"_blank\" title=\"https://xenaproject.wordpress.com/2017/12/02/how-to-install-mathlib-and-keep-it-up-to-date/\">here</a>.</p>",
        "id": 135290998,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1538786075
    },
    {
        "content": "<p>Linux.  Yes I'm trying to follow the instructions on that page.</p>",
        "id": 135291011,
        "sender_full_name": "Charles Rezk",
        "timestamp": 1538786115
    },
    {
        "content": "<p>I've compiled lean.</p>",
        "id": 135291012,
        "sender_full_name": "Charles Rezk",
        "timestamp": 1538786120
    },
    {
        "content": "<p>I've added the mathlib package.</p>",
        "id": 135291013,
        "sender_full_name": "Charles Rezk",
        "timestamp": 1538786125
    },
    {
        "content": "<p>I've installed the vscode thing.</p>",
        "id": 135291014,
        "sender_full_name": "Charles Rezk",
        "timestamp": 1538786131
    },
    {
        "content": "<p>I've started it up, and tried to run an example.</p>",
        "id": 135291017,
        "sender_full_name": "Charles Rezk",
        "timestamp": 1538786143
    },
    {
        "content": "<p>For some reason it strangely does not find the lean executable.</p>",
        "id": 135291067,
        "sender_full_name": "Charles Rezk",
        "timestamp": 1538786185
    },
    {
        "content": "<p>Are you able to run lean from the terminal?</p>",
        "id": 135291073,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1538786221
    },
    {
        "content": "<p>I guess so, if you were able to add mathlib with leanpkg.</p>",
        "id": 135291081,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1538786236
    },
    {
        "content": "<p>I can do \"lean --version\"</p>",
        "id": 135291082,
        "sender_full_name": "Charles Rezk",
        "timestamp": 1538786238
    },
    {
        "content": "<p>When vscode tries to run the lean executable, it for some reason puts in an extra comma</p>",
        "id": 135291086,
        "sender_full_name": "Charles Rezk",
        "timestamp": 1538786262
    },
    {
        "content": "<p>I guess you're seeing an error message somewhere. What does it say exactly?</p>",
        "id": 135291144,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1538786369
    },
    {
        "content": "<p>Lean: Error: Command failed: /home/rezk/git/lean/bin/lean, --version<br>\n/bin/sh: /home/rezk/git/lean/bin/lean,: No such file or directory</p>",
        "id": 135291211,
        "sender_full_name": "Charles Rezk",
        "timestamp": 1538786434
    },
    {
        "content": "<p>I don't know why there is an extra comma in there, but that is presumably why it is failing</p>",
        "id": 135291227,
        "sender_full_name": "Charles Rezk",
        "timestamp": 1538786490
    },
    {
        "content": "<p>Could you check your VS code settings? Under \"Extensions &gt; Lean configuration\" there should be a box that says \"Executable path\"</p>",
        "id": 135291271,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1538786535
    },
    {
        "content": "<p>If there's not an extra comma in there then I'm stumped.</p>",
        "id": 135291273,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1538786552
    },
    {
        "content": "<p>How do I find this box?</p>",
        "id": 135291283,
        "sender_full_name": "Charles Rezk",
        "timestamp": 1538786592
    },
    {
        "content": "<p>I have been trying to set the executable path in \"User Settings\", according to the instructions, but that seems to have literally no effect.</p>",
        "id": 135291286,
        "sender_full_name": "Charles Rezk",
        "timestamp": 1538786619
    },
    {
        "content": "<p>Did you edit your settings.json file to add the \"lean.executablePath\" option as in Kevin's instructions? Maybe there's a misplaced quote there.</p>",
        "id": 135291331,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1538786688
    },
    {
        "content": "<p>Yes I have tried that, assuming I am doing it correctly.  As far as I can tell, it complety ignores what I put there.  I can give a giberish path, and I still get the exact same error message I gave you above.</p>",
        "id": 135291385,
        "sender_full_name": "Charles Rezk",
        "timestamp": 1538786788
    },
    {
        "content": "<p>Ctrl + comma might take you to preferences</p>",
        "id": 135291390,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1538786795
    },
    {
        "content": "<p>Some how it is getting an incorrect path from somewhere else</p>",
        "id": 135291391,
        "sender_full_name": "Charles Rezk",
        "timestamp": 1538786797
    },
    {
        "content": "<p>Or something like file -&gt; settings -&gt; preferences</p>",
        "id": 135291401,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1538786829
    },
    {
        "content": "<p>Do you want to copy-paste your \"settings.json\" file here?</p>",
        "id": 135291404,
        "sender_full_name": "Scott Morrison",
        "timestamp": 1538786834
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"131794\">@Charles Rezk</span>, did you at any point set the environment variable <code>LEAN_PATH</code>?</p>",
        "id": 135291522,
        "sender_full_name": "Scott Morrison",
        "timestamp": 1538787040
    },
    {
        "content": "<p>No, there is no $LEAN_PATH</p>",
        "id": 135291532,
        "sender_full_name": "Charles Rezk",
        "timestamp": 1538787070
    },
    {
        "content": "<p>Could you show your settings.json file?</p>",
        "id": 135291535,
        "sender_full_name": "Scott Morrison",
        "timestamp": 1538787088
    },
    {
        "content": "<p>From what it says in USer Settings, the settings.json file is:</p>",
        "id": 135291536,
        "sender_full_name": "Charles Rezk",
        "timestamp": 1538787112
    },
    {
        "content": "<p>{ \"lean.executablePath\": \"/home/rezk/git/lean/bin/lean\"<br>\n}</p>",
        "id": 135291537,
        "sender_full_name": "Charles Rezk",
        "timestamp": 1538787121
    },
    {
        "content": "<p>I don't know where this file is actually kept</p>",
        "id": 135291580,
        "sender_full_name": "Charles Rezk",
        "timestamp": 1538787129
    },
    {
        "content": "<p>On linux it's apparently $HOME/.config/Code/User/settings.json</p>",
        "id": 135291585,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1538787181
    },
    {
        "content": "<p>Here's another suggestion:</p>",
        "id": 135291594,
        "sender_full_name": "Scott Morrison",
        "timestamp": 1538787212
    },
    {
        "content": "<p>the best way to install Lean is actually to use <code>elan</code></p>",
        "id": 135291595,
        "sender_full_name": "Scott Morrison",
        "timestamp": 1538787219
    },
    {
        "content": "<p>from &lt;<a href=\"https://github.com/Kha/elan\" target=\"_blank\" title=\"https://github.com/Kha/elan\">https://github.com/Kha/elan</a>&gt;</p>",
        "id": 135291600,
        "sender_full_name": "Scott Morrison",
        "timestamp": 1538787232
    },
    {
        "content": "<p>I've been doing this for several hours.  I'm not starting again.</p>",
        "id": 135291640,
        "sender_full_name": "Charles Rezk",
        "timestamp": 1538787247
    },
    {
        "content": "<p>e.g. just by running <code>curl https://raw.githubusercontent.com/Kha/elan/master/elan-init.sh -sSf | sh</code> in a terminal</p>",
        "id": 135291642,
        "sender_full_name": "Scott Morrison",
        "timestamp": 1538787249
    },
    {
        "content": "<p>Ok :-)</p>",
        "id": 135291643,
        "sender_full_name": "Scott Morrison",
        "timestamp": 1538787255
    },
    {
        "content": "<p>(My experience is that installing Lean via elan takes less than a minute. :-)</p>",
        "id": 135291645,
        "sender_full_name": "Scott Morrison",
        "timestamp": 1538787269
    },
    {
        "content": "<p>In particular, you won't have to rebuild lean from source that way.</p>",
        "id": 135291652,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1538787285
    },
    {
        "content": "<p>OK, that explains it.  The actually \"settings.json\" file is different than what vscode is showing me</p>",
        "id": 135291667,
        "sender_full_name": "Charles Rezk",
        "timestamp": 1538787304
    },
    {
        "content": "<p>(The advantage is that you don't have to compile anything, you don't have to set any paths in VS Code, and elan will automatically switch between Lean versions if you have different projects requiring different versions.)</p>",
        "id": 135291674,
        "sender_full_name": "Scott Morrison",
        "timestamp": 1538787319
    },
    {
        "content": "<p>The installation process will hopefully be a lot, lot easier once Scott's PR to the VS code extension is merged.</p>",
        "id": 135291738,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1538787472
    },
    {
        "content": "<p>I restarted vscode, and now it shows the actually physical file in \"Settings\", and also I don't get that error any more when I try to \"Restart: Lean\"</p>",
        "id": 135291739,
        "sender_full_name": "Charles Rezk",
        "timestamp": 1538787477
    },
    {
        "content": "<p>Now nothing happens when I do that, which doesn't seem like an improvement</p>",
        "id": 135291783,
        "sender_full_name": "Charles Rezk",
        "timestamp": 1538787530
    },
    {
        "content": "<p>\"Nothing happening\" might be the right thing! Lean doesn't say anything upon a successful start up, until you actually enter something in a <code>.lean</code> file.</p>",
        "id": 135291795,
        "sender_full_name": "Scott Morrison",
        "timestamp": 1538787578
    },
    {
        "content": "<p>Can you save a file, e.g. as <code>test.lean</code>, and enter something in it, such as <code>#eval 2+2</code>?</p>",
        "id": 135291815,
        "sender_full_name": "Scott Morrison",
        "timestamp": 1538787602
    },
    {
        "content": "<p>You should then get a green squiggle under it, and hovering the mouse there should show <code>4</code>.</p>",
        "id": 135291846,
        "sender_full_name": "Scott Morrison",
        "timestamp": 1538787618
    },
    {
        "content": "<p>I have tried that.   Nothing happens, no green squiggle</p>",
        "id": 135291964,
        "sender_full_name": "Charles Rezk",
        "timestamp": 1538787848
    },
    {
        "content": "<p>Wait, now it is.</p>",
        "id": 135291979,
        "sender_full_name": "Charles Rezk",
        "timestamp": 1538787919
    },
    {
        "content": "<p>Maybe it works now</p>",
        "id": 135291981,
        "sender_full_name": "Charles Rezk",
        "timestamp": 1538787945
    },
    {
        "content": "<p>If you see orange bars on the sidebar that means it's in progress and you should wait</p>",
        "id": 135292049,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1538788043
    },
    {
        "content": "<p>you can also see status information on the bottom left which will tell you if lean is dead or just busy</p>",
        "id": 135292054,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1538788067
    },
    {
        "content": "<p>I think it's working now</p>",
        "id": 135292091,
        "sender_full_name": "Charles Rezk",
        "timestamp": 1538788085
    },
    {
        "content": "<p>You should test mathlib imports if you intend to use it, e.g. <code>import data.nat.prime</code></p>",
        "id": 135292101,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1538788120
    },
    {
        "content": "<p>OK</p>",
        "id": 135292237,
        "sender_full_name": "Charles Rezk",
        "timestamp": 1538788349
    },
    {
        "content": "<p>I think this computer is going to be too slow for this.</p>",
        "id": 135292399,
        "sender_full_name": "Charles Rezk",
        "timestamp": 1538788678
    },
    {
        "content": "<p>you may need to compile the lean sources if everything is running slow</p>",
        "id": 135292441,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1538788711
    },
    {
        "content": "<p>i.e. run <code>lean --make</code> in the library directoy</p>",
        "id": 135292443,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1538788727
    },
    {
        "content": "<p>What is the library directory?</p>",
        "id": 135292460,
        "sender_full_name": "Charles Rezk",
        "timestamp": 1538788800
    },
    {
        "content": "<p>The mathlib you added to your package should be in <code>_target/deps/mathlib</code> relative to the package root; running <code>lean --make</code> in that directory should make importing mathlib much faster.</p>",
        "id": 135292568,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1538788961
    },
    {
        "content": "<p>Hi <span class=\"user-mention\" data-user-id=\"123965\">@Bryan Gin-ge Chen</span> , just correcting that suggestion: in general it is safer to run <code>lean —make _target/deps/mathlib</code> from the main project directory, rather than changing into that subdirectory and running <code>lean —make</code>. If there is a version mismatch between the project and mathlib, running lean in the subdirectory will just give you olean files that won’t be usable.</p>",
        "id": 135294984,
        "sender_full_name": "Scott Morrison",
        "timestamp": 1538793666
    },
    {
        "content": "<p>(If there’s no version mismatch, there’s no problem, but we seem to have regular problems with this.)</p>",
        "id": 135294987,
        "sender_full_name": "Scott Morrison",
        "timestamp": 1538793698
    },
    {
        "content": "<p>Thanks! That's good to know.</p>",
        "id": 135295039,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1538793836
    },
    {
        "content": "<p>Perhaps we should add a command in VS Code “compile all dependencies in background” to help people with this.</p>",
        "id": 135295190,
        "sender_full_name": "Scott Morrison",
        "timestamp": 1538794147
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"131794\">@Charles Rezk</span> Did you get the install working in the end?</p>",
        "id": 135482171,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1539103266
    },
    {
        "content": "<p>I did.  I'm not really sure how do actually do anything interesting, the mathlib files are hard for me to interpret.</p>",
        "id": 135483148,
        "sender_full_name": "Charles Rezk",
        "timestamp": 1539104329
    },
    {
        "content": "<p>Pick a project, get stuck, ask here, people will try to help :-) At least that's how I did it</p>",
        "id": 135483437,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1539104582
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"131794\">@Charles Rezk</span> I suggest you write a short post in <a href=\"#narrow/stream/113489-new-members/subject/Introductions\" title=\"#narrow/stream/113489-new-members/subject/Introductions\">https://leanprover.zulipchat.com/#narrow/stream/113489-new-members/subject/Introductions</a>.</p>",
        "id": 135483546,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1539104709
    },
    {
        "content": "<p>Tell us where you are based and what kind of stuff you like.</p>",
        "id": 135483550,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1539104719
    },
    {
        "content": "<p>And like Kevin said, just hang around and ask questions.</p>",
        "id": 135483559,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1539104734
    },
    {
        "content": "<p>Is it normal for compilation of <code>mathlib</code> <code>master</code> to fail miserably on <code>nightly</code> Lean? I made a package with <code>leanpkg +nightly new</code>, then added <code>mathlib</code> and <code>lean --make _target/deps/mathlib/</code> shows errors on everything, e.g. <code>relator.lean:13:43: error: unknown identifier 'left_unique'</code>.</p>",
        "id": 155128486,
        "sender_full_name": "Wojciech Nawrocki",
        "timestamp": 1547508058
    },
    {
        "content": "<p>We use 3.4.1 Lean</p>",
        "id": 155128643,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1547508183
    },
    {
        "content": "<p>see also <a href=\"#narrow/stream/113488-general/topic/mathlib.20is.20broken\" title=\"#narrow/stream/113488-general/topic/mathlib.20is.20broken\">https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib.20is.20broken</a></p>",
        "id": 155129521,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1547508792
    }
]