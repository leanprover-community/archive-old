[
    {
        "content": "<p>Are the new versions in leanprover-community coming out too fast? 3.6 seems too slow takes forever to do anything!</p>",
        "id": 193684746,
        "sender_full_name": "Sayantan Majumdar",
        "timestamp": 1586647754
    },
    {
        "content": "<p>fast in what sense? your two sentences are talking about different things</p>",
        "id": 193684800,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1586647810
    },
    {
        "content": "<p>it seems every month there is a new version of lean</p>",
        "id": 193684810,
        "sender_full_name": "Sayantan Majumdar",
        "timestamp": 1586647843
    },
    {
        "content": "<p>the latest i think is 3.6 is very slow</p>",
        "id": 193684816,
        "sender_full_name": "Sayantan Majumdar",
        "timestamp": 1586647859
    },
    {
        "content": "<p>again, what do those two things have to do with one another?</p>",
        "id": 193684826,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1586647890
    },
    {
        "content": "<p>If you have a concrete example of something that was a certain speed in in Lean 3.5 that is slow in 3.6, that would be valuable to know about</p>",
        "id": 193684871,
        "sender_full_name": "Andrew Ashworth",
        "timestamp": 1586647925
    },
    {
        "content": "<p>there is no time to check if the recently released version is working properly!</p>",
        "id": 193684873,
        "sender_full_name": "Sayantan Majumdar",
        "timestamp": 1586647928
    },
    {
        "content": "<p>yes, the timetable for releases has shrunk (this is a low bar considering it was effectively abandoned for 2 years)</p>",
        "id": 193684874,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1586647929
    },
    {
        "content": "<p>as for potential performance regressions, we need numbers</p>",
        "id": 193684878,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1586647958
    },
    {
        "content": "<p>lean has some performance issues but I'm not aware of any specific places where it's gotten worse</p>",
        "id": 193684891,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1586647990
    },
    {
        "content": "<p>You always have the option to not upgrade Lean? It's only necessary if you want to maintain compatibility with mathlib development.</p>",
        "id": 193684900,
        "sender_full_name": "Andrew Ashworth",
        "timestamp": 1586647995
    },
    {
        "content": "<p>Maybe I'm in the minority here on the chat but I still have a set environment with a specific mathlib commit that I build with lean --make, I still use leanpkg and I've never learned how to use all leanproject or elan</p>",
        "id": 193684948,
        "sender_full_name": "Andrew Ashworth",
        "timestamp": 1586648080
    },
    {
        "content": "<p>I thought people checked the performance numbers before releasing</p>",
        "id": 193684949,
        "sender_full_name": "Sayantan Majumdar",
        "timestamp": 1586648086
    },
    {
        "content": "<p>and it works fine for me on windows...</p>",
        "id": 193684951,
        "sender_full_name": "Andrew Ashworth",
        "timestamp": 1586648089
    },
    {
        "content": "<p>i was doing the same</p>",
        "id": 193684965,
        "sender_full_name": "Sayantan Majumdar",
        "timestamp": 1586648108
    },
    {
        "content": "<p>you still haven't given any examples</p>",
        "id": 193684968,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1586648111
    },
    {
        "content": "<p>there are a ton of ways to use lean, performance depends on what you are doing</p>",
        "id": 193684970,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1586648130
    },
    {
        "content": "<p>i typed import data.real.basic and it took a min to load</p>",
        "id": 193684973,
        "sender_full_name": "Sayantan Majumdar",
        "timestamp": 1586648150
    },
    {
        "content": "<p>Did you build mathlib?</p>",
        "id": 193684975,
        "sender_full_name": "Andrew Ashworth",
        "timestamp": 1586648161
    },
    {
        "content": "<p>that's because you didn't compile mathlib</p>",
        "id": 193685006,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1586648163
    },
    {
        "content": "<p>what kind of performance is being checked before releases</p>",
        "id": 193685014,
        "sender_full_name": "Sayantan Majumdar",
        "timestamp": 1586648177
    },
    {
        "content": "<p>lean 3.4.2 had the same behavior</p>",
        "id": 193685017,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1586648189
    },
    {
        "content": "<p>you forgot an important step, this isn't lean's fault</p>",
        "id": 193685022,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1586648217
    },
    {
        "content": "<p>I compiled everything first then opened the first_proofs.lean worked after 15 mins</p>",
        "id": 193685025,
        "sender_full_name": "Sayantan Majumdar",
        "timestamp": 1586648233
    },
    {
        "content": "<p>nobody is checking performance regressions in the detail that you want</p>",
        "id": 193685027,
        "sender_full_name": "Andrew Ashworth",
        "timestamp": 1586648249
    },
    {
        "content": "<p>contributions welcome :)</p>",
        "id": 193685029,
        "sender_full_name": "Andrew Ashworth",
        "timestamp": 1586648254
    },
    {
        "content": "<p>there are no lean developers, just people volunteering</p>",
        "id": 193685030,
        "sender_full_name": "Andrew Ashworth",
        "timestamp": 1586648263
    },
    {
        "content": "<p>before anyone is done with the performance check a new major version will be out</p>",
        "id": 193685056,
        "sender_full_name": "Sayantan Majumdar",
        "timestamp": 1586648282
    },
    {
        "content": "<p>15 mins is definitely an indication that something is being built on load</p>",
        "id": 193685059,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1586648282
    },
    {
        "content": "<p>it was built before i opened the files</p>",
        "id": 193685076,
        "sender_full_name": "Sayantan Majumdar",
        "timestamp": 1586648302
    },
    {
        "content": "<p>for some reason that isn't the case</p>",
        "id": 193685077,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1586648316
    },
    {
        "content": "<p>the question is what happened to cause that</p>",
        "id": 193685078,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1586648328
    },
    {
        "content": "<p>how do you know?</p>",
        "id": 193685083,
        "sender_full_name": "Sayantan Majumdar",
        "timestamp": 1586648334
    },
    {
        "content": "<p>it doesn't take 15 minutes for anybody else</p>",
        "id": 193685093,
        "sender_full_name": "Andrew Ashworth",
        "timestamp": 1586648344
    },
    {
        "content": "<p>because this has happened many many times in other discussions</p>",
        "id": 193685095,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1586648350
    },
    {
        "content": "<p>anybody using windows?</p>",
        "id": 193685102,
        "sender_full_name": "Sayantan Majumdar",
        "timestamp": 1586648390
    },
    {
        "content": "<p>I actually think it is a minor bug that lean even lets you use the file when it's not compiled like this</p>",
        "id": 193685141,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1586648403
    },
    {
        "content": "<p>it is just super slow and people get the wrong impression</p>",
        "id": 193685144,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1586648418
    },
    {
        "content": "<p>i compiled it using leanpkg test before opening my editor</p>",
        "id": 193685151,
        "sender_full_name": "Sayantan Majumdar",
        "timestamp": 1586648438
    },
    {
        "content": "<p><code>leanproject check</code> will try to diagnose this problem</p>",
        "id": 193685153,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1586648444
    },
    {
        "content": "<p>if you have a later version of mathlib, <code>leanpkg</code> doesn't work anymore</p>",
        "id": 193685159,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1586648469
    },
    {
        "content": "<p><code>leanproject</code> is the new version</p>",
        "id": 193685163,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1586648484
    },
    {
        "content": "<p>IIRC <code>leanpkg</code> uses an old version of lean to build and so the new version will see that the oleans are out of date and recompile them</p>",
        "id": 193685203,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1586648534
    },
    {
        "content": "<p>hmmm, will check that</p>",
        "id": 193685204,
        "sender_full_name": "Sayantan Majumdar",
        "timestamp": 1586648537
    },
    {
        "content": "<p>noi use leanpkg toolbox install first</p>",
        "id": 193685208,
        "sender_full_name": "Sayantan Majumdar",
        "timestamp": 1586648560
    },
    {
        "content": "<p>then it can build with the latest version</p>",
        "id": 193685216,
        "sender_full_name": "Sayantan Majumdar",
        "timestamp": 1586648571
    },
    {
        "content": "<p>will try leanproject though</p>",
        "id": 193685220,
        "sender_full_name": "Sayantan Majumdar",
        "timestamp": 1586648582
    },
    {
        "content": "<p>I'm not an expert on leanpkg but I think it is not supported anymore</p>",
        "id": 193685242,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1586648603
    },
    {
        "content": "<p>hopefully, no new versions come out before it finishes compiling</p>",
        "id": 193685243,
        "sender_full_name": "Sayantan Majumdar",
        "timestamp": 1586648608
    },
    {
        "content": "<p>the latest version is 3.7.2 btw</p>",
        "id": 193685285,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1586648651
    },
    {
        "content": "<p>3.8 as of last night :-)</p>",
        "id": 193685288,
        "sender_full_name": "Scott Morrison",
        "timestamp": 1586648669
    },
    {
        "content": "<p>check again,</p>",
        "id": 193685289,
        "sender_full_name": "Sayantan Majumdar",
        "timestamp": 1586648670
    },
    {
        "content": "<p>lol</p>",
        "id": 193685291,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1586648674
    },
    {
        "content": "<p>lol</p>",
        "id": 193685294,
        "sender_full_name": "Sayantan Majumdar",
        "timestamp": 1586648677
    },
    {
        "content": "<p>is mathlib on 3.8 yet?</p>",
        "id": 193685311,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1586648730
    },
    {
        "content": "<p>when you have elan, this doesn't really matter</p>",
        "id": 193685353,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1586648776
    },
    {
        "content": "<p>it just uses the right version of lean as requested in the toml file, so when mathlib upgrades it happens automatically</p>",
        "id": 193685360,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1586648808
    },
    {
        "content": "<p>even if a new version comes out it won't invalidate your compile</p>",
        "id": 193685369,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1586648833
    },
    {
        "content": "<p>unless you choose to upgrade mathlib and lean along with it</p>",
        "id": 193685378,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1586648856
    },
    {
        "content": "<p>everyone knows that</p>",
        "id": 193685419,
        "sender_full_name": "Sayantan Majumdar",
        "timestamp": 1586648902
    },
    {
        "content": "<p>then what's the problem?</p>",
        "id": 193685421,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1586648916
    },
    {
        "content": "<p>the new versions are too slow!</p>",
        "id": 193685424,
        "sender_full_name": "Sayantan Majumdar",
        "timestamp": 1586648932
    },
    {
        "content": "<p>lean can update every day and it shouldn't cause you any trouble</p>",
        "id": 193685426,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1586648937
    },
    {
        "content": "<p>It's very confusing talking about these two completely unrelated topics at once</p>",
        "id": 193685433,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1586648975
    },
    {
        "content": "<p>not confusing to me</p>",
        "id": 193685489,
        "sender_full_name": "Sayantan Majumdar",
        "timestamp": 1586649067
    },
    {
        "content": "<p>good night</p>",
        "id": 193685491,
        "sender_full_name": "Sayantan Majumdar",
        "timestamp": 1586649077
    },
    {
        "content": "<p>Nothing has been done regarding the loading process in the last few versions</p>",
        "id": 193685495,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1586649087
    },
    {
        "content": "<p>I encourage you to make sure your olean files are up to date, and come back with an independently verifiable test case if it keeps being slow</p>",
        "id": 193685539,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1586649148
    },
    {
        "content": "<p>There was a bug with 3.7.0 and 3.7.1 which caused oleans not to be loaded properly on Windows. As far as I know those issues are fixed now though (?).</p>",
        "id": 193687896,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1586653804
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"214077\">@Sayantan Majumdar</span> if data.real.basic takes more than a few seconds to import then your setup is bad. You need to use leanproject if you've moved from 3.4.2</p>",
        "id": 193697254,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1586672562
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"214077\">Sayantan Majumdar</span> <a href=\"#narrow/stream/113489-new-members/topic/new.20versions.20coming.20out.20too.20fast.3F/near/193685419\" title=\"#narrow/stream/113489-new-members/topic/new.20versions.20coming.20out.20too.20fast.3F/near/193685419\">said</a>:</p>\n<blockquote>\n<p>everyone knows that</p>\n</blockquote>\n<p>As a meta-point, asserting \"everyone knows &lt;something&gt;\"  is quite bold (especially in the \"new users\" stream where we can expect to find a very wide range of experience starting at \"literally just started learning maths and programming\"); declaring in this way that you don't need the help of the people who are trying to help is not likely to get you the help you need.</p>\n<p>Please note also that your default position when the major figures in Lean say \"performance has not got substantially worse, and moreover nobody else thinks it has\" should probably not be \"Lean has got really slow for everyone\" but \"something is wrong for me locally\", especially since you already knew that people check the performance numbers before releasing; extraordinary claims require extraordinary evidence. It is <em>possible</em> that performance has got substantially worse in a way that uniquely affects you, but you shouldn't simply assert that it has and then, when asked for evidence, just assert it again.</p>",
        "id": 193698293,
        "sender_full_name": "Patrick Stevens",
        "timestamp": 1586674769
    },
    {
        "content": "<p>Their problem is probably that they're using old tooling which doesn't play well with versions of lean after 3.4</p>",
        "id": 193698588,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1586675314
    }
]