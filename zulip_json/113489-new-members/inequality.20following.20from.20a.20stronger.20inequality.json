[
    {
        "content": "<p>Dear All,</p>\n<p>I use the lemma below to shorten a proof, as is usually the case with lemmas!  <span aria-label=\"wink\" class=\"emoji emoji-1f609\" role=\"img\" title=\"wink\">:wink:</span></p>\n<p>Since I would like the final lemma to go into mathlib, I would like the lemma below to also go.  Should this lemma go to some general file (feel free to suggest which!) or should it stay close to the intended application?</p>\n<p>Here is a wordy description of the lemma: to prove that the inequality <code>1 ≤ a * b</code> holds, it suffices to prove</p>\n<ul>\n<li>the inequality <code>1 ≤ a</code>; and</li>\n<li>if <code>1 &lt; b</code>, then to provide a <code>c ≤ b</code> satisfying <code>1 ≤ a * c</code>.<br>\nThis lemma is mostly useful if <code>c</code> already appears in the context, especially in situations when the terms <code>a</code> and <code>b</code> are complicated.</li>\n</ul>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kn\">import</span> <span class=\"n\">algebra.ordered_ring</span>\n\n<span class=\"kd\">lemma</span> <span class=\"n\">one_le_mul_of_le_and_of_lt</span> <span class=\"o\">{</span><span class=\"n\">R</span> <span class=\"o\">:</span> <span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span> <span class=\"o\">[</span><span class=\"n\">linear_ordered_semiring</span> <span class=\"n\">R</span><span class=\"o\">]</span> <span class=\"o\">{</span><span class=\"n\">a</span> <span class=\"n\">b</span> <span class=\"o\">:</span> <span class=\"n\">R</span><span class=\"o\">}</span> <span class=\"o\">(</span><span class=\"n\">c</span> <span class=\"o\">:</span> <span class=\"n\">R</span><span class=\"o\">)</span>\n  <span class=\"o\">(</span><span class=\"n\">ha</span>   <span class=\"o\">:</span> <span class=\"mi\">1</span> <span class=\"bp\">≤</span> <span class=\"n\">a</span><span class=\"o\">)</span>\n  <span class=\"o\">(</span><span class=\"n\">key</span>  <span class=\"o\">:</span> <span class=\"n\">b</span> <span class=\"bp\">&lt;</span> <span class=\"mi\">1</span> <span class=\"bp\">→</span> <span class=\"mi\">1</span> <span class=\"bp\">≤</span> <span class=\"n\">a</span> <span class=\"bp\">*</span> <span class=\"n\">c</span> <span class=\"bp\">∧</span> <span class=\"n\">c</span> <span class=\"bp\">≤</span> <span class=\"n\">b</span><span class=\"o\">)</span> <span class=\"o\">:</span>\n  <span class=\"mi\">1</span> <span class=\"bp\">≤</span> <span class=\"n\">a</span> <span class=\"bp\">*</span> <span class=\"n\">b</span> <span class=\"o\">:=</span>\n<span class=\"kd\">begin</span>\n  <span class=\"n\">by_cases</span> <span class=\"n\">A</span> <span class=\"o\">:</span> <span class=\"n\">b</span> <span class=\"bp\">&lt;</span> <span class=\"mi\">1</span><span class=\"o\">,</span>\n  <span class=\"o\">{</span> <span class=\"n\">exact</span> <span class=\"o\">(</span><span class=\"n\">key</span> <span class=\"n\">A</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"mi\">1</span><span class=\"bp\">.</span><span class=\"n\">trans</span> <span class=\"o\">((</span><span class=\"n\">mul_le_mul_left</span> <span class=\"o\">(</span><span class=\"n\">zero_lt_one.trans_le</span> <span class=\"n\">ha</span><span class=\"o\">))</span><span class=\"bp\">.</span><span class=\"n\">mpr</span> <span class=\"o\">(</span><span class=\"n\">key</span> <span class=\"n\">A</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"mi\">2</span><span class=\"o\">)</span> <span class=\"o\">},</span>\n  <span class=\"o\">{</span> <span class=\"n\">rw</span> <span class=\"bp\">←</span> <span class=\"n\">mul_one</span> <span class=\"o\">(</span><span class=\"mi\">1</span> <span class=\"o\">:</span> <span class=\"n\">R</span><span class=\"o\">),</span>\n    <span class=\"n\">exact</span> <span class=\"n\">mul_le_mul</span> <span class=\"n\">ha</span> <span class=\"o\">(</span><span class=\"n\">not_lt.mp</span> <span class=\"n\">A</span><span class=\"o\">)</span> <span class=\"n\">zero_le_one</span> <span class=\"o\">(</span><span class=\"n\">zero_le_one.trans</span> <span class=\"n\">ha</span><span class=\"o\">)</span> <span class=\"o\">}</span>\n<span class=\"kd\">end</span>\n</code></pre></div>",
        "id": 225948239,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1613018469
    },
    {
        "content": "<p>I see no value having this lemma in a general file. This lemma will probably not come up again in this exact form, and even if it does, it is unlikely that the user that wants this lemma will find it.</p>\n<p>If you use this in only one theorem, I would not even separate this out as a separate lemma, but just prove it as a <code>have</code>, like <a href=\"https://github.com/leanprover-community/mathlib/blob/030107f6fe5a9c8bb9880ed4377355f19910d617/src/measure_theory/prod.lean#L690-L692\">this</a>.</p>",
        "id": 225948964,
        "sender_full_name": "Floris van Doorn",
        "timestamp": 1613019476
    },
    {
        "content": "<p>Floris, thank you so much, also for the commented pointer!</p>",
        "id": 225949218,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1613019737
    }
]