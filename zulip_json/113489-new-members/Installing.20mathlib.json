[
    {
        "content": "<p>Johannes H. helped me install mathlib on one of my machines, but now I can't remember what he did and I need to do it on two more machines.</p>\n<p>The instructions at</p>\n<div class=\"codehilite\"><pre><span></span>https://github.com/leanprover-community/mathlib/blob/master/docs/elan.md\n</pre></div>\n\n\n<p>give two options, but neither \"start a new package\" nor \"work on existing package\" seems to convey what I want to do, which is simply to install mathlib so that I can use it from now on in any .lean files of mine (even if they don't themselves live in any packages). Any help or pointers would be appreciated.</p>",
        "id": 162600535,
        "sender_full_name": "Jasmin Blanchette",
        "timestamp": 1554449672
    },
    {
        "content": "<p>Turn your home directory into a Lean package? [/joke]</p>",
        "id": 162600576,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1554449727
    },
    {
        "content": "<p>There isn't much point in having Lean files that are not part of a project</p>",
        "id": 162600593,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1554449748
    },
    {
        "content": "<p>But you can do it if you insist</p>",
        "id": 162600601,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1554449761
    },
    {
        "content": "<p>I can create a project.</p>",
        "id": 162600647,
        "sender_full_name": "Jasmin Blanchette",
        "timestamp": 1554449769
    },
    {
        "content": "<p>It's just that I didn't remember that Johannes did it for the other machine -- but maybe he did.</p>",
        "id": 162600659,
        "sender_full_name": "Jasmin Blanchette",
        "timestamp": 1554449793
    },
    {
        "content": "<p>Assuming you installed elan, the next step is to install mathlib helper script:</p>\n<div class=\"codehilite\"><pre><span></span>curl https://raw.githubusercontent.com/leanprover-community/mathlib/master/scripts/remote-install-update-mathlib.sh -sSf | sh\n</pre></div>\n\n\n<p>Then, in order to create a new project depending on mathlib:</p>\n<div class=\"codehilite\"><pre><span></span>leanpkg new test\ncd test\nleanpkg add https://github.com/leanprover-community/mathlib\nupdate-mathlib\n</pre></div>",
        "id": 162600876,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1554450032
    },
    {
        "content": "<p>this will create a new directory <code>test</code> containing a compiled copy of mathlib ready for use</p>",
        "id": 162600903,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1554450070
    },
    {
        "content": "<p>inside <code>test</code> is <code>src</code> where you'll put your Lean code</p>",
        "id": 162600924,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1554450095
    },
    {
        "content": "<p>I really need to update documentation. My teaching will be mostly over in three weeks, then I'll write a couple of late referee reports and then documentation will be wonderful...</p>",
        "id": 162601005,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1554450170
    },
    {
        "content": "<p>Does <code>leanpkg</code> default to lean version <code>3.4.2</code> nowadays?</p>",
        "id": 162601035,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1554450213
    },
    {
        "content": "<p>If not, you need to edit <code>leanpkg.toml</code> in <code>test/</code> and fix the version. Otherwise <code>update-mathlib</code> doesn't work, which means you have to compile mathlib yourself.</p>",
        "id": 162601086,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1554450253
    },
    {
        "content": "<p>Johan, please don't make things sound complicated</p>",
        "id": 162601121,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1554450317
    },
    {
        "content": "<p>If Jasmin installed elan with default answer to all questions then he'll be fine</p>",
        "id": 162601132,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1554450357
    },
    {
        "content": "<p>I've used elan with default answers.</p>",
        "id": 162601216,
        "sender_full_name": "Jasmin Blanchette",
        "timestamp": 1554450425
    },
    {
        "content": "<p>Last week things weren't fine when I helped Fabian</p>",
        "id": 162601217,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1554450427
    },
    {
        "content": "<p>I just checked on my laptop which Johannes installed and mathlib was installed as a component inside ~/.lean.</p>",
        "id": 162601236,
        "sender_full_name": "Jasmin Blanchette",
        "timestamp": 1554450474
    },
    {
        "content": "<p>I'll try to mimic that on the other machines.</p>",
        "id": 162601284,
        "sender_full_name": "Jasmin Blanchette",
        "timestamp": 1554450485
    },
    {
        "content": "<p>That <code>.lean</code> is indeed used for lean files outside projects</p>",
        "id": 162601293,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1554450507
    },
    {
        "content": "<p>Thanks for your help and suggestions! If I can't sort it out, I'll come back or bug Rob.</p>",
        "id": 162601300,
        "sender_full_name": "Jasmin Blanchette",
        "timestamp": 1554450523
    },
    {
        "content": "<p>But I don't think that <code>update-mathlib</code>, the script that fetches compiled mathlib, cares about such rogue Lean files, so it probably won't help you</p>",
        "id": 162601328,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1554450553
    },
    {
        "content": "<p>Hm... now I'm confused</p>",
        "id": 162601337,
        "sender_full_name": "Jasmin Blanchette",
        "timestamp": 1554450578
    },
    {
        "content": "<p>I think I'll ask Johannes.</p>",
        "id": 162601344,
        "sender_full_name": "Jasmin Blanchette",
        "timestamp": 1554450585
    },
    {
        "content": "<p>Jasmin, it would really help us if you could try to the fives lines howto I wrote above.</p>",
        "id": 162601346,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1554450586
    },
    {
        "content": "<p>If those five lines (6 if you include the line installing elan) are not enough then we need to know it</p>",
        "id": 162601424,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1554450625
    },
    {
        "content": "<p>OK let me try.</p>",
        "id": 162601448,
        "sender_full_name": "Jasmin Blanchette",
        "timestamp": 1554450663
    },
    {
        "content": "<p>You mean 1+ 4 lines, right?</p>",
        "id": 162601466,
        "sender_full_name": "Jasmin Blanchette",
        "timestamp": 1554450716
    },
    {
        "content": "<p>yes</p>",
        "id": 162601517,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1554450765
    },
    {
        "content": "<p>It says: -bash: update-mathlib: command not found</p>",
        "id": 162601600,
        "sender_full_name": "Jasmin Blanchette",
        "timestamp": 1554450867
    },
    {
        "content": "<p>but what I don't like about it is that it requires creating a package</p>",
        "id": 162601605,
        "sender_full_name": "Jasmin Blanchette",
        "timestamp": 1554450899
    },
    {
        "content": "<p>with Johannes's approach it didn't</p>",
        "id": 162601616,
        "sender_full_name": "Jasmin Blanchette",
        "timestamp": 1554450906
    },
    {
        "content": "<p>which means I could freely use mathlib anywhere no questions asked</p>",
        "id": 162601625,
        "sender_full_name": "Jasmin Blanchette",
        "timestamp": 1554450922
    },
    {
        "content": "<p>and I'd like my laptops to be as similar as possible to each other</p>",
        "id": 162601630,
        "sender_full_name": "Jasmin Blanchette",
        "timestamp": 1554450934
    },
    {
        "content": "<p>so I'll try to reproduce what Jo did, I think -- it seems to correspond to neither of the two options listed online.</p>",
        "id": 162601697,
        "sender_full_name": "Jasmin Blanchette",
        "timestamp": 1554450978
    },
    {
        "content": "<p>Did you source .profile after installing <code>update-mathlib</code>?</p>",
        "id": 162601827,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1554451121
    },
    {
        "content": "<p>You can also indicate the full path <code>$HOME/.mathlib/bin/update-mathlib</code></p>",
        "id": 162601852,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1554451157
    },
    {
        "content": "<p>I only blindly followed the instructions above. But OK sure I can try that.</p>",
        "id": 162601861,
        "sender_full_name": "Jasmin Blanchette",
        "timestamp": 1554451178
    },
    {
        "content": "<p>I think the first line I wrote should have told you to do update your path by sourcing .profile</p>",
        "id": 162601932,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1554451213
    },
    {
        "content": "<p>You should have seen the effect of <a href=\"https://github.com/leanprover-community/mathlib/blob/master/scripts/remote-install-update-mathlib.sh#L14-L16\" target=\"_blank\" title=\"https://github.com/leanprover-community/mathlib/blob/master/scripts/remote-install-update-mathlib.sh#L14-L16\">https://github.com/leanprover-community/mathlib/blob/master/scripts/remote-install-update-mathlib.sh#L14-L16</a></p>",
        "id": 162601973,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1554451291
    },
    {
        "content": "<p>Sorry. Now I simply copied the entire .lean from one laptop to another and things work.</p>",
        "id": 162601975,
        "sender_full_name": "Jasmin Blanchette",
        "timestamp": 1554451304
    },
    {
        "content": "<p>It seems like .lean gets read automatically or something.</p>",
        "id": 162602021,
        "sender_full_name": "Jasmin Blanchette",
        "timestamp": 1554451324
    },
    {
        "content": "<p>only if you are outside of all projects</p>",
        "id": 162602077,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1554451403
    },
    {
        "content": "<p>I don't want us to use projects in the course</p>",
        "id": 162602094,
        "sender_full_name": "Jasmin Blanchette",
        "timestamp": 1554451422
    },
    {
        "content": "<p>(I'm doing all of this for the Logical Verification course, which we started teaching in Lean last year.)</p>",
        "id": 162602176,
        "sender_full_name": "Jasmin Blanchette",
        "timestamp": 1554451453
    },
    {
        "content": "<p>Won't you distribute Lean files to complete in this course?</p>",
        "id": 162602226,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1554451522
    },
    {
        "content": "<p>Yes, it will probably make sense to bundle them in a package</p>",
        "id": 162603541,
        "sender_full_name": "Jasmin Blanchette",
        "timestamp": 1554453088
    },
    {
        "content": "<p>but that's in November</p>",
        "id": 162603546,
        "sender_full_name": "Jasmin Blanchette",
        "timestamp": 1554453097
    },
    {
        "content": "<p>and students will have to create homework etc.</p>",
        "id": 162603627,
        "sender_full_name": "Jasmin Blanchette",
        "timestamp": 1554453145
    },
    {
        "content": "<p>I presume they'll be happier if they can install mathlib only once in .lean than in each package or something</p>",
        "id": 162603641,
        "sender_full_name": "Jasmin Blanchette",
        "timestamp": 1554453177
    },
    {
        "content": "<p>regardless, some people who are more Lean savvy will help me in due time with that (Alex B., Rob L.) -- pity Johannes H. is gone</p>",
        "id": 162603664,
        "sender_full_name": "Jasmin Blanchette",
        "timestamp": 1554453214
    },
    {
        "content": "<p>now, next problem: how come Isabelle doesn't build on two of my machines... ;)</p>",
        "id": 162603723,
        "sender_full_name": "Jasmin Blanchette",
        "timestamp": 1554453251
    },
    {
        "content": "<p>didn't we use <code>leanpkg install ...</code>?</p>",
        "id": 162644043,
        "sender_full_name": "Johannes Hölzl",
        "timestamp": 1554486337
    },
    {
        "content": "<p>I just got my hands on a lean free mac, so I though I'd try if the install script works</p>",
        "id": 163412150,
        "sender_full_name": "Jan-David Salchow",
        "timestamp": 1555359137
    },
    {
        "content": "<p>The first step doesn't</p>",
        "id": 163412160,
        "sender_full_name": "Jan-David Salchow",
        "timestamp": 1555359147
    },
    {
        "content": "<p>there is brew on the computer, but no python</p>",
        "id": 163412188,
        "sender_full_name": "Jan-David Salchow",
        "timestamp": 1555359173
    },
    {
        "content": "<p>So read should ask me if I want to install python3</p>",
        "id": 163412222,
        "sender_full_name": "Jan-David Salchow",
        "timestamp": 1555359203
    },
    {
        "content": "<p>I tried installing Lean on a mac last week and the <code>update-mathlib</code> line didn't do anything either. In the end I just found the script and copy-pasted it.</p>",
        "id": 163412235,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1555359211
    },
    {
        "content": "<p>Instead I get ```Jan-David.Salchow@C02Y13THJGH6:~:$ curl <a href=\"https://raw.githubusercontent.com/leanprover-community/mathlib/master/scripts/remote-install-update-mathlib.sh\" target=\"_blank\" title=\"https://raw.githubusercontent.com/leanprover-community/mathlib/master/scripts/remote-install-update-mathlib.sh\">https://raw.githubusercontent.com/leanprover-community/mathlib/master/scripts/remote-install-update-mathlib.sh</a> -sSf | sh<br>\nInstalling python dependencies (at user level)<br>\n/usr/local/bin/brew</p>\n<p>Jan-David.Salchow@C02Y13THJGH6:~:$ ```</p>",
        "id": 163412325,
        "sender_full_name": "Jan-David Salchow",
        "timestamp": 1555359263
    },
    {
        "content": "<p>I think those things were tested only on Debian-like systems. It would be very helpful to make them work on a fresh mac</p>",
        "id": 163412401,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1555359325
    },
    {
        "content": "<p>That's my goal</p>",
        "id": 163412430,
        "sender_full_name": "Jan-David Salchow",
        "timestamp": 1555359360
    },
    {
        "content": "<p>Any idea why read doesn't work when piped through sh?</p>",
        "id": 163412491,
        "sender_full_name": "Jan-David Salchow",
        "timestamp": 1555359382
    },
    {
        "content": "<p>The update-mathlib thing: you are experiencing exactly what I experienced.</p>",
        "id": 163412503,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1555359391
    },
    {
        "content": "<p>I was at AITP and random people were asking me how to install Lean and this is what I was faced with :-(</p>",
        "id": 163412544,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1555359425
    },
    {
        "content": "<p>I had much better luck just cutting and pasting <a href=\"https://github.com/leanprover-community/mathlib/blob/master/scripts/remote-install-update-mathlib.sh\" target=\"_blank\" title=\"https://github.com/leanprover-community/mathlib/blob/master/scripts/remote-install-update-mathlib.sh\">https://github.com/leanprover-community/mathlib/blob/master/scripts/remote-install-update-mathlib.sh</a> into a file and running that.</p>",
        "id": 163412583,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1555359454
    },
    {
        "content": "<p>Another thing that was awful: I made a new project with mathlib as a dependency, finally installed update-mathlib, and then it wouldn't work because it couldn't find olean files for that particular commit :-(</p>",
        "id": 163412666,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1555359511
    },
    {
        "content": "<p>In the end I just got out my own laptop, looked at a commit which I knew update-mathlib would work for, memorised the first few characters of the commit hash, went back to their machine, cd'ed to _target/deps/mathlib, looked at the output of <code>git log</code>, found the commit, switched to that commit, and then manually edited the <code>leanpkg.toml</code> file to have that commit, and then finally it worked. Looked pretty slick ;-) not</p>",
        "id": 163412725,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1555359591
    },
    {
        "content": "<p><code>read -p \"update-mathlib needs to install python3 and pip3. Proceed?\" -n 1 -r &lt;/dev/tty</code><br>\nsolves that problem for me, the <code>&lt;/dev/tty</code> apparently tells read to use the terminal as an input</p>",
        "id": 163414638,
        "sender_full_name": "Jan-David Salchow",
        "timestamp": 1555361051
    },
    {
        "content": "<p>Ahh, <a href=\"https://raw.githubusercontent.com/Kha/elan/master/elan-init.sh\" target=\"_blank\" title=\"https://raw.githubusercontent.com/Kha/elan/master/elan-init.sh\">https://raw.githubusercontent.com/Kha/elan/master/elan-init.sh</a> also uses &lt;/dev/tty</p>",
        "id": 163415002,
        "sender_full_name": "Jan-David Salchow",
        "timestamp": 1555361386
    },
    {
        "content": "<p>I've PRed this tiny change as <a href=\"https://github.com/leanprover-community/mathlib/issues/940\" target=\"_blank\" title=\"https://github.com/leanprover-community/mathlib/issues/940\">#940</a> and tested it on my computer. I'm pretty sure it doesn't break anything that was working beforehand ;)</p>",
        "id": 163417544,
        "sender_full_name": "Jan-David Salchow",
        "timestamp": 1555363446
    },
    {
        "content": "<p>Thanks!</p>",
        "id": 163417558,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1555363479
    },
    {
        "content": "<div class=\"codehilite\"><pre><span></span>$ update-mathlib\n  File &quot;/home/buzzard/.mathlib/bin/update-mathlib&quot;, line 23\n    os.system(f&quot;curl {mathlib_url}/{branch}/{installer_path} -sSf | sh&quot;)\n                                                                      ^\nSyntaxError: invalid syntax\n$\n</pre></div>\n\n\n<p>aargh [on Ubuntu 16.04]</p>",
        "id": 163457534,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1555411040
    },
    {
        "content": "<p>Can I fix this easily? I'm out all day with a laptop and I don't fancy hammering my battery to compile mathlib.</p>",
        "id": 163458729,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1555412357
    },
    {
        "content": "<p>Oh ok I figured how it all worked. I switched to a mathlib git commit from a couple of weeks ago and then ran the installer again which I found in scripts</p>",
        "id": 163460255,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1555413889
    },
    {
        "content": "<p>I just wrote an explanation on why the fix is necessary, see <a href=\"https://github.com/leanprover-community/mathlib/pull/940#issuecomment-484211046\" target=\"_blank\" title=\"https://github.com/leanprover-community/mathlib/pull/940#issuecomment-484211046\">https://github.com/leanprover-community/mathlib/pull/940#issuecomment-484211046</a></p>",
        "id": 163589176,
        "sender_full_name": "Jan-David Salchow",
        "timestamp": 1555526276
    },
    {
        "content": "<p>This makes me doubt that the fix is only required for Macs</p>",
        "id": 163589258,
        "sender_full_name": "Jan-David Salchow",
        "timestamp": 1555526301
    },
    {
        "content": "<p>I think all three reads should be broken, when executed as suggested above</p>",
        "id": 163589357,
        "sender_full_name": "Jan-David Salchow",
        "timestamp": 1555526368
    },
    {
        "content": "<p>Has anybody tried this on Debian without python installed?</p>",
        "id": 163589665,
        "sender_full_name": "Jan-David Salchow",
        "timestamp": 1555526531
    },
    {
        "content": "<p>Hi! I'm trying to get started on macOS, and I followed the installation directions exactly as written on the github. Lean seems to be working fine in VSCode, but unfortunately after creating a new project with leanproject, running</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"kn\">import</span> <span class=\"n\">topology</span><span class=\"bp\">.</span><span class=\"n\">basic</span>\n<span class=\"bp\">#</span><span class=\"kn\">check</span> <span class=\"n\">topological_space</span>\n</pre></div>\n\n\n<p>(or any basic import really) results in loads of strange errors, none of which I understand at all. For instance it's complaining about syntax errors in tactic/alias.lean, and also docstrings starting with /-! or /-- result in lots of errors while docstrings starting with /- don't give any errors.</p>\n<p>Are these kinds of things known problems, or have I just screwed something up?</p>",
        "id": 194569081,
        "sender_full_name": "Ashwin Iyengar",
        "timestamp": 1587252779
    },
    {
        "content": "<p>Probably the latter. Did you \"open folder\" with VS Code? I never remember what the option looks like in a mac.</p>",
        "id": 194569107,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1587252840
    },
    {
        "content": "<p>If you have a terminal, then change directory to the root directory of your project and type <code>code .</code> to open VS Code -- works in linux, not sure about mac.</p>",
        "id": 194569149,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1587252880
    },
    {
        "content": "<p>But it's really important that you \"open folder\" and don't just open a file in your workspace directly with VS Code.</p>",
        "id": 194569160,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1587252917
    },
    {
        "content": "<p>Yeah I ran \"leanproject new test-project\" and then \"code test-project\" and opened the whole folder</p>",
        "id": 194569170,
        "sender_full_name": "Ashwin Iyengar",
        "timestamp": 1587252953
    },
    {
        "content": "<p>Can you post the errors or send a screenshot?</p>",
        "id": 194569211,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1587252971
    },
    {
        "content": "<p>Output of <code>leanproject new test-project</code> should be something like</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"err\">$</span> <span class=\"n\">leanproject</span> <span class=\"n\">new</span> <span class=\"n\">test</span><span class=\"bp\">-</span><span class=\"n\">project</span>\n<span class=\"bp\">&gt;</span> <span class=\"n\">mkdir</span> <span class=\"bp\">-</span><span class=\"n\">p</span> <span class=\"n\">test</span><span class=\"bp\">-</span><span class=\"n\">project</span>\n<span class=\"bp\">&gt;</span> <span class=\"n\">cd</span> <span class=\"n\">test</span><span class=\"bp\">-</span><span class=\"n\">project</span>\n<span class=\"bp\">&gt;</span> <span class=\"n\">mkdir</span> <span class=\"n\">src</span>\n<span class=\"bp\">&gt;</span> <span class=\"n\">git</span> <span class=\"n\">init</span> <span class=\"bp\">-</span><span class=\"n\">q</span>\n<span class=\"bp\">&gt;</span> <span class=\"n\">git</span> <span class=\"n\">checkout</span> <span class=\"bp\">-</span><span class=\"n\">b</span> <span class=\"n\">lean</span><span class=\"bp\">-</span><span class=\"mi\">3</span><span class=\"bp\">.</span><span class=\"mi\">4</span><span class=\"bp\">.</span><span class=\"mi\">2</span>\n<span class=\"n\">Switched</span> <span class=\"n\">to</span> <span class=\"n\">a</span> <span class=\"n\">new</span> <span class=\"n\">branch</span> <span class=\"err\">&#39;</span><span class=\"n\">lean</span><span class=\"bp\">-</span><span class=\"mi\">3</span><span class=\"bp\">.</span><span class=\"mi\">4</span><span class=\"bp\">.</span><span class=\"mi\">2</span><span class=\"err\">&#39;</span>\n<span class=\"n\">configuring</span> <span class=\"n\">test</span><span class=\"bp\">-</span><span class=\"n\">project</span> <span class=\"mi\">0</span><span class=\"bp\">.</span><span class=\"mi\">1</span>\n<span class=\"n\">Adding</span> <span class=\"n\">mathlib</span>\n<span class=\"n\">Looking</span> <span class=\"n\">for</span> <span class=\"n\">local</span> <span class=\"n\">mathlib</span> <span class=\"n\">oleans</span>\n<span class=\"n\">Looking</span> <span class=\"n\">for</span> <span class=\"n\">remote</span> <span class=\"n\">mathlib</span> <span class=\"n\">oleans</span>\n<span class=\"n\">Trying</span> <span class=\"n\">to</span> <span class=\"n\">download</span> <span class=\"n\">https</span><span class=\"o\">:</span><span class=\"bp\">//</span><span class=\"n\">oleanstorage</span><span class=\"bp\">.</span><span class=\"n\">azureedge</span><span class=\"bp\">.</span><span class=\"n\">net</span><span class=\"bp\">/</span><span class=\"n\">mathlib</span><span class=\"bp\">/</span><span class=\"mi\">6</span><span class=\"n\">b095759061cbb736fdd7aaed8ca603a2e657b3e</span><span class=\"bp\">.</span><span class=\"n\">tar</span><span class=\"bp\">.</span><span class=\"n\">gz</span> <span class=\"n\">to</span> <span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">buzzard</span><span class=\"bp\">/.</span><span class=\"n\">mathlib</span><span class=\"bp\">/</span><span class=\"mi\">6</span><span class=\"n\">b095759061cbb736fdd7aaed8ca603a2e657b3e</span><span class=\"bp\">.</span><span class=\"n\">tar</span><span class=\"bp\">.</span><span class=\"n\">gz</span>\n<span class=\"mi\">100</span><span class=\"err\">%</span><span class=\"bp\">|</span><span class=\"err\">█████████████████████████████████████</span><span class=\"bp\">|</span> <span class=\"mi\">25</span><span class=\"bp\">.</span><span class=\"mi\">9</span><span class=\"n\">M</span><span class=\"bp\">/</span><span class=\"mi\">25</span><span class=\"bp\">.</span><span class=\"mi\">9</span><span class=\"n\">M</span> <span class=\"o\">[</span><span class=\"mi\">00</span><span class=\"o\">:</span><span class=\"mi\">01</span><span class=\"bp\">&lt;</span><span class=\"mi\">00</span><span class=\"o\">:</span><span class=\"mi\">00</span><span class=\"o\">,</span> <span class=\"mi\">22</span><span class=\"bp\">.</span><span class=\"mi\">5</span><span class=\"n\">MiB</span><span class=\"bp\">/</span><span class=\"n\">s</span><span class=\"o\">]</span>\n<span class=\"n\">Found</span> <span class=\"n\">mathlib</span> <span class=\"n\">oleans</span> <span class=\"n\">at</span> <span class=\"n\">https</span><span class=\"o\">:</span><span class=\"bp\">//</span><span class=\"n\">oleanstorage</span><span class=\"bp\">.</span><span class=\"n\">azureedge</span><span class=\"bp\">.</span><span class=\"n\">net</span><span class=\"bp\">/</span><span class=\"n\">mathlib</span><span class=\"bp\">/</span>\n</pre></div>",
        "id": 194569217,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1587253020
    },
    {
        "content": "<p>After <code>code test-project</code> I navigate to <code>src</code> in VS Code, create a new file called <code>test.lean</code> and then after </p>\n<div class=\"codehilite\"><pre><span></span><span class=\"kn\">import</span> <span class=\"n\">topology</span><span class=\"bp\">.</span><span class=\"n\">basic</span>\n<span class=\"bp\">#</span><span class=\"kn\">check</span> <span class=\"n\">topological_space</span>\n</pre></div>\n\n\n<p>I get </p>\n<div class=\"codehilite\"><pre><span></span><span class=\"n\">topological_space</span> <span class=\"o\">:</span> <span class=\"kt\">Type</span> <span class=\"n\">u_1</span> <span class=\"bp\">→</span> <span class=\"kt\">Type</span> <span class=\"n\">u_1</span>\n</pre></div>",
        "id": 194569273,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1587253107
    },
    {
        "content": "<p>Yeah so doing <code>leanproject new test-project</code> gives me</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"err\">%</span> <span class=\"n\">leanproject</span> <span class=\"n\">new</span> <span class=\"n\">test</span><span class=\"bp\">-</span><span class=\"n\">project</span>\n<span class=\"bp\">&gt;</span> <span class=\"n\">cd</span> <span class=\"n\">test</span><span class=\"bp\">-</span><span class=\"n\">project</span>\n<span class=\"bp\">&gt;</span> <span class=\"n\">git</span> <span class=\"n\">init</span> <span class=\"bp\">-</span><span class=\"n\">q</span>\n<span class=\"bp\">&gt;</span> <span class=\"n\">git</span> <span class=\"n\">checkout</span> <span class=\"bp\">-</span><span class=\"n\">b</span> <span class=\"n\">lean</span><span class=\"bp\">-</span><span class=\"mi\">3</span><span class=\"bp\">.</span><span class=\"mi\">9</span><span class=\"bp\">.</span><span class=\"mi\">0</span>\n<span class=\"n\">Switched</span> <span class=\"n\">to</span> <span class=\"n\">a</span> <span class=\"n\">new</span> <span class=\"n\">branch</span> <span class=\"err\">&#39;</span><span class=\"n\">lean</span><span class=\"bp\">-</span><span class=\"mi\">3</span><span class=\"bp\">.</span><span class=\"mi\">9</span><span class=\"bp\">.</span><span class=\"mi\">0</span><span class=\"err\">&#39;</span>\n<span class=\"n\">configuring</span> <span class=\"n\">test</span><span class=\"bp\">-</span><span class=\"n\">project</span> <span class=\"mi\">0</span><span class=\"bp\">.</span><span class=\"mi\">1</span>\n<span class=\"n\">Adding</span> <span class=\"n\">mathlib</span>\n<span class=\"n\">Looking</span> <span class=\"n\">for</span> <span class=\"n\">local</span> <span class=\"n\">mathlib</span> <span class=\"n\">oleans</span>\n<span class=\"n\">Found</span> <span class=\"n\">local</span> <span class=\"n\">mathlib</span> <span class=\"n\">oleans</span>\n</pre></div>\n\n\n<p>which looks about right</p>",
        "id": 194569293,
        "sender_full_name": "Ashwin Iyengar",
        "timestamp": 1587253169
    },
    {
        "content": "<p>one sec, I'll re-run the topology bit</p>",
        "id": 194569299,
        "sender_full_name": "Ashwin Iyengar",
        "timestamp": 1587253190
    },
    {
        "content": "<p>Yes, this is the second time you did it so it found your oleans locally this time</p>",
        "id": 194569302,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1587253197
    },
    {
        "content": "<p>The first time it will have downloaded them from a webserver.</p>",
        "id": 194569344,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1587253210
    },
    {
        "content": "<p>WOOAH WOOAH WOOAH 3.9.0??</p>",
        "id": 194569346,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1587253228
    },
    {
        "content": "<p>OK I know what the problem is :-)</p>",
        "id": 194569347,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1587253234
    },
    {
        "content": "<p>ahhh ok</p>",
        "id": 194569352,
        "sender_full_name": "Ashwin Iyengar",
        "timestamp": 1587253242
    },
    {
        "content": "<p>and it's not your fault. We will have to fix it manually</p>",
        "id": 194569359,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1587253257
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110038\">Kevin Buzzard</span> <a href=\"#narrow/stream/113489-new-members/topic/Installing.20mathlib/near/194569359\" title=\"#narrow/stream/113489-new-members/topic/Installing.20mathlib/near/194569359\">said</a>:</p>\n<blockquote>\n<p>and it's not your fault. We will have to fix it manually</p>\n</blockquote>\n<p>phew</p>",
        "id": 194569369,
        "sender_full_name": "Ashwin Iyengar",
        "timestamp": 1587253281
    },
    {
        "content": "<p>The problem is that a few hours ago Lean got upgraded from 3.8.0 to 3.9.0, but the maths library didn't yet make the change</p>",
        "id": 194569373,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1587253285
    },
    {
        "content": "<p>but I am a bit bewildered about how you managed to do this -- <span class=\"user-mention\" data-user-id=\"110031\">@Patrick Massot</span> any idea? Wait, lemme upgrade leanproject so I'm in exactly the same mess as you.</p>",
        "id": 194569417,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1587253326
    },
    {
        "content": "<p>Ah wait, I think I did run <code>elan update</code> at some point to try to fix things (and it did download something new), but the bizarre errors that I'm getting were there before I ran <code>elan update</code></p>",
        "id": 194569463,
        "sender_full_name": "Ashwin Iyengar",
        "timestamp": 1587253418
    },
    {
        "content": "<p>Crap. How come my leanproject is doing the right thing? What happens if you type <code>leanproject --version</code>?</p>",
        "id": 194569465,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1587253424
    },
    {
        "content": "<p><code>leanproject, version 0.0.5</code></p>",
        "id": 194569493,
        "sender_full_name": "Ashwin Iyengar",
        "timestamp": 1587253442
    },
    {
        "content": "<p>OK and if you just completely start again with <code>leanproject new test-project</code> you get 3.9.0?</p>",
        "id": 194569513,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1587253464
    },
    {
        "content": "<p>yep</p>",
        "id": 194569520,
        "sender_full_name": "Ashwin Iyengar",
        "timestamp": 1587253489
    },
    {
        "content": "<p>Anyway, let's just fix it. Sorry about this, you caught us at a bad moment.</p>",
        "id": 194569522,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1587253493
    },
    {
        "content": "<p>Go into the root directory of your project and tell me the contents of <code>leanpkg.toml</code></p>",
        "id": 194569537,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1587253513
    },
    {
        "content": "<p>[package]<br>\nname = \"test-project\"<br>\nversion = \"0.1\"<br>\nlean_version = \"leanprover-community/lean:3.8.0\"<br>\npath = \"src\"</p>\n<p>[dependencies]<br>\nmathlib = {git = \"<a href=\"https://github.com/leanprover-community/mathlib\" title=\"https://github.com/leanprover-community/mathlib\">https://github.com/leanprover-community/mathlib</a>\", rev = \"6b095759061cbb736fdd7aaed8ca603a2e657b3e\"}</p>",
        "id": 194569540,
        "sender_full_name": "Ashwin Iyengar",
        "timestamp": 1587253546
    },
    {
        "content": "<p>oh, that's exactly what it should say.</p>",
        "id": 194569578,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1587253563
    },
    {
        "content": "<p>Then I am back to being confused. I was going to tell you to change it to that.</p>",
        "id": 194569582,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1587253577
    },
    {
        "content": "<p>yeah strange that it says 3.8.0 after installing 3.9.0...</p>",
        "id": 194569585,
        "sender_full_name": "Ashwin Iyengar",
        "timestamp": 1587253583
    },
    {
        "content": "<p>Still in the root directory of your project, type <code> lean --make _target/deps/mathlib/src/data/real/basic.lean</code></p>",
        "id": 194569593,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1587253624
    },
    {
        "content": "<p>You should get no output and the compilation should take no more than a few seconds.</p>",
        "id": 194569598,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1587253640
    },
    {
        "content": "<p>yep no output, ran quickly</p>",
        "id": 194569642,
        "sender_full_name": "Ashwin Iyengar",
        "timestamp": 1587253707
    },
    {
        "content": "<p>OK great. So you have got a fully installed Lean and mathlib. Oh, while we're here, try <code>lean --version</code>.</p>",
        "id": 194569647,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1587253728
    },
    {
        "content": "<p>You should be on 3.8.0</p>",
        "id": 194569655,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1587253740
    },
    {
        "content": "<p><code>Lean (version 3.8.0, commit e694f496aa08, Release)</code></p>",
        "id": 194569661,
        "sender_full_name": "Ashwin Iyengar",
        "timestamp": 1587253760
    },
    {
        "content": "<p>You did everything right.</p>",
        "id": 194569663,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1587253767
    },
    {
        "content": "<p>Maybe it's an issue with VSCode?</p>",
        "id": 194569668,
        "sender_full_name": "Ashwin Iyengar",
        "timestamp": 1587253777
    },
    {
        "content": "<p>That's all that is left.</p>",
        "id": 194569669,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1587253787
    },
    {
        "content": "<p>So open up VS Code, stick a file called test.lean in the src directory of your project and try what you tried before:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"kn\">import</span> <span class=\"n\">topology</span><span class=\"bp\">.</span><span class=\"n\">basic</span>\n<span class=\"bp\">#</span><span class=\"kn\">check</span> <span class=\"n\">topological_space</span>\n</pre></div>",
        "id": 194569723,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1587253828
    },
    {
        "content": "<p>and if clicking on <code>#check</code> doesn't give you <code>topological_space : Type u_1 → Type u_1</code> then send a screenshot (you can do it with the paper clip just under the box where you type  assuming you're using a computer)</p>",
        "id": 194569742,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1587253882
    },
    {
        "content": "<p>Yeah so if I run <code>lean src/test.lean</code> from the command line everything works and it outputs <code>topological_space : Type u_1 → Type u_1</code></p>",
        "id": 194569749,
        "sender_full_name": "Ashwin Iyengar",
        "timestamp": 1587253900
    },
    {
        "content": "<p>One sec, I'll see what VSCode says (takes a while to parse...)</p>",
        "id": 194569752,
        "sender_full_name": "Ashwin Iyengar",
        "timestamp": 1587253909
    },
    {
        "content": "<p>That's because you got everything set up correctly :-)</p>",
        "id": 194569758,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1587253916
    },
    {
        "content": "<p>you can also <code>#print lean.version</code> from vscode</p>",
        "id": 194569808,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1587253979
    },
    {
        "content": "<p>I am still bewildered by the way. The whole 3.9.0 thing was a complete red herring. It sounds like you've done everything perfectly and the new bump to Lean 3.9.0 didn't mess anything up at all.</p>",
        "id": 194569809,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1587253979
    },
    {
        "content": "<p><code>lean.version : ℕ × ℕ × ℕ</code></p>",
        "id": 194569826,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1587254000
    },
    {
        "content": "<p>Mario did you just troll me?</p>",
        "id": 194569838,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1587254006
    },
    {
        "content": "<p>oh rofl</p>",
        "id": 194569848,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1587254024
    },
    {
        "content": "<p>that's the result of <code>#check lean.version</code> <span aria-label=\"laughing\" class=\"emoji emoji-1f606\" role=\"img\" title=\"laughing\">:laughing:</span></p>",
        "id": 194569852,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1587254034
    },
    {
        "content": "<p>does <code>#eval</code> work?</p>",
        "id": 194569899,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1587254052
    },
    {
        "content": "<p>haha yeah I got the same thing</p>",
        "id": 194569900,
        "sender_full_name": "Ashwin Iyengar",
        "timestamp": 1587254064
    },
    {
        "content": "<p><code>(3, (8, 0))</code></p>",
        "id": 194569901,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1587254066
    },
    {
        "content": "<p>if i run <code>#print lean.version</code> i get <code>def lean.version : ℕ × ℕ × ℕ :=\n(3, 4, 2)</code></p>",
        "id": 194569909,
        "sender_full_name": "Ashwin Iyengar",
        "timestamp": 1587254078
    },
    {
        "content": "<p>I will recommend that in the future then</p>",
        "id": 194569913,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1587254083
    },
    {
        "content": "<p>okay that's not good</p>",
        "id": 194569917,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1587254102
    },
    {
        "content": "<p>Aah OK so there's your problem Ashwin, Lean is running 3.4.2 in VS Code but you're set up to run 3.8.0</p>",
        "id": 194569921,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1587254107
    },
    {
        "content": "<p>yes that makes sense... i'll see if I can find it in the VSCode settings somewhere i guess</p>",
        "id": 194569927,
        "sender_full_name": "Ashwin Iyengar",
        "timestamp": 1587254124
    },
    {
        "content": "<p>Did you screw with VS Code settings at some point?</p>",
        "id": 194569939,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1587254138
    },
    {
        "content": "<p>You already confessed that you screwed with elan</p>",
        "id": 194569948,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1587254158
    },
    {
        "content": "<p>Nope elan is the only thing I dared mess with</p>",
        "id": 194569987,
        "sender_full_name": "Ashwin Iyengar",
        "timestamp": 1587254172
    },
    {
        "content": "<p>VS Code is also set up to use <code>lean</code> by default so it depends on your PATH what exactly that resolves to</p>",
        "id": 194569988,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1587254181
    },
    {
        "content": "<p>what do you get from <code>lean --version</code> at the vscode console</p>",
        "id": 194570011,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1587254223
    },
    {
        "content": "<p>You can get the console by dragging up from the top line of the blue bar at the bottom of VS Code.</p>",
        "id": 194570018,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1587254240
    },
    {
        "content": "<p><code>ash@MacBook-Pro-3 test-project % lean --version\nLean (version 3.8.0, commit e694f496aa08, Release)</code></p>",
        "id": 194570022,
        "sender_full_name": "Ashwin Iyengar",
        "timestamp": 1587254253
    },
    {
        "content": "<p>OK so in VS Code try File -&gt; Preferences -&gt; Settings</p>",
        "id": 194570033,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1587254275
    },
    {
        "content": "<p>and then search for lean</p>",
        "id": 194570073,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1587254287
    },
    {
        "content": "<p>and what is in the box for <code>Lean : Executable Path</code>?</p>",
        "id": 194570078,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1587254300
    },
    {
        "content": "<p>Oh \"/Applications/Lean/lean-3.4.2-darwin/bin/lean\"</p>",
        "id": 194570081,
        "sender_full_name": "Ashwin Iyengar",
        "timestamp": 1587254332
    },
    {
        "content": "<p>Aah :-)</p>",
        "id": 194570085,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1587254338
    },
    {
        "content": "<p>I guess i must have installed lean at some point last year?</p>",
        "id": 194570086,
        "sender_full_name": "Ashwin Iyengar",
        "timestamp": 1587254339
    },
    {
        "content": "<p>There's the culprit</p>",
        "id": 194570089,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1587254344
    },
    {
        "content": "<p>Just remove it completely, leave the box blank</p>",
        "id": 194570091,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1587254353
    },
    {
        "content": "<p>and then Ctrl-Shift-P and then type \"restart lean\" in the box and select the option which appears</p>",
        "id": 194570098,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1587254388
    },
    {
        "content": "<p>Sorry, it's \"Lean : restart\"</p>",
        "id": 194570100,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1587254400
    },
    {
        "content": "<p>yay! it works now</p>",
        "id": 194570120,
        "sender_full_name": "Ashwin Iyengar",
        "timestamp": 1587254402
    },
    {
        "content": "<p>thanks Kevin!</p>",
        "id": 194570149,
        "sender_full_name": "Ashwin Iyengar",
        "timestamp": 1587254419
    },
    {
        "content": "<p>A couple of years ago I think there was a good reason to be typing stuff into that box</p>",
        "id": 194570153,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1587254430
    },
    {
        "content": "<p>but since then the community has made a huge effort to make everything work out of the box</p>",
        "id": 194570159,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1587254444
    },
    {
        "content": "<p>so anything in the box is a bad idea</p>",
        "id": 194570161,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1587254450
    },
    {
        "content": "<p>Now go do maths :-)</p>",
        "id": 194570178,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1587254500
    },
    {
        "content": "<p>yeah i was impressed by how smooth the installation process is generally</p>",
        "id": 194570187,
        "sender_full_name": "Ashwin Iyengar",
        "timestamp": 1587254510
    },
    {
        "content": "<p>That was a pretty impressive gotcha.</p>",
        "id": 194570227,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1587254524
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"110031\">@Patrick Massot</span> can you explain why whenever someone types <code>leanproject new blah</code> a version of lean is mentioned which never seems to be the version a user ends up with? :-)</p>",
        "id": 194570249,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1587254575
    },
    {
        "content": "<p>Pretty smooth aside from that brief moment when you slipped into the future</p>",
        "id": 194570275,
        "sender_full_name": "Reid Barton",
        "timestamp": 1587254612
    },
    {
        "content": "<p>well if I run <code>lean --version</code> inside the project folder it tells me 3.8.0 but if i run it outside the folder it tells me 3.9.0</p>",
        "id": 194570288,
        "sender_full_name": "Ashwin Iyengar",
        "timestamp": 1587254640
    },
    {
        "content": "<p>That makes sense</p>",
        "id": 194570329,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1587254654
    },
    {
        "content": "<p>The lean program decides which version of Lean to use by looking for a <code>leanpkg.toml</code></p>",
        "id": 194570335,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1587254674
    },
    {
        "content": "<p>that was why that was the first question I asked</p>",
        "id": 194570340,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1587254686
    },
    {
        "content": "<p>Can we now change the VS Code extension to not even give people the option of putting something in that box? It seems the hold-outs who won't use <code>elan</code> can probably be left to fend for themselves, and we'll save a lot of trouble.</p>",
        "id": 194570418,
        "sender_full_name": "Scott Morrison",
        "timestamp": 1587254867
    },
    {
        "content": "<p>I'd prefer adding a stern warning there instead of taking the setting away entirely. If I recall correctly, Patrick's portable VS Code experiment relied on that setting.</p>",
        "id": 194573959,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1587261810
    },
    {
        "content": "<p>I think that having the setting is important. Sometimes the automatic tools don't work, for whatever reason, and I don't want to rely too deeply on their presence</p>",
        "id": 194574484,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1587262775
    },
    {
        "content": "<p>Perhaps then just a warning on it. \"Do not use this setting unless you are a Mario-level expert user!\" :-)</p>",
        "id": 194575088,
        "sender_full_name": "Scott Morrison",
        "timestamp": 1587263982
    },
    {
        "content": "<p>Why is there no <code>:mario:</code> emoji?</p>",
        "id": 194581582,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1587276601
    },
    {
        "content": "<p>Warnings PR'd: <a href=\"https://github.com/leanprover/vscode-lean/pull/156\" title=\"https://github.com/leanprover/vscode-lean/pull/156\">https://github.com/leanprover/vscode-lean/pull/156</a> (No Mario references, sorry...)</p>",
        "id": 194581773,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1587276960
    },
    {
        "content": "<p>Did you know zulip lets you add custom emoji? I'm glad no one has noticed yet because it sounds easy to abuse</p>",
        "id": 194583356,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1587280111
    },
    {
        "content": "<p>oh wait, it's an admin only feature. that makes me feel slightly better about it</p>",
        "id": 194583417,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1587280213
    },
    {
        "content": "<p><a href=\"/user_uploads/3121/OzII3M2SRI4C13jVNXVi3UhH/image.png\" title=\"image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/OzII3M2SRI4C13jVNXVi3UhH/image.png\" title=\"image.png\"><img src=\"/user_uploads/3121/OzII3M2SRI4C13jVNXVi3UhH/image.png\"></a></div>",
        "id": 194583425,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1587280308
    },
    {
        "content": "<p>We need a version of this image adding Mario's beard.</p>",
        "id": 194589873,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1587291005
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"123965\">@Bryan Gin-ge Chen</span> , if I run that in git bash, I get \"invalid git repository\". </p>\n<p>I realized: perhaps I haven't actually installed Lean correctly a while back (I've had Lean on VSCode for a while now, not using it for a few months). So I tried reinstalling based on the description in <a href=\"https://leanprover-community.github.io/install/windows.html\">https://leanprover-community.github.io/install/windows.html</a>. But after entering the command <code>curl https://raw.githubusercontent.com/Kha/elan/master/elan-init.sh -sSf | sh</code>, I get the error <code>error: could not remove 'elan-bin' file: 'C:\\Users\\chris\\.elan\\bin\\elan.exe'\ninfo: caused by: Access is denied. (os error 5)</code></p>\n<p>What should I do about this?</p>",
        "id": 202285692,
        "sender_full_name": "Chris M",
        "timestamp": 1593420964
    },
    {
        "content": "<p>That means you already have <code>elan</code> installed. You can update <code>elan</code> by typing <code>elan self update</code>.</p>",
        "id": 202285775,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1593421040
    },
    {
        "content": "<p>What do you see if you type <code>leanproject --version</code>? The latest version is 0.0.8. If you don't have that version, you should be able to upgrade with <code>pip install --upgrade mathlibtools</code>.</p>",
        "id": 202286021,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1593421231
    },
    {
        "content": "<p>If I write <code>elan self update</code> I still get <code>error: could not remove 'elan-bin' file: 'C:\\Users\\chris\\.elan\\bin\\elan.exe'\ninfo: caused by: Access is denied. (os error 5)</code>. </p>\n<p><code>leanproject --version</code> gave  me version 0.0.5, and after the update I have 0.0.8. However, after trying <code>elan self update</code> after that, I got the same error.</p>",
        "id": 202286360,
        "sender_full_name": "Chris M",
        "timestamp": 1593421498
    },
    {
        "content": "<p>I'm not sure how permissions in Windows work, but you should try and see if you can change the permissions of everything in <code>C:\\Users\\chris\\.elan</code>. It might be easier just to delete that directory entirely and try reinstalling it.</p>\n<p>By the way, <code>leanproject</code> and <code>elan</code> are separate tools (though <code>leanproject</code> makes use of <code>elan</code>), so there's no reason to expect that upgrading <code>leanproject</code> would fix <code>elan</code>.</p>",
        "id": 202286619,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1593421666
    },
    {
        "content": "<p>Anyways, I'm not sure what could be causing \"invalid git repository\".</p>",
        "id": 202286754,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1593421783
    },
    {
        "content": "<p>It turned out to be very simple. I had to close VSCode</p>",
        "id": 202286824,
        "sender_full_name": "Chris M",
        "timestamp": 1593421814
    },
    {
        "content": "<p>Ok I have managed to get it to work. It turned out I didn't create a lean project but instead just had separate .lean files, and hence didn't have access to the mathlib library</p>",
        "id": 202287883,
        "sender_full_name": "Chris M",
        "timestamp": 1593422579
    }
]