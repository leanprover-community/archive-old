[
    {
        "content": "<p>G'day. I have the following meta code</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">meta</span> <span class=\"n\">def</span> <span class=\"n\">recurse_pi</span> <span class=\"o\">:</span> <span class=\"n\">expr</span> <span class=\"bp\">→</span> <span class=\"n\">tactic</span> <span class=\"n\">unit</span>\n<span class=\"bp\">|</span> <span class=\"o\">(</span><span class=\"n\">expr</span><span class=\"bp\">.</span><span class=\"n\">pi</span> <span class=\"bp\">_</span> <span class=\"bp\">_</span> <span class=\"n\">v</span> <span class=\"n\">b</span><span class=\"o\">)</span> <span class=\"o\">:=</span> <span class=\"n\">do</span> <span class=\"n\">t</span> <span class=\"err\">←</span> <span class=\"n\">infer_type</span> <span class=\"n\">v</span><span class=\"o\">,</span>\n                          <span class=\"n\">trace</span> <span class=\"n\">t</span><span class=\"o\">,</span>\n                          <span class=\"n\">recurse_pi</span> <span class=\"n\">b</span>\n<span class=\"bp\">|</span> <span class=\"bp\">_</span> <span class=\"o\">:=</span> <span class=\"n\">skip</span>\n\n<span class=\"bp\">#</span><span class=\"kn\">eval</span> <span class=\"n\">recurse_pi</span> <span class=\"bp\">`</span><span class=\"o\">(</span><span class=\"bp\">∀</span> <span class=\"o\">{</span><span class=\"n\">a</span> <span class=\"n\">b</span> <span class=\"o\">:</span> <span class=\"kt\">Prop</span><span class=\"o\">},</span> <span class=\"o\">(</span><span class=\"n\">a</span> <span class=\"bp\">→</span> <span class=\"n\">b</span><span class=\"o\">)</span> <span class=\"bp\">→</span> <span class=\"o\">(</span><span class=\"n\">b</span> <span class=\"bp\">→</span> <span class=\"n\">a</span><span class=\"o\">)</span> <span class=\"bp\">→</span> <span class=\"o\">(</span><span class=\"n\">a</span> <span class=\"bp\">↔</span> <span class=\"n\">b</span><span class=\"o\">))</span>\n</code></pre></div>\n\n\n<p>I want this to print out </p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"kt\">Type</span>\n<span class=\"kt\">Type</span>\n<span class=\"kt\">Prop</span>\n<span class=\"kt\">Prop</span>\n</code></pre></div>\n\n\n<p>But it prints out</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"kt\">Type</span>\n<span class=\"kt\">Type</span>\n</code></pre></div>\n\n\n<p>and gives the error \"tactic 'infer_type' failed, given expression should not contain de-Bruijn variables, they should be replaced with local constants before using this tactic\"</p>\n<p>How do I replace  de-Bruijn variables with local constants? And/or is there a better way to do what I want? Thanks.</p>",
        "id": 207928228,
        "sender_full_name": "Lucas Allen",
        "timestamp": 1598336492
    }
]