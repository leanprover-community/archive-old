[
    {
        "content": "<p>I'm confused on how to make optional arguments for tactics to work. Right now I have two different tactics, one of them takes an extra argument, and I want to make them just one tactic with that extra argument being optional:</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kd\">meta</span> <span class=\"kd\">def</span> <span class=\"n\">rewrite_search</span> <span class=\"o\">(</span><span class=\"n\">try_harder</span> <span class=\"o\">:</span> <span class=\"n\">parse</span> <span class=\"bp\">$</span> <span class=\"n\">optional</span> <span class=\"o\">(</span><span class=\"n\">tk</span> <span class=\"s2\">\"!\"</span><span class=\"o\">))</span>\n  <span class=\"o\">(</span><span class=\"n\">cfg</span> <span class=\"o\">:</span> <span class=\"n\">config</span> <span class=\"bp\">.</span> <span class=\"n\">pick_default</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"n\">tactic</span> <span class=\"n\">string</span> <span class=\"o\">:=</span>\n<span class=\"n\">rewrite_search_target</span> <span class=\"n\">cfg</span> <span class=\"o\">[]</span>\n\n<span class=\"kd\">meta</span> <span class=\"kd\">def</span> <span class=\"n\">rewrite_search_with</span> <span class=\"o\">(</span><span class=\"n\">try_harder</span> <span class=\"o\">:</span> <span class=\"n\">parse</span> <span class=\"bp\">$</span> <span class=\"n\">optional</span> <span class=\"o\">(</span><span class=\"n\">tk</span> <span class=\"s2\">\"!\"</span><span class=\"o\">))</span> <span class=\"o\">(</span><span class=\"n\">rs</span> <span class=\"o\">:</span> <span class=\"n\">parse</span> <span class=\"n\">rw_rules</span><span class=\"o\">)</span>\n  <span class=\"o\">(</span><span class=\"n\">cfg</span> <span class=\"o\">:</span> <span class=\"n\">config</span> <span class=\"bp\">.</span> <span class=\"n\">pick_default</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"n\">tactic</span> <span class=\"n\">string</span> <span class=\"o\">:=</span>\n<span class=\"n\">rewrite_search_target</span> <span class=\"n\">cfg</span> <span class=\"n\">rs.rules</span>\n</code></pre></div>\n<p>From the docs I thought I should just be able to add a <code>(rs : parse (optional rw_rules))</code> to the arguments for <code>rewrite_search</code>, but that causes my existing code to mis-parse.</p>",
        "id": 218454093,
        "sender_full_name": "Kevin Lacker",
        "timestamp": 1606843410
    },
    {
        "content": "<p>trying -&gt; <a href=\"#narrow/stream/113488-general/topic/optional.20arguments.20for.20tactics\">https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/optional.20arguments.20for.20tactics</a></p>",
        "id": 218456094,
        "sender_full_name": "Kevin Lacker",
        "timestamp": 1606844321
    }
]