[
    {
        "content": "<p>Have you done the natural number game? Can you prove complex conjugation is a ring homomorphism? </p>\n<p>Link to Lean web editor (takes a long time to load, honestly I'd leave it on \"lean is busy\" for at least 1 minute before concluding something is wrong):</p>\n<p><a href=\"https://tinyurl.com/thecomplexnumbergame\" title=\"https://tinyurl.com/thecomplexnumbergame\">https://tinyurl.com/thecomplexnumbergame</a></p>\n<p><a href=\"https://github.com/kbuzzard/xena/blob/master/Mathematics_In_Lean_ideas/complex.lean\" title=\"https://github.com/kbuzzard/xena/blob/master/Mathematics_In_Lean_ideas/complex.lean\">Source</a>  (cut and paste this into any Lean project which uses mathlib and you won't have to wait 1 minute) </p>\n<p><a href=\"https://github.com/kbuzzard/xena/blob/master/Mathematics_In_Lean_ideas/complex_solns.lean\" title=\"https://github.com/kbuzzard/xena/blob/master/Mathematics_In_Lean_ideas/complex_solns.lean\">Solutions</a></p>\n<p>This is part of a book I'm writing with Jeremy, Rob and Patrick. All comments from mathematicians welcome!</p>",
        "id": 197051594,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1589112504
    },
    {
        "content": "<div class=\"codehilite\"><pre><span></span><code><span class=\"kn\">structure</span> <span class=\"n\">complex</span> <span class=\"o\">:</span> <span class=\"kt\">Type</span> <span class=\"o\">:=</span>\n<span class=\"o\">(</span><span class=\"n\">re</span> <span class=\"o\">:</span> <span class=\"n\">ℝ</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">im</span> <span class=\"o\">:</span> <span class=\"n\">ℝ</span><span class=\"o\">)</span>\n</code></pre></div>\n\n\n<p>Is the code above roughly equivalent to the Haskell:</p>\n<div class=\"codehilite\"><pre><span></span><code> <span class=\"n\">data</span> <span class=\"n\">Complex</span> <span class=\"bp\">=</span> <span class=\"n\">C</span> <span class=\"n\">Real</span> <span class=\"n\">Real</span>\n</code></pre></div>",
        "id": 197052351,
        "sender_full_name": "Aniruddh Agarwal",
        "timestamp": 1589113434
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"294709\">Aniruddh Agarwal</span> <a href=\"#narrow/stream/113489-new-members/topic/the.20complex.20number.20game/near/197052351\" title=\"#narrow/stream/113489-new-members/topic/the.20complex.20number.20game/near/197052351\">said</a>:</p>\n<blockquote>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"kn\">structure</span> <span class=\"n\">complex</span> <span class=\"o\">:</span> <span class=\"kt\">Type</span> <span class=\"o\">:=</span>\n<span class=\"o\">(</span><span class=\"n\">re</span> <span class=\"o\">:</span> <span class=\"n\">ℝ</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">im</span> <span class=\"o\">:</span> <span class=\"n\">ℝ</span><span class=\"o\">)</span>\n</code></pre></div>\n\n\n<p>Is the code above roughly equivalent to the Haskell:</p>\n<div class=\"codehilite\"><pre><span></span><code> <span class=\"n\">data</span> <span class=\"n\">Complex</span> <span class=\"bp\">=</span> <span class=\"n\">C</span> <span class=\"n\">Real</span> <span class=\"n\">Real</span>\n</code></pre></div>\n\n\n</blockquote>\n<p>Basically, but the fields are named in Lean whereas you haven't named them in the Haskell.</p>",
        "id": 197053004,
        "sender_full_name": "Patrick Stevens",
        "timestamp": 1589114053
    },
    {
        "content": "<p>I'm trying to work out a path to building a basic mathematical API for the complexes in a way that a mathematician can understand easily. I've got something which I think works ok and I'll be live streaming a walkthrough of a basic complex number game on twitch tomorrow Thursday 21st 5pm UK time.</p>",
        "id": 198259777,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1590010337
    },
    {
        "content": "<p>(If you \"follow\" kevin at <a href=\"https://www.twitch.tv/kbuzzard\">https://www.twitch.tv/kbuzzard</a>, you'll get an email when he goes live)</p>",
        "id": 198272926,
        "sender_full_name": "Jalex Stark",
        "timestamp": 1590019824
    },
    {
        "content": "<p>walkthrough or speedrun?</p>",
        "id": 198283824,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1590033205
    },
    {
        "content": "<p>Walkthrough</p>",
        "id": 198292896,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1590045483
    },
    {
        "content": "<p>Basically I have got what I think is a really nice proof that C is a ring which hopefully will convince people that lean is easy</p>",
        "id": 198292923,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1590045522
    },
    {
        "content": "<p>And by the time they're using it and realise that it's hard, it's too late they're hooked</p>",
        "id": 198292945,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1590045549
    },
    {
        "content": "<p>what, <code>by ring</code>?</p>",
        "id": 198293047,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1590045653
    },
    {
        "content": "<p>It's my_complex</p>",
        "id": 198293063,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1590045688
    },
    {
        "content": "<p><a href=\"https://github.com/ImperialCollegeLondon/complex-number-game\">https://github.com/ImperialCollegeLondon/complex-number-game</a></p>",
        "id": 198337446,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1590076202
    },
    {
        "content": "<p>Do you want this to be added to <a href=\"https://leanprover-community.github.io/learn.html\">https://leanprover-community.github.io/learn.html</a> or is this a transient thing waiting to be integrated to MIL?</p>",
        "id": 198337929,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1590076426
    },
    {
        "content": "<p>Yes you'd like this to be added, then you simply need to click the edit button at <a href=\"https://github.com/leanprover-community/leanprover-community.github.io/blob/newsite/templates/learn.md\">https://github.com/leanprover-community/leanprover-community.github.io/blob/newsite/templates/learn.md</a> to open a PR</p>",
        "id": 198338046,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1590076475
    },
    {
        "content": "<p>This was just a gimmick. I am happy to use it any way you think is best.</p>",
        "id": 198348960,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1590081250
    },
    {
        "content": "<p>I can't understand the lines</p>\n<p><code>def Conj : ℂ →+* ℂ :=\n{ to_fun := conj,\n  map_one' := begin ext; simp, end,\n  map_mul' := begin intros, ext; simp end,\n  map_zero' := begin ext; simp end,\n  map_add' := begin intros, ext; simp end} </code></p>\n<p>in the Complex Numbers Game,</p>",
        "id": 198475352,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1590171094
    },
    {
        "content": "<p>Did you understand the question? That looks like the solution</p>",
        "id": 198475423,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1590171125
    },
    {
        "content": "<p>No, indeed (as you said yesterday), I guess I don't know what an equivalence relation is.</p>",
        "id": 198475457,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1590171149
    },
    {
        "content": "<p>I understand that conj could take (x,y) and send it to (x,-y)</p>",
        "id": 198475487,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1590171172
    },
    {
        "content": "<p>The question is probably the same as the solution except that between each <code>begin end</code> block there is a <code>sorry</code></p>",
        "id": 198475509,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1590171182
    },
    {
        "content": "<p>and solved all the exercises related to conj.</p>",
        "id": 198475520,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1590171186
    },
    {
        "content": "<p>and if you click on the <code>sorry</code> you will see the goal which Lean wants you to prove.</p>",
        "id": 198475552,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1590171218
    },
    {
        "content": "<p>I suspect I don't know what it means to \" define a function\" (more than specifying where it should send every element of the domain)</p>",
        "id": 198475580,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1590171240
    },
    {
        "content": "<p>I don't know what you are talking about. What function?</p>",
        "id": 198475634,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1590171254
    },
    {
        "content": "<p>This is the question:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"c\">/-</span><span class=\"cm\">- the ring homomorphism complex conjugation -/</span>\n<span class=\"n\">def</span> <span class=\"n\">Conj</span> <span class=\"o\">:</span> <span class=\"n\">ℂ</span> <span class=\"bp\">→+*</span> <span class=\"n\">ℂ</span> <span class=\"o\">:=</span>\n<span class=\"o\">{</span> <span class=\"n\">to_fun</span> <span class=\"o\">:=</span> <span class=\"n\">conj</span><span class=\"o\">,</span>\n  <span class=\"n\">map_zero&#39;</span> <span class=\"o\">:=</span> <span class=\"k\">begin</span> <span class=\"n\">sorry</span> <span class=\"kn\">end</span><span class=\"o\">,</span>\n  <span class=\"n\">map_one&#39;</span> <span class=\"o\">:=</span> <span class=\"k\">begin</span> <span class=\"n\">sorry</span> <span class=\"kn\">end</span><span class=\"o\">,</span>\n  <span class=\"n\">map_add&#39;</span> <span class=\"o\">:=</span> <span class=\"k\">begin</span> <span class=\"n\">sorry</span> <span class=\"kn\">end</span><span class=\"o\">,</span>\n  <span class=\"n\">map_mul&#39;</span> <span class=\"o\">:=</span> <span class=\"k\">begin</span> <span class=\"n\">sorry</span> <span class=\"kn\">end</span>\n<span class=\"o\">}</span>\n</code></pre></div>",
        "id": 198475659,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1590171277
    },
    {
        "content": "<p>I have done the hard work (the computer science stuff).</p>",
        "id": 198475693,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1590171300
    },
    {
        "content": "<p>you begin with<br>\n<code>def Conj : C-&gt;+* C :=</code></p>",
        "id": 198475703,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1590171304
    },
    {
        "content": "<p>Yes but you don't need to worry about all that part</p>",
        "id": 198475725,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1590171317
    },
    {
        "content": "<p>Sorry, what is your question?</p>",
        "id": 198475751,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1590171330
    },
    {
        "content": "<p>Did you manage to fill in the <code>sorry</code>s yourself?</p>",
        "id": 198475781,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1590171353
    },
    {
        "content": "<p>Indeed, I haven't realised I could click on the sorry to understand what Lean wanted from me</p>",
        "id": 198475852,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1590171375
    },
    {
        "content": "<p>I agree that now everything looks trivial (or at the same level of previous exercices), so no problem. An thanks.</p>",
        "id": 198475901,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1590171404
    },
    {
        "content": "<p>But still one small point eludes me:</p>",
        "id": 198475914,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1590171410
    },
    {
        "content": "<p>OK so the question for mathematicians is supposed to be the following: \"replace each <code>sorry</code> with a tactic proof. You can see what the goal is in each case by clicking on the <code>sorry</code>\"</p>",
        "id": 198475945,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1590171427
    },
    {
        "content": "<p>What is the point of these lines? I gather that it is to state the lemma \"the set-theoretic map conj is actually a ring homomoprhism\", is that right?</p>",
        "id": 198475992,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1590171456
    },
    {
        "content": "<p>I only released the game yesterday and I didn't try it out on some select group of people or anything -- I am sure that there will be plenty of things that need to be clarified.</p>",
        "id": 198475994,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1590171457
    },
    {
        "content": "<p>Yes, so that's the other question we have here.</p>",
        "id": 198476022,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1590171470
    },
    {
        "content": "<p>You might know that to define a complex number <code>z</code> in Lean we could do something like <code>{ re := 3, im := 4}</code></p>",
        "id": 198476094,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1590171494
    },
    {
        "content": "<p>Yes</p>",
        "id": 198476114,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1590171504
    },
    {
        "content": "<p>Well, to define a ring homomorphism from <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"double-struck\">C</mi></mrow><annotation encoding=\"application/x-tex\">\\mathbb{C}</annotation></semantics></math></span><span aria-hidden=\"true\" class=\"katex-html\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68889em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord mathbb\">C</span></span></span></span></span> to <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"double-struck\">C</mi></mrow><annotation encoding=\"application/x-tex\">\\mathbb{C}</annotation></semantics></math></span><span aria-hidden=\"true\" class=\"katex-html\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68889em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord mathbb\">C</span></span></span></span></span> it's the same kind of story</p>",
        "id": 198476164,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1590171520
    },
    {
        "content": "<p>We need to give Lean a map, and four proofs</p>",
        "id": 198476183,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1590171533
    },
    {
        "content": "<p>I believe that my problem is that those lines begin with <code>def</code> rather than <code>lemma</code></p>",
        "id": 198476191,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1590171536
    },
    {
        "content": "<p><code>def z := { re := 3, im := 4}</code> also has a <code>def</code></p>",
        "id": 198476229,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1590171557
    },
    {
        "content": "<p>as does <code>def conj (z : ℂ) : ℂ := sorry</code></p>",
        "id": 198476270,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1590171575
    },
    {
        "content": "<p>If you are defining things, you use <code>def</code> or <code>definition</code>. If you are proving theorems you use <code>theorem</code> or <code>lemma</code></p>",
        "id": 198476378,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1590171610
    },
    {
        "content": "<p>This line (435 in the code) is OK with me: it defines a function taking a complex number to another complex number.</p>",
        "id": 198476402,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1590171629
    },
    {
        "content": "<p>We are defining the ring homomorphism, and part of the definition is the underlying function. We are <em>not</em> proving that a function is a ring homomorphism, we are defining a ring homomorphism to be a collection of data, most of which is proofs, but not all of it, so we use <code>def</code></p>",
        "id": 198476455,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1590171663
    },
    {
        "content": "<p>What puzzles me are the line where you check it is a ring hom: they begin with <br>\n<code>def Conj : ℂ →+* ℂ :=</code></p>",
        "id": 198476465,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1590171670
    },
    {
        "content": "<p>I am defining a second thing</p>",
        "id": 198476476,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1590171678
    },
    {
        "content": "<p><code>conj</code> is the function, <code>Conj</code> is the ring homomorphism</p>",
        "id": 198476504,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1590171697
    },
    {
        "content": "<p>(the invisible map again is in the background, I suspect)</p>",
        "id": 198476529,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1590171716
    },
    {
        "content": "<p>There's an invisible map from ring homs to functions, and it will send Conj to conj.</p>",
        "id": 198476605,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1590171739
    },
    {
        "content": "<p><code>Conj</code> is a variable that contains a lot of data, including <code>conj</code></p>",
        "id": 198476685,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1590171779
    },
    {
        "content": "<p>Ahah! Clear: so, I am correct in saying that<br>\n1) the to_fun line says that the underlying function to Conj is conj<br>\n2) the  -&gt;+* is telling Lean that we are going to define a ring hom<br>\n3) the map_one' until map_add' are the axioms a ring hom must satisfy (because we told him already that a ring hom is by definition something which satisfies them)</p>",
        "id": 198476778,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1590171831
    },
    {
        "content": "<p>Mathematicians think that <code>Conj</code> and <code>conj</code> are equal, because to a mathematician the \"object\" is just the function, and the proofs of the axioms are not things you can make with sets -- the proofs live in some other part of the story.</p>\n<p>In Lean, proofs are objects, just like functions are, so you can make objects which package together functions and proofs. <code>conj</code> has no packaging -- it's just the function. <code>Conj</code> is the package: the function, and the proofs, all in one object. In type theory, proofs are no different to numbers -- they are just terms, which can be packaged together.</p>",
        "id": 198476981,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1590171911
    },
    {
        "content": "<p>Wonderful, it does make sense. In particular, I guess that before a mathematician (or myself, at least) can do something cool with Lean, this part of the story needs to be fully digested.</p>",
        "id": 198477160,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1590172008
    },
    {
        "content": "<p>But it seems very edible.</p>",
        "id": 198477199,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1590172025
    },
    {
        "content": "<p>Do you have <code>leanproject</code> installed <span class=\"user-mention\" data-user-id=\"300245\">@Filippo A. E. Nuccio</span> ? If you do then there is now a much easier way to play the complex number game: you can just download and compile the repository with <code>leanproject get ImperialCollegeLondon/complex-number-game</code></p>",
        "id": 198477207,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1590172030
    },
    {
        "content": "<p>Yes, I have already done so.</p>",
        "id": 198477247,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1590172051
    },
    {
        "content": "<p>and then you can solve the levels individually in VS Code</p>",
        "id": 198477255,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1590172056
    },
    {
        "content": "<p>I am playing on my pc, actually</p>",
        "id": 198477274,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1590172065
    },
    {
        "content": "<p>I asked because you mentioned line 435</p>",
        "id": 198477289,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1590172071
    },
    {
        "content": "<p>but I have pulled everything off into individual chapters now, in their own files, e.g. <a href=\"https://github.com/ImperialCollegeLondon/complex-number-game/blob/master/src/complex/conj.lean\">https://github.com/ImperialCollegeLondon/complex-number-game/blob/master/src/complex/conj.lean</a></p>",
        "id": 198477393,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1590172115
    },
    {
        "content": "<p>That was from the github page, because I feared I could not make myself clear.</p>",
        "id": 198477397,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1590172119
    },
    {
        "content": "<p>I don't think any file in the github repo I'm talking about has as many as 435 lines.</p>",
        "id": 198477480,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1590172160
    },
    {
        "content": "<p><a href=\"https://github.com/kbuzzard/xena/blob/master/Mathematics_In_Lean_ideas/complex_solns.lean\">https://github.com/kbuzzard/xena/blob/master/Mathematics_In_Lean_ideas/complex_solns.lean</a></p>",
        "id": 198477520,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1590172185
    },
    {
        "content": "<p>Right. What I'm trying to say is that I have made a more sophisticated version of this game now</p>",
        "id": 198477592,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1590172204
    },
    {
        "content": "<p>Now I got it, thanks; sorry for not grasping it more quickly.</p>",
        "id": 198477702,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1590172263
    },
    {
        "content": "<p><a href=\"https://www.twitch.tv/videos/627659597\">https://www.twitch.tv/videos/627659597</a> if you want to see me playing through the tutorial level</p>",
        "id": 198477737,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1590172281
    },
    {
        "content": "<p>I attended it live, actually .</p>",
        "id": 198477773,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1590172307
    },
    {
        "content": "<p>and on Thursday 21st I'll be solving <code>I</code> and <code>conj</code> live</p>",
        "id": 198477775,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1590172311
    },
    {
        "content": "<p>You mean that yesterday you'll be solving them?</p>",
        "id": 198477845,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1590172335
    },
    {
        "content": "<p>oops Thursday 28th :-)</p>",
        "id": 198477868,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1590172351
    },
    {
        "content": "<p>Kevin, that's what you get for encouraging people to be rigorous</p>",
        "id": 198477896,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1590172370
    },
    {
        "content": "<p>I hope to be done with the full proof that C is a field by next week, as I would like to move towards factorizing ideals as products of primes in Dedekind domains.</p>",
        "id": 198478000,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1590172434
    },
    {
        "content": "<p>Thank you for your help, in the meantime.</p>",
        "id": 198478112,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1590172481
    },
    {
        "content": "<p>I don't give any hints for this, and it's slightly tricky to get started. You should be warned that Lean's axioms for a field are not what we usually teach!</p>",
        "id": 198478122,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1590172489
    },
    {
        "content": "<p>Check this out: a field is a nonzero commutative ring equipped with a map <code>inv : K -&gt; K</code> satisfying <code>inv(0)=0</code>, and <code>x*inv(x)=1</code> if <code>x</code> isn't <code>0</code></p>",
        "id": 198478185,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1590172532
    },
    {
        "content": "<p>I'm sure you can see that this is trivially equivalent to what we think a field is</p>",
        "id": 198478297,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1590172571
    },
    {
        "content": "<p>Sure</p>",
        "id": 198478306,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1590172576
    },
    {
        "content": "<p>But they like their functions to be defined everywhere for technical reasons to do with implementation issues</p>",
        "id": 198478336,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1590172603
    },
    {
        "content": "<p>Note that <code>a/b</code> is defined to be <code>a*inv(b)</code>, so in particular <code>1/0=0</code></p>",
        "id": 198478369,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1590172623
    },
    {
        "content": "<p>(are \"they\" computer scientists?)</p>",
        "id": 198478386,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1590172637
    },
    {
        "content": "<p>This means that you can define <code>inv(z)</code> to be <code>{re := re(z)/norm_sq(z), im := -im(z)/norm_sq(z)}</code></p>",
        "id": 198478421,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1590172667
    },
    {
        "content": "<p>Sure, this makes sense.</p>",
        "id": 198478481,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1590172687
    },
    {
        "content": "<p>and if <code>z=0</code> this will give you 0, which is what the CS people want</p>",
        "id": 198478484,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1590172688
    },
    {
        "content": "<p>Great. It all makes sense, and also explains why norms come before it being a field.</p>",
        "id": 198478574,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1590172739
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"300245\">Filippo A. E. Nuccio</span> <a href=\"#narrow/stream/113489-new-members/topic/the.20complex.20number.20game/near/198478000\">said</a>:</p>\n<blockquote>\n<p>I hope to be done with the full proof that C is a field by next week, as I would like to move towards factorizing ideals as products of primes in Dedekind domains.</p>\n</blockquote>\n<p>I love that sentence.</p>",
        "id": 198478842,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1590172771
    },
    {
        "content": "<p>I wish our students could be that ambitious.</p>",
        "id": 198478890,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1590172798
    },
    {
        "content": "<p>I intentionally put the proof it was a ring before the definition of <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span aria-hidden=\"true\" class=\"katex-html\"><span class=\"base\"><span class=\"strut\" style=\"height:0.65952em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">i</span></span></span></span>, because as a mathematician I feel like <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span aria-hidden=\"true\" class=\"katex-html\"><span class=\"base\"><span class=\"strut\" style=\"height:0.65952em;vertical-align:0em;\"></span><span class=\"mord mathdefault\">i</span></span></span></span> is the first thing you want to define, and I thought it really interesting that you can prove <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"double-struck\">C</mi></mrow><annotation encoding=\"application/x-tex\">\\mathbb{C}</annotation></semantics></math></span><span aria-hidden=\"true\" class=\"katex-html\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68889em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord mathbb\">C</span></span></span></span></span> is a ring without ever mentioning it explicitly.</p>",
        "id": 198478938,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1590172806
    },
    {
        "content": "<p>And I also wish people could stop teaching set theory bullshit to our students. I'm marking exams and I just saw. Let's fix <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">(</mo><mi>f</mi><mo separator=\"true\">,</mo><mi>g</mi><mo stretchy=\"false\">)</mo><mo>∈</mo><msup><mrow><mo fence=\"true\">(</mo><msup><mi mathvariant=\"double-struck\">R</mi><mi mathvariant=\"double-struck\">R</mi></msup><mo fence=\"true\">)</mo></mrow><mn>2</mn></msup></mrow><annotation encoding=\"application/x-tex\">(f, g) \\in \\left(\\mathbb R^{\\mathbb R}\\right)^2</annotation></semantics></math></span><span aria-hidden=\"true\" class=\"katex-html\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.10764em;\">f</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">g</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">∈</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.404018em;vertical-align:-0.35001em;\"></span><span class=\"minner\"><span class=\"minner\"><span class=\"mopen delimcenter\" style=\"top:0em;\"><span class=\"delimsizing size1\">(</span></span><span class=\"mord\"><span class=\"mord mathbb\">R</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.845223em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathbb mtight\">R</span></span></span></span></span></span></span></span></span><span class=\"mclose delimcenter\" style=\"top:0em;\"><span class=\"delimsizing size1\">)</span></span></span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.054008em;\"><span style=\"top:-3.3029em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span></span></span></span> instead of <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>f</mi><mo separator=\"true\">,</mo><mi>g</mi><mo>:</mo><mi mathvariant=\"double-struck\">R</mi><mo>→</mo><mi mathvariant=\"double-struck\">R</mi></mrow><annotation encoding=\"application/x-tex\">f, g : \\mathbb R \\to \\mathbb R</annotation></semantics></math></span><span aria-hidden=\"true\" class=\"katex-html\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10764em;\">f</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">g</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">:</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.68889em;vertical-align:0em;\"></span><span class=\"mord mathbb\">R</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">→</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.68889em;vertical-align:0em;\"></span><span class=\"mord mathbb\">R</span></span></span></span>...</p>",
        "id": 198479205,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1590172927
    },
    {
        "content": "<p>It's defeq Patrick so you can't take a mark off</p>",
        "id": 198479267,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1590172966
    },
    {
        "content": "<p>That's terrifying, though...</p>",
        "id": 198479283,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1590172973
    },
    {
        "content": "<p>That's the French for you</p>",
        "id": 198479299,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1590172985
    },
    {
        "content": "<p>And those are my students who used Lean for 12 weeks...</p>",
        "id": 198479524,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1590173085
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110031\">Patrick Massot</span> <a href=\"#narrow/stream/113489-new-members/topic/the.20complex.20number.20game/near/198479524\">said</a>:</p>\n<blockquote>\n<p>And those are my students who used Lean for 12 weeks...</p>\n</blockquote>\n<p>BTW: I might ask you hints on how to teach Lean to my students as well, also in France (Saint-Étienne), but this will come later. I might need to first lea(r)n it myself.</p>",
        "id": 198479750,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1590173196
    },
    {
        "content": "<p>Did you do the tutorials based on my course?</p>",
        "id": 198479800,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1590173242
    },
    {
        "content": "<p>Some of them, yes. Almost all of them, actually.</p>",
        "id": 198480326,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1590173498
    },
    {
        "content": "<p>You can also get the French version on my web page (together with the lecture notes and tactic cheat sheet).</p>",
        "id": 198480780,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1590173722
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"300245\">@Filippo A. E. Nuccio</span> I just pushed solutions to <code>field.lean</code> in the complex number game repo</p>",
        "id": 198483357,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1590175099
    },
    {
        "content": "<p>Thanks to both of you!</p>",
        "id": 198485329,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1590176067
    },
    {
        "content": "<p>Actually if you are interested in the French version then I'll do some cleanup. Because I wrote files each week there are some inefficiencies in the libraries. There are also things that are now fixed in Lean and mathlib (I used a version of mathlib frozen in early January so that Lean and mathlib could be installed in our computer labs and on student's computers).</p>",
        "id": 198486201,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1590176552
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110031\">Patrick Massot</span> <a href=\"#narrow/stream/113489-new-members/topic/the.20complex.20number.20game/near/198479205\">said</a>:</p>\n<blockquote>\n<p>And I also wish people could stop teaching set theory bullshit to our students. I'm marking exams and I just saw. Let's fix <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">(</mo><mi>f</mi><mo separator=\"true\">,</mo><mi>g</mi><mo stretchy=\"false\">)</mo><mo>∈</mo><msup><mrow><mo fence=\"true\">(</mo><msup><mi mathvariant=\"double-struck\">R</mi><mi mathvariant=\"double-struck\">R</mi></msup><mo fence=\"true\">)</mo></mrow><mn>2</mn></msup></mrow><annotation encoding=\"application/x-tex\">(f, g) \\in \\left(\\mathbb R^{\\mathbb R}\\right)^2</annotation></semantics></math></span><span aria-hidden=\"true\" class=\"katex-html\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.10764em;\">f</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">g</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">∈</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.404018em;vertical-align:-0.35001em;\"></span><span class=\"minner\"><span class=\"minner\"><span class=\"mopen delimcenter\" style=\"top:0em;\"><span class=\"delimsizing size1\">(</span></span><span class=\"mord\"><span class=\"mord mathbb\">R</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.845223em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathbb mtight\">R</span></span></span></span></span></span></span></span></span><span class=\"mclose delimcenter\" style=\"top:0em;\"><span class=\"delimsizing size1\">)</span></span></span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.054008em;\"><span style=\"top:-3.3029em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span></span></span></span> instead of <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>f</mi><mo separator=\"true\">,</mo><mi>g</mi><mo>:</mo><mi mathvariant=\"double-struck\">R</mi><mo>→</mo><mi mathvariant=\"double-struck\">R</mi></mrow><annotation encoding=\"application/x-tex\">f, g : \\mathbb R \\to \\mathbb R</annotation></semantics></math></span><span aria-hidden=\"true\" class=\"katex-html\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10764em;\">f</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">g</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">:</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.68889em;vertical-align:0em;\"></span><span class=\"mord mathbb\">R</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">→</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.68889em;vertical-align:0em;\"></span><span class=\"mord mathbb\">R</span></span></span></span>...</p>\n</blockquote>\n<p>Yes, the type theory minded students can write the much clearer \"Let's fix <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">(</mo><mi>f</mi><mo separator=\"true\">,</mo><mi>g</mi><mo stretchy=\"false\">)</mo><mo>:</mo><mo stretchy=\"false\">(</mo><mi mathvariant=\"double-struck\">R</mi><mo>→</mo><mi mathvariant=\"double-struck\">R</mi><mo stretchy=\"false\">)</mo><mo>×</mo><mo stretchy=\"false\">(</mo><mi mathvariant=\"double-struck\">R</mi><mo>→</mo><mi mathvariant=\"double-struck\">R</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">(f,g):(\\mathbb{R}\\to\\mathbb{R})\\times(\\mathbb{R}\\to\\mathbb{R})</annotation></semantics></math></span><span aria-hidden=\"true\" class=\"katex-html\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.10764em;\">f</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">g</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">:</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathbb\">R</span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">→</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathbb\">R</span></span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathbb\">R</span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">→</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathbb\">R</span></span><span class=\"mclose\">)</span></span></span></span>\"...</p>",
        "id": 198487469,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1590177211
    },
    {
        "content": "<p>or <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">(</mo><mi>f</mi><mo separator=\"true\">,</mo><mi>g</mi><mo stretchy=\"false\">)</mo><mo>:</mo><mn>2</mn><mo>→</mo><mi mathvariant=\"double-struck\">R</mi><mo>→</mo><mi mathvariant=\"double-struck\">R</mi></mrow><annotation encoding=\"application/x-tex\">(f,g):2\\to\\mathbb{R}\\to\\mathbb{R}</annotation></semantics></math></span><span aria-hidden=\"true\" class=\"katex-html\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.10764em;\">f</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">g</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">:</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">2</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">→</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.68889em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord mathbb\">R</span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">→</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.68889em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord mathbb\">R</span></span></span></span></span> in some conventions</p>",
        "id": 198487570,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1590177259
    },
    {
        "content": "<p>I think you first suggestion is much clearer than what I wrote. The second one however...</p>",
        "id": 198488516,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1590177712
    },
    {
        "content": "<p>I have a basic question about basic.lean in the CNG (sorry to coopt someone else's thread) -- when proving something is an instance, like  in the example:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"kn\">instance</span> <span class=\"o\">:</span> <span class=\"n\">comm_ring</span> <span class=\"n\">ℂ</span> <span class=\"o\">:=</span>\n<span class=\"k\">begin</span>\n  <span class=\"c1\">-- first the data</span>\n  <span class=\"n\">refine_struct</span> <span class=\"o\">{</span>\n      <span class=\"n\">zero</span> <span class=\"o\">:=</span> <span class=\"o\">(</span><span class=\"mi\">0</span> <span class=\"o\">:</span> <span class=\"n\">ℂ</span><span class=\"o\">),</span> <span class=\"n\">add</span> <span class=\"o\">:=</span> <span class=\"o\">(</span><span class=\"bp\">+</span><span class=\"o\">),</span> <span class=\"n\">neg</span> <span class=\"o\">:=</span> <span class=\"n\">has_neg</span><span class=\"bp\">.</span><span class=\"n\">neg</span><span class=\"o\">,</span> <span class=\"n\">one</span> <span class=\"o\">:=</span> <span class=\"mi\">1</span><span class=\"o\">,</span> <span class=\"n\">mul</span> <span class=\"o\">:=</span> <span class=\"o\">(</span><span class=\"bp\">*</span><span class=\"o\">),</span>\n  <span class=\"bp\">..</span><span class=\"o\">}</span><span class=\"bp\">;</span>\n <span class=\"n\">sorry</span><span class=\"o\">,</span>\n</code></pre></div>\n\n\n<p>I am curious how to get Lean to \"autocomplete\" the set of data that needs to be provided in <code>refine_struct {  ... } </code>.  (By autocomplete, I don't mean that it will fill the data itself, just the list of fields that need to be defined, i.e. zero, add, neg, one, mul in this example.) I have a vague recollection reading somewhere on Zulip  that there is some magic thing one can type that causes a little light bulb to show up. Is that the case, and what is the magic?</p>",
        "id": 198488930,
        "sender_full_name": "Sam Lichtenstein",
        "timestamp": 1590177963
    },
    {
        "content": "<p>It's {! !}, which you can ask to fill in the skeleton for the structure under construction.</p>",
        "id": 198489150,
        "sender_full_name": "Alex J. Best",
        "timestamp": 1590178085
    },
    {
        "content": "<p>ah great, I knew there was a ! involved, but didn't remember that you need two of them<br>\nthanks!</p>",
        "id": 198489174,
        "sender_full_name": "Sam Lichtenstein",
        "timestamp": 1590178107
    },
    {
        "content": "<p>I'm not sure it works in tactic mode though.<br>\nSo you'd need to do <code>instance : comm_ring ℂ :={! !}</code> to generate the structure first, then move into refine_struct if you prefer.</p>",
        "id": 198489221,
        "sender_full_name": "Alex J. Best",
        "timestamp": 1590178136
    },
    {
        "content": "<p>are there keybindings, or does one need to use the mouse to hover over the bulb and select from the dropdown? (I am using VSCode not emacs)</p>",
        "id": 198489422,
        "sender_full_name": "Sam Lichtenstein",
        "timestamp": 1590178248
    },
    {
        "content": "<p><code>ctrl+.</code></p>",
        "id": 198489464,
        "sender_full_name": "Gabriel Ebner",
        "timestamp": 1590178277
    },
    {
        "content": "<p>Gabriel, if I am between the {! and the !} and I type CTRL + \".\" (which I think is what you meant?), nothing seems to happen</p>",
        "id": 198489616,
        "sender_full_name": "Sam Lichtenstein",
        "timestamp": 1590178371
    },
    {
        "content": "<p>is it supposed to?</p>",
        "id": 198489634,
        "sender_full_name": "Sam Lichtenstein",
        "timestamp": 1590178390
    },
    {
        "content": "<p>Yes</p>",
        "id": 198489758,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1590178480
    },
    {
        "content": "<p>And I think it should work wherever Lean wants a term, so inside refine_struct should be ok</p>",
        "id": 198489797,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1590178516
    },
    {
        "content": "<p>ah, duh it's CMD+. on a mac</p>",
        "id": 198490197,
        "sender_full_name": "Sam Lichtenstein",
        "timestamp": 1590178638
    },
    {
        "content": "<p>but does not work in refine_struct{}</p>",
        "id": 198490282,
        "sender_full_name": "Sam Lichtenstein",
        "timestamp": 1590178687
    },
    {
        "content": "<p>I think you have to write <code>refine_struct {! !}</code></p>",
        "id": 198490618,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1590178902
    },
    {
        "content": "<p>Didn't seem to work after refine struct for me</p>",
        "id": 198490987,
        "sender_full_name": "Alex J. Best",
        "timestamp": 1590179115
    },
    {
        "content": "<p>\"no code actions available\"</p>",
        "id": 198491005,
        "sender_full_name": "Sam Lichtenstein",
        "timestamp": 1590179132
    },
    {
        "content": "<p>Hah, this seems to work:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"kn\">import</span> <span class=\"n\">data</span><span class=\"bp\">.</span><span class=\"n\">complex</span><span class=\"bp\">.</span><span class=\"n\">basic</span>\n\n<span class=\"kn\">instance</span> <span class=\"n\">a</span> <span class=\"o\">:</span> <span class=\"n\">comm_ring</span> <span class=\"n\">ℂ</span> <span class=\"o\">:=</span>\n<span class=\"k\">begin</span>\n  <span class=\"c1\">-- first the data</span>\n  <span class=\"n\">refine_struct</span> <span class=\"k\">by</span> <span class=\"n\">exact</span> <span class=\"o\">{</span><span class=\"bp\">!</span> <span class=\"bp\">!</span><span class=\"o\">}</span><span class=\"bp\">;</span>\n <span class=\"n\">sorry</span><span class=\"o\">,</span>\n<span class=\"kn\">end</span>\n</code></pre></div>",
        "id": 198492427,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1590180036
    },
    {
        "content": "<p>I didn't know about <code>{!!}</code> until now. <code>suggest</code> is pretty good at filling the same purpose (and if there are lemmas around letting you construct with fewer arguments, suggest can find some of those too)</p>",
        "id": 198494795,
        "sender_full_name": "Jalex Stark",
        "timestamp": 1590181447
    },
    {
        "content": "<p>I noticed that in the official solutions to the complex number game (which <span class=\"user-mention\" data-user-id=\"110038\">@Kevin Buzzard</span> said were basically taken directly from mathlib) sometimes simp is used on a nonterminal line of a proof. For instance:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"bp\">@</span><span class=\"o\">[</span><span class=\"n\">simp</span><span class=\"o\">]</span> <span class=\"kn\">lemma</span> <span class=\"n\">conj_add</span> <span class=\"o\">(</span><span class=\"n\">z</span> <span class=\"n\">w</span> <span class=\"o\">:</span> <span class=\"n\">ℂ</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"n\">conj</span> <span class=\"o\">(</span><span class=\"n\">z</span> <span class=\"bp\">+</span> <span class=\"n\">w</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"n\">conj</span> <span class=\"n\">z</span> <span class=\"bp\">+</span> <span class=\"n\">conj</span> <span class=\"n\">w</span> <span class=\"o\">:=</span>\n<span class=\"k\">by</span> <span class=\"n\">ext</span><span class=\"bp\">;</span> <span class=\"c1\">-- check on real and imag parts</span>\n   <span class=\"n\">simp</span><span class=\"bp\">;</span> <span class=\"c1\">-- question becomes to check that a+b=b+a for certain real numbers a and b</span>\n   <span class=\"n\">ring</span> <span class=\"c1\">-- true because this is obvious in a ring</span>\n</code></pre></div>\n\n\n<p>Is this considered bad style, or is there a reason it's okay to do here?</p>",
        "id": 199087538,
        "sender_full_name": "Patrick Lutz",
        "timestamp": 1590700507
    },
    {
        "content": "<p><code>simp, ring</code> is a whitelisted combination</p>",
        "id": 199087710,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1590700620
    },
    {
        "content": "<p>because it is mostly insensitive to additional simp rules</p>",
        "id": 199087747,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1590700641
    },
    {
        "content": "<p>wouldn't there still be a problem if simp became good enough to finish the proof on its own? You're not allowed to have additional lines after the goals have been accomplished right?</p>",
        "id": 199087872,
        "sender_full_name": "Patrick Lutz",
        "timestamp": 1590700720
    },
    {
        "content": "<p>Indeed, <code>simp; ring</code> is better than <code>simp, ring</code> for this reason</p>",
        "id": 199087903,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1590700744
    },
    {
        "content": "<p>what's the difference between <code>,</code> and <code>;</code> exactly?</p>",
        "id": 199088050,
        "sender_full_name": "Patrick Lutz",
        "timestamp": 1590700844
    },
    {
        "content": "<p><code>tac1;tac2</code> calls <code>tac1</code> and then calls <code>tac2</code> on all goals produced by <code>tac1</code></p>",
        "id": 199088214,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1590700961
    },
    {
        "content": "<p><code>,</code> will do one tactic after the other, <code>;</code> will run the second tactic on all the goals produced by the first (so if there are none it gracefully does nothing)</p>",
        "id": 199088223,
        "sender_full_name": "Alex J. Best",
        "timestamp": 1590700965
    },
    {
        "content": "<p>Okay, I think I had missed that aspect of it</p>",
        "id": 199088269,
        "sender_full_name": "Patrick Lutz",
        "timestamp": 1590701001
    },
    {
        "content": "<p>Thanks</p>",
        "id": 199088273,
        "sender_full_name": "Patrick Lutz",
        "timestamp": 1590701004
    },
    {
        "content": "<p>If you have an iff statement you might use <code>split; intro</code> for example.</p>",
        "id": 199088292,
        "sender_full_name": "Alex J. Best",
        "timestamp": 1590701017
    },
    {
        "content": "<p>If a proof breaks because it tries to invoke <code>ring</code> when there are no goals, it's usually pretty obvious how to fix it.</p>",
        "id": 199089006,
        "sender_full_name": "Reid Barton",
        "timestamp": 1590701448
    },
    {
        "content": "<p>I used <code>simp; linarith</code> today and felt like I could get away with it for the same sort of reason</p>",
        "id": 199094771,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1590705398
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110038\">Kevin Buzzard</span> <a href=\"#narrow/stream/113489-new-members/topic/the.20complex.20number.20game/near/198483357\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"300245\">Filippo A. E. Nuccio</span> I just pushed solutions to <code>field.lean</code> in the complex number game repo</p>\n</blockquote>\n<p>I have finished playing with everything you proposed before proving that <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"double-struck\">C</mi></mrow><annotation encoding=\"application/x-tex\">\\mathbb{C}</annotation></semantics></math></span><span aria-hidden=\"true\" class=\"katex-html\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68889em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord mathbb\">C</span></span></span></span></span> is a field, and I am now trying to attack this. I realise I am stuck with inv, already, because I can't tell Lean how to distinguish between 0 and non-zero complex numbers. I have tried to copy from the proof that <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"double-struck\">Q</mi></mrow><annotation encoding=\"application/x-tex\">\\mathbb{Q}</annotation></semantics></math></span><span aria-hidden=\"true\" class=\"katex-html\"><span class=\"base\"><span class=\"strut\" style=\"height:0.85556em;vertical-align:-0.16667em;\"></span><span class=\"mord\"><span class=\"mord mathbb\">Q</span></span></span></span></span> is a field, unfortunately with no success. In the link I had, I cannot really see your solutions, have you uploaded them or are you still beneath your pile of copies to be marked?</p>",
        "id": 199256908,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1590845247
    },
    {
        "content": "<p>They are at <a href=\"https://github.com/ImperialCollegeLondon/complex-number-game/tree/master/kb_solutions\">https://github.com/ImperialCollegeLondon/complex-number-game/tree/master/kb_solutions</a></p>",
        "id": 199257114,
        "sender_full_name": "Alex J. Best",
        "timestamp": 1590845571
    },
    {
        "content": "<p>Ahah! Thanks, I had the wrong adress.</p>",
        "id": 199257144,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1590845606
    },
    {
        "content": "<p>Sorry, my solutions are currently in flux because last Thursday I embarked upon a major refactor. What is going on here is that in src there are incomplete solutions to the current (re-ordered) state of the game, and Alex' link is to far more complete solutions to the older version of the game, which is basically exactly the same theorems but in a different order. Hope you can untangle things from these hints! To give an example of the difference: I moved the \"coercion from R to C\" level from level 4 to level 1, because it was quite boring and the sooner you do it the less you have to do; as a result any theorems about e.g. coercions and conjugation used to be in the coersions level and are now in the conjugation level (you need to have both the coercion and conjugation to formalise the statement, and because the order of the levels swapped, the level which the lemma appears in changes).</p>",
        "id": 199257440,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1590846072
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"300245\">@Filippo A. E. Nuccio</span></p>",
        "id": 199257442,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1590846085
    },
    {
        "content": "<p>Yes, thanks, I realised this. But it is OK, I could make my way through the solutions. I am now trying to digest your def's of inv and on how to prove that <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"double-struck\">C</mi></mrow><annotation encoding=\"application/x-tex\">\\mathbb{C}</annotation></semantics></math></span><span aria-hidden=\"true\" class=\"katex-html\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68889em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord mathbb\">C</span></span></span></span></span> is a field.</p>",
        "id": 199257596,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1590846357
    },
    {
        "content": "<p>So what is going on here is that if z isn't 0 then my definition is mathematically correct, and if z=0 then the inverse is 0 because I am dividing by 0 and x/0=0. The key thing which is not obvious is that in Lean the axioms for a field contain this \"inverse\" map which is a map from K to K, defined by inv(0)=0 and then for non-zero z there's an axiom z*inv(z)=1. So it's just the same as a usual field but they totalised the inverse function, because total functions are easier to work with.</p>",
        "id": 199259993,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1590849994
    },
    {
        "content": "<p>Filippo, do you know about <a href=\"https://leanprover-community.github.io/mathlib_docs/tactics.html#by_cases\">tactic#by_cases</a>? Maybe <code>by_cases z = 0</code> is useful for the things you're working on</p>",
        "id": 199283852,
        "sender_full_name": "Jalex Stark",
        "timestamp": 1590887243
    },
    {
        "content": "<p>Well, but in the definition  <br>\n<code> noncomputable def inv (z : ℂ) : ℂ :=\n⟨re(z)/norm_sq(z), -im(z)/norm_sq(z)⟩</code><br>\nwhere is it hidden that <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>z</mi><mo mathvariant=\"normal\">≠</mo><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">z \\ne 0</annotation></semantics></math></span><span aria-hidden=\"true\" class=\"katex-html\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.04398em;\">z</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\"><span class=\"mrel\"><span class=\"mord\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.69444em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"rlap\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"inner\"><span class=\"mrel\"></span></span><span class=\"fix\"></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.19444em;\"><span></span></span></span></span></span></span><span class=\"mrel\">=</span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">0</span></span></span></span>? Because although I can understand that you can insist <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mrow><mi mathvariant=\"normal\">i</mi><mi mathvariant=\"normal\">n</mi><mi mathvariant=\"normal\">v</mi></mrow><mo stretchy=\"false\">(</mo><mn>0</mn><mo stretchy=\"false\">)</mo><mo>=</mo><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">\\mathrm{inv}(0)=0</annotation></semantics></math></span><span aria-hidden=\"true\" class=\"katex-html\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathrm\">i</span><span class=\"mord mathrm\">n</span><span class=\"mord mathrm\" style=\"margin-right:0.01389em;\">v</span></span><span class=\"mopen\">(</span><span class=\"mord\">0</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">0</span></span></span></span> and set <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>z</mi><mrow><mo>−</mo><mn>1</mn></mrow></msup><mo>=</mo><mrow><mi mathvariant=\"normal\">i</mi><mi mathvariant=\"normal\">n</mi><mi mathvariant=\"normal\">v</mi></mrow><mo stretchy=\"false\">(</mo><mi>z</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">z^{-1}=\\mathrm{inv}(z)</annotation></semantics></math></span><span aria-hidden=\"true\" class=\"katex-html\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8141079999999999em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.04398em;\">z</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">−</span><span class=\"mord mtight\">1</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathrm\">i</span><span class=\"mord mathrm\">n</span><span class=\"mord mathrm\" style=\"margin-right:0.01389em;\">v</span></span><span class=\"mopen\">(</span><span class=\"mord mathdefault\" style=\"margin-right:0.04398em;\">z</span><span class=\"mclose\">)</span></span></span></span>, so that <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mn>0</mn><mrow><mo>−</mo><mn>1</mn></mrow></msup><mo>=</mo><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">0^{-1}=0</annotation></semantics></math></span><span aria-hidden=\"true\" class=\"katex-html\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8141079999999999em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord\">0</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">−</span><span class=\"mord mtight\">1</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">0</span></span></span></span>, the above definition involves dividing  <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>0</mn><mo>=</mo><mrow><mi mathvariant=\"normal\">r</mi><mi mathvariant=\"normal\">e</mi></mrow><mo stretchy=\"false\">(</mo><mn>0</mn><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">0=\\mathrm{re}(0)</annotation></semantics></math></span><span aria-hidden=\"true\" class=\"katex-html\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">0</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathrm\">r</span><span class=\"mord mathrm\">e</span></span><span class=\"mopen\">(</span><span class=\"mord\">0</span><span class=\"mclose\">)</span></span></span></span> by <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mrow><mi mathvariant=\"normal\">n</mi><mi mathvariant=\"normal\">o</mi><mi mathvariant=\"normal\">r</mi><mi mathvariant=\"normal\">m</mi></mrow><mi mathvariant=\"normal\">_</mi><mrow><mi mathvariant=\"normal\">s</mi><mi mathvariant=\"normal\">q</mi></mrow><mo stretchy=\"false\">(</mo><mn>0</mn><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">\\mathrm{norm}\\_\\mathrm{sq}(0)</annotation></semantics></math></span><span aria-hidden=\"true\" class=\"katex-html\"><span class=\"base\"><span class=\"strut\" style=\"height:1.06em;vertical-align:-0.31em;\"></span><span class=\"mord\"><span class=\"mord mathrm\">n</span><span class=\"mord mathrm\">o</span><span class=\"mord mathrm\">r</span><span class=\"mord mathrm\">m</span></span><span class=\"mord\" style=\"margin-right:0.02778em;\">_</span><span class=\"mord\"><span class=\"mord mathrm\">s</span><span class=\"mord mathrm\">q</span></span><span class=\"mopen\">(</span><span class=\"mord\">0</span><span class=\"mclose\">)</span></span></span></span> as real numbers, no?</p>",
        "id": 199299440,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1590919078
    },
    {
        "content": "<p>it isn't?</p>",
        "id": 199299482,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1590919099
    },
    {
        "content": "<p>?</p>",
        "id": 199299489,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1590919132
    },
    {
        "content": "<p>if <code>z=0</code> then <code>inv 0 = \\&lt; re 0 / norm_sq 0, -im 0 / norm_sq 0 \\&gt; = \\&lt; 0 / 0, 0 / 0 \\&gt; = \\&lt; 0, 0 \\&gt; = 0</code></p>",
        "id": 199299497,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1590919154
    },
    {
        "content": "<p>where <code>0 / 0 = 0 * 0\\-1 = 0 * 0 = 0</code></p>",
        "id": 199299498,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1590919166
    },
    {
        "content": "<p>Ah, so you are saying that it has already been declared that also in <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"double-struck\">R</mi></mrow><annotation encoding=\"application/x-tex\">\\mathbb{R}</annotation></semantics></math></span><span aria-hidden=\"true\" class=\"katex-html\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68889em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord mathbb\">R</span></span></span></span></span> we have <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>a</mi><mi mathvariant=\"normal\">/</mi><mn>0</mn><mo>=</mo><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">a/0=0</annotation></semantics></math></span><span aria-hidden=\"true\" class=\"katex-html\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">a</span><span class=\"mord\">/</span><span class=\"mord\">0</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">0</span></span></span></span> for all <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>a</mi><mo>∈</mo><mi mathvariant=\"double-struck\">R</mi></mrow><annotation encoding=\"application/x-tex\">a\\in\\mathbb{R}</annotation></semantics></math></span><span aria-hidden=\"true\" class=\"katex-html\"><span class=\"base\"><span class=\"strut\" style=\"height:0.5782em;vertical-align:-0.0391em;\"></span><span class=\"mord mathdefault\">a</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">∈</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.68889em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord mathbb\">R</span></span></span></span></span> and therefore the definition makes sense for all <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>z</mi><mo>∈</mo><mi mathvariant=\"double-struck\">C</mi></mrow><annotation encoding=\"application/x-tex\">z\\in\\mathbb{C}</annotation></semantics></math></span><span aria-hidden=\"true\" class=\"katex-html\"><span class=\"base\"><span class=\"strut\" style=\"height:0.5782em;vertical-align:-0.0391em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.04398em;\">z</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">∈</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.68889em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord mathbb\">C</span></span></span></span></span>?</p>",
        "id": 199299545,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1590919210
    },
    {
        "content": "<p>yep</p>",
        "id": 199299548,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1590919216
    },
    {
        "content": "<p>Great! Thanks.</p>",
        "id": 199299549,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1590919222
    },
    {
        "content": "<p>It's a field \"axiom\"</p>",
        "id": 199299554,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1590919239
    },
    {
        "content": "<p>Ah, perfect. And we're applying it to the reals to deduce it for the complexes</p>",
        "id": 199299558,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1590919259
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"300245\">Filippo A. E. Nuccio</span> <a href=\"#narrow/stream/113489-new-members/topic/the.20complex.20number.20game/near/199299545\">said</a>:</p>\n<blockquote>\n<p>Ah, so you are saying that it has already been declared that also in <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"double-struck\">R</mi></mrow><annotation encoding=\"application/x-tex\">\\mathbb{R}</annotation></semantics></math></span><span aria-hidden=\"true\" class=\"katex-html\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68889em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord mathbb\">R</span></span></span></span></span> we have <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>a</mi><mi mathvariant=\"normal\">/</mi><mn>0</mn><mo>=</mo><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">a/0=0</annotation></semantics></math></span><span aria-hidden=\"true\" class=\"katex-html\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathdefault\">a</span><span class=\"mord\">/</span><span class=\"mord\">0</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">0</span></span></span></span> for all <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>a</mi><mo>∈</mo><mi mathvariant=\"double-struck\">R</mi></mrow><annotation encoding=\"application/x-tex\">a\\in\\mathbb{R}</annotation></semantics></math></span><span aria-hidden=\"true\" class=\"katex-html\"><span class=\"base\"><span class=\"strut\" style=\"height:0.5782em;vertical-align:-0.0391em;\"></span><span class=\"mord mathdefault\">a</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">∈</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.68889em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord mathbb\">R</span></span></span></span></span> and therefore the definition makes sense for all <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>z</mi><mo>∈</mo><mi mathvariant=\"double-struck\">C</mi></mrow><annotation encoding=\"application/x-tex\">z\\in\\mathbb{C}</annotation></semantics></math></span><span aria-hidden=\"true\" class=\"katex-html\"><span class=\"base\"><span class=\"strut\" style=\"height:0.5782em;vertical-align:-0.0391em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.04398em;\">z</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">∈</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.68889em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord mathbb\">C</span></span></span></span></span>?</p>\n</blockquote>\n<p>\"In Lean the axioms for a field contain this \"inverse\" map which is a map from K to K, defined by inv(0)=0 and then ...\", and the reals are already a field because I imported <code>data.real.basic</code> which shows this.</p>",
        "id": 199299807,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1590919710
    },
    {
        "content": "<p>Great, I was stupidly thinking that the \"field\" in the sentence was <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"double-struck\">C</mi></mrow><annotation encoding=\"application/x-tex\">\\mathbb{C}</annotation></semantics></math></span><span aria-hidden=\"true\" class=\"katex-html\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68889em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord mathbb\">C</span></span></span></span></span>, whereas it was both <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"double-struck\">R</mi></mrow><annotation encoding=\"application/x-tex\">\\mathbb{R}</annotation></semantics></math></span><span aria-hidden=\"true\" class=\"katex-html\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68889em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord mathbb\">R</span></span></span></span></span> and <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"double-struck\">C</mi></mrow><annotation encoding=\"application/x-tex\">\\mathbb{C}</annotation></semantics></math></span><span aria-hidden=\"true\" class=\"katex-html\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68889em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord mathbb\">C</span></span></span></span></span>...</p>",
        "id": 199299921,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1590919976
    },
    {
        "content": "<p><code>0\\inv = 0</code> is true not just in R or C,  it's true in any field, where a field is the sort of thing talked about on this page: <a href=\"https://en.wikipedia.org/wiki/Field_(mathematics)\">https://en.wikipedia.org/wiki/Field_(mathematics)</a></p>",
        "id": 199330542,
        "sender_full_name": "Jalex Stark",
        "timestamp": 1590976594
    },
    {
        "content": "<p>More precisely: <code>mathlib</code> formalizes fields and division rings so that <code>0⁻¹=0</code>. In math it is usually undefined.</p>",
        "id": 199330941,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1590977387
    },
    {
        "content": "<p>From the most recent version, it looks like <code>local attribute [simp] ext_iff </code> is on line 58 of Kevin's solution to level 01, but not in either of the user solution files. It's not obvious to me that I would need to add this, and makes some of his solutions break if you keep the given files structure. Was there thing I missed that mentioned having to add this yourself?</p>",
        "id": 199540023,
        "sender_full_name": "ROCKY KAMEN-RUBIO",
        "timestamp": 1591125475
    },
    {
        "content": "<p>I am in two minds about whether this is a good idea</p>",
        "id": 199540621,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1591125782
    },
    {
        "content": "<p>If you make it a simp lemma then some low level proofs are easier but people seemed to think that it was not a good global simp lemma</p>",
        "id": 199540690,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1591125836
    },
    {
        "content": "<p>Someone suggested that it was obfuscating the proofs</p>",
        "id": 199540774,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1591125863
    },
    {
        "content": "<p>It was also making trivial proofs shorter</p>",
        "id": 199540792,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1591125876
    },
    {
        "content": "<p>So either add it, or do ext; simp instead of simp</p>",
        "id": 199540862,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1591125923
    },
    {
        "content": "<p>oh ok, the earlier comments about this make more sense now.</p>",
        "id": 199549071,
        "sender_full_name": "ROCKY KAMEN-RUBIO",
        "timestamp": 1591129811
    },
    {
        "content": "<p>Extensionality is the principle that two things are equal if they're made from the same parts. The extensionality tactic can be used to replace a goal that two things are equal by goals saying the parts are equal. <code>complex.ext</code> is tagged with <code>@[ext]</code> to make the extensionality tactic use this lemma. But it only goes one way. If you have a hypothesis that two complex numbers are equal and you want to deduce that their real and imaginary parts are equal I don't think you can use the <code>ext</code> tactic, so that's why <code>ext_iff</code> is useful. I realised I was using it a lot though so I wanted to teach it to <code>simp</code>.</p>",
        "id": 199587008,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1591169283
    },
    {
        "content": "<p>If you have that two complex numbers are equal and want to know their real parts are equal, use <code>congr</code></p>",
        "id": 199587532,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1591169669
    }
]