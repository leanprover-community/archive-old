[
    {
        "content": "<p>How do I do something as trivial as proving set membership?</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"kn\">import</span> <span class=\"n\">data</span><span class=\"bp\">.</span><span class=\"n\">finset</span>\n\n<span class=\"n\">def</span> <span class=\"n\">x1</span> <span class=\"o\">:</span> <span class=\"n\">finset</span> <span class=\"bp\">ℕ</span> <span class=\"o\">:=</span> <span class=\"o\">{</span><span class=\"mi\">1</span><span class=\"o\">,</span><span class=\"mi\">2</span><span class=\"o\">,</span><span class=\"mi\">3</span><span class=\"o\">}</span>\n<span class=\"bp\">#</span><span class=\"n\">reduce</span> <span class=\"mi\">1</span> <span class=\"err\">∈</span> <span class=\"n\">x1</span>   <span class=\"c1\">--1 = 3 ∨ 1 = 2 ∨ 1 = 1 ∨ false</span>\n<span class=\"kn\">example</span> <span class=\"o\">:</span> <span class=\"mi\">1</span> <span class=\"err\">∈</span> <span class=\"n\">x1</span> <span class=\"o\">:=</span> <span class=\"n\">sorry</span>\n</code></pre></div>",
        "id": 197645788,
        "sender_full_name": "Brandon Brown",
        "timestamp": 1589514782
    },
    {
        "content": "<p>In this case you can use <code>dec_trivial</code>:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"kn\">import</span> <span class=\"n\">data</span><span class=\"bp\">.</span><span class=\"n\">finset</span>\n\n<span class=\"n\">def</span> <span class=\"n\">x1</span> <span class=\"o\">:</span> <span class=\"n\">finset</span> <span class=\"bp\">ℕ</span> <span class=\"o\">:=</span> <span class=\"o\">{</span><span class=\"mi\">1</span><span class=\"o\">,</span><span class=\"mi\">2</span><span class=\"o\">,</span><span class=\"mi\">3</span><span class=\"o\">}</span>\n<span class=\"bp\">#</span><span class=\"n\">reduce</span> <span class=\"mi\">1</span> <span class=\"err\">∈</span> <span class=\"n\">x1</span>   <span class=\"c1\">--1 = 3 ∨ 1 = 2 ∨ 1 = 1 ∨ false</span>\n<span class=\"kn\">example</span> <span class=\"o\">:</span> <span class=\"mi\">1</span> <span class=\"err\">∈</span> <span class=\"n\">x1</span> <span class=\"o\">:=</span> <span class=\"n\">dec_trivial</span>\n</code></pre></div>",
        "id": 197645957,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1589515022
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"243102\">@Brandon Brown</span> If you've got a very explicit set, like in your example, then it's <code>dec_trivial</code>, like Bryan said. If you have a set if the form <code>finset.range n</code> or <code>finset.filter foo bar</code>, then there will be lemmas <code>finset.mem_range</code> and <code>finset.mem_filter</code> etc... that help you proving this.</p>",
        "id": 197646023,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1589515115
    },
    {
        "content": "<p>Thanks!</p>",
        "id": 197646051,
        "sender_full_name": "Brandon Brown",
        "timestamp": 1589515176
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"243102\">Brandon Brown</span> <a href=\"#narrow/stream/113489-new-members/topic/Sets/near/197645788\">said</a>:</p>\n<blockquote>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"bp\">#</span><span class=\"n\">reduce</span> <span class=\"mi\">1</span> <span class=\"err\">∈</span> <span class=\"n\">x1</span>   <span class=\"c1\">--1 = 3 ∨ 1 = 2 ∨ 1 = 1 ∨ false</span>\n</code></pre></div>\n\n\n</blockquote>\n<p>Note that this is about to change to</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"bp\">#</span><span class=\"n\">reduce</span> <span class=\"mi\">1</span> <span class=\"err\">∈</span> <span class=\"n\">x1</span>   <span class=\"c1\">--1 = 1 ∨ 1 = 2 ∨ 1 = 3</span>\n</code></pre></div>\n\n\n<p>which I think is a big improvement (-;</p>",
        "id": 197646109,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1589515214
    },
    {
        "content": "<p>Also, if you don't like <code>dec_trivial</code>, you could use a combination of <code>or.inl</code>, <code>or.inr</code> and <code>rfl</code>.</p>",
        "id": 197646136,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1589515265
    },
    {
        "content": "<p>This reminds me a lot of <a href=\"#narrow/stream/113489-new-members/topic/proof.20of.20something.20that.20.23eval.20.2F.20.23reduce.20computes\">one of my early threads here</a>.</p>",
        "id": 197646205,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1589515351
    },
    {
        "content": "<p>I have a more basic question. I understand constructions of the form</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"kn\">variables</span> <span class=\"o\">(</span><span class=\"n\">p</span> <span class=\"n\">q</span> <span class=\"o\">:</span> <span class=\"kt\">Prop</span><span class=\"o\">)</span>\n<span class=\"kn\">example</span> <span class=\"o\">(</span><span class=\"n\">h</span> <span class=\"o\">:</span> <span class=\"n\">p</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"n\">p</span> <span class=\"bp\">∨</span> <span class=\"n\">q</span> <span class=\"o\">:=</span> <span class=\"n\">or</span><span class=\"bp\">.</span><span class=\"n\">inl</span> <span class=\"n\">h</span>\n</code></pre></div>\n\n\n<p>Because I'm injecting h</p>",
        "id": 197646822,
        "sender_full_name": "Brandon Brown",
        "timestamp": 1589516258
    },
    {
        "content": "<p>But I don't really understand what's going on under the hood with</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"kn\">example</span> <span class=\"o\">:</span> <span class=\"o\">(</span><span class=\"mi\">1</span> <span class=\"bp\">=</span> <span class=\"mi\">1</span><span class=\"o\">)</span> <span class=\"bp\">∨</span> <span class=\"n\">false</span> <span class=\"o\">:=</span> <span class=\"n\">or</span><span class=\"bp\">.</span><span class=\"n\">inl</span> <span class=\"o\">(</span><span class=\"n\">rfl</span><span class=\"o\">)</span>\n</code></pre></div>",
        "id": 197646869,
        "sender_full_name": "Brandon Brown",
        "timestamp": 1589516289
    },
    {
        "content": "<p><code>or.inl _</code> would expect a proof of <code>1 = 1</code> at the location of the <code>_</code></p>",
        "id": 197646881,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1589516314
    },
    {
        "content": "<p>Well, you need to inject a proof of <code>1 = 1</code></p>",
        "id": 197646882,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1589516314
    },
    {
        "content": "<p>Let <code>p := 1=1</code>, <code>q := false</code> and <code>h := rfl</code>.</p>",
        "id": 197646889,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1589516328
    },
    {
        "content": "<p>and <code>rfl</code> is a proof of <code>1 = 1</code></p>",
        "id": 197646890,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1589516329
    },
    {
        "content": "<p>Ahh right I see</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"kn\">variable</span> <span class=\"n\">p</span> <span class=\"o\">:</span> <span class=\"o\">(</span><span class=\"mi\">1</span> <span class=\"bp\">=</span> <span class=\"mi\">1</span><span class=\"o\">)</span>\n<span class=\"kn\">example</span> <span class=\"o\">:</span> <span class=\"o\">(</span><span class=\"mi\">1</span> <span class=\"bp\">=</span> <span class=\"mi\">1</span><span class=\"o\">)</span> <span class=\"bp\">∨</span> <span class=\"n\">false</span> <span class=\"o\">:=</span> <span class=\"n\">or</span><span class=\"bp\">.</span><span class=\"n\">inl</span> <span class=\"n\">p</span>\n</code></pre></div>\n\n\n<p>So using rfl is inferring this since what else could it be</p>",
        "id": 197647072,
        "sender_full_name": "Brandon Brown",
        "timestamp": 1589516574
    },
    {
        "content": "<p><code>rfl</code> is short for <code>eq.refl _</code></p>",
        "id": 197647079,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1589516594
    },
    {
        "content": "<p>rfl is a smart kid (-;</p>",
        "id": 197647080,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1589516595
    },
    {
        "content": "<p><code>refl</code> is a powerful tactic!</p>",
        "id": 197650843,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1589522346
    },
    {
        "content": "<p>the correct way, much as I hate it, is <code>by simp</code>:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"kn\">import</span> <span class=\"n\">data</span><span class=\"bp\">.</span><span class=\"n\">finset</span>\n\n<span class=\"n\">def</span> <span class=\"n\">x1</span> <span class=\"o\">:</span> <span class=\"n\">finset</span> <span class=\"bp\">ℕ</span> <span class=\"o\">:=</span> <span class=\"o\">{</span><span class=\"mi\">1</span><span class=\"o\">,</span><span class=\"mi\">2</span><span class=\"o\">,</span><span class=\"mi\">3</span><span class=\"o\">}</span>\n<span class=\"kn\">example</span> <span class=\"o\">:</span> <span class=\"mi\">1</span> <span class=\"err\">∈</span> <span class=\"n\">x1</span> <span class=\"o\">:=</span> <span class=\"k\">by</span> <span class=\"n\">simp</span> <span class=\"o\">[</span><span class=\"n\">x1</span><span class=\"o\">]</span>\n\n<span class=\"kn\">variables</span> <span class=\"o\">{</span><span class=\"n\">α</span> <span class=\"o\">:</span> <span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span> <span class=\"o\">[</span><span class=\"n\">has_one</span> <span class=\"n\">α</span><span class=\"o\">]</span> <span class=\"o\">[</span><span class=\"n\">has_add</span> <span class=\"n\">α</span><span class=\"o\">]</span> <span class=\"o\">[</span><span class=\"n\">decidable_eq</span> <span class=\"n\">α</span><span class=\"o\">]</span>\n<span class=\"n\">def</span> <span class=\"n\">x2</span> <span class=\"o\">:</span> <span class=\"n\">finset</span> <span class=\"n\">α</span> <span class=\"o\">:=</span> <span class=\"o\">{</span><span class=\"mi\">1</span><span class=\"o\">,</span><span class=\"mi\">2</span><span class=\"o\">,</span><span class=\"mi\">3</span><span class=\"o\">}</span>\n<span class=\"kn\">example</span> <span class=\"o\">:</span> <span class=\"o\">(</span><span class=\"mi\">1</span> <span class=\"o\">:</span> <span class=\"n\">α</span><span class=\"o\">)</span> <span class=\"err\">∈</span> <span class=\"o\">(</span><span class=\"n\">x2</span> <span class=\"o\">:</span> <span class=\"n\">finset</span> <span class=\"n\">α</span><span class=\"o\">)</span> <span class=\"o\">:=</span> <span class=\"n\">dec_trivial</span> <span class=\"c1\">-- fails</span>\n<span class=\"kn\">example</span> <span class=\"o\">:</span> <span class=\"o\">(</span><span class=\"mi\">1</span> <span class=\"o\">:</span> <span class=\"n\">α</span><span class=\"o\">)</span> <span class=\"err\">∈</span> <span class=\"o\">(</span><span class=\"n\">x2</span> <span class=\"o\">:</span> <span class=\"n\">finset</span> <span class=\"n\">α</span><span class=\"o\">)</span> <span class=\"o\">:=</span> <span class=\"k\">by</span> <span class=\"n\">simp</span> <span class=\"o\">[</span><span class=\"n\">x2</span><span class=\"o\">]</span> <span class=\"c1\">-- works</span>\n</code></pre></div>",
        "id": 197653464,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1589525657
    },
    {
        "content": "<p>the last line is equivalent to <code>simp only [x2, eq_self_iff_true, or_true, finset.mem_insert, finset.mem_singleton, finset.singleton_eq_singleton]</code></p>",
        "id": 197653671,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1589525894
    },
    {
        "content": "<p>(thanks, <code>squeeze_simp</code>)</p>",
        "id": 197653679,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1589525903
    },
    {
        "content": "<p>That's surprising to me. Are there some missing decidability instances somewhere?</p>",
        "id": 197653881,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1589526090
    },
    {
        "content": "<p>no, it's just that asserting <code>\\a</code> has decidable_eq does not actually give an algorithm to decide whether two terms of <code>\\a</code> are equal</p>",
        "id": 197654036,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1589526210
    },
    {
        "content": "<p>if <code>\\a</code> is anything concrete (like <code>\\N</code>) then it will work</p>",
        "id": 197654045,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1589526227
    },
    {
        "content": "<p>Oh, right. The type class is a <code>variable</code> so there's no actual definition.</p>",
        "id": 197654333,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1589526477
    },
    {
        "content": "<p>yeah that also confused me for a while :P</p>",
        "id": 197655263,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1589527199
    },
    {
        "content": "<p>Hi, First, please excuse my private message if you received one from me, I didn't know how to begin and someone comprehensive told me to post in new members : I am completely new in Lean proving. I need help to define sets, to formalize in Lean a simple proof yet written mathematically (by others than me). Could you help me to do that. I put the definition of sets here : <a href=\"http://denise.vella.chemla.free.fr/defsets.png\">http://denise.vella.chemla.free.fr/defsets.png</a> and the failure of my definition of sets here <a href=\"http://denise.vella.chemla.free.fr/ratage1.png\">http://denise.vella.chemla.free.fr/ratage1.png</a> Thank you for your help. The proof to be tested in Lean is here <a href=\"http://denise.vella.chemla.free.fr/jade1.pdf\">http://denise.vella.chemla.free.fr/jade1.pdf</a></p>\n<div class=\"message_inline_image\"><a href=\"http://denise.vella.chemla.free.fr/defsets.png\"><img src=\"https://uploads.zulipusercontent.net/6885207d23ee6f7197e32c65cbe0026222afa571/687474703a2f2f64656e6973652e76656c6c612e6368656d6c612e667265652e66722f646566736574732e706e67\"></a></div><div class=\"message_inline_image\"><a href=\"http://denise.vella.chemla.free.fr/ratage1.png\"><img src=\"https://uploads.zulipusercontent.net/89f0960fa15cfabd0d263bbe24027f101254009a/687474703a2f2f64656e6973652e76656c6c612e6368656d6c612e667265652e66722f726174616765312e706e67\"></a></div>",
        "id": 283869921,
        "sender_full_name": "Chemla",
        "timestamp": 1653478348
    },
    {
        "content": "<p>Hi, thanks for moving your posts here; Zulip can be confusing if you're new!</p>\n<p>Would you be able to produce a <a href=\"https://leanprover-community.github.io/mwe.html\">#mwe</a> showing what you have so far? There look to be lots of errors in that screenshot, and it's not clear which one you're asking about. You can post code on Zulip in <a href=\"https://github.com/leanprover-community/mathlib/wiki/Code-in-backticks\">#backticks</a> so that we can copy-paste it to try to help you.</p>",
        "id": 283870300,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1653478634
    },
    {
        "content": "<p>Thank you for answering. Until line 72, that's all things I copied from the tutorial I believed I would need (modulo for integers, and logical and found somewhere). As I don't know how to make a <a href=\"https://leanprover-community.github.io/mwe.html\">#mwe</a>, I put my code here <a href=\"http://denise.vella.chemla.free.fr/tentecglean1.lean\">http://denise.vella.chemla.free.fr/tentecglean1.lean</a></p>",
        "id": 283872310,
        "sender_full_name": "Chemla",
        "timestamp": 1653479963
    },
    {
        "content": "<p>OK, here it is (only from 72 and seq.) :<br>\ndef Fp (n : nat, p : nat) : nat :=<br>\nbegin<br>\n  intro m, </p>\n<p>have (mod_equiv 2 m 1) ∧ (3 ≤ m ≤ n/2) <br>\n  ∧ (not mod_equiv p m 0) ∧ (not mod_equiv p m n)<br>\nend</p>\n<p>def D (n : nat) : nat :=<br>\n  intro m, </p>\n<p>have (∀ p, <a href=\"http://nat.prime\">nat.prime</a> p, 3 ≤ p ≤ sqrt(n)) ∧ (m in Fp(n,p))</p>\n<p>lemma lem1 :  ∀ m, ((mod_equiv 2 m 1) ∧ <br>\n                    ((∀ p, (p : nat, p ≤ sqrt(n) ∧ <a href=\"http://nat.prime\">nat.prime</a> p <br>\n                           implies not mod_equiv p n 0))) <br>\n                                  implies <a href=\"http://nat.prime\">nat.prime</a> m := <br>\nbegin<br>\n  sorry ;<br>\nend</p>\n<p>lemma lem2 : ∀x, x in D(n) := <a href=\"http://nat.prime\">nat.prime</a> x<br>\nbegin<br>\n  sorry ;<br>\nend</p>\n<p>lemma lem3 : ∀x, n-x in D(n) := <a href=\"http://nat.prime\">nat.prime</a> x<br>\nbegin<br>\n  sorry ;<br>\nend</p>\n<p>lemma lem4 : intro n, mod_equiv 2 n 0, n ≥ 6, D(n) != emptyset implies <br>\n   exists p, exists q, <a href=\"http://nat.prime\">nat.prime</a> p, <a href=\"http://nat.prime\">nat.prime</a> q, n = p+q<br>\nbegin<br>\n  sorry ;<br>\nend</p>",
        "id": 283872488,
        "sender_full_name": "Chemla",
        "timestamp": 1653480039
    },
    {
        "content": "<p>Can you read <a href=\"https://github.com/leanprover-community/mathlib/wiki/Code-in-backticks\">#backticks</a> and edit your post accordingly?</p>",
        "id": 283875765,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1653482139
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"224188\">Chemla</span> <a href=\"#narrow/stream/113489-new-members/topic/Sets/near/283872310\">said</a>:</p>\n<blockquote>\n<p>As I don't know how to make a <a href=\"https://leanprover-community.github.io/mwe.html\">#mwe</a>, I put my code here <a href=\"http://denise.vella.chemla.free.fr/tentecglean1.lean\">http://denise.vella.chemla.free.fr/tentecglean1.lean</a></p>\n</blockquote>\n<p>Unfortunately your webserver is not configured to send <code>.lean</code> files as <code>charset=utf-8</code>, so that file is hard to read in a browser.</p>",
        "id": 283876170,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1653482352
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span> <a href=\"#narrow/stream/113489-new-members/topic/Sets/near/283876170\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"224188\">Chemla</span> <a href=\"#narrow/stream/113489-new-members/topic/Sets/near/283872310\">said</a>:</p>\n<blockquote>\n<p>As I don't know how to make a <a href=\"https://leanprover-community.github.io/mwe.html\">#mwe</a>, I put my code here <a href=\"http://denise.vella.chemla.free.fr/tentecglean1.lean\">http://denise.vella.chemla.free.fr/tentecglean1.lean</a></p>\n</blockquote>\n<p>Unfortunately your webserver is not configured to send <code>.lean</code> files as <code>charset=utf-8</code>, so that file is hard to read in a browser.</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kn\">import</span> <span class=\"n\">data.int.basic</span>\n<span class=\"kn\">import</span> <span class=\"n\">data.nat.prime</span>\n<span class=\"kn\">import</span> <span class=\"n\">tactic.linarith</span>\n\n<span class=\"kn\">open</span> <span class=\"n\">nat</span>\n\n<span class=\"kn\">namespace</span> <span class=\"n\">int</span>\n\n<span class=\"kd\">def</span> <span class=\"n\">dvd</span> <span class=\"o\">(</span><span class=\"n\">m</span> <span class=\"n\">n</span> <span class=\"o\">:</span> <span class=\"n\">ℤ</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"kt\">Prop</span> <span class=\"o\">:=</span> <span class=\"bp\">∃</span> <span class=\"n\">k</span><span class=\"o\">,</span> <span class=\"n\">n</span> <span class=\"bp\">=</span> <span class=\"n\">m</span> <span class=\"bp\">*</span> <span class=\"n\">k</span>\n<span class=\"kd\">instance</span> <span class=\"o\">:</span> <span class=\"n\">has_dvd</span> <span class=\"n\">int</span> <span class=\"o\">:=</span> <span class=\"o\">⟨</span><span class=\"n\">int.dvd</span><span class=\"o\">⟩</span>\n\n<span class=\"kd\">@[simp]</span>\n<span class=\"kd\">theorem</span> <span class=\"n\">dvd_zero</span> <span class=\"o\">(</span><span class=\"n\">n</span> <span class=\"o\">:</span> <span class=\"n\">ℤ</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"n\">n</span> <span class=\"bp\">∣</span> <span class=\"mi\">0</span> <span class=\"o\">:=</span>\n<span class=\"o\">⟨</span><span class=\"mi\">0</span><span class=\"o\">,</span> <span class=\"kd\">by</span> <span class=\"n\">simp</span><span class=\"o\">⟩</span>\n\n<span class=\"kd\">theorem</span> <span class=\"n\">dvd_intro</span> <span class=\"o\">{</span><span class=\"n\">m</span> <span class=\"n\">n</span> <span class=\"o\">:</span> <span class=\"n\">ℤ</span><span class=\"o\">}</span> <span class=\"o\">(</span><span class=\"n\">k</span> <span class=\"o\">:</span> <span class=\"n\">ℤ</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">h</span> <span class=\"o\">:</span> <span class=\"n\">n</span> <span class=\"bp\">=</span> <span class=\"n\">m</span> <span class=\"bp\">*</span> <span class=\"n\">k</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"n\">m</span> <span class=\"bp\">∣</span> <span class=\"n\">n</span> <span class=\"o\">:=</span>\n<span class=\"o\">⟨</span><span class=\"n\">k</span><span class=\"o\">,</span> <span class=\"n\">h</span><span class=\"o\">⟩</span>\n\n<span class=\"kd\">end</span> <span class=\"n\">int</span>\n\n<span class=\"kn\">open</span> <span class=\"n\">int</span>\n\n<span class=\"kn\">section</span> <span class=\"n\">mod_m</span>\n<span class=\"kd\">parameter</span> <span class=\"o\">(</span><span class=\"n\">m</span> <span class=\"o\">:</span> <span class=\"n\">ℤ</span><span class=\"o\">)</span>\n<span class=\"kd\">variables</span> <span class=\"o\">(</span><span class=\"n\">a</span> <span class=\"n\">b</span> <span class=\"n\">c</span> <span class=\"o\">:</span> <span class=\"n\">ℤ</span><span class=\"o\">)</span>\n\n<span class=\"kd\">definition</span> <span class=\"n\">mod_equiv</span> <span class=\"o\">(</span><span class=\"n\">m</span> <span class=\"n\">a</span> <span class=\"n\">b</span> <span class=\"o\">:</span> <span class=\"n\">ℤ</span><span class=\"o\">)</span> <span class=\"o\">:=</span> <span class=\"o\">(</span><span class=\"n\">m</span> <span class=\"bp\">∣</span> <span class=\"n\">b</span> <span class=\"bp\">-</span> <span class=\"n\">a</span><span class=\"o\">)</span>\n\n<span class=\"kd\">theorem</span> <span class=\"n\">mod_refl</span> <span class=\"o\">:</span> <span class=\"n\">mod_equiv</span> <span class=\"n\">m</span> <span class=\"n\">a</span> <span class=\"n\">a</span> <span class=\"o\">:=</span>\n<span class=\"k\">show</span> <span class=\"n\">m</span> <span class=\"bp\">∣</span> <span class=\"n\">a</span> <span class=\"bp\">-</span> <span class=\"n\">a</span><span class=\"o\">,</span> <span class=\"kd\">by</span> <span class=\"n\">simp</span>\n\n<span class=\"kd\">theorem</span> <span class=\"n\">mod_symm</span> <span class=\"o\">(</span><span class=\"n\">h</span> <span class=\"o\">:</span> <span class=\"n\">mod_equiv</span> <span class=\"n\">m</span> <span class=\"n\">a</span> <span class=\"n\">b</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"n\">mod_equiv</span> <span class=\"n\">m</span> <span class=\"n\">b</span> <span class=\"n\">a</span> <span class=\"o\">:=</span>\n<span class=\"kd\">by</span> <span class=\"n\">cases</span> <span class=\"n\">h</span> <span class=\"k\">with</span> <span class=\"n\">c</span> <span class=\"n\">hc</span><span class=\"bp\">;</span> <span class=\"n\">apply</span> <span class=\"n\">dvd_intro</span> <span class=\"o\">(</span><span class=\"bp\">-</span><span class=\"n\">c</span><span class=\"o\">)</span><span class=\"bp\">;</span> <span class=\"n\">simp</span> <span class=\"o\">[</span><span class=\"n\">eq.symm</span> <span class=\"n\">hc</span><span class=\"o\">]</span>\n\n<span class=\"kn\">local</span> <span class=\"kn\">attribute</span> <span class=\"o\">[</span><span class=\"n\">simp</span><span class=\"o\">]</span> <span class=\"n\">add_assoc</span> <span class=\"n\">add_comm</span> <span class=\"n\">add_left_comm</span>\n\n<span class=\"kd\">theorem</span> <span class=\"n\">mod_trans</span> <span class=\"o\">(</span><span class=\"n\">h₁</span> <span class=\"o\">:</span> <span class=\"n\">mod_equiv</span> <span class=\"n\">m</span> <span class=\"n\">a</span> <span class=\"n\">b</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">h₂</span> <span class=\"o\">:</span> <span class=\"n\">mod_equiv</span> <span class=\"n\">m</span> <span class=\"n\">b</span> <span class=\"n\">c</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"n\">mod_equiv</span> <span class=\"n\">m</span> <span class=\"n\">a</span> <span class=\"n\">c</span> <span class=\"o\">:=</span>\n<span class=\"kd\">begin</span>\n  <span class=\"n\">cases</span> <span class=\"n\">h₁</span> <span class=\"k\">with</span> <span class=\"n\">d</span> <span class=\"n\">hd</span><span class=\"o\">,</span> <span class=\"n\">cases</span> <span class=\"n\">h₂</span> <span class=\"k\">with</span> <span class=\"n\">e</span> <span class=\"n\">he</span><span class=\"o\">,</span>\n  <span class=\"n\">apply</span> <span class=\"n\">dvd_intro</span> <span class=\"o\">(</span><span class=\"n\">d</span> <span class=\"bp\">+</span> <span class=\"n\">e</span><span class=\"o\">),</span>\n  <span class=\"n\">simp</span> <span class=\"o\">[</span><span class=\"n\">mul_add</span><span class=\"o\">,</span> <span class=\"n\">eq.symm</span> <span class=\"n\">hd</span><span class=\"o\">,</span> <span class=\"n\">eq.symm</span> <span class=\"n\">he</span><span class=\"o\">,</span> <span class=\"n\">sub_eq_add_neg</span><span class=\"o\">]</span>\n<span class=\"kd\">end</span>\n<span class=\"kd\">end</span> <span class=\"n\">mod_m</span>\n\n<span class=\"k\">#check</span> <span class=\"o\">(</span><span class=\"n\">mod_refl</span> <span class=\"o\">:</span> <span class=\"bp\">∀</span> <span class=\"n\">m</span> <span class=\"o\">:</span> <span class=\"n\">ℤ</span><span class=\"o\">,</span> <span class=\"bp\">∀</span> <span class=\"n\">a</span> <span class=\"o\">:</span> <span class=\"n\">ℤ</span><span class=\"o\">,</span> <span class=\"n\">mod_equiv</span> <span class=\"n\">m</span> <span class=\"n\">a</span> <span class=\"n\">a</span><span class=\"o\">)</span>\n\n<span class=\"k\">#check</span> <span class=\"o\">(</span><span class=\"n\">mod_symm</span> <span class=\"o\">:</span> <span class=\"bp\">∀</span> <span class=\"n\">m</span> <span class=\"o\">:</span> <span class=\"n\">ℤ</span><span class=\"o\">,</span> <span class=\"bp\">∀</span> <span class=\"n\">a</span> <span class=\"o\">:</span> <span class=\"n\">ℤ</span><span class=\"o\">,</span> <span class=\"bp\">∀</span> <span class=\"n\">b</span> <span class=\"o\">:</span> <span class=\"n\">ℤ</span><span class=\"o\">,</span> <span class=\"n\">mod_equiv</span> <span class=\"n\">m</span> <span class=\"n\">a</span> <span class=\"n\">b</span> <span class=\"bp\">→</span> <span class=\"n\">mod_equiv</span> <span class=\"n\">m</span> <span class=\"n\">b</span> <span class=\"n\">a</span><span class=\"o\">)</span>\n\n<span class=\"k\">#check</span> <span class=\"o\">(</span><span class=\"n\">mod_trans</span> <span class=\"o\">:</span>  <span class=\"bp\">∀</span> <span class=\"n\">m</span> <span class=\"o\">:</span> <span class=\"n\">ℤ</span><span class=\"o\">,</span> <span class=\"bp\">∀</span> <span class=\"n\">a</span> <span class=\"o\">:</span> <span class=\"n\">ℤ</span><span class=\"o\">,</span> <span class=\"bp\">∀</span> <span class=\"n\">b</span> <span class=\"o\">:</span> <span class=\"n\">ℤ</span><span class=\"o\">,</span> <span class=\"bp\">∀</span> <span class=\"n\">c</span> <span class=\"o\">:</span> <span class=\"n\">ℤ</span><span class=\"o\">,</span>\n   <span class=\"n\">mod_equiv</span> <span class=\"n\">m</span> <span class=\"n\">a</span> <span class=\"n\">b</span> <span class=\"bp\">→</span> <span class=\"n\">mod_equiv</span> <span class=\"n\">m</span> <span class=\"n\">b</span> <span class=\"n\">c</span> <span class=\"bp\">→</span> <span class=\"n\">mod_equiv</span> <span class=\"n\">m</span> <span class=\"n\">a</span> <span class=\"n\">c</span><span class=\"o\">)</span>\n\n<span class=\"kd\">theorem</span> <span class=\"n\">and_commutative</span> <span class=\"o\">(</span><span class=\"n\">p</span> <span class=\"n\">q</span> <span class=\"o\">:</span> <span class=\"kt\">Prop</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"n\">p</span> <span class=\"bp\">∧</span> <span class=\"n\">q</span> <span class=\"bp\">→</span> <span class=\"n\">q</span> <span class=\"bp\">∧</span> <span class=\"n\">p</span> <span class=\"o\">:=</span>\n<span class=\"k\">assume</span> <span class=\"n\">hpq</span> <span class=\"o\">:</span> <span class=\"n\">p</span> <span class=\"bp\">∧</span> <span class=\"n\">q</span><span class=\"o\">,</span>\n<span class=\"k\">have</span> <span class=\"n\">hp</span> <span class=\"o\">:</span> <span class=\"n\">p</span><span class=\"o\">,</span> <span class=\"k\">from</span> <span class=\"n\">and.left</span> <span class=\"n\">hpq</span><span class=\"o\">,</span>\n<span class=\"k\">have</span> <span class=\"n\">hq</span> <span class=\"o\">:</span> <span class=\"n\">q</span><span class=\"o\">,</span> <span class=\"k\">from</span> <span class=\"n\">and.right</span> <span class=\"n\">hpq</span><span class=\"o\">,</span>\n<span class=\"k\">show</span> <span class=\"n\">q</span> <span class=\"bp\">∧</span> <span class=\"n\">p</span><span class=\"o\">,</span> <span class=\"k\">from</span> <span class=\"n\">and.intro</span> <span class=\"n\">hq</span> <span class=\"n\">hp</span>\n\n<span class=\"kd\">def</span> <span class=\"n\">double</span> <span class=\"o\">(</span><span class=\"n\">x</span> <span class=\"o\">:</span> <span class=\"n\">ℕ</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"n\">ℕ</span> <span class=\"o\">:=</span> <span class=\"n\">x</span> <span class=\"bp\">+</span> <span class=\"n\">x</span>\n<span class=\"k\">#print</span> <span class=\"n\">double</span>\n<span class=\"k\">#check</span> <span class=\"n\">double</span> <span class=\"mi\">3</span>\n<span class=\"k\">#reduce</span> <span class=\"n\">double</span> <span class=\"mi\">3</span>    <span class=\"c1\">-- 6</span>\n\n<span class=\"kd\">def</span> <span class=\"n\">square</span> <span class=\"o\">(</span><span class=\"n\">x</span> <span class=\"o\">:</span> <span class=\"n\">ℕ</span><span class=\"o\">)</span> <span class=\"o\">:=</span> <span class=\"n\">x</span> <span class=\"bp\">*</span> <span class=\"n\">x</span>\n<span class=\"k\">#print</span> <span class=\"n\">square</span>\n<span class=\"k\">#check</span> <span class=\"n\">square</span> <span class=\"mi\">3</span>\n<span class=\"k\">#reduce</span> <span class=\"n\">square</span> <span class=\"mi\">3</span>    <span class=\"c1\">-- 9</span>\n\n<span class=\"kd\">def</span> <span class=\"n\">do_twice</span> <span class=\"o\">(</span><span class=\"n\">f</span> <span class=\"o\">:</span> <span class=\"n\">ℕ</span> <span class=\"bp\">→</span> <span class=\"n\">ℕ</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">x</span> <span class=\"o\">:</span> <span class=\"n\">ℕ</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"n\">ℕ</span> <span class=\"o\">:=</span> <span class=\"n\">f</span> <span class=\"o\">(</span><span class=\"n\">f</span> <span class=\"n\">x</span><span class=\"o\">)</span>\n\n<span class=\"k\">#reduce</span> <span class=\"n\">do_twice</span> <span class=\"n\">double</span> <span class=\"mi\">2</span>    <span class=\"c1\">-- 8</span>\n\n<span class=\"kd\">def</span> <span class=\"n\">Fp</span> <span class=\"o\">(</span><span class=\"n\">n</span> <span class=\"o\">:</span> <span class=\"n\">nat</span><span class=\"o\">,</span> <span class=\"n\">p</span> <span class=\"o\">:</span> <span class=\"n\">nat</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"n\">nat</span> <span class=\"o\">:=</span>\n<span class=\"kd\">begin</span>\n  <span class=\"n\">intro</span> <span class=\"n\">m</span><span class=\"o\">,</span>\n\n  <span class=\"k\">have</span> <span class=\"o\">(</span><span class=\"n\">mod_equiv</span> <span class=\"mi\">2</span> <span class=\"n\">m</span> <span class=\"mi\">1</span><span class=\"o\">)</span> <span class=\"bp\">∧</span> <span class=\"o\">(</span><span class=\"mi\">3</span> <span class=\"bp\">≤</span> <span class=\"n\">m</span> <span class=\"bp\">≤</span> <span class=\"n\">n</span><span class=\"bp\">/</span><span class=\"mi\">2</span><span class=\"o\">)</span>\n  <span class=\"bp\">∧</span> <span class=\"o\">(</span><span class=\"n\">not</span> <span class=\"n\">mod_equiv</span> <span class=\"n\">p</span> <span class=\"n\">m</span> <span class=\"mi\">0</span><span class=\"o\">)</span> <span class=\"bp\">∧</span> <span class=\"o\">(</span><span class=\"n\">not</span> <span class=\"n\">mod_equiv</span> <span class=\"n\">p</span> <span class=\"n\">m</span> <span class=\"n\">n</span><span class=\"o\">)</span>\n<span class=\"kd\">end</span>\n\n<span class=\"kd\">def</span> <span class=\"n\">D</span> <span class=\"o\">(</span><span class=\"n\">n</span> <span class=\"o\">:</span> <span class=\"n\">nat</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"n\">nat</span> <span class=\"o\">:=</span>\n  <span class=\"n\">intro</span> <span class=\"n\">m</span><span class=\"o\">,</span>\n\n  <span class=\"k\">have</span> <span class=\"o\">(</span><span class=\"bp\">∀</span> <span class=\"n\">p</span><span class=\"o\">,</span> <span class=\"n\">nat.prime</span> <span class=\"n\">p</span><span class=\"o\">,</span> <span class=\"mi\">3</span> <span class=\"bp\">≤</span> <span class=\"n\">p</span> <span class=\"bp\">≤</span> <span class=\"n\">sqrt</span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"o\">))</span> <span class=\"bp\">∧</span> <span class=\"o\">(</span><span class=\"n\">m</span> <span class=\"k\">in</span> <span class=\"n\">Fp</span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"o\">,</span><span class=\"n\">p</span><span class=\"o\">))</span>\n\n<span class=\"kd\">lemma</span> <span class=\"n\">lem1</span> <span class=\"o\">:</span>  <span class=\"bp\">∀</span> <span class=\"n\">m</span><span class=\"o\">,</span> <span class=\"o\">((</span><span class=\"n\">mod_equiv</span> <span class=\"mi\">2</span> <span class=\"n\">m</span> <span class=\"mi\">1</span><span class=\"o\">)</span> <span class=\"bp\">∧</span>\n                    <span class=\"o\">((</span><span class=\"bp\">∀</span> <span class=\"n\">p</span><span class=\"o\">,</span> <span class=\"o\">(</span><span class=\"n\">p</span> <span class=\"o\">:</span> <span class=\"n\">nat</span><span class=\"o\">,</span> <span class=\"n\">p</span> <span class=\"bp\">≤</span> <span class=\"n\">sqrt</span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"o\">)</span> <span class=\"bp\">∧</span> <span class=\"n\">nat.prime</span> <span class=\"n\">p</span>\n                           <span class=\"n\">implies</span> <span class=\"n\">not</span> <span class=\"n\">mod_equiv</span> <span class=\"n\">p</span> <span class=\"n\">n</span> <span class=\"mi\">0</span><span class=\"o\">)))</span>\n                                  <span class=\"n\">implies</span> <span class=\"n\">nat.prime</span> <span class=\"n\">m</span> <span class=\"o\">:=</span>\n<span class=\"kd\">begin</span>\n  <span class=\"gr\">sorry</span> <span class=\"bp\">;</span>\n<span class=\"kd\">end</span>\n\n<span class=\"kd\">lemma</span> <span class=\"n\">lem2</span> <span class=\"o\">:</span> <span class=\"bp\">∀</span><span class=\"n\">x</span><span class=\"o\">,</span> <span class=\"n\">x</span> <span class=\"k\">in</span> <span class=\"n\">D</span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"o\">)</span> <span class=\"o\">:=</span> <span class=\"n\">nat.prime</span> <span class=\"n\">x</span>\n<span class=\"kd\">begin</span>\n  <span class=\"gr\">sorry</span> <span class=\"bp\">;</span>\n<span class=\"kd\">end</span>\n\n<span class=\"kd\">lemma</span> <span class=\"n\">lem3</span> <span class=\"o\">:</span> <span class=\"bp\">∀</span><span class=\"n\">x</span><span class=\"o\">,</span> <span class=\"n\">n</span><span class=\"bp\">-</span><span class=\"n\">x</span> <span class=\"k\">in</span> <span class=\"n\">D</span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"o\">)</span> <span class=\"o\">:=</span> <span class=\"n\">nat.prime</span> <span class=\"n\">x</span>\n<span class=\"kd\">begin</span>\n  <span class=\"gr\">sorry</span> <span class=\"bp\">;</span>\n<span class=\"kd\">end</span>\n\n<span class=\"kd\">lemma</span> <span class=\"n\">lem4</span> <span class=\"o\">:</span> <span class=\"n\">intro</span> <span class=\"n\">n</span><span class=\"o\">,</span> <span class=\"n\">mod_equiv</span> <span class=\"mi\">2</span> <span class=\"n\">n</span> <span class=\"mi\">0</span><span class=\"o\">,</span> <span class=\"n\">n</span> <span class=\"bp\">≥</span> <span class=\"mi\">6</span><span class=\"o\">,</span> <span class=\"n\">D</span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"o\">)</span> <span class=\"bp\">!=</span> <span class=\"n\">emptyset</span> <span class=\"n\">implies</span>\n   <span class=\"n\">exists</span> <span class=\"n\">p</span><span class=\"o\">,</span> <span class=\"n\">exists</span> <span class=\"n\">q</span><span class=\"o\">,</span> <span class=\"n\">nat.prime</span> <span class=\"n\">p</span><span class=\"o\">,</span> <span class=\"n\">nat.prime</span> <span class=\"n\">q</span><span class=\"o\">,</span> <span class=\"n\">n</span> <span class=\"bp\">=</span> <span class=\"n\">p</span><span class=\"bp\">+</span><span class=\"n\">q</span>\n<span class=\"kd\">begin</span>\n  <span class=\"gr\">sorry</span> <span class=\"bp\">;</span>\n<span class=\"kd\">end</span>\n</code></pre></div>\n</blockquote>",
        "id": 283883431,
        "sender_full_name": "Chemla",
        "timestamp": 1653485869
    },
    {
        "content": "<p>Note you can edit your previous message rather than posting a new one</p>",
        "id": 283884806,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1653486487
    },
    {
        "content": "<p>Regarding your actual question: lean is telling you that this is a syntax error on line 72</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kd\">def</span> <span class=\"n\">Fp</span> <span class=\"o\">(</span><span class=\"n\">n</span> <span class=\"o\">:</span> <span class=\"n\">nat</span><span class=\"o\">,</span> <span class=\"n\">p</span> <span class=\"o\">:</span> <span class=\"n\">nat</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"n\">nat</span> <span class=\"o\">:=</span>\n</code></pre></div>\n<p>as it should be spelt</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kd\">def</span> <span class=\"n\">Fp</span> <span class=\"o\">(</span><span class=\"n\">n</span> <span class=\"o\">:</span> <span class=\"n\">nat</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">p</span> <span class=\"o\">:</span> <span class=\"n\">nat</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"n\">nat</span> <span class=\"o\">:=</span>\n</code></pre></div>\n<p>When lean gives you error messages, you have to solve them in order, because after the first one Lean can get very confused</p>",
        "id": 283885193,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1653486678
    },
    {
        "content": "<p>or <code>def Fp (n  p : nat) : nat :=</code></p>",
        "id": 283885446,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1653486794
    },
    {
        "content": "<p>Thank you very much for this help. But as you can see in the images png I posted in my first message, my question was in other words : \"there are no sets in Lean, it seems to me, so my sets must be defined using functions, is it all right or must I define sets, like in page 158 I think, of the tutorial, and define intersection, and all that ?\". Thank you very much.</p>",
        "id": 283888947,
        "sender_full_name": "Chemla",
        "timestamp": 1653488402
    },
    {
        "content": "<p>Not in page 158, but in page 155, § 11.3, there is a definition of set...</p>",
        "id": 283889266,
        "sender_full_name": "Chemla",
        "timestamp": 1653488557
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"224188\">@Chemla</span> Most of mathematics can be very naturally translated from set theory to type theory. Unless you are doing hardcore set theory in the logic sense, you should probably just use types.</p>",
        "id": 283890390,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1653489084
    },
    {
        "content": "<p>Number theory, topology, algebra, geometry... everything just uses types.</p>",
        "id": 283890420,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1653489099
    },
    {
        "content": "<p>Thank you Johan. Sincerely (I hope this word exists in english), it is not natural for me to reason with types : I am an old computer scientist (this means that I was not used to use object oriented languages - they seem to correspond to types with attributes associated to objects) but only functions. Perhaps, your answer makes me understand that I should rather use a characteristic function instead of a set. This translation of an existing paper demonstration, all the more I had not been able to write it, is presumably too headlock for me. Thank you.</p>",
        "id": 283895782,
        "sender_full_name": "Chemla",
        "timestamp": 1653491234
    },
    {
        "content": "<p>This is how I would translate that paper to Lean<br>\n(I may have made some mistake, please double-check it yourself):</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kn\">import</span> <span class=\"n\">data.nat.prime</span>\n\n<span class=\"kd\">def</span> <span class=\"n\">F</span> <span class=\"o\">(</span><span class=\"n\">n</span> <span class=\"n\">p</span> <span class=\"o\">:</span> <span class=\"n\">ℕ</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"n\">set</span> <span class=\"n\">ℕ</span> <span class=\"o\">:=</span>\n<span class=\"o\">{</span><span class=\"n\">m</span> <span class=\"o\">:</span> <span class=\"n\">ℕ</span> <span class=\"bp\">|</span> <span class=\"n\">odd</span> <span class=\"n\">m</span> <span class=\"bp\">∧</span> <span class=\"mi\">3</span> <span class=\"bp\">≤</span> <span class=\"n\">m</span> <span class=\"bp\">∧</span> <span class=\"n\">m</span> <span class=\"bp\">≤</span> <span class=\"n\">n</span> <span class=\"bp\">/</span> <span class=\"mi\">2</span> <span class=\"bp\">∧</span> <span class=\"n\">m</span> <span class=\"bp\">%</span> <span class=\"n\">p</span> <span class=\"bp\">≠</span> <span class=\"mi\">0</span> <span class=\"bp\">∧</span> <span class=\"n\">m</span> <span class=\"bp\">%</span> <span class=\"n\">p</span> <span class=\"bp\">≠</span> <span class=\"n\">n</span><span class=\"o\">}</span>\n\n<span class=\"kd\">def</span> <span class=\"n\">D</span> <span class=\"o\">(</span><span class=\"n\">n</span> <span class=\"o\">:</span> <span class=\"n\">ℕ</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"n\">set</span> <span class=\"n\">ℕ</span> <span class=\"o\">:=</span>\n<span class=\"bp\">⋂</span> <span class=\"o\">(</span><span class=\"n\">p</span> <span class=\"o\">:</span> <span class=\"o\">{</span><span class=\"n\">p</span> <span class=\"o\">:</span> <span class=\"n\">ℕ</span> <span class=\"bp\">//</span> <span class=\"n\">prime</span> <span class=\"n\">p</span> <span class=\"bp\">∧</span> <span class=\"mi\">3</span> <span class=\"bp\">≤</span> <span class=\"n\">p</span> <span class=\"bp\">∧</span> <span class=\"n\">p</span> <span class=\"bp\">≤</span> <span class=\"n\">n.sqrt</span><span class=\"o\">}),</span> <span class=\"n\">F</span> <span class=\"n\">n</span> <span class=\"n\">p</span>\n\n<span class=\"kd\">lemma</span> <span class=\"n\">lem₁</span> <span class=\"o\">{</span><span class=\"n\">m</span> <span class=\"o\">:</span> <span class=\"n\">ℕ</span><span class=\"o\">}</span> <span class=\"o\">(</span><span class=\"n\">h₁</span> <span class=\"o\">:</span> <span class=\"n\">m</span> <span class=\"bp\">≠</span> <span class=\"mi\">1</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">h₂</span> <span class=\"o\">:</span> <span class=\"n\">odd</span> <span class=\"n\">m</span><span class=\"o\">)</span>\n  <span class=\"o\">(</span><span class=\"n\">h₃</span> <span class=\"o\">:</span> <span class=\"bp\">∀</span> <span class=\"o\">(</span><span class=\"n\">p</span> <span class=\"o\">:</span> <span class=\"n\">ℕ</span><span class=\"o\">),</span> <span class=\"n\">prime</span> <span class=\"n\">p</span> <span class=\"bp\">∧</span> <span class=\"mi\">3</span> <span class=\"bp\">≤</span> <span class=\"n\">p</span> <span class=\"bp\">∧</span> <span class=\"n\">p</span> <span class=\"bp\">≤</span> <span class=\"n\">m.sqrt</span> <span class=\"bp\">→</span> <span class=\"n\">m</span> <span class=\"bp\">%</span> <span class=\"n\">p</span> <span class=\"bp\">≠</span> <span class=\"mi\">0</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"n\">prime</span> <span class=\"n\">m</span> <span class=\"o\">:=</span>\n<span class=\"kd\">begin</span>\n  <span class=\"gr\">sorry</span>\n<span class=\"kd\">end</span>\n\n<span class=\"kd\">lemma</span> <span class=\"n\">lem₂</span> <span class=\"o\">{</span><span class=\"n\">n</span> <span class=\"o\">:</span> <span class=\"n\">ℕ</span><span class=\"o\">}</span> <span class=\"o\">:</span> <span class=\"n\">D</span> <span class=\"n\">n</span> <span class=\"bp\">⊆</span> <span class=\"n\">prime</span> <span class=\"o\">:=</span>\n<span class=\"kd\">begin</span>\n  <span class=\"gr\">sorry</span>\n<span class=\"kd\">end</span>\n\n<span class=\"kd\">lemma</span> <span class=\"n\">lem₃</span> <span class=\"o\">{</span><span class=\"n\">n</span> <span class=\"o\">:</span> <span class=\"n\">ℕ</span><span class=\"o\">}</span> <span class=\"o\">:</span> <span class=\"o\">(</span><span class=\"bp\">λ</span> <span class=\"o\">(</span><span class=\"n\">m</span> <span class=\"o\">:</span> <span class=\"n\">ℕ</span><span class=\"o\">),</span> <span class=\"n\">n</span> <span class=\"bp\">-</span> <span class=\"n\">m</span><span class=\"o\">)</span> <span class=\"bp\">''</span> <span class=\"n\">D</span> <span class=\"n\">n</span> <span class=\"bp\">⊆</span> <span class=\"n\">prime</span> <span class=\"o\">:=</span>\n<span class=\"kd\">begin</span>\n  <span class=\"gr\">sorry</span>\n<span class=\"kd\">end</span>\n\n<span class=\"kd\">lemma</span> <span class=\"n\">lem₄</span> <span class=\"o\">{</span><span class=\"n\">n</span> <span class=\"o\">:</span> <span class=\"n\">ℕ</span><span class=\"o\">}</span> <span class=\"o\">(</span><span class=\"n\">h₁</span> <span class=\"o\">:</span> <span class=\"bp\">∃</span> <span class=\"o\">(</span><span class=\"n\">m</span> <span class=\"o\">:</span> <span class=\"n\">ℕ</span><span class=\"o\">),</span> <span class=\"n\">n</span> <span class=\"bp\">=</span> <span class=\"n\">m</span> <span class=\"bp\">*</span> <span class=\"mi\">2</span> <span class=\"bp\">+</span> <span class=\"mi\">6</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">h₂</span> <span class=\"o\">:</span> <span class=\"o\">(</span><span class=\"n\">D</span> <span class=\"n\">n</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">nonempty</span><span class=\"o\">)</span> <span class=\"o\">:</span>\n  <span class=\"bp\">∃</span> <span class=\"o\">(</span><span class=\"n\">p</span> <span class=\"n\">q</span> <span class=\"o\">:</span> <span class=\"n\">ℕ</span><span class=\"o\">),</span> <span class=\"n\">prime</span> <span class=\"n\">p</span> <span class=\"bp\">∧</span> <span class=\"n\">prime</span> <span class=\"n\">q</span> <span class=\"bp\">∧</span> <span class=\"n\">n</span> <span class=\"bp\">=</span> <span class=\"n\">p</span> <span class=\"bp\">+</span> <span class=\"n\">q</span> <span class=\"o\">:=</span>\n<span class=\"kd\">begin</span>\n  <span class=\"gr\">sorry</span>\n<span class=\"kd\">end</span>\n</code></pre></div>",
        "id": 283897341,
        "sender_full_name": "Patrick Johnson",
        "timestamp": 1653491891
    },
    {
        "content": "<p>Thank you very much, Patrick. I'll look to this very carefully.<br>\nMa last question : I found this page <a href=\"https://leanprover.github.io/logic_and_proof/sets_in_lean.html\">sets in lean</a> typing \"sets in Lean\" in google but the page in question is not accessible in the page of current (?) tutorial here <a href=\"https://leanprover.github.io/theorem_proving_in_lean/index.html\">last ? tutorial v 3.23.0</a>that one advised me. Is there a reason for this ? Thank you</p>",
        "id": 283898159,
        "sender_full_name": "Chemla",
        "timestamp": 1653492275
    },
    {
        "content": "<p>Your first link is from <a href=\"https://github.com/leanprover/logic_and_proof\">https://github.com/leanprover/logic_and_proof</a> which is (was?) a CMU undergraduate course, while the second is from <a href=\"https://github.com/leanprover/theorem_proving_in_lean\">https://github.com/leanprover/theorem_proving_in_lean</a>. I don't know what the link between the two websites is, beyond being written by similar groups of people</p>",
        "id": 283901184,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1653493573
    },
    {
        "content": "<p>Thank you. Good evening.</p>",
        "id": 283903958,
        "sender_full_name": "Chemla",
        "timestamp": 1653494680
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"224188\">@Chemla</span>  Here is the definition of sets in Lean: <a href=\"https://leanprover-community.github.io/mathlib_docs/find/set\">docs#set</a> (and click \"Source\")</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kd\">def</span> <span class=\"n\">set</span> <span class=\"o\">(</span><span class=\"n\">α</span> <span class=\"o\">:</span> <span class=\"kt\">Type</span> <span class=\"n\">u</span><span class=\"o\">)</span> <span class=\"o\">:=</span> <span class=\"n\">α</span> <span class=\"bp\">→</span> <span class=\"kt\">Prop</span>\n</code></pre></div>\n<p>Lean sets are characteristic functions that are accompanied by familiar set-like notation.</p>",
        "id": 283904079,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1653494737
    },
    {
        "content": "<p>(They are characteristic functions on a type, where the type can be thought of as being the universe for the elements of the set.)</p>",
        "id": 283904365,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1653494871
    },
    {
        "content": "<p>Thank you Kyle, I will try, but I really think it's too much difficult for me, even if the three first lemma have yet been formally demonstrated.</p>",
        "id": 283926204,
        "sender_full_name": "Chemla",
        "timestamp": 1653505047
    },
    {
        "content": "<p>What I was meaning by that was a response to your comment:</p>\n<blockquote>\n<p>Perhaps, your answer makes me understand that I should rather use a characteristic function instead of a set.<br>\nIt turns out that Lean sets are characteristic functions on types already, if that helps clarify anything.</p>\n</blockquote>\n<p>The fact that <code>set α</code> is defined to be <code>α → Prop</code> means that for each term <code>x : α</code> a set <code>s : set α</code> gives either true or false, which we interpret to mean whether or not <code>x</code> is an element of <code>s</code>. In fact, the notation <code>x ∈ s</code> is defined to be <code>s x</code>.</p>",
        "id": 283930022,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1653506932
    },
    {
        "content": "<p>Thank you Kyle and excuse the time I took to thank : I make all those researches on my free time, and I don't have so much such time. Last week I translated in french the synthesis text of Buzzard (the one he will present at IMU 2022 online conference perhaps) : the paper is on free access in arxiv and I translated it to familiarize a little to the subject (and I made the same with another paper concerning adeles and ideles because I believed it would help me to understand a bit more about those objects but it was not the case). <br>\nI will dip (or drown) in the exercize of trying to verify \"my\" 3 lemmas in two weeks I hope. If I succeed (hum...), I will post.</p>",
        "id": 284489534,
        "sender_full_name": "Chemla",
        "timestamp": 1654009380
    }
]