[
    {
        "content": "<p>Uhm.. so I did a rewrite and suddenly had <code>h : \\not z = z</code> in my tactic state. It wasn't hard to get a proof of false from this. But I am not in a proof by contradiction right now. I thought in that case I should have false as the goal.<br>\nThis is (part of) my Tactic state at one point:</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"n\">hneq</span><span class=\"o\">:</span> <span class=\"bp\">¬</span><span class=\"n\">z</span> <span class=\"bp\">=</span> <span class=\"n\">z</span>\n<span class=\"n\">heq</span><span class=\"o\">:</span> <span class=\"n\">z</span> <span class=\"bp\">=</span> <span class=\"n\">z</span>\n<span class=\"n\">contr</span><span class=\"o\">:</span> <span class=\"n\">false</span>\n<span class=\"bp\">⊢</span> <span class=\"bp\">¬∥</span><span class=\"n\">x</span> <span class=\"bp\">-</span> <span class=\"n\">z</span><span class=\"bp\">∥</span> <span class=\"bp\">=</span> <span class=\"mi\">0</span>\n</code></pre></div>\n\n<p>The whole thing is part of a pretty large proof but here is an isolated version of the situation. Weird things start happening at<br>\n rw (@sub_left_inj ℂ _ z x z).1 at hneq.</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kd\">constants</span> <span class=\"n\">f</span> <span class=\"bp\">Δ</span> <span class=\"o\">:</span> <span class=\"n\">ℂ</span> <span class=\"bp\">-&gt;</span> <span class=\"n\">ℂ</span>\n<span class=\"kd\">constant</span> <span class=\"n\">z</span> <span class=\"o\">:</span> <span class=\"n\">ℂ</span>\n<span class=\"kd\">constant</span> <span class=\"n\">hf2</span> <span class=\"o\">:</span> <span class=\"bp\">∀</span> <span class=\"o\">(</span><span class=\"n\">x</span> <span class=\"o\">:</span> <span class=\"n\">ℂ</span><span class=\"o\">),</span> <span class=\"bp\">Δ</span> <span class=\"n\">x</span> <span class=\"bp\">*</span> <span class=\"o\">(</span><span class=\"n\">x</span> <span class=\"bp\">-</span> <span class=\"n\">z</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"n\">f</span> <span class=\"n\">x</span> <span class=\"bp\">-</span> <span class=\"n\">f</span> <span class=\"n\">z</span>\n\n<span class=\"kd\">lemma</span> <span class=\"n\">hcalc</span> <span class=\"o\">:</span> <span class=\"bp\">∀</span> <span class=\"o\">(</span><span class=\"n\">x</span> <span class=\"o\">:</span> <span class=\"n\">ℂ</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">hneq</span> <span class=\"o\">:</span> <span class=\"n\">x</span> <span class=\"bp\">≠</span> <span class=\"n\">z</span><span class=\"o\">),</span> <span class=\"bp\">∥</span><span class=\"n\">x</span> <span class=\"bp\">-</span> <span class=\"n\">z</span><span class=\"bp\">∥⁻¹</span> <span class=\"bp\">*</span> <span class=\"bp\">∥</span><span class=\"n\">f</span> <span class=\"n\">x</span> <span class=\"bp\">-</span> <span class=\"n\">f</span> <span class=\"n\">z</span> <span class=\"bp\">-</span> <span class=\"o\">(</span><span class=\"n\">x</span> <span class=\"bp\">-</span> <span class=\"n\">z</span><span class=\"o\">)</span> <span class=\"bp\">*</span> <span class=\"o\">(</span><span class=\"bp\">Δ</span> <span class=\"n\">z</span><span class=\"o\">)</span><span class=\"bp\">∥</span> <span class=\"bp\">=</span> <span class=\"bp\">∥Δ</span> <span class=\"n\">x</span> <span class=\"bp\">-</span> <span class=\"bp\">Δ</span> <span class=\"n\">z</span><span class=\"bp\">∥</span>\n  <span class=\"o\">:=</span> <span class=\"kd\">begin</span>\n  <span class=\"n\">intro</span> <span class=\"n\">x</span><span class=\"o\">,</span>\n  <span class=\"n\">intro</span> <span class=\"n\">hneq</span><span class=\"o\">,</span>\n  <span class=\"n\">rw</span> <span class=\"bp\">←</span><span class=\"n\">hf2</span><span class=\"o\">,</span>\n  <span class=\"n\">rw</span> <span class=\"n\">mul_comm</span> <span class=\"o\">(</span><span class=\"n\">x</span> <span class=\"bp\">-</span> <span class=\"n\">z</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"bp\">Δ</span> <span class=\"n\">z</span><span class=\"o\">),</span>\n  <span class=\"n\">rw</span> <span class=\"bp\">←</span><span class=\"n\">sub_mul</span> <span class=\"o\">(</span><span class=\"bp\">Δ</span> <span class=\"n\">x</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"bp\">Δ</span> <span class=\"n\">z</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">has_sub.sub</span> <span class=\"n\">x</span> <span class=\"n\">z</span><span class=\"o\">),</span>\n  <span class=\"n\">rw</span> <span class=\"n\">normed_field.norm_mul</span> <span class=\"o\">(</span><span class=\"bp\">Δ</span> <span class=\"n\">x</span> <span class=\"bp\">-</span> <span class=\"bp\">Δ</span> <span class=\"n\">z</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">x</span> <span class=\"bp\">-</span> <span class=\"n\">z</span><span class=\"o\">),</span>\n  <span class=\"n\">rw</span> <span class=\"n\">mul_comm</span> <span class=\"o\">(</span><span class=\"bp\">∥</span><span class=\"n\">x</span> <span class=\"bp\">-</span> <span class=\"n\">z</span><span class=\"bp\">∥⁻¹</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"bp\">∥Δ</span> <span class=\"n\">x</span> <span class=\"bp\">-</span> <span class=\"bp\">Δ</span> <span class=\"n\">z</span><span class=\"bp\">∥</span> <span class=\"bp\">*</span> <span class=\"bp\">∥</span><span class=\"n\">x</span> <span class=\"bp\">-</span> <span class=\"n\">z</span><span class=\"bp\">∥</span><span class=\"o\">),</span>\n  <span class=\"n\">rw</span> <span class=\"n\">mul_assoc</span> <span class=\"o\">(</span><span class=\"bp\">∥Δ</span> <span class=\"n\">x</span> <span class=\"bp\">-</span> <span class=\"bp\">Δ</span> <span class=\"n\">z</span><span class=\"bp\">∥</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"bp\">∥</span><span class=\"n\">x</span> <span class=\"bp\">-</span> <span class=\"n\">z</span><span class=\"bp\">∥</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"bp\">∥</span><span class=\"n\">x</span> <span class=\"bp\">-</span> <span class=\"n\">z</span><span class=\"bp\">∥⁻¹</span><span class=\"o\">),</span>\n  <span class=\"k\">have</span> <span class=\"n\">hneq2</span> <span class=\"o\">:</span> <span class=\"bp\">∥</span><span class=\"n\">x</span> <span class=\"bp\">-</span> <span class=\"n\">z</span><span class=\"bp\">∥</span> <span class=\"bp\">≠</span> <span class=\"mi\">0</span><span class=\"o\">,</span>\n    <span class=\"n\">unfold</span> <span class=\"n\">ne</span><span class=\"o\">,</span>\n    <span class=\"n\">unfold</span> <span class=\"n\">ne</span> <span class=\"n\">at</span> <span class=\"n\">hneq</span><span class=\"o\">,</span>\n    <span class=\"n\">rw</span> <span class=\"o\">(</span><span class=\"bp\">@</span><span class=\"n\">sub_left_inj</span> <span class=\"n\">ℂ</span> <span class=\"n\">_</span> <span class=\"n\">z</span> <span class=\"n\">x</span> <span class=\"n\">z</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"mi\">1</span> <span class=\"n\">at</span> <span class=\"n\">hneq</span><span class=\"o\">,</span>\n    <span class=\"k\">have</span> <span class=\"n\">heq</span><span class=\"o\">,</span> <span class=\"k\">from</span> <span class=\"n\">eq.refl</span> <span class=\"n\">z</span><span class=\"o\">,</span>\n    <span class=\"k\">have</span> <span class=\"n\">contr</span><span class=\"o\">,</span> <span class=\"k\">from</span> <span class=\"o\">(</span><span class=\"n\">not_and_self</span> <span class=\"o\">(</span><span class=\"n\">z</span><span class=\"bp\">=</span><span class=\"n\">z</span><span class=\"o\">))</span><span class=\"bp\">.</span><span class=\"mi\">1</span> <span class=\"o\">(</span><span class=\"n\">and.intro</span> <span class=\"n\">hneq</span> <span class=\"n\">heq</span><span class=\"o\">),</span>\n    <span class=\"n\">exact</span> <span class=\"n\">false.elim</span> <span class=\"n\">contr</span><span class=\"o\">,</span>\n  <span class=\"n\">rw</span> <span class=\"o\">(</span><span class=\"bp\">@</span><span class=\"n\">sub_left_inj</span> <span class=\"n\">ℂ</span> <span class=\"n\">_</span> <span class=\"n\">z</span> <span class=\"n\">x</span> <span class=\"n\">z</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"mi\">2</span><span class=\"o\">,</span>\n  <span class=\"kd\">end</span>\n</code></pre></div>\n\n<p>At the end I have</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"n\">x</span><span class=\"o\">:</span> <span class=\"n\">ℂ</span>\n<span class=\"n\">hneq</span><span class=\"o\">:</span> <span class=\"bp\">¬</span><span class=\"n\">x</span> <span class=\"bp\">=</span> <span class=\"n\">z</span>\n<span class=\"bp\">⊢</span> <span class=\"n\">x</span> <span class=\"bp\">=</span> <span class=\"n\">z</span>\n</code></pre></div>",
        "id": 214109177,
        "sender_full_name": "Golol",
        "timestamp": 1603311539
    },
    {
        "content": "<p>If you have contradictory hypotheses then you can stop right there -- you've proved your theorem. I don't see what's weird about this.</p>",
        "id": 214109360,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1603311614
    },
    {
        "content": "<p>Just do cases on <code>contr</code>. There are no cases, so the goal will be closed.</p>",
        "id": 214109401,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1603311643
    },
    {
        "content": "<p><a href=\"https://en.wikipedia.org/wiki/Principle_of_explosion\">https://en.wikipedia.org/wiki/Principle_of_explosion</a></p>",
        "id": 214109518,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1603311716
    },
    {
        "content": "<p>I guess just don't understand how I entered a proof by contradiction? At  rw (@sub_left_inj ℂ _ z x z).1 at hneq, a new goal gets introduced for reasons I don't understand and I can contradict.</p>",
        "id": 214109587,
        "sender_full_name": "Golol",
        "timestamp": 1603311739
    },
    {
        "content": "<p><code>exfalso</code> is a tactic which just turns your goal into <code>false</code></p>",
        "id": 214109597,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1603311744
    },
    {
        "content": "<p>so you could do <code>exfalso, assumption</code> too</p>",
        "id": 214109621,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1603311758
    },
    {
        "content": "<p>If you provided a <a href=\"https://leanprover-community.github.io/mwe.html\">#mwe</a> we would be able to easily investigate.</p>",
        "id": 214109837,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1603311862
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kn\">import</span> <span class=\"n\">tactic</span>\n\n<span class=\"kd\">variables</span> <span class=\"o\">(</span><span class=\"n\">P</span> <span class=\"n\">Q</span> <span class=\"o\">:</span> <span class=\"kt\">Prop</span><span class=\"o\">)</span>\n\n<span class=\"c1\">-- I have nothing up my sleeve. This is a straightforward proof which is</span>\n<span class=\"c1\">-- valid in constructive logic.</span>\n<span class=\"kd\">example</span> <span class=\"o\">:</span> <span class=\"o\">(</span><span class=\"n\">P</span> <span class=\"bp\">→</span> <span class=\"n\">Q</span><span class=\"o\">)</span> <span class=\"bp\">→</span> <span class=\"o\">(</span><span class=\"bp\">¬</span> <span class=\"n\">Q</span> <span class=\"bp\">→</span> <span class=\"bp\">¬</span> <span class=\"n\">P</span><span class=\"o\">)</span> <span class=\"o\">:=</span>\n<span class=\"kd\">begin</span>\n  <span class=\"n\">intro</span> <span class=\"n\">hPQ</span><span class=\"o\">,</span>\n  <span class=\"n\">intro</span> <span class=\"n\">hnQ</span><span class=\"o\">,</span>\n  <span class=\"n\">intro</span> <span class=\"n\">hP</span><span class=\"o\">,</span>\n  <span class=\"c\">/-</span><span class=\"cm\"></span>\n<span class=\"cm\">  P Q : Prop</span>\n<span class=\"cm\">  hPQ : P → Q</span>\n<span class=\"cm\">  hnQ : ¬Q</span>\n<span class=\"cm\">  hP : P</span>\n<span class=\"cm\">  ⊢ false</span>\n<span class=\"cm\">  -/</span>\n  <span class=\"c1\">-- goal is `false` but I am not doing a proof by contradiction!</span>\n  <span class=\"n\">apply</span> <span class=\"n\">hnQ</span><span class=\"o\">,</span>\n  <span class=\"c\">/-</span><span class=\"cm\"></span>\n<span class=\"cm\">  P Q : Prop</span>\n<span class=\"cm\">  hPQ : P → Q</span>\n<span class=\"cm\">  hnQ : ¬Q</span>\n<span class=\"cm\">  hP : P</span>\n<span class=\"cm\">  ⊢ Q</span>\n<span class=\"cm\">  -/</span>\n  <span class=\"c1\">-- goal is no longer `false`!</span>\n  <span class=\"n\">apply</span> <span class=\"n\">hPQ</span><span class=\"o\">,</span>\n  <span class=\"n\">assumption</span><span class=\"o\">,</span>\n<span class=\"kd\">end</span>\n</code></pre></div>",
        "id": 214109954,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1603311925
    },
    {
        "content": "<p>If you are confused about proving false it's probably because you haven't accepted enough that, in those foundations, the <em>definition</em> of \"not P\" is \"P implies false\".</p>",
        "id": 214110390,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1603312116
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110031\">Patrick Massot</span> <a href=\"#narrow/stream/113489-new-members/topic/proof.20of.20false.2C.20but.20false.20is.20not.20the.20goal/near/214109837\">said</a>:</p>\n<blockquote>\n<p>If you provided a <a href=\"https://leanprover-community.github.io/mwe.html\">#mwe</a> we would be able to easily investigate.</p>\n</blockquote>\n<p>The code above works if you copy paste it into an empty file, I'll try to reduce it.</p>",
        "id": 214110391,
        "sender_full_name": "Golol",
        "timestamp": 1603312116
    },
    {
        "content": "<p>No it doesn't.</p>",
        "id": 214110421,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1603312134
    },
    {
        "content": "<p>oh</p>",
        "id": 214110442,
        "sender_full_name": "Golol",
        "timestamp": 1603312152
    },
    {
        "content": "<p>Did you try?</p>",
        "id": 214110443,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1603312153
    },
    {
        "content": "<p>Hint: you have written no <code>import</code> line.</p>",
        "id": 214110478,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1603312182
    },
    {
        "content": "<p>I imported complexes but couldn't get norms to work. I don't know this part of the library. You can check to see if your code runs for other people using just one click nowadays (top right of the code block).</p>",
        "id": 214110606,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1603312247
    },
    {
        "content": "<p>Sorry, there you go :D</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kn\">import</span> <span class=\"n\">analysis.complex.basic</span>\n\n<span class=\"kd\">universes</span> <span class=\"n\">u</span> <span class=\"n\">v</span> <span class=\"n\">w</span>\n<span class=\"kd\">noncomputable theory</span>\n\n<span class=\"kd\">constants</span> <span class=\"n\">f</span> <span class=\"bp\">Δ</span> <span class=\"o\">:</span> <span class=\"n\">ℂ</span> <span class=\"bp\">-&gt;</span> <span class=\"n\">ℂ</span>\n<span class=\"kd\">constant</span> <span class=\"n\">z</span> <span class=\"o\">:</span> <span class=\"n\">ℂ</span>\n<span class=\"kd\">constant</span> <span class=\"n\">hf2</span> <span class=\"o\">:</span> <span class=\"bp\">∀</span> <span class=\"o\">(</span><span class=\"n\">x</span> <span class=\"o\">:</span> <span class=\"n\">ℂ</span><span class=\"o\">),</span> <span class=\"bp\">Δ</span> <span class=\"n\">x</span> <span class=\"bp\">*</span> <span class=\"o\">(</span><span class=\"n\">x</span> <span class=\"bp\">-</span> <span class=\"n\">z</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"n\">f</span> <span class=\"n\">x</span> <span class=\"bp\">-</span> <span class=\"n\">f</span> <span class=\"n\">z</span>\n\n<span class=\"kd\">lemma</span> <span class=\"n\">hcalc</span> <span class=\"o\">:</span> <span class=\"bp\">∀</span> <span class=\"o\">(</span><span class=\"n\">x</span> <span class=\"o\">:</span> <span class=\"n\">ℂ</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">hneq</span> <span class=\"o\">:</span> <span class=\"n\">x</span> <span class=\"bp\">≠</span> <span class=\"n\">z</span><span class=\"o\">),</span> <span class=\"bp\">∥</span><span class=\"n\">x</span> <span class=\"bp\">-</span> <span class=\"n\">z</span><span class=\"bp\">∥⁻¹</span> <span class=\"bp\">*</span> <span class=\"bp\">∥</span><span class=\"n\">f</span> <span class=\"n\">x</span> <span class=\"bp\">-</span> <span class=\"n\">f</span> <span class=\"n\">z</span> <span class=\"bp\">-</span> <span class=\"o\">(</span><span class=\"n\">x</span> <span class=\"bp\">-</span> <span class=\"n\">z</span><span class=\"o\">)</span> <span class=\"bp\">*</span> <span class=\"o\">(</span><span class=\"bp\">Δ</span> <span class=\"n\">z</span><span class=\"o\">)</span><span class=\"bp\">∥</span> <span class=\"bp\">=</span> <span class=\"bp\">∥Δ</span> <span class=\"n\">x</span> <span class=\"bp\">-</span> <span class=\"bp\">Δ</span> <span class=\"n\">z</span><span class=\"bp\">∥</span>\n  <span class=\"o\">:=</span> <span class=\"kd\">begin</span>\n  <span class=\"n\">intro</span> <span class=\"n\">x</span><span class=\"o\">,</span>\n  <span class=\"n\">intro</span> <span class=\"n\">hneq</span><span class=\"o\">,</span>\n  <span class=\"n\">rw</span> <span class=\"bp\">←</span><span class=\"n\">hf2</span><span class=\"o\">,</span>\n  <span class=\"n\">rw</span> <span class=\"n\">mul_comm</span> <span class=\"o\">(</span><span class=\"n\">x</span> <span class=\"bp\">-</span> <span class=\"n\">z</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"bp\">Δ</span> <span class=\"n\">z</span><span class=\"o\">),</span>\n  <span class=\"n\">rw</span> <span class=\"bp\">←</span><span class=\"n\">sub_mul</span> <span class=\"o\">(</span><span class=\"bp\">Δ</span> <span class=\"n\">x</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"bp\">Δ</span> <span class=\"n\">z</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">has_sub.sub</span> <span class=\"n\">x</span> <span class=\"n\">z</span><span class=\"o\">),</span>\n  <span class=\"n\">rw</span> <span class=\"n\">normed_field.norm_mul</span> <span class=\"o\">(</span><span class=\"bp\">Δ</span> <span class=\"n\">x</span> <span class=\"bp\">-</span> <span class=\"bp\">Δ</span> <span class=\"n\">z</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">x</span> <span class=\"bp\">-</span> <span class=\"n\">z</span><span class=\"o\">),</span>\n  <span class=\"n\">rw</span> <span class=\"n\">mul_comm</span> <span class=\"o\">(</span><span class=\"bp\">∥</span><span class=\"n\">x</span> <span class=\"bp\">-</span> <span class=\"n\">z</span><span class=\"bp\">∥⁻¹</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"bp\">∥Δ</span> <span class=\"n\">x</span> <span class=\"bp\">-</span> <span class=\"bp\">Δ</span> <span class=\"n\">z</span><span class=\"bp\">∥</span> <span class=\"bp\">*</span> <span class=\"bp\">∥</span><span class=\"n\">x</span> <span class=\"bp\">-</span> <span class=\"n\">z</span><span class=\"bp\">∥</span><span class=\"o\">),</span>\n  <span class=\"n\">rw</span> <span class=\"n\">mul_assoc</span> <span class=\"o\">(</span><span class=\"bp\">∥Δ</span> <span class=\"n\">x</span> <span class=\"bp\">-</span> <span class=\"bp\">Δ</span> <span class=\"n\">z</span><span class=\"bp\">∥</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"bp\">∥</span><span class=\"n\">x</span> <span class=\"bp\">-</span> <span class=\"n\">z</span><span class=\"bp\">∥</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"bp\">∥</span><span class=\"n\">x</span> <span class=\"bp\">-</span> <span class=\"n\">z</span><span class=\"bp\">∥⁻¹</span><span class=\"o\">),</span>\n  <span class=\"k\">have</span> <span class=\"n\">hneq2</span> <span class=\"o\">:</span> <span class=\"bp\">∥</span><span class=\"n\">x</span> <span class=\"bp\">-</span> <span class=\"n\">z</span><span class=\"bp\">∥</span> <span class=\"bp\">≠</span> <span class=\"mi\">0</span><span class=\"o\">,</span>\n    <span class=\"n\">unfold</span> <span class=\"n\">ne</span><span class=\"o\">,</span>\n    <span class=\"n\">unfold</span> <span class=\"n\">ne</span> <span class=\"n\">at</span> <span class=\"n\">hneq</span><span class=\"o\">,</span>\n    <span class=\"n\">rw</span> <span class=\"o\">(</span><span class=\"bp\">@</span><span class=\"n\">sub_left_inj</span> <span class=\"n\">ℂ</span> <span class=\"n\">_</span> <span class=\"n\">z</span> <span class=\"n\">x</span> <span class=\"n\">z</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"mi\">1</span> <span class=\"n\">at</span> <span class=\"n\">hneq</span><span class=\"o\">,</span>\n    <span class=\"k\">have</span> <span class=\"n\">heq</span><span class=\"o\">,</span> <span class=\"k\">from</span> <span class=\"n\">eq.refl</span> <span class=\"n\">z</span><span class=\"o\">,</span>\n    <span class=\"k\">have</span> <span class=\"n\">contr</span><span class=\"o\">,</span> <span class=\"k\">from</span> <span class=\"o\">(</span><span class=\"n\">not_and_self</span> <span class=\"o\">(</span><span class=\"n\">z</span><span class=\"bp\">=</span><span class=\"n\">z</span><span class=\"o\">))</span><span class=\"bp\">.</span><span class=\"mi\">1</span> <span class=\"o\">(</span><span class=\"n\">and.intro</span> <span class=\"n\">hneq</span> <span class=\"n\">heq</span><span class=\"o\">),</span>\n    <span class=\"n\">exact</span> <span class=\"n\">false.elim</span> <span class=\"n\">contr</span><span class=\"o\">,</span>\n  <span class=\"n\">rw</span> <span class=\"o\">(</span><span class=\"bp\">@</span><span class=\"n\">sub_left_inj</span> <span class=\"n\">ℂ</span> <span class=\"n\">_</span> <span class=\"n\">z</span> <span class=\"n\">x</span> <span class=\"n\">z</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"mi\">2</span><span class=\"o\">,</span>\n  <span class=\"kd\">end</span>\n</code></pre></div>",
        "id": 214110612,
        "sender_full_name": "Golol",
        "timestamp": 1603312254
    },
    {
        "content": "<p>Thanks. That's a MWE.</p>",
        "id": 214110679,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1603312291
    },
    {
        "content": "<p>Did you follow the tutorials project to understand negations in Lean?</p>",
        "id": 214110712,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1603312312
    },
    {
        "content": "<p>In particular you can prove your intermediate goal by:</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code>  <span class=\"k\">have</span> <span class=\"n\">hneq2</span> <span class=\"o\">:</span> <span class=\"bp\">∥</span><span class=\"n\">x</span> <span class=\"bp\">-</span> <span class=\"n\">z</span><span class=\"bp\">∥</span> <span class=\"bp\">≠</span> <span class=\"mi\">0</span><span class=\"o\">,</span>\n    <span class=\"n\">intro</span> <span class=\"n\">H</span><span class=\"o\">,</span>\n    <span class=\"n\">apply</span> <span class=\"n\">hneq</span><span class=\"o\">,</span>\n    <span class=\"n\">exact</span> <span class=\"n\">eq_of_norm_sub_eq_zero</span> <span class=\"n\">H</span>\n</code></pre></div>",
        "id": 214110792,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1603312342
    },
    {
        "content": "<p>Or the sober <code>have hneq2 : ∥x - z∥ ≠ 0 := λ H, hneq (eq_of_norm_sub_eq_zero H),</code></p>",
        "id": 214110838,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1603312374
    },
    {
        "content": "<p>But I think the answer to the question is simply that logic is logic, and sometimes you do get hypotheses and/or goals which are false, but I think the OP somehow thinks that this is more meaningful than it actually is. My example was supposed to be simple case of this, where there is definitely no proof by contradiction, and where at some point the hypotheses are contradictory and the goal is false -- it doesn't have any profound logical meaning.</p>",
        "id": 214110877,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1603312393
    },
    {
        "content": "<p>If this looks like black magic then I strongly advise you to follow the tutorials.</p>",
        "id": 214110903,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1603312409
    },
    {
        "content": "<p>Patrick's proof also passes through a temporary state where the goal is false, just like my example.</p>",
        "id": 214111153,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1603312509
    },
    {
        "content": "<p>Sure, but my point is there is no proof by contradiction here, only proofs of negations and use of negation.</p>",
        "id": 214111243,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1603312556
    },
    {
        "content": "<p>Golol, after proving this <code>hneq2</code> I recommend rewriting using <code>mul_inv_cancel</code>.</p>",
        "id": 214111279,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1603312564
    },
    {
        "content": "<p>Then the next step is a crucial formalization trick: your lemma doesn't need the assumption <code>hneq</code>. So, once you'll be done with this proof, get rid of this assumption, adjusting the proof as required (we can give more hints here if needed). Then each time you'll want to <em>apply</em> this lemma, you won't have to check the assumption!</p>",
        "id": 214111623,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1603312734
    },
    {
        "content": "<p>Many of the arguments which mathematicians think are proofs by contradiction are not proofs by contradiction to the constructivists anyway. For example the proof that no rational squared is 2 starts \"assume that there's a rational whose square is 2, and proceed by contradiction\". But \"not P\" is the same as \"P implies false\" in Lean so this is literally a direct proof of the statement. Intermediate goals which are false are fine as long as hypotheses are also contradictory, and this has very little to do with what either you or a constructivist thinks a proof by contradiction is. Any proof involving <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>≠</mo></mrow><annotation encoding=\"application/x-tex\">\\not=</annotation></semantics></math></span><span aria-hidden=\"true\" class=\"katex-html\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mrel\"><span class=\"mord vbox\"><span class=\"thinbox\"><span class=\"rlap\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"inner\"><span class=\"mrel\"></span></span><span class=\"fix\"></span></span></span></span></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.36687em;vertical-align:0em;\"></span><span class=\"mrel\">=</span></span></span></span> could well have falses flying around at some point.</p>",
        "id": 214111653,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1603312747
    },
    {
        "content": "<p>It's not only about constructivism, it really helps in Lean to have clear ideas about this.</p>",
        "id": 214111734,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1603312789
    },
    {
        "content": "<p>Something else: you shouldn't be using <code>constant</code> here. This is not what this keyword is meant to be used for. It works here but this is somehow an accident.</p>",
        "id": 214111932,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1603312873
    },
    {
        "content": "<p>Here you are adding to Lean's axiomatic system the existence of two functions and a complex number satisfying a certain relation, and then prove some consequences of this relation. This is certainly not what you mean. What you presumably mean is that for all pairs of functions and complex number satisfying this relation you get the result of <code>hcalc</code>. So you you can either put those objects in the declaration <code>hcalc</code> or use the keyword <code>variables</code> if you fear you'll have to repeat things in a lot of other lemmas.</p>",
        "id": 214112280,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1603313048
    },
    {
        "content": "<p>Ok so I understand that simply the definition of negation happened here but it happened at a point where I didn't expect it. But there are two things which still confuse me<br>\n1) How did I introduce a new subgoal by doing `rw (@sub_left_inj ℂ _ z x z).1 at hneq<br>\n2) In the last line my tactic state is</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"n\">x</span><span class=\"o\">:</span> <span class=\"n\">ℂ</span>\n<span class=\"n\">hneq</span><span class=\"o\">:</span> <span class=\"bp\">¬</span><span class=\"n\">x</span> <span class=\"bp\">=</span> <span class=\"n\">z</span>\n<span class=\"bp\">⊢</span> <span class=\"n\">x</span> <span class=\"bp\">=</span> <span class=\"n\">z</span>\n</code></pre></div>\n\n<p>From this it seems like it isn't possible to finish the proof. I just want to have it clear in my mind that this can totally happen if you take the wrong steps in your tactic proof, right? Just like a generalize can make your goal impossible.<br>\nThe constants were just there to make the example work</p>",
        "id": 214112389,
        "sender_full_name": "Golol",
        "timestamp": 1603313119
    },
    {
        "content": "<p>You rewrote <code>(blah).1</code> which was of the form <code>A -&gt; (X = Y)</code> so a new goal of A appeared.</p>",
        "id": 214112535,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1603313191
    },
    {
        "content": "<p>yes, if you take the wrong steps in your tactic proof you can end up with something unprovable</p>",
        "id": 214112551,
        "sender_full_name": "Kevin Lacker",
        "timestamp": 1603313208
    },
    {
        "content": "<p>e.g. applying <code>exfalso</code> at any point where your hypotheses are not contradictory will make your goal impossible to prove.</p>",
        "id": 214112614,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1603313246
    },
    {
        "content": "<p>unfortunately, you cannot just keep entering random characters until the formula is proved. you have to make intelligent mathematical decisions. this is inconvenient but unavoidable</p>",
        "id": 214112632,
        "sender_full_name": "Kevin Lacker",
        "timestamp": 1603313260
    },
    {
        "content": "<p>tactics have consequences. Use them wisely :-)</p>",
        "id": 214112648,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1603313270
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"238605\">@Kevin Lacker</span> , I don't think it helps to suggest that Golol is entering random characters.</p>",
        "id": 214112821,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1603313365
    },
    {
        "content": "<p>I will brute force the RH proof term and you can not stop me!</p>",
        "id": 214112858,
        "sender_full_name": "Golol",
        "timestamp": 1603313393
    },
    {
        "content": "<p>I think Kevin is just making the general point that when playing this game, if you make random moves then you might get stuck -- it's not like some games where you can always keep going and dig yourself out of a hole</p>",
        "id": 214112923,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1603313419
    },
    {
        "content": "<p>Ok, I investigated the weird new goal.</p>",
        "id": 214113132,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1603313535
    },
    {
        "content": "<p>The issue comes because you try to force the arguments to <code>sub_left_inj</code> and make the wrong choice here (probably by getting the wrong order of arguments). Lean tries to match with the goal anyway but succeeds only if you can prove this crazy goal.</p>",
        "id": 214113258,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1603313612
    },
    {
        "content": "<p>Actually, before that rewrite, try typing <code>have := (@sub_left_inj ℂ _ z x z).1,</code>.</p>",
        "id": 214113438,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1603313702
    },
    {
        "content": "<p>You'll see the term you're trying to use to rewrite is <code>x - z = z - z → x = z</code></p>",
        "id": 214113552,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1603313758
    },
    {
        "content": "<p>So Lean will accept to rewrite <code>x</code> into<code>z</code> but then ask you prove the premise <code>x - z = z - z</code></p>",
        "id": 214113633,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1603313783
    },
    {
        "content": "<p>Ooooh it is the wrong direction. My usb approach of adding a \\left if the default direction doesnt work is faulted... <span aria-label=\"grinning\" class=\"emoji emoji-1f600\" role=\"img\" title=\"grinning\">:grinning:</span></p>",
        "id": 214113653,
        "sender_full_name": "Golol",
        "timestamp": 1603313794
    },
    {
        "content": "<p>I see now. Many thanks to everyone for the help!</p>",
        "id": 214113813,
        "sender_full_name": "Golol",
        "timestamp": 1603313862
    },
    {
        "content": "<p>I am in favor of proving things by entering random characters. <span aria-label=\"smile\" class=\"emoji emoji-1f642\" role=\"img\" title=\"smile\">:smile:</span> it doesn't really work with tactics, though, you have to add in backtracking. then it works</p>",
        "id": 214113913,
        "sender_full_name": "Kevin Lacker",
        "timestamp": 1603313904
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"238605\">Kevin Lacker</span> <a href=\"#narrow/stream/113489-new-members/topic/proof.20of.20false.2C.20but.20false.20is.20not.20the.20goal/near/214113913\">said</a>:</p>\n<blockquote>\n<p>I am in favor of proving things by entering random characters. <span aria-label=\"smile\" class=\"emoji emoji-1f642\" role=\"img\" title=\"smile\">:smile:</span></p>\n</blockquote>\n<p>That's the machine learning approach, right? :-)</p>",
        "id": 214113962,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1603313939
    },
    {
        "content": "<p>Below I've written a somewhat optimized version. You should look at it when you're happy with how you worked out the exercises (including removing the useless assumption).</p>\n<div class=\"spoiler-block\"><div class=\"spoiler-header\">\n\n</div><div class=\"spoiler-content\" aria-hidden=\"true\">\n\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kd\">lemma</span> <span class=\"n\">hcalc</span> <span class=\"o\">:</span> <span class=\"bp\">∀</span> <span class=\"n\">x</span> <span class=\"o\">:</span> <span class=\"n\">ℂ</span><span class=\"o\">,</span> <span class=\"bp\">∥</span><span class=\"n\">x</span> <span class=\"bp\">-</span> <span class=\"n\">z</span><span class=\"bp\">∥⁻¹</span> <span class=\"bp\">*</span> <span class=\"bp\">∥</span><span class=\"n\">f</span> <span class=\"n\">x</span> <span class=\"bp\">-</span> <span class=\"n\">f</span> <span class=\"n\">z</span> <span class=\"bp\">-</span> <span class=\"o\">(</span><span class=\"n\">x</span> <span class=\"bp\">-</span> <span class=\"n\">z</span><span class=\"o\">)</span> <span class=\"bp\">*</span> <span class=\"o\">(</span><span class=\"bp\">Δ</span> <span class=\"n\">z</span><span class=\"o\">)</span><span class=\"bp\">∥</span> <span class=\"bp\">=</span> <span class=\"bp\">∥Δ</span> <span class=\"n\">x</span> <span class=\"bp\">-</span> <span class=\"bp\">Δ</span> <span class=\"n\">z</span><span class=\"bp\">∥</span> <span class=\"o\">:=</span>\n<span class=\"kd\">begin</span>\n  <span class=\"n\">intro</span> <span class=\"n\">x</span><span class=\"o\">,</span>\n  <span class=\"n\">by_cases</span> <span class=\"n\">hneq</span> <span class=\"o\">:</span> <span class=\"n\">x</span> <span class=\"bp\">=</span> <span class=\"n\">z</span><span class=\"o\">,</span>\n  <span class=\"o\">{</span> <span class=\"n\">simp</span> <span class=\"o\">[</span><span class=\"n\">hneq</span><span class=\"o\">]</span> <span class=\"o\">},</span>\n  <span class=\"k\">have</span> <span class=\"n\">hneq2</span> <span class=\"o\">:</span> <span class=\"bp\">∥</span><span class=\"n\">x</span> <span class=\"bp\">-</span> <span class=\"n\">z</span><span class=\"bp\">∥</span> <span class=\"bp\">≠</span> <span class=\"mi\">0</span> <span class=\"o\">:=</span> <span class=\"bp\">λ</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"n\">hneq</span> <span class=\"o\">(</span><span class=\"n\">eq_of_norm_sub_eq_zero</span> <span class=\"n\">H</span><span class=\"o\">),</span>\n  <span class=\"n\">rw</span> <span class=\"o\">[</span><span class=\"bp\">←</span> <span class=\"n\">hf2</span><span class=\"o\">,</span> <span class=\"k\">show</span> <span class=\"bp\">Δ</span> <span class=\"n\">x</span> <span class=\"bp\">*</span> <span class=\"o\">(</span><span class=\"n\">x</span> <span class=\"bp\">-</span> <span class=\"n\">z</span><span class=\"o\">)</span> <span class=\"bp\">-</span> <span class=\"o\">(</span><span class=\"n\">x</span> <span class=\"bp\">-</span> <span class=\"n\">z</span><span class=\"o\">)</span> <span class=\"bp\">*</span> <span class=\"bp\">Δ</span> <span class=\"n\">z</span> <span class=\"bp\">=</span> <span class=\"o\">(</span><span class=\"n\">x</span> <span class=\"bp\">-</span> <span class=\"n\">z</span><span class=\"o\">)</span> <span class=\"bp\">*</span> <span class=\"o\">(</span><span class=\"bp\">Δ</span> <span class=\"n\">x</span> <span class=\"bp\">-</span> <span class=\"bp\">Δ</span> <span class=\"n\">z</span><span class=\"o\">),</span> <span class=\"kd\">by</span> <span class=\"n\">ring</span><span class=\"o\">,</span>\n      <span class=\"n\">normed_field.norm_mul</span><span class=\"o\">,</span> <span class=\"bp\">←</span> <span class=\"n\">mul_assoc</span><span class=\"o\">,</span> <span class=\"n\">inv_mul_cancel</span> <span class=\"n\">hneq2</span><span class=\"o\">,</span> <span class=\"n\">one_mul</span><span class=\"o\">],</span>\n<span class=\"kd\">end</span>\n</code></pre></div>\n\n</div></div>",
        "id": 214114220,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1603314065
    },
    {
        "content": "<p>Unironically, I hope that if in the future we have a large database of formal mathematics, machine learning approaches will yield great proof assistants.</p>",
        "id": 214114318,
        "sender_full_name": "Golol",
        "timestamp": 1603314119
    },
    {
        "content": "<p>Many people are working on this dream.</p>",
        "id": 214114485,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1603314205
    },
    {
        "content": "<p>yeah I feel like if a human specified the intermediate steps like, you have to split on x = z or x != z, it should be able to fill in the rset</p>",
        "id": 214114584,
        "sender_full_name": "Kevin Lacker",
        "timestamp": 1603314244
    },
    {
        "content": "<p>In this specific case we immediately get to the crucial point that Lean should be much better in calculation, at the level of a computer algebra system (but without the wrong results they sometimes produce...).</p>",
        "id": 214114689,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1603314314
    }
]