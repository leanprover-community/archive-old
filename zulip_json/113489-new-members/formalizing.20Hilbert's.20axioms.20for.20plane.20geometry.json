[
    {
        "content": "<p>Hi there, I'm a mathematician getting started with Lean. After having done the natural number game and a few of the challenges, I wanted to start formalizing something easy, and I tried with Hilber'ts axioms.</p>\n<p>So far, I have this little:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"kn\">import</span> <span class=\"n\">tactic</span>\n<span class=\"c1\">-- We want to be able to define functions using the law of excluded middle</span>\n<span class=\"n\">local</span> <span class=\"n\">attribute</span> <span class=\"o\">[</span><span class=\"kn\">instance</span><span class=\"o\">,</span> <span class=\"n\">priority</span> <span class=\"mi\">0</span><span class=\"o\">]</span> <span class=\"n\">classical</span><span class=\"bp\">.</span><span class=\"n\">prop_decidable</span>\n\n\n<span class=\"n\">noncomputable</span> <span class=\"n\">theory</span>\n\n<span class=\"n\">open_locale</span> <span class=\"n\">classical</span>\n\n<span class=\"kn\">constants</span> <span class=\"n\">Points</span> <span class=\"n\">Lines</span> <span class=\"o\">:</span> <span class=\"kt\">Type</span><span class=\"bp\">*</span>\n<span class=\"kn\">constant</span> <span class=\"n\">lies_on</span> <span class=\"o\">:</span> <span class=\"n\">Points</span> <span class=\"bp\">→</span> <span class=\"n\">Lines</span> <span class=\"bp\">→</span> <span class=\"kt\">Prop</span>\n\n<span class=\"n\">local</span> <span class=\"kn\">infixl</span> <span class=\"bp\">`</span><span class=\"err\">∈</span><span class=\"bp\">`</span> <span class=\"o\">:=</span> <span class=\"n\">lies_on</span>\n\n<span class=\"kn\">constant</span> <span class=\"n\">I1</span> <span class=\"o\">:</span> <span class=\"bp\">∀</span> <span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"o\">:</span> <span class=\"n\">Points</span><span class=\"o\">,</span>  <span class=\"n\">A</span> <span class=\"bp\">≠</span> <span class=\"n\">B</span> <span class=\"bp\">→</span> <span class=\"bp\">∃!</span> <span class=\"n\">ℓ</span><span class=\"o\">,</span> <span class=\"o\">(</span> <span class=\"n\">A</span> <span class=\"err\">∈</span> <span class=\"n\">ℓ</span> <span class=\"o\">)</span> <span class=\"bp\">∧</span> <span class=\"o\">(</span> <span class=\"n\">B</span> <span class=\"err\">∈</span> <span class=\"n\">ℓ</span> <span class=\"o\">)</span>\n<span class=\"c1\">--constant I11 : ∀ A B : Points,  A ≠ B → ∃ ℓ, ( A ∈ ℓ ) ∧ ( B ∈ ℓ )</span>\n<span class=\"c1\">--constant I12 : ∀ A B : Points, ∀ r s : Lines, (A ≠ B) →  (A ∈ r) →  (B ∈ r) →  (A ∈ s) → (B ∈ s) →  r = s</span>\n<span class=\"kn\">constant</span> <span class=\"n\">I2</span> <span class=\"o\">:</span> <span class=\"bp\">∀</span> <span class=\"n\">ℓ</span> <span class=\"o\">:</span> <span class=\"n\">Lines</span><span class=\"o\">,</span> <span class=\"bp\">∃</span> <span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"o\">:</span> <span class=\"n\">Points</span><span class=\"o\">,</span> <span class=\"n\">A</span> <span class=\"bp\">≠</span> <span class=\"n\">B</span> <span class=\"bp\">∧</span> <span class=\"n\">A</span> <span class=\"err\">∈</span> <span class=\"n\">ℓ</span> <span class=\"bp\">∧</span> <span class=\"n\">B</span> <span class=\"err\">∈</span> <span class=\"n\">ℓ</span>\n<span class=\"kn\">constant</span> <span class=\"n\">I3</span> <span class=\"o\">:</span> <span class=\"bp\">∃</span> <span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"n\">C</span> <span class=\"o\">:</span> <span class=\"n\">Points</span><span class=\"o\">,</span> <span class=\"o\">(</span><span class=\"n\">A</span> <span class=\"bp\">≠</span> <span class=\"n\">B</span> <span class=\"bp\">∧</span> <span class=\"n\">A</span> <span class=\"bp\">≠</span> <span class=\"n\">C</span> <span class=\"bp\">∧</span> <span class=\"n\">B</span> <span class=\"bp\">≠</span> <span class=\"n\">C</span> <span class=\"bp\">∧</span> <span class=\"o\">(</span><span class=\"bp\">∀</span> <span class=\"n\">ℓ</span><span class=\"o\">,</span> <span class=\"o\">(</span><span class=\"n\">A</span> <span class=\"err\">∈</span> <span class=\"n\">ℓ</span> <span class=\"bp\">∧</span> <span class=\"n\">B</span> <span class=\"err\">∈</span> <span class=\"n\">ℓ</span><span class=\"o\">)</span> <span class=\"bp\">→</span> <span class=\"o\">(</span><span class=\"bp\">¬</span> <span class=\"o\">(</span><span class=\"n\">C</span> <span class=\"err\">∈</span> <span class=\"n\">ℓ</span><span class=\"o\">)</span> <span class=\"o\">)))</span>\n\n<span class=\"kn\">lemma</span> <span class=\"n\">I11</span> <span class=\"o\">:</span> <span class=\"bp\">∀</span> <span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"o\">:</span> <span class=\"n\">Points</span><span class=\"o\">,</span>  <span class=\"n\">A</span> <span class=\"bp\">≠</span> <span class=\"n\">B</span> <span class=\"bp\">→</span> <span class=\"bp\">∃</span> <span class=\"n\">ℓ</span><span class=\"o\">,</span> <span class=\"o\">(</span> <span class=\"n\">A</span> <span class=\"err\">∈</span> <span class=\"n\">ℓ</span> <span class=\"o\">)</span> <span class=\"bp\">∧</span> <span class=\"o\">(</span> <span class=\"n\">B</span> <span class=\"err\">∈</span> <span class=\"n\">ℓ</span> <span class=\"o\">)</span> <span class=\"o\">:=</span>\n<span class=\"k\">begin</span>\n<span class=\"n\">intros</span> <span class=\"n\">A</span> <span class=\"n\">B</span><span class=\"o\">,</span>\n<span class=\"n\">intro</span> <span class=\"n\">h</span><span class=\"o\">,</span>\n<span class=\"n\">cases</span> <span class=\"n\">I1</span> <span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"n\">h</span> <span class=\"k\">with</span> <span class=\"n\">ℓ</span> <span class=\"n\">h1</span><span class=\"o\">,</span>\n<span class=\"n\">existsi</span> <span class=\"n\">ℓ</span><span class=\"o\">,</span>\n<span class=\"n\">cases</span> <span class=\"n\">h1</span> <span class=\"k\">with</span> <span class=\"n\">H</span><span class=\"o\">,</span>\n<span class=\"n\">exact</span> <span class=\"n\">H</span><span class=\"o\">,</span>\n<span class=\"kn\">end</span>\n\n<span class=\"kn\">lemma</span> <span class=\"n\">I12</span> <span class=\"o\">:</span> <span class=\"bp\">∀</span> <span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"o\">:</span> <span class=\"n\">Points</span><span class=\"o\">,</span> <span class=\"bp\">∀</span> <span class=\"n\">r</span> <span class=\"n\">s</span> <span class=\"o\">:</span> <span class=\"n\">Lines</span><span class=\"o\">,</span> <span class=\"o\">(</span><span class=\"n\">A</span> <span class=\"bp\">≠</span> <span class=\"n\">B</span><span class=\"o\">)</span> <span class=\"bp\">→</span>  <span class=\"o\">(</span><span class=\"n\">A</span> <span class=\"err\">∈</span> <span class=\"n\">r</span><span class=\"o\">)</span> <span class=\"bp\">→</span>  <span class=\"o\">(</span><span class=\"n\">B</span> <span class=\"err\">∈</span> <span class=\"n\">r</span><span class=\"o\">)</span> <span class=\"bp\">→</span>  <span class=\"o\">(</span><span class=\"n\">A</span> <span class=\"err\">∈</span> <span class=\"n\">s</span><span class=\"o\">)</span> <span class=\"bp\">→</span> <span class=\"o\">(</span><span class=\"n\">B</span> <span class=\"err\">∈</span> <span class=\"n\">s</span><span class=\"o\">)</span> <span class=\"bp\">→</span>  <span class=\"n\">r</span> <span class=\"bp\">=</span> <span class=\"n\">s</span> <span class=\"o\">:=</span>\n<span class=\"k\">begin</span>\n<span class=\"n\">intros</span> <span class=\"n\">A</span> <span class=\"n\">B</span><span class=\"o\">,</span>\n<span class=\"n\">intros</span> <span class=\"n\">r</span> <span class=\"n\">s</span><span class=\"o\">,</span>\n<span class=\"n\">intro</span> <span class=\"n\">h</span><span class=\"o\">,</span>\n<span class=\"n\">intro</span> <span class=\"n\">hAr</span><span class=\"o\">,</span>\n<span class=\"n\">intro</span> <span class=\"n\">hBr</span><span class=\"o\">,</span>\n<span class=\"n\">intro</span> <span class=\"n\">hAs</span><span class=\"o\">,</span>\n<span class=\"n\">intro</span> <span class=\"n\">hBs</span><span class=\"o\">,</span>\n<span class=\"n\">cases</span> <span class=\"n\">I1</span> <span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"n\">h</span> <span class=\"k\">with</span> <span class=\"n\">ℓ</span> <span class=\"n\">h1</span><span class=\"o\">,</span>\n<span class=\"k\">have</span> <span class=\"n\">r_is_ell</span> <span class=\"o\">:</span> <span class=\"n\">r</span> <span class=\"bp\">=</span> <span class=\"n\">ℓ</span><span class=\"o\">,</span>\n<span class=\"bp\">...</span>\n<span class=\"kn\">end</span>\n</pre></div>\n\n\n<p>The axiom I1 is an if and only if statement, and I wanted to separate the two statements as I11 and I12. I succeeded with I11 (existence) but for I12 (uniqueness) I am having trouble. I end up with the following tactic state:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"o\">:</span> <span class=\"n\">Points</span><span class=\"o\">,</span>\n<span class=\"n\">r</span> <span class=\"n\">s</span> <span class=\"o\">:</span> <span class=\"n\">Lines</span><span class=\"o\">,</span>\n<span class=\"n\">h</span> <span class=\"o\">:</span> <span class=\"n\">A</span> <span class=\"bp\">≠</span> <span class=\"n\">B</span><span class=\"o\">,</span>\n<span class=\"n\">hAr</span> <span class=\"o\">:</span> <span class=\"n\">A</span><span class=\"err\">∈</span><span class=\"n\">r</span><span class=\"o\">,</span>\n<span class=\"n\">hBr</span> <span class=\"o\">:</span> <span class=\"n\">B</span><span class=\"err\">∈</span><span class=\"n\">r</span><span class=\"o\">,</span>\n<span class=\"n\">hAs</span> <span class=\"o\">:</span> <span class=\"n\">A</span><span class=\"err\">∈</span><span class=\"n\">s</span><span class=\"o\">,</span>\n<span class=\"n\">hBs</span> <span class=\"o\">:</span> <span class=\"n\">B</span><span class=\"err\">∈</span><span class=\"n\">s</span><span class=\"o\">,</span>\n<span class=\"n\">ℓ</span> <span class=\"o\">:</span> <span class=\"n\">Lines</span><span class=\"o\">,</span>\n<span class=\"n\">h1</span> <span class=\"o\">:</span>\n  <span class=\"o\">(</span><span class=\"bp\">λ</span> <span class=\"o\">(</span><span class=\"n\">ℓ</span> <span class=\"o\">:</span> <span class=\"n\">Lines</span><span class=\"o\">),</span> <span class=\"n\">A</span><span class=\"err\">∈</span><span class=\"n\">ℓ</span> <span class=\"bp\">∧</span> <span class=\"n\">B</span><span class=\"err\">∈</span><span class=\"n\">ℓ</span><span class=\"o\">)</span> <span class=\"n\">ℓ</span> <span class=\"bp\">∧</span> <span class=\"bp\">∀</span> <span class=\"o\">(</span><span class=\"n\">y</span> <span class=\"o\">:</span> <span class=\"n\">Lines</span><span class=\"o\">),</span> <span class=\"o\">(</span><span class=\"bp\">λ</span> <span class=\"o\">(</span><span class=\"n\">ℓ</span> <span class=\"o\">:</span> <span class=\"n\">Lines</span><span class=\"o\">),</span> <span class=\"n\">A</span><span class=\"err\">∈</span><span class=\"n\">ℓ</span> <span class=\"bp\">∧</span> <span class=\"n\">B</span><span class=\"err\">∈</span><span class=\"n\">ℓ</span><span class=\"o\">)</span> <span class=\"n\">y</span> <span class=\"bp\">→</span> <span class=\"n\">y</span> <span class=\"bp\">=</span> <span class=\"n\">ℓ</span>\n<span class=\"err\">⊢</span> <span class=\"n\">r</span> <span class=\"bp\">=</span> <span class=\"n\">s</span>\n</pre></div>\n\n\n<p>and then I want to conclude by showing that r = ell = s, so I do <code>have r_eq_ell : r = \\ell</code>. This gives me the first goal of showing r = ell, and there I get stuck:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"mi\">2</span> <span class=\"n\">goals</span>\n<span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"o\">:</span> <span class=\"n\">Points</span><span class=\"o\">,</span>\n<span class=\"n\">r</span> <span class=\"n\">s</span> <span class=\"o\">:</span> <span class=\"n\">Lines</span><span class=\"o\">,</span>\n<span class=\"n\">h</span> <span class=\"o\">:</span> <span class=\"n\">A</span> <span class=\"bp\">≠</span> <span class=\"n\">B</span><span class=\"o\">,</span>\n<span class=\"n\">hAr</span> <span class=\"o\">:</span> <span class=\"n\">A</span><span class=\"err\">∈</span><span class=\"n\">r</span><span class=\"o\">,</span>\n<span class=\"n\">hBr</span> <span class=\"o\">:</span> <span class=\"n\">B</span><span class=\"err\">∈</span><span class=\"n\">r</span><span class=\"o\">,</span>\n<span class=\"n\">hAs</span> <span class=\"o\">:</span> <span class=\"n\">A</span><span class=\"err\">∈</span><span class=\"n\">s</span><span class=\"o\">,</span>\n<span class=\"n\">hBs</span> <span class=\"o\">:</span> <span class=\"n\">B</span><span class=\"err\">∈</span><span class=\"n\">s</span><span class=\"o\">,</span>\n<span class=\"n\">ℓ</span> <span class=\"o\">:</span> <span class=\"n\">Lines</span><span class=\"o\">,</span>\n<span class=\"n\">h1</span> <span class=\"o\">:</span>\n  <span class=\"o\">(</span><span class=\"bp\">λ</span> <span class=\"o\">(</span><span class=\"n\">ℓ</span> <span class=\"o\">:</span> <span class=\"n\">Lines</span><span class=\"o\">),</span> <span class=\"n\">A</span><span class=\"err\">∈</span><span class=\"n\">ℓ</span> <span class=\"bp\">∧</span> <span class=\"n\">B</span><span class=\"err\">∈</span><span class=\"n\">ℓ</span><span class=\"o\">)</span> <span class=\"n\">ℓ</span> <span class=\"bp\">∧</span> <span class=\"bp\">∀</span> <span class=\"o\">(</span><span class=\"n\">y</span> <span class=\"o\">:</span> <span class=\"n\">Lines</span><span class=\"o\">),</span> <span class=\"o\">(</span><span class=\"bp\">λ</span> <span class=\"o\">(</span><span class=\"n\">ℓ</span> <span class=\"o\">:</span> <span class=\"n\">Lines</span><span class=\"o\">),</span> <span class=\"n\">A</span><span class=\"err\">∈</span><span class=\"n\">ℓ</span> <span class=\"bp\">∧</span> <span class=\"n\">B</span><span class=\"err\">∈</span><span class=\"n\">ℓ</span><span class=\"o\">)</span> <span class=\"n\">y</span> <span class=\"bp\">→</span> <span class=\"n\">y</span> <span class=\"bp\">=</span> <span class=\"n\">ℓ</span>\n<span class=\"err\">⊢</span> <span class=\"n\">r</span> <span class=\"bp\">=</span> <span class=\"n\">ℓ</span>\n\n<span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"o\">:</span> <span class=\"n\">Points</span><span class=\"o\">,</span>\n<span class=\"n\">r</span> <span class=\"n\">s</span> <span class=\"o\">:</span> <span class=\"n\">Lines</span><span class=\"o\">,</span>\n<span class=\"n\">h</span> <span class=\"o\">:</span> <span class=\"n\">A</span> <span class=\"bp\">≠</span> <span class=\"n\">B</span><span class=\"o\">,</span>\n<span class=\"n\">hAr</span> <span class=\"o\">:</span> <span class=\"n\">A</span><span class=\"err\">∈</span><span class=\"n\">r</span><span class=\"o\">,</span>\n<span class=\"n\">hBr</span> <span class=\"o\">:</span> <span class=\"n\">B</span><span class=\"err\">∈</span><span class=\"n\">r</span><span class=\"o\">,</span>\n<span class=\"n\">hAs</span> <span class=\"o\">:</span> <span class=\"n\">A</span><span class=\"err\">∈</span><span class=\"n\">s</span><span class=\"o\">,</span>\n<span class=\"n\">hBs</span> <span class=\"o\">:</span> <span class=\"n\">B</span><span class=\"err\">∈</span><span class=\"n\">s</span><span class=\"o\">,</span>\n<span class=\"n\">ℓ</span> <span class=\"o\">:</span> <span class=\"n\">Lines</span><span class=\"o\">,</span>\n<span class=\"n\">h1</span> <span class=\"o\">:</span>\n  <span class=\"o\">(</span><span class=\"bp\">λ</span> <span class=\"o\">(</span><span class=\"n\">ℓ</span> <span class=\"o\">:</span> <span class=\"n\">Lines</span><span class=\"o\">),</span> <span class=\"n\">A</span><span class=\"err\">∈</span><span class=\"n\">ℓ</span> <span class=\"bp\">∧</span> <span class=\"n\">B</span><span class=\"err\">∈</span><span class=\"n\">ℓ</span><span class=\"o\">)</span> <span class=\"n\">ℓ</span> <span class=\"bp\">∧</span>\n    <span class=\"bp\">∀</span> <span class=\"o\">(</span><span class=\"n\">y</span> <span class=\"o\">:</span> <span class=\"n\">Lines</span><span class=\"o\">),</span> <span class=\"o\">(</span><span class=\"bp\">λ</span> <span class=\"o\">(</span><span class=\"n\">ℓ</span> <span class=\"o\">:</span> <span class=\"n\">Lines</span><span class=\"o\">),</span> <span class=\"n\">A</span><span class=\"err\">∈</span><span class=\"n\">ℓ</span> <span class=\"bp\">∧</span> <span class=\"n\">B</span><span class=\"err\">∈</span><span class=\"n\">ℓ</span><span class=\"o\">)</span> <span class=\"n\">y</span> <span class=\"bp\">→</span> <span class=\"n\">y</span> <span class=\"bp\">=</span> <span class=\"n\">ℓ</span><span class=\"o\">,</span>\n<span class=\"n\">r_eq_ell</span> <span class=\"o\">:</span> <span class=\"n\">r</span> <span class=\"bp\">=</span> <span class=\"n\">ℓ</span>\n<span class=\"err\">⊢</span> <span class=\"n\">r</span> <span class=\"bp\">=</span> <span class=\"n\">s</span>\n</pre></div>\n\n\n<p>Thank you for any help!</p>\n<p>PS: I know that I should be using classes or structures, but I am trying to keep it as simple as possible (and using as few non-math concepts as possible). Once I get something compiling I will try to understand how to make it up to standards.</p>",
        "id": 185678084,
        "sender_full_name": "Marc Masdeu",
        "timestamp": 1579077314
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"254058\">@Marc Masdeu</span> I think there are functions <code>unique_of_exists_unique</code> that take an <code>∃! foobar</code> statement, and spit out the corresponding uniqueness statement.</p>",
        "id": 185678302,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1579077568
    },
    {
        "content": "<p>But maybe you would rather prove it by yourself, as an exercise.</p>",
        "id": 185678307,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1579077583
    },
    {
        "content": "<p>Good to know (I had seen it elsewhere) but I would like to prove the exact statement of I12 (yes, as an exercice), and more so now that I got stuck :-).</p>",
        "id": 185678386,
        "sender_full_name": "Marc Masdeu",
        "timestamp": 1579077668
    },
    {
        "content": "<div class=\"codehilite\"><pre><span></span><span class=\"k\">have</span> <span class=\"n\">r_is_ell</span> <span class=\"o\">:</span> <span class=\"n\">r</span> <span class=\"bp\">=</span> <span class=\"n\">ℓ</span><span class=\"o\">,</span>\n<span class=\"o\">{</span> <span class=\"n\">apply</span> <span class=\"n\">h1</span><span class=\"bp\">.</span><span class=\"n\">right</span><span class=\"o\">,</span>\n  <span class=\"n\">split</span><span class=\"o\">,</span>\n  <span class=\"n\">assumption&#39;</span> <span class=\"o\">},</span>\n</pre></div>",
        "id": 185678416,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1579077699
    },
    {
        "content": "<p>Alternative:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"n\">rcases</span> <span class=\"n\">I1</span> <span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"n\">h</span> <span class=\"k\">with</span> <span class=\"bp\">⟨</span><span class=\"n\">ℓ</span><span class=\"o\">,</span> <span class=\"n\">h1_left</span><span class=\"o\">,</span> <span class=\"n\">h1_right</span><span class=\"bp\">⟩</span><span class=\"o\">,</span>\n<span class=\"k\">have</span> <span class=\"n\">r_is_ell</span> <span class=\"o\">:</span> <span class=\"n\">r</span> <span class=\"bp\">=</span> <span class=\"n\">ℓ</span><span class=\"o\">,</span>\n<span class=\"o\">{</span> <span class=\"n\">apply</span> <span class=\"n\">h1_right</span><span class=\"o\">,</span>\n  <span class=\"n\">split</span><span class=\"o\">,</span>\n  <span class=\"n\">assumption&#39;</span> <span class=\"o\">},</span>\n</pre></div>",
        "id": 185678472,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1579077748
    },
    {
        "content": "<p>I changed <code>cases</code> to <code>rcases</code>. That allows you to do \"recursive\" cases. (And I didn't attempt to give meaningful names to the hypotheses)</p>",
        "id": 185678478,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1579077766
    },
    {
        "content": "<p>aha! Is there a way to resolve the have with tactics? I am not so comfortable yet with switching from one way to the other..</p>",
        "id": 185678511,
        "sender_full_name": "Marc Masdeu",
        "timestamp": 1579077818
    },
    {
        "content": "<p>What do you mean?</p>",
        "id": 185678577,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1579077887
    },
    {
        "content": "<p>I proved the <code>have</code> using tactics. I used <code>{ ... }</code> to \"zoom in\" on one goal</p>",
        "id": 185678590,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1579077907
    },
    {
        "content": "<p>But you don't need to write those curly braces, if you don't want to</p>",
        "id": 185678596,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1579077921
    },
    {
        "content": "<p>Or do you want to avoid the <code>have</code> altogether?</p>",
        "id": 185678606,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1579077944
    },
    {
        "content": "<p>Oh I see. I am trying myself now. I thought that the {} was used to construct directly a term. I am in the right thread...</p>",
        "id": 185678614,
        "sender_full_name": "Marc Masdeu",
        "timestamp": 1579077955
    },
    {
        "content": "<div class=\"codehilite\"><pre><span></span><span class=\"n\">rcases</span> <span class=\"n\">I1</span> <span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"n\">h</span> <span class=\"k\">with</span> <span class=\"bp\">⟨</span><span class=\"n\">ℓ</span><span class=\"o\">,</span> <span class=\"n\">h1_left</span><span class=\"o\">,</span> <span class=\"n\">h1_right</span><span class=\"bp\">⟩</span><span class=\"o\">,</span>\n<span class=\"n\">transitivity</span><span class=\"o\">,</span>\n<span class=\"o\">{</span> <span class=\"n\">apply</span> <span class=\"n\">h1_right</span><span class=\"o\">,</span>\n  <span class=\"n\">split</span><span class=\"o\">,</span>\n  <span class=\"n\">assumption&#39;</span> <span class=\"o\">},</span>\n<span class=\"o\">{</span> <span class=\"n\">symmetry</span><span class=\"o\">,</span>\n  <span class=\"n\">apply</span> <span class=\"n\">h1_right</span><span class=\"o\">,</span>\n  <span class=\"n\">split</span><span class=\"o\">,</span>\n  <span class=\"n\">assumption&#39;</span> <span class=\"o\">}</span>\n</pre></div>",
        "id": 185678706,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1579078032
    },
    {
        "content": "<p>Proof without <code>have</code></p>",
        "id": 185678714,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1579078037
    },
    {
        "content": "<p>Shorter version:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"n\">rcases</span> <span class=\"n\">I1</span> <span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"n\">h</span> <span class=\"k\">with</span> <span class=\"bp\">⟨</span><span class=\"n\">ℓ</span><span class=\"o\">,</span> <span class=\"n\">h1_left</span><span class=\"o\">,</span> <span class=\"n\">h1_right</span><span class=\"bp\">⟩</span><span class=\"o\">,</span>\n<span class=\"n\">transitivity</span><span class=\"o\">,</span>\n<span class=\"n\">swap</span><span class=\"o\">,</span> <span class=\"n\">symmetry</span><span class=\"o\">,</span>\n<span class=\"n\">all_goals</span>\n<span class=\"o\">{</span> <span class=\"n\">apply</span> <span class=\"n\">h1_right</span><span class=\"o\">,</span>\n  <span class=\"n\">split</span><span class=\"o\">,</span>\n  <span class=\"n\">assumption&#39;</span> <span class=\"o\">},</span>\n</pre></div>",
        "id": 185678742,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1579078075
    },
    {
        "content": "<p>OK, I got it. I thought that h1 was a function so that I could apply it by doing something like <code>h1 r</code> but this never worked. I hadn't thought of doing the <code>.right</code> and I still don't see the reasoning behind it.</p>",
        "id": 185678744,
        "sender_full_name": "Marc Masdeu",
        "timestamp": 1579078078
    },
    {
        "content": "<p>Sure, it also took me some time to parse it. But it is of the form <code>... ∧ ...</code></p>",
        "id": 185678802,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1579078113
    },
    {
        "content": "<p>And the right hand side is a function</p>",
        "id": 185678806,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1579078120
    },
    {
        "content": "<p>Oh! How can I check this kind of things inside a proof? If h1 was defined outside, I would start trying <code>#check h1</code>, <code>#check h1 r</code> and so on, but I couldn't do anything like that inside the proof...</p>",
        "id": 185678846,
        "sender_full_name": "Marc Masdeu",
        "timestamp": 1579078194
    },
    {
        "content": "<p>Are you using VScode?</p>",
        "id": 185678911,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1579078218
    },
    {
        "content": "<p>Because it lists your entire context in the tactic state</p>",
        "id": 185678934,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1579078249
    },
    {
        "content": "<p>In the same place where you would see the output of <code>#check foobar</code></p>",
        "id": 185678954,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1579078270
    },
    {
        "content": "<p>No, I'm using cocalc (I want some summer camp students to be able to play around with this, and wanted to set something up easy to use for them)</p>",
        "id": 185678957,
        "sender_full_name": "Marc Masdeu",
        "timestamp": 1579078274
    },
    {
        "content": "<p>But where do you see the output of <code>#check h1</code> in CoCalc?</p>",
        "id": 185678967,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1579078299
    },
    {
        "content": "<p>Probably in some message window somewhere</p>",
        "id": 185678968,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1579078307
    },
    {
        "content": "<p>You are also seeing the goal that you want to prove somewhere. Right above it should be a list of all your hypotheses.</p>",
        "id": 185679031,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1579078337
    },
    {
        "content": "<p>Yes, there is a message window. But if I want to know the type of something, for example, I can't ask for it there.</p>",
        "id": 185679036,
        "sender_full_name": "Marc Masdeu",
        "timestamp": 1579078346
    },
    {
        "content": "<p>I'm copy-pasting this from your first message:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"mi\">2</span> <span class=\"n\">goals</span>\n<span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"o\">:</span> <span class=\"n\">Points</span><span class=\"o\">,</span>\n<span class=\"n\">r</span> <span class=\"n\">s</span> <span class=\"o\">:</span> <span class=\"n\">Lines</span><span class=\"o\">,</span>\n<span class=\"n\">h</span> <span class=\"o\">:</span> <span class=\"n\">A</span> <span class=\"bp\">≠</span> <span class=\"n\">B</span><span class=\"o\">,</span>\n<span class=\"n\">hAr</span> <span class=\"o\">:</span> <span class=\"n\">A</span><span class=\"err\">∈</span><span class=\"n\">r</span><span class=\"o\">,</span>\n<span class=\"n\">hBr</span> <span class=\"o\">:</span> <span class=\"n\">B</span><span class=\"err\">∈</span><span class=\"n\">r</span><span class=\"o\">,</span>\n<span class=\"n\">hAs</span> <span class=\"o\">:</span> <span class=\"n\">A</span><span class=\"err\">∈</span><span class=\"n\">s</span><span class=\"o\">,</span>\n<span class=\"n\">hBs</span> <span class=\"o\">:</span> <span class=\"n\">B</span><span class=\"err\">∈</span><span class=\"n\">s</span><span class=\"o\">,</span>\n<span class=\"n\">ℓ</span> <span class=\"o\">:</span> <span class=\"n\">Lines</span><span class=\"o\">,</span>\n<span class=\"n\">h1</span> <span class=\"o\">:</span>\n  <span class=\"o\">(</span><span class=\"bp\">λ</span> <span class=\"o\">(</span><span class=\"n\">ℓ</span> <span class=\"o\">:</span> <span class=\"n\">Lines</span><span class=\"o\">),</span> <span class=\"n\">A</span><span class=\"err\">∈</span><span class=\"n\">ℓ</span> <span class=\"bp\">∧</span> <span class=\"n\">B</span><span class=\"err\">∈</span><span class=\"n\">ℓ</span><span class=\"o\">)</span> <span class=\"n\">ℓ</span> <span class=\"bp\">∧</span> <span class=\"bp\">∀</span> <span class=\"o\">(</span><span class=\"n\">y</span> <span class=\"o\">:</span> <span class=\"n\">Lines</span><span class=\"o\">),</span> <span class=\"o\">(</span><span class=\"bp\">λ</span> <span class=\"o\">(</span><span class=\"n\">ℓ</span> <span class=\"o\">:</span> <span class=\"n\">Lines</span><span class=\"o\">),</span> <span class=\"n\">A</span><span class=\"err\">∈</span><span class=\"n\">ℓ</span> <span class=\"bp\">∧</span> <span class=\"n\">B</span><span class=\"err\">∈</span><span class=\"n\">ℓ</span><span class=\"o\">)</span> <span class=\"n\">y</span> <span class=\"bp\">→</span> <span class=\"n\">y</span> <span class=\"bp\">=</span> <span class=\"n\">ℓ</span>\n<span class=\"err\">⊢</span> <span class=\"n\">r</span> <span class=\"bp\">=</span> <span class=\"n\">ℓ</span>\n</pre></div>",
        "id": 185679059,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1579078371
    },
    {
        "content": "<p>Yes, I see the hypotheses and everything, and they get updated as I advance. A lot like the web interface of the natural number game. What I don't have is autocompletion.</p>",
        "id": 185679079,
        "sender_full_name": "Marc Masdeu",
        "timestamp": 1579078387
    },
    {
        "content": "<p>That's where you can see <code>h1 : (λ (ℓ : Lines), A∈ℓ ∧ B∈ℓ) ℓ ∧ ∀ (y : Lines), (λ (ℓ : Lines), A∈ℓ ∧ B∈ℓ) y → y = ℓ</code></p>",
        "id": 185679081,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1579078388
    },
    {
        "content": "<p>That's the type of <code>h1</code></p>",
        "id": 185679094,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1579078406
    },
    {
        "content": "<p>Hmm... what exactly do you mean? I thought CoCalc had some form of autocomplete</p>",
        "id": 185679110,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1579078428
    },
    {
        "content": "<p>I don't think it has any autocompletion (unless I have it disabled somehow!). What I meant --and maybe it's still me being stupid-- is that if I want to run some command (like <code>h1 r</code>) inside the proof to see what it would give me, I will probably get a useless error.</p>",
        "id": 185679275,
        "sender_full_name": "Marc Masdeu",
        "timestamp": 1579078582
    },
    {
        "content": "<p>If you are in a tactic block and you want to know the type of something you can <code>have what_am_i := thing_I_dont_know,</code> then in the info at cursor block you should see <code>what_am_i : ℕ</code>  or whatever it is</p>",
        "id": 185679287,
        "sender_full_name": "Alex J. Best",
        "timestamp": 1579078608
    },
    {
        "content": "<p>Oh <span class=\"user-mention\" data-user-id=\"127136\">@Alex J. Best</span>  this is clever! Thanks.</p>",
        "id": 185679314,
        "sender_full_name": "Marc Masdeu",
        "timestamp": 1579078647
    },
    {
        "content": "<p><a href=\"/user_uploads/3121/xEkVmxTm9brRbz4qtJYljgir/Screen-Shot-2020-01-15-at-14.27.06.png\" target=\"_blank\" title=\"Screen-Shot-2020-01-15-at-14.27.06.png\">Screen-Shot-2020-01-15-at-14.27.06.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/xEkVmxTm9brRbz4qtJYljgir/Screen-Shot-2020-01-15-at-14.27.06.png\" target=\"_blank\" title=\"Screen-Shot-2020-01-15-at-14.27.06.png\"><img src=\"/user_uploads/3121/xEkVmxTm9brRbz4qtJYljgir/Screen-Shot-2020-01-15-at-14.27.06.png\"></a></div>",
        "id": 185679317,
        "sender_full_name": "Alex J. Best",
        "timestamp": 1579078650
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"254058\">@Marc Masdeu</span> Aha, I see. This might be one way to \"hack\" it:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"n\">rcases</span> <span class=\"n\">I1</span> <span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"n\">h</span> <span class=\"k\">with</span> <span class=\"bp\">⟨</span><span class=\"n\">ℓ</span><span class=\"o\">,</span> <span class=\"n\">h1</span><span class=\"bp\">⟩</span><span class=\"o\">,</span>\n<span class=\"k\">have</span> <span class=\"n\">test</span> <span class=\"o\">:=</span> <span class=\"n\">h1</span> <span class=\"n\">r</span><span class=\"o\">,</span>\n</pre></div>\n\n\n<p>This will give you an error</p>",
        "id": 185679323,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1579078657
    },
    {
        "content": "<p>Aah, ok, Alex beat me (-;</p>",
        "id": 185679331,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1579078667
    },
    {
        "content": "<p>You guys are incredibly helpful! Thanks!!</p>",
        "id": 185679385,
        "sender_full_name": "Marc Masdeu",
        "timestamp": 1579078684
    },
    {
        "content": "<p>This is normally how I build terms, start with a function /lemma I want to apply with no arguments as have, then add arguments one by one till it gets to what I want.</p>",
        "id": 185679397,
        "sender_full_name": "Alex J. Best",
        "timestamp": 1579078707
    },
    {
        "content": "<p>Aha. Yes, I want to learn how to translate the way we do math usually, into Lean.<br>\nI'll go back and try to prove a few more stupid lemmas. Probably will come back very soon...</p>",
        "id": 185679459,
        "sender_full_name": "Marc Masdeu",
        "timestamp": 1579078762
    },
    {
        "content": "<p>Good luck! (-;</p>",
        "id": 185679514,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1579078804
    },
    {
        "content": "<p>Some form of tab completion works for me in Cocalc by the way <a href=\"/user_uploads/3121/hbgKfvJGbnGwwr4ILnbst3ju/Screen-Shot-2020-01-15-at-14.30.23.png\" target=\"_blank\" title=\"Screen-Shot-2020-01-15-at-14.30.23.png\">Screen-Shot-2020-01-15-at-14.30.23.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/hbgKfvJGbnGwwr4ILnbst3ju/Screen-Shot-2020-01-15-at-14.30.23.png\" target=\"_blank\" title=\"Screen-Shot-2020-01-15-at-14.30.23.png\"><img src=\"/user_uploads/3121/hbgKfvJGbnGwwr4ILnbst3ju/Screen-Shot-2020-01-15-at-14.30.23.png\"></a></div>",
        "id": 185679551,
        "sender_full_name": "Alex J. Best",
        "timestamp": 1579078856
    },
    {
        "content": "<p>I typed <code>apply and.</code> then hit tab, the first 20 results were random general things, but then it showed me various <code>and</code> related lemmas and their types.<br>\nActually it worked better when I did <code>apply a</code> then tab then continued typing. I think the <code>.</code> was doing something a little funny with the tab completion.</p>",
        "id": 185679591,
        "sender_full_name": "Alex J. Best",
        "timestamp": 1579078910
    },
    {
        "content": "<p>I'll try. I seem to remember that in VScode the completion appeared without the tab, this confused me.</p>",
        "id": 185679903,
        "sender_full_name": "Marc Masdeu",
        "timestamp": 1579079245
    },
    {
        "content": "<p>OK, so I'm a bit further down. So far, I have:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"kn\">import</span> <span class=\"n\">tactic</span>\n<span class=\"c1\">-- We want to be able to define functions using the law of excluded middle</span>\n<span class=\"n\">local</span> <span class=\"n\">attribute</span> <span class=\"o\">[</span><span class=\"kn\">instance</span><span class=\"o\">,</span> <span class=\"n\">priority</span> <span class=\"mi\">0</span><span class=\"o\">]</span> <span class=\"n\">classical</span><span class=\"bp\">.</span><span class=\"n\">prop_decidable</span>\n\n\n<span class=\"n\">noncomputable</span> <span class=\"n\">theory</span>\n\n<span class=\"n\">open_locale</span> <span class=\"n\">classical</span>\n\n<span class=\"kn\">universe</span> <span class=\"n\">u</span>\n<span class=\"kn\">constant</span> <span class=\"n\">Points</span> <span class=\"o\">:</span> <span class=\"kt\">Type</span> <span class=\"n\">u</span>\n<span class=\"kn\">constant</span> <span class=\"n\">Lines</span> <span class=\"o\">:</span> <span class=\"n\">set</span><span class=\"o\">(</span><span class=\"n\">set</span> <span class=\"n\">Points</span><span class=\"o\">)</span>\n<span class=\"kn\">constant</span> <span class=\"n\">lies_on</span> <span class=\"o\">:</span> <span class=\"n\">Points</span> <span class=\"bp\">→</span> <span class=\"n\">Lines</span> <span class=\"bp\">→</span> <span class=\"kt\">Prop</span>\n\n<span class=\"n\">local</span> <span class=\"kn\">infixl</span> <span class=\"bp\">`</span><span class=\"err\">∈</span><span class=\"bp\">`</span> <span class=\"o\">:=</span> <span class=\"n\">lies_on</span>\n<span class=\"kn\">notation</span> <span class=\"n\">x</span> <span class=\"bp\">`</span><span class=\"err\">∋</span><span class=\"bp\">`</span> <span class=\"n\">y</span> <span class=\"o\">:=</span> <span class=\"n\">lies_on</span> <span class=\"n\">y</span> <span class=\"n\">x</span>\n<span class=\"kn\">constant</span> <span class=\"n\">I1</span> <span class=\"o\">:</span> <span class=\"bp\">∀</span> <span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"o\">:</span> <span class=\"n\">Points</span><span class=\"o\">,</span>  <span class=\"n\">A</span> <span class=\"bp\">≠</span> <span class=\"n\">B</span> <span class=\"bp\">→</span> <span class=\"bp\">∃!</span> <span class=\"n\">ℓ</span><span class=\"o\">,</span> <span class=\"o\">(</span> <span class=\"n\">A</span> <span class=\"err\">∈</span> <span class=\"n\">ℓ</span> <span class=\"o\">)</span> <span class=\"bp\">∧</span> <span class=\"o\">(</span> <span class=\"n\">B</span> <span class=\"err\">∈</span> <span class=\"n\">ℓ</span> <span class=\"o\">)</span>\n<span class=\"kn\">constant</span> <span class=\"n\">I2</span> <span class=\"o\">:</span> <span class=\"bp\">∀</span> <span class=\"n\">ℓ</span> <span class=\"o\">:</span> <span class=\"n\">Lines</span><span class=\"o\">,</span> <span class=\"bp\">∃</span> <span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"o\">:</span> <span class=\"n\">Points</span><span class=\"o\">,</span> <span class=\"n\">A</span> <span class=\"bp\">≠</span> <span class=\"n\">B</span> <span class=\"bp\">∧</span> <span class=\"n\">A</span> <span class=\"err\">∈</span> <span class=\"n\">ℓ</span> <span class=\"bp\">∧</span> <span class=\"n\">B</span> <span class=\"err\">∈</span> <span class=\"n\">ℓ</span>\n<span class=\"kn\">constant</span> <span class=\"n\">I3</span> <span class=\"o\">:</span> <span class=\"bp\">∃</span> <span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"n\">C</span> <span class=\"o\">:</span> <span class=\"n\">Points</span><span class=\"o\">,</span> <span class=\"o\">(</span><span class=\"n\">A</span> <span class=\"bp\">≠</span> <span class=\"n\">B</span> <span class=\"bp\">∧</span> <span class=\"n\">A</span> <span class=\"bp\">≠</span> <span class=\"n\">C</span> <span class=\"bp\">∧</span> <span class=\"n\">B</span> <span class=\"bp\">≠</span> <span class=\"n\">C</span> <span class=\"bp\">∧</span> <span class=\"o\">(</span><span class=\"bp\">∀</span> <span class=\"n\">ℓ</span><span class=\"o\">,</span> <span class=\"o\">(</span><span class=\"n\">A</span> <span class=\"err\">∈</span> <span class=\"n\">ℓ</span> <span class=\"bp\">∧</span> <span class=\"n\">B</span> <span class=\"err\">∈</span> <span class=\"n\">ℓ</span><span class=\"o\">)</span> <span class=\"bp\">→</span> <span class=\"o\">(</span><span class=\"bp\">¬</span> <span class=\"o\">(</span><span class=\"n\">C</span> <span class=\"err\">∈</span> <span class=\"n\">ℓ</span><span class=\"o\">)</span> <span class=\"o\">)))</span>\n\n<span class=\"kn\">notation</span> <span class=\"n\">p</span> <span class=\"bp\">`</span><span class=\"n\">xor</span><span class=\"bp\">`</span> <span class=\"n\">q</span> <span class=\"o\">:=</span> <span class=\"o\">(</span><span class=\"n\">p</span> <span class=\"bp\">∧</span> <span class=\"bp\">¬</span> <span class=\"n\">q</span><span class=\"o\">)</span> <span class=\"bp\">∨</span> <span class=\"o\">(</span><span class=\"n\">q</span> <span class=\"bp\">∧</span> <span class=\"bp\">¬</span> <span class=\"n\">p</span><span class=\"o\">)</span>\n\n<span class=\"kn\">lemma</span> <span class=\"n\">I11</span> <span class=\"o\">:</span> <span class=\"bp\">∀</span> <span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"o\">:</span> <span class=\"n\">Points</span><span class=\"o\">,</span>  <span class=\"n\">A</span> <span class=\"bp\">≠</span> <span class=\"n\">B</span> <span class=\"bp\">→</span> <span class=\"bp\">∃</span> <span class=\"n\">ℓ</span><span class=\"o\">,</span> <span class=\"o\">(</span> <span class=\"n\">A</span> <span class=\"err\">∈</span> <span class=\"n\">ℓ</span> <span class=\"o\">)</span> <span class=\"bp\">∧</span> <span class=\"o\">(</span> <span class=\"n\">B</span> <span class=\"err\">∈</span> <span class=\"n\">ℓ</span> <span class=\"o\">)</span> <span class=\"o\">:=</span>\n<span class=\"k\">begin</span>\n<span class=\"n\">intros</span> <span class=\"n\">A</span> <span class=\"n\">B</span><span class=\"o\">,</span>\n<span class=\"n\">intro</span> <span class=\"n\">h</span><span class=\"o\">,</span>\n<span class=\"n\">cases</span> <span class=\"n\">I1</span> <span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"n\">h</span> <span class=\"k\">with</span> <span class=\"n\">ℓ</span> <span class=\"n\">h1</span><span class=\"o\">,</span>\n<span class=\"n\">existsi</span> <span class=\"n\">ℓ</span><span class=\"o\">,</span>\n<span class=\"n\">cases</span> <span class=\"n\">h1</span> <span class=\"k\">with</span> <span class=\"n\">H</span><span class=\"o\">,</span>\n<span class=\"n\">exact</span> <span class=\"n\">H</span><span class=\"o\">,</span>\n<span class=\"kn\">end</span>\n\n<span class=\"kn\">lemma</span> <span class=\"n\">I12</span> <span class=\"o\">:</span> <span class=\"bp\">∀</span> <span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"o\">:</span> <span class=\"n\">Points</span><span class=\"o\">,</span> <span class=\"bp\">∀</span> <span class=\"n\">r</span> <span class=\"n\">s</span> <span class=\"o\">:</span> <span class=\"n\">Lines</span><span class=\"o\">,</span> <span class=\"o\">(</span><span class=\"n\">A</span> <span class=\"bp\">≠</span> <span class=\"n\">B</span><span class=\"o\">)</span> <span class=\"bp\">→</span>  <span class=\"o\">(</span><span class=\"n\">A</span> <span class=\"err\">∈</span> <span class=\"n\">r</span><span class=\"o\">)</span> <span class=\"bp\">→</span>  <span class=\"o\">(</span><span class=\"n\">B</span> <span class=\"err\">∈</span> <span class=\"n\">r</span><span class=\"o\">)</span> <span class=\"bp\">→</span>  <span class=\"o\">(</span><span class=\"n\">A</span> <span class=\"err\">∈</span> <span class=\"n\">s</span><span class=\"o\">)</span> <span class=\"bp\">→</span> <span class=\"o\">(</span><span class=\"n\">B</span> <span class=\"err\">∈</span> <span class=\"n\">s</span><span class=\"o\">)</span> <span class=\"bp\">→</span>  <span class=\"n\">r</span> <span class=\"bp\">=</span> <span class=\"n\">s</span> <span class=\"o\">:=</span>\n<span class=\"k\">begin</span>\n<span class=\"n\">intros</span> <span class=\"n\">A</span> <span class=\"n\">B</span><span class=\"o\">,</span>\n<span class=\"n\">intros</span> <span class=\"n\">r</span> <span class=\"n\">s</span><span class=\"o\">,</span>\n<span class=\"n\">intro</span> <span class=\"n\">h</span><span class=\"o\">,</span>\n<span class=\"n\">intro</span> <span class=\"n\">hAr</span><span class=\"o\">,</span>\n<span class=\"n\">intro</span> <span class=\"n\">hBr</span><span class=\"o\">,</span>\n<span class=\"n\">intro</span> <span class=\"n\">hAs</span><span class=\"o\">,</span>\n<span class=\"n\">intro</span> <span class=\"n\">hBs</span><span class=\"o\">,</span>\n<span class=\"n\">cases</span> <span class=\"n\">I1</span> <span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"n\">h</span> <span class=\"k\">with</span> <span class=\"n\">ℓ</span> <span class=\"n\">h1</span><span class=\"o\">,</span>\n<span class=\"n\">transitivity</span> <span class=\"n\">ℓ</span><span class=\"o\">,</span>\n<span class=\"k\">have</span> <span class=\"n\">r_eq_ell</span> <span class=\"o\">:</span> <span class=\"n\">r</span> <span class=\"bp\">=</span> <span class=\"n\">ℓ</span><span class=\"o\">,</span>\n<span class=\"n\">apply</span> <span class=\"n\">h1</span><span class=\"bp\">.</span><span class=\"n\">right</span><span class=\"o\">,</span>\n<span class=\"n\">split</span><span class=\"o\">,</span>\n<span class=\"n\">exact</span> <span class=\"n\">hAr</span><span class=\"o\">,</span>\n<span class=\"n\">exact</span> <span class=\"n\">hBr</span><span class=\"o\">,</span>\n<span class=\"n\">exact</span> <span class=\"n\">r_eq_ell</span><span class=\"o\">,</span>\n<span class=\"k\">have</span> <span class=\"n\">s_eq_ell</span> <span class=\"o\">:</span> <span class=\"n\">s</span> <span class=\"bp\">=</span> <span class=\"n\">ℓ</span><span class=\"o\">,</span>\n<span class=\"n\">apply</span> <span class=\"n\">h1</span><span class=\"bp\">.</span><span class=\"n\">right</span><span class=\"o\">,</span>\n<span class=\"n\">split</span><span class=\"o\">,</span>\n<span class=\"n\">exact</span> <span class=\"n\">hAs</span><span class=\"o\">,</span>\n<span class=\"n\">exact</span> <span class=\"n\">hBs</span><span class=\"o\">,</span>\n<span class=\"n\">symmetry</span><span class=\"o\">,</span>\n<span class=\"n\">exact</span> <span class=\"n\">s_eq_ell</span><span class=\"o\">,</span>\n<span class=\"kn\">end</span>\n\n<span class=\"kn\">lemma</span> <span class=\"n\">there_are_two_points</span> <span class=\"o\">:</span> <span class=\"bp\">∃</span> <span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"o\">:</span> <span class=\"n\">Points</span><span class=\"o\">,</span> <span class=\"o\">(</span><span class=\"n\">A</span> <span class=\"bp\">≠</span> <span class=\"n\">B</span><span class=\"o\">)</span> <span class=\"o\">:=</span>\n<span class=\"k\">begin</span>\n<span class=\"n\">cases</span> <span class=\"n\">I3</span> <span class=\"k\">with</span> <span class=\"n\">A</span> <span class=\"n\">BCh</span><span class=\"o\">,</span>\n<span class=\"n\">cases</span> <span class=\"n\">BCh</span> <span class=\"k\">with</span> <span class=\"n\">B</span> <span class=\"n\">Ch</span><span class=\"o\">,</span>\n<span class=\"n\">cases</span> <span class=\"n\">Ch</span> <span class=\"k\">with</span> <span class=\"n\">C</span> <span class=\"n\">h</span><span class=\"o\">,</span>\n<span class=\"n\">cases</span> <span class=\"n\">h</span> <span class=\"k\">with</span> <span class=\"n\">hh</span><span class=\"o\">,</span>\n<span class=\"n\">existsi</span> <span class=\"n\">A</span><span class=\"o\">,</span>\n<span class=\"n\">existsi</span> <span class=\"n\">B</span><span class=\"o\">,</span>\n<span class=\"n\">exact</span> <span class=\"n\">hh</span><span class=\"o\">,</span>\n<span class=\"kn\">end</span>\n\n<span class=\"kn\">lemma</span> <span class=\"n\">distinct_lines_have_at_most_one_common_point</span> <span class=\"o\">{</span><span class=\"n\">r</span> <span class=\"n\">s</span> <span class=\"o\">:</span> <span class=\"n\">Lines</span><span class=\"o\">}</span> <span class=\"o\">{</span><span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"o\">:</span> <span class=\"n\">Points</span><span class=\"o\">}</span> <span class=\"o\">(</span><span class=\"n\">hrs</span><span class=\"o\">:</span> <span class=\"n\">r</span> <span class=\"bp\">≠</span> <span class=\"n\">s</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">hAr</span><span class=\"o\">:</span> <span class=\"n\">A</span> <span class=\"err\">∈</span> <span class=\"n\">r</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">hAs</span><span class=\"o\">:</span> <span class=\"n\">A</span> <span class=\"err\">∈</span> <span class=\"n\">s</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">hBr</span><span class=\"o\">:</span> <span class=\"n\">B</span> <span class=\"err\">∈</span> <span class=\"n\">r</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">hBs</span><span class=\"o\">:</span> <span class=\"n\">B</span> <span class=\"err\">∈</span> <span class=\"n\">s</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"n\">A</span> <span class=\"bp\">=</span> <span class=\"n\">B</span> <span class=\"o\">:=</span>\n<span class=\"k\">begin</span>\n<span class=\"n\">suffices</span> <span class=\"n\">not_A_eq_B</span> <span class=\"o\">:</span> <span class=\"bp\">¬</span> <span class=\"o\">(</span><span class=\"n\">A</span> <span class=\"bp\">≠</span> <span class=\"n\">B</span><span class=\"o\">),</span>\n<span class=\"n\">cc</span><span class=\"o\">,</span>\n<span class=\"n\">intro</span> <span class=\"n\">h</span><span class=\"o\">,</span>\n<span class=\"n\">suffices</span> <span class=\"n\">Q</span> <span class=\"o\">:</span> <span class=\"n\">r</span> <span class=\"bp\">=</span> <span class=\"n\">s</span><span class=\"o\">,</span>\n<span class=\"n\">contradiction</span><span class=\"o\">,</span>\n<span class=\"n\">exact</span> <span class=\"n\">I12</span> <span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"n\">r</span> <span class=\"n\">s</span> <span class=\"n\">h</span> <span class=\"n\">hAr</span> <span class=\"n\">hBr</span> <span class=\"n\">hAs</span> <span class=\"n\">hBs</span><span class=\"o\">,</span>\n<span class=\"kn\">end</span>\n\n<span class=\"kn\">definition</span> <span class=\"n\">intersect</span> <span class=\"o\">(</span><span class=\"n\">r</span> <span class=\"n\">s</span> <span class=\"o\">:</span> <span class=\"n\">Lines</span><span class=\"o\">)</span> <span class=\"o\">:=</span> <span class=\"bp\">∃</span> <span class=\"n\">A</span> <span class=\"o\">:</span> <span class=\"n\">Points</span><span class=\"o\">,</span> <span class=\"n\">A</span> <span class=\"err\">∈</span> <span class=\"n\">r</span> <span class=\"bp\">∧</span> <span class=\"n\">A</span><span class=\"err\">∈</span> <span class=\"n\">s</span>\n<span class=\"kn\">definition</span> <span class=\"n\">parallel</span> <span class=\"o\">(</span><span class=\"n\">r</span> <span class=\"n\">s</span> <span class=\"o\">:</span> <span class=\"n\">Lines</span><span class=\"o\">)</span> <span class=\"o\">:=</span> <span class=\"o\">(</span><span class=\"n\">r</span> <span class=\"bp\">=</span> <span class=\"n\">s</span><span class=\"o\">)</span> <span class=\"bp\">∨</span> <span class=\"o\">(</span><span class=\"bp\">¬</span> <span class=\"n\">intersect</span> <span class=\"n\">r</span> <span class=\"n\">s</span><span class=\"o\">)</span>\n<span class=\"n\">local</span> <span class=\"kn\">infixl</span> <span class=\"bp\">`||`</span> <span class=\"o\">:=</span> <span class=\"n\">parallel</span>\n\n<span class=\"kn\">constant</span> <span class=\"n\">parallel_postulate</span> <span class=\"o\">{</span><span class=\"n\">A</span> <span class=\"o\">:</span> <span class=\"n\">Points</span><span class=\"o\">}</span> <span class=\"o\">{</span><span class=\"n\">ℓ</span> <span class=\"n\">r</span> <span class=\"n\">s</span> <span class=\"o\">:</span> <span class=\"n\">Lines</span><span class=\"o\">}</span> <span class=\"o\">:</span> <span class=\"n\">A</span> <span class=\"err\">∈</span> <span class=\"n\">r</span> <span class=\"bp\">∧</span> <span class=\"n\">A</span> <span class=\"err\">∈</span> <span class=\"n\">s</span> <span class=\"bp\">∧</span> <span class=\"n\">r</span> <span class=\"bp\">||</span> <span class=\"n\">ℓ</span> <span class=\"bp\">∧</span> <span class=\"n\">s</span> <span class=\"bp\">||</span> <span class=\"n\">ℓ</span> <span class=\"bp\">→</span> <span class=\"n\">r</span> <span class=\"bp\">=</span> <span class=\"n\">s</span>\n\n<span class=\"kn\">constant</span> <span class=\"n\">between</span> <span class=\"o\">:</span> <span class=\"n\">Points</span> <span class=\"bp\">→</span> <span class=\"n\">Points</span> <span class=\"bp\">→</span> <span class=\"n\">Points</span> <span class=\"bp\">→</span> <span class=\"kt\">Prop</span>\n<span class=\"kn\">notation</span> <span class=\"n\">A</span> <span class=\"bp\">`*`</span> <span class=\"n\">B</span> <span class=\"bp\">`*`</span> <span class=\"n\">C</span> <span class=\"o\">:=</span> <span class=\"n\">between</span> <span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"n\">C</span>\n<span class=\"kn\">definition</span> <span class=\"n\">colinear</span> <span class=\"o\">(</span><span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"n\">C</span> <span class=\"o\">:</span> <span class=\"n\">Points</span><span class=\"o\">)</span> <span class=\"o\">:=</span> <span class=\"bp\">∃</span> <span class=\"n\">ℓ</span> <span class=\"o\">:</span> <span class=\"n\">Lines</span><span class=\"o\">,</span> <span class=\"n\">A</span> <span class=\"err\">∈</span> <span class=\"n\">ℓ</span> <span class=\"bp\">∧</span> <span class=\"n\">B</span> <span class=\"err\">∈</span> <span class=\"n\">ℓ</span> <span class=\"bp\">∧</span> <span class=\"n\">C</span> <span class=\"err\">∈</span> <span class=\"n\">ℓ</span>\n<span class=\"c1\">-- definition noncolinear (A B C : Points) := ¬ colinear A B C</span>\n\n<span class=\"kn\">constant</span> <span class=\"n\">B11</span> <span class=\"o\">{</span><span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"n\">C</span> <span class=\"o\">:</span> <span class=\"n\">Points</span><span class=\"o\">}</span> <span class=\"o\">:</span> <span class=\"o\">(</span><span class=\"n\">A</span> <span class=\"bp\">*</span> <span class=\"n\">B</span> <span class=\"bp\">*</span> <span class=\"n\">C</span><span class=\"o\">)</span> <span class=\"bp\">→</span> <span class=\"o\">(</span><span class=\"n\">C</span> <span class=\"bp\">*</span> <span class=\"n\">B</span> <span class=\"bp\">*</span> <span class=\"n\">A</span><span class=\"o\">)</span>\n<span class=\"kn\">constant</span> <span class=\"n\">B12</span> <span class=\"o\">{</span><span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"n\">C</span> <span class=\"o\">:</span> <span class=\"n\">Points</span><span class=\"o\">}</span> <span class=\"o\">:</span> <span class=\"o\">(</span><span class=\"n\">A</span> <span class=\"bp\">*</span> <span class=\"n\">B</span> <span class=\"bp\">*</span> <span class=\"n\">C</span><span class=\"o\">)</span> <span class=\"bp\">→</span> <span class=\"o\">(</span><span class=\"n\">A</span> <span class=\"bp\">≠</span> <span class=\"n\">B</span> <span class=\"bp\">∧</span> <span class=\"n\">A</span> <span class=\"bp\">≠</span> <span class=\"n\">C</span> <span class=\"bp\">∧</span> <span class=\"n\">B</span> <span class=\"bp\">≠</span> <span class=\"n\">C</span> <span class=\"bp\">∧</span> <span class=\"n\">colinear</span> <span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"n\">C</span><span class=\"o\">)</span>\n<span class=\"kn\">constant</span> <span class=\"n\">B2</span> <span class=\"o\">{</span><span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"o\">:</span> <span class=\"n\">Points</span><span class=\"o\">}</span> <span class=\"o\">:</span> <span class=\"bp\">∃</span> <span class=\"n\">C</span><span class=\"o\">,</span> <span class=\"n\">A</span> <span class=\"bp\">*</span> <span class=\"n\">B</span> <span class=\"bp\">*</span> <span class=\"n\">C</span>\n<span class=\"kn\">constant</span> <span class=\"n\">B3</span> <span class=\"o\">{</span><span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"n\">C</span> <span class=\"o\">:</span> <span class=\"n\">Points</span><span class=\"o\">}</span> <span class=\"o\">{</span><span class=\"n\">ℓ</span> <span class=\"o\">:</span> <span class=\"n\">Lines</span><span class=\"o\">}</span> <span class=\"o\">:</span> <span class=\"o\">(</span><span class=\"n\">A</span> <span class=\"bp\">≠</span> <span class=\"n\">B</span> <span class=\"bp\">∧</span> <span class=\"n\">A</span> <span class=\"bp\">≠</span> <span class=\"n\">C</span> <span class=\"bp\">∧</span> <span class=\"n\">B</span> <span class=\"bp\">≠</span> <span class=\"n\">C</span> <span class=\"bp\">∧</span> <span class=\"n\">A</span> <span class=\"err\">∈</span> <span class=\"n\">ℓ</span> <span class=\"bp\">∧</span> <span class=\"n\">B</span> <span class=\"err\">∈</span> <span class=\"n\">ℓ</span> <span class=\"bp\">∧</span> <span class=\"n\">C</span> <span class=\"err\">∈</span> <span class=\"n\">ℓ</span><span class=\"o\">)</span> <span class=\"bp\">→</span> <span class=\"o\">((</span><span class=\"n\">A</span> <span class=\"bp\">*</span> <span class=\"n\">B</span> <span class=\"bp\">*</span> <span class=\"n\">C</span><span class=\"o\">)</span> <span class=\"bp\">∧</span> <span class=\"bp\">¬</span><span class=\"o\">(</span> <span class=\"n\">B</span> <span class=\"bp\">*</span> <span class=\"n\">A</span> <span class=\"bp\">*</span> <span class=\"n\">C</span> <span class=\"o\">)</span> <span class=\"bp\">∧</span> <span class=\"bp\">¬</span> <span class=\"o\">(</span><span class=\"n\">A</span> <span class=\"bp\">*</span> <span class=\"n\">C</span> <span class=\"bp\">*</span> <span class=\"n\">B</span><span class=\"o\">))</span> <span class=\"bp\">∨</span> <span class=\"o\">(</span><span class=\"bp\">¬</span> <span class=\"o\">(</span><span class=\"n\">A</span> <span class=\"bp\">*</span> <span class=\"n\">B</span> <span class=\"bp\">*</span> <span class=\"n\">C</span><span class=\"o\">)</span> <span class=\"bp\">∧</span> <span class=\"o\">(</span> <span class=\"n\">B</span> <span class=\"bp\">*</span> <span class=\"n\">A</span> <span class=\"bp\">*</span> <span class=\"n\">C</span> <span class=\"o\">)</span> <span class=\"bp\">∧</span> <span class=\"bp\">¬</span> <span class=\"o\">(</span><span class=\"n\">A</span> <span class=\"bp\">*</span> <span class=\"n\">C</span> <span class=\"bp\">*</span> <span class=\"n\">B</span><span class=\"o\">))</span> <span class=\"bp\">∨</span> <span class=\"o\">(</span><span class=\"bp\">¬</span> <span class=\"o\">(</span><span class=\"n\">A</span> <span class=\"bp\">*</span> <span class=\"n\">B</span> <span class=\"bp\">*</span> <span class=\"n\">C</span><span class=\"o\">)</span> <span class=\"bp\">∧</span> <span class=\"bp\">¬</span><span class=\"o\">(</span> <span class=\"n\">B</span> <span class=\"bp\">*</span> <span class=\"n\">A</span> <span class=\"bp\">*</span> <span class=\"n\">C</span> <span class=\"o\">)</span> <span class=\"bp\">∧</span> <span class=\"o\">(</span><span class=\"n\">A</span> <span class=\"bp\">*</span> <span class=\"n\">C</span> <span class=\"bp\">*</span> <span class=\"n\">B</span><span class=\"o\">))</span>\n<span class=\"c1\">-- constant B4 {A B C D: Points} {ℓ : Lines}: (noncolinear A B C) ∧ (¬ A ∈ ℓ) ∧ (¬ B ∈ ℓ) ∧ (¬ C ∈ ℓ) ∧ (D ∈ ℓ) ∧ (A * D * B)  → (∃ E : Points, (A * E * C) xor (B * E * C))</span>\n\n<span class=\"n\">def</span> <span class=\"n\">line_segment</span> <span class=\"o\">(</span><span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"o\">:</span> <span class=\"n\">Points</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"n\">set</span> <span class=\"n\">Points</span> <span class=\"o\">:=</span> <span class=\"o\">{</span><span class=\"n\">A</span><span class=\"o\">}</span> <span class=\"err\">∪</span> <span class=\"o\">{</span><span class=\"n\">B</span><span class=\"o\">}</span> <span class=\"err\">∪</span> <span class=\"o\">{</span><span class=\"n\">C</span> <span class=\"o\">:</span> <span class=\"n\">Points</span> <span class=\"bp\">|</span> <span class=\"n\">A</span> <span class=\"bp\">*</span> <span class=\"n\">C</span> <span class=\"bp\">*</span> <span class=\"n\">B</span><span class=\"o\">}</span>\n<span class=\"n\">local</span> <span class=\"kn\">infix</span> <span class=\"bp\">`#`</span> <span class=\"o\">:=</span> <span class=\"n\">line_segment</span>\n\n<span class=\"n\">def</span> <span class=\"n\">triangle</span> <span class=\"o\">(</span><span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"n\">C</span> <span class=\"o\">:</span> <span class=\"n\">Points</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">h</span><span class=\"o\">:</span> <span class=\"n\">colinear</span> <span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"n\">C</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"n\">set</span> <span class=\"n\">Points</span> <span class=\"o\">:=</span> <span class=\"n\">A</span><span class=\"bp\">#</span><span class=\"n\">B</span> <span class=\"err\">∪</span> <span class=\"n\">A</span><span class=\"bp\">#</span><span class=\"n\">C</span> <span class=\"err\">∪</span> <span class=\"n\">B</span><span class=\"bp\">#</span><span class=\"n\">C</span>\n\n<span class=\"kn\">lemma</span> <span class=\"n\">segments_are_symmetric</span><span class=\"o\">:</span> <span class=\"bp\">∀</span> <span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"o\">:</span> <span class=\"n\">Points</span><span class=\"o\">,</span> <span class=\"n\">A</span> <span class=\"bp\">#</span> <span class=\"n\">B</span> <span class=\"bp\">=</span> <span class=\"n\">B</span> <span class=\"bp\">#</span> <span class=\"n\">A</span> <span class=\"o\">:=</span>\n<span class=\"k\">begin</span>\n<span class=\"n\">intros</span> <span class=\"n\">A</span> <span class=\"n\">B</span><span class=\"o\">,</span>\n<span class=\"n\">rw</span> <span class=\"n\">set</span><span class=\"bp\">.</span><span class=\"n\">subset</span><span class=\"bp\">.</span><span class=\"n\">antisymm_iff</span><span class=\"o\">,</span>\n<span class=\"n\">split</span><span class=\"o\">,</span>\n<span class=\"n\">intro</span> <span class=\"n\">x</span><span class=\"o\">,</span>\n<span class=\"n\">intro</span> <span class=\"n\">h</span><span class=\"o\">,</span>\n<span class=\"k\">have</span> <span class=\"n\">hh</span> <span class=\"o\">:</span> <span class=\"n\">x</span> <span class=\"bp\">=</span> <span class=\"n\">A</span> <span class=\"bp\">∨</span> <span class=\"n\">x</span> <span class=\"bp\">=</span> <span class=\"n\">B</span> <span class=\"bp\">∨</span> <span class=\"n\">A</span> <span class=\"bp\">*</span> <span class=\"n\">x</span> <span class=\"bp\">*</span> <span class=\"n\">B</span><span class=\"o\">,</span>\n<span class=\"o\">{</span>\n<span class=\"n\">cases</span> <span class=\"n\">h</span> <span class=\"k\">with</span> <span class=\"n\">h1</span> <span class=\"n\">h2</span><span class=\"o\">,</span>\n<span class=\"n\">cases</span> <span class=\"n\">h1</span> <span class=\"k\">with</span> <span class=\"n\">ha</span> <span class=\"n\">hb</span><span class=\"o\">,</span>\n<span class=\"n\">left</span><span class=\"o\">,</span>\n<span class=\"n\">cases</span> <span class=\"n\">ha</span><span class=\"o\">,</span>\n<span class=\"n\">exact</span> <span class=\"n\">ha</span><span class=\"o\">,</span>\n<span class=\"n\">exfalso</span><span class=\"o\">,</span>\n<span class=\"n\">exact</span> <span class=\"n\">ha</span><span class=\"o\">,</span>\n<span class=\"n\">cases</span> <span class=\"n\">hb</span><span class=\"o\">,</span>\n<span class=\"n\">right</span><span class=\"o\">,</span>\n<span class=\"n\">left</span><span class=\"o\">,</span>\n<span class=\"n\">exact</span> <span class=\"n\">hb</span><span class=\"o\">,</span>\n<span class=\"n\">exfalso</span><span class=\"o\">,</span>\n<span class=\"n\">exact</span> <span class=\"n\">hb</span><span class=\"o\">,</span>\n<span class=\"n\">right</span><span class=\"o\">,</span>\n<span class=\"n\">right</span><span class=\"o\">,</span>\n<span class=\"n\">exact</span> <span class=\"n\">h2</span><span class=\"o\">,</span>\n<span class=\"o\">},</span>\n<span class=\"n\">cases</span> <span class=\"n\">hh</span> <span class=\"k\">with</span> <span class=\"n\">H1</span> <span class=\"n\">H2</span><span class=\"o\">,</span>\n<span class=\"n\">left</span><span class=\"o\">,</span>\n<span class=\"n\">right</span><span class=\"o\">,</span>\n<span class=\"n\">rw</span> <span class=\"n\">set</span><span class=\"bp\">.</span><span class=\"n\">singleton_def</span><span class=\"o\">,</span>\n<span class=\"n\">left</span><span class=\"o\">,</span>\n<span class=\"n\">exact</span> <span class=\"n\">H1</span><span class=\"o\">,</span>\n<span class=\"n\">cases</span> <span class=\"n\">H2</span> <span class=\"k\">with</span> <span class=\"n\">H</span> <span class=\"n\">G</span><span class=\"o\">,</span>\n<span class=\"n\">left</span><span class=\"o\">,</span>\n<span class=\"n\">left</span><span class=\"o\">,</span>\n<span class=\"n\">rw</span> <span class=\"n\">set</span><span class=\"bp\">.</span><span class=\"n\">singleton_def</span><span class=\"o\">,</span>\n<span class=\"n\">left</span><span class=\"o\">,</span>\n<span class=\"n\">exact</span> <span class=\"n\">H</span><span class=\"o\">,</span>\n<span class=\"n\">right</span><span class=\"o\">,</span>\n<span class=\"bp\">...</span>\n<span class=\"kn\">end</span>\n</pre></div>\n\n\n<p>I am trying to prove that the segments AB and BA are the same, and I'm having lots of trouble. The \"math\" way to prove it is:<br>\nrecall that AB is defined to be the union of {A}, {B} and the points in between A and B. We have axiom I12 which says that x is betwen A and B implies x is between B and A. So <em>obviously</em> the segments AB and BA are equal. What I do in Lean is quite longer, but first I turn to a double inclusion (I would like to know how to prove the second one \"by symmetry\"), and I'm trying to finish one of the inclusions. I'm at the point where it's \"enough\" to apply axiom I12: my goal looks like:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"n\">x</span> <span class=\"o\">:</span> <span class=\"n\">Points</span><span class=\"o\">,</span>\n<span class=\"n\">h</span> <span class=\"o\">:</span> <span class=\"n\">x</span> <span class=\"err\">∈</span> <span class=\"n\">A</span><span class=\"bp\">#</span><span class=\"n\">B</span><span class=\"o\">,</span>\n<span class=\"n\">G</span> <span class=\"o\">:</span> <span class=\"n\">A</span> <span class=\"bp\">*</span> <span class=\"n\">x</span><span class=\"bp\">*</span><span class=\"n\">B</span>\n<span class=\"err\">⊢</span> <span class=\"n\">x</span> <span class=\"err\">∈</span> <span class=\"o\">{</span><span class=\"n\">C</span> <span class=\"o\">:</span> <span class=\"n\">Points</span> <span class=\"bp\">|</span> <span class=\"n\">B</span> <span class=\"bp\">*</span> <span class=\"n\">C</span><span class=\"bp\">*</span><span class=\"n\">A</span><span class=\"o\">}</span>\n</pre></div>\n\n\n<p>and I want to tell Lean to \"expand\" hypothesis G and use I12. Any hints?</p>",
        "id": 185691667,
        "sender_full_name": "Marc Masdeu",
        "timestamp": 1579090521
    },
    {
        "content": "<p>Ooof, some of your lines are quite long (-;</p>",
        "id": 185691875,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1579090731
    },
    {
        "content": "<p>In your definition of <code>triangle</code>, I think you want <code>¬ colinear A B C</code></p>",
        "id": 185692019,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1579090886
    },
    {
        "content": "<p>Also, the Lean keyword for <code>...</code> is <code>sorry</code></p>",
        "id": 185692205,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1579091040
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"254058\">@Marc Masdeu</span> Here is one way to use symmetry to reduce to 1 inclusion:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"k\">begin</span>\n  <span class=\"n\">suffices</span> <span class=\"o\">:</span> <span class=\"bp\">∀</span> <span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"o\">:</span> <span class=\"n\">Points</span><span class=\"o\">,</span> <span class=\"n\">A</span> <span class=\"bp\">#</span> <span class=\"n\">B</span> <span class=\"err\">⊆</span> <span class=\"n\">B</span> <span class=\"bp\">#</span> <span class=\"n\">A</span><span class=\"o\">,</span>\n  <span class=\"o\">{</span> <span class=\"n\">intros</span> <span class=\"n\">A</span> <span class=\"n\">B</span><span class=\"o\">,</span> <span class=\"n\">apply</span> <span class=\"n\">set</span><span class=\"bp\">.</span><span class=\"n\">subset</span><span class=\"bp\">.</span><span class=\"n\">antisymm</span><span class=\"bp\">;</span> <span class=\"n\">solve_by_elim</span> <span class=\"o\">},</span>\n  <span class=\"n\">intros</span> <span class=\"n\">A</span> <span class=\"n\">B</span><span class=\"o\">,</span>\n<span class=\"n\">intro</span> <span class=\"n\">x</span><span class=\"o\">,</span>\n<span class=\"n\">intro</span> <span class=\"n\">h</span><span class=\"o\">,</span>\n<span class=\"n\">sorry</span>\n</pre></div>",
        "id": 185692448,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1579091214
    },
    {
        "content": "<p>Ideally, the <code>wlog</code> tactic would do this for you. But I usually end up in a big fight if I try to use it.</p>",
        "id": 185692472,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1579091237
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"254058\">@Marc Masdeu</span> Here's another hint: First prove two lemmas <code>A ∈ A#B</code> and <code>B ∈ A#B</code>. They will be useful in lots of places.</p>",
        "id": 185692716,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1579091427
    },
    {
        "content": "<p>Also, you overwrote the standard meaning of <code>∈</code>, so my suggestions no longer typecheck</p>",
        "id": 185692864,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1579091587
    },
    {
        "content": "<div class=\"codehilite\"><pre><span></span><span class=\"kn\">lemma</span> <span class=\"n\">segments_are_symmetric</span><span class=\"o\">:</span> <span class=\"bp\">∀</span> <span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"o\">:</span> <span class=\"n\">Points</span><span class=\"o\">,</span> <span class=\"n\">A</span> <span class=\"bp\">#</span> <span class=\"n\">B</span> <span class=\"bp\">=</span> <span class=\"n\">B</span> <span class=\"bp\">#</span> <span class=\"n\">A</span> <span class=\"o\">:=</span>\n<span class=\"k\">begin</span>\n  <span class=\"n\">suffices</span> <span class=\"o\">:</span> <span class=\"bp\">∀</span> <span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"o\">:</span> <span class=\"n\">Points</span><span class=\"o\">,</span> <span class=\"n\">A</span> <span class=\"bp\">#</span> <span class=\"n\">B</span> <span class=\"err\">⊆</span> <span class=\"n\">B</span> <span class=\"bp\">#</span> <span class=\"n\">A</span><span class=\"o\">,</span>\n  <span class=\"o\">{</span> <span class=\"n\">intros</span> <span class=\"n\">A</span> <span class=\"n\">B</span><span class=\"o\">,</span> <span class=\"n\">apply</span> <span class=\"n\">set</span><span class=\"bp\">.</span><span class=\"n\">subset</span><span class=\"bp\">.</span><span class=\"n\">antisymm</span><span class=\"bp\">;</span> <span class=\"n\">solve_by_elim</span> <span class=\"o\">},</span>\n  <span class=\"n\">intros</span> <span class=\"n\">A</span> <span class=\"n\">B</span><span class=\"o\">,</span>\n  <span class=\"n\">intros</span> <span class=\"n\">x</span> <span class=\"n\">h</span><span class=\"o\">,</span>\n  <span class=\"n\">rcases</span> <span class=\"n\">h</span> <span class=\"k\">with</span> <span class=\"bp\">⟨⟨</span><span class=\"n\">rfl</span> <span class=\"bp\">|</span> <span class=\"bp\">⟨⟨⟩⟩⟩</span> <span class=\"bp\">|</span> <span class=\"n\">rfl</span> <span class=\"bp\">|</span> <span class=\"bp\">⟨⟨⟩⟩⟩</span> <span class=\"bp\">|</span> <span class=\"n\">h</span><span class=\"o\">,</span>\n  <span class=\"o\">{</span> <span class=\"n\">unfold</span> <span class=\"n\">line_segment</span><span class=\"o\">,</span> <span class=\"n\">finish</span> <span class=\"o\">},</span>\n  <span class=\"o\">{</span> <span class=\"n\">unfold</span> <span class=\"n\">line_segment</span><span class=\"o\">,</span> <span class=\"n\">finish</span> <span class=\"o\">},</span>\n  <span class=\"o\">{</span> <span class=\"n\">unfold</span> <span class=\"n\">line_segment</span><span class=\"o\">,</span> <span class=\"k\">have</span> <span class=\"o\">:=</span> <span class=\"n\">B11</span> <span class=\"n\">h</span><span class=\"o\">,</span> <span class=\"n\">finish</span> <span class=\"o\">},</span>\n<span class=\"kn\">end</span>\n</pre></div>",
        "id": 185693216,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1579091957
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"254058\">@Marc Masdeu</span> I found that crazy <code>rcases</code> line, by writing <code>rcases? h</code> and copying from the message window.</p>",
        "id": 185693251,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1579091991
    },
    {
        "content": "<p>All those weird brackets and <code>rfl</code>s tell Lean that most of the things you need to do are really very trivial.</p>",
        "id": 185693316,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1579092018
    },
    {
        "content": "<p>What remains are the (mildly <span aria-label=\"wink\" class=\"emoji emoji-1f609\" role=\"img\" title=\"wink\">:wink:</span>) interesting cases.</p>",
        "id": 185693332,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1579092033
    },
    {
        "content": "<p><code>finish</code> is a tactic that says: \"Given the current hypothesis, this is elementary logic. I can do that.\"</p>",
        "id": 185693537,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1579092177
    },
    {
        "content": "<p>Just for fun I did this too without looking at Johan's, I think they're fundamentally the same? I didn't know the crazy <code>rcases</code> thing though.</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"kn\">lemma</span> <span class=\"n\">segments_are_symmetric</span><span class=\"o\">:</span> <span class=\"bp\">∀</span> <span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"o\">:</span> <span class=\"n\">Points</span><span class=\"o\">,</span> <span class=\"n\">A</span> <span class=\"bp\">#</span> <span class=\"n\">B</span> <span class=\"bp\">=</span> <span class=\"n\">B</span> <span class=\"bp\">#</span> <span class=\"n\">A</span> <span class=\"o\">:=</span>\n<span class=\"k\">begin</span>\n<span class=\"n\">suffices</span> <span class=\"o\">:</span> <span class=\"bp\">∀</span> <span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"o\">:</span> <span class=\"n\">Points</span><span class=\"o\">,</span> <span class=\"n\">A</span> <span class=\"bp\">#</span> <span class=\"n\">B</span> <span class=\"err\">⊆</span> <span class=\"n\">B</span> <span class=\"bp\">#</span> <span class=\"n\">A</span><span class=\"o\">,</span>\n<span class=\"o\">{</span>\n  <span class=\"n\">intros</span><span class=\"o\">,</span>\n  <span class=\"n\">exact</span> <span class=\"n\">le_antisymm</span> <span class=\"o\">(</span><span class=\"n\">this</span> <span class=\"n\">A</span> <span class=\"n\">B</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">this</span> <span class=\"n\">B</span> <span class=\"n\">A</span><span class=\"o\">),</span><span class=\"c1\">-- i just typed library_search to get this,</span>\n<span class=\"o\">},</span>\n<span class=\"n\">rintros</span> <span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"n\">x</span> <span class=\"n\">hx</span><span class=\"o\">,</span>\n<span class=\"n\">unfold</span> <span class=\"n\">line_segment</span> <span class=\"n\">at</span> <span class=\"bp\">*</span><span class=\"o\">,</span>\n<span class=\"n\">simp</span> <span class=\"n\">at</span> <span class=\"bp\">*</span><span class=\"o\">,</span>\n<span class=\"n\">rw</span> <span class=\"n\">or</span><span class=\"bp\">.</span><span class=\"n\">assoc</span> <span class=\"n\">at</span> <span class=\"n\">hx</span><span class=\"o\">,</span>\n<span class=\"n\">apply</span> <span class=\"n\">or</span><span class=\"bp\">.</span><span class=\"n\">elim3</span> <span class=\"n\">hx</span><span class=\"o\">,</span>\n<span class=\"n\">all_goals</span> <span class=\"o\">{</span><span class=\"n\">intros</span><span class=\"o\">,</span><span class=\"n\">try</span><span class=\"o\">{</span><span class=\"n\">cc</span><span class=\"o\">},},</span>\n<span class=\"n\">apply</span> <span class=\"n\">or</span><span class=\"bp\">.</span><span class=\"n\">intro_right</span><span class=\"o\">,</span>\n<span class=\"n\">exact</span> <span class=\"n\">B11</span> <span class=\"n\">a</span><span class=\"o\">,</span>\n<span class=\"kn\">end</span>\n</pre></div>",
        "id": 185694276,
        "sender_full_name": "Alex J. Best",
        "timestamp": 1579092816
    },
    {
        "content": "<p>Thanks guys, I'm studying your solutions now...</p>",
        "id": 185695141,
        "sender_full_name": "Marc Masdeu",
        "timestamp": 1579093488
    },
    {
        "content": "<p>About <span class=\"user-mention\" data-user-id=\"112680\">@Johan Commelin</span> complaint about long lines: I definitely agree with it, but how would you go about writing the simple statement \"Given three distinct points on a line, exactly one of them is between the other two\" in a concise way?</p>",
        "id": 185695410,
        "sender_full_name": "Marc Masdeu",
        "timestamp": 1579093685
    },
    {
        "content": "<p>I guess Johan just means put some line breaks in at natural looking points (lean won't care)</p>",
        "id": 185695504,
        "sender_full_name": "Alex J. Best",
        "timestamp": 1579093782
    },
    {
        "content": "<blockquote>\n<p>I guess Johan just means put some line breaks in at natural looking points (lean won't care)</p>\n</blockquote>\n<p>Oh <span aria-label=\"sweat smile\" class=\"emoji emoji-1f605\" role=\"img\" title=\"sweat smile\">:sweat_smile:</span></p>",
        "id": 185696350,
        "sender_full_name": "Marc Masdeu",
        "timestamp": 1579094444
    },
    {
        "content": "<blockquote>\n<p>Also, you overwrote the standard meaning of <code>∈</code>, so my suggestions no longer typecheck</p>\n</blockquote>\n<p><span class=\"user-mention\" data-user-id=\"112680\">@Johan Commelin</span> to solve this, I have decided to go back to set theory. That means that Points should be a set, and that Lines should be a set of sets of points. If I initialize</p>\n<div class=\"codehilite\"><pre><span></span>Points : set Type u\nLines : set set Points\n</pre></div>\n\n\n<p>then my axioms start to misbehave, because <em>I assume</em> that it doesn't make sense to write A : Points and instead I should write someting like A \\in Points. Am I right?</p>",
        "id": 185697184,
        "sender_full_name": "Marc Masdeu",
        "timestamp": 1579095133
    },
    {
        "content": "<p>I would be tempted to let points be in a type, and lines be subsets of points, if you want to go down the subset route.</p>",
        "id": 185697524,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1579095431
    },
    {
        "content": "<p>one would first have to prove <code>lines.ext</code> then</p>",
        "id": 185697562,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1579095474
    },
    {
        "content": "<p>I can prove that</p>",
        "id": 185697825,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1579095648
    },
    {
        "content": "<p>it follows from <code>propext</code></p>",
        "id": 185697846,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1579095671
    },
    {
        "content": "<blockquote>\n<p>I would be tempted to let points be in a type, and lines be subsets of points, if you want to go down the subset route.</p>\n</blockquote>\n<p>I have two reasons to do that: I am trying to copy Hartshorne's UTM book and he defines points to be a set. The second reason is so that in this way I don't need to define what A \\in ell means.</p>\n<p>Your intermediate approach seems to solve my second concern, I will try that.</p>",
        "id": 185697892,
        "sender_full_name": "Marc Masdeu",
        "timestamp": 1579095718
    },
    {
        "content": "<blockquote>\n<p>one would first have to prove <code>lines.ext</code> then</p>\n</blockquote>\n<p>What is that?</p>",
        "id": 185697946,
        "sender_full_name": "Marc Masdeu",
        "timestamp": 1579095733
    },
    {
        "content": "<blockquote>\n<p>he defines points to be a set</p>\n</blockquote>\n<p>That's because he's thinking about framing things in terms of set theory. There are two kinds of sets. There are subsets of a given set, like the even numbers, and there are generic sets about which we know nothing -- and in type theory those are types.</p>",
        "id": 185697986,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1579095790
    },
    {
        "content": "<p><code>lines.ext</code> is the statement that two lines are equal if and only for all points P, P is in line 1 iff it's in line 2. One can prove this in Lean no problem.</p>",
        "id": 185698012,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1579095820
    },
    {
        "content": "<p>In contrast to the \"generic\" set of points, a line is a subset. Subsets are different to sets.</p>",
        "id": 185698183,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1579095935
    },
    {
        "content": "<p>And two subsets are not automatically equal iff they contain the same elements? I am getting lost.</p>",
        "id": 185698258,
        "sender_full_name": "Marc Masdeu",
        "timestamp": 1579095979
    },
    {
        "content": "<p>I don't know anything about the various ways of doing this stuff. I know that Ali Sever followed Tarski, and IIRC a line was an abstract type. What does Hartshorne do?</p>",
        "id": 185698260,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1579095982
    },
    {
        "content": "<blockquote>\n<p>And two subsets are not automatically equal iff they contain the same elements? I am getting lost.</p>\n</blockquote>\n<p>It is a trivial theorem, but it is not true by definition.</p>",
        "id": 185698285,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1579096005
    },
    {
        "content": "<p>In fact it is equivalent to propositional extensionality, which is talked about at great length <a href=\"https://leanprover.github.io/theorem_proving_in_lean/axioms_and_computation.html#propositional-extensionality\" target=\"_blank\" title=\"https://leanprover.github.io/theorem_proving_in_lean/axioms_and_computation.html#propositional-extensionality\">here</a>. As a mathematician you should just ignore all this. Kenny is a constructivist, he is just trolling really.</p>",
        "id": 185698337,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1579096069
    },
    {
        "content": "<p>Remember that in set theory there is an axiom which says that two sets with the same elements are equal.</p>",
        "id": 185698391,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1579096093
    },
    {
        "content": "<p>Equal sets have the same elements -- this is obvious. Sets with the same elements are equal -- this is a theorem, whose one-line proof is \"it's an axiom\"</p>",
        "id": 185698450,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1579096157
    },
    {
        "content": "<p>so you will have to supply a one-line proof ;-)</p>",
        "id": 185698470,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1579096175
    },
    {
        "content": "<p>From Hartshorne: \"We simply postulate a set, whose elements are called <em>points</em>, together with certain subsets, which we call <em>lines</em>. We do not say what the points are, nor which subsets form lines, but we do require that these undefined notions obey certain axioms...\"</p>",
        "id": 185698482,
        "sender_full_name": "Marc Masdeu",
        "timestamp": 1579096185
    },
    {
        "content": "<p>OK so you should make a type of points, and let lines be subsets. Then everything will work just the way Hartshorne wants.</p>",
        "id": 185698608,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1579096254
    },
    {
        "content": "<blockquote>\n<p>Equal sets have the same elements -- this is obvious. Sets with the same elements are equal -- this is a theorem, whose one-line proof is \"it's an axiom\"</p>\n</blockquote>\n<p>Oh. And Lean standard doesn't come with these theorems proven for you? I would imagine that if Lean knows what a set is, then it knows all the basic theorems on set theory.</p>",
        "id": 185698714,
        "sender_full_name": "Marc Masdeu",
        "timestamp": 1579096323
    },
    {
        "content": "<p>The difference between type theory and set theory is that in type theory, the only sets you can have are subsets of a fixed set. It took me a long time to realise that mathematicians use the concept of set in two different ways.</p>",
        "id": 185698727,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1579096334
    },
    {
        "content": "<p>It could easily be a theorem in core Lean. Kenny is just trolling. He seems to have caused you a great deal of confusion. There is nothing special about <code>lines.ext</code>. You will have to prove lots of theorems.</p>",
        "id": 185698775,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1579096385
    },
    {
        "content": "<p>The point is that if you make a new <em>definition</em> (e.g. <code>lines</code>) then you will have to prove lots of theorems about that definition.</p>",
        "id": 185698841,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1579096432
    },
    {
        "content": "<p>Oh I see. And yes, I'm becoming more confused the more I learn. This is fine, though!</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"kn\">import</span> <span class=\"n\">tactic</span>\n<span class=\"n\">local</span> <span class=\"n\">attribute</span> <span class=\"o\">[</span><span class=\"kn\">instance</span><span class=\"o\">,</span> <span class=\"n\">priority</span> <span class=\"mi\">0</span><span class=\"o\">]</span> <span class=\"n\">classical</span><span class=\"bp\">.</span><span class=\"n\">prop_decidable</span>\n\n<span class=\"n\">noncomputable</span> <span class=\"n\">theory</span>\n<span class=\"n\">open_locale</span> <span class=\"n\">classical</span>\n\n<span class=\"kn\">universe</span> <span class=\"n\">u</span>\n<span class=\"kn\">constant</span> <span class=\"n\">Points</span> <span class=\"o\">:</span> <span class=\"kt\">Type</span> <span class=\"n\">u</span>\n<span class=\"kn\">constant</span> <span class=\"n\">Lines</span> <span class=\"o\">:</span> <span class=\"n\">set</span> <span class=\"o\">(</span><span class=\"n\">set</span> <span class=\"n\">Points</span><span class=\"o\">)</span>\n<span class=\"kn\">constant</span> <span class=\"n\">I1</span> <span class=\"o\">:</span> <span class=\"bp\">∀</span> <span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"o\">:</span> <span class=\"n\">Points</span><span class=\"o\">,</span>  <span class=\"n\">A</span> <span class=\"bp\">≠</span> <span class=\"n\">B</span> <span class=\"bp\">→</span> <span class=\"bp\">∃!</span> <span class=\"n\">ℓ</span> <span class=\"o\">:</span> <span class=\"n\">Lines</span><span class=\"o\">,</span> <span class=\"o\">(</span> <span class=\"n\">A</span> <span class=\"err\">∈</span> <span class=\"n\">ℓ</span> <span class=\"o\">)</span> <span class=\"bp\">∧</span> <span class=\"o\">(</span> <span class=\"n\">B</span> <span class=\"err\">∈</span> <span class=\"n\">ℓ</span> <span class=\"o\">)</span>\n</pre></div>\n\n\n<p>Why does Lean complain in the last line?</p>\n<p>---- &gt; I figured it out! Now Lines is a set :-)</p>",
        "id": 185698957,
        "sender_full_name": "Marc Masdeu",
        "timestamp": 1579096505
    },
    {
        "content": "<p>Take a look at <a href=\"https://github.com/leanprover-community/mathlib/blob/master/src/data/complex/basic.lean\" target=\"_blank\" title=\"https://github.com/leanprover-community/mathlib/blob/master/src/data/complex/basic.lean\">the way Lean does complex numbers</a>. A new definition, and then immediately you have to prove a bunch of trivial theorems about <code>complex</code>. Lean might have lots of theorems about sets, but if you define <code>lines</code> then you have to prove theorems about <code>lines</code> including trivial theorems.</p>",
        "id": 185698966,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1579096513
    },
    {
        "content": "<blockquote>\n<p>Take a look at <a href=\"https://github.com/leanprover-community/mathlib/blob/master/src/data/complex/basic.lean\" target=\"_blank\" title=\"https://github.com/leanprover-community/mathlib/blob/master/src/data/complex/basic.lean\">the way Lean does complex numbers</a>. A new definition, and then immediately you have to prove a bunch of trivial theorems about <code>complex</code>. Lean might have lots of theorems about sets, but if you define <code>lines</code> then you have to prove theorems about <code>lines</code> including trivial theorems.</p>\n</blockquote>\n<p>I see. That will keep me busy.</p>",
        "id": 185699146,
        "sender_full_name": "Marc Masdeu",
        "timestamp": 1579096654
    },
    {
        "content": "<p>This morning I sweated to prove (with help!)</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"kn\">lemma</span> <span class=\"n\">I12</span> <span class=\"o\">:</span> <span class=\"bp\">∀</span> <span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"o\">:</span> <span class=\"n\">Points</span><span class=\"o\">,</span> <span class=\"bp\">∀</span> <span class=\"n\">r</span> <span class=\"n\">s</span> <span class=\"o\">:</span> <span class=\"n\">Lines</span><span class=\"o\">,</span> <span class=\"o\">(</span><span class=\"n\">A</span> <span class=\"bp\">≠</span> <span class=\"n\">B</span><span class=\"o\">)</span> <span class=\"bp\">→</span>  <span class=\"o\">(</span><span class=\"n\">A</span> <span class=\"err\">∈</span> <span class=\"n\">r</span><span class=\"o\">)</span> <span class=\"bp\">→</span>  <span class=\"o\">(</span><span class=\"n\">B</span> <span class=\"err\">∈</span> <span class=\"n\">r</span><span class=\"o\">)</span> <span class=\"bp\">→</span>  <span class=\"o\">(</span><span class=\"n\">A</span> <span class=\"err\">∈</span> <span class=\"n\">s</span><span class=\"o\">)</span> <span class=\"bp\">→</span> <span class=\"o\">(</span><span class=\"n\">B</span> <span class=\"err\">∈</span> <span class=\"n\">s</span><span class=\"o\">)</span> <span class=\"bp\">→</span>  <span class=\"n\">r</span> <span class=\"bp\">=</span> <span class=\"n\">s</span>\n</pre></div>\n\n\n<p>I modified it now to work with lines being sets of points:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"kn\">lemma</span> <span class=\"n\">I12</span> <span class=\"o\">:</span> <span class=\"bp\">∀</span> <span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"o\">:</span> <span class=\"n\">Points</span><span class=\"o\">,</span> <span class=\"bp\">∀</span> <span class=\"n\">r</span> <span class=\"n\">s</span> <span class=\"err\">∈</span> <span class=\"n\">Lines</span><span class=\"o\">,</span> <span class=\"o\">(</span><span class=\"n\">A</span> <span class=\"bp\">≠</span> <span class=\"n\">B</span><span class=\"o\">)</span> <span class=\"bp\">→</span>  <span class=\"o\">(</span><span class=\"n\">A</span> <span class=\"err\">∈</span> <span class=\"n\">r</span><span class=\"o\">)</span> <span class=\"bp\">→</span>  <span class=\"o\">(</span><span class=\"n\">B</span> <span class=\"err\">∈</span> <span class=\"n\">r</span><span class=\"o\">)</span> <span class=\"bp\">→</span>  <span class=\"o\">(</span><span class=\"n\">A</span> <span class=\"err\">∈</span> <span class=\"n\">s</span><span class=\"o\">)</span> <span class=\"bp\">→</span> <span class=\"o\">(</span><span class=\"n\">B</span> <span class=\"err\">∈</span> <span class=\"n\">s</span><span class=\"o\">)</span> <span class=\"bp\">→</span>  <span class=\"n\">r</span> <span class=\"bp\">=</span> <span class=\"n\">s</span>\n</pre></div>\n\n\n<p>But the proof I had stopped working. I am stuck at:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"kn\">lemma</span> <span class=\"n\">I12</span> <span class=\"o\">:</span> <span class=\"bp\">∀</span> <span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"o\">:</span> <span class=\"n\">Points</span><span class=\"o\">,</span> <span class=\"bp\">∀</span> <span class=\"n\">r</span> <span class=\"n\">s</span> <span class=\"err\">∈</span> <span class=\"n\">Lines</span><span class=\"o\">,</span> <span class=\"o\">(</span><span class=\"n\">A</span> <span class=\"bp\">≠</span> <span class=\"n\">B</span><span class=\"o\">)</span> <span class=\"bp\">→</span>  <span class=\"o\">(</span><span class=\"n\">A</span> <span class=\"err\">∈</span> <span class=\"n\">r</span><span class=\"o\">)</span> <span class=\"bp\">→</span>  <span class=\"o\">(</span><span class=\"n\">B</span> <span class=\"err\">∈</span> <span class=\"n\">r</span><span class=\"o\">)</span> <span class=\"bp\">→</span>  <span class=\"o\">(</span><span class=\"n\">A</span> <span class=\"err\">∈</span> <span class=\"n\">s</span><span class=\"o\">)</span> <span class=\"bp\">→</span> <span class=\"o\">(</span><span class=\"n\">B</span> <span class=\"err\">∈</span> <span class=\"n\">s</span><span class=\"o\">)</span> <span class=\"bp\">→</span>  <span class=\"n\">r</span> <span class=\"bp\">=</span> <span class=\"n\">s</span> <span class=\"o\">:=</span>\n<span class=\"k\">begin</span>\n<span class=\"n\">intros</span> <span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"n\">r</span> <span class=\"n\">s</span> <span class=\"n\">rL</span> <span class=\"n\">sL</span> <span class=\"n\">h</span> <span class=\"n\">hAr</span> <span class=\"n\">hBr</span> <span class=\"n\">hAs</span> <span class=\"n\">hBs</span><span class=\"o\">,</span>\n<span class=\"n\">apply</span> <span class=\"n\">unique_of_exists_unique</span> <span class=\"o\">(</span><span class=\"n\">I1</span> <span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"n\">h</span><span class=\"o\">),</span>\n<span class=\"n\">sorry</span><span class=\"o\">,</span>\n<span class=\"kn\">end</span>\n</pre></div>\n\n\n<p>and I am trying to complete it using the fact that I1 is a lot stronger...</p>\n<p>Moreover, I don't like that there are so many hypothesis. It seems that this is a side effect of working with sets.</p>",
        "id": 185704612,
        "sender_full_name": "Marc Masdeu",
        "timestamp": 1579099980
    },
    {
        "content": "<p>If you use <code>variables</code>  you can state some hypotheses just once at the beginning of a <code>section</code> or <code>namespace</code>. See <a href=\"https://leanprover.github.io/theorem_proving_in_lean/dependent_type_theory.html#variables-and-sections\" target=\"_blank\" title=\"https://leanprover.github.io/theorem_proving_in_lean/dependent_type_theory.html#variables-and-sections\">2.6 of Theorem Proving in Lean</a> if you haven't already.</p>",
        "id": 185706065,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1579100836
    },
    {
        "content": "<p>Oh, I guess you may also want to state your lemma like this to avoid the giant <code>intros</code> at the start of the proof:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"kn\">lemma</span> <span class=\"n\">I12</span> <span class=\"o\">{</span><span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"o\">:</span> <span class=\"n\">Points</span><span class=\"o\">}</span> <span class=\"o\">{</span><span class=\"n\">r</span> <span class=\"n\">s</span> <span class=\"o\">:</span> <span class=\"n\">set</span> <span class=\"n\">Points</span><span class=\"o\">}</span> <span class=\"o\">(</span><span class=\"n\">rL</span> <span class=\"o\">:</span> <span class=\"n\">r</span> <span class=\"err\">∈</span> <span class=\"n\">Lines</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">sL</span> <span class=\"o\">:</span> <span class=\"n\">s</span> <span class=\"err\">∈</span> <span class=\"n\">Lines</span><span class=\"o\">)</span>\n  <span class=\"o\">(</span><span class=\"n\">h</span> <span class=\"o\">:</span> <span class=\"n\">A</span> <span class=\"bp\">≠</span> <span class=\"n\">B</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">hAr</span> <span class=\"o\">:</span> <span class=\"n\">A</span> <span class=\"err\">∈</span> <span class=\"n\">r</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">hBr</span> <span class=\"o\">:</span> <span class=\"n\">B</span> <span class=\"err\">∈</span> <span class=\"n\">r</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">hAs</span> <span class=\"o\">:</span> <span class=\"n\">A</span> <span class=\"err\">∈</span> <span class=\"n\">s</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">hBs</span> <span class=\"o\">:</span> <span class=\"n\">B</span> <span class=\"err\">∈</span> <span class=\"n\">s</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"n\">r</span> <span class=\"bp\">=</span> <span class=\"n\">s</span> <span class=\"o\">:=</span>\n<span class=\"n\">sorry</span>\n</pre></div>",
        "id": 185706476,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1579101090
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"254058\">@Marc Masdeu</span> At this point, if you really want to pursue the geometry formalisation (instead of just fooling around to learn more Lean), I think it would be useful to look at the previous attempts.</p>",
        "id": 185706835,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1579101330
    },
    {
        "content": "<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"254058\">Marc Masdeu</span> At this point, if you really want to pursue the geometry formalisation (instead of just fooling around to learn more Lean), I think it would be useful to look at the previous attempts.</p>\n</blockquote>\n<p>Oh I do want to fool around. Formalizing geometry was just what I picked as a testing grounds, since it doesn't itself have much pre-requisites. Eventually I will want to teach students how to use this, so I better learn a bit first.</p>",
        "id": 185707250,
        "sender_full_name": "Marc Masdeu",
        "timestamp": 1579101573
    },
    {
        "content": "<p>Could you post what you have in its entirety? Otherwise I can only guess how you corrected <code>I1</code>.</p>",
        "id": 185707545,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1579101757
    },
    {
        "content": "<div class=\"codehilite\"><pre><span></span><span class=\"kn\">import</span> <span class=\"n\">tactic</span>\n<span class=\"c1\">-- We want to be able to define functions using the law of excluded middle</span>\n<span class=\"n\">local</span> <span class=\"n\">attribute</span> <span class=\"o\">[</span><span class=\"kn\">instance</span><span class=\"o\">,</span> <span class=\"n\">priority</span> <span class=\"mi\">0</span><span class=\"o\">]</span> <span class=\"n\">classical</span><span class=\"bp\">.</span><span class=\"n\">prop_decidable</span>\n\n\n<span class=\"n\">noncomputable</span> <span class=\"n\">theory</span>\n<span class=\"n\">open_locale</span> <span class=\"n\">classical</span>\n\n<span class=\"kn\">universe</span> <span class=\"n\">u</span>\n<span class=\"kn\">constant</span> <span class=\"n\">Points</span> <span class=\"o\">:</span> <span class=\"kt\">Type</span> <span class=\"n\">u</span>\n<span class=\"kn\">constant</span> <span class=\"n\">Lines</span> <span class=\"o\">:</span> <span class=\"n\">set</span><span class=\"o\">(</span><span class=\"n\">set</span><span class=\"o\">(</span><span class=\"n\">Points</span><span class=\"o\">))</span>\n\n<span class=\"kn\">constant</span> <span class=\"n\">I1</span> <span class=\"o\">:</span> <span class=\"bp\">∀</span> <span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"o\">:</span> <span class=\"n\">Points</span><span class=\"o\">,</span>  <span class=\"n\">A</span> <span class=\"bp\">≠</span> <span class=\"n\">B</span> <span class=\"bp\">→</span> <span class=\"bp\">∃!</span> <span class=\"o\">(</span><span class=\"n\">ℓ</span> <span class=\"err\">∈</span> <span class=\"n\">Lines</span><span class=\"o\">),</span> <span class=\"o\">(</span> <span class=\"n\">A</span> <span class=\"err\">∈</span> <span class=\"n\">ℓ</span> <span class=\"o\">)</span> <span class=\"bp\">∧</span> <span class=\"o\">(</span> <span class=\"n\">B</span> <span class=\"err\">∈</span> <span class=\"n\">ℓ</span> <span class=\"o\">)</span>\n<span class=\"kn\">constant</span> <span class=\"n\">I2</span> <span class=\"o\">:</span> <span class=\"bp\">∀</span> <span class=\"n\">ℓ</span> <span class=\"err\">∈</span> <span class=\"n\">Lines</span><span class=\"o\">,</span> <span class=\"bp\">∃</span> <span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"o\">:</span> <span class=\"n\">Points</span><span class=\"o\">,</span> <span class=\"n\">A</span> <span class=\"bp\">≠</span> <span class=\"n\">B</span> <span class=\"bp\">∧</span> <span class=\"n\">A</span> <span class=\"err\">∈</span> <span class=\"n\">ℓ</span> <span class=\"bp\">∧</span> <span class=\"n\">B</span> <span class=\"err\">∈</span> <span class=\"n\">ℓ</span>\n<span class=\"kn\">constant</span> <span class=\"n\">I3</span> <span class=\"o\">:</span> <span class=\"bp\">∃</span> <span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"n\">C</span> <span class=\"o\">:</span> <span class=\"n\">Points</span><span class=\"o\">,</span> <span class=\"o\">(</span><span class=\"n\">A</span> <span class=\"bp\">≠</span> <span class=\"n\">B</span> <span class=\"bp\">∧</span> <span class=\"n\">A</span> <span class=\"bp\">≠</span> <span class=\"n\">C</span> <span class=\"bp\">∧</span> <span class=\"n\">B</span> <span class=\"bp\">≠</span> <span class=\"n\">C</span> <span class=\"bp\">∧</span> <span class=\"o\">(</span><span class=\"bp\">∀</span> <span class=\"n\">ℓ</span> <span class=\"err\">∈</span> <span class=\"n\">Lines</span><span class=\"o\">,</span> <span class=\"o\">(</span><span class=\"n\">A</span> <span class=\"err\">∈</span> <span class=\"n\">ℓ</span> <span class=\"bp\">∧</span> <span class=\"n\">B</span> <span class=\"err\">∈</span> <span class=\"n\">ℓ</span><span class=\"o\">)</span> <span class=\"bp\">→</span> <span class=\"o\">(</span><span class=\"bp\">¬</span> <span class=\"o\">(</span><span class=\"n\">C</span> <span class=\"err\">∈</span> <span class=\"n\">ℓ</span><span class=\"o\">)</span> <span class=\"o\">)))</span>\n\n<span class=\"kn\">notation</span> <span class=\"n\">p</span> <span class=\"bp\">`</span><span class=\"n\">xor</span><span class=\"bp\">`</span> <span class=\"n\">q</span> <span class=\"o\">:=</span> <span class=\"o\">(</span><span class=\"n\">p</span> <span class=\"bp\">∧</span> <span class=\"bp\">¬</span> <span class=\"n\">q</span><span class=\"o\">)</span> <span class=\"bp\">∨</span> <span class=\"o\">(</span><span class=\"n\">q</span> <span class=\"bp\">∧</span> <span class=\"bp\">¬</span> <span class=\"n\">p</span><span class=\"o\">)</span>\n\n<span class=\"kn\">lemma</span> <span class=\"n\">I12</span> <span class=\"o\">:</span> <span class=\"bp\">∀</span> <span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"o\">:</span> <span class=\"n\">Points</span><span class=\"o\">,</span> <span class=\"bp\">∀</span> <span class=\"n\">r</span> <span class=\"n\">s</span> <span class=\"err\">∈</span> <span class=\"n\">Lines</span><span class=\"o\">,</span> <span class=\"o\">(</span><span class=\"n\">A</span> <span class=\"bp\">≠</span> <span class=\"n\">B</span><span class=\"o\">)</span> <span class=\"bp\">→</span>  <span class=\"o\">(</span><span class=\"n\">A</span> <span class=\"err\">∈</span> <span class=\"n\">r</span><span class=\"o\">)</span> <span class=\"bp\">→</span>  <span class=\"o\">(</span><span class=\"n\">B</span> <span class=\"err\">∈</span> <span class=\"n\">r</span><span class=\"o\">)</span> <span class=\"bp\">→</span>  <span class=\"o\">(</span><span class=\"n\">A</span> <span class=\"err\">∈</span> <span class=\"n\">s</span><span class=\"o\">)</span> <span class=\"bp\">→</span> <span class=\"o\">(</span><span class=\"n\">B</span> <span class=\"err\">∈</span> <span class=\"n\">s</span><span class=\"o\">)</span> <span class=\"bp\">→</span>  <span class=\"n\">r</span> <span class=\"bp\">=</span> <span class=\"n\">s</span> <span class=\"o\">:=</span>\n<span class=\"k\">begin</span>\n<span class=\"n\">intros</span> <span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"n\">r</span> <span class=\"n\">s</span> <span class=\"n\">rL</span> <span class=\"n\">sL</span> <span class=\"n\">h</span> <span class=\"n\">hAr</span> <span class=\"n\">hBr</span> <span class=\"n\">hAs</span> <span class=\"n\">hBs</span><span class=\"o\">,</span>\n<span class=\"n\">apply</span> <span class=\"n\">unique_of_exists_unique</span> <span class=\"o\">(</span><span class=\"n\">I1</span> <span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"n\">h</span><span class=\"o\">),</span>\n\n<span class=\"kn\">end</span>\n</pre></div>",
        "id": 185707665,
        "sender_full_name": "Marc Masdeu",
        "timestamp": 1579101836
    },
    {
        "content": "<p>Does <code>open_locale classical</code> not automatically do the local attribute business? What happens if you delete line 3?</p>",
        "id": 185708513,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1579102298
    },
    {
        "content": "<p>I don't see any change. I copied line 3 from somewhere, and kept the comment since I do want to use the LEM.</p>",
        "id": 185708728,
        "sender_full_name": "Marc Masdeu",
        "timestamp": 1579102389
    },
    {
        "content": "<p>The <code>unfold</code>s are unnecessary, but may help you see what's going on.</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"kn\">lemma</span> <span class=\"n\">I12</span> <span class=\"o\">{</span><span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"o\">:</span> <span class=\"n\">Points</span><span class=\"o\">}</span> <span class=\"o\">{</span><span class=\"n\">r</span> <span class=\"n\">s</span> <span class=\"o\">:</span> <span class=\"n\">set</span> <span class=\"n\">Points</span><span class=\"o\">}</span> <span class=\"o\">(</span><span class=\"n\">rL</span> <span class=\"o\">:</span> <span class=\"n\">r</span> <span class=\"err\">∈</span> <span class=\"n\">Lines</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">sL</span> <span class=\"o\">:</span> <span class=\"n\">s</span> <span class=\"err\">∈</span> <span class=\"n\">Lines</span><span class=\"o\">)</span>\n  <span class=\"o\">(</span><span class=\"n\">h</span> <span class=\"o\">:</span> <span class=\"n\">A</span> <span class=\"bp\">≠</span> <span class=\"n\">B</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">hAr</span> <span class=\"o\">:</span> <span class=\"n\">A</span> <span class=\"err\">∈</span> <span class=\"n\">r</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">hBr</span> <span class=\"o\">:</span> <span class=\"n\">B</span> <span class=\"err\">∈</span> <span class=\"n\">r</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">hAs</span> <span class=\"o\">:</span> <span class=\"n\">A</span> <span class=\"err\">∈</span> <span class=\"n\">s</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">hBs</span> <span class=\"o\">:</span> <span class=\"n\">B</span> <span class=\"err\">∈</span> <span class=\"n\">s</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"n\">r</span> <span class=\"bp\">=</span> <span class=\"n\">s</span> <span class=\"o\">:=</span>\n<span class=\"k\">begin</span>\n  <span class=\"n\">apply</span> <span class=\"n\">unique_of_exists_unique</span> <span class=\"o\">(</span><span class=\"n\">I1</span> <span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"n\">h</span><span class=\"o\">),</span>\n  <span class=\"o\">{</span> <span class=\"n\">unfold</span> <span class=\"n\">exists_unique</span><span class=\"o\">,</span>\n    <span class=\"n\">use</span> <span class=\"n\">rL</span><span class=\"o\">,</span>\n    <span class=\"n\">split</span><span class=\"o\">,</span>\n    <span class=\"n\">split</span><span class=\"o\">,</span>\n    <span class=\"n\">assumption</span><span class=\"o\">,</span>\n    <span class=\"n\">assumption</span><span class=\"o\">,</span>\n    <span class=\"n\">finish</span><span class=\"o\">,</span> <span class=\"o\">},</span>\n  <span class=\"o\">{</span> <span class=\"n\">unfold</span> <span class=\"n\">exists_unique</span><span class=\"o\">,</span>\n    <span class=\"n\">use</span> <span class=\"n\">sL</span><span class=\"o\">,</span>\n    <span class=\"n\">split</span><span class=\"o\">,</span>\n    <span class=\"n\">split</span><span class=\"o\">,</span>\n    <span class=\"n\">assumption</span><span class=\"o\">,</span>\n    <span class=\"n\">assumption</span><span class=\"o\">,</span>\n    <span class=\"n\">finish</span><span class=\"o\">,</span> <span class=\"o\">},</span>\n<span class=\"kn\">end</span>\n</pre></div>",
        "id": 185709505,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1579102839
    },
    {
        "content": "<p>Thanks! Now that we are at this. You changed a lot the definition of the lemma, by removing all the foralls, for example. What is the difference between the two, and which form should I prefer? The form that I had was a bit similar to what I would do in math, and this notation breaks the symmetry between forall and exists, right?</p>",
        "id": 185710009,
        "sender_full_name": "Marc Masdeu",
        "timestamp": 1579103153
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"123965\">@Bryan Gin-ge Chen</span>  I don't understand what did the <code>finish</code> do...</p>",
        "id": 185710703,
        "sender_full_name": "Marc Masdeu",
        "timestamp": 1579103572
    },
    {
        "content": "<p>At a mathematical level they're equivalent. There are slight differences when it comes to how Lean interprets them due to the fact that I made <code>A</code>, <code>B</code>, <code>r</code> and <code>s</code> <a href=\"https://leanprover.github.io/theorem_proving_in_lean/dependent_type_theory.html#implicit-arguments\" target=\"_blank\" title=\"https://leanprover.github.io/theorem_proving_in_lean/dependent_type_theory.html#implicit-arguments\">\"implicit arguments\"</a> using curly braces.</p>\n<p>In Lean what I wrote is generally preferred since it saves a lot of typing. (Using <code>variables</code> would be even better). Could you say more about the symmetry you expect between forall and exists? </p>\n<p><code>finish</code> is a tactic which is able to clear \"obvious\" goals if they just boil down to logical manipulation. In this case, it turns out that you can just as well use <code>intros, refl</code> instead of <code>finish</code>.</p>",
        "id": 185712264,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1579104396
    },
    {
        "content": "<blockquote>\n<p>Could you say more about the symmetry you expect between forall and exists? </p>\n</blockquote>\n<p>Well, how would you write in Lean these two statements (which I see as \"symmetrical\"):<br>\n<code>for all x,  P(x)</code> and <code>there exists x, P(x)</code>.</p>",
        "id": 185712858,
        "sender_full_name": "Marc Masdeu",
        "timestamp": 1579104689
    },
    {
        "content": "<p>I'd write them like this: <code>∀ x, P x</code>, <code>∃ x, P x</code>. They behave rather differently though.</p>",
        "id": 185713087,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1579104816
    },
    {
        "content": "<p>They are yin and yang</p>",
        "id": 185713305,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1579104933
    },
    {
        "content": "<p>\"forall x\" indicates to me that the thing that follows is a function of x. (It just happens to take values in the world of logical propositions). Lean lets us write such statements using more function-oriented syntax (we can give x as an argument to the function).</p>",
        "id": 185713626,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1579105092
    },
    {
        "content": "<p>Yes, that's the symmetry that I meant! But you see, if you want to write a lemma one could write:<br>\n<code>lemma hasP : \\forall x : Type, P x</code> or <code>lemma existsP : \\exists x : Type, P x</code>. The first one can be rewritten as<br>\n<code>lemma hasP {x : Type} : P x</code>. What about the second?</p>",
        "id": 185713637,
        "sender_full_name": "Marc Masdeu",
        "timestamp": 1579105098
    },
    {
        "content": "<p>You can't move the exists to the left of the colon. They are different in that respect.</p>",
        "id": 185713691,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1579105127
    },
    {
        "content": "<p>The general concept of \"negation\" switches them around</p>",
        "id": 185713773,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1579105167
    },
    {
        "content": "<blockquote>\n<p>You can't move the exists to the left of the colon. They are different in that respect.</p>\n</blockquote>\n<p>I think that this is what I was observing. I guess one gets used to it.</p>",
        "id": 185713951,
        "sender_full_name": "Marc Masdeu",
        "timestamp": 1579105236
    },
    {
        "content": "<p>I guess this constructive logic leaking through....</p>",
        "id": 185713975,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1579105246
    },
    {
        "content": "<p>Because there they aren't symmetric at all.</p>",
        "id": 185713990,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1579105256
    },
    {
        "content": "<p>They are like night and day. \"I can see in the day, how come I can't see in the night?\"</p>",
        "id": 185714865,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1579105759
    },
    {
        "content": "<p>Since forall gives rise to functions maybe exists should arise from co-functions (in the sense of <a href=\"https://en.wikipedia.org/wiki/Coinduction\" target=\"_blank\" title=\"https://en.wikipedia.org/wiki/Coinduction\">\"co-data\"</a>?)...</p>",
        "id": 185714980,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1579105806
    },
    {
        "content": "<p>It is a coproduct.</p>",
        "id": 185715114,
        "sender_full_name": "Chris Hughes",
        "timestamp": 1579105883
    },
    {
        "content": "<p>And functions are products.</p>",
        "id": 185715151,
        "sender_full_name": "Chris Hughes",
        "timestamp": 1579105910
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"254058\">@Marc Masdeu</span> -- here's the difference between sets and types. If a mathematician says \"let G be a group and let S be a set, and imagine G acts on S, blah blah blah...\" then they don't actually mean this, because imagine the chaos that would ensue if a random element of G (which is just a random set) turned out to coincidentally be an element of S, or a subset of S, or something? You could imagine that this would be irritating -- or just a bit weird. We don't say \"assume moreover that G and S are disjoint\" though, because sometimes we might well want to set G = S. What is happening is that we want elements of G to be \"things of type G\" and elements of S to be \"things of type S\" and we know that even if there were some random sets which happened to be in G and in S by accident, it won't matter, because as long as we know what we're doing, and we call them g if they're in G and s if they're in S, we can \"pretend they're different\". </p>\n<p>This is why you want points to be a type, because a point will always be \"a thing which is a point\", you'll never use a point to do anything else other than being a point. Computer scientists say \"a thing of type Point\" for \"a thing which is a point\". </p>\n<p>On the other hand, you absolutely want to allow lines to contain a common point, and this is a natural part of the theory. So you don't want lines to be types, you want them to be subsets, or possibly subtypes, of the type of points.</p>",
        "id": 185723201,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1579110323
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"110038\">@Kevin Buzzard</span> thanks for the very nice explanation. We usually don't think about this, and it's surprising how long one can be doing maths without ever having this clarified.</p>",
        "id": 185725409,
        "sender_full_name": "Marc Masdeu",
        "timestamp": 1579111537
    },
    {
        "content": "<blockquote>\n<p>The difference between type theory and set theory is that in type theory, the only sets you can have are subsets of a fixed set. It took me a long time to realise that mathematicians use the concept of set in two different ways.</p>\n</blockquote>\n<p><span class=\"user-mention\" data-user-id=\"110038\">@Kevin Buzzard</span> Can you elaborate on that? Things that obey ZFC is one way i can think of. What's the other?</p>",
        "id": 185870984,
        "sender_full_name": "Vaibhav Karve",
        "timestamp": 1579215400
    },
    {
        "content": "<p>There are sets, and then there are subsets. These are treated in the same way by ZFC</p>",
        "id": 185871439,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1579215782
    },
    {
        "content": "<p>Sometimes, you just talk about an arbitrary set taken from the universe of all sets. These are like types in type theory. Other times you have a set that lives in another set, for example an open set in a topology. These admit a reasonable notion of intersection, complement, and other such things, and they are represented by elements of the type <code>set A</code></p>",
        "id": 185871742,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1579216018
    },
    {
        "content": "<p>OK back to Hilbert's axioms. I have introduced a few more axioms and proved some more basic lemmas about them. The file is getting long and Lean takes time to react after each small change, so I decide to reorganize things a bit.</p>\n<ul>\n<li>Is it possible to \"input\" (in the LaTeX terminology) a file, so that Lean just inserts the content of that file at the beginning?<br>\nA better way would be to start writing a structure, and this is the route I'd like to take (mainly for the sake of learning how to do it). So I have:</li>\n</ul>\n<div class=\"codehilite\"><pre><span></span><span class=\"kn\">import</span> <span class=\"n\">tactic</span>\n\n<span class=\"n\">noncomputable</span> <span class=\"n\">theory</span>\n\n<span class=\"c1\">-- We want to be able to define functions using the law of excluded middle</span>\n<span class=\"n\">open_locale</span> <span class=\"n\">classical</span>\n\n<span class=\"kn\">universe</span> <span class=\"n\">u</span>\n\n<span class=\"kn\">structure</span> <span class=\"n\">HilbertPlane</span> <span class=\"o\">(</span><span class=\"n\">Point</span> <span class=\"o\">:</span> <span class=\"kt\">Type</span> <span class=\"n\">u</span><span class=\"o\">)</span> <span class=\"o\">:=</span>\n\n<span class=\"o\">(</span><span class=\"n\">Lines</span> <span class=\"o\">:</span> <span class=\"n\">set</span><span class=\"o\">(</span><span class=\"n\">set</span><span class=\"o\">(</span><span class=\"n\">Point</span><span class=\"o\">)))</span>\n<span class=\"o\">(</span><span class=\"n\">lies_on</span> <span class=\"o\">:</span> <span class=\"n\">Point</span> <span class=\"bp\">→</span> <span class=\"n\">Lines</span> <span class=\"bp\">→</span> <span class=\"kt\">Prop</span><span class=\"o\">)</span>\n\n<span class=\"o\">(</span><span class=\"n\">I1</span> <span class=\"o\">:</span> <span class=\"bp\">∀</span> <span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"o\">:</span> <span class=\"n\">Point</span><span class=\"o\">,</span>  <span class=\"n\">A</span> <span class=\"bp\">≠</span> <span class=\"n\">B</span> <span class=\"bp\">→</span> <span class=\"bp\">∃!</span> <span class=\"o\">(</span><span class=\"n\">ℓ</span> <span class=\"err\">∈</span> <span class=\"n\">Lines</span><span class=\"o\">),</span> <span class=\"o\">(</span> <span class=\"n\">A</span> <span class=\"err\">∈</span> <span class=\"n\">ℓ</span> <span class=\"o\">)</span> <span class=\"bp\">∧</span> <span class=\"o\">(</span> <span class=\"n\">B</span> <span class=\"err\">∈</span> <span class=\"n\">ℓ</span> <span class=\"o\">))</span>\n<span class=\"o\">(</span><span class=\"n\">I2</span> <span class=\"o\">:</span> <span class=\"bp\">∀</span> <span class=\"n\">ℓ</span> <span class=\"err\">∈</span> <span class=\"n\">Lines</span><span class=\"o\">,</span> <span class=\"bp\">∃</span> <span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"o\">:</span> <span class=\"n\">Point</span><span class=\"o\">,</span> <span class=\"n\">A</span> <span class=\"bp\">≠</span> <span class=\"n\">B</span> <span class=\"bp\">∧</span> <span class=\"n\">A</span> <span class=\"err\">∈</span> <span class=\"n\">ℓ</span> <span class=\"bp\">∧</span> <span class=\"n\">B</span> <span class=\"err\">∈</span> <span class=\"n\">ℓ</span><span class=\"o\">)</span>\n<span class=\"o\">(</span><span class=\"n\">I3</span> <span class=\"o\">:</span> <span class=\"bp\">∃</span> <span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"n\">C</span> <span class=\"o\">:</span> <span class=\"n\">Point</span><span class=\"o\">,</span> <span class=\"o\">(</span><span class=\"n\">A</span> <span class=\"bp\">≠</span> <span class=\"n\">B</span> <span class=\"bp\">∧</span> <span class=\"n\">A</span> <span class=\"bp\">≠</span> <span class=\"n\">C</span> <span class=\"bp\">∧</span> <span class=\"n\">B</span> <span class=\"bp\">≠</span> <span class=\"n\">C</span> <span class=\"bp\">∧</span> <span class=\"o\">(</span><span class=\"bp\">∀</span> <span class=\"n\">ℓ</span> <span class=\"err\">∈</span> <span class=\"n\">Lines</span><span class=\"o\">,</span> <span class=\"o\">(</span><span class=\"n\">A</span> <span class=\"err\">∈</span> <span class=\"n\">ℓ</span> <span class=\"bp\">∧</span> <span class=\"n\">B</span> <span class=\"err\">∈</span> <span class=\"n\">ℓ</span><span class=\"o\">)</span> <span class=\"bp\">→</span> <span class=\"o\">(</span><span class=\"bp\">¬</span> <span class=\"o\">(</span><span class=\"n\">C</span> <span class=\"err\">∈</span> <span class=\"n\">ℓ</span><span class=\"o\">)</span> <span class=\"o\">))))</span>\n<span class=\"o\">(</span><span class=\"n\">between</span> <span class=\"o\">:</span> <span class=\"n\">Point</span> <span class=\"bp\">→</span> <span class=\"n\">Point</span> <span class=\"bp\">→</span> <span class=\"n\">Point</span> <span class=\"bp\">→</span> <span class=\"kt\">Prop</span><span class=\"o\">)</span>\n</pre></div>\n\n\n<p>and Lean seems happy so far. But for the next axioms I want to have some notation. In the previous version I had something like</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"kn\">notation</span> <span class=\"n\">A</span> <span class=\"bp\">`*`</span> <span class=\"n\">B</span> <span class=\"bp\">`*`</span> <span class=\"n\">C</span> <span class=\"o\">:=</span> <span class=\"n\">between</span> <span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"n\">C</span>\n<span class=\"kn\">definition</span> <span class=\"n\">colinear</span> <span class=\"o\">(</span><span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"n\">C</span> <span class=\"o\">:</span> <span class=\"n\">Point</span><span class=\"o\">)</span> <span class=\"o\">:=</span> <span class=\"bp\">∃</span> <span class=\"n\">ℓ</span> <span class=\"err\">∈</span> <span class=\"n\">HilbertPlane</span><span class=\"bp\">.</span><span class=\"n\">Lines</span><span class=\"o\">,</span> <span class=\"n\">A</span> <span class=\"err\">∈</span> <span class=\"n\">ℓ</span> <span class=\"bp\">∧</span> <span class=\"n\">B</span> <span class=\"err\">∈</span> <span class=\"n\">ℓ</span> <span class=\"bp\">∧</span> <span class=\"n\">C</span> <span class=\"err\">∈</span> <span class=\"n\">ℓ</span>\n</pre></div>\n\n\n<p>but now both lines fail. I assume that this gets me out of the structure, but I would really like to have such notation inside to be able to both state the axioms in a more readable way, and also in order to be able to use the HilbertPlane structure in an easy way later when writing theorems.<br>\nHow is this done in Lean (I looked at <span class=\"user-mention\" data-user-id=\"120256\">@Ali Sever</span> solution and in the list of axioms there is no notation being added...).<br>\nThanks!</p>",
        "id": 185906658,
        "sender_full_name": "Marc Masdeu",
        "timestamp": 1579259969
    },
    {
        "content": "<p><code>import</code> = input</p>",
        "id": 185907088,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1579260419
    },
    {
        "content": "<p>Marc -- if you want to get confused about imports, take a look at <a href=\"https://github.com/ImperialCollegeLondon/M4P33/blob/master/src/abstract_V_and_I.lean\" target=\"_blank\" title=\"https://github.com/ImperialCollegeLondon/M4P33/blob/master/src/abstract_V_and_I.lean\">my lecture for today</a></p>",
        "id": 185907173,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1579260500
    },
    {
        "content": "<blockquote>\n<p>Marc -- if you want to get confused about imports, take a look at <a href=\"https://github.com/ImperialCollegeLondon/M4P33/blob/master/src/abstract_V_and_I.lean\" target=\"_blank\" title=\"https://github.com/ImperialCollegeLondon/M4P33/blob/master/src/abstract_V_and_I.lean\">my lecture for today</a></p>\n</blockquote>\n<p>I thought that import was more like \\include. In particular, if I split a file into two files (foo.lean and bar.lean) and put <code>import foo</code> in bar.lean I get complaints all over.</p>",
        "id": 185907405,
        "sender_full_name": "Marc Masdeu",
        "timestamp": 1579260740
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"254058\">@Marc Masdeu</span> You can use <code>import</code>, but you will have to reopen namespaces and such</p>",
        "id": 185907445,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1579260821
    },
    {
        "content": "<p>I thought <span class=\"user-mention\" data-user-id=\"110038\">@Kevin Buzzard</span> and <span class=\"user-mention\" data-user-id=\"112680\">@Johan Commelin</span> would tell me to definitely pursue my second option (structures). Is it that it it's not so easy to do what I wanted?</p>",
        "id": 185907560,
        "sender_full_name": "Marc Masdeu",
        "timestamp": 1579260928
    },
    {
        "content": "<p>You can do the notation in the middle of defining the structure by enclosing it in parentheses, like so:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"kn\">structure</span> <span class=\"n\">HilbertPlane</span> <span class=\"o\">(</span><span class=\"n\">Point</span> <span class=\"o\">:</span> <span class=\"kt\">Type</span> <span class=\"n\">u</span><span class=\"o\">)</span> <span class=\"o\">:=</span>\n\n<span class=\"o\">(</span><span class=\"n\">Lines</span> <span class=\"o\">:</span> <span class=\"n\">set</span><span class=\"o\">(</span><span class=\"n\">set</span><span class=\"o\">(</span><span class=\"n\">Point</span><span class=\"o\">)))</span>\n<span class=\"o\">(</span><span class=\"n\">lies_on</span> <span class=\"o\">:</span> <span class=\"n\">Point</span> <span class=\"bp\">→</span> <span class=\"n\">Lines</span> <span class=\"bp\">→</span> <span class=\"kt\">Prop</span><span class=\"o\">)</span>\n\n<span class=\"o\">(</span><span class=\"n\">I1</span> <span class=\"o\">:</span> <span class=\"bp\">∀</span> <span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"o\">:</span> <span class=\"n\">Point</span><span class=\"o\">,</span>  <span class=\"n\">A</span> <span class=\"bp\">≠</span> <span class=\"n\">B</span> <span class=\"bp\">→</span> <span class=\"bp\">∃!</span> <span class=\"o\">(</span><span class=\"n\">ℓ</span> <span class=\"err\">∈</span> <span class=\"n\">Lines</span><span class=\"o\">),</span> <span class=\"o\">(</span> <span class=\"n\">A</span> <span class=\"err\">∈</span> <span class=\"n\">ℓ</span> <span class=\"o\">)</span> <span class=\"bp\">∧</span> <span class=\"o\">(</span> <span class=\"n\">B</span> <span class=\"err\">∈</span> <span class=\"n\">ℓ</span> <span class=\"o\">))</span>\n<span class=\"o\">(</span><span class=\"n\">I2</span> <span class=\"o\">:</span> <span class=\"bp\">∀</span> <span class=\"n\">ℓ</span> <span class=\"err\">∈</span> <span class=\"n\">Lines</span><span class=\"o\">,</span> <span class=\"bp\">∃</span> <span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"o\">:</span> <span class=\"n\">Point</span><span class=\"o\">,</span> <span class=\"n\">A</span> <span class=\"bp\">≠</span> <span class=\"n\">B</span> <span class=\"bp\">∧</span> <span class=\"n\">A</span> <span class=\"err\">∈</span> <span class=\"n\">ℓ</span> <span class=\"bp\">∧</span> <span class=\"n\">B</span> <span class=\"err\">∈</span> <span class=\"n\">ℓ</span><span class=\"o\">)</span>\n<span class=\"o\">(</span><span class=\"n\">I3</span> <span class=\"o\">:</span> <span class=\"bp\">∃</span> <span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"n\">C</span> <span class=\"o\">:</span> <span class=\"n\">Point</span><span class=\"o\">,</span> <span class=\"o\">(</span><span class=\"n\">A</span> <span class=\"bp\">≠</span> <span class=\"n\">B</span> <span class=\"bp\">∧</span> <span class=\"n\">A</span> <span class=\"bp\">≠</span> <span class=\"n\">C</span> <span class=\"bp\">∧</span> <span class=\"n\">B</span> <span class=\"bp\">≠</span> <span class=\"n\">C</span> <span class=\"bp\">∧</span> <span class=\"o\">(</span><span class=\"bp\">∀</span> <span class=\"n\">ℓ</span> <span class=\"err\">∈</span> <span class=\"n\">Lines</span><span class=\"o\">,</span> <span class=\"o\">(</span><span class=\"n\">A</span> <span class=\"err\">∈</span> <span class=\"n\">ℓ</span> <span class=\"bp\">∧</span> <span class=\"n\">B</span> <span class=\"err\">∈</span> <span class=\"n\">ℓ</span><span class=\"o\">)</span> <span class=\"bp\">→</span> <span class=\"o\">(</span><span class=\"bp\">¬</span> <span class=\"o\">(</span><span class=\"n\">C</span> <span class=\"err\">∈</span> <span class=\"n\">ℓ</span><span class=\"o\">)</span> <span class=\"o\">))))</span>\n<span class=\"o\">(</span><span class=\"n\">between</span> <span class=\"o\">:</span> <span class=\"n\">Point</span> <span class=\"bp\">→</span> <span class=\"n\">Point</span> <span class=\"bp\">→</span> <span class=\"n\">Point</span> <span class=\"bp\">→</span> <span class=\"kt\">Prop</span><span class=\"o\">)</span>\n<span class=\"o\">(</span><span class=\"kn\">notation</span> <span class=\"n\">A</span> <span class=\"bp\">`*`</span> <span class=\"n\">B</span> <span class=\"bp\">`*`</span> <span class=\"n\">C</span> <span class=\"o\">:=</span> <span class=\"n\">between</span> <span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"n\">C</span><span class=\"o\">)</span>\n</pre></div>\n\n\n<p>The definition is however not so easy</p>",
        "id": 185907647,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1579261000
    },
    {
        "content": "<p>You could make it another part of the structure, but then it isn't guaranteed to have the definition you want and you have to impose that separately</p>",
        "id": 185907683,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1579261042
    },
    {
        "content": "<p>Concerning using <code>notation</code> in the definition of a structure: See how it's done for categories a long time ago: <a href=\"https://github.com/leanprover-community/mathlib/blob/c06fb67cf8b7bcc3e5e76c46b699d01cd4c212a6/src/category_theory/category.lean#L46L54\" target=\"_blank\" title=\"https://github.com/leanprover-community/mathlib/blob/c06fb67cf8b7bcc3e5e76c46b699d01cd4c212a6/src/category_theory/category.lean#L46L54\">https://github.com/leanprover-community/mathlib/blob/c06fb67cf8b7bcc3e5e76c46b699d01cd4c212a6/src/category_theory/category.lean#L46L54</a></p>",
        "id": 185907700,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1579261072
    },
    {
        "content": "<p>Aha, Mario beat me.</p>",
        "id": 185907749,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1579261087
    },
    {
        "content": "<p>You have to restate the notation after the definition if you want it to exist outside the structure definition</p>",
        "id": 185907774,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1579261109
    },
    {
        "content": "<p>Otherwise, you have to define the structure in two stages, like so:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"kn\">structure</span> <span class=\"n\">PreHilbertPlane</span> <span class=\"o\">(</span><span class=\"n\">Point</span> <span class=\"o\">:</span> <span class=\"kt\">Type</span> <span class=\"n\">u</span><span class=\"o\">)</span> <span class=\"o\">:=</span>\n\n<span class=\"o\">(</span><span class=\"n\">Lines</span> <span class=\"o\">:</span> <span class=\"n\">set</span><span class=\"o\">(</span><span class=\"n\">set</span><span class=\"o\">(</span><span class=\"n\">Point</span><span class=\"o\">)))</span>\n<span class=\"o\">(</span><span class=\"n\">lies_on</span> <span class=\"o\">:</span> <span class=\"n\">Point</span> <span class=\"bp\">→</span> <span class=\"n\">Lines</span> <span class=\"bp\">→</span> <span class=\"kt\">Prop</span><span class=\"o\">)</span>\n\n<span class=\"o\">(</span><span class=\"n\">I1</span> <span class=\"o\">:</span> <span class=\"bp\">∀</span> <span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"o\">:</span> <span class=\"n\">Point</span><span class=\"o\">,</span>  <span class=\"n\">A</span> <span class=\"bp\">≠</span> <span class=\"n\">B</span> <span class=\"bp\">→</span> <span class=\"bp\">∃!</span> <span class=\"o\">(</span><span class=\"n\">ℓ</span> <span class=\"err\">∈</span> <span class=\"n\">Lines</span><span class=\"o\">),</span> <span class=\"o\">(</span> <span class=\"n\">A</span> <span class=\"err\">∈</span> <span class=\"n\">ℓ</span> <span class=\"o\">)</span> <span class=\"bp\">∧</span> <span class=\"o\">(</span> <span class=\"n\">B</span> <span class=\"err\">∈</span> <span class=\"n\">ℓ</span> <span class=\"o\">))</span>\n<span class=\"o\">(</span><span class=\"n\">I2</span> <span class=\"o\">:</span> <span class=\"bp\">∀</span> <span class=\"n\">ℓ</span> <span class=\"err\">∈</span> <span class=\"n\">Lines</span><span class=\"o\">,</span> <span class=\"bp\">∃</span> <span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"o\">:</span> <span class=\"n\">Point</span><span class=\"o\">,</span> <span class=\"n\">A</span> <span class=\"bp\">≠</span> <span class=\"n\">B</span> <span class=\"bp\">∧</span> <span class=\"n\">A</span> <span class=\"err\">∈</span> <span class=\"n\">ℓ</span> <span class=\"bp\">∧</span> <span class=\"n\">B</span> <span class=\"err\">∈</span> <span class=\"n\">ℓ</span><span class=\"o\">)</span>\n<span class=\"o\">(</span><span class=\"n\">I3</span> <span class=\"o\">:</span> <span class=\"bp\">∃</span> <span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"n\">C</span> <span class=\"o\">:</span> <span class=\"n\">Point</span><span class=\"o\">,</span> <span class=\"o\">(</span><span class=\"n\">A</span> <span class=\"bp\">≠</span> <span class=\"n\">B</span> <span class=\"bp\">∧</span> <span class=\"n\">A</span> <span class=\"bp\">≠</span> <span class=\"n\">C</span> <span class=\"bp\">∧</span> <span class=\"n\">B</span> <span class=\"bp\">≠</span> <span class=\"n\">C</span> <span class=\"bp\">∧</span> <span class=\"o\">(</span><span class=\"bp\">∀</span> <span class=\"n\">ℓ</span> <span class=\"err\">∈</span> <span class=\"n\">Lines</span><span class=\"o\">,</span> <span class=\"o\">(</span><span class=\"n\">A</span> <span class=\"err\">∈</span> <span class=\"n\">ℓ</span> <span class=\"bp\">∧</span> <span class=\"n\">B</span> <span class=\"err\">∈</span> <span class=\"n\">ℓ</span><span class=\"o\">)</span> <span class=\"bp\">→</span> <span class=\"o\">(</span><span class=\"bp\">¬</span> <span class=\"o\">(</span><span class=\"n\">C</span> <span class=\"err\">∈</span> <span class=\"n\">ℓ</span><span class=\"o\">)</span> <span class=\"o\">))))</span>\n<span class=\"o\">(</span><span class=\"n\">between</span> <span class=\"o\">:</span> <span class=\"n\">Point</span> <span class=\"bp\">→</span> <span class=\"n\">Point</span> <span class=\"bp\">→</span> <span class=\"n\">Point</span> <span class=\"bp\">→</span> <span class=\"kt\">Prop</span><span class=\"o\">)</span>\n<span class=\"o\">(</span><span class=\"kn\">notation</span> <span class=\"n\">A</span> <span class=\"bp\">`*`</span> <span class=\"n\">B</span> <span class=\"bp\">`*`</span> <span class=\"n\">C</span> <span class=\"o\">:=</span> <span class=\"n\">between</span> <span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"n\">C</span><span class=\"o\">)</span>\n\n<span class=\"kn\">definition</span> <span class=\"n\">colinear</span> <span class=\"o\">{</span><span class=\"n\">Point</span><span class=\"o\">}</span> <span class=\"o\">(</span><span class=\"err\">Ω</span> <span class=\"o\">:</span> <span class=\"n\">PreHilbertPlane</span> <span class=\"n\">Point</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"n\">C</span> <span class=\"o\">:</span> <span class=\"n\">Point</span><span class=\"o\">)</span> <span class=\"o\">:=</span>\n<span class=\"bp\">∃</span> <span class=\"n\">ℓ</span> <span class=\"err\">∈</span> <span class=\"err\">Ω</span><span class=\"bp\">.</span><span class=\"n\">Lines</span><span class=\"o\">,</span> <span class=\"n\">A</span> <span class=\"err\">∈</span> <span class=\"n\">ℓ</span> <span class=\"bp\">∧</span> <span class=\"n\">B</span> <span class=\"err\">∈</span> <span class=\"n\">ℓ</span> <span class=\"bp\">∧</span> <span class=\"n\">C</span> <span class=\"err\">∈</span> <span class=\"n\">ℓ</span>\n\n<span class=\"kn\">structure</span> <span class=\"n\">HilbertPlane</span> <span class=\"o\">(</span><span class=\"n\">Point</span> <span class=\"o\">:</span> <span class=\"kt\">Type</span> <span class=\"n\">u</span><span class=\"o\">)</span> <span class=\"kn\">extends</span> <span class=\"n\">PreHilbertPlane</span> <span class=\"n\">Point</span> <span class=\"o\">:=</span>\n<span class=\"o\">(</span><span class=\"kn\">notation</span> <span class=\"bp\">`</span><span class=\"n\">colinear</span><span class=\"bp\">`</span> <span class=\"o\">:=</span> <span class=\"n\">colinear</span> <span class=\"n\">to_PreHilbertPlane</span><span class=\"o\">)</span>\n<span class=\"o\">(</span><span class=\"n\">foo</span> <span class=\"o\">:</span> <span class=\"bp\">∀</span> <span class=\"n\">a</span><span class=\"o\">,</span> <span class=\"n\">colinear</span> <span class=\"n\">a</span> <span class=\"n\">a</span> <span class=\"n\">a</span><span class=\"o\">)</span>\n<span class=\"o\">(</span><span class=\"n\">etc</span> <span class=\"o\">:</span> <span class=\"bp\">...</span><span class=\"o\">)</span>\n</pre></div>",
        "id": 185907971,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1579261235
    },
    {
        "content": "<p>How about extending the code that Kenny built in the other thread?</p>",
        "id": 185908160,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1579261400
    },
    {
        "content": "<p>That code has lots of things that I don't understand: class, instance, @[...], ... Also, the set of axioms is different. There are several formalizations of geometry, what I am trying to do is: take Hartshorne's UTM book and translate some chapters into Lean. I'd like to do this in the most straightforward way: ideally, you should be able to translate clear pen-and-paper thoughts into Lean, not having to re-think them. So if at some point he introduces a definition, I'd like to do so at the same point, etcetera.</p>",
        "id": 185908575,
        "sender_full_name": "Marc Masdeu",
        "timestamp": 1579261752
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"110049\">@Mario Carneiro</span> Is that Lean-Kosher and not a hack? I want to think about <code>between</code> and <code>colinear</code> in a very similar way. One is an undefined property that 3 points can have, whereas the other is a defined property.</p>",
        "id": 185908611,
        "sender_full_name": "Marc Masdeu",
        "timestamp": 1579261795
    },
    {
        "content": "<p>The way I wrote it in the last code snippet, it is a defined property</p>",
        "id": 185908689,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1579261850
    },
    {
        "content": "<p>The version with it being an undefined property with a characterization looks like this:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"kn\">structure</span> <span class=\"n\">HilbertPlane</span> <span class=\"o\">(</span><span class=\"n\">Point</span> <span class=\"o\">:</span> <span class=\"kt\">Type</span> <span class=\"n\">u</span><span class=\"o\">)</span> <span class=\"o\">:=</span>\n\n<span class=\"o\">(</span><span class=\"n\">Lines</span> <span class=\"o\">:</span> <span class=\"n\">set</span><span class=\"o\">(</span><span class=\"n\">set</span><span class=\"o\">(</span><span class=\"n\">Point</span><span class=\"o\">)))</span>\n<span class=\"o\">(</span><span class=\"n\">lies_on</span> <span class=\"o\">:</span> <span class=\"n\">Point</span> <span class=\"bp\">→</span> <span class=\"n\">Lines</span> <span class=\"bp\">→</span> <span class=\"kt\">Prop</span><span class=\"o\">)</span>\n\n<span class=\"o\">(</span><span class=\"n\">I1</span> <span class=\"o\">:</span> <span class=\"bp\">∀</span> <span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"o\">:</span> <span class=\"n\">Point</span><span class=\"o\">,</span>  <span class=\"n\">A</span> <span class=\"bp\">≠</span> <span class=\"n\">B</span> <span class=\"bp\">→</span> <span class=\"bp\">∃!</span> <span class=\"o\">(</span><span class=\"n\">ℓ</span> <span class=\"err\">∈</span> <span class=\"n\">Lines</span><span class=\"o\">),</span> <span class=\"o\">(</span> <span class=\"n\">A</span> <span class=\"err\">∈</span> <span class=\"n\">ℓ</span> <span class=\"o\">)</span> <span class=\"bp\">∧</span> <span class=\"o\">(</span> <span class=\"n\">B</span> <span class=\"err\">∈</span> <span class=\"n\">ℓ</span> <span class=\"o\">))</span>\n<span class=\"o\">(</span><span class=\"n\">I2</span> <span class=\"o\">:</span> <span class=\"bp\">∀</span> <span class=\"n\">ℓ</span> <span class=\"err\">∈</span> <span class=\"n\">Lines</span><span class=\"o\">,</span> <span class=\"bp\">∃</span> <span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"o\">:</span> <span class=\"n\">Point</span><span class=\"o\">,</span> <span class=\"n\">A</span> <span class=\"bp\">≠</span> <span class=\"n\">B</span> <span class=\"bp\">∧</span> <span class=\"n\">A</span> <span class=\"err\">∈</span> <span class=\"n\">ℓ</span> <span class=\"bp\">∧</span> <span class=\"n\">B</span> <span class=\"err\">∈</span> <span class=\"n\">ℓ</span><span class=\"o\">)</span>\n<span class=\"o\">(</span><span class=\"n\">I3</span> <span class=\"o\">:</span> <span class=\"bp\">∃</span> <span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"n\">C</span> <span class=\"o\">:</span> <span class=\"n\">Point</span><span class=\"o\">,</span> <span class=\"o\">(</span><span class=\"n\">A</span> <span class=\"bp\">≠</span> <span class=\"n\">B</span> <span class=\"bp\">∧</span> <span class=\"n\">A</span> <span class=\"bp\">≠</span> <span class=\"n\">C</span> <span class=\"bp\">∧</span> <span class=\"n\">B</span> <span class=\"bp\">≠</span> <span class=\"n\">C</span> <span class=\"bp\">∧</span> <span class=\"o\">(</span><span class=\"bp\">∀</span> <span class=\"n\">ℓ</span> <span class=\"err\">∈</span> <span class=\"n\">Lines</span><span class=\"o\">,</span> <span class=\"o\">(</span><span class=\"n\">A</span> <span class=\"err\">∈</span> <span class=\"n\">ℓ</span> <span class=\"bp\">∧</span> <span class=\"n\">B</span> <span class=\"err\">∈</span> <span class=\"n\">ℓ</span><span class=\"o\">)</span> <span class=\"bp\">→</span> <span class=\"o\">(</span><span class=\"bp\">¬</span> <span class=\"o\">(</span><span class=\"n\">C</span> <span class=\"err\">∈</span> <span class=\"n\">ℓ</span><span class=\"o\">)</span> <span class=\"o\">))))</span>\n<span class=\"o\">(</span><span class=\"n\">between</span> <span class=\"o\">:</span> <span class=\"n\">Point</span> <span class=\"bp\">→</span> <span class=\"n\">Point</span> <span class=\"bp\">→</span> <span class=\"n\">Point</span> <span class=\"bp\">→</span> <span class=\"kt\">Prop</span><span class=\"o\">)</span>\n<span class=\"o\">(</span><span class=\"kn\">notation</span> <span class=\"n\">A</span> <span class=\"bp\">`*`</span> <span class=\"n\">B</span> <span class=\"bp\">`*`</span> <span class=\"n\">C</span> <span class=\"o\">:=</span> <span class=\"n\">between</span> <span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"n\">C</span><span class=\"o\">)</span>\n<span class=\"o\">(</span><span class=\"n\">colinear</span> <span class=\"o\">:</span> <span class=\"n\">Point</span> <span class=\"bp\">→</span> <span class=\"n\">Point</span> <span class=\"bp\">→</span> <span class=\"n\">Point</span> <span class=\"bp\">→</span> <span class=\"kt\">Prop</span><span class=\"o\">)</span>\n<span class=\"o\">(</span><span class=\"n\">colinear_def</span> <span class=\"o\">:</span> <span class=\"bp\">∀</span> <span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"n\">C</span><span class=\"o\">,</span> <span class=\"n\">colinear</span> <span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"n\">C</span> <span class=\"bp\">↔</span> <span class=\"bp\">∃</span> <span class=\"n\">ℓ</span> <span class=\"err\">∈</span> <span class=\"n\">Lines</span><span class=\"o\">,</span> <span class=\"n\">A</span> <span class=\"err\">∈</span> <span class=\"n\">ℓ</span> <span class=\"bp\">∧</span> <span class=\"n\">B</span> <span class=\"err\">∈</span> <span class=\"n\">ℓ</span> <span class=\"bp\">∧</span> <span class=\"n\">C</span> <span class=\"err\">∈</span> <span class=\"n\">ℓ</span><span class=\"o\">)</span>\n<span class=\"o\">(</span><span class=\"n\">etc</span> <span class=\"o\">:</span> <span class=\"bp\">...</span><span class=\"o\">)</span>\n</pre></div>",
        "id": 185908783,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1579261931
    },
    {
        "content": "<blockquote>\n<p>The way I wrote it in the last code snippet, it is a defined property</p>\n</blockquote>\n<p>Yes, I meant that the way <code>between</code> and <code>colinear</code> are introduced in the code is very different (and also now I have an extra structure, which may be useful but requires changing the layout I had initially)...</p>",
        "id": 185908942,
        "sender_full_name": "Marc Masdeu",
        "timestamp": 1579262093
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"110049\">@Mario Carneiro</span> Oh! So the last code snippet does work? This is exactly what I was looking for.</p>",
        "id": 185909034,
        "sender_full_name": "Marc Masdeu",
        "timestamp": 1579262169
    },
    {
        "content": "<p>There is a third option, which is to have <code>colinear</code> be a (large) notation in the definition, resulting in complicated axioms, but then pick up the pieces afterward</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"kn\">structure</span> <span class=\"n\">HilbertPlane</span> <span class=\"o\">(</span><span class=\"n\">Point</span> <span class=\"o\">:</span> <span class=\"kt\">Type</span> <span class=\"n\">u</span><span class=\"o\">)</span> <span class=\"o\">:=</span>\n\n<span class=\"o\">(</span><span class=\"n\">Lines</span> <span class=\"o\">:</span> <span class=\"n\">set</span><span class=\"o\">(</span><span class=\"n\">set</span><span class=\"o\">(</span><span class=\"n\">Point</span><span class=\"o\">)))</span>\n<span class=\"o\">(</span><span class=\"n\">lies_on</span> <span class=\"o\">:</span> <span class=\"n\">Point</span> <span class=\"bp\">→</span> <span class=\"n\">Lines</span> <span class=\"bp\">→</span> <span class=\"kt\">Prop</span><span class=\"o\">)</span>\n\n<span class=\"o\">(</span><span class=\"n\">I1</span> <span class=\"o\">:</span> <span class=\"bp\">∀</span> <span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"o\">:</span> <span class=\"n\">Point</span><span class=\"o\">,</span>  <span class=\"n\">A</span> <span class=\"bp\">≠</span> <span class=\"n\">B</span> <span class=\"bp\">→</span> <span class=\"bp\">∃!</span> <span class=\"o\">(</span><span class=\"n\">ℓ</span> <span class=\"err\">∈</span> <span class=\"n\">Lines</span><span class=\"o\">),</span> <span class=\"o\">(</span> <span class=\"n\">A</span> <span class=\"err\">∈</span> <span class=\"n\">ℓ</span> <span class=\"o\">)</span> <span class=\"bp\">∧</span> <span class=\"o\">(</span> <span class=\"n\">B</span> <span class=\"err\">∈</span> <span class=\"n\">ℓ</span> <span class=\"o\">))</span>\n<span class=\"o\">(</span><span class=\"n\">I2</span> <span class=\"o\">:</span> <span class=\"bp\">∀</span> <span class=\"n\">ℓ</span> <span class=\"err\">∈</span> <span class=\"n\">Lines</span><span class=\"o\">,</span> <span class=\"bp\">∃</span> <span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"o\">:</span> <span class=\"n\">Point</span><span class=\"o\">,</span> <span class=\"n\">A</span> <span class=\"bp\">≠</span> <span class=\"n\">B</span> <span class=\"bp\">∧</span> <span class=\"n\">A</span> <span class=\"err\">∈</span> <span class=\"n\">ℓ</span> <span class=\"bp\">∧</span> <span class=\"n\">B</span> <span class=\"err\">∈</span> <span class=\"n\">ℓ</span><span class=\"o\">)</span>\n<span class=\"o\">(</span><span class=\"n\">I3</span> <span class=\"o\">:</span> <span class=\"bp\">∃</span> <span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"n\">C</span> <span class=\"o\">:</span> <span class=\"n\">Point</span><span class=\"o\">,</span> <span class=\"o\">(</span><span class=\"n\">A</span> <span class=\"bp\">≠</span> <span class=\"n\">B</span> <span class=\"bp\">∧</span> <span class=\"n\">A</span> <span class=\"bp\">≠</span> <span class=\"n\">C</span> <span class=\"bp\">∧</span> <span class=\"n\">B</span> <span class=\"bp\">≠</span> <span class=\"n\">C</span> <span class=\"bp\">∧</span> <span class=\"o\">(</span><span class=\"bp\">∀</span> <span class=\"n\">ℓ</span> <span class=\"err\">∈</span> <span class=\"n\">Lines</span><span class=\"o\">,</span> <span class=\"o\">(</span><span class=\"n\">A</span> <span class=\"err\">∈</span> <span class=\"n\">ℓ</span> <span class=\"bp\">∧</span> <span class=\"n\">B</span> <span class=\"err\">∈</span> <span class=\"n\">ℓ</span><span class=\"o\">)</span> <span class=\"bp\">→</span> <span class=\"o\">(</span><span class=\"bp\">¬</span> <span class=\"o\">(</span><span class=\"n\">C</span> <span class=\"err\">∈</span> <span class=\"n\">ℓ</span><span class=\"o\">)</span> <span class=\"o\">))))</span>\n<span class=\"o\">(</span><span class=\"n\">between</span> <span class=\"o\">:</span> <span class=\"n\">Point</span> <span class=\"bp\">→</span> <span class=\"n\">Point</span> <span class=\"bp\">→</span> <span class=\"n\">Point</span> <span class=\"bp\">→</span> <span class=\"kt\">Prop</span><span class=\"o\">)</span>\n<span class=\"o\">(</span><span class=\"kn\">notation</span> <span class=\"n\">A</span> <span class=\"bp\">`*`</span> <span class=\"n\">B</span> <span class=\"bp\">`*`</span> <span class=\"n\">C</span> <span class=\"o\">:=</span> <span class=\"n\">between</span> <span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"n\">C</span><span class=\"o\">)</span>\n<span class=\"o\">(</span><span class=\"kn\">notation</span> <span class=\"bp\">`</span><span class=\"n\">colinear</span><span class=\"bp\">`</span> <span class=\"o\">:=</span> <span class=\"bp\">λ</span> <span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"n\">C</span> <span class=\"o\">:</span> <span class=\"n\">Point</span><span class=\"o\">,</span> <span class=\"bp\">∃</span> <span class=\"n\">ℓ</span> <span class=\"err\">∈</span> <span class=\"n\">Lines</span><span class=\"o\">,</span> <span class=\"n\">A</span> <span class=\"err\">∈</span> <span class=\"n\">ℓ</span> <span class=\"bp\">∧</span> <span class=\"n\">B</span> <span class=\"err\">∈</span> <span class=\"n\">ℓ</span> <span class=\"bp\">∧</span> <span class=\"n\">C</span> <span class=\"err\">∈</span> <span class=\"n\">ℓ</span><span class=\"o\">)</span>\n<span class=\"o\">(</span><span class=\"n\">foo</span> <span class=\"o\">:</span> <span class=\"bp\">∀</span> <span class=\"n\">a</span><span class=\"o\">,</span> <span class=\"n\">colinear</span> <span class=\"n\">a</span> <span class=\"n\">a</span> <span class=\"n\">a</span><span class=\"o\">)</span>\n\n<span class=\"n\">def</span> <span class=\"n\">colinear</span> <span class=\"o\">{</span><span class=\"n\">Point</span><span class=\"o\">}</span> <span class=\"o\">(</span><span class=\"err\">Ω</span> <span class=\"o\">:</span> <span class=\"n\">HilbertPlane</span> <span class=\"n\">Point</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"n\">C</span> <span class=\"o\">:</span> <span class=\"n\">Point</span><span class=\"o\">)</span> <span class=\"o\">:=</span>\n<span class=\"bp\">∃</span> <span class=\"n\">ℓ</span> <span class=\"err\">∈</span> <span class=\"err\">Ω</span><span class=\"bp\">.</span><span class=\"n\">Lines</span><span class=\"o\">,</span> <span class=\"n\">A</span> <span class=\"err\">∈</span> <span class=\"n\">ℓ</span> <span class=\"bp\">∧</span> <span class=\"n\">B</span> <span class=\"err\">∈</span> <span class=\"n\">ℓ</span> <span class=\"bp\">∧</span> <span class=\"n\">C</span> <span class=\"err\">∈</span> <span class=\"n\">ℓ</span>\n\n<span class=\"kn\">theorem</span> <span class=\"n\">HilbertPlane</span><span class=\"bp\">.</span><span class=\"n\">foo&#39;</span> <span class=\"o\">{</span><span class=\"n\">Point</span><span class=\"o\">}</span> <span class=\"o\">(</span><span class=\"err\">Ω</span> <span class=\"o\">:</span> <span class=\"n\">HilbertPlane</span> <span class=\"n\">Point</span><span class=\"o\">)</span> <span class=\"o\">:</span>\n  <span class=\"bp\">∀</span> <span class=\"n\">a</span><span class=\"o\">,</span> <span class=\"n\">colinear</span> <span class=\"err\">Ω</span> <span class=\"n\">a</span> <span class=\"n\">a</span> <span class=\"n\">a</span> <span class=\"o\">:=</span> <span class=\"n\">HilbertPlane</span><span class=\"bp\">.</span><span class=\"n\">foo</span> <span class=\"bp\">_</span>\n</pre></div>",
        "id": 185909081,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1579262225
    },
    {
        "content": "<p>Note that the actual type of <code>HilbertPlane.foo</code> here is:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"bp\">#</span><span class=\"kn\">print</span> <span class=\"n\">HilbertPlane</span><span class=\"bp\">.</span><span class=\"n\">foo</span>\n<span class=\"c1\">-- def HilbertPlane.foo : ∀ {Point : Type u} (c : HilbertPlane Point) (a : Point),</span>\n<span class=\"c1\">--   (λ (A B C : Point), ∃ (ℓ : set Point) (H : ℓ ∈ c.Lines), A ∈ ℓ ∧ B ∈ ℓ ∧ C ∈ ℓ) a a a</span>\n</pre></div>",
        "id": 185909233,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1579262358
    },
    {
        "content": "<blockquote>\n<p>There are several formalizations of geometry, what I am trying to do is: take Hartshorne's UTM book and translate some chapters into Lean. I'd like to do this in the most straightforward way: ideally, you should be able to translate clear pen-and-paper thoughts into Lean, not having to re-think them. So if at some point he introduces a definition, I'd like to do so at the same point, etcetera.</p>\n</blockquote>\n<p>Sadly, this approach generally doesn't work out in the long term. Trying to stick too closely to a mathematical presentation can make your job harder than it already is</p>",
        "id": 185909522,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1579262604
    },
    {
        "content": "<p>Using a math text as a guide is a good idea, but expect to have to make small modifications frequently</p>",
        "id": 185909608,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1579262655
    },
    {
        "content": "<blockquote>\n<p>Sadly, this approach generally doesn't work out in the long term. Trying to stick too closely to a mathematical presentation can make your job harder than it already is</p>\n</blockquote>\n<p>I agree with you that if you want to make such code available to others it is best to think carefully on design so that you don't run into problems later. My goal is different: I am trying to learn Lean \"as a user\", and one way is to see how everything that a book (or myself) would want to put in a paper can be translated. Same happens when you program: writing a library / module is very different than translating an idea you have for an algorithm into python, say.</p>",
        "id": 185909811,
        "sender_full_name": "Marc Masdeu",
        "timestamp": 1579262875
    },
    {
        "content": "<p>I think what you are doing is a valuable way to learn, and a math text is a good starting point. I'm just saying that you shouldn't be afraid to make modifications in service of easier formalization</p>",
        "id": 185910121,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1579263162
    },
    {
        "content": "<p>which is itself important for learning how to write \"lean idioms\", things that work with the theorem prover rather than against it</p>",
        "id": 185910163,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1579263227
    },
    {
        "content": "<p>Completely agree. When I learned Python, the code that I wrote looked a lot like what I would have written in C. The more I learned, the more Python slang I could fluently speak and then I started thinking of my algorithms in a more pythonic way. I am at the first stage with Lean.</p>",
        "id": 185910291,
        "sender_full_name": "Marc Masdeu",
        "timestamp": 1579263343
    },
    {
        "content": "<p>While I am not saying you should just pick up Kenny's code, it does have a lot of idioms in it that could be useful for you</p>",
        "id": 185910376,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1579263415
    },
    {
        "content": "<p>I am trying to understand what's in there, but I find it hard (I don't yet know enough Lean language).</p>",
        "id": 185911701,
        "sender_full_name": "Marc Masdeu",
        "timestamp": 1579264619
    },
    {
        "content": "<p>colinear or collinear?</p>",
        "id": 185913019,
        "sender_full_name": "Sebastien Gouezel",
        "timestamp": 1579265788
    },
    {
        "content": "<p>I have put the definitions into a class, split the code into two files and I am running into more problems.</p>\n<ol>\n<li>I learned that I couldn't put the definitions in <code>axioms.lean</code> because then things broke. I changed the file name into <code>hpdefs.lean</code> and suddenly it worked. This was utterly frustrating, is there a simple explanation?</li>\n<li>I don't now how to use the notations that I defined in the class I made, in another file.</li>\n</ol>\n<p>This is my code so far:</p>\n<p>hpdefs.lean file:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"kn\">import</span> <span class=\"n\">tactic</span>\n\n<span class=\"kn\">namespace</span> <span class=\"n\">hilbertplane</span>\n\n<span class=\"n\">noncomputable</span> <span class=\"n\">theory</span>\n\n<span class=\"c1\">-- We want to be able to define functions using the law of excluded middle</span>\n<span class=\"n\">open_locale</span> <span class=\"n\">classical</span>\n\n<span class=\"kn\">universe</span> <span class=\"n\">u</span>\n\n<span class=\"kn\">notation</span> <span class=\"n\">p</span> <span class=\"bp\">`</span><span class=\"n\">xor</span><span class=\"bp\">`</span> <span class=\"n\">q</span> <span class=\"o\">:=</span> <span class=\"o\">(</span><span class=\"n\">p</span> <span class=\"bp\">∧</span> <span class=\"bp\">¬</span> <span class=\"n\">q</span><span class=\"o\">)</span> <span class=\"bp\">∨</span> <span class=\"o\">(</span><span class=\"n\">q</span> <span class=\"bp\">∧</span> <span class=\"bp\">¬</span> <span class=\"n\">p</span><span class=\"o\">)</span>\n\n<span class=\"n\">class</span> <span class=\"n\">HilbertPlane</span><span class=\"o\">:=</span>\n    <span class=\"o\">(</span><span class=\"n\">Point</span> <span class=\"o\">:</span> <span class=\"kt\">Type</span> <span class=\"n\">u</span><span class=\"o\">)</span>\n    <span class=\"o\">(</span><span class=\"n\">Lines</span> <span class=\"o\">:</span> <span class=\"n\">set</span><span class=\"o\">(</span><span class=\"n\">set</span><span class=\"o\">(</span><span class=\"n\">Point</span><span class=\"o\">)))</span>\n\n    <span class=\"o\">(</span><span class=\"n\">I1</span> <span class=\"o\">:</span> <span class=\"bp\">∀</span> <span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"o\">:</span> <span class=\"n\">Point</span><span class=\"o\">,</span>  <span class=\"n\">A</span> <span class=\"bp\">≠</span> <span class=\"n\">B</span> <span class=\"bp\">→</span> <span class=\"bp\">∃!</span> <span class=\"o\">(</span><span class=\"n\">ℓ</span> <span class=\"err\">∈</span> <span class=\"n\">Lines</span><span class=\"o\">),</span> <span class=\"o\">(</span> <span class=\"n\">A</span> <span class=\"err\">∈</span> <span class=\"n\">ℓ</span> <span class=\"o\">)</span> <span class=\"bp\">∧</span> <span class=\"o\">(</span> <span class=\"n\">B</span> <span class=\"err\">∈</span> <span class=\"n\">ℓ</span> <span class=\"o\">))</span>\n    <span class=\"o\">(</span><span class=\"n\">I2</span> <span class=\"o\">:</span> <span class=\"bp\">∀</span> <span class=\"n\">ℓ</span> <span class=\"err\">∈</span> <span class=\"n\">Lines</span><span class=\"o\">,</span> <span class=\"bp\">∃</span> <span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"o\">:</span> <span class=\"n\">Point</span><span class=\"o\">,</span> <span class=\"n\">A</span> <span class=\"bp\">≠</span> <span class=\"n\">B</span> <span class=\"bp\">∧</span> <span class=\"n\">A</span> <span class=\"err\">∈</span> <span class=\"n\">ℓ</span> <span class=\"bp\">∧</span> <span class=\"n\">B</span> <span class=\"err\">∈</span> <span class=\"n\">ℓ</span><span class=\"o\">)</span>\n    <span class=\"o\">(</span><span class=\"n\">I3</span> <span class=\"o\">:</span> <span class=\"bp\">∃</span> <span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"n\">C</span> <span class=\"o\">:</span> <span class=\"n\">Point</span><span class=\"o\">,</span> <span class=\"o\">(</span><span class=\"n\">A</span> <span class=\"bp\">≠</span> <span class=\"n\">B</span> <span class=\"bp\">∧</span> <span class=\"n\">A</span> <span class=\"bp\">≠</span> <span class=\"n\">C</span> <span class=\"bp\">∧</span> <span class=\"n\">B</span> <span class=\"bp\">≠</span> <span class=\"n\">C</span> <span class=\"bp\">∧</span> <span class=\"o\">(</span><span class=\"bp\">∀</span> <span class=\"n\">ℓ</span> <span class=\"err\">∈</span> <span class=\"n\">Lines</span><span class=\"o\">,</span> <span class=\"o\">(</span><span class=\"n\">A</span> <span class=\"err\">∈</span> <span class=\"n\">ℓ</span> <span class=\"bp\">∧</span> <span class=\"n\">B</span> <span class=\"err\">∈</span> <span class=\"n\">ℓ</span><span class=\"o\">)</span> <span class=\"bp\">→</span> <span class=\"o\">(</span><span class=\"bp\">¬</span> <span class=\"o\">(</span><span class=\"n\">C</span> <span class=\"err\">∈</span> <span class=\"n\">ℓ</span><span class=\"o\">)</span> <span class=\"o\">))))</span>\n    <span class=\"o\">(</span><span class=\"n\">between</span> <span class=\"o\">:</span> <span class=\"n\">Point</span> <span class=\"bp\">→</span> <span class=\"n\">Point</span> <span class=\"bp\">→</span> <span class=\"n\">Point</span> <span class=\"bp\">→</span> <span class=\"kt\">Prop</span><span class=\"o\">)</span>\n    <span class=\"o\">(</span><span class=\"kn\">notation</span> <span class=\"n\">A</span> <span class=\"bp\">`*`</span> <span class=\"n\">B</span> <span class=\"bp\">`*`</span> <span class=\"n\">C</span> <span class=\"o\">:=</span> <span class=\"n\">between</span> <span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"n\">C</span><span class=\"o\">)</span>\n    <span class=\"o\">(</span><span class=\"n\">collinear</span> <span class=\"o\">:</span> <span class=\"n\">Point</span> <span class=\"bp\">→</span> <span class=\"n\">Point</span> <span class=\"bp\">→</span> <span class=\"n\">Point</span> <span class=\"bp\">→</span> <span class=\"kt\">Prop</span><span class=\"o\">)</span>\n    <span class=\"o\">(</span><span class=\"n\">collinear_def</span> <span class=\"o\">:</span> <span class=\"bp\">∀</span> <span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"n\">C</span><span class=\"o\">,</span> <span class=\"n\">collinear</span> <span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"n\">C</span> <span class=\"bp\">↔</span> <span class=\"bp\">∃</span> <span class=\"n\">ℓ</span> <span class=\"err\">∈</span> <span class=\"n\">Lines</span><span class=\"o\">,</span> <span class=\"n\">A</span> <span class=\"err\">∈</span> <span class=\"n\">ℓ</span> <span class=\"bp\">∧</span> <span class=\"n\">B</span> <span class=\"err\">∈</span> <span class=\"n\">ℓ</span> <span class=\"bp\">∧</span> <span class=\"n\">C</span> <span class=\"err\">∈</span> <span class=\"n\">ℓ</span><span class=\"o\">)</span>\n    <span class=\"o\">(</span><span class=\"n\">noncollinear</span> <span class=\"o\">:</span> <span class=\"n\">Point</span> <span class=\"bp\">→</span> <span class=\"n\">Point</span> <span class=\"bp\">→</span> <span class=\"n\">Point</span> <span class=\"bp\">→</span> <span class=\"kt\">Prop</span><span class=\"o\">)</span>\n    <span class=\"o\">(</span><span class=\"n\">noncollinear_def</span> <span class=\"o\">:</span> <span class=\"bp\">∀</span> <span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"n\">C</span><span class=\"o\">,</span> <span class=\"n\">noncollinear</span> <span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"n\">C</span> <span class=\"bp\">↔</span> <span class=\"bp\">¬</span> <span class=\"n\">collinear</span> <span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"n\">C</span><span class=\"o\">)</span>\n\n    <span class=\"o\">(</span><span class=\"n\">B11</span> <span class=\"o\">(</span><span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"n\">C</span> <span class=\"o\">:</span> <span class=\"n\">Point</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"o\">(</span><span class=\"n\">A</span> <span class=\"bp\">*</span> <span class=\"n\">B</span> <span class=\"bp\">*</span> <span class=\"n\">C</span><span class=\"o\">)</span> <span class=\"bp\">→</span> <span class=\"o\">(</span><span class=\"n\">C</span> <span class=\"bp\">*</span> <span class=\"n\">B</span> <span class=\"bp\">*</span> <span class=\"n\">A</span><span class=\"o\">))</span>\n    <span class=\"o\">(</span><span class=\"n\">B12</span> <span class=\"o\">(</span><span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"n\">C</span> <span class=\"o\">:</span> <span class=\"n\">Point</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"o\">(</span><span class=\"n\">A</span> <span class=\"bp\">*</span> <span class=\"n\">B</span> <span class=\"bp\">*</span> <span class=\"n\">C</span><span class=\"o\">)</span> <span class=\"bp\">→</span> <span class=\"o\">(</span><span class=\"n\">A</span> <span class=\"bp\">≠</span> <span class=\"n\">B</span> <span class=\"bp\">∧</span> <span class=\"n\">A</span> <span class=\"bp\">≠</span> <span class=\"n\">C</span> <span class=\"bp\">∧</span> <span class=\"n\">B</span> <span class=\"bp\">≠</span> <span class=\"n\">C</span> <span class=\"bp\">∧</span> <span class=\"n\">collinear</span> <span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"n\">C</span><span class=\"o\">))</span>\n    <span class=\"o\">(</span><span class=\"n\">B2</span> <span class=\"o\">(</span><span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"o\">:</span> <span class=\"n\">Point</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"bp\">∃</span> <span class=\"n\">C</span><span class=\"o\">,</span> <span class=\"n\">A</span> <span class=\"bp\">*</span> <span class=\"n\">B</span> <span class=\"bp\">*</span> <span class=\"n\">C</span><span class=\"o\">)</span>\n    <span class=\"o\">(</span><span class=\"n\">B3</span> <span class=\"o\">(</span><span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"n\">C</span> <span class=\"o\">:</span> <span class=\"n\">Point</span><span class=\"o\">)</span> <span class=\"o\">{</span><span class=\"n\">ℓ</span> <span class=\"err\">∈</span> <span class=\"n\">Lines</span><span class=\"o\">}</span>\n        <span class=\"o\">(</span><span class=\"n\">hAB</span> <span class=\"o\">:</span> <span class=\"n\">A</span> <span class=\"bp\">≠</span> <span class=\"n\">B</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">hAC</span> <span class=\"o\">:</span> <span class=\"n\">A</span> <span class=\"bp\">≠</span> <span class=\"n\">C</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">hBC</span> <span class=\"o\">:</span> <span class=\"n\">B</span> <span class=\"bp\">≠</span> <span class=\"n\">C</span><span class=\"o\">)</span>\n        <span class=\"o\">(</span><span class=\"n\">hAl</span> <span class=\"o\">:</span> <span class=\"n\">A</span> <span class=\"err\">∈</span> <span class=\"n\">ℓ</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">hBl</span> <span class=\"o\">:</span> <span class=\"n\">B</span> <span class=\"err\">∈</span> <span class=\"n\">ℓ</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">hCl</span> <span class=\"o\">:</span> <span class=\"n\">C</span> <span class=\"err\">∈</span> <span class=\"n\">ℓ</span><span class=\"o\">)</span> <span class=\"o\">:</span>\n        <span class=\"o\">((</span><span class=\"n\">A</span> <span class=\"bp\">*</span> <span class=\"n\">B</span> <span class=\"bp\">*</span> <span class=\"n\">C</span><span class=\"o\">)</span> <span class=\"bp\">∧</span> <span class=\"bp\">¬</span><span class=\"o\">(</span> <span class=\"n\">B</span> <span class=\"bp\">*</span> <span class=\"n\">A</span> <span class=\"bp\">*</span> <span class=\"n\">C</span> <span class=\"o\">)</span> <span class=\"bp\">∧</span> <span class=\"bp\">¬</span> <span class=\"o\">(</span><span class=\"n\">A</span> <span class=\"bp\">*</span> <span class=\"n\">C</span> <span class=\"bp\">*</span> <span class=\"n\">B</span><span class=\"o\">))</span> <span class=\"bp\">∨</span>\n        <span class=\"o\">(</span><span class=\"bp\">¬</span> <span class=\"o\">(</span><span class=\"n\">A</span> <span class=\"bp\">*</span> <span class=\"n\">B</span> <span class=\"bp\">*</span> <span class=\"n\">C</span><span class=\"o\">)</span> <span class=\"bp\">∧</span> <span class=\"o\">(</span> <span class=\"n\">B</span> <span class=\"bp\">*</span> <span class=\"n\">A</span> <span class=\"bp\">*</span> <span class=\"n\">C</span> <span class=\"o\">)</span> <span class=\"bp\">∧</span> <span class=\"bp\">¬</span> <span class=\"o\">(</span><span class=\"n\">A</span> <span class=\"bp\">*</span> <span class=\"n\">C</span> <span class=\"bp\">*</span> <span class=\"n\">B</span><span class=\"o\">))</span> <span class=\"bp\">∨</span>\n        <span class=\"o\">(</span><span class=\"bp\">¬</span> <span class=\"o\">(</span><span class=\"n\">A</span> <span class=\"bp\">*</span> <span class=\"n\">B</span> <span class=\"bp\">*</span> <span class=\"n\">C</span><span class=\"o\">)</span> <span class=\"bp\">∧</span> <span class=\"bp\">¬</span><span class=\"o\">(</span> <span class=\"n\">B</span> <span class=\"bp\">*</span> <span class=\"n\">A</span> <span class=\"bp\">*</span> <span class=\"n\">C</span> <span class=\"o\">)</span> <span class=\"bp\">∧</span> <span class=\"o\">(</span><span class=\"n\">A</span> <span class=\"bp\">*</span> <span class=\"n\">C</span> <span class=\"bp\">*</span> <span class=\"n\">B</span><span class=\"o\">)))</span>\n\n    <span class=\"o\">(</span><span class=\"n\">B4</span> <span class=\"o\">(</span><span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"n\">C</span> <span class=\"n\">D</span><span class=\"o\">:</span> <span class=\"n\">Point</span><span class=\"o\">)</span> <span class=\"o\">{</span><span class=\"n\">ℓ</span> <span class=\"err\">∈</span> <span class=\"n\">Lines</span><span class=\"o\">}</span>\n        <span class=\"o\">(</span><span class=\"n\">hnc</span><span class=\"o\">:</span> <span class=\"n\">noncollinear</span> <span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"n\">C</span><span class=\"o\">)</span>\n        <span class=\"o\">(</span><span class=\"n\">hnAl</span><span class=\"o\">:</span> <span class=\"bp\">¬</span> <span class=\"o\">(</span><span class=\"n\">A</span> <span class=\"err\">∈</span> <span class=\"n\">ℓ</span><span class=\"o\">))</span> <span class=\"o\">(</span><span class=\"n\">hnBl</span><span class=\"o\">:</span> <span class=\"bp\">¬</span> <span class=\"n\">B</span> <span class=\"err\">∈</span> <span class=\"n\">ℓ</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">hnCl</span><span class=\"o\">:</span> <span class=\"bp\">¬</span> <span class=\"n\">C</span> <span class=\"err\">∈</span> <span class=\"n\">ℓ</span><span class=\"o\">)</span>\n        <span class=\"o\">(</span><span class=\"n\">hDl</span><span class=\"o\">:</span> <span class=\"n\">D</span> <span class=\"err\">∈</span> <span class=\"n\">ℓ</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">hADB</span><span class=\"o\">:</span> <span class=\"n\">A</span> <span class=\"bp\">*</span> <span class=\"n\">D</span> <span class=\"bp\">*</span> <span class=\"n\">B</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"o\">(</span><span class=\"bp\">∃</span> <span class=\"n\">E</span> <span class=\"o\">:</span> <span class=\"n\">Point</span><span class=\"o\">,</span> <span class=\"o\">(</span><span class=\"n\">A</span> <span class=\"bp\">*</span> <span class=\"n\">E</span> <span class=\"bp\">*</span> <span class=\"n\">C</span><span class=\"o\">)</span> <span class=\"n\">xor</span> <span class=\"o\">(</span><span class=\"n\">B</span> <span class=\"bp\">*</span> <span class=\"n\">E</span> <span class=\"bp\">*</span> <span class=\"n\">C</span><span class=\"o\">)))</span>\n\n    <span class=\"o\">(</span><span class=\"n\">intersect</span> <span class=\"o\">:</span> <span class=\"n\">set</span> <span class=\"n\">Point</span> <span class=\"bp\">→</span> <span class=\"n\">set</span> <span class=\"n\">Point</span> <span class=\"bp\">→</span> <span class=\"kt\">Prop</span><span class=\"o\">)</span>\n    <span class=\"o\">(</span><span class=\"n\">intersect_def</span> <span class=\"o\">(</span><span class=\"n\">r</span> <span class=\"n\">s</span> <span class=\"o\">:</span> <span class=\"n\">set</span><span class=\"o\">(</span><span class=\"n\">Point</span><span class=\"o\">))</span> <span class=\"o\">:</span> <span class=\"o\">(</span><span class=\"n\">intersect</span> <span class=\"n\">r</span> <span class=\"n\">s</span> <span class=\"bp\">↔</span> <span class=\"bp\">∃</span> <span class=\"n\">A</span> <span class=\"o\">:</span> <span class=\"n\">Point</span><span class=\"o\">,</span> <span class=\"n\">A</span> <span class=\"err\">∈</span> <span class=\"n\">r</span> <span class=\"bp\">∧</span> <span class=\"n\">A</span> <span class=\"err\">∈</span> <span class=\"n\">s</span><span class=\"o\">))</span>\n\n    <span class=\"o\">(</span><span class=\"n\">parallel</span> <span class=\"o\">:</span> <span class=\"n\">set</span> <span class=\"n\">Point</span> <span class=\"bp\">→</span> <span class=\"n\">set</span> <span class=\"n\">Point</span> <span class=\"bp\">→</span> <span class=\"kt\">Prop</span><span class=\"o\">)</span>\n    <span class=\"o\">(</span><span class=\"n\">parallel_def</span> <span class=\"o\">(</span><span class=\"n\">r</span> <span class=\"n\">s</span> <span class=\"o\">:</span> <span class=\"n\">set</span> <span class=\"n\">Point</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"n\">parallel</span> <span class=\"n\">r</span> <span class=\"n\">s</span> <span class=\"bp\">↔</span>  <span class=\"n\">r</span> <span class=\"err\">∈</span> <span class=\"n\">Lines</span> <span class=\"bp\">∧</span> <span class=\"n\">s</span> <span class=\"err\">∈</span> <span class=\"n\">Lines</span> <span class=\"bp\">→</span> <span class=\"o\">(</span><span class=\"n\">r</span> <span class=\"bp\">=</span> <span class=\"n\">s</span><span class=\"o\">)</span> <span class=\"bp\">∨</span> <span class=\"o\">(</span><span class=\"bp\">¬</span> <span class=\"o\">(</span><span class=\"n\">intersect</span> <span class=\"n\">r</span> <span class=\"n\">s</span><span class=\"o\">)))</span>\n    <span class=\"o\">(</span><span class=\"kn\">notation</span> <span class=\"n\">r</span> <span class=\"bp\">`||`</span> <span class=\"n\">s</span> <span class=\"o\">:=</span> <span class=\"n\">parallel</span> <span class=\"n\">r</span> <span class=\"n\">s</span><span class=\"o\">)</span>\n\n    <span class=\"o\">(</span><span class=\"n\">parallel_postulate</span> <span class=\"o\">{</span><span class=\"n\">A</span> <span class=\"o\">:</span> <span class=\"n\">Point</span><span class=\"o\">}</span> <span class=\"o\">{</span><span class=\"n\">ℓ</span> <span class=\"n\">r</span> <span class=\"n\">s</span> <span class=\"o\">:</span> <span class=\"n\">set</span> <span class=\"n\">Point</span><span class=\"o\">}</span>\n        <span class=\"o\">(</span><span class=\"n\">h1</span> <span class=\"o\">:</span> <span class=\"n\">ℓ</span> <span class=\"err\">∈</span> <span class=\"n\">Lines</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">hr</span> <span class=\"o\">:</span> <span class=\"n\">r</span> <span class=\"err\">∈</span> <span class=\"n\">Lines</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">hs</span> <span class=\"o\">:</span> <span class=\"n\">s</span> <span class=\"err\">∈</span> <span class=\"n\">Lines</span><span class=\"o\">)</span> <span class=\"o\">:</span>\n        <span class=\"n\">A</span> <span class=\"err\">∈</span> <span class=\"n\">r</span> <span class=\"bp\">∧</span> <span class=\"n\">A</span> <span class=\"err\">∈</span> <span class=\"n\">s</span> <span class=\"bp\">∧</span> <span class=\"n\">r</span> <span class=\"bp\">||</span> <span class=\"n\">ℓ</span> <span class=\"bp\">∧</span> <span class=\"n\">s</span> <span class=\"bp\">||</span> <span class=\"n\">ℓ</span> <span class=\"bp\">→</span> <span class=\"n\">r</span> <span class=\"bp\">=</span> <span class=\"n\">s</span><span class=\"o\">)</span>\n\n    <span class=\"o\">(</span><span class=\"n\">line_segment</span> <span class=\"o\">(</span><span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"o\">:</span> <span class=\"n\">Point</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"n\">set</span> <span class=\"n\">Point</span> <span class=\"o\">:=</span> <span class=\"o\">{</span><span class=\"n\">A</span><span class=\"o\">}</span> <span class=\"err\">∪</span> <span class=\"o\">{</span><span class=\"n\">B</span><span class=\"o\">}</span> <span class=\"err\">∪</span> <span class=\"o\">{</span><span class=\"n\">C</span> <span class=\"bp\">|</span> <span class=\"n\">A</span> <span class=\"bp\">*</span> <span class=\"n\">C</span> <span class=\"bp\">*</span> <span class=\"n\">B</span><span class=\"o\">})</span>\n    <span class=\"o\">(</span><span class=\"kn\">notation</span> <span class=\"n\">A</span> <span class=\"bp\">`#`</span> <span class=\"n\">B</span> <span class=\"o\">:=</span> <span class=\"n\">line_segment</span> <span class=\"n\">A</span> <span class=\"n\">B</span><span class=\"o\">)</span>\n    <span class=\"o\">(</span><span class=\"n\">triangle</span> <span class=\"o\">(</span><span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"n\">C</span> <span class=\"o\">:</span> <span class=\"n\">Point</span><span class=\"o\">)</span>  <span class=\"o\">(</span><span class=\"n\">h</span><span class=\"o\">:</span> <span class=\"n\">noncollinear</span> <span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"n\">C</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"n\">set</span> <span class=\"n\">Point</span> <span class=\"o\">:=</span> <span class=\"o\">(</span><span class=\"n\">A</span><span class=\"bp\">#</span><span class=\"n\">B</span><span class=\"o\">)</span> <span class=\"err\">∪</span> <span class=\"o\">(</span><span class=\"n\">A</span><span class=\"bp\">#</span><span class=\"n\">C</span><span class=\"o\">)</span> <span class=\"err\">∪</span> <span class=\"o\">(</span><span class=\"n\">B</span><span class=\"bp\">#</span><span class=\"n\">C</span><span class=\"o\">))</span>\n\n<span class=\"kn\">end</span> <span class=\"n\">hilbertplane</span>\n</pre></div>\n\n\n<p>firstlemmas.lean</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"kn\">import</span> <span class=\"bp\">.</span><span class=\"n\">hpdefs</span>\n\n<span class=\"kn\">open</span> <span class=\"n\">hilbertplane</span>\n\n<span class=\"kn\">variables</span> <span class=\"o\">{</span><span class=\"err\">Ω</span> <span class=\"o\">:</span> <span class=\"n\">HilbertPlane</span><span class=\"o\">}</span>\n<span class=\"kn\">variables</span> <span class=\"o\">{</span><span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"n\">C</span><span class=\"o\">:</span> <span class=\"err\">Ω</span><span class=\"bp\">.</span><span class=\"n\">Point</span><span class=\"o\">}</span>\n<span class=\"kn\">variables</span> <span class=\"o\">{</span><span class=\"n\">ℓ</span> <span class=\"n\">r</span> <span class=\"n\">s</span> <span class=\"o\">:</span> <span class=\"n\">set</span><span class=\"o\">(</span><span class=\"err\">Ω</span><span class=\"bp\">.</span><span class=\"n\">Point</span><span class=\"o\">)}</span>\n\n\n<span class=\"kn\">lemma</span> <span class=\"n\">I11</span> <span class=\"o\">:</span>  <span class=\"bp\">∀</span> <span class=\"n\">A</span> <span class=\"n\">B</span><span class=\"o\">,</span> <span class=\"n\">A</span> <span class=\"bp\">≠</span> <span class=\"n\">B</span> <span class=\"bp\">→</span> <span class=\"bp\">∃</span> <span class=\"n\">ℓ</span> <span class=\"err\">∈</span> <span class=\"err\">Ω</span><span class=\"bp\">.</span><span class=\"n\">Lines</span><span class=\"o\">,</span> <span class=\"o\">(</span> <span class=\"n\">A</span> <span class=\"err\">∈</span> <span class=\"n\">ℓ</span> <span class=\"o\">)</span> <span class=\"bp\">∧</span> <span class=\"o\">(</span> <span class=\"n\">B</span> <span class=\"err\">∈</span> <span class=\"n\">ℓ</span> <span class=\"o\">)</span> <span class=\"o\">:=</span>\n<span class=\"k\">begin</span>\n<span class=\"n\">intros</span> <span class=\"n\">A</span> <span class=\"n\">B</span><span class=\"o\">,</span>\n<span class=\"n\">intro</span> <span class=\"n\">h</span><span class=\"o\">,</span>\n<span class=\"n\">cases</span> <span class=\"n\">HilbertPlane</span><span class=\"bp\">.</span><span class=\"n\">I1</span> <span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"n\">h</span> <span class=\"k\">with</span> <span class=\"n\">ℓ</span> <span class=\"n\">h1</span><span class=\"o\">,</span>\n<span class=\"n\">existsi</span> <span class=\"n\">ℓ</span><span class=\"o\">,</span>\n<span class=\"n\">cases</span> <span class=\"n\">h1</span> <span class=\"k\">with</span> <span class=\"n\">H</span><span class=\"o\">,</span>\n<span class=\"n\">exact</span> <span class=\"n\">exists_of_exists_unique</span> <span class=\"n\">H</span><span class=\"o\">,</span>\n<span class=\"kn\">end</span>\n\n<span class=\"kn\">lemma</span> <span class=\"n\">endpoints_are_in_segment</span> <span class=\"o\">(</span><span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"o\">:</span> <span class=\"err\">Ω</span><span class=\"bp\">.</span><span class=\"n\">Point</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"n\">A</span> <span class=\"err\">∈</span> <span class=\"n\">A</span><span class=\"bp\">#</span><span class=\"n\">B</span> <span class=\"bp\">∧</span> <span class=\"n\">B</span> <span class=\"err\">∈</span> <span class=\"n\">A</span><span class=\"bp\">#</span><span class=\"n\">B</span> <span class=\"o\">:=</span>\n<span class=\"k\">begin</span>\n<span class=\"n\">split</span><span class=\"bp\">;</span> <span class=\"o\">{</span>\n<span class=\"n\">unfold</span> <span class=\"n\">line_segment</span><span class=\"o\">,</span>\n<span class=\"n\">finish</span><span class=\"o\">,</span>\n<span class=\"o\">}</span>\n<span class=\"kn\">end</span>\n</pre></div>\n\n\n<p>and the lemma <code>endpoints_are_in_segment</code> bothers Lean because it doesn't understand the <code>#</code> notation. Any pointers? Thank you.</p>",
        "id": 186095793,
        "sender_full_name": "Marc Masdeu",
        "timestamp": 1579522064
    },
    {
        "content": "<p>The filename thing sounds mysterious. Could you describe more precisely what you did and what happened?</p>",
        "id": 186098024,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1579524041
    },
    {
        "content": "<p>One possibility that comes to mind is that <code>axioms</code> is a keyword, so if you write <code>import axioms</code> it will import nothing and then start declaring axioms</p>",
        "id": 186098125,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1579524156
    },
    {
        "content": "<p>If you really want to call the file <code>axioms.lean</code>, you can import it using french quote escapes: <code>import «axioms»</code></p>",
        "id": 186098304,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1579524302
    },
    {
        "content": "<p>As for notations, you have to redeclare all the notations outside the structure because they are scoped to the structure definition itself</p>",
        "id": 186098433,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1579524392
    },
    {
        "content": "<blockquote>\n<p>The filename thing sounds mysterious. Could you describe more precisely what you did and what happened?</p>\n</blockquote>\n<p>Rename the file <code>hpdefs.lean</code> into <code>axioms.lean</code>. Then in <code>firstlemmas.lean</code> have the first line <code>import .axioms</code> and Lean complains. But your explanation is reasonable. I will avoid this file name in the future.</p>",
        "id": 186100042,
        "sender_full_name": "Marc Masdeu",
        "timestamp": 1579525641
    },
    {
        "content": "<p>OK, I got stuck again. I don't see why the following code does not work:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"kn\">import</span> <span class=\"n\">tactic</span>\n\n<span class=\"n\">noncomputable</span> <span class=\"n\">theory</span>\n\n<span class=\"c1\">-- We want to be able to define functions using the law of excluded middle</span>\n<span class=\"n\">open_locale</span> <span class=\"n\">classical</span>\n\n<span class=\"kn\">universe</span> <span class=\"n\">u</span>\n\n<span class=\"n\">class</span> <span class=\"n\">HilbertPlane</span><span class=\"o\">:=</span>\n    <span class=\"o\">(</span><span class=\"n\">Point</span> <span class=\"o\">:</span> <span class=\"kt\">Type</span> <span class=\"n\">u</span><span class=\"o\">)</span>\n    <span class=\"o\">(</span><span class=\"n\">Lines</span> <span class=\"o\">:</span> <span class=\"n\">set</span><span class=\"o\">(</span><span class=\"n\">set</span><span class=\"o\">(</span><span class=\"n\">Point</span><span class=\"o\">)))</span>\n    <span class=\"o\">(</span><span class=\"n\">line_segment</span> <span class=\"o\">:</span> <span class=\"n\">Point</span> <span class=\"bp\">→</span> <span class=\"n\">Point</span> <span class=\"bp\">→</span> <span class=\"n\">set</span> <span class=\"n\">Point</span><span class=\"o\">)</span>\n    <span class=\"o\">(</span><span class=\"n\">line_segment_def</span> <span class=\"o\">(</span><span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"o\">:</span> <span class=\"n\">Point</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"n\">line_segment</span> <span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"bp\">=</span> <span class=\"o\">{</span><span class=\"n\">A</span><span class=\"o\">}</span> <span class=\"err\">∪</span> <span class=\"o\">{</span><span class=\"n\">B</span><span class=\"o\">})</span>\n\n<span class=\"kn\">constant</span> <span class=\"err\">Ω</span> <span class=\"o\">:</span> <span class=\"n\">HilbertPlane</span>\n\n<span class=\"kn\">lemma</span> <span class=\"n\">endpoints_are_in_segment</span> <span class=\"o\">(</span><span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"o\">:</span> <span class=\"err\">Ω</span><span class=\"bp\">.</span><span class=\"n\">Point</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"o\">(</span><span class=\"n\">A</span> <span class=\"err\">∈</span> <span class=\"o\">(</span><span class=\"err\">Ω</span><span class=\"bp\">.</span><span class=\"n\">line_segment</span> <span class=\"n\">A</span> <span class=\"n\">B</span><span class=\"o\">))</span> <span class=\"o\">:=</span>\n<span class=\"k\">begin</span>\n<span class=\"n\">sorry</span><span class=\"o\">,</span>\n<span class=\"kn\">end</span>\n</pre></div>\n\n\n<p>It is frustrating, since this works perfectly:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"kn\">import</span> <span class=\"n\">tactic</span>\n\n<span class=\"n\">noncomputable</span> <span class=\"n\">theory</span>\n\n<span class=\"c1\">-- We want to be able to define functions using the law of excluded middle</span>\n<span class=\"n\">open_locale</span> <span class=\"n\">classical</span>\n\n<span class=\"kn\">universe</span> <span class=\"n\">u</span>\n\n<span class=\"kn\">constant</span> <span class=\"n\">Point</span> <span class=\"o\">:</span> <span class=\"kt\">Type</span> <span class=\"n\">u</span>\n<span class=\"kn\">constant</span> <span class=\"n\">Lines</span> <span class=\"o\">:</span> <span class=\"n\">set</span><span class=\"o\">(</span><span class=\"n\">set</span><span class=\"o\">(</span><span class=\"n\">Point</span><span class=\"o\">))</span>\n<span class=\"kn\">definition</span> <span class=\"n\">line_segment</span> <span class=\"o\">(</span><span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"o\">:</span> <span class=\"n\">Point</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"n\">set</span> <span class=\"n\">Point</span> <span class=\"o\">:=</span> <span class=\"o\">{</span><span class=\"n\">A</span><span class=\"o\">}</span> <span class=\"err\">∪</span> <span class=\"o\">{</span><span class=\"n\">B</span><span class=\"o\">}</span>\n\n<span class=\"kn\">lemma</span> <span class=\"n\">endpoints_are_in_segment</span> <span class=\"o\">(</span><span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"o\">:</span> <span class=\"n\">Point</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"o\">(</span><span class=\"n\">A</span> <span class=\"err\">∈</span> <span class=\"n\">line_segment</span> <span class=\"n\">A</span> <span class=\"n\">B</span><span class=\"o\">)</span> <span class=\"o\">:=</span>\n<span class=\"k\">begin</span>\n<span class=\"n\">unfold</span> <span class=\"n\">line_segment</span><span class=\"o\">,</span>\n<span class=\"n\">finish</span><span class=\"o\">,</span>\n<span class=\"kn\">end</span>\n</pre></div>\n\n\n<p>Apart from the solution, I would appreciate being able to tell in the future how to fix these issues (by reading at errors, or using \"debugging\" commands in Lean). I hope I didn't have to constantly ask Zulip...</p>",
        "id": 186265955,
        "sender_full_name": "Marc Masdeu",
        "timestamp": 1579682914
    },
    {
        "content": "<p>Let's start with the error message.</p>\n<div class=\"codehilite\"><pre><span></span>invalid field notation, function &#39;HilbertPlane.line_segment&#39; does not have explicit argument with type (HilbertPlane ...)\n</pre></div>\n\n\n<p>Okay, that's weird. What type does it actually have?</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"bp\">#</span><span class=\"kn\">print</span> <span class=\"n\">HilbertPlane</span><span class=\"bp\">.</span><span class=\"n\">line_segment</span>\n</pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><span class=\"bp\">@</span><span class=\"o\">[</span><span class=\"kn\">reducible</span><span class=\"o\">]</span>\n<span class=\"n\">def</span> <span class=\"n\">HilbertPlane</span><span class=\"bp\">.</span><span class=\"n\">line_segment</span> <span class=\"o\">:</span> <span class=\"bp\">Π</span> <span class=\"o\">[</span><span class=\"n\">c</span> <span class=\"o\">:</span> <span class=\"n\">HilbertPlane</span><span class=\"o\">],</span> <span class=\"n\">HilbertPlane</span><span class=\"bp\">.</span><span class=\"n\">Point</span> <span class=\"bp\">→</span> <span class=\"n\">HilbertPlane</span><span class=\"bp\">.</span><span class=\"n\">Point</span> <span class=\"bp\">→</span> <span class=\"n\">set</span> <span class=\"n\">HilbertPlane</span><span class=\"bp\">.</span><span class=\"n\">Point</span> <span class=\"o\">:=</span>\n<span class=\"bp\">λ</span> <span class=\"o\">[</span><span class=\"n\">c</span> <span class=\"o\">:</span> <span class=\"n\">HilbertPlane</span><span class=\"o\">],</span> <span class=\"o\">[</span><span class=\"n\">HilbertPlane</span><span class=\"bp\">.</span><span class=\"n\">line_segment</span> <span class=\"n\">c</span><span class=\"o\">]</span>\n</pre></div>\n\n\n<p>Notice that <code>c</code> here, the <code>HilbertPlane</code> argument in question, is in square brackets. That means it is intended to be inferred by type class inference. Why? Because you called <code>HilbertPlane</code> a <code>class</code> rather than a <code>structure</code>.</p>",
        "id": 186267136,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1579683875
    },
    {
        "content": "<p>The idea with typeclass arguments is that you don't specify them, you let lean figure them out. Let's try that:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"kn\">lemma</span> <span class=\"n\">endpoints_are_in_segment</span> <span class=\"o\">(</span><span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"o\">:</span> <span class=\"err\">Ω</span><span class=\"bp\">.</span><span class=\"n\">Point</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"o\">(</span><span class=\"n\">A</span> <span class=\"err\">∈</span> <span class=\"o\">(</span><span class=\"n\">line_segment</span> <span class=\"n\">A</span> <span class=\"n\">B</span><span class=\"o\">))</span> <span class=\"o\">:=</span> <span class=\"n\">sorry</span>\n</pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span>unknown identifier &#39;line_segment&#39;\n</pre></div>\n\n\n<p>Thanks lean. Guess we need to open the namespace</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"kn\">open</span> <span class=\"n\">HilbertPlane</span>\n<span class=\"kn\">lemma</span> <span class=\"n\">endpoints_are_in_segment</span> <span class=\"o\">(</span><span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"o\">:</span> <span class=\"err\">Ω</span><span class=\"bp\">.</span><span class=\"n\">Point</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"o\">(</span><span class=\"n\">A</span> <span class=\"err\">∈</span> <span class=\"o\">(</span><span class=\"n\">line_segment</span> <span class=\"n\">A</span> <span class=\"n\">B</span><span class=\"o\">))</span> <span class=\"o\">:=</span> <span class=\"n\">sorry</span>\n</pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span>failed to synthesize type class instance for\nA : Point,\nB : Point\n⊢ HilbertPlane\n</pre></div>\n\n\n<p>Okay, getting closer. It says it can't find an instance of <code>HilbertPlane</code>. (Notice also that it omits the <code>Ω</code> in <code>Point</code>. Clearly that's how it expects you to write it.) I will note at this point that <code>HilbertPlane</code> has no arguments, which is rather unusual for a typeclass. It's really only a useful construct if there is only ever one <code>HilbertPlane</code> around, but maybe that's the case for you.</p>",
        "id": 186267723,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1579684396
    },
    {
        "content": "<p>In any case, we can add it as an instance variable, and then lean should find it:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"kn\">variable</span> <span class=\"o\">[</span><span class=\"n\">HilbertPlane</span><span class=\"o\">]</span>\n\n<span class=\"kn\">open</span> <span class=\"n\">HilbertPlane</span>\n<span class=\"kn\">lemma</span> <span class=\"n\">endpoints_are_in_segment</span> <span class=\"o\">(</span><span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"o\">:</span> <span class=\"n\">Point</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"o\">(</span><span class=\"n\">A</span> <span class=\"err\">∈</span> <span class=\"o\">(</span><span class=\"n\">line_segment</span> <span class=\"n\">A</span> <span class=\"n\">B</span><span class=\"o\">))</span> <span class=\"o\">:=</span> <span class=\"n\">sorry</span>\n</pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span>kernel failed to type check declaration &#39;endpoints_are_in_segment&#39; this is usually due to a buggy tactic or a bug in the builtin elaborator\nelaborated type:\n  ∀ [_inst_1 : HilbertPlane] (A B : Point), A ∈ line_segment A B\nelaborated value:\n  λ [_inst_1 : HilbertPlane] (A B : Point), sorry\nnested exception message:\ninvalid reference to undefined universe level parameter &#39;u_1&#39;\n</pre></div>\n\n\n<p>Ooh, these are extra special errors that you get if you managed to fool the tactic framework into producing an invalid proof. I think this will go away if you actually finish the proof, though.</p>",
        "id": 186267740,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1579684426
    },
    {
        "content": "<div class=\"codehilite\"><pre><span></span><span class=\"kn\">variable</span> <span class=\"o\">[</span><span class=\"n\">HilbertPlane</span><span class=\"o\">]</span>\n\n<span class=\"kn\">open</span> <span class=\"n\">HilbertPlane</span>\n<span class=\"kn\">lemma</span> <span class=\"n\">endpoints_are_in_segment</span> <span class=\"o\">(</span><span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"o\">:</span> <span class=\"n\">Point</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"o\">(</span><span class=\"n\">A</span> <span class=\"err\">∈</span> <span class=\"o\">(</span><span class=\"n\">line_segment</span> <span class=\"n\">A</span> <span class=\"n\">B</span><span class=\"o\">))</span> <span class=\"o\">:=</span>\n<span class=\"k\">by</span> <span class=\"n\">simp</span> <span class=\"o\">[</span><span class=\"n\">line_segment_def</span><span class=\"o\">]</span>\n</pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span>kernel failed to type check declaration &#39;endpoints_are_in_segment&#39; this is usually due to a buggy tactic or a bug in the builtin elaborator\nelaborated type:\n  ∀ [_inst_1 : HilbertPlane] (A B : Point), A ∈ line_segment A B\nelaborated value:\n  λ [_inst_1 : HilbertPlane] (A B : Point),\n    eq.mpr\n      ...\n      trivial\nnested exception message:\ninvalid reference to undefined universe level parameter &#39;u_1&#39;\n</pre></div>\n\n\n<p>Apparently my hope was unfounded. This is an actual bug in lean, so I'm not sure what the best workaround is, but explicitly including the instance seems to work:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"kn\">variable</span> <span class=\"o\">[</span><span class=\"err\">Ω</span> <span class=\"o\">:</span> <span class=\"n\">HilbertPlane</span><span class=\"o\">]</span>\n<span class=\"n\">include</span> <span class=\"err\">Ω</span>\n\n<span class=\"kn\">open</span> <span class=\"n\">HilbertPlane</span>\n<span class=\"kn\">lemma</span> <span class=\"n\">endpoints_are_in_segment</span> <span class=\"o\">(</span><span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"o\">:</span> <span class=\"n\">Point</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"o\">(</span><span class=\"n\">A</span> <span class=\"err\">∈</span> <span class=\"o\">(</span><span class=\"n\">line_segment</span> <span class=\"n\">A</span> <span class=\"n\">B</span><span class=\"o\">))</span> <span class=\"o\">:=</span>\n<span class=\"k\">by</span> <span class=\"n\">simp</span> <span class=\"o\">[</span><span class=\"n\">line_segment_def</span><span class=\"o\">]</span> <span class=\"c1\">-- works</span>\n</pre></div>",
        "id": 186268141,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1579684718
    },
    {
        "content": "<p>Oh wow! This is a great explanation!! I will see if I can fit this into the rest of the code. Still, I doubt I'd be able to debug something like this in the future. Lean is hard.</p>",
        "id": 186269915,
        "sender_full_name": "Marc Masdeu",
        "timestamp": 1579686155
    },
    {
        "content": "<p>I really don't see the point of having a type class with no argument. Why don't you make the type of points a parameter of <code>HilbertPlane</code>? This would be useful if you want to extend to three-dimensional geometry. Then you'll have subtypes having a <code>HilbertPlane</code> structure.</p>",
        "id": 186274345,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1579689902
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"110031\">@Patrick Massot</span> One reason you might not want to use <code>HilbertPlane P</code> where <code>P</code> is the type of points is that there are also lines to deal with. Would you write <code>Lines P</code> for that type?</p>",
        "id": 186279198,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1579693967
    },
    {
        "content": "<blockquote>\n<p>Oh wow! This is a great explanation!! I will see if I can fit this into the rest of the code. Still, I doubt I'd be able to debug something like this in the future. Lean is hard.</p>\n</blockquote>\n<p>Algebraic number theory is hard. There's a learning curve. I couldn't do my first year example sheets for a long time. Working on them taught me basic logic, then defining schemes taught me about classes and structures, and then I learnt how to read the error messages, and now I can usually solve problems myself. The way to learn it is to do exactly what you're doing -- try some maths at a level which is suitable for your current formalisation skills and ask when you get stuck, then repeat</p>",
        "id": 186283929,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1579698092
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"110049\">@Mario Carneiro</span> and <span class=\"user-mention\" data-user-id=\"110031\">@Patrick Massot</span>  I will probably deal with these issues later...</p>",
        "id": 186295344,
        "sender_full_name": "Marc Masdeu",
        "timestamp": 1579706117
    },
    {
        "content": "<p>Now I have a file <code>hpdefs.lean</code> and a file <code>lesson1.lean</code>, this second one with some lemmas that seem to compile (I'm still using CoCalc for this). I want to start a new file, <code>lesson2.lean</code>. I type this into the new file:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"kn\">import</span> <span class=\"bp\">.</span><span class=\"n\">lesson1</span>\n\n<span class=\"kn\">open</span> <span class=\"n\">hilbertplane</span>\n\n<span class=\"kn\">variables</span> <span class=\"o\">{</span><span class=\"err\">Ω</span> <span class=\"o\">:</span> <span class=\"n\">HilbertPlane</span><span class=\"o\">}</span>\n</pre></div>\n\n\n<p>and it already complains that \"imported file '/home/user/leanprojects/test/src/lesson1.lean' uses sorry\" (which I can't see in that file). So what does that error message mean actually?</p>",
        "id": 186295575,
        "sender_full_name": "Marc Masdeu",
        "timestamp": 1579706253
    },
    {
        "content": "<p>The sorry may be in a file imported by lesson1</p>",
        "id": 186295681,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1579706308
    },
    {
        "content": "<p>lesson1 only imports hpdefs, which has no sorry's either...</p>",
        "id": 186295930,
        "sender_full_name": "Marc Masdeu",
        "timestamp": 1579706458
    },
    {
        "content": "<p>It turns out that cocalc had issues with some sort of caching. I restarted everything and the complaint went away... Thanks <span class=\"user-mention\" data-user-id=\"110031\">@Patrick Massot</span> !</p>",
        "id": 186296511,
        "sender_full_name": "Marc Masdeu",
        "timestamp": 1579706766
    },
    {
        "content": "<p>This question should be quick: I have the state:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"err\">Ω</span> <span class=\"o\">:</span> <span class=\"n\">HilbertPlane</span><span class=\"o\">,</span>\n<span class=\"n\">A</span> <span class=\"o\">:</span> <span class=\"n\">HilbertPlane</span><span class=\"bp\">.</span><span class=\"n\">Point</span>\n<span class=\"err\">⊢</span> <span class=\"o\">{</span><span class=\"n\">C</span> <span class=\"o\">:</span> <span class=\"n\">HilbertPlane</span><span class=\"bp\">.</span><span class=\"n\">Point</span> <span class=\"bp\">|</span> <span class=\"n\">A</span> <span class=\"bp\">*</span> <span class=\"n\">C</span><span class=\"bp\">*</span><span class=\"n\">A</span><span class=\"o\">}</span> <span class=\"bp\">=</span> <span class=\"err\">∅</span>\n</pre></div>\n\n\n<p>This is a trivial statement, directly following from the axiom:</p>\n<div class=\"codehilite\"><pre><span></span>    <span class=\"o\">(</span><span class=\"n\">B12</span> <span class=\"o\">(</span><span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"n\">C</span> <span class=\"o\">:</span> <span class=\"n\">Point</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"o\">(</span><span class=\"n\">A</span> <span class=\"bp\">*</span> <span class=\"n\">B</span> <span class=\"bp\">*</span> <span class=\"n\">C</span><span class=\"o\">)</span> <span class=\"bp\">→</span> <span class=\"o\">(</span><span class=\"n\">A</span> <span class=\"bp\">≠</span> <span class=\"n\">B</span> <span class=\"bp\">∧</span> <span class=\"n\">A</span> <span class=\"bp\">≠</span> <span class=\"n\">C</span> <span class=\"bp\">∧</span> <span class=\"n\">B</span> <span class=\"bp\">≠</span> <span class=\"n\">C</span> <span class=\"bp\">∧</span> <span class=\"n\">collinear</span> <span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"n\">C</span><span class=\"o\">))</span>\n</pre></div>\n\n\n<p>but I don't see how to do it in Lean. I would like to say to Lean:<br>\n1) Let C be a point in the left set.<br>\n2) By B12 A B A we have A \\neq A, contradiction.</p>",
        "id": 186371280,
        "sender_full_name": "Marc Masdeu",
        "timestamp": 1579771762
    },
    {
        "content": "<p>A generic start would be <code>ext C, suffices : ¬ A*C*A, by simpa,</code>.</p>",
        "id": 186371793,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1579772215
    },
    {
        "content": "<p>The ext C is what I didn't know...</p>",
        "id": 186371934,
        "sender_full_name": "Marc Masdeu",
        "timestamp": 1579772358
    },
    {
        "content": "<p>I then intro'd h : A * C * A<br>\nI want to apply B12's second inequality (one of the 4 and statements). I suceeded with</p>\n<div class=\"codehilite\"><pre><span></span>have g := (HilbertPlane.B12 A C A) h,\nfinish,\n</pre></div>\n\n\n<p><span aria-label=\"grinning\" class=\"emoji emoji-1f600\" role=\"img\" title=\"grinning\">:grinning:</span></p>",
        "id": 186372997,
        "sender_full_name": "Marc Masdeu",
        "timestamp": 1579773361
    },
    {
        "content": "<p>It's clear how to proceed here:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"n\">Tactic</span> <span class=\"n\">State</span>\n<span class=\"err\">Ω</span> <span class=\"o\">:</span> <span class=\"n\">HilbertPlane</span><span class=\"o\">,</span>\n<span class=\"n\">A</span> <span class=\"o\">:</span> <span class=\"n\">HilbertPlane</span><span class=\"bp\">.</span><span class=\"n\">Point</span><span class=\"o\">,</span>\n<span class=\"n\">ℓ</span> <span class=\"o\">:</span> <span class=\"n\">set</span> <span class=\"n\">HilbertPlane</span><span class=\"bp\">.</span><span class=\"n\">Point</span><span class=\"o\">,</span>\n<span class=\"n\">h</span> <span class=\"o\">:</span> <span class=\"n\">A</span> <span class=\"err\">∉</span> <span class=\"n\">ℓ</span>\n<span class=\"err\">⊢</span> <span class=\"o\">{</span><span class=\"n\">A</span><span class=\"o\">}</span> <span class=\"err\">∩</span> <span class=\"n\">ℓ</span> <span class=\"bp\">=</span> <span class=\"err\">∅</span>\n</pre></div>\n\n\n<p>I even found something called <code>set.inter_singleton_eq_empty</code>,  which looks like would finish this instantly. But I don't now how to apply it.</p>\n<p>It's clear that this is not the most direct way:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"n\">ext</span> <span class=\"n\">C</span><span class=\"o\">,</span>\n<span class=\"n\">split</span><span class=\"o\">,</span>\n<span class=\"o\">{</span>\n<span class=\"n\">intro</span> <span class=\"n\">h</span><span class=\"o\">,</span>\n<span class=\"n\">exfalso</span><span class=\"o\">,</span>\n<span class=\"n\">cases</span> <span class=\"n\">h</span> <span class=\"k\">with</span> <span class=\"n\">h3</span> <span class=\"n\">h4</span><span class=\"o\">,</span>\n<span class=\"n\">finish</span><span class=\"o\">,</span>\n<span class=\"o\">},</span>\n<span class=\"n\">simp</span><span class=\"o\">,</span>\n</pre></div>\n\n\n<p>How could I do easier? On a related note, if I managed to prove a statement in some sort of convoluted way (like above), can I ask Lean to give me a proof that I can paste back to avoid using complicated tactics?</p>",
        "id": 186376430,
        "sender_full_name": "Marc Masdeu",
        "timestamp": 1579776076
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"254058\">@Marc Masdeu</span> That name reads like the singleton is on the right hand side of <code>∩</code></p>",
        "id": 186378292,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1579777881
    },
    {
        "content": "<p>Is there also <code>set.singleton_inter_eq_empty</code>?</p>",
        "id": 186378304,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1579777893
    },
    {
        "content": "<p>Otherwise, maybe <code>rw set.inter_comm</code>?</p>",
        "id": 186378312,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1579777905
    },
    {
        "content": "<p>(I just made up that name, but it should exist.)</p>",
        "id": 186378321,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1579777916
    },
    {
        "content": "<p>Also <code>squeeze_simp [h]</code> might be able to help</p>",
        "id": 186378380,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1579777958
    },
    {
        "content": "<blockquote>\n<p>Otherwise, maybe <code>rw set.inter_comm</code>?</p>\n</blockquote>\n<p>This worked! So I finished it with:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"n\">rw</span> <span class=\"n\">set</span><span class=\"bp\">.</span><span class=\"n\">inter_comm</span><span class=\"o\">,</span>\n<span class=\"n\">rw</span> <span class=\"n\">set</span><span class=\"bp\">.</span><span class=\"n\">inter_singleton_eq_empty</span><span class=\"o\">,</span>\n<span class=\"n\">exact</span> <span class=\"n\">h1</span><span class=\"o\">,</span>\n</pre></div>\n\n\n<p>Great!</p>",
        "id": 186378532,
        "sender_full_name": "Marc Masdeu",
        "timestamp": 1579778114
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"254058\">@Marc Masdeu</span> Does this mean that <code>set.singleton_inter_eq_empty</code> is missing? If so, that's a (tiny) hole in the library</p>",
        "id": 186379838,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1579779383
    },
    {
        "content": "<p>It does exist, and it clears the goal in one less line :-).</p>",
        "id": 186380832,
        "sender_full_name": "Marc Masdeu",
        "timestamp": 1579780472
    },
    {
        "content": "<p>I guess you could save another line if you don't <code>rw</code> but <code>exact</code></p>",
        "id": 186381661,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1579781172
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"254058\">@Marc Masdeu</span> Do you know about <code>suggest</code>?</p>",
        "id": 186381803,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1579781284
    },
    {
        "content": "<p>I guess if you type <code>suggest</code> for your initial problem, it would tell you how to close the goal in 1 line.</p>",
        "id": 186381833,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1579781313
    },
    {
        "content": "<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"254058\">Marc Masdeu</span> Do you know about <code>suggest</code>?</p>\n</blockquote>\n<p>Oh no, I didn't know about this one! I am getting a bit mixed up with <code>suggest</code>, <code>simp</code>, <code>simpa</code>, <code>finish</code>, <code>cc</code> and so on...</p>",
        "id": 186381997,
        "sender_full_name": "Marc Masdeu",
        "timestamp": 1579781444
    },
    {
        "content": "<p>Haha, I can imagine</p>",
        "id": 186382011,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1579781454
    },
    {
        "content": "<p><code>suggest</code> is extremely useful.</p>",
        "id": 186382028,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1579781465
    },
    {
        "content": "<p>So useful that I wish there was a dedicated window showing its results, without having to type it myself.</p>",
        "id": 186382049,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1579781496
    },
    {
        "content": "<p>Now that I have you here, do you know of an analogue for rcases to deal with</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"n\">h</span> <span class=\"o\">:</span> <span class=\"n\">p</span> <span class=\"err\">\\</span><span class=\"n\">and</span> <span class=\"n\">q</span> <span class=\"err\">\\</span><span class=\"n\">and</span> <span class=\"n\">r</span> <span class=\"err\">\\</span><span class=\"n\">and</span> <span class=\"n\">s</span>\n</pre></div>\n\n\n<p>I would like to do something like <code>split_h into \\langle h1, h2, h3, h4 \\rangle</code>. Instead, i do:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"k\">have</span> <span class=\"n\">hAB</span> <span class=\"o\">:=</span> <span class=\"n\">h1</span><span class=\"bp\">.</span><span class=\"n\">left</span><span class=\"o\">,</span>\n<span class=\"k\">have</span> <span class=\"n\">h2</span> <span class=\"o\">:=</span> <span class=\"n\">h1</span><span class=\"bp\">.</span><span class=\"n\">right</span><span class=\"o\">,</span>\n<span class=\"k\">have</span> <span class=\"n\">hAC</span> <span class=\"o\">:=</span> <span class=\"n\">h2</span><span class=\"bp\">.</span><span class=\"n\">left</span><span class=\"o\">,</span>\n<span class=\"k\">have</span> <span class=\"n\">h3</span> <span class=\"o\">:=</span> <span class=\"n\">h2</span><span class=\"bp\">.</span><span class=\"n\">right</span><span class=\"o\">,</span>\n<span class=\"k\">have</span> <span class=\"n\">hBC</span> <span class=\"o\">:=</span> <span class=\"n\">h3</span><span class=\"bp\">.</span><span class=\"n\">left</span><span class=\"o\">,</span>\n<span class=\"k\">have</span> <span class=\"n\">h4</span> <span class=\"o\">:=</span> <span class=\"n\">h3</span><span class=\"bp\">.</span><span class=\"n\">right</span><span class=\"o\">,</span>\n</pre></div>",
        "id": 186382150,
        "sender_full_name": "Marc Masdeu",
        "timestamp": 1579781580
    },
    {
        "content": "<p>That's what <code>rcases</code> does</p>",
        "id": 186382278,
        "sender_full_name": "Reid Barton",
        "timestamp": 1579781684
    },
    {
        "content": "<p><code>split_h into</code> -&gt; <code>rcases h with</code></p>",
        "id": 186382289,
        "sender_full_name": "Reid Barton",
        "timestamp": 1579781693
    },
    {
        "content": "<p>Oh, I just tried and it did work. I am realising that it works in different settings (I had just used it in <code>\\exists A B C...</code> type statements)</p>",
        "id": 186382427,
        "sender_full_name": "Marc Masdeu",
        "timestamp": 1579781805
    },
    {
        "content": "<blockquote>\n<p>So useful that I wish there was a dedicated window showing its results, without having to type it myself.</p>\n</blockquote>\n<p>I haven't managed to use <code>suggest</code> from CoCalc. Is this a VSCode feature?</p>",
        "id": 186382461,
        "sender_full_name": "Marc Masdeu",
        "timestamp": 1579781840
    },
    {
        "content": "<p>Ah yes. rcases works on any inductive type, including equality, and I think also quotients</p>",
        "id": 186382574,
        "sender_full_name": "Reid Barton",
        "timestamp": 1579781926
    },
    {
        "content": "<blockquote>\n<blockquote>\n<p>So useful that I wish there was a dedicated window showing its results, without having to type it myself.</p>\n</blockquote>\n<p>I haven't managed to use <code>suggest</code> from CoCalc. Is this a VSCode feature?</p>\n</blockquote>\n<p><span class=\"user-mention\" data-user-id=\"254058\">@Marc Masdeu</span> No, it's pure mathlib. But it's not that old. So maybe CoCalc is using an old version of mathlib? Did you install it yourself on CoCalc, or are you using the mathlib that is available by default? (That one might be &gt;1yr old.)</p>",
        "id": 186390056,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1579787576
    },
    {
        "content": "<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"254058\">Marc Masdeu</span> No, it's pure mathlib. But it's not that old. So maybe CoCalc is using an old version of mathlib? Did you install it yourself on CoCalc, or are you using the mathlib that is available by default? (That one might be &gt;1yr old.)</p>\n</blockquote>\n<p>I just cloned the newest version, put it in CoCalc and it doesn't work. Do I have to open any particular namespace? It doesn't recognize it.</p>",
        "id": 186400444,
        "sender_full_name": "Marc Masdeu",
        "timestamp": 1579793856
    },
    {
        "content": "<p>Oh, you need <code>import tactic.suggest</code></p>",
        "id": 186400794,
        "sender_full_name": "Reid Barton",
        "timestamp": 1579794042
    },
    {
        "content": "<p>Either <code>import tactic.basic</code> or <code>import tactic</code> should work too.</p>",
        "id": 186402140,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1579794775
    },
    {
        "content": "<p>also with cocalc you have to know that its Lean is reading the <code>leanpkg.path</code> in the <em>root directory of the project</em> as opposed to any other one in any other directory.</p>",
        "id": 186402977,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1579795226
    },
    {
        "content": "<p>Haven't succeeded yet... I checked that I was using the right mathlib version by changing the folder and then failing to import anything. I changed the folder back. <span class=\"user-mention\" data-user-id=\"110038\">@Kevin Buzzard</span> Yes, I did know that I have no control over where Lean takes its files from.</p>",
        "id": 186404891,
        "sender_full_name": "Marc Masdeu",
        "timestamp": 1579796279
    },
    {
        "content": "<p>you have control, it's just that you basically have one piece of control per cocalc project (and if you have one paid cocalc project with many lean projects in then it can get messy)</p>",
        "id": 186406011,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1579796826
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"110038\">@Kevin Buzzard</span>  our formalization of Hilbert's geometry, use just a type for lines. In fact, I think we did not need sets at all to formalize Hilbert's geometry.  Our axioms are here:<br>\n<a href=\"https://github.com/GeoCoq/GeoCoq/blob/master/Axioms/hilbert_axioms.v\" target=\"_blank\" title=\"https://github.com/GeoCoq/GeoCoq/blob/master/Axioms/hilbert_axioms.v\">https://github.com/GeoCoq/GeoCoq/blob/master/Axioms/hilbert_axioms.v</a></p>",
        "id": 189532714,
        "sender_full_name": "Julien Narboux",
        "timestamp": 1583180872
    },
    {
        "content": "<p>We proved that those axioms are mutually interpretable with those of Tarski, so the formalization is ok in this sense.</p>",
        "id": 189532791,
        "sender_full_name": "Julien Narboux",
        "timestamp": 1583180911
    },
    {
        "content": "<p>What do you gain by explicitly embedding all those decidability assumption instead of just using classical reasoning everywhere in the library? I would understand the idea of delimiting results that are classically valid, but those assumption are there at the very bottom of the hierarchy, right?</p>",
        "id": 189533436,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1583181381
    },
    {
        "content": "<p>I would also be curious to know why you don't introduce notations like <code>A ∈ L</code> for <code>IncidL A L</code>. There is no risk of being misled by notations instead of following the rules since Coq is checking everything.</p>",
        "id": 189533655,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1583181532
    },
    {
        "content": "<p>I can't read <code>two_points_on_line :   forall l, { A : Point &amp; { B | IncidL B l /\\ IncidL A l /\\ A &lt;&gt; B}}</code>. I understand it says each lines contains at least two distinct points, but I don't understand the way it is stated. What is the syntax here?</p>",
        "id": 189534482,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1583182003
    },
    {
        "content": "<p>For people interested in GeoCoq, here the regex translation Coq -&gt; Lean of the first class in Julien's file (modulo the strange syntax that I translated using my maths intuition without understanding the Coq syntax).</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"n\">class</span> <span class=\"n\">Hilbert_neutral_dimensionless</span> <span class=\"o\">:=</span>\n<span class=\"o\">(</span><span class=\"n\">Point</span> <span class=\"o\">:</span> <span class=\"kt\">Type</span><span class=\"o\">)</span>\n<span class=\"o\">(</span><span class=\"n\">Line</span>  <span class=\"o\">:</span> <span class=\"kt\">Type</span><span class=\"o\">)</span>\n<span class=\"o\">(</span><span class=\"n\">Plane</span> <span class=\"o\">:</span> <span class=\"kt\">Type</span><span class=\"o\">)</span>\n<span class=\"o\">(</span><span class=\"n\">EqL</span>   <span class=\"o\">:</span> <span class=\"n\">Line</span> <span class=\"bp\">→</span> <span class=\"n\">Line</span> <span class=\"bp\">→</span> <span class=\"kt\">Prop</span><span class=\"o\">)</span>\n<span class=\"o\">(</span><span class=\"n\">EqL_Equiv</span> <span class=\"o\">:</span> <span class=\"n\">equivalence</span> <span class=\"n\">EqL</span><span class=\"o\">)</span>\n<span class=\"o\">(</span><span class=\"n\">EqP</span>   <span class=\"o\">:</span> <span class=\"n\">Plane</span> <span class=\"bp\">→</span> <span class=\"n\">Plane</span> <span class=\"bp\">→</span> <span class=\"kt\">Prop</span><span class=\"o\">)</span>\n<span class=\"o\">(</span><span class=\"n\">EqP_Equiv</span> <span class=\"o\">:</span> <span class=\"n\">equivalence</span> <span class=\"n\">EqP</span><span class=\"o\">)</span>\n<span class=\"o\">(</span><span class=\"n\">IncidL</span> <span class=\"o\">:</span> <span class=\"n\">Point</span> <span class=\"bp\">→</span> <span class=\"n\">Line</span> <span class=\"bp\">→</span> <span class=\"kt\">Prop</span><span class=\"o\">)</span>\n<span class=\"o\">(</span><span class=\"n\">IncidP</span> <span class=\"o\">:</span> <span class=\"n\">Point</span> <span class=\"bp\">→</span> <span class=\"n\">Plane</span> <span class=\"bp\">→</span> <span class=\"kt\">Prop</span><span class=\"o\">)</span>\n<span class=\"o\">(</span><span class=\"n\">IncidL_morphism</span> <span class=\"o\">:</span>\n  <span class=\"bp\">∀</span> <span class=\"n\">P</span> <span class=\"n\">l</span> <span class=\"n\">m</span><span class=\"o\">,</span> <span class=\"n\">IncidL</span> <span class=\"n\">P</span> <span class=\"n\">l</span> <span class=\"bp\">→</span> <span class=\"n\">EqL</span> <span class=\"n\">l</span> <span class=\"n\">m</span> <span class=\"bp\">→</span> <span class=\"n\">IncidL</span> <span class=\"n\">P</span> <span class=\"n\">m</span><span class=\"o\">)</span>\n<span class=\"o\">(</span><span class=\"n\">IncidL_dec</span> <span class=\"o\">:</span> <span class=\"bp\">∀</span> <span class=\"n\">P</span> <span class=\"n\">l</span><span class=\"o\">,</span> <span class=\"n\">IncidL</span> <span class=\"n\">P</span> <span class=\"n\">l</span> <span class=\"bp\">∨</span> <span class=\"bp\">¬</span> <span class=\"n\">IncidL</span> <span class=\"n\">P</span> <span class=\"n\">l</span><span class=\"o\">)</span>\n<span class=\"o\">(</span><span class=\"n\">IncidP_morphism</span> <span class=\"o\">:</span>\n  <span class=\"bp\">∀</span> <span class=\"n\">M</span> <span class=\"n\">p</span> <span class=\"n\">q</span><span class=\"o\">,</span> <span class=\"n\">IncidP</span> <span class=\"n\">M</span> <span class=\"n\">p</span> <span class=\"bp\">→</span> <span class=\"n\">EqP</span> <span class=\"n\">p</span> <span class=\"n\">q</span> <span class=\"bp\">→</span> <span class=\"n\">IncidP</span> <span class=\"n\">M</span> <span class=\"n\">q</span><span class=\"o\">)</span>\n<span class=\"o\">(</span><span class=\"n\">IncidP_dec</span> <span class=\"o\">:</span> <span class=\"bp\">∀</span> <span class=\"n\">M</span> <span class=\"n\">p</span><span class=\"o\">,</span> <span class=\"n\">IncidP</span> <span class=\"n\">M</span> <span class=\"n\">p</span> <span class=\"bp\">∨</span> <span class=\"bp\">¬</span> <span class=\"n\">IncidP</span> <span class=\"n\">M</span> <span class=\"n\">p</span><span class=\"o\">)</span>\n<span class=\"o\">(</span><span class=\"n\">eq_dec_pointsH</span> <span class=\"o\">:</span> <span class=\"bp\">∀</span> <span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"o\">:</span> <span class=\"n\">Point</span><span class=\"o\">,</span> <span class=\"n\">A</span><span class=\"bp\">=</span><span class=\"n\">B</span> <span class=\"bp\">∨</span> <span class=\"bp\">¬</span> <span class=\"n\">A</span><span class=\"bp\">=</span><span class=\"n\">B</span><span class=\"o\">)</span>\n\n<span class=\"c\">/-</span><span class=\"cm\"> Group I Incidence -/</span>\n<span class=\"o\">(</span><span class=\"n\">line_existence</span> <span class=\"o\">:</span>\n  <span class=\"bp\">∀</span> <span class=\"n\">A</span> <span class=\"n\">B</span><span class=\"o\">,</span> <span class=\"n\">A</span> <span class=\"bp\">≠</span> <span class=\"n\">B</span> <span class=\"bp\">→</span> <span class=\"bp\">∃</span> <span class=\"n\">l</span><span class=\"o\">,</span> <span class=\"n\">IncidL</span> <span class=\"n\">A</span> <span class=\"n\">l</span> <span class=\"bp\">∧</span> <span class=\"n\">IncidL</span> <span class=\"n\">B</span> <span class=\"n\">l</span><span class=\"o\">)</span>\n<span class=\"o\">(</span><span class=\"n\">line_uniqueness</span> <span class=\"o\">:</span>\n  <span class=\"bp\">∀</span> <span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"n\">l</span> <span class=\"n\">m</span><span class=\"o\">,</span>\n    <span class=\"n\">A</span> <span class=\"bp\">≠</span> <span class=\"n\">B</span> <span class=\"bp\">→</span>\n    <span class=\"n\">IncidL</span> <span class=\"n\">A</span> <span class=\"n\">l</span> <span class=\"bp\">→</span> <span class=\"n\">IncidL</span> <span class=\"n\">B</span> <span class=\"n\">l</span> <span class=\"bp\">→</span> <span class=\"n\">IncidL</span> <span class=\"n\">A</span> <span class=\"n\">m</span> <span class=\"bp\">→</span> <span class=\"n\">IncidL</span> <span class=\"n\">B</span> <span class=\"n\">m</span> <span class=\"bp\">→</span>\n    <span class=\"n\">EqL</span> <span class=\"n\">l</span> <span class=\"n\">m</span><span class=\"o\">)</span>\n<span class=\"o\">(</span><span class=\"n\">two_points_on_line</span> <span class=\"o\">:</span>\n  <span class=\"bp\">∀</span> <span class=\"n\">l</span><span class=\"o\">,</span> <span class=\"bp\">∃</span> <span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"o\">:</span> <span class=\"n\">Point</span><span class=\"o\">,</span> <span class=\"n\">IncidL</span> <span class=\"n\">B</span> <span class=\"n\">l</span> <span class=\"bp\">∧</span> <span class=\"n\">IncidL</span> <span class=\"n\">A</span> <span class=\"n\">l</span> <span class=\"bp\">∧</span> <span class=\"n\">A</span> <span class=\"bp\">≠</span> <span class=\"n\">B</span><span class=\"o\">)</span>\n<span class=\"o\">(</span><span class=\"n\">ColH</span> <span class=\"o\">:=</span>\n  <span class=\"k\">fun</span> <span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"n\">C</span><span class=\"o\">,</span> <span class=\"bp\">∃</span> <span class=\"n\">l</span><span class=\"o\">,</span> <span class=\"n\">IncidL</span> <span class=\"n\">A</span> <span class=\"n\">l</span> <span class=\"bp\">∧</span> <span class=\"n\">IncidL</span> <span class=\"n\">B</span> <span class=\"n\">l</span> <span class=\"bp\">∧</span> <span class=\"n\">IncidL</span> <span class=\"n\">C</span> <span class=\"n\">l</span><span class=\"o\">)</span>\n<span class=\"o\">(</span><span class=\"n\">PP</span> <span class=\"o\">:</span> <span class=\"n\">Point</span><span class=\"o\">)</span>\n<span class=\"o\">(</span><span class=\"n\">PQ</span> <span class=\"o\">:</span> <span class=\"n\">Point</span><span class=\"o\">)</span>\n<span class=\"o\">(</span><span class=\"n\">PR</span> <span class=\"o\">:</span> <span class=\"n\">Point</span><span class=\"o\">)</span>\n<span class=\"o\">(</span><span class=\"n\">lower_dim_2</span> <span class=\"o\">:</span> <span class=\"n\">PP</span> <span class=\"bp\">≠</span> <span class=\"n\">PQ</span> <span class=\"bp\">∧</span> <span class=\"n\">PQ</span> <span class=\"bp\">≠</span> <span class=\"n\">PR</span> <span class=\"bp\">∧</span> <span class=\"n\">PP</span> <span class=\"bp\">≠</span> <span class=\"n\">PR</span> <span class=\"bp\">∧</span> <span class=\"bp\">¬</span> <span class=\"n\">ColH</span> <span class=\"n\">PP</span> <span class=\"n\">PQ</span> <span class=\"n\">PR</span><span class=\"o\">)</span>\n<span class=\"o\">(</span><span class=\"n\">plane_existence</span> <span class=\"o\">:</span>\n  <span class=\"bp\">∀</span> <span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"n\">C</span><span class=\"o\">,</span> <span class=\"bp\">¬</span> <span class=\"n\">ColH</span> <span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"n\">C</span> <span class=\"bp\">→</span> <span class=\"bp\">∃</span> <span class=\"n\">p</span><span class=\"o\">,</span> <span class=\"n\">IncidP</span> <span class=\"n\">A</span> <span class=\"n\">p</span> <span class=\"bp\">∧</span> <span class=\"n\">IncidP</span> <span class=\"n\">B</span> <span class=\"n\">p</span> <span class=\"bp\">∧</span> <span class=\"n\">IncidP</span> <span class=\"n\">C</span> <span class=\"n\">p</span><span class=\"o\">)</span>\n<span class=\"o\">(</span><span class=\"n\">one_point_on_plane</span> <span class=\"o\">:</span>\n  <span class=\"bp\">∀</span> <span class=\"n\">p</span><span class=\"o\">,</span> <span class=\"bp\">∃</span> <span class=\"n\">A</span><span class=\"o\">,</span> <span class=\"n\">IncidP</span> <span class=\"n\">A</span> <span class=\"n\">p</span><span class=\"o\">)</span>\n<span class=\"o\">(</span><span class=\"n\">plane_uniqueness</span> <span class=\"o\">:</span>\n  <span class=\"bp\">∀</span> <span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"n\">C</span> <span class=\"n\">p</span> <span class=\"n\">q</span><span class=\"o\">,</span>\n    <span class=\"bp\">¬</span> <span class=\"n\">ColH</span> <span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"n\">C</span> <span class=\"bp\">→</span>\n    <span class=\"n\">IncidP</span> <span class=\"n\">A</span> <span class=\"n\">p</span> <span class=\"bp\">→</span> <span class=\"n\">IncidP</span> <span class=\"n\">B</span> <span class=\"n\">p</span> <span class=\"bp\">→</span> <span class=\"n\">IncidP</span> <span class=\"n\">C</span> <span class=\"n\">p</span> <span class=\"bp\">→</span> <span class=\"n\">IncidP</span> <span class=\"n\">A</span> <span class=\"n\">q</span> <span class=\"bp\">→</span> <span class=\"n\">IncidP</span> <span class=\"n\">B</span> <span class=\"n\">q</span> <span class=\"bp\">→</span> <span class=\"n\">IncidP</span> <span class=\"n\">C</span> <span class=\"n\">q</span> <span class=\"bp\">→</span>\n    <span class=\"n\">EqP</span> <span class=\"n\">p</span> <span class=\"n\">q</span><span class=\"o\">)</span>\n<span class=\"o\">(</span><span class=\"n\">IncidLP</span> <span class=\"o\">:=</span>\n   <span class=\"k\">fun</span> <span class=\"n\">l</span> <span class=\"n\">p</span><span class=\"o\">,</span> <span class=\"bp\">∀</span> <span class=\"n\">A</span><span class=\"o\">,</span> <span class=\"n\">IncidL</span> <span class=\"n\">A</span> <span class=\"n\">l</span> <span class=\"bp\">→</span> <span class=\"n\">IncidP</span> <span class=\"n\">A</span> <span class=\"n\">p</span><span class=\"o\">)</span>\n<span class=\"o\">(</span><span class=\"n\">line_on_plane</span> <span class=\"o\">:</span>\n  <span class=\"bp\">∀</span> <span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"n\">l</span> <span class=\"n\">p</span><span class=\"o\">,</span>\n    <span class=\"n\">A</span> <span class=\"bp\">≠</span> <span class=\"n\">B</span> <span class=\"bp\">→</span>\n    <span class=\"n\">IncidL</span> <span class=\"n\">A</span> <span class=\"n\">l</span> <span class=\"bp\">→</span> <span class=\"n\">IncidL</span> <span class=\"n\">B</span> <span class=\"n\">l</span> <span class=\"bp\">→</span> <span class=\"n\">IncidP</span> <span class=\"n\">A</span> <span class=\"n\">p</span> <span class=\"bp\">→</span> <span class=\"n\">IncidP</span> <span class=\"n\">B</span> <span class=\"n\">p</span> <span class=\"bp\">→</span>\n    <span class=\"n\">IncidLP</span> <span class=\"n\">l</span> <span class=\"n\">p</span><span class=\"o\">)</span>\n\n<span class=\"c\">/-</span><span class=\"cm\"> Group II Order -/</span>\n<span class=\"o\">(</span><span class=\"n\">BetH</span>   <span class=\"o\">:</span> <span class=\"n\">Point</span> <span class=\"bp\">→</span> <span class=\"n\">Point</span> <span class=\"bp\">→</span> <span class=\"n\">Point</span> <span class=\"bp\">→</span> <span class=\"kt\">Prop</span><span class=\"o\">)</span>\n<span class=\"o\">(</span><span class=\"n\">between_diff</span> <span class=\"o\">:</span> <span class=\"bp\">∀</span> <span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"n\">C</span><span class=\"o\">,</span> <span class=\"n\">BetH</span> <span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"n\">C</span> <span class=\"bp\">→</span> <span class=\"n\">A</span> <span class=\"bp\">≠</span> <span class=\"n\">C</span><span class=\"o\">)</span>\n<span class=\"o\">(</span><span class=\"n\">between_col</span> <span class=\"o\">:</span>  <span class=\"bp\">∀</span> <span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"n\">C</span><span class=\"o\">,</span> <span class=\"n\">BetH</span> <span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"n\">C</span> <span class=\"bp\">→</span> <span class=\"n\">ColH</span> <span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"n\">C</span><span class=\"o\">)</span>\n<span class=\"o\">(</span><span class=\"n\">between_comm</span> <span class=\"o\">:</span> <span class=\"bp\">∀</span> <span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"n\">C</span><span class=\"o\">,</span> <span class=\"n\">BetH</span> <span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"n\">C</span> <span class=\"bp\">→</span> <span class=\"n\">BetH</span> <span class=\"n\">C</span> <span class=\"n\">B</span> <span class=\"n\">A</span><span class=\"o\">)</span>\n<span class=\"o\">(</span><span class=\"n\">between_out</span> <span class=\"o\">:</span>  <span class=\"bp\">∀</span> <span class=\"n\">A</span> <span class=\"n\">B</span><span class=\"o\">,</span> <span class=\"n\">A</span> <span class=\"bp\">≠</span> <span class=\"n\">B</span> <span class=\"bp\">→</span> <span class=\"bp\">∃</span> <span class=\"n\">C</span><span class=\"o\">,</span> <span class=\"n\">BetH</span> <span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"n\">C</span><span class=\"o\">)</span>\n<span class=\"o\">(</span><span class=\"n\">between_only_one</span> <span class=\"o\">:</span> <span class=\"bp\">∀</span> <span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"n\">C</span><span class=\"o\">,</span> <span class=\"n\">BetH</span> <span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"n\">C</span> <span class=\"bp\">→</span> <span class=\"bp\">¬</span> <span class=\"n\">BetH</span> <span class=\"n\">B</span> <span class=\"n\">C</span> <span class=\"n\">A</span><span class=\"o\">)</span>\n<span class=\"o\">(</span><span class=\"n\">cut</span> <span class=\"o\">:=</span>\n  <span class=\"k\">fun</span> <span class=\"n\">l</span> <span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"o\">,</span> <span class=\"bp\">¬</span> <span class=\"n\">IncidL</span> <span class=\"n\">A</span> <span class=\"n\">l</span> <span class=\"bp\">∧</span> <span class=\"bp\">¬</span> <span class=\"n\">IncidL</span> <span class=\"n\">B</span> <span class=\"n\">l</span> <span class=\"bp\">∧</span>\n               <span class=\"bp\">∃</span> <span class=\"n\">I</span><span class=\"o\">,</span> <span class=\"n\">IncidL</span> <span class=\"n\">I</span> <span class=\"n\">l</span> <span class=\"bp\">∧</span> <span class=\"n\">BetH</span> <span class=\"n\">A</span> <span class=\"n\">I</span> <span class=\"n\">B</span><span class=\"o\">)</span>\n<span class=\"o\">(</span><span class=\"n\">pasch</span> <span class=\"o\">:</span>\n  <span class=\"bp\">∀</span> <span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"n\">C</span> <span class=\"n\">l</span> <span class=\"n\">p</span><span class=\"o\">,</span>\n    <span class=\"bp\">¬</span> <span class=\"n\">ColH</span> <span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"n\">C</span> <span class=\"bp\">→</span>\n    <span class=\"n\">IncidP</span> <span class=\"n\">A</span> <span class=\"n\">p</span> <span class=\"bp\">→</span> <span class=\"n\">IncidP</span> <span class=\"n\">B</span> <span class=\"n\">p</span> <span class=\"bp\">→</span> <span class=\"n\">IncidP</span> <span class=\"n\">C</span> <span class=\"n\">p</span> <span class=\"bp\">→</span> <span class=\"n\">IncidLP</span> <span class=\"n\">l</span> <span class=\"n\">p</span> <span class=\"bp\">→</span> <span class=\"bp\">¬</span> <span class=\"n\">IncidL</span> <span class=\"n\">C</span> <span class=\"n\">l</span> <span class=\"bp\">→</span> <span class=\"n\">cut</span> <span class=\"n\">l</span> <span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"bp\">→</span>\n    <span class=\"n\">cut</span> <span class=\"n\">l</span> <span class=\"n\">A</span> <span class=\"n\">C</span> <span class=\"bp\">∨</span> <span class=\"n\">cut</span> <span class=\"n\">l</span> <span class=\"n\">B</span> <span class=\"n\">C</span><span class=\"o\">)</span>\n\n<span class=\"c\">/-</span><span class=\"cm\"> Group III Congruence -/</span>\n<span class=\"o\">(</span><span class=\"n\">CongH</span> <span class=\"o\">:</span> <span class=\"n\">Point</span> <span class=\"bp\">→</span> <span class=\"n\">Point</span> <span class=\"bp\">→</span> <span class=\"n\">Point</span> <span class=\"bp\">→</span> <span class=\"n\">Point</span> <span class=\"bp\">→</span> <span class=\"kt\">Prop</span><span class=\"o\">)</span>\n<span class=\"o\">(</span><span class=\"n\">cong_permr</span> <span class=\"o\">:</span> <span class=\"bp\">∀</span> <span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"n\">C</span> <span class=\"n\">D</span><span class=\"o\">,</span> <span class=\"n\">CongH</span> <span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"n\">C</span> <span class=\"n\">D</span> <span class=\"bp\">→</span> <span class=\"n\">CongH</span> <span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"n\">D</span> <span class=\"n\">C</span><span class=\"o\">)</span>\n<span class=\"o\">(</span><span class=\"n\">outH</span> <span class=\"o\">:=</span>\n  <span class=\"k\">fun</span> <span class=\"n\">P</span> <span class=\"n\">A</span> <span class=\"n\">B</span><span class=\"o\">,</span> <span class=\"n\">BetH</span> <span class=\"n\">P</span> <span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"bp\">∨</span> <span class=\"n\">BetH</span> <span class=\"n\">P</span> <span class=\"n\">B</span> <span class=\"n\">A</span> <span class=\"bp\">∨</span> <span class=\"o\">(</span><span class=\"n\">P</span> <span class=\"bp\">≠</span> <span class=\"n\">A</span> <span class=\"bp\">∧</span> <span class=\"n\">A</span> <span class=\"bp\">=</span> <span class=\"n\">B</span><span class=\"o\">))</span>\n<span class=\"o\">(</span><span class=\"n\">cong_existence</span> <span class=\"o\">:</span>\n  <span class=\"bp\">∀</span> <span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"n\">A&#39;</span> <span class=\"n\">P</span> <span class=\"n\">l</span><span class=\"o\">,</span>\n    <span class=\"n\">A</span> <span class=\"bp\">≠</span> <span class=\"n\">B</span> <span class=\"bp\">→</span> <span class=\"n\">A&#39;</span> <span class=\"bp\">≠</span> <span class=\"n\">P</span> <span class=\"bp\">→</span>\n    <span class=\"n\">IncidL</span> <span class=\"n\">A&#39;</span> <span class=\"n\">l</span> <span class=\"bp\">→</span> <span class=\"n\">IncidL</span> <span class=\"n\">P</span> <span class=\"n\">l</span> <span class=\"bp\">→</span>\n    <span class=\"bp\">∃</span> <span class=\"n\">B&#39;</span><span class=\"o\">,</span> <span class=\"n\">IncidL</span> <span class=\"n\">B&#39;</span> <span class=\"n\">l</span> <span class=\"bp\">∧</span> <span class=\"n\">outH</span> <span class=\"n\">A&#39;</span> <span class=\"n\">P</span> <span class=\"n\">B&#39;</span> <span class=\"bp\">∧</span> <span class=\"n\">CongH</span> <span class=\"n\">A&#39;</span> <span class=\"n\">B&#39;</span> <span class=\"n\">A</span> <span class=\"n\">B</span><span class=\"o\">)</span>\n<span class=\"o\">(</span><span class=\"n\">cong_pseudo_transitivity</span> <span class=\"o\">:</span>\n  <span class=\"bp\">∀</span> <span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"n\">C</span> <span class=\"n\">D</span> <span class=\"n\">E</span> <span class=\"n\">F</span><span class=\"o\">,</span>\n    <span class=\"n\">CongH</span> <span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"n\">C</span> <span class=\"n\">D</span> <span class=\"bp\">→</span> <span class=\"n\">CongH</span> <span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"n\">E</span> <span class=\"n\">F</span> <span class=\"bp\">→</span> <span class=\"n\">CongH</span> <span class=\"n\">C</span> <span class=\"n\">D</span> <span class=\"n\">E</span> <span class=\"n\">F</span><span class=\"o\">)</span>\n<span class=\"o\">(</span><span class=\"n\">disjoint</span> <span class=\"o\">:=</span> <span class=\"k\">fun</span> <span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"n\">C</span> <span class=\"n\">D</span><span class=\"o\">,</span> <span class=\"bp\">¬</span> <span class=\"bp\">∃</span> <span class=\"n\">P</span><span class=\"o\">,</span> <span class=\"n\">BetH</span> <span class=\"n\">A</span> <span class=\"n\">P</span> <span class=\"n\">B</span> <span class=\"bp\">∧</span> <span class=\"n\">BetH</span> <span class=\"n\">C</span> <span class=\"n\">P</span> <span class=\"n\">D</span><span class=\"o\">)</span>\n<span class=\"o\">(</span><span class=\"n\">addition</span> <span class=\"o\">:</span>\n  <span class=\"bp\">∀</span> <span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"n\">C</span> <span class=\"n\">A&#39;</span> <span class=\"n\">B&#39;</span> <span class=\"n\">C&#39;</span><span class=\"o\">,</span>\n    <span class=\"n\">ColH</span> <span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"n\">C</span> <span class=\"bp\">→</span> <span class=\"n\">ColH</span> <span class=\"n\">A&#39;</span> <span class=\"n\">B&#39;</span> <span class=\"n\">C&#39;</span> <span class=\"bp\">→</span>\n    <span class=\"n\">disjoint</span> <span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"n\">B</span> <span class=\"n\">C</span> <span class=\"bp\">→</span> <span class=\"n\">disjoint</span> <span class=\"n\">A&#39;</span> <span class=\"n\">B&#39;</span> <span class=\"n\">B&#39;</span> <span class=\"n\">C&#39;</span> <span class=\"bp\">→</span>\n    <span class=\"n\">CongH</span> <span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"n\">A&#39;</span> <span class=\"n\">B&#39;</span> <span class=\"bp\">→</span> <span class=\"n\">CongH</span> <span class=\"n\">B</span> <span class=\"n\">C</span> <span class=\"n\">B&#39;</span> <span class=\"n\">C&#39;</span> <span class=\"bp\">→</span>\n    <span class=\"n\">CongH</span> <span class=\"n\">A</span> <span class=\"n\">C</span> <span class=\"n\">A&#39;</span> <span class=\"n\">C&#39;</span><span class=\"o\">)</span>\n<span class=\"o\">(</span><span class=\"n\">CongaH</span> <span class=\"o\">:</span>\n  <span class=\"n\">Point</span> <span class=\"bp\">→</span> <span class=\"n\">Point</span> <span class=\"bp\">→</span> <span class=\"n\">Point</span> <span class=\"bp\">→</span> <span class=\"n\">Point</span> <span class=\"bp\">→</span> <span class=\"n\">Point</span> <span class=\"bp\">→</span> <span class=\"n\">Point</span> <span class=\"bp\">→</span> <span class=\"kt\">Prop</span><span class=\"o\">)</span>\n<span class=\"o\">(</span><span class=\"n\">conga_refl</span> <span class=\"o\">:</span> <span class=\"bp\">∀</span> <span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"n\">C</span><span class=\"o\">,</span> <span class=\"bp\">¬</span> <span class=\"n\">ColH</span> <span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"n\">C</span> <span class=\"bp\">→</span> <span class=\"n\">CongaH</span> <span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"n\">C</span> <span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"n\">C</span><span class=\"o\">)</span>\n<span class=\"o\">(</span><span class=\"n\">conga_comm</span> <span class=\"o\">:</span> <span class=\"bp\">∀</span> <span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"n\">C</span><span class=\"o\">,</span> <span class=\"bp\">¬</span> <span class=\"n\">ColH</span> <span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"n\">C</span> <span class=\"bp\">→</span> <span class=\"n\">CongaH</span> <span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"n\">C</span> <span class=\"n\">C</span> <span class=\"n\">B</span> <span class=\"n\">A</span><span class=\"o\">)</span>\n<span class=\"o\">(</span><span class=\"n\">conga_permlr</span> <span class=\"o\">:</span>\n  <span class=\"bp\">∀</span> <span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"n\">C</span> <span class=\"n\">D</span> <span class=\"n\">E</span> <span class=\"n\">F</span><span class=\"o\">,</span> <span class=\"n\">CongaH</span> <span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"n\">C</span> <span class=\"n\">D</span> <span class=\"n\">E</span> <span class=\"n\">F</span> <span class=\"bp\">→</span> <span class=\"n\">CongaH</span> <span class=\"n\">C</span> <span class=\"n\">B</span> <span class=\"n\">A</span> <span class=\"n\">F</span> <span class=\"n\">E</span> <span class=\"n\">D</span><span class=\"o\">)</span>\n<span class=\"o\">(</span><span class=\"n\">same_side</span> <span class=\"o\">:=</span> <span class=\"k\">fun</span> <span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"n\">l</span><span class=\"o\">,</span> <span class=\"bp\">∃</span> <span class=\"n\">P</span><span class=\"o\">,</span> <span class=\"n\">cut</span> <span class=\"n\">l</span> <span class=\"n\">A</span> <span class=\"n\">P</span> <span class=\"bp\">∧</span> <span class=\"n\">cut</span> <span class=\"n\">l</span> <span class=\"n\">B</span> <span class=\"n\">P</span><span class=\"o\">)</span>\n<span class=\"o\">(</span><span class=\"n\">same_side&#39;</span> <span class=\"o\">:=</span>\n  <span class=\"k\">fun</span> <span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"n\">X</span> <span class=\"n\">Y</span><span class=\"o\">,</span>\n    <span class=\"n\">X</span> <span class=\"bp\">≠</span> <span class=\"n\">Y</span> <span class=\"bp\">∧</span>\n    <span class=\"bp\">∀</span> <span class=\"n\">l</span><span class=\"o\">,</span> <span class=\"n\">IncidL</span> <span class=\"n\">X</span> <span class=\"n\">l</span> <span class=\"bp\">→</span> <span class=\"n\">IncidL</span> <span class=\"n\">Y</span> <span class=\"n\">l</span> <span class=\"bp\">→</span> <span class=\"n\">same_side</span> <span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"n\">l</span><span class=\"o\">)</span>\n<span class=\"o\">(</span><span class=\"n\">conga_out_conga</span> <span class=\"o\">:</span>\n  <span class=\"bp\">∀</span> <span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"n\">C</span> <span class=\"n\">D</span> <span class=\"n\">E</span> <span class=\"n\">F</span> <span class=\"n\">A&#39;</span> <span class=\"n\">C&#39;</span> <span class=\"n\">D&#39;</span> <span class=\"n\">F&#39;</span><span class=\"o\">,</span>\n   <span class=\"n\">CongaH</span> <span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"n\">C</span> <span class=\"n\">D</span> <span class=\"n\">E</span> <span class=\"n\">F</span> <span class=\"bp\">→</span>\n   <span class=\"n\">outH</span> <span class=\"n\">B</span> <span class=\"n\">A</span> <span class=\"n\">A&#39;</span> <span class=\"bp\">→</span> <span class=\"n\">outH</span> <span class=\"n\">B</span> <span class=\"n\">C</span> <span class=\"n\">C&#39;</span> <span class=\"bp\">→</span> <span class=\"n\">outH</span> <span class=\"n\">E</span> <span class=\"n\">D</span> <span class=\"n\">D&#39;</span> <span class=\"bp\">→</span> <span class=\"n\">outH</span> <span class=\"n\">E</span> <span class=\"n\">F</span> <span class=\"n\">F&#39;</span> <span class=\"bp\">→</span>\n   <span class=\"n\">CongaH</span> <span class=\"n\">A&#39;</span> <span class=\"n\">B</span> <span class=\"n\">C&#39;</span> <span class=\"n\">D&#39;</span> <span class=\"n\">E</span> <span class=\"n\">F&#39;</span><span class=\"o\">)</span>\n<span class=\"o\">(</span><span class=\"n\">cong_4_existence</span> <span class=\"o\">:</span>\n  <span class=\"bp\">∀</span> <span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"n\">C</span> <span class=\"n\">O</span> <span class=\"n\">X</span> <span class=\"n\">P</span><span class=\"o\">,</span>\n    <span class=\"bp\">¬</span> <span class=\"n\">ColH</span> <span class=\"n\">P</span> <span class=\"n\">O</span> <span class=\"n\">X</span> <span class=\"bp\">→</span> <span class=\"bp\">¬</span> <span class=\"n\">ColH</span> <span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"n\">C</span> <span class=\"bp\">→</span>\n    <span class=\"bp\">∃</span> <span class=\"n\">Y</span><span class=\"o\">,</span> <span class=\"n\">CongaH</span> <span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"n\">C</span> <span class=\"n\">X</span> <span class=\"n\">O</span> <span class=\"n\">Y</span> <span class=\"bp\">∧</span> <span class=\"n\">same_side&#39;</span> <span class=\"n\">P</span> <span class=\"n\">Y</span> <span class=\"n\">O</span> <span class=\"n\">X</span><span class=\"o\">)</span>\n<span class=\"o\">(</span><span class=\"n\">cong_4_uniqueness</span> <span class=\"o\">:</span>\n  <span class=\"bp\">∀</span> <span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"n\">C</span> <span class=\"n\">O</span> <span class=\"n\">P</span> <span class=\"n\">X</span> <span class=\"n\">Y</span> <span class=\"n\">Y&#39;</span><span class=\"o\">,</span>\n    <span class=\"bp\">¬</span> <span class=\"n\">ColH</span> <span class=\"n\">P</span> <span class=\"n\">O</span> <span class=\"n\">X</span>  <span class=\"bp\">→</span> <span class=\"bp\">¬</span> <span class=\"n\">ColH</span> <span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"n\">C</span> <span class=\"bp\">→</span>\n    <span class=\"n\">CongaH</span> <span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"n\">C</span> <span class=\"n\">X</span> <span class=\"n\">O</span> <span class=\"n\">Y</span> <span class=\"bp\">→</span> <span class=\"n\">CongaH</span> <span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"n\">C</span> <span class=\"n\">X</span> <span class=\"n\">O</span> <span class=\"n\">Y&#39;</span> <span class=\"bp\">→</span>\n    <span class=\"n\">same_side&#39;</span> <span class=\"n\">P</span> <span class=\"n\">Y</span> <span class=\"n\">O</span> <span class=\"n\">X</span> <span class=\"bp\">→</span> <span class=\"n\">same_side&#39;</span> <span class=\"n\">P</span> <span class=\"n\">Y&#39;</span> <span class=\"n\">O</span> <span class=\"n\">X</span> <span class=\"bp\">→</span>\n    <span class=\"n\">outH</span> <span class=\"n\">O</span> <span class=\"n\">Y</span> <span class=\"n\">Y&#39;</span><span class=\"o\">)</span>\n<span class=\"o\">(</span><span class=\"n\">cong_5</span> <span class=\"o\">:</span>\n  <span class=\"bp\">∀</span> <span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"n\">C</span> <span class=\"n\">A&#39;</span> <span class=\"n\">B&#39;</span> <span class=\"n\">C&#39;</span><span class=\"o\">,</span>\n    <span class=\"bp\">¬</span> <span class=\"n\">ColH</span> <span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"n\">C</span> <span class=\"bp\">→</span> <span class=\"bp\">¬</span> <span class=\"n\">ColH</span> <span class=\"n\">A&#39;</span> <span class=\"n\">B&#39;</span> <span class=\"n\">C&#39;</span> <span class=\"bp\">→</span>\n    <span class=\"n\">CongH</span> <span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"n\">A&#39;</span> <span class=\"n\">B&#39;</span> <span class=\"bp\">→</span> <span class=\"n\">CongH</span> <span class=\"n\">A</span> <span class=\"n\">C</span> <span class=\"n\">A&#39;</span> <span class=\"n\">C&#39;</span> <span class=\"bp\">→</span>\n    <span class=\"n\">CongaH</span> <span class=\"n\">B</span> <span class=\"n\">A</span> <span class=\"n\">C</span> <span class=\"n\">B&#39;</span> <span class=\"n\">A&#39;</span> <span class=\"n\">C&#39;</span> <span class=\"bp\">→</span>\n    <span class=\"n\">CongaH</span> <span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"n\">C</span> <span class=\"n\">A&#39;</span> <span class=\"n\">B&#39;</span> <span class=\"n\">C&#39;</span><span class=\"o\">)</span>\n</pre></div>",
        "id": 189535173,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1583182416
    },
    {
        "content": "<p><code>{ A : Point &amp; ... }</code> is a dependent pair I think, like <code>Σ (A : Point), ...</code>. After that comes a subtype.</p>",
        "id": 189535970,
        "sender_full_name": "Reid Barton",
        "timestamp": 1583182831
    },
    {
        "content": "<p>Thanks Reid. So this is again intuitionistic stuff.</p>",
        "id": 189537316,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1583183591
    },
    {
        "content": "<p>Those <code>:=</code> lines don't work in lean the way I infer they work in coq</p>",
        "id": 189538262,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1583184110
    },
    {
        "content": "<p>Really?</p>",
        "id": 189538329,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1583184136
    },
    {
        "content": "<p>Oh yes</p>",
        "id": 189538341,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1583184146
    },
    {
        "content": "<p>I should have known what they do in Lean.</p>",
        "id": 189538353,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1583184157
    },
    {
        "content": "<p>How do we do that in Lean then?</p>",
        "id": 189538365,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1583184165
    },
    {
        "content": "<p>I'm actually kind of curious how this is supported in coq</p>",
        "id": 189538379,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1583184173
    },
    {
        "content": "<p>Introduce a notation only?</p>",
        "id": 189538382,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1583184173
    },
    {
        "content": "<p>you could do that, or you could add a field in the structure (possibly using <code>:=</code> to give it the obvious default value) and then another field asserting equality to the required definition</p>",
        "id": 189538486,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1583184216
    },
    {
        "content": "<p>you won't get defeq of the field to its definition, although for an axiomatization like this it doesn't matter</p>",
        "id": 189538593,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1583184269
    },
    {
        "content": "<p>huh yeah, what is the type of <code>ColH</code> in the coq version?</p>",
        "id": 189539869,
        "sender_full_name": "Reid Barton",
        "timestamp": 1583185101
    },
    {
        "content": "<p>Point -&gt; Point -&gt; Point -&gt; Prop</p>",
        "id": 189539927,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1583185150
    },
    {
        "content": "<p>It says three point sit on the same line.</p>",
        "id": 189539942,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1583185165
    },
    {
        "content": "<p>But isn't it actually <code>(T : Hilbert_neutral_dimensionless) -&gt; T.Point -&gt; T.Point -&gt; T.Point -&gt; Prop</code> or something?</p>",
        "id": 189540031,
        "sender_full_name": "Reid Barton",
        "timestamp": 1583185221
    },
    {
        "content": "<p>I think in coq that is actually a let binder in the middle of the structure</p>",
        "id": 189540062,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1583185252
    },
    {
        "content": "<p>which is not something you can do in lean</p>",
        "id": 189540079,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1583185267
    },
    {
        "content": "<p>but coq has support for let binders in the context, unlike lean, so that might be easier to support</p>",
        "id": 189540121,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1583185297
    },
    {
        "content": "<p>then does the type of <code>plane_existence</code> for example have a let binder in it?</p>",
        "id": 189540196,
        "sender_full_name": "Reid Barton",
        "timestamp": 1583185324
    },
    {
        "content": "<p>In <code>Hilbert_neutral_dimensionless.mk</code>, there is a let binder in the middle of the long string of arguments; in <code>Hilbert_neutral_dimensionless.plane_existence</code> there is a reference to an external definition <code>Hilbert_neutral_dimensionless.ColH</code></p>",
        "id": 189540330,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1583185423
    },
    {
        "content": "<p>or at least, that's how I would implement it</p>",
        "id": 189540403,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1583185457
    },
    {
        "content": "<p>but in lean if you tried that the kernel would unfold the let and in a definition this deep that could be a significant performance problem</p>",
        "id": 189540518,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1583185532
    },
    {
        "content": "<p>in coq they have \"zeta reduction\" which is <code>Gamma, x : A := t |- x ~&gt; t</code>, while in lean what I call zeta reduction is <code>Gamma |- (let x : A := t in e) ~&gt; e[t/x]</code></p>",
        "id": 189540703,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1583185644
    },
    {
        "content": "<p>sort of like lazy vs call-by-name evaluation?</p>",
        "id": 189541293,
        "sender_full_name": "Reid Barton",
        "timestamp": 1583185959
    },
    {
        "content": "<p>well, maybe not that much like it</p>",
        "id": 189541332,
        "sender_full_name": "Reid Barton",
        "timestamp": 1583185989
    },
    {
        "content": "<p>but somehow the work of substituting is delayed, I guess</p>",
        "id": 189541442,
        "sender_full_name": "Reid Barton",
        "timestamp": 1583186050
    },
    {
        "content": "<p>I've played the game of rewriting the beginning using notations (and getting rid of avoiding the equality sign):</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"n\">class</span> <span class=\"n\">Hilbert_neutral_dimensionless</span> <span class=\"o\">:=</span>\n<span class=\"o\">(</span><span class=\"n\">Point</span> <span class=\"o\">:</span> <span class=\"kt\">Type</span><span class=\"o\">)</span>\n<span class=\"o\">(</span><span class=\"n\">Line</span>  <span class=\"o\">:</span> <span class=\"kt\">Type</span><span class=\"o\">)</span>\n<span class=\"o\">(</span><span class=\"n\">Plane</span> <span class=\"o\">:</span> <span class=\"kt\">Type</span><span class=\"o\">)</span>\n<span class=\"o\">[</span><span class=\"n\">IncidL</span> <span class=\"o\">:</span>  <span class=\"n\">has_mem</span> <span class=\"n\">Point</span>  <span class=\"n\">Line</span><span class=\"o\">]</span>\n<span class=\"o\">[</span><span class=\"n\">IncidP</span> <span class=\"o\">:</span> <span class=\"n\">has_mem</span> <span class=\"n\">Point</span> <span class=\"n\">Plane</span><span class=\"o\">]</span>\n\n<span class=\"c\">/-</span><span class=\"cm\"> Group I Incidence -/</span>\n<span class=\"o\">(</span><span class=\"n\">line_existence</span> <span class=\"o\">:</span>\n  <span class=\"bp\">∀</span> <span class=\"n\">A</span> <span class=\"n\">B</span><span class=\"o\">,</span> <span class=\"n\">A</span> <span class=\"bp\">≠</span> <span class=\"n\">B</span> <span class=\"bp\">→</span> <span class=\"bp\">∃</span> <span class=\"n\">l</span> <span class=\"o\">:</span> <span class=\"n\">Line</span><span class=\"o\">,</span> <span class=\"n\">A</span> <span class=\"err\">∈</span> <span class=\"n\">l</span> <span class=\"bp\">∧</span> <span class=\"n\">B</span> <span class=\"err\">∈</span> <span class=\"n\">l</span><span class=\"o\">)</span>\n<span class=\"o\">(</span><span class=\"n\">line_uniqueness</span> <span class=\"o\">:</span>\n  <span class=\"bp\">∀</span> <span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"o\">(</span><span class=\"n\">l</span> <span class=\"n\">m</span> <span class=\"o\">:</span> <span class=\"n\">Line</span><span class=\"o\">),</span>\n    <span class=\"n\">A</span> <span class=\"bp\">≠</span> <span class=\"n\">B</span> <span class=\"bp\">→</span>\n    <span class=\"n\">A</span> <span class=\"err\">∈</span> <span class=\"n\">l</span> <span class=\"bp\">→</span> <span class=\"n\">B</span> <span class=\"err\">∈</span> <span class=\"n\">l</span> <span class=\"bp\">→</span> <span class=\"n\">A</span> <span class=\"err\">∈</span> <span class=\"n\">m</span> <span class=\"bp\">→</span> <span class=\"n\">B</span> <span class=\"err\">∈</span> <span class=\"n\">m</span> <span class=\"bp\">→</span>\n    <span class=\"n\">l</span> <span class=\"bp\">=</span> <span class=\"n\">m</span><span class=\"o\">)</span>\n<span class=\"o\">(</span><span class=\"n\">two_points_on_line</span> <span class=\"o\">:</span>\n  <span class=\"bp\">∀</span> <span class=\"n\">l</span> <span class=\"o\">:</span> <span class=\"n\">Line</span><span class=\"o\">,</span> <span class=\"bp\">∃</span> <span class=\"n\">A</span> <span class=\"n\">B</span><span class=\"o\">,</span> <span class=\"n\">B</span> <span class=\"err\">∈</span> <span class=\"n\">l</span> <span class=\"bp\">∧</span> <span class=\"n\">A</span> <span class=\"err\">∈</span> <span class=\"n\">l</span> <span class=\"bp\">∧</span> <span class=\"n\">A</span> <span class=\"bp\">≠</span> <span class=\"n\">B</span><span class=\"o\">)</span>\n<span class=\"o\">(</span><span class=\"kn\">notation</span> <span class=\"bp\">`</span><span class=\"n\">ColH</span><span class=\"err\">⟮</span><span class=\"bp\">`</span><span class=\"n\">A</span><span class=\"bp\">`</span><span class=\"o\">,</span> <span class=\"bp\">`</span><span class=\"n\">B</span><span class=\"bp\">`</span><span class=\"o\">,</span> <span class=\"bp\">`</span><span class=\"n\">C</span> <span class=\"bp\">`</span><span class=\"err\">⟯</span><span class=\"bp\">`</span> <span class=\"o\">:=</span> <span class=\"bp\">∃</span> <span class=\"n\">l</span> <span class=\"o\">:</span> <span class=\"n\">Line</span><span class=\"o\">,</span> <span class=\"n\">A</span> <span class=\"err\">∈</span> <span class=\"n\">l</span> <span class=\"bp\">∧</span> <span class=\"n\">B</span> <span class=\"err\">∈</span> <span class=\"n\">l</span> <span class=\"bp\">∧</span> <span class=\"n\">C</span> <span class=\"err\">∈</span> <span class=\"n\">l</span><span class=\"o\">)</span>\n<span class=\"o\">(</span><span class=\"n\">PP</span> <span class=\"o\">:</span> <span class=\"n\">Point</span><span class=\"o\">)</span>\n<span class=\"o\">(</span><span class=\"n\">PQ</span> <span class=\"o\">:</span> <span class=\"n\">Point</span><span class=\"o\">)</span>\n<span class=\"o\">(</span><span class=\"n\">PR</span> <span class=\"o\">:</span> <span class=\"n\">Point</span><span class=\"o\">)</span>\n<span class=\"o\">(</span><span class=\"n\">lower_dim_2</span> <span class=\"o\">:</span> <span class=\"n\">PP</span> <span class=\"bp\">≠</span> <span class=\"n\">PQ</span> <span class=\"bp\">∧</span> <span class=\"n\">PQ</span> <span class=\"bp\">≠</span> <span class=\"n\">PR</span> <span class=\"bp\">∧</span> <span class=\"n\">PP</span> <span class=\"bp\">≠</span> <span class=\"n\">PR</span> <span class=\"bp\">∧</span> <span class=\"bp\">¬</span> <span class=\"n\">ColH</span><span class=\"err\">⟮</span><span class=\"n\">PP</span><span class=\"o\">,</span> <span class=\"n\">PQ</span><span class=\"o\">,</span> <span class=\"n\">PR</span><span class=\"err\">⟯</span><span class=\"o\">)</span>\n<span class=\"o\">(</span><span class=\"n\">plane_existence</span> <span class=\"o\">:</span>\n  <span class=\"bp\">∀</span> <span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"n\">C</span><span class=\"o\">,</span> <span class=\"bp\">¬</span> <span class=\"n\">ColH</span><span class=\"err\">⟮</span><span class=\"n\">A</span><span class=\"o\">,</span> <span class=\"n\">B</span><span class=\"o\">,</span> <span class=\"n\">C</span><span class=\"err\">⟯</span> <span class=\"bp\">→</span> <span class=\"bp\">∃</span> <span class=\"n\">p</span> <span class=\"o\">:</span> <span class=\"n\">Plane</span><span class=\"o\">,</span> <span class=\"n\">A</span> <span class=\"err\">∈</span> <span class=\"n\">p</span> <span class=\"bp\">∧</span> <span class=\"n\">B</span> <span class=\"err\">∈</span> <span class=\"n\">p</span> <span class=\"bp\">∧</span> <span class=\"n\">C</span> <span class=\"err\">∈</span> <span class=\"n\">p</span><span class=\"o\">)</span>\n<span class=\"o\">(</span><span class=\"n\">one_point_on_plane</span> <span class=\"o\">:</span>\n  <span class=\"bp\">∀</span> <span class=\"n\">p</span> <span class=\"o\">:</span> <span class=\"n\">Plane</span><span class=\"o\">,</span> <span class=\"bp\">∃</span> <span class=\"n\">A</span><span class=\"o\">,</span> <span class=\"n\">A</span> <span class=\"err\">∈</span> <span class=\"n\">p</span><span class=\"o\">)</span>\n<span class=\"o\">(</span><span class=\"n\">plane_uniqueness</span> <span class=\"o\">:</span>\n  <span class=\"bp\">∀</span> <span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"n\">C</span> <span class=\"o\">(</span><span class=\"n\">p</span> <span class=\"n\">q</span> <span class=\"o\">:</span> <span class=\"n\">Plane</span><span class=\"o\">),</span>\n    <span class=\"bp\">¬</span> <span class=\"n\">ColH</span><span class=\"err\">⟮</span><span class=\"n\">A</span><span class=\"o\">,</span> <span class=\"n\">B</span><span class=\"o\">,</span> <span class=\"n\">C</span><span class=\"err\">⟯</span> <span class=\"bp\">→</span>\n    <span class=\"n\">A</span> <span class=\"err\">∈</span> <span class=\"n\">p</span> <span class=\"bp\">→</span> <span class=\"n\">B</span> <span class=\"err\">∈</span> <span class=\"n\">p</span> <span class=\"bp\">→</span> <span class=\"n\">C</span> <span class=\"err\">∈</span> <span class=\"n\">p</span> <span class=\"bp\">→</span> <span class=\"n\">A</span> <span class=\"err\">∈</span> <span class=\"n\">q</span> <span class=\"bp\">→</span> <span class=\"n\">B</span> <span class=\"err\">∈</span> <span class=\"n\">q</span> <span class=\"bp\">→</span> <span class=\"n\">C</span> <span class=\"err\">∈</span> <span class=\"n\">q</span> <span class=\"bp\">→</span>\n    <span class=\"n\">p</span> <span class=\"bp\">=</span> <span class=\"n\">q</span><span class=\"o\">)</span>\n<span class=\"o\">(</span><span class=\"kn\">notation</span> <span class=\"n\">l</span> <span class=\"bp\">`</span><span class=\"err\">⊆</span><span class=\"bp\">`</span> <span class=\"n\">p</span> <span class=\"o\">:=</span> <span class=\"bp\">∀</span> <span class=\"n\">A</span><span class=\"o\">,</span> <span class=\"n\">A</span> <span class=\"err\">∈</span> <span class=\"o\">(</span><span class=\"n\">l</span> <span class=\"o\">:</span> <span class=\"n\">Line</span><span class=\"o\">)</span> <span class=\"bp\">→</span> <span class=\"n\">A</span> <span class=\"err\">∈</span> <span class=\"o\">(</span><span class=\"n\">p</span> <span class=\"o\">:</span> <span class=\"n\">Plane</span><span class=\"o\">))</span>\n<span class=\"o\">(</span><span class=\"n\">line_on_plane</span> <span class=\"o\">:</span>\n  <span class=\"bp\">∀</span> <span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"n\">l</span> <span class=\"n\">p</span><span class=\"o\">,</span>\n    <span class=\"n\">A</span> <span class=\"bp\">≠</span> <span class=\"n\">B</span> <span class=\"bp\">→</span>\n    <span class=\"n\">A</span> <span class=\"err\">∈</span> <span class=\"n\">l</span> <span class=\"bp\">→</span> <span class=\"n\">B</span> <span class=\"err\">∈</span> <span class=\"n\">l</span> <span class=\"bp\">→</span> <span class=\"n\">A</span> <span class=\"err\">∈</span> <span class=\"n\">p</span> <span class=\"bp\">→</span> <span class=\"n\">B</span> <span class=\"err\">∈</span> <span class=\"n\">p</span> <span class=\"bp\">→</span>\n    <span class=\"n\">l</span> <span class=\"err\">⊆</span> <span class=\"n\">p</span><span class=\"o\">)</span>\n\n<span class=\"c\">/-</span><span class=\"cm\"> Group II Order -/</span>\n<span class=\"o\">(</span><span class=\"n\">BetH</span> <span class=\"o\">:</span> <span class=\"n\">Point</span> <span class=\"bp\">→</span> <span class=\"n\">Point</span> <span class=\"bp\">→</span> <span class=\"n\">Point</span> <span class=\"bp\">→</span> <span class=\"kt\">Prop</span><span class=\"o\">)</span>\n<span class=\"o\">(</span><span class=\"kn\">notation</span> <span class=\"n\">A</span> <span class=\"bp\">`</span><span class=\"err\">✶</span><span class=\"bp\">`</span><span class=\"o\">:</span><span class=\"mi\">55</span> <span class=\"n\">B</span><span class=\"o\">:</span><span class=\"mi\">60</span> <span class=\"bp\">`</span><span class=\"err\">✶</span><span class=\"bp\">`</span><span class=\"o\">:</span><span class=\"mi\">55</span> <span class=\"n\">C</span><span class=\"o\">:</span><span class=\"mi\">60</span> <span class=\"o\">:=</span> <span class=\"n\">BetH</span> <span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"n\">C</span><span class=\"o\">)</span>\n<span class=\"o\">(</span><span class=\"n\">between_diff</span> <span class=\"o\">:</span> <span class=\"bp\">∀</span> <span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"n\">C</span><span class=\"o\">,</span> <span class=\"n\">A</span> <span class=\"err\">✶</span> <span class=\"n\">B</span> <span class=\"err\">✶</span> <span class=\"n\">C</span> <span class=\"bp\">→</span> <span class=\"n\">A</span> <span class=\"bp\">≠</span> <span class=\"n\">C</span><span class=\"o\">)</span>\n<span class=\"o\">(</span><span class=\"n\">between_col</span> <span class=\"o\">:</span>  <span class=\"bp\">∀</span> <span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"n\">C</span><span class=\"o\">,</span> <span class=\"n\">A</span> <span class=\"err\">✶</span> <span class=\"n\">B</span> <span class=\"err\">✶</span> <span class=\"n\">C</span> <span class=\"bp\">→</span> <span class=\"n\">ColH</span><span class=\"err\">⟮</span><span class=\"n\">A</span><span class=\"o\">,</span> <span class=\"n\">B</span><span class=\"o\">,</span> <span class=\"n\">C</span><span class=\"err\">⟯</span><span class=\"o\">)</span>\n<span class=\"o\">(</span><span class=\"n\">between_comm</span> <span class=\"o\">:</span> <span class=\"bp\">∀</span> <span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"n\">C</span><span class=\"o\">,</span> <span class=\"n\">A</span> <span class=\"err\">✶</span> <span class=\"n\">B</span> <span class=\"err\">✶</span> <span class=\"n\">C</span> <span class=\"bp\">→</span> <span class=\"n\">C</span> <span class=\"err\">✶</span> <span class=\"n\">B</span> <span class=\"err\">✶</span> <span class=\"n\">A</span><span class=\"o\">)</span>\n<span class=\"o\">(</span><span class=\"n\">between_out</span> <span class=\"o\">:</span>  <span class=\"bp\">∀</span> <span class=\"n\">A</span> <span class=\"n\">B</span><span class=\"o\">,</span> <span class=\"n\">A</span> <span class=\"bp\">≠</span> <span class=\"n\">B</span> <span class=\"bp\">→</span> <span class=\"bp\">∃</span> <span class=\"n\">C</span><span class=\"o\">,</span> <span class=\"n\">A</span> <span class=\"err\">✶</span> <span class=\"n\">B</span> <span class=\"err\">✶</span> <span class=\"n\">C</span><span class=\"o\">)</span>\n<span class=\"o\">(</span><span class=\"n\">between_only_one</span> <span class=\"o\">:</span> <span class=\"bp\">∀</span> <span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"n\">C</span><span class=\"o\">,</span> <span class=\"n\">A</span> <span class=\"err\">✶</span> <span class=\"n\">B</span> <span class=\"err\">✶</span> <span class=\"n\">C</span> <span class=\"bp\">→</span> <span class=\"bp\">¬</span> <span class=\"n\">B</span> <span class=\"err\">✶</span> <span class=\"n\">C</span> <span class=\"err\">✶</span> <span class=\"n\">A</span><span class=\"o\">)</span>\n<span class=\"o\">(</span><span class=\"kn\">notation</span> <span class=\"bp\">`</span><span class=\"err\">⟮</span><span class=\"bp\">`</span><span class=\"n\">A</span> <span class=\"bp\">`|`</span><span class=\"o\">:</span><span class=\"mi\">55</span> <span class=\"n\">l</span><span class=\"bp\">`|`</span><span class=\"o\">:</span><span class=\"mi\">55</span> <span class=\"n\">B</span> <span class=\"bp\">`</span><span class=\"err\">⟯</span><span class=\"bp\">`</span> <span class=\"o\">:=</span> <span class=\"bp\">¬</span> <span class=\"n\">A</span> <span class=\"err\">∈</span> <span class=\"n\">l</span> <span class=\"bp\">∧</span> <span class=\"bp\">¬</span> <span class=\"n\">B</span> <span class=\"err\">∈</span> <span class=\"n\">l</span> <span class=\"bp\">∧</span>\n               <span class=\"bp\">∃</span> <span class=\"n\">I</span><span class=\"o\">,</span> <span class=\"n\">I</span> <span class=\"err\">∈</span> <span class=\"n\">l</span> <span class=\"bp\">∧</span> <span class=\"n\">A</span> <span class=\"err\">✶</span> <span class=\"n\">I</span> <span class=\"err\">✶</span> <span class=\"n\">B</span><span class=\"o\">)</span> <span class=\"c1\">-- cut: A and B are separated by l</span>\n<span class=\"o\">(</span><span class=\"n\">pasch</span> <span class=\"o\">:</span>\n  <span class=\"bp\">∀</span> <span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"n\">C</span> <span class=\"o\">(</span><span class=\"n\">l</span> <span class=\"o\">:</span> <span class=\"n\">Line</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">p</span> <span class=\"o\">:</span> <span class=\"n\">Plane</span><span class=\"o\">),</span>\n    <span class=\"bp\">¬</span> <span class=\"n\">ColH</span><span class=\"err\">⟮</span><span class=\"n\">A</span><span class=\"o\">,</span> <span class=\"n\">B</span><span class=\"o\">,</span> <span class=\"n\">C</span><span class=\"err\">⟯</span> <span class=\"bp\">→</span>\n    <span class=\"n\">A</span> <span class=\"err\">∈</span> <span class=\"n\">p</span> <span class=\"bp\">→</span> <span class=\"n\">B</span> <span class=\"err\">∈</span> <span class=\"n\">p</span> <span class=\"bp\">→</span> <span class=\"n\">C</span> <span class=\"err\">∈</span> <span class=\"n\">p</span> <span class=\"bp\">→</span> <span class=\"n\">l</span> <span class=\"err\">⊆</span> <span class=\"n\">p</span> <span class=\"bp\">→</span> <span class=\"bp\">¬</span> <span class=\"n\">C</span> <span class=\"err\">∈</span> <span class=\"n\">l</span> <span class=\"bp\">→</span> <span class=\"err\">⟮</span><span class=\"n\">A</span> <span class=\"bp\">|</span><span class=\"n\">l</span><span class=\"bp\">|</span> <span class=\"n\">B</span><span class=\"err\">⟯</span> <span class=\"bp\">→</span>\n    <span class=\"err\">⟮</span><span class=\"n\">A</span> <span class=\"bp\">|</span><span class=\"n\">l</span><span class=\"bp\">|</span> <span class=\"n\">C</span><span class=\"err\">⟯</span> <span class=\"bp\">∨</span> <span class=\"err\">⟮</span><span class=\"n\">B</span> <span class=\"bp\">|</span><span class=\"n\">l</span><span class=\"bp\">|</span> <span class=\"n\">C</span><span class=\"err\">⟯</span><span class=\"o\">)</span>\n</pre></div>",
        "id": 189541731,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1583186228
    },
    {
        "content": "<p>the <code>has_mem</code> fields threw me for a moment. Clever</p>",
        "id": 189541811,
        "sender_full_name": "Reid Barton",
        "timestamp": 1583186272
    },
    {
        "content": "<p>The down-side of this trick is it requires type annotations later on (otherwise Lean cannot tell what is a line and what is a plane).</p>",
        "id": 189541941,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1583186317
    },
    {
        "content": "<p>Julien, the relevant definitions here are:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"n\">class</span> <span class=\"n\">has_mem</span> <span class=\"o\">(</span><span class=\"n\">α</span> <span class=\"o\">:</span> <span class=\"kt\">Type</span> <span class=\"n\">u</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">γ</span> <span class=\"o\">:</span> <span class=\"kt\">Type</span> <span class=\"n\">v</span><span class=\"o\">)</span> <span class=\"o\">:=</span> <span class=\"o\">(</span><span class=\"n\">mem</span> <span class=\"o\">:</span> <span class=\"n\">α</span> <span class=\"bp\">→</span> <span class=\"n\">γ</span> <span class=\"bp\">→</span> <span class=\"kt\">Prop</span><span class=\"o\">)</span>\n<span class=\"kn\">infix</span> <span class=\"err\">∈</span> <span class=\"o\">:=</span> <span class=\"n\">has_mem</span><span class=\"bp\">.</span><span class=\"n\">mem</span>\n</pre></div>",
        "id": 189542048,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1583186387
    },
    {
        "content": "<p>So every time Lean sees <code>A ∈ P</code> and can infer the types of <code>A</code> and <code>P</code> are <code>X</code> and <code>Y</code>, it tries to solve the type class problem <code>has_mem X Y</code>.</p>",
        "id": 189542231,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1583186473
    },
    {
        "content": "<p>My fonts don't know what you are using for <code>ColH</code></p>",
        "id": 189544140,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1583187722
    },
    {
        "content": "<p>unless you actually are bordering the variables with boxes</p>",
        "id": 189544222,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1583187773
    },
    {
        "content": "<p>can't you just use regular brackets or braces there?</p>",
        "id": 189544263,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1583187819
    },
    {
        "content": "<p>unicode character combining red rectangle</p>",
        "id": 189544267,
        "sender_full_name": "Reid Barton",
        "timestamp": 1583187828
    },
    {
        "content": "<p>I want to react to this with an emoji that no font supports</p>",
        "id": 189544342,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1583187873
    },
    {
        "content": "<p>it's actually MATHEMATICAL LEFT FLATTENED PARENTHESIS</p>",
        "id": 189544399,
        "sender_full_name": "Reid Barton",
        "timestamp": 1583187935
    },
    {
        "content": "<p>but in my experience regular parentheses work fine in notation, yes</p>",
        "id": 189544409,
        "sender_full_name": "Reid Barton",
        "timestamp": 1583187949
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"120256\">@Ali Sever</span> sent me a <a href=\"https://github.com/ImperialCollegeLondon/xena-UROP-2018/blob/master/src/Geometry/README.md\" target=\"_blank\" title=\"https://github.com/ImperialCollegeLondon/xena-UROP-2018/blob/master/src/Geometry/README.md\">README.md</a> for his work, so at least now we can get some sort of an idea as to what he was doing.</p>",
        "id": 189544787,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1583188230
    },
    {
        "content": "<p>About parenthesis: the key feature of the funny parentheses is there is no risk of confusion with other parenthesis so you don't need to understand the dark art of precedence settings. I'd love to see some really practical guide to setting precedences in our mathlib docs.</p>",
        "id": 189570502,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1583222494
    }
]