[
    {
        "content": "<p>I think the version of mathlib on one of my Lean projects is out of date. When I type <code>lean -version</code> I get</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"n\">Lean</span> <span class=\"o\">(</span><span class=\"n\">version</span> <span class=\"mi\">3</span><span class=\"bp\">.</span><span class=\"mi\">32</span><span class=\"bp\">.</span><span class=\"mi\">1</span><span class=\"o\">,</span> <span class=\"n\">commit</span> <span class=\"mi\">35</span><span class=\"n\">b3a9c4e2d3</span><span class=\"o\">,</span> <span class=\"n\">Release</span><span class=\"o\">)</span>\n</code></pre></div>\n<p>But if I run <code>elan update</code> I get</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"bp\">&gt;</span> <span class=\"n\">elan</span> <span class=\"n\">update</span>\n<span class=\"n\">info</span><span class=\"o\">:</span> <span class=\"n\">syncing</span> <span class=\"n\">channel</span> <span class=\"n\">updates</span> <span class=\"n\">for</span> <span class=\"bp\">'</span><span class=\"n\">stable'</span>\n<span class=\"n\">info</span><span class=\"o\">:</span> <span class=\"n\">latest</span> <span class=\"n\">update</span> <span class=\"n\">on</span> <span class=\"n\">stable</span><span class=\"o\">,</span> <span class=\"n\">lean</span> <span class=\"n\">version</span> <span class=\"n\">v3.42.1</span>\n<span class=\"n\">info</span><span class=\"o\">:</span> <span class=\"n\">syncing</span> <span class=\"n\">channel</span> <span class=\"n\">updates</span> <span class=\"n\">for</span> <span class=\"bp\">'</span><span class=\"n\">nightly'</span>\n<span class=\"n\">info</span><span class=\"o\">:</span> <span class=\"n\">latest</span> <span class=\"n\">update</span> <span class=\"n\">on</span> <span class=\"n\">nightly</span><span class=\"o\">,</span> <span class=\"n\">lean</span> <span class=\"n\">version</span> <span class=\"n\">nightly</span><span class=\"bp\">-</span><span class=\"mi\">2020</span><span class=\"bp\">-</span><span class=\"mi\">04</span><span class=\"bp\">-</span><span class=\"mi\">28</span>\n<span class=\"n\">info</span><span class=\"o\">:</span> <span class=\"n\">checking</span> <span class=\"n\">for</span> <span class=\"n\">self</span><span class=\"bp\">-</span><span class=\"n\">updates</span>\n<span class=\"n\">error</span><span class=\"o\">:</span> <span class=\"n\">failed</span> <span class=\"n\">to</span> <span class=\"n\">parse</span> <span class=\"n\">latest</span> <span class=\"n\">release</span> <span class=\"n\">tag</span>\n</code></pre></div>\n<p>This might be tied to me being on an M1 mac. It caused me various weird hurdles with my initial install. (<a href=\"#narrow/stream/113489-new-members/topic/M1.20macs\">https://leanprover.zulipchat.com/#narrow/stream/113489-new-members/topic/M1.20macs</a>)</p>",
        "id": 278361112,
        "sender_full_name": "Jake Levinson",
        "timestamp": 1649451366
    },
    {
        "content": "<p>I guess I didn't actually ask a question... my question is, how do I get it to update?</p>",
        "id": 278364521,
        "sender_full_name": "Jake Levinson",
        "timestamp": 1649453274
    },
    {
        "content": "<p>Assuming you created those projects using <code>leanproject</code>, <code>leanproject up</code> should be the way to go.</p>",
        "id": 278364671,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1649453367
    },
    {
        "content": "<p>That command fails:</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"bp\">...</span>\n<span class=\"n\">ImportError</span><span class=\"o\">:</span> <span class=\"n\">dlopen</span><span class=\"o\">(</span><span class=\"bp\">/</span><span class=\"n\">opt</span><span class=\"bp\">/</span><span class=\"n\">homebrew</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"bp\">/</span><span class=\"n\">python3.9</span><span class=\"bp\">/</span><span class=\"n\">site</span><span class=\"bp\">-</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">_cffi_backend.cpython</span><span class=\"bp\">-</span><span class=\"mi\">39</span><span class=\"bp\">-</span><span class=\"n\">darwin.so</span><span class=\"o\">,</span> <span class=\"mi\">2</span><span class=\"o\">):</span> <span class=\"n\">Library</span> <span class=\"n\">not</span> <span class=\"n\">loaded</span><span class=\"o\">:</span> <span class=\"bp\">/</span><span class=\"n\">opt</span><span class=\"bp\">/</span><span class=\"n\">homebrew</span><span class=\"bp\">/</span><span class=\"n\">opt</span><span class=\"bp\">/</span><span class=\"n\">libffi</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"bp\">/</span><span class=\"n\">libffi.7.dylib</span>\n  <span class=\"n\">Referenced</span> <span class=\"k\">from</span><span class=\"o\">:</span> <span class=\"bp\">/</span><span class=\"n\">opt</span><span class=\"bp\">/</span><span class=\"n\">homebrew</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"bp\">/</span><span class=\"n\">python3.9</span><span class=\"bp\">/</span><span class=\"n\">site</span><span class=\"bp\">-</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">_cffi_backend.cpython</span><span class=\"bp\">-</span><span class=\"mi\">39</span><span class=\"bp\">-</span><span class=\"n\">darwin.so</span>\n  <span class=\"n\">Reason</span><span class=\"o\">:</span> <span class=\"n\">image</span> <span class=\"n\">not</span> <span class=\"n\">found</span>\n</code></pre></div>\n<p>I feel like I've seen this error message before, but I don't remember where...</p>",
        "id": 278364889,
        "sender_full_name": "Jake Levinson",
        "timestamp": 1649453470
    },
    {
        "content": "<p>might need to reinstall <code>libffi</code>? you could try <code>brew uninstall libffi; brew install libffi</code></p>",
        "id": 278369595,
        "sender_full_name": "Matt Diamond",
        "timestamp": 1649456690
    },
    {
        "content": "<p>it might be installed but not linked</p>",
        "id": 278369613,
        "sender_full_name": "Matt Diamond",
        "timestamp": 1649456705
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"380294\">@Matt Diamond</span> <span class=\"user-mention\" data-user-id=\"387244\">@Yaël Dillies</span> I eventually got the commands working (I had to reinstall elan and lean in the end).</p>\n<p>Now though, I keep getting \"excessive memory consumption\" errors in VS Code. I think (?) all of mathlib is already compiled, I have oleans files already, but e.g. a single command of <code>library_search</code> typically causes VS Code to crash now. Even plain old typing and editing in a file seems more prone to cause an outage. Any ideas on how to troubleshoot?</p>",
        "id": 278427214,
        "sender_full_name": "Jake Levinson",
        "timestamp": 1649533644
    },
    {
        "content": "<p>This very much sounds like you have the <em>wrong</em> oleans. Try <code>leanproject get-c</code> again.</p>",
        "id": 278427581,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1649534147
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"bp\">&gt;</span> <span class=\"n\">leanproject</span> <span class=\"n\">get</span><span class=\"bp\">-</span><span class=\"n\">c</span>\n<span class=\"n\">Looking</span> <span class=\"n\">for</span> <span class=\"n\">lean</span><span class=\"bp\">-</span><span class=\"n\">topology</span> <span class=\"n\">oleans</span> <span class=\"n\">for</span> <span class=\"mi\">07</span><span class=\"n\">bfb91</span>\n  <span class=\"n\">locally...</span>\n<span class=\"n\">No</span> <span class=\"n\">cache</span> <span class=\"n\">available</span> <span class=\"n\">for</span> <span class=\"n\">revision</span> <span class=\"mi\">07</span><span class=\"n\">bfb91</span>\n<span class=\"n\">Looking</span> <span class=\"n\">for</span> <span class=\"n\">lean</span><span class=\"bp\">-</span><span class=\"n\">topology</span> <span class=\"n\">oleans</span> <span class=\"n\">for</span> <span class=\"n\">b7d8e4d</span>\n  <span class=\"n\">locally...</span>\n<span class=\"n\">No</span> <span class=\"n\">cache</span> <span class=\"n\">available</span> <span class=\"n\">for</span> <span class=\"n\">revision</span> <span class=\"n\">b7d8e4d</span>\n<span class=\"n\">Looking</span> <span class=\"n\">for</span> <span class=\"n\">lean</span><span class=\"bp\">-</span><span class=\"n\">topology</span> <span class=\"n\">oleans</span> <span class=\"n\">for</span> <span class=\"mi\">0</span><span class=\"n\">a2b52e</span>\n  <span class=\"n\">locally...</span>\n<span class=\"n\">No</span> <span class=\"n\">cache</span> <span class=\"n\">available</span> <span class=\"n\">for</span> <span class=\"n\">revision</span> <span class=\"mi\">0</span><span class=\"n\">a2b52e</span>\n<span class=\"n\">Looking</span> <span class=\"n\">for</span> <span class=\"n\">lean</span><span class=\"bp\">-</span><span class=\"n\">topology</span> <span class=\"n\">oleans</span> <span class=\"n\">for</span> <span class=\"mi\">8</span><span class=\"n\">b2359e</span>\n  <span class=\"n\">locally...</span>\n<span class=\"n\">No</span> <span class=\"n\">cache</span> <span class=\"n\">available</span> <span class=\"n\">for</span> <span class=\"n\">revision</span> <span class=\"mi\">8</span><span class=\"n\">b2359e</span>\n<span class=\"n\">Looking</span> <span class=\"n\">for</span> <span class=\"n\">lean</span><span class=\"bp\">-</span><span class=\"n\">topology</span> <span class=\"n\">oleans</span> <span class=\"n\">for</span> <span class=\"n\">ed4a7a5</span>\n  <span class=\"n\">locally...</span>\n<span class=\"n\">No</span> <span class=\"n\">cache</span> <span class=\"n\">available</span> <span class=\"n\">for</span> <span class=\"n\">revision</span> <span class=\"n\">ed4a7a5</span>\n<span class=\"n\">Looking</span> <span class=\"n\">for</span> <span class=\"n\">lean</span><span class=\"bp\">-</span><span class=\"n\">topology</span> <span class=\"n\">oleans</span> <span class=\"n\">for</span> <span class=\"mi\">5</span><span class=\"n\">a599b5</span>\n  <span class=\"n\">locally...</span>\n<span class=\"n\">No</span> <span class=\"n\">cache</span> <span class=\"n\">available</span> <span class=\"n\">for</span> <span class=\"n\">revision</span> <span class=\"mi\">5</span><span class=\"n\">a599b5</span>\n<span class=\"n\">Looking</span> <span class=\"n\">for</span> <span class=\"n\">lean</span><span class=\"bp\">-</span><span class=\"n\">topology</span> <span class=\"n\">oleans</span> <span class=\"n\">for</span> <span class=\"n\">fc3ae7b</span>\n  <span class=\"n\">locally...</span>\n<span class=\"n\">No</span> <span class=\"n\">cache</span> <span class=\"n\">available</span> <span class=\"n\">for</span> <span class=\"n\">revision</span> <span class=\"n\">fc3ae7b</span>\n<span class=\"n\">Looking</span> <span class=\"n\">for</span> <span class=\"n\">lean</span><span class=\"bp\">-</span><span class=\"n\">topology</span> <span class=\"n\">oleans</span> <span class=\"n\">for</span> <span class=\"mi\">52</span><span class=\"n\">ef265</span>\n  <span class=\"n\">locally...</span>\n<span class=\"n\">No</span> <span class=\"n\">cache</span> <span class=\"n\">available</span> <span class=\"n\">for</span> <span class=\"n\">revision</span> <span class=\"mi\">52</span><span class=\"n\">ef265</span>\n<span class=\"n\">Looking</span> <span class=\"n\">for</span> <span class=\"n\">lean</span><span class=\"bp\">-</span><span class=\"n\">topology</span> <span class=\"n\">oleans</span> <span class=\"n\">for</span> <span class=\"mi\">57</span><span class=\"n\">b15b3</span>\n  <span class=\"n\">locally...</span>\n<span class=\"n\">No</span> <span class=\"n\">cache</span> <span class=\"n\">available</span> <span class=\"n\">for</span> <span class=\"n\">revision</span> <span class=\"mi\">57</span><span class=\"n\">b15b3</span>\n<span class=\"n\">Looking</span> <span class=\"n\">for</span> <span class=\"n\">lean</span><span class=\"bp\">-</span><span class=\"n\">topology</span> <span class=\"n\">oleans</span> <span class=\"n\">for</span> <span class=\"n\">a62215f</span>\n  <span class=\"n\">locally...</span>\n<span class=\"n\">No</span> <span class=\"n\">cache</span> <span class=\"n\">available</span> <span class=\"n\">for</span> <span class=\"n\">revision</span> <span class=\"n\">a62215f</span>\n<span class=\"n\">Looking</span> <span class=\"n\">for</span> <span class=\"n\">lean</span><span class=\"bp\">-</span><span class=\"n\">topology</span> <span class=\"n\">oleans</span> <span class=\"n\">for</span> <span class=\"n\">d4dee61</span>\n  <span class=\"n\">locally...</span>\n<span class=\"n\">No</span> <span class=\"n\">cache</span> <span class=\"n\">available</span> <span class=\"n\">for</span> <span class=\"n\">revision</span> <span class=\"n\">d4dee61</span>\n<span class=\"n\">Looking</span> <span class=\"n\">for</span> <span class=\"n\">lean</span><span class=\"bp\">-</span><span class=\"n\">topology</span> <span class=\"n\">oleans</span> <span class=\"n\">for</span> <span class=\"n\">dcdd346</span>\n  <span class=\"n\">locally...</span>\n<span class=\"n\">No</span> <span class=\"n\">cache</span> <span class=\"n\">available</span> <span class=\"n\">for</span> <span class=\"n\">revision</span> <span class=\"n\">dcdd346</span>\n<span class=\"n\">Looking</span> <span class=\"n\">for</span> <span class=\"n\">lean</span><span class=\"bp\">-</span><span class=\"n\">topology</span> <span class=\"n\">oleans</span> <span class=\"n\">for</span> <span class=\"mi\">5</span><span class=\"n\">a30e79</span>\n  <span class=\"n\">locally...</span>\n<span class=\"n\">No</span> <span class=\"n\">cache</span> <span class=\"n\">available</span> <span class=\"n\">for</span> <span class=\"n\">revision</span> <span class=\"mi\">5</span><span class=\"n\">a30e79</span>\n<span class=\"n\">Looking</span> <span class=\"n\">for</span> <span class=\"n\">lean</span><span class=\"bp\">-</span><span class=\"n\">topology</span> <span class=\"n\">oleans</span> <span class=\"n\">for</span> <span class=\"n\">c6552cc</span>\n  <span class=\"n\">locally...</span>\n<span class=\"n\">No</span> <span class=\"n\">cache</span> <span class=\"n\">available</span> <span class=\"n\">for</span> <span class=\"n\">revision</span> <span class=\"n\">c6552cc</span>\n<span class=\"n\">Looking</span> <span class=\"n\">for</span> <span class=\"n\">lean</span><span class=\"bp\">-</span><span class=\"n\">topology</span> <span class=\"n\">oleans</span> <span class=\"n\">for</span> <span class=\"mi\">431124</span><span class=\"n\">f</span>\n  <span class=\"n\">locally...</span>\n<span class=\"n\">No</span> <span class=\"n\">cache</span> <span class=\"n\">available</span> <span class=\"n\">for</span> <span class=\"n\">revision</span> <span class=\"mi\">431124</span><span class=\"n\">f</span>\n<span class=\"n\">Looking</span> <span class=\"n\">for</span> <span class=\"n\">lean</span><span class=\"bp\">-</span><span class=\"n\">topology</span> <span class=\"n\">oleans</span> <span class=\"n\">for</span> <span class=\"mi\">84</span><span class=\"n\">b2ce0</span>\n  <span class=\"n\">locally...</span>\n<span class=\"n\">No</span> <span class=\"n\">cache</span> <span class=\"n\">available</span> <span class=\"n\">for</span> <span class=\"n\">revision</span> <span class=\"mi\">84</span><span class=\"n\">b2ce0</span>\n<span class=\"n\">Looking</span> <span class=\"n\">for</span> <span class=\"n\">lean</span><span class=\"bp\">-</span><span class=\"n\">topology</span> <span class=\"n\">oleans</span> <span class=\"n\">for</span> <span class=\"mi\">25</span><span class=\"n\">fcf7a</span>\n  <span class=\"n\">locally...</span>\n<span class=\"n\">No</span> <span class=\"n\">cache</span> <span class=\"n\">available</span> <span class=\"n\">for</span> <span class=\"n\">revision</span> <span class=\"mi\">25</span><span class=\"n\">fcf7a</span>\n<span class=\"n\">Looking</span> <span class=\"n\">for</span> <span class=\"n\">lean</span><span class=\"bp\">-</span><span class=\"n\">topology</span> <span class=\"n\">oleans</span> <span class=\"n\">for</span> <span class=\"mi\">9</span><span class=\"n\">e6d61a</span>\n  <span class=\"n\">locally...</span>\n<span class=\"n\">No</span> <span class=\"n\">cache</span> <span class=\"n\">available</span> <span class=\"n\">for</span> <span class=\"n\">revision</span> <span class=\"mi\">9</span><span class=\"n\">e6d61a</span>\n<span class=\"n\">Looking</span> <span class=\"n\">for</span> <span class=\"n\">lean</span><span class=\"bp\">-</span><span class=\"n\">topology</span> <span class=\"n\">oleans</span> <span class=\"n\">for</span> <span class=\"mi\">1</span><span class=\"n\">e6f420</span>\n  <span class=\"n\">locally...</span>\n<span class=\"n\">No</span> <span class=\"n\">cache</span> <span class=\"n\">available</span> <span class=\"n\">for</span> <span class=\"n\">revision</span> <span class=\"mi\">1</span><span class=\"n\">e6f420</span>\n<span class=\"n\">Looking</span> <span class=\"n\">for</span> <span class=\"n\">lean</span><span class=\"bp\">-</span><span class=\"n\">topology</span> <span class=\"n\">oleans</span> <span class=\"n\">for</span> <span class=\"mi\">170</span><span class=\"n\">c3fa</span>\n  <span class=\"n\">locally...</span>\n<span class=\"n\">No</span> <span class=\"n\">cache</span> <span class=\"n\">available</span> <span class=\"n\">for</span> <span class=\"n\">revision</span> <span class=\"mi\">170</span><span class=\"n\">c3fa</span>\n<span class=\"n\">Looking</span> <span class=\"n\">for</span> <span class=\"n\">lean</span><span class=\"bp\">-</span><span class=\"n\">topology</span> <span class=\"n\">oleans</span> <span class=\"n\">for</span> <span class=\"n\">ebc4e68</span>\n  <span class=\"n\">locally...</span>\n<span class=\"n\">No</span> <span class=\"n\">cache</span> <span class=\"n\">available</span> <span class=\"n\">for</span> <span class=\"n\">revision</span> <span class=\"n\">ebc4e68</span>\n<span class=\"n\">Looking</span> <span class=\"n\">for</span> <span class=\"n\">lean</span><span class=\"bp\">-</span><span class=\"n\">topology</span> <span class=\"n\">oleans</span> <span class=\"n\">for</span> <span class=\"n\">f847ada</span>\n  <span class=\"n\">locally...</span>\n<span class=\"n\">No</span> <span class=\"n\">cache</span> <span class=\"n\">available</span> <span class=\"n\">for</span> <span class=\"n\">revision</span> <span class=\"n\">f847ada</span>\n<span class=\"n\">Looking</span> <span class=\"n\">for</span> <span class=\"n\">lean</span><span class=\"bp\">-</span><span class=\"n\">topology</span> <span class=\"n\">oleans</span> <span class=\"n\">for</span> <span class=\"mi\">9</span><span class=\"n\">b8e5ca</span>\n  <span class=\"n\">locally...</span>\n<span class=\"n\">No</span> <span class=\"n\">cache</span> <span class=\"n\">available</span> <span class=\"n\">for</span> <span class=\"n\">revision</span> <span class=\"mi\">9</span><span class=\"n\">b8e5ca</span>\n<span class=\"n\">No</span> <span class=\"n\">archives</span> <span class=\"n\">available</span> <span class=\"n\">for</span> <span class=\"n\">any</span> <span class=\"n\">commits</span><span class=\"bp\">!</span>\n</code></pre></div>",
        "id": 278427661,
        "sender_full_name": "Jake Levinson",
        "timestamp": 1649534267
    },
    {
        "content": "<p>Oh you're on your own project. Do <code>leanproject get-m</code> then.</p>",
        "id": 278427865,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1649534501
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"bp\">&gt;</span> <span class=\"n\">leanproject</span> <span class=\"n\">get</span><span class=\"bp\">-</span><span class=\"n\">m</span>\n<span class=\"n\">Looking</span> <span class=\"n\">for</span> <span class=\"n\">mathlib</span> <span class=\"n\">oleans</span> <span class=\"n\">for</span> <span class=\"mi\">2</span><span class=\"n\">a04ec03f1</span>\n  <span class=\"n\">locally...</span>\n  <span class=\"n\">Found</span> <span class=\"kn\">local</span> <span class=\"n\">mathlib</span> <span class=\"n\">oleans</span>\n<span class=\"n\">Located</span> <span class=\"n\">matching</span> <span class=\"n\">cache</span>\n<span class=\"n\">Applying</span> <span class=\"n\">cache</span>\n  <span class=\"n\">files</span> <span class=\"n\">extracted</span><span class=\"o\">:</span> <span class=\"mi\">2340</span> <span class=\"o\">[</span><span class=\"mi\">00</span><span class=\"o\">:</span><span class=\"mi\">04</span><span class=\"o\">,</span> <span class=\"mi\">553</span><span class=\"bp\">.</span><span class=\"mi\">28</span><span class=\"bp\">/</span><span class=\"n\">s</span><span class=\"o\">]</span>\n</code></pre></div>\n<p>Is this equivalent to <code>leanproject get-mathlib-cache</code>? I believe I ran this command yesterday too.</p>",
        "id": 278427925,
        "sender_full_name": "Jake Levinson",
        "timestamp": 1649534560
    },
    {
        "content": "<p>I'm still getting memory errors, e.g.</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"n\">excessive</span> <span class=\"n\">memory</span> <span class=\"n\">consumption</span> <span class=\"n\">detected</span> <span class=\"n\">at</span> <span class=\"bp\">'</span><span class=\"n\">expression</span> <span class=\"n\">traversal'</span> <span class=\"o\">(</span><span class=\"n\">potential</span> <span class=\"n\">solution</span><span class=\"o\">:</span> <span class=\"n\">increase</span> <span class=\"n\">memory</span> <span class=\"n\">consumption</span> <span class=\"n\">threshold</span><span class=\"o\">)</span>\n</code></pre></div>\n<p>This is in a 90-line file importing</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kn\">import</span> <span class=\"n\">ring_theory.polynomial.homogeneous</span>\n<span class=\"kn\">import</span> <span class=\"n\">field_theory.is_alg_closed.basic</span>\n</code></pre></div>",
        "id": 278428311,
        "sender_full_name": "Jake Levinson",
        "timestamp": 1649535172
    },
    {
        "content": "<p>A shot in the dark: just in case there's something unknown wrong with them, you could try clearing all the archive files from the <code>~/.mathlib</code> folder, then when you do <code>leanproject get-mathlib-cache</code> it'll download them again. (I believe <code>leanproject get-m</code> is the same and that it's just an abbreviation.)</p>",
        "id": 278428320,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1649535199
    },
    {
        "content": "<p>Okay, I'll try it. How do I clear those files?</p>",
        "id": 278428367,
        "sender_full_name": "Jake Levinson",
        "timestamp": 1649535248
    },
    {
        "content": "<p>Maybe, after <code>leanproject get-m</code>, also <code>leanproject build</code>?</p>",
        "id": 278428378,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1649535287
    },
    {
        "content": "<p>You can just delete them any way you might delete files</p>",
        "id": 278428383,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1649535292
    },
    {
        "content": "<p>Ok. But which files are you referring to? <code>~/_target/deps/mathlib/archive/</code>?</p>",
        "id": 278428403,
        "sender_full_name": "Jake Levinson",
        "timestamp": 1649535332
    },
    {
        "content": "<p>On Mac, you can go to the Finder, do Go -&gt; Location, type in ~/.mathlib, then you can see all these <code>.tar.xz</code> files</p>",
        "id": 278428408,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1649535355
    },
    {
        "content": "<p>Oh literally from my home directory.</p>",
        "id": 278428451,
        "sender_full_name": "Jake Levinson",
        "timestamp": 1649535372
    },
    {
        "content": "<p>(I doubt this will fix anything, but you'll save some disk space at least. I periodically clear it out for that reason.)</p>",
        "id": 278428489,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1649535453
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"321459\">Damiano Testa</span> <a href=\"#narrow/stream/113489-new-members/topic/Stuck.20on.20an.20outdated.20version.20of.20mathlib.3F/near/278428378\">said</a>:</p>\n<blockquote>\n<p>Maybe, after <code>leanproject get-m</code>, also <code>leanproject build</code>?</p>\n</blockquote>\n<p>I had run this previously, I'll run it again once the the cache is remade. Though, is there a way to ask it to only compile mathlib, and not the files in my actual project? A bunch of them have scratchwork or incomplete stuff or whatever, so just running <code>leanproject build</code> produces a ton of error messages.</p>",
        "id": 278428496,
        "sender_full_name": "Jake Levinson",
        "timestamp": 1649535476
    },
    {
        "content": "<p>(All the files in my project are in a separate directory not along the <code>_target/deps/mathlib</code> path)</p>",
        "id": 278428546,
        "sender_full_name": "Jake Levinson",
        "timestamp": 1649535513
    },
    {
        "content": "<p>Okay, I have deleted those files and rerun <code>leanproject get-m</code>. Still getting memory errors, in this case it happened right away as soon as I made an edit to a line in the file I was working on.</p>",
        "id": 278429152,
        "sender_full_name": "Jake Levinson",
        "timestamp": 1649536405
    },
    {
        "content": "<p>I assume you restarted the Lean process too?</p>",
        "id": 278429423,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1649536771
    },
    {
        "content": "<p>I wonder if there's a mismatch between the version of Lean you're using for your project and the version of Lean that produced the mathlib oleans. I have to admit I don't have much experience with using mathlib as a dependency -- usually I work within mathlib itself.</p>",
        "id": 278429491,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1649536836
    },
    {
        "content": "<p>Is that separate from closing and reopening VS Code?</p>",
        "id": 278429494,
        "sender_full_name": "Jake Levinson",
        "timestamp": 1649536840
    },
    {
        "content": "<p>Hmm. I don't think I know the difference. What does it mean to work within mathlib itself?</p>",
        "id": 278429505,
        "sender_full_name": "Jake Levinson",
        "timestamp": 1649536872
    },
    {
        "content": "<p>That's sufficient. You can also open the command palette and do \"Lean: restart\"</p>",
        "id": 278429512,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1649536890
    },
    {
        "content": "<p>Oh wow, that is so much more convenient than reopening VS Code!</p>\n<p>Anyway, memory errors continue. This time I managed to edit two lines before it crashed.</p>",
        "id": 278429647,
        "sender_full_name": "Jake Levinson",
        "timestamp": 1649537116
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"391579\">Jake Levinson</span> <a href=\"#narrow/stream/113489-new-members/topic/Stuck.20on.20an.20outdated.20version.20of.20mathlib.3F/near/278429505\">said</a>:</p>\n<blockquote>\n<p>Hmm. I don't think I know the difference. What does it mean to work within mathlib itself?</p>\n</blockquote>\n<p>You can create a Lean project that, rather than depending on mathlib, <em>is</em> mathlib. This is mostly useful if you're planning on eventually submitting a PR.</p>\n<p>For example, here's a command to create a project that's a local branch of mathlib called \"kmill_add_frobozz\"</p>\n<div class=\"codehilite\" data-code-language=\"Text only\"><pre><span></span><code>leanproject get -b mathlib:kmill_add_frobozz\n</code></pre></div>",
        "id": 278429787,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1649537315
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"391579\">@Jake Levinson</span> What are the contents of your <code>leanpkg.toml</code> for your project?</p>",
        "id": 278429895,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1649537485
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"bp\">&gt;</span> <span class=\"n\">cat</span> <span class=\"n\">leanpkg.toml</span>\n<span class=\"o\">[</span><span class=\"n\">package</span><span class=\"o\">]</span>\n<span class=\"n\">name</span> <span class=\"bp\">=</span> <span class=\"s2\">\"lean-topology\"</span>\n<span class=\"n\">version</span> <span class=\"bp\">=</span> <span class=\"s2\">\"0.1\"</span>\n<span class=\"n\">lean_version</span> <span class=\"bp\">=</span> <span class=\"s2\">\"leanprover-community/lean:3.42.1\"</span>\n<span class=\"n\">path</span> <span class=\"bp\">=</span> <span class=\"s2\">\"src\"</span>\n\n<span class=\"o\">[</span><span class=\"n\">dependencies</span><span class=\"o\">]</span>\n<span class=\"n\">mathlib</span> <span class=\"bp\">=</span> <span class=\"o\">{</span><span class=\"n\">git</span> <span class=\"bp\">=</span> <span class=\"s2\">\"https://github.com/leanprover-community/mathlib\"</span><span class=\"o\">,</span> <span class=\"n\">rev</span> <span class=\"bp\">=</span> <span class=\"s2\">\"2a04ec03f17ad178e2e1e596973f7eb4c9838d1a\"</span><span class=\"o\">}</span>\n</code></pre></div>",
        "id": 278430131,
        "sender_full_name": "Jake Levinson",
        "timestamp": 1649537751
    },
    {
        "content": "<p>I just wanted to check that your version of mathlib matched up with your version of lean -- they do. (Revision <code>2a04ec...</code> is from yesterday and uses lean 3.42.1.) Sorry, I'm pretty much out of ideas for what could be the problem now. I have both Intel Mac and Linux installations, but no M1 Mac installation.</p>",
        "id": 278430738,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1649538407
    },
    {
        "content": "<p>Maybe I should just make a new <code>leanproject</code> and copy my files over to it.</p>",
        "id": 278430761,
        "sender_full_name": "Jake Levinson",
        "timestamp": 1649538463
    },
    {
        "content": "<p>I <del>was born in</del> am a child of in the 90s, so \"turning it off and turning it on again\" is one of my preferred troubleshooting methods.</p>",
        "id": 278430824,
        "sender_full_name": "Jake Levinson",
        "timestamp": 1649538501
    },
    {
        "content": "<p>If you have time to let it run, you could try <code>lean --make _target/deps/mathlib/src</code> to rebuild the oleans yourself</p>",
        "id": 278430832,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1649538518
    },
    {
        "content": "<p>You can also let it compile in parallel by giving it the <code>-j</code> option, like <code>lean -j4 --make _target/deps/mathlib/src</code> to use four threads.</p>",
        "id": 278430861,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1649538567
    },
    {
        "content": "<p>Hmm, that crashes immediately... maybe this is the sign:</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"bp\">/.../</span><span class=\"n\">lean</span><span class=\"bp\">-</span><span class=\"n\">topology</span><span class=\"bp\">/</span><span class=\"n\">_target</span><span class=\"bp\">/</span><span class=\"n\">deps</span><span class=\"bp\">/</span><span class=\"n\">mathlib</span><span class=\"bp\">/</span><span class=\"n\">src</span><span class=\"bp\">/</span><span class=\"n\">topology</span><span class=\"bp\">/</span><span class=\"n\">category</span><span class=\"bp\">/</span><span class=\"n\">CompHaus</span><span class=\"bp\">/</span><span class=\"n\">default.lean</span><span class=\"o\">:</span><span class=\"mi\">1</span><span class=\"o\">:</span><span class=\"mi\">0</span><span class=\"o\">:</span> <span class=\"n\">error</span><span class=\"o\">:</span> <span class=\"n\">ambiguous</span> <span class=\"kn\">import</span><span class=\"o\">,</span>\n<span class=\"n\">it</span> <span class=\"n\">can</span> <span class=\"n\">be</span> <span class=\"bp\">'/.../</span><span class=\"n\">lean</span><span class=\"bp\">-</span><span class=\"n\">topology</span><span class=\"bp\">/</span><span class=\"n\">_target</span><span class=\"bp\">/</span><span class=\"n\">deps</span><span class=\"bp\">/</span><span class=\"n\">mathlib</span><span class=\"bp\">/</span><span class=\"n\">src</span><span class=\"bp\">/</span><span class=\"n\">topology</span><span class=\"bp\">/</span><span class=\"n\">connected.lean'</span>\n<span class=\"n\">or</span> <span class=\"bp\">'/.../</span><span class=\"n\">lean</span><span class=\"bp\">-</span><span class=\"n\">topology</span><span class=\"bp\">/</span><span class=\"n\">src</span><span class=\"bp\">/</span><span class=\"n\">topology</span><span class=\"bp\">/</span><span class=\"n\">connected.lean'</span>\n</code></pre></div>",
        "id": 278430925,
        "sender_full_name": "Jake Levinson",
        "timestamp": 1649538638
    },
    {
        "content": "<p>So maybe this is somehow my project (which has some homemade point set topology stuff) clashing with mathlib.</p>",
        "id": 278430948,
        "sender_full_name": "Jake Levinson",
        "timestamp": 1649538693
    },
    {
        "content": "<p>(It popped up a bunch of messages of that form</p>",
        "id": 278430956,
        "sender_full_name": "Jake Levinson",
        "timestamp": 1649538710
    },
    {
        "content": "<p>That seems promising. Maybe put all your own stuff in a subfolder, like <code>jlevinson</code> or something like that?</p>",
        "id": 278431031,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1649538805
    },
    {
        "content": "<p>That stuff is in its own folder already (<code>lean-topology/src/topology/</code> instead of <code>lean-topology/_target/deps/mathlib/...</code>). But I'm going to try renaming those files.</p>",
        "id": 278431112,
        "sender_full_name": "Jake Levinson",
        "timestamp": 1649538891
    },
    {
        "content": "<p>Oh, I guess renaming the topology folder to <code>jl-topology</code> or something would be fine too. It seems that I inadvertently had both the name and folder hierarchy the same as in mathlib.</p>",
        "id": 278431188,
        "sender_full_name": "Jake Levinson",
        "timestamp": 1649538967
    },
    {
        "content": "<p>Yeah, the point is to rename it so the modules show up elsewhere in the module hierarchy. (Maybe do <code>jl_topology</code> instead, because I don't think you can have hyphens in module names.)</p>",
        "id": 278431281,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1649539091
    },
    {
        "content": "<p>Okay, now <code>lean --make _target/deps/mathlib/src</code> runs and terminates with no output after a ten seconds or so.</p>",
        "id": 278431284,
        "sender_full_name": "Jake Levinson",
        "timestamp": 1649539096
    },
    {
        "content": "<p><span aria-label=\"thumbs up\" class=\"emoji emoji-1f44d\" role=\"img\" title=\"thumbs up\">:thumbs_up:</span> That means all the oleans are up-to-date</p>",
        "id": 278431298,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1649539121
    },
    {
        "content": "<p>OK, time to try editing VS code again.</p>",
        "id": 278431310,
        "sender_full_name": "Jake Levinson",
        "timestamp": 1649539145
    },
    {
        "content": "<p>No dice... crashed again after editing a few lines in a larger file.</p>",
        "id": 278431441,
        "sender_full_name": "Jake Levinson",
        "timestamp": 1649539270
    },
    {
        "content": "<p>Maybe try <code>lean --make src</code> now?</p>",
        "id": 278431731,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1649539532
    },
    {
        "content": "<p>That runs OK.</p>",
        "id": 278432151,
        "sender_full_name": "Jake Levinson",
        "timestamp": 1649540100
    },
    {
        "content": "<p>Are you able to edit files now if you restart lean?</p>",
        "id": 278432477,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1649540617
    },
    {
        "content": "<p>This should all be working now. Have you got a lot of open files in VS Code? Close all but the one you're working on. Are you using a machine with &lt;= 8 gigs of ram?</p>",
        "id": 278432622,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1649540838
    },
    {
        "content": "<p>So I have been able to edit without further crashes in a different file that only imports <code>data.set.basic</code> from mathlib, plus importing other files I've been working on in this project, totaling ~1000 lines of code, say. (This project actually has nothing to do with topology, I just kept reusing a leanproject I created a year ago.)</p>\n<p>If I work in the 90-line file with</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kn\">import</span> <span class=\"n\">ring_theory.polynomial.homogeneous</span>\n<span class=\"kn\">import</span> <span class=\"n\">field_theory.is_alg_closed.basic</span>\n</code></pre></div>\n<p>then it still seems to quickly crash when I make small changes.</p>",
        "id": 278432995,
        "sender_full_name": "Jake Levinson",
        "timestamp": 1649541378
    },
    {
        "content": "<p>For example -- I just switched over to that file and it crashed instantly upon opening. Whereas I just spent the last half-hour successfully editing the other file.</p>",
        "id": 278433005,
        "sender_full_name": "Jake Levinson",
        "timestamp": 1649541406
    },
    {
        "content": "<p>I'm on an M1 Macbook Pro with 16 gigs of ram. Prior to trying out this ring theory file, I've had no problem having nine files open at once, with hundreds of lines of code each, and frequently switching between them to work on different parts.</p>",
        "id": 278433068,
        "sender_full_name": "Jake Levinson",
        "timestamp": 1649541504
    },
    {
        "content": "<p>This error message seems very uninformative... I have no idea if it's an <em>actual</em> memory overload, or something else. I'm not even sure how to \"increase the memory consumption threshold\".</p>",
        "id": 278433160,
        "sender_full_name": "Jake Levinson",
        "timestamp": 1649541612
    },
    {
        "content": "<p>have you restarted vscode? if you can send the file, I have the exact same computer and things are fine here, no crashes. those first two lines don't seem to crash my computer</p>",
        "id": 278433169,
        "sender_full_name": "Eric Rodriguez",
        "timestamp": 1649541615
    },
    {
        "content": "<p>is this file you mention editing in the hierarchy to this 90-line file?</p>",
        "id": 278433217,
        "sender_full_name": "Eric Rodriguez",
        "timestamp": 1649541650
    },
    {
        "content": "<p>The folder hierarchy is like this:</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"n\">lean</span><span class=\"bp\">-</span><span class=\"n\">topology</span><span class=\"bp\">/</span>\n  <span class=\"n\">polynomials_scratch.lean</span>  <span class=\"c1\">-- 90-lines, imports ring theory</span>\n  <span class=\"n\">src</span><span class=\"bp\">/</span>\n    <span class=\"n\">dir1</span><span class=\"bp\">/</span> <span class=\"c1\">-- contains various other older things I've written</span>\n    <span class=\"n\">current</span><span class=\"bp\">/</span> <span class=\"c1\">-- contains 9 files totaling 1000-1500 lines, mainly importing data.set.basic</span>\n  <span class=\"n\">_target</span><span class=\"bp\">/</span> <span class=\"c1\">-- leads to mathlib</span>\n</code></pre></div>",
        "id": 278433425,
        "sender_full_name": "Jake Levinson",
        "timestamp": 1649541956
    },
    {
        "content": "<p>The polynomials file is (modulo small edits) posted here: <a href=\"#narrow/stream/217875-Is-there-code-for-X.3F/topic/Working.20with.20polynomial.20factorizations\">https://leanprover.zulipchat.com/#narrow/stream/217875-Is-there-code-for-X.3F/topic/Working.20with.20polynomial.20factorizations</a></p>",
        "id": 278433493,
        "sender_full_name": "Jake Levinson",
        "timestamp": 1649542035
    },
    {
        "content": "<p>Here is the current version:</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kn\">import</span> <span class=\"n\">tactic</span>\n<span class=\"kn\">import</span> <span class=\"n\">ring_theory.polynomial.homogeneous</span>\n<span class=\"kn\">import</span> <span class=\"n\">field_theory.is_alg_closed.basic</span>\n\n<span class=\"kd\">variables</span> <span class=\"o\">{</span><span class=\"n\">K</span> <span class=\"o\">:</span> <span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span> <span class=\"o\">[</span><span class=\"n\">field</span> <span class=\"n\">K</span><span class=\"o\">]</span> <span class=\"o\">[</span><span class=\"n\">is_alg_closed</span> <span class=\"n\">K</span><span class=\"o\">]</span>\n\n<span class=\"kd\">lemma</span> <span class=\"n\">mv_polynomial.is_homogeneous.factor</span>\n  <span class=\"o\">{</span><span class=\"n\">σ</span> <span class=\"o\">:</span> <span class=\"kt\">Type</span><span class=\"o\">}</span> <span class=\"o\">{</span><span class=\"n\">f</span> <span class=\"n\">g</span> <span class=\"o\">:</span> <span class=\"n\">mv_polynomial</span> <span class=\"n\">σ</span> <span class=\"n\">K</span><span class=\"o\">}</span>\n  <span class=\"o\">{</span><span class=\"n\">n</span> <span class=\"o\">:</span> <span class=\"n\">ℕ</span><span class=\"o\">}</span> <span class=\"o\">(</span><span class=\"n\">hg</span> <span class=\"o\">:</span> <span class=\"n\">g.is_homogeneous</span> <span class=\"n\">n</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">hfg</span> <span class=\"o\">:</span> <span class=\"n\">f</span> <span class=\"bp\">∣</span> <span class=\"n\">g</span><span class=\"o\">)</span> <span class=\"o\">:</span>\n<span class=\"n\">f.is_homogeneous</span> <span class=\"o\">(</span><span class=\"n\">f.total_degree</span><span class=\"o\">)</span> <span class=\"o\">:=</span> <span class=\"gr\">sorry</span>\n<span class=\"c1\">-- proof: by Damiano's argument higher up the thread (look at minimum and maximum degree parts of f)</span>\n\n<span class=\"kd\">lemma</span> <span class=\"n\">mv_polynomial.prime_of_linear</span> <span class=\"o\">{</span><span class=\"n\">σ</span> <span class=\"o\">:</span> <span class=\"kt\">Type</span><span class=\"o\">}</span> <span class=\"o\">(</span><span class=\"n\">f</span> <span class=\"o\">:</span> <span class=\"n\">mv_polynomial</span> <span class=\"n\">σ</span> <span class=\"n\">K</span><span class=\"o\">)</span>\n  <span class=\"o\">(</span><span class=\"n\">f_ne_zero</span> <span class=\"o\">:</span> <span class=\"n\">f</span> <span class=\"bp\">≠</span> <span class=\"mi\">0</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">hf</span> <span class=\"o\">:</span> <span class=\"n\">f.is_homogeneous</span> <span class=\"mi\">1</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"n\">prime</span> <span class=\"n\">f</span> <span class=\"o\">:=</span>\n<span class=\"kd\">begin</span>\n  <span class=\"n\">split</span><span class=\"o\">,</span> <span class=\"n\">exact</span> <span class=\"n\">f_ne_zero</span><span class=\"o\">,</span>\n  <span class=\"n\">split</span><span class=\"o\">,</span>\n  <span class=\"o\">{</span> <span class=\"n\">rintro</span> <span class=\"o\">⟨</span><span class=\"n\">g</span><span class=\"o\">,</span> <span class=\"n\">hg</span><span class=\"o\">⟩,</span>\n    <span class=\"k\">have</span> <span class=\"n\">h1</span> <span class=\"o\">:</span> <span class=\"mi\">1</span> <span class=\"bp\">=</span> <span class=\"o\">(</span><span class=\"n\">coe</span> <span class=\"n\">g</span><span class=\"bp\">⁻¹</span><span class=\"o\">)</span> <span class=\"bp\">*</span> <span class=\"n\">f</span><span class=\"o\">,</span>\n      <span class=\"n\">rw</span> <span class=\"o\">[</span><span class=\"bp\">←</span> <span class=\"n\">hg</span><span class=\"o\">,</span> <span class=\"bp\">←</span> <span class=\"n\">units.coe_mul</span><span class=\"o\">],</span> <span class=\"n\">simp</span><span class=\"o\">,</span>\n    <span class=\"k\">have</span> <span class=\"n\">h2</span> <span class=\"o\">:=</span> <span class=\"n\">mv_polynomial.is_homogeneous_one</span> <span class=\"n\">_</span> <span class=\"n\">K</span><span class=\"o\">,</span>\n    <span class=\"k\">have</span> <span class=\"n\">h3</span> <span class=\"o\">:=</span> <span class=\"o\">(</span><span class=\"n\">h2.factor</span> <span class=\"o\">⟨</span><span class=\"n\">_</span><span class=\"o\">,</span> <span class=\"n\">h1</span><span class=\"o\">⟩)</span><span class=\"bp\">.</span><span class=\"n\">mul</span> <span class=\"n\">hf</span><span class=\"o\">,</span>\n    <span class=\"n\">rw</span> <span class=\"n\">h1</span> <span class=\"n\">at</span> <span class=\"n\">h2</span><span class=\"o\">,</span>\n    <span class=\"k\">have</span> <span class=\"n\">h4</span> <span class=\"o\">:=</span> <span class=\"n\">mv_polynomial.is_homogeneous.inj_right</span> <span class=\"n\">h3</span> <span class=\"n\">h2</span> <span class=\"n\">_</span><span class=\"o\">,</span>\n    <span class=\"n\">exact</span> <span class=\"n\">nat.succ_ne_zero</span> <span class=\"n\">_</span> <span class=\"n\">h4</span><span class=\"o\">,</span>\n    <span class=\"n\">rw</span> <span class=\"bp\">←</span> <span class=\"n\">h1</span><span class=\"o\">,</span> <span class=\"n\">exact</span> <span class=\"n\">one_ne_zero</span><span class=\"o\">,</span> <span class=\"o\">},</span>\n\n  <span class=\"gr\">sorry</span><span class=\"o\">,</span>\n<span class=\"kd\">end</span>\n<span class=\"c1\">-- proof: irreducibility (by degree counting) + UFD</span>\n\n<span class=\"kd\">lemma</span> <span class=\"n\">mv_polynomial.has_linear_factor</span>\n  <span class=\"o\">(</span><span class=\"n\">f</span> <span class=\"o\">:</span> <span class=\"n\">mv_polynomial</span> <span class=\"o\">(</span><span class=\"n\">fin</span> <span class=\"mi\">2</span><span class=\"o\">)</span> <span class=\"n\">K</span><span class=\"o\">)</span> <span class=\"o\">{</span><span class=\"n\">n</span> <span class=\"o\">:</span> <span class=\"n\">ℕ</span><span class=\"o\">}</span> <span class=\"o\">(</span><span class=\"n\">hf</span> <span class=\"o\">:</span> <span class=\"n\">f.is_homogeneous</span> <span class=\"n\">n</span><span class=\"o\">)</span> <span class=\"o\">:</span>\n<span class=\"bp\">∃</span> <span class=\"n\">x</span> <span class=\"o\">:</span> <span class=\"n\">mv_polynomial</span> <span class=\"o\">(</span><span class=\"n\">fin</span> <span class=\"mi\">2</span><span class=\"o\">)</span> <span class=\"n\">K</span><span class=\"o\">,</span> <span class=\"n\">x.is_homogeneous</span> <span class=\"mi\">1</span> <span class=\"bp\">∧</span> <span class=\"n\">x</span> <span class=\"bp\">∣</span> <span class=\"n\">f</span> <span class=\"o\">:=</span> <span class=\"gr\">sorry</span>\n<span class=\"c1\">-- proof: possibly annoying since it involves dehomogenizing</span>\n\n<span class=\"kd\">example</span> <span class=\"o\">{</span><span class=\"n\">A</span> <span class=\"n\">B</span> <span class=\"n\">q</span> <span class=\"n\">c</span> <span class=\"o\">:</span> <span class=\"n\">mv_polynomial</span> <span class=\"o\">(</span><span class=\"n\">fin</span> <span class=\"mi\">2</span><span class=\"o\">)</span> <span class=\"n\">K</span><span class=\"o\">}</span> <span class=\"o\">(</span><span class=\"n\">hA</span> <span class=\"o\">:</span> <span class=\"n\">A.is_homogeneous</span> <span class=\"mi\">1</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">hB</span> <span class=\"o\">:</span> <span class=\"n\">B.is_homogeneous</span> <span class=\"mi\">2</span><span class=\"o\">)</span>\n  <span class=\"o\">(</span><span class=\"n\">hq</span> <span class=\"o\">:</span> <span class=\"n\">q.is_homogeneous</span> <span class=\"mi\">2</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">hc</span> <span class=\"o\">:</span> <span class=\"n\">c.is_homogeneous</span> <span class=\"mi\">3</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">H</span> <span class=\"o\">:</span> <span class=\"n\">B</span> <span class=\"bp\">*</span> <span class=\"n\">q</span> <span class=\"bp\">=</span> <span class=\"n\">A</span> <span class=\"bp\">*</span> <span class=\"n\">c</span><span class=\"o\">)</span>\n  <span class=\"o\">(</span><span class=\"n\">q_ne_zero</span> <span class=\"o\">:</span> <span class=\"n\">q</span> <span class=\"bp\">≠</span> <span class=\"mi\">0</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">A_ne_zero</span> <span class=\"o\">:</span> <span class=\"n\">A</span> <span class=\"bp\">≠</span> <span class=\"mi\">0</span><span class=\"o\">)</span> <span class=\"o\">:</span>\n  <span class=\"bp\">∃</span> <span class=\"n\">x</span> <span class=\"o\">:</span> <span class=\"n\">mv_polynomial</span> <span class=\"o\">(</span><span class=\"n\">fin</span> <span class=\"mi\">2</span><span class=\"o\">)</span> <span class=\"n\">K</span><span class=\"o\">,</span> <span class=\"n\">x.is_homogeneous</span> <span class=\"mi\">1</span> <span class=\"bp\">∧</span> <span class=\"n\">x</span> <span class=\"bp\">∣</span> <span class=\"n\">q</span> <span class=\"bp\">∧</span> <span class=\"n\">x</span> <span class=\"bp\">∣</span> <span class=\"n\">c</span> <span class=\"o\">:=</span>\n<span class=\"kd\">begin</span>\n  <span class=\"n\">obtain</span> <span class=\"o\">⟨</span><span class=\"n\">x</span><span class=\"o\">,</span> <span class=\"n\">hx</span><span class=\"o\">,</span> <span class=\"n\">hxq</span><span class=\"o\">⟩</span> <span class=\"o\">:=</span> <span class=\"n\">q.has_linear_factor</span> <span class=\"n\">hq</span><span class=\"o\">,</span>\n  <span class=\"k\">have</span> <span class=\"n\">x_ne_zero</span> <span class=\"o\">:</span> <span class=\"n\">x</span> <span class=\"bp\">≠</span> <span class=\"mi\">0</span> <span class=\"o\">:=</span> <span class=\"n\">ne_zero_of_dvd_ne_zero</span> <span class=\"n\">q_ne_zero</span> <span class=\"n\">hxq</span><span class=\"o\">,</span>\n\n  <span class=\"n\">by_cases</span> <span class=\"n\">hxc</span> <span class=\"o\">:</span> <span class=\"n\">x</span> <span class=\"bp\">∣</span> <span class=\"n\">c</span><span class=\"o\">,</span>\n  <span class=\"o\">{</span> <span class=\"n\">exact</span> <span class=\"o\">⟨</span><span class=\"n\">x</span><span class=\"o\">,</span> <span class=\"n\">hx</span><span class=\"o\">,</span> <span class=\"n\">hxq</span><span class=\"o\">,</span> <span class=\"n\">hxc</span><span class=\"o\">⟩,</span> <span class=\"o\">},</span>\n\n  <span class=\"k\">have</span> <span class=\"n\">hxA</span> <span class=\"o\">:</span> <span class=\"n\">x</span> <span class=\"bp\">∣</span> <span class=\"n\">A</span><span class=\"o\">,</span>\n  <span class=\"o\">{</span> <span class=\"n\">apply</span> <span class=\"o\">((</span><span class=\"n\">x.prime_of_linear</span> <span class=\"n\">x_ne_zero</span> <span class=\"n\">hx</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">dvd_or_dvd</span> <span class=\"n\">_</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">resolve_left</span> <span class=\"n\">hxc</span><span class=\"o\">,</span>\n    <span class=\"n\">rw</span> <span class=\"o\">[</span><span class=\"n\">mul_comm</span><span class=\"o\">,</span> <span class=\"bp\">←</span> <span class=\"n\">H</span><span class=\"o\">],</span>\n    <span class=\"n\">exact</span> <span class=\"n\">hxq.trans</span> <span class=\"o\">(</span><span class=\"n\">dvd_mul_left</span> <span class=\"n\">_</span> <span class=\"n\">_</span><span class=\"o\">),</span> <span class=\"o\">},</span>\n\n  <span class=\"c1\">-- pull out factors</span>\n  <span class=\"n\">obtain</span> <span class=\"o\">⟨</span><span class=\"n\">y</span><span class=\"o\">,</span> <span class=\"n\">hqxy</span><span class=\"o\">⟩</span> <span class=\"o\">:=</span> <span class=\"n\">hxq</span><span class=\"o\">,</span>\n  <span class=\"n\">obtain</span> <span class=\"o\">⟨</span><span class=\"n\">A'</span><span class=\"o\">,</span> <span class=\"n\">hAxA'</span><span class=\"o\">⟩</span> <span class=\"o\">:=</span> <span class=\"n\">hxA</span><span class=\"o\">,</span>\n  <span class=\"k\">have</span> <span class=\"n\">hA'</span> <span class=\"o\">:</span> <span class=\"n\">A'</span> <span class=\"bp\">∣</span> <span class=\"n\">A</span> <span class=\"o\">:=</span> <span class=\"o\">⟨</span><span class=\"n\">x</span><span class=\"o\">,</span> <span class=\"n\">mul_comm</span> <span class=\"n\">x</span> <span class=\"n\">A'</span> <span class=\"bp\">▸</span> <span class=\"n\">hAxA'</span><span class=\"o\">⟩,</span>\n  <span class=\"k\">have</span> <span class=\"n\">A'_ne_zero</span> <span class=\"o\">:</span> <span class=\"n\">A'</span> <span class=\"bp\">≠</span> <span class=\"mi\">0</span> <span class=\"o\">:=</span> <span class=\"n\">ne_zero_of_dvd_ne_zero</span> <span class=\"n\">A_ne_zero</span> <span class=\"n\">hA'</span><span class=\"o\">,</span>\n\n  <span class=\"k\">have</span> <span class=\"n\">H'</span> <span class=\"o\">:</span> <span class=\"n\">B</span> <span class=\"bp\">*</span> <span class=\"n\">y</span> <span class=\"bp\">=</span> <span class=\"n\">A'</span> <span class=\"bp\">*</span> <span class=\"n\">c</span><span class=\"o\">,</span>\n  <span class=\"o\">{</span> <span class=\"n\">rw</span> <span class=\"o\">[</span><span class=\"n\">hAxA'</span><span class=\"o\">,</span> <span class=\"n\">hqxy</span><span class=\"o\">,</span> <span class=\"o\">(</span><span class=\"kd\">by</span> <span class=\"n\">ring</span> <span class=\"o\">:</span> <span class=\"n\">B</span> <span class=\"bp\">*</span> <span class=\"o\">(</span><span class=\"n\">x</span> <span class=\"bp\">*</span> <span class=\"n\">y</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"n\">x</span> <span class=\"bp\">*</span> <span class=\"o\">(</span><span class=\"n\">B</span> <span class=\"bp\">*</span> <span class=\"n\">y</span><span class=\"o\">)),</span> <span class=\"n\">mul_assoc</span><span class=\"o\">]</span> <span class=\"n\">at</span> <span class=\"n\">H</span><span class=\"o\">,</span>\n    <span class=\"n\">apply</span> <span class=\"n\">cancel_monoid_with_zero.mul_left_cancel_of_ne_zero</span> <span class=\"n\">x_ne_zero</span> <span class=\"n\">H</span><span class=\"o\">,</span> <span class=\"o\">},</span>\n\n  <span class=\"c1\">-- now collect final goals</span>\n\n  <span class=\"k\">have</span> <span class=\"n\">hyq</span> <span class=\"o\">:</span> <span class=\"n\">y</span> <span class=\"bp\">∣</span> <span class=\"n\">q</span> <span class=\"o\">:=</span> <span class=\"o\">⟨</span><span class=\"n\">x</span><span class=\"o\">,</span> <span class=\"n\">mul_comm</span> <span class=\"n\">x</span> <span class=\"n\">y</span> <span class=\"bp\">▸</span> <span class=\"n\">hqxy</span><span class=\"o\">⟩,</span>\n\n  <span class=\"k\">have</span> <span class=\"n\">hy</span> <span class=\"o\">:</span> <span class=\"n\">y.is_homogeneous</span> <span class=\"mi\">1</span><span class=\"o\">,</span>\n  <span class=\"o\">{</span> <span class=\"n\">convert</span> <span class=\"n\">hq.factor</span> <span class=\"n\">hyq</span><span class=\"o\">,</span>\n    <span class=\"n\">apply</span> <span class=\"bp\">@</span><span class=\"n\">nat.add_left_cancel</span> <span class=\"mi\">1</span><span class=\"o\">,</span>\n    <span class=\"n\">apply</span> <span class=\"n\">hq.inj_right</span> <span class=\"n\">_</span> <span class=\"n\">q_ne_zero</span><span class=\"o\">,</span>\n    <span class=\"n\">exact</span> <span class=\"o\">(</span><span class=\"n\">hqxy.symm</span> <span class=\"bp\">▸</span> <span class=\"n\">hx.mul</span> <span class=\"o\">(</span><span class=\"n\">hq.factor</span> <span class=\"n\">hyq</span><span class=\"o\">)),</span> <span class=\"o\">},</span>\n\n  <span class=\"k\">have</span> <span class=\"n\">hA''</span> <span class=\"o\">:</span> <span class=\"n\">A'.is_homogeneous</span> <span class=\"mi\">0</span><span class=\"o\">,</span>\n  <span class=\"o\">{</span> <span class=\"n\">convert</span> <span class=\"n\">hA.factor</span> <span class=\"n\">hA'</span><span class=\"o\">,</span>\n    <span class=\"n\">apply</span> <span class=\"bp\">@</span><span class=\"n\">nat.add_left_cancel</span> <span class=\"mi\">1</span><span class=\"o\">,</span>\n    <span class=\"n\">apply</span> <span class=\"n\">hA.inj_right</span> <span class=\"n\">_</span> <span class=\"n\">A_ne_zero</span><span class=\"o\">,</span>\n    <span class=\"n\">exact</span> <span class=\"n\">hAxA'.symm</span> <span class=\"bp\">▸</span> <span class=\"n\">hx.mul</span> <span class=\"o\">(</span><span class=\"n\">hA.factor</span> <span class=\"n\">hA'</span><span class=\"o\">),</span> <span class=\"o\">},</span>\n\n  <span class=\"k\">have</span> <span class=\"n\">A'_inv</span> <span class=\"o\">:</span> <span class=\"n\">mv_polynomial</span> <span class=\"o\">(</span><span class=\"n\">fin</span> <span class=\"mi\">2</span><span class=\"o\">)</span> <span class=\"n\">K</span> <span class=\"o\">:=</span> <span class=\"gr\">sorry</span><span class=\"o\">,</span>\n  <span class=\"k\">have</span> <span class=\"n\">A'_mul</span> <span class=\"o\">:</span> <span class=\"n\">A'_inv</span> <span class=\"bp\">*</span> <span class=\"n\">A'</span> <span class=\"bp\">=</span> <span class=\"mi\">1</span> <span class=\"o\">:=</span> <span class=\"gr\">sorry</span><span class=\"o\">,</span>\n  <span class=\"c1\">-- inverse of a nonzero constant?</span>\n\n  <span class=\"k\">have</span> <span class=\"n\">hyc</span> <span class=\"o\">:</span> <span class=\"n\">y</span> <span class=\"bp\">∣</span> <span class=\"n\">c</span><span class=\"o\">,</span>\n  <span class=\"o\">{</span> <span class=\"k\">have</span> <span class=\"n\">H''</span> <span class=\"o\">:</span> <span class=\"n\">c</span> <span class=\"bp\">=</span> <span class=\"n\">y</span> <span class=\"bp\">*</span> <span class=\"o\">(</span><span class=\"n\">A'_inv</span> <span class=\"bp\">*</span> <span class=\"n\">B</span><span class=\"o\">),</span>\n    <span class=\"n\">symmetry</span><span class=\"o\">,</span>\n    <span class=\"k\">calc</span> <span class=\"n\">y</span> <span class=\"bp\">*</span> <span class=\"o\">(</span><span class=\"n\">A'_inv</span> <span class=\"bp\">*</span> <span class=\"n\">B</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"n\">A'_inv</span> <span class=\"bp\">*</span> <span class=\"o\">(</span><span class=\"n\">B</span> <span class=\"bp\">*</span> <span class=\"n\">y</span><span class=\"o\">)</span>  <span class=\"o\">:</span> <span class=\"kd\">by</span> <span class=\"n\">ring</span>\n                      <span class=\"bp\">...</span> <span class=\"bp\">=</span> <span class=\"n\">A'_inv</span> <span class=\"bp\">*</span> <span class=\"o\">(</span><span class=\"n\">A'</span> <span class=\"bp\">*</span> <span class=\"n\">c</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"kd\">by</span> <span class=\"n\">rw</span> <span class=\"n\">H'</span>\n                      <span class=\"bp\">...</span> <span class=\"bp\">=</span> <span class=\"o\">(</span><span class=\"n\">A'_inv</span> <span class=\"bp\">*</span> <span class=\"n\">A'</span><span class=\"o\">)</span> <span class=\"bp\">*</span> <span class=\"n\">c</span> <span class=\"o\">:</span> <span class=\"kd\">by</span> <span class=\"n\">ring</span>\n                      <span class=\"bp\">...</span> <span class=\"bp\">=</span> <span class=\"mi\">1</span> <span class=\"bp\">*</span> <span class=\"n\">c</span>             <span class=\"o\">:</span> <span class=\"kd\">by</span> <span class=\"n\">rw</span> <span class=\"n\">A'_mul</span>\n                      <span class=\"bp\">...</span> <span class=\"bp\">=</span> <span class=\"n\">c</span>                 <span class=\"o\">:</span> <span class=\"kd\">by</span> <span class=\"n\">ring</span><span class=\"o\">,</span>\n    <span class=\"n\">exact</span> <span class=\"o\">⟨</span><span class=\"n\">_</span><span class=\"o\">,</span> <span class=\"n\">H''</span><span class=\"o\">⟩,</span> <span class=\"o\">},</span>\n\n  <span class=\"n\">exact</span> <span class=\"o\">⟨</span><span class=\"n\">y</span><span class=\"o\">,</span> <span class=\"n\">hy</span><span class=\"o\">,</span> <span class=\"n\">hyq</span><span class=\"o\">,</span> <span class=\"n\">hyc</span><span class=\"o\">⟩,</span>\n<span class=\"kd\">end</span>\n</code></pre></div>",
        "id": 278433499,
        "sender_full_name": "Jake Levinson",
        "timestamp": 1649542057
    },
    {
        "content": "<p>this is a bit excessive, but what happens if you <code>rm -rf _target</code> and then <code>leanproject get-m</code>?</p>",
        "id": 278433631,
        "sender_full_name": "Eric Rodriguez",
        "timestamp": 1649542249
    },
    {
        "content": "<p>I can reproduce the error at this point: I simply can't have both <code>polynomials_scratch.lean</code> and a file from the other directory open at the same time without causing a crash.</p>\n<p>I <em>can</em> have <code>polynomials_scratch.lean</code> open on its own, and it is fairly unstable (crashes fairly frequently, seems to run a bit slowly).</p>\n<p>And, I can work on my other files (all 9 files open at once, jumping around between them) with only occasional problems.</p>",
        "id": 278433643,
        "sender_full_name": "Jake Levinson",
        "timestamp": 1649542279
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"284160\">Eric Rodriguez</span> <a href=\"#narrow/stream/113489-new-members/topic/Stuck.20on.20an.20outdated.20version.20of.20mathlib.3F/near/278433631\">said</a>:</p>\n<blockquote>\n<p>this is a bit excessive, but what happens if you <code>rm -rf _target</code> and then <code>leanproject get-m</code>?</p>\n</blockquote>\n<p>Happy to try it. I imagine this will take a while to re-download and recompile?</p>",
        "id": 278433653,
        "sender_full_name": "Jake Levinson",
        "timestamp": 1649542309
    },
    {
        "content": "<p>it's just a redownload, should be max 5 minutes unless your internet is glacial</p>",
        "id": 278433694,
        "sender_full_name": "Eric Rodriguez",
        "timestamp": 1649542326
    },
    {
        "content": "<p>it's weird that that's the case, because this sort of issue you raise is usually when <code>polynomials_scratch</code> would import something being edited lower down in the hierarchy. in that case, lean would have to recompile everything in-between without using oleans (just keeping it in the memory) which is completely infeasible</p>",
        "id": 278433716,
        "sender_full_name": "Eric Rodriguez",
        "timestamp": 1649542382
    },
    {
        "content": "<p>Right, that makes sense. Certainly I've occasionally encountered that in the other project. But I never touch or edit mathlib files themselves.</p>",
        "id": 278433805,
        "sender_full_name": "Jake Levinson",
        "timestamp": 1649542483
    },
    {
        "content": "<p>OK finished re-downloading. I can have several files from my other project open with no problem.</p>",
        "id": 278433900,
        "sender_full_name": "Jake Levinson",
        "timestamp": 1649542647
    },
    {
        "content": "<p>... but if I open <code>polynomials_scratch</code>, instant crash.</p>",
        "id": 278433908,
        "sender_full_name": "Jake Levinson",
        "timestamp": 1649542668
    },
    {
        "content": "<p>did you restart vscode as well? aa i've never seen this</p>",
        "id": 278434034,
        "sender_full_name": "Eric Rodriguez",
        "timestamp": 1649542846
    },
    {
        "content": "<p>Yes I did. Hmm, I have another file stub from when I tried to use <code>linear_algebra.finite_dimensional</code>, I'll see if that also causes problems. I wonder if my computer is doing something weird with mathlib.</p>",
        "id": 278434050,
        "sender_full_name": "Jake Levinson",
        "timestamp": 1649542922
    },
    {
        "content": "<p>Never mind, that file doesn't have much in it</p>",
        "id": 278434186,
        "sender_full_name": "Jake Levinson",
        "timestamp": 1649543143
    },
    {
        "content": "<p>I think it's worth trying the new <code>leanproject</code> approach just to check if it's something weirdly specific</p>",
        "id": 278434233,
        "sender_full_name": "Eric Rodriguez",
        "timestamp": 1649543178
    },
    {
        "content": "<p>Yeah, good idea. OK.</p>",
        "id": 278434236,
        "sender_full_name": "Jake Levinson",
        "timestamp": 1649543192
    },
    {
        "content": "<p>No, the same problems seem to arise. Very strange. I wonder if this actually <em>is</em> caused by some memory consumption threshold?</p>",
        "id": 278434491,
        "sender_full_name": "Jake Levinson",
        "timestamp": 1649543622
    },
    {
        "content": "<p>I also just went to check if VS Code needed to be updated, but it looks up-to-date.</p>",
        "id": 278434569,
        "sender_full_name": "Jake Levinson",
        "timestamp": 1649543742
    },
    {
        "content": "<p>Are you watching your RAM while going through these attempts?</p>",
        "id": 278434573,
        "sender_full_name": "Arthur Paulino",
        "timestamp": 1649543748
    },
    {
        "content": "<p>I mean, if it is you can up the RAM threshold in the VSCode settings:</p>",
        "id": 278434578,
        "sender_full_name": "Eric Rodriguez",
        "timestamp": 1649543761
    },
    {
        "content": "<p><a href=\"/user_uploads/3121/6NGakPD12aO-FPzKveC9dGuS/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/6NGakPD12aO-FPzKveC9dGuS/image.png\" title=\"image.png\"><img src=\"/user_uploads/3121/6NGakPD12aO-FPzKveC9dGuS/image.png\"></a></div>",
        "id": 278434623,
        "sender_full_name": "Eric Rodriguez",
        "timestamp": 1649543788
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"451983\">Arthur Paulino</span> <a href=\"#narrow/stream/113489-new-members/topic/Stuck.20on.20an.20outdated.20version.20of.20mathlib.3F/near/278434573\">said</a>:</p>\n<blockquote>\n<p>Are you watching your RAM while going through these attempts?</p>\n</blockquote>\n<p>How can I do that?</p>",
        "id": 278434657,
        "sender_full_name": "Jake Levinson",
        "timestamp": 1649543876
    },
    {
        "content": "<p>Activity Monitor</p>",
        "id": 278434695,
        "sender_full_name": "Eric Rodriguez",
        "timestamp": 1649543886
    },
    {
        "content": "<p>OK I increased the memory threshold from 4096 to 12288...</p>",
        "id": 278434779,
        "sender_full_name": "Jake Levinson",
        "timestamp": 1649544017
    },
    {
        "content": "<p>omg that seemed to fix it</p>",
        "id": 278434793,
        "sender_full_name": "Jake Levinson",
        "timestamp": 1649544059
    },
    {
        "content": "<p>Now I can edit both files!</p>",
        "id": 278434800,
        "sender_full_name": "Jake Levinson",
        "timestamp": 1649544079
    },
    {
        "content": "<p>Maybe I really was just running out of memory...? bizarre! Maybe I just had too many Google Chrome tabs open (I noticed that my system was already using a lot of the available memory)</p>",
        "id": 278434847,
        "sender_full_name": "Jake Levinson",
        "timestamp": 1649544133
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"391579\">@Jake Levinson</span> I am not a Mac user but I am certain there's an app that allows you to monitor your memory consumption</p>",
        "id": 278434855,
        "sender_full_name": "Arthur Paulino",
        "timestamp": 1649544165
    },
    {
        "content": "<p>oh awesome! now that it's fixed, I have some instructions for cross-compiling Lean to ARM64, if you want to mess with that:<a href=\"#narrow/stream/113489-new-members/topic/M1.20Macs.3A.20Installing.20the.20Lean.203.20toolchain/near/265390589\">https://leanprover.zulipchat.com/#narrow/stream/113489-new-members/topic/M1.20Macs.3A.20Installing.20the.20Lean.203.20toolchain/near/265390589</a></p>",
        "id": 278435093,
        "sender_full_name": "Eric Rodriguez",
        "timestamp": 1649544597
    },
    {
        "content": "<p>Interesting. Yeah, some of this is possibly still running on Rosetta since that was the installation pathway before. Would this make things faster / more efficient?</p>",
        "id": 278435166,
        "sender_full_name": "Jake Levinson",
        "timestamp": 1649544676
    },
    {
        "content": "<p>I haven't tried, this is actually why I'm curious, I pretty much always just update myself using this script</p>",
        "id": 278435180,
        "sender_full_name": "Eric Rodriguez",
        "timestamp": 1649544716
    },
    {
        "content": "<p>not required, just a curiosity^^</p>",
        "id": 278435222,
        "sender_full_name": "Eric Rodriguez",
        "timestamp": 1649544729
    },
    {
        "content": "<p>note that you need to edit this line in the middle of the script:</p>\n<div class=\"codehilite\" data-code-language=\"Bash\"><pre><span></span><code><span class=\"c1\"># Set this to a local clone of leanprover-community/lean (that you don't mind being messed with!)</span>\n<span class=\"nb\">cd</span> ~/repos/lean\n</code></pre></div>",
        "id": 278435230,
        "sender_full_name": "Eric Rodriguez",
        "timestamp": 1649544782
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"451983\">@Arthur Paulino</span> I think the standard profiler for OSX is \"instruments\". Source: <a href=\"https://stackoverflow.com/a/11445777\">https://stackoverflow.com/a/11445777</a></p>\n<p>possibly a useful future reference</p>",
        "id": 278461703,
        "sender_full_name": "Matias Heikkilä",
        "timestamp": 1649588323
    },
    {
        "content": "<p>If you just want to know how much memory/cpu/power you're using generally, there's Activity Monitor.</p>",
        "id": 278464031,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1649591546
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"284160\">Eric Rodriguez</span> <a href=\"#narrow/stream/113489-new-members/topic/Stuck.20on.20an.20outdated.20version.20of.20mathlib.3F/near/278434034\">said</a>:</p>\n<blockquote>\n<p>did you restart vscode as well? aa i've never seen this</p>\n</blockquote>\n<p>Not sure if this question belongs to this thread, but anyway:<br>\nIs it possible to work with different mathlib versions on the same instance of vscode? </p>\n<p>I just realized that if I open two lean files in different repos (with different mathlib versions), vscode uses the version in the <code>_target</code> dir of the first file.</p>\n<p>Is it \"restarting it\" the only way to get the correct mathlib version loaded?</p>",
        "id": 308663013,
        "sender_full_name": "Pedro Sánchez Terraf",
        "timestamp": 1667937228
    },
    {
        "content": "<p>If you open two vscode windows they the problem should go away</p>",
        "id": 308679694,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1667944230
    },
    {
        "content": "<p>I don't think the extension can handle workspaces with multiple lean versions right now. Even though it probably should be able to handle \"multi-root\" workspaces, it's barely worth investing more effort into niche lean 3 tooling like that when lean 4 is around the ever-nearing corner</p>",
        "id": 308679906,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1667944322
    }
]