[
    {
        "content": "<p>I'm doing the mathematics in lean tutorial. I'd like to see the source code that defines the tactic \"ring\", in the following code:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"kn\">example</span> <span class=\"o\">:</span> <span class=\"o\">(</span><span class=\"n\">c</span> <span class=\"bp\">*</span> <span class=\"n\">b</span><span class=\"o\">)</span> <span class=\"bp\">*</span> <span class=\"n\">a</span> <span class=\"bp\">=</span> <span class=\"n\">b</span> <span class=\"bp\">*</span> <span class=\"o\">(</span><span class=\"n\">a</span> <span class=\"bp\">*</span> <span class=\"n\">c</span><span class=\"o\">)</span> <span class=\"o\">:=</span>\n<span class=\"k\">by</span> <span class=\"n\">ring</span>\n</code></pre></div>\n\n\n<p>I'd like to understand what the ring tactic is doing internally (and similarly for other tactics), so is there a way to quickly look this up?</p>",
        "id": 202284288,
        "sender_full_name": "Chris M",
        "timestamp": 1593419977
    },
    {
        "content": "<p>Look in <code>src/tactic/ring</code> in mathlib</p>",
        "id": 202284442,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1593420074
    },
    {
        "content": "<p>If you're using VS Code, you should be able to right click and go to definition on most tactics.</p>",
        "id": 202285087,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1593420518
    },
    {
        "content": "<p>got it! thanks</p>",
        "id": 202287999,
        "sender_full_name": "Chris M",
        "timestamp": 1593422668
    },
    {
        "content": "<p>Another thing you can do is look at the proof that <code>ring</code> generates. Even without reading the code, by looking at the proof you can get a pretty good idea of how it works. (You can use something like <code>#explode</code> to see the individual proof steps marked up)</p>",
        "id": 202298882,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1593431547
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110049\">Mario Carneiro</span> <a href=\"#narrow/stream/113489-new-members/topic/See.20tactic.20source.20code/near/202298882\">said</a>:</p>\n<blockquote>\n<p>Another thing you can do is look at the proof that <code>ring</code> generates. Even without reading the code, by looking at the proof you can get a pretty good idea of how it works. (You can use something like <code>#explode</code> to see the individual proof steps marked up)</p>\n</blockquote>\n<p>Using <code>#print theoremname</code> you mean? This seems to generate the proof term but I'm not sure, because it's generating terms like <code>tactic.ring.horner</code>, which seem like tactic terms, not an actual proof term. The following code:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"kn\">lemma</span> <span class=\"n\">test</span> <span class=\"o\">:</span> <span class=\"o\">(</span><span class=\"n\">c</span> <span class=\"bp\">*</span> <span class=\"n\">b</span><span class=\"o\">)</span> <span class=\"bp\">*</span> <span class=\"n\">a</span> <span class=\"bp\">=</span> <span class=\"n\">b</span> <span class=\"bp\">*</span> <span class=\"o\">(</span><span class=\"n\">a</span> <span class=\"bp\">*</span> <span class=\"n\">c</span><span class=\"o\">)</span> <span class=\"o\">:=</span>\n<span class=\"k\">by</span> <span class=\"n\">ring</span>\n<span class=\"bp\">#</span><span class=\"kn\">print</span> <span class=\"n\">test</span>\n</code></pre></div>\n\n\n<p>Generates the following output:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"kn\">theorem</span> <span class=\"n\">test</span> <span class=\"o\">:</span> <span class=\"bp\">∀</span> <span class=\"o\">(</span><span class=\"n\">a</span> <span class=\"n\">b</span> <span class=\"n\">c</span> <span class=\"o\">:</span> <span class=\"n\">ℝ</span><span class=\"o\">),</span> <span class=\"n\">c</span> <span class=\"bp\">*</span> <span class=\"n\">b</span> <span class=\"bp\">*</span> <span class=\"n\">a</span> <span class=\"bp\">=</span> <span class=\"n\">b</span> <span class=\"bp\">*</span> <span class=\"o\">(</span><span class=\"n\">a</span> <span class=\"bp\">*</span> <span class=\"n\">c</span><span class=\"o\">)</span> <span class=\"o\">:=</span>\n<span class=\"bp\">λ</span> <span class=\"o\">(</span><span class=\"n\">a</span> <span class=\"n\">b</span> <span class=\"n\">c</span> <span class=\"o\">:</span> <span class=\"n\">ℝ</span><span class=\"o\">),</span>\n  <span class=\"o\">(</span><span class=\"n\">norm_num</span><span class=\"bp\">.</span><span class=\"n\">subst_into_mul</span> <span class=\"o\">(</span><span class=\"n\">c</span> <span class=\"bp\">*</span> <span class=\"n\">b</span><span class=\"o\">)</span> <span class=\"n\">a</span> <span class=\"o\">(</span><span class=\"n\">tactic</span><span class=\"bp\">.</span><span class=\"n\">ring</span><span class=\"bp\">.</span><span class=\"n\">horner</span> <span class=\"o\">(</span><span class=\"n\">tactic</span><span class=\"bp\">.</span><span class=\"n\">ring</span><span class=\"bp\">.</span><span class=\"n\">horner</span> <span class=\"mi\">1</span> <span class=\"n\">b</span> <span class=\"mi\">1</span> <span class=\"mi\">0</span><span class=\"o\">)</span> <span class=\"n\">c</span> <span class=\"mi\">1</span> <span class=\"mi\">0</span><span class=\"o\">)</span>\n     <span class=\"o\">(</span><span class=\"n\">tactic</span><span class=\"bp\">.</span><span class=\"n\">ring</span><span class=\"bp\">.</span><span class=\"n\">horner</span> <span class=\"mi\">1</span> <span class=\"n\">a</span> <span class=\"mi\">1</span> <span class=\"mi\">0</span><span class=\"o\">)</span>\n     <span class=\"o\">(</span><span class=\"n\">tactic</span><span class=\"bp\">.</span><span class=\"n\">ring</span><span class=\"bp\">.</span><span class=\"n\">horner</span> <span class=\"o\">(</span><span class=\"n\">tactic</span><span class=\"bp\">.</span><span class=\"n\">ring</span><span class=\"bp\">.</span><span class=\"n\">horner</span> <span class=\"o\">(</span><span class=\"n\">tactic</span><span class=\"bp\">.</span><span class=\"n\">ring</span><span class=\"bp\">.</span><span class=\"n\">horner</span> <span class=\"mi\">1</span> <span class=\"n\">a</span> <span class=\"mi\">1</span> <span class=\"mi\">0</span><span class=\"o\">)</span> <span class=\"n\">b</span> <span class=\"mi\">1</span> <span class=\"mi\">0</span><span class=\"o\">)</span> <span class=\"n\">c</span> <span class=\"mi\">1</span> <span class=\"mi\">0</span><span class=\"o\">)</span>\n     <span class=\"o\">(</span><span class=\"n\">norm_num</span><span class=\"bp\">.</span><span class=\"n\">subst_into_mul</span> <span class=\"n\">c</span> <span class=\"n\">b</span> <span class=\"o\">(</span><span class=\"n\">tactic</span><span class=\"bp\">.</span><span class=\"n\">ring</span><span class=\"bp\">.</span><span class=\"n\">horner</span> <span class=\"mi\">1</span> <span class=\"n\">c</span> <span class=\"mi\">1</span> <span class=\"mi\">0</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">tactic</span><span class=\"bp\">.</span><span class=\"n\">ring</span><span class=\"bp\">.</span><span class=\"n\">horner</span> <span class=\"mi\">1</span> <span class=\"n\">b</span> <span class=\"mi\">1</span> <span class=\"mi\">0</span><span class=\"o\">)</span>\n        <span class=\"o\">(</span><span class=\"n\">tactic</span><span class=\"bp\">.</span><span class=\"n\">ring</span><span class=\"bp\">.</span><span class=\"n\">horner</span> <span class=\"o\">(</span><span class=\"n\">tactic</span><span class=\"bp\">.</span><span class=\"n\">ring</span><span class=\"bp\">.</span><span class=\"n\">horner</span> <span class=\"mi\">1</span> <span class=\"n\">b</span> <span class=\"mi\">1</span> <span class=\"mi\">0</span><span class=\"o\">)</span> <span class=\"n\">c</span> <span class=\"mi\">1</span> <span class=\"mi\">0</span><span class=\"o\">)</span>\n        <span class=\"o\">(</span><span class=\"n\">tactic</span><span class=\"bp\">.</span><span class=\"n\">ring</span><span class=\"bp\">.</span><span class=\"n\">horner_atom</span> <span class=\"n\">c</span><span class=\"o\">)</span>\n        <span class=\"o\">(</span><span class=\"n\">tactic</span><span class=\"bp\">.</span><span class=\"n\">ring</span><span class=\"bp\">.</span><span class=\"n\">horner_atom</span> <span class=\"n\">b</span><span class=\"o\">)</span>\n        <span class=\"o\">(</span><span class=\"n\">tactic</span><span class=\"bp\">.</span><span class=\"n\">ring</span><span class=\"bp\">.</span><span class=\"n\">horner_mul_const</span> <span class=\"mi\">1</span> <span class=\"n\">c</span> <span class=\"mi\">1</span> <span class=\"mi\">0</span> <span class=\"o\">(</span><span class=\"n\">tactic</span><span class=\"bp\">.</span><span class=\"n\">ring</span><span class=\"bp\">.</span><span class=\"n\">horner</span> <span class=\"mi\">1</span> <span class=\"n\">b</span> <span class=\"mi\">1</span> <span class=\"mi\">0</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">tactic</span><span class=\"bp\">.</span><span class=\"n\">ring</span><span class=\"bp\">.</span><span class=\"n\">horner</span> <span class=\"mi\">1</span> <span class=\"n\">b</span> <span class=\"mi\">1</span> <span class=\"mi\">0</span><span class=\"o\">)</span> <span class=\"mi\">0</span>\n           <span class=\"o\">(</span><span class=\"n\">one_mul</span> <span class=\"o\">(</span><span class=\"n\">tactic</span><span class=\"bp\">.</span><span class=\"n\">ring</span><span class=\"bp\">.</span><span class=\"n\">horner</span> <span class=\"mi\">1</span> <span class=\"n\">b</span> <span class=\"mi\">1</span> <span class=\"mi\">0</span><span class=\"o\">))</span>\n           <span class=\"o\">(</span><span class=\"n\">zero_mul</span> <span class=\"o\">(</span><span class=\"n\">tactic</span><span class=\"bp\">.</span><span class=\"n\">ring</span><span class=\"bp\">.</span><span class=\"n\">horner</span> <span class=\"mi\">1</span> <span class=\"n\">b</span> <span class=\"mi\">1</span> <span class=\"mi\">0</span><span class=\"o\">))))</span>\n     <span class=\"o\">(</span><span class=\"n\">tactic</span><span class=\"bp\">.</span><span class=\"n\">ring</span><span class=\"bp\">.</span><span class=\"n\">horner_atom</span> <span class=\"n\">a</span><span class=\"o\">)</span>\n     <span class=\"o\">(</span><span class=\"n\">tactic</span><span class=\"bp\">.</span><span class=\"n\">ring</span><span class=\"bp\">.</span><span class=\"n\">horner_mul_const</span> <span class=\"o\">(</span><span class=\"n\">tactic</span><span class=\"bp\">.</span><span class=\"n\">ring</span><span class=\"bp\">.</span><span class=\"n\">horner</span> <span class=\"mi\">1</span> <span class=\"n\">b</span> <span class=\"mi\">1</span> <span class=\"mi\">0</span><span class=\"o\">)</span> <span class=\"n\">c</span> <span class=\"mi\">1</span> <span class=\"mi\">0</span> <span class=\"o\">(</span><span class=\"n\">tactic</span><span class=\"bp\">.</span><span class=\"n\">ring</span><span class=\"bp\">.</span><span class=\"n\">horner</span> <span class=\"mi\">1</span> <span class=\"n\">a</span> <span class=\"mi\">1</span> <span class=\"mi\">0</span><span class=\"o\">)</span>\n        <span class=\"o\">(</span><span class=\"n\">tactic</span><span class=\"bp\">.</span><span class=\"n\">ring</span><span class=\"bp\">.</span><span class=\"n\">horner</span> <span class=\"o\">(</span><span class=\"n\">tactic</span><span class=\"bp\">.</span><span class=\"n\">ring</span><span class=\"bp\">.</span><span class=\"n\">horner</span> <span class=\"mi\">1</span> <span class=\"n\">a</span> <span class=\"mi\">1</span> <span class=\"mi\">0</span><span class=\"o\">)</span> <span class=\"n\">b</span> <span class=\"mi\">1</span> <span class=\"mi\">0</span><span class=\"o\">)</span>\n        <span class=\"mi\">0</span>\n        <span class=\"o\">(</span><span class=\"n\">tactic</span><span class=\"bp\">.</span><span class=\"n\">ring</span><span class=\"bp\">.</span><span class=\"n\">horner_mul_const</span> <span class=\"mi\">1</span> <span class=\"n\">b</span> <span class=\"mi\">1</span> <span class=\"mi\">0</span> <span class=\"o\">(</span><span class=\"n\">tactic</span><span class=\"bp\">.</span><span class=\"n\">ring</span><span class=\"bp\">.</span><span class=\"n\">horner</span> <span class=\"mi\">1</span> <span class=\"n\">a</span> <span class=\"mi\">1</span> <span class=\"mi\">0</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">tactic</span><span class=\"bp\">.</span><span class=\"n\">ring</span><span class=\"bp\">.</span><span class=\"n\">horner</span> <span class=\"mi\">1</span> <span class=\"n\">a</span> <span class=\"mi\">1</span> <span class=\"mi\">0</span><span class=\"o\">)</span> <span class=\"mi\">0</span>\n           <span class=\"o\">(</span><span class=\"n\">one_mul</span> <span class=\"o\">(</span><span class=\"n\">tactic</span><span class=\"bp\">.</span><span class=\"n\">ring</span><span class=\"bp\">.</span><span class=\"n\">horner</span> <span class=\"mi\">1</span> <span class=\"n\">a</span> <span class=\"mi\">1</span> <span class=\"mi\">0</span><span class=\"o\">))</span>\n           <span class=\"o\">(</span><span class=\"n\">zero_mul</span> <span class=\"o\">(</span><span class=\"n\">tactic</span><span class=\"bp\">.</span><span class=\"n\">ring</span><span class=\"bp\">.</span><span class=\"n\">horner</span> <span class=\"mi\">1</span> <span class=\"n\">a</span> <span class=\"mi\">1</span> <span class=\"mi\">0</span><span class=\"o\">)))</span>\n        <span class=\"o\">(</span><span class=\"n\">zero_mul</span> <span class=\"o\">(</span><span class=\"n\">tactic</span><span class=\"bp\">.</span><span class=\"n\">ring</span><span class=\"bp\">.</span><span class=\"n\">horner</span> <span class=\"mi\">1</span> <span class=\"n\">a</span> <span class=\"mi\">1</span> <span class=\"mi\">0</span><span class=\"o\">))))</span><span class=\"bp\">.</span><span class=\"n\">trans</span>\n    <span class=\"o\">(</span><span class=\"n\">norm_num</span><span class=\"bp\">.</span><span class=\"n\">subst_into_mul</span> <span class=\"n\">b</span> <span class=\"o\">(</span><span class=\"n\">a</span> <span class=\"bp\">*</span> <span class=\"n\">c</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">tactic</span><span class=\"bp\">.</span><span class=\"n\">ring</span><span class=\"bp\">.</span><span class=\"n\">horner</span> <span class=\"mi\">1</span> <span class=\"n\">b</span> <span class=\"mi\">1</span> <span class=\"mi\">0</span><span class=\"o\">)</span>\n       <span class=\"o\">(</span><span class=\"n\">tactic</span><span class=\"bp\">.</span><span class=\"n\">ring</span><span class=\"bp\">.</span><span class=\"n\">horner</span> <span class=\"o\">(</span><span class=\"n\">tactic</span><span class=\"bp\">.</span><span class=\"n\">ring</span><span class=\"bp\">.</span><span class=\"n\">horner</span> <span class=\"mi\">1</span> <span class=\"n\">a</span> <span class=\"mi\">1</span> <span class=\"mi\">0</span><span class=\"o\">)</span> <span class=\"n\">c</span> <span class=\"mi\">1</span> <span class=\"mi\">0</span><span class=\"o\">)</span>\n       <span class=\"o\">(</span><span class=\"n\">tactic</span><span class=\"bp\">.</span><span class=\"n\">ring</span><span class=\"bp\">.</span><span class=\"n\">horner</span> <span class=\"o\">(</span><span class=\"n\">tactic</span><span class=\"bp\">.</span><span class=\"n\">ring</span><span class=\"bp\">.</span><span class=\"n\">horner</span> <span class=\"o\">(</span><span class=\"n\">tactic</span><span class=\"bp\">.</span><span class=\"n\">ring</span><span class=\"bp\">.</span><span class=\"n\">horner</span> <span class=\"mi\">1</span> <span class=\"n\">a</span> <span class=\"mi\">1</span> <span class=\"mi\">0</span><span class=\"o\">)</span> <span class=\"n\">b</span> <span class=\"mi\">1</span> <span class=\"mi\">0</span><span class=\"o\">)</span> <span class=\"n\">c</span> <span class=\"mi\">1</span> <span class=\"mi\">0</span><span class=\"o\">)</span>\n       <span class=\"o\">(</span><span class=\"n\">tactic</span><span class=\"bp\">.</span><span class=\"n\">ring</span><span class=\"bp\">.</span><span class=\"n\">horner_atom</span> <span class=\"n\">b</span><span class=\"o\">)</span>\n       <span class=\"o\">(</span><span class=\"n\">norm_num</span><span class=\"bp\">.</span><span class=\"n\">subst_into_mul</span> <span class=\"n\">a</span> <span class=\"n\">c</span> <span class=\"o\">(</span><span class=\"n\">tactic</span><span class=\"bp\">.</span><span class=\"n\">ring</span><span class=\"bp\">.</span><span class=\"n\">horner</span> <span class=\"mi\">1</span> <span class=\"n\">a</span> <span class=\"mi\">1</span> <span class=\"mi\">0</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">tactic</span><span class=\"bp\">.</span><span class=\"n\">ring</span><span class=\"bp\">.</span><span class=\"n\">horner</span> <span class=\"mi\">1</span> <span class=\"n\">c</span> <span class=\"mi\">1</span> <span class=\"mi\">0</span><span class=\"o\">)</span>\n          <span class=\"o\">(</span><span class=\"n\">tactic</span><span class=\"bp\">.</span><span class=\"n\">ring</span><span class=\"bp\">.</span><span class=\"n\">horner</span> <span class=\"o\">(</span><span class=\"n\">tactic</span><span class=\"bp\">.</span><span class=\"n\">ring</span><span class=\"bp\">.</span><span class=\"n\">horner</span> <span class=\"mi\">1</span> <span class=\"n\">a</span> <span class=\"mi\">1</span> <span class=\"mi\">0</span><span class=\"o\">)</span> <span class=\"n\">c</span> <span class=\"mi\">1</span> <span class=\"mi\">0</span><span class=\"o\">)</span>\n          <span class=\"o\">(</span><span class=\"n\">tactic</span><span class=\"bp\">.</span><span class=\"n\">ring</span><span class=\"bp\">.</span><span class=\"n\">horner_atom</span> <span class=\"n\">a</span><span class=\"o\">)</span>\n          <span class=\"o\">(</span><span class=\"n\">tactic</span><span class=\"bp\">.</span><span class=\"n\">ring</span><span class=\"bp\">.</span><span class=\"n\">horner_atom</span> <span class=\"n\">c</span><span class=\"o\">)</span>\n          <span class=\"o\">(</span><span class=\"n\">tactic</span><span class=\"bp\">.</span><span class=\"n\">ring</span><span class=\"bp\">.</span><span class=\"n\">horner_const_mul</span> <span class=\"o\">(</span><span class=\"n\">tactic</span><span class=\"bp\">.</span><span class=\"n\">ring</span><span class=\"bp\">.</span><span class=\"n\">horner</span> <span class=\"mi\">1</span> <span class=\"n\">a</span> <span class=\"mi\">1</span> <span class=\"mi\">0</span><span class=\"o\">)</span> <span class=\"mi\">1</span> <span class=\"n\">c</span> <span class=\"mi\">1</span> <span class=\"mi\">0</span> <span class=\"o\">(</span><span class=\"n\">tactic</span><span class=\"bp\">.</span><span class=\"n\">ring</span><span class=\"bp\">.</span><span class=\"n\">horner</span> <span class=\"mi\">1</span> <span class=\"n\">a</span> <span class=\"mi\">1</span> <span class=\"mi\">0</span><span class=\"o\">)</span> <span class=\"mi\">0</span>\n             <span class=\"o\">((</span><span class=\"n\">mul_comm</span> <span class=\"o\">(</span><span class=\"n\">tactic</span><span class=\"bp\">.</span><span class=\"n\">ring</span><span class=\"bp\">.</span><span class=\"n\">horner</span> <span class=\"mi\">1</span> <span class=\"n\">a</span> <span class=\"mi\">1</span> <span class=\"mi\">0</span><span class=\"o\">)</span> <span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">trans</span> <span class=\"o\">(</span><span class=\"n\">one_mul</span> <span class=\"o\">(</span><span class=\"n\">tactic</span><span class=\"bp\">.</span><span class=\"n\">ring</span><span class=\"bp\">.</span><span class=\"n\">horner</span> <span class=\"mi\">1</span> <span class=\"n\">a</span> <span class=\"mi\">1</span> <span class=\"mi\">0</span><span class=\"o\">)))</span>\n             <span class=\"o\">((</span><span class=\"n\">mul_comm</span> <span class=\"o\">(</span><span class=\"n\">tactic</span><span class=\"bp\">.</span><span class=\"n\">ring</span><span class=\"bp\">.</span><span class=\"n\">horner</span> <span class=\"mi\">1</span> <span class=\"n\">a</span> <span class=\"mi\">1</span> <span class=\"mi\">0</span><span class=\"o\">)</span> <span class=\"mi\">0</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">trans</span> <span class=\"o\">(</span><span class=\"n\">zero_mul</span> <span class=\"o\">(</span><span class=\"n\">tactic</span><span class=\"bp\">.</span><span class=\"n\">ring</span><span class=\"bp\">.</span><span class=\"n\">horner</span> <span class=\"mi\">1</span> <span class=\"n\">a</span> <span class=\"mi\">1</span> <span class=\"mi\">0</span><span class=\"o\">)))))</span>\n       <span class=\"o\">(</span><span class=\"n\">tactic</span><span class=\"bp\">.</span><span class=\"n\">ring</span><span class=\"bp\">.</span><span class=\"n\">horner_const_mul</span> <span class=\"o\">(</span><span class=\"n\">tactic</span><span class=\"bp\">.</span><span class=\"n\">ring</span><span class=\"bp\">.</span><span class=\"n\">horner</span> <span class=\"mi\">1</span> <span class=\"n\">b</span> <span class=\"mi\">1</span> <span class=\"mi\">0</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">tactic</span><span class=\"bp\">.</span><span class=\"n\">ring</span><span class=\"bp\">.</span><span class=\"n\">horner</span> <span class=\"mi\">1</span> <span class=\"n\">a</span> <span class=\"mi\">1</span> <span class=\"mi\">0</span><span class=\"o\">)</span> <span class=\"n\">c</span> <span class=\"mi\">1</span> <span class=\"mi\">0</span>\n          <span class=\"o\">(</span><span class=\"n\">tactic</span><span class=\"bp\">.</span><span class=\"n\">ring</span><span class=\"bp\">.</span><span class=\"n\">horner</span> <span class=\"o\">(</span><span class=\"n\">tactic</span><span class=\"bp\">.</span><span class=\"n\">ring</span><span class=\"bp\">.</span><span class=\"n\">horner</span> <span class=\"mi\">1</span> <span class=\"n\">a</span> <span class=\"mi\">1</span> <span class=\"mi\">0</span><span class=\"o\">)</span> <span class=\"n\">b</span> <span class=\"mi\">1</span> <span class=\"mi\">0</span><span class=\"o\">)</span>\n          <span class=\"mi\">0</span>\n          <span class=\"o\">(</span><span class=\"n\">tactic</span><span class=\"bp\">.</span><span class=\"n\">ring</span><span class=\"bp\">.</span><span class=\"n\">horner_mul_const</span> <span class=\"mi\">1</span> <span class=\"n\">b</span> <span class=\"mi\">1</span> <span class=\"mi\">0</span> <span class=\"o\">(</span><span class=\"n\">tactic</span><span class=\"bp\">.</span><span class=\"n\">ring</span><span class=\"bp\">.</span><span class=\"n\">horner</span> <span class=\"mi\">1</span> <span class=\"n\">a</span> <span class=\"mi\">1</span> <span class=\"mi\">0</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">tactic</span><span class=\"bp\">.</span><span class=\"n\">ring</span><span class=\"bp\">.</span><span class=\"n\">horner</span> <span class=\"mi\">1</span> <span class=\"n\">a</span> <span class=\"mi\">1</span> <span class=\"mi\">0</span><span class=\"o\">)</span> <span class=\"mi\">0</span>\n             <span class=\"o\">(</span><span class=\"n\">one_mul</span> <span class=\"o\">(</span><span class=\"n\">tactic</span><span class=\"bp\">.</span><span class=\"n\">ring</span><span class=\"bp\">.</span><span class=\"n\">horner</span> <span class=\"mi\">1</span> <span class=\"n\">a</span> <span class=\"mi\">1</span> <span class=\"mi\">0</span><span class=\"o\">))</span>\n             <span class=\"o\">(</span><span class=\"n\">zero_mul</span> <span class=\"o\">(</span><span class=\"n\">tactic</span><span class=\"bp\">.</span><span class=\"n\">ring</span><span class=\"bp\">.</span><span class=\"n\">horner</span> <span class=\"mi\">1</span> <span class=\"n\">a</span> <span class=\"mi\">1</span> <span class=\"mi\">0</span><span class=\"o\">)))</span>\n          <span class=\"o\">((</span><span class=\"n\">mul_comm</span> <span class=\"o\">(</span><span class=\"n\">tactic</span><span class=\"bp\">.</span><span class=\"n\">ring</span><span class=\"bp\">.</span><span class=\"n\">horner</span> <span class=\"mi\">1</span> <span class=\"n\">b</span> <span class=\"mi\">1</span> <span class=\"mi\">0</span><span class=\"o\">)</span> <span class=\"mi\">0</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">trans</span> <span class=\"o\">(</span><span class=\"n\">zero_mul</span> <span class=\"o\">(</span><span class=\"n\">tactic</span><span class=\"bp\">.</span><span class=\"n\">ring</span><span class=\"bp\">.</span><span class=\"n\">horner</span> <span class=\"mi\">1</span> <span class=\"n\">b</span> <span class=\"mi\">1</span> <span class=\"mi\">0</span><span class=\"o\">)))))</span><span class=\"bp\">.</span><span class=\"n\">symm</span>\n</code></pre></div>\n\n\n<p>Is this something you would read and understand the point of?</p>",
        "id": 202323204,
        "sender_full_name": "Chris M",
        "timestamp": 1593443117
    },
    {
        "content": "<p>That's why I suggested <code>#explode</code>, it will show you step by step what is going on</p>",
        "id": 202325712,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1593444133
    },
    {
        "content": "<p><code>tactic.ring.horner</code> is an actual term, you can look at the definition which is something like <code>a * x ^ n +  b</code></p>",
        "id": 202325833,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1593444185
    },
    {
        "content": "<p>I think you can add a <code>notation</code> for <code>tactic.ring.horner</code> to make it a bit nicer to look at</p>",
        "id": 202326042,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1593444257
    },
    {
        "content": "<div class=\"codehilite\"><pre><span></span><code><span class=\"kn\">import</span> <span class=\"n\">tactic</span>\n<span class=\"kn\">variables</span> <span class=\"o\">(</span><span class=\"n\">a</span> <span class=\"n\">b</span> <span class=\"n\">c</span> <span class=\"o\">:</span> <span class=\"bp\">ℤ</span><span class=\"o\">)</span>\n<span class=\"kn\">notation</span> <span class=\"bp\">`</span><span class=\"o\">[</span><span class=\"bp\">`</span> <span class=\"n\">a</span> <span class=\"bp\">`</span> <span class=\"bp\">*</span> <span class=\"bp\">`</span> <span class=\"n\">b</span> <span class=\"bp\">`^`</span> <span class=\"n\">c</span> <span class=\"bp\">`</span> <span class=\"bp\">+</span> <span class=\"bp\">`</span> <span class=\"n\">d</span> <span class=\"bp\">`</span><span class=\"o\">]</span><span class=\"bp\">`</span> <span class=\"o\">:=</span> <span class=\"n\">tactic</span><span class=\"bp\">.</span><span class=\"n\">ring</span><span class=\"bp\">.</span><span class=\"n\">horner</span> <span class=\"n\">a</span> <span class=\"n\">b</span> <span class=\"n\">c</span> <span class=\"n\">d</span>\n<span class=\"kn\">lemma</span> <span class=\"n\">test</span> <span class=\"o\">:</span> <span class=\"o\">(</span><span class=\"n\">c</span> <span class=\"bp\">*</span> <span class=\"n\">b</span><span class=\"o\">)</span> <span class=\"bp\">*</span> <span class=\"n\">a</span> <span class=\"bp\">=</span> <span class=\"n\">b</span> <span class=\"bp\">*</span> <span class=\"o\">(</span><span class=\"n\">a</span> <span class=\"bp\">*</span> <span class=\"n\">c</span><span class=\"o\">)</span> <span class=\"o\">:=</span>\n<span class=\"k\">by</span> <span class=\"n\">ring</span>\n<span class=\"bp\">#</span><span class=\"kn\">print</span> <span class=\"n\">test</span>\n<span class=\"bp\">#</span><span class=\"n\">explode</span> <span class=\"n\">test</span>\n</code></pre></div>",
        "id": 202326437,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1593444439
    },
    {
        "content": "<blockquote>\n<p>Is this something you would read and understand the point of?</p>\n</blockquote>\n<p>No -- tactics are not designed to make human-readable proofs.</p>",
        "id": 202340609,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1593450740
    },
    {
        "content": "<p>this is why you should avoid using tactics to construct data --- the definition of a piece of data will get read by a human in the middle of a proof</p>",
        "id": 202343425,
        "sender_full_name": "Jalex Stark",
        "timestamp": 1593451960
    }
]