[
    {
        "content": "<p>Hi everyone! I'm trying to do a tactic proof that ends with a very long proposition that should simplify to false. Rather than going through it manually, I'm trying to use simp, finish, norm_num, etc. The problem is that the window with the goal state just goes to \"updating\" indefinitely. Have I reached the limit of what these tactics can do, or am I doing something wrong? Thanks!</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"kn\">import</span> <span class=\"n\">init</span><span class=\"bp\">.</span><span class=\"n\">data</span><span class=\"bp\">.</span><span class=\"n\">nat</span><span class=\"bp\">.</span><span class=\"n\">basic</span>\n<span class=\"kn\">import</span> <span class=\"n\">init</span><span class=\"bp\">.</span><span class=\"n\">algebra</span><span class=\"bp\">.</span><span class=\"n\">ring</span>\n<span class=\"kn\">import</span> <span class=\"n\">init</span><span class=\"bp\">.</span><span class=\"n\">algebra</span><span class=\"bp\">.</span><span class=\"n\">norm_num</span>\n<span class=\"kn\">import</span> <span class=\"n\">tactic</span>\n<span class=\"kn\">set_option</span> <span class=\"n\">class</span><span class=\"bp\">.</span><span class=\"n\">instance_max_depth</span> <span class=\"mi\">15000000</span>\n\n<span class=\"n\">def</span> <span class=\"n\">myIsEven</span> <span class=\"o\">(</span><span class=\"n\">n</span> <span class=\"o\">:</span> <span class=\"bp\">ℕ</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"kt\">Prop</span> <span class=\"o\">:=</span> <span class=\"n\">n</span> <span class=\"bp\">=</span> <span class=\"o\">(</span><span class=\"n\">n</span><span class=\"bp\">/</span><span class=\"mi\">2</span><span class=\"o\">)</span><span class=\"bp\">*</span><span class=\"mi\">2</span>\n<span class=\"n\">def</span> <span class=\"n\">myIsOdd</span> <span class=\"o\">(</span><span class=\"n\">n</span> <span class=\"o\">:</span> <span class=\"bp\">ℕ</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"kt\">Prop</span> <span class=\"o\">:=</span> <span class=\"bp\">¬</span> <span class=\"o\">(</span><span class=\"n\">n</span> <span class=\"bp\">=</span> <span class=\"o\">(</span><span class=\"n\">n</span><span class=\"bp\">/</span><span class=\"mi\">2</span><span class=\"o\">)</span><span class=\"bp\">*</span><span class=\"mi\">2</span><span class=\"o\">)</span>\n\n<span class=\"c1\">--Alice only sees r and Bob only sees c. The strategy isn&#39;t (r,c) → (...) but two maps, r→(r1 r2 r3) and c → (c1 c2 c3)</span>\n<span class=\"c1\">--I&#39;m using 0 and 1 instead of Green and Red as the two options to fill squares. This makes checking parity of strategies easier</span>\n\n<span class=\"n\">def</span> <span class=\"n\">checkStrategyrc</span> <span class=\"o\">(</span><span class=\"n\">r</span> <span class=\"n\">c</span> <span class=\"o\">:</span> <span class=\"bp\">ℕ</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">strategy</span> <span class=\"o\">:</span> <span class=\"o\">((</span><span class=\"bp\">ℕ</span> <span class=\"bp\">→</span> <span class=\"bp\">ℕ</span> <span class=\"bp\">×</span> <span class=\"bp\">ℕ</span> <span class=\"bp\">×</span> <span class=\"bp\">ℕ</span><span class=\"o\">)</span> <span class=\"bp\">×</span> <span class=\"o\">(</span><span class=\"bp\">ℕ</span> <span class=\"bp\">→</span> <span class=\"bp\">ℕ</span> <span class=\"bp\">×</span> <span class=\"bp\">ℕ</span> <span class=\"bp\">×</span> <span class=\"bp\">ℕ</span><span class=\"o\">)))</span> <span class=\"o\">:</span> <span class=\"kt\">Prop</span> <span class=\"o\">:=</span>\n        <span class=\"c1\">--functionalize this with lists.</span>\n        <span class=\"k\">let</span> <span class=\"n\">r1</span> <span class=\"o\">:=</span> <span class=\"o\">(</span><span class=\"n\">strategy</span><span class=\"bp\">.</span><span class=\"mi\">1</span> <span class=\"n\">r</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"mi\">1</span><span class=\"o\">,</span>\n        <span class=\"n\">r2</span> <span class=\"o\">:=</span> <span class=\"o\">(</span><span class=\"n\">strategy</span><span class=\"bp\">.</span><span class=\"mi\">1</span> <span class=\"n\">r</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"mi\">2</span><span class=\"bp\">.</span><span class=\"mi\">1</span><span class=\"o\">,</span>\n        <span class=\"n\">r3</span> <span class=\"o\">:=</span> <span class=\"o\">(</span><span class=\"n\">strategy</span><span class=\"bp\">.</span><span class=\"mi\">1</span> <span class=\"n\">r</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"mi\">2</span><span class=\"bp\">.</span><span class=\"mi\">2</span><span class=\"o\">,</span>\n        <span class=\"n\">c1</span> <span class=\"o\">:=</span> <span class=\"o\">(</span><span class=\"n\">strategy</span><span class=\"bp\">.</span><span class=\"mi\">2</span> <span class=\"n\">c</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"mi\">1</span><span class=\"o\">,</span>\n        <span class=\"n\">c2</span> <span class=\"o\">:=</span> <span class=\"o\">(</span><span class=\"n\">strategy</span><span class=\"bp\">.</span><span class=\"mi\">2</span> <span class=\"n\">c</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"mi\">2</span><span class=\"bp\">.</span><span class=\"mi\">1</span><span class=\"o\">,</span>\n        <span class=\"n\">c3</span> <span class=\"o\">:=</span> <span class=\"o\">(</span><span class=\"n\">strategy</span><span class=\"bp\">.</span><span class=\"mi\">2</span> <span class=\"n\">c</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"mi\">2</span><span class=\"bp\">.</span><span class=\"mi\">2</span>\n\n        <span class=\"k\">in</span> <span class=\"n\">myIsEven</span><span class=\"o\">(</span><span class=\"n\">r1</span> <span class=\"bp\">+</span> <span class=\"n\">r2</span> <span class=\"bp\">+</span> <span class=\"n\">r3</span><span class=\"o\">)</span> <span class=\"bp\">∧</span> <span class=\"n\">myIsOdd</span><span class=\"o\">(</span><span class=\"n\">c1</span> <span class=\"bp\">+</span> <span class=\"n\">c2</span> <span class=\"bp\">+</span> <span class=\"n\">c3</span><span class=\"o\">)</span> <span class=\"bp\">∧</span>\n        <span class=\"o\">((</span><span class=\"n\">r</span> <span class=\"bp\">=</span> <span class=\"mi\">1</span> <span class=\"bp\">∧</span> <span class=\"n\">c</span> <span class=\"bp\">=</span> <span class=\"mi\">1</span> <span class=\"bp\">∧</span> <span class=\"n\">r1</span> <span class=\"bp\">=</span> <span class=\"n\">c1</span><span class=\"o\">)</span> <span class=\"bp\">∨</span> <span class=\"o\">(</span><span class=\"n\">r</span> <span class=\"bp\">=</span> <span class=\"mi\">1</span> <span class=\"bp\">∧</span> <span class=\"n\">c</span> <span class=\"bp\">=</span> <span class=\"mi\">2</span> <span class=\"bp\">∧</span> <span class=\"n\">r2</span> <span class=\"bp\">=</span> <span class=\"n\">c1</span><span class=\"o\">)</span> <span class=\"bp\">∨</span> <span class=\"o\">(</span><span class=\"n\">r</span> <span class=\"bp\">=</span> <span class=\"mi\">1</span> <span class=\"bp\">∧</span> <span class=\"n\">c</span> <span class=\"bp\">=</span> <span class=\"mi\">3</span> <span class=\"bp\">∧</span> <span class=\"n\">r3</span> <span class=\"bp\">=</span> <span class=\"n\">c1</span><span class=\"o\">)</span>\n        <span class=\"bp\">∨</span><span class=\"o\">(</span><span class=\"n\">r</span> <span class=\"bp\">=</span> <span class=\"mi\">2</span> <span class=\"bp\">∧</span> <span class=\"n\">c</span> <span class=\"bp\">=</span> <span class=\"mi\">1</span> <span class=\"bp\">∧</span> <span class=\"n\">r1</span> <span class=\"bp\">=</span> <span class=\"n\">c2</span><span class=\"o\">)</span> <span class=\"bp\">∨</span> <span class=\"o\">(</span><span class=\"n\">r</span> <span class=\"bp\">=</span> <span class=\"mi\">2</span> <span class=\"bp\">∧</span> <span class=\"n\">c</span> <span class=\"bp\">=</span> <span class=\"mi\">2</span> <span class=\"bp\">∧</span> <span class=\"n\">r2</span> <span class=\"bp\">=</span> <span class=\"n\">c2</span><span class=\"o\">)</span> <span class=\"bp\">∨</span> <span class=\"o\">(</span><span class=\"n\">r</span> <span class=\"bp\">=</span> <span class=\"mi\">2</span> <span class=\"bp\">∧</span> <span class=\"n\">c</span> <span class=\"bp\">=</span> <span class=\"mi\">3</span> <span class=\"bp\">∧</span> <span class=\"n\">r3</span> <span class=\"bp\">=</span> <span class=\"n\">c2</span><span class=\"o\">)</span>\n        <span class=\"bp\">∨</span><span class=\"o\">(</span><span class=\"n\">r</span> <span class=\"bp\">=</span> <span class=\"mi\">3</span> <span class=\"bp\">∧</span> <span class=\"n\">c</span> <span class=\"bp\">=</span> <span class=\"mi\">1</span> <span class=\"bp\">∧</span> <span class=\"n\">r1</span> <span class=\"bp\">=</span> <span class=\"n\">c3</span><span class=\"o\">)</span> <span class=\"bp\">∨</span> <span class=\"o\">(</span><span class=\"n\">r</span> <span class=\"bp\">=</span> <span class=\"mi\">3</span> <span class=\"bp\">∧</span> <span class=\"n\">c</span> <span class=\"bp\">=</span> <span class=\"mi\">2</span> <span class=\"bp\">∧</span> <span class=\"n\">r2</span> <span class=\"bp\">=</span> <span class=\"n\">c3</span><span class=\"o\">)</span> <span class=\"bp\">∨</span> <span class=\"o\">(</span><span class=\"n\">r</span> <span class=\"bp\">=</span> <span class=\"mi\">3</span> <span class=\"bp\">∧</span> <span class=\"n\">c</span> <span class=\"bp\">=</span> <span class=\"mi\">3</span> <span class=\"bp\">∧</span> <span class=\"n\">r3</span> <span class=\"bp\">=</span> <span class=\"n\">c3</span><span class=\"o\">))</span>\n\n<span class=\"c1\">--checks all three conditions are met for the strategy</span>\n<span class=\"n\">def</span> <span class=\"n\">checkStrategy</span> <span class=\"o\">(</span><span class=\"n\">strategy</span> <span class=\"o\">:</span> <span class=\"o\">((</span><span class=\"bp\">ℕ</span> <span class=\"bp\">→</span> <span class=\"bp\">ℕ</span> <span class=\"bp\">×</span> <span class=\"bp\">ℕ</span> <span class=\"bp\">×</span> <span class=\"bp\">ℕ</span><span class=\"o\">)</span> <span class=\"bp\">×</span> <span class=\"o\">(</span><span class=\"bp\">ℕ</span> <span class=\"bp\">→</span> <span class=\"bp\">ℕ</span> <span class=\"bp\">×</span> <span class=\"bp\">ℕ</span> <span class=\"bp\">×</span> <span class=\"bp\">ℕ</span><span class=\"o\">)))</span> <span class=\"o\">:</span> <span class=\"kt\">Prop</span> <span class=\"o\">:=</span>\n    <span class=\"o\">(</span><span class=\"n\">checkStrategyrc</span> <span class=\"mi\">1</span> <span class=\"mi\">1</span> <span class=\"n\">strategy</span><span class=\"o\">)</span> <span class=\"bp\">∧</span> <span class=\"o\">(</span><span class=\"n\">checkStrategyrc</span> <span class=\"mi\">1</span> <span class=\"mi\">2</span> <span class=\"n\">strategy</span><span class=\"o\">)</span> <span class=\"bp\">∧</span> <span class=\"o\">(</span><span class=\"n\">checkStrategyrc</span> <span class=\"mi\">1</span> <span class=\"mi\">3</span> <span class=\"n\">strategy</span><span class=\"o\">)</span> <span class=\"bp\">∧</span>\n    <span class=\"o\">(</span><span class=\"n\">checkStrategyrc</span> <span class=\"mi\">2</span> <span class=\"mi\">1</span> <span class=\"n\">strategy</span><span class=\"o\">)</span> <span class=\"bp\">∧</span> <span class=\"o\">(</span><span class=\"n\">checkStrategyrc</span> <span class=\"mi\">2</span> <span class=\"mi\">2</span> <span class=\"n\">strategy</span><span class=\"o\">)</span> <span class=\"bp\">∧</span> <span class=\"o\">(</span><span class=\"n\">checkStrategyrc</span> <span class=\"mi\">2</span> <span class=\"mi\">3</span> <span class=\"n\">strategy</span><span class=\"o\">)</span> <span class=\"bp\">∧</span>\n    <span class=\"o\">(</span><span class=\"n\">checkStrategyrc</span> <span class=\"mi\">3</span> <span class=\"mi\">1</span> <span class=\"n\">strategy</span><span class=\"o\">)</span> <span class=\"bp\">∧</span> <span class=\"o\">(</span><span class=\"n\">checkStrategyrc</span> <span class=\"mi\">3</span> <span class=\"mi\">2</span> <span class=\"n\">strategy</span><span class=\"o\">)</span> <span class=\"bp\">∧</span> <span class=\"o\">(</span><span class=\"n\">checkStrategyrc</span> <span class=\"mi\">3</span> <span class=\"mi\">3</span> <span class=\"n\">strategy</span><span class=\"o\">)</span>\n\n<span class=\"c1\">--someone on Zulip said to try putting this not directly after the import statements. This seems to have helped</span>\n<span class=\"n\">open_locale</span> <span class=\"n\">classical</span>\n<span class=\"c1\">--given a strategy, we can&#39;t have it satisfy all the conditions</span>\n<span class=\"kn\">theorem</span> <span class=\"n\">noStrategy2</span> <span class=\"o\">(</span><span class=\"n\">strategy</span> <span class=\"o\">:</span> <span class=\"o\">((</span><span class=\"bp\">ℕ</span> <span class=\"bp\">→</span> <span class=\"bp\">ℕ</span> <span class=\"bp\">×</span> <span class=\"bp\">ℕ</span> <span class=\"bp\">×</span> <span class=\"bp\">ℕ</span><span class=\"o\">)</span> <span class=\"bp\">×</span> <span class=\"o\">(</span><span class=\"bp\">ℕ</span> <span class=\"bp\">→</span> <span class=\"bp\">ℕ</span> <span class=\"bp\">×</span> <span class=\"bp\">ℕ</span> <span class=\"bp\">×</span> <span class=\"bp\">ℕ</span><span class=\"o\">)))</span> <span class=\"o\">:</span> <span class=\"bp\">¬</span> <span class=\"o\">(</span><span class=\"n\">checkStrategy</span> <span class=\"o\">(</span><span class=\"n\">strategy</span><span class=\"o\">))</span> <span class=\"o\">:=</span>\n<span class=\"k\">begin</span>\n<span class=\"n\">intro</span> <span class=\"n\">s</span><span class=\"o\">,</span>\n<span class=\"n\">rw</span> <span class=\"n\">checkStrategy</span> <span class=\"n\">at</span> <span class=\"n\">s</span><span class=\"o\">,</span>\n<span class=\"n\">repeat</span> <span class=\"o\">{</span><span class=\"n\">rw</span> <span class=\"n\">checkStrategyrc</span> <span class=\"n\">at</span> <span class=\"n\">s</span><span class=\"o\">},</span>\n<span class=\"n\">simp</span> <span class=\"n\">at</span> <span class=\"n\">s</span><span class=\"o\">,</span>\n<span class=\"n\">revert</span> <span class=\"n\">s</span><span class=\"o\">,</span>\n<span class=\"kn\">end</span>\n</pre></div>",
        "id": 188245630,
        "sender_full_name": "ROCKY KAMEN-RUBIO",
        "timestamp": 1581713682
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"261068\">@ROCKY KAMEN-RUBIO</span> Pro tip: If you wrap your code in</p>\n<div class=\"codehilite\"><pre><span></span>```lean\ncode goes here\n```\n</pre></div>\n\n\n<p>then you'll get pretty formatting with syntax highlighting.</p>",
        "id": 188245876,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1581713849
    },
    {
        "content": "<p>Thank you!!! I was trying to figure out how to do that.</p>",
        "id": 188246030,
        "sender_full_name": "ROCKY KAMEN-RUBIO",
        "timestamp": 1581713976
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"261068\">@ROCKY KAMEN-RUBIO</span> Instead of <code>repeat { rw foobar at s }</code>, you could do <code>simp only [foobar] at s</code>.</p>",
        "id": 188246301,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1581714157
    },
    {
        "content": "<p>I would also simp <code>myIsEven</code> and <code>myIsOdd</code> away.</p>",
        "id": 188246322,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1581714177
    },
    {
        "content": "<p>Be sure to use <code>simp only</code>, because without the <code>only</code> Lean might try lots of other stuff as well.</p>",
        "id": 188246341,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1581714198
    },
    {
        "content": "<p>In fact, you could even use <code>dsimp only</code>.</p>",
        "id": 188246360,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1581714214
    },
    {
        "content": "<p>After that, I would try feeding it to <code>tauto</code>.</p>",
        "id": 188246384,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1581714236
    },
    {
        "content": "<p>But really, here an external solver would be very helpful. Some people are working on this, but atm it isn't easy to use.</p>",
        "id": 188246479,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1581714270
    },
    {
        "content": "<p><code>dsimp only </code> is giving me a \"failed to simplify state\" error, and  <code> tauto </code> is updating forever.</p>",
        "id": 188247800,
        "sender_full_name": "ROCKY KAMEN-RUBIO",
        "timestamp": 1581715058
    },
    {
        "content": "<p>Setting the class instance max depth to such a high value might well cause timeout problems. Why are you changing the max depth at all?</p>",
        "id": 188248110,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1581715236
    },
    {
        "content": "<p>Actually you don't even seem to be using any typeclasses :-)</p>",
        "id": 188248194,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1581715307
    },
    {
        "content": "<p>I was getting class instance max depth exceeded errors so I increased the max depth. I'm still pretty new to lean so I don't fully understand the best practices. Any suggestions would be very much appreciated!</p>",
        "id": 188248591,
        "sender_full_name": "ROCKY KAMEN-RUBIO",
        "timestamp": 1581715575
    },
    {
        "content": "<p>I'm a bit confused by this because your code doesn't have any typeclasses in.</p>",
        "id": 188248629,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1581715614
    },
    {
        "content": "<p>What's the human-readable argument that proves this theorem?</p>",
        "id": 188248696,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1581715670
    },
    {
        "content": "<div class=\"codehilite\"><pre><span></span><span class=\"kn\">theorem</span> <span class=\"n\">noStrategy2</span> <span class=\"o\">(</span><span class=\"n\">strategy</span> <span class=\"o\">:</span> <span class=\"o\">((</span><span class=\"bp\">ℕ</span> <span class=\"bp\">→</span> <span class=\"bp\">ℕ</span> <span class=\"bp\">×</span> <span class=\"bp\">ℕ</span> <span class=\"bp\">×</span> <span class=\"bp\">ℕ</span><span class=\"o\">)</span> <span class=\"bp\">×</span> <span class=\"o\">(</span><span class=\"bp\">ℕ</span> <span class=\"bp\">→</span> <span class=\"bp\">ℕ</span> <span class=\"bp\">×</span> <span class=\"bp\">ℕ</span> <span class=\"bp\">×</span> <span class=\"bp\">ℕ</span><span class=\"o\">)))</span> <span class=\"o\">:</span> <span class=\"bp\">¬</span> <span class=\"o\">(</span><span class=\"n\">checkStrategy</span> <span class=\"o\">(</span><span class=\"n\">strategy</span><span class=\"o\">))</span> <span class=\"o\">:=</span>\n<span class=\"k\">begin</span>\n<span class=\"n\">intro</span> <span class=\"n\">s</span><span class=\"o\">,</span>\n<span class=\"n\">rw</span> <span class=\"n\">checkStrategy</span> <span class=\"n\">at</span> <span class=\"n\">s</span><span class=\"o\">,</span>\n<span class=\"n\">repeat</span> <span class=\"o\">{</span><span class=\"n\">rw</span> <span class=\"n\">checkStrategyrc</span> <span class=\"n\">at</span> <span class=\"n\">s</span><span class=\"o\">},</span>\n<span class=\"n\">simp</span> <span class=\"n\">at</span> <span class=\"n\">s</span><span class=\"o\">,</span>\n<span class=\"n\">revert</span> <span class=\"n\">s</span><span class=\"o\">,</span>\n<span class=\"n\">unfold</span> <span class=\"n\">myIsEven</span><span class=\"o\">,</span>\n<span class=\"n\">unfold</span> <span class=\"n\">myIsOdd</span><span class=\"o\">,</span>\n<span class=\"n\">rw</span> <span class=\"o\">(</span><span class=\"k\">show</span> <span class=\"mi\">1</span> <span class=\"bp\">=</span> <span class=\"mi\">2</span> <span class=\"bp\">↔</span> <span class=\"n\">false</span><span class=\"o\">,</span> <span class=\"k\">by</span> <span class=\"n\">norm_num</span><span class=\"o\">),</span>\n<span class=\"n\">rw</span> <span class=\"o\">(</span><span class=\"k\">show</span> <span class=\"mi\">2</span> <span class=\"bp\">=</span> <span class=\"mi\">1</span> <span class=\"bp\">↔</span> <span class=\"n\">false</span><span class=\"o\">,</span> <span class=\"k\">by</span> <span class=\"n\">norm_num</span><span class=\"o\">),</span>\n<span class=\"n\">rw</span> <span class=\"o\">(</span><span class=\"k\">show</span> <span class=\"mi\">3</span> <span class=\"bp\">=</span> <span class=\"mi\">1</span> <span class=\"bp\">↔</span> <span class=\"n\">false</span><span class=\"o\">,</span> <span class=\"k\">by</span> <span class=\"n\">norm_num</span><span class=\"o\">),</span>\n<span class=\"n\">rw</span> <span class=\"o\">(</span><span class=\"k\">show</span> <span class=\"mi\">1</span> <span class=\"bp\">=</span> <span class=\"mi\">3</span> <span class=\"bp\">↔</span> <span class=\"n\">false</span><span class=\"o\">,</span> <span class=\"k\">by</span> <span class=\"n\">norm_num</span><span class=\"o\">),</span>\n<span class=\"n\">rw</span> <span class=\"o\">(</span><span class=\"k\">show</span> <span class=\"mi\">3</span> <span class=\"bp\">=</span> <span class=\"mi\">2</span> <span class=\"bp\">↔</span> <span class=\"n\">false</span><span class=\"o\">,</span> <span class=\"k\">by</span> <span class=\"n\">norm_num</span><span class=\"o\">),</span>\n<span class=\"n\">rw</span> <span class=\"o\">(</span><span class=\"k\">show</span> <span class=\"mi\">2</span> <span class=\"bp\">=</span> <span class=\"mi\">3</span> <span class=\"bp\">↔</span> <span class=\"n\">false</span><span class=\"o\">,</span> <span class=\"k\">by</span> <span class=\"n\">norm_num</span><span class=\"o\">),</span>\n<span class=\"n\">simp</span> <span class=\"n\">only</span> <span class=\"o\">[</span><span class=\"n\">false_and</span><span class=\"o\">,</span> <span class=\"n\">false_or</span><span class=\"o\">],</span>\n<span class=\"n\">tauto</span><span class=\"bp\">!</span><span class=\"o\">,</span> <span class=\"c1\">-- fails</span>\n<span class=\"kn\">end</span>\n</pre></div>",
        "id": 188248996,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1581715909
    },
    {
        "content": "<div class=\"codehilite\"><pre><span></span>⊢ ((strategy.fst 1).fst + ((strategy.fst 1).snd.fst + (strategy.fst 1).snd.snd) =\n         ((strategy.fst 1).fst + ((strategy.fst 1).snd.fst + (strategy.fst 1).snd.snd)) / 2 * 2 ∧\n       ¬(strategy.snd 1).fst + ((strategy.snd 1).snd.fst + (strategy.snd 1).snd.snd) =\n             ((strategy.snd 1).fst + ((strategy.snd 1).snd.fst + (strategy.snd 1).snd.snd)) / 2 * 2 ∧\n         ((strategy.fst 1).fst = (strategy.snd 1).fst ∨ false)) ∧\n    ((strategy.fst 1).fst + ((strategy.fst 1).snd.fst + (strategy.fst 1).snd.snd) =\n           ((strategy.fst 1).fst + ((strategy.fst 1).snd.fst + (strategy.fst 1).snd.snd)) / 2 * 2 ∧\n         ¬(strategy.snd 2).fst + ((strategy.snd 2).snd.fst + (strategy.snd 2).snd.snd) =\n               ((strategy.snd 2).fst + ((strategy.snd 2).snd.fst + (strategy.snd 2).snd.snd)) / 2 * 2 ∧\n           ((strategy.fst 1).snd.fst = (strategy.snd 2).fst ∨ false)) ∧\n      ((strategy.fst 1).fst + ((strategy.fst 1).snd.fst + (strategy.fst 1).snd.snd) =\n             ((strategy.fst 1).fst + ((strategy.fst 1).snd.fst + (strategy.fst 1).snd.snd)) / 2 * 2 ∧\n           ¬(strategy.snd 3).fst + ((strategy.snd 3).snd.fst + (strategy.snd 3).snd.snd) =\n                 ((strategy.snd 3).fst + ((strategy.snd 3).snd.fst + (strategy.snd 3).snd.snd)) / 2 * 2 ∧\n             ((strategy.fst 1).snd.snd = (strategy.snd 3).fst ∨ false)) ∧\n        ((strategy.fst 2).fst + ((strategy.fst 2).snd.fst + (strategy.fst 2).snd.snd) =\n               ((strategy.fst 2).fst + ((strategy.fst 2).snd.fst + (strategy.fst 2).snd.snd)) / 2 * 2 ∧\n             ¬(strategy.snd 1).fst + ((strategy.snd 1).snd.fst + (strategy.snd 1).snd.snd) =\n                   ((strategy.snd 1).fst + ((strategy.snd 1).snd.fst + (strategy.snd 1).snd.snd)) / 2 * 2 ∧\n               ((strategy.fst 2).fst = (strategy.snd 1).snd.fst ∨ false)) ∧\n          ((strategy.fst 2).fst + ((strategy.fst 2).snd.fst + (strategy.fst 2).snd.snd) =\n                 ((strategy.fst 2).fst + ((strategy.fst 2).snd.fst + (strategy.fst 2).snd.snd)) / 2 * 2 ∧\n               ¬(strategy.snd 2).fst + ((strategy.snd 2).snd.fst + (strategy.snd 2).snd.snd) =\n                     ((strategy.snd 2).fst + ((strategy.snd 2).snd.fst + (strategy.snd 2).snd.snd)) / 2 * 2 ∧\n                 ((strategy.fst 2).snd.fst = (strategy.snd 2).snd.fst ∨ false)) ∧\n            ((strategy.fst 2).fst + ((strategy.fst 2).snd.fst + (strategy.fst 2).snd.snd) =\n                   ((strategy.fst 2).fst + ((strategy.fst 2).snd.fst + (strategy.fst 2).snd.snd)) / 2 * 2 ∧\n                 ¬(strategy.snd 3).fst + ((strategy.snd 3).snd.fst + (strategy.snd 3).snd.snd) =\n                       ((strategy.snd 3).fst + ((strategy.snd 3).snd.fst + (strategy.snd 3).snd.snd)) / 2 * 2 ∧\n                   ((strategy.fst 2).snd.snd = (strategy.snd 3).snd.fst ∨ false)) ∧\n              ((strategy.fst 3).fst + ((strategy.fst 3).snd.fst + (strategy.fst 3).snd.snd) =\n                     ((strategy.fst 3).fst + ((strategy.fst 3).snd.fst + (strategy.fst 3).snd.snd)) / 2 * 2 ∧\n                   ¬(strategy.snd 1).fst + ((strategy.snd 1).snd.fst + (strategy.snd 1).snd.snd) =\n                         ((strategy.snd 1).fst + ((strategy.snd 1).snd.fst + (strategy.snd 1).snd.snd)) / 2 * 2 ∧\n                     ((strategy.fst 3).fst = (strategy.snd 1).snd.snd ∨ false)) ∧\n                ((strategy.fst 3).fst + ((strategy.fst 3).snd.fst + (strategy.fst 3).snd.snd) =\n                       ((strategy.fst 3).fst + ((strategy.fst 3).snd.fst + (strategy.fst 3).snd.snd)) / 2 * 2 ∧\n                     ¬(strategy.snd 2).fst + ((strategy.snd 2).snd.fst + (strategy.snd 2).snd.snd) =\n                           ((strategy.snd 2).fst + ((strategy.snd 2).snd.fst + (strategy.snd 2).snd.snd)) / 2 * 2 ∧\n                       ((strategy.fst 3).snd.fst = (strategy.snd 2).snd.snd ∨ false)) ∧\n                  (strategy.fst 3).fst + ((strategy.fst 3).snd.fst + (strategy.fst 3).snd.snd) =\n                      ((strategy.fst 3).fst + ((strategy.fst 3).snd.fst + (strategy.fst 3).snd.snd)) / 2 * 2 ∧\n                    ¬(strategy.snd 3).fst + ((strategy.snd 3).snd.fst + (strategy.snd 3).snd.snd) =\n                          ((strategy.snd 3).fst + ((strategy.snd 3).snd.fst + (strategy.snd 3).snd.snd)) / 2 * 2 ∧\n                      (strategy.fst 3).snd.snd = (strategy.snd 3).snd.snd →\n  false\n</pre></div>",
        "id": 188249060,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1581715934
    },
    {
        "content": "<p>The argument goes something like: Alice and Bob need both of their strategies to be consistent. This means that we can think of their strategies as sampling from a single coloring of the 3x3 board with Green/Red tiles (represented by 1 and 0). If we impose the condition that each row has an even number of green tiles, and each column has an odd number of tiles, then the total number of green tiles should be even by summing the rows, but odd by summing the columns, which is impossible. </p>\n<p>My strategy is more of a brute force approach though. I figured this would be easier to implement in lean and once i got this working I'd go to more complex arguments.</p>",
        "id": 188249244,
        "sender_full_name": "ROCKY KAMEN-RUBIO",
        "timestamp": 1581716068
    },
    {
        "content": "<p>I don't know anything about the board or tiles or strategy that you're talking about so I don't understand your argument.</p>",
        "id": 188249297,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1581716132
    },
    {
        "content": "<p>Could you please describe the game in English? I can try to decode Lean but it takes some time.</p>",
        "id": 188249674,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1581716414
    },
    {
        "content": "<div class=\"codehilite\"><pre><span></span><span class=\"kn\">theorem</span> <span class=\"n\">noStrategy2</span> <span class=\"o\">(</span><span class=\"n\">strategy</span> <span class=\"o\">:</span> <span class=\"o\">((</span><span class=\"bp\">ℕ</span> <span class=\"bp\">→</span> <span class=\"bp\">ℕ</span> <span class=\"bp\">×</span> <span class=\"bp\">ℕ</span> <span class=\"bp\">×</span> <span class=\"bp\">ℕ</span><span class=\"o\">)</span> <span class=\"bp\">×</span> <span class=\"o\">(</span><span class=\"bp\">ℕ</span> <span class=\"bp\">→</span> <span class=\"bp\">ℕ</span> <span class=\"bp\">×</span> <span class=\"bp\">ℕ</span> <span class=\"bp\">×</span> <span class=\"bp\">ℕ</span><span class=\"o\">)))</span> <span class=\"o\">:</span> <span class=\"bp\">¬</span> <span class=\"o\">(</span><span class=\"n\">checkStrategy</span> <span class=\"o\">(</span><span class=\"n\">strategy</span><span class=\"o\">))</span> <span class=\"o\">:=</span>\n<span class=\"k\">begin</span>\n<span class=\"n\">intro</span> <span class=\"n\">s</span><span class=\"o\">,</span>\n<span class=\"n\">rw</span> <span class=\"n\">checkStrategy</span> <span class=\"n\">at</span> <span class=\"n\">s</span><span class=\"o\">,</span>\n<span class=\"n\">repeat</span> <span class=\"o\">{</span><span class=\"n\">rw</span> <span class=\"n\">checkStrategyrc</span> <span class=\"n\">at</span> <span class=\"n\">s</span><span class=\"o\">},</span>\n<span class=\"n\">simp</span> <span class=\"n\">at</span> <span class=\"n\">s</span><span class=\"o\">,</span>\n<span class=\"n\">revert</span> <span class=\"n\">s</span><span class=\"o\">,</span>\n<span class=\"n\">rw</span> <span class=\"o\">(</span><span class=\"k\">show</span> <span class=\"mi\">1</span> <span class=\"bp\">=</span> <span class=\"mi\">2</span> <span class=\"bp\">↔</span> <span class=\"n\">false</span><span class=\"o\">,</span> <span class=\"k\">by</span> <span class=\"n\">norm_num</span><span class=\"o\">),</span>\n<span class=\"n\">rw</span> <span class=\"o\">(</span><span class=\"k\">show</span> <span class=\"mi\">2</span> <span class=\"bp\">=</span> <span class=\"mi\">1</span> <span class=\"bp\">↔</span> <span class=\"n\">false</span><span class=\"o\">,</span> <span class=\"k\">by</span> <span class=\"n\">norm_num</span><span class=\"o\">),</span>\n<span class=\"n\">rw</span> <span class=\"o\">(</span><span class=\"k\">show</span> <span class=\"mi\">3</span> <span class=\"bp\">=</span> <span class=\"mi\">1</span> <span class=\"bp\">↔</span> <span class=\"n\">false</span><span class=\"o\">,</span> <span class=\"k\">by</span> <span class=\"n\">norm_num</span><span class=\"o\">),</span>\n<span class=\"n\">rw</span> <span class=\"o\">(</span><span class=\"k\">show</span> <span class=\"mi\">1</span> <span class=\"bp\">=</span> <span class=\"mi\">3</span> <span class=\"bp\">↔</span> <span class=\"n\">false</span><span class=\"o\">,</span> <span class=\"k\">by</span> <span class=\"n\">norm_num</span><span class=\"o\">),</span>\n<span class=\"n\">rw</span> <span class=\"o\">(</span><span class=\"k\">show</span> <span class=\"mi\">3</span> <span class=\"bp\">=</span> <span class=\"mi\">2</span> <span class=\"bp\">↔</span> <span class=\"n\">false</span><span class=\"o\">,</span> <span class=\"k\">by</span> <span class=\"n\">norm_num</span><span class=\"o\">),</span>\n<span class=\"n\">rw</span> <span class=\"o\">(</span><span class=\"k\">show</span> <span class=\"mi\">2</span> <span class=\"bp\">=</span> <span class=\"mi\">3</span> <span class=\"bp\">↔</span> <span class=\"n\">false</span><span class=\"o\">,</span> <span class=\"k\">by</span> <span class=\"n\">norm_num</span><span class=\"o\">),</span>\n<span class=\"n\">simp</span> <span class=\"n\">only</span> <span class=\"o\">[</span><span class=\"n\">false_and</span><span class=\"o\">,</span> <span class=\"n\">false_or</span><span class=\"o\">,</span> <span class=\"n\">or_false</span><span class=\"o\">],</span>\n<span class=\"k\">have</span> <span class=\"n\">h</span> <span class=\"o\">:</span> <span class=\"n\">myIsOdd</span> <span class=\"bp\">=</span> <span class=\"n\">myIsOdd&#39;</span> <span class=\"o\">:=</span> <span class=\"n\">rfl</span><span class=\"o\">,</span>\n<span class=\"n\">rw</span> <span class=\"n\">h</span><span class=\"o\">,</span>\n<span class=\"n\">unfold</span> <span class=\"n\">myIsOdd&#39;</span><span class=\"o\">,</span>\n<span class=\"n\">intro</span> <span class=\"n\">s</span><span class=\"o\">,</span>\n<span class=\"n\">rcases</span> <span class=\"n\">s</span> <span class=\"k\">with</span> <span class=\"bp\">⟨⟨</span><span class=\"n\">s1</span><span class=\"o\">,</span> <span class=\"n\">t1</span><span class=\"o\">,</span> <span class=\"n\">u1</span><span class=\"bp\">⟩</span><span class=\"o\">,</span> <span class=\"bp\">⟨</span><span class=\"n\">s2</span><span class=\"o\">,</span> <span class=\"n\">t2</span><span class=\"o\">,</span> <span class=\"n\">u2</span><span class=\"bp\">⟩</span><span class=\"o\">,</span> <span class=\"bp\">⟨</span><span class=\"n\">s3</span><span class=\"o\">,</span> <span class=\"n\">t3</span><span class=\"o\">,</span> <span class=\"n\">u3</span><span class=\"bp\">⟩</span><span class=\"o\">,</span>\n               <span class=\"bp\">⟨</span><span class=\"n\">s4</span><span class=\"o\">,</span> <span class=\"n\">t4</span><span class=\"o\">,</span> <span class=\"n\">u4</span><span class=\"bp\">⟩</span><span class=\"o\">,</span> <span class=\"bp\">⟨</span><span class=\"n\">s5</span><span class=\"o\">,</span> <span class=\"n\">t5</span><span class=\"o\">,</span> <span class=\"n\">u5</span><span class=\"bp\">⟩</span><span class=\"o\">,</span> <span class=\"bp\">⟨</span><span class=\"n\">s6</span><span class=\"o\">,</span> <span class=\"n\">t6</span><span class=\"o\">,</span> <span class=\"n\">u6</span><span class=\"bp\">⟩</span><span class=\"o\">,</span>\n               <span class=\"bp\">⟨</span><span class=\"n\">s7</span><span class=\"o\">,</span> <span class=\"n\">t7</span><span class=\"o\">,</span> <span class=\"n\">u7</span><span class=\"bp\">⟩</span><span class=\"o\">,</span> <span class=\"bp\">⟨</span><span class=\"n\">s8</span><span class=\"o\">,</span> <span class=\"n\">t8</span><span class=\"o\">,</span> <span class=\"n\">u8</span><span class=\"bp\">⟩</span><span class=\"o\">,</span> <span class=\"bp\">⟨</span><span class=\"n\">s9</span><span class=\"o\">,</span> <span class=\"n\">t9</span><span class=\"o\">,</span> <span class=\"n\">u9</span><span class=\"bp\">⟩⟩</span><span class=\"o\">,</span>\n<span class=\"n\">rw</span> <span class=\"n\">u1</span> <span class=\"n\">at</span> <span class=\"bp\">*</span><span class=\"o\">,</span>\n<span class=\"n\">rw</span> <span class=\"n\">u2</span> <span class=\"n\">at</span> <span class=\"bp\">*</span><span class=\"o\">,</span>\n<span class=\"n\">rw</span> <span class=\"n\">u3</span> <span class=\"n\">at</span> <span class=\"bp\">*</span><span class=\"o\">,</span>\n<span class=\"n\">rw</span> <span class=\"n\">u4</span> <span class=\"n\">at</span> <span class=\"bp\">*</span><span class=\"o\">,</span>\n<span class=\"n\">rw</span> <span class=\"n\">u5</span> <span class=\"n\">at</span> <span class=\"bp\">*</span><span class=\"o\">,</span>\n<span class=\"n\">rw</span> <span class=\"n\">u6</span> <span class=\"n\">at</span> <span class=\"bp\">*</span><span class=\"o\">,</span>\n<span class=\"n\">rw</span> <span class=\"n\">u7</span> <span class=\"n\">at</span> <span class=\"bp\">*</span><span class=\"o\">,</span>\n<span class=\"n\">rw</span> <span class=\"n\">u8</span> <span class=\"n\">at</span> <span class=\"bp\">*</span><span class=\"o\">,</span>\n<span class=\"n\">rw</span> <span class=\"n\">u9</span> <span class=\"n\">at</span> <span class=\"bp\">*</span><span class=\"o\">,</span>\n<span class=\"n\">sorry</span>\n<span class=\"kn\">end</span>\n</pre></div>\n\n\n<p>gets us to</p>\n<div class=\"codehilite\"><pre><span></span>1 goal\nstrategy : (ℕ → ℕ × ℕ × ℕ) × (ℕ → ℕ × ℕ × ℕ),\nh : myIsOdd = myIsOdd&#39;,\nt1 : ¬myIsEven ((strategy.snd 1).fst + ((strategy.snd 1).snd.fst + (strategy.snd 1).snd.snd)),\nu1 : (strategy.fst 1).fst = (strategy.snd 1).fst,\nt2 : ¬myIsEven ((strategy.snd 2).fst + ((strategy.snd 2).snd.fst + (strategy.snd 2).snd.snd)),\nu2 : (strategy.fst 1).snd.fst = (strategy.snd 2).fst,\nt3 : ¬myIsEven ((strategy.snd 3).fst + ((strategy.snd 3).snd.fst + (strategy.snd 3).snd.snd)),\nu3 : (strategy.fst 1).snd.snd = (strategy.snd 3).fst,\nt4 : ¬myIsEven ((strategy.snd 1).fst + ((strategy.snd 1).snd.fst + (strategy.snd 1).snd.snd)),\nu4 : (strategy.fst 2).fst = (strategy.snd 1).snd.fst,\nt5 : ¬myIsEven ((strategy.snd 2).fst + ((strategy.snd 2).snd.fst + (strategy.snd 2).snd.snd)),\nu5 : (strategy.fst 2).snd.fst = (strategy.snd 2).snd.fst,\nt6 : ¬myIsEven ((strategy.snd 3).fst + ((strategy.snd 3).snd.fst + (strategy.snd 3).snd.snd)),\nu6 : (strategy.fst 2).snd.snd = (strategy.snd 3).snd.fst,\nt7 : ¬myIsEven ((strategy.snd 1).fst + ((strategy.snd 1).snd.fst + (strategy.snd 1).snd.snd)),\nu7 : (strategy.fst 3).fst = (strategy.snd 1).snd.snd,\nt8 : ¬myIsEven ((strategy.snd 2).fst + ((strategy.snd 2).snd.fst + (strategy.snd 2).snd.snd)),\nu8 : (strategy.fst 3).snd.fst = (strategy.snd 2).snd.snd,\nt9 : ¬myIsEven ((strategy.snd 3).fst + ((strategy.snd 3).snd.fst + (strategy.snd 3).snd.snd)),\nu9 : (strategy.fst 3).snd.snd = (strategy.snd 3).snd.snd,\ns1 s2 s3 : myIsEven ((strategy.snd 1).fst + ((strategy.snd 2).fst + (strategy.snd 3).fst)),\ns4 s5 s6 : myIsEven ((strategy.snd 1).snd.fst + ((strategy.snd 2).snd.fst + (strategy.snd 3).snd.fst)),\ns7 s8 s9 : myIsEven ((strategy.snd 1).snd.snd + ((strategy.snd 2).snd.snd + (strategy.snd 3).snd.snd))\n⊢ false\n</pre></div>",
        "id": 188251011,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1581717393
    },
    {
        "content": "<p>Sorry, I don't think I've been very clear. Here is a more detailed explanation:</p>\n<p><strong>The Game: </strong>Alice is assigned a row and Bob is assigned a column of a 3x3 board. Neither knows the assignment of the other. The task is for each of them to color their respective row/column with Green and Red tiles (aka 1s and 0s) while meeting the following criteria:</p>\n<ol>\n<li>Rows must have an even number of Green tiles</li>\n<li>Columns must have an odd number of Green tiles</li>\n<li>The two colorings must be consistent - they must agree on the color of the shared tile</li>\n</ol>\n<p>They can plan a strategy beforehand but can't communicate after each gets their respective assignment. </p>\n<p><strong>My goal</strong> is to prove that there is no guaranteed successful strategy. </p>\n<p><strong>Lean Proof</strong> We can think of a strategy as a pair of maps, one from a row number to a triple of values we use to fill that row, the other from a column number to a triple of values we use to fill that column. <code>checkStrategyrc</code> checks that a given strategy works for a specific row r and column c by showing that the row sum is even, the column sum is odd, and the two agree at the intersection. <code>checkStrategy </code> calls <code>checkStrategy </code> on every combination of r and c in the 3x3 grid. Now we just need to show that no strategy passes checkStrategy.</p>\n<p><strong>More Intuitive proof</strong> (This is what I would like to implement next) Since Alice and Bob must agree on the value of the intersection of their respective row/column, and the location of this intersection is arbitrary, we can think of their strategies as sampling from a single tiled 3x3 board. Summing the values in the rows of this single board we get an even number, but summing the values in the columns we get an odd number. The sums of the values in all the tiles should be the same whether we do it by rows or columns, so we get a contradiction.</p>",
        "id": 188251087,
        "sender_full_name": "ROCKY KAMEN-RUBIO",
        "timestamp": 1581717449
    },
    {
        "content": "<p>And now it seems to me that you might be able to prove it by observing that something like t1,t2,t3 (or whatever) together say that the sum of 9 terms is odd, and s1,s4,s7 (or whatever) say that the sum of the same 9 terms is even. But you can't expect Lean to figure this argument out because it knows no properties at all about your <code>myIsEven</code> and <code>myIsOdd</code></p>",
        "id": 188251159,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1581717483
    },
    {
        "content": "<p>I also want to add that there are probably a number of ways to do what I'm attempting to do in much more efficient ways, both mathematically and in lean. I am open to any/all suggestions.</p>",
        "id": 188251264,
        "sender_full_name": "ROCKY KAMEN-RUBIO",
        "timestamp": 1581717568
    },
    {
        "content": "<p>So this is why it gets stuck, I suspect. Your proof involves summing all nine entries of the board. But no tactic will even prove <code>myIsEven(x) \\and myIsEven(y) -&gt; myIsEven(x+y)</code></p>",
        "id": 188251286,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1581717582
    },
    {
        "content": "<p>If you want Lean to reason about your <code>myIsEven</code> you're going to have to train it or guide it.</p>",
        "id": 188251354,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1581717612
    },
    {
        "content": "<p>So the next thing to need to do is to prove things like this. Alternatively you can use Lean's built in predicates, where this stuff might well be proved already.</p>",
        "id": 188251469,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1581717711
    },
    {
        "content": "<div class=\"codehilite\"><pre><span></span>t1 : ¬myIsEven ((strategy.snd 1).fst + ((strategy.snd 1).snd.fst + (strategy.snd 1).snd.snd)),\nt2 : ¬myIsEven ((strategy.snd 2).fst + ((strategy.snd 2).snd.fst + (strategy.snd 2).snd.snd)),\nt3 : ¬myIsEven ((strategy.snd 3).fst + ((strategy.snd 3).snd.fst + (strategy.snd 3).snd.snd)),\ns1 : myIsEven ((strategy.snd 1).fst + ((strategy.snd 2).fst + (strategy.snd 3).fst)),\ns4 : myIsEven ((strategy.snd 1).snd.fst + ((strategy.snd 2).snd.fst + (strategy.snd 3).snd.fst)),\ns7 : myIsEven ((strategy.snd 1).snd.snd + ((strategy.snd 2).snd.snd + (strategy.snd 3).snd.snd))\n</pre></div>\n\n\n<p>Lean can't get from there to the end (these are facts from my session above). To get from there to the end you'll need <code>¬myIsEven x \\and ¬myIsEven y -&gt; myIsEven (x + y)</code>, <code>¬myIsEven x \\and myIsEven y -&gt; ¬myIsEven (x + y)</code> and <code>myIsEven x \\and myIsEven y -&gt; myIsEven (x + y)</code>. Note that the first of these is not at all obvious, you'll need some argument that says that every integer has remainder 0 or 1 when divided by 2 -- there is some content here. This is why Lean can't solve your problem. Once you have these three lemmas you'll be done modulo the fact that you'll have to prove (a+b+c)+(d+e+f)+(g+h+i)=(a+d+g)+(b+e+h)+(c+f+i) but the <code>ring</code> tactic will do this once you've isolated this as the thing to prove.</p>",
        "id": 188251807,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1581717955
    },
    {
        "content": "<p>Are you sure you want to use your own <code>myIsEven</code> instead of <code>nat.even</code> from <code>data/nat/parity</code> in <code>mathlib</code>?</p>",
        "id": 188251952,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1581718068
    },
    {
        "content": "<p>By the way, you don't need to explicitly import anything that starts with <code>init</code>, all of those files are automatically imported by Lean unless you tell it not to by starting the file with <code>prelude</code>.</p>",
        "id": 188252025,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1581718106
    },
    {
        "content": "<p>That makes sense. I was having trouble importing mathlib  so I thought I'd just define my own even/odd functions. I finally got it working though so I think you're right and that would be much easier.</p>",
        "id": 188252149,
        "sender_full_name": "ROCKY KAMEN-RUBIO",
        "timestamp": 1581718212
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib/blob/d36930b25a644250f68129d1aa40c777d2aa3a91/src/data/nat/parity.lean#L88\" target=\"_blank\" title=\"https://github.com/leanprover-community/mathlib/blob/d36930b25a644250f68129d1aa40c777d2aa3a91/src/data/nat/parity.lean#L88\">examples in mathlib?</a> o_O</p>",
        "id": 188252261,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1581718320
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"261068\">ROCKY KAMEN-RUBIO</span> <a href=\"#narrow/stream/113489-new-members/topic/Tactic.20Proof.20not.20Responding.2E.20Overflow.3F/near/188252149\" title=\"#narrow/stream/113489-new-members/topic/Tactic.20Proof.20not.20Responding.2E.20Overflow.3F/near/188252149\">said</a>:</p>\n<blockquote>\n<p>I was having trouble importing mathlib  so I thought I'd just define my own even/odd functions.</p>\n</blockquote>\n<p>That's fine, but you then also have to prove every theorem  about even and odd numbers which you need ;-)</p>",
        "id": 188252371,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1581718390
    },
    {
        "content": "<p><code>not_even_one</code> is currently my favourite mathlib theorem name :-)</p>",
        "id": 188252546,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1581718531
    },
    {
        "content": "<p>I'd prove this for any pair of odd numbers <code>(n, m)</code> instead of <code>(3, 3)</code>.  Then strategies will have the types <code>fin m → fin n → nat</code> and <code>fin n → fin m → nat</code>, respectively, and you can use <code>∀ i, (finset.univ.sum (f i)).even</code>.</p>",
        "id": 188252567,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1581718551
    },
    {
        "content": "<p>You can also make your functions take the values in <code>zmod 2</code>, then it will be <code>∀ i, finset.univ.sum (f i) = 0</code> and <code>∀ j, finset.univ.sum (g j) = 1</code>.</p>",
        "id": 188252773,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1581718698
    },
    {
        "content": "<p><code>zmod 2</code> is defined as <code>fin 2={n : nat | n &lt; 2}</code> with <code>1+1=0</code>.</p>",
        "id": 188252960,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1581718860
    },
    {
        "content": "<p>Here's a proof of your result with your even/odd modulo the standard facts:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"kn\">theorem</span> <span class=\"n\">noStrategy2</span> <span class=\"o\">(</span><span class=\"n\">strategy</span> <span class=\"o\">:</span> <span class=\"o\">((</span><span class=\"bp\">ℕ</span> <span class=\"bp\">→</span> <span class=\"bp\">ℕ</span> <span class=\"bp\">×</span> <span class=\"bp\">ℕ</span> <span class=\"bp\">×</span> <span class=\"bp\">ℕ</span><span class=\"o\">)</span> <span class=\"bp\">×</span> <span class=\"o\">(</span><span class=\"bp\">ℕ</span> <span class=\"bp\">→</span> <span class=\"bp\">ℕ</span> <span class=\"bp\">×</span> <span class=\"bp\">ℕ</span> <span class=\"bp\">×</span> <span class=\"bp\">ℕ</span><span class=\"o\">)))</span> <span class=\"o\">:</span> <span class=\"bp\">¬</span> <span class=\"o\">(</span><span class=\"n\">checkStrategy</span> <span class=\"o\">(</span><span class=\"n\">strategy</span><span class=\"o\">))</span> <span class=\"o\">:=</span>\n<span class=\"k\">begin</span>\n<span class=\"n\">intro</span> <span class=\"n\">s</span><span class=\"o\">,</span>\n<span class=\"n\">rw</span> <span class=\"n\">checkStrategy</span> <span class=\"n\">at</span> <span class=\"n\">s</span><span class=\"o\">,</span>\n<span class=\"n\">repeat</span> <span class=\"o\">{</span><span class=\"n\">rw</span> <span class=\"n\">checkStrategyrc</span> <span class=\"n\">at</span> <span class=\"n\">s</span><span class=\"o\">},</span>\n<span class=\"n\">simp</span> <span class=\"n\">at</span> <span class=\"n\">s</span><span class=\"o\">,</span>\n<span class=\"n\">revert</span> <span class=\"n\">s</span><span class=\"o\">,</span>\n<span class=\"n\">rw</span> <span class=\"o\">(</span><span class=\"k\">show</span> <span class=\"mi\">1</span> <span class=\"bp\">=</span> <span class=\"mi\">2</span> <span class=\"bp\">↔</span> <span class=\"n\">false</span><span class=\"o\">,</span> <span class=\"k\">by</span> <span class=\"n\">norm_num</span><span class=\"o\">),</span>\n<span class=\"n\">rw</span> <span class=\"o\">(</span><span class=\"k\">show</span> <span class=\"mi\">2</span> <span class=\"bp\">=</span> <span class=\"mi\">1</span> <span class=\"bp\">↔</span> <span class=\"n\">false</span><span class=\"o\">,</span> <span class=\"k\">by</span> <span class=\"n\">norm_num</span><span class=\"o\">),</span>\n<span class=\"n\">rw</span> <span class=\"o\">(</span><span class=\"k\">show</span> <span class=\"mi\">3</span> <span class=\"bp\">=</span> <span class=\"mi\">1</span> <span class=\"bp\">↔</span> <span class=\"n\">false</span><span class=\"o\">,</span> <span class=\"k\">by</span> <span class=\"n\">norm_num</span><span class=\"o\">),</span>\n<span class=\"n\">rw</span> <span class=\"o\">(</span><span class=\"k\">show</span> <span class=\"mi\">1</span> <span class=\"bp\">=</span> <span class=\"mi\">3</span> <span class=\"bp\">↔</span> <span class=\"n\">false</span><span class=\"o\">,</span> <span class=\"k\">by</span> <span class=\"n\">norm_num</span><span class=\"o\">),</span>\n<span class=\"n\">rw</span> <span class=\"o\">(</span><span class=\"k\">show</span> <span class=\"mi\">3</span> <span class=\"bp\">=</span> <span class=\"mi\">2</span> <span class=\"bp\">↔</span> <span class=\"n\">false</span><span class=\"o\">,</span> <span class=\"k\">by</span> <span class=\"n\">norm_num</span><span class=\"o\">),</span>\n<span class=\"n\">rw</span> <span class=\"o\">(</span><span class=\"k\">show</span> <span class=\"mi\">2</span> <span class=\"bp\">=</span> <span class=\"mi\">3</span> <span class=\"bp\">↔</span> <span class=\"n\">false</span><span class=\"o\">,</span> <span class=\"k\">by</span> <span class=\"n\">norm_num</span><span class=\"o\">),</span>\n<span class=\"n\">simp</span> <span class=\"n\">only</span> <span class=\"o\">[</span><span class=\"n\">false_and</span><span class=\"o\">,</span> <span class=\"n\">false_or</span><span class=\"o\">,</span> <span class=\"n\">or_false</span><span class=\"o\">],</span>\n<span class=\"n\">intro</span> <span class=\"n\">s</span><span class=\"o\">,</span>\n<span class=\"n\">rcases</span> <span class=\"n\">s</span> <span class=\"k\">with</span> <span class=\"bp\">⟨⟨</span><span class=\"n\">s1</span><span class=\"o\">,</span> <span class=\"n\">t1</span><span class=\"o\">,</span> <span class=\"n\">u1</span><span class=\"bp\">⟩</span><span class=\"o\">,</span> <span class=\"bp\">⟨</span><span class=\"n\">s2</span><span class=\"o\">,</span> <span class=\"n\">t2</span><span class=\"o\">,</span> <span class=\"n\">u2</span><span class=\"bp\">⟩</span><span class=\"o\">,</span> <span class=\"bp\">⟨</span><span class=\"n\">s3</span><span class=\"o\">,</span> <span class=\"n\">t3</span><span class=\"o\">,</span> <span class=\"n\">u3</span><span class=\"bp\">⟩</span><span class=\"o\">,</span>\n               <span class=\"bp\">⟨</span><span class=\"n\">s4</span><span class=\"o\">,</span> <span class=\"n\">t4</span><span class=\"o\">,</span> <span class=\"n\">u4</span><span class=\"bp\">⟩</span><span class=\"o\">,</span> <span class=\"bp\">⟨</span><span class=\"n\">s5</span><span class=\"o\">,</span> <span class=\"n\">t5</span><span class=\"o\">,</span> <span class=\"n\">u5</span><span class=\"bp\">⟩</span><span class=\"o\">,</span> <span class=\"bp\">⟨</span><span class=\"n\">s6</span><span class=\"o\">,</span> <span class=\"n\">t6</span><span class=\"o\">,</span> <span class=\"n\">u6</span><span class=\"bp\">⟩</span><span class=\"o\">,</span>\n               <span class=\"bp\">⟨</span><span class=\"n\">s7</span><span class=\"o\">,</span> <span class=\"n\">t7</span><span class=\"o\">,</span> <span class=\"n\">u7</span><span class=\"bp\">⟩</span><span class=\"o\">,</span> <span class=\"bp\">⟨</span><span class=\"n\">s8</span><span class=\"o\">,</span> <span class=\"n\">t8</span><span class=\"o\">,</span> <span class=\"n\">u8</span><span class=\"bp\">⟩</span><span class=\"o\">,</span> <span class=\"bp\">⟨</span><span class=\"n\">s9</span><span class=\"o\">,</span> <span class=\"n\">t9</span><span class=\"o\">,</span> <span class=\"n\">u9</span><span class=\"bp\">⟩⟩</span><span class=\"o\">,</span>\n<span class=\"n\">rw</span> <span class=\"n\">u1</span> <span class=\"n\">at</span> <span class=\"bp\">*</span><span class=\"o\">,</span>\n<span class=\"n\">rw</span> <span class=\"n\">u2</span> <span class=\"n\">at</span> <span class=\"bp\">*</span><span class=\"o\">,</span>\n<span class=\"n\">rw</span> <span class=\"n\">u3</span> <span class=\"n\">at</span> <span class=\"bp\">*</span><span class=\"o\">,</span>\n<span class=\"n\">rw</span> <span class=\"n\">u4</span> <span class=\"n\">at</span> <span class=\"bp\">*</span><span class=\"o\">,</span>\n<span class=\"n\">rw</span> <span class=\"n\">u5</span> <span class=\"n\">at</span> <span class=\"bp\">*</span><span class=\"o\">,</span>\n<span class=\"n\">rw</span> <span class=\"n\">u6</span> <span class=\"n\">at</span> <span class=\"bp\">*</span><span class=\"o\">,</span>\n<span class=\"n\">rw</span> <span class=\"n\">u7</span> <span class=\"n\">at</span> <span class=\"bp\">*</span><span class=\"o\">,</span>\n<span class=\"n\">rw</span> <span class=\"n\">u8</span> <span class=\"n\">at</span> <span class=\"bp\">*</span><span class=\"o\">,</span>\n<span class=\"n\">rw</span> <span class=\"n\">u9</span> <span class=\"n\">at</span> <span class=\"bp\">*</span><span class=\"o\">,</span>\n<span class=\"n\">apply</span> <span class=\"n\">odd_add_even</span> <span class=\"n\">t1</span> <span class=\"o\">(</span><span class=\"n\">odd_add_odd</span> <span class=\"n\">t2</span> <span class=\"n\">t3</span><span class=\"o\">),</span>\n<span class=\"n\">convert</span> <span class=\"n\">even_add_even</span> <span class=\"n\">s1</span> <span class=\"o\">(</span><span class=\"n\">even_add_even</span> <span class=\"n\">s4</span> <span class=\"n\">s7</span><span class=\"o\">)</span> <span class=\"kn\">using</span> <span class=\"mi\">1</span><span class=\"o\">,</span>\n<span class=\"n\">ring</span><span class=\"o\">,</span>\n<span class=\"n\">congr&#39;</span> <span class=\"mi\">2</span><span class=\"o\">,</span>\n<span class=\"n\">ring</span><span class=\"o\">,</span>\n<span class=\"kn\">end</span>\n</pre></div>\n\n\n<p>But I used</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"kn\">theorem</span> <span class=\"n\">odd_add_odd</span> <span class=\"o\">{</span><span class=\"n\">m</span> <span class=\"n\">n</span><span class=\"o\">}</span> <span class=\"o\">:</span> <span class=\"n\">myIsOdd</span> <span class=\"n\">m</span> <span class=\"bp\">→</span> <span class=\"n\">myIsOdd</span> <span class=\"n\">n</span> <span class=\"bp\">→</span> <span class=\"n\">myIsEven</span> <span class=\"o\">(</span><span class=\"n\">m</span> <span class=\"bp\">+</span> <span class=\"n\">n</span><span class=\"o\">)</span> <span class=\"o\">:=</span> <span class=\"n\">sorry</span>\n<span class=\"kn\">theorem</span> <span class=\"n\">odd_add_even</span> <span class=\"o\">{</span><span class=\"n\">m</span> <span class=\"n\">n</span><span class=\"o\">}</span> <span class=\"o\">:</span> <span class=\"n\">myIsOdd</span> <span class=\"n\">m</span> <span class=\"bp\">→</span> <span class=\"n\">myIsEven</span> <span class=\"n\">n</span> <span class=\"bp\">→</span> <span class=\"n\">myIsOdd</span> <span class=\"o\">(</span><span class=\"n\">m</span> <span class=\"bp\">+</span> <span class=\"n\">n</span><span class=\"o\">)</span> <span class=\"o\">:=</span> <span class=\"n\">sorry</span>\n<span class=\"kn\">theorem</span> <span class=\"n\">even_add_even</span> <span class=\"o\">{</span><span class=\"n\">m</span> <span class=\"n\">n</span><span class=\"o\">}</span> <span class=\"o\">:</span> <span class=\"n\">myIsEven</span> <span class=\"n\">m</span> <span class=\"bp\">→</span> <span class=\"n\">myIsEven</span> <span class=\"n\">n</span> <span class=\"bp\">→</span> <span class=\"n\">myIsEven</span> <span class=\"o\">(</span><span class=\"n\">m</span> <span class=\"bp\">+</span> <span class=\"n\">n</span><span class=\"o\">)</span> <span class=\"o\">:=</span> <span class=\"n\">sorry</span>\n</pre></div>\n\n\n<p>so now it suffices to prove these.</p>",
        "id": 188253112,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1581719017
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110038\">Kevin Buzzard</span> <a href=\"#narrow/stream/113489-new-members/topic/Tactic.20Proof.20not.20Responding.2E.20Overflow.3F/near/188252371\" title=\"#narrow/stream/113489-new-members/topic/Tactic.20Proof.20not.20Responding.2E.20Overflow.3F/near/188252371\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"261068\">ROCKY KAMEN-RUBIO</span> <a href=\"#narrow/stream/113489-new-members/topic/Tactic.20Proof.20not.20Responding.2E.20Overflow.3F/near/188252149\" title=\"#narrow/stream/113489-new-members/topic/Tactic.20Proof.20not.20Responding.2E.20Overflow.3F/near/188252149\">said</a>:</p>\n<blockquote>\n<p>I was having trouble importing mathlib  so I thought I'd just define my own even/odd functions.</p>\n</blockquote>\n<p>That's fine, but you then also have to prove every theorem  about even and odd numbers which you need ;-)</p>\n</blockquote>\n<p>I see that now. Here I was trying to be all clever thinking I could just rewrite basic natural number definitions without importing any subsequent theorems.</p>",
        "id": 188253488,
        "sender_full_name": "ROCKY KAMEN-RUBIO",
        "timestamp": 1581719306
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"214703\">@Yury G. Kudryashov</span>  Doing it for a board of size (m,n) for odd m and n was one of my next goals. Can I just use quantifiers like that to iterate over all the elements of fin m? I was looking for some kind of for loop structure but it makes sense that this would be the lean-ier way of doing it.</p>",
        "id": 188253721,
        "sender_full_name": "ROCKY KAMEN-RUBIO",
        "timestamp": 1581719496
    },
    {
        "content": "<p><code>∀ i : fin n, ...</code> says exactly \"for every element <code>i</code> of type <code>fin n</code> the following proposition holds\".</p>",
        "id": 188253843,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1581719619
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"214703\">Yury G. Kudryashov</span> <a href=\"#narrow/stream/113489-new-members/topic/Tactic.20Proof.20not.20Responding.2E.20Overflow.3F/near/188252567\" title=\"#narrow/stream/113489-new-members/topic/Tactic.20Proof.20not.20Responding.2E.20Overflow.3F/near/188252567\">said</a>:</p>\n<blockquote>\n<p>I'd prove this for any pair of odd numbers <code>(n, m)</code> instead of <code>(3, 3)</code>.  Then strategies will have the types <code>fin m → fin n → nat</code> and <code>fin n → fin m → nat</code>, respectively, and you can use <code>∀ i, (finset.univ.sum (f i)).even</code>.</p>\n</blockquote>\n<p><span class=\"user-mention\" data-user-id=\"214703\">@Yury G. Kudryashov</span>  I'm trying to implement this and I'm getting errors on finset.univ.sum. I've imported data.finset. Do I need to convert the function (StrategyA r) into a set, or tell lean to map it first? <a href=\"/user_uploads/3121/rwOy4RoV_YPc9xKFxrc0Fuct/Screen-Shot-2020-02-16-at-12.39.09-PM.png\" target=\"_blank\" title=\"Screen-Shot-2020-02-16-at-12.39.09-PM.png\">Screen-Shot-2020-02-16-at-12.39.09-PM.png</a> <a href=\"/user_uploads/3121/_fqNAKz-ginWvakFiVJKOLLj/Screen-Shot-2020-02-16-at-12.39.04-PM.png\" target=\"_blank\" title=\"Screen-Shot-2020-02-16-at-12.39.04-PM.png\">Screen-Shot-2020-02-16-at-12.39.04-PM.png</a> <a href=\"/user_uploads/3121/e86Ww34ryBeqVZiF6N8HuA3A/Screen-Shot-2020-02-16-at-12.38.56-PM.png\" target=\"_blank\" title=\"Screen-Shot-2020-02-16-at-12.38.56-PM.png\">Screen-Shot-2020-02-16-at-12.38.56-PM.png</a> <a href=\"/user_uploads/3121/EJ29G9q0BpzOe7qWv8ha67CR/Screen-Shot-2020-02-16-at-12.38.49-PM.png\" target=\"_blank\" title=\"Screen-Shot-2020-02-16-at-12.38.49-PM.png\">Screen-Shot-2020-02-16-at-12.38.49-PM.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/rwOy4RoV_YPc9xKFxrc0Fuct/Screen-Shot-2020-02-16-at-12.39.09-PM.png\" target=\"_blank\" title=\"Screen-Shot-2020-02-16-at-12.39.09-PM.png\"><img src=\"/user_uploads/3121/rwOy4RoV_YPc9xKFxrc0Fuct/Screen-Shot-2020-02-16-at-12.39.09-PM.png\"></a></div><div class=\"message_inline_image\"><a href=\"/user_uploads/3121/_fqNAKz-ginWvakFiVJKOLLj/Screen-Shot-2020-02-16-at-12.39.04-PM.png\" target=\"_blank\" title=\"Screen-Shot-2020-02-16-at-12.39.04-PM.png\"><img src=\"/user_uploads/3121/_fqNAKz-ginWvakFiVJKOLLj/Screen-Shot-2020-02-16-at-12.39.04-PM.png\"></a></div><div class=\"message_inline_image\"><a href=\"/user_uploads/3121/e86Ww34ryBeqVZiF6N8HuA3A/Screen-Shot-2020-02-16-at-12.38.56-PM.png\" target=\"_blank\" title=\"Screen-Shot-2020-02-16-at-12.38.56-PM.png\"><img src=\"/user_uploads/3121/e86Ww34ryBeqVZiF6N8HuA3A/Screen-Shot-2020-02-16-at-12.38.56-PM.png\"></a></div><div class=\"message_inline_image\"><a href=\"/user_uploads/3121/EJ29G9q0BpzOe7qWv8ha67CR/Screen-Shot-2020-02-16-at-12.38.49-PM.png\" target=\"_blank\" title=\"Screen-Shot-2020-02-16-at-12.38.49-PM.png\"><img src=\"/user_uploads/3121/EJ29G9q0BpzOe7qWv8ha67CR/Screen-Shot-2020-02-16-at-12.38.49-PM.png\"></a></div>",
        "id": 188332846,
        "sender_full_name": "Rocky Kamen-Rubio",
        "timestamp": 1581874831
    },
    {
        "content": "<p>Could you post copy+pastable code (or a link to a github gist containing such) so that we can reproduce your errors?</p>",
        "id": 188332953,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1581875044
    },
    {
        "content": "<p>Did you <code>import algebra.big_operators</code>?</p>",
        "id": 188333263,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1581875731
    },
    {
        "content": "<p>Just added that and I'm still getting the same errors.</p>",
        "id": 188333504,
        "sender_full_name": "Rocky Kamen-Rubio",
        "timestamp": 1581876226
    },
    {
        "content": "<p>Please copy+paste the file from start to the first error.</p>",
        "id": 188334064,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1581877233
    },
    {
        "content": "<div class=\"codehilite\"><pre><span></span>import init.data.nat.basic\nimport init.algebra.ring\nimport init.algebra.norm_num\nimport init\nimport tactic\nimport data.nat.parity\nimport data.finset\nimport algebra.big_operators\nset_option class.instance_max_depth 15000000\n\n\n\n\ndef checkStrategymn {m n : nat} (strategyA : fin m → fin n → nat) (strategy B: fin n → fin m → nat) : Prop :=\n∀ r : fin m, (finset.univ.sum (strategyA r)).even\n</pre></div>",
        "id": 188334085,
        "sender_full_name": "Rocky Kamen-Rubio",
        "timestamp": 1581877304
    },
    {
        "content": "<p>Compiles with no errors here.</p>",
        "id": 188334597,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1581878194
    },
    {
        "content": "<p>Weird... Any ideas?</p>",
        "id": 188334739,
        "sender_full_name": "Rocky Kamen-Rubio",
        "timestamp": 1581878463
    },
    {
        "content": "<p>What version of mathlib are you using?</p>",
        "id": 188334744,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1581878483
    },
    {
        "content": "<p>I just tried with an older version of mathlib and you might need to try adding <code>import data.fintype</code>. By the way, I think I said this before, but you can delete everything that starts with <code>import init</code> since all of that is imported automatically by Lean.</p>",
        "id": 188334872,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1581878731
    },
    {
        "content": "<p>Ok I added <code>import data.fintype</code> and that seems to have resolved the issue. That's interesting the issue would be mathlib being out of date because I only downloaded it about two weeks ago. Was there an update since then? Maybe I downloaded it from the wrong source by mistake...</p>",
        "id": 188334994,
        "sender_full_name": "Rocky Kamen-Rubio",
        "timestamp": 1581878991
    },
    {
        "content": "<p>From playing around with commenting / uncommenting imports, it looks like something in <code>import tactic</code> now has <code>data.fintype</code> as a dependency, whereas it didn't previously.</p>",
        "id": 188335054,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1581879066
    },
    {
        "content": "<p>Hah, I guess I was the culprit: see <a href=\"https://github.com/leanprover-community/mathlib/pull/1962/files#diff-73f60479a7373d7694e4543439a5cb5fR36\" target=\"_blank\" title=\"https://github.com/leanprover-community/mathlib/pull/1962/files#diff-73f60479a7373d7694e4543439a5cb5fR36\">PR #1962</a>. I added <code>fin_cases</code> to the imports in <code>tactic.default</code>, and that <a href=\"https://github.com/leanprover-community/mathlib/blob/master/src/tactic/fin_cases.lean#L10\" target=\"_blank\" title=\"https://github.com/leanprover-community/mathlib/blob/master/src/tactic/fin_cases.lean#L10\">indeed depends on <code>data.fintype</code></a>.</p>",
        "id": 188335126,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1581879195
    },
    {
        "content": "<p>mathlib is a continuously moving target, for better or worse...</p>",
        "id": 188335131,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1581879209
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"260106\">Rocky Kamen-Rubio</span> <a href=\"#narrow/stream/113489-new-members/topic/Tactic.20Proof.20not.20Responding.2E.20Overflow.3F/near/188334994\" title=\"#narrow/stream/113489-new-members/topic/Tactic.20Proof.20not.20Responding.2E.20Overflow.3F/near/188334994\">said</a>:</p>\n<blockquote>\n<p>Was there an update since then?</p>\n</blockquote>\n<p>There are updates most days! You can follow <a class=\"stream\" data-stream-id=\"116290\" href=\"/#narrow/stream/116290-rss\">#rss</a> if you want to see the progression of the library.</p>",
        "id": 188338108,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1581884768
    },
    {
        "content": "<p>In fact you might want to check you're on Lean version 3.5.1 or you'll be missing the new goodies</p>",
        "id": 188338532,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1581885645
    },
    {
        "content": "<p>Fascinating. This actually explains a lot...</p>",
        "id": 188339354,
        "sender_full_name": "Rocky Kamen-Rubio",
        "timestamp": 1581887054
    },
    {
        "content": "<p>Thank you all for you amazing support! Another potentially basic question. How do I get rid of a universal quantifier when there is a negation in front of it? It seems like generally one would use <code>intro</code> and then just prove the statement generally. If there's a negation though, this seems to not work, and I get stuck with a proposition with a quantifier that I can't use with <code>rw</code> or other common tactics.</p>",
        "id": 188353379,
        "sender_full_name": "Rocky Kamen-Rubio",
        "timestamp": 1581916471
    },
    {
        "content": "<p>Try <code>rw</code> or <code>simp</code> with <code>not_forall</code>. You might need to <code>open_locale classical</code> before to work with classical logic if you aren't already.</p>",
        "id": 188353527,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1581916762
    },
    {
        "content": "<p>(we really need <code>rw_hint</code>... it shouldn't be hard)</p>",
        "id": 188353532,
        "sender_full_name": "Scott Morrison",
        "timestamp": 1581916794
    },
    {
        "content": "<p>You probably don't need to use classical for this. Just prove a contradiction from the forall assumption, presumably by constructing a counterexample</p>",
        "id": 188353741,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1581917233
    },
    {
        "content": "<p>I tried doing both <code>rw not_forall at h,</code> and <code>simp only [not_forall] at h,</code> but neither was successful. Here's a more specific minimal example of the type of situation I'm struggling with.  </p>\n<div class=\"codehilite\"><pre><span></span>theorem myTheorem : ¬ (∀ x : nat, x = 2) :=\nbegin\nintro h,\nend\n</pre></div>\n\n\n<p>Edit: I've already done <code>open_locale classical</code> earlier in the file, so I assume that's not the issue. I feel like there's something about the way lean handles quantifiers that I'm not understanding (I remember the book talking about them being somehow equivalent to Pi functions, but the example they gave was pretty different from this)</p>",
        "id": 188353839,
        "sender_full_name": "Rocky Kamen-Rubio",
        "timestamp": 1581917412
    },
    {
        "content": "<p>After <code>intro h</code> you no longer have a negation in front of <code>∀</code>. You can try <code>replace h := h 1, norm_num at h</code>.</p>",
        "id": 188353963,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1581917677
    },
    {
        "content": "<p>Note that <code>intro h</code> here is doing exactly what <code>by_contradiction h</code> would do, which may help understand what's happening.</p>",
        "id": 188354589,
        "sender_full_name": "Scott Morrison",
        "timestamp": 1581918961
    },
    {
        "content": "<p>I don't really understand the question. Does <code>push_neg</code> help? This moves negations inside quantifiers</p>",
        "id": 188360229,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1581928290
    },
    {
        "content": "<p>So it will turn not forall into exists not</p>",
        "id": 188360281,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1581928327
    },
    {
        "content": "<p>Rocky, your question is a bit hard to answer without knowing whether you want a low-level answer or learn how to crush such a goal. You can still have a look at the following variations.</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"kn\">import</span> <span class=\"n\">tactic</span>\n\n<span class=\"kn\">example</span> <span class=\"o\">:</span> <span class=\"bp\">¬</span> <span class=\"o\">(</span><span class=\"bp\">∀</span> <span class=\"n\">x</span> <span class=\"o\">:</span> <span class=\"n\">nat</span><span class=\"o\">,</span> <span class=\"n\">x</span> <span class=\"bp\">=</span> <span class=\"mi\">2</span><span class=\"o\">)</span> <span class=\"o\">:=</span>\n<span class=\"bp\">λ</span> <span class=\"n\">h</span><span class=\"o\">,</span> <span class=\"n\">nat</span><span class=\"bp\">.</span><span class=\"n\">succ_ne_zero</span> <span class=\"mi\">1</span> <span class=\"o\">(</span><span class=\"n\">h</span> <span class=\"mi\">0</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">symm</span>\n\n<span class=\"kn\">example</span> <span class=\"o\">:</span> <span class=\"bp\">¬</span> <span class=\"o\">(</span><span class=\"bp\">∀</span> <span class=\"n\">x</span> <span class=\"o\">:</span> <span class=\"n\">nat</span><span class=\"o\">,</span> <span class=\"n\">x</span> <span class=\"bp\">=</span> <span class=\"mi\">2</span><span class=\"o\">)</span> <span class=\"o\">:=</span>\n<span class=\"k\">begin</span>\n  <span class=\"n\">intro</span> <span class=\"n\">h</span><span class=\"o\">,</span>\n  <span class=\"n\">exact</span> <span class=\"n\">nat</span><span class=\"bp\">.</span><span class=\"n\">succ_ne_zero</span> <span class=\"mi\">1</span> <span class=\"o\">(</span><span class=\"n\">h</span> <span class=\"mi\">0</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">symm</span><span class=\"o\">,</span>\n<span class=\"kn\">end</span>\n\n<span class=\"kn\">example</span> <span class=\"o\">:</span> <span class=\"bp\">¬</span> <span class=\"o\">(</span><span class=\"bp\">∀</span> <span class=\"n\">x</span> <span class=\"o\">:</span> <span class=\"n\">nat</span><span class=\"o\">,</span> <span class=\"n\">x</span> <span class=\"bp\">=</span> <span class=\"mi\">2</span><span class=\"o\">)</span> <span class=\"o\">:=</span>\n<span class=\"k\">begin</span>\n  <span class=\"n\">intro</span> <span class=\"n\">h</span><span class=\"o\">,</span>\n  <span class=\"n\">specialize</span> <span class=\"n\">h</span> <span class=\"mi\">0</span><span class=\"o\">,</span>\n  <span class=\"n\">tauto</span><span class=\"o\">,</span>\n<span class=\"kn\">end</span>\n\n<span class=\"kn\">example</span> <span class=\"o\">:</span> <span class=\"bp\">¬</span> <span class=\"o\">(</span><span class=\"bp\">∀</span> <span class=\"n\">x</span> <span class=\"o\">:</span> <span class=\"n\">nat</span><span class=\"o\">,</span> <span class=\"n\">x</span> <span class=\"bp\">=</span> <span class=\"mi\">2</span><span class=\"o\">)</span> <span class=\"o\">:=</span>\n<span class=\"k\">begin</span>\n  <span class=\"n\">push_neg</span><span class=\"o\">,</span>\n  <span class=\"n\">use</span> <span class=\"mi\">0</span><span class=\"o\">,</span>\n<span class=\"kn\">end</span>\n</pre></div>",
        "id": 188363730,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1581932092
    },
    {
        "content": "<p>Thank you all for your replies! This has been very useful. Here are the two more complex cases I've been working with where I have trouble negotiating the universal quantifiers. I copied my previous post explaining what I'm trying to prove below.  I'm having trouble producing a counterexample, and feel like it would be easier to use predicate logic to reduce the expression to something false, though I'm not totally sure how to best handle expressions like <code>finset.univ.sum</code> in cases like this. Any thoughts would be appreciate! </p>\n<div class=\"codehilite\"><pre><span></span><span class=\"n\">open_locale</span> <span class=\"n\">classical</span>\n<span class=\"n\">def</span> <span class=\"n\">checkStrategyMN</span> <span class=\"o\">{</span><span class=\"n\">m</span> <span class=\"n\">n</span> <span class=\"o\">:</span> <span class=\"n\">nat</span><span class=\"o\">}</span> <span class=\"o\">(</span><span class=\"n\">strategyA</span> <span class=\"o\">:</span> <span class=\"n\">fin</span> <span class=\"n\">m</span> <span class=\"bp\">→</span> <span class=\"n\">fin</span> <span class=\"n\">n</span> <span class=\"bp\">→</span> <span class=\"n\">nat</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">strategyB</span><span class=\"o\">:</span> <span class=\"n\">fin</span> <span class=\"n\">n</span> <span class=\"bp\">→</span> <span class=\"n\">fin</span> <span class=\"n\">m</span> <span class=\"bp\">→</span> <span class=\"n\">nat</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"kt\">Prop</span> <span class=\"o\">:=</span>\n<span class=\"o\">(</span><span class=\"bp\">∀</span> <span class=\"n\">r</span> <span class=\"o\">:</span> <span class=\"n\">fin</span> <span class=\"n\">m</span><span class=\"o\">,</span> <span class=\"o\">(</span><span class=\"bp\">∀</span> <span class=\"n\">c</span> <span class=\"o\">:</span> <span class=\"n\">fin</span> <span class=\"n\">n</span><span class=\"o\">,</span> <span class=\"o\">((</span><span class=\"n\">finset</span><span class=\"bp\">.</span><span class=\"n\">univ</span><span class=\"bp\">.</span><span class=\"n\">sum</span> <span class=\"o\">(</span><span class=\"n\">strategyA</span> <span class=\"n\">r</span><span class=\"o\">))</span><span class=\"bp\">.</span><span class=\"n\">even</span><span class=\"o\">)</span> <span class=\"bp\">∧</span> <span class=\"o\">(</span><span class=\"bp\">¬</span> <span class=\"o\">(</span><span class=\"n\">finset</span><span class=\"bp\">.</span><span class=\"n\">univ</span><span class=\"bp\">.</span><span class=\"n\">sum</span> <span class=\"o\">(</span><span class=\"n\">strategyB</span> <span class=\"n\">c</span><span class=\"o\">))</span><span class=\"bp\">.</span><span class=\"n\">even</span><span class=\"o\">)</span> <span class=\"bp\">∧</span> <span class=\"o\">((</span><span class=\"n\">strategyA</span> <span class=\"n\">r</span> <span class=\"n\">c</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"o\">(</span><span class=\"n\">strategyB</span> <span class=\"n\">c</span> <span class=\"n\">r</span><span class=\"o\">))))</span>\n\n<span class=\"kn\">theorem</span> <span class=\"n\">noStrategyMN</span> <span class=\"o\">{</span><span class=\"n\">m</span> <span class=\"n\">n</span> <span class=\"o\">:</span> <span class=\"n\">nat</span><span class=\"o\">}</span> <span class=\"o\">(</span><span class=\"n\">strategyA</span> <span class=\"o\">:</span> <span class=\"n\">fin</span> <span class=\"n\">m</span> <span class=\"bp\">→</span> <span class=\"n\">fin</span> <span class=\"n\">n</span> <span class=\"bp\">→</span> <span class=\"n\">nat</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">strategyB</span><span class=\"o\">:</span> <span class=\"n\">fin</span> <span class=\"n\">n</span> <span class=\"bp\">→</span> <span class=\"n\">fin</span> <span class=\"n\">m</span> <span class=\"bp\">→</span> <span class=\"n\">nat</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"o\">((</span><span class=\"bp\">¬</span> <span class=\"n\">m</span><span class=\"bp\">.</span><span class=\"n\">even</span><span class=\"o\">)</span> <span class=\"bp\">∧</span> <span class=\"o\">(</span><span class=\"bp\">¬</span> <span class=\"n\">n</span><span class=\"bp\">.</span><span class=\"n\">even</span><span class=\"o\">))</span> <span class=\"bp\">→</span> <span class=\"bp\">¬</span> <span class=\"o\">(</span><span class=\"n\">checkStrategyMN</span> <span class=\"n\">strategyA</span> <span class=\"n\">strategyB</span><span class=\"o\">)</span> <span class=\"o\">:=</span>\n<span class=\"k\">begin</span>\n<span class=\"n\">rw</span> <span class=\"n\">checkStrategyMN</span><span class=\"o\">,</span>\n<span class=\"n\">intros</span> <span class=\"n\">h1</span><span class=\"o\">,</span>\n<span class=\"n\">finish</span><span class=\"o\">,</span>\n<span class=\"kn\">end</span>\n</pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><span class=\"n\">def</span> <span class=\"n\">board</span> <span class=\"o\">{</span><span class=\"n\">m</span> <span class=\"n\">n</span> <span class=\"o\">:</span> <span class=\"n\">nat</span><span class=\"o\">}</span> <span class=\"o\">(</span><span class=\"n\">strategyA</span> <span class=\"o\">:</span> <span class=\"n\">fin</span> <span class=\"n\">m</span> <span class=\"bp\">→</span> <span class=\"n\">fin</span> <span class=\"n\">n</span> <span class=\"bp\">→</span> <span class=\"n\">nat</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">strategyB</span><span class=\"o\">:</span> <span class=\"n\">fin</span> <span class=\"n\">n</span> <span class=\"bp\">→</span> <span class=\"n\">fin</span> <span class=\"n\">m</span> <span class=\"bp\">→</span> <span class=\"n\">nat</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"n\">fin</span> <span class=\"n\">m</span> <span class=\"bp\">→</span> <span class=\"n\">fin</span> <span class=\"n\">n</span> <span class=\"bp\">→</span> <span class=\"n\">nat</span> <span class=\"o\">:=</span> <span class=\"n\">strategyA</span> <span class=\"c1\">--woah man...these representations are THE SAME!!!! (function that returns a vector and a matrix)</span>\n\n<span class=\"n\">def</span> <span class=\"n\">consistent</span> <span class=\"o\">{</span><span class=\"n\">m</span> <span class=\"n\">n</span> <span class=\"o\">:</span> <span class=\"n\">nat</span><span class=\"o\">}</span> <span class=\"o\">(</span><span class=\"n\">strategyA</span> <span class=\"o\">:</span> <span class=\"n\">fin</span> <span class=\"n\">m</span> <span class=\"bp\">→</span> <span class=\"n\">fin</span> <span class=\"n\">n</span> <span class=\"bp\">→</span> <span class=\"n\">nat</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">strategyB</span><span class=\"o\">:</span> <span class=\"n\">fin</span> <span class=\"n\">n</span> <span class=\"bp\">→</span> <span class=\"n\">fin</span> <span class=\"n\">m</span> <span class=\"bp\">→</span> <span class=\"n\">nat</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"kt\">Prop</span>\n<span class=\"o\">:=</span> <span class=\"bp\">∀</span> <span class=\"o\">(</span><span class=\"n\">r</span> <span class=\"o\">:</span> <span class=\"n\">fin</span> <span class=\"n\">m</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">c</span> <span class=\"o\">:</span> <span class=\"n\">fin</span> <span class=\"n\">n</span><span class=\"o\">),</span> <span class=\"o\">(</span><span class=\"n\">strategyA</span> <span class=\"n\">r</span> <span class=\"n\">c</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"o\">(</span><span class=\"n\">strategyB</span> <span class=\"n\">c</span> <span class=\"n\">r</span><span class=\"o\">)</span>\n\n<span class=\"n\">def</span> <span class=\"n\">sampleA</span> <span class=\"o\">{</span><span class=\"n\">m</span> <span class=\"n\">n</span> <span class=\"o\">:</span> <span class=\"n\">nat</span><span class=\"o\">}</span> <span class=\"o\">(</span><span class=\"n\">board</span> <span class=\"o\">:</span> <span class=\"n\">fin</span> <span class=\"n\">m</span> <span class=\"bp\">→</span> <span class=\"n\">fin</span> <span class=\"n\">n</span> <span class=\"bp\">→</span> <span class=\"n\">nat</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"n\">fin</span> <span class=\"n\">m</span> <span class=\"bp\">→</span> <span class=\"n\">fin</span> <span class=\"n\">n</span> <span class=\"bp\">→</span> <span class=\"n\">nat</span> <span class=\"o\">:=</span> <span class=\"n\">board</span>\n\n<span class=\"n\">def</span> <span class=\"n\">sampleB</span> <span class=\"o\">{</span><span class=\"n\">m</span> <span class=\"n\">n</span> <span class=\"o\">:</span> <span class=\"n\">nat</span><span class=\"o\">}</span> <span class=\"o\">(</span><span class=\"n\">board</span> <span class=\"o\">:</span> <span class=\"n\">fin</span> <span class=\"n\">m</span> <span class=\"bp\">→</span> <span class=\"n\">fin</span> <span class=\"n\">n</span> <span class=\"bp\">→</span> <span class=\"n\">nat</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"n\">fin</span> <span class=\"n\">n</span> <span class=\"bp\">→</span> <span class=\"n\">fin</span> <span class=\"n\">m</span> <span class=\"bp\">→</span> <span class=\"n\">nat</span> <span class=\"o\">:=</span> <span class=\"bp\">λ</span> <span class=\"o\">(</span><span class=\"n\">n</span> <span class=\"o\">:</span> <span class=\"n\">fin</span> <span class=\"n\">n</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">m</span> <span class=\"o\">:</span> <span class=\"n\">fin</span> <span class=\"n\">m</span><span class=\"o\">),</span> <span class=\"n\">board</span> <span class=\"n\">m</span> <span class=\"n\">n</span>\n<span class=\"bp\">#</span><span class=\"kn\">check</span> <span class=\"n\">sampleA</span>\n<span class=\"bp\">#</span><span class=\"kn\">check</span> <span class=\"n\">sampleB</span>\n\n<span class=\"kn\">lemma</span> <span class=\"n\">board_equiv_strategy</span> <span class=\"o\">{</span><span class=\"n\">m</span> <span class=\"n\">n</span> <span class=\"o\">:</span> <span class=\"n\">nat</span><span class=\"o\">}</span> <span class=\"o\">(</span><span class=\"n\">strategyA</span> <span class=\"o\">:</span> <span class=\"n\">fin</span> <span class=\"n\">m</span> <span class=\"bp\">→</span> <span class=\"n\">fin</span> <span class=\"n\">n</span> <span class=\"bp\">→</span> <span class=\"n\">nat</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">strategyB</span><span class=\"o\">:</span> <span class=\"n\">fin</span> <span class=\"n\">n</span> <span class=\"bp\">→</span> <span class=\"n\">fin</span> <span class=\"n\">m</span> <span class=\"bp\">→</span> <span class=\"n\">nat</span><span class=\"o\">)</span> <span class=\"o\">:</span>\n<span class=\"o\">(</span><span class=\"n\">consistent</span> <span class=\"n\">strategyA</span> <span class=\"n\">strategyB</span><span class=\"o\">)</span> <span class=\"bp\">→</span> <span class=\"o\">(</span><span class=\"n\">strategyA</span> <span class=\"bp\">=</span> <span class=\"o\">((</span><span class=\"n\">sampleA</span> <span class=\"o\">(</span><span class=\"n\">board</span> <span class=\"n\">strategyA</span> <span class=\"n\">strategyB</span><span class=\"o\">)))</span> <span class=\"bp\">∧</span> <span class=\"o\">(</span><span class=\"n\">strategyB</span> <span class=\"bp\">=</span> <span class=\"o\">(</span><span class=\"n\">sampleB</span> <span class=\"o\">(</span><span class=\"n\">board</span> <span class=\"n\">strategyA</span> <span class=\"n\">strategyB</span><span class=\"o\">))))</span>\n<span class=\"o\">:=</span>\n<span class=\"k\">begin</span>\n<span class=\"n\">intro</span> <span class=\"n\">h</span><span class=\"o\">,</span>\n<span class=\"n\">split</span><span class=\"o\">,</span>\n\n<span class=\"n\">rw</span> <span class=\"n\">sampleA</span><span class=\"o\">,</span>\n<span class=\"n\">rw</span> <span class=\"n\">board</span><span class=\"o\">,</span>\n\n<span class=\"n\">rw</span> <span class=\"n\">consistent</span> <span class=\"n\">at</span> <span class=\"n\">h</span><span class=\"o\">,</span>\n<span class=\"n\">rw</span> <span class=\"n\">sampleB</span><span class=\"o\">,</span>\n<span class=\"n\">rw</span> <span class=\"n\">board</span><span class=\"o\">,</span>\n<span class=\"n\">rw</span> <span class=\"n\">h</span><span class=\"o\">,</span>\n<span class=\"kn\">end</span>\n\n<span class=\"n\">def</span> <span class=\"n\">each_row_sum_even</span> <span class=\"o\">{</span><span class=\"n\">m</span> <span class=\"n\">n</span> <span class=\"o\">:</span> <span class=\"n\">nat</span><span class=\"o\">}</span> <span class=\"o\">(</span><span class=\"n\">board</span> <span class=\"o\">:</span> <span class=\"n\">fin</span> <span class=\"n\">m</span> <span class=\"bp\">→</span> <span class=\"n\">fin</span> <span class=\"n\">n</span> <span class=\"bp\">→</span> <span class=\"n\">nat</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"kt\">Prop</span> <span class=\"o\">:=</span> <span class=\"bp\">∀</span> <span class=\"o\">(</span><span class=\"n\">r</span> <span class=\"o\">:</span> <span class=\"n\">fin</span> <span class=\"n\">m</span><span class=\"o\">),</span> <span class=\"o\">(</span><span class=\"n\">finset</span><span class=\"bp\">.</span><span class=\"n\">univ</span><span class=\"bp\">.</span><span class=\"n\">sum</span> <span class=\"o\">(</span><span class=\"n\">sampleA</span> <span class=\"n\">board</span> <span class=\"n\">r</span><span class=\"o\">))</span><span class=\"bp\">.</span><span class=\"n\">even</span>\n\n<span class=\"n\">def</span> <span class=\"n\">each_col_sum_odd</span> <span class=\"o\">{</span><span class=\"n\">m</span> <span class=\"n\">n</span> <span class=\"o\">:</span> <span class=\"n\">nat</span><span class=\"o\">}</span> <span class=\"o\">(</span><span class=\"n\">board</span> <span class=\"o\">:</span> <span class=\"n\">fin</span> <span class=\"n\">m</span> <span class=\"bp\">→</span> <span class=\"n\">fin</span> <span class=\"n\">n</span> <span class=\"bp\">→</span> <span class=\"n\">nat</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"kt\">Prop</span> <span class=\"o\">:=</span> <span class=\"bp\">∀</span> <span class=\"o\">(</span><span class=\"n\">c</span> <span class=\"o\">:</span> <span class=\"n\">fin</span> <span class=\"n\">n</span><span class=\"o\">),</span> <span class=\"bp\">¬</span><span class=\"o\">(</span><span class=\"n\">finset</span><span class=\"bp\">.</span><span class=\"n\">univ</span><span class=\"bp\">.</span><span class=\"n\">sum</span> <span class=\"o\">(</span><span class=\"n\">sampleB</span> <span class=\"n\">board</span> <span class=\"n\">c</span><span class=\"o\">))</span><span class=\"bp\">.</span><span class=\"n\">even</span>\n\n<span class=\"n\">def</span> <span class=\"n\">even_strategy</span> <span class=\"o\">{</span><span class=\"n\">m</span> <span class=\"n\">n</span> <span class=\"o\">:</span> <span class=\"n\">nat</span><span class=\"o\">}</span> <span class=\"o\">(</span><span class=\"n\">strategyA</span> <span class=\"o\">:</span> <span class=\"n\">fin</span> <span class=\"n\">m</span> <span class=\"bp\">→</span> <span class=\"n\">fin</span> <span class=\"n\">n</span> <span class=\"bp\">→</span> <span class=\"n\">nat</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"kt\">Prop</span> <span class=\"o\">:=</span> <span class=\"o\">(</span><span class=\"bp\">∀</span> <span class=\"n\">r</span> <span class=\"o\">:</span> <span class=\"n\">fin</span> <span class=\"n\">m</span><span class=\"o\">,</span> <span class=\"o\">(</span><span class=\"bp\">∀</span> <span class=\"n\">c</span> <span class=\"o\">:</span> <span class=\"n\">fin</span> <span class=\"n\">n</span><span class=\"o\">,</span> <span class=\"o\">((</span><span class=\"n\">finset</span><span class=\"bp\">.</span><span class=\"n\">univ</span><span class=\"bp\">.</span><span class=\"n\">sum</span> <span class=\"o\">(</span><span class=\"n\">strategyA</span> <span class=\"n\">r</span><span class=\"o\">))</span><span class=\"bp\">.</span><span class=\"n\">even</span><span class=\"o\">)))</span>\n\n<span class=\"n\">def</span> <span class=\"n\">odd_strategy</span> <span class=\"o\">{</span><span class=\"n\">m</span> <span class=\"n\">n</span> <span class=\"o\">:</span> <span class=\"n\">nat</span><span class=\"o\">}</span> <span class=\"o\">(</span><span class=\"n\">strategyB</span> <span class=\"o\">:</span> <span class=\"n\">fin</span> <span class=\"n\">n</span> <span class=\"bp\">→</span> <span class=\"n\">fin</span> <span class=\"n\">m</span> <span class=\"bp\">→</span> <span class=\"n\">nat</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"kt\">Prop</span> <span class=\"o\">:=</span> <span class=\"o\">(</span><span class=\"bp\">∀</span> <span class=\"n\">r</span> <span class=\"o\">:</span> <span class=\"n\">fin</span> <span class=\"n\">m</span><span class=\"o\">,</span> <span class=\"o\">(</span><span class=\"bp\">∀</span> <span class=\"n\">c</span> <span class=\"o\">:</span> <span class=\"n\">fin</span> <span class=\"n\">n</span><span class=\"o\">,</span> <span class=\"o\">(</span><span class=\"bp\">¬</span> <span class=\"o\">(</span><span class=\"n\">finset</span><span class=\"bp\">.</span><span class=\"n\">univ</span><span class=\"bp\">.</span><span class=\"n\">sum</span> <span class=\"o\">(</span><span class=\"n\">strategyB</span> <span class=\"n\">c</span><span class=\"o\">))</span><span class=\"bp\">.</span><span class=\"n\">even</span><span class=\"o\">)))</span>\n\n<span class=\"kn\">lemma</span> <span class=\"n\">even_strategy_implies_even_rows</span> <span class=\"o\">{</span><span class=\"n\">m</span> <span class=\"n\">n</span> <span class=\"o\">:</span> <span class=\"n\">nat</span><span class=\"o\">}</span> <span class=\"o\">(</span><span class=\"n\">strategyA</span> <span class=\"o\">:</span> <span class=\"n\">fin</span> <span class=\"n\">m</span> <span class=\"bp\">→</span> <span class=\"n\">fin</span> <span class=\"n\">n</span> <span class=\"bp\">→</span> <span class=\"n\">nat</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">strategyB</span> <span class=\"o\">:</span> <span class=\"n\">fin</span> <span class=\"n\">n</span> <span class=\"bp\">→</span> <span class=\"n\">fin</span> <span class=\"n\">m</span> <span class=\"bp\">→</span> <span class=\"n\">nat</span><span class=\"o\">)</span>\n<span class=\"o\">:</span> <span class=\"o\">(</span><span class=\"n\">even_strategy</span> <span class=\"n\">strategyA</span><span class=\"o\">)</span> <span class=\"bp\">→</span> <span class=\"n\">each_row_sum_even</span> <span class=\"o\">(</span><span class=\"n\">board</span> <span class=\"n\">strategyA</span> <span class=\"n\">strategyB</span><span class=\"o\">)</span>\n<span class=\"o\">:=</span>\n<span class=\"k\">begin</span>\n<span class=\"n\">sorry</span>\n<span class=\"kn\">end</span>\n\n<span class=\"kn\">lemma</span> <span class=\"n\">odd_strategy_implies_odd_cols</span> <span class=\"o\">{</span><span class=\"n\">m</span> <span class=\"n\">n</span> <span class=\"o\">:</span> <span class=\"n\">nat</span><span class=\"o\">}</span> <span class=\"o\">(</span><span class=\"n\">strategyA</span> <span class=\"o\">:</span> <span class=\"n\">fin</span> <span class=\"n\">m</span> <span class=\"bp\">→</span> <span class=\"n\">fin</span> <span class=\"n\">n</span> <span class=\"bp\">→</span> <span class=\"n\">nat</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">strategyB</span> <span class=\"o\">:</span> <span class=\"n\">fin</span> <span class=\"n\">n</span> <span class=\"bp\">→</span> <span class=\"n\">fin</span> <span class=\"n\">m</span> <span class=\"bp\">→</span> <span class=\"n\">nat</span><span class=\"o\">)</span>\n<span class=\"o\">:</span> <span class=\"o\">(</span><span class=\"n\">odd_strategy</span> <span class=\"n\">strategyB</span><span class=\"o\">)</span> <span class=\"bp\">→</span> <span class=\"n\">each_col_sum_odd</span> <span class=\"o\">(</span><span class=\"n\">board</span> <span class=\"n\">strategyA</span> <span class=\"n\">strategyB</span><span class=\"o\">)</span>\n<span class=\"o\">:=</span>\n<span class=\"k\">begin</span>\n<span class=\"n\">sorry</span>\n<span class=\"kn\">end</span>\n\n<span class=\"n\">def</span> <span class=\"n\">row_sum</span> <span class=\"o\">{</span><span class=\"n\">m</span> <span class=\"n\">n</span> <span class=\"o\">:</span> <span class=\"n\">nat</span><span class=\"o\">}</span> <span class=\"o\">(</span><span class=\"n\">board</span> <span class=\"o\">:</span> <span class=\"n\">fin</span> <span class=\"n\">m</span> <span class=\"bp\">→</span> <span class=\"n\">fin</span> <span class=\"n\">n</span> <span class=\"bp\">→</span> <span class=\"n\">nat</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"n\">nat</span> <span class=\"o\">:=</span> <span class=\"o\">(</span><span class=\"n\">finset</span><span class=\"bp\">.</span><span class=\"n\">univ</span><span class=\"bp\">.</span><span class=\"n\">sum</span> <span class=\"o\">(</span><span class=\"n\">sampleA</span> <span class=\"n\">board</span><span class=\"o\">))</span>\n\n<span class=\"n\">def</span> <span class=\"n\">col_sum</span> <span class=\"o\">{</span><span class=\"n\">m</span> <span class=\"n\">n</span> <span class=\"o\">:</span> <span class=\"n\">nat</span><span class=\"o\">}</span> <span class=\"o\">(</span><span class=\"n\">board</span> <span class=\"o\">:</span> <span class=\"n\">fin</span> <span class=\"n\">m</span> <span class=\"bp\">→</span> <span class=\"n\">fin</span> <span class=\"n\">n</span> <span class=\"bp\">→</span> <span class=\"n\">nat</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"n\">nat</span> <span class=\"o\">:=</span> <span class=\"o\">(</span><span class=\"n\">finset</span><span class=\"bp\">.</span><span class=\"n\">univ</span><span class=\"bp\">.</span><span class=\"n\">sum</span> <span class=\"o\">(</span><span class=\"n\">sampleB</span> <span class=\"n\">board</span><span class=\"o\">))</span>\n\n<span class=\"kn\">lemma</span> <span class=\"n\">row_sum_eq_col_sum</span> <span class=\"o\">{</span><span class=\"n\">m</span> <span class=\"n\">n</span> <span class=\"o\">:</span> <span class=\"n\">nat</span><span class=\"o\">}</span> <span class=\"o\">(</span><span class=\"n\">board</span> <span class=\"o\">:</span> <span class=\"n\">fin</span> <span class=\"n\">m</span> <span class=\"bp\">→</span> <span class=\"n\">fin</span> <span class=\"n\">n</span> <span class=\"bp\">→</span> <span class=\"n\">nat</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"n\">row_sum</span> <span class=\"n\">board</span> <span class=\"bp\">=</span> <span class=\"n\">col_sum</span> <span class=\"n\">board</span>\n<span class=\"o\">:=</span>\n<span class=\"k\">begin</span>\n<span class=\"n\">sorry</span>\n<span class=\"kn\">end</span>\n\n<span class=\"kn\">theorem</span> <span class=\"n\">noStrategyMN2</span> <span class=\"o\">{</span><span class=\"n\">m</span> <span class=\"n\">n</span> <span class=\"o\">:</span> <span class=\"n\">nat</span><span class=\"o\">}</span> <span class=\"o\">(</span><span class=\"n\">strategyA</span> <span class=\"o\">:</span> <span class=\"n\">fin</span> <span class=\"n\">m</span> <span class=\"bp\">→</span> <span class=\"n\">fin</span> <span class=\"n\">n</span> <span class=\"bp\">→</span> <span class=\"n\">nat</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">strategyB</span><span class=\"o\">:</span> <span class=\"n\">fin</span> <span class=\"n\">n</span> <span class=\"bp\">→</span> <span class=\"n\">fin</span> <span class=\"n\">m</span> <span class=\"bp\">→</span> <span class=\"n\">nat</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"bp\">¬</span> <span class=\"o\">((</span><span class=\"n\">consistent</span> <span class=\"n\">strategyA</span> <span class=\"n\">strategyB</span><span class=\"o\">)</span> <span class=\"bp\">∧</span>  <span class=\"o\">(</span><span class=\"n\">even_strategy</span> <span class=\"n\">strategyA</span><span class=\"o\">)</span> <span class=\"bp\">∧</span> <span class=\"o\">(</span><span class=\"n\">odd_strategy</span> <span class=\"n\">strategyB</span><span class=\"o\">))</span>\n<span class=\"o\">:=</span>\n<span class=\"k\">begin</span>\n<span class=\"n\">intro</span> <span class=\"n\">h</span><span class=\"o\">,</span>\n<span class=\"n\">cases</span> <span class=\"n\">h</span> <span class=\"k\">with</span> <span class=\"n\">c</span> <span class=\"n\">y</span><span class=\"o\">,</span>\n<span class=\"n\">cases</span> <span class=\"n\">y</span> <span class=\"k\">with</span> <span class=\"n\">even</span> <span class=\"n\">odd</span><span class=\"o\">,</span>\n<span class=\"k\">have</span> <span class=\"n\">x</span> <span class=\"o\">:=</span> <span class=\"n\">even_strategy_implies_even_rows</span> <span class=\"n\">strategyA</span> <span class=\"n\">strategyB</span> <span class=\"n\">even</span><span class=\"o\">,</span>\n<span class=\"k\">have</span> <span class=\"n\">y</span> <span class=\"o\">:=</span> <span class=\"n\">odd_strategy_implies_odd_cols</span> <span class=\"n\">strategyA</span> <span class=\"n\">strategyB</span> <span class=\"n\">odd</span><span class=\"o\">,</span>\n<span class=\"kn\">end</span>\n</pre></div>\n\n\n<p><strong>The Game:</strong> Alice is assigned a row and Bob is assigned a column of a <del>3x3</del> mxn board for odd m and n. Neither knows the assignment of the other. The task is for each of them to color their respective row/column with Green and Red tiles (aka 1s and 0s) while meeting the following criteria:</p>\n<ol>\n<li>Rows must have an even number of Green tiles</li>\n<li>Columns must have an odd number of Green tiles</li>\n<li>The two colorings must be consistent - they must agree on the color of the shared tile</li>\n<li>They can plan a strategy beforehand but can't communicate after each gets their respective assignment.</li>\n</ol>\n<p>My goal is to prove that there is no guaranteed successful strategy.</p>\n<p><strong>Lean Proof 1</strong>:  We can think of a strategy as two maps (<code>strategyA</code> and <code>strategyB</code>) one from a row number to a map from column number to element of that row, the other from a column number to a map from row number to element in that column. <code>checkStrategy</code> checks that a given strategy satisfies the conditions listed.</p>\n<p><strong>Lean Proof 2</strong>:  Since Alice and Bob must agree on the value of the intersection of their respective row/column, and the location of this intersection is arbitrary, we can think of their strategies as sampling from a single tiled <del>3x3</del> m x n board. Summing the values in the rows of this single board we get an even number, but summing the values in the columns we get an odd number. The sums of the values in all the tiles should be the same whether we do it by rows or columns, so we get a contradiction. To do this in lean, I start by defining the equivalent board, and what sampleA and sampleB would be from that board. Next, I am trying to prove board_equiv: the statement that sampling from this board is equivalent to both strategies if all the conditions are met. Next I show that the rows of the board must have even sums and the cols have odd sums, if the original strategies have even and odd sums. From here, I'm hoping showing the contradiction shouldn't be too hard, but I haven't gotten that far yet.</p>",
        "id": 188399196,
        "sender_full_name": "Rocky Kamen-Rubio",
        "timestamp": 1581964878
    },
    {
        "content": "<p>Please add \"lean\" after each opening of a code block. This way you'll have syntax highlighting.</p>",
        "id": 188402742,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1581968834
    },
    {
        "content": "<p>Forgot about that, thanks for the reminder!</p>",
        "id": 188403961,
        "sender_full_name": "Rocky Kamen-Rubio",
        "timestamp": 1581970190
    }
]