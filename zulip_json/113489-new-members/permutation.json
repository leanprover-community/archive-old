[
    {
        "content": "<p>this lemma about permutation reads very simple, but i have a hard time proving it. could someone give me a hint?</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"kn\">inductive</span> <span class=\"n\">permuted</span> <span class=\"o\">:</span> <span class=\"n\">list</span> <span class=\"bp\">ℕ</span> <span class=\"bp\">-&gt;</span> <span class=\"n\">list</span> <span class=\"bp\">ℕ</span> <span class=\"bp\">-&gt;</span> <span class=\"kt\">Prop</span>\n<span class=\"bp\">|</span> <span class=\"n\">nil</span> <span class=\"o\">{}</span> <span class=\"o\">:</span> <span class=\"n\">permuted</span> <span class=\"o\">[]</span> <span class=\"o\">[]</span>\n<span class=\"bp\">|</span> <span class=\"n\">skip</span> <span class=\"o\">{</span><span class=\"n\">x</span> <span class=\"o\">:</span> <span class=\"bp\">ℕ</span><span class=\"o\">}</span> <span class=\"o\">{</span><span class=\"n\">l</span> <span class=\"n\">l&#39;</span> <span class=\"o\">:</span> <span class=\"n\">list</span> <span class=\"bp\">ℕ</span><span class=\"o\">}</span> <span class=\"o\">:</span> <span class=\"n\">permuted</span> <span class=\"n\">l</span> <span class=\"n\">l&#39;</span> <span class=\"bp\">-&gt;</span> <span class=\"n\">permuted</span> <span class=\"o\">(</span><span class=\"n\">x</span><span class=\"bp\">::</span><span class=\"n\">l</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">x</span><span class=\"bp\">::</span><span class=\"n\">l&#39;</span><span class=\"o\">)</span>\n<span class=\"bp\">|</span> <span class=\"n\">swap</span> <span class=\"o\">{</span><span class=\"n\">x</span> <span class=\"n\">y</span> <span class=\"o\">:</span> <span class=\"bp\">ℕ</span><span class=\"o\">}</span> <span class=\"o\">{</span><span class=\"n\">l</span> <span class=\"o\">:</span> <span class=\"n\">list</span> <span class=\"bp\">ℕ</span><span class=\"o\">}</span> <span class=\"o\">:</span> <span class=\"n\">permuted</span> <span class=\"o\">(</span><span class=\"n\">y</span><span class=\"bp\">::</span><span class=\"n\">x</span><span class=\"bp\">::</span><span class=\"n\">l</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">x</span><span class=\"bp\">::</span><span class=\"n\">y</span><span class=\"bp\">::</span><span class=\"n\">l</span><span class=\"o\">)</span>\n<span class=\"bp\">|</span> <span class=\"n\">trans</span> <span class=\"o\">{</span><span class=\"n\">l</span> <span class=\"n\">l&#39;</span> <span class=\"n\">l&#39;&#39;</span> <span class=\"o\">:</span> <span class=\"n\">list</span> <span class=\"bp\">ℕ</span><span class=\"o\">}</span> <span class=\"o\">:</span> <span class=\"n\">permuted</span> <span class=\"n\">l</span> <span class=\"n\">l&#39;</span> <span class=\"bp\">-&gt;</span> <span class=\"n\">permuted</span> <span class=\"n\">l&#39;</span> <span class=\"n\">l&#39;&#39;</span> <span class=\"bp\">-&gt;</span> <span class=\"n\">permuted</span> <span class=\"n\">l</span> <span class=\"n\">l&#39;&#39;</span>\n\n<span class=\"kn\">lemma</span> <span class=\"n\">cons_to_a_permutation</span>\n    <span class=\"o\">{</span><span class=\"n\">pre</span> <span class=\"n\">suf</span> <span class=\"n\">tail</span> <span class=\"o\">:</span> <span class=\"n\">list</span> <span class=\"bp\">ℕ</span><span class=\"o\">}</span> <span class=\"o\">{</span><span class=\"n\">head</span> <span class=\"o\">:</span> <span class=\"bp\">ℕ</span><span class=\"o\">}</span>\n    <span class=\"o\">(</span><span class=\"n\">h</span> <span class=\"o\">:</span> <span class=\"n\">permuted</span> <span class=\"n\">tail</span> <span class=\"o\">(</span><span class=\"n\">pre</span> <span class=\"bp\">++</span> <span class=\"n\">suf</span><span class=\"o\">))</span>\n    <span class=\"o\">:</span> <span class=\"n\">permuted</span> <span class=\"o\">(</span><span class=\"n\">head</span> <span class=\"bp\">::</span> <span class=\"n\">tail</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">pre</span> <span class=\"bp\">++</span> <span class=\"n\">head</span> <span class=\"bp\">::</span> <span class=\"n\">suf</span><span class=\"o\">)</span> <span class=\"o\">:=</span>\n<span class=\"k\">begin</span>\n  <span class=\"n\">sorry</span>\n<span class=\"kn\">end</span>\n</pre></div>",
        "id": 194891898,
        "sender_full_name": "Nam",
        "timestamp": 1587536301
    },
    {
        "content": "<p>Have you looked at <code>data.list.perm</code>?</p>",
        "id": 194892639,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1587537296
    },
    {
        "content": "<p>Try this:</p>",
        "id": 194892742,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1587537456
    },
    {
        "content": "<div class=\"codehilite\"><pre><span></span><span class=\"kn\">lemma</span> <span class=\"n\">permuted_middle</span>\n    <span class=\"o\">{</span><span class=\"n\">pre</span> <span class=\"n\">suf</span> <span class=\"o\">:</span> <span class=\"n\">list</span> <span class=\"bp\">ℕ</span><span class=\"o\">}</span> <span class=\"o\">{</span><span class=\"n\">head</span> <span class=\"o\">:</span> <span class=\"bp\">ℕ</span><span class=\"o\">}</span>\n    <span class=\"o\">:</span> <span class=\"n\">permuted</span> <span class=\"o\">(</span><span class=\"n\">head</span> <span class=\"bp\">::</span> <span class=\"n\">pre</span> <span class=\"bp\">++</span> <span class=\"n\">suf</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">pre</span> <span class=\"bp\">++</span> <span class=\"n\">head</span> <span class=\"bp\">::</span> <span class=\"n\">suf</span><span class=\"o\">)</span> <span class=\"o\">:=</span>\n<span class=\"k\">begin</span>\n  <span class=\"n\">induction</span> <span class=\"n\">pre</span><span class=\"o\">,</span>\n  <span class=\"o\">{</span> <span class=\"n\">sorry</span> <span class=\"o\">},</span>\n  <span class=\"o\">{</span> <span class=\"n\">sorry</span> <span class=\"o\">},</span>\n<span class=\"kn\">end</span>\n\n<span class=\"kn\">lemma</span> <span class=\"n\">cons_to_a_permutation</span>\n    <span class=\"o\">{</span><span class=\"n\">pre</span> <span class=\"n\">suf</span> <span class=\"n\">tail</span> <span class=\"o\">:</span> <span class=\"n\">list</span> <span class=\"bp\">ℕ</span><span class=\"o\">}</span> <span class=\"o\">{</span><span class=\"n\">head</span> <span class=\"o\">:</span> <span class=\"bp\">ℕ</span><span class=\"o\">}</span>\n    <span class=\"o\">(</span><span class=\"n\">h</span> <span class=\"o\">:</span> <span class=\"n\">permuted</span> <span class=\"n\">tail</span> <span class=\"o\">(</span><span class=\"n\">pre</span> <span class=\"bp\">++</span> <span class=\"n\">suf</span><span class=\"o\">))</span>\n    <span class=\"o\">:</span> <span class=\"n\">permuted</span> <span class=\"o\">(</span><span class=\"n\">head</span> <span class=\"bp\">::</span> <span class=\"n\">tail</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">pre</span> <span class=\"bp\">++</span> <span class=\"n\">head</span> <span class=\"bp\">::</span> <span class=\"n\">suf</span><span class=\"o\">)</span> <span class=\"o\">:=</span>\n<span class=\"n\">permuted</span><span class=\"bp\">.</span><span class=\"n\">trans</span> <span class=\"o\">(</span><span class=\"n\">permuted</span><span class=\"bp\">.</span><span class=\"n\">skip</span> <span class=\"n\">h</span><span class=\"o\">)</span> <span class=\"n\">permuted_middle</span>\n</pre></div>",
        "id": 194892751,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1587537459
    },
    {
        "content": "<p>Mario worked all this stuff out already. It's more delicate than you think</p>",
        "id": 194899779,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1587543393
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110049\">Mario Carneiro</span> <a href=\"#narrow/stream/113489-new-members/topic/permutation/near/194892639\" title=\"#narrow/stream/113489-new-members/topic/permutation/near/194892639\">said</a>:</p>\n<blockquote>\n<p>Have you looked at <code>data.list.perm</code>?</p>\n</blockquote>\n<p>I did not. Thanks a lot, Mario! <code>perm_cons_app_cons</code> looks like what I need.</p>",
        "id": 194972043,
        "sender_full_name": "Nam",
        "timestamp": 1587579908
    }
]