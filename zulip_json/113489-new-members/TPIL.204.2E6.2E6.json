[
    {
        "content": "<p>In TPIL 4.6.6 we're given the following:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"kn\">variables</span> <span class=\"o\">(</span><span class=\"n\">real</span> <span class=\"o\">:</span> <span class=\"kt\">Type</span><span class=\"o\">)</span> <span class=\"o\">[</span><span class=\"n\">ordered_ring</span> <span class=\"n\">real</span><span class=\"o\">]</span>\n\n<span class=\"kn\">variables</span> <span class=\"n\">log</span> <span class=\"n\">exp</span> <span class=\"o\">:</span> <span class=\"n\">real</span> <span class=\"bp\">→</span> <span class=\"n\">real</span>\n\n<span class=\"kn\">variable</span> <span class=\"n\">log_exp_eq</span> <span class=\"o\">:</span> <span class=\"bp\">∀</span> <span class=\"n\">x</span><span class=\"o\">,</span> <span class=\"n\">log</span> <span class=\"o\">(</span><span class=\"n\">exp</span> <span class=\"n\">x</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"n\">x</span>\n\n<span class=\"kn\">variable</span> <span class=\"n\">exp_log_eq</span> <span class=\"o\">:</span> <span class=\"bp\">∀</span> <span class=\"o\">{</span><span class=\"n\">x</span><span class=\"o\">},</span> <span class=\"n\">x</span> <span class=\"bp\">&gt;</span> <span class=\"mi\">0</span> <span class=\"bp\">→</span> <span class=\"n\">exp</span> <span class=\"o\">(</span><span class=\"n\">log</span> <span class=\"n\">x</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"n\">x</span>\n\n<span class=\"kn\">variable</span> <span class=\"n\">exp_pos</span>    <span class=\"o\">:</span> <span class=\"bp\">∀</span> <span class=\"n\">x</span><span class=\"o\">,</span> <span class=\"n\">exp</span> <span class=\"n\">x</span> <span class=\"bp\">&gt;</span> <span class=\"mi\">0</span>\n\n<span class=\"kn\">variable</span> <span class=\"n\">exp_add</span>    <span class=\"o\">:</span> <span class=\"bp\">∀</span> <span class=\"n\">x</span> <span class=\"n\">y</span><span class=\"o\">,</span> <span class=\"n\">exp</span> <span class=\"o\">(</span><span class=\"n\">x</span> <span class=\"bp\">+</span> <span class=\"n\">y</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"n\">exp</span> <span class=\"n\">x</span> <span class=\"bp\">*</span> <span class=\"n\">exp</span> <span class=\"n\">y</span>\n\n<span class=\"n\">include</span> <span class=\"n\">log_exp_eq</span> <span class=\"n\">exp_log_eq</span> <span class=\"n\">exp_pos</span> <span class=\"n\">exp_add</span>\n</pre></div>\n\n\n<p>as well as a couple of examples:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"kn\">example</span> <span class=\"o\">(</span><span class=\"n\">x</span> <span class=\"n\">y</span> <span class=\"n\">z</span> <span class=\"o\">:</span> <span class=\"n\">real</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"n\">exp</span> <span class=\"o\">(</span><span class=\"n\">x</span> <span class=\"bp\">+</span> <span class=\"n\">y</span> <span class=\"bp\">+</span> <span class=\"n\">z</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"n\">exp</span> <span class=\"n\">x</span> <span class=\"bp\">*</span> <span class=\"n\">exp</span> <span class=\"n\">y</span> <span class=\"bp\">*</span> <span class=\"n\">exp</span> <span class=\"n\">z</span> <span class=\"o\">:=</span> <span class=\"k\">by</span> <span class=\"n\">rw</span> <span class=\"o\">[</span><span class=\"n\">exp_add</span><span class=\"o\">,</span> <span class=\"n\">exp_add</span><span class=\"o\">]</span>\n\n<span class=\"kn\">example</span> <span class=\"o\">(</span><span class=\"n\">y</span> <span class=\"o\">:</span> <span class=\"n\">real</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">h</span> <span class=\"o\">:</span> <span class=\"n\">y</span> <span class=\"bp\">&gt;</span> <span class=\"mi\">0</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"n\">exp</span> <span class=\"o\">(</span><span class=\"n\">log</span> <span class=\"n\">y</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"n\">y</span> <span class=\"o\">:=</span> <span class=\"n\">exp_log_eq</span> <span class=\"n\">h</span>\n</pre></div>\n\n\n<p>The exercise requests a calculational proof of <code>log_mul</code>. So I'm assuming it'll look something like this:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"kn\">theorem</span> <span class=\"n\">log_mul</span> <span class=\"o\">{</span><span class=\"n\">x</span> <span class=\"n\">y</span> <span class=\"o\">:</span> <span class=\"n\">real</span><span class=\"o\">}</span> <span class=\"o\">(</span><span class=\"n\">hx</span> <span class=\"o\">:</span> <span class=\"n\">x</span> <span class=\"bp\">&gt;</span> <span class=\"mi\">0</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">hy</span> <span class=\"o\">:</span> <span class=\"n\">y</span> <span class=\"bp\">&gt;</span> <span class=\"mi\">0</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"n\">log</span> <span class=\"o\">(</span><span class=\"n\">x</span> <span class=\"bp\">*</span> <span class=\"n\">y</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"n\">log</span> <span class=\"n\">x</span> <span class=\"bp\">+</span> <span class=\"n\">log</span> <span class=\"n\">y</span> <span class=\"o\">:=</span>\n\n    <span class=\"k\">calc</span>\n\n        <span class=\"n\">log</span> <span class=\"o\">(</span><span class=\"n\">x</span> <span class=\"bp\">*</span> <span class=\"n\">y</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"n\">EXPR1</span> <span class=\"o\">:</span> <span class=\"n\">TRANSFORM1</span>\n        <span class=\"bp\">...</span>         <span class=\"bp\">=</span> <span class=\"n\">EXPR2</span> <span class=\"o\">:</span> <span class=\"n\">TRANSFORM2</span>\n        <span class=\"bp\">...</span>         <span class=\"bp\">=</span> <span class=\"n\">log</span> <span class=\"n\">x</span> <span class=\"bp\">+</span> <span class=\"n\">log</span> <span class=\"n\">y</span>\n</pre></div>\n\n\n<p>However, from what we're given in the exercise, it isn't clear what I should apply as TRANSFORM1 to move <code>log(x * y)</code> into some other form that's a step closer to <code>log x + log y</code>.</p>\n<p>Should I be looking at some of the other identities mentioned in 4.2?</p>\n<p>Thanks for any suggestions!</p>",
        "id": 180295139,
        "sender_full_name": "Eduardo Cavazos",
        "timestamp": 1573272230
    },
    {
        "content": "<p>We're given <code>hx</code> and <code>hy</code> so I thought about using something like this:</p>\n<div class=\"codehilite\"><pre><span></span>    <span class=\"k\">have</span> <span class=\"n\">h1</span> <span class=\"o\">:</span> <span class=\"n\">exp</span> <span class=\"o\">(</span><span class=\"n\">log</span> <span class=\"n\">x</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"n\">x</span><span class=\"o\">,</span> <span class=\"k\">from</span> <span class=\"n\">exp_log_eq</span> <span class=\"n\">hx</span><span class=\"o\">,</span>\n\n    <span class=\"k\">have</span> <span class=\"n\">h2</span> <span class=\"o\">:</span> <span class=\"n\">exp</span> <span class=\"o\">(</span><span class=\"n\">log</span> <span class=\"n\">y</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"n\">y</span><span class=\"o\">,</span> <span class=\"k\">from</span> <span class=\"n\">exp_log_eq</span> <span class=\"n\">hy</span><span class=\"o\">,</span>\n</pre></div>",
        "id": 180295377,
        "sender_full_name": "Eduardo Cavazos",
        "timestamp": 1573272650
    },
    {
        "content": "<p>Then maybe I could expand</p>\n<div class=\"codehilite\"><pre><span></span>log (x * y)\n</pre></div>\n\n\n<p>into</p>\n<div class=\"codehilite\"><pre><span></span>log(exp (log x) * exp (log y))\n</pre></div>",
        "id": 180295858,
        "sender_full_name": "Eduardo Cavazos",
        "timestamp": 1573273620
    },
    {
        "content": "<p>So maybe something like this:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"kn\">theorem</span> <span class=\"n\">log_mul</span> <span class=\"o\">{</span><span class=\"n\">x</span> <span class=\"n\">y</span> <span class=\"o\">:</span> <span class=\"n\">real</span><span class=\"o\">}</span> <span class=\"o\">(</span><span class=\"n\">hx</span> <span class=\"o\">:</span> <span class=\"n\">x</span> <span class=\"bp\">&gt;</span> <span class=\"mi\">0</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">hy</span> <span class=\"o\">:</span> <span class=\"n\">y</span> <span class=\"bp\">&gt;</span> <span class=\"mi\">0</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"n\">log</span> <span class=\"o\">(</span><span class=\"n\">x</span> <span class=\"bp\">*</span> <span class=\"n\">y</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"n\">log</span> <span class=\"n\">x</span> <span class=\"bp\">+</span> <span class=\"n\">log</span> <span class=\"n\">y</span> <span class=\"o\">:=</span>\n\n    <span class=\"k\">have</span> <span class=\"n\">h1</span> <span class=\"o\">:</span> <span class=\"n\">exp</span> <span class=\"o\">(</span><span class=\"n\">log</span> <span class=\"n\">x</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"n\">x</span><span class=\"o\">,</span> <span class=\"k\">from</span> <span class=\"n\">exp_log_eq</span> <span class=\"n\">hx</span><span class=\"o\">,</span>\n\n    <span class=\"k\">have</span> <span class=\"n\">h3</span> <span class=\"o\">:</span> <span class=\"n\">x</span> <span class=\"bp\">=</span> <span class=\"n\">exp</span> <span class=\"o\">(</span><span class=\"n\">log</span> <span class=\"n\">x</span><span class=\"o\">),</span> <span class=\"k\">from</span> <span class=\"n\">eq</span><span class=\"bp\">.</span><span class=\"n\">symm</span> <span class=\"n\">h1</span><span class=\"o\">,</span>\n\n    <span class=\"k\">have</span> <span class=\"n\">h2</span> <span class=\"o\">:</span> <span class=\"n\">exp</span> <span class=\"o\">(</span><span class=\"n\">log</span> <span class=\"n\">y</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"n\">y</span><span class=\"o\">,</span> <span class=\"k\">from</span> <span class=\"n\">exp_log_eq</span> <span class=\"n\">hy</span><span class=\"o\">,</span>\n\n    <span class=\"k\">have</span> <span class=\"n\">h4</span> <span class=\"o\">:</span> <span class=\"n\">y</span> <span class=\"bp\">=</span> <span class=\"n\">exp</span> <span class=\"o\">(</span><span class=\"n\">log</span> <span class=\"n\">y</span><span class=\"o\">),</span> <span class=\"k\">from</span> <span class=\"n\">eq</span><span class=\"bp\">.</span><span class=\"n\">symm</span> <span class=\"n\">h2</span><span class=\"o\">,</span>\n\n        <span class=\"k\">calc</span>\n\n            <span class=\"n\">log</span> <span class=\"o\">(</span><span class=\"n\">x</span> <span class=\"bp\">*</span> <span class=\"n\">y</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"n\">log</span> <span class=\"o\">(</span><span class=\"n\">exp</span> <span class=\"o\">(</span><span class=\"n\">log</span> <span class=\"n\">x</span><span class=\"o\">)</span> <span class=\"bp\">*</span> <span class=\"n\">y</span><span class=\"o\">)</span>           <span class=\"o\">:</span> <span class=\"n\">TRANSFORM1</span>\n\n            <span class=\"bp\">...</span>         <span class=\"bp\">=</span> <span class=\"n\">log</span> <span class=\"o\">(</span><span class=\"n\">exp</span> <span class=\"o\">(</span><span class=\"n\">log</span> <span class=\"n\">x</span><span class=\"o\">)</span> <span class=\"bp\">*</span> <span class=\"n\">exp</span> <span class=\"o\">(</span><span class=\"n\">log</span> <span class=\"n\">y</span><span class=\"o\">))</span> <span class=\"o\">:</span> <span class=\"n\">TRANSFORM2</span>\n</pre></div>\n\n\n<p>But I'm not sure what to put at TRASNFORM1 and TRANSFORM2.</p>",
        "id": 180295978,
        "sender_full_name": "Eduardo Cavazos",
        "timestamp": 1573273891
    },
    {
        "content": "<p>Or maybe something like this:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"kn\">theorem</span> <span class=\"n\">log_mul</span> <span class=\"o\">{</span><span class=\"n\">x</span> <span class=\"n\">y</span> <span class=\"o\">:</span> <span class=\"n\">real</span><span class=\"o\">}</span> <span class=\"o\">(</span><span class=\"n\">hx</span> <span class=\"o\">:</span> <span class=\"n\">x</span> <span class=\"bp\">&gt;</span> <span class=\"mi\">0</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">hy</span> <span class=\"o\">:</span> <span class=\"n\">y</span> <span class=\"bp\">&gt;</span> <span class=\"mi\">0</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"n\">log</span> <span class=\"o\">(</span><span class=\"n\">x</span> <span class=\"bp\">*</span> <span class=\"n\">y</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"n\">log</span> <span class=\"n\">x</span> <span class=\"bp\">+</span> <span class=\"n\">log</span> <span class=\"n\">y</span> <span class=\"o\">:=</span>\n\n    <span class=\"k\">have</span> <span class=\"n\">h1</span> <span class=\"o\">:</span> <span class=\"n\">exp</span> <span class=\"o\">(</span><span class=\"n\">log</span> <span class=\"n\">x</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"n\">x</span><span class=\"o\">,</span> <span class=\"k\">from</span> <span class=\"n\">exp_log_eq</span> <span class=\"n\">hx</span><span class=\"o\">,</span>\n\n    <span class=\"k\">have</span> <span class=\"n\">h3</span> <span class=\"o\">:</span> <span class=\"n\">x</span> <span class=\"bp\">=</span> <span class=\"n\">exp</span> <span class=\"o\">(</span><span class=\"n\">log</span> <span class=\"n\">x</span><span class=\"o\">),</span> <span class=\"k\">from</span> <span class=\"n\">eq</span><span class=\"bp\">.</span><span class=\"n\">symm</span> <span class=\"n\">h1</span><span class=\"o\">,</span>\n\n    <span class=\"k\">have</span> <span class=\"n\">h2</span> <span class=\"o\">:</span> <span class=\"n\">exp</span> <span class=\"o\">(</span><span class=\"n\">log</span> <span class=\"n\">y</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"n\">y</span><span class=\"o\">,</span> <span class=\"k\">from</span> <span class=\"n\">exp_log_eq</span> <span class=\"n\">hy</span><span class=\"o\">,</span>\n\n    <span class=\"k\">have</span> <span class=\"n\">h4</span> <span class=\"o\">:</span> <span class=\"n\">y</span> <span class=\"bp\">=</span> <span class=\"n\">exp</span> <span class=\"o\">(</span><span class=\"n\">log</span> <span class=\"n\">y</span><span class=\"o\">),</span> <span class=\"k\">from</span> <span class=\"n\">eq</span><span class=\"bp\">.</span><span class=\"n\">symm</span> <span class=\"n\">h2</span><span class=\"o\">,</span>\n\n    <span class=\"k\">have</span> <span class=\"n\">h5</span> <span class=\"o\">:</span> <span class=\"n\">exp</span> <span class=\"o\">(</span><span class=\"n\">log</span> <span class=\"n\">x</span> <span class=\"bp\">+</span> <span class=\"n\">log</span> <span class=\"n\">y</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"n\">exp</span> <span class=\"o\">(</span><span class=\"n\">log</span> <span class=\"n\">x</span><span class=\"o\">)</span> <span class=\"bp\">*</span> <span class=\"n\">exp</span> <span class=\"o\">(</span><span class=\"n\">log</span> <span class=\"n\">y</span><span class=\"o\">),</span>  <span class=\"k\">from</span> <span class=\"n\">exp_add</span> <span class=\"o\">(</span><span class=\"n\">log</span> <span class=\"n\">x</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">log</span> <span class=\"n\">y</span><span class=\"o\">),</span>\n\n    <span class=\"k\">have</span> <span class=\"n\">h6</span> <span class=\"o\">:</span> <span class=\"n\">exp</span> <span class=\"o\">(</span><span class=\"n\">log</span> <span class=\"n\">x</span><span class=\"o\">)</span> <span class=\"bp\">*</span> <span class=\"n\">exp</span> <span class=\"o\">(</span><span class=\"n\">log</span> <span class=\"n\">y</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"n\">exp</span> <span class=\"o\">(</span><span class=\"n\">log</span> <span class=\"n\">x</span> <span class=\"bp\">+</span> <span class=\"n\">log</span> <span class=\"n\">y</span><span class=\"o\">),</span>  <span class=\"k\">from</span> <span class=\"n\">eq</span><span class=\"bp\">.</span><span class=\"n\">symm</span> <span class=\"n\">h5</span><span class=\"o\">,</span>\n\n    <span class=\"k\">have</span> <span class=\"n\">h7</span> <span class=\"o\">:</span> <span class=\"n\">log</span> <span class=\"o\">(</span><span class=\"n\">exp</span> <span class=\"o\">(</span><span class=\"n\">log</span> <span class=\"n\">x</span> <span class=\"bp\">+</span> <span class=\"n\">log</span> <span class=\"n\">y</span><span class=\"o\">))</span> <span class=\"bp\">=</span> <span class=\"n\">log</span> <span class=\"n\">x</span> <span class=\"bp\">+</span> <span class=\"n\">log</span> <span class=\"n\">y</span><span class=\"o\">,</span>        <span class=\"k\">from</span> <span class=\"n\">log_exp_eq</span> <span class=\"o\">(</span><span class=\"n\">log</span> <span class=\"n\">x</span> <span class=\"bp\">+</span> <span class=\"n\">log</span> <span class=\"n\">y</span><span class=\"o\">),</span>\n\n        <span class=\"k\">calc</span>\n\n            <span class=\"n\">log</span> <span class=\"o\">(</span><span class=\"n\">x</span> <span class=\"bp\">*</span> <span class=\"n\">y</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"n\">log</span> <span class=\"o\">(</span><span class=\"n\">exp</span> <span class=\"o\">(</span><span class=\"n\">log</span> <span class=\"n\">x</span><span class=\"o\">)</span> <span class=\"bp\">*</span> <span class=\"n\">exp</span> <span class=\"o\">(</span><span class=\"n\">log</span> <span class=\"n\">y</span><span class=\"o\">))</span>         <span class=\"o\">:</span> <span class=\"k\">by</span> <span class=\"n\">rw</span> <span class=\"o\">[</span><span class=\"n\">h3</span><span class=\"o\">,</span> <span class=\"n\">h4</span><span class=\"o\">]</span>\n            <span class=\"bp\">...</span>         <span class=\"bp\">=</span> <span class=\"n\">log</span> <span class=\"o\">(</span><span class=\"n\">exp</span> <span class=\"o\">(</span><span class=\"n\">log</span> <span class=\"n\">x</span> <span class=\"bp\">+</span> <span class=\"n\">log</span> <span class=\"n\">y</span><span class=\"o\">))</span>               <span class=\"o\">:</span> <span class=\"k\">by</span> <span class=\"n\">rw</span> <span class=\"o\">[</span><span class=\"n\">h6</span><span class=\"o\">]</span>\n            <span class=\"bp\">...</span>         <span class=\"bp\">=</span> <span class=\"n\">log</span> <span class=\"n\">x</span> <span class=\"bp\">+</span> <span class=\"n\">log</span> <span class=\"n\">y</span>                           <span class=\"o\">:</span> <span class=\"k\">by</span> <span class=\"n\">rw</span> <span class=\"o\">[</span><span class=\"n\">h7</span><span class=\"o\">]</span>\n</pre></div>\n\n\n<p>But I get an error with that expression.</p>\n<p>Trying something...</p>",
        "id": 180296347,
        "sender_full_name": "Eduardo Cavazos",
        "timestamp": 1573274663
    },
    {
        "content": "<p>The details of the error messages give a pretty big hint here. For the first rewrite (involving <code>rw [h3, h4]</code>) I see this:</p>\n<div class=\"codehilite\"><pre><span></span>tactic failed, there are unsolved goals\nstate:\n...\n⊢ log (exp (log x) * exp (log y)) = log (exp (log (exp (log x))) * exp (log (exp (log y))))\n</pre></div>\n\n\n<p>The goal in the error message shows what happened. The rewrite you attempted changed stuff on the right hand side into more complicated stuff, whereas I think you probably wanted to transform the left hand side. You might want to look at your other hypotheses to see if they work better.</p>\n<p>(<a href=\"https://leanprover-community.github.io/lean-web-editor/#code=variables%20%28real%20%3A%20Type%29%20%5Bordered_ring%20real%5D%0Avariables%20log%20exp%20%3A%20real%20%E2%86%92%20real%0Avariable%20log_exp_eq%20%3A%20%E2%88%80%20x%2C%20log%20%28exp%20x%29%20%3D%20x%0Avariable%20exp_log_eq%20%3A%20%E2%88%80%20%7Bx%7D%2C%20x%20%3E%200%20%E2%86%92%20exp%20%28log%20x%29%20%3D%20x%0Avariable%20exp_pos%20%20%20%20%3A%20%E2%88%80%20x%2C%20exp%20x%20%3E%200%0Avariable%20exp_add%20%20%20%20%3A%20%E2%88%80%20x%20y%2C%20exp%20%28x%20%2B%20y%29%20%3D%20exp%20x%20*%20exp%20y%0Ainclude%20log_exp_eq%20exp_log_eq%20exp_pos%20exp_add%0A%0Atheorem%20log_mul%20%7Bx%20y%20%3A%20real%7D%20%28hx%20%3A%20x%20%3E%200%29%20%28hy%20%3A%20y%20%3E%200%29%20%3A%20log%20%28x%20*%20y%29%20%3D%20log%20x%20%2B%20log%20y%20%3A%3D%0A%20%20calc%0A%20%20%20%20log%20%28x%20*%20y%29%20%3D%20log%20%28exp%20%28log%20x%29%20*%20exp%20%28log%20y%29%29%20%3A%20by%20rw%20%5Bexp_log_eq%20hx%2C%20exp_log_eq%20hy%5D%0A%20%20%20%20%20%20%20%20%20%20%20%20...%20%3D%20log%20%28exp%20%28log%20x%20%2B%20log%20y%29%29%20%20%20%20%20%20%20%3A%20by%20rw%20exp_add%0A%20%20%20%20%20%20%20%20%20%20%20%20...%20%3D%20log%20x%20%2B%20log%20y%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3A%20by%20rw%20log_exp_eq\" target=\"_blank\" title=\"https://leanprover-community.github.io/lean-web-editor/#code=variables%20%28real%20%3A%20Type%29%20%5Bordered_ring%20real%5D%0Avariables%20log%20exp%20%3A%20real%20%E2%86%92%20real%0Avariable%20log_exp_eq%20%3A%20%E2%88%80%20x%2C%20log%20%28exp%20x%29%20%3D%20x%0Avariable%20exp_log_eq%20%3A%20%E2%88%80%20%7Bx%7D%2C%20x%20%3E%200%20%E2%86%92%20exp%20%28log%20x%29%20%3D%20x%0Avariable%20exp_pos%20%20%20%20%3A%20%E2%88%80%20x%2C%20exp%20x%20%3E%200%0Avariable%20exp_add%20%20%20%20%3A%20%E2%88%80%20x%20y%2C%20exp%20%28x%20%2B%20y%29%20%3D%20exp%20x%20*%20exp%20y%0Ainclude%20log_exp_eq%20exp_log_eq%20exp_pos%20exp_add%0A%0Atheorem%20log_mul%20%7Bx%20y%20%3A%20real%7D%20%28hx%20%3A%20x%20%3E%200%29%20%28hy%20%3A%20y%20%3E%200%29%20%3A%20log%20%28x%20*%20y%29%20%3D%20log%20x%20%2B%20log%20y%20%3A%3D%0A%20%20calc%0A%20%20%20%20log%20%28x%20*%20y%29%20%3D%20log%20%28exp%20%28log%20x%29%20*%20exp%20%28log%20y%29%29%20%3A%20by%20rw%20%5Bexp_log_eq%20hx%2C%20exp_log_eq%20hy%5D%0A%20%20%20%20%20%20%20%20%20%20%20%20...%20%3D%20log%20%28exp%20%28log%20x%20%2B%20log%20y%29%29%20%20%20%20%20%20%20%3A%20by%20rw%20exp_add%0A%20%20%20%20%20%20%20%20%20%20%20%20...%20%3D%20log%20x%20%2B%20log%20y%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3A%20by%20rw%20log_exp_eq\">Spoiler</a>)</p>",
        "id": 180296907,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1573275928
    },
    {
        "content": "<p>Thank you <span class=\"user-mention\" data-user-id=\"123965\">@Bryan Gin-ge Chen</span>!</p>\n<p>I used your hint about other hypotheses. This seems to work:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"kn\">theorem</span> <span class=\"n\">log_mul</span> <span class=\"o\">{</span><span class=\"n\">x</span> <span class=\"n\">y</span> <span class=\"o\">:</span> <span class=\"n\">real</span><span class=\"o\">}</span> <span class=\"o\">(</span><span class=\"n\">hx</span> <span class=\"o\">:</span> <span class=\"n\">x</span> <span class=\"bp\">&gt;</span> <span class=\"mi\">0</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">hy</span> <span class=\"o\">:</span> <span class=\"n\">y</span> <span class=\"bp\">&gt;</span> <span class=\"mi\">0</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"n\">log</span> <span class=\"o\">(</span><span class=\"n\">x</span> <span class=\"bp\">*</span> <span class=\"n\">y</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"n\">log</span> <span class=\"n\">x</span> <span class=\"bp\">+</span> <span class=\"n\">log</span> <span class=\"n\">y</span> <span class=\"o\">:=</span>\n\n    <span class=\"k\">have</span> <span class=\"n\">h1</span> <span class=\"o\">:</span> <span class=\"n\">exp</span> <span class=\"o\">(</span><span class=\"n\">log</span> <span class=\"n\">x</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"n\">x</span><span class=\"o\">,</span> <span class=\"k\">from</span> <span class=\"n\">exp_log_eq</span> <span class=\"n\">hx</span><span class=\"o\">,</span>\n\n    <span class=\"k\">have</span> <span class=\"n\">h3</span> <span class=\"o\">:</span> <span class=\"n\">x</span> <span class=\"bp\">=</span> <span class=\"n\">exp</span> <span class=\"o\">(</span><span class=\"n\">log</span> <span class=\"n\">x</span><span class=\"o\">),</span> <span class=\"k\">from</span> <span class=\"n\">eq</span><span class=\"bp\">.</span><span class=\"n\">symm</span> <span class=\"n\">h1</span><span class=\"o\">,</span>\n\n    <span class=\"k\">have</span> <span class=\"n\">h2</span> <span class=\"o\">:</span> <span class=\"n\">exp</span> <span class=\"o\">(</span><span class=\"n\">log</span> <span class=\"n\">y</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"n\">y</span><span class=\"o\">,</span> <span class=\"k\">from</span> <span class=\"n\">exp_log_eq</span> <span class=\"n\">hy</span><span class=\"o\">,</span>\n\n    <span class=\"k\">have</span> <span class=\"n\">h4</span> <span class=\"o\">:</span> <span class=\"n\">y</span> <span class=\"bp\">=</span> <span class=\"n\">exp</span> <span class=\"o\">(</span><span class=\"n\">log</span> <span class=\"n\">y</span><span class=\"o\">),</span> <span class=\"k\">from</span> <span class=\"n\">eq</span><span class=\"bp\">.</span><span class=\"n\">symm</span> <span class=\"n\">h2</span><span class=\"o\">,</span>\n\n    <span class=\"k\">have</span> <span class=\"n\">h5</span> <span class=\"o\">:</span> <span class=\"n\">exp</span> <span class=\"o\">(</span><span class=\"n\">log</span> <span class=\"n\">x</span> <span class=\"bp\">+</span> <span class=\"n\">log</span> <span class=\"n\">y</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"n\">exp</span> <span class=\"o\">(</span><span class=\"n\">log</span> <span class=\"n\">x</span><span class=\"o\">)</span> <span class=\"bp\">*</span> <span class=\"n\">exp</span> <span class=\"o\">(</span><span class=\"n\">log</span> <span class=\"n\">y</span><span class=\"o\">),</span>  <span class=\"k\">from</span> <span class=\"n\">exp_add</span> <span class=\"o\">(</span><span class=\"n\">log</span> <span class=\"n\">x</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">log</span> <span class=\"n\">y</span><span class=\"o\">),</span>\n\n    <span class=\"k\">have</span> <span class=\"n\">h6</span> <span class=\"o\">:</span> <span class=\"n\">exp</span> <span class=\"o\">(</span><span class=\"n\">log</span> <span class=\"n\">x</span><span class=\"o\">)</span> <span class=\"bp\">*</span> <span class=\"n\">exp</span> <span class=\"o\">(</span><span class=\"n\">log</span> <span class=\"n\">y</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"n\">exp</span> <span class=\"o\">(</span><span class=\"n\">log</span> <span class=\"n\">x</span> <span class=\"bp\">+</span> <span class=\"n\">log</span> <span class=\"n\">y</span><span class=\"o\">),</span>  <span class=\"k\">from</span> <span class=\"n\">eq</span><span class=\"bp\">.</span><span class=\"n\">symm</span> <span class=\"n\">h5</span><span class=\"o\">,</span>\n\n    <span class=\"k\">have</span> <span class=\"n\">h7</span> <span class=\"o\">:</span> <span class=\"n\">log</span> <span class=\"o\">(</span><span class=\"n\">exp</span> <span class=\"o\">(</span><span class=\"n\">log</span> <span class=\"n\">x</span> <span class=\"bp\">+</span> <span class=\"n\">log</span> <span class=\"n\">y</span><span class=\"o\">))</span> <span class=\"bp\">=</span> <span class=\"n\">log</span> <span class=\"n\">x</span> <span class=\"bp\">+</span> <span class=\"n\">log</span> <span class=\"n\">y</span><span class=\"o\">,</span>        <span class=\"k\">from</span> <span class=\"n\">log_exp_eq</span> <span class=\"o\">(</span><span class=\"n\">log</span> <span class=\"n\">x</span> <span class=\"bp\">+</span> <span class=\"n\">log</span> <span class=\"n\">y</span><span class=\"o\">),</span>\n\n        <span class=\"k\">calc</span>\n\n            <span class=\"n\">log</span> <span class=\"o\">(</span><span class=\"n\">x</span> <span class=\"bp\">*</span> <span class=\"n\">y</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"n\">log</span> <span class=\"o\">(</span><span class=\"n\">exp</span> <span class=\"o\">(</span><span class=\"n\">log</span> <span class=\"n\">x</span><span class=\"o\">)</span> <span class=\"bp\">*</span> <span class=\"n\">exp</span> <span class=\"o\">(</span><span class=\"n\">log</span> <span class=\"n\">y</span><span class=\"o\">))</span>         <span class=\"o\">:</span> <span class=\"k\">by</span> <span class=\"n\">rw</span> <span class=\"o\">[</span><span class=\"n\">h1</span><span class=\"o\">,</span> <span class=\"n\">h2</span><span class=\"o\">]</span>\n            <span class=\"bp\">...</span>         <span class=\"bp\">=</span> <span class=\"n\">log</span> <span class=\"o\">(</span><span class=\"n\">exp</span> <span class=\"o\">(</span><span class=\"n\">log</span> <span class=\"n\">x</span> <span class=\"bp\">+</span> <span class=\"n\">log</span> <span class=\"n\">y</span><span class=\"o\">))</span>               <span class=\"o\">:</span> <span class=\"k\">by</span> <span class=\"n\">rw</span> <span class=\"o\">[</span><span class=\"n\">h6</span><span class=\"o\">]</span>\n            <span class=\"bp\">...</span>         <span class=\"bp\">=</span> <span class=\"n\">log</span> <span class=\"n\">x</span> <span class=\"bp\">+</span> <span class=\"n\">log</span> <span class=\"n\">y</span>                           <span class=\"o\">:</span> <span class=\"k\">by</span> <span class=\"n\">rw</span> <span class=\"o\">[</span><span class=\"n\">h7</span><span class=\"o\">]</span>\n</pre></div>",
        "id": 180296974,
        "sender_full_name": "Eduardo Cavazos",
        "timestamp": 1573276072
    },
    {
        "content": "<p>I was wondering what it would look like without using <code>rw</code>:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"kn\">example</span> <span class=\"o\">{</span><span class=\"n\">x</span> <span class=\"n\">y</span> <span class=\"o\">:</span> <span class=\"n\">real</span><span class=\"o\">}</span> <span class=\"o\">(</span><span class=\"n\">hx</span> <span class=\"o\">:</span> <span class=\"n\">x</span> <span class=\"bp\">&gt;</span> <span class=\"mi\">0</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">hy</span> <span class=\"o\">:</span> <span class=\"n\">y</span> <span class=\"bp\">&gt;</span> <span class=\"mi\">0</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"n\">log</span> <span class=\"o\">(</span><span class=\"n\">x</span> <span class=\"bp\">*</span> <span class=\"n\">y</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"n\">log</span> <span class=\"n\">x</span> <span class=\"bp\">+</span> <span class=\"n\">log</span> <span class=\"n\">y</span> <span class=\"o\">:=</span>\n\n    <span class=\"k\">have</span> <span class=\"n\">h1</span> <span class=\"o\">:</span> <span class=\"n\">exp</span> <span class=\"o\">(</span><span class=\"n\">log</span> <span class=\"n\">x</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"n\">x</span><span class=\"o\">,</span> <span class=\"k\">from</span> <span class=\"n\">exp_log_eq</span> <span class=\"n\">hx</span><span class=\"o\">,</span>\n\n    <span class=\"k\">have</span> <span class=\"n\">h3</span> <span class=\"o\">:</span> <span class=\"n\">x</span> <span class=\"bp\">=</span> <span class=\"n\">exp</span> <span class=\"o\">(</span><span class=\"n\">log</span> <span class=\"n\">x</span><span class=\"o\">),</span> <span class=\"k\">from</span> <span class=\"n\">eq</span><span class=\"bp\">.</span><span class=\"n\">symm</span> <span class=\"n\">h1</span><span class=\"o\">,</span>\n\n    <span class=\"k\">have</span> <span class=\"n\">h2</span> <span class=\"o\">:</span> <span class=\"n\">exp</span> <span class=\"o\">(</span><span class=\"n\">log</span> <span class=\"n\">y</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"n\">y</span><span class=\"o\">,</span> <span class=\"k\">from</span> <span class=\"n\">exp_log_eq</span> <span class=\"n\">hy</span><span class=\"o\">,</span>\n\n    <span class=\"k\">have</span> <span class=\"n\">h4</span> <span class=\"o\">:</span> <span class=\"n\">y</span> <span class=\"bp\">=</span> <span class=\"n\">exp</span> <span class=\"o\">(</span><span class=\"n\">log</span> <span class=\"n\">y</span><span class=\"o\">),</span> <span class=\"k\">from</span> <span class=\"n\">eq</span><span class=\"bp\">.</span><span class=\"n\">symm</span> <span class=\"n\">h2</span><span class=\"o\">,</span>\n\n    <span class=\"k\">have</span> <span class=\"n\">h5</span> <span class=\"o\">:</span> <span class=\"n\">exp</span> <span class=\"o\">(</span><span class=\"n\">log</span> <span class=\"n\">x</span> <span class=\"bp\">+</span> <span class=\"n\">log</span> <span class=\"n\">y</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"n\">exp</span> <span class=\"o\">(</span><span class=\"n\">log</span> <span class=\"n\">x</span><span class=\"o\">)</span> <span class=\"bp\">*</span> <span class=\"n\">exp</span> <span class=\"o\">(</span><span class=\"n\">log</span> <span class=\"n\">y</span><span class=\"o\">),</span>  <span class=\"k\">from</span> <span class=\"n\">exp_add</span> <span class=\"o\">(</span><span class=\"n\">log</span> <span class=\"n\">x</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">log</span> <span class=\"n\">y</span><span class=\"o\">),</span>\n\n    <span class=\"k\">have</span> <span class=\"n\">h6</span> <span class=\"o\">:</span> <span class=\"n\">exp</span> <span class=\"o\">(</span><span class=\"n\">log</span> <span class=\"n\">x</span><span class=\"o\">)</span> <span class=\"bp\">*</span> <span class=\"n\">exp</span> <span class=\"o\">(</span><span class=\"n\">log</span> <span class=\"n\">y</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"n\">exp</span> <span class=\"o\">(</span><span class=\"n\">log</span> <span class=\"n\">x</span> <span class=\"bp\">+</span> <span class=\"n\">log</span> <span class=\"n\">y</span><span class=\"o\">),</span>  <span class=\"k\">from</span> <span class=\"n\">eq</span><span class=\"bp\">.</span><span class=\"n\">symm</span> <span class=\"n\">h5</span><span class=\"o\">,</span>\n\n    <span class=\"k\">have</span> <span class=\"n\">h7</span> <span class=\"o\">:</span> <span class=\"n\">log</span> <span class=\"o\">(</span><span class=\"n\">exp</span> <span class=\"o\">(</span><span class=\"n\">log</span> <span class=\"n\">x</span> <span class=\"bp\">+</span> <span class=\"n\">log</span> <span class=\"n\">y</span><span class=\"o\">))</span> <span class=\"bp\">=</span> <span class=\"n\">log</span> <span class=\"n\">x</span> <span class=\"bp\">+</span> <span class=\"n\">log</span> <span class=\"n\">y</span><span class=\"o\">,</span>        <span class=\"k\">from</span> <span class=\"n\">log_exp_eq</span> <span class=\"o\">(</span><span class=\"n\">log</span> <span class=\"n\">x</span> <span class=\"bp\">+</span> <span class=\"n\">log</span> <span class=\"n\">y</span><span class=\"o\">),</span>\n\n\n    <span class=\"k\">have</span> <span class=\"n\">h8</span> <span class=\"o\">:</span> <span class=\"n\">x</span> <span class=\"bp\">*</span> <span class=\"n\">y</span> <span class=\"bp\">=</span> <span class=\"n\">exp</span> <span class=\"o\">(</span><span class=\"n\">log</span> <span class=\"n\">x</span><span class=\"o\">)</span> <span class=\"bp\">*</span> <span class=\"n\">y</span><span class=\"o\">,</span>                          <span class=\"k\">from</span> <span class=\"n\">congr_arg</span> <span class=\"bp\">_</span> <span class=\"n\">h3</span><span class=\"o\">,</span>\n\n    <span class=\"k\">have</span> <span class=\"n\">h9</span> <span class=\"o\">:</span> <span class=\"n\">exp</span> <span class=\"o\">(</span><span class=\"n\">log</span> <span class=\"n\">x</span><span class=\"o\">)</span> <span class=\"bp\">*</span> <span class=\"n\">y</span> <span class=\"bp\">=</span> <span class=\"n\">exp</span> <span class=\"o\">(</span><span class=\"n\">log</span> <span class=\"n\">x</span><span class=\"o\">)</span> <span class=\"bp\">*</span> <span class=\"n\">exp</span> <span class=\"o\">(</span><span class=\"n\">log</span> <span class=\"n\">y</span><span class=\"o\">),</span>      <span class=\"k\">from</span> <span class=\"n\">congr_arg</span> <span class=\"bp\">_</span> <span class=\"n\">h4</span><span class=\"o\">,</span>\n\n    <span class=\"k\">calc</span>\n\n        <span class=\"n\">log</span> <span class=\"o\">(</span><span class=\"n\">x</span> <span class=\"bp\">*</span> <span class=\"n\">y</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"n\">log</span> <span class=\"o\">(</span><span class=\"n\">exp</span> <span class=\"o\">(</span><span class=\"n\">log</span> <span class=\"n\">x</span><span class=\"o\">)</span> <span class=\"bp\">*</span> <span class=\"n\">y</span><span class=\"o\">)</span>                   <span class=\"o\">:</span> <span class=\"n\">congr_arg</span> <span class=\"bp\">_</span> <span class=\"n\">h8</span>\n        <span class=\"bp\">...</span>         <span class=\"bp\">=</span> <span class=\"n\">log</span> <span class=\"o\">(</span><span class=\"n\">exp</span> <span class=\"o\">(</span><span class=\"n\">log</span> <span class=\"n\">x</span><span class=\"o\">)</span> <span class=\"bp\">*</span> <span class=\"n\">exp</span> <span class=\"o\">(</span><span class=\"n\">log</span> <span class=\"n\">y</span><span class=\"o\">))</span>         <span class=\"o\">:</span> <span class=\"n\">congr_arg</span> <span class=\"bp\">_</span> <span class=\"n\">h9</span>\n        <span class=\"bp\">...</span>         <span class=\"bp\">=</span> <span class=\"n\">log</span> <span class=\"o\">(</span><span class=\"n\">exp</span> <span class=\"o\">(</span><span class=\"n\">log</span> <span class=\"n\">x</span> <span class=\"bp\">+</span> <span class=\"n\">log</span> <span class=\"n\">y</span><span class=\"o\">))</span>               <span class=\"o\">:</span> <span class=\"n\">congr_arg</span> <span class=\"bp\">_</span> <span class=\"n\">h6</span>\n        <span class=\"bp\">...</span>         <span class=\"bp\">=</span> <span class=\"n\">log</span> <span class=\"n\">x</span> <span class=\"bp\">+</span> <span class=\"n\">log</span> <span class=\"n\">y</span>                           <span class=\"o\">:</span> <span class=\"n\">h7</span>\n</pre></div>",
        "id": 180297794,
        "sender_full_name": "Eduardo Cavazos",
        "timestamp": 1573277689
    },
    {
        "content": "<p>And finally, without <code>rw</code> and everything inlined:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"kn\">example</span> <span class=\"o\">{</span><span class=\"n\">x</span> <span class=\"n\">y</span> <span class=\"o\">:</span> <span class=\"n\">real</span><span class=\"o\">}</span> <span class=\"o\">(</span><span class=\"n\">hx</span> <span class=\"o\">:</span> <span class=\"n\">x</span> <span class=\"bp\">&gt;</span> <span class=\"mi\">0</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">hy</span> <span class=\"o\">:</span> <span class=\"n\">y</span> <span class=\"bp\">&gt;</span> <span class=\"mi\">0</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"n\">log</span> <span class=\"o\">(</span><span class=\"n\">x</span> <span class=\"bp\">*</span> <span class=\"n\">y</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"n\">log</span> <span class=\"n\">x</span> <span class=\"bp\">+</span> <span class=\"n\">log</span> <span class=\"n\">y</span> <span class=\"o\">:=</span>\n\n    <span class=\"k\">calc</span>\n\n        <span class=\"n\">log</span> <span class=\"o\">(</span><span class=\"n\">x</span> <span class=\"bp\">*</span> <span class=\"n\">y</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"n\">log</span> <span class=\"o\">(</span><span class=\"n\">exp</span> <span class=\"o\">(</span><span class=\"n\">log</span> <span class=\"n\">x</span><span class=\"o\">)</span> <span class=\"bp\">*</span> <span class=\"n\">y</span><span class=\"o\">)</span>                   <span class=\"o\">:</span> <span class=\"n\">congr_arg</span> <span class=\"bp\">_</span> <span class=\"o\">(</span><span class=\"n\">congr_arg</span> <span class=\"bp\">_</span> <span class=\"o\">(</span><span class=\"n\">eq</span><span class=\"bp\">.</span><span class=\"n\">symm</span> <span class=\"o\">(</span><span class=\"n\">exp_log_eq</span> <span class=\"n\">hx</span><span class=\"o\">)))</span>\n        <span class=\"bp\">...</span>         <span class=\"bp\">=</span> <span class=\"n\">log</span> <span class=\"o\">(</span><span class=\"n\">exp</span> <span class=\"o\">(</span><span class=\"n\">log</span> <span class=\"n\">x</span><span class=\"o\">)</span> <span class=\"bp\">*</span> <span class=\"n\">exp</span> <span class=\"o\">(</span><span class=\"n\">log</span> <span class=\"n\">y</span><span class=\"o\">))</span>         <span class=\"o\">:</span> <span class=\"n\">congr_arg</span> <span class=\"bp\">_</span> <span class=\"o\">(</span><span class=\"n\">congr_arg</span> <span class=\"bp\">_</span> <span class=\"o\">(</span><span class=\"n\">eq</span><span class=\"bp\">.</span><span class=\"n\">symm</span> <span class=\"o\">(</span><span class=\"n\">exp_log_eq</span> <span class=\"n\">hy</span><span class=\"o\">)))</span>\n        <span class=\"bp\">...</span>         <span class=\"bp\">=</span> <span class=\"n\">log</span> <span class=\"o\">(</span><span class=\"n\">exp</span> <span class=\"o\">(</span><span class=\"n\">log</span> <span class=\"n\">x</span> <span class=\"bp\">+</span> <span class=\"n\">log</span> <span class=\"n\">y</span><span class=\"o\">))</span>               <span class=\"o\">:</span> <span class=\"n\">congr_arg</span> <span class=\"bp\">_</span> <span class=\"o\">(</span><span class=\"n\">eq</span><span class=\"bp\">.</span><span class=\"n\">symm</span> <span class=\"o\">(</span><span class=\"n\">exp_add</span> <span class=\"o\">(</span><span class=\"n\">log</span> <span class=\"n\">x</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">log</span> <span class=\"n\">y</span><span class=\"o\">)))</span>\n        <span class=\"bp\">...</span>         <span class=\"bp\">=</span> <span class=\"n\">log</span> <span class=\"n\">x</span> <span class=\"bp\">+</span> <span class=\"n\">log</span> <span class=\"n\">y</span>                           <span class=\"o\">:</span> <span class=\"n\">log_exp_eq</span> <span class=\"o\">(</span><span class=\"n\">log</span> <span class=\"n\">x</span> <span class=\"bp\">+</span> <span class=\"n\">log</span> <span class=\"n\">y</span><span class=\"o\">)</span>\n</pre></div>",
        "id": 180297807,
        "sender_full_name": "Eduardo Cavazos",
        "timestamp": 1573277716
    },
    {
        "content": "<p>Given that this works:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"kn\">example</span> <span class=\"o\">{</span><span class=\"n\">x</span> <span class=\"n\">y</span> <span class=\"o\">:</span> <span class=\"n\">real</span><span class=\"o\">}</span> <span class=\"o\">(</span><span class=\"n\">hx</span> <span class=\"o\">:</span> <span class=\"n\">x</span> <span class=\"bp\">&gt;</span> <span class=\"mi\">0</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">hy</span> <span class=\"o\">:</span> <span class=\"n\">y</span> <span class=\"bp\">&gt;</span> <span class=\"mi\">0</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"n\">log</span> <span class=\"o\">(</span><span class=\"n\">x</span> <span class=\"bp\">*</span> <span class=\"n\">y</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"n\">log</span> <span class=\"n\">x</span> <span class=\"bp\">+</span> <span class=\"n\">log</span> <span class=\"n\">y</span> <span class=\"o\">:=</span>\n\n    <span class=\"k\">calc</span>\n\n        <span class=\"n\">log</span> <span class=\"o\">(</span><span class=\"n\">x</span> <span class=\"bp\">*</span> <span class=\"n\">y</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"n\">log</span> <span class=\"o\">(</span><span class=\"n\">exp</span> <span class=\"o\">(</span><span class=\"n\">log</span> <span class=\"n\">x</span><span class=\"o\">)</span> <span class=\"bp\">*</span> <span class=\"n\">exp</span> <span class=\"o\">(</span><span class=\"n\">log</span> <span class=\"n\">y</span><span class=\"o\">))</span>         <span class=\"o\">:</span> <span class=\"k\">by</span> <span class=\"n\">rw</span> <span class=\"o\">[</span><span class=\"n\">exp_log_eq</span> <span class=\"n\">hx</span><span class=\"o\">,</span> <span class=\"n\">exp_log_eq</span> <span class=\"n\">hy</span><span class=\"o\">]</span>\n        <span class=\"bp\">...</span>         <span class=\"bp\">=</span> <span class=\"n\">log</span> <span class=\"o\">(</span><span class=\"n\">exp</span> <span class=\"o\">(</span><span class=\"n\">log</span> <span class=\"n\">x</span> <span class=\"bp\">+</span> <span class=\"n\">log</span> <span class=\"n\">y</span><span class=\"o\">))</span>               <span class=\"o\">:</span> <span class=\"k\">by</span> <span class=\"n\">rw</span> <span class=\"n\">exp_add</span>\n        <span class=\"bp\">...</span>         <span class=\"bp\">=</span> <span class=\"n\">log</span> <span class=\"n\">x</span> <span class=\"bp\">+</span> <span class=\"n\">log</span> <span class=\"n\">y</span>                           <span class=\"o\">:</span> <span class=\"k\">by</span> <span class=\"n\">rw</span> <span class=\"n\">log_exp_eq</span>\n</pre></div>\n\n\n<p>I'm kinda wondering why this doesn't work:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"kn\">example</span> <span class=\"o\">{</span><span class=\"n\">x</span> <span class=\"n\">y</span> <span class=\"o\">:</span> <span class=\"n\">real</span><span class=\"o\">}</span> <span class=\"o\">(</span><span class=\"n\">hx</span> <span class=\"o\">:</span> <span class=\"n\">x</span> <span class=\"bp\">&gt;</span> <span class=\"mi\">0</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">hy</span> <span class=\"o\">:</span> <span class=\"n\">y</span> <span class=\"bp\">&gt;</span> <span class=\"mi\">0</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"n\">log</span> <span class=\"o\">(</span><span class=\"n\">x</span> <span class=\"bp\">*</span> <span class=\"n\">y</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"n\">log</span> <span class=\"n\">x</span> <span class=\"bp\">+</span> <span class=\"n\">log</span> <span class=\"n\">y</span> <span class=\"o\">:=</span>\n\n    <span class=\"k\">by</span> <span class=\"n\">rw</span> <span class=\"o\">[</span><span class=\"n\">exp_log_eq</span> <span class=\"n\">hx</span><span class=\"o\">,</span> <span class=\"n\">exp_log_eq</span> <span class=\"n\">hy</span><span class=\"o\">,</span> <span class=\"n\">exp_add</span><span class=\"o\">,</span> <span class=\"n\">log_exp_eq</span><span class=\"o\">]</span>\n</pre></div>\n\n\n<p>The end of section 4.3 shows an example that simplifies down to just a <code>by rw [...]</code> expression.</p>",
        "id": 180298070,
        "sender_full_name": "Eduardo Cavazos",
        "timestamp": 1573278254
    },
    {
        "content": "<p>I think the behavior of <code>rw</code> might be a little different depending on what the local goal is. This works:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"kn\">example</span> <span class=\"o\">{</span><span class=\"n\">x</span> <span class=\"n\">y</span> <span class=\"o\">:</span> <span class=\"n\">real</span><span class=\"o\">}</span> <span class=\"o\">(</span><span class=\"n\">hx</span> <span class=\"o\">:</span> <span class=\"n\">x</span> <span class=\"bp\">&gt;</span> <span class=\"mi\">0</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">hy</span> <span class=\"o\">:</span> <span class=\"n\">y</span> <span class=\"bp\">&gt;</span> <span class=\"mi\">0</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"n\">log</span> <span class=\"o\">(</span><span class=\"n\">x</span> <span class=\"bp\">*</span> <span class=\"n\">y</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"n\">log</span> <span class=\"n\">x</span> <span class=\"bp\">+</span> <span class=\"n\">log</span> <span class=\"n\">y</span> <span class=\"o\">:=</span>\n<span class=\"k\">by</span> <span class=\"n\">rw</span> <span class=\"o\">[</span><span class=\"err\">←</span><span class=\"n\">exp_log_eq</span> <span class=\"n\">hx</span><span class=\"o\">,</span> <span class=\"err\">←</span><span class=\"n\">exp_log_eq</span> <span class=\"n\">hy</span><span class=\"o\">,</span> <span class=\"err\">←</span><span class=\"n\">exp_add</span><span class=\"o\">,</span> <span class=\"n\">log_exp_eq</span><span class=\"o\">,</span> <span class=\"n\">log_exp_eq</span><span class=\"o\">,</span> <span class=\"n\">log_exp_eq</span><span class=\"o\">]</span>\n</pre></div>",
        "id": 180298240,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1573278603
    },
    {
        "content": "<p>Hmm... OK, that's interesting.</p>",
        "id": 180298317,
        "sender_full_name": "Eduardo Cavazos",
        "timestamp": 1573278725
    },
    {
        "content": "<p>It's not quite the same proof though. The issue is that the goal for the rewrite in the example is: </p>\n<div class=\"codehilite\"><pre><span></span>⊢ log (x * y) = log x + log y\n</pre></div>\n\n\n<p>whereas that in the first step of the <code>calc</code> block is:</p>\n<div class=\"codehilite\"><pre><span></span>⊢ log (x * y) = log (exp (log x) * exp (log y))\n</pre></div>\n\n\n<p>In the former, there's no <code>exp (log x)</code> visible in the goal, so the forwards rewrite fails.</p>",
        "id": 180298323,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1573278770
    },
    {
        "content": "<p>That's what the error message says, too.</p>",
        "id": 180298330,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1573278801
    },
    {
        "content": "<div class=\"codehilite\"><pre><span></span>rewrite tactic failed, did not find instance of the pattern in the target expression\n  exp (log x)\nstate:\n...\n⊢ log (x * y) = log x + log y\n</pre></div>",
        "id": 180298334,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1573278838
    },
    {
        "content": "<p>Given that this works as you show above:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"kn\">example</span> <span class=\"o\">{</span><span class=\"n\">x</span> <span class=\"n\">y</span> <span class=\"o\">:</span> <span class=\"n\">real</span><span class=\"o\">}</span> <span class=\"o\">(</span><span class=\"n\">hx</span> <span class=\"o\">:</span> <span class=\"n\">x</span> <span class=\"bp\">&gt;</span> <span class=\"mi\">0</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">hy</span> <span class=\"o\">:</span> <span class=\"n\">y</span> <span class=\"bp\">&gt;</span> <span class=\"mi\">0</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"n\">log</span> <span class=\"o\">(</span><span class=\"n\">x</span> <span class=\"bp\">*</span> <span class=\"n\">y</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"n\">log</span> <span class=\"n\">x</span> <span class=\"bp\">+</span> <span class=\"n\">log</span> <span class=\"n\">y</span> <span class=\"o\">:=</span>\n\n    <span class=\"k\">by</span> <span class=\"n\">rw</span> <span class=\"o\">[</span><span class=\"err\">←</span> <span class=\"n\">exp_log_eq</span> <span class=\"n\">hx</span><span class=\"o\">,</span> <span class=\"err\">←</span> <span class=\"n\">exp_log_eq</span> <span class=\"n\">hy</span><span class=\"o\">,</span> <span class=\"err\">←</span> <span class=\"n\">exp_add</span><span class=\"o\">,</span> <span class=\"n\">log_exp_eq</span><span class=\"o\">,</span> <span class=\"n\">log_exp_eq</span><span class=\"o\">,</span> <span class=\"n\">log_exp_eq</span><span class=\"o\">]</span>\n</pre></div>\n\n\n<p>I tried the naive conversion to <code>simp</code>:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"kn\">example</span> <span class=\"o\">{</span><span class=\"n\">x</span> <span class=\"n\">y</span> <span class=\"o\">:</span> <span class=\"n\">real</span><span class=\"o\">}</span> <span class=\"o\">(</span><span class=\"n\">hx</span> <span class=\"o\">:</span> <span class=\"n\">x</span> <span class=\"bp\">&gt;</span> <span class=\"mi\">0</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">hy</span> <span class=\"o\">:</span> <span class=\"n\">y</span> <span class=\"bp\">&gt;</span> <span class=\"mi\">0</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"n\">log</span> <span class=\"o\">(</span><span class=\"n\">x</span> <span class=\"bp\">*</span> <span class=\"n\">y</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"n\">log</span> <span class=\"n\">x</span> <span class=\"bp\">+</span> <span class=\"n\">log</span> <span class=\"n\">y</span> <span class=\"o\">:=</span>\n\n    <span class=\"k\">by</span> <span class=\"n\">simp</span> <span class=\"o\">[</span><span class=\"err\">←</span> <span class=\"n\">exp_log_eq</span> <span class=\"n\">hx</span><span class=\"o\">,</span> <span class=\"err\">←</span> <span class=\"n\">exp_log_eq</span> <span class=\"n\">hy</span><span class=\"o\">,</span> <span class=\"err\">←</span> <span class=\"n\">exp_add</span><span class=\"o\">,</span> <span class=\"n\">log_exp_eq</span><span class=\"o\">]</span>\n</pre></div>\n\n\n<p>but it doesn't like the <code>←</code>.</p>",
        "id": 180298494,
        "sender_full_name": "Eduardo Cavazos",
        "timestamp": 1573279104
    },
    {
        "content": "<p>Yes, that's not valid syntax in <code>simp</code>.</p>",
        "id": 180298502,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1573279144
    },
    {
        "content": "<p>Just remove the arrows and hope</p>",
        "id": 180300725,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1573283930
    },
    {
        "content": "<p>Removing the arrows doesn't seem to go through either:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"kn\">example</span> <span class=\"o\">{</span><span class=\"n\">x</span> <span class=\"n\">y</span> <span class=\"o\">:</span> <span class=\"n\">real</span><span class=\"o\">}</span> <span class=\"o\">(</span><span class=\"n\">hx</span> <span class=\"o\">:</span> <span class=\"n\">x</span> <span class=\"bp\">&gt;</span> <span class=\"mi\">0</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">hy</span> <span class=\"o\">:</span> <span class=\"n\">y</span> <span class=\"bp\">&gt;</span> <span class=\"mi\">0</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"n\">log</span> <span class=\"o\">(</span><span class=\"n\">x</span> <span class=\"bp\">*</span> <span class=\"n\">y</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"n\">log</span> <span class=\"n\">x</span> <span class=\"bp\">+</span> <span class=\"n\">log</span> <span class=\"n\">y</span> <span class=\"o\">:=</span>\n\n    <span class=\"k\">by</span> <span class=\"n\">simp</span> <span class=\"o\">[</span><span class=\"n\">exp_log_eq</span> <span class=\"n\">hx</span><span class=\"o\">,</span> <span class=\"n\">exp_log_eq</span> <span class=\"n\">hy</span><span class=\"o\">,</span> <span class=\"n\">exp_add</span><span class=\"o\">,</span> <span class=\"n\">log_exp_eq</span><span class=\"o\">]</span>\n</pre></div>",
        "id": 180301305,
        "sender_full_name": "Eduardo Cavazos",
        "timestamp": 1573285182
    },
    {
        "content": "<p>I don't know anything about how <code>simp</code> actually does its thing, there will be a heuristic I guess</p>",
        "id": 180303425,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1573289136
    }
]