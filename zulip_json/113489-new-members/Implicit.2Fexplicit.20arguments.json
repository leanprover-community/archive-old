[
    {
        "content": "<p>I don't quite understand something that I think has to do with explicit/implicit arguments to my lemma <code>MyLemma</code> below. I get the error:</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"n\">type</span> <span class=\"n\">mismatch</span> <span class=\"n\">at</span> <span class=\"n\">application</span>\n <span class=\"n\">MyLemma</span> <span class=\"o\">(</span><span class=\"n\">integral_closure.is_integral</span> <span class=\"n\">x</span><span class=\"o\">)</span>\n<span class=\"n\">term</span>\n  <span class=\"n\">integral_closure.is_integral</span> <span class=\"n\">x</span>\n<span class=\"n\">has</span> <span class=\"n\">type</span>\n  <span class=\"n\">is_integral</span> <span class=\"n\">A</span> <span class=\"n\">x</span>\n<span class=\"n\">but</span> <span class=\"n\">is</span> <span class=\"n\">expected</span> <span class=\"n\">to</span> <span class=\"k\">have</span> <span class=\"n\">type</span>\n  <span class=\"n\">is_integral</span> <span class=\"bp\">?</span><span class=\"n\">m_1</span> <span class=\"bp\">?</span><span class=\"n\">m_6</span>\n</code></pre></div>\n<p>And the code producing it is:</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kn\">import</span> <span class=\"n\">ring_theory.integral_closure</span>\n<span class=\"kn\">import</span> <span class=\"n\">ring_theory.localization</span>\n<span class=\"kn\">import</span> <span class=\"n\">linear_algebra.finite_dimensional</span>\n<span class=\"kn\">import</span> <span class=\"n\">ring_theory.trace</span>\n\n<span class=\"kd\">variables</span> <span class=\"o\">{</span><span class=\"n\">A</span> <span class=\"n\">L</span><span class=\"o\">:</span> <span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span> <span class=\"o\">[</span><span class=\"n\">comm_ring</span> <span class=\"n\">A</span><span class=\"o\">]</span> <span class=\"o\">[</span><span class=\"n\">is_domain</span> <span class=\"n\">A</span><span class=\"o\">]</span> <span class=\"o\">[</span><span class=\"n\">field</span> <span class=\"n\">L</span><span class=\"o\">]</span> <span class=\"o\">[</span><span class=\"n\">algebra</span> <span class=\"n\">A</span> <span class=\"n\">L</span><span class=\"o\">]</span> <span class=\"o\">[</span><span class=\"n\">algebra</span> <span class=\"o\">(</span><span class=\"n\">fraction_ring</span> <span class=\"n\">A</span><span class=\"o\">)</span> <span class=\"n\">L</span><span class=\"o\">]</span>\n<span class=\"kd\">variable</span> <span class=\"o\">(</span><span class=\"n\">x</span><span class=\"o\">:(</span><span class=\"n\">integral_closure</span> <span class=\"n\">A</span> <span class=\"n\">L</span><span class=\"o\">))</span>\n\n<span class=\"kd\">lemma</span> <span class=\"n\">MyLemma</span>\n  <span class=\"o\">{</span><span class=\"n\">x</span><span class=\"o\">:</span><span class=\"n\">L</span><span class=\"o\">}</span> <span class=\"o\">(</span><span class=\"n\">h</span><span class=\"o\">:</span><span class=\"n\">is_integral</span> <span class=\"n\">A</span> <span class=\"n\">x</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"n\">is_integral</span> <span class=\"n\">A</span> <span class=\"o\">((</span><span class=\"n\">algebra.trace</span> <span class=\"o\">(</span><span class=\"n\">fraction_ring</span> <span class=\"n\">A</span><span class=\"o\">)</span> <span class=\"n\">L</span><span class=\"o\">)</span> <span class=\"n\">x</span><span class=\"o\">)</span> <span class=\"o\">:=</span>\n<span class=\"kd\">begin</span>\n  <span class=\"gr\">sorry</span>\n<span class=\"kd\">end</span>\n\n<span class=\"k\">#check</span> <span class=\"o\">(</span><span class=\"n\">integral_closure.is_integral</span> <span class=\"n\">x</span><span class=\"o\">)</span>     <span class=\"c1\">-- is_integral A x</span>\n<span class=\"k\">#check</span> <span class=\"o\">(</span><span class=\"n\">MyLemma</span> <span class=\"o\">(</span><span class=\"n\">integral_closure.is_integral</span> <span class=\"n\">x</span><span class=\"o\">))</span> <span class=\"c1\">--Error here at MyLemma</span>\n</code></pre></div>\n<p>Why does it ask for <code>m_1</code> and <code>m_6</code> instead of figuring out to plug in <code>x</code> and <code>A</code>? Thanks for the help.</p>",
        "id": 271445488,
        "sender_full_name": "Jon Eugster",
        "timestamp": 1644506234
    },
    {
        "content": "<p>this usually means the lemma has stronger typeclass arguments that you don't have in your case</p>",
        "id": 271446931,
        "sender_full_name": "Eric Rodriguez",
        "timestamp": 1644506791
    },
    {
        "content": "<p>I see, thinking about what you said I found the mistake, thx.<br>\nThe lemma was about <code>[algebra (fraction_ring A) L]</code> but the statement used it with <code>[algebra (fraction_ring A) (integral_closure A L)]</code> so the two <code>L</code> should not have been the same things and Lean tried to find an instance <code>[field (integral_closure A L)]</code> which didn't exist</p>",
        "id": 271453444,
        "sender_full_name": "Jon Eugster",
        "timestamp": 1644509334
    }
]