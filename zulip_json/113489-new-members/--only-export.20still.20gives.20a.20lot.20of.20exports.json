[
    {
        "content": "<p>I'm trying to understand the simple export format described at <a href=\"https://github.com/leanprover-community/lean/blob/master/doc/export_format.md\">https://github.com/leanprover-community/lean/blob/master/doc/export_format.md</a> and want to look at basic examples. I made the file <code>examples.lean</code> containing:</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kd\">constant</span> <span class=\"n\">f</span><span class=\"o\">:</span> <span class=\"kt\">Type</span>\n</code></pre></div>\n<p>And when I run <code>lean --export=exported --only-export=f examples.lean</code> I expect to get a file with just a couple lines in it. Instead I get:</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"mi\">1</span> <span class=\"bp\">#</span><span class=\"n\">NS</span> <span class=\"mi\">0</span> <span class=\"n\">u</span>\n<span class=\"mi\">2</span> <span class=\"bp\">#</span><span class=\"n\">NS</span> <span class=\"mi\">0</span> <span class=\"n\">eq</span>\n<span class=\"mi\">3</span> <span class=\"bp\">#</span><span class=\"n\">NS</span> <span class=\"mi\">0</span> <span class=\"n\">α</span>\n<span class=\"mi\">1</span> <span class=\"bp\">#</span><span class=\"n\">UP</span> <span class=\"mi\">1</span>\n<span class=\"mi\">0</span> <span class=\"bp\">#</span><span class=\"n\">ES</span> <span class=\"mi\">1</span>\n<span class=\"mi\">4</span> <span class=\"bp\">#</span><span class=\"n\">NS</span> <span class=\"mi\">0</span> <span class=\"n\">a</span>\n<span class=\"mi\">1</span> <span class=\"bp\">#</span><span class=\"n\">EV</span> <span class=\"mi\">0</span>\n<span class=\"mi\">2</span> <span class=\"bp\">#</span><span class=\"n\">EV</span> <span class=\"mi\">1</span>\n<span class=\"mi\">3</span> <span class=\"bp\">#</span><span class=\"n\">ES</span> <span class=\"mi\">0</span>\n<span class=\"mi\">4</span> <span class=\"bp\">#</span><span class=\"n\">EP</span> <span class=\"bp\">#</span><span class=\"n\">BD</span> <span class=\"mi\">4</span> <span class=\"mi\">2</span> <span class=\"mi\">3</span>\n<span class=\"mi\">5</span> <span class=\"bp\">#</span><span class=\"n\">EP</span> <span class=\"bp\">#</span><span class=\"n\">BD</span> <span class=\"mi\">4</span> <span class=\"mi\">1</span> <span class=\"mi\">4</span>\n<span class=\"mi\">6</span> <span class=\"bp\">#</span><span class=\"n\">EP</span> <span class=\"bp\">#</span><span class=\"n\">BI</span> <span class=\"mi\">3</span> <span class=\"mi\">0</span> <span class=\"mi\">5</span>\n<span class=\"mi\">5</span> <span class=\"bp\">#</span><span class=\"n\">NS</span> <span class=\"mi\">2</span> <span class=\"n\">refl</span>\n<span class=\"mi\">7</span> <span class=\"bp\">#</span><span class=\"n\">EC</span> <span class=\"mi\">2</span> <span class=\"mi\">1</span>\n<span class=\"mi\">8</span> <span class=\"bp\">#</span><span class=\"n\">EA</span> <span class=\"mi\">7</span> <span class=\"mi\">2</span>\n<span class=\"mi\">9</span> <span class=\"bp\">#</span><span class=\"n\">EA</span> <span class=\"mi\">8</span> <span class=\"mi\">1</span>\n<span class=\"mi\">10</span> <span class=\"bp\">#</span><span class=\"n\">EA</span> <span class=\"mi\">9</span> <span class=\"mi\">1</span>\n<span class=\"mi\">11</span> <span class=\"bp\">#</span><span class=\"n\">EP</span> <span class=\"bp\">#</span><span class=\"n\">BD</span> <span class=\"mi\">4</span> <span class=\"mi\">1</span> <span class=\"mi\">10</span>\n<span class=\"mi\">12</span> <span class=\"bp\">#</span><span class=\"n\">EP</span> <span class=\"bp\">#</span><span class=\"n\">BI</span> <span class=\"mi\">3</span> <span class=\"mi\">0</span> <span class=\"mi\">11</span>\n<span class=\"bp\">#</span><span class=\"n\">IND</span> <span class=\"mi\">2</span> <span class=\"mi\">2</span> <span class=\"mi\">6</span> <span class=\"mi\">1</span> <span class=\"mi\">5</span> <span class=\"mi\">12</span> <span class=\"mi\">1</span>\n<span class=\"bp\">#</span><span class=\"n\">QUOT</span>\n<span class=\"mi\">6</span> <span class=\"bp\">#</span><span class=\"n\">NS</span> <span class=\"mi\">0</span> <span class=\"n\">f</span>\n<span class=\"mi\">2</span> <span class=\"bp\">#</span><span class=\"n\">US</span> <span class=\"mi\">0</span>\n<span class=\"mi\">13</span> <span class=\"bp\">#</span><span class=\"n\">ES</span> <span class=\"mi\">2</span>\n<span class=\"bp\">#</span><span class=\"n\">AX</span> <span class=\"mi\">6</span> <span class=\"mi\">13</span>\n<span class=\"mi\">7</span> <span class=\"bp\">#</span><span class=\"n\">NS</span> <span class=\"mi\">0</span> <span class=\"n\">sum</span>\n<span class=\"bp\">#</span><span class=\"n\">INFIX</span> <span class=\"mi\">7</span> <span class=\"mi\">30</span>  <span class=\"bp\">⊕</span>\n<span class=\"mi\">8</span> <span class=\"bp\">#</span><span class=\"n\">NS</span> <span class=\"mi\">0</span> <span class=\"n\">has_mem</span>\n<span class=\"mi\">9</span> <span class=\"bp\">#</span><span class=\"n\">NS</span> <span class=\"mi\">8</span> <span class=\"n\">mem</span>\n<span class=\"bp\">#</span><span class=\"n\">INFIX</span> <span class=\"mi\">9</span> <span class=\"mi\">50</span>  <span class=\"bp\">∈</span>\n<span class=\"bp\">#</span><span class=\"n\">INFIX</span> <span class=\"mi\">2</span> <span class=\"mi\">50</span>  <span class=\"bp\">=</span>\n<span class=\"mi\">10</span> <span class=\"bp\">#</span><span class=\"n\">NS</span> <span class=\"mi\">0</span> <span class=\"n\">has_lt</span>\n<span class=\"mi\">11</span> <span class=\"bp\">#</span><span class=\"n\">NS</span> <span class=\"mi\">10</span> <span class=\"n\">lt</span>\n<span class=\"bp\">#</span><span class=\"n\">INFIX</span> <span class=\"mi\">11</span> <span class=\"mi\">50</span>  <span class=\"bp\">&lt;</span>\n<span class=\"mi\">12</span> <span class=\"bp\">#</span><span class=\"n\">NS</span> <span class=\"mi\">0</span> <span class=\"n\">has_mul</span>\n<span class=\"mi\">13</span> <span class=\"bp\">#</span><span class=\"n\">NS</span> <span class=\"mi\">12</span> <span class=\"n\">mul</span>\n<span class=\"bp\">#</span><span class=\"n\">INFIX</span> <span class=\"mi\">13</span> <span class=\"mi\">70</span>  <span class=\"bp\">*</span>\n<span class=\"mi\">14</span> <span class=\"bp\">#</span><span class=\"n\">NS</span> <span class=\"mi\">0</span> <span class=\"n\">interaction_monad_bind</span>\n<span class=\"bp\">...</span> <span class=\"n\">to</span> <span class=\"mi\">183</span> <span class=\"n\">lines</span> <span class=\"n\">total</span> <span class=\"bp\">...</span>\n</code></pre></div>\n<p>While this gives much less than if I had not used <code>--only-export</code>, this clearly contains a lot more than I expected, like definitions of operators that aren't needed. Is there any way to reduce this further? I think my definition is the line that says <code>#AX 6 13</code>, so can I safely ignore everything below it? (Would that be true in more complicated examples too?)</p>",
        "id": 299445457,
        "sender_full_name": "Thomas Brooks",
        "timestamp": 1663513936
    },
    {
        "content": "<p>If you add <code>prelude</code> at the top of your file what happens? This will not import everything in the lean <code>init</code> folder, which by default is imported in all files</p>",
        "id": 299448912,
        "sender_full_name": "Alex J. Best",
        "timestamp": 1663515973
    },
    {
        "content": "<p>Thank you, that does the trick!</p>",
        "id": 299466289,
        "sender_full_name": "Thomas Brooks",
        "timestamp": 1663527222
    }
]