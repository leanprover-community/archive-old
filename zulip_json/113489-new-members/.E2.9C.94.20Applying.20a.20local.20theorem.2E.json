[
    {
        "content": "<p>Hello, </p>\n<p>I have been working through some simple proofs on relations. I have a proved theorem I want to use in a later proof, but I am having trouble applying it. </p>\n<p>Here is where I am:</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"c\">/-</span><span class=\"cm\"> 1.9 h -/</span>\n<span class=\"kd\">theorem</span> <span class=\"n\">proph</span> <span class=\"o\">[</span><span class=\"n\">compR</span> <span class=\"o\">:</span> <span class=\"n\">complete</span> <span class=\"n\">R</span><span class=\"o\">]</span> <span class=\"o\">[</span><span class=\"n\">trnsR</span> <span class=\"o\">:</span> <span class=\"n\">transitive</span> <span class=\"n\">R</span><span class=\"o\">][</span><span class=\"n\">x</span> <span class=\"o\">:</span> <span class=\"n\">A</span><span class=\"o\">][</span><span class=\"n\">y</span> <span class=\"o\">:</span> <span class=\"n\">A</span><span class=\"o\">][</span><span class=\"n\">z</span> <span class=\"o\">:</span> <span class=\"n\">A</span><span class=\"o\">]:</span> <span class=\"o\">(</span><span class=\"n\">S</span> <span class=\"n\">x</span> <span class=\"n\">y</span> <span class=\"bp\">∧</span> <span class=\"n\">S</span> <span class=\"n\">y</span> <span class=\"n\">z</span><span class=\"o\">)</span> <span class=\"bp\">→</span> <span class=\"n\">S</span> <span class=\"n\">x</span> <span class=\"n\">z</span> <span class=\"o\">:=</span>\n<span class=\"kd\">begin</span>\n<span class=\"n\">intro</span> <span class=\"n\">sxyandsyx</span><span class=\"o\">,</span>\n<span class=\"n\">cases</span> <span class=\"n\">sxyandsyx</span><span class=\"o\">,</span>\n<span class=\"n\">cases</span> <span class=\"n\">sxyandsyx_right</span><span class=\"o\">,</span>\n\n<span class=\"kd\">end</span>\n</code></pre></div>\n<p>I have previously proved the following:</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kd\">theorem</span> <span class=\"n\">propg</span> <span class=\"o\">[</span><span class=\"n\">compR</span> <span class=\"o\">:</span> <span class=\"n\">complete</span> <span class=\"n\">R</span><span class=\"o\">]</span> <span class=\"o\">[</span><span class=\"n\">trnsR</span> <span class=\"o\">:</span> <span class=\"n\">transitive</span> <span class=\"n\">R</span><span class=\"o\">][</span><span class=\"n\">x</span> <span class=\"o\">:</span> <span class=\"n\">A</span><span class=\"o\">][</span><span class=\"n\">y</span> <span class=\"o\">:</span> <span class=\"n\">A</span><span class=\"o\">][</span><span class=\"n\">z</span> <span class=\"o\">:</span> <span class=\"n\">A</span><span class=\"o\">]:</span> <span class=\"o\">(</span><span class=\"n\">S</span> <span class=\"n\">x</span> <span class=\"n\">y</span> <span class=\"bp\">∧</span> <span class=\"n\">R</span> <span class=\"n\">y</span> <span class=\"n\">z</span><span class=\"o\">)</span> <span class=\"bp\">→</span> <span class=\"n\">S</span> <span class=\"n\">x</span> <span class=\"n\">z</span>\n</code></pre></div>\n<p>Since I have <code>S x y</code> and <code>R y z</code> in the current proof context and the goal is <code>S x z</code>, I would like to apply this <code>propg</code>, but I am having trouble getting a tactic to do this. </p>\n<p>I have tried <code>show sxz : S x z, from propg sxyandsyx_left sxyandsyx_right_left</code> but this gives me <code>sync</code> error.</p>",
        "id": 281557255,
        "sender_full_name": "Greg Leo",
        "timestamp": 1651952621
    },
    {
        "content": "<p>Can you share a <a href=\"https://leanprover-community.github.io/mwe.html\">#mwe</a>?</p>",
        "id": 281557305,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1651952661
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kn\">import</span> <span class=\"n\">tactic</span>\n\n<span class=\"kn\">section</span>\n\n<span class=\"kd\">parameters</span> <span class=\"o\">{</span><span class=\"n\">A</span> <span class=\"o\">:</span> <span class=\"kt\">Type</span><span class=\"o\">}</span> <span class=\"o\">{</span><span class=\"n\">R</span> <span class=\"o\">:</span> <span class=\"n\">A</span> <span class=\"bp\">→</span> <span class=\"n\">A</span> <span class=\"bp\">→</span> <span class=\"kt\">Prop</span><span class=\"o\">}</span>\n\n<span class=\"c\">/-</span><span class=\"cm\"> Defininig Complete Relations -/</span>\n<span class=\"kd\">def</span> <span class=\"n\">complete</span> <span class=\"o\">(</span><span class=\"n\">R</span> <span class=\"o\">:</span> <span class=\"n\">A</span> <span class=\"bp\">→</span> <span class=\"n\">A</span> <span class=\"bp\">→</span> <span class=\"kt\">Prop</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"kt\">Prop</span> <span class=\"o\">:=</span>\n<span class=\"bp\">∀</span> <span class=\"n\">x</span> <span class=\"n\">y</span><span class=\"o\">,</span> <span class=\"n\">R</span> <span class=\"n\">x</span> <span class=\"n\">y</span> <span class=\"bp\">∨</span> <span class=\"n\">R</span> <span class=\"n\">y</span> <span class=\"n\">x</span>\n\n<span class=\"c\">/-</span><span class=\"cm\"> Defininig S the Strict Relation-/</span>\n<span class=\"kd\">def</span> <span class=\"n\">S</span> <span class=\"o\">(</span><span class=\"n\">a</span> <span class=\"n\">b</span> <span class=\"o\">:</span> <span class=\"n\">A</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"kt\">Prop</span> <span class=\"o\">:=</span> <span class=\"n\">R</span> <span class=\"n\">a</span> <span class=\"n\">b</span> <span class=\"bp\">∧</span> <span class=\"bp\">¬</span> <span class=\"n\">R</span> <span class=\"n\">b</span> <span class=\"n\">a</span>\n\n<span class=\"c\">/-</span><span class=\"cm\"> 1.9 g -/</span>\n<span class=\"kd\">theorem</span> <span class=\"n\">propg</span> <span class=\"o\">[</span><span class=\"n\">compR</span> <span class=\"o\">:</span> <span class=\"n\">complete</span> <span class=\"n\">R</span><span class=\"o\">]</span> <span class=\"o\">[</span><span class=\"n\">trnsR</span> <span class=\"o\">:</span> <span class=\"n\">transitive</span> <span class=\"n\">R</span><span class=\"o\">][</span><span class=\"n\">x</span> <span class=\"o\">:</span> <span class=\"n\">A</span><span class=\"o\">][</span><span class=\"n\">y</span> <span class=\"o\">:</span> <span class=\"n\">A</span><span class=\"o\">][</span><span class=\"n\">z</span> <span class=\"o\">:</span> <span class=\"n\">A</span><span class=\"o\">]:</span> <span class=\"o\">(</span><span class=\"n\">S</span> <span class=\"n\">x</span> <span class=\"n\">y</span> <span class=\"bp\">∧</span> <span class=\"n\">R</span> <span class=\"n\">y</span> <span class=\"n\">z</span><span class=\"o\">)</span> <span class=\"bp\">→</span> <span class=\"n\">S</span> <span class=\"n\">x</span> <span class=\"n\">z</span> <span class=\"o\">:=</span>\n<span class=\"kd\">begin</span>\n<span class=\"n\">intro</span> <span class=\"n\">sxyandryz</span><span class=\"o\">,</span>\n<span class=\"n\">cases</span> <span class=\"n\">sxyandryz</span><span class=\"o\">,</span>\n<span class=\"n\">cases</span> <span class=\"n\">sxyandryz_left</span><span class=\"o\">,</span>\n<span class=\"n\">constructor</span><span class=\"o\">,</span>\n<span class=\"o\">{</span>\n  <span class=\"k\">have</span> <span class=\"n\">rxz</span> <span class=\"o\">:</span> <span class=\"n\">R</span> <span class=\"n\">x</span> <span class=\"n\">z</span><span class=\"o\">,</span> <span class=\"k\">from</span> <span class=\"n\">trnsR</span> <span class=\"n\">sxyandryz_left_left</span> <span class=\"n\">sxyandryz_right</span><span class=\"o\">,</span>\n  <span class=\"n\">tauto</span>\n<span class=\"o\">},</span>\n<span class=\"o\">{</span>\n  <span class=\"k\">have</span> <span class=\"n\">rxz</span> <span class=\"o\">:</span> <span class=\"n\">R</span> <span class=\"n\">x</span> <span class=\"n\">z</span><span class=\"o\">,</span> <span class=\"k\">from</span> <span class=\"n\">trnsR</span> <span class=\"n\">sxyandryz_left_left</span> <span class=\"n\">sxyandryz_right</span><span class=\"o\">,</span>\n  <span class=\"k\">assume</span> <span class=\"n\">rzx</span> <span class=\"o\">:</span> <span class=\"n\">R</span> <span class=\"n\">z</span> <span class=\"n\">x</span><span class=\"o\">,</span>\n  <span class=\"k\">have</span> <span class=\"n\">ryx</span> <span class=\"o\">:</span> <span class=\"n\">R</span> <span class=\"n\">y</span> <span class=\"n\">x</span><span class=\"o\">,</span> <span class=\"k\">from</span> <span class=\"n\">trnsR</span> <span class=\"n\">sxyandryz_right</span> <span class=\"n\">rzx</span><span class=\"o\">,</span>\n  <span class=\"n\">tauto</span><span class=\"o\">,</span>\n<span class=\"o\">}</span>\n<span class=\"kd\">end</span>\n\n\n<span class=\"c\">/-</span><span class=\"cm\"> 1.9 h -/</span>\n<span class=\"kd\">theorem</span> <span class=\"n\">proph</span> <span class=\"o\">[</span><span class=\"n\">compR</span> <span class=\"o\">:</span> <span class=\"n\">complete</span> <span class=\"n\">R</span><span class=\"o\">]</span> <span class=\"o\">[</span><span class=\"n\">trnsR</span> <span class=\"o\">:</span> <span class=\"n\">transitive</span> <span class=\"n\">R</span><span class=\"o\">][</span><span class=\"n\">x</span> <span class=\"o\">:</span> <span class=\"n\">A</span><span class=\"o\">][</span><span class=\"n\">y</span> <span class=\"o\">:</span> <span class=\"n\">A</span><span class=\"o\">][</span><span class=\"n\">z</span> <span class=\"o\">:</span> <span class=\"n\">A</span><span class=\"o\">]:</span> <span class=\"o\">(</span><span class=\"n\">S</span> <span class=\"n\">x</span> <span class=\"n\">y</span> <span class=\"bp\">∧</span> <span class=\"n\">S</span> <span class=\"n\">y</span> <span class=\"n\">z</span><span class=\"o\">)</span> <span class=\"bp\">→</span> <span class=\"n\">S</span> <span class=\"n\">x</span> <span class=\"n\">z</span> <span class=\"o\">:=</span>\n<span class=\"kd\">begin</span>\n<span class=\"n\">intro</span> <span class=\"n\">sxyandsyx</span><span class=\"o\">,</span>\n<span class=\"n\">cases</span> <span class=\"n\">sxyandsyx</span><span class=\"o\">,</span>\n<span class=\"n\">cases</span> <span class=\"n\">sxyandsyx_right</span><span class=\"o\">,</span>\n<span class=\"gr\">sorry</span><span class=\"o\">,</span>\n<span class=\"kd\">end</span>\n\n<span class=\"kd\">end</span>\n</code></pre></div>",
        "id": 281557539,
        "sender_full_name": "Greg Leo",
        "timestamp": 1651953122
    },
    {
        "content": "<p>Sorry, should have just done that in the first place :-D</p>",
        "id": 281557574,
        "sender_full_name": "Greg Leo",
        "timestamp": 1651953144
    },
    {
        "content": "<p>I put the sorry where I am stuck trying to apply <code>propg</code></p>",
        "id": 281557658,
        "sender_full_name": "Greg Leo",
        "timestamp": 1651953272
    },
    {
        "content": "<p>Note that <code>parameters</code> has some slightly quirky behavior; in mathlib we just never use it and use <code>variables</code> instead</p>",
        "id": 281557961,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1651953671
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kd\">parameters</span> <span class=\"o\">{</span><span class=\"n\">A</span> <span class=\"o\">:</span> <span class=\"kt\">Type</span><span class=\"o\">}</span> <span class=\"o\">{</span><span class=\"n\">R</span> <span class=\"o\">:</span> <span class=\"n\">A</span> <span class=\"bp\">→</span> <span class=\"n\">A</span> <span class=\"bp\">→</span> <span class=\"kt\">Prop</span><span class=\"o\">}</span>\n\n<span class=\"c\">/-</span><span class=\"cm\"> Defining Complete Relations -/</span>\n<span class=\"kd\">def</span> <span class=\"n\">complete</span> <span class=\"o\">(</span><span class=\"n\">R</span> <span class=\"o\">:</span> <span class=\"n\">A</span> <span class=\"bp\">→</span> <span class=\"n\">A</span> <span class=\"bp\">→</span> <span class=\"kt\">Prop</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"kt\">Prop</span> <span class=\"o\">:=</span>\n<span class=\"bp\">∀</span> <span class=\"n\">x</span> <span class=\"n\">y</span><span class=\"o\">,</span> <span class=\"n\">R</span> <span class=\"n\">x</span> <span class=\"n\">y</span> <span class=\"bp\">∨</span> <span class=\"n\">R</span> <span class=\"n\">y</span> <span class=\"n\">x</span>\n\n<span class=\"c\">/-</span><span class=\"cm\"> Defining S the Strict Relation-/</span>\n<span class=\"kd\">def</span> <span class=\"n\">S</span> <span class=\"o\">(</span><span class=\"n\">a</span> <span class=\"n\">b</span> <span class=\"o\">:</span> <span class=\"n\">A</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"kt\">Prop</span> <span class=\"o\">:=</span> <span class=\"n\">R</span> <span class=\"n\">a</span> <span class=\"n\">b</span> <span class=\"bp\">∧</span> <span class=\"bp\">¬</span> <span class=\"n\">R</span> <span class=\"n\">b</span> <span class=\"n\">a</span>\n\n<span class=\"c\">/-</span><span class=\"cm\"> 1.9 g -/</span>\n<span class=\"kd\">theorem</span> <span class=\"n\">propg</span> <span class=\"o\">(</span><span class=\"n\">compR</span> <span class=\"o\">:</span> <span class=\"n\">complete</span> <span class=\"n\">R</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">trnsR</span> <span class=\"o\">:</span> <span class=\"n\">transitive</span> <span class=\"n\">R</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">x</span> <span class=\"o\">:</span> <span class=\"n\">A</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">y</span> <span class=\"o\">:</span> <span class=\"n\">A</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">z</span> <span class=\"o\">:</span> <span class=\"n\">A</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"o\">(</span><span class=\"n\">S</span> <span class=\"n\">x</span> <span class=\"n\">y</span> <span class=\"bp\">∧</span> <span class=\"n\">R</span> <span class=\"n\">y</span> <span class=\"n\">z</span><span class=\"o\">)</span> <span class=\"bp\">→</span> <span class=\"n\">S</span> <span class=\"n\">x</span> <span class=\"n\">z</span> <span class=\"o\">:=</span>\n<span class=\"kd\">begin</span>\n  <span class=\"n\">intro</span> <span class=\"n\">sxyandryz</span><span class=\"o\">,</span>\n  <span class=\"n\">cases</span> <span class=\"n\">sxyandryz</span><span class=\"o\">,</span>\n  <span class=\"n\">cases</span> <span class=\"n\">sxyandryz_left</span><span class=\"o\">,</span>\n  <span class=\"n\">constructor</span><span class=\"o\">,</span>\n  <span class=\"o\">{</span> <span class=\"k\">have</span> <span class=\"n\">rxz</span> <span class=\"o\">:</span> <span class=\"n\">R</span> <span class=\"n\">x</span> <span class=\"n\">z</span> <span class=\"o\">:=</span> <span class=\"n\">trnsR</span> <span class=\"n\">sxyandryz_left_left</span> <span class=\"n\">sxyandryz_right</span><span class=\"o\">,</span>\n    <span class=\"n\">tauto</span> <span class=\"o\">},</span>\n  <span class=\"o\">{</span> <span class=\"k\">have</span> <span class=\"n\">rxz</span> <span class=\"o\">:</span> <span class=\"n\">R</span> <span class=\"n\">x</span> <span class=\"n\">z</span> <span class=\"o\">:=</span> <span class=\"n\">trnsR</span> <span class=\"n\">sxyandryz_left_left</span> <span class=\"n\">sxyandryz_right</span><span class=\"o\">,</span>\n    <span class=\"n\">intro</span> <span class=\"n\">rzx</span><span class=\"o\">,</span>\n    <span class=\"k\">have</span> <span class=\"n\">ryx</span> <span class=\"o\">:</span> <span class=\"n\">R</span> <span class=\"n\">y</span> <span class=\"n\">x</span> <span class=\"o\">:=</span> <span class=\"n\">trnsR</span> <span class=\"n\">sxyandryz_right</span> <span class=\"n\">rzx</span><span class=\"o\">,</span>\n    <span class=\"n\">tauto</span><span class=\"o\">,</span> <span class=\"o\">}</span>\n<span class=\"kd\">end</span>\n\n<span class=\"c\">/-</span><span class=\"cm\"> 1.9 h -/</span>\n<span class=\"kd\">theorem</span> <span class=\"n\">proph</span> <span class=\"o\">(</span><span class=\"n\">compR</span> <span class=\"o\">:</span> <span class=\"n\">complete</span> <span class=\"n\">R</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">trnsR</span> <span class=\"o\">:</span> <span class=\"n\">transitive</span> <span class=\"n\">R</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">x</span> <span class=\"o\">:</span> <span class=\"n\">A</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">y</span> <span class=\"o\">:</span> <span class=\"n\">A</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">z</span> <span class=\"o\">:</span> <span class=\"n\">A</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"o\">(</span><span class=\"n\">S</span> <span class=\"n\">x</span> <span class=\"n\">y</span> <span class=\"bp\">∧</span> <span class=\"n\">S</span> <span class=\"n\">y</span> <span class=\"n\">z</span><span class=\"o\">)</span> <span class=\"bp\">→</span> <span class=\"n\">S</span> <span class=\"n\">x</span> <span class=\"n\">z</span> <span class=\"o\">:=</span>\n<span class=\"kd\">begin</span>\n  <span class=\"n\">intro</span> <span class=\"n\">sxyandsyx</span><span class=\"o\">,</span>\n  <span class=\"n\">cases</span> <span class=\"n\">sxyandsyx</span><span class=\"o\">,</span>\n  <span class=\"n\">cases</span> <span class=\"n\">sxyandsyx_right</span><span class=\"o\">,</span>\n  <span class=\"n\">exact</span> <span class=\"n\">propg</span> <span class=\"n\">compR</span> <span class=\"n\">trnsR</span> <span class=\"n\">x</span> <span class=\"n\">y</span> <span class=\"n\">z</span> <span class=\"o\">(</span><span class=\"n\">and.intro</span> <span class=\"n\">sxyandsyx_left</span> <span class=\"n\">sxyandsyx_right_left</span><span class=\"o\">),</span>\n<span class=\"kd\">end</span>\n</code></pre></div>",
        "id": 281557970,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1651953701
    },
    {
        "content": "<p>In practice for you, that would mean writing <code>S R x y</code> rather than <code>S x y</code></p>",
        "id": 281557971,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1651953703
    },
    {
        "content": "<p>Make user to only use <code>[]</code> for arguments if they're actually classes</p>",
        "id": 281557975,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1651953717
    },
    {
        "content": "<p>Ok, I see now. Thank you <span class=\"user-mention\" data-user-id=\"306601\">@Kyle Miller</span></p>",
        "id": 281558267,
        "sender_full_name": "Greg Leo",
        "timestamp": 1651954098
    },
    {
        "content": "<p>and thank you <span class=\"user-mention\" data-user-id=\"310045\">@Eric Wieser</span> for the tip. I'll look up the distinction about these parameters/variables.</p>",
        "id": 281558288,
        "sender_full_name": "Greg Leo",
        "timestamp": 1651954128
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"498890\">Greg Leo</span> has marked this topic as resolved.</p>",
        "id": 281558289,
        "sender_full_name": "Notification Bot",
        "timestamp": 1651954131
    },
    {
        "content": "<p>Helpful as always!</p>",
        "id": 281558296,
        "sender_full_name": "Greg Leo",
        "timestamp": 1651954146
    }
]