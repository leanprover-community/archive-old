[
    {
        "content": "<p>Hey,<br>\nI'm trying to prove that any element of the universal groupoid for a map is uniquely represented by a reduced word <a href=\"https://github.com/bottine/mathlib/blob/765de1fb5634566383ee9dc221b9a7bda1de05dc/src/category_theory/groupoid/universal_groupoid.lean#L226\">here</a>.<br>\nI tried more or less following the structure in <code>free_group.lean</code>, but I feel like I'm working against the type system: Now words are indexed by their endpoints, and most inductions become quite messy or don't work at all.</p>\n<p>In short:<br>\nIf <code>V</code> is a groupoid and <code>σ : V -&gt; V'</code> a map, we first define a quiver structure on <code>V'</code> by pushing that of <code>V</code>along <code>σ</code>, take the path category on this structure, and quotient by the following relation:</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kd\">inductive</span> <span class=\"n\">red.atomic_step</span> <span class=\"o\">:</span> <span class=\"n\">hom_rel</span> <span class=\"o\">(</span><span class=\"n\">paths</span> <span class=\"o\">(</span><span class=\"n\">quiver.push</span> <span class=\"n\">σ</span><span class=\"o\">))</span>\n<span class=\"bp\">|</span> <span class=\"n\">comp</span> <span class=\"o\">(</span><span class=\"n\">X</span> <span class=\"n\">Y</span> <span class=\"n\">Z</span> <span class=\"o\">:</span> <span class=\"n\">V</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">f</span> <span class=\"o\">:</span> <span class=\"n\">X</span> <span class=\"bp\">⟶</span> <span class=\"n\">Y</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">g</span> <span class=\"o\">:</span> <span class=\"n\">Y</span> <span class=\"bp\">⟶</span> <span class=\"n\">Z</span><span class=\"o\">)</span> <span class=\"o\">:</span>\n    <span class=\"n\">red.atomic_step</span>\n      <span class=\"o\">((</span><span class=\"n\">σ</span> <span class=\"bp\">†</span> <span class=\"n\">f</span><span class=\"o\">)</span> <span class=\"bp\">≫</span> <span class=\"o\">(</span><span class=\"n\">σ</span> <span class=\"bp\">†</span> <span class=\"n\">g</span><span class=\"o\">))</span>\n      <span class=\"o\">(</span><span class=\"n\">σ</span> <span class=\"bp\">†</span> <span class=\"o\">(</span><span class=\"n\">f</span> <span class=\"bp\">≫</span> <span class=\"n\">g</span><span class=\"o\">))</span>\n<span class=\"bp\">|</span> <span class=\"n\">id</span> <span class=\"o\">(</span><span class=\"n\">X</span> <span class=\"o\">:</span> <span class=\"n\">V</span><span class=\"o\">)</span> <span class=\"o\">:</span>\n    <span class=\"n\">red.atomic_step</span>\n      <span class=\"o\">(</span><span class=\"n\">σ</span> <span class=\"bp\">†</span> <span class=\"o\">(</span><span class=\"mi\">𝟙</span> <span class=\"n\">X</span><span class=\"o\">))</span>\n      <span class=\"o\">(</span><span class=\"mi\">𝟙</span> <span class=\"bp\">$</span> <span class=\"n\">σ</span> <span class=\"n\">X</span><span class=\"o\">)</span>\n</code></pre></div>\n<p>where <code>σ † f</code> is the path in <code>V'</code> obtained by pushing the arrow <code>f</code> of <code>V</code>.<br>\nThis works fine for defining the quotient and proving \"abstract\" things about this universal groupoid, but when it comes to the \"messy\" part of proving uniqueness of reduced words, it gets very painful and I get stuck at every step.<br>\nI'm wondering if I'm doing something wrong and/or there might be a better approach to this thing ? <br>\nThanks!</p>",
        "id": 306402157,
        "sender_full_name": "Rémi Bottinelli",
        "timestamp": 1666860544
    }
]