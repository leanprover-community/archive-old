[
    {
        "content": "<p>Okay here comes a question from a person with a not so deep mathematical background and I hope my head is not ripped off for asking.</p>\n<p>In order to get warm with Lean (3) and mathlib I want to formalise a proof that seems easy on paper:</p>\n<ul>\n<li>Having a positive definite quadratic form <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>x</mi><mi mathvariant=\"normal\">⊤</mi></msup><mi>P</mi><mi>x</mi></mrow><annotation encoding=\"application/x-tex\">x^\\top P x</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8491em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8491em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">⊤</span></span></span></span></span></span></span></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">P</span><span class=\"mord mathnormal\">x</span></span></span></span> and a positive semidefinite quadratic form <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>x</mi><mi mathvariant=\"normal\">⊤</mi></msup><mi>S</mi><mi>x</mi></mrow><annotation encoding=\"application/x-tex\">x^\\top S x</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8491em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8491em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">⊤</span></span></span></span></span></span></span></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"mord mathnormal\">x</span></span></span></span></li>\n<li>Then the sum <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>x</mi><mi mathvariant=\"normal\">⊤</mi></msup><mi>P</mi><mi>x</mi><mo>+</mo><msup><mi>x</mi><mi mathvariant=\"normal\">⊤</mi></msup><mi>S</mi><mi>x</mi><mo>=</mo><msup><mi>x</mi><mi mathvariant=\"normal\">⊤</mi></msup><msup><mi>P</mi><mo mathvariant=\"normal\" lspace=\"0em\" rspace=\"0em\">′</mo></msup><mi>x</mi></mrow><annotation encoding=\"application/x-tex\">x^\\top P x + x^\\top S x = x^\\top P&#x27; x</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.9324em;vertical-align:-0.0833em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8491em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">⊤</span></span></span></span></span></span></span></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">P</span><span class=\"mord mathnormal\">x</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8491em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8491em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">⊤</span></span></span></span></span></span></span></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"mord mathnormal\">x</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8491em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8491em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">⊤</span></span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">P</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7519em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">′</span></span></span></span></span></span></span></span></span><span class=\"mord mathnormal\">x</span></span></span></span> yields a positive definite quadratic form <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>x</mi><mi mathvariant=\"normal\">⊤</mi></msup><msup><mi>P</mi><mo mathvariant=\"normal\" lspace=\"0em\" rspace=\"0em\">′</mo></msup><mi>x</mi></mrow><annotation encoding=\"application/x-tex\">x^\\top P&#x27; x</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8491em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8491em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">⊤</span></span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">P</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7519em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">′</span></span></span></span></span></span></span></span></span><span class=\"mord mathnormal\">x</span></span></span></span>.</li>\n</ul>\n<hr>\n<p>The proof to that statement should be very simple as </p>\n<ul>\n<li>positive definiteness for <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>Q</mi></mrow><annotation encoding=\"application/x-tex\">Q</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8778em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\">Q</span></span></span></span> is defined in mathlib as <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"normal\">∀</mi><mi>x</mi><mo mathvariant=\"normal\">≠</mo><mn>0</mn><mo separator=\"true\">,</mo><mn>0</mn><mo>&lt;</mo><mi>Q</mi><mi>x</mi></mrow><annotation encoding=\"application/x-tex\"> \\forall x \\neq 0, 0 &lt; Q x </annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord\">∀</span><span class=\"mord mathnormal\">x</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\"><span class=\"mrel\"><span class=\"mord vbox\"><span class=\"thinbox\"><span class=\"rlap\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"inner\"><span class=\"mord\"><span class=\"mrel\"></span></span></span><span class=\"fix\"></span></span></span></span></span><span class=\"mrel\">=</span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8389em;vertical-align:-0.1944em;\"></span><span class=\"mord\">0</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">0</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">&lt;</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8778em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\">Q</span><span class=\"mord mathnormal\">x</span></span></span></span> (and <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>Q</mi><mi>x</mi><mo>=</mo><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">Q x = 0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8778em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\">Q</span><span class=\"mord mathnormal\">x</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">0</span></span></span></span> for <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi><mo>=</mo><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">x=0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">x</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">0</span></span></span></span> but I think this is omitted as there is <code>quadratic_form.map_zero</code> which says <code>⇑Q 0 = 0</code> )</li>\n<li>(positive) semidefiniteness for <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>Q</mi></mrow><annotation encoding=\"application/x-tex\">Q</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8778em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\">Q</span></span></span></span> is not yet defined in mathlib, but I would describe it as <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"normal\">∀</mi><mi>x</mi><mo mathvariant=\"normal\">≠</mo><mn>0</mn><mo separator=\"true\">,</mo><mn>0</mn><mo>≤</mo><mi>Q</mi><mi>x</mi></mrow><annotation encoding=\"application/x-tex\"> \\forall x \\neq 0, 0 \\leq Q x </annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord\">∀</span><span class=\"mord mathnormal\">x</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\"><span class=\"mrel\"><span class=\"mord vbox\"><span class=\"thinbox\"><span class=\"rlap\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"inner\"><span class=\"mord\"><span class=\"mrel\"></span></span></span><span class=\"fix\"></span></span></span></span></span><span class=\"mrel\">=</span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8389em;vertical-align:-0.1944em;\"></span><span class=\"mord\">0</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">0</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">≤</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8778em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\">Q</span><span class=\"mord mathnormal\">x</span></span></span></span> (and <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>Q</mi><mi>x</mi><mo>=</mo><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">Q x = 0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8778em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\">Q</span><span class=\"mord mathnormal\">x</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">0</span></span></span></span> for <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi><mo>=</mo><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">x=0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">x</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">0</span></span></span></span> )</li>\n</ul>\n<table>\n<thead>\n<tr>\n<th></th>\n<th align=\"center\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>x</mi><mi mathvariant=\"normal\">⊤</mi></msup><mi>P</mi><mi>x</mi></mrow><annotation encoding=\"application/x-tex\">x^\\top P x</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8491em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8491em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">⊤</span></span></span></span></span></span></span></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">P</span><span class=\"mord mathnormal\">x</span></span></span></span></th>\n<th align=\"center\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>x</mi><mi mathvariant=\"normal\">⊤</mi></msup><mi>S</mi><mi>x</mi></mrow><annotation encoding=\"application/x-tex\">x^\\top S x</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8491em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8491em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">⊤</span></span></span></span></span></span></span></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"mord mathnormal\">x</span></span></span></span></th>\n<th align=\"center\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>x</mi><mi mathvariant=\"normal\">⊤</mi></msup><msup><mi>P</mi><mo mathvariant=\"normal\" lspace=\"0em\" rspace=\"0em\">′</mo></msup><mi>x</mi></mrow><annotation encoding=\"application/x-tex\">x^\\top P&#x27; x</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8491em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8491em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">⊤</span></span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">P</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7519em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">′</span></span></span></span></span></span></span></span></span><span class=\"mord mathnormal\">x</span></span></span></span></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi><mo>=</mo><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">x=0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">x</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">0</span></span></span></span></td>\n<td align=\"center\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">0</span></span></span></span></td>\n<td align=\"center\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">0</span></span></span></span></td>\n<td align=\"center\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">0</span></span></span></span></td>\n</tr>\n<tr>\n<td><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi><mo mathvariant=\"normal\">≠</mo><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">x\\neq0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\">x</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\"><span class=\"mrel\"><span class=\"mord vbox\"><span class=\"thinbox\"><span class=\"rlap\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"inner\"><span class=\"mord\"><span class=\"mrel\"></span></span></span><span class=\"fix\"></span></span></span></span></span><span class=\"mrel\">=</span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">0</span></span></span></span></td>\n<td align=\"center\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>&gt;</mo><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">&gt;0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.5782em;vertical-align:-0.0391em;\"></span><span class=\"mrel\">&gt;</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">0</span></span></span></span></td>\n<td align=\"center\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>≥</mo><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">\\geq 0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.7719em;vertical-align:-0.136em;\"></span><span class=\"mrel\">≥</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">0</span></span></span></span></td>\n<td align=\"center\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>&gt;</mo><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">&gt;0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.5782em;vertical-align:-0.0391em;\"></span><span class=\"mrel\">&gt;</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">0</span></span></span></span></td>\n</tr>\n</tbody>\n</table>\n<p><strong>Note:</strong></p>\n<ul>\n<li>This is a proof for <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi><mo>∈</mo><msup><mi mathvariant=\"double-struck\">R</mi><mi>n</mi></msup></mrow><annotation encoding=\"application/x-tex\">x \\in \\mathbb R^n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.5782em;vertical-align:-0.0391em;\"></span><span class=\"mord mathnormal\">x</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">∈</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6889em;\"></span><span class=\"mord\"><span class=\"mord mathbb\">R</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6644em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span></span></span></span></span></span></span></span> but I learned now that there is a more general definition for quadratic forms <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>Q</mi></mrow><annotation encoding=\"application/x-tex\">Q</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8778em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\">Q</span></span></span></span> which I don't know too much about but I assume this proof extends to it</li>\n</ul>\n<hr>\n<p>So first of all, I would like to contribute the definition for positive semidefinite quadratic forms</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"sd\">/-- A positive semi definite quadratic form is greater equal zero on nonzero vectors. -/</span>\n<span class=\"kd\">def</span> <span class=\"n\">pos_semi_def</span> <span class=\"o\">(</span><span class=\"n\">Q₂</span> <span class=\"o\">:</span> <span class=\"n\">quadratic_form</span> <span class=\"n\">R₂</span> <span class=\"n\">M</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"kt\">Prop</span> <span class=\"o\">:=</span> <span class=\"o\">(</span><span class=\"bp\">∀</span> <span class=\"n\">x</span> <span class=\"bp\">≠</span> <span class=\"mi\">0</span><span class=\"o\">,</span> <span class=\"mi\">0</span> <span class=\"bp\">≤</span> <span class=\"n\">Q₂</span> <span class=\"n\">x</span><span class=\"o\">)</span>\n</code></pre></div>\n<p>and what I came up with for the proof</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kd\">lemma</span> <span class=\"n\">pos_def_pos_semi_def_add</span> <span class=\"o\">{</span><span class=\"n\">Q</span> <span class=\"n\">Q'</span> <span class=\"o\">:</span> <span class=\"n\">quadratic_form</span> <span class=\"n\">R₂</span> <span class=\"n\">M</span><span class=\"o\">}</span> <span class=\"o\">(</span><span class=\"n\">hQ</span> <span class=\"o\">:</span> <span class=\"n\">pos_def</span> <span class=\"n\">Q</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">hQ'</span> <span class=\"o\">:</span> <span class=\"n\">pos_semi_def</span> <span class=\"n\">Q'</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"n\">pos_def</span> <span class=\"o\">(</span><span class=\"n\">Q</span><span class=\"bp\">+</span><span class=\"n\">Q'</span><span class=\"o\">)</span> <span class=\"o\">:=</span>\n<span class=\"kd\">begin</span>\n<span class=\"n\">unfold</span> <span class=\"n\">pos_def</span><span class=\"o\">,</span>\n<span class=\"n\">unfold</span> <span class=\"n\">pos_def</span> <span class=\"n\">at</span> <span class=\"n\">hQ</span><span class=\"o\">,</span>\n<span class=\"n\">unfold</span> <span class=\"n\">pos_semi_def</span> <span class=\"n\">at</span> <span class=\"n\">hQ'</span><span class=\"o\">,</span>\n<span class=\"n\">intro</span> <span class=\"n\">h1</span><span class=\"o\">,</span>\n<span class=\"n\">intro</span> <span class=\"n\">h2</span><span class=\"o\">,</span>\n<span class=\"n\">rw</span> <span class=\"n\">quadratic_form.add_apply</span><span class=\"o\">,</span>\n<span class=\"c1\">--library_search,</span>\n<span class=\"n\">exact</span> <span class=\"n\">lt_add_of_pos_of_le</span> <span class=\"o\">(</span><span class=\"n\">hQ</span> <span class=\"n\">h1</span> <span class=\"n\">h2</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">hQ'</span> <span class=\"n\">h1</span> <span class=\"n\">h2</span><span class=\"o\">),</span>\n<span class=\"kd\">end</span>\n</code></pre></div>\n<p>Here is my sketch in the <a href=\"https://leanprover-community.github.io/lean-web-editor/#code=import%20algebra.invertible%0Aimport%20linear_algebra.matrix.determinant%0Aimport%20linear_algebra.bilinear_form%0Aimport%20linear_algebra.quadratic_form.basic%0A%0Auniverses%20u%20v%20w%0Avariables%20%7BS%20%3A%20Type*%7D%0Avariables%20%7BR%20%3A%20Type*%7D%20%7BM%20%3A%20Type*%7D%20%5Badd_comm_group%20M%5D%20%5Bring%20R%5D%0Avariables%20%7BR₁%20%3A%20Type*%7D%20%5Bcomm_ring%20R₁%5D%0A%0Avariables%20%5Bmodule%20R%20M%5D%20%5Bmodule%20R₁%20M%5D%0A%0Anamespace%20quadratic_form%0A%0A%0A%0Asection%20pos_semi_def%0A%0Avariables%20%7BR₂%20%3A%20Type%20u%7D%20%5Bordered_ring%20R₂%5D%20%5Bmodule%20R₂%20M%5D%20%7BQ₂%20%3A%20quadratic_form%20R₂%20M%7D%0A%0A%2F--%20A%20positive%20semi%20definite%20quadratic%20form%20is%20greater%20equal%20zero%20on%20nonzero%20vectors.%20-%2F%0Adef%20pos_semi_def%20%28Q₂%20%3A%20quadratic_form%20R₂%20M%29%20%3A%20Prop%20%3A%3D%20%28∀%20x%20≠%200%2C%200%20≤%20Q₂%20x%29%0A%0Alemma%20pos_def_pos_semi_def_add%20%7BQ%20Q'%20%3A%20quadratic_form%20R₂%20M%7D%20%28hQ%20%3A%20pos_def%20Q%29%20%28hQ'%20%3A%20pos_semi_def%20Q'%29%20%3A%20pos_def%20%28Q%2BQ'%29%20%3A%3D%0Abegin%0Aunfold%20pos_def%2C%0Aunfold%20pos_def%20at%20hQ%2C%0Aunfold%20pos_semi_def%20at%20hQ'%2C%0Aintro%20h1%2C%0Aintro%20h2%2C%0Arw%20quadratic_form.add_apply%2C%0A--library_search%2C%0Aexact%20lt_add_of_pos_of_le%20%28hQ%20h1%20h2%29%20%28hQ'%20h1%20h2%29%2C%0Aend%0A%0Aend%20pos_semi_def%0Aend%20quadratic_form\">Lean Web Editor</a>. Probably this can be formalised in a more elegant way  and maybe this is not even relevant for mathlib so I would love to hear your feedback. For the future I am interested in <a href=\"https://en.wikipedia.org/wiki/Lyapunov_stability\">Lyapunov stability</a> but that is still a long way (for me and for mathlib)</p>",
        "id": 268852501,
        "sender_full_name": "Daniel Pusicha",
        "timestamp": 1642776658
    },
    {
        "content": "<p>I was thinking about this too - but perhaps we can simply spell positive-semidefinite as <code>0 ≤ Q</code></p>",
        "id": 268856810,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1642778535
    },
    {
        "content": "<p>With <code>Q₁ ≤ Q₂</code> defined as <code>⇑Q₁ ≤ ⇑Q₂</code> (which is <a href=\"https://leanprover-community.github.io/mathlib_docs/find/pi.has_le\">docs#pi.has_le</a>), which makes <code>0 ≤ Q</code> defeq to <code>∀ x, 0 ≤ ⇑Q x</code></p>",
        "id": 268856937,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1642778595
    },
    {
        "content": "<p>We could then change <a href=\"https://leanprover-community.github.io/mathlib_docs/find/quadratic_form.pos_def.nonneg\">docs#quadratic_form.pos_def.nonneg</a> to use that notation</p>",
        "id": 268857247,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1642778717
    },
    {
        "content": "<p>You probably do not need to exclude <code>x = 0</code> in your quantification.</p>",
        "id": 268857447,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1642778809
    },
    {
        "content": "<p>(I made a small start on something related in <a href=\"https://github.com/leanprover-community/mathlib/tree/eric-wieser/quadratic_form-preorder\">branch#eric-wieser/quadratic_form-preorder</a> a while ago - although looking again, I think only two lines of that are salvageable, and it would be easier to write them from scratch!)</p>",
        "id": 268858457,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1642779254
    },
    {
        "content": "<p>So when I understand you both correctly you suggest </p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"sd\">/-- A positive semi definite quadratic form is greater equal zero on nonzero vectors. -/</span>\n<span class=\"kd\">def</span> <span class=\"n\">pos_semi_def</span> <span class=\"o\">(</span><span class=\"n\">Q₂</span> <span class=\"o\">:</span> <span class=\"n\">quadratic_form</span> <span class=\"n\">R₂</span> <span class=\"n\">M</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"kt\">Prop</span> <span class=\"o\">:=</span> <span class=\"o\">(</span> <span class=\"mi\">0</span> <span class=\"bp\">≤</span> <span class=\"n\">Q₂</span> <span class=\"o\">)</span>\n</code></pre></div>\n<p>suffices because there are further definitions that give the statement implicitly and therefore making a more \"lean\" code</p>",
        "id": 268859831,
        "sender_full_name": "Daniel Pusicha",
        "timestamp": 1642779780
    },
    {
        "content": "<p>So maybe you can give me some advise how I could proceed</p>",
        "id": 268860131,
        "sender_full_name": "Daniel Pusicha",
        "timestamp": 1642779908
    },
    {
        "content": "<p>I would lean towards something like:</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kd\">lemma</span> <span class=\"n\">coe_injective</span> <span class=\"o\">:</span> <span class=\"bp\">@</span><span class=\"n\">function.injective</span> <span class=\"o\">(</span><span class=\"n\">quadratic_form</span> <span class=\"n\">R</span> <span class=\"n\">M</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">M</span> <span class=\"bp\">→</span> <span class=\"n\">R</span><span class=\"o\">)</span> <span class=\"n\">coe_fn</span> <span class=\"o\">:=</span>\n<span class=\"bp\">λ</span> <span class=\"n\">q₁</span> <span class=\"n\">q₂</span> <span class=\"n\">h</span><span class=\"o\">,</span> <span class=\"kd\">by</span> <span class=\"o\">{</span> <span class=\"n\">cases</span> <span class=\"n\">q₁</span><span class=\"o\">,</span> <span class=\"n\">cases</span> <span class=\"n\">q₂</span><span class=\"o\">,</span> <span class=\"n\">congr</span> <span class=\"o\">}</span>\n\n<span class=\"sd\">/-- An order on quadratic forms inherited from their order as functions.</span>\n<span class=\"sd\">Note that `0 ≤ Q` means that `Q` is positive semidefinite, but `0 &lt; Q` does not mean `Q` is positive definite. -/</span>\n<span class=\"kd\">instance</span> <span class=\"o\">:</span> <span class=\"n\">partial_order</span> <span class=\"o\">(</span><span class=\"n\">quadratic_form</span> <span class=\"n\">R</span> <span class=\"n\">M</span><span class=\"o\">)</span> <span class=\"o\">:=</span>\n<span class=\"n\">partial_order.lift</span> <span class=\"n\">coe_injective</span>\n</code></pre></div>",
        "id": 268860623,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1642780139
    },
    {
        "content": "<p>And then just write <code>0 ≤ Q</code> whenever you want to express \"positive semidefinite\"</p>",
        "id": 268860689,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1642780170
    },
    {
        "content": "<p><del><code>0 &lt; Q</code> is always false, right?</del> Nope, it's not!</p>",
        "id": 268861066,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1642780283
    },
    {
        "content": "<p><code>0 &lt; Q</code> is \"positive semidefinite but not zero\", right?</p>",
        "id": 268861586,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1642780485
    }
]