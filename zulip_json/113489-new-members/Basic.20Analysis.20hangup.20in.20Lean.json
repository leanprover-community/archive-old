[
    {
        "content": "<p>I'm quite looking forward to LFTCM next week at ICERM! </p>\n<p>My students (<span class=\"user-mention\" data-user-id=\"506232\">@David Talone</span> and <span class=\"user-mention\" data-user-id=\"506172\">@Christian Kolker</span>) are working on trying to construct a sequence using choice in order to solve a basic analysis exercise, and have hit an interesting wall that I can't seem to help them over. The code references are from the Real Number Game (I hope all of the imports are there, but the code may run with only a little modification). It seems to me as if they have been able to manufacture a sequence successfully using choice, but we aren't sure what Lean is doing...and whether it remembers the construction of the sequence. The membership claim should be easy to see from the definition of the set...but we're unable to do so. Can anyone enlighten us on what Lean is doing with this?</p>\n<div class=\"codehilite\" data-code-language=\"import\"><pre><span></span><code>import game.sup_inf.level02\nimport data.real.basic\nimport tactic\n\nnamespace xena -- hide\n\nopen classical\n\naxiom choice {α : Sort*} : nonempty α → α\n\ndefinition is_limit (a : ℕ → ℝ) (α : ℝ) :=\n  ∀ ε : ℝ, 0 &lt; ε → ∃ N : ℕ, ∀ n : ℕ, N ≤ n → |a n - α| &lt; ε\n\nlemma generate_element {x : ℝ}{S : set ℝ} {h1 : S ≠ ∅} (h2 : is_lub S x) (ε : ℝ) : (0 &lt; ε)→ ¬ (is_upper_bound S (x-ε)) :=\nbegin\nintro h,\nunfold is_lub at h2,\ncases h2 with h2l h2r,\nhave Q := h2r(x-ε),\nby_contradiction,\nhave R := Q(a),\nlinarith,\nend\n\n\ntheorem seq_conv_to_sup {x : ℝ}{S : set ℝ} {h1 : S ≠ ∅} (h2 : is_lub S x): ∃(a : ℕ → ℝ), ((is_limit a x) ∧ (∀(n : ℕ),(a n ∈ S))) :=\nbegin\nsplit,\nswap,\nintro n,\nhave Q := generate_element h2 (1/(n + 1) : ℝ),\nhave R : 0 &lt; (1 / ((n : ℝ) + 1)),\n      sorry,\nhave P := Q(R),\nunfold is_upper_bound at P,\npush_neg at P,\nset T1 := λ s, s ∈ S ∧ x - 1 / (↑n + 1) &lt; s,\nhave T2 : ∃s, T1 s, by exact P,\nhave s0 := classical.some T2,--here is where choice is used to get the element!\nexact s0,\nexact h1,\nsplit,\nsimp,\nswap,\nsimp,\nend\n\n\nend xena\n</code></pre></div>",
        "id": 288807409,
        "sender_full_name": "Jon Bannon",
        "timestamp": 1657201255
    },
    {
        "content": "<p>I'm pretty sure <code>have s0 := classical.some T2</code> is not going to work - try with <code>let</code>?</p>",
        "id": 288807956,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1657201517
    },
    {
        "content": "<p>Where did you find that real number game?</p>",
        "id": 288808211,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1657201642
    },
    {
        "content": "<p>And is there any reason why you're doing that instead of the tutorial project that covers this in a more reproducible environment?</p>",
        "id": 288808366,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1657201719
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"307953\">Ruben Van de Velde</span> <a href=\"#narrow/stream/113489-new-members/topic/Basic.20Analysis.20hangup.20in.20Lean/near/288807956\">said</a>:</p>\n<blockquote>\n<p>I'm pretty sure <code>have s0 := classical.some T2</code> is not going to work - try with <code>let</code>?</p>\n</blockquote>\n<p>Good point. Made that change (also even tried <code>set</code>).  I'm having the students play with that code and solve the levels. When we run this, they still end up with a goal  <code>∀ (n : ℕ), some _ ∈ S</code> as a result of the choice. I <em>think</em> Lean remembers that this <code>some_</code> knows that the result of the choice of something from <code>S</code>, but I have no idea how to access this fact...</p>\n<p><span class=\"user-mention\" data-user-id=\"110031\">@Patrick Massot</span>  we cloned the Git repository: <a href=\"https://github.com/ImperialCollegeLondon/real-number-game\">https://github.com/ImperialCollegeLondon/real-number-game</a></p>",
        "id": 288808640,
        "sender_full_name": "Jon Bannon",
        "timestamp": 1657201862
    },
    {
        "content": "<p>After <code>push_neg at P</code> you probably want to type <code>choose s₀ s₀_in lt_s₀ using P,</code></p>",
        "id": 288808708,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1657201903
    },
    {
        "content": "<p>But <em>really</em>, your life would be much easier in the tutorial project.</p>",
        "id": 288808740,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1657201922
    },
    {
        "content": "<p>The only point of playing the real number game is if you wan to play it in a web browser without installing Lean.</p>",
        "id": 288808798,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1657201943
    },
    {
        "content": "<p>There you'll find <a href=\"https://github.com/leanprover-community/tutorials/blob/master/src/exercises/09_limits_final.lean#L79-L81\">https://github.com/leanprover-community/tutorials/blob/master/src/exercises/09_limits_final.lean#L79-L81</a></p>",
        "id": 288808871,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1657201986
    },
    {
        "content": "<p>Note how the outline of the proof is offered.</p>",
        "id": 288808925,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1657202013
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"110031\">@Patrick Massot</span>  Thanks! I've had them look at the tutorial as well to learn. They are working on trying to make the web-based game work, with the eventual goal of making it available (and completely usable in an Analysis course) without installing Lean. Roughly, at many liberal arts colleges in the US, introductory Algebra and Analysis are the core courses for a math major. Rationale: if the Real Number Game (or the tutorial levels you linked to) were available to instructors without the need to install Lean, this would broaden Lean's use in the US, since one could simply aim faculty and students at the NN game, and then the Real Number Game and then Algebra (or Group) game with low barrier of entry.</p>",
        "id": 288809183,
        "sender_full_name": "Jon Bannon",
        "timestamp": 1657202142
    },
    {
        "content": "<p>Your proof has a weird beginning. What are you trying to do exactly?</p>",
        "id": 288810295,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1657202621
    },
    {
        "content": "<p>I think a much more promising start is</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"k\">have</span> <span class=\"o\">:</span> <span class=\"bp\">∀</span> <span class=\"n\">n</span> <span class=\"o\">:</span> <span class=\"n\">ℕ</span><span class=\"o\">,</span> <span class=\"bp\">∃</span> <span class=\"n\">a</span> <span class=\"bp\">∈</span> <span class=\"n\">S</span><span class=\"o\">,</span> <span class=\"n\">x</span> <span class=\"bp\">-</span> <span class=\"mi\">1</span><span class=\"bp\">/</span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"bp\">+</span><span class=\"mi\">1</span><span class=\"o\">)</span> <span class=\"bp\">&lt;</span> <span class=\"n\">a</span><span class=\"o\">,</span>\n<span class=\"o\">{</span> <span class=\"n\">intros</span> <span class=\"n\">n</span><span class=\"o\">,</span>\n  <span class=\"k\">have</span> <span class=\"n\">Q</span> <span class=\"o\">:=</span> <span class=\"n\">generate_element</span> <span class=\"n\">h2</span> <span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"bp\">/</span><span class=\"o\">(</span><span class=\"n\">n</span> <span class=\"bp\">+</span> <span class=\"mi\">1</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"n\">ℝ</span><span class=\"o\">),</span>\n  <span class=\"k\">have</span> <span class=\"n\">R</span> <span class=\"o\">:</span> <span class=\"mi\">0</span> <span class=\"bp\">&lt;</span> <span class=\"o\">(</span><span class=\"mi\">1</span> <span class=\"bp\">/</span> <span class=\"o\">((</span><span class=\"n\">n</span> <span class=\"o\">:</span> <span class=\"n\">ℝ</span><span class=\"o\">)</span> <span class=\"bp\">+</span> <span class=\"mi\">1</span><span class=\"o\">)),</span>\n      <span class=\"gr\">sorry</span><span class=\"o\">,</span>\n  <span class=\"k\">have</span> <span class=\"n\">P</span> <span class=\"o\">:</span> <span class=\"bp\">¬</span> <span class=\"bp\">∀</span> <span class=\"n\">a</span> <span class=\"bp\">∈</span> <span class=\"n\">S</span><span class=\"o\">,</span> <span class=\"n\">a</span> <span class=\"bp\">≤</span> <span class=\"n\">x</span> <span class=\"bp\">-</span> <span class=\"mi\">1</span> <span class=\"bp\">/</span> <span class=\"o\">(</span><span class=\"n\">n</span> <span class=\"bp\">+</span> <span class=\"mi\">1</span><span class=\"o\">)</span> <span class=\"o\">:=</span> <span class=\"n\">Q</span> <span class=\"n\">R</span><span class=\"o\">,</span>\n  <span class=\"n\">push_neg</span> <span class=\"n\">at</span> <span class=\"n\">P</span><span class=\"o\">,</span>\n  <span class=\"n\">simpa</span> <span class=\"n\">using</span> <span class=\"n\">P</span><span class=\"o\">,</span>\n  <span class=\"n\">exact</span> <span class=\"n\">h1</span> <span class=\"o\">},</span>\n<span class=\"n\">choose</span> <span class=\"n\">a</span> <span class=\"n\">a_in</span> <span class=\"n\">lt_a</span> <span class=\"n\">using</span> <span class=\"n\">this</span><span class=\"o\">,</span>\n</code></pre></div>",
        "id": 288810899,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1657202894
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110031\">Patrick Massot</span> <a href=\"#narrow/stream/113489-new-members/topic/Basic.20Analysis.20hangup.20in.20Lean/near/288810899\">said</a>:</p>\n<blockquote>\n<p>I think a much more promising start is</p>\n<p><div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"k\">have</span> <span class=\"o\">:</span> <span class=\"bp\">∀</span> <span class=\"n\">n</span> <span class=\"o\">:</span> <span class=\"n\">ℕ</span><span class=\"o\">,</span> <span class=\"bp\">∃</span> <span class=\"n\">a</span> <span class=\"bp\">∈</span> <span class=\"n\">S</span><span class=\"o\">,</span> <span class=\"n\">x</span> <span class=\"bp\">-</span> <span class=\"mi\">1</span><span class=\"bp\">/</span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"bp\">+</span><span class=\"mi\">1</span><span class=\"o\">)</span> <span class=\"bp\">&lt;</span> <span class=\"n\">a</span><span class=\"o\">,</span>\n<span class=\"o\">{</span> <span class=\"n\">intros</span> <span class=\"n\">n</span><span class=\"o\">,</span>\n  <span class=\"k\">have</span> <span class=\"n\">Q</span> <span class=\"o\">:=</span> <span class=\"n\">generate_element</span> <span class=\"n\">h2</span> <span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"bp\">/</span><span class=\"o\">(</span><span class=\"n\">n</span> <span class=\"bp\">+</span> <span class=\"mi\">1</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"n\">ℝ</span><span class=\"o\">),</span>\n  <span class=\"k\">have</span> <span class=\"n\">R</span> <span class=\"o\">:</span> <span class=\"mi\">0</span> <span class=\"bp\">&lt;</span> <span class=\"o\">(</span><span class=\"mi\">1</span> <span class=\"bp\">/</span> <span class=\"o\">((</span><span class=\"n\">n</span> <span class=\"o\">:</span> <span class=\"n\">ℝ</span><span class=\"o\">)</span> <span class=\"bp\">+</span> <span class=\"mi\">1</span><span class=\"o\">)),</span>\n      <span class=\"gr\">sorry</span><span class=\"o\">,</span>\n  <span class=\"k\">have</span> <span class=\"n\">P</span> <span class=\"o\">:</span> <span class=\"bp\">¬</span> <span class=\"bp\">∀</span> <span class=\"n\">a</span> <span class=\"bp\">∈</span> <span class=\"n\">S</span><span class=\"o\">,</span> <span class=\"n\">a</span> <span class=\"bp\">≤</span> <span class=\"n\">x</span> <span class=\"bp\">-</span> <span class=\"mi\">1</span> <span class=\"bp\">/</span> <span class=\"o\">(</span><span class=\"n\">n</span> <span class=\"bp\">+</span> <span class=\"mi\">1</span><span class=\"o\">)</span> <span class=\"o\">:=</span> <span class=\"n\">Q</span> <span class=\"n\">R</span><span class=\"o\">,</span>\n  <span class=\"n\">push_neg</span> <span class=\"n\">at</span> <span class=\"n\">P</span><span class=\"o\">,</span>\n  <span class=\"n\">simpa</span> <span class=\"n\">using</span> <span class=\"n\">P</span><span class=\"o\">,</span>\n  <span class=\"n\">exact</span> <span class=\"n\">h1</span> <span class=\"o\">},</span>\n<span class=\"n\">choose</span> <span class=\"n\">a</span> <span class=\"n\">a_in</span> <span class=\"n\">lt_a</span> <span class=\"n\">using</span> <span class=\"n\">this</span><span class=\"o\">,</span>\n<span class=\"bp\">````</span>\n<span class=\"n\">They</span> <span class=\"n\">are</span> <span class=\"n\">trying</span> <span class=\"n\">to</span> <span class=\"n\">prove</span> <span class=\"n\">that</span> <span class=\"n\">given</span> <span class=\"n\">a</span> <span class=\"n\">nonempty</span> <span class=\"n\">subset</span> <span class=\"n\">of</span> <span class=\"bp\">\\</span><span class=\"n\">R</span> <span class=\"n\">that</span> <span class=\"n\">is</span> <span class=\"n\">bounded</span> <span class=\"n\">above</span> <span class=\"k\">then</span> <span class=\"n\">there</span> <span class=\"n\">is</span> <span class=\"n\">a</span> <span class=\"n\">sequence</span> <span class=\"n\">that</span> <span class=\"n\">converges</span> <span class=\"n\">to</span> <span class=\"n\">the</span> <span class=\"n\">supremum...so</span> <span class=\"n\">I</span> <span class=\"n\">think</span> <span class=\"n\">what</span> <span class=\"n\">you</span> <span class=\"n\">suggest</span> <span class=\"n\">as</span> <span class=\"n\">an</span> <span class=\"n\">alternative</span> <span class=\"n\">start</span> <span class=\"n\">will</span> <span class=\"n\">help.</span>\n</code></pre></div><br>\n</p>\n</blockquote>",
        "id": 288816840,
        "sender_full_name": "Jon Bannon",
        "timestamp": 1657205556
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"462733\">Jon Bannon</span> <a href=\"#narrow/stream/113489-new-members/topic/Basic.20Analysis.20hangup.20in.20Lean/near/288816840\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"110031\">Patrick Massot</span> <a href=\"#narrow/stream/113489-new-members/topic/Basic.20Analysis.20hangup.20in.20Lean/near/288810899\">said</a>:</p>\n<blockquote>\n<p>I think a much more promising start is</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"k\">have</span> <span class=\"o\">:</span> <span class=\"bp\">∀</span> <span class=\"n\">n</span> <span class=\"o\">:</span> <span class=\"n\">ℕ</span><span class=\"o\">,</span> <span class=\"bp\">∃</span> <span class=\"n\">a</span> <span class=\"bp\">∈</span> <span class=\"n\">S</span><span class=\"o\">,</span> <span class=\"n\">x</span> <span class=\"bp\">-</span> <span class=\"mi\">1</span><span class=\"bp\">/</span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"bp\">+</span><span class=\"mi\">1</span><span class=\"o\">)</span> <span class=\"bp\">&lt;</span> <span class=\"n\">a</span><span class=\"o\">,</span>\n<span class=\"o\">{</span> <span class=\"n\">intros</span> <span class=\"n\">n</span><span class=\"o\">,</span>\n  <span class=\"k\">have</span> <span class=\"n\">Q</span> <span class=\"o\">:=</span> <span class=\"n\">generate_element</span> <span class=\"n\">h2</span> <span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"bp\">/</span><span class=\"o\">(</span><span class=\"n\">n</span> <span class=\"bp\">+</span> <span class=\"mi\">1</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"n\">ℝ</span><span class=\"o\">),</span>\n  <span class=\"k\">have</span> <span class=\"n\">R</span> <span class=\"o\">:</span> <span class=\"mi\">0</span> <span class=\"bp\">&lt;</span> <span class=\"o\">(</span><span class=\"mi\">1</span> <span class=\"bp\">/</span> <span class=\"o\">((</span><span class=\"n\">n</span> <span class=\"o\">:</span> <span class=\"n\">ℝ</span><span class=\"o\">)</span> <span class=\"bp\">+</span> <span class=\"mi\">1</span><span class=\"o\">)),</span>\n      <span class=\"gr\">sorry</span><span class=\"o\">,</span>\n  <span class=\"k\">have</span> <span class=\"n\">P</span> <span class=\"o\">:</span> <span class=\"bp\">¬</span> <span class=\"bp\">∀</span> <span class=\"n\">a</span> <span class=\"bp\">∈</span> <span class=\"n\">S</span><span class=\"o\">,</span> <span class=\"n\">a</span> <span class=\"bp\">≤</span> <span class=\"n\">x</span> <span class=\"bp\">-</span> <span class=\"mi\">1</span> <span class=\"bp\">/</span> <span class=\"o\">(</span><span class=\"n\">n</span> <span class=\"bp\">+</span> <span class=\"mi\">1</span><span class=\"o\">)</span> <span class=\"o\">:=</span> <span class=\"n\">Q</span> <span class=\"n\">R</span><span class=\"o\">,</span>\n  <span class=\"n\">push_neg</span> <span class=\"n\">at</span> <span class=\"n\">P</span><span class=\"o\">,</span>\n  <span class=\"n\">simpa</span> <span class=\"n\">using</span> <span class=\"n\">P</span><span class=\"o\">,</span>\n  <span class=\"n\">exact</span> <span class=\"n\">h1</span> <span class=\"o\">},</span>\n<span class=\"n\">choose</span> <span class=\"n\">a</span> <span class=\"n\">a_in</span> <span class=\"n\">lt_a</span> <span class=\"n\">using</span> <span class=\"n\">this</span><span class=\"o\">,</span>\n<span class=\"bp\">````</span>\n<span class=\"n\">They</span> <span class=\"n\">are</span> <span class=\"n\">trying</span> <span class=\"n\">to</span> <span class=\"n\">prove</span> <span class=\"n\">that</span> <span class=\"n\">given</span> <span class=\"n\">a</span> <span class=\"n\">nonempty</span> <span class=\"n\">subset</span> <span class=\"n\">of</span> <span class=\"bp\">\\</span><span class=\"n\">R</span> <span class=\"n\">that</span> <span class=\"n\">is</span> <span class=\"n\">bounded</span> <span class=\"n\">above</span> <span class=\"k\">then</span> <span class=\"n\">there</span> <span class=\"n\">is</span> <span class=\"n\">a</span> <span class=\"n\">sequence</span> <span class=\"n\">that</span> <span class=\"n\">converges</span> <span class=\"n\">to</span> <span class=\"n\">the</span> <span class=\"n\">supremum...so</span> <span class=\"n\">I</span> <span class=\"n\">think</span> <span class=\"n\">what</span> <span class=\"n\">you</span> <span class=\"n\">suggest</span> <span class=\"n\">as</span> <span class=\"n\">an</span> <span class=\"n\">alternative</span> <span class=\"n\">start</span> <span class=\"n\">will</span> <span class=\"n\">help.</span>\n<span class=\"bp\">`````</span>\n<span class=\"n\">They</span> <span class=\"n\">tried</span> <span class=\"n\">it</span> <span class=\"bp\">@**</span><span class=\"n\">Patrick</span> <span class=\"n\">Massot</span><span class=\"bp\">|</span><span class=\"mi\">110031</span><span class=\"bp\">**</span> <span class=\"o\">,</span> <span class=\"n\">and</span> <span class=\"n\">it</span> <span class=\"n\">worked.</span> <span class=\"n\">Thanks</span> <span class=\"n\">again</span><span class=\"bp\">!</span>\n</code></pre></div>\n</blockquote>\n</blockquote>",
        "id": 288817115,
        "sender_full_name": "Jon Bannon",
        "timestamp": 1657205658
    },
    {
        "content": "<p>Note that there are other paths to getting instructors (and students) an online lean installation:</p>\n<ul>\n<li>Gitpod. There should be a button on the tutorials project to launch this. The free tier is good enough for courses where students do less than 50hrs/mo.</li>\n<li>GitHub codespaces. We haven't set this up yet, but it's free for educational use via GitHub classroom</li>\n</ul>\n<p>Both give you the full lean experience in browser rather than the limitations of the game view</p>",
        "id": 288842411,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1657216561
    },
    {
        "content": "<p>The real number game is basically an abandoned project which IIRC never really found a coherent way of doing real analysis. I was supposed to be working on it with some people over summer of 2020 but then covid happened and everything fell apart. My memory is that, unlike the natural number game which went through an extensive planning stage and then a huge amount of testing on undergraduates, the real number game was just some ideas written down which never turned into anything coherent. My instinct would be that if you wanted to make a real number game then you need to start with a coherent plan on how to develop the theory, and I'm not sure we ever got that far. I thought about things like min and max, and me and the others ended up making the <a href=\"https://www.ma.imperial.ac.uk/~buzzard/xena/max_minigame/\">max minigame</a> but I think that was the only coherent thing which happened.</p>",
        "id": 288867345,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1657228710
    }
]