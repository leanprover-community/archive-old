[
    {
        "content": "<p>Do we have something like the following?</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kn\">import</span> <span class=\"n\">algebra.monoid_algebra</span>\n\n<span class=\"kd\">lemma</span> <span class=\"n\">submonoid.closure.to_add_submonoid</span> <span class=\"o\">{</span><span class=\"n\">M</span> <span class=\"o\">:</span> <span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span> <span class=\"o\">[</span><span class=\"n\">monoid</span> <span class=\"n\">M</span><span class=\"o\">]</span> <span class=\"o\">(</span><span class=\"n\">S</span> <span class=\"o\">:</span> <span class=\"n\">set</span> <span class=\"n\">M</span><span class=\"o\">)</span> <span class=\"o\">:</span>\n  <span class=\"o\">(</span><span class=\"n\">submonoid.closure</span> <span class=\"n\">S</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">to_add_submonoid</span> <span class=\"bp\">=</span> <span class=\"n\">add_submonoid.closure</span> <span class=\"o\">(</span><span class=\"n\">additive.of_mul</span> <span class=\"bp\">''</span> <span class=\"n\">S</span><span class=\"o\">)</span> <span class=\"o\">:=</span> <span class=\"gr\">sorry</span>\n</code></pre></div>\n<p>I am not even sure this is the correct way of stating what I want: the multiplicative submonoid generated by <code>S</code> is the same as the additive submonoid generated by <code>S</code> inside <code>additive M</code>.</p>",
        "id": 234520177,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1618413988
    },
    {
        "content": "<p>We must have the equivalence between the lattice of submomoids of M and the subadditivemonoids of <code>additive M</code>.</p>",
        "id": 234520801,
        "sender_full_name": "Adam Topaz",
        "timestamp": 1618414205
    },
    {
        "content": "<p>IIRC the subfoo generated by a set is usually defined as an Inf in such lattices</p>",
        "id": 234521017,
        "sender_full_name": "Adam Topaz",
        "timestamp": 1618414267
    },
    {
        "content": "<p>I recently added a proof that the additive closure of a multiplicative submonoid is a subsemiring.  However, I am not sure that this is what you are asking...</p>",
        "id": 234521689,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1618414475
    },
    {
        "content": "<p>There is <a href=\"https://leanprover-community.github.io/mathlib_docs/find/submonoid.add_submonoid_equiv\">docs#submonoid.add_submonoid_equiv</a>, but I don't see anything relating the two lattices</p>",
        "id": 234521802,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1618414526
    },
    {
        "content": "<p>It seems like we're missing</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kd\">lemma</span> <span class=\"n\">submonoid.to_add_submonoid_coe</span> <span class=\"o\">{</span><span class=\"n\">M</span> <span class=\"o\">:</span> <span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span> <span class=\"o\">[</span><span class=\"n\">monoid</span> <span class=\"n\">M</span><span class=\"o\">]</span> <span class=\"o\">(</span><span class=\"n\">S</span> <span class=\"o\">:</span> <span class=\"n\">submonoid</span> <span class=\"n\">M</span><span class=\"o\">)</span> <span class=\"o\">:</span>\n  <span class=\"o\">(</span><span class=\"n\">S.to_add_submonoid</span> <span class=\"o\">:</span> <span class=\"n\">set</span> <span class=\"o\">(</span><span class=\"n\">additive</span> <span class=\"n\">M</span><span class=\"o\">))</span> <span class=\"bp\">=</span> <span class=\"n\">additive.of_mul</span> <span class=\"bp\">''</span> <span class=\"n\">S</span> <span class=\"o\">:=</span>\n<span class=\"kd\">begin</span>\n  <span class=\"n\">rw</span> <span class=\"n\">equiv.image_eq_preimage</span><span class=\"o\">,</span>\n  <span class=\"n\">ext</span><span class=\"o\">,</span>\n  <span class=\"n\">simp</span> <span class=\"n\">only</span> <span class=\"o\">[</span><span class=\"n\">submonoid.to_add_submonoid</span><span class=\"o\">,</span> <span class=\"bp\">‚Üê</span><span class=\"n\">set_like.mem_coe</span><span class=\"o\">],</span>\n  <span class=\"n\">refl</span>\n<span class=\"kd\">end</span>\n</code></pre></div>",
        "id": 234522202,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1618414683
    },
    {
        "content": "<p>golfed:</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kd\">lemma</span> <span class=\"n\">submonoid.to_add_submonoid_coe</span> <span class=\"o\">{</span><span class=\"n\">M</span> <span class=\"o\">:</span> <span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span> <span class=\"o\">[</span><span class=\"n\">monoid</span> <span class=\"n\">M</span><span class=\"o\">]</span> <span class=\"o\">(</span><span class=\"n\">S</span> <span class=\"o\">:</span> <span class=\"n\">submonoid</span> <span class=\"n\">M</span><span class=\"o\">)</span> <span class=\"o\">:</span>\n  <span class=\"o\">(</span><span class=\"n\">S.to_add_submonoid</span> <span class=\"o\">:</span> <span class=\"n\">set</span> <span class=\"o\">(</span><span class=\"n\">additive</span> <span class=\"n\">M</span><span class=\"o\">))</span> <span class=\"bp\">=</span> <span class=\"n\">additive.of_mul</span> <span class=\"bp\">''</span> <span class=\"n\">S</span> <span class=\"o\">:=</span>\n<span class=\"n\">eq.symm</span> <span class=\"o\">(</span><span class=\"n\">set.image_id</span> <span class=\"n\">S</span><span class=\"o\">)</span>\n</code></pre></div>",
        "id": 234523331,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1618415092
    },
    {
        "content": "<p>Thank's! I will prove my lemma by hand <span aria-label=\"unamused\" class=\"emoji emoji-1f612\" role=\"img\" title=\"unamused\">:unamused:</span></p>",
        "id": 234524202,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1618415386
    },
    {
        "content": "<p>Surely it makes more sense to prove the equivalence of lattices first?</p>",
        "id": 234591761,
        "sender_full_name": "Scott Morrison",
        "timestamp": 1618442376
    },
    {
        "content": "<p>Yes, that's the way I did it. It's from the LTE, here<br>\n<a href=\"https://github.com/leanprover-community/lean-liquid/blob/riccardobrasca/src/toric/theorem2.lean\">https://github.com/leanprover-community/lean-liquid/blob/riccardobrasca/src/toric/theorem2.lean</a><br>\nI am going to PR all of this.</p>",
        "id": 234631272,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1618472456
    }
]