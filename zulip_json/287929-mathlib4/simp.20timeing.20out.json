[
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"308899\">@Yakov Pechersky</span>, I think your latest commit to <a href=\"https://github.com/leanprover-community/mathlib4/pull/550\">mathlib4#550</a> is window dressing, and probably should be reverted. The problem here is that a perfectly easy <code>simp</code> is timing out. We don't want to replace it with a <code>rw</code>, but find out what is going on.</p>",
        "id": 309532448,
        "sender_full_name": "Scott Morrison",
        "timestamp": 1668402457
    },
    {
        "content": "<p>Agreed.</p>",
        "id": 309532505,
        "sender_full_name": "Yakov Pechersky",
        "timestamp": 1668402493
    },
    {
        "content": "<p>I think we must have a bunch of bad simp lemmas that are causing simp to spiral out of control, and that we need a new linter to catch.</p>",
        "id": 309532515,
        "sender_full_name": "Scott Morrison",
        "timestamp": 1668402500
    },
    {
        "content": "<p>But I don't know what's going wrong yet.</p>",
        "id": 309532518,
        "sender_full_name": "Scott Morrison",
        "timestamp": 1668402506
    },
    {
        "content": "<p>I'm seeing some weirdness in here too:<br>\n<a href=\"#narrow/stream/287929-mathlib4/topic/logic.2Eequiv.2Edefs.20causing.20elaboration.20issues.20in.20Simps.20tests/near/309528121.2E01\">https://leanprover.zulipchat.com/#narrow/stream/287929-mathlib4/topic/logic.2Eequiv.2Edefs.20causing.20elaboration.20issues.20in.20Simps.20tests/near/309528121.2E01</a></p>",
        "id": 309532527,
        "sender_full_name": "Yakov Pechersky",
        "timestamp": 1668402521
    },
    {
        "content": "<p>When I add <code>set_option trace.Meta.Tactic.simp.rewrite true</code> in <code>Logic.Equiv.Function</code> at commit <a href=\"https://github.com/leanprover-community/mathlib4/pull/550/commits/d6d3b834517bb0ba128a1d4cefec4f86f94a6e2f\">https://github.com/leanprover-community/mathlib4/pull/550/commits/d6d3b834517bb0ba128a1d4cefec4f86f94a6e2f</a>, I get:</p>",
        "id": 309532537,
        "sender_full_name": "Scott Morrison",
        "timestamp": 1668402541
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"o\">[</span><span class=\"n\">Meta.Tactic.simp.rewrite</span><span class=\"o\">]</span> <span class=\"bp\">@</span><span class=\"n\">eq_iff_iff</span><span class=\"o\">:</span><span class=\"mi\">1000</span><span class=\"o\">,</span> <span class=\"o\">(</span><span class=\"n\">Equiv.symm</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"o\">(</span><span class=\"n\">Equiv.symm</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₂</span><span class=\"o\">)</span> <span class=\"bp\">==&gt;</span> <span class=\"n\">Equiv.symm</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span> <span class=\"bp\">↔</span> <span class=\"n\">Equiv.symm</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₂</span>\n<span class=\"o\">[</span><span class=\"n\">Meta.Tactic.simp.rewrite</span><span class=\"o\">]</span> <span class=\"bp\">@</span><span class=\"n\">eq_iff_iff</span><span class=\"o\">:</span><span class=\"mi\">1000</span><span class=\"o\">,</span> <span class=\"o\">(</span><span class=\"n\">Equiv.symm</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"o\">(</span><span class=\"n\">Equiv.symm</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₂</span><span class=\"o\">)</span> <span class=\"bp\">==&gt;</span> <span class=\"n\">Equiv.symm</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span> <span class=\"bp\">↔</span> <span class=\"n\">Equiv.symm</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₂</span>\n<span class=\"o\">[</span><span class=\"n\">Meta.Tactic.simp.rewrite</span><span class=\"o\">]</span> <span class=\"bp\">@</span><span class=\"n\">eq_iff_iff</span><span class=\"o\">:</span><span class=\"mi\">1000</span><span class=\"o\">,</span> <span class=\"o\">(</span><span class=\"n\">Equiv.symm</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"o\">(</span><span class=\"n\">Equiv.symm</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₂</span><span class=\"o\">)</span> <span class=\"bp\">==&gt;</span> <span class=\"n\">Equiv.symm</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span> <span class=\"bp\">↔</span> <span class=\"n\">Equiv.symm</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₂</span>\n<span class=\"o\">[</span><span class=\"n\">Meta.Tactic.simp.rewrite</span><span class=\"o\">]</span> <span class=\"bp\">@</span><span class=\"n\">eq_iff_iff</span><span class=\"o\">:</span><span class=\"mi\">1000</span><span class=\"o\">,</span> <span class=\"o\">(</span><span class=\"n\">Equiv.symm</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"o\">(</span><span class=\"n\">Equiv.symm</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₂</span><span class=\"o\">)</span> <span class=\"bp\">==&gt;</span> <span class=\"n\">Equiv.symm</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span> <span class=\"bp\">↔</span> <span class=\"n\">Equiv.symm</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₂</span>\n<span class=\"o\">[</span><span class=\"n\">Meta.Tactic.simp.rewrite</span><span class=\"o\">]</span> <span class=\"bp\">@</span><span class=\"n\">eq_iff_iff</span><span class=\"o\">:</span><span class=\"mi\">1000</span><span class=\"o\">,</span> <span class=\"o\">(</span><span class=\"n\">Equiv.symm</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"o\">(</span><span class=\"n\">Equiv.symm</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₂</span><span class=\"o\">)</span> <span class=\"bp\">==&gt;</span> <span class=\"n\">Equiv.symm</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span> <span class=\"bp\">↔</span> <span class=\"n\">Equiv.symm</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₂</span>\n<span class=\"o\">[</span><span class=\"n\">Meta.Tactic.simp.rewrite</span><span class=\"o\">]</span> <span class=\"bp\">@</span><span class=\"n\">eq_iff_iff</span><span class=\"o\">:</span><span class=\"mi\">1000</span><span class=\"o\">,</span> <span class=\"o\">(</span><span class=\"n\">a₁</span><span class=\"bp\">✝.</span><span class=\"n\">toFun</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"o\">(</span><span class=\"n\">a₁</span><span class=\"bp\">✝.</span><span class=\"n\">toFun</span> <span class=\"bp\">=</span> <span class=\"n\">a₂</span><span class=\"o\">)</span> <span class=\"bp\">==&gt;</span> <span class=\"n\">a₁</span><span class=\"bp\">✝.</span><span class=\"n\">toFun</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span> <span class=\"bp\">↔</span> <span class=\"n\">a₁</span><span class=\"bp\">✝.</span><span class=\"n\">toFun</span> <span class=\"bp\">=</span> <span class=\"n\">a₂</span>\n<span class=\"o\">[</span><span class=\"n\">Meta.Tactic.simp.rewrite</span><span class=\"o\">]</span> <span class=\"bp\">@</span><span class=\"n\">eq_iff_iff</span><span class=\"o\">:</span><span class=\"mi\">1000</span><span class=\"o\">,</span> <span class=\"o\">(</span><span class=\"n\">a₁</span><span class=\"bp\">✝.</span><span class=\"n\">toFun</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"o\">(</span><span class=\"n\">a₁</span><span class=\"bp\">✝.</span><span class=\"n\">toFun</span> <span class=\"bp\">=</span> <span class=\"n\">a₂</span><span class=\"o\">)</span> <span class=\"bp\">==&gt;</span> <span class=\"n\">a₁</span><span class=\"bp\">✝.</span><span class=\"n\">toFun</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span> <span class=\"bp\">↔</span> <span class=\"n\">a₁</span><span class=\"bp\">✝.</span><span class=\"n\">toFun</span> <span class=\"bp\">=</span> <span class=\"n\">a₂</span>\n<span class=\"o\">[</span><span class=\"n\">Meta.Tactic.simp.rewrite</span><span class=\"o\">]</span> <span class=\"bp\">@</span><span class=\"n\">eq_iff_iff</span><span class=\"o\">:</span><span class=\"mi\">1000</span><span class=\"o\">,</span> <span class=\"o\">(</span><span class=\"n\">a₁</span><span class=\"bp\">✝.</span><span class=\"n\">toFun</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"o\">(</span><span class=\"n\">a₁</span><span class=\"bp\">✝.</span><span class=\"n\">toFun</span> <span class=\"bp\">=</span> <span class=\"n\">a₂</span><span class=\"o\">)</span> <span class=\"bp\">==&gt;</span> <span class=\"n\">a₁</span><span class=\"bp\">✝.</span><span class=\"n\">toFun</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span> <span class=\"bp\">↔</span> <span class=\"n\">a₁</span><span class=\"bp\">✝.</span><span class=\"n\">toFun</span> <span class=\"bp\">=</span> <span class=\"n\">a₂</span>\n<span class=\"o\">[</span><span class=\"n\">Meta.Tactic.simp.rewrite</span><span class=\"o\">]</span> <span class=\"bp\">@</span><span class=\"n\">eq_iff_iff</span><span class=\"o\">:</span><span class=\"mi\">1000</span><span class=\"o\">,</span> <span class=\"o\">(</span><span class=\"n\">a₁</span><span class=\"bp\">✝.</span><span class=\"n\">toFun</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"o\">(</span><span class=\"n\">a₁</span><span class=\"bp\">✝.</span><span class=\"n\">toFun</span> <span class=\"bp\">=</span> <span class=\"n\">a₂</span><span class=\"o\">)</span> <span class=\"bp\">==&gt;</span> <span class=\"n\">a₁</span><span class=\"bp\">✝.</span><span class=\"n\">toFun</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span> <span class=\"bp\">↔</span> <span class=\"n\">a₁</span><span class=\"bp\">✝.</span><span class=\"n\">toFun</span> <span class=\"bp\">=</span> <span class=\"n\">a₂</span>\n<span class=\"o\">[</span><span class=\"n\">Meta.Tactic.simp.rewrite</span><span class=\"o\">]</span> <span class=\"bp\">@</span><span class=\"n\">eq_iff_iff</span><span class=\"o\">:</span><span class=\"mi\">1000</span><span class=\"o\">,</span> <span class=\"o\">(</span><span class=\"n\">a₁</span><span class=\"bp\">✝.</span><span class=\"n\">toFun</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"o\">(</span><span class=\"n\">a₁</span><span class=\"bp\">✝.</span><span class=\"n\">toFun</span> <span class=\"bp\">=</span> <span class=\"n\">a₂</span><span class=\"o\">)</span> <span class=\"bp\">==&gt;</span> <span class=\"n\">a₁</span><span class=\"bp\">✝.</span><span class=\"n\">toFun</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span> <span class=\"bp\">↔</span> <span class=\"n\">a₁</span><span class=\"bp\">✝.</span><span class=\"n\">toFun</span> <span class=\"bp\">=</span> <span class=\"n\">a₂</span>\n<span class=\"o\">[</span><span class=\"n\">Meta.Tactic.simp.rewrite</span><span class=\"o\">]</span> <span class=\"bp\">@</span><span class=\"n\">eq_iff_iff</span><span class=\"o\">:</span><span class=\"mi\">1000</span><span class=\"o\">,</span> <span class=\"o\">(</span><span class=\"n\">a₁</span><span class=\"bp\">✝.</span><span class=\"n\">toFun</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"o\">(</span><span class=\"n\">a₁</span><span class=\"bp\">✝.</span><span class=\"n\">toFun</span> <span class=\"bp\">=</span> <span class=\"n\">a₂</span><span class=\"o\">)</span> <span class=\"bp\">==&gt;</span> <span class=\"n\">a₁</span><span class=\"bp\">✝.</span><span class=\"n\">toFun</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span> <span class=\"bp\">↔</span> <span class=\"n\">a₁</span><span class=\"bp\">✝.</span><span class=\"n\">toFun</span> <span class=\"bp\">=</span> <span class=\"n\">a₂</span>\n<span class=\"o\">[</span><span class=\"n\">Meta.Tactic.simp.rewrite</span><span class=\"o\">]</span> <span class=\"bp\">@</span><span class=\"n\">eq_iff_iff</span><span class=\"o\">:</span><span class=\"mi\">1000</span><span class=\"o\">,</span> <span class=\"o\">(</span><span class=\"n\">a₁</span><span class=\"bp\">✝.</span><span class=\"n\">toFun</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"o\">(</span><span class=\"n\">a₁</span><span class=\"bp\">✝.</span><span class=\"n\">toFun</span> <span class=\"bp\">=</span> <span class=\"n\">a₂</span><span class=\"o\">)</span> <span class=\"bp\">==&gt;</span> <span class=\"n\">a₁</span><span class=\"bp\">✝.</span><span class=\"n\">toFun</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span> <span class=\"bp\">↔</span> <span class=\"n\">a₁</span><span class=\"bp\">✝.</span><span class=\"n\">toFun</span> <span class=\"bp\">=</span> <span class=\"n\">a₂</span>\n<span class=\"o\">[</span><span class=\"n\">Meta.Tactic.simp.rewrite</span><span class=\"o\">]</span> <span class=\"bp\">@</span><span class=\"n\">eq_iff_iff</span><span class=\"o\">:</span><span class=\"mi\">1000</span><span class=\"o\">,</span> <span class=\"o\">(</span><span class=\"n\">a₁</span><span class=\"bp\">✝.</span><span class=\"n\">toFun</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"o\">(</span><span class=\"n\">a₁</span><span class=\"bp\">✝.</span><span class=\"n\">toFun</span> <span class=\"bp\">=</span> <span class=\"n\">a₂</span><span class=\"o\">)</span> <span class=\"bp\">==&gt;</span> <span class=\"n\">a₁</span><span class=\"bp\">✝.</span><span class=\"n\">toFun</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span> <span class=\"bp\">↔</span> <span class=\"n\">a₁</span><span class=\"bp\">✝.</span><span class=\"n\">toFun</span> <span class=\"bp\">=</span> <span class=\"n\">a₂</span>\n<span class=\"o\">[</span><span class=\"n\">Meta.Tactic.simp.rewrite</span><span class=\"o\">]</span> <span class=\"bp\">@</span><span class=\"n\">eq_iff_iff</span><span class=\"o\">:</span><span class=\"mi\">1000</span><span class=\"o\">,</span> <span class=\"o\">(</span><span class=\"n\">a₁</span><span class=\"bp\">✝.</span><span class=\"n\">toFun</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"o\">(</span><span class=\"n\">a₁</span><span class=\"bp\">✝.</span><span class=\"n\">toFun</span> <span class=\"bp\">=</span> <span class=\"n\">a₂</span><span class=\"o\">)</span> <span class=\"bp\">==&gt;</span> <span class=\"n\">a₁</span><span class=\"bp\">✝.</span><span class=\"n\">toFun</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span> <span class=\"bp\">↔</span> <span class=\"n\">a₁</span><span class=\"bp\">✝.</span><span class=\"n\">toFun</span> <span class=\"bp\">=</span> <span class=\"n\">a₂</span>\n<span class=\"o\">[</span><span class=\"n\">Meta.Tactic.simp.rewrite</span><span class=\"o\">]</span> <span class=\"bp\">@</span><span class=\"n\">eq_iff_iff</span><span class=\"o\">:</span><span class=\"mi\">1000</span><span class=\"o\">,</span> <span class=\"o\">(</span><span class=\"n\">a₁</span><span class=\"bp\">✝.</span><span class=\"n\">toFun</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"o\">(</span><span class=\"n\">a₁</span><span class=\"bp\">✝.</span><span class=\"n\">toFun</span> <span class=\"bp\">=</span> <span class=\"n\">a₂</span><span class=\"o\">)</span> <span class=\"bp\">==&gt;</span> <span class=\"n\">a₁</span><span class=\"bp\">✝.</span><span class=\"n\">toFun</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span> <span class=\"bp\">↔</span> <span class=\"n\">a₁</span><span class=\"bp\">✝.</span><span class=\"n\">toFun</span> <span class=\"bp\">=</span> <span class=\"n\">a₂</span>\n<span class=\"o\">[</span><span class=\"n\">Meta.Tactic.simp.rewrite</span><span class=\"o\">]</span> <span class=\"bp\">@</span><span class=\"n\">eq_iff_iff</span><span class=\"o\">:</span><span class=\"mi\">1000</span><span class=\"o\">,</span> <span class=\"o\">(</span><span class=\"n\">h.toFun</span> <span class=\"bp\">&lt;$&gt;</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"o\">(</span><span class=\"n\">h.toFun</span> <span class=\"bp\">&lt;$&gt;</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₂</span><span class=\"o\">)</span> <span class=\"bp\">==&gt;</span> <span class=\"n\">h.toFun</span> <span class=\"bp\">&lt;$&gt;</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span> <span class=\"bp\">↔</span> <span class=\"n\">h.toFun</span> <span class=\"bp\">&lt;$&gt;</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₂</span>\n<span class=\"o\">[</span><span class=\"n\">Meta.Tactic.simp.rewrite</span><span class=\"o\">]</span> <span class=\"bp\">@</span><span class=\"n\">eq_iff_iff</span><span class=\"o\">:</span><span class=\"mi\">1000</span><span class=\"o\">,</span> <span class=\"o\">(</span><span class=\"n\">h.toFun</span> <span class=\"bp\">&lt;$&gt;</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"o\">(</span><span class=\"n\">h.toFun</span> <span class=\"bp\">&lt;$&gt;</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₂</span><span class=\"o\">)</span> <span class=\"bp\">==&gt;</span> <span class=\"n\">h.toFun</span> <span class=\"bp\">&lt;$&gt;</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span> <span class=\"bp\">↔</span> <span class=\"n\">h.toFun</span> <span class=\"bp\">&lt;$&gt;</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₂</span>\n<span class=\"o\">[</span><span class=\"n\">Meta.Tactic.simp.rewrite</span><span class=\"o\">]</span> <span class=\"bp\">@</span><span class=\"n\">eq_iff_iff</span><span class=\"o\">:</span><span class=\"mi\">1000</span><span class=\"o\">,</span> <span class=\"o\">(</span><span class=\"n\">h.toFun</span> <span class=\"bp\">&lt;$&gt;</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"o\">(</span><span class=\"n\">h.toFun</span> <span class=\"bp\">&lt;$&gt;</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₂</span><span class=\"o\">)</span> <span class=\"bp\">==&gt;</span> <span class=\"n\">h.toFun</span> <span class=\"bp\">&lt;$&gt;</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span> <span class=\"bp\">↔</span> <span class=\"n\">h.toFun</span> <span class=\"bp\">&lt;$&gt;</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₂</span>\n<span class=\"o\">[</span><span class=\"n\">Meta.Tactic.simp.rewrite</span><span class=\"o\">]</span> <span class=\"bp\">@</span><span class=\"n\">eq_iff_iff</span><span class=\"o\">:</span><span class=\"mi\">1000</span><span class=\"o\">,</span> <span class=\"o\">(</span><span class=\"n\">h.toFun</span> <span class=\"bp\">&lt;$&gt;</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"o\">(</span><span class=\"n\">h.toFun</span> <span class=\"bp\">&lt;$&gt;</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₂</span><span class=\"o\">)</span> <span class=\"bp\">==&gt;</span> <span class=\"n\">h.toFun</span> <span class=\"bp\">&lt;$&gt;</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span> <span class=\"bp\">↔</span> <span class=\"n\">h.toFun</span> <span class=\"bp\">&lt;$&gt;</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₂</span>\n<span class=\"o\">[</span><span class=\"n\">Meta.Tactic.simp.rewrite</span><span class=\"o\">]</span> <span class=\"bp\">@</span><span class=\"n\">eq_iff_iff</span><span class=\"o\">:</span><span class=\"mi\">1000</span><span class=\"o\">,</span> <span class=\"o\">(</span><span class=\"n\">h.toFun</span> <span class=\"bp\">&lt;$&gt;</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"o\">(</span><span class=\"n\">h.toFun</span> <span class=\"bp\">&lt;$&gt;</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₂</span><span class=\"o\">)</span> <span class=\"bp\">==&gt;</span> <span class=\"n\">h.toFun</span> <span class=\"bp\">&lt;$&gt;</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span> <span class=\"bp\">↔</span> <span class=\"n\">h.toFun</span> <span class=\"bp\">&lt;$&gt;</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₂</span>\n<span class=\"o\">[</span><span class=\"n\">Meta.Tactic.simp.rewrite</span><span class=\"o\">]</span> <span class=\"bp\">@</span><span class=\"n\">eq_iff_iff</span><span class=\"o\">:</span><span class=\"mi\">1000</span><span class=\"o\">,</span> <span class=\"o\">(</span><span class=\"n\">Functor.map</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"o\">(</span><span class=\"n\">Functor.map</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₂</span><span class=\"o\">)</span> <span class=\"bp\">==&gt;</span> <span class=\"n\">Functor.map</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span> <span class=\"bp\">↔</span> <span class=\"n\">Functor.map</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₂</span>\n<span class=\"o\">[</span><span class=\"n\">Meta.Tactic.simp.rewrite</span><span class=\"o\">]</span> <span class=\"bp\">@</span><span class=\"n\">eq_iff_iff</span><span class=\"o\">:</span><span class=\"mi\">1000</span><span class=\"o\">,</span> <span class=\"o\">(</span><span class=\"n\">Functor.map</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"o\">(</span><span class=\"n\">Functor.map</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₂</span><span class=\"o\">)</span> <span class=\"bp\">==&gt;</span> <span class=\"n\">Functor.map</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span> <span class=\"bp\">↔</span> <span class=\"n\">Functor.map</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₂</span>\n<span class=\"o\">[</span><span class=\"n\">Meta.Tactic.simp.rewrite</span><span class=\"o\">]</span> <span class=\"bp\">@</span><span class=\"n\">eq_iff_iff</span><span class=\"o\">:</span><span class=\"mi\">1000</span><span class=\"o\">,</span> <span class=\"o\">(</span><span class=\"n\">Functor.map</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"o\">(</span><span class=\"n\">Functor.map</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₂</span><span class=\"o\">)</span> <span class=\"bp\">==&gt;</span> <span class=\"n\">Functor.map</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span> <span class=\"bp\">↔</span> <span class=\"n\">Functor.map</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₂</span>\n<span class=\"o\">[</span><span class=\"n\">Meta.Tactic.simp.rewrite</span><span class=\"o\">]</span> <span class=\"bp\">@</span><span class=\"n\">eq_iff_iff</span><span class=\"o\">:</span><span class=\"mi\">1000</span><span class=\"o\">,</span> <span class=\"o\">(</span><span class=\"n\">Functor.map</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"o\">(</span><span class=\"n\">Functor.map</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₂</span><span class=\"o\">)</span> <span class=\"bp\">==&gt;</span> <span class=\"n\">Functor.map</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span> <span class=\"bp\">↔</span> <span class=\"n\">Functor.map</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₂</span>\n<span class=\"o\">[</span><span class=\"n\">Meta.Tactic.simp.rewrite</span><span class=\"o\">]</span> <span class=\"bp\">@</span><span class=\"n\">eq_iff_iff</span><span class=\"o\">:</span><span class=\"mi\">1000</span><span class=\"o\">,</span> <span class=\"o\">(</span><span class=\"n\">Functor.map</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"o\">(</span><span class=\"n\">Functor.map</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₂</span><span class=\"o\">)</span> <span class=\"bp\">==&gt;</span> <span class=\"n\">Functor.map</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span> <span class=\"bp\">↔</span> <span class=\"n\">Functor.map</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₂</span>\n<span class=\"o\">[</span><span class=\"n\">Meta.Tactic.simp.rewrite</span><span class=\"o\">]</span> <span class=\"bp\">@</span><span class=\"n\">eq_iff_iff</span><span class=\"o\">:</span><span class=\"mi\">1000</span><span class=\"o\">,</span> <span class=\"o\">(</span><span class=\"bp\">@</span><span class=\"n\">Functor.map</span> <span class=\"n\">f</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span><span class=\"o\">)</span> <span class=\"bp\">=</span>\n      <span class=\"o\">(</span><span class=\"bp\">@</span><span class=\"n\">Functor.map</span> <span class=\"n\">f</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₂</span><span class=\"o\">)</span> <span class=\"bp\">==&gt;</span> <span class=\"bp\">@</span><span class=\"n\">Functor.map</span> <span class=\"n\">f</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span> <span class=\"bp\">↔</span> <span class=\"bp\">@</span><span class=\"n\">Functor.map</span> <span class=\"n\">f</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₂</span>\n<span class=\"o\">[</span><span class=\"n\">Meta.Tactic.simp.rewrite</span><span class=\"o\">]</span> <span class=\"bp\">@</span><span class=\"n\">eq_iff_iff</span><span class=\"o\">:</span><span class=\"mi\">1000</span><span class=\"o\">,</span> <span class=\"o\">(</span><span class=\"bp\">@</span><span class=\"n\">Functor.map</span> <span class=\"n\">f</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span><span class=\"o\">)</span> <span class=\"bp\">=</span>\n      <span class=\"o\">(</span><span class=\"bp\">@</span><span class=\"n\">Functor.map</span> <span class=\"n\">f</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₂</span><span class=\"o\">)</span> <span class=\"bp\">==&gt;</span> <span class=\"bp\">@</span><span class=\"n\">Functor.map</span> <span class=\"n\">f</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span> <span class=\"bp\">↔</span> <span class=\"bp\">@</span><span class=\"n\">Functor.map</span> <span class=\"n\">f</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₂</span>\n<span class=\"o\">[</span><span class=\"n\">Meta.Tactic.simp.rewrite</span><span class=\"o\">]</span> <span class=\"bp\">@</span><span class=\"n\">eq_iff_iff</span><span class=\"o\">:</span><span class=\"mi\">1000</span><span class=\"o\">,</span> <span class=\"o\">(</span><span class=\"bp\">@</span><span class=\"n\">Functor.map</span> <span class=\"n\">f</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span><span class=\"o\">)</span> <span class=\"bp\">=</span>\n      <span class=\"o\">(</span><span class=\"bp\">@</span><span class=\"n\">Functor.map</span> <span class=\"n\">f</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₂</span><span class=\"o\">)</span> <span class=\"bp\">==&gt;</span> <span class=\"bp\">@</span><span class=\"n\">Functor.map</span> <span class=\"n\">f</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span> <span class=\"bp\">↔</span> <span class=\"bp\">@</span><span class=\"n\">Functor.map</span> <span class=\"n\">f</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₂</span>\n<span class=\"o\">[</span><span class=\"n\">Meta.Tactic.simp.rewrite</span><span class=\"o\">]</span> <span class=\"bp\">@</span><span class=\"n\">eq_iff_iff</span><span class=\"o\">:</span><span class=\"mi\">1000</span><span class=\"o\">,</span> <span class=\"o\">(</span><span class=\"bp\">@</span><span class=\"n\">Functor.map</span> <span class=\"n\">f</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span><span class=\"o\">)</span> <span class=\"bp\">=</span>\n      <span class=\"o\">(</span><span class=\"bp\">@</span><span class=\"n\">Functor.map</span> <span class=\"n\">f</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₂</span><span class=\"o\">)</span> <span class=\"bp\">==&gt;</span> <span class=\"bp\">@</span><span class=\"n\">Functor.map</span> <span class=\"n\">f</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span> <span class=\"bp\">↔</span> <span class=\"bp\">@</span><span class=\"n\">Functor.map</span> <span class=\"n\">f</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₂</span>\n<span class=\"o\">[</span><span class=\"n\">Meta.Tactic.simp.rewrite</span><span class=\"o\">]</span> <span class=\"bp\">@</span><span class=\"n\">eq_iff_iff</span><span class=\"o\">:</span><span class=\"mi\">1000</span><span class=\"o\">,</span> <span class=\"o\">(</span><span class=\"bp\">@</span><span class=\"n\">Functor.map</span> <span class=\"n\">f</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span><span class=\"o\">)</span> <span class=\"bp\">=</span>\n      <span class=\"o\">(</span><span class=\"bp\">@</span><span class=\"n\">Functor.map</span> <span class=\"n\">f</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₂</span><span class=\"o\">)</span> <span class=\"bp\">==&gt;</span> <span class=\"bp\">@</span><span class=\"n\">Functor.map</span> <span class=\"n\">f</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span> <span class=\"bp\">↔</span> <span class=\"bp\">@</span><span class=\"n\">Functor.map</span> <span class=\"n\">f</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₂</span>\n<span class=\"o\">[</span><span class=\"n\">Meta.Tactic.simp.rewrite</span><span class=\"o\">]</span> <span class=\"bp\">@</span><span class=\"n\">eq_iff_iff</span><span class=\"o\">:</span><span class=\"mi\">1000</span><span class=\"o\">,</span> <span class=\"o\">((</span><span class=\"n\">Equiv.symm</span> <span class=\"n\">h</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">toFun</span> <span class=\"bp\">&lt;$&gt;</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span><span class=\"o\">)</span> <span class=\"bp\">=</span>\n      <span class=\"o\">((</span><span class=\"n\">Equiv.symm</span> <span class=\"n\">h</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">toFun</span> <span class=\"bp\">&lt;$&gt;</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₂</span><span class=\"o\">)</span> <span class=\"bp\">==&gt;</span> <span class=\"o\">(</span><span class=\"n\">Equiv.symm</span> <span class=\"n\">h</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">toFun</span> <span class=\"bp\">&lt;$&gt;</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span> <span class=\"bp\">↔</span> <span class=\"o\">(</span><span class=\"n\">Equiv.symm</span> <span class=\"n\">h</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">toFun</span> <span class=\"bp\">&lt;$&gt;</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₂</span>\n<span class=\"o\">[</span><span class=\"n\">Meta.Tactic.simp.rewrite</span><span class=\"o\">]</span> <span class=\"bp\">@</span><span class=\"n\">eq_iff_iff</span><span class=\"o\">:</span><span class=\"mi\">1000</span><span class=\"o\">,</span> <span class=\"o\">((</span><span class=\"n\">Equiv.symm</span> <span class=\"n\">h</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">toFun</span> <span class=\"bp\">&lt;$&gt;</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span><span class=\"o\">)</span> <span class=\"bp\">=</span>\n      <span class=\"o\">((</span><span class=\"n\">Equiv.symm</span> <span class=\"n\">h</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">toFun</span> <span class=\"bp\">&lt;$&gt;</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₂</span><span class=\"o\">)</span> <span class=\"bp\">==&gt;</span> <span class=\"o\">(</span><span class=\"n\">Equiv.symm</span> <span class=\"n\">h</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">toFun</span> <span class=\"bp\">&lt;$&gt;</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span> <span class=\"bp\">↔</span> <span class=\"o\">(</span><span class=\"n\">Equiv.symm</span> <span class=\"n\">h</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">toFun</span> <span class=\"bp\">&lt;$&gt;</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₂</span>\n<span class=\"o\">[</span><span class=\"n\">Meta.Tactic.simp.rewrite</span><span class=\"o\">]</span> <span class=\"bp\">@</span><span class=\"n\">eq_iff_iff</span><span class=\"o\">:</span><span class=\"mi\">1000</span><span class=\"o\">,</span> <span class=\"o\">((</span><span class=\"n\">Equiv.symm</span> <span class=\"n\">h</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">toFun</span> <span class=\"bp\">&lt;$&gt;</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span><span class=\"o\">)</span> <span class=\"bp\">=</span>\n      <span class=\"o\">((</span><span class=\"n\">Equiv.symm</span> <span class=\"n\">h</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">toFun</span> <span class=\"bp\">&lt;$&gt;</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₂</span><span class=\"o\">)</span> <span class=\"bp\">==&gt;</span> <span class=\"o\">(</span><span class=\"n\">Equiv.symm</span> <span class=\"n\">h</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">toFun</span> <span class=\"bp\">&lt;$&gt;</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span> <span class=\"bp\">↔</span> <span class=\"o\">(</span><span class=\"n\">Equiv.symm</span> <span class=\"n\">h</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">toFun</span> <span class=\"bp\">&lt;$&gt;</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₂</span>\n<span class=\"o\">[</span><span class=\"n\">Meta.Tactic.simp.rewrite</span><span class=\"o\">]</span> <span class=\"bp\">@</span><span class=\"n\">eq_iff_iff</span><span class=\"o\">:</span><span class=\"mi\">1000</span><span class=\"o\">,</span> <span class=\"o\">((</span><span class=\"n\">Equiv.symm</span> <span class=\"n\">h</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">toFun</span> <span class=\"bp\">&lt;$&gt;</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span><span class=\"o\">)</span> <span class=\"bp\">=</span>\n      <span class=\"o\">((</span><span class=\"n\">Equiv.symm</span> <span class=\"n\">h</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">toFun</span> <span class=\"bp\">&lt;$&gt;</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₂</span><span class=\"o\">)</span> <span class=\"bp\">==&gt;</span> <span class=\"o\">(</span><span class=\"n\">Equiv.symm</span> <span class=\"n\">h</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">toFun</span> <span class=\"bp\">&lt;$&gt;</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span> <span class=\"bp\">↔</span> <span class=\"o\">(</span><span class=\"n\">Equiv.symm</span> <span class=\"n\">h</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">toFun</span> <span class=\"bp\">&lt;$&gt;</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₂</span>\n<span class=\"o\">[</span><span class=\"n\">Meta.Tactic.simp.rewrite</span><span class=\"o\">]</span> <span class=\"bp\">@</span><span class=\"n\">eq_iff_iff</span><span class=\"o\">:</span><span class=\"mi\">1000</span><span class=\"o\">,</span> <span class=\"o\">((</span><span class=\"n\">Equiv.symm</span> <span class=\"n\">h</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">toFun</span> <span class=\"bp\">&lt;$&gt;</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span><span class=\"o\">)</span> <span class=\"bp\">=</span>\n      <span class=\"o\">((</span><span class=\"n\">Equiv.symm</span> <span class=\"n\">h</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">toFun</span> <span class=\"bp\">&lt;$&gt;</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₂</span><span class=\"o\">)</span> <span class=\"bp\">==&gt;</span> <span class=\"o\">(</span><span class=\"n\">Equiv.symm</span> <span class=\"n\">h</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">toFun</span> <span class=\"bp\">&lt;$&gt;</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span> <span class=\"bp\">↔</span> <span class=\"o\">(</span><span class=\"n\">Equiv.symm</span> <span class=\"n\">h</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">toFun</span> <span class=\"bp\">&lt;$&gt;</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₂</span>\n<span class=\"o\">[</span><span class=\"n\">Meta.Tactic.simp.rewrite</span><span class=\"o\">]</span> <span class=\"n\">Functor.map_map</span><span class=\"o\">:</span><span class=\"mi\">1000</span><span class=\"o\">,</span> <span class=\"o\">(</span><span class=\"n\">Equiv.symm</span> <span class=\"n\">h</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">toFun</span> <span class=\"bp\">&lt;$&gt;</span> <span class=\"n\">h.toFun</span> <span class=\"bp\">&lt;$&gt;</span> <span class=\"n\">x</span> <span class=\"bp\">==&gt;</span> <span class=\"o\">((</span><span class=\"n\">Equiv.symm</span> <span class=\"n\">h</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">toFun</span> <span class=\"bp\">∘</span> <span class=\"n\">h.toFun</span><span class=\"o\">)</span> <span class=\"bp\">&lt;$&gt;</span> <span class=\"n\">x</span>\n<span class=\"o\">[</span><span class=\"n\">Meta.Tactic.simp.rewrite</span><span class=\"o\">]</span> <span class=\"bp\">@</span><span class=\"n\">eq_iff_iff</span><span class=\"o\">:</span><span class=\"mi\">1000</span><span class=\"o\">,</span> <span class=\"o\">((</span><span class=\"n\">Equiv.symm</span> <span class=\"n\">h</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">toFun</span> <span class=\"bp\">∘</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span><span class=\"o\">)</span> <span class=\"bp\">=</span>\n      <span class=\"o\">((</span><span class=\"n\">Equiv.symm</span> <span class=\"n\">h</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">toFun</span> <span class=\"bp\">∘</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₂</span><span class=\"o\">)</span> <span class=\"bp\">==&gt;</span> <span class=\"o\">(</span><span class=\"n\">Equiv.symm</span> <span class=\"n\">h</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">toFun</span> <span class=\"bp\">∘</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span> <span class=\"bp\">↔</span> <span class=\"o\">(</span><span class=\"n\">Equiv.symm</span> <span class=\"n\">h</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">toFun</span> <span class=\"bp\">∘</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₂</span>\n<span class=\"o\">[</span><span class=\"n\">Meta.Tactic.simp.rewrite</span><span class=\"o\">]</span> <span class=\"bp\">@</span><span class=\"n\">eq_iff_iff</span><span class=\"o\">:</span><span class=\"mi\">1000</span><span class=\"o\">,</span> <span class=\"o\">((</span><span class=\"n\">Equiv.symm</span> <span class=\"n\">h</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">toFun</span> <span class=\"bp\">∘</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span><span class=\"o\">)</span> <span class=\"bp\">=</span>\n      <span class=\"o\">((</span><span class=\"n\">Equiv.symm</span> <span class=\"n\">h</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">toFun</span> <span class=\"bp\">∘</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₂</span><span class=\"o\">)</span> <span class=\"bp\">==&gt;</span> <span class=\"o\">(</span><span class=\"n\">Equiv.symm</span> <span class=\"n\">h</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">toFun</span> <span class=\"bp\">∘</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span> <span class=\"bp\">↔</span> <span class=\"o\">(</span><span class=\"n\">Equiv.symm</span> <span class=\"n\">h</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">toFun</span> <span class=\"bp\">∘</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₂</span>\n<span class=\"o\">[</span><span class=\"n\">Meta.Tactic.simp.rewrite</span><span class=\"o\">]</span> <span class=\"bp\">@</span><span class=\"n\">eq_iff_iff</span><span class=\"o\">:</span><span class=\"mi\">1000</span><span class=\"o\">,</span> <span class=\"o\">((</span><span class=\"n\">Equiv.symm</span> <span class=\"n\">h</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">toFun</span> <span class=\"bp\">∘</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span><span class=\"o\">)</span> <span class=\"bp\">=</span>\n      <span class=\"o\">((</span><span class=\"n\">Equiv.symm</span> <span class=\"n\">h</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">toFun</span> <span class=\"bp\">∘</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₂</span><span class=\"o\">)</span> <span class=\"bp\">==&gt;</span> <span class=\"o\">(</span><span class=\"n\">Equiv.symm</span> <span class=\"n\">h</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">toFun</span> <span class=\"bp\">∘</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span> <span class=\"bp\">↔</span> <span class=\"o\">(</span><span class=\"n\">Equiv.symm</span> <span class=\"n\">h</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">toFun</span> <span class=\"bp\">∘</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₂</span>\n<span class=\"o\">[</span><span class=\"n\">Meta.Tactic.simp.rewrite</span><span class=\"o\">]</span> <span class=\"bp\">@</span><span class=\"n\">eq_iff_iff</span><span class=\"o\">:</span><span class=\"mi\">1000</span><span class=\"o\">,</span> <span class=\"o\">((</span><span class=\"n\">Equiv.symm</span> <span class=\"n\">h</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">toFun</span> <span class=\"bp\">∘</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span><span class=\"o\">)</span> <span class=\"bp\">=</span>\n      <span class=\"o\">((</span><span class=\"n\">Equiv.symm</span> <span class=\"n\">h</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">toFun</span> <span class=\"bp\">∘</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₂</span><span class=\"o\">)</span> <span class=\"bp\">==&gt;</span> <span class=\"o\">(</span><span class=\"n\">Equiv.symm</span> <span class=\"n\">h</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">toFun</span> <span class=\"bp\">∘</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span> <span class=\"bp\">↔</span> <span class=\"o\">(</span><span class=\"n\">Equiv.symm</span> <span class=\"n\">h</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">toFun</span> <span class=\"bp\">∘</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₂</span>\n<span class=\"o\">[</span><span class=\"n\">Meta.Tactic.simp.rewrite</span><span class=\"o\">]</span> <span class=\"bp\">@</span><span class=\"n\">eq_iff_iff</span><span class=\"o\">:</span><span class=\"mi\">1000</span><span class=\"o\">,</span> <span class=\"o\">((</span><span class=\"n\">Equiv.symm</span> <span class=\"n\">h</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">toFun</span> <span class=\"bp\">∘</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span><span class=\"o\">)</span> <span class=\"bp\">=</span>\n      <span class=\"o\">((</span><span class=\"n\">Equiv.symm</span> <span class=\"n\">h</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">toFun</span> <span class=\"bp\">∘</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₂</span><span class=\"o\">)</span> <span class=\"bp\">==&gt;</span> <span class=\"o\">(</span><span class=\"n\">Equiv.symm</span> <span class=\"n\">h</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">toFun</span> <span class=\"bp\">∘</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span> <span class=\"bp\">↔</span> <span class=\"o\">(</span><span class=\"n\">Equiv.symm</span> <span class=\"n\">h</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">toFun</span> <span class=\"bp\">∘</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₂</span>\n<span class=\"o\">[</span><span class=\"n\">Meta.Tactic.simp.rewrite</span><span class=\"o\">]</span> <span class=\"bp\">@</span><span class=\"n\">Equiv.symm_comp_self</span><span class=\"o\">:</span><span class=\"mi\">1000</span><span class=\"o\">,</span> <span class=\"o\">(</span><span class=\"n\">Equiv.symm</span> <span class=\"n\">h</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">toFun</span> <span class=\"bp\">∘</span> <span class=\"n\">h.toFun</span> <span class=\"bp\">==&gt;</span> <span class=\"n\">id</span>\n<span class=\"o\">[</span><span class=\"n\">Meta.Tactic.simp.rewrite</span><span class=\"o\">]</span> <span class=\"bp\">@</span><span class=\"n\">id_map</span><span class=\"o\">:</span><span class=\"mi\">1000</span><span class=\"o\">,</span> <span class=\"n\">id</span> <span class=\"bp\">&lt;$&gt;</span> <span class=\"n\">a₁</span> <span class=\"bp\">==&gt;</span> <span class=\"n\">a₁</span>\n<span class=\"o\">[</span><span class=\"n\">Meta.Tactic.simp.rewrite</span><span class=\"o\">]</span> <span class=\"bp\">@</span><span class=\"n\">id_map</span><span class=\"o\">:</span><span class=\"mi\">1000</span><span class=\"o\">,</span> <span class=\"n\">id</span> <span class=\"bp\">&lt;$&gt;</span> <span class=\"n\">a₂</span> <span class=\"bp\">==&gt;</span> <span class=\"n\">a₂</span>\n<span class=\"o\">[</span><span class=\"n\">Meta.Tactic.simp.rewrite</span><span class=\"o\">]</span> <span class=\"bp\">@</span><span class=\"n\">id_map</span><span class=\"o\">:</span><span class=\"mi\">1000</span><span class=\"o\">,</span> <span class=\"n\">id</span> <span class=\"bp\">&lt;$&gt;</span> <span class=\"n\">a₁</span> <span class=\"bp\">==&gt;</span> <span class=\"n\">a₁</span>\n<span class=\"o\">[</span><span class=\"n\">Meta.Tactic.simp.rewrite</span><span class=\"o\">]</span> <span class=\"bp\">@</span><span class=\"n\">id_map</span><span class=\"o\">:</span><span class=\"mi\">1000</span><span class=\"o\">,</span> <span class=\"n\">id</span> <span class=\"bp\">&lt;$&gt;</span> <span class=\"n\">a₁</span> <span class=\"bp\">==&gt;</span> <span class=\"n\">a₁</span>\n<span class=\"o\">[</span><span class=\"n\">Meta.Tactic.simp.rewrite</span><span class=\"o\">]</span> <span class=\"bp\">@</span><span class=\"n\">id_map</span><span class=\"o\">:</span><span class=\"mi\">1000</span><span class=\"o\">,</span> <span class=\"n\">id</span> <span class=\"bp\">&lt;$&gt;</span> <span class=\"n\">a₂</span> <span class=\"bp\">==&gt;</span> <span class=\"n\">a₂</span>\n<span class=\"o\">[</span><span class=\"n\">Meta.Tactic.simp.rewrite</span><span class=\"o\">]</span> <span class=\"bp\">@</span><span class=\"n\">id_map</span><span class=\"o\">:</span><span class=\"mi\">1000</span><span class=\"o\">,</span> <span class=\"n\">id</span> <span class=\"bp\">&lt;$&gt;</span> <span class=\"n\">a₂</span> <span class=\"bp\">==&gt;</span> <span class=\"n\">a₂</span>\n<span class=\"o\">[</span><span class=\"n\">Meta.Tactic.simp.rewrite</span><span class=\"o\">]</span> <span class=\"bp\">@</span><span class=\"n\">eq_iff_iff</span><span class=\"o\">:</span><span class=\"mi\">1000</span><span class=\"o\">,</span> <span class=\"o\">(</span><span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"o\">(</span><span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₂</span><span class=\"o\">)</span> <span class=\"bp\">==&gt;</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span> <span class=\"bp\">↔</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₂</span>\n<span class=\"o\">[</span><span class=\"n\">Meta.Tactic.simp.rewrite</span><span class=\"o\">]</span> <span class=\"bp\">@</span><span class=\"n\">eq_iff_iff</span><span class=\"o\">:</span><span class=\"mi\">1000</span><span class=\"o\">,</span> <span class=\"o\">(</span><span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"o\">(</span><span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₂</span><span class=\"o\">)</span> <span class=\"bp\">==&gt;</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span> <span class=\"bp\">↔</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₂</span>\n<span class=\"o\">[</span><span class=\"n\">Meta.Tactic.simp.rewrite</span><span class=\"o\">]</span> <span class=\"bp\">@</span><span class=\"n\">eq_iff_iff</span><span class=\"o\">:</span><span class=\"mi\">1000</span><span class=\"o\">,</span> <span class=\"o\">(</span><span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"o\">(</span><span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₂</span><span class=\"o\">)</span> <span class=\"bp\">==&gt;</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span> <span class=\"bp\">↔</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₂</span>\n<span class=\"o\">[</span><span class=\"n\">Meta.Tactic.simp.rewrite</span><span class=\"o\">]</span> <span class=\"bp\">@</span><span class=\"n\">eq_iff_iff</span><span class=\"o\">:</span><span class=\"mi\">1000</span><span class=\"o\">,</span> <span class=\"o\">(</span><span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"o\">(</span><span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₂</span><span class=\"o\">)</span> <span class=\"bp\">==&gt;</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span> <span class=\"bp\">↔</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₂</span>\n<span class=\"o\">[</span><span class=\"n\">Meta.Tactic.simp.rewrite</span><span class=\"o\">]</span> <span class=\"bp\">@</span><span class=\"n\">eq_iff_iff</span><span class=\"o\">:</span><span class=\"mi\">1000</span><span class=\"o\">,</span> <span class=\"o\">(</span><span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"o\">(</span><span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₂</span><span class=\"o\">)</span> <span class=\"bp\">==&gt;</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span> <span class=\"bp\">↔</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₂</span>\n<span class=\"o\">[</span><span class=\"n\">Meta.Tactic.simp.rewrite</span><span class=\"o\">]</span> <span class=\"bp\">@</span><span class=\"n\">id_map</span><span class=\"o\">:</span><span class=\"mi\">1000</span><span class=\"o\">,</span> <span class=\"n\">id</span> <span class=\"bp\">&lt;$&gt;</span> <span class=\"n\">x</span> <span class=\"bp\">==&gt;</span> <span class=\"n\">x</span>\n<span class=\"o\">[</span><span class=\"n\">Meta.Tactic.simp.rewrite</span><span class=\"o\">]</span> <span class=\"bp\">@</span><span class=\"n\">eq_iff_iff</span><span class=\"o\">:</span><span class=\"mi\">1000</span><span class=\"o\">,</span> <span class=\"o\">(</span><span class=\"n\">x</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"o\">(</span><span class=\"n\">x</span> <span class=\"bp\">=</span> <span class=\"n\">a₂</span><span class=\"o\">)</span> <span class=\"bp\">==&gt;</span> <span class=\"n\">x</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span> <span class=\"bp\">↔</span> <span class=\"n\">x</span> <span class=\"bp\">=</span> <span class=\"n\">a₂</span>\n<span class=\"o\">[</span><span class=\"n\">Meta.Tactic.simp.rewrite</span><span class=\"o\">]</span> <span class=\"bp\">@</span><span class=\"n\">eq_iff_iff</span><span class=\"o\">:</span><span class=\"mi\">1000</span><span class=\"o\">,</span> <span class=\"o\">(</span><span class=\"n\">x</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"o\">(</span><span class=\"n\">x</span> <span class=\"bp\">=</span> <span class=\"n\">a₂</span><span class=\"o\">)</span> <span class=\"bp\">==&gt;</span> <span class=\"n\">x</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span> <span class=\"bp\">↔</span> <span class=\"n\">x</span> <span class=\"bp\">=</span> <span class=\"n\">a₂</span>\n<span class=\"o\">[</span><span class=\"n\">Meta.Tactic.simp.rewrite</span><span class=\"o\">]</span> <span class=\"bp\">@</span><span class=\"n\">eq_iff_iff</span><span class=\"o\">:</span><span class=\"mi\">1000</span><span class=\"o\">,</span> <span class=\"o\">(</span><span class=\"n\">x</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"o\">(</span><span class=\"n\">x</span> <span class=\"bp\">=</span> <span class=\"n\">a₂</span><span class=\"o\">)</span> <span class=\"bp\">==&gt;</span> <span class=\"n\">x</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span> <span class=\"bp\">↔</span> <span class=\"n\">x</span> <span class=\"bp\">=</span> <span class=\"n\">a₂</span>\n<span class=\"o\">[</span><span class=\"n\">Meta.Tactic.simp.rewrite</span><span class=\"o\">]</span> <span class=\"bp\">@</span><span class=\"n\">eq_iff_iff</span><span class=\"o\">:</span><span class=\"mi\">1000</span><span class=\"o\">,</span> <span class=\"o\">(</span><span class=\"n\">x</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"o\">(</span><span class=\"n\">x</span> <span class=\"bp\">=</span> <span class=\"n\">a₂</span><span class=\"o\">)</span> <span class=\"bp\">==&gt;</span> <span class=\"n\">x</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span> <span class=\"bp\">↔</span> <span class=\"n\">x</span> <span class=\"bp\">=</span> <span class=\"n\">a₂</span>\n<span class=\"o\">[</span><span class=\"n\">Meta.Tactic.simp.rewrite</span><span class=\"o\">]</span> <span class=\"bp\">@</span><span class=\"n\">eq_iff_iff</span><span class=\"o\">:</span><span class=\"mi\">1000</span><span class=\"o\">,</span> <span class=\"o\">(</span><span class=\"n\">x</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span> <span class=\"bp\">==&gt;</span> <span class=\"n\">x</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">↔</span> <span class=\"n\">a₁</span>\n<span class=\"o\">[</span><span class=\"n\">Meta.Tactic.simp.rewrite</span><span class=\"o\">]</span> <span class=\"bp\">@</span><span class=\"n\">eq_iff_iff</span><span class=\"o\">:</span><span class=\"mi\">1000</span><span class=\"o\">,</span> <span class=\"o\">(</span><span class=\"n\">x</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"n\">a₂</span> <span class=\"bp\">==&gt;</span> <span class=\"n\">x</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">↔</span> <span class=\"n\">a₂</span>\n<span class=\"o\">[</span><span class=\"n\">Meta.Tactic.simp.rewrite</span><span class=\"o\">]</span> <span class=\"bp\">@</span><span class=\"n\">eq_iff_iff</span><span class=\"o\">:</span><span class=\"mi\">1000</span><span class=\"o\">,</span> <span class=\"o\">(</span><span class=\"n\">x</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">↔</span> <span class=\"n\">a₁</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"o\">(</span><span class=\"n\">x</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">↔</span> <span class=\"n\">a₂</span><span class=\"o\">)</span> <span class=\"bp\">==&gt;</span> <span class=\"o\">(</span><span class=\"n\">x</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">↔</span> <span class=\"n\">a₁</span><span class=\"o\">)</span> <span class=\"bp\">↔</span> <span class=\"o\">(</span><span class=\"n\">x</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">↔</span> <span class=\"n\">a₂</span><span class=\"o\">)</span>\n<span class=\"o\">[</span><span class=\"n\">Meta.Tactic.simp.rewrite</span><span class=\"o\">]</span> <span class=\"bp\">@</span><span class=\"n\">eq_iff_iff</span><span class=\"o\">:</span><span class=\"mi\">1000</span><span class=\"o\">,</span> <span class=\"o\">(</span><span class=\"n\">x</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"o\">(</span><span class=\"n\">x</span> <span class=\"bp\">=</span> <span class=\"n\">a₂</span><span class=\"o\">)</span> <span class=\"bp\">==&gt;</span> <span class=\"n\">x</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span> <span class=\"bp\">↔</span> <span class=\"n\">x</span> <span class=\"bp\">=</span> <span class=\"n\">a₂</span>\n<span class=\"o\">[</span><span class=\"n\">Meta.Tactic.simp.rewrite</span><span class=\"o\">]</span> <span class=\"bp\">@</span><span class=\"n\">eq_iff_iff</span><span class=\"o\">:</span><span class=\"mi\">1000</span><span class=\"o\">,</span> <span class=\"o\">(</span><span class=\"n\">x</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"o\">(</span><span class=\"n\">x</span> <span class=\"bp\">=</span> <span class=\"n\">a₂</span><span class=\"o\">)</span> <span class=\"bp\">==&gt;</span> <span class=\"n\">x</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span> <span class=\"bp\">↔</span> <span class=\"n\">x</span> <span class=\"bp\">=</span> <span class=\"n\">a₂</span>\n<span class=\"o\">[</span><span class=\"n\">Meta.Tactic.simp.rewrite</span><span class=\"o\">]</span> <span class=\"bp\">@</span><span class=\"n\">eq_iff_iff</span><span class=\"o\">:</span><span class=\"mi\">1000</span><span class=\"o\">,</span> <span class=\"o\">(</span><span class=\"n\">x</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"o\">(</span><span class=\"n\">x</span> <span class=\"bp\">=</span> <span class=\"n\">a₂</span><span class=\"o\">)</span> <span class=\"bp\">==&gt;</span> <span class=\"n\">x</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span> <span class=\"bp\">↔</span> <span class=\"n\">x</span> <span class=\"bp\">=</span> <span class=\"n\">a₂</span>\n<span class=\"o\">[</span><span class=\"n\">Meta.Tactic.simp.rewrite</span><span class=\"o\">]</span> <span class=\"bp\">@</span><span class=\"n\">eq_iff_iff</span><span class=\"o\">:</span><span class=\"mi\">1000</span><span class=\"o\">,</span> <span class=\"o\">(</span><span class=\"n\">x</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">↔</span> <span class=\"n\">a₁</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"o\">(</span><span class=\"n\">x</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">↔</span> <span class=\"n\">a₂</span><span class=\"o\">)</span> <span class=\"bp\">==&gt;</span> <span class=\"o\">(</span><span class=\"n\">x</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">↔</span> <span class=\"n\">a₁</span><span class=\"o\">)</span> <span class=\"bp\">↔</span> <span class=\"o\">(</span><span class=\"n\">x</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">↔</span> <span class=\"n\">a₂</span><span class=\"o\">)</span>\n<span class=\"o\">[</span><span class=\"n\">Meta.Tactic.simp.rewrite</span><span class=\"o\">]</span> <span class=\"bp\">@</span><span class=\"n\">eq_iff_iff</span><span class=\"o\">:</span><span class=\"mi\">1000</span><span class=\"o\">,</span> <span class=\"o\">(</span><span class=\"n\">x</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">↔</span> <span class=\"n\">a₁</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"o\">(</span><span class=\"n\">x</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">↔</span> <span class=\"n\">a₂</span><span class=\"o\">)</span> <span class=\"bp\">==&gt;</span> <span class=\"o\">(</span><span class=\"n\">x</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">↔</span> <span class=\"n\">a₁</span><span class=\"o\">)</span> <span class=\"bp\">↔</span> <span class=\"o\">(</span><span class=\"n\">x</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">↔</span> <span class=\"n\">a₂</span><span class=\"o\">)</span>\n<span class=\"o\">[</span><span class=\"n\">Meta.Tactic.simp.rewrite</span><span class=\"o\">]</span> <span class=\"bp\">@</span><span class=\"n\">eq_iff_iff</span><span class=\"o\">:</span><span class=\"mi\">1000</span><span class=\"o\">,</span> <span class=\"o\">(</span><span class=\"n\">x</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"o\">(</span><span class=\"n\">x</span> <span class=\"bp\">=</span> <span class=\"n\">a₂</span><span class=\"o\">)</span> <span class=\"bp\">==&gt;</span> <span class=\"n\">x</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span> <span class=\"bp\">↔</span> <span class=\"n\">x</span> <span class=\"bp\">=</span> <span class=\"n\">a₂</span>\n<span class=\"o\">[</span><span class=\"n\">Meta.Tactic.simp.rewrite</span><span class=\"o\">]</span> <span class=\"bp\">@</span><span class=\"n\">eq_iff_iff</span><span class=\"o\">:</span><span class=\"mi\">1000</span><span class=\"o\">,</span> <span class=\"o\">(</span><span class=\"n\">x</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">↔</span> <span class=\"n\">a₁</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"o\">(</span><span class=\"n\">x</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">↔</span> <span class=\"n\">a₂</span><span class=\"o\">)</span> <span class=\"bp\">==&gt;</span> <span class=\"o\">(</span><span class=\"n\">x</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">↔</span> <span class=\"n\">a₁</span><span class=\"o\">)</span> <span class=\"bp\">↔</span> <span class=\"o\">(</span><span class=\"n\">x</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">↔</span> <span class=\"n\">a₂</span><span class=\"o\">)</span>\n<span class=\"o\">[</span><span class=\"n\">Meta.Tactic.simp.rewrite</span><span class=\"o\">]</span> <span class=\"bp\">@</span><span class=\"n\">eq_iff_iff</span><span class=\"o\">:</span><span class=\"mi\">1000</span><span class=\"o\">,</span> <span class=\"o\">(</span><span class=\"n\">x</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"o\">(</span><span class=\"n\">x</span> <span class=\"bp\">=</span> <span class=\"n\">a₂</span><span class=\"o\">)</span> <span class=\"bp\">==&gt;</span> <span class=\"n\">x</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span> <span class=\"bp\">↔</span> <span class=\"n\">x</span> <span class=\"bp\">=</span> <span class=\"n\">a₂</span>\n<span class=\"o\">[</span><span class=\"n\">Meta.Tactic.simp.rewrite</span><span class=\"o\">]</span> <span class=\"bp\">@</span><span class=\"n\">eq_iff_iff</span><span class=\"o\">:</span><span class=\"mi\">1000</span><span class=\"o\">,</span> <span class=\"o\">(</span><span class=\"n\">x</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"o\">(</span><span class=\"n\">x</span> <span class=\"bp\">=</span> <span class=\"n\">a₂</span><span class=\"o\">)</span> <span class=\"bp\">==&gt;</span> <span class=\"n\">x</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span> <span class=\"bp\">↔</span> <span class=\"n\">x</span> <span class=\"bp\">=</span> <span class=\"n\">a₂</span>\n<span class=\"o\">[</span><span class=\"n\">Meta.Tactic.simp.rewrite</span><span class=\"o\">]</span> <span class=\"bp\">@</span><span class=\"n\">eq_iff_iff</span><span class=\"o\">:</span><span class=\"mi\">1000</span><span class=\"o\">,</span> <span class=\"o\">(</span><span class=\"n\">x</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">↔</span> <span class=\"n\">a₁</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"o\">(</span><span class=\"n\">x</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">↔</span> <span class=\"n\">a₂</span><span class=\"o\">)</span> <span class=\"bp\">==&gt;</span> <span class=\"o\">(</span><span class=\"n\">x</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">↔</span> <span class=\"n\">a₁</span><span class=\"o\">)</span> <span class=\"bp\">↔</span> <span class=\"o\">(</span><span class=\"n\">x</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">↔</span> <span class=\"n\">a₂</span><span class=\"o\">)</span>\n<span class=\"o\">[</span><span class=\"n\">Meta.Tactic.simp.rewrite</span><span class=\"o\">]</span> <span class=\"bp\">@</span><span class=\"n\">eq_self</span><span class=\"o\">:</span><span class=\"mi\">1000</span><span class=\"o\">,</span> <span class=\"n\">x</span> <span class=\"bp\">=</span> <span class=\"n\">x</span> <span class=\"bp\">==&gt;</span> <span class=\"n\">True</span>\n</code></pre></div>\n<p>on the <code>left_inv</code> line, and then</p>",
        "id": 309532647,
        "sender_full_name": "Scott Morrison",
        "timestamp": 1668402603
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"n\">tactic</span> <span class=\"bp\">'</span><span class=\"n\">simp'</span> <span class=\"n\">failed</span><span class=\"o\">,</span> <span class=\"n\">nested</span> <span class=\"n\">error</span><span class=\"o\">:</span>\n<span class=\"o\">(</span><span class=\"n\">deterministic</span><span class=\"o\">)</span> <span class=\"n\">timeout</span> <span class=\"n\">at</span> <span class=\"bp\">'</span><span class=\"n\">whnf'</span><span class=\"o\">,</span> <span class=\"n\">maximum</span> <span class=\"n\">number</span> <span class=\"n\">of</span> <span class=\"n\">heartbeats</span> <span class=\"o\">(</span><span class=\"mi\">200000</span><span class=\"o\">)</span> <span class=\"n\">has</span> <span class=\"n\">been</span> <span class=\"n\">reached</span> <span class=\"o\">(</span><span class=\"n\">use</span> <span class=\"bp\">'</span><span class=\"kd\">set_option</span> <span class=\"n\">maxHeartbeats</span> <span class=\"bp\">&lt;</span><span class=\"n\">num</span><span class=\"bp\">&gt;'</span> <span class=\"n\">to</span> <span class=\"n\">set</span> <span class=\"n\">the</span> <span class=\"n\">limit</span><span class=\"o\">)</span>\n\n<span class=\"o\">[</span><span class=\"n\">Meta.Tactic.simp.rewrite</span><span class=\"o\">]</span> <span class=\"bp\">@</span><span class=\"n\">eq_iff_iff</span><span class=\"o\">:</span><span class=\"mi\">1000</span><span class=\"o\">,</span> <span class=\"o\">(</span><span class=\"n\">a₁</span><span class=\"bp\">✝.</span><span class=\"n\">toFun</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"o\">(</span><span class=\"n\">a₁</span><span class=\"bp\">✝.</span><span class=\"n\">toFun</span> <span class=\"bp\">=</span> <span class=\"n\">a₂</span><span class=\"o\">)</span> <span class=\"bp\">==&gt;</span> <span class=\"n\">a₁</span><span class=\"bp\">✝.</span><span class=\"n\">toFun</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span> <span class=\"bp\">↔</span> <span class=\"n\">a₁</span><span class=\"bp\">✝.</span><span class=\"n\">toFun</span> <span class=\"bp\">=</span> <span class=\"n\">a₂</span>\n<span class=\"o\">[</span><span class=\"n\">Meta.Tactic.simp.rewrite</span><span class=\"o\">]</span> <span class=\"bp\">@</span><span class=\"n\">eq_iff_iff</span><span class=\"o\">:</span><span class=\"mi\">1000</span><span class=\"o\">,</span> <span class=\"o\">(</span><span class=\"n\">a₁</span><span class=\"bp\">✝.</span><span class=\"n\">toFun</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"o\">(</span><span class=\"n\">a₁</span><span class=\"bp\">✝.</span><span class=\"n\">toFun</span> <span class=\"bp\">=</span> <span class=\"n\">a₂</span><span class=\"o\">)</span> <span class=\"bp\">==&gt;</span> <span class=\"n\">a₁</span><span class=\"bp\">✝.</span><span class=\"n\">toFun</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span> <span class=\"bp\">↔</span> <span class=\"n\">a₁</span><span class=\"bp\">✝.</span><span class=\"n\">toFun</span> <span class=\"bp\">=</span> <span class=\"n\">a₂</span>\n<span class=\"o\">[</span><span class=\"n\">Meta.Tactic.simp.rewrite</span><span class=\"o\">]</span> <span class=\"bp\">@</span><span class=\"n\">eq_iff_iff</span><span class=\"o\">:</span><span class=\"mi\">1000</span><span class=\"o\">,</span> <span class=\"o\">(</span><span class=\"n\">a₁</span><span class=\"bp\">✝.</span><span class=\"n\">toFun</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"o\">(</span><span class=\"n\">a₁</span><span class=\"bp\">✝.</span><span class=\"n\">toFun</span> <span class=\"bp\">=</span> <span class=\"n\">a₂</span><span class=\"o\">)</span> <span class=\"bp\">==&gt;</span> <span class=\"n\">a₁</span><span class=\"bp\">✝.</span><span class=\"n\">toFun</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span> <span class=\"bp\">↔</span> <span class=\"n\">a₁</span><span class=\"bp\">✝.</span><span class=\"n\">toFun</span> <span class=\"bp\">=</span> <span class=\"n\">a₂</span>\n<span class=\"o\">[</span><span class=\"n\">Meta.Tactic.simp.rewrite</span><span class=\"o\">]</span> <span class=\"bp\">@</span><span class=\"n\">eq_iff_iff</span><span class=\"o\">:</span><span class=\"mi\">1000</span><span class=\"o\">,</span> <span class=\"o\">(</span><span class=\"n\">a₁</span><span class=\"bp\">✝.</span><span class=\"n\">toFun</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"o\">(</span><span class=\"n\">a₁</span><span class=\"bp\">✝.</span><span class=\"n\">toFun</span> <span class=\"bp\">=</span> <span class=\"n\">a₂</span><span class=\"o\">)</span> <span class=\"bp\">==&gt;</span> <span class=\"n\">a₁</span><span class=\"bp\">✝.</span><span class=\"n\">toFun</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span> <span class=\"bp\">↔</span> <span class=\"n\">a₁</span><span class=\"bp\">✝.</span><span class=\"n\">toFun</span> <span class=\"bp\">=</span> <span class=\"n\">a₂</span>\n<span class=\"o\">[</span><span class=\"n\">Meta.Tactic.simp.rewrite</span><span class=\"o\">]</span> <span class=\"bp\">@</span><span class=\"n\">eq_iff_iff</span><span class=\"o\">:</span><span class=\"mi\">1000</span><span class=\"o\">,</span> <span class=\"o\">(</span><span class=\"n\">a₁</span><span class=\"bp\">✝.</span><span class=\"n\">toFun</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"o\">(</span><span class=\"n\">a₁</span><span class=\"bp\">✝.</span><span class=\"n\">toFun</span> <span class=\"bp\">=</span> <span class=\"n\">a₂</span><span class=\"o\">)</span> <span class=\"bp\">==&gt;</span> <span class=\"n\">a₁</span><span class=\"bp\">✝.</span><span class=\"n\">toFun</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span> <span class=\"bp\">↔</span> <span class=\"n\">a₁</span><span class=\"bp\">✝.</span><span class=\"n\">toFun</span> <span class=\"bp\">=</span> <span class=\"n\">a₂</span>\n<span class=\"o\">[</span><span class=\"n\">Meta.Tactic.simp.rewrite</span><span class=\"o\">]</span> <span class=\"bp\">@</span><span class=\"n\">eq_iff_iff</span><span class=\"o\">:</span><span class=\"mi\">1000</span><span class=\"o\">,</span> <span class=\"o\">(</span><span class=\"n\">Equiv.symm</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"o\">(</span><span class=\"n\">Equiv.symm</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₂</span><span class=\"o\">)</span> <span class=\"bp\">==&gt;</span> <span class=\"n\">Equiv.symm</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span> <span class=\"bp\">↔</span> <span class=\"n\">Equiv.symm</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₂</span>\n<span class=\"o\">[</span><span class=\"n\">Meta.Tactic.simp.rewrite</span><span class=\"o\">]</span> <span class=\"bp\">@</span><span class=\"n\">eq_iff_iff</span><span class=\"o\">:</span><span class=\"mi\">1000</span><span class=\"o\">,</span> <span class=\"o\">(</span><span class=\"n\">Equiv.symm</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"o\">(</span><span class=\"n\">Equiv.symm</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₂</span><span class=\"o\">)</span> <span class=\"bp\">==&gt;</span> <span class=\"n\">Equiv.symm</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span> <span class=\"bp\">↔</span> <span class=\"n\">Equiv.symm</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₂</span>\n<span class=\"o\">[</span><span class=\"n\">Meta.Tactic.simp.rewrite</span><span class=\"o\">]</span> <span class=\"bp\">@</span><span class=\"n\">eq_iff_iff</span><span class=\"o\">:</span><span class=\"mi\">1000</span><span class=\"o\">,</span> <span class=\"o\">(</span><span class=\"n\">Equiv.symm</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"o\">(</span><span class=\"n\">Equiv.symm</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₂</span><span class=\"o\">)</span> <span class=\"bp\">==&gt;</span> <span class=\"n\">Equiv.symm</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span> <span class=\"bp\">↔</span> <span class=\"n\">Equiv.symm</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₂</span>\n<span class=\"o\">[</span><span class=\"n\">Meta.Tactic.simp.rewrite</span><span class=\"o\">]</span> <span class=\"bp\">@</span><span class=\"n\">eq_iff_iff</span><span class=\"o\">:</span><span class=\"mi\">1000</span><span class=\"o\">,</span> <span class=\"o\">(</span><span class=\"n\">Equiv.symm</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"o\">(</span><span class=\"n\">Equiv.symm</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₂</span><span class=\"o\">)</span> <span class=\"bp\">==&gt;</span> <span class=\"n\">Equiv.symm</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span> <span class=\"bp\">↔</span> <span class=\"n\">Equiv.symm</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₂</span>\n<span class=\"o\">[</span><span class=\"n\">Meta.Tactic.simp.rewrite</span><span class=\"o\">]</span> <span class=\"bp\">@</span><span class=\"n\">eq_iff_iff</span><span class=\"o\">:</span><span class=\"mi\">1000</span><span class=\"o\">,</span> <span class=\"o\">(</span><span class=\"n\">Equiv.symm</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"o\">(</span><span class=\"n\">Equiv.symm</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₂</span><span class=\"o\">)</span> <span class=\"bp\">==&gt;</span> <span class=\"n\">Equiv.symm</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span> <span class=\"bp\">↔</span> <span class=\"n\">Equiv.symm</span> <span class=\"n\">a₁</span><span class=\"bp\">✝</span> <span class=\"bp\">=</span> <span class=\"n\">a₂</span>\n<span class=\"o\">[</span><span class=\"n\">Meta.Tactic.simp.rewrite</span><span class=\"o\">]</span> <span class=\"bp\">@</span><span class=\"n\">eq_iff_iff</span><span class=\"o\">:</span><span class=\"mi\">1000</span><span class=\"o\">,</span> <span class=\"o\">(</span><span class=\"n\">a₁</span><span class=\"bp\">✝.</span><span class=\"n\">toFun</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"o\">(</span><span class=\"n\">a₁</span><span class=\"bp\">✝.</span><span class=\"n\">toFun</span> <span class=\"bp\">=</span> <span class=\"n\">a₂</span><span class=\"o\">)</span> <span class=\"bp\">==&gt;</span> <span class=\"n\">a₁</span><span class=\"bp\">✝.</span><span class=\"n\">toFun</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span> <span class=\"bp\">↔</span> <span class=\"n\">a₁</span><span class=\"bp\">✝.</span><span class=\"n\">toFun</span> <span class=\"bp\">=</span> <span class=\"n\">a₂</span>\n<span class=\"o\">[</span><span class=\"n\">Meta.Tactic.simp.rewrite</span><span class=\"o\">]</span> <span class=\"bp\">@</span><span class=\"n\">eq_iff_iff</span><span class=\"o\">:</span><span class=\"mi\">1000</span><span class=\"o\">,</span> <span class=\"o\">(</span><span class=\"n\">a₁</span><span class=\"bp\">✝.</span><span class=\"n\">toFun</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"o\">(</span><span class=\"n\">a₁</span><span class=\"bp\">✝.</span><span class=\"n\">toFun</span> <span class=\"bp\">=</span> <span class=\"n\">a₂</span><span class=\"o\">)</span> <span class=\"bp\">==&gt;</span> <span class=\"n\">a₁</span><span class=\"bp\">✝.</span><span class=\"n\">toFun</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span> <span class=\"bp\">↔</span> <span class=\"n\">a₁</span><span class=\"bp\">✝.</span><span class=\"n\">toFun</span> <span class=\"bp\">=</span> <span class=\"n\">a₂</span>\n<span class=\"o\">[</span><span class=\"n\">Meta.Tactic.simp.rewrite</span><span class=\"o\">]</span> <span class=\"bp\">@</span><span class=\"n\">eq_iff_iff</span><span class=\"o\">:</span><span class=\"mi\">1000</span><span class=\"o\">,</span> <span class=\"o\">(</span><span class=\"n\">a₁</span><span class=\"bp\">✝.</span><span class=\"n\">toFun</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"o\">(</span><span class=\"n\">a₁</span><span class=\"bp\">✝.</span><span class=\"n\">toFun</span> <span class=\"bp\">=</span> <span class=\"n\">a₂</span><span class=\"o\">)</span> <span class=\"bp\">==&gt;</span> <span class=\"n\">a₁</span><span class=\"bp\">✝.</span><span class=\"n\">toFun</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span> <span class=\"bp\">↔</span> <span class=\"n\">a₁</span><span class=\"bp\">✝.</span><span class=\"n\">toFun</span> <span class=\"bp\">=</span> <span class=\"n\">a₂</span>\n<span class=\"o\">[</span><span class=\"n\">Meta.Tactic.simp.rewrite</span><span class=\"o\">]</span> <span class=\"bp\">@</span><span class=\"n\">eq_iff_iff</span><span class=\"o\">:</span><span class=\"mi\">1000</span><span class=\"o\">,</span> <span class=\"o\">(</span><span class=\"n\">a₁</span><span class=\"bp\">✝.</span><span class=\"n\">toFun</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"o\">(</span><span class=\"n\">a₁</span><span class=\"bp\">✝.</span><span class=\"n\">toFun</span> <span class=\"bp\">=</span> <span class=\"n\">a₂</span><span class=\"o\">)</span> <span class=\"bp\">==&gt;</span> <span class=\"n\">a₁</span><span class=\"bp\">✝.</span><span class=\"n\">toFun</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span> <span class=\"bp\">↔</span> <span class=\"n\">a₁</span><span class=\"bp\">✝.</span><span class=\"n\">toFun</span> <span class=\"bp\">=</span> <span class=\"n\">a₂</span>\n<span class=\"o\">[</span><span class=\"n\">Meta.Tactic.simp.rewrite</span><span class=\"o\">]</span> <span class=\"bp\">@</span><span class=\"n\">eq_iff_iff</span><span class=\"o\">:</span><span class=\"mi\">1000</span><span class=\"o\">,</span> <span class=\"o\">(</span><span class=\"n\">a₁</span><span class=\"bp\">✝.</span><span class=\"n\">toFun</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"o\">(</span><span class=\"n\">a₁</span><span class=\"bp\">✝.</span><span class=\"n\">toFun</span> <span class=\"bp\">=</span> <span class=\"n\">a₂</span><span class=\"o\">)</span> <span class=\"bp\">==&gt;</span> <span class=\"n\">a₁</span><span class=\"bp\">✝.</span><span class=\"n\">toFun</span> <span class=\"bp\">=</span> <span class=\"n\">a₁</span> <span class=\"bp\">↔</span> <span class=\"n\">a₁</span><span class=\"bp\">✝.</span><span class=\"n\">toFun</span> <span class=\"bp\">=</span> <span class=\"n\">a₂</span>\n</code></pre></div>\n<p>on the <code>right_inv</code> line.</p>",
        "id": 309532690,
        "sender_full_name": "Scott Morrison",
        "timestamp": 1668402629
    },
    {
        "content": "<p>I have to run now...</p>",
        "id": 309532702,
        "sender_full_name": "Scott Morrison",
        "timestamp": 1668402637
    },
    {
        "content": "<p>It slows down even in the <code>Logic.Equiv.Defs</code> file itself. I've removed all the <code>simp</code> tags, yet</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kd\">theorem</span> <span class=\"n\">cast_eq_iff_heq</span> <span class=\"o\">{</span><span class=\"n\">α</span> <span class=\"n\">β</span><span class=\"o\">}</span> <span class=\"o\">(</span><span class=\"n\">h</span> <span class=\"o\">:</span> <span class=\"n\">α</span> <span class=\"bp\">=</span> <span class=\"n\">β</span><span class=\"o\">)</span> <span class=\"o\">{</span><span class=\"n\">a</span> <span class=\"o\">:</span> <span class=\"n\">α</span><span class=\"o\">}</span> <span class=\"o\">{</span><span class=\"n\">b</span> <span class=\"o\">:</span> <span class=\"n\">β</span><span class=\"o\">}</span> <span class=\"o\">:</span> <span class=\"n\">Equiv.cast</span> <span class=\"n\">h</span> <span class=\"n\">a</span> <span class=\"bp\">=</span> <span class=\"n\">b</span> <span class=\"bp\">↔</span> <span class=\"n\">HEq</span> <span class=\"n\">a</span> <span class=\"n\">b</span> <span class=\"o\">:=</span>\n<span class=\"kd\">by</span> <span class=\"n\">subst</span> <span class=\"n\">h</span>\n   <span class=\"n\">simp</span> <span class=\"o\">[</span><span class=\"n\">coe_refl</span><span class=\"o\">]</span>\n</code></pre></div>\n<p>is still slow.</p>",
        "id": 309534385,
        "sender_full_name": "Yakov Pechersky",
        "timestamp": 1668404114
    },
    {
        "content": "<p>Still away from the computer, but I suspect it is Data.Quot. We should turn off all the <code>lift...mk</code> type simp lemmas, which are probably all bad for Lean 4.</p>",
        "id": 309542281,
        "sender_full_name": "Scott Morrison",
        "timestamp": 1668410259
    },
    {
        "content": "<p>I've turned off all the <code>lift.*mk.*</code> lemmas, and now simp is fast again. We really need a linter to catch simp lemmas where, after unfolding reducible definitions, the head of the LHS is variable.</p>",
        "id": 309563356,
        "sender_full_name": "Scott Morrison",
        "timestamp": 1668419970
    },
    {
        "content": "<p>For this PR, I think we can just proceed with these simp lemmas in <code>Data.Quot</code> turned off.</p>",
        "id": 309563409,
        "sender_full_name": "Scott Morrison",
        "timestamp": 1668419993
    },
    {
        "content": "<p>(Probably I turned off more simp lemmas than is really necessary?)</p>",
        "id": 309563510,
        "sender_full_name": "Scott Morrison",
        "timestamp": 1668420013
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover/std4/pull/26\">https://github.com/leanprover/std4/pull/26</a></p>",
        "id": 310132316,
        "sender_full_name": "Gabriel Ebner",
        "timestamp": 1668491780
    }
]