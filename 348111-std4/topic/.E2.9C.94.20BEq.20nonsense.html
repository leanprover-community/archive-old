---
layout: archive
title: Zulip Chat Archive
permalink: /stream/348111-std4/topic/.E2.9C.94.20BEq.20nonsense.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/348111-std4/index.html">std4</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/348111-std4/topic/.E2.9C.94.20BEq.20nonsense.html">✔ BEq nonsense</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="303496874"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/348111-std4/topic/%E2%9C%94%20BEq%20nonsense/near/303496874" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wojciech Nawrocki <a href="https://leanprover-community.github.io/archive/stream/348111-std4/topic/.E2.9C.94.20BEq.20nonsense.html#303496874">(Oct 11 2022 at 18:35)</a>:</h4>
<p>Does anyone know which lemma proves this? Are we missing one? It seems like it should be a single line proof.</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">example</span> <span class="o">[</span><span class="n">BEq</span> <span class="n">α</span><span class="o">]</span> <span class="o">(</span><span class="n">a</span> <span class="n">a'</span> <span class="o">:</span> <span class="n">α</span><span class="o">)</span> <span class="o">(</span><span class="n">hEq</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">==</span> <span class="n">a'</span><span class="o">)</span> <span class="o">(</span><span class="n">hNe</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">!=</span> <span class="n">a'</span><span class="o">)</span> <span class="o">:</span> <span class="n">False</span> <span class="o">:=</span> <span class="kd">by</span>
</code></pre></div>



<a name="303497434"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/348111-std4/topic/%E2%9C%94%20BEq%20nonsense/near/303497434" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/348111-std4/topic/.E2.9C.94.20BEq.20nonsense.html#303497434">(Oct 11 2022 at 18:38)</a>:</h4>
<p>You should be able to use <a href="https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Eq_of_HEq#doc">docs4#Eq_of_HEq</a></p>



<a name="303497514"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/348111-std4/topic/%E2%9C%94%20BEq%20nonsense/near/303497514" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/348111-std4/topic/.E2.9C.94.20BEq.20nonsense.html#303497514">(Oct 11 2022 at 18:39)</a>:</h4>
<p>Of that's not there</p>



<a name="303497523"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/348111-std4/topic/%E2%9C%94%20BEq%20nonsense/near/303497523" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wojciech Nawrocki <a href="https://leanprover-community.github.io/archive/stream/348111-std4/topic/.E2.9C.94.20BEq.20nonsense.html#303497523">(Oct 11 2022 at 18:39)</a>:</h4>
<p><span class="user-mention silent" data-user-id="243562">Adam Topaz</span> <a href="#narrow/stream/348111-std4/topic/BEq.20nonsense/near/303497434">said</a>:</p>
<blockquote>
<p>You should be able to use <a href="https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Eq_of_HEq#doc">docs4#Eq_of_HEq</a></p>
</blockquote>
<p>Thanks, but this is not heq! In Lean 4 <code>==</code> means <code>BEq</code></p>



<a name="303497537"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/348111-std4/topic/%E2%9C%94%20BEq%20nonsense/near/303497537" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/348111-std4/topic/.E2.9C.94.20BEq.20nonsense.html#303497537">(Oct 11 2022 at 18:39)</a>:</h4>
<p>Bah</p>



<a name="303497790"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/348111-std4/topic/%E2%9C%94%20BEq%20nonsense/near/303497790" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> James Gallicchio <a href="https://leanprover-community.github.io/archive/stream/348111-std4/topic/.E2.9C.94.20BEq.20nonsense.html#303497790">(Oct 11 2022 at 18:40)</a>:</h4>
<p>Does that require <code>LawfulBEq</code>?</p>



<a name="303497793"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/348111-std4/topic/%E2%9C%94%20BEq%20nonsense/near/303497793" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/348111-std4/topic/.E2.9C.94.20BEq.20nonsense.html#303497793">(Oct 11 2022 at 18:40)</a>:</h4>
<p>this is false in general I think</p>



<a name="303497808"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/348111-std4/topic/%E2%9C%94%20BEq%20nonsense/near/303497808" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/348111-std4/topic/.E2.9C.94.20BEq.20nonsense.html#303497808">(Oct 11 2022 at 18:41)</a>:</h4>
<p>yeah exactly</p>



<a name="303497838"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/348111-std4/topic/%E2%9C%94%20BEq%20nonsense/near/303497838" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/348111-std4/topic/.E2.9C.94.20BEq.20nonsense.html#303497838">(Oct 11 2022 at 18:41)</a>:</h4>
<p><code>BEq</code> just gives you the function <code>==</code></p>



<a name="303497860"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/348111-std4/topic/%E2%9C%94%20BEq%20nonsense/near/303497860" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/348111-std4/topic/.E2.9C.94.20BEq.20nonsense.html#303497860">(Oct 11 2022 at 18:41)</a>:</h4>
<p>but a priori it has no relationship with <code>=</code></p>



<a name="303497876"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/348111-std4/topic/%E2%9C%94%20BEq%20nonsense/near/303497876" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wojciech Nawrocki <a href="https://leanprover-community.github.io/archive/stream/348111-std4/topic/.E2.9C.94.20BEq.20nonsense.html#303497876">(Oct 11 2022 at 18:41)</a>:</h4>
<p>I think it should be true by cases on bool, since <code>a != b ≜ !(a == b)</code></p>



<a name="303498035"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/348111-std4/topic/%E2%9C%94%20BEq%20nonsense/near/303498035" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wojciech Nawrocki <a href="https://leanprover-community.github.io/archive/stream/348111-std4/topic/.E2.9C.94.20BEq.20nonsense.html#303498035">(Oct 11 2022 at 18:42)</a>:</h4>
<p>I'm mostly wondering if this has a proof somewhere already since it's quite basic</p>



<a name="303498037"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/348111-std4/topic/%E2%9C%94%20BEq%20nonsense/near/303498037" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/348111-std4/topic/.E2.9C.94.20BEq.20nonsense.html#303498037">(Oct 11 2022 at 18:42)</a>:</h4>
<p>Oh <code>!=</code> is not <code>\neq</code></p>



<a name="303498191"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/348111-std4/topic/%E2%9C%94%20BEq%20nonsense/near/303498191" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> James Gallicchio <a href="https://leanprover-community.github.io/archive/stream/348111-std4/topic/.E2.9C.94.20BEq.20nonsense.html#303498191">(Oct 11 2022 at 18:44)</a>:</h4>
<p><span class="user-mention silent" data-user-id="128280">Wojciech Nawrocki</span> <a href="#narrow/stream/348111-std4/topic/BEq.20nonsense/near/303497876">said</a>:</p>
<blockquote>
<p>I think it should be true by cases on bool, since <code>a != b ≜ !(a == b)</code></p>
</blockquote>
<p>ah :p this might be a <code>cc</code> moment</p>



<a name="303498210"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/348111-std4/topic/%E2%9C%94%20BEq%20nonsense/near/303498210" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> James Gallicchio <a href="https://leanprover-community.github.io/archive/stream/348111-std4/topic/.E2.9C.94.20BEq.20nonsense.html#303498210">(Oct 11 2022 at 18:44)</a>:</h4>
<p>(<code>cc</code> still being unimplemented of course)</p>



<a name="303498229"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/348111-std4/topic/%E2%9C%94%20BEq%20nonsense/near/303498229" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/348111-std4/topic/.E2.9C.94.20BEq.20nonsense.html#303498229">(Oct 11 2022 at 18:44)</a>:</h4>
<p>this is an instance of <code>b = true -&gt; b ≠ false</code></p>



<a name="303498262"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/348111-std4/topic/%E2%9C%94%20BEq%20nonsense/near/303498262" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/348111-std4/topic/.E2.9C.94.20BEq.20nonsense.html#303498262">(Oct 11 2022 at 18:44)</a>:</h4>
<p>which I believe is a lemma that exists</p>



<a name="303498319"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/348111-std4/topic/%E2%9C%94%20BEq%20nonsense/near/303498319" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wojciech Nawrocki <a href="https://leanprover-community.github.io/archive/stream/348111-std4/topic/.E2.9C.94.20BEq.20nonsense.html#303498319">(Oct 11 2022 at 18:45)</a>:</h4>
<p>You mean <code>→ b ≠ false</code>?</p>



<a name="303498333"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/348111-std4/topic/%E2%9C%94%20BEq%20nonsense/near/303498333" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/348111-std4/topic/.E2.9C.94.20BEq.20nonsense.html#303498333">(Oct 11 2022 at 18:45)</a>:</h4>
<p>note that <code>hEq : a == a'</code> means <code>hEq : (a == a') = true</code></p>



<a name="303498530"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/348111-std4/topic/%E2%9C%94%20BEq%20nonsense/near/303498530" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/348111-std4/topic/.E2.9C.94.20BEq.20nonsense.html#303498530">(Oct 11 2022 at 18:46)</a>:</h4>
<p>oh no not quite, it's <code>b = true -&gt; !b ≠ true</code></p>



<a name="303499052"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/348111-std4/topic/%E2%9C%94%20BEq%20nonsense/near/303499052" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wojciech Nawrocki <a href="https://leanprover-community.github.io/archive/stream/348111-std4/topic/.E2.9C.94.20BEq.20nonsense.html#303499052">(Oct 11 2022 at 18:49)</a>:</h4>
<p>Ok i'll add that to <code>Logic.lean</code></p>



<a name="303499619"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/348111-std4/topic/%E2%9C%94%20BEq%20nonsense/near/303499619" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Notification Bot <a href="https://leanprover-community.github.io/archive/stream/348111-std4/topic/.E2.9C.94.20BEq.20nonsense.html#303499619">(Oct 11 2022 at 18:52)</a>:</h4>
<p><span class="user-mention silent" data-user-id="128280">Wojciech Nawrocki</span> has marked this topic as resolved.</p>



<a name="303502179"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/348111-std4/topic/%E2%9C%94%20BEq%20nonsense/near/303502179" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/348111-std4/topic/.E2.9C.94.20BEq.20nonsense.html#303502179">(Oct 11 2022 at 19:08)</a>:</h4>
<p>I would do it in the opposite order, which looks quite natural: <code>example : !b ↔ ¬b := by cases b &lt;;&gt; decide</code></p>



<a name="303502446"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/348111-std4/topic/%E2%9C%94%20BEq%20nonsense/near/303502446" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/348111-std4/topic/.E2.9C.94.20BEq.20nonsense.html#303502446">(Oct 11 2022 at 19:09)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">theorem</span> <span class="n">not_eq_true</span> <span class="o">:</span> <span class="bp">!</span><span class="n">b</span> <span class="bp">↔</span> <span class="bp">¬</span><span class="n">b</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">cases</span> <span class="n">b</span> <span class="bp">&lt;;&gt;</span> <span class="n">decide</span>

<span class="kd">example</span> <span class="o">[</span><span class="n">BEq</span> <span class="n">α</span><span class="o">]</span> <span class="o">(</span><span class="n">a</span> <span class="n">a'</span> <span class="o">:</span> <span class="n">α</span><span class="o">)</span> <span class="o">(</span><span class="n">hEq</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">==</span> <span class="n">a'</span><span class="o">)</span> <span class="o">(</span><span class="n">hNe</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">!=</span> <span class="n">a'</span><span class="o">)</span> <span class="o">:</span> <span class="n">False</span> <span class="o">:=</span>
  <span class="n">not_eq_true.1</span> <span class="n">hNe</span> <span class="n">hEq</span>
</code></pre></div>



<a name="303502646"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/348111-std4/topic/%E2%9C%94%20BEq%20nonsense/near/303502646" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wojciech Nawrocki <a href="https://leanprover-community.github.io/archive/stream/348111-std4/topic/.E2.9C.94.20BEq.20nonsense.html#303502646">(Oct 11 2022 at 19:10)</a>:</h4>
<p>I think the implicit insertion of <code>= true</code> is a bit confusing magic, so I wrote it as </p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">theorem</span> <span class="n">Bool.not_eq_true_iff_neq_true</span> <span class="o">{</span><span class="n">b</span> <span class="o">:</span> <span class="n">Bool</span><span class="o">}</span> <span class="o">:</span> <span class="o">(</span><span class="bp">!</span><span class="n">b</span><span class="o">)</span> <span class="bp">=</span> <span class="n">true</span> <span class="bp">↔</span> <span class="n">b</span> <span class="bp">≠</span> <span class="n">true</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">cases</span> <span class="n">b</span> <span class="bp">&lt;;&gt;</span> <span class="n">decide</span>
</code></pre></div>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>