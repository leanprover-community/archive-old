---
layout: archive
title: Zulip Chat Archive
permalink: /stream/348111-std4/topic/documentation.20efforts.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/348111-std4/index.html">std4</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/348111-std4/topic/documentation.20efforts.html">documentation efforts</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="304634804"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/348111-std4/topic/documentation%20efforts/near/304634804" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adrien Champion <a href="https://leanprover-community.github.io/archive/stream/348111-std4/topic/documentation.20efforts.html#304634804">(Oct 18 2022 at 08:44)</a>:</h4>
<p>I would be interested in contributing to std4 and I think (re-)writing documentation is a good place to start. We can discuss this during the mentoring sessions, but maybe mentors could point to places where better/additional doc would be useful</p>



<a name="304634906"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/348111-std4/topic/documentation%20efforts/near/304634906" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adrien Champion <a href="https://leanprover-community.github.io/archive/stream/348111-std4/topic/documentation.20efforts.html#304634906">(Oct 18 2022 at 08:45)</a>:</h4>
<p>And/or have github issues with a <code>doc</code> tag so that we can close them when they're done</p>



<a name="304801931"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/348111-std4/topic/documentation%20efforts/near/304801931" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adrien Champion <a href="https://leanprover-community.github.io/archive/stream/348111-std4/topic/documentation.20efforts.html#304801931">(Oct 18 2022 at 17:29)</a>:</h4>
<ul>
<li>[ ] add top-level module doc, including main definitions, possibly implementation details, and search-engine-related tags</li>
</ul>



<a name="306038476"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/348111-std4/topic/documentation%20efforts/near/306038476" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adrien Champion <a href="https://leanprover-community.github.io/archive/stream/348111-std4/topic/documentation.20efforts.html#306038476">(Oct 25 2022 at 14:16)</a>:</h4>
<p>Regarding documentation efforts, maybe it would be a good idea to <a href="https://github.com/leanprover/doc-gen4#usage">add <code>doc-gen4</code> to the <code>lakefile.lean</code></a>, so that we can build and inspect the doc as we improve it.</p>
<p>Should I open an issue and PR this?</p>



<a name="306039041"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/348111-std4/topic/documentation%20efforts/near/306039041" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adrien Champion <a href="https://leanprover-community.github.io/archive/stream/348111-std4/topic/documentation.20efforts.html#306039041">(Oct 25 2022 at 14:19)</a>:</h4>
<p>Actually, <code>doc-gen4</code> (and <code>std4</code> it seems) do not compile on macos M1, so maybe not</p>



<a name="306056590"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/348111-std4/topic/documentation%20efforts/near/306056590" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Henrik Böving <a href="https://leanprover-community.github.io/archive/stream/348111-std4/topic/documentation.20efforts.html#306056590">(Oct 25 2022 at 15:41)</a>:</h4>
<p>What's the errors?</p>



<a name="306061746"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/348111-std4/topic/documentation%20efforts/near/306061746" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adrien Champion <a href="https://leanprover-community.github.io/archive/stream/348111-std4/topic/documentation.20efforts.html#306061746">(Oct 25 2022 at 16:02)</a>:</h4>
<p>Here are the std4 errors, with <code>[...]</code> to remove similar errors so that it abides by Zulip's character constraints</p>
<div class="spoiler-block"><div class="spoiler-header">
<p>output</p>
</div><div class="spoiler-content" aria-hidden="true">
<p>Linking runLinter<br>
Building Std.Data.Nat.Lemmas<br>
error: &gt; /Users/adrien/.elan/toolchains/leanprover--lean4---nightly/bin/leanc -o ./build/bin/runLinter ./build/ir/scripts/runLinter.o ./build/ir/Std/Util/TermUnsafe.o ./build/ir/Std/Lean/NameMapAttribute.o ./build/ir/Std/Tactic/Lint/Basic.o ./build/ir/Std/Tactic/OpenPrivate.o ./build/ir/Std/Tactic/NoMatch.o ./build/ir/Std/Data/List/Init/Lemmas.o ./build/ir/Std/Data/Array/Init/Basic.o ./build/ir/Std/Data/Array/Basic.o ./build/ir/Std/Tactic/Lint/Misc.o ./build/ir/Std/Util/LibraryNote.o ./build/ir/Std/Tactic/Lint/Simp.o ./build/ir/Std/Tactic/Lint/Frontend.o ./build/ir/Std/Tactic/Lint.o -rdynamic<br>
error: stderr:<br>
ld64.lld: warning: /Users/adrien/.elan/toolchains/leanprover--lean4---nightly/lib/lean/libleancpp.a(expr_eq_fn.cpp.o) has architecture arm64 which is incompatible with target architecture x86_64<br>
ld64.lld: warning: /Users/adrien/.elan/toolchains/leanprover--lean4---nightly/lib/lean/libleancpp.a(init.cpp.o) has architecture arm64 which is incompatible with target architecture x86_64<br>
ld64.lld: warning: /Users/adrien/.elan/toolchains/leanprover--lean4---nightly/lib/lean/libInit.a(Init.o) has architecture arm64 which is incompatible with target architecture x86_64<br>
ld64.lld: warning: /Users/adrien/.elan/toolchains/leanprover--lean4---nightly/lib/lean/libInit.a(Basic.o) has architecture arm64 which is incompatible with target architecture x86_64<br>
ld64.lld: warning: /Users/adrien/.elan/toolchains/leanprover--lean4---nightly/lib/lean/libInit.a(Prelude.o) has architecture arm64 which is incompatible with target architecture x86_64<br>
ld64.lld: warning: /Users/adrien/.elan/toolchains/leanprover--lean4---nightly/lib/lean/libInit.a(QSort.o) has architecture arm64 which is incompatible with target architecture x86_64</p>
<p>[...]</p>
<p>ld64.lld: warning: /usr/lib/system/libsystem_kernel.dylib has version 12.6.0, which is newer than target minimum of 12.0.0<br>
ld64.lld: warning: /usr/lib/system/libsystem_platform.dylib has version 12.6.0, which is newer than target minimum of 12.0.0<br>
ld64.lld: warning: /usr/lib/system/libsystem_pthread.dylib has version 12.6.0, which is newer than target minimum of 12.0.0<br>
ld64.lld: error: undefined symbol: _lean_inc_ref_cold</p>
<blockquote>
<blockquote>
<blockquote>
<p>referenced by ./build/ir/scripts/runLinter.o:(symbol _l_liftExcept___at_readJsonFile___spec__1+0xba)<br>
referenced by ./build/ir/scripts/runLinter.o:(symbol _l_liftExcept___at_readJsonFile___spec__1+0xae)<br>
referenced by ./build/ir/scripts/runLinter.o:(symbol _lean_inc+0x1a)<br>
referenced 2482 more times</p>
</blockquote>
</blockquote>
</blockquote>
<p>ld64.lld: error: undefined symbol: _lean_alloc_small</p>
<blockquote>
<blockquote>
<blockquote>
<p>referenced by ./build/ir/scripts/runLinter.o:(symbol _l_liftExcept___at_readJsonFile___spec__1+0x87)<br>
referenced by ./build/ir/scripts/runLinter.o:(symbol _l_liftExcept___at_readJsonFile___spec__1+0x5e)<br>
referenced by ./build/ir/scripts/runLinter.o:(symbol _l_liftExcept___at_readJsonFile___spec__2___rarg+0x87)<br>
referenced 1462 more times</p>
</blockquote>
</blockquote>
</blockquote>
<p>ld64.lld: error: undefined symbol: _lean_dec_ref_cold</p>
<blockquote>
<blockquote>
<blockquote>
<p>referenced by ./build/ir/scripts/runLinter.o:(symbol _l_liftExcept___at_readJsonFile___spec__2___rarg___boxed+0x32)<br>
referenced by ./build/ir/scripts/runLinter.o:(symbol _l_readJsonFile___rarg+0x37f)<br>
referenced by ./build/ir/scripts/runLinter.o:(symbol _l_readJsonFile___rarg+0x36a)<br>
referenced 3992 more times</p>
</blockquote>
</blockquote>
</blockquote>
<p>[...]</p>
<p>ld64.lld: error: too many errors emitted, stopping now (use --error-limit=0 to see all errors)<br>
clang: error: linker command failed with exit code 1 (use -v to see invocation)<br>
error: external command <code>/Users/adrien/.elan/toolchains/leanprover--lean4---nightly/bin/leanc</code> exited with code 1<br>
error: &gt; LEAN_PATH=./build/lib DYLD_LIBRARY_PATH=/Users/adrien/.elan/toolchains/leanprover--lean4---nightly/lib:./build/lib /Users/adrien/.elan/toolchains/leanprover--lean4---nightly/bin/lean -DwarningAsError=true -Dlinter.missingDocs=true ./././Std/Data/Nat/Lemmas.lean -R ././. -o ./build/lib/Std/Data/Nat/Lemmas.olean -i ./build/lib/Std/Data/Nat/Lemmas.ilean -c ./build/ir/Std/Data/Nat/Lemmas.c<br>
error: stdout:<br>
./././Std/Data/Nat/Lemmas.lean:152:42: error: no goals to be solved<br>
./././Std/Data/Nat/Lemmas.lean:157:26: error: application type mismatch<br>
  Nat.le_antisymm h₁<br>
argument<br>
  h₁<br>
has type<br>
  a ≤ b : Prop<br>
but is expected to have type<br>
  min a b ≤ min b a : Prop<br>
./././Std/Data/Nat/Lemmas.lean:158:23: error: application type mismatch<br>
  not_or_intro h₁<br>
argument<br>
  h₁<br>
has type<br>
  a ≤ b : Prop<br>
but is expected to have type<br>
  ¬?m.8781 : Prop<br>
./././Std/Data/Nat/Lemmas.lean:154:62: error: unsolved goals<br>
case pos<br>
a b : Nat<br>
h₁ : ¬a ≤ b<br>
h₂ : b ≤ a<br>
⊢ min a b = min b a</p>
<p>case neg<br>
a b : Nat<br>
h₁ : ¬a ≤ b<br>
h₂ : ¬b ≤ a<br>
⊢ min a b = min b a<br>
./././Std/Data/Nat/Lemmas.lean:162:25: error: application type mismatch<br>
  Nat.le_of_not_le h<br>
argument<br>
  h<br>
has type<br>
  a ≤ b : Prop<br>
but is expected to have type<br>
  ¬a ≤ min a b : Prop<br>
./././Std/Data/Nat/Lemmas.lean:160:59: error: unsolved goals<br>
case neg<br>
a b : Nat<br>
h : ¬a ≤ b<br>
⊢ min a b ≤ a<br>
./././Std/Data/Nat/Lemmas.lean:164:71: error: unsolved goals<br>
a b : Nat<br>
h : a ≤ b<br>
⊢ min a b = a<br>
./././Std/Data/Nat/Lemmas.lean:176:26: error: application type mismatch<br>
  Nat.le_antisymm h₂<br>
argument<br>
  h₂<br>
has type<br>
  b ≤ a : Prop<br>
but is expected to have type<br>
  max a b ≤ max b a : Prop<br>
./././Std/Data/Nat/Lemmas.lean:177:23: error: application type mismatch<br>
  not_or_intro h₁<br>
argument<br>
  h₁<br>
has type<br>
  a ≤ b : Prop<br>
but is expected to have type<br>
  ¬?m.10471 : Prop<br>
./././Std/Data/Nat/Lemmas.lean:173:62: error: unsolved goals<br>
case pos<br>
a b : Nat<br>
h₁ : ¬a ≤ b<br>
h₂ : b ≤ a<br>
⊢ max a b = max b a</p>
<p>case neg<br>
a b : Nat<br>
h₁ : ¬a ≤ b<br>
h₂ : ¬b ≤ a<br>
⊢ max a b = max b a<br>
./././Std/Data/Nat/Lemmas.lean:179:72: error: unsolved goals<br>
a b : Nat<br>
h : a ≤ b<br>
⊢ max a b = b<br>
./././Std/Data/Nat/Lemmas.lean:187:32: error: tactic 'split' failed<br>
x y : Nat<br>
⊢ min (succ x) (succ y) = succ (min x y)<br>
./././Std/Data/Nat/Lemmas.lean:190:12: error: tactic 'split' failed<br>
n m : Nat<br>
⊢ n - m = n - instMinNat.1 n m<br>
error: external command <code>/Users/adrien/.elan/toolchains/leanprover--lean4---nightly/bin/lean</code> exited with code 1</p>
</div></div>



<a name="306087801"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/348111-std4/topic/documentation%20efforts/near/306087801" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adrien Champion <a href="https://leanprover-community.github.io/archive/stream/348111-std4/topic/documentation.20efforts.html#306087801">(Oct 25 2022 at 17:48)</a>:</h4>
<p>So this comes from running on macos M1, where Lean's linking fails. This causes failures on FFI, which Std4 does not have, but <a href="https://github.com/leanprover/std4/blob/main/lakefile.lean">the linter is a default target</a> and does trigger this problem</p>



<a name="306097038"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/348111-std4/topic/documentation%20efforts/near/306097038" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adrien Champion <a href="https://leanprover-community.github.io/archive/stream/348111-std4/topic/documentation.20efforts.html#306097038">(Oct 25 2022 at 18:35)</a>:</h4>
<p><code>lake build Std</code> works fine, as pointed out by Mac</p>



<a name="306178711"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/348111-std4/topic/documentation%20efforts/near/306178711" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adrien Champion <a href="https://leanprover-community.github.io/archive/stream/348111-std4/topic/documentation.20efforts.html#306178711">(Oct 26 2022 at 07:22)</a>:</h4>
<p>See also <a href="#narrow/stream/270676-lean4/topic/elan.20toolchains.20broken.20on.20macos.20M1/near/306122168">https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/elan.20toolchains.20broken.20on.20macos.20M1/near/306122168</a></p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>