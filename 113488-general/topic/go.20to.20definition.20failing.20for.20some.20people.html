---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/go.20to.20definition.20failing.20for.20some.20people.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/go.20to.20definition.20failing.20for.20some.20people.html">go to definition failing for some people</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="226025924"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/go%20to%20definition%20failing%20for%20some%20people/near/226025924" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/go.20to.20definition.20failing.20for.20some.20people.html#226025924">(Feb 11 2021 at 17:20)</a>:</h4>
<p>I am teaching right now. For two students, clicking on "go to definition" (the little injective hook-arrow) in the infoview simply doesn't work. I have no idea how to debug. They're live streaming their screens. Is this a known issue?</p>



<a name="226027309"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/go%20to%20definition%20failing%20for%20some%20people/near/226027309" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/go.20to.20definition.20failing.20for.20some.20people.html#226027309">(Feb 11 2021 at 17:28)</a>:</h4>
<p>I haven't seen this before fwiw</p>



<a name="226027699"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/go%20to%20definition%20failing%20for%20some%20people/near/226027699" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/go.20to.20definition.20failing.20for.20some.20people.html#226027699">(Feb 11 2021 at 17:31)</a>:</h4>
<p>Is there a <a href="https://leanprover-community.github.io/mwe.html">#mwe</a>?</p>



<a name="226029353"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/go%20to%20definition%20failing%20for%20some%20people/near/226029353" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/go.20to.20definition.20failing.20for.20some.20people.html#226029353">(Feb 11 2021 at 17:43)</a>:</h4>
<p>Doesn't work for me at all, on windows, are they also on windows?</p>



<a name="226031553"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/go%20to%20definition%20failing%20for%20some%20people/near/226031553" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/go.20to.20definition.20failing.20for.20some.20people.html#226031553">(Feb 11 2021 at 17:56)</a>:</h4>
<p><span class="user-mention" data-user-id="127136">@Alex J. Best</span> if you hit ctrl+shift+p and run "toggle developer tools", do you see any errors in the console when you try to go to definition in the widget infoview?</p>



<a name="226031701"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/go%20to%20definition%20failing%20for%20some%20people/near/226031701" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/go.20to.20definition.20failing.20for.20some.20people.html#226031701">(Feb 11 2021 at 17:57)</a>:</h4>
<p>Trying it now <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span> as expected it seems to be some funny buisness with backslashes </p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">console.ts</span><span class="o">:</span><span class="mi">137</span> <span class="o">[</span><span class="n">Extension</span> <span class="n">Host</span><span class="o">]</span> <span class="n">rejected</span> <span class="n">promise</span> <span class="n">not</span> <span class="n">handled</span> <span class="n">within</span> <span class="mi">1</span> <span class="n">second</span><span class="o">:</span> <span class="n">Error</span><span class="o">:</span> <span class="n">cannot</span> <span class="kn">open</span> <span class="n">C</span><span class="o">:</span><span class="bp">%</span><span class="mi">5</span><span class="n">CUsers</span><span class="bp">%</span><span class="mi">5</span><span class="n">Calexj</span><span class="bp">%</span><span class="mi">5</span><span class="n">C.elan</span><span class="bp">%</span><span class="mi">5</span><span class="n">Ctoolchains</span><span class="bp">%</span><span class="mi">5</span><span class="n">Cleanprover</span><span class="bp">-</span><span class="n">community</span><span class="bp">-</span><span class="n">lean</span><span class="bp">-</span><span class="mi">3</span><span class="bp">.</span><span class="mi">26</span><span class="bp">.</span><span class="mi">0</span><span class="bp">%</span><span class="mi">5</span><span class="n">Clib</span><span class="bp">%</span><span class="mi">5</span><span class="n">Clean</span><span class="bp">%</span><span class="mi">5</span><span class="n">Clibrary</span><span class="bp">%</span><span class="mi">5</span><span class="n">Cinit</span><span class="bp">%</span><span class="mi">5</span><span class="n">Ccore.lean.</span> <span class="n">Detail</span><span class="o">:</span> <span class="n">Unable</span> <span class="n">to</span> <span class="n">resolve</span> <span class="n">resource</span> <span class="n">C</span><span class="o">:</span><span class="bp">%</span><span class="mi">5</span><span class="n">CUsers</span><span class="bp">%</span><span class="mi">5</span><span class="n">Calexj</span><span class="bp">%</span><span class="mi">5</span><span class="n">C.elan</span><span class="bp">%</span><span class="mi">5</span><span class="n">Ctoolchains</span><span class="bp">%</span><span class="mi">5</span><span class="n">Cleanprover</span><span class="bp">-</span><span class="n">community</span><span class="bp">-</span><span class="n">lean</span><span class="bp">-</span><span class="mi">3</span><span class="bp">.</span><span class="mi">26</span><span class="bp">.</span><span class="mi">0</span><span class="bp">%</span><span class="mi">5</span><span class="n">Clib</span><span class="bp">%</span><span class="mi">5</span><span class="n">Clean</span><span class="bp">%</span><span class="mi">5</span><span class="n">Clibrary</span><span class="bp">%</span><span class="mi">5</span><span class="n">Cinit</span><span class="bp">%</span><span class="mi">5</span><span class="n">Ccore.lean</span>
</code></pre></div>



<a name="226032457"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/go%20to%20definition%20failing%20for%20some%20people/near/226032457" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/go.20to.20definition.20failing.20for.20some.20people.html#226032457">(Feb 11 2021 at 18:02)</a>:</h4>
<p>Interesting... I wonder why there's a difference from the usual go to definition function.</p>



<a name="226032726"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/go%20to%20definition%20failing%20for%20some%20people/near/226032726" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/go.20to.20definition.20failing.20for.20some.20people.html#226032726">(Feb 11 2021 at 18:04)</a>:</h4>
<p>Do you know if I need to setup the vscode extension for development to set breakpoints in vscode?</p>



<a name="226034133"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/go%20to%20definition%20failing%20for%20some%20people/near/226034133" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/go.20to.20definition.20failing.20for.20some.20people.html#226034133">(Feb 11 2021 at 18:13)</a>:</h4>
<p>I think you do, yes - then you launch a new vscode instance from the one you develop the extension in</p>



<a name="226038326"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/go%20to%20definition%20failing%20for%20some%20people/near/226038326" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/go.20to.20definition.20failing.20for.20some.20people.html#226038326">(Feb 11 2021 at 18:44)</a>:</h4>
<p>Ok on windows it seems the URI scheme when we get to <a href="https://github.com/leanprover/vscode-lean/blob/master/src/infoview.ts#L285">https://github.com/leanprover/vscode-lean/blob/master/src/infoview.ts#L285</a> is set to "C" instead of "file" (<a href="https://docs.microsoft.com/en-us/dotnet/api/system.uri.scheme?view=net-5.0">https://docs.microsoft.com/en-us/dotnet/api/system.uri.scheme?view=net-5.0</a>) it seems something is parsing "C:/..." as a uri scheme instead of a drive</p>



<a name="226039113"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/go%20to%20definition%20failing%20for%20some%20people/near/226039113" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/go.20to.20definition.20failing.20for.20some.20people.html#226039113">(Feb 11 2021 at 18:50)</a>:</h4>
<p>And that function, <code>revealEditorPosition</code> seems to be called from <a href="https://github.com/leanprover/vscode-lean/blob/03c9fecedbaca796fba8dfff1433a197a7399480/src/infoview.ts#L203">here</a>, being passed <code>Uri.parse(message.loc.file_name)</code>.</p>



<a name="226039219"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/go%20to%20definition%20failing%20for%20some%20people/near/226039219" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/go.20to.20definition.20failing.20for.20some.20people.html#226039219">(Feb 11 2021 at 18:51)</a>:</h4>
<p>So is Lean returning <code>file_name</code>s differently for the usual go to definition command and the go to definition button in the widget?</p>



<a name="226040145"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/go%20to%20definition%20failing%20for%20some%20people/near/226040145" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/go.20to.20definition.20failing.20for.20some.20people.html#226040145">(Feb 11 2021 at 18:57)</a>:</h4>
<p>I think it should use <code>Uri.file</code> instead of <code>Uri.parse</code></p>



<a name="226040337"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/go%20to%20definition%20failing%20for%20some%20people/near/226040337" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/go.20to.20definition.20failing.20for.20some.20people.html#226040337">(Feb 11 2021 at 18:59)</a>:</h4>
<p>Building with that  change it works for me (as does the usual go to definition via F12)</p>



<a name="226041093"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/go%20to%20definition%20failing%20for%20some%20people/near/226041093" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/go.20to.20definition.20failing.20for.20some.20people.html#226041093">(Feb 11 2021 at 19:03)</a>:</h4>
<p>Oh yeah, it looks like <code>Uri.file</code> is used almost everywhere else in the extension. There are a few instances of <code>Uri.parse</code> in <code>src/docview.ts</code>: are there issues there on Windows as well?</p>



<a name="226041693"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/go%20to%20definition%20failing%20for%20some%20people/near/226041693" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/go.20to.20definition.20failing.20for.20some.20people.html#226041693">(Feb 11 2021 at 19:07)</a>:</h4>
<p><a href="https://github.com/leanprover/vscode-lean/pull/258">https://github.com/leanprover/vscode-lean/pull/258</a></p>



<a name="226041701"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/go%20to%20definition%20failing%20for%20some%20people/near/226041701" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/go.20to.20definition.20failing.20for.20some.20people.html#226041701">(Feb 11 2021 at 19:07)</a>:</h4>
<p>I'll look now</p>



<a name="226041931"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/go%20to%20definition%20failing%20for%20some%20people/near/226041931" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/go.20to.20definition.20failing.20for.20some.20people.html#226041931">(Feb 11 2021 at 19:09)</a>:</h4>
<p>I also think upstream <a href="https://github.com/microsoft/vscode-uri/pull/12">https://github.com/microsoft/vscode-uri/pull/12</a> might fix this too, but I have no idea how to tell when / if that will make it to a vscode release (or if it has already)</p>



<a name="226043342"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/go%20to%20definition%20failing%20for%20some%20people/near/226043342" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/go.20to.20definition.20failing.20for.20some.20people.html#226043342">(Feb 11 2021 at 19:18)</a>:</h4>
<p>I think I was looking at making a change in the other direction at one point, Uri.file doesn't work on unsaved buffers as far as I remember</p>



<a name="226043838"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/go%20to%20definition%20failing%20for%20some%20people/near/226043838" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/go.20to.20definition.20failing.20for.20some.20people.html#226043838">(Feb 11 2021 at 19:21)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> I guess it may be too late now for your course, but Gabriel just released vscode-lean 0.16.24 which includes this fix.</p>



<a name="226044145"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/go%20to%20definition%20failing%20for%20some%20people/near/226044145" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/go.20to.20definition.20failing.20for.20some.20people.html#226044145">(Feb 11 2021 at 19:23)</a>:</h4>
<p><span class="user-mention silent" data-user-id="123965">Bryan Gin-ge Chen</span> <a href="#narrow/stream/113488-general/topic/go.20to.20definition.20failing.20for.20some.20people/near/226041093">said</a>:</p>
<blockquote>
<p>Oh yeah, it looks like <code>Uri.file</code> is used almost everywhere else in the extension. There are a few instances of <code>Uri.parse</code> in <code>src/docview.ts</code>: are there issues there on Windows as well?</p>
</blockquote>
<p>what is doc view used for ? Is it that nice thing where you can view a tutorial in vscode as a separate editor pane, if so can someone point me to where I can set that up (I've looked to no avail!)</p>



<a name="226044843"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/go%20to%20definition%20failing%20for%20some%20people/near/226044843" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/go.20to.20definition.20failing.20for.20some.20people.html#226044843">(Feb 11 2021 at 19:27)</a>:</h4>
<p>Ah, got it, its built in to the extension lol!</p>



<a name="226044848"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/go%20to%20definition%20failing%20for%20some%20people/near/226044848" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/go.20to.20definition.20failing.20for.20some.20people.html#226044848">(Feb 11 2021 at 19:27)</a>:</h4>
<p>Yep, I think if you hit ctrl+shift+p and search for "Lean: open documentation view" it should open a panel with some links you can try.</p>



<a name="226045241"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/go%20to%20definition%20failing%20for%20some%20people/near/226045241" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/go.20to.20definition.20failing.20for.20some.20people.html#226045241">(Feb 11 2021 at 19:30)</a>:</h4>
<p>Yeah they seem to work fine as-is.</p>



<a name="226045292"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/go%20to%20definition%20failing%20for%20some%20people/near/226045292" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/go.20to.20definition.20failing.20for.20some.20people.html#226045292">(Feb 11 2021 at 19:30)</a>:</h4>
<p><span class="user-mention silent" data-user-id="310045">Eric Wieser</span> <a href="#narrow/stream/113488-general/topic/go.20to.20definition.20failing.20for.20some.20people/near/226043342">said</a>:</p>
<blockquote>
<p>I think I was looking at making a change in the other direction at one point, Uri.file doesn't work on unsaved buffers as far as I remember</p>
</blockquote>
<p>Do you mean completely new buffers, or just any buffers with unsaved changes in?</p>



<a name="226056125"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/go%20to%20definition%20failing%20for%20some%20people/near/226056125" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/go.20to.20definition.20failing.20for.20some.20people.html#226056125">(Feb 11 2021 at 20:55)</a>:</h4>
<p>Completely new buffers</p>



<a name="226056228"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/go%20to%20definition%20failing%20for%20some%20people/near/226056228" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/go.20to.20definition.20failing.20for.20some.20people.html#226056228">(Feb 11 2021 at 20:56)</a>:</h4>
<p>In particular, <code>try this</code> does not work in those buffers</p>



<a name="226056312"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/go%20to%20definition%20failing%20for%20some%20people/near/226056312" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/go.20to.20definition.20failing.20for.20some.20people.html#226056312">(Feb 11 2021 at 20:57)</a>:</h4>
<p>And nor do <code>\</code>-inputs until you leave the new buffer and reenter it, although that's unlikely to be related to URIs</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>