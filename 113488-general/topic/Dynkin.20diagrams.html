---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/Dynkin.20diagrams.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Dynkin.20diagrams.html">Dynkin diagrams</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="245950382"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Dynkin%20diagrams/near/245950382" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Dynkin.20diagrams.html#245950382">(Jul 14 2021 at 12:05)</a>:</h4>
<p>I just spent the morning messing around with our VS code widget for the first time. I can't really justify spending any more time on this since it's just a toy but I thought I'd share what I have in case someone else fancies picking up where I've left off.</p>



<a name="245950452"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Dynkin%20diagrams/near/245950452" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Dynkin.20diagrams.html#245950452">(Jul 14 2021 at 12:05)</a>:</h4>
<p>The following gist <a href="https://gist.github.com/ocfnash/fb61a17d0f1598edcc752999f17b70c6">https://gist.github.com/ocfnash/fb61a17d0f1598edcc752999f17b70c6</a> (which works against Mathlib master) allows you to create pictures like this:</p>



<a name="245950508"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Dynkin%20diagrams/near/245950508" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Dynkin.20diagrams.html#245950508">(Jul 14 2021 at 12:06)</a>:</h4>
<p><a href="/user_uploads/3121/F8fRsG1l66vxsFAs_DWkrzXA/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/3121/F8fRsG1l66vxsFAs_DWkrzXA/image.png" title="image.png"><img src="/user_uploads/3121/F8fRsG1l66vxsFAs_DWkrzXA/image.png"></a></div>



<a name="245950541"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Dynkin%20diagrams/near/245950541" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Dynkin.20diagrams.html#245950541">(Jul 14 2021 at 12:06)</a>:</h4>
<p>Perhaps some small room for improvement when it comes to styling ;-)</p>



<a name="245950719"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Dynkin%20diagrams/near/245950719" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Dynkin.20diagrams.html#245950719">(Jul 14 2021 at 12:08)</a>:</h4>
<p>Just to emphasise the point: this is Lean reading our Mathlib definition for the Dynkin diagram of E₈ and rendering it.</p>



<a name="245952422"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Dynkin%20diagrams/near/245952422" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Dynkin.20diagrams.html#245952422">(Jul 14 2021 at 12:26)</a>:</h4>
<p>I thought about this when looking at your PR, but thought "there's no way Oliver will want to spend the time on that"!</p>



<a name="245952575"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Dynkin%20diagrams/near/245952575" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Dynkin.20diagrams.html#245952575">(Jul 14 2021 at 12:28)</a>:</h4>
<p>Is there a way to tell lean "use this widget view in the goal state"?</p>



<a name="245952627"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Dynkin%20diagrams/near/245952627" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Dynkin.20diagrams.html#245952627">(Jul 14 2021 at 12:29)</a>:</h4>
<p><span class="user-mention silent" data-user-id="310045">Eric Wieser</span> <a href="#narrow/stream/113488-general/topic/Dynkin.20diagrams/near/245952575">said</a>:</p>
<blockquote>
<p>Is there a way to tell lean "use this widget view in the goal state"?</p>
</blockquote>
<p>Not at the moment.  But the goal state is defined in mathlib, so you can contribute a PR. <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span></p>



<a name="245953676"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Dynkin%20diagrams/near/245953676" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Dynkin.20diagrams.html#245953676">(Jul 14 2021 at 12:39)</a>:</h4>
<p>you can use a custom tactic mode</p>



<a name="245953730"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Dynkin%20diagrams/near/245953730" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Dynkin.20diagrams.html#245953730">(Jul 14 2021 at 12:39)</a>:</h4>
<p>Another thing that would be cool would be to somehow take the output of a #html command and insert it into doc-gen - or even allow docstrings to contain such a command which is parsed and executed by doc-gen</p>



<a name="245998857"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Dynkin%20diagrams/near/245998857" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Dynkin.20diagrams.html#245998857">(Jul 14 2021 at 18:17)</a>:</h4>
<p>There's a lean4 example that adds a DSL for html, <a href="https://github.com/leanprover/lean4/blob/master/tests/playground/webserver/Webserver.lean#L162-L165">https://github.com/leanprover/lean4/blob/master/tests/playground/webserver/Webserver.lean#L162-L165</a>.</p>
<p>How hard would it be to write an HTML parser in lean3 meta? I know it's harder than the lean4 approach, and I think <a href="https://leanprover-community.github.io/mathlib_docs/find/lean.parser">docs#lean.parser</a> isn't up to the job, but presumably <a href="https://leanprover-community.github.io/mathlib_docs/find/parser">docs#parser</a> would be.</p>
<p>I don't think we can support that syntax in lean3, but something like <code>html!"&lt;div&gt;${some_var}&lt;/div&gt;"</code> would be almost as good.</p>



<a name="246024368"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Dynkin%20diagrams/near/246024368" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Dynkin.20diagrams.html#246024368">(Jul 14 2021 at 21:30)</a>:</h4>
<p>Oh wow, Lean 4 really is full of treats. I have no idea how hard it would be to do something along the lines of what you suggest in Lean 3.</p>



<a name="246034499"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Dynkin%20diagrams/near/246034499" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Dynkin.20diagrams.html#246034499">(Jul 14 2021 at 23:24)</a>:</h4>
<p>There is a <code>format!</code> macro in lean 3 that does a simpler version of this</p>



<a name="246040231"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Dynkin%20diagrams/near/246040231" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Dynkin.20diagrams.html#246040231">(Jul 15 2021 at 00:53)</a>:</h4>
<p>The <code>format!</code> does parsing character by character using pattern matching, which feels way more painful than a monadic approach using <a href="https://leanprover-community.github.io/mathlib_docs/find/parser">docs#parser</a></p>



<a name="246041221"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Dynkin%20diagrams/near/246041221" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Dynkin.20diagrams.html#246041221">(Jul 15 2021 at 01:13)</a>:</h4>
<p>you sure about that?</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">meta</span> <span class="kd">def</span> <span class="n">foo</span> <span class="o">(</span><span class="n">baz</span> <span class="o">:</span> <span class="n">format</span><span class="o">)</span> <span class="o">:=</span> <span class="n">format</span><span class="bp">!</span><span class="s2">"bla {baz}"</span>
<span class="k">#print</span> <span class="n">foo</span>
<span class="c1">-- meta def foo : format → format :=</span>
<span class="c1">-- λ (baz : format), id_rhs format (to_fmt "bla " ++ to_fmt baz ++ to_fmt "")</span>
</code></pre></div>
<p>It uses character parsing in order to parse the expression, but the generated code is just string appends</p>



<a name="246041275"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Dynkin%20diagrams/near/246041275" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Dynkin.20diagrams.html#246041275">(Jul 15 2021 at 01:15)</a>:</h4>
<p>In this case you would be using a <code>format!</code> like macro for the frontend, which uses <a href="https://leanprover-community.github.io/mathlib_docs/find/parser">docs#parser</a> to parse the expression and produces appropriate applications of html constructors</p>



<a name="246041294"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Dynkin%20diagrams/near/246041294" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Dynkin.20diagrams.html#246041294">(Jul 15 2021 at 01:15)</a>:</h4>
<p><code>format!</code> doesn't need any fancy parsing because it's just looking for uses of <code>{</code></p>



<a name="246041391"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Dynkin%20diagrams/near/246041391" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Dynkin.20diagrams.html#246041391">(Jul 15 2021 at 01:18)</a>:</h4>
<p>I think I meant to say what you said. Yes, the parser should be building a pexpr not an html object</p>



<a name="257005783"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Dynkin%20diagrams/near/257005783" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wojciech Nawrocki <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Dynkin.20diagrams.html#257005783">(Oct 11 2021 at 03:06)</a>:</h4>
<p>Hello, I ported this to Lean 4 :) The server-side code is <a href="https://github.com/Vtec234/lean4/commit/1b07045f1964afe3736817d913d0be4d24b3394f#diff-dff28f769417890811bff74122dbf867344a56b64666612cb176724bb09923df">here</a> and it looks like <a href="/user_uploads/3121/Hs0Tb1JpdvmPUkSU4_1Il5z-/screenshot.png">this</a>. PR TBD</p>
<div class="message_inline_image"><a href="/user_uploads/3121/Hs0Tb1JpdvmPUkSU4_1Il5z-/screenshot.png" title="this"><img src="/user_uploads/3121/Hs0Tb1JpdvmPUkSU4_1Il5z-/screenshot.png"></a></div>



<a name="257034809"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Dynkin%20diagrams/near/257034809" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Dynkin.20diagrams.html#257034809">(Oct 11 2021 at 09:10)</a>:</h4>
<p>Nice work!</p>



<a name="267379767"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Dynkin%20diagrams/near/267379767" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Dynkin.20diagrams.html#267379767">(Jan 09 2022 at 21:57)</a>:</h4>
<p>Do you think we could adapt this to Hasse diagrams (representing orders)?</p>



<a name="267418375"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Dynkin%20diagrams/near/267418375" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Dynkin.20diagrams.html#267418375">(Jan 10 2022 at 10:10)</a>:</h4>
<p>It could certainly be done for appropriate values of "we".</p>



<a name="267418585"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Dynkin%20diagrams/near/267418585" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Dynkin.20diagrams.html#267418585">(Jan 10 2022 at 10:12)</a>:</h4>
<p>Am I right in saying that drawing a hasse diagrams is essentially just a task of drawing a directed graph from a boolean adjacency matrix?</p>



<a name="267418654"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Dynkin%20diagrams/near/267418654" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Dynkin.20diagrams.html#267418654">(Jan 10 2022 at 10:13)</a>:</h4>
<p>In which case, my response would probably be "just output some stuff for graphviz, because graph layout is hard and probably out of scope"</p>



<a name="267420251"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Dynkin%20diagrams/near/267420251" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Dynkin.20diagrams.html#267420251">(Jan 10 2022 at 10:29)</a>:</h4>
<p>For import graphs we have a super simple implementation of graphviz output at <a href="https://github.com/alexjbest/dag-tools/blob/master/src/dag.lean#L39">https://github.com/alexjbest/dag-tools/blob/master/src/dag.lean#L39</a><br>
It would be really really cool if it was possible to load external js in the widget view to render this automatically, but unfortunately this seems quite hard due to various security type features of vscodes web views</p>



<a name="267423685"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Dynkin%20diagrams/near/267423685" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Dynkin.20diagrams.html#267423685">(Jan 10 2022 at 10:59)</a>:</h4>
<p>Outputting stuff for graphviz should work out. Is going through the adjacency relation how the Dynkin stuff works?</p>



<a name="267425829"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Dynkin%20diagrams/near/267425829" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Dynkin.20diagrams.html#267425829">(Jan 10 2022 at 11:18)</a>:</h4>
<p>Sort of but it's pretty hacky. The function <a href="https://gist.github.com/ocfnash/fb61a17d0f1598edcc752999f17b70c6#file-render-dynkin-lean-L73">get_edge_html</a> consumes a pair of natural numbers representing two nodes and returns a list of edges (which in this case is always of length 0 or 1).</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>