---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/how.20do.20I.20step.20through.20proofs.3F.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/how.20do.20I.20step.20through.20proofs.3F.html">how do I step through proofs?</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="191178953"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/how%20do%20I%20step%20through%20proofs%3F/near/191178953" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Dan Abolafia <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/how.20do.20I.20step.20through.20proofs.3F.html#191178953">(Mar 19 2020 at 21:41)</a>:</h4>
<p>I want to be able to step through the type checker on a proof the same way I could step through the execution of a program in a debugger. When reading a proof on paper, there is uncertainty about what exactly is going on and the meaning of symbols. In principle, the benefit of computer proofs is that this ambiguity goes away. I've been trying to understand the proofs in mathlib. For instance, the proof that sqrt(2) is irrational, and the proof that the reals are uncountable. I have VSCode setup with lean, and see the goal outputs and types when I put my cursor at places in these proofs. I'm finding that I'm still largely guessing at what each line is doing. In the end it seems no different than reading a proof on paper. I'm wondering if Lean provides any additional debugger tools that let me step through every single step the type checker goes through?</p>



<a name="191188797"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/how%20do%20I%20step%20through%20proofs%3F/near/191188797" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/how.20do.20I.20step.20through.20proofs.3F.html#191188797">(Mar 19 2020 at 23:49)</a>:</h4>
<p>Perhaps <code>#explode</code> might help break the proof down a bit more</p>



<a name="191207489"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/how%20do%20I%20step%20through%20proofs%3F/near/191207489" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/how.20do.20I.20step.20through.20proofs.3F.html#191207489">(Mar 20 2020 at 07:02)</a>:</h4>
<p>If proofs are written in tactic mode then it's easy to step through them. If they're in term mode, or in tactic mode but with semicolon separators, then it's harder but you can often find out more by deleting terms and replacing them with a <code>_</code>, which can sometimes persuade lean to tell you the type of the term which is supposed to go in the hole.</p>



<a name="191208691"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/how%20do%20I%20step%20through%20proofs%3F/near/191208691" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/how.20do.20I.20step.20through.20proofs.3F.html#191208691">(Mar 20 2020 at 07:29)</a>:</h4>
<p>My understanding of the question is that he is not happy with the level of detail provided by tactic proofs</p>



<a name="192135361"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/how%20do%20I%20step%20through%20proofs%3F/near/192135361" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Dan Abolafia <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/how.20do.20I.20step.20through.20proofs.3F.html#192135361">(Mar 28 2020 at 18:20)</a>:</h4>
<p><code>#explode</code> is helpful, but it is not interactive. I have to manually explode every definition used in the proof. Yes I wish it were possible to step through tactic meta programming, as well as see the proof checker state at every step, analogous to seeing all the local variable state in a debugger. That would at least allow me to figure out exactly what any line of code does in principle, though it may be very tedious.</p>



<a name="192135662"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/how%20do%20I%20step%20through%20proofs%3F/near/192135662" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Andrew Ashworth <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/how.20do.20I.20step.20through.20proofs.3F.html#192135662">(Mar 28 2020 at 18:28)</a>:</h4>
<p>When is Metamath proof explorer getting ported to Lean? :)</p>



<a name="192144997"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/how%20do%20I%20step%20through%20proofs%3F/near/192144997" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/how.20do.20I.20step.20through.20proofs.3F.html#192144997">(Mar 28 2020 at 22:40)</a>:</h4>
<p>This is a good question; I don't know how to reasonably support an explorer type interface to <code>#explode</code> using the tactic / vscode tricks available to us in lean. We could always generate tens of thousands of html files like metamath does, but I think it would be much more appropriate for lean to have some pull based API where the pages are only constructed as they are requested.</p>



<a name="192145518"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/how%20do%20I%20step%20through%20proofs%3F/near/192145518" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Dan Abolafia <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/how.20do.20I.20step.20through.20proofs.3F.html#192145518">(Mar 28 2020 at 22:54)</a>:</h4>
<p>Is there any thought being given to adding the kind of debugger I'm describing to lean in the future?</p>



<a name="192145611"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/how%20do%20I%20step%20through%20proofs%3F/near/192145611" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/how.20do.20I.20step.20through.20proofs.3F.html#192145611">(Mar 28 2020 at 22:56)</a>:</h4>
<p>I don't understand what this hypothetical feature does</p>



<a name="192185703"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/how%20do%20I%20step%20through%20proofs%3F/near/192185703" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Dan Abolafia <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/how.20do.20I.20step.20through.20proofs.3F.html#192185703">(Mar 29 2020 at 17:45)</a>:</h4>
<p>I suppose there are two features:<br>
1) A debugger to step through tactic metaprogramming would be like a typical code debugger, if i understand the language correctly.<br>
2) I think what I'm asking for is to be able to step through the execution of the proof checker, and have each step in that execution be tied to some position in user-facing code, i.e. any lean code involved in the proof (e.g. mathlib definitions, axioms, theorems, etc). Like a debugger, I would also want the checker state to be surfaced somehow, so that I can see what the checker sees. I don't have much of an understanding of the inner workings of the proof checker, so I don't know to what extent this is feasible.</p>



<a name="192199597"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/how%20do%20I%20step%20through%20proofs%3F/near/192199597" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/how.20do.20I.20step.20through.20proofs.3F.html#192199597">(Mar 29 2020 at 23:32)</a>:</h4>
<p>Two major difficulties with 2):</p>
<ul>
<li>In practice the proof checker (I assume this means the kernel) takes many, many more "steps" than you would care to follow. You would need to somehow find the steps you're interested in, but this is probably a meaningless concept, because:</li>
<li>Tactics, especially "higher-level" ones such as <code>simp</code> or <code>ring</code>, can produce proofs where even the proof term itself is essentially not comprehensible, let alone the process of checking the proof term. There simply is no more comprehensible layer below the level of these tactics. (That's not to say such a layer could not exist, just that it does not exist with the way these tactics are implemented currently.)</li>
</ul>
<p>I think there is a fallacy here that if you have access to more detail, it will give you greater understanding of what is happening. That is not necessarily the case when the amount of information is overwhelming and where the nature of the information is not more humanly accessible than the original form.</p>



<a name="192199604"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/how%20do%20I%20step%20through%20proofs%3F/near/192199604" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/how.20do.20I.20step.20through.20proofs.3F.html#192199604">(Mar 29 2020 at 23:32)</a>:</h4>
<p>It would help to have some examples of what you would hope to get out of such a tool.</p>



<a name="192199616"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/how%20do%20I%20step%20through%20proofs%3F/near/192199616" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/how.20do.20I.20step.20through.20proofs.3F.html#192199616">(Mar 29 2020 at 23:33)</a>:</h4>
<p>For example if you're completely new to lean and you want to understand proofs of things like <code>p ∧ (q ∧ r) ↔ (p ∧ q) ∧ r </code>, that's a different matter.</p>



<a name="192199760"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/how%20do%20I%20step%20through%20proofs%3F/near/192199760" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/how.20do.20I.20step.20through.20proofs.3F.html#192199760">(Mar 29 2020 at 23:37)</a>:</h4>
<p>But no amount of tracing the type checking of <code>quadratic_reciprocity</code> is going to tell you why quadratic reciprocity is true.</p>



<a name="192200232"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/how%20do%20I%20step%20through%20proofs%3F/near/192200232" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/how.20do.20I.20step.20through.20proofs.3F.html#192200232">(Mar 29 2020 at 23:51)</a>:</h4>
<p>Needless to say, I beg to differ. While the way in which lean sees these proofs is not readily accessible to human readers, this is more a presentation issue than anything else. I strongly believe that it is important to retain some connection to what is happening at the low level. If you give that up, the proof checker starts to fall into "magic" territory, and there is no longer a reason to believe in its trustworthiness</p>



<a name="192200291"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/how%20do%20I%20step%20through%20proofs%3F/near/192200291" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/how.20do.20I.20step.20through.20proofs.3F.html#192200291">(Mar 29 2020 at 23:53)</a>:</h4>
<p>At the very least, there is an abstract formalism associated with lean (c.f. my thesis), and it should be possible to present any lean term as a proof in that system</p>



<a name="192200299"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/how%20do%20I%20step%20through%20proofs%3F/near/192200299" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/how.20do.20I.20step.20through.20proofs.3F.html#192200299">(Mar 29 2020 at 23:53)</a>:</h4>
<p>Sure, it's just that quadratic reciprocity will be incomprehensible to a human if you look at it that way.</p>



<a name="192200300"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/how%20do%20I%20step%20through%20proofs%3F/near/192200300" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/how.20do.20I.20step.20through.20proofs.3F.html#192200300">(Mar 29 2020 at 23:53)</a>:</h4>
<p>currently we aren't there yet, because there is no way to trace definitional equality proofs</p>



<a name="192200306"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/how%20do%20I%20step%20through%20proofs%3F/near/192200306" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/how.20do.20I.20step.20through.20proofs.3F.html#192200306">(Mar 29 2020 at 23:53)</a>:</h4>
<p>You're much better off reading a book.</p>



<a name="192200355"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/how%20do%20I%20step%20through%20proofs%3F/near/192200355" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/how.20do.20I.20step.20through.20proofs.3F.html#192200355">(Mar 29 2020 at 23:54)</a>:</h4>
<p>It is possible that the proof of quadratic reciprocity has gone past what people can read, but I would submit that if this is the case then it's a bad proof</p>



<a name="192200367"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/how%20do%20I%20step%20through%20proofs%3F/near/192200367" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/how.20do.20I.20step.20through.20proofs.3F.html#192200367">(Mar 29 2020 at 23:54)</a>:</h4>
<p>I'm very confused by all of this!</p>



<a name="192200371"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/how%20do%20I%20step%20through%20proofs%3F/near/192200371" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/how.20do.20I.20step.20through.20proofs.3F.html#192200371">(Mar 29 2020 at 23:54)</a>:</h4>
<p>There is no reason why a proof of quadratic reciprocity should be incomprehensible</p>



<a name="192200375"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/how%20do%20I%20step%20through%20proofs%3F/near/192200375" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/how.20do.20I.20step.20through.20proofs.3F.html#192200375">(Mar 29 2020 at 23:54)</a>:</h4>
<p>even in full formal detail</p>



<a name="192200426"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/how%20do%20I%20step%20through%20proofs%3F/near/192200426" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/how.20do.20I.20step.20through.20proofs.3F.html#192200426">(Mar 29 2020 at 23:56)</a>:</h4>
<p>If you look at a metamath proof, it is probably more than one would care to write by a factor of about 10 or so, but not more than that. This is within the range of human understanding</p>



<a name="192200438"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/how%20do%20I%20step%20through%20proofs%3F/near/192200438" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/how.20do.20I.20step.20through.20proofs.3F.html#192200438">(Mar 29 2020 at 23:56)</a>:</h4>
<p>All I'm saying is that the proof you actually write in the proof assistant is more comprehensible than what you get by trying to examine, say, the proof term generated by the tactic. Isn't that the purpose of a high-level proof language?</p>



<a name="192200444"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/how%20do%20I%20step%20through%20proofs%3F/near/192200444" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/how.20do.20I.20step.20through.20proofs.3F.html#192200444">(Mar 29 2020 at 23:57)</a>:</h4>
<p>the thing is, proof terms are not a good way to present proofs</p>



<a name="192200447"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/how%20do%20I%20step%20through%20proofs%3F/near/192200447" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/how.20do.20I.20step.20through.20proofs.3F.html#192200447">(Mar 29 2020 at 23:57)</a>:</h4>
<p>because what people actually care about are the types</p>



<a name="192200449"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/how%20do%20I%20step%20through%20proofs%3F/near/192200449" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/how.20do.20I.20step.20through.20proofs.3F.html#192200449">(Mar 29 2020 at 23:57)</a>:</h4>
<p>Right, but this is what was asked for.</p>



<a name="192200460"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/how%20do%20I%20step%20through%20proofs%3F/near/192200460" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/how.20do.20I.20step.20through.20proofs.3F.html#192200460">(Mar 29 2020 at 23:57)</a>:</h4>
<p>Well, not the term per se, but something even worse.</p>



<a name="192200464"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/how%20do%20I%20step%20through%20proofs%3F/near/192200464" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/how.20do.20I.20step.20through.20proofs.3F.html#192200464">(Mar 29 2020 at 23:57)</a>:</h4>
<p>something even better</p>



<a name="192200470"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/how%20do%20I%20step%20through%20proofs%3F/near/192200470" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/how.20do.20I.20step.20through.20proofs.3F.html#192200470">(Mar 29 2020 at 23:58)</a>:</h4>
<p>Well, maybe we have different interpretations of the question then.</p>



<a name="192200509"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/how%20do%20I%20step%20through%20proofs%3F/near/192200509" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/how.20do.20I.20step.20through.20proofs.3F.html#192200509">(Mar 29 2020 at 23:58)</a>:</h4>
<p>proof terms without the typing information requires the user to hold the whole context in their head at all times, which requires ridiculous attention to detail</p>



<a name="192200517"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/how%20do%20I%20step%20through%20proofs%3F/near/192200517" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/how.20do.20I.20step.20through.20proofs.3F.html#192200517">(Mar 29 2020 at 23:58)</a>:</h4>
<p>you can't jump around in a proof like that</p>



<a name="192200519"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/how%20do%20I%20step%20through%20proofs%3F/near/192200519" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/how.20do.20I.20step.20through.20proofs.3F.html#192200519">(Mar 29 2020 at 23:58)</a>:</h4>
<p>which is what humans do</p>



<a name="192200531"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/how%20do%20I%20step%20through%20proofs%3F/near/192200531" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/how.20do.20I.20step.20through.20proofs.3F.html#192200531">(Mar 29 2020 at 23:59)</a>:</h4>
<p><code>#explode</code> tries to fill that gap by presenting the types of each intermediate term, and mostly hiding the proof term itself</p>



<a name="192200535"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/how%20do%20I%20step%20through%20proofs%3F/near/192200535" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/how.20do.20I.20step.20through.20proofs.3F.html#192200535">(Mar 29 2020 at 23:59)</a>:</h4>
<p>but it still has nothing to say about definitional unfolding</p>



<a name="192200539"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/how%20do%20I%20step%20through%20proofs%3F/near/192200539" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/how.20do.20I.20step.20through.20proofs.3F.html#192200539">(Mar 29 2020 at 23:59)</a>:</h4>
<p>I think the question asked is probably not the real intended question anyways</p>



<a name="192200584"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/how%20do%20I%20step%20through%20proofs%3F/near/192200584" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/how.20do.20I.20step.20through.20proofs.3F.html#192200584">(Mar 30 2020 at 00:00)</a>:</h4>
<p>and I think you're trying to answer the real intended question</p>



<a name="192200614"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/how%20do%20I%20step%20through%20proofs%3F/near/192200614" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/how.20do.20I.20step.20through.20proofs.3F.html#192200614">(Mar 30 2020 at 00:01)</a>:</h4>
<p>Or maybe not. I have no idea.</p>



<a name="192200626"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/how%20do%20I%20step%20through%20proofs%3F/near/192200626" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/how.20do.20I.20step.20through.20proofs.3F.html#192200626">(Mar 30 2020 at 00:01)</a>:</h4>
<p>I think that <code>#explode</code> has some limitations since it is non-interactive, and a more debugger like interface would be good, but there are a lot of unanswered UI and implementation details to that</p>



<a name="192200679"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/how%20do%20I%20step%20through%20proofs%3F/near/192200679" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/how.20do.20I.20step.20through.20proofs.3F.html#192200679">(Mar 30 2020 at 00:03)</a>:</h4>
<p>One maybe easy option would be a tactic-ifier that takes any lean proof (as a term), and reconstructs an <code>apply</code> based tactic proof of it</p>



<a name="192200683"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/how%20do%20I%20step%20through%20proofs%3F/near/192200683" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/how.20do.20I.20step.20through.20proofs.3F.html#192200683">(Mar 30 2020 at 00:03)</a>:</h4>
<p>then you could use the goal view to see all the intermediate states</p>



<a name="192200731"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/how%20do%20I%20step%20through%20proofs%3F/near/192200731" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/how.20do.20I.20step.20through.20proofs.3F.html#192200731">(Mar 30 2020 at 00:04)</a>:</h4>
<p>That sounds really cool.</p>



<a name="192200771"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/how%20do%20I%20step%20through%20proofs%3F/near/192200771" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/how.20do.20I.20step.20through.20proofs.3F.html#192200771">(Mar 30 2020 at 00:05)</a>:</h4>
<p>I was responding to the statement of 2). I still am fairly certain that given a tactic mode proof, there is no amount of visibility into things which actually currently happen during the processing of that proof that will give a greater understanding of what is happening in the proof than to just step through the tactic steps and watch the goal window.</p>



<a name="192200820"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/how%20do%20I%20step%20through%20proofs%3F/near/192200820" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/how.20do.20I.20step.20through.20proofs.3F.html#192200820">(Mar 30 2020 at 00:06)</a>:</h4>
<p>maybe with some rare exceptions for tactics like <code>solve_by_elim</code> that tend to produce comprehensible proofs</p>



<a name="192201348"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/how%20do%20I%20step%20through%20proofs%3F/near/192201348" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/how.20do.20I.20step.20through.20proofs.3F.html#192201348">(Mar 30 2020 at 00:23)</a>:</h4>
<p>Many tactics are too high level to be able to follow how the goal changed</p>



<a name="192201354"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/how%20do%20I%20step%20through%20proofs%3F/near/192201354" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/how.20do.20I.20step.20through.20proofs.3F.html#192201354">(Mar 30 2020 at 00:23)</a>:</h4>
<p>And this will only get worse as tactics improve</p>



<a name="192201397"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/how%20do%20I%20step%20through%20proofs%3F/near/192201397" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/how.20do.20I.20step.20through.20proofs.3F.html#192201397">(Mar 30 2020 at 00:24)</a>:</h4>
<p>if I see a proof <code>by magic</code> then following your approach I have no recourse but to just believe</p>



<a name="192201401"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/how%20do%20I%20step%20through%20proofs%3F/near/192201401" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/how.20do.20I.20step.20through.20proofs.3F.html#192201401">(Mar 30 2020 at 00:24)</a>:</h4>
<p>I think the original question is based on a faulty analogy. If we pretend proofs are like programs then stepping through the checking of a proof is like stepping through the compilation of a program. This is not a good way to try to understand a program. (It might be a good way to debug your compiler.)</p>



<a name="192201422"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/how%20do%20I%20step%20through%20proofs%3F/near/192201422" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/how.20do.20I.20step.20through.20proofs.3F.html#192201422">(Mar 30 2020 at 00:24)</a>:</h4>
<p>The computer says it's OK so it's OK. I can completely understand what <code>ring</code> is doing and I have no interest in learning about horner form.</p>



<a name="192201423"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/how%20do%20I%20step%20through%20proofs%3F/near/192201423" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/how.20do.20I.20step.20through.20proofs.3F.html#192201423">(Mar 30 2020 at 00:24)</a>:</h4>
<p>It's amusing that you say that because I find the analogy extremely accurate</p>



<a name="192201430"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/how%20do%20I%20step%20through%20proofs%3F/near/192201430" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/how.20do.20I.20step.20through.20proofs.3F.html#192201430">(Mar 30 2020 at 00:25)</a>:</h4>
<p>That's because you're not a mathematician</p>



<a name="192201431"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/how%20do%20I%20step%20through%20proofs%3F/near/192201431" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/how.20do.20I.20step.20through.20proofs.3F.html#192201431">(Mar 30 2020 at 00:25)</a>:</h4>
<p>Right, but the proposed approach is not necessarily going to help with those mystery tactics either. That is what I tried to address with my parenthetical sentence.</p>



<a name="192201433"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/how%20do%20I%20step%20through%20proofs%3F/near/192201433" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/how.20do.20I.20step.20through.20proofs.3F.html#192201433">(Mar 30 2020 at 00:25)</a>:</h4>
<p>so you think about maths in a different way. If you want to actually get somewhere you have to learn to fly.</p>



<a name="192201437"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/how%20do%20I%20step%20through%20proofs%3F/near/192201437" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/how.20do.20I.20step.20through.20proofs.3F.html#192201437">(Mar 30 2020 at 00:25)</a>:</h4>
<p>Which analogy is accurate?</p>



<a name="192201439"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/how%20do%20I%20step%20through%20proofs%3F/near/192201439" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/how.20do.20I.20step.20through.20proofs.3F.html#192201439">(Mar 30 2020 at 00:25)</a>:</h4>
<p>It's not so much stepping through the compilation but rather stepping through the low level assembly that comes out the other end</p>



<a name="192201480"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/how%20do%20I%20step%20through%20proofs%3F/near/192201480" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/how.20do.20I.20step.20through.20proofs.3F.html#192201480">(Mar 30 2020 at 00:26)</a>:</h4>
<p>stepping through the compilation would be debugging the tactic itself</p>



<a name="192201482"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/how%20do%20I%20step%20through%20proofs%3F/near/192201482" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/how.20do.20I.20step.20through.20proofs.3F.html#192201482">(Mar 30 2020 at 00:26)</a>:</h4>
<p>I still think you're reading the question as what you want it to be and not as what it actually says.</p>



<a name="192201485"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/how%20do%20I%20step%20through%20proofs%3F/near/192201485" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/how.20do.20I.20step.20through.20proofs.3F.html#192201485">(Mar 30 2020 at 00:26)</a>:</h4>
<p>that's quite possible. I have strong views on this topic and they may be clouding my reading</p>



<a name="192201544"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/how%20do%20I%20step%20through%20proofs%3F/near/192201544" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/how.20do.20I.20step.20through.20proofs.3F.html#192201544">(Mar 30 2020 at 00:29)</a>:</h4>
<blockquote>
<p>2) I think what I'm asking for is to be able to step through the execution of the proof checker, and have each step in that execution be tied to some position in user-facing code, i.e. any lean code involved in the proof (e.g. mathlib definitions, axioms, theorems, etc). Like a debugger, I would also want the checker state to be surfaced somehow, so that I can see what the checker sees.</p>
</blockquote>
<p>I think it would be hard to relate the steps in the checker (the kernel) to code written in the source text (the tactics), because of the two step compilation process. However, it should be possible to relate tactics to bits of the proof term, and bits of the proof term to checker steps</p>



<a name="192201551"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/how%20do%20I%20step%20through%20proofs%3F/near/192201551" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/how.20do.20I.20step.20through.20proofs.3F.html#192201551">(Mar 30 2020 at 00:29)</a>:</h4>
<p>It's also probably true that what you want the question to be is the same as what the asker wanted the question to be, but without the original asker here we can't really know.</p>



<a name="192201619"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/how%20do%20I%20step%20through%20proofs%3F/near/192201619" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/how.20do.20I.20step.20through.20proofs.3F.html#192201619">(Mar 30 2020 at 00:31)</a>:</h4>
<p>The recently added <code>show_term</code> tactic will show an individual tactic's contribution to the resulting proof term</p>



<a name="192201621"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/how%20do%20I%20step%20through%20proofs%3F/near/192201621" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/how.20do.20I.20step.20through.20proofs.3F.html#192201621">(Mar 30 2020 at 00:31)</a>:</h4>
<p>Another thing along these lines that would be neat is to make <code>simp</code> or <code>rw</code> (with many rewrite steps) output a <code>calc</code>-style proof</p>



<a name="192201667"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/how%20do%20I%20step%20through%20proofs%3F/near/192201667" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/how.20do.20I.20step.20through.20proofs.3F.html#192201667">(Mar 30 2020 at 00:32)</a>:</h4>
<p>I don't really know whether that's trivial or difficult.</p>



<a name="192201672"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/how%20do%20I%20step%20through%20proofs%3F/near/192201672" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/how.20do.20I.20step.20through.20proofs.3F.html#192201672">(Mar 30 2020 at 00:32)</a>:</h4>
<p>I think a better primitive than <code>calc</code> would be a <code>conv</code> proof where the only steps are descending into subterms and transitivity</p>



<a name="196010784"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/how%20do%20I%20step%20through%20proofs%3F/near/196010784" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Dan Abolafia <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/how.20do.20I.20step.20through.20proofs.3F.html#196010784">(May 01 2020 at 21:13)</a>:</h4>
<p><span class="user-mention" data-user-id="110032">@Reid Barton</span> I've done the exercises in <a href="https://leanprover.github.io/theorem_proving_in_lean/quantifiers_and_equality.html" title="https://leanprover.github.io/theorem_proving_in_lean/quantifiers_and_equality.html">https://leanprover.github.io/theorem_proving_in_lean/quantifiers_and_equality.html</a> through section 4, and I would understand a tactic-free proof of <code>p ∧ (q ∧ r) ↔ (p ∧ q) ∧ r</code>. The core language without tactics seems to satisfy what I am looking for. I can inspect the type signature of each expression in a proof and understand why the expression has that type signature. This is effectively stepping through a proof.</p>
<blockquote>
<p>I think the original question is based on a faulty analogy. If we pretend proofs are like programs then stepping through the checking of a proof is like stepping through the compilation of a program. This is not a good way to try to understand a program. (It might be a good way to debug your compiler.)</p>
</blockquote>
<p>Yes no one can understand a program fully by stepping through it. My intention is to use "stepping through the code" as a way to quickly ramp up my understanding of the language. But even an experienced user may wish to step through code they are reading to resolve confusions they may have, in lieu of talking to the code's author.</p>
<p>I agree with <span class="user-mention" data-user-id="110049">@Mario Carneiro</span>  "I strongly believe that it is important to retain some connection to what is happening at the low level. If you give that up, the proof checker starts to fall into "magic" territory, and there is no longer a reason to believe in its trustworthiness"  The fact that what an expression does and represents is objective is immensely powerful (over informal mathematics in text), but only if I can actually have the computer tell me what is the case.</p>



<a name="196012544"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/how%20do%20I%20step%20through%20proofs%3F/near/196012544" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Dan Abolafia <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/how.20do.20I.20step.20through.20proofs.3F.html#196012544">(May 01 2020 at 21:33)</a>:</h4>
<p><span class="user-mention" data-user-id="110032">@Reid Barton</span> let me give you an example of what I'm trying to do.</p>
<p>I was looking at <code>irr_sqrt_two</code> in irrational.lean, which calls into <code>irr_sqrt_of_prime</code> which eventually calls into <code>irr_nrt_of_n_not_dvd_multiplicity</code>, which to me looks like a complicated mess. Are you telling me there is no way for me to fast track my understanding of this particular proof? That the tactics involved, with their nuances and idiosyncrasies, need to be fully comprehended through many hours of dedicated study just so I may understand the proof that sqrt(2) is irrational? And even then, I'll be relying on my interpretation of the code, and never get confirmation that what I think is happening is actually the case.</p>
<p>The fact that I cannot step through tactic metaprogramming exacerbates the situation because I effectively have to internalize the behavior of these tactics through encountering many examples.  This reminds me of deep learning, where the various tools and methods are black boxes and cannot be understood formally, so practitioners and researchers are forced to acquire a heuristic understanding through long-term exposure. That is uncomfortable for me, and mathematics is my refuge from such messiness. It seems that lean is bringing the messiness of complex uninspectable black boxes into mathematics. Then the pedagogical benefits of computer proof checking are lost to me, and I'm not sure of what value lean is to me.</p>



<a name="196012774"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/how%20do%20I%20step%20through%20proofs%3F/near/196012774" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/how.20do.20I.20step.20through.20proofs.3F.html#196012774">(May 01 2020 at 21:35)</a>:</h4>
<p>You can certainly understand the mathematics behind the proof and you can work your way down if you choose to. This sounds like a very long proof mathematically so the proof term will be gigantic. It will be like reading the machine code translation of a relatively simple python program</p>



<a name="196013198"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/how%20do%20I%20step%20through%20proofs%3F/near/196013198" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/how.20do.20I.20step.20through.20proofs.3F.html#196013198">(May 01 2020 at 21:38)</a>:</h4>
<p>I have no idea what you mean when you call <code>irr_nrt_of_n_not_dvd_multiplicity</code> a complicated mess. It is a natural mathematical statement which can easily be interpreted, and the tactic mode proof is fairly short and natural.</p>



<a name="196013248"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/how%20do%20I%20step%20through%20proofs%3F/near/196013248" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/how.20do.20I.20step.20through.20proofs.3F.html#196013248">(May 01 2020 at 21:39)</a>:</h4>
<p>And you can look at the proof state after each step.</p>



<a name="196013263"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/how%20do%20I%20step%20through%20proofs%3F/near/196013263" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Dan Abolafia <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/how.20do.20I.20step.20through.20proofs.3F.html#196013263">(May 01 2020 at 21:39)</a>:</h4>
<p>Python is not compiled, the analog would be stepping through the python interpreter at the assembly level. Frankly, if there were something screwy going on with the Python language itself that the python debugger can't resolve I might step through the interpreter at the C++ level. And for C++ code, I have indeed stepped through at the assembly level when things were weird. I don't see a reason to prefer machine code over assembly, and I suspect a similar first-pass translation can be done of raw proof code to something somewhat more human readable.</p>



<a name="196013355"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/how%20do%20I%20step%20through%20proofs%3F/near/196013355" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/how.20do.20I.20step.20through.20proofs.3F.html#196013355">(May 01 2020 at 21:40)</a>:</h4>
<p>Usually every step is obvious for a mathematician.</p>



<a name="196013392"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/how%20do%20I%20step%20through%20proofs%3F/near/196013392" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/how.20do.20I.20step.20through.20proofs.3F.html#196013392">(May 01 2020 at 21:40)</a>:</h4>
<p>All I'm saying is that the mathematical proof has a meaning, and sure you can keep digging and digging until you reach a level where it's just thousands of lines of elementary operations and all overall understanding is lost.</p>



<a name="196013533"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/how%20do%20I%20step%20through%20proofs%3F/near/196013533" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/how.20do.20I.20step.20through.20proofs.3F.html#196013533">(May 01 2020 at 21:42)</a>:</h4>
<p>But if you want to understand this proof you should consult a mathematician, not keep digging</p>



<a name="196013725"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/how%20do%20I%20step%20through%20proofs%3F/near/196013725" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/how.20do.20I.20step.20through.20proofs.3F.html#196013725">(May 01 2020 at 21:44)</a>:</h4>
<p>The tactics are conceptually meaningful and are manipulating mathematical objects in an intuitive way. Each individual step can be examined down to the core but to get an overall understanding of the proof you should first translate it into mathematics</p>



<a name="196013880"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/how%20do%20I%20step%20through%20proofs%3F/near/196013880" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/how.20do.20I.20step.20through.20proofs.3F.html#196013880">(May 01 2020 at 21:46)</a>:</h4>
<p>BTW, studying <code>mathlib</code> proofs is definitely not the best way to learn math. In many cases we don't take the shortest route to an elementary statement but prove a very general version first.</p>



<a name="196017096"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/how%20do%20I%20step%20through%20proofs%3F/near/196017096" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/how.20do.20I.20step.20through.20proofs.3F.html#196017096">(May 01 2020 at 22:27)</a>:</h4>
<p>Yes there are definitely easier ways to prove that the square root of two is irrational! This way has the advantage that you can also prove that the cube root of 691 is irrational with about as much work</p>



<a name="196017187"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/how%20do%20I%20step%20through%20proofs%3F/near/196017187" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Dan Abolafia <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/how.20do.20I.20step.20through.20proofs.3F.html#196017187">(May 01 2020 at 22:28)</a>:</h4>
<p>Let me elucidate why I described it as a complicated mess (I don't mean this as a jab at the authors, and I'm sure its very elegant lean code, but I am commenting on my experience as a novice jumping into the deep end).<br>
Looking at the first line in <code>irrational_nrt_of_n_not_dvd_multiplicity</code><br>
<a href="https://github.com/leanprover-community/mathlib/blob/4daa7e8/src/data/real/irrational.lean#L57" title="https://github.com/leanprover-community/mathlib/blob/4daa7e8/src/data/real/irrational.lean#L57">https://github.com/leanprover-community/mathlib/blob/4daa7e8/src/data/real/irrational.lean#L57</a></p>
<p><code>rcases nat.eq_zero_or_pos n with rfl | hnpos,</code><br>
I can see that <code>nat.eq_zero_or_pos</code> has type <code>∀ (n : ℕ), n = 0 ∨ n &gt; 0</code>.<br>
I can see that the result of this line is to create two goals from <code>nat.eq_zero_or_pos</code>, one where <code>hnpos : n &gt; 0</code> is an added proposition, and the other where <code>n</code> is replaced by <code>0</code> everywhere. <br>
It took me a while to realize <code>n</code> was being replaced by <code>0</code> in the first goal, so I was at first confused about what happened to the <code>n = 0</code> case.<br>
The more verbose alternative is <code>cases nat.eq_zero_or_pos n with H₁ hnpos, subst H₁,</code> where I can see the goal state with <code>H₁ : n = 0</code> as a proposition and then see the explicit substitution <code>subst H₁,</code></p>
<p>So now I am curious exactly how <code>rcases</code> does the cases and substitution all in one swoop.  How is <code>rfl</code> contributing here?<br>
Turns out in <code>rcases_core</code> has special support for <code>rfl</code> as a name.</p>
<div class="codehilite"><pre><span></span><code><span class="bp">|</span> <span class="o">((</span><span class="n">rcases_patt</span><span class="bp">.</span><span class="n">one</span> <span class="bp">`</span><span class="n">rfl</span><span class="o">,</span> <span class="n">e</span><span class="o">)</span> <span class="bp">::</span> <span class="n">l</span><span class="o">)</span> <span class="o">:=</span> <span class="n">do</span>
  <span class="o">(</span><span class="n">t</span><span class="o">,</span> <span class="n">e</span><span class="o">)</span> <span class="err">←</span> <span class="n">get_local_and_type</span> <span class="n">e</span><span class="o">,</span>
  <span class="n">subst</span> <span class="n">e</span><span class="o">,</span>
  <span class="n">rcases</span><span class="bp">.</span><span class="n">continue</span> <span class="n">l</span>
</code></pre></div>


<p>(credit to Jesse Han for helping me figure this out)</p>
<p>My point is that I wouldn't know why the <code>rcases</code> line works, and I had to rely on having a good eye just to catch exactly the effect of this tactic on the goals state (replacing n with 0 in one place). Not knowing why it works (without help), I would not learn anything about rcases, and I would not be able to use a similarly efficient line in my own proof. Yes I can play around with the line and surrounding code to get a sense for what rcases is doing by trial and error. That is indeed an important complement to stepping through code anyway. But not being able to step through code or get some information about what is going on internally is a handicap that I have to work around. I expect that I'll encounter a similar difficulty for every line in this proof, where I need to guess and check what the objects in the line are doing by carefully reading through their definitions and the goal state information, and hoping for the best.</p>



<a name="196017343"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/how%20do%20I%20step%20through%20proofs%3F/near/196017343" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/how.20do.20I.20step.20through.20proofs.3F.html#196017343">(May 01 2020 at 22:31)</a>:</h4>
<p>There are just a finite number of tricks which you learn after some practice. I would recommend reading the docs to learn about what tactics do, not the source code! Do you know about the community docs?</p>



<a name="196017367"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/how%20do%20I%20step%20through%20proofs%3F/near/196017367" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/how.20do.20I.20step.20through.20proofs.3F.html#196017367">(May 01 2020 at 22:31)</a>:</h4>
<p>Rcases docs explain what's going on much better than rcases source code</p>



<a name="196017429"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/how%20do%20I%20step%20through%20proofs%3F/near/196017429" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/how.20do.20I.20step.20through.20proofs.3F.html#196017429">(May 01 2020 at 22:32)</a>:</h4>
<p>And reading simple use cases of rcases will teach you more about rcases than just leaping in and trying to understand a complex proof from a standing start.</p>



<a name="196017474"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/how%20do%20I%20step%20through%20proofs%3F/near/196017474" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Dan Abolafia <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/how.20do.20I.20step.20through.20proofs.3F.html#196017474">(May 01 2020 at 22:33)</a>:</h4>
<p>By community docs you mean the mathlib docs?<br>
<a href="https://leanprover-community.github.io/mathlib_docs/" title="https://leanprover-community.github.io/mathlib_docs/">https://leanprover-community.github.io/mathlib_docs/</a></p>



<a name="196017532"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/how%20do%20I%20step%20through%20proofs%3F/near/196017532" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/how.20do.20I.20step.20through.20proofs.3F.html#196017532">(May 01 2020 at 22:34)</a>:</h4>
<p>Yes. <a href="https://leanprover-community.github.io/mathlib_docs/tactics.html#rcases" title="https://leanprover-community.github.io/mathlib_docs/tactics.html#rcases">Here's the doc entry on <code>rcases</code></a>.</p>



<a name="196017799"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/how%20do%20I%20step%20through%20proofs%3F/near/196017799" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/how.20do.20I.20step.20through.20proofs.3F.html#196017799">(May 01 2020 at 22:39)</a>:</h4>
<p>It does look like we need to add a mention of the way <code>rfl</code> is treated. I actually asked about that myself not too long ago.</p>



<a name="196017900"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/how%20do%20I%20step%20through%20proofs%3F/near/196017900" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Dan Abolafia <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/how.20do.20I.20step.20through.20proofs.3F.html#196017900">(May 01 2020 at 22:40)</a>:</h4>
<blockquote>
<p>There are just a finite number of tricks which you learn after some practice.</p>
</blockquote>
<p>Finite is not very reassuring, haha. Is there a short list of tricks that form a minimum set to get me going? I'm less likely to invest time in learning something if I don't know how deep the rabbit hole goes and what the payoff will be.</p>
<p>Yes I can read the docs. I'm making a point about pedagogy. The joy of learning a programming language is that you don't need to read the docs ;) Seems like there's a missed opportunity here for hacker types to get interested in pure math and proofs. I know plenty of very intelligent people who view theoretical work as inaccessible to them because of the formalities of reading large amounts of material without any interactivity.</p>



<a name="196023533"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/how%20do%20I%20step%20through%20proofs%3F/near/196023533" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/how.20do.20I.20step.20through.20proofs.3F.html#196023533">(May 02 2020 at 00:15)</a>:</h4>
<p><span class="user-mention silent" data-user-id="271222">Dan Abolafia</span> <a href="#narrow/stream/113488-general/topic/how.20do.20I.20step.20through.20proofs.3F/near/196010784" title="#narrow/stream/113488-general/topic/how.20do.20I.20step.20through.20proofs.3F/near/196010784">said</a>:</p>
<blockquote>
<p>Yes no one can understand a program fully by stepping through it. My intention is to use "stepping through the code" as a way to quickly ramp up my understanding of the language. But even an experienced user may wish to step through code they are reading to resolve confusions they may have, in lieu of talking to the code's author.</p>
</blockquote>
<p>Thanks for clarifying, I had a quite different picture of what you were looking for before. In particular, I didn't realize the main issue is with understanding the language itself.</p>
<p>If I may offer another analogy, suppose you are reading an ordinary math proof in a language you do not speak well, let's say German. The proof will probably be rather hard to understand, but that is because of the language it is written in. The solution is not to find another proof also in German with more of the details expanded, but instead to consult a German textbook or speaker for help with the parts that are difficult. (Or just see if you can find a translation instead.)</p>
<p>But now you are saying something like: well if I did have an expanded version of the proof in German, there's a greater chance that my rudimentary German will enable me to pick up some understanding of the argument, and maybe in turn improve my German skills; and there is also sense to this.</p>



<a name="196024058"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/how%20do%20I%20step%20through%20proofs%3F/near/196024058" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/how.20do.20I.20step.20through.20proofs.3F.html#196024058">(May 02 2020 at 00:30)</a>:</h4>
<p>Anyways, long ago you posted two items 1) and 2). 1) was a debugger for the tactic state. Tactics are effectively imperative programs, so this is surely possible in principle (e.g., Haskell has a debugger although I think virtually no one uses it). 2) was about stepping through the "proof checker" which I interpreted, perhaps wrongly, as referring to the entire system from tactics to the elaborator to the kernel, and this is a very different beast and probably not profitable to understand in any kind of stepwise fashion.</p>



<a name="196137969"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/how%20do%20I%20step%20through%20proofs%3F/near/196137969" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/how.20do.20I.20step.20through.20proofs.3F.html#196137969">(May 04 2020 at 03:57)</a>:</h4>
<p>This reminds me of the Berkeley PhD language exams, where (depending on some important details like who the examiners were for each language) a viable strategy was sometimes to translate the theorem statements, write your own proofs out (in English), and only then try to read the given proofs in German/French/Russian, and finally try to rephrase your proof along the lines of the given one. The key point being that understanding the maths is often easier than understanding the language.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>