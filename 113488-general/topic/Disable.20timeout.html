---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/Disable.20timeout.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Disable.20timeout.html">Disable timeout</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="203812733"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Disable%20timeout/near/203812733" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Markus Himmel <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Disable.20timeout.html#203812733">(Jul 14 2020 at 09:11)</a>:</h4>
<p>Is there a <code>set_option</code> that disables the <code>(deterministic) timeout</code> message completely and just lets tactics run as long as they want? I tried <code>set_option timeout 0</code> but that doesn't seem to do the trick.</p>



<a name="203812788"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Disable%20timeout/near/203812788" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Disable.20timeout.html#203812788">(Jul 14 2020 at 09:12)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> <span class="user-mention" data-user-id="110043">@Gabriel Ebner</span> ??</p>



<a name="203812792"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Disable%20timeout/near/203812792" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Disable.20timeout.html#203812792">(Jul 14 2020 at 09:12)</a>:</h4>
<p>You could set it to something absurd</p>



<a name="203812835"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Disable%20timeout/near/203812835" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Markus Himmel <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Disable.20timeout.html#203812835">(Jul 14 2020 at 09:13)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110049">Mario Carneiro</span> <a href="#narrow/stream/113489-new-members/topic/Disable.20timeout/near/203812792">said</a>:</p>
<blockquote>
<p>You could set it to something absurd</p>
</blockquote>
<p>Actually, I always get the <code>(deterministic) timeout</code> message in the same place, regardless of whether I set <code>set_option timeout 100000000</code> or <code>set_option timeout 1</code></p>



<a name="203812943"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Disable%20timeout/near/203812943" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Disable.20timeout.html#203812943">(Jul 14 2020 at 09:14)</a>:</h4>
<p>from reading the code it appears that <code>set_option timeout 0</code> should indeed act as unbounded</p>



<a name="203813011"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Disable%20timeout/near/203813011" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Markus Himmel <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Disable.20timeout.html#203813011">(Jul 14 2020 at 09:15)</a>:</h4>
<p>That's interesting. The following times out for me:</p>
<div class="codehilite"><pre><span></span><code><span class="kn">set_option</span> <span class="n">timeout</span> <span class="mi">0</span>

<span class="n">meta</span> <span class="n">def</span> <span class="n">stupid_tac</span> <span class="o">:</span> <span class="n">tactic</span> <span class="n">unit</span> <span class="o">:=</span>
<span class="n">tactic</span><span class="bp">.</span><span class="n">trace</span> <span class="s2">&quot;Hi&quot;</span> <span class="bp">&gt;&gt;</span> <span class="n">stupid_tac</span>

<span class="kn">example</span> <span class="o">:</span> <span class="n">true</span> <span class="o">:=</span>
<span class="k">by</span> <span class="n">stupid_tac</span>
</code></pre></div>



<a name="203813107"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Disable%20timeout/near/203813107" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Disable.20timeout.html#203813107">(Jul 14 2020 at 09:17)</a>:</h4>
<p>How did that end in the new members stream?</p>



<a name="203813184"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Disable%20timeout/near/203813184" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Markus Himmel <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Disable.20timeout.html#203813184">(Jul 14 2020 at 09:18)</a>:</h4>
<p>Sorry, I am sometimes unsure where to put these advanced-but-probably-trivial questions. Feel free to move the topic to a more fitting stream.</p>



<a name="203813212"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Disable%20timeout/near/203813212" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Disable.20timeout.html#203813212">(Jul 14 2020 at 09:19)</a>:</h4>
<p><span class="user-mention" data-user-id="260921">@Markus Himmel</span> <code>#general</code> is for everything you are unsure about (-;</p>



<a name="203813337"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Disable%20timeout/near/203813337" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Disable.20timeout.html#203813337">(Jul 14 2020 at 09:21)</a>:</h4>
<p>There is another rule that applies here: Markus, you are <em>not</em> a new member.</p>



<a name="203813356"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Disable%20timeout/near/203813356" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Notification Bot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Disable.20timeout.html#203813356">(Jul 14 2020 at 09:21)</a>:</h4>
<p>This topic was moved here from <a class="stream-topic" data-stream-id="113489" href="/#narrow/stream/113489-new-members/topic/Disable.20timeout">#new members &gt; Disable timeout</a> by <span class="user-mention silent" data-user-id="110049">Mario Carneiro</span></p>



<a name="203813429"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Disable%20timeout/near/203813429" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Disable.20timeout.html#203813429">(Jul 14 2020 at 09:22)</a>:</h4>
<p>FWIW the test has the expected behavior when you run it from console mode (where the default timeout is infinity)</p>



<a name="203813456"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Disable%20timeout/near/203813456" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Markus Himmel <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Disable.20timeout.html#203813456">(Jul 14 2020 at 09:22)</a>:</h4>
<p>Can you reproduce the timeout from VS Code?</p>



<a name="203813480"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Disable%20timeout/near/203813480" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Disable.20timeout.html#203813480">(Jul 14 2020 at 09:23)</a>:</h4>
<p>sometimes I post in <a class="stream" data-stream-id="113489" href="/#narrow/stream/113489-new-members">#new members</a> sarcastically</p>



<a name="203813484"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Disable%20timeout/near/203813484" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Disable.20timeout.html#203813484">(Jul 14 2020 at 09:23)</a>:</h4>
<p>although I think it causes a memory leak so you might also be seeing a memory abort</p>



<a name="203813497"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Disable%20timeout/near/203813497" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Disable.20timeout.html#203813497">(Jul 14 2020 at 09:23)</a>:</h4>
<p>I can</p>



<a name="203813547"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Disable%20timeout/near/203813547" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Disable.20timeout.html#203813547">(Jul 14 2020 at 09:23)</a>:</h4>
<p>Lean doesn't have tail recursion (!) so long loops are basically memory leaks</p>



<a name="203813744"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Disable%20timeout/near/203813744" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Markus Himmel <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Disable.20timeout.html#203813744">(Jul 14 2020 at 09:26)</a>:</h4>
<p>Okay, but can the memory leak cause the <code>(deterministic) timeout</code> message?</p>



<a name="203813783"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Disable%20timeout/near/203813783" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Disable.20timeout.html#203813783">(Jul 14 2020 at 09:26)</a>:</h4>
<p>It can definitely contribute to pushing the "time" along, but it shouldn't matter if the timeout is unlimited</p>



<a name="203813794"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Disable%20timeout/near/203813794" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Disable.20timeout.html#203813794">(Jul 14 2020 at 09:27)</a>:</h4>
<p>"time" is actually memory allocations</p>



<a name="203814803"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Disable%20timeout/near/203814803" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Disable.20timeout.html#203814803">(Jul 14 2020 at 09:41)</a>:</h4>
<p>On review it looks like that option is read on thread initialization time and on <code>main()</code> but not otherwise</p>



<a name="203814830"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Disable%20timeout/near/203814830" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Disable.20timeout.html#203814830">(Jul 14 2020 at 09:41)</a>:</h4>
<p>meaning that you are stuck with whatever timeout is set at the command line</p>



<a name="203814924"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Disable%20timeout/near/203814924" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Disable.20timeout.html#203814924">(Jul 14 2020 at 09:43)</a>:</h4>
<p>I believe you can modify the lean server invocation in vscode to include a timeout setting if you want to go that route</p>



<a name="203816864"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Disable%20timeout/near/203816864" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Markus Himmel <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Disable.20timeout.html#203816864">(Jul 14 2020 at 10:10)</a>:</h4>
<p>I turns out that there is a "Lean timeout" setting in the VS Code settings, and setting this to 0 indeed does the trick.</p>



<a name="203826482"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Disable%20timeout/near/203826482" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Markus Himmel <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Disable.20timeout.html#203826482">(Jul 14 2020 at 12:24)</a>:</h4>
<p>So can <code>set_option timeout</code> be fixed or should we add a remark to the docstring of the timeout option that says that it doesn't work?</p>



<a name="204396618"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Disable%20timeout/near/204396618" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Disable.20timeout.html#204396618">(Jul 20 2020 at 08:16)</a>:</h4>
<p>This is theoretically fixable.  Please file an issue if it is very important to you.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>