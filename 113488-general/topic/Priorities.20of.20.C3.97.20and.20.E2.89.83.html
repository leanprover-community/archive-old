---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/Priorities.20of.20.C3.97.20and.20.E2.89.83.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Priorities.20of.20.C3.97.20and.20.E2.89.83.html">Priorities of × and ≃</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="169733829"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Priorities%20of%20%C3%97%20and%20%E2%89%83/near/169733829" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Priorities.20of.20.C3.97.20and.20.E2.89.83.html#169733829">(Jul 05 2019 at 20:23)</a>:</h4>
<p>Hi, currently <code>α × β ≃ γ</code> is parsed as <code>α × (β ≃ γ)</code> while it seems more natural to interpret it as <code>(α × β) ≃ γ</code>.</p>



<a name="169734371"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Priorities%20of%20%C3%97%20and%20%E2%89%83/near/169734371" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Priorities.20of.20.C3.97.20and.20.E2.89.83.html#169734371">(Jul 05 2019 at 20:33)</a>:</h4>
<p>I realize this looks odd, but type constructors deliberately have low precedence. The <code>×</code> symbol has approximately the same precedence as <code>∧</code>, because they are used to put together basic types. This is below <code>=</code>, which is near <code>≃</code>, and <code>*</code> lies above that</p>



<a name="169734446"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Priorities%20of%20%C3%97%20and%20%E2%89%83/near/169734446" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Priorities.20of.20.C3.97.20and.20.E2.89.83.html#169734446">(Jul 05 2019 at 20:34)</a>:</h4>
<p>Consider also <code>α → β ≃ γ</code></p>



<a name="169734461"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Priorities%20of%20%C3%97%20and%20%E2%89%83/near/169734461" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Priorities.20of.20.C3.97.20and.20.E2.89.83.html#169734461">(Jul 05 2019 at 20:35)</a>:</h4>
<p>That one is just clearly ambiguous and needs parentheses.</p>



<a name="169734472"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Priorities%20of%20%C3%97%20and%20%E2%89%83/near/169734472" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Priorities.20of.20.C3.97.20and.20.E2.89.83.html#169734472">(Jul 05 2019 at 20:35)</a>:</h4>
<p>(because neither interpretation would be "dumb")</p>



<a name="169734483"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Priorities%20of%20%C3%97%20and%20%E2%89%83/near/169734483" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Priorities.20of.20.C3.97.20and.20.E2.89.83.html#169734483">(Jul 05 2019 at 20:35)</a>:</h4>
<p>For <code>→</code> this order makes sense because it is often used in the sense "implies".</p>



<a name="169734500"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Priorities%20of%20%C3%97%20and%20%E2%89%83/near/169734500" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Priorities.20of.20.C3.97.20and.20.E2.89.83.html#169734500">(Jul 05 2019 at 20:36)</a>:</h4>
<p><code>α × (β ≃ γ)</code> also makes sense if you want to produce two things</p>



<a name="169734553"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Priorities%20of%20%C3%97%20and%20%E2%89%83/near/169734553" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Priorities.20of.20.C3.97.20and.20.E2.89.83.html#169734553">(Jul 05 2019 at 20:36)</a>:</h4>
<p>then you should have defined a structure with named fields, so people didn't need to listen to <code>.1</code> and <code>.2</code> :-)</p>



<a name="169734557"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Priorities%20of%20%C3%97%20and%20%E2%89%83/near/169734557" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Priorities.20of.20.C3.97.20and.20.E2.89.83.html#169734557">(Jul 05 2019 at 20:36)</a>:</h4>
<p>/me wonders if it's possible to require explicit parentheses in some cases.</p>



<a name="169734558"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Priorities%20of%20%C3%97%20and%20%E2%89%83/near/169734558" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Priorities.20of.20.C3.97.20and.20.E2.89.83.html#169734558">(Jul 05 2019 at 20:37)</a>:</h4>
<p>Sadly no</p>



<a name="169734569"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Priorities%20of%20%C3%97%20and%20%E2%89%83/near/169734569" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Priorities.20of.20.C3.97.20and.20.E2.89.83.html#169734569">(Jul 05 2019 at 20:37)</a>:</h4>
<p>although we can certainly try to impose a convention</p>



<a name="169735140"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Priorities%20of%20%C3%97%20and%20%E2%89%83/near/169735140" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Priorities.20of.20.C3.97.20and.20.E2.89.83.html#169735140">(Jul 05 2019 at 20:49)</a>:</h4>
<p>Conventions don't help newbies.</p>



<a name="169895387"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Priorities%20of%20%C3%97%20and%20%E2%89%83/near/169895387" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Priorities.20of.20.C3.97.20and.20.E2.89.83.html#169895387">(Jul 08 2019 at 18:58)</a>:</h4>
<p>There is no reason that <code>≃</code> has a precedence near <code>=</code>. <br>
<code>≃</code> only acts on types, so it makes sense for it to have lower precedence than (some) type formers. This is not the case for <code>=</code>, which should (almost) never be used on types, so it should have a precedence higher than all type formers.</p>



<a name="169895567"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Priorities%20of%20%C3%97%20and%20%E2%89%83/near/169895567" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Priorities.20of.20.C3.97.20and.20.E2.89.83.html#169895567">(Jul 08 2019 at 19:01)</a>:</h4>
<p>In the Lean 2 HoTT library the precedence of <code>≃</code> was 25, compared to <code>×</code> having 35 and <code>=</code> having 50.<br>
<a href="https://github.com/leanprover/lean2/blob/master/hott/init/equiv.hlean#L304" target="_blank" title="https://github.com/leanprover/lean2/blob/master/hott/init/equiv.hlean#L304">https://github.com/leanprover/lean2/blob/master/hott/init/equiv.hlean#L304</a><br>
<a href="https://github.com/leanprover/lean2/blob/master/hott/init/reserved_notation.hlean#L145-L208" target="_blank" title="https://github.com/leanprover/lean2/blob/master/hott/init/reserved_notation.hlean#L145-L208">https://github.com/leanprover/lean2/blob/master/hott/init/reserved_notation.hlean#L145-L208</a></p>
<p>This results in some nice statements, like</p>
<div class="codehilite"><pre><span></span>definition prod_equiv_prod [constructor] (f : A ≃ A&#39;) (g : B ≃ B&#39;) : A × B ≃ A&#39; × B&#39;
</pre></div>


<p><a href="https://github.com/leanprover/lean2/blob/master/hott/types/prod.hlean#L215" target="_blank" title="https://github.com/leanprover/lean2/blob/master/hott/types/prod.hlean#L215">https://github.com/leanprover/lean2/blob/master/hott/types/prod.hlean#L215</a></p>
<p>I do not recall ever running into issues/confusion because of these conventions.</p>



<a name="169895829"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Priorities%20of%20%C3%97%20and%20%E2%89%83/near/169895829" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Priorities.20of.20.C3.97.20and.20.E2.89.83.html#169895829">(Jul 08 2019 at 19:05)</a>:</h4>
<p>Note: <code>→</code> did (and should) have a lower precedence than <code>≃</code>, and you still require parentheses for them. This can cause confusion, but that's no reason to have the (in my opinion) wrong order for <code>×</code> and <code>≃</code>. Example :</p>
<div class="codehilite"><pre><span></span>definition arrow_equiv_arrow_right&#39; [constructor] (f1 : A → (B ≃ B&#39;)) : (A → B) ≃ (A → B&#39;)
</pre></div>


<p>(the parentheses in the type of <code>f1</code> are only for readability)<br>
<a href="https://github.com/leanprover/lean2/blob/master/hott/types/arrow.hlean#L51" target="_blank" title="https://github.com/leanprover/lean2/blob/master/hott/types/arrow.hlean#L51">https://github.com/leanprover/lean2/blob/master/hott/types/arrow.hlean#L51</a></p>



<a name="169896076"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Priorities%20of%20%C3%97%20and%20%E2%89%83/near/169896076" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Priorities.20of.20.C3.97.20and.20.E2.89.83.html#169896076">(Jul 08 2019 at 19:09)</a>:</h4>
<p>I think we should change the precedence of <code>≃</code> to 25. I have also run against this issue before (maybe with two different tokens). This is only a mathlib change, not a core change.</p>



<a name="169897230"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Priorities%20of%20%C3%97%20and%20%E2%89%83/near/169897230" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Priorities.20of.20.C3.97.20and.20.E2.89.83.html#169897230">(Jul 08 2019 at 19:25)</a>:</h4>
<p>Oh, if it's a mathlib-only change then go ahead. I agree that the precedence in equiv.lean feels consistently the wrong way around</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>