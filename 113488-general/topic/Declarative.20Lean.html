---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/Declarative.20Lean.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Declarative.20Lean.html">Declarative Lean</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="196667754"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Declarative%20Lean/near/196667754" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Brando Miranda <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Declarative.20Lean.html#196667754">(May 06 2020 at 17:21)</a>:</h4>
<p>I wanted to learn more about the options for Declarative Lean (e.g. like Isar or controlled natural language or Cezar <a href="https://kluedo.ub.uni-kl.de/frontdoor/deliver/index/docId/2100/file/B-065.pdf" title="https://kluedo.ub.uni-kl.de/frontdoor/deliver/index/docId/2100/file/B-065.pdf">https://kluedo.ub.uni-kl.de/frontdoor/deliver/index/docId/2100/file/B-065.pdf</a>). Any pointers? Does this exist for Lean?</p>



<a name="196669584"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Declarative%20Lean/near/196669584" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Declarative.20Lean.html#196669584">(May 06 2020 at 17:32)</a>:</h4>
<p>Everything I see when skimming this pdf is already possible with the tactics we have.</p>



<a name="196669690"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Declarative%20Lean/near/196669690" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Declarative.20Lean.html#196669690">(May 06 2020 at 17:33)</a>:</h4>
<p>You don't need anything new , you only need to restrict to a subset of what is available</p>



<a name="196669837"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Declarative%20Lean/near/196669837" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Declarative.20Lean.html#196669837">(May 06 2020 at 17:34)</a>:</h4>
<p>If you want to enforce using only this subset then you can have a dedicated tactic mode where you only copy the subset you want to enforce</p>



<a name="196670257"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Declarative%20Lean/near/196670257" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Declarative.20Lean.html#196670257">(May 06 2020 at 17:37)</a>:</h4>
<p>For instance you can read the discussion at <a href="#narrow/stream/113488-general/topic/Proposal.3A.20.60fix.20x.60.20for.20.60assume.20x.60" title="#narrow/stream/113488-general/topic/Proposal.3A.20.60fix.20x.60.20for.20.60assume.20x.60">https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Proposal.3A.20.60fix.20x.60.20for.20.60assume.20x.60</a>. It will contains a lot of noise from your point of view, but also interesting things for you.</p>



<a name="196670417"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Declarative%20Lean/near/196670417" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Declarative.20Lean.html#196670417">(May 06 2020 at 17:38)</a>:</h4>
<p>Here's the example on p4 of the pdf, in Lean:</p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="n">tactic</span>

<span class="kn">namespace</span> <span class="n">hidden</span>

<span class="n">def</span> <span class="n">div2</span> <span class="o">:</span> <span class="bp">ℕ</span> <span class="bp">→</span> <span class="bp">ℕ</span>
<span class="bp">|</span> <span class="mi">0</span> <span class="o">:=</span> <span class="mi">0</span>
<span class="bp">|</span> <span class="mi">1</span> <span class="o">:=</span> <span class="mi">0</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">n</span><span class="bp">+</span><span class="mi">2</span><span class="o">)</span> <span class="o">:=</span> <span class="n">div2</span> <span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span>

<span class="n">def</span> <span class="n">double</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:=</span> <span class="n">n</span> <span class="bp">+</span> <span class="n">n</span>

<span class="kn">open</span> <span class="n">nat</span>

<span class="kn">lemma</span> <span class="n">double_div2</span><span class="o">:</span> <span class="bp">∀</span> <span class="n">n</span><span class="o">,</span> <span class="n">div2</span> <span class="o">(</span><span class="n">double</span> <span class="n">n</span><span class="o">)</span> <span class="bp">=</span> <span class="n">n</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">intro</span> <span class="n">n</span><span class="o">,</span>
  <span class="n">induction</span> <span class="n">n</span> <span class="k">with</span> <span class="n">d</span> <span class="n">hd</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">refl</span><span class="o">},</span>
  <span class="n">unfold</span> <span class="n">double</span> <span class="n">at</span> <span class="n">hd</span> <span class="err">⊢</span><span class="o">,</span>
  <span class="n">rw</span> <span class="n">succ_add</span><span class="o">,</span>
  <span class="k">show</span> <span class="n">div2</span> <span class="o">(</span><span class="bp">_</span> <span class="bp">+</span> <span class="mi">2</span><span class="o">)</span> <span class="bp">=</span> <span class="bp">_</span><span class="o">,</span>
  <span class="n">rw</span> <span class="n">div2</span><span class="o">,</span>
  <span class="k">show</span> <span class="n">div2</span> <span class="o">(</span><span class="n">d</span> <span class="bp">+</span> <span class="n">d</span><span class="o">)</span> <span class="bp">+</span> <span class="bp">_</span> <span class="bp">=</span> <span class="bp">_</span><span class="o">,</span>
  <span class="n">rw</span> <span class="n">hd</span><span class="o">,</span>
<span class="kn">end</span>

<span class="kn">lemma</span> <span class="n">double_div2&#39;</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">n</span><span class="o">,</span> <span class="n">div2</span> <span class="o">(</span><span class="n">double</span> <span class="n">n</span><span class="o">)</span> <span class="bp">=</span> <span class="n">n</span> <span class="o">:=</span>
  <span class="k">assume</span> <span class="n">n</span><span class="o">,</span>
  <span class="n">nat</span><span class="bp">.</span><span class="n">rec_on</span> <span class="n">n</span>
  <span class="o">(</span> <span class="k">show</span> <span class="mi">0</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
    <span class="k">from</span> <span class="n">rfl</span><span class="o">)</span>
  <span class="o">(</span><span class="k">assume</span> <span class="n">m</span><span class="o">,</span> <span class="k">assume</span> <span class="n">Hrec</span><span class="o">,</span>
   <span class="k">calc</span> <span class="n">div2</span> <span class="o">(</span><span class="n">double</span> <span class="o">(</span><span class="n">succ</span> <span class="n">m</span><span class="o">))</span> <span class="bp">=</span> <span class="n">div2</span> <span class="o">(</span><span class="n">succ</span> <span class="n">m</span> <span class="bp">+</span> <span class="n">succ</span> <span class="n">m</span><span class="o">)</span> <span class="o">:</span> <span class="n">rfl</span>
   <span class="bp">...</span> <span class="bp">=</span> <span class="n">div2</span> <span class="o">((</span><span class="n">m</span> <span class="bp">+</span> <span class="n">m</span><span class="o">)</span> <span class="bp">+</span> <span class="mi">2</span><span class="o">)</span> <span class="o">:</span> <span class="n">congr_arg</span> <span class="bp">_</span> <span class="err">$</span> <span class="k">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">succ_add</span><span class="o">,</span> <span class="n">add_succ</span><span class="o">]</span>
   <span class="bp">...</span> <span class="bp">=</span> <span class="n">succ</span> <span class="o">(</span><span class="n">div2</span> <span class="o">(</span><span class="n">double</span> <span class="n">m</span><span class="o">))</span> <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="n">div2</span><span class="bp">;</span> <span class="n">refl</span>
   <span class="bp">...</span> <span class="bp">=</span> <span class="n">nat</span><span class="bp">.</span><span class="n">succ</span> <span class="n">m</span> <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="n">Hrec</span>
  <span class="o">)</span>

<span class="kn">end</span> <span class="n">hidden</span>
</code></pre></div>


<p>Both modes are already available.</p>



<a name="196670541"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Declarative%20Lean/near/196670541" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Declarative.20Lean.html#196670541">(May 06 2020 at 17:38)</a>:</h4>
<p>See also the example at <a href="#narrow/stream/116395-maths/topic/Lebesgue.20number.20lemma/near/194033514" title="#narrow/stream/116395-maths/topic/Lebesgue.20number.20lemma/near/194033514">https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Lebesgue.20number.20lemma/near/194033514</a></p>



<a name="196670639"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Declarative%20Lean/near/196670639" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Declarative.20Lean.html#196670639">(May 06 2020 at 17:39)</a>:</h4>
<p>The main difference with Isar (beyond the additional flexibility) is the lack of sledgehammer to proving proofs of each small step.</p>



<a name="196670761"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Declarative%20Lean/near/196670761" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Declarative.20Lean.html#196670761">(May 06 2020 at 17:40)</a>:</h4>
<p>You can also mix Kevin's example, doing the structured tactic mode style.</p>



<a name="196671249"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Declarative%20Lean/near/196671249" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Rute <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Declarative.20Lean.html#196671249">(May 06 2020 at 17:43)</a>:</h4>
<p><span class="user-mention" data-user-id="246156">@Brando Miranda</span>’s interests are in AI, so I don’t think he is asking from the point of a Lean user (i.e. how can I do this in practice), but for some other purpose (e.g. is there a formal declarative specification I can use to interact with Lean).  Can you clarify your motivation Brando?  (Also it is good to hear from you again.)</p>



<a name="196673519"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Declarative%20Lean/near/196673519" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Declarative.20Lean.html#196673519">(May 06 2020 at 18:00)</a>:</h4>
<p>Wow. Thanks Jason, that was <em>very</em> hard to guess from his message and then disappearance.</p>



<a name="196691120"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Declarative%20Lean/near/196691120" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Brando Miranda <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Declarative.20Lean.html#196691120">(May 06 2020 at 20:17)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="110031">@Patrick Massot</span> Thanks for your response. It's greatly appreciated. I'm curious, what do you mean by disappearance? I didn't know when I would get a response so I just closed the chat and would be back to it later as I have now. </p>
<p>My question has many facets. One of them is trying to understand what is the best representation from an interactive theorem prover side for machine learning (ML) systems to do proof search. I won't lie but with so many Interactive Theorem Provers (ITPs) in existence, it's been very hard for me to commit to any of them in depth (though Isabelle is the one I know best because it's the one taught in my university) because I just don't know which one is the best (especially for Machine Learning). I am not even sure what are all the features I should be considering when choosing one (especially for ML).</p>
<p>In addition, to discover that there is a declarative style ITP language added yet another layer of complexity that I didn't know existed. It's not entirely clear why to me what the main problem declarative proofs solve vs procedural (I will admit if I don't know if there are more styles I am not aware of). </p>
<p>Though, it was a pleasant surprise to hear that Lean has declarative proofs embedded in the language naturally, so I wouldn't have to worry about that if I were to choose Lean it seems, though I'm not an expert in ITPs, but I find them fascinating (and fun to use!).</p>



<a name="196691565"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Declarative%20Lean/near/196691565" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Brando Miranda <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Declarative.20Lean.html#196691565">(May 06 2020 at 20:20)</a>:</h4>
<p><span class="user-mention" data-user-id="115715">@Jason Rute</span>  Thanks for the kind message Jason. I plan to be very active this summer, as soon as classes end next week. Excited! :)</p>



<a name="196696020"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Declarative%20Lean/near/196696020" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Declarative.20Lean.html#196696020">(May 06 2020 at 20:57)</a>:</h4>
<p><span class="user-mention silent" data-user-id="246156">Brando Miranda</span> <a href="#narrow/stream/113488-general/topic/Declarative.20Lean/near/196691120" title="#narrow/stream/113488-general/topic/Declarative.20Lean/near/196691120">said</a>:</p>
<blockquote>
<p>Thanks for your response. It's greatly appreciated. I'm curious, what do you mean by disappearance? I didn't know when I would get a response so I just closed the chat and would be back to it later as I have now. </p>
</blockquote>
<p>There is no problem. I was making fun of Kevin and I trying to answer very quickly without really knowing the question (but adding some context can often help)</p>



<a name="196700328"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Declarative%20Lean/near/196700328" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Brando Miranda <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Declarative.20Lean.html#196700328">(May 06 2020 at 21:29)</a>:</h4>
<p><span class="user-mention" data-user-id="110031">@Patrick Massot</span>  Thanks! I didn't want to overwhelm people with every question I had but I am happy to start with a few first (and hopefully get them all cleared!). What problem are declarative style proofs suppose to solve (why were they invented for ITPs in particular)? Are they a good representation for proof search with respect to classical search methods or ML methods? Are they good at all for proof search?</p>



<a name="196700505"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Declarative%20Lean/near/196700505" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Declarative.20Lean.html#196700505">(May 06 2020 at 21:30)</a>:</h4>
<p>Declarative proof styles are intended for human readability. I think they are unlikely to be good for automatic search</p>



<a name="196700592"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Declarative%20Lean/near/196700592" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Declarative.20Lean.html#196700592">(May 06 2020 at 21:31)</a>:</h4>
<p>the idea is that you can get a formal proof that has the general structure of an informal maths proof</p>



<a name="196700717"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Declarative%20Lean/near/196700717" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Brando Miranda <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Declarative.20Lean.html#196700717">(May 06 2020 at 21:32)</a>:</h4>
<p>Are the grammars for procedural ITPS vs declarative ITPS usually completely separate?</p>



<a name="196700857"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Declarative%20Lean/near/196700857" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Declarative.20Lean.html#196700857">(May 06 2020 at 21:33)</a>:</h4>
<p>No, in fact they have significant overlap, which is what I think Kevin's original point was. Lean has tactics corresponding to all the different proof styles</p>



<a name="196700892"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Declarative%20Lean/near/196700892" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Brando Miranda <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Declarative.20Lean.html#196700892">(May 06 2020 at 21:33)</a>:</h4>
<p>Why does Lean have such a feature embedded, apparently, so naturally in it? Was that a major design point for Lean? It seems other languages make a big deal out of this feature (e.g. Cezar for Coq, Miz3 for HOL Light, Isar for Isabelle perhaps more out there) so I am trying to understanding it better.</p>



<a name="196701072"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Declarative%20Lean/near/196701072" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Declarative.20Lean.html#196701072">(May 06 2020 at 21:35)</a>:</h4>
<p>Lean was made with the benefit of hindsight, but I don't think it was a major design point, as much as the idea of having a dynamically extensible tactic language in the first place</p>



<a name="196701098"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Declarative%20Lean/near/196701098" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Brando Miranda <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Declarative.20Lean.html#196701098">(May 06 2020 at 21:35)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110049">Mario Carneiro</span> <a href="#narrow/stream/113488-general/topic/Declarative.20Lean/near/196700857" title="#narrow/stream/113488-general/topic/Declarative.20Lean/near/196700857">said</a>:</p>
<blockquote>
<p>No, in fact they have significant overlap, which is what I think Kevin's original point was. Lean has tactics corresponding to all the different proof styles</p>
</blockquote>
<p>But this isn't standard afaik. Otherwise why draw the distinction btw Isabelle vs Isar?</p>



<a name="196701150"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Declarative%20Lean/near/196701150" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Brando Miranda <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Declarative.20Lean.html#196701150">(May 06 2020 at 21:35)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110049">Mario Carneiro</span> <a href="#narrow/stream/113488-general/topic/Declarative.20Lean/near/196701072" title="#narrow/stream/113488-general/topic/Declarative.20Lean/near/196701072">said</a>:</p>
<blockquote>
<p>Lean was made with the benefit of hindsight, but I don't think it was a major design point, as much as the idea of having a dynamically extensible tactic language in the first place</p>
</blockquote>
<p>you mean we already know much more about ITPs before Lean was designed?</p>



<a name="196701226"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Declarative%20Lean/near/196701226" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Declarative.20Lean.html#196701226">(May 06 2020 at 21:36)</a>:</h4>
<p>Lean is only 5-6 years old. It's a baby compared to the others</p>



<a name="196701245"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Declarative%20Lean/near/196701245" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Brando Miranda <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Declarative.20Lean.html#196701245">(May 06 2020 at 21:36)</a>:</h4>
<p>Maybe this the wrong place to ask this (since the answer might be biased), but is due to this hindsight Lean the best ITP out there?</p>



<a name="196701316"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Declarative%20Lean/near/196701316" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Declarative.20Lean.html#196701316">(May 06 2020 at 21:36)</a>:</h4>
<p>That depends on what you mean by "best"</p>



<a name="196701356"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Declarative%20Lean/near/196701356" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Declarative.20Lean.html#196701356">(May 06 2020 at 21:37)</a>:</h4>
<p>I think in terms of user interface lean gets a lot of things right</p>



<a name="196701449"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Declarative%20Lean/near/196701449" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Brando Miranda <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Declarative.20Lean.html#196701449">(May 06 2020 at 21:37)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110049">Mario Carneiro</span> <a href="#narrow/stream/113488-general/topic/Declarative.20Lean/near/196701316" title="#narrow/stream/113488-general/topic/Declarative.20Lean/near/196701316">said</a>:</p>
<blockquote>
<p>That depends on what you mean by "best"</p>
</blockquote>
<p>Is it possible to learn more about the way "best" was defined for Lean? e.g. the main decision that came around for the design of Lean?</p>



<a name="196701550"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Declarative%20Lean/near/196701550" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Declarative.20Lean.html#196701550">(May 06 2020 at 21:38)</a>:</h4>
<p>There is a paper on metaprogramming in lean 3, that might be a good place to look for major design decisions</p>



<a name="196701604"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Declarative%20Lean/near/196701604" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Declarative.20Lean.html#196701604">(May 06 2020 at 21:38)</a>:</h4>
<p>that was when lean 3 first came out and differentiated itself from lean 2 with its much expanded tactic grammar</p>



<a name="196701703"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Declarative%20Lean/near/196701703" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Brando Miranda <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Declarative.20Lean.html#196701703">(May 06 2020 at 21:39)</a>:</h4>
<p>I am curious, what do you think is Lean's major advantages compared to Coq &amp; Isabelle? (I will read that reference thanks!)</p>



<a name="196701809"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Declarative%20Lean/near/196701809" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Declarative.20Lean.html#196701809">(May 06 2020 at 21:40)</a>:</h4>
<p>Different ITPs use different logics, e.g. some use higher order logic, some have the univalence axiom baked in, and so on. Hence it's difficult to say which is the "best" one -- it depends on what you plan on using it for. I have a hypothesis that Lean's particular choice of dependent type theory is the best one for doing a lot of different kinds of modern pure mathematics but it's difficult to "prove" this, other than by what we are doing, which is formalising lots of different kinds of pure mathematics and seeing what happens.</p>



<a name="196701813"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Declarative%20Lean/near/196701813" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Declarative.20Lean.html#196701813">(May 06 2020 at 21:41)</a>:</h4>
<p><a href="https://leanprover.github.io/papers/tactic.pdf" title="https://leanprover.github.io/papers/tactic.pdf">https://leanprover.github.io/papers/tactic.pdf</a></p>



<a name="196701961"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Declarative%20Lean/near/196701961" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Declarative.20Lean.html#196701961">(May 06 2020 at 21:42)</a>:</h4>
<p>Coq takes the concerns of constructivists more seriously, but because most mathematicians aren't constructivists I regard this as a hindrance. I don't really understand this link <a href="https://artagnon.com/articles/leancoq" title="https://artagnon.com/articles/leancoq">https://artagnon.com/articles/leancoq</a> but perhaps you will.</p>



<a name="196702049"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Declarative%20Lean/near/196702049" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Declarative.20Lean.html#196702049">(May 06 2020 at 21:43)</a>:</h4>
<p>Isabelle/HOL is higher order logic, not dependent type theory, so the foundations are very different. What it does, it does very well, and very quickly. But my worries when it comes to mathematics are about what it can't do well at all.</p>



<a name="196702120"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Declarative%20Lean/near/196702120" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Declarative.20Lean.html#196702120">(May 06 2020 at 21:44)</a>:</h4>
<p>But these are just my personal opinions and they're highly skewed by my personal goal, which is to see e.g. an entire undergraduate pure maths degree in one system.</p>



<a name="196702677"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Declarative%20Lean/near/196702677" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Brando Miranda <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Declarative.20Lean.html#196702677">(May 06 2020 at 21:49)</a>:</h4>
<p>Which one is the easiest to write where things that are "obvious" or "intuitive" can be taken for granted? I am guessing Lean is the best at this from this quote from the link you sent <a href="https://artagnon.com/articles/leancoq" title="https://artagnon.com/articles/leancoq">https://artagnon.com/articles/leancoq</a></p>
<blockquote>
<p>Quotient-reasoning makes formalizing commutative algebra painless, and it's baked into the Lean kernel.</p>
</blockquote>



<a name="196702912"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Declarative%20Lean/near/196702912" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Declarative.20Lean.html#196702912">(May 06 2020 at 21:51)</a>:</h4>
<p>That's an eternal goal in any theorem prover</p>



<a name="196702951"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Declarative%20Lean/near/196702951" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Declarative.20Lean.html#196702951">(May 06 2020 at 21:51)</a>:</h4>
<p>The way to prove an obvious thing is to apply the proof which someone else has already formalised in the maths library</p>



<a name="196702973"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Declarative%20Lean/near/196702973" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Declarative.20Lean.html#196702973">(May 06 2020 at 21:51)</a>:</h4>
<p>however this only works for some values of obvious</p>



<a name="196703009"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Declarative%20Lean/near/196703009" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Declarative.20Lean.html#196703009">(May 06 2020 at 21:51)</a>:</h4>
<p>and I've seen a lot of very complicated things being called obvious in research maths seminars in my time</p>



<a name="196703014"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Declarative%20Lean/near/196703014" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Brando Miranda <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Declarative.20Lean.html#196703014">(May 06 2020 at 21:52)</a>:</h4>
<p>I was surprised to read that Lean is slow? I would have thought it's really fast because of the C++</p>
<p>My inference is from this paragraph (<a href="https://artagnon.com/articles/leancoq" title="https://artagnon.com/articles/leancoq">https://artagnon.com/articles/leancoq</a>):</p>
<blockquote>
<p>One would think that Lean is an engineering feat, since it's written in C++: Coq's math-comp (90k loc) compares to Lean's mathlib (150k loc); math-comp builds in under ten minutes, while mathlib takes over thirty minutes to build! Indeed, due to their design decision to use a VM for computations, computation happens at a speed comparable to Python-bytecode evaluation — they seem to be overhauling this in Lean4 though, by compiling Lean code down to C before execution.</p>
</blockquote>



<a name="196703076"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Declarative%20Lean/near/196703076" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Declarative.20Lean.html#196703076">(May 06 2020 at 21:52)</a>:</h4>
<p>obvious can mean "known to the people in the room" sometimes.</p>



<a name="196703103"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Declarative%20Lean/near/196703103" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Brando Miranda <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Declarative.20Lean.html#196703103">(May 06 2020 at 21:52)</a>:</h4>
<p>Got it. I was just guessing based on the comment from the blog you sent me.</p>



<a name="196703124"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Declarative%20Lean/near/196703124" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Declarative.20Lean.html#196703124">(May 06 2020 at 21:52)</a>:</h4>
<p>Lean is <em>surprisingly</em> fast when you look at how much it is doing</p>



<a name="196703169"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Declarative%20Lean/near/196703169" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Brando Miranda <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Declarative.20Lean.html#196703169">(May 06 2020 at 21:53)</a>:</h4>
<p>hmm...What is it doing?</p>



<a name="196703197"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Declarative%20Lean/near/196703197" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Declarative.20Lean.html#196703197">(May 06 2020 at 21:53)</a>:</h4>
<p>The main slow things in lean are VM evaluation and typeclass inference</p>



<a name="196703215"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Declarative%20Lean/near/196703215" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Brando Miranda <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Declarative.20Lean.html#196703215">(May 06 2020 at 21:53)</a>:</h4>
<p>I guess from a proof search point of view (my interest mainly), I would be really happy if my ITP environment is fast. Very fast.</p>



<a name="196703239"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Declarative%20Lean/near/196703239" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Declarative.20Lean.html#196703239">(May 06 2020 at 21:54)</a>:</h4>
<p>VM evaluation is used for running tactics, which does impact your ML bottom line</p>



<a name="196703319"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Declarative%20Lean/near/196703319" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Brando Miranda <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Declarative.20Lean.html#196703319">(May 06 2020 at 21:54)</a>:</h4>
<p>But perhaps to focus only on fast is a naive goal. Hence the discussion I started and my interest in learning about Lean more (&amp; declarative proofs).</p>



<a name="196703369"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Declarative%20Lean/near/196703369" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Brando Miranda <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Declarative.20Lean.html#196703369">(May 06 2020 at 21:55)</a>:</h4>
<p>Also, if proofs are going to be generated, it would be nice that they are human understandable, hence why I was curious about declarative style proofs (since that seems to be their main goal afaik).</p>



<a name="196703395"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Declarative%20Lean/near/196703395" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Declarative.20Lean.html#196703395">(May 06 2020 at 21:55)</a>:</h4>
<p>I think that a fast ITP is a great goal (which is why <a href="https://github.com/digama0/mm0" title="https://github.com/digama0/mm0">I built one</a>). It's tough selling this to the community though</p>



<a name="196703555"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Declarative%20Lean/near/196703555" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Declarative.20Lean.html#196703555">(May 06 2020 at 21:57)</a>:</h4>
<p>I still have hope for post processing arbitrary proofs to make them more human readable / navigable / understandable</p>



<a name="196703739"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Declarative%20Lean/near/196703739" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Declarative.20Lean.html#196703739">(May 06 2020 at 21:58)</a>:</h4>
<p>the main downside of procedural proofs is that you have to have the proof state in your head at all times to read the proof, which in practice means they can't be read without the program running alongside</p>



<a name="196703844"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Declarative%20Lean/near/196703844" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jannis Limperg <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Declarative.20Lean.html#196703844">(May 06 2020 at 21:59)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110049">Mario Carneiro</span> <a href="#narrow/stream/113488-general/topic/Declarative.20Lean/near/196703124" title="#narrow/stream/113488-general/topic/Declarative.20Lean/near/196703124">said</a>:</p>
<blockquote>
<p>Lean is <em>surprisingly</em> fast when you look at how much it is doing</p>
</blockquote>
<p>Is there any evidence for this? Coq also does typeclasses and tactic-based metaprogramming, and while Lean is not particularly slow, it also hasn't struck me as particularly fast. The mathlib compile times aren't great, but there is no direct comparison, so it's hard to evaluate these claims.</p>



<a name="196703845"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Declarative%20Lean/near/196703845" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Declarative.20Lean.html#196703845">(May 06 2020 at 21:59)</a>:</h4>
<p>That at least is easy enough to fix post facto</p>



<a name="196703941"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Declarative%20Lean/near/196703941" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Declarative.20Lean.html#196703941">(May 06 2020 at 22:00)</a>:</h4>
<p>The typeclass problems lean has to slog though are <em>gigantic</em></p>



<a name="196704130"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Declarative%20Lean/near/196704130" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Declarative.20Lean.html#196704130">(May 06 2020 at 22:02)</a>:</h4>
<p>I don't think Coq does as much with dynamic tactics as lean</p>



<a name="196704175"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Declarative%20Lean/near/196704175" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Declarative.20Lean.html#196704175">(May 06 2020 at 22:02)</a>:</h4>
<p>most tactics are implemented in ML, certainly any of the "serious" ones. This gives them a big performance advantage</p>



<a name="196704405"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Declarative%20Lean/near/196704405" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Declarative.20Lean.html#196704405">(May 06 2020 at 22:05)</a>:</h4>
<p>Lean is definitely slow when you look at how many lines of source it goes through per second, but that is more reflective of the complexity of the problems it has set itself (dependent type theory, unification up to definitional reduction, typeclass searches all over the place, etc) than the implementation (which is quite efficient and well optimized)</p>



<a name="196704571"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Declarative%20Lean/near/196704571" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Declarative.20Lean.html#196704571">(May 06 2020 at 22:07)</a>:</h4>
<p>Put another way, I think you would have a hard time beating lean at its own game, that is, an alternate lean typechecker. If you change the game then you can get huge (orders of magnitude) wins, but you won't see that with e.g. better allocation strategies</p>



<a name="196705249"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Declarative%20Lean/near/196705249" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Declarative.20Lean.html#196705249">(May 06 2020 at 22:14)</a>:</h4>
<p><span class="user-mention silent" data-user-id="256311">Jannis Limperg</span> <a href="#narrow/stream/113488-general/topic/Declarative.20Lean/near/196703844" title="#narrow/stream/113488-general/topic/Declarative.20Lean/near/196703844">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="110049">Mario Carneiro</span> <a href="#narrow/stream/113488-general/topic/Declarative.20Lean/near/196703124" title="#narrow/stream/113488-general/topic/Declarative.20Lean/near/196703124">said</a>:</p>
<blockquote>
<p>Lean is <em>surprisingly</em> fast when you look at how much it is doing</p>
</blockquote>
<p>Is there any evidence for this? Coq also does typeclasses and tactic-based metaprogramming, and while Lean is not particularly slow, it also hasn't struck me as particularly fast. The mathlib compile times aren't great, but there is no direct comparison, so it's hard to evaluate these claims.</p>
</blockquote>
<p>Note that I include busywork in this sense of "how much it is doing". E.g. superman took 2 hours to cross the town, which doesn't sound fast until you realize he circled the world a hundred times first</p>



<a name="196705335"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Declarative%20Lean/near/196705335" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Declarative.20Lean.html#196705335">(May 06 2020 at 22:15)</a>:</h4>
<p>The gains in lean 4 for typeclass inference are solidly in the realm of "eliminating busywork"</p>



<a name="196705440"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Declarative%20Lean/near/196705440" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jannis Limperg <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Declarative.20Lean.html#196705440">(May 06 2020 at 22:16)</a>:</h4>
<p>On typeclasses, it would be interesting to know how Coq fares on similarly sized problems. Afaict, their algorithms are very similar, at least until we get the tabled stuff.</p>
<p>On tactics, Lean also delegates to C++ quite a bit; after all, the standard tactics library consists mainly of thin wrappers around C++. The big Coq projects (e.g. anything by Chiplala) also have a ton of custom Ltac, some of it very complex, so I'm not sure Lean is unique in this regard.</p>
<p>I'm not saying that Lean is slow, and I certainly couldn't develop a faster Lean typechecker. But in the absence of evidence, I'll remain skeptical that it's significantly faster than the competition at similar tasks.</p>



<a name="196705571"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Declarative%20Lean/near/196705571" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Declarative.20Lean.html#196705571">(May 06 2020 at 22:18)</a>:</h4>
<p>Coq doesn't use typeclasses nearly as pervasively as mathlib. math-comp uses canonical instances instead, which solve the problem in a different way with more up front work for the user and a better asymptotic behavior for the problems generated</p>



<a name="196705654"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Declarative%20Lean/near/196705654" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Declarative.20Lean.html#196705654">(May 06 2020 at 22:19)</a>:</h4>
<p>I would bet that if you ported mathlib to coq, using coq typeclasses, lean would outperform coq</p>



<a name="196706090"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Declarative%20Lean/near/196706090" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Declarative.20Lean.html#196706090">(May 06 2020 at 22:24)</a>:</h4>
<p>Lean's tactic mode is also seemingly more flexible than Coq's. In Coq you just start every proof in tactic mode, term proofs seem to be rare, and they are built right into the grammar. By contrast, in lean a begin end block can be anywhere in the term, and when it hits one it translates the tactic block into a term (running the tactic parsers in the VM), typechecks the term, then evaluates the result (also in the VM), eventually calling back in to C++. This setup is a lot more flexible but it comes at a noticeable performance cost</p>



<a name="196706229"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Declarative%20Lean/near/196706229" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Declarative.20Lean.html#196706229">(May 06 2020 at 22:26)</a>:</h4>
<p>In any case, I'm just speculating, and I don't have enough experience with coq to make a strong argument</p>



<a name="196707774"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Declarative%20Lean/near/196707774" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Brando Miranda <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Declarative.20Lean.html#196707774">(May 06 2020 at 22:47)</a>:</h4>
<p>Thanks for performance discussion! Very interesting for me as an ML person but back to declarative languages. </p>
<p>I was asking because Isabelle has sledgehammers and they often suggest Isar proofs. Which seem to outline the general shape of proofs + are more readable which made me think that perhaps declarative languages are just as easy to proof search. Which lead to this discussion. Is that true for Lean too? Why are Isar proofs so readily avaiable by the sledgehammer?</p>



<a name="196708183"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Declarative%20Lean/near/196708183" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jannis Limperg <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Declarative.20Lean.html#196708183">(May 06 2020 at 22:52)</a>:</h4>
<p>Sorry Brando, I'll stop hijacking your thread now. ;)</p>
<p>For Sledgehammer, I'll try to summon <span class="user-mention" data-user-id="121058">@Jasmin Blanchette</span>; he can probably tell you whether Isar makes this sort of thing easier.</p>



<a name="196709087"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Declarative%20Lean/near/196709087" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Declarative.20Lean.html#196709087">(May 06 2020 at 23:06)</a>:</h4>
<p>As they say, when all you have is a hammer, everything looks like a nail. I think it finds declarative proofs because that's the way isabelle is designed to present proofs. The things the ATPs are solving are full proofs anyway; you can present those proofs however you like.</p>



<a name="196710438"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Declarative%20Lean/near/196710438" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Rute <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Declarative.20Lean.html#196710438">(May 06 2020 at 23:26)</a>:</h4>
<p>Does <span class="user-mention" data-user-id="110043">@Gabriel Ebner</span>'s Lean-hammer supply proofs?  What do those look like?</p>



<a name="196711009"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Declarative%20Lean/near/196711009" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Rute <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Declarative.20Lean.html#196711009">(May 06 2020 at 23:34)</a>:</h4>
<p>I think from the point of view of AI, Lean has certain advantages and disadvantages:<br>
Advantages:</p>
<ul>
<li>It is very popular, partly because it has a lot of nice features which make proving things easy, and because it has a great active community.</li>
<li>Lean has a lot of built in tools (like a tactic language, an io interface, a parser and a server) which make proof recording and interaction possible (not as nice as I'd like, but possible) without hacking the C++ code.</li>
<li>It has a reasonable size library.</li>
</ul>
<p>Disadvanatages</p>
<ul>
<li>All those "nice" features make Lean hard to parse.  You can have <code>by</code> blocks in term mode in <code>calc</code> mode in <code>begin...end</code> blocks.  This makes proof recording and other data-gathering tasks difficult.  </li>
<li>Also the behavior of tactics can change depending on attributes attached to theorems.</li>
<li>There is nothing like it now, so it needs to be built from scratch.</li>
<li>Everyone is telling me to wait for Lean 4 <span aria-label="slight smile" class="emoji emoji-1f642" role="img" title="slight smile">:slight_smile:</span> but I don't listen.</li>
</ul>



<a name="196711440"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Declarative%20Lean/near/196711440" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Rute <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Declarative.20Lean.html#196711440">(May 06 2020 at 23:41)</a>:</h4>
<p>Also, this is really off-topic now, but as for speed and AI, I think I've found a performant way to interact with Lean as a gym environment and to call a trained AI from within Lean as a tactic.  I'm playing around with it more, but it requires some more engineering.  I think I'll have a prototype (only a subset of Lean tactics) in about 2 weeks.</p>



<a name="196711679"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Declarative%20Lean/near/196711679" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Rute <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Declarative.20Lean.html#196711679">(May 06 2020 at 23:44)</a>:</h4>
<p>Ok, I think that last paragraph promises more than I intend.  I won't have DeepHOL for Lean (or even TacticToe for Lean) anytime soon, but I'm saying I think I've found a path to making them and I'll create a small demo of that path soon.</p>



<a name="196722939"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Declarative%20Lean/near/196722939" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Declarative.20Lean.html#196722939">(May 07 2020 at 03:08)</a>:</h4>
<p>Me when switching from <a href="#narrow/stream/113488-general/topic/Is.20.7B.2E.2E.2E.7D.20a.20tactic.3F" title="#narrow/stream/113488-general/topic/Is.20.7B.2E.2E.2E.7D.20a.20tactic.3F">Is {...} a tactic?</a> to this thread: <a href="https://i.gifer.com/7Cca.mp4" title="https://i.gifer.com/7Cca.mp4">https://i.gifer.com/7Cca.mp4</a></p>



<a name="196728015"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Declarative%20Lean/near/196728015" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jasmin Blanchette <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Declarative.20Lean.html#196728015">(May 07 2020 at 05:17)</a>:</h4>
<p>Sledgehammer sometimes suggest Isar proofs because these can then follow the structure of the ATP proofs step by step. I don't see a good way to do this with only tactics -- you'd quickly get out of sync with the ATP proof. My JAR article "Semi-intelligible ..." shows some examples of ATP vs. Isar proofs.</p>



<a name="196736933"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Declarative%20Lean/near/196736933" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Declarative.20Lean.html#196736933">(May 07 2020 at 07:50)</a>:</h4>
<p><span class="user-mention silent" data-user-id="115715">Jason Rute</span> <a href="#narrow/stream/113488-general/topic/Declarative.20Lean/near/196710438" title="#narrow/stream/113488-general/topic/Declarative.20Lean/near/196710438">said</a>:</p>
<blockquote>
<p>Does <span class="user-mention silent" data-user-id="110043">Gabriel Ebner</span>'s Lean-hammer supply proofs?  What do those look like?</p>
</blockquote>
<p>I'm kind of waiting for Lean 4 at the moment, because I'm tired of the performance issues right now.  The tactic scripts it produces are of the form <code>by super [list, of, lemmas]</code> (where <code>super</code> is a first-order prover).  The proof terms produced by the tactic are semi-legible, at least you can make out the steps of the prover.</p>



<a name="196996874"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Declarative%20Lean/near/196996874" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Brando Miranda <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Declarative.20Lean.html#196996874">(May 09 2020 at 15:30)</a>:</h4>
<p><span class="user-mention silent" data-user-id="115715">Jason Rute</span> <a href="#narrow/stream/113488-general/topic/Declarative.20Lean/near/196711440" title="#narrow/stream/113488-general/topic/Declarative.20Lean/near/196711440">said</a>:</p>
<blockquote>
<p>Also, this is really off-topic now, but as for speed and AI, I think I've found a performant way to interact with Lean as a gym environment and to call a trained AI from within Lean as a tactic.  I'm playing around with it more, but it requires some more engineering.  I think I'll have a prototype (only a subset of Lean tactics) in about 2 weeks.</p>
</blockquote>
<p>I'd like to get involved in some way with your Lean + AI hacking (though I might miss messages in this stream because I'm can't figure out how to mute all the general things without muting this one).</p>



<a name="196996957"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Declarative%20Lean/near/196996957" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Brando Miranda <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Declarative.20Lean.html#196996957">(May 09 2020 at 15:32)</a>:</h4>
<p>I'm trying to wrap my head around the discussion in the thread with respect to ATPs + Hammers + producing Declarative proofs in Lean. Is the consensus that it's not as straight forward as it is in Isabelle because Isabelle is by design intended to be a declarative ITP language?</p>



<a name="196997213"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Declarative%20Lean/near/196997213" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Brando Miranda <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Declarative.20Lean.html#196997213">(May 09 2020 at 15:39)</a>:</h4>
<p><span class="user-mention silent" data-user-id="115715">Jason Rute</span> <a href="#narrow/stream/113488-general/topic/Declarative.20Lean/near/196711009" title="#narrow/stream/113488-general/topic/Declarative.20Lean/near/196711009">said</a>:</p>
<blockquote>
<ul>
<li>Lean has a lot of built in tools (like a tactic language, an io interface, a parser and a server) which make proof recording and interaction possible (not as nice as I'd like, but possible) without hacking the C++ code.</li>
</ul>
</blockquote>
<p>This seems like a really big advantage from an ML perspective.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>