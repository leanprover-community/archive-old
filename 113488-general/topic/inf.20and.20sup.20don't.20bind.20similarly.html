---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/inf.20and.20sup.20don't.20bind.20similarly.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/inf.20and.20sup.20don't.20bind.20similarly.html">inf and sup don't bind similarly</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="263693615"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/inf%20and%20sup%20don%27t%20bind%20similarly/near/263693615" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rémy Degenne <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/inf.20and.20sup.20don't.20bind.20similarly.html#263693615">(Dec 04 2021 at 08:51)</a>:</h4>
<p>It looks like <code>inf</code> and <code>sup</code> don't behave similarly in expressions involving arithmetic operations. See the mwe below:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">order.lattice</span>
<span class="kn">import</span> <span class="n">algebra.algebra.basic</span>

<span class="kd">variables</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">lattice</span> <span class="n">α</span><span class="o">]</span> <span class="o">[</span><span class="n">add_monoid</span> <span class="n">α</span><span class="o">]</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">α</span><span class="o">)</span>

<span class="kd">example</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">+</span> <span class="n">b</span> <span class="bp">⊓</span> <span class="n">c</span> <span class="bp">=</span> <span class="n">a</span> <span class="bp">+</span> <span class="o">(</span><span class="n">b</span> <span class="bp">⊓</span> <span class="n">c</span><span class="o">)</span> <span class="o">:=</span> <span class="n">rfl</span>
<span class="kd">example</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">+</span> <span class="n">b</span> <span class="bp">⊔</span> <span class="n">c</span> <span class="bp">=</span> <span class="o">(</span><span class="n">a</span> <span class="bp">+</span> <span class="n">b</span><span class="o">)</span> <span class="bp">⊔</span> <span class="n">c</span> <span class="o">:=</span> <span class="n">rfl</span>
</code></pre></div>
<p>How would I change that? The two notations are defined in order/lattice:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="sd">/-- Typeclass for the `⊔` (`\lub`) notation -/</span>
<span class="kd">@[notation_class]</span> <span class="kd">class</span> <span class="n">has_sup</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span> <span class="o">:=</span> <span class="o">(</span><span class="n">sup</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">α</span><span class="o">)</span>
<span class="sd">/-- Typeclass for the `⊓` (`\glb`) notation -/</span>
<span class="kd">@[notation_class]</span> <span class="kd">class</span> <span class="n">has_inf</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span> <span class="o">:=</span> <span class="o">(</span><span class="n">inf</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">α</span><span class="o">)</span>

<span class="kd">infix</span> <span class="bp">⊔</span> <span class="o">:=</span> <span class="n">has_sup.sup</span>
<span class="kd">infix</span> <span class="bp">⊓</span> <span class="o">:=</span> <span class="n">has_inf.inf</span>
</code></pre></div>
<p>I don't see why they interact differently with <code>+</code>.</p>



<a name="263694656"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/inf%20and%20sup%20don%27t%20bind%20similarly/near/263694656" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/inf.20and.20sup.20don't.20bind.20similarly.html#263694656">(Dec 04 2021 at 09:14)</a>:</h4>
<p>Somewhere there is probably a <code>reserve notation</code></p>



<a name="263712433"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/inf%20and%20sup%20don%27t%20bind%20similarly/near/263712433" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/inf.20and.20sup.20don't.20bind.20similarly.html#263712433">(Dec 04 2021 at 14:56)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib/blob/master/src/tactic/reserved_notation.lean#L50">https://github.com/leanprover-community/mathlib/blob/master/src/tactic/reserved_notation.lean#L50</a></p>



<a name="263712617"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/inf%20and%20sup%20don%27t%20bind%20similarly/near/263712617" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rémy Degenne <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/inf.20and.20sup.20don't.20bind.20similarly.html#263712617">(Dec 04 2021 at 15:00)</a>:</h4>
<p>Thanks! Indeed there is a difference:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">reserve</span> <span class="kd">infixl</span> <span class="bp">`</span> <span class="bp">⊓</span> <span class="bp">`</span><span class="o">:</span><span class="mi">70</span>
<span class="kd">reserve</span> <span class="kd">infixl</span> <span class="bp">`</span> <span class="bp">⊔</span> <span class="bp">`</span><span class="o">:</span><span class="mi">65</span>
</code></pre></div>
<p>I guess it's different in order to have a well defined binding order between these two notations? And the number for <code>+</code> falls somewhere in between, maybe? Where can I find the one for <code>+</code>?</p>



<a name="263712878"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/inf%20and%20sup%20don%27t%20bind%20similarly/near/263712878" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/inf.20and.20sup.20don't.20bind.20similarly.html#263712878">(Dec 04 2021 at 15:05)</a>:</h4>
<p>that one is in core with most of the others:<br>
<a href="https://github.com/leanprover-community/lean/blob/4887d8a30621941c883f208e151e61ab268c006d/library/init/core.lean#L336">https://github.com/leanprover-community/lean/blob/4887d8a30621941c883f208e151e61ab268c006d/library/init/core.lean#L336</a></p>



<a name="263713100"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/inf%20and%20sup%20don%27t%20bind%20similarly/near/263713100" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rémy Degenne <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/inf.20and.20sup.20don't.20bind.20similarly.html#263713100">(Dec 04 2021 at 15:10)</a>:</h4>
<p>Thanks. It's the first time I look at that type of issue. <code>+</code> and <code>-</code> are at 65 as well. Am I correct in thinking that if we change <code>⊔</code> to 66 then it should behave like <code>⊓</code> with respect to <code>+</code> and <code>-</code>?</p>



<a name="263714148"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/inf%20and%20sup%20don%27t%20bind%20similarly/near/263714148" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/inf.20and.20sup.20don't.20bind.20similarly.html#263714148">(Dec 04 2021 at 15:31)</a>:</h4>
<p><code>#print notation</code> will show you the precedence of all the notation, in case you didn't know</p>



<a name="263714315"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/inf%20and%20sup%20don%27t%20bind%20similarly/near/263714315" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/inf.20and.20sup.20don't.20bind.20similarly.html#263714315">(Dec 04 2021 at 15:34)</a>:</h4>
<p>Currently we have <code> `∑`:1024 binders `,`:0 (scoped 67) := #0 </code>, which suggests to me that that <code>⊔</code> should be at least 68 so that <code>∑ i, f i ⊔ x</code> means <code>(∑ i, f i) ⊔ x</code> to match the behavior on <code>inf</code>.</p>



<a name="263714873"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/inf%20and%20sup%20don%27t%20bind%20similarly/near/263714873" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/inf.20and.20sup.20don't.20bind.20similarly.html#263714873">(Dec 04 2021 at 15:45)</a>:</h4>
<p>Isn't that parenthesization backwards? I notice the original message carefully avoided specifying which behavior is desired.<br>
For me <code>a + b ⊔ c = (a + b) ⊔ c</code> seems a bit more natural, I guess.</p>



<a name="263714950"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/inf%20and%20sup%20don%27t%20bind%20similarly/near/263714950" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/inf.20and.20sup.20don't.20bind.20similarly.html#263714950">(Dec 04 2021 at 15:46)</a>:</h4>
<p>Mostly it would be nice if it was just an error, for all the combinations--but I don't think Lean supports this</p>



<a name="263715694"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/inf%20and%20sup%20don%27t%20bind%20similarly/near/263715694" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rémy Degenne <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/inf.20and.20sup.20don't.20bind.20similarly.html#263715694">(Dec 04 2021 at 16:01)</a>:</h4>
<p><span class="user-mention silent" data-user-id="310045">Eric Wieser</span> <a href="#narrow/stream/113488-general/topic/inf.20and.20sup.20don't.20bind.20similarly/near/263714148">said</a>:</p>
<blockquote>
<p><code>#print notation</code> will show you the precedence of all the notation, in case you didn't know</p>
</blockquote>
<p>Thanks, I did not know that.</p>



<a name="263715881"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/inf%20and%20sup%20don%27t%20bind%20similarly/near/263715881" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rémy Degenne <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/inf.20and.20sup.20don't.20bind.20similarly.html#263715881">(Dec 04 2021 at 16:04)</a>:</h4>
<p>I don't have a preference for one of the two behaviours. But I'd like it to be the same. Bumping sup to 69 to have it very close to inf looks like the easiest solution.</p>



<a name="263715896"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/inf%20and%20sup%20don%27t%20bind%20similarly/near/263715896" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/inf.20and.20sup.20don't.20bind.20similarly.html#263715896">(Dec 04 2021 at 16:04)</a>:</h4>
<p>Personally I'd have assumed their precedences were one off.</p>



<a name="263716306"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/inf%20and%20sup%20don%27t%20bind%20similarly/near/263716306" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rémy Degenne <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/inf.20and.20sup.20don't.20bind.20similarly.html#263716306">(Dec 04 2021 at 16:13)</a>:</h4>
<p>I'll PR that change</p>



<a name="263718340"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/inf%20and%20sup%20don%27t%20bind%20similarly/near/263718340" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/inf.20and.20sup.20don't.20bind.20similarly.html#263718340">(Dec 04 2021 at 16:51)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110032">Reid Barton</span> <a href="#narrow/stream/113488-general/topic/inf.20and.20sup.20don't.20bind.20similarly/near/263714873">said</a>:</p>
<blockquote>
<p>Isn't that parenthesization backwards? I notice the original message carefully avoided specifying which behavior is desired.<br>
For me <code>a + b ⊔ c = (a + b) ⊔ c</code> seems a bit more natural, I guess.</p>
</blockquote>
<p>Isn't what you consider more natural consistent with my parenthesization?</p>



<a name="263719791"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/inf%20and%20sup%20don%27t%20bind%20similarly/near/263719791" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/inf.20and.20sup.20don't.20bind.20similarly.html#263719791">(Dec 04 2021 at 17:13)</a>:</h4>
<p>Yes but it's not the effect that <code>⊔:68</code> would have.</p>



<a name="263721193"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/inf%20and%20sup%20don%27t%20bind%20similarly/near/263721193" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/inf.20and.20sup.20don't.20bind.20similarly.html#263721193">(Dec 04 2021 at 17:35)</a>:</h4>
<p>Ah, right; then I guess:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">reserve</span> <span class="kd">infixl</span> <span class="bp">`</span> <span class="bp">⊓</span> <span class="bp">`</span><span class="o">:</span><span class="mi">64</span>
<span class="kd">reserve</span> <span class="kd">infixl</span> <span class="bp">`</span> <span class="bp">⊔</span> <span class="bp">`</span><span class="o">:</span><span class="mi">63</span>
</code></pre></div>
<p>would have the desired effect</p>



<a name="263721319"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/inf%20and%20sup%20don%27t%20bind%20similarly/near/263721319" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rémy Degenne <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/inf.20and.20sup.20don't.20bind.20similarly.html#263721319">(Dec 04 2021 at 17:38)</a>:</h4>
<p>putting sup to 69 caused no error anywhere (the build completed just now). I will change to those values and see what I get.</p>



<a name="263721501"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/inf%20and%20sup%20don%27t%20bind%20similarly/near/263721501" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/inf.20and.20sup.20don't.20bind.20similarly.html#263721501">(Dec 04 2021 at 17:42)</a>:</h4>
<p>I quite prefer <code>a + b ⊔ c = a + (b ⊔ c)</code> in the sense that <code>+</code> is almost alien to sets, so you would read and group first set operations, then those alien pointwise addition.</p>



<a name="263721596"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/inf%20and%20sup%20don%27t%20bind%20similarly/near/263721596" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/inf.20and.20sup.20don't.20bind.20similarly.html#263721596">(Dec 04 2021 at 17:44)</a>:</h4>
<p>What about on the naturals? <code>⊔ </code> is alien to sets too so that's a weird comparison.</p>



<a name="263721617"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/inf%20and%20sup%20don%27t%20bind%20similarly/near/263721617" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rémy Degenne <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/inf.20and.20sup.20don't.20bind.20similarly.html#263721617">(Dec 04 2021 at 17:45)</a>:</h4>
<p>to sets? I'm thinking of sup as a max in an order which is not linear. For sets you would use union</p>



<a name="263721623"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/inf%20and%20sup%20don%27t%20bind%20similarly/near/263721623" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/inf.20and.20sup.20don't.20bind.20similarly.html#263721623">(Dec 04 2021 at 17:45)</a>:</h4>
<p>Hmm... still</p>



<a name="263721672"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/inf%20and%20sup%20don%27t%20bind%20similarly/near/263721672" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/inf.20and.20sup.20don't.20bind.20similarly.html#263721672">(Dec 04 2021 at 17:46)</a>:</h4>
<p><code>⊔</code> is basically <code>max</code> and <code>max a b + c = (max a b) + c</code></p>



<a name="263721684"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/inf%20and%20sup%20don%27t%20bind%20similarly/near/263721684" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/inf.20and.20sup.20don't.20bind.20similarly.html#263721684">(Dec 04 2021 at 17:46)</a>:</h4>
<p>That argument is lousy though, because you could use it to justify maximum precedence for any operator just by replacing it with a function invocation:</p>
<blockquote>
<p><code>+</code> is basically <code>add</code> so <code>add a b ⊔ c = (add a b) ⊔ c</code></p>
</blockquote>



<a name="263721760"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/inf%20and%20sup%20don%27t%20bind%20similarly/near/263721760" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rémy Degenne <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/inf.20and.20sup.20don't.20bind.20similarly.html#263721760">(Dec 04 2021 at 17:48)</a>:</h4>
<p><span class="user-mention silent" data-user-id="310045">Eric Wieser</span> <a href="#narrow/stream/113488-general/topic/inf.20and.20sup.20don't.20bind.20similarly/near/263721193">said</a>:</p>
<blockquote>
<p>Ah, right; then I guess:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">reserve</span> <span class="kd">infixl</span> <span class="bp">`</span> <span class="bp">⊓</span> <span class="bp">`</span><span class="o">:</span><span class="mi">64</span>
<span class="kd">reserve</span> <span class="kd">infixl</span> <span class="bp">`</span> <span class="bp">⊔</span> <span class="bp">`</span><span class="o">:</span><span class="mi">63</span>
</code></pre></div>
<p>would have the desired effect</p>
</blockquote>
<p>The build fails very quickly with those... I don't have the courage to fix everything if it's more than a couple of errors. If that's the case and we really want those values, somebody else will have to do it.</p>



<a name="263721785"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/inf%20and%20sup%20don%27t%20bind%20similarly/near/263721785" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/inf.20and.20sup.20don't.20bind.20similarly.html#263721785">(Dec 04 2021 at 17:49)</a>:</h4>
<p>Can you give an example of the expression that causes the failure?</p>



<a name="263721797"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/inf%20and%20sup%20don%27t%20bind%20similarly/near/263721797" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rémy Degenne <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/inf.20and.20sup.20don't.20bind.20similarly.html#263721797">(Dec 04 2021 at 17:49)</a>:</h4>
<p>see <a href="https://github.com/leanprover-community/mathlib/tree/sup_bind">branch#sup_bind</a></p>



<a name="263721911"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/inf%20and%20sup%20don%27t%20bind%20similarly/near/263721911" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/inf.20and.20sup.20don't.20bind.20similarly.html#263721911">(Dec 04 2021 at 17:50)</a>:</h4>
<p>Hmm, worth also noting that <code>*</code> has the same precedence as <code>⊓</code> in master</p>



<a name="263722042"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/inf%20and%20sup%20don%27t%20bind%20similarly/near/263722042" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/inf.20and.20sup.20don't.20bind.20similarly.html#263722042">(Dec 04 2021 at 17:53)</a>:</h4>
<p>Perhaps <span class="user-mention" data-user-id="373192">@Christopher Hoskin</span> can comment on what they think the relative precedence of <code>+*⊓⊔</code> should be, since the file they authored is the one causing the trouble, and also the one that mixes the notations the most.</p>



<a name="263722459"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/inf%20and%20sup%20don%27t%20bind%20similarly/near/263722459" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rémy Degenne <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/inf.20and.20sup.20don't.20bind.20similarly.html#263722459">(Dec 04 2021 at 18:00)</a>:</h4>
<p>right, the error is in <code>src/algebra/lattice_ordered_group.lean</code>. That's not too bad, since it's not imported by many other files. If that is the only part of mathlib in which there are errors, it will be fixable easily. My original reason for looking at those precedences is related to that file, since I am putting a <code>normed_lattice_add_comm_group</code> instance on Lp.</p>



<a name="263722503"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/inf%20and%20sup%20don%27t%20bind%20similarly/near/263722503" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Christopher Hoskin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/inf.20and.20sup.20don't.20bind.20similarly.html#263722503">(Dec 04 2021 at 18:01)</a>:</h4>
<blockquote>
<p>Perhaps <span class="user-mention silent" data-user-id="373192">Christopher Hoskin</span> can comment on what they think the relative precedence of <code>+*⊓⊔</code> should be, since the file they authored is the one causing the trouble, and also the one that mixes the notations the most.</p>
</blockquote>
<p>I 'd noticed this, but didn't realise that I'd caused the problem!</p>



<a name="263722610"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/inf%20and%20sup%20don%27t%20bind%20similarly/near/263722610" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rémy Degenne <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/inf.20and.20sup.20don't.20bind.20similarly.html#263722610">(Dec 04 2021 at 18:03)</a>:</h4>
<p>You did not cause the problem, but your files are the (only?) ones in which it manifests.</p>



<a name="263722615"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/inf%20and%20sup%20don%27t%20bind%20similarly/near/263722615" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rémy Degenne <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/inf.20and.20sup.20don't.20bind.20similarly.html#263722615">(Dec 04 2021 at 18:03)</a>:</h4>
<p>So you might have an opinion on the matter</p>



<a name="263722742"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/inf%20and%20sup%20don%27t%20bind%20similarly/near/263722742" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Christopher Hoskin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/inf.20and.20sup.20don't.20bind.20similarly.html#263722742">(Dec 04 2021 at 18:05)</a>:</h4>
<p>I think <code>a + b ⊔ c = a + (b ⊔ c)</code> is what I'd intuitively assume (which doesn't make it right!)</p>



<a name="263723066"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/inf%20and%20sup%20don%27t%20bind%20similarly/near/263723066" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/inf.20and.20sup.20don't.20bind.20similarly.html#263723066">(Dec 04 2021 at 18:10)</a>:</h4>
<p>What about <code>*</code> and <code>⊓</code>? I assume we all agree on the relative precendence within <code>+*</code> and <code>⊔⊓</code>, but that still leaves us with  6 variations to pick between</p>



<a name="263724052"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/inf%20and%20sup%20don%27t%20bind%20similarly/near/263724052" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/inf.20and.20sup.20don't.20bind.20similarly.html#263724052">(Dec 04 2021 at 18:27)</a>:</h4>
<p>I suspect that these are unsolved problems in mathematics.</p>



<a name="263724105"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/inf%20and%20sup%20don%27t%20bind%20similarly/near/263724105" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/inf.20and.20sup.20don't.20bind.20similarly.html#263724105">(Dec 04 2021 at 18:28)</a>:</h4>
<p>I remember having the same conversation with finite/infinite sums and products, trying to figure out what <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mo>∑</mo><mi>i</mi></msub><msub><mi>a</mi><mi>i</mi></msub><mo>+</mo><mi>c</mi></mrow><annotation encoding="application/x-tex">\sum_i a_i+c</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0497em;vertical-align:-0.2997em;"></span><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:0em;">∑</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.162em;"><span style="top:-2.4003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2997em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">c</span></span></span></span> and <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mo>∏</mo><mi>i</mi></msub><msub><mi>a</mi><mi>i</mi></msub><mo>+</mo><mi>c</mi></mrow><annotation encoding="application/x-tex">\prod_i a_i + c</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0497em;vertical-align:-0.2997em;"></span><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:0em;">∏</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.162em;"><span style="top:-2.4003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2997em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">c</span></span></span></span> should mean in Lean.</p>



<a name="263724112"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/inf%20and%20sup%20don%27t%20bind%20similarly/near/263724112" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/inf.20and.20sup.20don't.20bind.20similarly.html#263724112">(Dec 04 2021 at 18:28)</a>:</h4>
<p>In the end someone found a random mathoverflow post which asked this and just went with the convention suggested by the highest ranked answer IIRC</p>



<a name="263724362"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/inf%20and%20sup%20don%27t%20bind%20similarly/near/263724362" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/inf.20and.20sup.20don't.20bind.20similarly.html#263724362">(Dec 04 2021 at 18:34)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110032">Reid Barton</span> <a href="#narrow/stream/113488-general/topic/inf.20and.20sup.20don't.20bind.20similarly/near/263714950">said</a>:</p>
<blockquote>
<p>Mostly it would be nice if it was just an error, for all the combinations--but I don't think Lean supports this</p>
</blockquote>
<p>Ideally we would just be able to declare it unsolved as Reid suggests here; does Lean 4 support this?</p>



<a name="263726225"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/inf%20and%20sup%20don%27t%20bind%20similarly/near/263726225" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/inf.20and.20sup.20don't.20bind.20similarly.html#263726225">(Dec 04 2021 at 19:09)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="sd">/--</span>
<span class="sd">There is no established mathematical convention</span>
<span class="sd">for the operator precedence of big operators like `∏` and `∑`.</span>
<span class="sd">We will have to make a choice.</span>

<span class="sd">Online discussions, such as https://math.stackexchange.com/q/185538/30839</span>
<span class="sd">seem to suggest that `∏` and `∑` should have the same precedence,</span>
<span class="sd">and that this should be somewhere between `*` and `+`.</span>
<span class="sd">The latter have precedence levels `70` and `65` respectively,</span>
<span class="sd">and we therefore choose the level `67`.</span>

<span class="sd">In practice, this means that parentheses should be placed as follows:</span>
<span class="sd">```lean</span>
<span class="sd">∑ k in K, (a k + b k) = ∑ k in K, a k + ∑ k in K, b k →</span>
<span class="sd">  ∏ k in K, a k * b k = (∏ k in K, a k) * (∏ k in K, b k)</span>
<span class="sd">```</span>
<span class="sd">(Example taken from page 490 of Knuth's *Concrete Mathematics*.)</span>
<span class="sd">-/</span>
<span class="n">library_note</span> <span class="s2">"operator precedence of big operators"</span>

<span class="n">localized</span> <span class="s2">"notation `∑` binders `, ` r:(scoped:67 f, finset.sum finset.univ f) := r"</span>
  <span class="k">in</span> <span class="n">big_operators</span>
<span class="n">localized</span> <span class="s2">"notation `∏` binders `, ` r:(scoped:67 f, finset.prod finset.univ f) := r"</span>
  <span class="k">in</span> <span class="n">big_operators</span>

<span class="n">localized</span> <span class="s2">"notation `∑` binders ` in ` s `, ` r:(scoped:67 f, finset.sum s f) := r"</span>
  <span class="k">in</span> <span class="n">big_operators</span>
<span class="n">localized</span> <span class="s2">"notation `∏` binders ` in ` s `, ` r:(scoped:67 f, finset.prod s f) := r"</span>
  <span class="k">in</span> <span class="n">big_operators</span>
</code></pre></div>



<a name="263726399"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/inf%20and%20sup%20don%27t%20bind%20similarly/near/263726399" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/inf.20and.20sup.20don't.20bind.20similarly.html#263726399">(Dec 04 2021 at 19:12)</a>:</h4>
<p>it's all happening around priority 67 isn't it!</p>



<a name="263726405"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/inf%20and%20sup%20don%27t%20bind%20similarly/near/263726405" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rémy Degenne <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/inf.20and.20sup.20don't.20bind.20similarly.html#263726405">(Dec 04 2021 at 19:12)</a>:</h4>
<p>After fixing the first errors with 63 and 64 I see other errors pop up in other files. Since changing sup to be 69 (close to the 70 of inf) does not cause any error I will PR that and suggest that we adopt quite arbitrarily the convention of least resistance.</p>



<a name="263726606"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/inf%20and%20sup%20don%27t%20bind%20similarly/near/263726606" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/inf.20and.20sup.20don't.20bind.20similarly.html#263726606">(Dec 04 2021 at 19:17)</a>:</h4>
<p>I think having the priority of inf and mul equal is very unlikely to be what we want, because it means:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="k">#check</span> <span class="o">((</span><span class="mi">1</span> <span class="bp">⊓</span> <span class="mi">2</span><span class="o">)</span> <span class="bp">*</span> <span class="mi">3</span><span class="o">)</span>
<span class="k">#check</span> <span class="o">((</span><span class="mi">1</span> <span class="bp">*</span> <span class="mi">2</span><span class="o">)</span> <span class="bp">⊓</span> <span class="mi">3</span><span class="o">)</span>
</code></pre></div>
<p>both are the default parsings</p>



<a name="263726709"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/inf%20and%20sup%20don%27t%20bind%20similarly/near/263726709" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/inf.20and.20sup.20don't.20bind.20similarly.html#263726709">(Dec 04 2021 at 19:19)</a>:</h4>
<p>given that mathematicians don't seem to care/know and would probably instinctively put brackets whatever the lean conventions, maybe this is OK?</p>



<a name="263726762"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/inf%20and%20sup%20don%27t%20bind%20similarly/near/263726762" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/inf.20and.20sup.20don't.20bind.20similarly.html#263726762">(Dec 04 2021 at 19:20)</a>:</h4>
<p>If we leave <code>⊓</code> at 70 then it has exactly the same problems with <code>*</code> (both have precedence 70) as <code>⊔</code> does with <code>+</code> (both have precedence 65) that started this thread</p>



<a name="263726770"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/inf%20and%20sup%20don%27t%20bind%20similarly/near/263726770" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/inf.20and.20sup.20don't.20bind.20similarly.html#263726770">(Dec 04 2021 at 19:20)</a>:</h4>
<p>So we should either do nothing, or fix both</p>



<a name="263726879"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/inf%20and%20sup%20don%27t%20bind%20similarly/near/263726879" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rémy Degenne <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/inf.20and.20sup.20don't.20bind.20similarly.html#263726879">(Dec 04 2021 at 19:22)</a>:</h4>
<p>I pushed 68 for sup and 69 for inf on <a href="https://github.com/leanprover-community/mathlib/tree/sup_bind_2">branch#sup_bind_2</a> . If that's also errorless, then that may be a good solution?</p>



<a name="263726889"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/inf%20and%20sup%20don%27t%20bind%20similarly/near/263726889" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/inf.20and.20sup.20don't.20bind.20similarly.html#263726889">(Dec 04 2021 at 19:23)</a>:</h4>
<p>Yes, that sounds good.</p>



<a name="263726905"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/inf%20and%20sup%20don%27t%20bind%20similarly/near/263726905" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/inf.20and.20sup.20don't.20bind.20similarly.html#263726905">(Dec 04 2021 at 19:23)</a>:</h4>
<p>The current behavior in master is:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">variables</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">lattice</span> <span class="n">α</span><span class="o">]</span> <span class="o">[</span><span class="n">has_add</span> <span class="n">α</span><span class="o">]</span> <span class="o">[</span><span class="n">has_mul</span> <span class="n">α</span><span class="o">]</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">α</span><span class="o">)</span>

<span class="c1">-- equal precendence, so order-based</span>
<span class="kd">example</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">+</span> <span class="n">b</span> <span class="bp">⊔</span> <span class="n">c</span> <span class="bp">=</span> <span class="o">(</span><span class="n">a</span> <span class="bp">+</span> <span class="n">b</span><span class="o">)</span> <span class="bp">⊔</span> <span class="n">c</span> <span class="o">:=</span> <span class="n">rfl</span>
<span class="kd">example</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">⊔</span> <span class="n">b</span> <span class="bp">+</span> <span class="n">c</span> <span class="bp">=</span> <span class="o">(</span><span class="n">a</span> <span class="bp">⊔</span> <span class="n">b</span><span class="o">)</span> <span class="bp">+</span> <span class="n">c</span> <span class="o">:=</span> <span class="n">rfl</span>
<span class="kd">example</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">b</span> <span class="bp">⊓</span> <span class="n">c</span> <span class="bp">=</span> <span class="o">(</span><span class="n">a</span> <span class="bp">*</span> <span class="n">b</span><span class="o">)</span> <span class="bp">⊓</span> <span class="n">c</span> <span class="o">:=</span> <span class="n">rfl</span>
<span class="kd">example</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">⊓</span> <span class="n">b</span> <span class="bp">*</span> <span class="n">c</span> <span class="bp">=</span> <span class="o">(</span><span class="n">a</span> <span class="bp">⊓</span> <span class="n">b</span><span class="o">)</span> <span class="bp">*</span> <span class="n">c</span> <span class="o">:=</span> <span class="n">rfl</span>
<span class="c1">-- unequal precedence</span>
<span class="kd">example</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">b</span> <span class="bp">⊔</span> <span class="n">c</span> <span class="bp">=</span> <span class="o">(</span><span class="n">a</span> <span class="bp">*</span> <span class="n">b</span><span class="o">)</span> <span class="bp">⊔</span> <span class="n">c</span> <span class="o">:=</span> <span class="n">rfl</span>
<span class="kd">example</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">⊔</span> <span class="n">b</span> <span class="bp">*</span> <span class="n">c</span> <span class="bp">=</span> <span class="n">a</span> <span class="bp">⊔</span> <span class="o">(</span><span class="n">b</span> <span class="bp">*</span> <span class="n">c</span><span class="o">)</span> <span class="o">:=</span> <span class="n">rfl</span>
<span class="kd">example</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">+</span> <span class="n">b</span> <span class="bp">⊓</span> <span class="n">c</span> <span class="bp">=</span> <span class="n">a</span> <span class="bp">+</span> <span class="o">(</span><span class="n">b</span> <span class="bp">⊓</span> <span class="n">c</span><span class="o">)</span> <span class="o">:=</span> <span class="n">rfl</span>
<span class="kd">example</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">⊓</span> <span class="n">b</span> <span class="bp">+</span> <span class="n">c</span> <span class="bp">=</span> <span class="o">(</span><span class="n">a</span> <span class="bp">⊓</span> <span class="n">b</span><span class="o">)</span> <span class="bp">+</span> <span class="n">c</span> <span class="o">:=</span> <span class="n">rfl</span>
</code></pre></div>



<a name="263726950"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/inf%20and%20sup%20don%27t%20bind%20similarly/near/263726950" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/inf.20and.20sup.20don't.20bind.20similarly.html#263726950">(Dec 04 2021 at 19:24)</a>:</h4>
<p>although I would maybe get away from this 65-70 range because it's already used by algebraic operations.</p>



<a name="263727019"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/inf%20and%20sup%20don%27t%20bind%20similarly/near/263727019" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/inf.20and.20sup.20don't.20bind.20similarly.html#263727019">(Dec 04 2021 at 19:25)</a>:</h4>
<p>For example, <code>/</code> is 70</p>



<a name="263727038"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/inf%20and%20sup%20don%27t%20bind%20similarly/near/263727038" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/inf.20and.20sup.20don't.20bind.20similarly.html#263727038">(Dec 04 2021 at 19:25)</a>:</h4>
<p>So is <code>*</code>, which was exactly my point above</p>



<a name="263727111"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/inf%20and%20sup%20don%27t%20bind%20similarly/near/263727111" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/inf.20and.20sup.20don't.20bind.20similarly.html#263727111">(Dec 04 2021 at 19:27)</a>:</h4>
<p>Ah sorry, I missed it.</p>



<a name="263727249"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/inf%20and%20sup%20don%27t%20bind%20similarly/near/263727249" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/inf.20and.20sup.20don't.20bind.20similarly.html#263727249">(Dec 04 2021 at 19:30)</a>:</h4>
<p>There's also <code>neg</code> that we should take into account.</p>



<a name="263727505"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/inf%20and%20sup%20don%27t%20bind%20similarly/near/263727505" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/inf.20and.20sup.20don't.20bind.20similarly.html#263727505">(Dec 04 2021 at 19:35)</a>:</h4>
<p>I propose that we move the precedence of all binary algebraic operations (<code>+</code>, <code>-</code>, <code>*</code>, <code>/</code>) below the binary lattice ones (<code>⊓</code>, <code>⊔</code>, <code>∩</code>, <code>∪</code>, <code>\</code>). The unary ones (<code>-</code>, <code>⁻¹</code>, <code>ᶜ</code> ) can stay high.</p>



<a name="263728445"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/inf%20and%20sup%20don%27t%20bind%20similarly/near/263728445" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/inf.20and.20sup.20don't.20bind.20similarly.html#263728445">(Dec 04 2021 at 19:56)</a>:</h4>
<p>Don't forget sdiff and compl</p>



<a name="264209126"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/inf%20and%20sup%20don%27t%20bind%20similarly/near/264209126" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/inf.20and.20sup.20don't.20bind.20similarly.html#264209126">(Dec 08 2021 at 19:41)</a>:</h4>
<p><span class="user-mention" data-user-id="350992">@Rémy Degenne</span> did this in <a href="https://github.com/leanprover-community/mathlib/issues/10623">#10623</a>. I think this is an improvement that doesn't involve a big refactor. Is anyone interested in trying one of the more ambitious ideas?</p>



<a name="264426512"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/inf%20and%20sup%20don%27t%20bind%20similarly/near/264426512" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/inf.20and.20sup.20don't.20bind.20similarly.html#264426512">(Dec 10 2021 at 10:17)</a>:</h4>
<p>I'm voting for merging that PR.</p>



<a name="264426536"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/inf%20and%20sup%20don%27t%20bind%20similarly/near/264426536" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/inf.20and.20sup.20don't.20bind.20similarly.html#264426536">(Dec 10 2021 at 10:18)</a>:</h4>
<p>More ambitious ideas can still be tried after merging.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>