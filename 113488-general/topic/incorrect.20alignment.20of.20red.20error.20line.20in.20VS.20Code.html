---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/incorrect.20alignment.20of.20red.20error.20line.20in.20VS.20Code.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/incorrect.20alignment.20of.20red.20error.20line.20in.20VS.20Code.html">incorrect alignment of red error line in VS Code</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="187245837"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/incorrect%20alignment%20of%20red%20error%20line%20in%20VS%20Code/near/187245837" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/incorrect.20alignment.20of.20red.20error.20line.20in.20VS.20Code.html#187245837">(Feb 03 2020 at 09:32)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="c1">--TODO -- ask on Zulip</span>

<span class="kn">variable</span> <span class="o">{</span><span class="n">A</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">}</span>

<span class="n">def</span> <span class="n">V</span> <span class="o">(</span><span class="n">P</span> <span class="o">:</span> <span class="n">A</span><span class="o">)</span> <span class="o">:</span> <span class="n">A</span> <span class="o">:=</span> <span class="n">P</span>

<span class="c1">-- (correct) error on underscore (Lean reports 8:26: error)</span>
<span class="kn">example</span> <span class="o">(</span><span class="n">P</span> <span class="o">:</span> <span class="n">A</span><span class="o">)</span> <span class="o">:</span> <span class="n">V</span> <span class="n">P</span> <span class="bp">=</span> <span class="n">V</span> <span class="bp">_</span> <span class="o">:=</span> <span class="n">sorry</span>

<span class="n">def</span> <span class="err">𝕍</span> <span class="o">(</span><span class="n">P</span> <span class="o">:</span> <span class="n">A</span><span class="o">)</span> <span class="o">:</span> <span class="n">A</span> <span class="o">:=</span> <span class="n">P</span>

<span class="c1">-- the error is at the underscore but (for me) the red underline is under the 𝕍</span>
<span class="c1">-- (Lean reports 14:26: error)</span>
<span class="kn">example</span> <span class="o">(</span><span class="n">P</span> <span class="o">:</span> <span class="n">A</span><span class="o">)</span> <span class="o">:</span> <span class="n">V</span> <span class="n">P</span> <span class="bp">=</span> <span class="err">𝕍</span> <span class="bp">_</span> <span class="o">:=</span> <span class="n">sorry</span>
</pre></div>


<p>Using <code>𝕍</code> instead of <code>V</code> seems to confuse VS Code into putting the red wiggly error line in the wrong place. Can anything be done about this? Did I just mess up somehow?</p>



<a name="187246059"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/incorrect%20alignment%20of%20red%20error%20line%20in%20VS%20Code/near/187246059" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/incorrect.20alignment.20of.20red.20error.20line.20in.20VS.20Code.html#187246059">(Feb 03 2020 at 09:36)</a>:</h4>
<p>I guess this is some unicode-confusion... <span aria-label="sad" class="emoji emoji-2639" role="img" title="sad">:sad:</span></p>



<a name="187246150"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/incorrect%20alignment%20of%20red%20error%20line%20in%20VS%20Code/near/187246150" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/incorrect.20alignment.20of.20red.20error.20line.20in.20VS.20Code.html#187246150">(Feb 03 2020 at 09:37)</a>:</h4>
<p>The reason is that 𝕍 is one Unicode codepoint (how Lean counts) but two UTF-16 characters (how vscode counts).</p>



<a name="187246202"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/incorrect%20alignment%20of%20red%20error%20line%20in%20VS%20Code/near/187246202" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/incorrect.20alignment.20of.20red.20error.20line.20in.20VS.20Code.html#187246202">(Feb 03 2020 at 09:38)</a>:</h4>
<p>Can we use this to prove false?</p>



<a name="187246223"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/incorrect%20alignment%20of%20red%20error%20line%20in%20VS%20Code/near/187246223" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/incorrect.20alignment.20of.20red.20error.20line.20in.20VS.20Code.html#187246223">(Feb 03 2020 at 09:38)</a>:</h4>
<p>Uuuh, no?</p>



<a name="187246236"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/incorrect%20alignment%20of%20red%20error%20line%20in%20VS%20Code/near/187246236" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/incorrect.20alignment.20of.20red.20error.20line.20in.20VS.20Code.html#187246236">(Feb 03 2020 at 09:38)</a>:</h4>
<p>It only affects the error squiggles (they can be appear in the wrong column).</p>



<a name="187246241"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/incorrect%20alignment%20of%20red%20error%20line%20in%20VS%20Code/near/187246241" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/incorrect.20alignment.20of.20red.20error.20line.20in.20VS.20Code.html#187246241">(Feb 03 2020 at 09:38)</a>:</h4>
<p>Lean is absolutely not confused. Only VScode is.</p>



<a name="187246250"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/incorrect%20alignment%20of%20red%20error%20line%20in%20VS%20Code/near/187246250" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/incorrect.20alignment.20of.20red.20error.20line.20in.20VS.20Code.html#187246250">(Feb 03 2020 at 09:39)</a>:</h4>
<p>Can this be "fixed" or is it not broken?</p>



<a name="187246263"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/incorrect%20alignment%20of%20red%20error%20line%20in%20VS%20Code/near/187246263" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/incorrect.20alignment.20of.20red.20error.20line.20in.20VS.20Code.html#187246263">(Feb 03 2020 at 09:39)</a>:</h4>
<p>We could theoretically adjust the column of the error messages in the vscode extension.  PRs are welcome!</p>



<a name="187246277"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/incorrect%20alignment%20of%20red%20error%20line%20in%20VS%20Code/near/187246277" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/incorrect.20alignment.20of.20red.20error.20line.20in.20VS.20Code.html#187246277">(Feb 03 2020 at 09:39)</a>:</h4>
<p>I have a file where I have 100 occurrences of <code>𝕍</code>. How come VS Code is not putting the red error messages 100 characters from where they should be?</p>



<a name="187246328"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/incorrect%20alignment%20of%20red%20error%20line%20in%20VS%20Code/near/187246328" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/incorrect.20alignment.20of.20red.20error.20line.20in.20VS.20Code.html#187246328">(Feb 03 2020 at 09:40)</a>:</h4>
<p>Or maybe it is and I am just so great at avoiding errors that I never noticed?</p>



<a name="187246337"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/incorrect%20alignment%20of%20red%20error%20line%20in%20VS%20Code/near/187246337" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/incorrect.20alignment.20of.20red.20error.20line.20in.20VS.20Code.html#187246337">(Feb 03 2020 at 09:40)</a>:</h4>
<p>The line number is unaffected.  It only matters if you're right of a 𝕍 on the same line.</p>



<a name="187246344"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/incorrect%20alignment%20of%20red%20error%20line%20in%20VS%20Code/near/187246344" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/incorrect.20alignment.20of.20red.20error.20line.20in.20VS.20Code.html#187246344">(Feb 03 2020 at 09:40)</a>:</h4>
<p>gotcha</p>



<a name="187246381"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/incorrect%20alignment%20of%20red%20error%20line%20in%20VS%20Code/near/187246381" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/incorrect.20alignment.20of.20red.20error.20line.20in.20VS.20Code.html#187246381">(Feb 03 2020 at 09:41)</a>:</h4>
<p>Doesn't this mean that I can get VS Code to have an error in a place where there isn't a character?</p>



<a name="187246400"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/incorrect%20alignment%20of%20red%20error%20line%20in%20VS%20Code/near/187246400" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/incorrect.20alignment.20of.20red.20error.20line.20in.20VS.20Code.html#187246400">(Feb 03 2020 at 09:41)</a>:</h4>
<p>aah no it goes the wrong way</p>



<a name="187247325"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/incorrect%20alignment%20of%20red%20error%20line%20in%20VS%20Code/near/187247325" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/incorrect.20alignment.20of.20red.20error.20line.20in.20VS.20Code.html#187247325">(Feb 03 2020 at 09:57)</a>:</h4>
<p>Well, it could be under some whitespace, I guess</p>



<a name="271433837"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/incorrect%20alignment%20of%20red%20error%20line%20in%20VS%20Code/near/271433837" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Stuart Presnell <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/incorrect.20alignment.20of.20red.20error.20line.20in.20VS.20Code.html#271433837">(Feb 10 2022 at 13:55)</a>:</h4>
<p>I'm getting another example of the wiggly-error-underline appearing in the wrong place. <a href="/user_uploads/3121/USrN27zkjtHM9JzsSRkqU-EH/Screenshot-2022-02-10-at-13.43.06.png">Screenshot-2022-02-10-at-13.43.06.png</a> </p>
<div class="message_inline_image"><a href="/user_uploads/3121/USrN27zkjtHM9JzsSRkqU-EH/Screenshot-2022-02-10-at-13.43.06.png" title="Screenshot-2022-02-10-at-13.43.06.png"><img src="/user_uploads/3121/USrN27zkjtHM9JzsSRkqU-EH/Screenshot-2022-02-10-at-13.43.06.png"></a></div><p>The Info View window is correctly reporting that I have a <code>sorry</code> in <code>data.nat.factorization</code>, but the orange underline is on <code>import algebra.char_p.two</code>.  </p>
<p>(When I mouse over the underline, the popup also correctly reports that there's a <code>sorry</code> in <code>data.nat.factorization</code>)</p>



<a name="271433933"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/incorrect%20alignment%20of%20red%20error%20line%20in%20VS%20Code/near/271433933" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Stuart Presnell <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/incorrect.20alignment.20of.20red.20error.20line.20in.20VS.20Code.html#271433933">(Feb 10 2022 at 13:56)</a>:</h4>
<p>This is in <a href="https://github.com/leanprover-community/mathlib/pull/11332">#11332</a></p>



<a name="271434246"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/incorrect%20alignment%20of%20red%20error%20line%20in%20VS%20Code/near/271434246" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/incorrect.20alignment.20of.20red.20error.20line.20in.20VS.20Code.html#271434246">(Feb 10 2022 at 13:58)</a>:</h4>
<p>(deleted)</p>



<a name="271434283"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/incorrect%20alignment%20of%20red%20error%20line%20in%20VS%20Code/near/271434283" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/incorrect.20alignment.20of.20red.20error.20line.20in.20VS.20Code.html#271434283">(Feb 10 2022 at 13:58)</a>:</h4>
<p>(deleted)</p>



<a name="271434629"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/incorrect%20alignment%20of%20red%20error%20line%20in%20VS%20Code/near/271434629" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/incorrect.20alignment.20of.20red.20error.20line.20in.20VS.20Code.html#271434629">(Feb 10 2022 at 14:00)</a>:</h4>
<p>I've always noticed this, I thought this was just how imports worked.</p>



<a name="271434766"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/incorrect%20alignment%20of%20red%20error%20line%20in%20VS%20Code/near/271434766" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Stuart Presnell <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/incorrect.20alignment.20of.20red.20error.20line.20in.20VS.20Code.html#271434766">(Feb 10 2022 at 14:01)</a>:</h4>
<p>Oh, is it typically just whatever's the last line of the <code>import</code> block that gets underlined, independent of which file has the problem?</p>



<a name="271438293"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/incorrect%20alignment%20of%20red%20error%20line%20in%20VS%20Code/near/271438293" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Stuart Presnell <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/incorrect.20alignment.20of.20red.20error.20line.20in.20VS.20Code.html#271438293">(Feb 10 2022 at 14:28)</a>:</h4>
<p>Ok, thanks, I'd never noticed that before</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>