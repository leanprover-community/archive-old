---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/Subtype.20property.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Subtype.20property.html">Subtype property</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="197627924"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Subtype%20property/near/197627924" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Subtype.20property.html#197627924">(May 14 2020 at 22:46)</a>:</h4>
<p>Two related questions:<br>
(1) Does the following lemma exist somewhere?</p>
<div class="codehilite"><pre><span></span><code><span class="kn">lemma</span> <span class="n">subtype</span><span class="bp">.</span><span class="n">property_coe</span> <span class="o">{</span><span class="n">α</span><span class="o">}</span> <span class="o">{</span><span class="n">p</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="kt">Prop</span><span class="o">}</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">subtype</span> <span class="n">p</span><span class="o">)</span> <span class="o">:</span> <span class="n">p</span> <span class="n">x</span> <span class="o">:=</span> <span class="n">x</span><span class="bp">.</span><span class="mi">2</span>
</code></pre></div>


<p>It is important that this states <code>p x</code>, and not <code>p x.1</code>, so <code>subtype.property</code> doesn't work (I want to rewrite with this, and have <code>↑x</code> instead of <code>x.1</code> in my goal).</p>
<p>(2) Can I tell <code>library_search</code> to not work up to definitional equality (of semireducible definitions)? I am often trying to look for rewrite lemmas which are proven by <code>rfl</code> and then <code>library_search</code> is "too smart" and just tells me I can prove it by <code>rfl</code> or <code>iff_refl _</code>.</p>



<a name="197628407"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Subtype%20property/near/197628407" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Subtype.20property.html#197628407">(May 14 2020 at 22:52)</a>:</h4>
<p>How could you rewrite with it though?</p>



<a name="197628439"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Subtype%20property/near/197628439" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Subtype.20property.html#197628439">(May 14 2020 at 22:53)</a>:</h4>
<p>(2) also came up recently.</p>



<a name="197628499"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Subtype%20property/near/197628499" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Subtype.20property.html#197628499">(May 14 2020 at 22:53)</a>:</h4>
<p><a href="#narrow/stream/217875-Is-there.20code.20for.20X.3F/topic/List.20lemmas/near/197053059">https://leanprover.zulipchat.com/#narrow/stream/217875-Is-there.20code.20for.20X.3F/topic/List.20lemmas/near/197053059</a></p>



<a name="197628633"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Subtype%20property/near/197628633" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Subtype.20property.html#197628633">(May 14 2020 at 22:54)</a>:</h4>
<p>For (1) something would need to beta-reduce <code>p x</code>, right? Does <code>rw</code> do that?</p>



<a name="197628870"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Subtype%20property/near/197628870" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Subtype.20property.html#197628870">(May 14 2020 at 22:57)</a>:</h4>
<p>(1) If <code>p x = x ∈ s</code>, then we have <code>subtype.mem</code>.</p>



<a name="197628890"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Subtype%20property/near/197628890" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Subtype.20property.html#197628890">(May 14 2020 at 22:57)</a>:</h4>
<p>If not, PR</p>



<a name="197629277"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Subtype%20property/near/197629277" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Subtype.20property.html#197629277">(May 14 2020 at 23:01)</a>:</h4>
<p>There's also</p>
<div class="codehilite"><pre><span></span><code><span class="bp">@</span><span class="o">[</span><span class="n">simp</span><span class="o">]</span> <span class="kn">lemma</span> <span class="n">val_prop&#39;</span> <span class="o">{</span><span class="n">S</span> <span class="o">:</span> <span class="n">set</span> <span class="n">α</span><span class="o">}</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="o">{</span><span class="n">a</span> <span class="bp">//</span> <span class="n">a</span> <span class="err">∈</span> <span class="n">S</span><span class="o">})</span> <span class="o">:</span> <span class="err">↑</span><span class="n">a</span> <span class="err">∈</span> <span class="n">S</span> <span class="o">:=</span> <span class="n">a</span><span class="bp">.</span><span class="n">property</span>
</code></pre></div>


<p>in <code>data.subtype</code>; are these duplicates?</p>



<a name="197629339"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Subtype%20property/near/197629339" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Subtype.20property.html#197629339">(May 14 2020 at 23:02)</a>:</h4>
<p>In my example I had something like this:</p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="n">linear_algebra</span><span class="bp">.</span><span class="n">basic</span>

<span class="kn">universe</span> <span class="kn">variables</span> <span class="n">v</span> <span class="n">w</span>
<span class="kn">variables</span> <span class="o">{</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">v</span><span class="o">}</span> <span class="o">{</span><span class="n">M</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">w</span><span class="o">}</span> <span class="o">[</span><span class="n">comm_ring</span> <span class="n">R</span><span class="o">]</span> <span class="o">[</span><span class="n">add_comm_group</span> <span class="n">M</span><span class="o">]</span> <span class="o">[</span><span class="n">module</span> <span class="n">R</span> <span class="n">M</span><span class="o">]</span> <span class="o">(</span><span class="n">π</span> <span class="o">:</span> <span class="n">M</span> <span class="bp">→</span><span class="err">ₗ</span><span class="o">[</span><span class="n">R</span><span class="o">]</span> <span class="n">M</span><span class="o">)</span>
<span class="kn">example</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">π</span><span class="bp">.</span><span class="n">ker</span><span class="o">)</span> <span class="o">:</span> <span class="n">π</span> <span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">linear_map</span><span class="bp">.</span><span class="n">mem_ker</span><span class="bp">.</span><span class="n">mp</span> <span class="n">x</span><span class="bp">.</span><span class="mi">2</span><span class="o">]</span> <span class="c1">-- error: did not find ⇑π x.val</span>
<span class="kn">end</span>
</code></pre></div>



<a name="197629422"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Subtype%20property/near/197629422" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Subtype.20property.html#197629422">(May 14 2020 at 23:03)</a>:</h4>
<p>I realized I could have redefined something earlier to get the more convenient hypothesis <code>x ∈ π.ker</code>.</p>



<a name="197629432"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Subtype%20property/near/197629432" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Subtype.20property.html#197629432">(May 14 2020 at 23:03)</a>:</h4>
<p>Oh I see, there is something between <code>rw</code> and the property.</p>



<a name="197629594"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Subtype%20property/near/197629594" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Subtype.20property.html#197629594">(May 14 2020 at 23:05)</a>:</h4>
<p>And yes, <code>rw</code> beta-reduces:</p>
<div class="codehilite"><pre><span></span><code><span class="kn">lemma</span> <span class="n">subtype</span><span class="bp">.</span><span class="n">prop</span> <span class="o">{</span><span class="n">α</span><span class="o">}</span> <span class="o">{</span><span class="n">p</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="kt">Prop</span><span class="o">}</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">subtype</span> <span class="n">p</span><span class="o">)</span> <span class="o">:</span> <span class="n">p</span> <span class="n">x</span> <span class="o">:=</span> <span class="n">x</span><span class="bp">.</span><span class="mi">2</span>

<span class="kn">example</span> <span class="o">(</span><span class="n">z</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">subtype</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">y</span><span class="o">,</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">z</span><span class="o">))</span> <span class="o">:</span> <span class="n">z</span> <span class="bp">=</span> <span class="n">x</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">x</span><span class="bp">.</span><span class="n">prop</span><span class="o">]</span>
<span class="kn">end</span>
</code></pre></div>


<p>(using <code>x.2</code> doesn't work)</p>



<a name="197629714"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Subtype%20property/near/197629714" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Subtype.20property.html#197629714">(May 14 2020 at 23:06)</a>:</h4>
<p>I guess otherwise nothing would ever have the right form.</p>



<a name="197629896"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Subtype%20property/near/197629896" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Subtype.20property.html#197629896">(May 14 2020 at 23:09)</a>:</h4>
<p>I think that I wrote <code>subtype.mem</code> because I'd want it to have this name.</p>



<a name="197629902"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Subtype%20property/near/197629902" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Subtype.20property.html#197629902">(May 14 2020 at 23:09)</a>:</h4>
<p>Sorry.</p>



<a name="197629933"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Subtype%20property/near/197629933" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Subtype.20property.html#197629933">(May 14 2020 at 23:09)</a>:</h4>
<p>UPD: no, it is defined in <code>set/basic</code></p>



<a name="197629944"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Subtype%20property/near/197629944" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Subtype.20property.html#197629944">(May 14 2020 at 23:09)</a>:</h4>
<p>Well that might be, but it really exists!</p>



<a name="197630066"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Subtype%20property/near/197630066" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Subtype.20property.html#197630066">(May 14 2020 at 23:11)</a>:</h4>
<p>I think that it should be moved to <code>data.subtype</code>, <code>val_prop'</code> should be removed, and <code>coe_prop</code> should be added.</p>



<a name="197631417"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Subtype%20property/near/197631417" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Subtype.20property.html#197631417">(May 14 2020 at 23:29)</a>:</h4>
<p>Who will volunteer to do this?</p>



<a name="197633261"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Subtype%20property/near/197633261" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> orlando <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Subtype.20property.html#197633261">(May 14 2020 at 23:53)</a>:</h4>
<p><span class="user-mention" data-user-id="111080">@Floris van Doorn</span>  :</p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="n">linear_algebra</span><span class="bp">.</span><span class="n">basic</span>

<span class="kn">universe</span> <span class="kn">variables</span> <span class="n">v</span> <span class="n">w</span>
<span class="kn">variables</span> <span class="o">{</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">v</span><span class="o">}</span> <span class="o">{</span><span class="n">M</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">w</span><span class="o">}</span> <span class="o">[</span><span class="n">comm_ring</span> <span class="n">R</span><span class="o">]</span> <span class="o">[</span><span class="n">add_comm_group</span> <span class="n">M</span><span class="o">]</span> <span class="o">[</span><span class="n">module</span> <span class="n">R</span> <span class="n">M</span><span class="o">]</span> <span class="o">(</span><span class="n">π</span> <span class="o">:</span> <span class="n">M</span> <span class="bp">→</span><span class="err">ₗ</span><span class="o">[</span><span class="n">R</span><span class="o">]</span> <span class="n">M</span><span class="o">)</span>
<span class="kn">example</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">π</span><span class="bp">.</span><span class="n">ker</span><span class="o">)</span> <span class="o">:</span> <span class="n">π</span> <span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">erw</span> <span class="o">[</span><span class="n">linear_map</span><span class="bp">.</span><span class="n">mem_ker</span><span class="bp">.</span><span class="n">mp</span> <span class="n">x</span><span class="bp">.</span><span class="mi">2</span><span class="o">]</span> <span class="c1">--  i think erw work in some case</span>
<span class="kn">end</span>
</code></pre></div>



<a name="197716367"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Subtype%20property/near/197716367" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Subtype.20property.html#197716367">(May 15 2020 at 16:25)</a>:</h4>
<p>I tend to forget that <code>erewrite</code> is a thing. That is a good to remember as back-up plan.</p>



<a name="197716407"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Subtype%20property/near/197716407" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Subtype.20property.html#197716407">(May 15 2020 at 16:25)</a>:</h4>
<p>someday I will learn what it does</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>