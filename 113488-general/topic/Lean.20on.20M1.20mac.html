---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/Lean.20on.20M1.20mac.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20on.20M1.20mac.html">Lean on M1 mac</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="264172471"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20on%20M1%20mac/near/264172471" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Martin C. Martin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20on.20M1.20mac.html#264172471">(Dec 08 2021 at 15:35)</a>:</h4>
<p>The <a href="#narrow/stream/113489-new-members/topic/M1.20macs/near/227470665">thread for installing Lean on M1 macs</a> is from February; it's kind of burried; and there are follow on comments which make me think some people encountered problems and tweaked it.</p>
<p>What's the status of compiling native M1 Lean, as opposed to emulating x86?  Is it worth creating a wiki page or script with the steps?</p>



<a name="264173110"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20on%20M1%20mac/near/264173110" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Huỳnh Trần Khanh <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20on.20M1.20mac.html#264173110">(Dec 08 2021 at 15:38)</a>:</h4>
<p>you might want to check this out <a href="#narrow/stream/113489-new-members/topic/M1.20Macs.3A.20Installing.20the.20Lean.203.20toolchain/near/262832039">https://leanprover.zulipchat.com/#narrow/stream/113489-new-members/topic/M1.20Macs.3A.20Installing.20the.20Lean.203.20toolchain/near/262832039</a></p>



<a name="264173297"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20on%20M1%20mac/near/264173297" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Martin C. Martin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20on.20M1.20mac.html#264173297">(Dec 08 2021 at 15:39)</a>:</h4>
<p>Thanks!  I got the above link from the wiki page on <a href="https://leanprover-community.github.io/install/macos.html#m1-macs--apple-silicon">installing on Mac</a>, should that be updated?</p>



<a name="264174806"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20on%20M1%20mac/near/264174806" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20on.20M1.20mac.html#264174806">(Dec 08 2021 at 15:49)</a>:</h4>
<p>Are you specifically asking about native ARM Lean?</p>



<a name="264174917"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20on%20M1%20mac/near/264174917" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20on.20M1.20mac.html#264174917">(Dec 08 2021 at 15:50)</a>:</h4>
<p>Doing so works fine, I have been using it since the M1 came out, but yeah we still need pre-compiled M1 binaries for elan.</p>



<a name="264175033"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20on%20M1%20mac/near/264175033" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20on.20M1.20mac.html#264175033">(Dec 08 2021 at 15:51)</a>:</h4>
<p>There's I believe a ticket tracking that, but there's also this one <a href="https://github.com/leanprover-community/mathlib-tools/issues/107">https://github.com/leanprover-community/mathlib-tools/issues/107</a> for automating some of the suggestions in that thread</p>



<a name="264175111"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20on%20M1%20mac/near/264175111" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20on.20M1.20mac.html#264175111">(Dec 08 2021 at 15:51)</a>:</h4>
<p>A PR would definitely be appreciated I assume if you followed the steps and they worked for you (and if you're happy with one that installs x86 lean)</p>



<a name="264175397"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20on%20M1%20mac/near/264175397" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Martin C. Martin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20on.20M1.20mac.html#264175397">(Dec 08 2021 at 15:53)</a>:</h4>
<p>Also, this does seem to install the x86 stuff, not the native ARM Lean.</p>



<a name="264176205"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20on%20M1%20mac/near/264176205" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Martin C. Martin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20on.20M1.20mac.html#264176205">(Dec 08 2021 at 15:58)</a>:</h4>
<p>The <code>brew install elan mathlibtools</code> step is failing with:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">martin</span><span class="bp">@</span><span class="n">Martins</span><span class="bp">-</span><span class="n">MacBook</span><span class="bp">-</span><span class="n">Air</span> <span class="bp">~</span> <span class="bp">%</span> <span class="n">brew</span> <span class="n">install</span> <span class="n">elan</span> <span class="n">mathlibtools</span>
<span class="n">elan</span> <span class="n">toolchain</span> <span class="n">install</span> <span class="n">stable</span>
<span class="n">elan</span> <span class="n">default</span> <span class="n">stable</span>
<span class="n">Warning</span><span class="o">:</span> <span class="n">Treating</span> <span class="n">elan</span> <span class="n">as</span> <span class="n">a</span> <span class="n">formula.</span> <span class="n">For</span> <span class="n">the</span> <span class="n">cask</span><span class="o">,</span> <span class="n">use</span> <span class="n">homebrew</span><span class="bp">/</span><span class="n">cask</span><span class="bp">/</span><span class="n">elan</span>
<span class="n">Warning</span><span class="o">:</span> <span class="n">mathlibtools</span> <span class="mi">1</span><span class="bp">.</span><span class="mi">1</span><span class="bp">.</span><span class="mi">0</span><span class="n">_2</span> <span class="n">is</span> <span class="n">already</span> <span class="n">installed</span> <span class="n">and</span> <span class="n">up</span><span class="bp">-</span><span class="n">to</span><span class="bp">-</span><span class="n">date.</span>
<span class="n">To</span> <span class="n">reinstall</span> <span class="mi">1</span><span class="bp">.</span><span class="mi">1</span><span class="bp">.</span><span class="mi">0</span><span class="n">_2</span><span class="o">,</span> <span class="n">run</span><span class="o">:</span>
  <span class="n">brew</span> <span class="n">reinstall</span> <span class="n">mathlibtools</span>
<span class="n">Error</span><span class="o">:</span> <span class="n">Cannot</span> <span class="n">install</span> <span class="n">under</span> <span class="n">Rosetta</span> <span class="mi">2</span> <span class="k">in</span> <span class="n">ARM</span> <span class="n">default</span> <span class="kd">prefix</span> <span class="o">(</span><span class="bp">/</span><span class="n">opt</span><span class="bp">/</span><span class="n">homebrew</span><span class="o">)</span><span class="bp">!</span>
<span class="n">To</span> <span class="n">rerun</span> <span class="n">under</span> <span class="n">ARM</span> <span class="n">use</span><span class="o">:</span>
    <span class="n">arch</span> <span class="bp">-</span><span class="n">arm64</span> <span class="n">brew</span> <span class="n">install</span> <span class="bp">...</span>
<span class="n">To</span> <span class="n">install</span> <span class="n">under</span> <span class="n">x86_64</span><span class="o">,</span> <span class="n">install</span> <span class="n">Homebrew</span> <span class="n">into</span> <span class="bp">/</span><span class="n">usr</span><span class="bp">/</span><span class="kn">local</span><span class="bp">.</span>
</code></pre></div>



<a name="264176284"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20on%20M1%20mac/near/264176284" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20on.20M1.20mac.html#264176284">(Dec 08 2021 at 15:58)</a>:</h4>
<p>That's using an ARM homebrew you have installed</p>



<a name="264176298"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20on%20M1%20mac/near/264176298" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20on.20M1.20mac.html#264176298">(Dec 08 2021 at 15:58)</a>:</h4>
<p>Do you have both installed already?</p>



<a name="264176327"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20on%20M1%20mac/near/264176327" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20on.20M1.20mac.html#264176327">(Dec 08 2021 at 15:58)</a>:</h4>
<p>Try <code>/usr/local/bin/brew ...</code> if so</p>



<a name="264177765"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20on%20M1%20mac/near/264177765" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Martin C. Martin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20on.20M1.20mac.html#264177765">(Dec 08 2021 at 16:07)</a>:</h4>
<p>Thanks Julian, I got further!</p>
<p>Now I'm on:</p>
<ol start="5">
<li>use <code>leanproject get</code> to get the repositories needed.</li>
</ol>
<p>Which repositories do I need, and what are the commands I need to get them?</p>



<a name="264177999"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20on%20M1%20mac/near/264177999" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20on.20M1.20mac.html#264177999">(Dec 08 2021 at 16:09)</a>:</h4>
<p>Nice, glad to hear! I think the intention in that message is "whichever you were hoping to work with" -- are you hoping to work on/with mathlib perhaps?</p>



<a name="264178814"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20on%20M1%20mac/near/264178814" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Martin C. Martin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20on.20M1.20mac.html#264178814">(Dec 08 2021 at 16:15)</a>:</h4>
<p>Thanks again.  At this point, I'm working through Logic and Proof.  There are some basic examples in <a href="https://leanprover.github.io/logic_and_proof/propositional_logic_in_lean.html#expressions-for-propositions-and-proofs">Chapter 4</a>.  I'd like to use these as a way to start using Lean in VSCode.  (Eventually I hope to contribute to mathlib.)</p>
<p>What more do I need to get Lean up and running in VS Code on my M1 Macbook Air?</p>



<a name="264179605"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20on%20M1%20mac/near/264179605" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20on.20M1.20mac.html#264179605">(Dec 08 2021 at 16:21)</a>:</h4>
<p>Does Logic and Proof come with a github repository? If so, get that! If not, then get mathlib (<code>leanproject get mathlib</code>) and then make a new directory in that repository called <code>my_experiments</code> or whatever, and create Lean files in that. This way you will have access to all the mathlib imports. But for logic and proof you might not even need <code>mathlib</code>, in which case you can just make a new project with <code>leanproject new</code> and then make your own Lean files in <code>src</code>.</p>



<a name="264221286"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20on%20M1%20mac/near/264221286" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Stevens <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20on.20M1.20mac.html#264221286">(Dec 08 2021 at 21:14)</a>:</h4>
<p>FWIW I eventually got my Apple Silicon setup working with Nix as the package manager, building Lean 3 from source and using <code>elan</code> from nixpkgs - if anyone is interested I can write that up, although it's a pretty niche set of requirements :P</p>



<a name="264631804"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20on%20M1%20mac/near/264631804" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alice Wyan <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20on.20M1.20mac.html#264631804">(Dec 12 2021 at 16:47)</a>:</h4>
<p><span class="user-mention" data-user-id="117987">@Patrick Stevens</span> I might be tempted to try it :) is it on macOS or linux?</p>



<a name="264632793"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20on%20M1%20mac/near/264632793" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20on.20M1.20mac.html#264632793">(Dec 12 2021 at 17:07)</a>:</h4>
<p>The danger of having two distinct "here's how to install lean" instruction sets is that someone can try one, not get it working, give up and try the other one. Is there a danger that a novice trying both approaches and stopping at a random point in one list of instructions then switching to the other will end up with a borked system?</p>



<a name="264633294"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20on%20M1%20mac/near/264633294" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20on.20M1.20mac.html#264633294">(Dec 12 2021 at 17:18)</a>:</h4>
<p>Yes there is, in fact that's already the case with the few Zulip threads.</p>



<a name="264633325"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20on%20M1%20mac/near/264633325" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20on.20M1.20mac.html#264633325">(Dec 12 2021 at 17:19)</a>:</h4>
<p>(They have differing instructions from each other). So it's particularly good there's that PR now. And yeah personally I would definitely discourage new users from using Nix myself, but certainly sharing instructions for other Nix users wouldn't hurt.</p>



<a name="264633420"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20on%20M1%20mac/near/264633420" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20on.20M1.20mac.html#264633420">(Dec 12 2021 at 17:21)</a>:</h4>
<p>Nix, gets you addix.</p>



<a name="264635488"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20on%20M1%20mac/near/264635488" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Stevens <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20on.20M1.20mac.html#264635488">(Dec 12 2021 at 18:06)</a>:</h4>
<p><span class="user-mention silent" data-user-id="256307">Alice Wyan</span> <a href="#narrow/stream/113488-general/topic/Lean.20on.20M1.20mac/near/264631804">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="117987">Patrick Stevens</span> I might be tempted to try it :) is it on macOS or linux?</p>
</blockquote>
<p>macOS, yep, specifically Apple Silicon. I haven't used Nix at all to do any of the building of lean3, just to get an environment.</p>



<a name="264635499"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20on%20M1%20mac/near/264635499" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Stevens <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20on.20M1.20mac.html#264635499">(Dec 12 2021 at 18:07)</a>:</h4>
<p>Any use of Nix should come with a very strong "don't try this unless you're very confident on the command line and with computers generally" :P</p>



<a name="264635994"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20on%20M1%20mac/near/264635994" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alice Wyan <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20on.20M1.20mac.html#264635994">(Dec 12 2021 at 18:19)</a>:</h4>
<p><span class="user-mention silent" data-user-id="117987">Patrick Stevens</span> <a href="#narrow/stream/113488-general/topic/Lean.20on.20M1.20mac/near/264635488">said</a>:</p>
<blockquote>
<p>macOS, yep, specifically Apple Silicon. I haven't used Nix at all to do any of the building of lean3, just to get an <br>
environment.</p>
</blockquote>
<p>I'm just unsure of which bits I need to get started... homebrew comes with lean and mathlibtool, would that be enough to play with the tutorials?</p>



<a name="264636846"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20on%20M1%20mac/near/264636846" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Stevens <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20on.20M1.20mac.html#264636846">(Dec 12 2021 at 18:34)</a>:</h4>
<p>(I'm just tidying up the Nix instructions and checking they reproduce now.)</p>
<p>To be clear, I use Nix to set up the build tools, I just don't use Nix to manage the building - that's still calling out to <code>cmake</code> and friends, which all live in the Nix store. If you don't already use Nix, or you're not on Apple silicon, I strongly recommend ignoring my instructions and going with the more official Homebrew-based ones instead (though you might find the Nix ones helpful if things go wrong, because they declare more precisely what needs to be true of your system to get Lean working).</p>



<a name="264636914"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20on%20M1%20mac/near/264636914" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alice Wyan <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20on.20M1.20mac.html#264636914">(Dec 12 2021 at 18:35)</a>:</h4>
<p><span class="user-mention silent" data-user-id="117987">Patrick Stevens</span> <a href="#narrow/stream/113488-general/topic/Lean.20on.20M1.20mac/near/264636846">said</a>:<br>
Then they might come in handy to check what's going on. I am on Apple Silicon and conversant in the CLI, but not familiar with nix.</p>



<a name="264638523"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20on%20M1%20mac/near/264638523" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Stevens <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20on.20M1.20mac.html#264638523">(Dec 12 2021 at 19:07)</a>:</h4>
<p>Instructions for Nix on Apple Silicon using home-manager and nix-darwin. These have gone through varying stages of readiness, so sorry if anything is in some kind of half-complete state, but I think these instructions are accurate. Hopefully they're beginner-friendly in the sense that unless you already know some Nix, the instructions will be completely impossible to even begin following.</p>
<ul>
<li>Install <code>elan</code>: <a href="https://github.com/Smaug123/nix-dotfiles/blob/d2a18241161151597c3ad71ad420394dca1763ef/home.nix#L46">https://github.com/Smaug123/nix-dotfiles/blob/d2a18241161151597c3ad71ad420394dca1763ef/home.nix#L46</a></li>
<li>Install VSCode: <a href="https://github.com/Smaug123/nix-dotfiles/blob/d2a18241161151597c3ad71ad420394dca1763ef/home.nix#L60">https://github.com/Smaug123/nix-dotfiles/blob/d2a18241161151597c3ad71ad420394dca1763ef/home.nix#L60</a> (sadly VSCodium doesn't work on Apple Silicon yet, <a href="https://github.com/VSCodium/vscodium/issues/597">https://github.com/VSCodium/vscodium/issues/597</a>)</li>
<li>Fix up your VSCode <code>lean</code> config: <a href="https://github.com/Smaug123/nix-dotfiles/blob/d2a18241161151597c3ad71ad420394dca1763ef/home.nix#L73">https://github.com/Smaug123/nix-dotfiles/blob/d2a18241161151597c3ad71ad420394dca1763ef/home.nix#L73</a></li>
<li>
<p>Set up <code>cmake</code> and install <code>gmp</code>: <a href="https://github.com/Smaug123/nix-dotfiles/blob/d2a18241161151597c3ad71ad420394dca1763ef/home.nix#L107">https://github.com/Smaug123/nix-dotfiles/blob/d2a18241161151597c3ad71ad420394dca1763ef/home.nix#L107</a></p>
</li>
<li>
<p>Clone <a href="https://github.com/leanprover-community/lean/">https://github.com/leanprover-community/lean/</a>, check out to tag <code>v3.35.1</code></p>
</li>
<li>Create makefiles: <code>cmake  ../../src</code></li>
<li>
<p>Build: <code>make</code> (takes a few minutes, and it's building native darwin-aarch64 rather than using the x86-64 compatibility layer)</p>
</li>
<li>
<p>Link with elan: <code>cd ../.. &amp;&amp; elan toolchain link stable .</code></p>
</li>
</ul>
<p>Now you can build Mathlib! Clone it, and <code>~/.elan/toolchains/stable/bin/leanpkg build</code>.</p>



<a name="264638685"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20on%20M1%20mac/near/264638685" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20on.20M1.20mac.html#264638685">(Dec 12 2021 at 19:11)</a>:</h4>
<p><code>elan override</code> may be a better way to do the last step, btw</p>



<a name="282860098"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20on%20M1%20mac/near/282860098" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Matthew Sottile <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20on.20M1.20mac.html#282860098">(May 18 2022 at 22:56)</a>:</h4>
<p>It looks like Github Actions now will have Apple Silicon support:</p>
<p><a href="https://github.com/github/roadmap/issues/507">https://github.com/github/roadmap/issues/507</a><br>
<a href="https://github.com/github/roadmap/issues/513">https://github.com/github/roadmap/issues/513</a></p>
<p>Does this mean we'll be able to get native M1 releases soon?</p>



<a name="282866076"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20on%20M1%20mac/near/282866076" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20on.20M1.20mac.html#282866076">(May 19 2022 at 00:12)</a>:</h4>
<p>For Lean 4 there already are native ARM binaries being built: <a href="https://github.com/leanprover/lean4-nightly/releases/tag/nightly-2022-05-18">https://github.com/leanprover/lean4-nightly/releases/tag/nightly-2022-05-18</a> I believe using some self-hosted hardware</p>



<a name="282866212"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20on%20M1%20mac/near/282866212" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20on.20M1.20mac.html#282866212">(May 19 2022 at 00:14)</a>:</h4>
<p>Probably this makes it easier to do that for Lean 3 community edition though which is obviously good</p>



<a name="282893478"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20on%20M1%20mac/near/282893478" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastian Ullrich <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20on.20M1.20mac.html#282893478">(May 19 2022 at 07:53)</a>:</h4>
<p><span class="user-mention silent" data-user-id="423261">Matthew Sottile</span> <a href="#narrow/stream/113488-general/topic/Lean.20on.20M1.20mac/near/282860098">said</a>:</p>
<blockquote>
<p>It looks like Github Actions now will have Apple Silicon support:</p>
<p><a href="https://github.com/github/roadmap/issues/507">https://github.com/github/roadmap/issues/507</a><br>
<a href="https://github.com/github/roadmap/issues/513">https://github.com/github/roadmap/issues/513</a></p>
<p>Does this mean we'll be able to get native M1 releases soon?</p>
</blockquote>
<p>These don't seem to mention GitHub-hosted M1 runners.</p>
<blockquote>
<p>I believe using some self-hosted hardware</p>
</blockquote>
<p>Nope, it's cross-compiled. See <a href="https://leanprover.github.io/lean4/doc/setup.html#tier-2">https://leanprover.github.io/lean4/doc/setup.html#tier-2</a>.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>