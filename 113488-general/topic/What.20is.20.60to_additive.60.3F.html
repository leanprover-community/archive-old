---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/What.20is.20.60to_additive.60.3F.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/What.20is.20.60to_additive.60.3F.html">What is `to_additive`?</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="203876446"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/What%20is%20%60to_additive%60%3F/near/203876446" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/What.20is.20.60to_additive.60.3F.html#203876446">(Jul 14 2020 at 19:30)</a>:</h4>
<p>I realise in my talk I call it a "tactic" but I'm not at all sure that that's what it is. What's the correct name for it?</p>



<a name="203876496"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/What%20is%20%60to_additive%60%3F/near/203876496" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Simon Hudon <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/What.20is.20.60to_additive.60.3F.html#203876496">(Jul 14 2020 at 19:30)</a>:</h4>
<p>An attribute</p>



<a name="203876676"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/What%20is%20%60to_additive%60%3F/near/203876676" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Hughes <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/What.20is.20.60to_additive.60.3F.html#203876676">(Jul 14 2020 at 19:31)</a>:</h4>
<p>But a tactic is executed every time an attribute is given right?</p>



<a name="203876801"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/What%20is%20%60to_additive%60%3F/near/203876801" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/What.20is.20.60to_additive.60.3F.html#203876801">(Jul 14 2020 at 19:32)</a>:</h4>
<p>As opposed to tagging something with <code>simp</code>, where nothing really happens until someone calls <code>simp</code> later on.</p>



<a name="203876802"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/What%20is%20%60to_additive%60%3F/near/203876802" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/What.20is.20.60to_additive.60.3F.html#203876802">(Jul 14 2020 at 19:32)</a>:</h4>
<p>For some attributes, correct (for other attributes the executed tactic is <code>tactic.skip</code> so then it's technically also correct)</p>



<a name="203876928"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/What%20is%20%60to_additive%60%3F/near/203876928" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/What.20is.20.60to_additive.60.3F.html#203876928">(Jul 14 2020 at 19:33)</a>:</h4>
<p>So is there a tactic behind the <code>[to_additive]</code> attribute, which humans never run?</p>



<a name="203877130"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/What%20is%20%60to_additive%60%3F/near/203877130" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Simon Hudon <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/What.20is.20.60to_additive.60.3F.html#203877130">(Jul 14 2020 at 19:35)</a>:</h4>
<p>There's also a nuance between what you use in your proof scripts and what is used in an attribute. They are both using the <code>tactic</code> monad which encapsulates most of the meta programming features but I wouldn't say <code>to_additive</code> is a tactic</p>



<a name="203877189"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/What%20is%20%60to_additive%60%3F/near/203877189" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/What.20is.20.60to_additive.60.3F.html#203877189">(Jul 14 2020 at 19:35)</a>:</h4>
<p>yes, it's written in <a href="https://leanprover-community.github.io/mathlib_docs/find/to_additive.attr/src">src#to_additive.attr</a></p>



<a name="203877190"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/What%20is%20%60to_additive%60%3F/near/203877190" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Simon Hudon <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/What.20is.20.60to_additive.60.3F.html#203877190">(Jul 14 2020 at 19:35)</a>:</h4>
<p>I would call it a code generator or a meta program if you want to be more specific than attribute</p>



<a name="203879048"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/What%20is%20%60to_additive%60%3F/near/203879048" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/What.20is.20.60to_additive.60.3F.html#203879048">(Jul 14 2020 at 19:51)</a>:</h4>
<p>Yeah, I agree with Simon, "metaprogram" seems like the right term here.</p>



<a name="203885010"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/What%20is%20%60to_additive%60%3F/near/203885010" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/What.20is.20.60to_additive.60.3F.html#203885010">(Jul 14 2020 at 20:39)</a>:</h4>
<p>Thanks all</p>



<a name="203926385"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/What%20is%20%60to_additive%60%3F/near/203926385" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jasmin Blanchette <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/What.20is.20.60to_additive.60.3F.html#203926385">(Jul 15 2020 at 08:04)</a>:</h4>
<p>I agree with Rob, and disagree with Simon (metaprogram should be spelled as one word). ;)</p>



<a name="204053452"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/What%20is%20%60to_additive%60%3F/near/204053452" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Utensil Song <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/What.20is.20.60to_additive.60.3F.html#204053452">(Jul 16 2020 at 07:31)</a>:</h4>
<p>Would a more general version of <code>to_additive</code> be desirable? </p>
<p>To <a href="https://en.wikipedia.org/wiki/XY_problem">#xy</a> my question, for example, C is equipped with a <code>has_mul</code> which forms a group, but if I need to define another multiplication for it and that multiplication also forms a multiplicative group, how can I do it? Should I use meta program to "copy" everything from the group for <code>has_mul</code>?</p>



<a name="204081478"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/What%20is%20%60to_additive%60%3F/near/204081478" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Simon Hudon <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/What.20is.20.60to_additive.60.3F.html#204081478">(Jul 16 2020 at 13:17)</a>:</h4>
<p>No you have to prove it all yourself if you have a new group. Then, many theorems are polymorphic and will work regardless of what your multiplicative group is.</p>



<a name="204081599"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/What%20is%20%60to_additive%60%3F/near/204081599" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Simon Hudon <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/What.20is.20.60to_additive.60.3F.html#204081599">(Jul 16 2020 at 13:18)</a>:</h4>
<p>You might want to define a type synonym for <code>C</code> to make it clear when you use one group vs the other</p>



<a name="204172519"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/What%20is%20%60to_additive%60%3F/near/204172519" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Utensil Song <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/What.20is.20.60to_additive.60.3F.html#204172519">(Jul 17 2020 at 05:42)</a>:</h4>
<p>Thanks, after some experiments locally, I figured out what you mean by:</p>
<ol>
<li>proving(via <code>instance</code>) <code>group C</code> with different <code>mul</code> than the <code>mul</code> in <code>has_mul C</code> (I must haven't pay enough attention when reading <code>data.complex.basic</code>)</li>
<li>how to deal with the type synonym for <code>C</code> (I used <code>def</code> so everything has to be proven for <code>C'</code>, although it also turns out that type synonym is not needed by 1 but only for making it more clear, just as you suggested literally).</li>
</ol>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>