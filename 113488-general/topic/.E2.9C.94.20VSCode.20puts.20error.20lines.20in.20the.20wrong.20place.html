---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/.E2.9C.94.20VSCode.20puts.20error.20lines.20in.20the.20wrong.20place.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.E2.9C.94.20VSCode.20puts.20error.20lines.20in.20the.20wrong.20place.html">✔ VSCode puts error lines in the wrong place</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="282919781"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%E2%9C%94%20VSCode%20puts%20error%20lines%20in%20the%20wrong%20place/near/282919781" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.E2.9C.94.20VSCode.20puts.20error.20lines.20in.20the.20wrong.20place.html#282919781">(May 19 2022 at 12:19)</a>:</h4>
<p>This is now released, <a href="https://github.com/leanprover/vscode-lean/releases/tag/v0.16.48">https://github.com/leanprover/vscode-lean/releases/tag/v0.16.48</a></p>



<a name="282919788"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%E2%9C%94%20VSCode%20puts%20error%20lines%20in%20the%20wrong%20place/near/282919788" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Notification Bot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.E2.9C.94.20VSCode.20puts.20error.20lines.20in.20the.20wrong.20place.html#282919788">(May 19 2022 at 12:19)</a>:</h4>
<p><span class="user-mention silent" data-user-id="310045">Eric Wieser</span> has marked this topic as resolved.</p>



<a name="282926946"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%E2%9C%94%20VSCode%20puts%20error%20lines%20in%20the%20wrong%20place/near/282926946" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.E2.9C.94.20VSCode.20puts.20error.20lines.20in.20the.20wrong.20place.html#282926946">(May 19 2022 at 13:16)</a>:</h4>
<blockquote>
<p>[...] these problems, UTF-32/UCS-4 makes them not exist.</p>
</blockquote>
<p>If only strings were that easy... <code>स्</code> is a single "grapheme cluster" but written as two (UTF-32) codepoints (which are of course represented as 3 UTF-16 code units, or 6 bytes of UTF-8).</p>



<a name="282940918"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%E2%9C%94%20VSCode%20puts%20error%20lines%20in%20the%20wrong%20place/near/282940918" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.E2.9C.94.20VSCode.20puts.20error.20lines.20in.20the.20wrong.20place.html#282940918">(May 19 2022 at 14:57)</a>:</h4>
<p>I guess my perpective comes from lean and python both working in terms of codepoints</p>



<a name="282940953"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%E2%9C%94%20VSCode%20puts%20error%20lines%20in%20the%20wrong%20place/near/282940953" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.E2.9C.94.20VSCode.20puts.20error.20lines.20in.20the.20wrong.20place.html#282940953">(May 19 2022 at 14:57)</a>:</h4>
<p>And not actually caring about "real" characters</p>



<a name="282941010"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%E2%9C%94%20VSCode%20puts%20error%20lines%20in%20the%20wrong%20place/near/282941010" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.E2.9C.94.20VSCode.20puts.20error.20lines.20in.20the.20wrong.20place.html#282941010">(May 19 2022 at 14:57)</a>:</h4>
<p>Note that the VSCode status bar counts <code>स्</code> as two columns, so it seems to also only look at codepoints</p>



<a name="282941444"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%E2%9C%94%20VSCode%20puts%20error%20lines%20in%20the%20wrong%20place/near/282941444" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.E2.9C.94.20VSCode.20puts.20error.20lines.20in.20the.20wrong.20place.html#282941444">(May 19 2022 at 15:00)</a>:</h4>
<p>You also need to press right-arrow twice before the cursor moves over the character.  And if you press space after the first right-arrow, vscode splits the character in half.</p>



<a name="282941548"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%E2%9C%94%20VSCode%20puts%20error%20lines%20in%20the%20wrong%20place/near/282941548" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.E2.9C.94.20VSCode.20puts.20error.20lines.20in.20the.20wrong.20place.html#282941548">(May 19 2022 at 15:00)</a>:</h4>
<p>neovim gets this right btw.</p>



<a name="282941729"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%E2%9C%94%20VSCode%20puts%20error%20lines%20in%20the%20wrong%20place/near/282941729" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastian Ullrich <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.E2.9C.94.20VSCode.20puts.20error.20lines.20in.20the.20wrong.20place.html#282941729">(May 19 2022 at 15:01)</a>:</h4>
<p>Even <code>nano</code> seems to get this right</p>



<a name="282949639"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%E2%9C%94%20VSCode%20puts%20error%20lines%20in%20the%20wrong%20place/near/282949639" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.E2.9C.94.20VSCode.20puts.20error.20lines.20in.20the.20wrong.20place.html#282949639">(May 19 2022 at 15:53)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110043">Gabriel Ebner</span> <a href="#narrow/stream/113488-general/topic/.E2.9C.94.20VSCode.20puts.20error.20lines.20in.20the.20wrong.20place/near/282941444">said</a>:</p>
<blockquote>
<p>You also need to press right-arrow twice before the cursor moves over the character.  And if you press space after the first right-arrow, vscode splits the character in half.</p>
</blockquote>
<p>Couldn't you argue this is intended behavior for a text editor? Does unicode specify how editing grapheme clusters is supposed to work?</p>



<a name="282951062"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%E2%9C%94%20VSCode%20puts%20error%20lines%20in%20the%20wrong%20place/near/282951062" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.E2.9C.94.20VSCode.20puts.20error.20lines.20in.20the.20wrong.20place.html#282951062">(May 19 2022 at 16:02)</a>:</h4>
<p>I'd say this depends on how the text is rendered.  If the character is divisible by inserting a space, then it should also be partially selectable, you should be able to put the cursor in the middle, etc.  What makes the vscode behavior so weird is that it is inconsistent.  The column number and the key input treat it as two characters, while selection and cursor display treat it as a single character.</p>
<p>For a general-purpose editor I think <code>स्</code> should count as one character.  Otherwise you could conclude with the same argument that inserting a space in <code>Ö</code> should result in <code>O ̈</code> (which to be clear, is not useful in any way).</p>



<a name="282969830"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%E2%9C%94%20VSCode%20puts%20error%20lines%20in%20the%20wrong%20place/near/282969830" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.E2.9C.94.20VSCode.20puts.20error.20lines.20in.20the.20wrong.20place.html#282969830">(May 19 2022 at 18:08)</a>:</h4>
<p><a href="https://www.foonathan.net/2021/02/column/">https://www.foonathan.net/2021/02/column/</a> is a nice high-level article I have bookmarked that may be of interest.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>