---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/Proofs.20from.20the.20book.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Proofs.20from.20the.20book.html">Proofs from the book</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="299125244"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Proofs%20from%20the%20book/near/299125244" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Moritz Firsching <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Proofs.20from.20the.20book.html#299125244">(Sep 16 2022 at 09:42)</a>:</h4>
<p>I thought it would be fun to formalize some parts of the book "Proofs from the book" by Aigner/Ziegler and started this github-repo for this:<br>
<a href="https://github.com/mo271/formal_book">https://github.com/mo271/formal_book</a><br>
In general the statements and proofs are quite accessible and span a wide variety of topics, so I expect some parts to be quite easy to do with what is already present in mathlib, while other parts might be significantly harder. Also some of the chapters might be nice projects for undergraduates.<br>
Contributions/suggestions for improvements are most welcome!</p>



<a name="299130710"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Proofs%20from%20the%20book/near/299130710" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Proofs.20from.20the.20book.html#299130710">(Sep 16 2022 at 10:19)</a>:</h4>
<p>Are some proofs in that book pictures? I was looking through a book called "proofs without words" and some of those proofs are very elegant but they would be really really hard to formalise!</p>
<p>I now have a limited experience with getting undergraduates to formalise a book, because I made this repo <a href="https://github.com/ImperialCollegeLondon/m1fexplained">https://github.com/ImperialCollegeLondon/m1fexplained</a> over the summer, which is a formalisation of some (and hopefully one day most) of the exercises in a standard undergraduate textbook written by my boss! (Martin Liebeck, the head of pure maths at Imperial, and someone who I owe a lot to because five years ago I started doing this weird new thing called Lean and he was totally fine about it). One thing I learnt is that if you want to get undergraduates involved, they're far more likely to embark on something if there's a <em>sorried statement</em>. So if you want to make the project grow organically and are happy to put some effort into an initial push I would thoroughly recommend sorrying a whole bunch of theorem statements. It's easy to forget how hard this part of the job is, once you're good at it. Most of the code in that repo was written by Imperial undergrads over the summer.</p>



<a name="299131033"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Proofs%20from%20the%20book/near/299131033" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Proofs.20from.20the.20book.html#299131033">(Sep 16 2022 at 10:21)</a>:</h4>
<p><a href="https://leanprover-community.github.io/mathlib_docs/find/symm_diff_assoc">docs#symm_diff_assoc</a> is a proof from Proofs of the book.</p>



<a name="299131461"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Proofs%20from%20the%20book/near/299131461" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Proofs.20from.20the.20book.html#299131461">(Sep 16 2022 at 10:24)</a>:</h4>
<p>What has happened with mathlib is that at the beginning undergraduates were really useful to us. There was a ton of stuff which needed to be done, and in some sense undergraduates were even sometimes directing what got done, there were people like Chris Hughes and Kenny Lau who were immersed in Imperial's undergraduate degree and were formalising parts of it and responding to other undergraduates who wanted to do things like problem sheet questions. Now mathlib is beyond this point. The stuff on the UG todo list typically cannot be done by beginner UGs any more, for the simple reason that there's nothing easy left; everything is difficult/annoying for one or more reasons and the problems are beyond a beginner. Formalising textbooks like this however are I think a very good alternative way to get UGs involved; my M1F explained repo (the name is an Imperial in joke) was very popular this summer with my project students, probably about 50% of them ended up contributing to it in one way or another (even if not all of them worked out how to do PRs -- people were emailing me proofs etc).</p>



<a name="299132804"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Proofs%20from%20the%20book/near/299132804" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Moritz Firsching <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Proofs.20from.20the.20book.html#299132804">(Sep 16 2022 at 10:34)</a>:</h4>
<p>Very few proofs in that book are "pictures" or rely on geometric intuition. </p>
<p>Re having sorried-statements: that makes sense! I plan to go through some chapters and add more sorried statements/partial proofs. <br>
I did already link to the open sorrys in the README.md:<br>
<a href="https://github.com/mo271/formal_book/search?q=sorry+extension%3Alean">https://github.com/mo271/formal_book/search?q=sorry+extension%3Alean</a><br>
(Perhaps such a link would also be useful for <a href="https://github.com/ImperialCollegeLondon/m1fexplained">https://github.com/ImperialCollegeLondon/m1fexplained</a>?!)</p>



<a name="299132897"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Proofs%20from%20the%20book/near/299132897" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Moritz Firsching <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Proofs.20from.20the.20book.html#299132897">(Sep 16 2022 at 10:35)</a>:</h4>
<p><span class="user-mention silent" data-user-id="387244">Yaël Dillies</span> <a href="#narrow/stream/113488-general/topic/Proofs.20from.20the.20book/near/299131033">said</a>:</p>
<blockquote>
<p><a href="https://leanprover-community.github.io/mathlib_docs/find/symm_diff_assoc">docs#symm_diff_assoc</a> is a proof from Proofs of the book.</p>
</blockquote>
<p>Yeah, and there are a couple of other places where mathlib follows Proofs from the book closely, most notably the entire proof of Bertrand's postulate</p>



<a name="299225993"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Proofs%20from%20the%20book/near/299225993" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Proofs.20from.20the.20book.html#299225993">(Sep 16 2022 at 19:13)</a>:</h4>
<p><span class="user-mention silent" data-user-id="387244">Yaël Dillies</span> <a href="#narrow/stream/113488-general/topic/Proofs.20from.20the.20book/near/299131033">said</a>:</p>
<blockquote>
<p><a href="https://leanprover-community.github.io/mathlib_docs/find/symm_diff_assoc">docs#symm_diff_assoc</a> is a proof from Proofs of the book.</p>
</blockquote>
<p>Hmm, I don't think that's true (unless the proof has been replaced since I added it). I believe <a href="https://mccuan.math.gatech.edu/courses/4317/symmetricdifference.pdf">the title and introduction of the reference linked in the module doc</a> claim that the proof presented is a proof from "the Book" rather than claiming that it's a proof from "Proofs [from] the book".</p>



<a name="299227284"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Proofs%20from%20the%20book/near/299227284" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Junyan Xu <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Proofs.20from.20the.20book.html#299227284">(Sep 16 2022 at 19:21)</a>:</h4>
<p>I think the most conceptual proof uses the fact that the symmetric difference of two sets correspond to pointwise addition of their indicator functions taking value in <code>zmod 2</code>. This proof is not intuitionistic though.</p>



<a name="299228722"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Proofs%20from%20the%20book/near/299228722" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Proofs.20from.20the.20book.html#299228722">(Sep 16 2022 at 19:31)</a>:</h4>
<p><code>symm_diff_assoc</code> applies to (generalized) Boolean algebras though - is there a suitable notion of indicator function at that level of generality?</p>



<a name="299229164"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Proofs%20from%20the%20book/near/299229164" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Proofs.20from.20the.20book.html#299229164">(Sep 16 2022 at 19:34)</a>:</h4>
<p>I suspect that would need atomicity.</p>



<a name="299232425"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Proofs%20from%20the%20book/near/299232425" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Junyan Xu <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Proofs.20from.20the.20book.html#299232425">(Sep 16 2022 at 19:59)</a>:</h4>
<p>A generalized Boolean algebra embeds into a Boolean algebra according to <a href="https://math.stackexchange.com/a/2985310/12932">https://math.stackexchange.com/a/2985310/12932</a>, and a Boolean algebra embeds into a powerset algebra by Stone's representation theorem. These should be enough to reduce the problem to powerset algebras.</p>
<p>(Hmm and I think the original proof can't be made intuitionistic either; some double negation is involved. Not sure if the co-Heyting diff works, or whether using <code>¬(p ↔ q)</code> or <code>¬(p → q) ∨ ¬(q → p)</code> to define symm_diff makes any difference.)</p>



<a name="299288486"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Proofs%20from%20the%20book/near/299288486" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Proofs.20from.20the.20book.html#299288486">(Sep 17 2022 at 08:36)</a>:</h4>
<p>If it could be made intuitionistic, it would hold in co-Heyting algebras, and the dual would hold in Heyting algebras, but the following fails:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">iff_assoc</span> <span class="o">{</span><span class="n">p</span> <span class="n">q</span> <span class="n">r</span> <span class="o">:</span> <span class="kt">Prop</span><span class="o">}</span> <span class="o">:</span> <span class="o">(</span><span class="n">p</span> <span class="bp">↔</span> <span class="o">(</span><span class="n">q</span> <span class="bp">↔</span> <span class="n">r</span><span class="o">))</span> <span class="bp">↔</span> <span class="o">((</span><span class="n">p</span> <span class="bp">↔</span> <span class="n">q</span><span class="o">)</span> <span class="bp">↔</span> <span class="n">r</span><span class="o">)</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">itauto</span> <span class="c1">-- fails</span>
</code></pre></div>



<a name="299338097"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Proofs%20from%20the%20book/near/299338097" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bolton Bailey <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Proofs.20from.20the.20book.html#299338097">(Sep 17 2022 at 15:53)</a>:</h4>
<p>OP might be interested to know, the proof of Bertrand’s postulate now in mathlib follows the approach of Aigner and Ziegler</p>



<a name="299338180"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Proofs%20from%20the%20book/near/299338180" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bolton Bailey <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Proofs.20from.20the.20book.html#299338180">(Sep 17 2022 at 15:54)</a>:</h4>
<p>(Actually I see someone already commented this)</p>



<a name="299579795"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Proofs%20from%20the%20book/near/299579795" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Junyan Xu <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Proofs.20from.20the.20book.html#299579795">(Sep 19 2022 at 14:54)</a>:</h4>
<p><span class="user-mention silent" data-user-id="387244">Yaël Dillies</span> <a href="#narrow/stream/113488-general/topic/Proofs.20from.20the.20book/near/299288486">said</a>:</p>
<blockquote>
<p>If it could be made intuitionistic, it would hold in co-Heyting algebras, and the dual would hold in Heyting algebras, but the following fails:</p>
<p><div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">iff_assoc</span> <span class="o">{</span><span class="n">p</span> <span class="n">q</span> <span class="n">r</span> <span class="o">:</span> <span class="kt">Prop</span><span class="o">}</span> <span class="o">:</span> <span class="o">(</span><span class="n">p</span> <span class="bp">↔</span> <span class="o">(</span><span class="n">q</span> <span class="bp">↔</span> <span class="n">r</span><span class="o">))</span> <span class="bp">↔</span> <span class="o">((</span><span class="n">p</span> <span class="bp">↔</span> <span class="n">q</span><span class="o">)</span> <span class="bp">↔</span> <span class="n">r</span><span class="o">)</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">itauto</span> <span class="c1">-- fails</span>
</code></pre></div><br>
</p>
</blockquote>
<p>Indeed, <a href="https://math.stackexchange.com/a/440927/12932">one comment here</a> pointed out associativity is equivalent to the law of excluded middle.</p>



<a name="299580873"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Proofs%20from%20the%20book/near/299580873" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Proofs.20from.20the.20book.html#299580873">(Sep 19 2022 at 15:00)</a>:</h4>
<p>not sure about equivalent to LEM, but it's certainly not intuitionistically true</p>



<a name="299588594"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Proofs%20from%20the%20book/near/299588594" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Junyan Xu <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Proofs.20from.20the.20book.html#299588594">(Sep 19 2022 at 15:40)</a>:</h4>
<p>The last comment below the answer shows it's equivelent to double negation elimination, which is equivalent to LEM. Here's a Lean proof:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">tactic</span>
<span class="kd">def</span> <span class="n">iff_assoc</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">:=</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">p</span> <span class="n">q</span> <span class="n">r</span> <span class="o">:</span> <span class="kt">Prop</span><span class="o">),</span> <span class="o">((</span><span class="n">p</span> <span class="bp">↔</span> <span class="n">q</span><span class="o">)</span> <span class="bp">↔</span> <span class="n">r</span><span class="o">)</span> <span class="bp">↔</span> <span class="o">(</span><span class="n">p</span> <span class="bp">↔</span> <span class="o">(</span><span class="n">q</span> <span class="bp">↔</span> <span class="n">r</span><span class="o">))</span>
<span class="kd">def</span> <span class="n">lem</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">:=</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="kt">Prop</span><span class="o">),</span> <span class="n">p</span> <span class="bp">∨</span> <span class="bp">¬</span><span class="n">p</span>

<span class="kd">lemma</span> <span class="n">iff_assoc_iff_lem</span> <span class="o">:</span> <span class="n">iff_assoc</span> <span class="bp">↔</span> <span class="n">lem</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">split</span><span class="bp">;</span> <span class="n">intro</span> <span class="n">h</span><span class="o">,</span>
  <span class="o">{</span> <span class="k">have</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">p</span><span class="o">,</span> <span class="bp">¬¬</span><span class="n">p</span> <span class="bp">→</span> <span class="n">p</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">p</span><span class="o">,</span> <span class="o">((</span><span class="n">h</span> <span class="n">p</span> <span class="n">false</span> <span class="bp">¬</span><span class="n">p</span><span class="o">)</span><span class="bp">.</span><span class="mi">1</span> <span class="bp">$</span> <span class="n">iff_false</span> <span class="n">p</span><span class="o">)</span><span class="bp">.</span><span class="mi">2</span> <span class="bp">∘</span> <span class="o">(</span><span class="n">false_iff</span> <span class="bp">¬</span><span class="n">p</span><span class="o">)</span><span class="bp">.</span><span class="mi">2</span><span class="o">,</span>
    <span class="n">exact</span> <span class="bp">λ</span> <span class="n">p</span><span class="o">,</span> <span class="n">this</span> <span class="n">_</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">n</span><span class="o">,</span> <span class="n">n</span> <span class="bp">$</span> <span class="n">or.inr</span> <span class="bp">$</span> <span class="n">n</span> <span class="bp">∘</span> <span class="n">or.inl</span><span class="o">)</span> <span class="o">},</span>
  <span class="o">{</span> <span class="n">intros</span> <span class="n">p</span> <span class="n">q</span> <span class="n">r</span><span class="o">,</span> <span class="n">cases</span> <span class="n">h</span> <span class="n">p</span><span class="bp">;</span> <span class="n">cases</span> <span class="n">h</span> <span class="n">q</span><span class="bp">;</span> <span class="n">cases</span> <span class="n">h</span> <span class="n">r</span><span class="bp">;</span> <span class="n">revert</span> <span class="n">h_1</span> <span class="n">h_2</span> <span class="n">h_3</span><span class="bp">;</span> <span class="n">itauto</span> <span class="o">},</span>
<span class="kd">end</span>

<span class="k">#print</span> <span class="kd">axioms</span> <span class="n">iff_assoc_iff_lem</span> <span class="c">/-</span><span class="cm"> no axioms -/</span>
</code></pre></div>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>