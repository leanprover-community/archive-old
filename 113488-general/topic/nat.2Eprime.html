---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/nat.2Eprime.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/nat.2Eprime.html">nat.prime</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="264423205"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/nat.prime/near/264423205" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/nat.2Eprime.html#264423205">(Dec 10 2021 at 09:46)</a>:</h4>
<p>We have <a href="https://leanprover-community.github.io/mathlib_docs/find/nat.prime">docs#nat.prime</a> and <a href="https://leanprover-community.github.io/mathlib_docs/find/prime">docs#prime</a>. Should we redefine <code>nat.prime</code> in terms of <code>_root_.prime</code>?</p>



<a name="264423230"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/nat.prime/near/264423230" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/nat.2Eprime.html#264423230">(Dec 10 2021 at 09:47)</a>:</h4>
<p>cc <span class="user-mention" data-user-id="422543">@Stuart Presnell</span> , because you've been working with <code>nat.prime</code> a lot recently.</p>



<a name="264423433"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/nat.prime/near/264423433" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/nat.2Eprime.html#264423433">(Dec 10 2021 at 09:48)</a>:</h4>
<p>Do we even have the statement that the two notions are equivalent?</p>



<a name="264423452"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/nat.prime/near/264423452" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/nat.2Eprime.html#264423452">(Dec 10 2021 at 09:48)</a>:</h4>
<p>pretty sure</p>



<a name="264423520"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/nat.prime/near/264423520" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/nat.2Eprime.html#264423520">(Dec 10 2021 at 09:49)</a>:</h4>
<p><a href="https://leanprover-community.github.io/mathlib_docs/find/nat.prime_iff">docs#nat.prime_iff</a></p>



<a name="264423610"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/nat.prime/near/264423610" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/nat.2Eprime.html#264423610">(Dec 10 2021 at 09:50)</a>:</h4>
<p>Although, there is both <code>irreducible</code> and <code>prime</code> and neither one is a clear winner for the definition of <code>nat.prime</code></p>



<a name="264423888"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/nat.prime/near/264423888" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/nat.2Eprime.html#264423888">(Dec 10 2021 at 09:52)</a>:</h4>
<p>I worry about dependency bloat, of course. It would be nice to make these kinds of things quantitative, for example, calculating the sum of the depths of all files before and after</p>



<a name="264424323"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/nat.prime/near/264424323" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/nat.2Eprime.html#264424323">(Dec 10 2021 at 09:56)</a>:</h4>
<p>If we can split off the <code>big_operators</code> dependency from <a href="https://leanprover-community.github.io/mathlib_docs/algebra/associated.html"><code>algebra.associated</code></a>, the remainder is low-level definitions such as <code>group_with_zero</code> and <code>units</code>. So I'm in favour of unifying <code>nat.prime</code> with <code>_root_.prime</code> after such a split.</p>



<a name="264424505"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/nat.prime/near/264424505" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/nat.2Eprime.html#264424505">(Dec 10 2021 at 09:58)</a>:</h4>
<p>Right, clearly <code>big_ops</code> shouldn't be a dependency.</p>



<a name="264424514"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/nat.prime/near/264424514" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/nat.2Eprime.html#264424514">(Dec 10 2021 at 09:58)</a>:</h4>
<p>But otherwise, I think it's quite mild.</p>



<a name="264425284"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/nat.prime/near/264425284" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/nat.2Eprime.html#264425284">(Dec 10 2021 at 10:05)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110049">Mario Carneiro</span> <a href="#narrow/stream/113488-general/topic/nat.2Eprime/near/264423888">said</a>:</p>
<blockquote>
<p>I worry about dependency bloat, of course. It would be nice to make these kinds of things quantitative, for example, calculating the sum of the depths of all files before and after</p>
</blockquote>
<p>Do the stats at <a href="https://eric-wieser.github.io/mathlib-import-graph/?highlight=mathlib%3Aring_theory.int.basic">https://eric-wieser.github.io/mathlib-import-graph/?highlight=mathlib%3Aring_theory.int.basic</a> help? If you hover over the highlighted node, it tells you that 31285 declarations appear before that file, and 248 files consume it.</p>



<a name="264425292"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/nat.prime/near/264425292" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ruben Van de Velde <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/nat.2Eprime.html#264425292">(Dec 10 2021 at 10:05)</a>:</h4>
<p>Oh, I think I broke that dependency at some point, but then didn't land that? It's just <code>exists_mem_finset_dvd</code> that needs it</p>



<a name="264425365"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/nat.prime/near/264425365" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ruben Van de Velde <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/nat.2Eprime.html#264425365">(Dec 10 2021 at 10:06)</a>:</h4>
<p>That was in <a href="https://github.com/leanprover-community/mathlib/issues/9606">#9606</a> - that lemma isn't even used in mathlib</p>



<a name="265048990"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/nat.prime/near/265048990" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/nat.2Eprime.html#265048990">(Dec 15 2021 at 17:58)</a>:</h4>
<p>I am strongly in favor of removing <code>nat.prime</code> and just using <code>prime</code> everywhere.</p>



<a name="265085459"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/nat.prime/near/265085459" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/nat.2Eprime.html#265085459">(Dec 15 2021 at 22:30)</a>:</h4>
<p>I guess <code>p.prime</code> is no shorter than <code>prime p</code>.</p>



<a name="265116497"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/nat.prime/near/265116497" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/nat.2Eprime.html#265116497">(Dec 16 2021 at 06:20)</a>:</h4>
<p>That's not the point. The point is deduplicating all the lemmas.</p>



<a name="265195161"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/nat.prime/near/265195161" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/nat.2Eprime.html#265195161">(Dec 16 2021 at 18:06)</a>:</h4>
<p>Step 1: <a href="https://github.com/leanprover-community/mathlib/pull/10848">#10848</a></p>



<a name="265801495"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/nat.prime/near/265801495" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ruben Van de Velde <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/nat.2Eprime.html#265801495">(Dec 22 2021 at 12:58)</a>:</h4>
<p>I started looking into this at <a href="https://github.com/leanprover-community/mathlib/tree/nat-prime-irreducible">branch#nat-prime-irreducible</a> - I tried with <code>prime</code>, but it seems like the <code>nat.prime</code> &lt;-&gt; <code>prime</code> equivalence requires a fair amount of material. <code>irreducible</code> is essentially the current definition, so that seems to work better to build up the api.</p>
<p>(Code is still a mess at this point)</p>



<a name="265803785"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/nat.prime/near/265803785" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/nat.2Eprime.html#265803785">(Dec 22 2021 at 13:22)</a>:</h4>
<p>Thanks for taking this up!</p>



<a name="265848993"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/nat.prime/near/265848993" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ruben Van de Velde <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/nat.2Eprime.html#265848993">(Dec 22 2021 at 20:27)</a>:</h4>
<p>To my surprise, I seem to have made it back to a compiling mathlib with +108-105 changes</p>



<a name="265995292"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/nat.prime/near/265995292" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ruben Van de Velde <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/nat.2Eprime.html#265995292">(Dec 24 2021 at 11:18)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib/pull/11031">#11031</a></p>



<a name="265997018"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/nat.prime/near/265997018" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/nat.2Eprime.html#265997018">(Dec 24 2021 at 11:53)</a>:</h4>
<p>Thanks!</p>



<a name="265997643"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/nat.prime/near/265997643" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/nat.2Eprime.html#265997643">(Dec 24 2021 at 12:04)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> Are you happy with this new state of affairs? It looks good to me</p>



<a name="266016826"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/nat.prime/near/266016826" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/nat.2Eprime.html#266016826">(Dec 24 2021 at 18:17)</a>:</h4>
<p>Looks good, it looks like imports weren't affected too much</p>



<a name="294795425"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/nat.prime/near/294795425" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/nat.2Eprime.html#294795425">(Aug 23 2022 at 02:48)</a>:</h4>
<p>I think it is confusing that <code>nat.min_fac_prime</code> does not make progress on <code>prime (nat.min_fac N)</code>.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>