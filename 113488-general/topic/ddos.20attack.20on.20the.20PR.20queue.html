---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/ddos.20attack.20on.20the.20PR.20queue.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ddos.20attack.20on.20the.20PR.20queue.html">ddos attack on the PR queue</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="237309022"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ddos%20attack%20on%20the%20PR%20queue/near/237309022" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ddos.20attack.20on.20the.20PR.20queue.html#237309022">(May 04 2021 at 11:47)</a>:</h4>
<p>Help! Someone seems to be generating a new PR about every 3 minutes... what's going on!</p>



<a name="237319628"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ddos%20attack%20on%20the%20PR%20queue/near/237319628" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ddos.20attack.20on.20the.20PR.20queue.html#237319628">(May 04 2021 at 13:04)</a>:</h4>
<p>(Answer: <a href="#narrow/stream/144837-PR-reviews/topic/homology.20redesign.20and.20derived.20functors">https://leanprover.zulipchat.com/#narrow/stream/144837-PR-reviews/topic/homology.20redesign.20and.20derived.20functors</a>)</p>



<a name="237319693"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ddos%20attack%20on%20the%20PR%20queue/near/237319693" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ddos.20attack.20on.20the.20PR.20queue.html#237319693">(May 04 2021 at 13:04)</a>:</h4>
<p>By the way, due to the massive <a href="https://github.com/leanprover-community/mathlib/actions.html?page=1&amp;query=is%3Aqueued&amp;workflow_file_name=build.yml">GitHub Actions queue</a> (distinct from <a href="https://app.bors.tech/repositories/24316">the bors queue</a>), the <code>staging</code> job for <a href="https://github.com/leanprover-community/mathlib/issues/7268">#7268</a> timed out, so I put it back on the queue.</p>
<p>I suspect the same thing may happen a few more times, so if anyone wants to be a good citizen, please cancel any "redundant" workflows and possibly consider waiting to push your commits until the number of queued builds is 0.</p>



<a name="237320297"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ddos%20attack%20on%20the%20PR%20queue/near/237320297" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ddos.20attack.20on.20the.20PR.20queue.html#237320297">(May 04 2021 at 13:08)</a>:</h4>
<p>Keep an eye on <a href="https://github.com/leanprover-community/mathlib/actions/runs/810108842">this <code>staging</code> job</a>; if it remains queued for longer than about 1.5 hours there's a high chance that it will time out, even if it would otherwise build successfully.</p>



<a name="237320562"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ddos%20attack%20on%20the%20PR%20queue/near/237320562" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ddos.20attack.20on.20the.20PR.20queue.html#237320562">(May 04 2021 at 13:10)</a>:</h4>
<p>(I've just gone through and canceled a bunch of workflows on outdated commits.)</p>



<a name="237320662"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ddos%20attack%20on%20the%20PR%20queue/near/237320662" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ddos.20attack.20on.20the.20PR.20queue.html#237320662">(May 04 2021 at 13:11)</a>:</h4>
<p>Can we switch to a more aggressive canceling by default?</p>



<a name="237320775"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ddos%20attack%20on%20the%20PR%20queue/near/237320775" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ddos.20attack.20on.20the.20PR.20queue.html#237320775">(May 04 2021 at 13:11)</a>:</h4>
<p>I don't know what "cancelling redundant workflows" even means. Does this just mean "don't push to any mathlib branches for a while if you can help it"?</p>



<a name="237320926"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ddos%20attack%20on%20the%20PR%20queue/near/237320926" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ddos.20attack.20on.20the.20PR.20queue.html#237320926">(May 04 2021 at 13:12)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112680">Johan Commelin</span> <a href="#narrow/stream/113488-general/topic/ddos.20attack.20on.20the.20PR.20queue/near/237320662">said</a>:</p>
<blockquote>
<p>Can we switch to a more aggressive canceling by default?</p>
</blockquote>
<p>There might be some GitHub actions which do it; I don't know of any built-in options that let us control this.</p>



<a name="237321014"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ddos%20attack%20on%20the%20PR%20queue/near/237321014" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ddos.20attack.20on.20the.20PR.20queue.html#237321014">(May 04 2021 at 13:13)</a>:</h4>
<p>Something like: if CI has run &lt; 30 minutes, and a new commit is pushed, just cancel it.</p>



<a name="237321069"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ddos%20attack%20on%20the%20PR%20queue/near/237321069" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ddos.20attack.20on.20the.20PR.20queue.html#237321069">(May 04 2021 at 13:13)</a>:</h4>
<p>In particular, if someone pushed 5 times in a row, the first 4 pushes will not really use up CI.</p>



<a name="237321154"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ddos%20attack%20on%20the%20PR%20queue/near/237321154" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ddos.20attack.20on.20the.20PR.20queue.html#237321154">(May 04 2021 at 13:14)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110038">Kevin Buzzard</span> <a href="#narrow/stream/113488-general/topic/ddos.20attack.20on.20the.20PR.20queue/near/237320775">said</a>:</p>
<blockquote>
<p>I don't know what "cancelling redundant workflows" even means. Does this just mean "don't push to any mathlib branches for a while if you can help it"?</p>
</blockquote>
<p>Basically I went through the list of queued and running CI jobs and if I saw multiple "continuous integration" jobs from the same branch, I canceled all the older ones.</p>
<p>Not pushing to mathlib branches for a while will help; like I said, keep an eye on <a href="https://github.com/leanprover-community/mathlib/actions.html?page=1&amp;query=is%3Aqueued&amp;workflow_file_name=build.yml">this page</a>.</p>



<a name="237321369"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ddos%20attack%20on%20the%20PR%20queue/near/237321369" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ddos.20attack.20on.20the.20PR.20queue.html#237321369">(May 04 2021 at 13:16)</a>:</h4>
<p><span class="user-mention" data-user-id="112680">@Johan Commelin</span> I think <span class="user-mention" data-user-id="110087">@Scott Morrison</span> experimented with something like this before; in particular, there are a few jobs under <a href="https://github.com/leanprover-community/mathlib/actions/workflows/cancel.yml?query=">"cancel CI for obsolete pushes"</a>. I don't remember the details though.</p>



<a name="237321512"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ddos%20attack%20on%20the%20PR%20queue/near/237321512" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ddos.20attack.20on.20the.20PR.20queue.html#237321512">(May 04 2021 at 13:16)</a>:</h4>
<p>Looks like the PR was <a href="https://github.com/leanprover-community/mathlib/issues/2235">#2235</a>. Maybe time to revive it?</p>



<a name="237321748"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ddos%20attack%20on%20the%20PR%20queue/near/237321748" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ddos.20attack.20on.20the.20PR.20queue.html#237321748">(May 04 2021 at 13:18)</a>:</h4>
<p>I thought it was a good idea at the time: I'm definitely a culprit when it comes to making pushes on a single branch in quick succession.</p>



<a name="237321955"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ddos%20attack%20on%20the%20PR%20queue/near/237321955" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ddos.20attack.20on.20the.20PR.20queue.html#237321955">(May 04 2021 at 13:19)</a>:</h4>
<p>Right, but doing multiple pushes in a row should be supported.</p>



<a name="237322167"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ddos%20attack%20on%20the%20PR%20queue/near/237322167" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ddos.20attack.20on.20the.20PR.20queue.html#237322167">(May 04 2021 at 13:20)</a>:</h4>
<p>At the moment we are relying on the elves to silently and smoothly keep the queue clean and CI running. (Thanks soooo much Bryan! You're doing an amazing invisible job!) If we can make this job a bit easier using more automation that would be great.</p>



<a name="237323241"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ddos%20attack%20on%20the%20PR%20queue/near/237323241" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ddos.20attack.20on.20the.20PR.20queue.html#237323241">(May 04 2021 at 13:27)</a>:</h4>
<p>I have been creating a lot of PRs touching files low in the import hierarchy, sorry for any delays caused by the long recompilation times! I'll wait for a bit before continuing.</p>



<a name="237323259"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ddos%20attack%20on%20the%20PR%20queue/near/237323259" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ddos.20attack.20on.20the.20PR.20queue.html#237323259">(May 04 2021 at 13:27)</a>:</h4>
<p>Kan academy hosts an action that runs in javascript and hence should be very lightweight: <a href="https://github.com/marketplace/actions/pull-request-workflow-cancel">https://github.com/marketplace/actions/pull-request-workflow-cancel</a></p>



<a name="237323314"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ddos%20attack%20on%20the%20PR%20queue/near/237323314" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ddos.20attack.20on.20the.20PR.20queue.html#237323314">(May 04 2021 at 13:27)</a>:</h4>
<p>I don't know if it is flexible enough for what we want.</p>



<a name="237324534"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ddos%20attack%20on%20the%20PR%20queue/near/237324534" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ddos.20attack.20on.20the.20PR.20queue.html#237324534">(May 04 2021 at 13:35)</a>:</h4>
<p>This one is very popular: <a href="https://github.com/marketplace/actions/cancel-workflow-action">https://github.com/marketplace/actions/cancel-workflow-action</a></p>



<a name="237325298"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ddos%20attack%20on%20the%20PR%20queue/near/237325298" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ddos.20attack.20on.20the.20PR.20queue.html#237325298">(May 04 2021 at 13:40)</a>:</h4>
<p>Increasing the bors timeout somehow (or getting it to count only actual running time) would also keep a long queue from disrupting bors. I'm not sure if I can make a good case for this in the bors repo issues though, as the waiting time needed could be very, very long (especially if the queue keeps growing), and allowing for super-long build times is probably not a good idea for the public bors instance that we're using.</p>



<a name="237325753"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ddos%20attack%20on%20the%20PR%20queue/near/237325753" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ddos.20attack.20on.20the.20PR.20queue.html#237325753">(May 04 2021 at 13:42)</a>:</h4>
<p><span class="user-mention" data-user-id="123965">@Bryan Gin-ge Chen</span> do you think that the new workflows that add <code>delegated</code> and such are eating up precious time?</p>



<a name="237325764"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ddos%20attack%20on%20the%20PR%20queue/near/237325764" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ddos.20attack.20on.20the.20PR.20queue.html#237325764">(May 04 2021 at 13:42)</a>:</h4>
<p>Or are those not a problem at all?</p>



<a name="237326614"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ddos%20attack%20on%20the%20PR%20queue/near/237326614" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ddos.20attack.20on.20the.20PR.20queue.html#237326614">(May 04 2021 at 13:46)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112680">Johan Commelin</span> <a href="#narrow/stream/113488-general/topic/ddos.20attack.20on.20the.20PR.20queue/near/237325753">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="123965">Bryan Gin-ge Chen</span> do you think that the new workflows that add <code>delegated</code> and such are eating up precious time?</p>
</blockquote>
<p>No, those only run for a few seconds, so I don't think they're a big deal. Our limit is <a href="https://docs.github.com/en/actions/reference/usage-limits-billing-and-administration#usage-limits">20 concurrent jobs</a> (though it sometimes looks like we're allowed more than that?), so the queue starts to grow once we have more than about 20 long-running jobs (e.g. build, lint, or test).</p>



<a name="237326845"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ddos%20attack%20on%20the%20PR%20queue/near/237326845" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ddos.20attack.20on.20the.20PR.20queue.html#237326845">(May 04 2021 at 13:47)</a>:</h4>
<p>And bors is using the same budget of 20 jobs, right?</p>



<a name="237327197"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ddos%20attack%20on%20the%20PR%20queue/near/237327197" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ddos.20attack.20on.20the.20PR.20queue.html#237327197">(May 04 2021 at 13:49)</a>:</h4>
<p>Well, the <code>staging</code> job does. (The processes that actually control bors and pushes commits, posts comments, closes PRs, etc. runs outside of our budget)</p>



<a name="237327473"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ddos%20attack%20on%20the%20PR%20queue/near/237327473" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ddos.20attack.20on.20the.20PR.20queue.html#237327473">(May 04 2021 at 13:50)</a>:</h4>
<p>If we ran <code>staging</code> on a self-hosted runner (or in a different repo, but that seems awkward) that would let some steam off, right?</p>



<a name="237327736"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ddos%20attack%20on%20the%20PR%20queue/near/237327736" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ddos.20attack.20on.20the.20PR.20queue.html#237327736">(May 04 2021 at 13:51)</a>:</h4>
<p>Yes, that would also solve the problem of bors timing out.</p>



<a name="237327848"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ddos%20attack%20on%20the%20PR%20queue/near/237327848" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ddos.20attack.20on.20the.20PR.20queue.html#237327848">(May 04 2021 at 13:52)</a>:</h4>
<p>But is it easy to isolate <code>staging</code> from the rest of CI?</p>



<a name="237328270"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ddos%20attack%20on%20the%20PR%20queue/near/237328270" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ddos.20attack.20on.20the.20PR.20queue.html#237328270">(May 04 2021 at 13:54)</a>:</h4>
<p>Alternatively, if github would allow us to schedule certain workflow / branches to have higher prio, that would also be helpful</p>



<a name="237329540"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ddos%20attack%20on%20the%20PR%20queue/near/237329540" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ddos.20attack.20on.20the.20PR.20queue.html#237329540">(May 04 2021 at 14:01)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112680">Johan Commelin</span> <a href="#narrow/stream/113488-general/topic/ddos.20attack.20on.20the.20PR.20queue/near/237327848">said</a>:</p>
<blockquote>
<p>But is it easy to isolate <code>staging</code> from the rest of CI?</p>
</blockquote>
<p>From a casual glance at <a href="https://docs.github.com/en/actions/hosting-your-own-runners/using-self-hosted-runners-in-a-workflow">the docs</a> it looks like we might have to have 2 copies of the workflow file, one that only runs on <code>staging</code> and which calls the self-hosted runner and one for everything else.</p>



<a name="237330890"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ddos%20attack%20on%20the%20PR%20queue/near/237330890" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ddos.20attack.20on.20the.20PR.20queue.html#237330890">(May 04 2021 at 14:09)</a>:</h4>
<p><span class="user-mention" data-user-id="123965">@Bryan Gin-ge Chen</span> can we save some time by somehow caching the elan and python installation steps? Especially because this python install is done several jobs per workflow</p>



<a name="237331112"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ddos%20attack%20on%20the%20PR%20queue/near/237331112" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ddos.20attack.20on.20the.20PR.20queue.html#237331112">(May 04 2021 at 14:11)</a>:</h4>
<p>I have no idea how much time this "overhead" is taking</p>



<a name="237331212"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ddos%20attack%20on%20the%20PR%20queue/near/237331212" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ddos.20attack.20on.20the.20PR.20queue.html#237331212">(May 04 2021 at 14:11)</a>:</h4>
<p>Those don't take much time at all (probably less than 10 seconds total per workflow).</p>



<a name="237331482"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ddos%20attack%20on%20the%20PR%20queue/near/237331482" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ddos.20attack.20on.20the.20PR.20queue.html#237331482">(May 04 2021 at 14:13)</a>:</h4>
<p>Hmm yes, I see. That isn't worth looking into.</p>



<a name="237333289"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ddos%20attack%20on%20the%20PR%20queue/near/237333289" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ddos.20attack.20on.20the.20PR.20queue.html#237333289">(May 04 2021 at 14:25)</a>:</h4>
<p>It's really annoying that we can't give some hints to the Github Actions scheduler.</p>



<a name="237334817"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ddos%20attack%20on%20the%20PR%20queue/near/237334817" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jannis Limperg <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ddos.20attack.20on.20the.20PR.20queue.html#237334817">(May 04 2021 at 14:34)</a>:</h4>
<p>I have a branch for which I don't actually need or want CI to run. Can I disable CI on that branch?</p>



<a name="237334924"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ddos%20attack%20on%20the%20PR%20queue/near/237334924" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ddos.20attack.20on.20the.20PR.20queue.html#237334924">(May 04 2021 at 14:35)</a>:</h4>
<p>If you don't need CI on the branch, you may as well develop it in a fork rather than in mathlib itself</p>



<a name="237334998"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ddos%20attack%20on%20the%20PR%20queue/near/237334998" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ddos.20attack.20on.20the.20PR.20queue.html#237334998">(May 04 2021 at 14:35)</a>:</h4>
<p>The only reason that everyone does their development in mathlib rather than forks (which is quite unusual for github) is because of how the CI caching is set up</p>



<a name="237335130"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ddos%20attack%20on%20the%20PR%20queue/near/237335130" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jannis Limperg <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ddos.20attack.20on.20the.20PR.20queue.html#237335130">(May 04 2021 at 14:36)</a>:</h4>
<p>Yeah I thought so too. Let me do that.</p>



<a name="237473473"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ddos%20attack%20on%20the%20PR%20queue/near/237473473" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ddos.20attack.20on.20the.20PR.20queue.html#237473473">(May 05 2021 at 10:38)</a>:</h4>
<p>bors seems stuck in a timeout loop. It's able to build and lint just fine, but then <code>leanchecker</code> pushes it over the edge</p>



<a name="237474878"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ddos%20attack%20on%20the%20PR%20queue/near/237474878" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ddos.20attack.20on.20the.20PR.20queue.html#237474878">(May 05 2021 at 10:51)</a>:</h4>
<p>What happened with out plans to switch to another checker?</p>



<a name="237837474"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ddos%20attack%20on%20the%20PR%20queue/near/237837474" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ddos.20attack.20on.20the.20PR.20queue.html#237837474">(May 07 2021 at 15:04)</a>:</h4>
<p>Update: as of <a href="https://github.com/leanprover-community/mathlib/issues/7532">#7532</a>, <code>master</code> now uses <code>trepplein</code> instead of <code>leanchecker</code>. So if you have any older PRs, merging <code>master</code> into them will make the <code>test</code> job run about 40 minutes faster!</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>