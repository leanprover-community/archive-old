---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/github.20actions.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/github.20actions.html">github actions</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="186671658"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/github%20actions/near/186671658" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/github.20actions.html#186671658">(Jan 27 2020 at 11:02)</a>:</h4>
<p>We have recently switched to github actions instead of Travis. Now, even on my fork, all branches get built. If I understand correctly, this is because the file <code>build.yml</code> got copied when I updated master.</p>
<p>I often push work in progress to github, to save it. Now, github tries to build this work in progress, which a crazy waste of processor time. Moreover, it tries to build it both on 3.4.2 and nightlies, which is a double waste. I tried to use commit messages with <code>[ci skip]</code>, but to no avail.</p>
<p>Do you see a way I could improve my workflow?</p>



<a name="186674754"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/github%20actions/near/186674754" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/github.20actions.html#186674754">(Jan 27 2020 at 11:53)</a>:</h4>
<p>If you don't want your branches to be built, you can disable github actions (for your repository) at <a href="https://github.com/sgouezel/mathlib/settings/actions" target="_blank" title="https://github.com/sgouezel/mathlib/settings/actions">https://github.com/sgouezel/mathlib/settings/actions</a></p>



<a name="186674958"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/github%20actions/near/186674958" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/github.20actions.html#186674958">(Jan 27 2020 at 11:56)</a>:</h4>
<p>I can't comment on the "waste of resources" part.  The mathlib build only takes a fraction of the time limit set by github, they clearly seem to expect this usage.  Are there any downsides to building mathlib with multiple lean versions?  Do you get inundated with emails?</p>



<a name="186677013"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/github%20actions/near/186677013" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/github.20actions.html#186677013">(Jan 27 2020 at 12:30)</a>:</h4>
<blockquote>
<p>Are there any downsides to building mathlib with multiple lean versions?</p>
</blockquote>
<p>Doesn't it harm the environment or something?</p>



<a name="186677026"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/github%20actions/near/186677026" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/github.20actions.html#186677026">(Jan 27 2020 at 12:30)</a>:</h4>
<p>It probably does. I don't think GitHub Actions is COâ‚‚-neutral</p>



<a name="186677607"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/github%20actions/near/186677607" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/github.20actions.html#186677607">(Jan 27 2020 at 12:39)</a>:</h4>
<p>Yes, that's my point. Thanks <span class="user-mention" data-user-id="110043">@Gabriel Ebner</span> , I have desactivated actions on my fork.</p>



<a name="186677837"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/github%20actions/near/186677837" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/github.20actions.html#186677837">(Jan 27 2020 at 12:43)</a>:</h4>
<p>Also, mathlib master is currently broken (error in <code>\archive\cubing_a_cube.lean</code>). I guess the new building tools do not test <code>archive</code> properly...</p>



<a name="186677893"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/github%20actions/near/186677893" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/github.20actions.html#186677893">(Jan 27 2020 at 12:44)</a>:</h4>
<p>Ouch... that happened quickly (-;</p>



<a name="186677920"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/github%20actions/near/186677920" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/github.20actions.html#186677920">(Jan 27 2020 at 12:44)</a>:</h4>
<p>Anyway, better discover it now instead of 3 months from now</p>



<a name="186678100"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/github%20actions/near/186678100" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/github.20actions.html#186678100">(Jan 27 2020 at 12:47)</a>:</h4>
<p>If you go to <a href="https://github.com/leanprover-community/mathlib/runs/409812707" target="_blank" title="https://github.com/leanprover-community/mathlib/runs/409812707">https://github.com/leanprover-community/mathlib/runs/409812707</a> for instance, the <code>test</code> step seems to succeed, but if you open it you will see an error.</p>



<a name="186678204"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/github%20actions/near/186678204" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/github.20actions.html#186678204">(Jan 27 2020 at 12:49)</a>:</h4>
<p>Also:</p>
<div class="codehilite"><pre><span></span>leanpkg build                          1h 16m 7s
&gt; lean --make src
Run leanpkg build | python scripts/detect_errors.py

WARNING: Lean version mismatch: installed version is nightly-2020-01-12, but package requires 3.4.2

configuring mathlib 0.1

WARNING: Lean version mismatch: installed version is nightly-2020-01-12, but package requires 3.4.2

&gt; lean --make src
</pre></div>



<a name="186679528"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/github%20actions/near/186679528" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/github.20actions.html#186679528">(Jan 27 2020 at 13:09)</a>:</h4>
<p>Re: broken archive file.  See <a href="https://github.com/leanprover-community/mathlib/pull/1911" target="_blank" title="https://github.com/leanprover-community/mathlib/pull/1911">https://github.com/leanprover-community/mathlib/pull/1911</a></p>



<a name="186679546"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/github%20actions/near/186679546" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/github.20actions.html#186679546">(Jan 27 2020 at 13:09)</a>:</h4>
<p><span class="user-mention" data-user-id="112680">@Johan Commelin</span> Are you worried about the warnings? Right now 3.5c should be backward compatible and we want to test with both. Once we officially bump mathlib we'll drop the 3.4.2 test (and package requirement).</p>



<a name="186680929"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/github%20actions/near/186680929" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/github.20actions.html#186680929">(Jan 27 2020 at 13:28)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib/issues/1912" target="_blank" title="https://github.com/leanprover-community/mathlib/issues/1912">#1912</a> to fix the archive.</p>



<a name="186686554"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/github%20actions/near/186686554" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/github.20actions.html#186686554">(Jan 27 2020 at 14:33)</a>:</h4>
<p>Ok, if the warnings are deliberately ignored, I'm fine with that. <span aria-label="grinning face with smiling eyes" class="emoji emoji-1f601" role="img" title="grinning face with smiling eyes">:grinning_face_with_smiling_eyes:</span></p>



<a name="186698575"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/github%20actions/near/186698575" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/github.20actions.html#186698575">(Jan 27 2020 at 16:29)</a>:</h4>
<p>More pressing is the fact that there is some authentication issue causing pushes to mathlib-nightly to fail, so that <code>update-mathlib</code> is fetching a commit that's a few days out of date. I also had a question <a href="https://github.com/leanprover-community/mathlib/pull/1909" target="_blank" title="https://github.com/leanprover-community/mathlib/pull/1909">here</a> about why each PR commit triggers 4 github actions runs.</p>



<a name="186698686"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/github%20actions/near/186698686" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/github.20actions.html#186698686">(Jan 27 2020 at 16:30)</a>:</h4>
<p>We're working on the authentication thing.</p>



<a name="186698775"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/github%20actions/near/186698775" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/github.20actions.html#186698775">(Jan 27 2020 at 16:31)</a>:</h4>
<p>I briefly looked around and didn't see an easy fix for the duplicated builds on a PR from a branch.</p>



<a name="186698812"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/github%20actions/near/186698812" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/github.20actions.html#186698812">(Jan 27 2020 at 16:31)</a>:</h4>
<p>We could disable branch builds. But once we're storing build artifacts, we might want them.</p>



<a name="186814678"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/github%20actions/near/186814678" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/github.20actions.html#186814678">(Jan 28 2020 at 18:53)</a>:</h4>
<p>We're failing later than ever before: <span aria-label="tada" class="emoji emoji-1f389" role="img" title="tada">:tada:</span> <a href="https://github.com/leanprover-community/mathlib/runs/413414692" target="_blank" title="https://github.com/leanprover-community/mathlib/runs/413414692">https://github.com/leanprover-community/mathlib/runs/413414692</a></p>



<a name="186814730"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/github%20actions/near/186814730" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/github.20actions.html#186814730">(Jan 28 2020 at 18:53)</a>:</h4>
<p>Now we get:</p>
<div class="codehilite"><pre><span></span>++ git push mathlib HEAD:refs/heads/lean-3.4.2
remote: Permission to leanprover-community/mathlib.git denied to leanprover-community-bot.
</pre></div>



<a name="186814854"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/github%20actions/near/186814854" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/github.20actions.html#186814854">(Jan 28 2020 at 18:54)</a>:</h4>
<p>As well as:</p>
<div class="codehilite"><pre><span></span>++ git push nightly HEAD:mathlib-master
To https://github.com/leanprover-community/mathlib-nightly.git
 ! [rejected]          HEAD -&gt; mathlib-master (non-fast-forward)
error: failed to push some refs to &#39;***github.com/leanprover-community/mathlib-nightly.git&#39;
hint: Updates were rejected because a pushed branch tip is behind its remote
hint: counterpart. Check out this branch and integrate the remote changes
hint: (e.g. &#39;git pull ...&#39;) before pushing again.
hint: See the &#39;Note about fast-forwards&#39; in &#39;git push --help&#39; for details.
</pre></div>



<a name="186814912"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/github%20actions/near/186814912" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/github.20actions.html#186814912">(Jan 28 2020 at 18:55)</a>:</h4>
<p>And:</p>
<div class="codehilite"><pre><span></span>++ git push nightly tag nightly-2020-01-28
To https://github.com/leanprover-community/mathlib-nightly.git
 ! [remote rejected]   nightly-2020-01-28 -&gt; nightly-2020-01-28 (shallow update not allowed)
</pre></div>



<a name="186815628"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/github%20actions/near/186815628" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/github.20actions.html#186815628">(Jan 28 2020 at 19:00)</a>:</h4>
<p>The 3.4.2 failure is because of a branch protection rule, I just added leanprover-community-bot to the access list.</p>



<a name="186815775"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/github%20actions/near/186815775" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/github.20actions.html#186815775">(Jan 28 2020 at 19:01)</a>:</h4>
<p>Absolutely no idea about the others. I guess we need to add a <code>git log</code> to see what it's trying to push?</p>



<a name="186815778"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/github%20actions/near/186815778" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/github.20actions.html#186815778">(Jan 28 2020 at 19:01)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib/pull/1919" target="_blank" title="https://github.com/leanprover-community/mathlib/pull/1919">https://github.com/leanprover-community/mathlib/pull/1919</a> &lt;-- this should fix the rest</p>



<a name="186815911"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/github%20actions/near/186815911" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/github.20actions.html#186815911">(Jan 28 2020 at 19:02)</a>:</h4>
<p>That fixes the "branch tip is behind its remote" error?</p>



<a name="186816005"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/github%20actions/near/186816005" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/github.20actions.html#186816005">(Jan 28 2020 at 19:03)</a>:</h4>
<p>Okay, yeah, I guess it sounds plausible.</p>



<a name="186816036"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/github%20actions/near/186816036" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/github.20actions.html#186816036">(Jan 28 2020 at 19:03)</a>:</h4>
<p>I'm not sure either.</p>



<a name="186816262"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/github%20actions/near/186816262" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/github.20actions.html#186816262">(Jan 28 2020 at 19:05)</a>:</h4>
<p>Well, fingers crossed once again.</p>



<a name="186825849"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/github%20actions/near/186825849" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/github.20actions.html#186825849">(Jan 28 2020 at 20:35)</a>:</h4>
<p>Damn, almost there. Can anybody please delete the <code>nightly-2020-01-28</code> tag in the nightlies repo (ideally within 60 minutes)?  The script managed to create the tag but didn't upload the tarballs.  <span class="user-mention" data-user-id="110596">@Rob Lewis</span> <span class="user-mention" data-user-id="110026">@Simon Hudon</span></p>



<a name="186826120"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/github%20actions/near/186826120" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/github.20actions.html#186826120">(Jan 28 2020 at 20:38)</a>:</h4>
<p>Done.</p>



<a name="186826152"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/github%20actions/near/186826152" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/github.20actions.html#186826152">(Jan 28 2020 at 20:38)</a>:</h4>
<p>Thank you!</p>



<a name="186826157"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/github%20actions/near/186826157" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/github.20actions.html#186826157">(Jan 28 2020 at 20:38)</a>:</h4>
<p>It looks like there's still some kind of branch protection problem though?</p>



<a name="186826201"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/github%20actions/near/186826201" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/github.20actions.html#186826201">(Jan 28 2020 at 20:39)</a>:</h4>
<p>I've already fixed it.</p>



<a name="186826227"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/github%20actions/near/186826227" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/github.20actions.html#186826227">(Jan 28 2020 at 20:39)</a>:</h4>
<p>Ah, cool.</p>



<a name="186826338"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/github%20actions/near/186826338" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/github.20actions.html#186826338">(Jan 28 2020 at 20:40)</a>:</h4>
<p>Oops, forgot to click "save changes".  Thanks for making me look at the settings page again.</p>



<a name="186832675"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/github%20actions/near/186832675" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/github.20actions.html#186832675">(Jan 28 2020 at 21:46)</a>:</h4>
<p><span aria-label="tada" class="emoji emoji-1f389" role="img" title="tada">:tada:</span></p>



<a name="186832694"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/github%20actions/near/186832694" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/github.20actions.html#186832694">(Jan 28 2020 at 21:46)</a>:</h4>
<p>Thanks Gabriel!</p>



<a name="186984745"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/github%20actions/near/186984745" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/github.20actions.html#186984745">(Jan 30 2020 at 13:18)</a>:</h4>
<p>What's the purpose of the <code>install olean-rs</code> state of the build script? I don't see where it's being used.</p>



<a name="186988190"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/github%20actions/near/186988190" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/github.20actions.html#186988190">(Jan 30 2020 at 13:58)</a>:</h4>
<p>I guess it's related to <a href="https://github.com/leanprover-community/mathlib/issues/687" target="_blank" title="https://github.com/leanprover-community/mathlib/issues/687">#687</a>. It was present in the Travis script but doesn't seem to be used there either.</p>



<a name="187007276"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/github%20actions/near/187007276" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Simon Hudon <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/github.20actions.html#187007276">(Jan 30 2020 at 17:03)</a>:</h4>
<p>There was a time where it was used to check mathlib but the error messages irritated people more than it helped them so it got disabled.</p>



<a name="187018948"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/github%20actions/near/187018948" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/github.20actions.html#187018948">(Jan 30 2020 at 19:01)</a>:</h4>
<p>Maybe turn it on again to see if it is broken?</p>



<a name="187027211"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/github%20actions/near/187027211" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/github.20actions.html#187027211">(Jan 30 2020 at 20:28)</a>:</h4>
<p>I'll run it locally to see what it says. Probably better to remove it completely from CI for now.</p>



<a name="187902766"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/github%20actions/near/187902766" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/github.20actions.html#187902766">(Feb 11 2020 at 11:14)</a>:</h4>
<p>Should we remove the 3.5c nightly build from CI? I think this is asking for trouble if/when breaking changes make it into 3.5c. We should be following a release schedule there and updating mathlib to be compatible with each release.</p>



<a name="188446037"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/github%20actions/near/188446037" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/github.20actions.html#188446037">(Feb 18 2020 at 12:24)</a>:</h4>
<p><a href="https://developer.github.com/v3/actions/artifacts/" target="_blank" title="https://developer.github.com/v3/actions/artifacts/">There's now an API for downloading GitHub Actions Artifacts</a>. I think it should be possible now to use this to make <code>cache-olean --fetch</code> work with PR branches. Does anyone (else) want to take a shot at it?</p>



<a name="188446642"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/github%20actions/near/188446642" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/github.20actions.html#188446642">(Feb 18 2020 at 12:35)</a>:</h4>
<p>Oh, wow, that happened a lot sooner than I expected.</p>



<a name="188446676"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/github%20actions/near/188446676" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/github.20actions.html#188446676">(Feb 18 2020 at 12:36)</a>:</h4>
<p>I was planning to look into external hosting for olean caches in the next few weeks. But if this works it could be easier.</p>



<a name="188446743"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/github%20actions/near/188446743" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/github.20actions.html#188446743">(Feb 18 2020 at 12:36)</a>:</h4>
<p>Not sure how much trouble the API rate limiting will cause.</p>



<a name="188446777"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/github%20actions/near/188446777" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/github.20actions.html#188446777">(Feb 18 2020 at 12:37)</a>:</h4>
<p>Can't we use GitHub authentication to have a higher rate?</p>



<a name="188446782"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/github%20actions/near/188446782" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/github.20actions.html#188446782">(Feb 18 2020 at 12:37)</a>:</h4>
<p>If you want to try it out, feel free, I don't think I'll have time this week.</p>



<a name="188446792"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/github%20actions/near/188446792" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/github.20actions.html#188446792">(Feb 18 2020 at 12:37)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110031">Patrick Massot</span> <a href="#narrow/stream/113488-general/topic/github.20actions/near/188446777" title="#narrow/stream/113488-general/topic/github.20actions/near/188446777">said</a>:</p>
<blockquote>
<p>Can't we use GitHub authentication to have a higher rate?</p>
</blockquote>
<p>Maybe, no idea.</p>



<a name="188446800"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/github%20actions/near/188446800" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/github.20actions.html#188446800">(Feb 18 2020 at 12:37)</a>:</h4>
<p>Yeah, please go for it.</p>



<a name="188447049"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/github%20actions/near/188447049" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/github.20actions.html#188447049">(Feb 18 2020 at 12:40)</a>:</h4>
<p>I'll try to find time for the bundle thing, so I'll leave cache-olean to Bryan. Note that any work on this should probably start with fixing the huge UX bug in cache-olean and update-mathlib that we talk to GitHub before trying to find a local archive.</p>



<a name="188448574"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/github%20actions/near/188448574" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/github.20actions.html#188448574">(Feb 18 2020 at 13:04)</a>:</h4>
<p>It looks like Github authentication is required to use any of the Github actions API endpoints, so <code>cache-olean</code> users who want to download artifacts will have to supply a <a href="https://help.github.com/en/github/authenticating-to-github/creating-a-personal-access-token-for-the-command-line" target="_blank" title="https://help.github.com/en/github/authenticating-to-github/creating-a-personal-access-token-for-the-command-line">personal access token</a> somehow.</p>



<a name="188448957"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/github%20actions/near/188448957" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/github.20actions.html#188448957">(Feb 18 2020 at 13:10)</a>:</h4>
<p>What about trying to do what elan does to avoid using this API?</p>



<a name="188448988"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/github%20actions/near/188448988" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/github.20actions.html#188448988">(Feb 18 2020 at 13:11)</a>:</h4>
<p>In the case of mathlib nightlies we can even directly use the url which is predictable</p>



<a name="188449333"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/github%20actions/near/188449333" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/github.20actions.html#188449333">(Feb 18 2020 at 13:17)</a>:</h4>
<p>As far as I can tell the github artifact URLs for each PR are not really predictable.</p>



<a name="188449526"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/github%20actions/near/188449526" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/github.20actions.html#188449526">(Feb 18 2020 at 13:19)</a>:</h4>
<p>The alternative would be to upload all generated olean files to some server that we control. I believe this was the original plan when it was still unclear whether / when an official github artifact API would become available.</p>



<a name="188450390"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/github%20actions/near/188450390" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/github.20actions.html#188450390">(Feb 18 2020 at 13:32)</a>:</h4>
<p>I guess cache-olean and update-mathlib could ask the user to give a token during installation? It could be optional, and if there's no token they could default to the current behavior.</p>



<a name="188450435"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/github%20actions/near/188450435" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/github.20actions.html#188450435">(Feb 18 2020 at 13:32)</a>:</h4>
<p>It would probably be asking for trouble to generate a default PAT ourselves, right?</p>



<a name="188450564"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/github%20actions/near/188450564" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/github.20actions.html#188450564">(Feb 18 2020 at 13:34)</a>:</h4>
<p>What is a PAT?</p>



<a name="188450709"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/github%20actions/near/188450709" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/github.20actions.html#188450709">(Feb 18 2020 at 13:37)</a>:</h4>
<p>An acronym I made up because I didn't want to type personal access token.</p>



<a name="188450833"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/github%20actions/near/188450833" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/github.20actions.html#188450833">(Feb 18 2020 at 13:38)</a>:</h4>
<p>This all sounds a bit silly. It may be faster to work on other hosting solutions.</p>



<a name="188497840"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/github%20actions/near/188497840" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jasmin Blanchette <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/github.20actions.html#188497840">(Feb 18 2020 at 22:26)</a>:</h4>
<p>Looks like a reference to Curry-Howard (Proof As Terms, Propositions As Types).</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>