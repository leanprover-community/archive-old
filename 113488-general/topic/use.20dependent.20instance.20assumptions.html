---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/use.20dependent.20instance.20assumptions.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/use.20dependent.20instance.20assumptions.html">use dependent instance assumptions</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="281990126"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/use%20dependent%20instance%20assumptions/near/281990126" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Miguel Marco <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/use.20dependent.20instance.20assumptions.html#281990126">(May 11 2022 at 16:17)</a>:</h4>
<p>I am preparing material for a topology course using lean and I am now trying to prove that a function between a topological space <code>X</code> (with an arbritrary topology) and a space <code>Y</code> with the topology generated by a set  of sets <code>S</code> is continuous, iff the preimages of the elements of <code>S</code>are open.</p>
<p>I want to do everything in my course from the basics, so i am ignoring the topology part of mathlib (will use stuff about sets and functions though).</p>
<p>So I have the class <code>topological_space</code>, the definition of <code>continous</code> for functions, which requires both types to be topological space, and <br>
a function <code>generated_topology</code>, which returns something of the type <code>topological space Y</code>from <code>Y</code>a and <code>S</code>.</p>
<p>Now, if i want to write my theorem</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">theorem</span> <span class="n">continuous_on_generated</span> <span class="o">{</span><span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">}</span> <span class="o">{</span> <span class="n">S</span> <span class="o">:</span> <span class="n">set</span> <span class="o">(</span><span class="n">set</span> <span class="n">Y</span><span class="o">)}</span> <span class="o">[</span><span class="n">hTX</span> <span class="o">:</span><span class="n">topological_space</span> <span class="n">X</span><span class="o">]</span>  <span class="o">[</span><span class="n">hTY</span> <span class="o">:</span> <span class="n">generated_topology</span> <span class="n">Y</span> <span class="n">S</span><span class="o">]</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">):</span>
<span class="n">continua</span> <span class="n">f</span> <span class="bp">↔</span> <span class="bp">∀</span> <span class="n">s</span> <span class="bp">∈</span> <span class="n">S</span><span class="o">,</span> <span class="o">(</span><span class="kn">open</span> <span class="o">(</span><span class="n">f</span> <span class="bp">⁻¹'</span> <span class="n">s</span><span class="o">))</span>
</code></pre></div>
<p>I get the error message  </p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">type</span> <span class="n">expected</span> <span class="n">at</span>
 <span class="n">generated_topology</span> <span class="n">Y</span> <span class="n">S</span>
<span class="n">term</span> <span class="n">has</span> <span class="n">type</span>
  <span class="n">topological_space</span> <span class="n">Y</span>
</code></pre></div>
<p>Is there a way to introduce an assumption that consist on a class instance, but depends on other items of the input (in this case, the fact that Y is not just a generic topological space, but that it has that specific topology).</p>



<a name="281991310"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/use%20dependent%20instance%20assumptions/near/281991310" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/use.20dependent.20instance.20assumptions.html#281991310">(May 11 2022 at 16:24)</a>:</h4>
<p>What you want to do is pass <code>generated_topology Y S</code> into <code>continuous f</code> as the topology on <code>Y</code>.</p>



<a name="281991430"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/use%20dependent%20instance%20assumptions/near/281991430" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/use.20dependent.20instance.20assumptions.html#281991430">(May 11 2022 at 16:25)</a>:</h4>
<p>So you shouldn't write <code>[hTY : generated_topology Y S]</code>, because that means you are trying to assume a term of type <code>generated_topology Y S</code>, but it isn't a type, it's a term of <code>topological_space Y</code>.</p>



<a name="281991486"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/use%20dependent%20instance%20assumptions/near/281991486" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/use.20dependent.20instance.20assumptions.html#281991486">(May 11 2022 at 16:25)</a>:</h4>
<p>Instead, write <code>@continuous X Y _ (generated_topology Y S) f</code>.</p>



<a name="281991571"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/use%20dependent%20instance%20assumptions/near/281991571" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/use.20dependent.20instance.20assumptions.html#281991571">(May 11 2022 at 16:26)</a>:</h4>
<p>Here, I am guess the order of the arguments. Maybe it should be <code>X _ Y</code> instead of <code>X Y _</code>.</p>



<a name="281992341"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/use%20dependent%20instance%20assumptions/near/281992341" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Miguel Marco <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/use.20dependent.20instance.20assumptions.html#281992341">(May 11 2022 at 16:31)</a>:</h4>
<p>I see, so the <code>@</code> in continuous means "don't try to infer class instances, but use this explicit ones".</p>



<a name="281992703"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/use%20dependent%20instance%20assumptions/near/281992703" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/use.20dependent.20instance.20assumptions.html#281992703">(May 11 2022 at 16:34)</a>:</h4>
<p>Roughly, yes. Although the <code>_</code> still causes Lean to infer the topology on <code>X</code> by itself.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>