---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/Finding.20results.20in.20mathlib.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Finding.20results.20in.20mathlib.html">Finding results in mathlib</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="229459001"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Finding%20results%20in%20mathlib/near/229459001" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Cyril Cohen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Finding.20results.20in.20mathlib.html#229459001">(Mar 09 2021 at 11:06)</a>:</h4>
<p>Hi everyone,</p>
<p>when I am doing proofs in Coq I spend a non-negligible amount of time (or maybe the major part of my time) using the <code>Search</code> command, to list the theory of some definition(s) or find the "best" lemma to apply at key points in my proofs (for smaller lemmas I can almost always guess their name if they come from mathcomp). The little I did with lean led me to use the command <code>#find</code>, but it is so slow that it was faster to browse lean files directly and/or searching strings in files instead.</p>
<p>My question to proficient users is: what is your way of finding results in mathlib?<br>
Do you search strings? Do you read whole files? Do you use <code>#find</code>? Do you guess/remember names? Is there another way?</p>
<p>One reason I ask is because <span class="user-mention silent" data-user-id="110038">Kevin Buzzard</span> <a href="#narrow/stream/113488-general/topic/Bad.20error.20reporting/near/223202521">said</a>:</p>
<blockquote>
<p>I was talking to Cyril Cohen last week and he said that one reason he liked Coq more than Lean was that Coq's version of #find was so much quicker than Lean's, and I resisted the urge to say "if you're using #find, you're doing it wrong". I too had essentially forgotten that this existed!</p>
</blockquote>
<p>So what is the "right" way of doing it? <span aria-label="wink" class="emoji emoji-1f609" role="img" title="wink">:wink:</span></p>



<a name="229459336"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Finding%20results%20in%20mathlib/near/229459336" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Finding.20results.20in.20mathlib.html#229459336">(Mar 09 2021 at 11:09)</a>:</h4>
<p>I do regexp search through all mathlib with the built-in vscode search. It's almost instant, and it gives me what I am looking for most of the time. I'm not sure it can be called the right way of doing things, though (regexps never are) :-)</p>



<a name="229459532"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Finding%20results%20in%20mathlib/near/229459532" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ruben Van de Velde <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Finding.20results.20in.20mathlib.html#229459532">(Mar 09 2021 at 11:11)</a>:</h4>
<p>Not sure if I'd call myself "proficient" yet, but I generally start guessing the name ([naming conventions)[https://leanprover-community.github.io/contribute/naming.html]) and use ctrl+space in vscode to see if I find it; otherwise try the two search functions on <a href="https://leanprover-community.github.io/mathlib_docs/">https://leanprover-community.github.io/mathlib_docs/</a> or skim through the relevant mathlib <code>.lean</code></p>



<a name="229459594"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Finding%20results%20in%20mathlib/near/229459594" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Finding.20results.20in.20mathlib.html#229459594">(Mar 09 2021 at 11:11)</a>:</h4>
<p><a href="https://leanprover-community.github.io/mathlib_docs/tactics.html#library_search">tactic#library_search</a> is often helpful (but can be slow)</p>



<a name="229459778"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Finding%20results%20in%20mathlib/near/229459778" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ruben Van de Velde <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Finding.20results.20in.20mathlib.html#229459778">(Mar 09 2021 at 11:13)</a>:</h4>
<p>And that, yeah, though it gives up if you're missing hypotheses in the exact form the lemma needs; sometimes <a href="https://leanprover-community.github.io/mathlib_docs/tactics.html#suggest">tactic#suggest</a> does that better (but it's also very slow, and gives a lot of pointless suggestions)</p>



<a name="229462826"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Finding%20results%20in%20mathlib/near/229462826" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ruben Van de Velde <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Finding.20results.20in.20mathlib.html#229462826">(Mar 09 2021 at 11:38)</a>:</h4>
<p>(Case in point: I just tried to make <code>library_search</code> find a lemma on inequalities on <code>int</code>, made sure I had the <code>1 &lt; 4</code> hypothesis in scope, and still failed because that was <code>(1 : nat) &lt; 4)</code>, not <code>(1 : int) &lt; 4</code>.)</p>



<a name="229478362"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Finding%20results%20in%20mathlib/near/229478362" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Rute <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Finding.20results.20in.20mathlib.html#229478362">(Mar 09 2021 at 13:45)</a>:</h4>
<p>I hesitate to mention this because it is neither the established "right way" nor is it void of self promotion, but <a class="stream" data-stream-id="274007" href="/#narrow/stream/274007-lean-gptf">#lean-gptf</a> (an experimental machine learned tactic suggestion tool for Lean) is halfway decent at finding theorems from <code>mathlib</code>. After installing as a dependency to your project, and after getting access to the API, then use <code>gptf</code> to suggest tactics.  Or tell <code>gptf</code> what type of tactic you would like with, e.g., <code>gptf {pfx := "rw"}</code> to get a rewrite tactic.  This is good for finding lemmas in <code>mathlib</code>.  (Note, <code>gptf</code> doesn't have special access to the library.  It just memorizes theorems in the course of its training, but it does it pretty well and can flexibly apply them.)</p>



<a name="229479266"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Finding%20results%20in%20mathlib/near/229479266" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Finding.20results.20in.20mathlib.html#229479266">(Mar 09 2021 at 13:51)</a>:</h4>
<p>Every trick I know has been mentioned other than the <code>hint</code> tactic. I use most of the above and I <em>never</em> use <code>#find</code>. Well spotted Cyril :-)</p>



<a name="229483644"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Finding%20results%20in%20mathlib/near/229483644" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Finding.20results.20in.20mathlib.html#229483644">(Mar 09 2021 at 14:20)</a>:</h4>
<p>To avoid piling on <code>#find</code> too much, let me say that I do find it useful for finding functions instead of theorems. Like, if I forget what <code>list.join</code> is called I can get it with <code>#find list (list _) â†’ list _</code>.  This probably works better because I use it relatively low in the import hierarchy so it isn't horribly slow.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>