---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/Notation.20for.20span.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Notation.20for.20span.html">Notation for span</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="220745595"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Notation%20for%20span/near/220745595" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Notation.20for.20span.html#220745595">(Dec 22 2020 at 23:18)</a>:</h4>
<p>I would like to find some kind of notation for the span of a vector, really anything shorter than typing <code>span ℝ {v}</code> repeatedly.  Can someone help me troubleshoot?  I have tried</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">linear_algebra.basic</span>
<span class="kn">import</span> <span class="n">data.real.basic</span>

<span class="kd">infix</span> <span class="bp">`∙`</span><span class="o">:</span><span class="mi">1000</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="bp">𝕜</span> <span class="n">x</span><span class="o">,</span> <span class="n">submodule.span</span> <span class="bp">𝕜</span> <span class="o">{</span><span class="n">x</span><span class="o">}</span>

<span class="kd">notation</span> <span class="bp">`⟪`</span><span class="n">x</span><span class="bp">`⟫</span><span class="n">_</span><span class="bp">`𝕜</span>  <span class="o">:=</span> <span class="n">submodule.span</span> <span class="bp">𝕜</span> <span class="o">{</span><span class="n">x</span><span class="o">}</span>

<span class="kd">variables</span> <span class="o">{</span><span class="n">E</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">add_comm_group</span> <span class="n">E</span><span class="o">]</span> <span class="o">[</span><span class="n">module</span> <span class="n">ℝ</span> <span class="n">E</span><span class="o">]</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">E</span><span class="o">)</span> <span class="o">(</span><span class="n">hy</span> <span class="o">:</span> <span class="n">y</span> <span class="bp">∉</span> <span class="o">(</span><span class="n">ℝ</span> <span class="bp">∙</span> <span class="n">x</span><span class="o">))</span> <span class="o">(</span><span class="n">hy'</span> <span class="o">:</span> <span class="n">y</span> <span class="bp">≠</span> <span class="n">x</span><span class="o">)</span> <span class="o">:</span> <span class="n">y</span> <span class="bp">=</span> <span class="mi">0</span> <span class="o">:=</span> <span class="gr">sorry</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">E</span><span class="o">)</span> <span class="o">(</span><span class="n">hy</span> <span class="o">:</span> <span class="n">y</span> <span class="bp">∉</span> <span class="bp">⟪</span><span class="n">x</span><span class="bp">⟫</span><span class="n">_ℝ</span><span class="o">)</span> <span class="o">(</span><span class="n">hy'</span> <span class="o">:</span> <span class="n">y</span> <span class="bp">≠</span> <span class="n">x</span><span class="o">)</span> <span class="o">:</span> <span class="n">y</span> <span class="bp">=</span> <span class="mi">0</span> <span class="o">:=</span> <span class="gr">sorry</span>
</code></pre></div>
<p>which give the errors, respectively,</p>
<div class="codehilite" data-code-language="Text only"><pre><span></span><code>failed to synthesize type class instance for
E : Type u_1,
_inst_1 : add_comm_group E,
_inst_2 : module ℝ E,
x y : E,
𝕜 : Type ?,
x : ?m_1
⊢ semiring 𝕜
</code></pre></div>
<p>(among others) and</p>
<div class="codehilite" data-code-language="Text only"><pre><span></span><code>don't know how to synthesize placeholder
context:
E : Type u_1,
_inst_1 : add_comm_group E,
_inst_2 : module ℝ E,
x y : E
⊢ Type ?
</code></pre></div>



<a name="220745993"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Notation%20for%20span/near/220745993" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Notation.20for.20span.html#220745993">(Dec 22 2020 at 23:24)</a>:</h4>
<p>(please ignore the dubious mathematics, I just want it to typecheck!)</p>



<a name="220746153"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Notation%20for%20span/near/220746153" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Notation.20for.20span.html#220746153">(Dec 22 2020 at 23:26)</a>:</h4>
<p>This works:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">linear_algebra.basic</span>
<span class="kn">import</span> <span class="n">data.real.basic</span>


<span class="kd">notation</span> <span class="bp">`⟪`</span><span class="n">x</span><span class="bp">`⟫</span><span class="n">_</span><span class="bp">`𝕜</span>  <span class="o">:=</span> <span class="n">submodule.span</span> <span class="bp">𝕜</span> <span class="o">(</span><span class="n">set.insert</span> <span class="n">x</span> <span class="bp">∅</span><span class="o">)</span>

<span class="kd">variables</span> <span class="o">{</span><span class="n">E</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">add_comm_group</span> <span class="n">E</span><span class="o">]</span> <span class="o">[</span><span class="n">module</span> <span class="n">ℝ</span> <span class="n">E</span><span class="o">]</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">E</span><span class="o">)</span> <span class="o">(</span><span class="n">hy</span> <span class="o">:</span> <span class="n">y</span> <span class="bp">∉</span> <span class="bp">⟪</span> <span class="n">x</span> <span class="bp">⟫</span><span class="n">_ℝ</span><span class="o">)</span> <span class="o">(</span><span class="n">hy'</span> <span class="o">:</span> <span class="n">y</span> <span class="bp">≠</span> <span class="n">x</span><span class="o">)</span> <span class="o">:</span> <span class="n">y</span> <span class="bp">=</span> <span class="mi">0</span> <span class="o">:=</span> <span class="gr">sorry</span>
</code></pre></div>



<a name="220746179"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Notation%20for%20span/near/220746179" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Notation.20for.20span.html#220746179">(Dec 22 2020 at 23:27)</a>:</h4>
<p>I feel like there was a similar issue with similar notation around adjoining elements to fields in the work around Galois theory, but I don't remember how it was resolved.</p>



<a name="220746190"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Notation%20for%20span/near/220746190" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Notation.20for.20span.html#220746190">(Dec 22 2020 at 23:27)</a>:</h4>
<p><span class="user-mention" data-user-id="253861">@Thomas Browning</span> probably knows :)</p>



<a name="220746271"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Notation%20for%20span/near/220746271" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Notation.20for.20span.html#220746271">(Dec 22 2020 at 23:28)</a>:</h4>
<p><code>example (x y : E) (hy : y ∉ submodule.span ℝ {x}) (hy' : y ≠ x) : y = 0 := sorry</code> doesn't work, no notation at all</p>



<a name="220746292"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Notation%20for%20span/near/220746292" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Notation.20for.20span.html#220746292">(Dec 22 2020 at 23:28)</a>:</h4>
<p>It does seem to be because Lean doesn't pick up on <code>{x} : set E</code></p>



<a name="220746322"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Notation%20for%20span/near/220746322" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Notation.20for.20span.html#220746322">(Dec 22 2020 at 23:29)</a>:</h4>
<p>This also works:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">linear_algebra.basic</span>
<span class="kn">import</span> <span class="n">data.real.basic</span>


<span class="kd">notation</span> <span class="bp">`⟪`</span><span class="n">x</span><span class="bp">`⟫</span><span class="n">_</span><span class="bp">`𝕜</span>  <span class="o">:=</span> <span class="n">submodule.span</span> <span class="bp">𝕜</span> <span class="o">{</span><span class="n">y</span> <span class="bp">|</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">x</span><span class="o">}</span>

<span class="kd">variables</span> <span class="o">{</span><span class="n">E</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">add_comm_group</span> <span class="n">E</span><span class="o">]</span> <span class="o">[</span><span class="n">module</span> <span class="n">ℝ</span> <span class="n">E</span><span class="o">]</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">E</span><span class="o">)</span> <span class="o">(</span><span class="n">hy</span> <span class="o">:</span> <span class="n">y</span> <span class="bp">∉</span> <span class="bp">⟪</span> <span class="n">x</span> <span class="bp">⟫</span><span class="n">_ℝ</span><span class="o">)</span> <span class="o">(</span><span class="n">hy'</span> <span class="o">:</span> <span class="n">y</span> <span class="bp">≠</span> <span class="n">x</span><span class="o">)</span> <span class="o">:</span> <span class="n">y</span> <span class="bp">=</span> <span class="mi">0</span> <span class="o">:=</span> <span class="gr">sorry</span>
</code></pre></div>



<a name="220746626"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Notation%20for%20span/near/220746626" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Notation.20for.20span.html#220746626">(Dec 22 2020 at 23:33)</a>:</h4>
<p>Thank you!  What about the infix version, is there a way to get that working?</p>



<a name="220746886"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Notation%20for%20span/near/220746886" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Notation.20for.20span.html#220746886">(Dec 22 2020 at 23:36)</a>:</h4>
<p>Oh,</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">notation</span> <span class="bp">𝕜`∙`</span><span class="n">x</span> <span class="o">:=</span> <span class="n">submodule.span</span> <span class="bp">𝕜</span> <span class="o">(</span><span class="n">set.insert</span> <span class="n">x</span> <span class="bp">∅</span><span class="o">)</span>
</code></pre></div>
<p>seems to work.  Maybe it's just a peculiarity of the <code>infix</code> keyword that the other one didn't.</p>



<a name="220746997"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Notation%20for%20span/near/220746997" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Notation.20for.20span.html#220746997">(Dec 22 2020 at 23:37)</a>:</h4>
<p>At least, this works:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">linear_algebra.basic</span>
<span class="kn">import</span> <span class="n">data.real.basic</span>

<span class="kd">notation</span> <span class="bp">𝕜`∙`</span><span class="n">x</span> <span class="o">:=</span> <span class="n">submodule.span</span> <span class="bp">𝕜</span> <span class="o">(</span><span class="n">set.insert</span> <span class="n">x</span> <span class="bp">∅</span><span class="o">)</span>

<span class="kd">variables</span> <span class="o">{</span><span class="n">E</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">add_comm_group</span> <span class="n">E</span><span class="o">]</span> <span class="o">[</span><span class="n">module</span> <span class="n">ℝ</span> <span class="n">E</span><span class="o">]</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">E</span><span class="o">)</span> <span class="o">(</span><span class="n">hy</span> <span class="o">:</span> <span class="n">y</span> <span class="bp">∉</span> <span class="o">(</span><span class="n">ℝ</span> <span class="bp">∙</span> <span class="n">x</span><span class="o">))</span> <span class="o">(</span><span class="n">hy'</span> <span class="o">:</span> <span class="n">y</span> <span class="bp">≠</span> <span class="n">x</span><span class="o">)</span> <span class="o">:</span> <span class="n">y</span> <span class="bp">=</span> <span class="mi">0</span> <span class="o">:=</span> <span class="gr">sorry</span>
</code></pre></div>
<p>Is there something I can do with priorities that will let me ditch the parentheses in <code>(ℝ ∙ x)</code>?</p>



<a name="220747099"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Notation%20for%20span/near/220747099" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Notation.20for.20span.html#220747099">(Dec 22 2020 at 23:39)</a>:</h4>
<p>Maybe something like this?</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">linear_algebra.basic</span>
<span class="kn">import</span> <span class="n">data.real.basic</span>

<span class="kd">notation</span> <span class="bp">𝕜`∙`</span><span class="o">:</span><span class="mi">1000</span> <span class="n">x</span> <span class="o">:=</span> <span class="n">submodule.span</span> <span class="bp">𝕜</span> <span class="o">(</span><span class="n">set.insert</span> <span class="n">x</span> <span class="bp">∅</span><span class="o">)</span>

<span class="kd">variables</span> <span class="o">{</span><span class="n">E</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">add_comm_group</span> <span class="n">E</span><span class="o">]</span> <span class="o">[</span><span class="n">module</span> <span class="n">ℝ</span> <span class="n">E</span><span class="o">]</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">E</span><span class="o">)</span> <span class="o">(</span><span class="n">hy</span> <span class="o">:</span> <span class="n">y</span> <span class="bp">∉</span> <span class="n">ℝ</span> <span class="bp">∙</span> <span class="n">x</span><span class="o">)</span> <span class="o">(</span><span class="n">hy'</span> <span class="o">:</span> <span class="n">y</span> <span class="bp">≠</span> <span class="n">x</span><span class="o">)</span> <span class="o">:</span> <span class="n">y</span> <span class="bp">=</span> <span class="mi">0</span> <span class="o">:=</span> <span class="gr">sorry</span>
</code></pre></div>



<a name="220747181"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Notation%20for%20span/near/220747181" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Notation.20for.20span.html#220747181">(Dec 22 2020 at 23:40)</a>:</h4>
<p>Awesome, thanks!  One last question: is there a centralized list of unicode characters, so that I can find a dot character without any previous use in mathlib?</p>



<a name="220747562"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Notation%20for%20span/near/220747562" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Notation.20for.20span.html#220747562">(Dec 22 2020 at 23:45)</a>:</h4>
<p>I think you have to look at the repo for the vscode extension.</p>



<a name="220747583"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Notation%20for%20span/near/220747583" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Notation.20for.20span.html#220747583">(Dec 22 2020 at 23:45)</a>:</h4>
<p>(assuming you're using vscode <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span>)</p>



<a name="220747674"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Notation%20for%20span/near/220747674" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Notation.20for.20span.html#220747674">(Dec 22 2020 at 23:46)</a>:</h4>
<p>If I remember correctly, that lists all the unicode symbols that are taken.  But how can I determine the complement? :)</p>



<a name="220748311"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Notation%20for%20span/near/220748311" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Notation.20for.20span.html#220748311">(Dec 22 2020 at 23:55)</a>:</h4>
<p>that list is not all taken characters, in fact most of them are free</p>



<a name="220748333"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Notation%20for%20span/near/220748333" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Notation.20for.20span.html#220748333">(Dec 22 2020 at 23:55)</a>:</h4>
<p>a better list would be <code>#print notation</code> with all of mathlib imported</p>



<a name="220748422"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Notation%20for%20span/near/220748422" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Notation.20for.20span.html#220748422">(Dec 22 2020 at 23:56)</a>:</h4>
<p>alternatively, if you are looking specifically for unicode characters, you can just use the list in the repo and grep for uses of each of them in mathlib</p>



<a name="220755399"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Notation%20for%20span/near/220755399" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Thomas Browning <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Notation.20for.20span.html#220755399">(Dec 23 2020 at 02:10)</a>:</h4>
<p>Here's what we used for adjoin:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="sd">/--</span>
<span class="sd">Variation on `set.insert` to enable good notation for adjoining elements to fields.</span>
<span class="sd">Used to preferentially use `singleton` rather than `insert` when adjoining one element.</span>
<span class="sd">-/</span>
<span class="c1">--this definition of notation is courtesy of Kyle Miller on zulip</span>
<span class="kd">class</span> <span class="n">insert</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">set</span> <span class="n">α</span><span class="o">)</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">insert</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">set</span> <span class="n">α</span><span class="o">)</span>

<span class="kd">@[priority 1000]</span>
<span class="kd">instance</span> <span class="n">insert_empty</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">:</span> <span class="n">insert</span> <span class="o">(</span><span class="bp">∅</span> <span class="o">:</span> <span class="n">set</span> <span class="n">α</span><span class="o">)</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">insert</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">x</span><span class="o">,</span> <span class="bp">@</span><span class="n">singleton</span> <span class="n">_</span> <span class="n">_</span> <span class="n">set.has_singleton</span> <span class="n">x</span> <span class="o">}</span>

<span class="kd">@[priority 900]</span>
<span class="kd">instance</span> <span class="n">insert_nonempty</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">set</span> <span class="n">α</span><span class="o">)</span> <span class="o">:</span> <span class="n">insert</span> <span class="n">s</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">insert</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">x</span><span class="o">,</span> <span class="n">set.insert</span> <span class="n">x</span> <span class="n">s</span> <span class="o">}</span>

<span class="kd">notation</span> <span class="n">K</span><span class="bp">`⟮`</span><span class="o">:</span><span class="n">std.prec.max_plus</span> <span class="n">l</span><span class="o">:(</span><span class="n">foldr</span> <span class="bp">`</span><span class="o">,</span> <span class="bp">`</span> <span class="o">(</span><span class="n">h</span> <span class="n">t</span><span class="o">,</span> <span class="n">insert.insert</span> <span class="n">t</span> <span class="n">h</span><span class="o">)</span> <span class="bp">∅</span><span class="o">)</span> <span class="bp">`⟯`</span> <span class="o">:=</span> <span class="n">adjoin</span> <span class="n">K</span> <span class="n">l</span>
</code></pre></div>



<a name="220755454"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Notation%20for%20span/near/220755454" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Thomas Browning <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Notation.20for.20span.html#220755454">(Dec 23 2020 at 02:10)</a>:</h4>
<p>This made it so that K(x) was definitionally equal to <code>adjoin K {x}</code></p>



<a name="220755471"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Notation%20for%20span/near/220755471" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Thomas Browning <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Notation.20for.20span.html#220755471">(Dec 23 2020 at 02:11)</a>:</h4>
<p>and it allowed for adjoining multiple elements at once</p>



<a name="220766370"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Notation%20for%20span/near/220766370" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Notation.20for.20span.html#220766370">(Dec 23 2020 at 07:19)</a>:</h4>
<p>Another way to do the original problem, adapting a trick from the code <span class="user-mention" data-user-id="253861">@Thomas Browning</span> posted:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">linear_algebra.basic</span>
<span class="kn">import</span> <span class="n">data.real.basic</span>

<span class="kd">notation</span> <span class="bp">𝕜`∙`</span><span class="o">:</span><span class="mi">1000</span> <span class="n">x</span> <span class="o">:=</span> <span class="n">submodule.span</span> <span class="bp">𝕜</span> <span class="o">(</span><span class="bp">@</span><span class="n">singleton</span> <span class="n">_</span> <span class="n">_</span> <span class="n">set.has_singleton</span> <span class="n">x</span><span class="o">)</span>

<span class="kd">variables</span> <span class="o">{</span><span class="n">E</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">add_comm_group</span> <span class="n">E</span><span class="o">]</span> <span class="o">[</span><span class="n">module</span> <span class="n">ℝ</span> <span class="n">E</span><span class="o">]</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">E</span><span class="o">)</span> <span class="o">(</span><span class="n">hy</span> <span class="o">:</span> <span class="n">y</span> <span class="bp">∉</span> <span class="o">(</span><span class="n">ℝ</span> <span class="bp">∙</span> <span class="n">x</span><span class="o">))</span> <span class="o">(</span><span class="n">hy'</span> <span class="o">:</span> <span class="n">y</span> <span class="bp">≠</span> <span class="n">x</span><span class="o">)</span> <span class="o">:</span> <span class="n">y</span> <span class="bp">=</span> <span class="mi">0</span> <span class="o">:=</span> <span class="gr">sorry</span>
</code></pre></div>



<a name="222678819"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Notation%20for%20span/near/222678819" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Notation.20for.20span.html#222678819">(Jan 14 2021 at 04:23)</a>:</h4>
<p><span class="user-mention" data-user-id="260507">@Heather Macbeth</span> did your new notation for the span of a vector get merged into mathlib yet?</p>



<a name="222678894"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Notation%20for%20span/near/222678894" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Notation.20for.20span.html#222678894">(Jan 14 2021 at 04:24)</a>:</h4>
<p>Yup, <a href="https://github.com/leanprover-community/mathlib/issues/5538">#5538</a>.</p>



<a name="222678902"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Notation%20for%20span/near/222678902" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Notation.20for.20span.html#222678902">(Jan 14 2021 at 04:24)</a>:</h4>
<p>Great! Thanks :)</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>