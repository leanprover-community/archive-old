---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/has_continuous_mul.20.20extends.20has_mul.3F.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/has_continuous_mul.20.20extends.20has_mul.3F.html">has_continuous_mul  extends has_mul?</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="265747727"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/has_continuous_mul%20%20extends%20has_mul%3F/near/265747727" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bernd Losert <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/has_continuous_mul.20.20extends.20has_mul.3F.html#265747727">(Dec 21 2021 at 23:34)</a>:</h4>
<p>How come has_continuous_mul does not extend has_mul?</p>



<a name="265748154"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/has_continuous_mul%20%20extends%20has_mul%3F/near/265748154" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/has_continuous_mul.20.20extends.20has_mul.3F.html#265748154">(Dec 21 2021 at 23:40)</a>:</h4>
<p><a href="https://leanprover-community.github.io/mathlib_docs/find/has_continuous_mul">docs#has_continuous_mul</a></p>



<a name="265748171"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/has_continuous_mul%20%20extends%20has_mul%3F/near/265748171" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/has_continuous_mul.20.20extends.20has_mul.3F.html#265748171">(Dec 21 2021 at 23:41)</a>:</h4>
<p>it does?</p>



<a name="265748196"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/has_continuous_mul%20%20extends%20has_mul%3F/near/265748196" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/has_continuous_mul.20.20extends.20has_mul.3F.html#265748196">(Dec 21 2021 at 23:41)</a>:</h4>
<p>I mean, it doesn't extend it, but it asks for <code>has_mul M</code> which is the same thing modulo technical details about maps between classes</p>



<a name="265748282"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/has_continuous_mul%20%20extends%20has_mul%3F/near/265748282" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/has_continuous_mul.20.20extends.20has_mul.3F.html#265748282">(Dec 21 2021 at 23:42)</a>:</h4>
<p>Search zulip for the word <code>mixin</code> for more about this design choice.</p>



<a name="265748301"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/has_continuous_mul%20%20extends%20has_mul%3F/near/265748301" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/has_continuous_mul.20.20extends.20has_mul.3F.html#265748301">(Dec 21 2021 at 23:42)</a>:</h4>
<p><code>class has_continuous_mul extends has_mul X</code> would mean <em>"if you write <code>has_continuous_mul X</code>, you get a new multiplication on <code>X</code>"</em>. This means if you write <code>[ring X] [has_continuous_mul X]</code> you just got two different multiplication operators, which is unlikely what you wanted to express.</p>



<a name="265748360"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/has_continuous_mul%20%20extends%20has_mul%3F/near/265748360" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/has_continuous_mul.20.20extends.20has_mul.3F.html#265748360">(Dec 21 2021 at 23:43)</a>:</h4>
<p><code>class has_continuous_mul [has_mul X]</code> means <em>"you can't use <code>has_continuous_mul X</code> unless you have a multiplication already"</em>.</p>



<a name="265748835"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/has_continuous_mul%20%20extends%20has_mul%3F/near/265748835" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bernd Losert <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/has_continuous_mul.20.20extends.20has_mul.3F.html#265748835">(Dec 21 2021 at 23:50)</a>:</h4>
<p>Ah, I see.</p>



<a name="265750472"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/has_continuous_mul%20%20extends%20has_mul%3F/near/265750472" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bernd Losert <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/has_continuous_mul.20.20extends.20has_mul.3F.html#265750472">(Dec 22 2021 at 00:07)</a>:</h4>
<p>I am having trouble getting the following to work:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">tactic</span>
<span class="kn">import</span> <span class="n">order.filter.partial</span>
<span class="kn">import</span> <span class="n">algebra.support</span>

<span class="kd">noncomputable theory</span>
<span class="kn">open</span> <span class="n">set</span> <span class="n">filter</span> <span class="n">classical</span>
<span class="n">open_locale</span> <span class="n">classical</span> <span class="n">filter</span>

<span class="kd">variables</span> <span class="o">{</span><span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span>

<span class="kd">structure</span> <span class="n">convergence_space</span> <span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">converges</span> <span class="o">:</span> <span class="n">filter</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">X</span> <span class="bp">→</span> <span class="kt">Prop</span><span class="o">)</span>

<span class="kn">attribute</span> <span class="o">[</span><span class="kd">class</span><span class="o">]</span> <span class="n">convergence_space</span>

<span class="kn">open</span> <span class="n">convergence_space</span>

<span class="kd">instance</span> <span class="o">[</span><span class="n">p</span> <span class="o">:</span> <span class="n">convergence_space</span> <span class="n">X</span><span class="o">]</span> <span class="o">[</span><span class="n">q</span> <span class="o">:</span> <span class="n">convergence_space</span> <span class="n">Y</span><span class="o">]</span> <span class="o">:</span> <span class="n">convergence_space</span> <span class="o">(</span><span class="n">X</span> <span class="bp">×</span> <span class="n">Y</span><span class="o">)</span> <span class="o">:=</span> <span class="gr">sorry</span>
<span class="kd">instance</span> <span class="o">[</span><span class="n">p</span> <span class="o">:</span> <span class="n">convergence_space</span> <span class="n">X</span><span class="o">]</span> <span class="o">:</span> <span class="n">convergence_space</span> <span class="o">(</span><span class="n">option</span> <span class="n">X</span><span class="o">)</span> <span class="o">:=</span> <span class="gr">sorry</span>

<span class="kd">structure</span> <span class="n">continuous</span> <span class="o">[</span><span class="n">p</span> <span class="o">:</span> <span class="n">convergence_space</span> <span class="n">X</span><span class="o">]</span> <span class="o">[</span><span class="n">q</span> <span class="o">:</span> <span class="n">convergence_space</span> <span class="n">Y</span><span class="o">]</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">filter_converges</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">{</span><span class="n">x</span><span class="o">}</span> <span class="o">{</span><span class="n">ℱ</span><span class="o">},</span> <span class="n">p.converges</span> <span class="n">ℱ</span> <span class="n">x</span> <span class="bp">→</span> <span class="n">q.converges</span> <span class="o">(</span><span class="n">map</span> <span class="n">f</span> <span class="n">ℱ</span><span class="o">)</span> <span class="o">(</span><span class="n">f</span> <span class="n">x</span><span class="o">))</span>

<span class="kd">class</span> <span class="n">has_continuous_mul</span> <span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">convergence_space</span> <span class="n">X</span><span class="o">]</span> <span class="o">[</span><span class="n">has_mul</span> <span class="n">X</span><span class="o">]</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">continuous_mul</span> <span class="o">:</span> <span class="n">continuous</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">p</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">×</span> <span class="n">X</span><span class="o">,</span> <span class="n">p.1</span> <span class="bp">*</span> <span class="n">p.2</span><span class="o">))</span>

<span class="kd">class</span> <span class="n">has_continuous_smul</span> <span class="o">(</span><span class="n">S</span> <span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">has_scalar</span> <span class="n">S</span> <span class="n">X</span><span class="o">]</span> <span class="o">[</span><span class="n">convergence_space</span> <span class="n">S</span><span class="o">]</span> <span class="o">[</span><span class="n">convergence_space</span> <span class="n">X</span><span class="o">]</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">continuous_smul</span> <span class="o">:</span> <span class="n">continuous</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">p</span> <span class="o">:</span> <span class="n">S</span> <span class="bp">×</span> <span class="n">X</span><span class="o">,</span> <span class="n">p.1</span> <span class="bp">•</span> <span class="n">p.2</span><span class="o">))</span>

<span class="kd">class</span> <span class="n">convergence_group</span> <span class="o">(</span><span class="n">G</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">convergence_space</span> <span class="n">G</span><span class="o">]</span> <span class="o">[</span><span class="n">group</span> <span class="n">G</span><span class="o">]</span> <span class="kd">extends</span> <span class="n">has_continuous_mul</span> <span class="n">G</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">continuous_inv</span> <span class="o">:</span> <span class="n">continuous</span> <span class="o">(</span><span class="n">has_inv.inv</span> <span class="o">:</span> <span class="n">G</span> <span class="bp">→</span> <span class="n">G</span><span class="o">))</span>

<span class="kd">class</span> <span class="n">partial_group_action</span> <span class="o">(</span><span class="n">G</span> <span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">group</span> <span class="n">G</span><span class="o">]</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="n">G</span> <span class="bp">×</span> <span class="n">option</span> <span class="n">X</span> <span class="bp">-&gt;</span> <span class="n">option</span> <span class="n">X</span><span class="o">)</span>

<span class="kn">open</span> <span class="n">partial_group_action</span>

<span class="kd">class</span> <span class="n">continuous_partial_group_action</span> <span class="o">(</span><span class="n">G</span> <span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">convergence_group</span> <span class="n">G</span><span class="o">]</span> <span class="o">[</span><span class="n">partial_group_action</span> <span class="n">G</span> <span class="n">X</span><span class="o">]</span> <span class="o">[</span><span class="n">convergence_space</span> <span class="n">X</span><span class="o">]</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">continuity</span> <span class="o">:</span> <span class="n">continuous</span> <span class="n">α</span><span class="o">)</span> <span class="c1">-- COMPLAINS that it can't find instance of convergence_space G</span>
</code></pre></div>



<a name="265750725"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/has_continuous_mul%20%20extends%20has_mul%3F/near/265750725" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/has_continuous_mul.20.20extends.20has_mul.3F.html#265750725">(Dec 22 2021 at 00:09)</a>:</h4>
<p>That's precisely because your <code>convergence_group</code> is a mixin.....</p>



<a name="265750903"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/has_continuous_mul%20%20extends%20has_mul%3F/near/265750903" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/has_continuous_mul.20.20extends.20has_mul.3F.html#265750903">(Dec 22 2021 at 00:10)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">tactic</span>
<span class="kn">import</span> <span class="n">order.filter.partial</span>
<span class="kn">import</span> <span class="n">algebra.support</span>

<span class="kd">noncomputable theory</span>
<span class="kn">open</span> <span class="n">set</span> <span class="n">filter</span> <span class="n">classical</span>
<span class="n">open_locale</span> <span class="n">classical</span> <span class="n">filter</span>

<span class="kd">variables</span> <span class="o">{</span><span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span>

<span class="kd">structure</span> <span class="n">convergence_space</span> <span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">converges</span> <span class="o">:</span> <span class="n">filter</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">X</span> <span class="bp">→</span> <span class="kt">Prop</span><span class="o">)</span>

<span class="kn">attribute</span> <span class="o">[</span><span class="kd">class</span><span class="o">]</span> <span class="n">convergence_space</span>

<span class="kn">open</span> <span class="n">convergence_space</span>

<span class="kd">instance</span> <span class="o">[</span><span class="n">p</span> <span class="o">:</span> <span class="n">convergence_space</span> <span class="n">X</span><span class="o">]</span> <span class="o">[</span><span class="n">q</span> <span class="o">:</span> <span class="n">convergence_space</span> <span class="n">Y</span><span class="o">]</span> <span class="o">:</span> <span class="n">convergence_space</span> <span class="o">(</span><span class="n">X</span> <span class="bp">×</span> <span class="n">Y</span><span class="o">)</span> <span class="o">:=</span> <span class="gr">sorry</span>
<span class="kd">instance</span> <span class="o">[</span><span class="n">p</span> <span class="o">:</span> <span class="n">convergence_space</span> <span class="n">X</span><span class="o">]</span> <span class="o">:</span> <span class="n">convergence_space</span> <span class="o">(</span><span class="n">option</span> <span class="n">X</span><span class="o">)</span> <span class="o">:=</span> <span class="gr">sorry</span>

<span class="kd">structure</span> <span class="n">continuous</span> <span class="o">[</span><span class="n">p</span> <span class="o">:</span> <span class="n">convergence_space</span> <span class="n">X</span><span class="o">]</span> <span class="o">[</span><span class="n">q</span> <span class="o">:</span> <span class="n">convergence_space</span> <span class="n">Y</span><span class="o">]</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">filter_converges</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">{</span><span class="n">x</span><span class="o">}</span> <span class="o">{</span><span class="n">ℱ</span><span class="o">},</span> <span class="n">p.converges</span> <span class="n">ℱ</span> <span class="n">x</span> <span class="bp">→</span> <span class="n">q.converges</span> <span class="o">(</span><span class="n">map</span> <span class="n">f</span> <span class="n">ℱ</span><span class="o">)</span> <span class="o">(</span><span class="n">f</span> <span class="n">x</span><span class="o">))</span>

<span class="kd">class</span> <span class="n">has_continuous_mul</span> <span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">convergence_space</span> <span class="n">X</span><span class="o">]</span> <span class="o">[</span><span class="n">has_mul</span> <span class="n">X</span><span class="o">]</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">continuous_mul</span> <span class="o">:</span> <span class="n">continuous</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">p</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">×</span> <span class="n">X</span><span class="o">,</span> <span class="n">p.1</span> <span class="bp">*</span> <span class="n">p.2</span><span class="o">))</span>

<span class="kd">class</span> <span class="n">has_continuous_smul</span> <span class="o">(</span><span class="n">S</span> <span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">has_scalar</span> <span class="n">S</span> <span class="n">X</span><span class="o">]</span> <span class="o">[</span><span class="n">convergence_space</span> <span class="n">S</span><span class="o">]</span> <span class="o">[</span><span class="n">convergence_space</span> <span class="n">X</span><span class="o">]</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">continuous_smul</span> <span class="o">:</span> <span class="n">continuous</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">p</span> <span class="o">:</span> <span class="n">S</span> <span class="bp">×</span> <span class="n">X</span><span class="o">,</span> <span class="n">p.1</span> <span class="bp">•</span> <span class="n">p.2</span><span class="o">))</span>

<span class="kd">class</span> <span class="n">convergence_group</span> <span class="o">(</span><span class="n">G</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">convergence_space</span> <span class="n">G</span><span class="o">]</span> <span class="o">[</span><span class="n">group</span> <span class="n">G</span><span class="o">]</span> <span class="kd">extends</span> <span class="n">has_continuous_mul</span> <span class="n">G</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">continuous_inv</span> <span class="o">:</span> <span class="n">continuous</span> <span class="o">(</span><span class="n">has_inv.inv</span> <span class="o">:</span> <span class="n">G</span> <span class="bp">→</span> <span class="n">G</span><span class="o">))</span>

<span class="kd">class</span> <span class="n">partial_group_action</span> <span class="o">(</span><span class="n">G</span> <span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">group</span> <span class="n">G</span><span class="o">]</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="n">G</span> <span class="bp">×</span> <span class="n">option</span> <span class="n">X</span> <span class="bp">-&gt;</span> <span class="n">option</span> <span class="n">X</span><span class="o">)</span>

<span class="kn">open</span> <span class="n">partial_group_action</span>

<span class="kd">class</span> <span class="n">continuous_partial_group_action</span> <span class="o">(</span><span class="n">G</span> <span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">convergence_space</span> <span class="n">G</span><span class="o">]</span> <span class="o">[</span><span class="n">group</span> <span class="n">G</span><span class="o">]</span>
  <span class="o">[</span><span class="n">convergence_group</span> <span class="n">G</span><span class="o">]</span> <span class="o">[</span><span class="n">partial_group_action</span> <span class="n">G</span> <span class="n">X</span><span class="o">]</span> <span class="o">[</span><span class="n">convergence_space</span> <span class="n">X</span><span class="o">]</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">continuity</span> <span class="o">:</span> <span class="n">continuous</span> <span class="o">(</span><span class="n">partial_group_action.α</span> <span class="o">:</span> <span class="n">G</span> <span class="bp">×</span> <span class="n">_</span> <span class="bp">→</span> <span class="n">option</span> <span class="n">X</span><span class="o">))</span> <span class="c1">-- COMPLAINS that it can't find instance of convergence_space G</span>
</code></pre></div>



<a name="265750933"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/has_continuous_mul%20%20extends%20has_mul%3F/near/265750933" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/has_continuous_mul.20.20extends.20has_mul.3F.html#265750933">(Dec 22 2021 at 00:10)</a>:</h4>
<p>You should also fix your <code>partial_group_action</code> class, so that you can actually use <code>\alpha</code> instead of giving the type signature..</p>



<a name="265751209"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/has_continuous_mul%20%20extends%20has_mul%3F/near/265751209" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bernd Losert <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/has_continuous_mul.20.20extends.20has_mul.3F.html#265751209">(Dec 22 2021 at 00:15)</a>:</h4>
<p>So you're saying that I should NOT make <code>convergence_group</code> a mixin? I was copying what <code>topological_group</code> does.</p>



<a name="265751232"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/has_continuous_mul%20%20extends%20has_mul%3F/near/265751232" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/has_continuous_mul.20.20extends.20has_mul.3F.html#265751232">(Dec 22 2021 at 00:15)</a>:</h4>
<p>No, I'm saying that you were missing some assumptions</p>



<a name="265751255"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/has_continuous_mul%20%20extends%20has_mul%3F/near/265751255" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/has_continuous_mul.20.20extends.20has_mul.3F.html#265751255">(Dec 22 2021 at 00:15)</a>:</h4>
<p>BTW, why are you defining a <code>partial_group_action</code> class? Can't you just use <code>mul_action G (option X)</code>?</p>



<a name="265751267"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/has_continuous_mul%20%20extends%20has_mul%3F/near/265751267" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bernd Losert <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/has_continuous_mul.20.20extends.20has_mul.3F.html#265751267">(Dec 22 2021 at 00:15)</a>:</h4>
<p>Ah, so those assumptions are not "brought into scope" from using <code>convergence_group G</code>?</p>



<a name="265751327"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/has_continuous_mul%20%20extends%20has_mul%3F/near/265751327" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/has_continuous_mul.20.20extends.20has_mul.3F.html#265751327">(Dec 22 2021 at 00:16)</a>:</h4>
<p>Exactly, this is the main distinction when compared with <code>class ..... extends ...</code></p>



<a name="265751364"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/has_continuous_mul%20%20extends%20has_mul%3F/near/265751364" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/has_continuous_mul.20.20extends.20has_mul.3F.html#265751364">(Dec 22 2021 at 00:17)</a>:</h4>
<p>Like Eric said above, if you want to have a ring with a continuous multiplication, you would need to write <code>[ring A] [has_continuous_mul A]</code>.</p>



<a name="265751398"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/has_continuous_mul%20%20extends%20has_mul%3F/near/265751398" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bernd Losert <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/has_continuous_mul.20.20extends.20has_mul.3F.html#265751398">(Dec 22 2021 at 00:17)</a>:</h4>
<p><span class="user-mention silent" data-user-id="243562">Adam Topaz</span> <a href="#narrow/stream/113488-general/topic/has_continuous_mul.20.20extends.20has_mul.3F/near/265751255">said</a>:</p>
<blockquote>
<p>BTW, why are you defining a <code>partial_group_action</code> class? Can't you just use <code>mul_action G (option X)</code>?</p>
</blockquote>
<p>I still need the class for extra properties not shown in the toy code here. I guess I could extend it?</p>



<a name="265751407"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/has_continuous_mul%20%20extends%20has_mul%3F/near/265751407" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/has_continuous_mul.20.20extends.20has_mul.3F.html#265751407">(Dec 22 2021 at 00:18)</a>:</h4>
<p>If <code>[has_continuous_mul A]</code> gave you a <code>has_mul</code> instance, then you would have two competing multiplciations, one from the continuous mul and one from the ring, and that's not what you want.</p>



<a name="265751462"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/has_continuous_mul%20%20extends%20has_mul%3F/near/265751462" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bernd Losert <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/has_continuous_mul.20.20extends.20has_mul.3F.html#265751462">(Dec 22 2021 at 00:18)</a>:</h4>
<p>Yep.</p>



<a name="265751465"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/has_continuous_mul%20%20extends%20has_mul%3F/near/265751465" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/has_continuous_mul.20.20extends.20has_mul.3F.html#265751465">(Dec 22 2021 at 00:18)</a>:</h4>
<p>Isn't a partial group action just an action of <code>G</code> on <code>option X</code>, or is that not what you are claiming?</p>



<a name="265751528"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/has_continuous_mul%20%20extends%20has_mul%3F/near/265751528" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bernd Losert <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/has_continuous_mul.20.20extends.20has_mul.3F.html#265751528">(Dec 22 2021 at 00:19)</a>:</h4>
<p>Well, there's more to it. For example, forall g, alpha(g, nothing) = nothing.</p>



<a name="265751538"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/has_continuous_mul%20%20extends%20has_mul%3F/near/265751538" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/has_continuous_mul.20.20extends.20has_mul.3F.html#265751538">(Dec 22 2021 at 00:19)</a>:</h4>
<p>oh right..</p>



<a name="265751604"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/has_continuous_mul%20%20extends%20has_mul%3F/near/265751604" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bernd Losert <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/has_continuous_mul.20.20extends.20has_mul.3F.html#265751604">(Dec 22 2021 at 00:20)</a>:</h4>
<p>Thanks again.</p>



<a name="265751613"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/has_continuous_mul%20%20extends%20has_mul%3F/near/265751613" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/has_continuous_mul.20.20extends.20has_mul.3F.html#265751613">(Dec 22 2021 at 00:20)</a>:</h4>
<p>hmm... maybe there is a way to avoid making a new definition for this...</p>



<a name="265751651"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/has_continuous_mul%20%20extends%20has_mul%3F/near/265751651" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/has_continuous_mul.20.20extends.20has_mul.3F.html#265751651">(Dec 22 2021 at 00:21)</a>:</h4>
<p>Do we have a typeclass for a multiplicative action on a pointed type which respects the distinguished point <span class="user-mention" data-user-id="310045">@Eric Wieser</span> ?</p>



<a name="265751736"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/has_continuous_mul%20%20extends%20has_mul%3F/near/265751736" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bernd Losert <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/has_continuous_mul.20.20extends.20has_mul.3F.html#265751736">(Dec 22 2021 at 00:22)</a>:</h4>
<p><span class="user-mention silent" data-user-id="243562">Adam Topaz</span> <a href="#narrow/stream/113488-general/topic/has_continuous_mul.20.20extends.20has_mul.3F/near/265750933">said</a>:</p>
<blockquote>
<p>You should also fix your <code>partial_group_action</code> class, so that you can actually use <code>\alpha</code> instead of giving the type signature..</p>
</blockquote>
<p>Why does this cause problems?</p>



<a name="265751753"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/has_continuous_mul%20%20extends%20has_mul%3F/near/265751753" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/has_continuous_mul.20.20extends.20has_mul.3F.html#265751753">(Dec 22 2021 at 00:23)</a>:</h4>
<p>It doesn't cause problems per se, but why should you make a new definition with all the associated API if you can just use something off the shelf?</p>



<a name="265751772"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/has_continuous_mul%20%20extends%20has_mul%3F/near/265751772" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bernd Losert <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/has_continuous_mul.20.20extends.20has_mul.3F.html#265751772">(Dec 22 2021 at 00:23)</a>:</h4>
<p>No, I meant this fix:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="o">(</span><span class="n">continuity</span> <span class="o">:</span> <span class="n">continuous</span> <span class="o">(</span><span class="n">partial_group_action.α</span> <span class="o">:</span> <span class="n">G</span> <span class="bp">×</span> <span class="n">_</span> <span class="bp">→</span> <span class="n">option</span> <span class="n">X</span><span class="o">))</span>
</code></pre></div>



<a name="265751782"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/has_continuous_mul%20%20extends%20has_mul%3F/near/265751782" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/has_continuous_mul.20.20extends.20has_mul.3F.html#265751782">(Dec 22 2021 at 00:23)</a>:</h4>
<p>Oh I see....</p>



<a name="265751788"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/has_continuous_mul%20%20extends%20has_mul%3F/near/265751788" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bernd Losert <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/has_continuous_mul.20.20extends.20has_mul.3F.html#265751788">(Dec 22 2021 at 00:23)</a>:</h4>
<p>Why can't I just write <code>continuous alpha</code>?</p>



<a name="265751834"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/has_continuous_mul%20%20extends%20has_mul%3F/near/265751834" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/has_continuous_mul.20.20extends.20has_mul.3F.html#265751834">(Dec 22 2021 at 00:24)</a>:</h4>
<p><span class="user-mention silent" data-user-id="243562">Adam Topaz</span> <a href="#narrow/stream/113488-general/topic/has_continuous_mul.20.20extends.20has_mul.3F/near/265751651">said</a>:</p>
<blockquote>
<p>Do we have a typeclass for a multiplicative action on a pointed type which respects the distinguished point <span class="user-mention silent" data-user-id="310045">Eric Wieser</span> ?</p>
</blockquote>
<p>Sounds like (half of) a <code>monoid_with_zero_action</code>, if that exists?</p>



<a name="265751841"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/has_continuous_mul%20%20extends%20has_mul%3F/near/265751841" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/has_continuous_mul.20.20extends.20has_mul.3F.html#265751841">(Dec 22 2021 at 00:24)</a>:</h4>
<p>Again, this is because you're using the field from a class -- we had a similar discussion about your <code>convergence_space.converges</code>, remember?</p>



<a name="265751868"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/has_continuous_mul%20%20extends%20has_mul%3F/near/265751868" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bernd Losert <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/has_continuous_mul.20.20extends.20has_mul.3F.html#265751868">(Dec 22 2021 at 00:24)</a>:</h4>
<p>Yeah, but I made it a <code>class</code>, not a <code>structure</code>.</p>



<a name="265751889"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/has_continuous_mul%20%20extends%20has_mul%3F/near/265751889" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/has_continuous_mul.20.20extends.20has_mul.3F.html#265751889">(Dec 22 2021 at 00:25)</a>:</h4>
<p>A <code>class</code> is a <code>structure</code>!</p>



<a name="265751919"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/has_continuous_mul%20%20extends%20has_mul%3F/near/265751919" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bernd Losert <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/has_continuous_mul.20.20extends.20has_mul.3F.html#265751919">(Dec 22 2021 at 00:25)</a>:</h4>
<p>True, but there's a difference between making a structure and then adding the class attribute to it and just using <code>class</code>.</p>



<a name="265751977"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/has_continuous_mul%20%20extends%20has_mul%3F/near/265751977" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/has_continuous_mul.20.20extends.20has_mul.3F.html#265751977">(Dec 22 2021 at 00:26)</a>:</h4>
<p>I think the only difference is the implicitness of field arguments.</p>



<a name="265752007"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/has_continuous_mul%20%20extends%20has_mul%3F/near/265752007" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bernd Losert <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/has_continuous_mul.20.20extends.20has_mul.3F.html#265752007">(Dec 22 2021 at 00:26)</a>:</h4>
<p>If I use <code>[act : partial_group_action G X]</code> and then write <code>act.α</code>, it works.</p>



<a name="265752036"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/has_continuous_mul%20%20extends%20has_mul%3F/near/265752036" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bernd Losert <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/has_continuous_mul.20.20extends.20has_mul.3F.html#265752036">(Dec 22 2021 at 00:27)</a>:</h4>
<p>It's as if Lean can't figure out where alpha is coming from.</p>



<a name="265752044"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/has_continuous_mul%20%20extends%20has_mul%3F/near/265752044" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/has_continuous_mul.20.20extends.20has_mul.3F.html#265752044">(Dec 22 2021 at 00:27)</a>:</h4>
<p>But this is the same issue as writing <code>p.converges</code> for <code>[p : convergence_space X]</code>.</p>



<a name="265752122"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/has_continuous_mul%20%20extends%20has_mul%3F/near/265752122" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/has_continuous_mul.20.20extends.20has_mul.3F.html#265752122">(Dec 22 2021 at 00:28)</a>:</h4>
<p>Again, this is like writing <code>g.to_has_mul.mul x y</code> instead of <code>x * y</code> when <code>[g : group G]</code>.</p>



<a name="265752154"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/has_continuous_mul%20%20extends%20has_mul%3F/near/265752154" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/has_continuous_mul.20.20extends.20has_mul.3F.html#265752154">(Dec 22 2021 at 00:28)</a>:</h4>
<p>To your discharge, understanding how to pass around arguments idiomatically is pretty hard. Welcome to the steep learning curve <span aria-label="wink" class="emoji emoji-1f609" role="img" title="wink">:wink:</span></p>



<a name="265752228"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/has_continuous_mul%20%20extends%20has_mul%3F/near/265752228" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bernd Losert <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/has_continuous_mul.20.20extends.20has_mul.3F.html#265752228">(Dec 22 2021 at 00:29)</a>:</h4>
<p>Well, there seems to be some confusion on my part as to when instance arguments require something to the left of : and when not.</p>



<a name="265752406"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/has_continuous_mul%20%20extends%20has_mul%3F/near/265752406" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/has_continuous_mul.20.20extends.20has_mul.3F.html#265752406">(Dec 22 2021 at 00:31)</a>:</h4>
<p>They should almost never. But I think you're hitting the "almost" with your instances on your structures.</p>



<a name="265752415"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/has_continuous_mul%20%20extends%20has_mul%3F/near/265752415" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/has_continuous_mul.20.20extends.20has_mul.3F.html#265752415">(Dec 22 2021 at 00:31)</a>:</h4>
<p><span class="user-mention silent" data-user-id="243562">Adam Topaz</span> <a href="#narrow/stream/113488-general/topic/has_continuous_mul.20.20extends.20has_mul.3F/near/265751651">said</a>:</p>
<blockquote>
<p>Do we have a typeclass for a multiplicative action on a pointed type which respects the distinguished point <span class="user-mention silent" data-user-id="310045">Eric Wieser</span> ?</p>
</blockquote>
<p>I'm afraid I can't decode this meaningully!</p>



<a name="265752548"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/has_continuous_mul%20%20extends%20has_mul%3F/near/265752548" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/has_continuous_mul.20.20extends.20has_mul.3F.html#265752548">(Dec 22 2021 at 00:32)</a>:</h4>
<p>If <code>M</code> is a monoid and <code>X</code> is a pointed type with distinguished point <code>* : X</code>, (which might be called <code>0</code> ;)), do we have a typeclass for an action of <code>M</code> on <code>X</code> such that <code>m \bu * = *</code> for all <code>m</code>?</p>



<a name="265752596"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/has_continuous_mul%20%20extends%20has_mul%3F/near/265752596" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bernd Losert <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/has_continuous_mul.20.20extends.20has_mul.3F.html#265752596">(Dec 22 2021 at 00:33)</a>:</h4>
<p><span class="user-mention silent" data-user-id="387244">Yaël Dillies</span> <a href="#narrow/stream/113488-general/topic/has_continuous_mul.20.20extends.20has_mul.3F/near/265752406">said</a>:</p>
<blockquote>
<p>They should almost never. But I think you're hitting the "almost" with your instances on your structures.</p>
</blockquote>
<p>So you're saying that the confusion Lean has regarding <code>continuous α</code> has to do with the fact that I defined <code>convergence_space</code> as a structure with a class attribute afterwards?</p>



<a name="265752606"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/has_continuous_mul%20%20extends%20has_mul%3F/near/265752606" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/has_continuous_mul.20.20extends.20has_mul.3F.html#265752606">(Dec 22 2021 at 00:33)</a>:</h4>
<p>Probably, we can restrict to <code>X := option α</code> or <code>with_zero α</code> for now.</p>



<a name="265752662"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/has_continuous_mul%20%20extends%20has_mul%3F/near/265752662" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/has_continuous_mul.20.20extends.20has_mul.3F.html#265752662">(Dec 22 2021 at 00:33)</a>:</h4>
<p>No, I meant that you're doing the rare bit of the API where you need to dig the structures ugly.</p>



<a name="265752792"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/has_continuous_mul%20%20extends%20has_mul%3F/near/265752792" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/has_continuous_mul.20.20extends.20has_mul.3F.html#265752792">(Dec 22 2021 at 00:34)</a>:</h4>
<p>So a typeclass with only <a href="https://leanprover-community.github.io/mathlib_docs/find/smul_zero">docs#smul_zero</a> / <a href="https://leanprover-community.github.io/mathlib_docs/find/smul_zero'">docs#smul_zero'</a>?</p>



<a name="265752807"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/has_continuous_mul%20%20extends%20has_mul%3F/near/265752807" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/has_continuous_mul.20.20extends.20has_mul.3F.html#265752807">(Dec 22 2021 at 00:35)</a>:</h4>
<p>yeah</p>



<a name="265752828"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/has_continuous_mul%20%20extends%20has_mul%3F/near/265752828" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/has_continuous_mul.20.20extends.20has_mul.3F.html#265752828">(Dec 22 2021 at 00:35)</a>:</h4>
<p>The fact that I have two links for the same statement there indicates we do not have that generalization</p>



<a name="265752859"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/has_continuous_mul%20%20extends%20has_mul%3F/near/265752859" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/has_continuous_mul.20.20extends.20has_mul.3F.html#265752859">(Dec 22 2021 at 00:35)</a>:</h4>
<p>Either you also need to assume <a href="https://leanprover-community.github.io/mathlib_docs/find/zero_smul">docs#zero_smul</a> or <a href="https://leanprover-community.github.io/mathlib_docs/find/smul_add">docs#smul_add</a> alongside <code>smul_zero</code></p>



<a name="265752962"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/has_continuous_mul%20%20extends%20has_mul%3F/near/265752962" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/has_continuous_mul.20.20extends.20has_mul.3F.html#265752962">(Dec 22 2021 at 00:36)</a>:</h4>
<p>Ah, so you could take a <a href="https://leanprover-community.github.io/mathlib_docs/find/smul_with_zero">docs#smul_with_zero</a> of <code>with_zero M</code> on <code>X</code></p>



<a name="265752968"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/has_continuous_mul%20%20extends%20has_mul%3F/near/265752968" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bernd Losert <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/has_continuous_mul.20.20extends.20has_mul.3F.html#265752968">(Dec 22 2021 at 00:36)</a>:</h4>
<p>Consider this code:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">tactic</span>
<span class="kn">import</span> <span class="n">order.filter.partial</span>
<span class="kn">import</span> <span class="n">algebra.support</span>

<span class="kd">noncomputable theory</span>
<span class="kn">open</span> <span class="n">set</span> <span class="n">filter</span> <span class="n">classical</span>
<span class="n">open_locale</span> <span class="n">classical</span> <span class="n">filter</span>

<span class="kd">variables</span> <span class="o">{</span><span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span>

<span class="kd">class</span> <span class="n">partial_group_action</span> <span class="o">(</span><span class="n">G</span> <span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">group</span> <span class="n">G</span><span class="o">]</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="n">G</span> <span class="bp">×</span> <span class="n">option</span> <span class="n">X</span> <span class="bp">-&gt;</span> <span class="n">option</span> <span class="n">X</span><span class="o">)</span>

<span class="kn">open</span> <span class="n">partial_group_action</span>

<span class="kd">def</span> <span class="n">foo</span> <span class="o">{</span><span class="n">G</span> <span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">group</span> <span class="n">G</span><span class="o">]</span> <span class="o">[</span><span class="n">partial_group_action</span> <span class="n">G</span> <span class="n">X</span><span class="o">]</span> <span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="n">G</span><span class="o">)</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">X</span><span class="o">)</span> <span class="o">:</span> <span class="n">X</span> <span class="o">:=</span>
<span class="n">α</span> <span class="o">(</span><span class="n">g</span><span class="o">,</span> <span class="n">x</span><span class="o">)</span>
</code></pre></div>
<p>I'm not doing anything fancy here, yet it still complains.</p>



<a name="265752999"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/has_continuous_mul%20%20extends%20has_mul%3F/near/265752999" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bernd Losert <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/has_continuous_mul.20.20extends.20has_mul.3F.html#265752999">(Dec 22 2021 at 00:37)</a>:</h4>
<p>Oops. Nevermind.</p>



<a name="265753019"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/has_continuous_mul%20%20extends%20has_mul%3F/near/265753019" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bernd Losert <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/has_continuous_mul.20.20extends.20has_mul.3F.html#265753019">(Dec 22 2021 at 00:37)</a>:</h4>
<p>Forgot the <code>option</code> part. But that works without a problem regarding α.</p>



<a name="265753072"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/has_continuous_mul%20%20extends%20has_mul%3F/near/265753072" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/has_continuous_mul.20.20extends.20has_mul.3F.html#265753072">(Dec 22 2021 at 00:38)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">tactic</span>
<span class="kn">import</span> <span class="n">order.filter.partial</span>
<span class="kn">import</span> <span class="n">algebra.support</span>

<span class="kd">noncomputable theory</span>
<span class="kn">open</span> <span class="n">set</span> <span class="n">filter</span> <span class="n">classical</span>
<span class="n">open_locale</span> <span class="n">classical</span> <span class="n">filter</span>

<span class="kd">variables</span> <span class="o">{</span><span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span>

<span class="kd">class</span> <span class="n">partial_group_action</span> <span class="o">(</span><span class="n">G</span> <span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">group</span> <span class="n">G</span><span class="o">]</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="n">G</span> <span class="bp">×</span> <span class="n">option</span> <span class="n">X</span> <span class="bp">-&gt;</span> <span class="n">option</span> <span class="n">X</span><span class="o">)</span>

<span class="kn">open</span> <span class="n">partial_group_action</span>

<span class="kd">def</span> <span class="n">foo</span> <span class="o">{</span><span class="n">G</span> <span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">group</span> <span class="n">G</span><span class="o">]</span> <span class="o">[</span><span class="n">partial_group_action</span> <span class="n">G</span> <span class="n">X</span><span class="o">]</span> <span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="n">G</span><span class="o">)</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">X</span><span class="o">)</span> <span class="o">:</span> <span class="n">option</span> <span class="n">X</span> <span class="o">:=</span>
<span class="n">α</span> <span class="o">(</span><span class="n">g</span><span class="o">,</span> <span class="n">some</span> <span class="n">x</span><span class="o">)</span>
</code></pre></div>



<a name="265753092"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/has_continuous_mul%20%20extends%20has_mul%3F/near/265753092" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bernd Losert <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/has_continuous_mul.20.20extends.20has_mul.3F.html#265753092">(Dec 22 2021 at 00:38)</a>:</h4>
<p>Yep. And I didn't have to qualify where alpha came from in this example.</p>



<a name="265753112"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/has_continuous_mul%20%20extends%20has_mul%3F/near/265753112" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/has_continuous_mul.20.20extends.20has_mul.3F.html#265753112">(Dec 22 2021 at 00:38)</a>:</h4>
<p>Ok</p>



<a name="265753166"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/has_continuous_mul%20%20extends%20has_mul%3F/near/265753166" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/has_continuous_mul.20.20extends.20has_mul.3F.html#265753166">(Dec 22 2021 at 00:39)</a>:</h4>
<p>That's because you gave it an input of <code>(g, some x)</code>, so lean then knows that it's supposed to look for an <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>α</mi></mrow><annotation encoding="application/x-tex">\alpha</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.0037em;">α</span></span></span></span> which takes an input of type <code>G \x option X</code>, and it is then able to find the typclass instance.</p>



<a name="265753284"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/has_continuous_mul%20%20extends%20has_mul%3F/near/265753284" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bernd Losert <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/has_continuous_mul.20.20extends.20has_mul.3F.html#265753284">(Dec 22 2021 at 00:41)</a>:</h4>
<p>So you're saying if I just use a naked alpha (i.e. with no arguments), it can't figure out which instance to use?</p>



<a name="265753298"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/has_continuous_mul%20%20extends%20has_mul%3F/near/265753298" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/has_continuous_mul.20.20extends.20has_mul.3F.html#265753298">(Dec 22 2021 at 00:41)</a>:</h4>
<p>Yeah, exactly.</p>



<a name="265753342"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/has_continuous_mul%20%20extends%20has_mul%3F/near/265753342" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/has_continuous_mul.20.20extends.20has_mul.3F.html#265753342">(Dec 22 2021 at 00:42)</a>:</h4>
<p>Because there could a priori be <code>partial_group_action</code>s for many different types.</p>



<a name="265753359"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/has_continuous_mul%20%20extends%20has_mul%3F/near/265753359" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bernd Losert <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/has_continuous_mul.20.20extends.20has_mul.3F.html#265753359">(Dec 22 2021 at 00:42)</a>:</h4>
<p>I see. I guess I was hoping it would use the "obvious to me" one.</p>



<a name="265753363"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/has_continuous_mul%20%20extends%20has_mul%3F/near/265753363" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/has_continuous_mul.20.20extends.20has_mul.3F.html#265753363">(Dec 22 2021 at 00:42)</a>:</h4>
<p>It's like writing <code>(*)</code>. This is the function <code>has_mul.mul</code>, but lean has no way of knowing what type this multiplciation is defined on withyout further hints.</p>



<a name="265753414"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/has_continuous_mul%20%20extends%20has_mul%3F/near/265753414" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bernd Losert <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/has_continuous_mul.20.20extends.20has_mul.3F.html#265753414">(Dec 22 2021 at 00:43)</a>:</h4>
<p>That settles that matter. Thanks a bunch.</p>



<a name="265753443"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/has_continuous_mul%20%20extends%20has_mul%3F/near/265753443" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/has_continuous_mul.20.20extends.20has_mul.3F.html#265753443">(Dec 22 2021 at 00:43)</a>:</h4>
<p>No worries. Typeclasses take some time to get used to.</p>



<a name="265753500"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/has_continuous_mul%20%20extends%20has_mul%3F/near/265753500" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bernd Losert <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/has_continuous_mul.20.20extends.20has_mul.3F.html#265753500">(Dec 22 2021 at 00:44)</a>:</h4>
<p>I'm used to type classes in Haskell and Agda. Lean seems to have more gotchas than I expected.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>