---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/multiplicative.20group.20of.20a.20field.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/multiplicative.20group.20of.20a.20field.html">multiplicative group of a field</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="258855454"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/multiplicative%20group%20of%20a%20field/near/258855454" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Meow <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/multiplicative.20group.20of.20a.20field.html#258855454">(Oct 24 2021 at 03:01)</a>:</h4>
<p>How to define the multiplicative group of a field in Lean 3?</p>



<a name="258855493"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/multiplicative%20group%20of%20a%20field/near/258855493" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Meow <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/multiplicative.20group.20of.20a.20field.html#258855493">(Oct 24 2021 at 03:02)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">algebra.field</span>
<span class="kd">noncomputable theory</span>

<span class="kd">variables</span> <span class="o">{</span><span class="n">K</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}[</span><span class="n">field</span> <span class="n">K</span><span class="o">]</span>

<span class="kd">def</span> <span class="n">mulgroup</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">K</span><span class="o">),</span> <span class="n">a</span> <span class="bp">≠</span> <span class="mi">0</span><span class="o">)</span> <span class="o">:</span> <span class="n">comm_group</span> <span class="n">K</span> <span class="o">:=</span>
<span class="o">{</span>
  <span class="n">mul</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">x</span><span class="o">,</span> <span class="bp">λ</span> <span class="n">y</span><span class="o">,</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">y</span><span class="o">,</span>
  <span class="n">inv</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">x</span><span class="o">,</span> <span class="n">x</span><span class="bp">⁻¹</span><span class="o">,</span>
  <span class="n">one</span> <span class="o">:=</span> <span class="mi">1</span><span class="o">,</span>
  <span class="n">mul_comm</span> <span class="o">:=</span>
<span class="o">}</span>
</code></pre></div>



<a name="258855831"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/multiplicative%20group%20of%20a%20field/near/258855831" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anupam Nayak <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/multiplicative.20group.20of.20a.20field.html#258855831">(Oct 24 2021 at 03:12)</a>:</h4>
<p>Maybe this? <a href="https://leanprover-community.github.io/mathlib_docs/algebra/group/units.html#units">https://leanprover-community.github.io/mathlib_docs/algebra/group/units.html#units</a></p>



<a name="258855839"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/multiplicative%20group%20of%20a%20field/near/258855839" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anupam Nayak <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/multiplicative.20group.20of.20a.20field.html#258855839">(Oct 24 2021 at 03:13)</a>:</h4>
<p>See <code>def units.group</code></p>



<a name="258855840"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/multiplicative%20group%20of%20a%20field/near/258855840" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Meow <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/multiplicative.20group.20of.20a.20field.html#258855840">(Oct 24 2021 at 03:13)</a>:</h4>
<p>Thanks</p>



<a name="258855851"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/multiplicative%20group%20of%20a%20field/near/258855851" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/multiplicative.20group.20of.20a.20field.html#258855851">(Oct 24 2021 at 03:13)</a>:</h4>
<p>You can define anything (e.g., <code>false</code>) if you assume that all elements of a field are nonzero!</p>



<a name="258856384"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/multiplicative%20group%20of%20a%20field/near/258856384" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Meow <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/multiplicative.20group.20of.20a.20field.html#258856384">(Oct 24 2021 at 03:29)</a>:</h4>
<p><span class="user-mention silent" data-user-id="214703">Yury G. Kudryashov</span> <a href="#narrow/stream/113488-general/topic/multiplicative.20group.20of.20a.20field/near/258855851">said</a>:</p>
<blockquote>
<p>You can define anything (e.g., <code>false</code>) if you assume that all elements of a field are nonzero!</p>
</blockquote>
<p>Yes I made a fool mistake, that's a contradiction.</p>



<a name="258856456"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/multiplicative%20group%20of%20a%20field/near/258856456" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/multiplicative.20group.20of.20a.20field.html#258856456">(Oct 24 2021 at 03:31)</a>:</h4>
<p>The field itself will have a <a href="https://leanprover-community.github.io/mathlib_docs/find/group_with_zero">docs#group_with_zero</a> instance which I think would be good enough for most things. If you really want, use <a href="https://leanprover-community.github.io/mathlib_docs/find/units">docs#units</a> which will have a group instance. But you will need to deal with coercions if you want to go back to the field</p>



<a name="258864655"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/multiplicative%20group%20of%20a%20field/near/258864655" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Meow <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/multiplicative.20group.20of.20a.20field.html#258864655">(Oct 24 2021 at 07:25)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">tactic</span>
<span class="kn">import</span> <span class="n">algebra.field</span>
<span class="kn">import</span> <span class="n">algebra.ring.basic</span>

<span class="kd">noncomputable theory</span>

<span class="kd">universe</span> <span class="n">u</span>
<span class="kd">structure</span> <span class="n">mulgroup</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span> <span class="o">[</span><span class="n">field</span> <span class="n">α</span><span class="o">]</span> <span class="o">(</span><span class="n">h</span><span class="o">:</span> <span class="o">(</span><span class="mi">0</span><span class="o">:</span><span class="n">α</span><span class="o">)</span> <span class="bp">≠</span> <span class="o">(</span><span class="mi">1</span><span class="o">:</span><span class="n">α</span><span class="o">)):=</span>
<span class="o">(</span><span class="n">val</span> <span class="o">:</span> <span class="n">α</span><span class="o">)</span>
<span class="o">(</span><span class="n">neq_zero</span> <span class="o">:</span> <span class="n">val</span> <span class="bp">≠</span> <span class="mi">0</span><span class="o">)</span>

<span class="kd">instance</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span> <span class="o">[</span><span class="n">field</span> <span class="n">α</span><span class="o">]</span> <span class="o">(</span><span class="n">h</span><span class="o">:</span> <span class="o">(</span><span class="mi">0</span><span class="o">:</span><span class="n">α</span><span class="o">)</span> <span class="bp">≠</span> <span class="o">(</span><span class="mi">1</span><span class="o">:</span><span class="n">α</span><span class="o">)):</span> <span class="n">group</span> <span class="o">(</span><span class="n">mulgroup</span> <span class="n">α</span> <span class="n">h</span><span class="o">)</span> <span class="o">:=</span>
<span class="o">{</span>
  <span class="n">one</span> <span class="o">:=</span> <span class="o">⟨</span><span class="mi">1</span><span class="o">,</span> <span class="n">h.symm</span><span class="o">⟩,</span>
  <span class="n">inv</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">u</span><span class="o">,</span> <span class="o">⟨</span><span class="n">u.val</span><span class="bp">⁻¹</span><span class="o">,</span>
    <span class="kd">by</span> <span class="o">{</span><span class="n">simp</span> <span class="o">[</span><span class="n">mulgroup.neq_zero</span> <span class="n">u</span><span class="o">]}</span> <span class="o">⟩,</span>
  <span class="n">mul</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">u₁</span> <span class="n">u₂</span><span class="o">,</span> <span class="o">⟨</span><span class="n">u₁.val</span> <span class="bp">*</span> <span class="n">u₂.val</span><span class="o">,</span>
    <span class="kd">by</span> <span class="o">{</span><span class="n">simp</span> <span class="o">[</span><span class="n">mulgroup.neq_zero</span> <span class="n">u₁</span><span class="o">,</span> <span class="n">mulgroup.neq_zero</span> <span class="n">u₂</span><span class="o">]}⟩,</span>
  <span class="n">mul_assoc</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">finish</span><span class="o">,</span>
  <span class="n">one_mul</span> <span class="o">:=</span> <span class="kd">by</span> <span class="o">{</span><span class="n">simp</span><span class="o">,</span> <span class="gr">sorry</span><span class="o">},</span>
  <span class="n">mul_one</span> <span class="o">:=</span> <span class="gr">sorry</span><span class="o">,</span>
  <span class="n">mul_left_inv</span> <span class="o">:=</span> <span class="gr">sorry</span>
<span class="o">}</span>
</code></pre></div>
<p>How to complete the proof at the first <code>sorry</code>?<br>
The goal of <code>one_mul</code> after <code>simp</code> is</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">α</span><span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span>
<span class="n">_inst_1</span><span class="o">:</span> <span class="n">field</span> <span class="n">α</span>
<span class="n">h</span><span class="o">:</span> <span class="mi">0</span> <span class="bp">≠</span> <span class="mi">1</span>
<span class="bp">⊢</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">mulgroup</span> <span class="n">α</span> <span class="n">h</span><span class="o">),</span> <span class="o">{</span><span class="n">val</span> <span class="o">:=</span> <span class="n">a.val</span><span class="o">,</span> <span class="n">neq_zero</span> <span class="o">:=</span> <span class="n">_</span><span class="o">}</span> <span class="bp">=</span> <span class="n">a</span>
</code></pre></div>
<p>That's trivial, but I don't know how to succeed.</p>



<a name="258865902"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/multiplicative%20group%20of%20a%20field/near/258865902" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/multiplicative.20group.20of.20a.20field.html#258865902">(Oct 24 2021 at 08:01)</a>:</h4>
<p>Try <code>intro a, cases a, refl</code></p>



<a name="258865911"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/multiplicative%20group%20of%20a%20field/near/258865911" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/multiplicative.20group.20of.20a.20field.html#258865911">(Oct 24 2021 at 08:02)</a>:</h4>
<p><code>h</code> is unnecessary by the way, it's an axiom of a field</p>



<a name="258866774"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/multiplicative%20group%20of%20a%20field/near/258866774" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Meow <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/multiplicative.20group.20of.20a.20field.html#258866774">(Oct 24 2021 at 08:26)</a>:</h4>
<p>Thanks</p>



<a name="258866988"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/multiplicative%20group%20of%20a%20field/near/258866988" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/multiplicative.20group.20of.20a.20field.html#258866988">(Oct 24 2021 at 08:33)</a>:</h4>
<p>You have made a new structure, <code>mulgroup</code>, rather than using mathlib's <code>units</code>, so to get it to work effectively you will have to make a little interface for it. I would recommend proving an extensionality lemma for it before you start the proof that it's a group, ie prove that two terms of type <code>mulgroup k</code> (don't call it alpha unless you're actually a computer scientist who thinks this is a better name for a field) are equal when their <code>val</code>s are.</p>



<a name="258867048"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/multiplicative%20group%20of%20a%20field/near/258867048" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/multiplicative.20group.20of.20a.20field.html#258867048">(Oct 24 2021 at 08:34)</a>:</h4>
<p>This might be as simple as writing <code>@[ext]</code> before the word <code>structure</code> but I'm not at lean to check. Then you will be able to use the <code>ext</code> tactic instead of <code>cases</code></p>



<a name="258867060"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/multiplicative%20group%20of%20a%20field/near/258867060" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/multiplicative.20group.20of.20a.20field.html#258867060">(Oct 24 2021 at 08:34)</a>:</h4>
<p>I was about to write that. Put <code>@[ext]</code> right above the structure line</p>



<a name="258886868"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/multiplicative%20group%20of%20a%20field/near/258886868" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/multiplicative.20group.20of.20a.20field.html#258886868">(Oct 24 2021 at 16:42)</a>:</h4>
<p>BTW, all fields in <code>mathlib</code> are assumed to be nontrivial.</p>



<a name="258886874"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/multiplicative%20group%20of%20a%20field/near/258886874" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/multiplicative.20group.20of.20a.20field.html#258886874">(Oct 24 2021 at 16:43)</a>:</h4>
<p>So you can get <code>(0 : α) ≠ (1 : α)</code> from <a href="https://leanprover-community.github.io/mathlib_docs/find/zero_ne_one">docs#zero_ne_one</a>.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>