---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/(.3A.20a.20.E2.89.A4.20b.20.3A).html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/(.3A.20a.20.E2.89.A4.20b.20.3A).html">(: a ≤ b :)</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="202888786"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%28%3A%20a%20%E2%89%A4%20b%20%3A%29/near/202888786" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/(.3A.20a.20.E2.89.A4.20b.20.3A).html#202888786">(Jul 04 2020 at 19:51)</a>:</h4>
<p>Smileys in mathlib (<code>src.order.lattice</code>, line 19)</p>
<div class="codehilite"><pre><span></span><code><span class="kn">section</span>
<span class="c1">-- TODO: this seems crazy, but it also seems to work reasonably well</span>
<span class="bp">@</span><span class="o">[</span><span class="n">ematch</span><span class="o">]</span> <span class="kn">theorem</span> <span class="n">le_antisymm&#39;</span> <span class="o">[</span><span class="n">partial_order</span> <span class="n">α</span><span class="o">]</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">{</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">α</span><span class="o">},</span> <span class="o">(:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span> <span class="o">:)</span> <span class="bp">→</span> <span class="n">b</span> <span class="bp">≤</span> <span class="n">a</span> <span class="bp">→</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">b</span> <span class="o">:=</span>
<span class="bp">@</span><span class="n">le_antisymm</span> <span class="bp">_</span> <span class="bp">_</span>
<span class="kn">end</span>
</code></pre></div>


<p>What's with the <code> (: a ≤ b :)</code>? It's not notation -- what is it?</p>



<a name="202889622"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%28%3A%20a%20%E2%89%A4%20b%20%3A%29/near/202889622" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/(.3A.20a.20.E2.89.A4.20b.20.3A).html#202889622">(Jul 04 2020 at 20:15)</a>:</h4>
<p>According to <code>lean/src/frontends/lean/builtin_exprs.cpp</code>, those brackets delimit a pattern, like what comes in the left-hand-side of a <code>let</code> assignment.  I'm not sure what that means in a type.</p>



<a name="202889637"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%28%3A%20a%20%E2%89%A4%20b%20%3A%29/near/202889637" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/(.3A.20a.20.E2.89.A4.20b.20.3A).html#202889637">(Jul 04 2020 at 20:15)</a>:</h4>
<p>It's used for the <code>@[ematch]</code> attribute</p>



<a name="202889685"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%28%3A%20a%20%E2%89%A4%20b%20%3A%29/near/202889685" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/(.3A.20a.20.E2.89.A4.20b.20.3A).html#202889685">(Jul 04 2020 at 20:16)</a>:</h4>
<p>I believe the meaning is that if we see <code>a &lt;= b</code> in the context, then we see if we can prove <code>b &lt;= a</code> and add <code>a = b</code> to the context</p>



<a name="202889689"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%28%3A%20a%20%E2%89%A4%20b%20%3A%29/near/202889689" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/(.3A.20a.20.E2.89.A4.20b.20.3A).html#202889689">(Jul 04 2020 at 20:16)</a>:</h4>
<p>aka heuristic instantiation</p>



<a name="202890196"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%28%3A%20a%20%E2%89%A4%20b%20%3A%29/near/202890196" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/(.3A.20a.20.E2.89.A4.20b.20.3A).html#202890196">(Jul 04 2020 at 20:31)</a>:</h4>
<p>Looking through that file, there's <code>@@foo</code> notation for some kind of partial explicit version of <code>foo</code>, but I don't see the pattern for which arguments of <code>@foo</code> are included.  It seems to include type class arguments and some quasi-random assortment of <code>{...}</code> arguments.  Is there any documentation or explanation for partial explicit notation?</p>



<a name="202890209"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%28%3A%20a%20%E2%89%A4%20b%20%3A%29/near/202890209" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/(.3A.20a.20.E2.89.A4.20b.20.3A).html#202890209">(Jul 04 2020 at 20:31)</a>:</h4>
<p>It is supposed to make higher order arguments explicit</p>



<a name="202890253"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%28%3A%20a%20%E2%89%A4%20b%20%3A%29/near/202890253" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/(.3A.20a.20.E2.89.A4.20b.20.3A).html#202890253">(Jul 04 2020 at 20:32)</a>:</h4>
<p>the main motivation is to get to the motive in recursors like <code>eq.rec</code></p>



<a name="202890281"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%28%3A%20a%20%E2%89%A4%20b%20%3A%29/near/202890281" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/(.3A.20a.20.E2.89.A4.20b.20.3A).html#202890281">(Jul 04 2020 at 20:33)</a>:</h4>
<p>A very short comment:</p>
<div class="codehilite"><pre><span></span><code>    <span class="k">enum</span> <span class="k">class</span> <span class="nc">arg_mask</span> <span class="p">{</span>
        <span class="n">AllExplicit</span> <span class="cm">/* @ annotation */</span><span class="p">,</span>
        <span class="n">InstHoExplicit</span><span class="p">,</span> <span class="cm">/* @@ annotation (i.e., instance implicit and higher-order arguments are explicit  */</span>
        <span class="n">Default</span> <span class="cm">/* default behavior */</span>
    <span class="p">};</span>
</code></pre></div>



<a name="202890390"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%28%3A%20a%20%E2%89%A4%20b%20%3A%29/near/202890390" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/(.3A.20a.20.E2.89.A4.20b.20.3A).html#202890390">(Jul 04 2020 at 20:36)</a>:</h4>
<p>I'm not too familiar with the terminology (other than the "motive is not type correct" error).  So, to check, <code>C</code> in the following is the motive?</p>
<div class="codehilite"><pre><span></span><code><span class="n">eq</span><span class="bp">.</span><span class="n">rec</span> <span class="o">:</span> <span class="bp">Π</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="n">Sort</span> <span class="n">u_2</span><span class="o">}</span> <span class="o">{</span><span class="n">a</span> <span class="o">:</span> <span class="n">α</span><span class="o">}</span> <span class="o">{</span><span class="n">C</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">Sort</span> <span class="n">u_1</span><span class="o">},</span> <span class="n">C</span> <span class="n">a</span> <span class="bp">→</span> <span class="bp">Π</span> <span class="o">{</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">α</span><span class="o">},</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">a_1</span> <span class="bp">→</span> <span class="n">C</span> <span class="n">a_1</span>
</code></pre></div>


<p>And "higher-order" refers to it being an argument of a higher sort than the rest? (Sort of like first-order vs second-order logic?)</p>



<a name="202890392"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%28%3A%20a%20%E2%89%A4%20b%20%3A%29/near/202890392" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/(.3A.20a.20.E2.89.A4.20b.20.3A).html#202890392">(Jul 04 2020 at 20:36)</a>:</h4>
<p>yes</p>



<a name="202890398"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%28%3A%20a%20%E2%89%A4%20b%20%3A%29/near/202890398" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/(.3A.20a.20.E2.89.A4.20b.20.3A).html#202890398">(Jul 04 2020 at 20:37)</a>:</h4>
<p>the higher order is because it is matched using a limited kind of higher order unification</p>



<a name="202890445"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%28%3A%20a%20%E2%89%A4%20b%20%3A%29/near/202890445" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/(.3A.20a.20.E2.89.A4.20b.20.3A).html#202890445">(Jul 04 2020 at 20:38)</a>:</h4>
<p>A first order match of <code>C a_1</code> against a goal like <code>a = b</code> would set <code>a_1 := b</code> and <code>C := (=) a</code> which is not usually what we want</p>



<a name="202890457"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%28%3A%20a%20%E2%89%A4%20b%20%3A%29/near/202890457" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/(.3A.20a.20.E2.89.A4.20b.20.3A).html#202890457">(Jul 04 2020 at 20:38)</a>:</h4>
<p>A higher order match will find instances of <code>a_1</code> in the goal, replace them with a variable <code>x</code>, and then set <code>C := \lam x, ...</code></p>



<a name="202890523"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%28%3A%20a%20%E2%89%A4%20b%20%3A%29/near/202890523" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/(.3A.20a.20.E2.89.A4.20b.20.3A).html#202890523">(Jul 04 2020 at 20:40)</a>:</h4>
<p>for example if the goal is <code>a = a</code> then first order matching <code>?C a</code> against it yields <code>?C := eq a</code>, and higher order matching yields <code>?C := \lam x, x = x</code></p>



<a name="202890541"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%28%3A%20a%20%E2%89%A4%20b%20%3A%29/near/202890541" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/(.3A.20a.20.E2.89.A4.20b.20.3A).html#202890541">(Jul 04 2020 at 20:41)</a>:</h4>
<p>Oh, I see, higher order in the sense that it's a function that's being unified (with appropriate generalization)</p>



<a name="202890542"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%28%3A%20a%20%E2%89%A4%20b%20%3A%29/near/202890542" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/(.3A.20a.20.E2.89.A4.20b.20.3A).html#202890542">(Jul 04 2020 at 20:41)</a>:</h4>
<p>In fact, full higher order matching yields other solutions as well, like <code>?C := \lam x, x = a</code>. Lean 2 used to do backtracking on all these but it was too slow and unpredictable so higher order matching is now only used in a very limited way in recursors</p>



<a name="202890588"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%28%3A%20a%20%E2%89%A4%20b%20%3A%29/near/202890588" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/(.3A.20a.20.E2.89.A4.20b.20.3A).html#202890588">(Jul 04 2020 at 20:42)</a>:</h4>
<p>The <code>@[elab_as_eliminator]</code> attribute is a hint to lean to use higher order matching</p>



<a name="233228030"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%28%3A%20a%20%E2%89%A4%20b%20%3A%29/near/233228030" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/(.3A.20a.20.E2.89.A4.20b.20.3A).html#233228030">(Apr 05 2021 at 20:57)</a>:</h4>
<p>Is there any documentation on <code>ematch</code>?</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>