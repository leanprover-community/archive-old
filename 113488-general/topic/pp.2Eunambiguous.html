---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/pp.2Eunambiguous.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/pp.2Eunambiguous.html">pp.unambiguous</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="199258973"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pp.unambiguous/near/199258973" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/pp.2Eunambiguous.html#199258973">(May 30 2020 at 14:23)</a>:</h4>
<p>How hard would it be to write a tactic that takes an <code>expr</code> and prints a string that is close to the standard pretty printed version, but ready for copy-pasting into the current editor window?</p>



<a name="199259120"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pp.unambiguous/near/199259120" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Rute <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/pp.2Eunambiguous.html#199259120">(May 30 2020 at 14:26)</a>:</h4>
<p>Relevant: <a href="#narrow/stream/113488-general/topic/pp.2Eall.20with.20more.20.40">https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pp.2Eall.20with.20more.20.40</a></p>



<a name="199259199"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pp.unambiguous/near/199259199" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/pp.2Eunambiguous.html#199259199">(May 30 2020 at 14:29)</a>:</h4>
<p>Typical examples are ambiguous <code>0</code> that need a type ascription</p>



<a name="199259211"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pp.unambiguous/near/199259211" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/pp.2Eunambiguous.html#199259211">(May 30 2020 at 14:29)</a>:</h4>
<p>it needs more than a type ascription in general</p>



<a name="199259218"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pp.unambiguous/near/199259218" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/pp.2Eunambiguous.html#199259218">(May 30 2020 at 14:29)</a>:</h4>
<p>why?</p>



<a name="199259256"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pp.unambiguous/near/199259256" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/pp.2Eunambiguous.html#199259256">(May 30 2020 at 14:30)</a>:</h4>
<p>I would start from pp.all as a baseline</p>



<a name="199259299"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pp.unambiguous/near/199259299" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/pp.2Eunambiguous.html#199259299">(May 30 2020 at 14:31)</a>:</h4>
<p>You can try to take pp.all output and progressively try to remove <code>@</code> signs while ensuring that the elaborator still produces the right term, but this is pretty expensive since you have to typecheck hundreds of variations of the term</p>



<a name="199259365"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pp.unambiguous/near/199259365" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/pp.2Eunambiguous.html#199259365">(May 30 2020 at 14:32)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112680">Johan Commelin</span> <a href="#narrow/stream/113488-general/topic/pp.2Eunambiguous/near/199259218">said</a>:</p>
<blockquote>
<p>why?</p>
</blockquote>
<p>You could have a zero with a non-canonical instance, or one that was provided manually and can't be found by instance search</p>



<a name="199259653"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pp.unambiguous/near/199259653" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/pp.2Eunambiguous.html#199259653">(May 30 2020 at 14:39)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110049">Mario Carneiro</span> <a href="#narrow/stream/113488-general/topic/pp.2Eunambiguous/near/199259299">said</a>:</p>
<blockquote>
<p>You can try to take pp.all output and progressively try to remove <code>@</code> signs while ensuring that the elaborator still produces the right term, but this is pretty expensive since you have to typecheck hundreds of variations of the term</p>
</blockquote>
<p>Expensive is fine if it's only used occasionally, say in <code>extract_goal</code>.</p>



<a name="199259655"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pp.unambiguous/near/199259655" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Rute <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/pp.2Eunambiguous.html#199259655">(May 30 2020 at 14:39)</a>:</h4>
<p>I believe Lean 4 is making sure the pp.all round trip succeeds.  See <a href="https://github.com/leanprover/lean4/blob/50fc9610379243e419f75de7e281cbeb61287324/src/Lean/Delaborator.lean">https://github.com/leanprover/lean4/blob/50fc9610379243e419f75de7e281cbeb61287324/src/Lean/Delaborator.lean</a></p>



<a name="199259730"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pp.unambiguous/near/199259730" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Rute <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/pp.2Eunambiguous.html#199259730">(May 30 2020 at 14:41)</a>:</h4>
<p>Sorry, I misunderstood.  You want something <em>closer</em> to standard pp.</p>



<a name="199259789"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pp.unambiguous/near/199259789" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/pp.2Eunambiguous.html#199259789">(May 30 2020 at 14:42)</a>:</h4>
<p>It's not hard to make something like pp.all that round-trips. I am pretty sure the "delaborator" is doing what I outlined above, trying to get closer to an unmarked term</p>



<a name="199260008"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pp.unambiguous/near/199260008" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/pp.2Eunambiguous.html#199260008">(May 30 2020 at 14:47)</a>:</h4>
<p>I think if you design it well you can get delaboration to be "only" as expensive as elaboration. (Still pretty expensive for something that is doing printing...)</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>