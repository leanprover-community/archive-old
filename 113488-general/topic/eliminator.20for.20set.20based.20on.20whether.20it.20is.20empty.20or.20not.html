---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/eliminator.20for.20set.20based.20on.20whether.20it.20is.20empty.20or.20not.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/eliminator.20for.20set.20based.20on.20whether.20it.20is.20empty.20or.20not.html">eliminator for set based on whether it is empty or not</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="265087920"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eliminator%20for%20set%20based%20on%20whether%20it%20is%20empty%20or%20not/near/265087920" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bernd Losert <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/eliminator.20for.20set.20based.20on.20whether.20it.20is.20empty.20or.20not.html#265087920">(Dec 15 2021 at 22:55)</a>:</h4>
<p>Say I have a set <code>s</code>. Is there an eliminator on <code>s</code> to deal with what happens when it is empty and when it isn't? Or do I have to use<code>by_cases</code> on <code>is_empty s</code>?</p>



<a name="265088065"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eliminator%20for%20set%20based%20on%20whether%20it%20is%20empty%20or%20not/near/265088065" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/eliminator.20for.20set.20based.20on.20whether.20it.20is.20empty.20or.20not.html#265088065">(Dec 15 2021 at 22:56)</a>:</h4>
<p><a href="https://leanprover-community.github.io/mathlib_docs/find/set.eq_empty_or_nonempty">docs#set.eq_empty_or_nonempty</a> might exist</p>



<a name="265088209"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eliminator%20for%20set%20based%20on%20whether%20it%20is%20empty%20or%20not/near/265088209" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/eliminator.20for.20set.20based.20on.20whether.20it.20is.20empty.20or.20not.html#265088209">(Dec 15 2021 at 22:58)</a>:</h4>
<p>Excellent, it does: so</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">obtain</span> <span class="n">rfl</span> <span class="bp">|</span> <span class="o">⟨</span><span class="n">x</span><span class="o">,</span> <span class="n">hx</span><span class="o">⟩</span> <span class="o">:=</span> <span class="n">s.eq_empty_or_nonempty</span>
</code></pre></div>
<p>Will do all you need in tactic mode</p>



<a name="265088501"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eliminator%20for%20set%20based%20on%20whether%20it%20is%20empty%20or%20not/near/265088501" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bernd Losert <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/eliminator.20for.20set.20based.20on.20whether.20it.20is.20empty.20or.20not.html#265088501">(Dec 15 2021 at 23:00)</a>:</h4>
<p>So that will create two goals? One for the empty case and one for the nonempty case?</p>



<a name="265088694"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eliminator%20for%20set%20based%20on%20whether%20it%20is%20empty%20or%20not/near/265088694" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bernd Losert <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/eliminator.20for.20set.20based.20on.20whether.20it.20is.20empty.20or.20not.html#265088694">(Dec 15 2021 at 23:01)</a>:</h4>
<p>I would prefer an eliminator that I can use outside of tactic mode (if such a thing exists).</p>



<a name="265089213"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eliminator%20for%20set%20based%20on%20whether%20it%20is%20empty%20or%20not/near/265089213" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/eliminator.20for.20set.20based.20on.20whether.20it.20is.20empty.20or.20not.html#265089213">(Dec 15 2021 at 23:06)</a>:</h4>
<p>How do you propose to avoid cases?</p>



<a name="265089398"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eliminator%20for%20set%20based%20on%20whether%20it%20is%20empty%20or%20not/near/265089398" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bernd Losert <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/eliminator.20for.20set.20based.20on.20whether.20it.20is.20empty.20or.20not.html#265089398">(Dec 15 2021 at 23:07)</a>:</h4>
<p>I want cases, but in the form of an eliminator, like. <code>set.empty_elim (empty_case_code) (non_empty_case_code)</code>.</p>



<a name="265089407"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eliminator%20for%20set%20based%20on%20whether%20it%20is%20empty%20or%20not/near/265089407" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/eliminator.20for.20set.20based.20on.20whether.20it.20is.20empty.20or.20not.html#265089407">(Dec 15 2021 at 23:07)</a>:</h4>
<p>In tactic mode you can use <code>s.eq_empty_or_nonempty.elim _ _</code></p>



<a name="265089471"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eliminator%20for%20set%20based%20on%20whether%20it%20is%20empty%20or%20not/near/265089471" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/eliminator.20for.20set.20based.20on.20whether.20it.20is.20empty.20or.20not.html#265089471">(Dec 15 2021 at 23:08)</a>:</h4>
<p>Right, just combine what Eric said with the eliminator for <code>or</code></p>



<a name="265089515"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eliminator%20for%20set%20based%20on%20whether%20it%20is%20empty%20or%20not/near/265089515" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/eliminator.20for.20set.20based.20on.20whether.20it.20is.20empty.20or.20not.html#265089515">(Dec 15 2021 at 23:08)</a>:</h4>
<p>You'll have to rewrite by <code>s = ∅</code> manually in the first case though</p>



<a name="265089694"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eliminator%20for%20set%20based%20on%20whether%20it%20is%20empty%20or%20not/near/265089694" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/eliminator.20for.20set.20based.20on.20whether.20it.20is.20empty.20or.20not.html#265089694">(Dec 15 2021 at 23:10)</a>:</h4>
<p>Or use <code>match s.empty_or_nonempty with | or.inl rfl := _ | or.inr r := _ end</code>, if that works</p>



<a name="265089697"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eliminator%20for%20set%20based%20on%20whether%20it%20is%20empty%20or%20not/near/265089697" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bernd Losert <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/eliminator.20for.20set.20based.20on.20whether.20it.20is.20empty.20or.20not.html#265089697">(Dec 15 2021 at 23:10)</a>:</h4>
<p>So <code>(set.eq_empty_or_nonempty s).elim</code>? Let me try.</p>



<a name="265089755"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eliminator%20for%20set%20based%20on%20whether%20it%20is%20empty%20or%20not/near/265089755" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/eliminator.20for.20set.20based.20on.20whether.20it.20is.20empty.20or.20not.html#265089755">(Dec 15 2021 at 23:10)</a>:</h4>
<p><code>s.</code> should work fine</p>



<a name="265089757"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eliminator%20for%20set%20based%20on%20whether%20it%20is%20empty%20or%20not/near/265089757" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/eliminator.20for.20set.20based.20on.20whether.20it.20is.20empty.20or.20not.html#265089757">(Dec 15 2021 at 23:11)</a>:</h4>
<p>You can avoid those parens with the dot notation :) see Mario's comment</p>



<a name="265089936"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eliminator%20for%20set%20based%20on%20whether%20it%20is%20empty%20or%20not/near/265089936" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bernd Losert <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/eliminator.20for.20set.20based.20on.20whether.20it.20is.20empty.20or.20not.html#265089936">(Dec 15 2021 at 23:12)</a>:</h4>
<p>Ah, right.</p>



<a name="265090054"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eliminator%20for%20set%20based%20on%20whether%20it%20is%20empty%20or%20not/near/265090054" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/eliminator.20for.20set.20based.20on.20whether.20it.20is.20empty.20or.20not.html#265090054">(Dec 15 2021 at 23:13)</a>:</h4>
<p>Dot notation is really awesome when you get used to it</p>



<a name="265090259"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eliminator%20for%20set%20based%20on%20whether%20it%20is%20empty%20or%20not/near/265090259" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bernd Losert <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/eliminator.20for.20set.20based.20on.20whether.20it.20is.20empty.20or.20not.html#265090259">(Dec 15 2021 at 23:15)</a>:</h4>
<p>OK, it seems to work, but now I'm getting another error. Progress!</p>



<a name="265091848"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eliminator%20for%20set%20based%20on%20whether%20it%20is%20empty%20or%20not/near/265091848" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bernd Losert <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/eliminator.20for.20set.20based.20on.20whether.20it.20is.20empty.20or.20not.html#265091848">(Dec 15 2021 at 23:31)</a>:</h4>
<p>This doesn't work for me:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">def</span> <span class="n">f</span> <span class="o">:</span> <span class="n">set</span> <span class="n">nat</span> <span class="bp">-&gt;</span> <span class="n">nat</span> <span class="o">:=</span> <span class="k">fun</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">set</span> <span class="n">nat</span><span class="o">),</span>
<span class="k">match</span> <span class="n">s.empty_or_nonempty</span> <span class="k">with</span>
<span class="bp">|</span> <span class="n">or.inl</span> <span class="n">rfl</span> <span class="o">:=</span> <span class="mi">0</span>
<span class="bp">|</span> <span class="n">or.inr</span> <span class="n">_</span> <span class="o">:=</span> <span class="mi">1</span>
<span class="kd">end</span>
</code></pre></div>
<p>What am I doing wrong here?</p>



<a name="265092247"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eliminator%20for%20set%20based%20on%20whether%20it%20is%20empty%20or%20not/near/265092247" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bernd Losert <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/eliminator.20for.20set.20based.20on.20whether.20it.20is.20empty.20or.20not.html#265092247">(Dec 15 2021 at 23:35)</a>:</h4>
<p>Could it be that empty_or_nonempty only works in tactic mode?</p>



<a name="265092516"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eliminator%20for%20set%20based%20on%20whether%20it%20is%20empty%20or%20not/near/265092516" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/eliminator.20for.20set.20based.20on.20whether.20it.20is.20empty.20or.20not.html#265092516">(Dec 15 2021 at 23:38)</a>:</h4>
<p>You can't eliminate an <code>or</code> into a non-prop</p>



<a name="265092571"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eliminator%20for%20set%20based%20on%20whether%20it%20is%20empty%20or%20not/near/265092571" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/eliminator.20for.20set.20based.20on.20whether.20it.20is.20empty.20or.20not.html#265092571">(Dec 15 2021 at 23:39)</a>:</h4>
<p>If you change the <code>nat</code> for some proposition then it will work</p>



<a name="265092611"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eliminator%20for%20set%20based%20on%20whether%20it%20is%20empty%20or%20not/near/265092611" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/eliminator.20for.20set.20based.20on.20whether.20it.20is.20empty.20or.20not.html#265092611">(Dec 15 2021 at 23:39)</a>:</h4>
<p>are you trying to construct data, or prove a theorem?</p>



<a name="265092684"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eliminator%20for%20set%20based%20on%20whether%20it%20is%20empty%20or%20not/near/265092684" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/eliminator.20for.20set.20based.20on.20whether.20it.20is.20empty.20or.20not.html#265092684">(Dec 15 2021 at 23:40)</a>:</h4>
<p>for the former I would suggest using <code>if s = ∅ then empty_case_code else non_empty_case_code</code></p>



<a name="265092770"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eliminator%20for%20set%20based%20on%20whether%20it%20is%20empty%20or%20not/near/265092770" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/eliminator.20for.20set.20based.20on.20whether.20it.20is.20empty.20or.20not.html#265092770">(Dec 15 2021 at 23:41)</a>:</h4>
<p>which also requires <code>open_locale classical</code> at the top of the file or <code>by classical; exact</code> at the start of the function</p>



<a name="265093549"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eliminator%20for%20set%20based%20on%20whether%20it%20is%20empty%20or%20not/near/265093549" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bernd Losert <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/eliminator.20for.20set.20based.20on.20whether.20it.20is.20empty.20or.20not.html#265093549">(Dec 15 2021 at 23:49)</a>:</h4>
<p>Ah, I see. I didn't know about the restriction of or elimination. OK.</p>



<a name="265093766"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eliminator%20for%20set%20based%20on%20whether%20it%20is%20empty%20or%20not/near/265093766" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bernd Losert <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/eliminator.20for.20set.20based.20on.20whether.20it.20is.20empty.20or.20not.html#265093766">(Dec 15 2021 at 23:51)</a>:</h4>
<p>Is there a reason for this restriction?</p>



<a name="265094098"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eliminator%20for%20set%20based%20on%20whether%20it%20is%20empty%20or%20not/near/265094098" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/eliminator.20for.20set.20based.20on.20whether.20it.20is.20empty.20or.20not.html#265094098">(Dec 15 2021 at 23:54)</a>:</h4>
<p>An <code>or</code> does not contain information about which variant is true, there is provably at most one proof of a disjunction. So you can't use a proof of an <code>or</code> to make a case disjunction unless the thing you are trying to prove is already a proposition (in which case it doesn't matter which one is actually true, in the case where both are true)</p>



<a name="265094232"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eliminator%20for%20set%20based%20on%20whether%20it%20is%20empty%20or%20not/near/265094232" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/eliminator.20for.20set.20based.20on.20whether.20it.20is.20empty.20or.20not.html#265094232">(Dec 15 2021 at 23:56)</a>:</h4>
<p>Put simply, you know it's true, but you don't know <strong>which</strong></p>



<a name="265094250"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eliminator%20for%20set%20based%20on%20whether%20it%20is%20empty%20or%20not/near/265094250" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/eliminator.20for.20set.20based.20on.20whether.20it.20is.20empty.20or.20not.html#265094250">(Dec 15 2021 at 23:56)</a>:</h4>
<p>So you can't compute</p>



<a name="265094415"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eliminator%20for%20set%20based%20on%20whether%20it%20is%20empty%20or%20not/near/265094415" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bernd Losert <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/eliminator.20for.20set.20based.20on.20whether.20it.20is.20empty.20or.20not.html#265094415">(Dec 15 2021 at 23:58)</a>:</h4>
<p>That makes sense.</p>



<a name="265094524"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eliminator%20for%20set%20based%20on%20whether%20it%20is%20empty%20or%20not/near/265094524" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bernd Losert <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/eliminator.20for.20set.20based.20on.20whether.20it.20is.20empty.20or.20not.html#265094524">(Dec 15 2021 at 23:59)</a>:</h4>
<p>Although it's kind of weird - if you don't know which, how does the pattern matching work?</p>



<a name="265094565"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eliminator%20for%20set%20based%20on%20whether%20it%20is%20empty%20or%20not/near/265094565" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/eliminator.20for.20set.20based.20on.20whether.20it.20is.20empty.20or.20not.html#265094565">(Dec 16 2021 at 00:00)</a>:</h4>
<p>It should be mentioned that you can write <code>if _ then _ else _</code></p>



<a name="265094618"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eliminator%20for%20set%20based%20on%20whether%20it%20is%20empty%20or%20not/near/265094618" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/eliminator.20for.20set.20based.20on.20whether.20it.20is.20empty.20or.20not.html#265094618">(Dec 16 2021 at 00:00)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110049">Mario Carneiro</span> <a href="#narrow/stream/113488-general/topic/eliminator.20for.20set.20based.20on.20whether.20it.20is.20empty.20or.20not/near/265092684">said</a>:</p>
<blockquote>
<p>for the former I would suggest using <code>if s = ∅ then empty_case_code else non_empty_case_code</code></p>
</blockquote>
<p>It has been <span aria-label="wink" class="emoji emoji-1f609" role="img" title="wink">:wink:</span></p>



<a name="265094768"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eliminator%20for%20set%20based%20on%20whether%20it%20is%20empty%20or%20not/near/265094768" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/eliminator.20for.20set.20based.20on.20whether.20it.20is.20empty.20or.20not.html#265094768">(Dec 16 2021 at 00:02)</a>:</h4>
<p><span class="user-mention silent" data-user-id="416322">Bernd Losert</span> <a href="#narrow/stream/113488-general/topic/eliminator.20for.20set.20based.20on.20whether.20it.20is.20empty.20or.20not/near/265094524">said</a>:</p>
<blockquote>
<p>Although it's kind of weird - if you don't know which, how does the pattern matching work?</p>
</blockquote>
<p>The pattern matching only works in the case where it is in a computationally irrelevant position: it is never actually executed</p>



<a name="265094876"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eliminator%20for%20set%20based%20on%20whether%20it%20is%20empty%20or%20not/near/265094876" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bernd Losert <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/eliminator.20for.20set.20based.20on.20whether.20it.20is.20empty.20or.20not.html#265094876">(Dec 16 2021 at 00:02)</a>:</h4>
<p>So it's an illusion.</p>



<a name="265094880"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eliminator%20for%20set%20based%20on%20whether%20it%20is%20empty%20or%20not/near/265094880" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/eliminator.20for.20set.20based.20on.20whether.20it.20is.20empty.20or.20not.html#265094880">(Dec 16 2021 at 00:02)</a>:</h4>
<p>In this case, it is simply nice syntax for the logical theorem <code>or.cases_on</code></p>



<a name="265095002"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eliminator%20for%20set%20based%20on%20whether%20it%20is%20empty%20or%20not/near/265095002" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bernd Losert <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/eliminator.20for.20set.20based.20on.20whether.20it.20is.20empty.20or.20not.html#265095002">(Dec 16 2021 at 00:03)</a>:</h4>
<p>Thanks for clarifying.</p>



<a name="265095008"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eliminator%20for%20set%20based%20on%20whether%20it%20is%20empty%20or%20not/near/265095008" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/eliminator.20for.20set.20based.20on.20whether.20it.20is.20empty.20or.20not.html#265095008">(Dec 16 2021 at 00:03)</a>:</h4>
<p>It's (ab)using the curry howard isomorphism to allow you to write proofs with some of the same syntax that you use to write programs</p>



<a name="265096008"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eliminator%20for%20set%20based%20on%20whether%20it%20is%20empty%20or%20not/near/265096008" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bernd Losert <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/eliminator.20for.20set.20based.20on.20whether.20it.20is.20empty.20or.20not.html#265096008">(Dec 16 2021 at 00:15)</a>:</h4>
<p>How do I get an element from the set in the nonempty_case_code?</p>



<a name="265096060"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eliminator%20for%20set%20based%20on%20whether%20it%20is%20empty%20or%20not/near/265096060" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bernd Losert <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/eliminator.20for.20set.20based.20on.20whether.20it.20is.20empty.20or.20not.html#265096060">(Dec 16 2021 at 00:16)</a>:</h4>
<p>I mean, when I do this <code>if s = ∅ then empty_case_code else non_empty_case_code</code>.</p>



<a name="265097631"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eliminator%20for%20set%20based%20on%20whether%20it%20is%20empty%20or%20not/near/265097631" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/eliminator.20for.20set.20based.20on.20whether.20it.20is.20empty.20or.20not.html#265097631">(Dec 16 2021 at 00:35)</a>:</h4>
<p>We probably have <a href="https://leanprover-community.github.io/mathlib_docs/find/set.nonempty.some">docs#set.nonempty.some</a> or something like that?</p>



<a name="265097711"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eliminator%20for%20set%20based%20on%20whether%20it%20is%20empty%20or%20not/near/265097711" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/eliminator.20for.20set.20based.20on.20whether.20it.20is.20empty.20or.20not.html#265097711">(Dec 16 2021 at 00:36)</a>:</h4>
<p>But you would have to show that <code>s \neq \empty</code> implies <code>s.nonempty</code>.</p>



<a name="265097771"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eliminator%20for%20set%20based%20on%20whether%20it%20is%20empty%20or%20not/near/265097771" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/eliminator.20for.20set.20based.20on.20whether.20it.20is.20empty.20or.20not.html#265097771">(Dec 16 2021 at 00:37)</a>:</h4>
<p>It might be better to use <code>if s.nonempty then nonempty_case else empty_case</code>. It's very possible that you're trying to do something in a way that's not ideal.</p>



<a name="265097788"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eliminator%20for%20set%20based%20on%20whether%20it%20is%20empty%20or%20not/near/265097788" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/eliminator.20for.20set.20based.20on.20whether.20it.20is.20empty.20or.20not.html#265097788">(Dec 16 2021 at 00:37)</a>:</h4>
<p>Can you un- <a href="https://en.wikipedia.org/wiki/XY_problem">#xy</a> ?</p>



<a name="265097942"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eliminator%20for%20set%20based%20on%20whether%20it%20is%20empty%20or%20not/near/265097942" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bernd Losert <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/eliminator.20for.20set.20based.20on.20whether.20it.20is.20empty.20or.20not.html#265097942">(Dec 16 2021 at 00:39)</a>:</h4>
<p>Well, I'm trying to define <code>has_Inf</code> and I need to deal with the case when the set is empty and do something special in that case.</p>



<a name="265098053"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eliminator%20for%20set%20based%20on%20whether%20it%20is%20empty%20or%20not/near/265098053" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bernd Losert <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/eliminator.20for.20set.20based.20on.20whether.20it.20is.20empty.20or.20not.html#265098053">(Dec 16 2021 at 00:40)</a>:</h4>
<p>So far, Lean is not letting me do what I want. It keeps complaining about:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">error</span><span class="o">:</span> <span class="n">induction</span> <span class="n">tactic</span> <span class="n">failed</span><span class="o">,</span> <span class="n">recursor</span> <span class="bp">'</span><span class="n">or.dcases_on'</span> <span class="n">can</span> <span class="n">only</span> <span class="n">eliminate</span> <span class="n">into</span> <span class="kt">Prop</span>
</code></pre></div>



<a name="265098245"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eliminator%20for%20set%20based%20on%20whether%20it%20is%20empty%20or%20not/near/265098245" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bernd Losert <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/eliminator.20for.20set.20based.20on.20whether.20it.20is.20empty.20or.20not.html#265098245">(Dec 16 2021 at 00:43)</a>:</h4>
<p>When I use <code>if then else</code>, I run into <code>invalid field notation</code> problems.</p>



<a name="265098321"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eliminator%20for%20set%20based%20on%20whether%20it%20is%20empty%20or%20not/near/265098321" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/eliminator.20for.20set.20based.20on.20whether.20it.20is.20empty.20or.20not.html#265098321">(Dec 16 2021 at 00:44)</a>:</h4>
<p>What are defining a has_Inf for? A <a href="https://leanprover-community.github.io/mwe.html">#mwe</a> would be helpful</p>



<a name="265098678"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eliminator%20for%20set%20based%20on%20whether%20it%20is%20empty%20or%20not/near/265098678" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bernd Losert <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/eliminator.20for.20set.20based.20on.20whether.20it.20is.20empty.20or.20not.html#265098678">(Dec 16 2021 at 00:49)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">tactic</span>
<span class="kn">import</span> <span class="n">order.filter.ultrafilter</span>
<span class="kn">import</span> <span class="n">order.filter.partial</span>

<span class="kd">noncomputable theory</span>
<span class="kn">open</span> <span class="n">set</span> <span class="n">filter</span> <span class="n">classical</span>
<span class="n">open_locale</span> <span class="n">classical</span> <span class="n">filter</span>

<span class="kd">variable</span> <span class="n">a</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span>

<span class="kd">class</span> <span class="n">convergence_space</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">conv</span> <span class="o">:</span> <span class="n">filter</span> <span class="n">a</span> <span class="bp">-&gt;</span> <span class="n">a</span> <span class="bp">-&gt;</span> <span class="kt">Prop</span><span class="o">)</span>

<span class="kd">def</span> <span class="n">indiscrete</span> <span class="o">:</span> <span class="n">convergence_space</span> <span class="n">a</span> <span class="o">:=</span> <span class="o">{</span>
  <span class="n">conv</span> <span class="o">:=</span> <span class="k">fun</span> <span class="n">l</span> <span class="n">x</span><span class="o">,</span> <span class="n">l</span> <span class="bp">&lt;=</span> <span class="n">pure</span> <span class="n">x</span><span class="o">,</span>
<span class="o">}</span>

<span class="kd">instance</span> <span class="o">:</span> <span class="n">has_Inf</span> <span class="o">(</span><span class="n">convergence_space</span> <span class="n">a</span><span class="o">)</span> <span class="o">:=</span> <span class="o">{</span>
  <span class="n">Inf</span> <span class="o">:=</span> <span class="k">fun</span> <span class="n">ps</span><span class="o">,</span>
    <span class="k">let</span> <span class="n">ne</span> <span class="o">:=</span> <span class="n">ps.nonempty</span> <span class="k">in</span>
    <span class="k">if</span> <span class="n">ne</span> <span class="k">then</span> <span class="o">{</span> <span class="n">conv</span> <span class="o">:=</span> <span class="bp">@</span><span class="n">conv</span> <span class="n">a</span> <span class="o">(</span><span class="n">set.nonempty.some</span> <span class="n">ne</span><span class="o">)</span> <span class="o">}</span>
    <span class="k">else</span> <span class="n">indiscrete</span>
<span class="o">}</span>
</code></pre></div>



<a name="265099334"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eliminator%20for%20set%20based%20on%20whether%20it%20is%20empty%20or%20not/near/265099334" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/eliminator.20for.20set.20based.20on.20whether.20it.20is.20empty.20or.20not.html#265099334">(Dec 16 2021 at 00:58)</a>:</h4>
<p>I don't know if this is the correct definition... </p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">tactic</span>
<span class="kn">import</span> <span class="n">order.filter.ultrafilter</span>
<span class="kn">import</span> <span class="n">order.filter.partial</span>

<span class="kd">noncomputable theory</span>
<span class="kn">open</span> <span class="n">set</span> <span class="n">filter</span> <span class="n">classical</span>
<span class="n">open_locale</span> <span class="n">classical</span> <span class="n">filter</span>

<span class="kd">variable</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span>

<span class="kd">class</span> <span class="n">convergence_space</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">conv</span> <span class="o">:</span> <span class="n">filter</span> <span class="n">α</span> <span class="bp">-&gt;</span> <span class="n">α</span> <span class="bp">-&gt;</span> <span class="kt">Prop</span><span class="o">)</span>

<span class="kd">def</span> <span class="n">indiscrete</span> <span class="o">:</span> <span class="n">convergence_space</span> <span class="n">α</span> <span class="o">:=</span> <span class="o">⟨</span><span class="bp">λ</span> <span class="n">l</span> <span class="n">x</span><span class="o">,</span> <span class="n">l</span> <span class="bp">≤</span> <span class="n">pure</span> <span class="n">x</span><span class="o">⟩</span>

<span class="kd">instance</span> <span class="o">{</span><span class="n">α</span><span class="o">}</span> <span class="o">:</span> <span class="n">has_Inf</span> <span class="o">(</span><span class="n">convergence_space</span> <span class="n">α</span><span class="o">)</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">Inf</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">S</span><span class="o">,</span> <span class="o">⟨</span><span class="bp">λ</span> <span class="n">F</span> <span class="n">x</span><span class="o">,</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">t</span> <span class="o">:</span> <span class="n">convergence_space</span> <span class="n">α</span><span class="o">)</span> <span class="o">(</span><span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">∈</span> <span class="n">S</span><span class="o">),</span>
    <span class="kd">by</span> <span class="n">letI</span> <span class="o">:</span> <span class="n">convergence_space</span> <span class="n">α</span> <span class="o">:=</span> <span class="n">t</span><span class="bp">;</span> <span class="n">exact</span> <span class="n">convergence_space.conv</span> <span class="n">F</span> <span class="n">x</span><span class="o">⟩</span> <span class="o">}</span>
</code></pre></div>



<a name="265099356"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eliminator%20for%20set%20based%20on%20whether%20it%20is%20empty%20or%20not/near/265099356" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/eliminator.20for.20set.20based.20on.20whether.20it.20is.20empty.20or.20not.html#265099356">(Dec 16 2021 at 00:58)</a>:</h4>
<p>This is saying that the convergence should hold true for every convergence space structure from the given set.</p>



<a name="265099391"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eliminator%20for%20set%20based%20on%20whether%20it%20is%20empty%20or%20not/near/265099391" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bernd Losert <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/eliminator.20for.20set.20based.20on.20whether.20it.20is.20empty.20or.20not.html#265099391">(Dec 16 2021 at 00:59)</a>:</h4>
<p>That would be <code>has_Sup</code>. I had no problems with that one.</p>



<a name="265099519"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eliminator%20for%20set%20based%20on%20whether%20it%20is%20empty%20or%20not/near/265099519" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/eliminator.20for.20set.20based.20on.20whether.20it.20is.20empty.20or.20not.html#265099519">(Dec 16 2021 at 01:00)</a>:</h4>
<p>If you have a sup, you can just skip the inf</p>



<a name="265099554"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eliminator%20for%20set%20based%20on%20whether%20it%20is%20empty%20or%20not/near/265099554" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bernd Losert <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/eliminator.20for.20set.20based.20on.20whether.20it.20is.20empty.20or.20not.html#265099554">(Dec 16 2021 at 01:01)</a>:</h4>
<p>True, but I wanted to define the instance just to check the theory.</p>



<a name="265099564"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eliminator%20for%20set%20based%20on%20whether%20it%20is%20empty%20or%20not/near/265099564" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/eliminator.20for.20set.20based.20on.20whether.20it.20is.20empty.20or.20not.html#265099564">(Dec 16 2021 at 01:01)</a>:</h4>
<p>in a complete lattice one implies the other, although the expression you get out is ugly and it's good to supply one explicitly if it has a nice expresssion</p>



<a name="265099643"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eliminator%20for%20set%20based%20on%20whether%20it%20is%20empty%20or%20not/near/265099643" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bernd Losert <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/eliminator.20for.20set.20based.20on.20whether.20it.20is.20empty.20or.20not.html#265099643">(Dec 16 2021 at 01:02)</a>:</h4>
<p>In this Inf, it's supposed to be an existensial, but I have to deal with the empty case explicitly.</p>



<a name="265099670"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eliminator%20for%20set%20based%20on%20whether%20it%20is%20empty%20or%20not/near/265099670" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/eliminator.20for.20set.20based.20on.20whether.20it.20is.20empty.20or.20not.html#265099670">(Dec 16 2021 at 01:02)</a>:</h4>
<p>Could you write the expression you want informally?</p>



<a name="265099702"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eliminator%20for%20set%20based%20on%20whether%20it%20is%20empty%20or%20not/near/265099702" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/eliminator.20for.20set.20based.20on.20whether.20it.20is.20empty.20or.20not.html#265099702">(Dec 16 2021 at 01:03)</a>:</h4>
<p>Are you looking for something like this?</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">tactic</span>
<span class="kn">import</span> <span class="n">order.filter.ultrafilter</span>
<span class="kn">import</span> <span class="n">order.filter.partial</span>

<span class="kd">noncomputable theory</span>
<span class="kn">open</span> <span class="n">set</span> <span class="n">filter</span> <span class="n">classical</span>
<span class="n">open_locale</span> <span class="n">classical</span> <span class="n">filter</span>

<span class="kd">variable</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span>

<span class="kd">class</span> <span class="n">convergence_space</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">conv</span> <span class="o">:</span> <span class="n">filter</span> <span class="n">α</span> <span class="bp">-&gt;</span> <span class="n">α</span> <span class="bp">-&gt;</span> <span class="kt">Prop</span><span class="o">)</span>

<span class="kd">def</span> <span class="n">indiscrete</span> <span class="o">:</span> <span class="n">convergence_space</span> <span class="n">α</span> <span class="o">:=</span> <span class="o">⟨</span><span class="bp">λ</span> <span class="n">l</span> <span class="n">x</span><span class="o">,</span> <span class="n">l</span> <span class="bp">≤</span> <span class="n">pure</span> <span class="n">x</span><span class="o">⟩</span>

<span class="kd">instance</span> <span class="o">{</span><span class="n">α</span><span class="o">}</span> <span class="o">:</span> <span class="n">has_Inf</span> <span class="o">(</span><span class="n">convergence_space</span> <span class="n">α</span><span class="o">)</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">Inf</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">S</span><span class="o">,</span> <span class="o">⟨</span><span class="bp">λ</span> <span class="n">F</span> <span class="n">x</span><span class="o">,</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">t</span> <span class="o">:</span> <span class="n">convergence_space</span> <span class="n">α</span><span class="o">)</span> <span class="o">(</span><span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">∈</span> <span class="n">S</span><span class="o">),</span>
    <span class="kd">by</span> <span class="n">letI</span> <span class="o">:</span> <span class="n">convergence_space</span> <span class="n">α</span> <span class="o">:=</span> <span class="n">t</span><span class="bp">;</span> <span class="n">exact</span> <span class="n">convergence_space.conv</span> <span class="n">F</span> <span class="n">x</span><span class="o">⟩</span> <span class="o">}</span>
</code></pre></div>



<a name="265099770"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eliminator%20for%20set%20based%20on%20whether%20it%20is%20empty%20or%20not/near/265099770" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bernd Losert <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/eliminator.20for.20set.20based.20on.20whether.20it.20is.20empty.20or.20not.html#265099770">(Dec 16 2021 at 01:04)</a>:</h4>
<p>Basically, the <code>Inf ps</code> of a set of convergence spaces <code>ps</code> is suppose to defined as so that <code>conv f x</code> in <code>Inf ps</code> means there exists a <code>p</code> in <code>ps</code> such that <code>conv f x</code> in <code>p</code>. In the case the set is empty, use the indiscrete convergence space.</p>



<a name="265099775"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eliminator%20for%20set%20based%20on%20whether%20it%20is%20empty%20or%20not/near/265099775" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/eliminator.20for.20set.20based.20on.20whether.20it.20is.20empty.20or.20not.html#265099775">(Dec 16 2021 at 01:04)</a>:</h4>
<p>btw you can use <code>by exactI</code> instead of that <code>letI</code></p>



<a name="265099810"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eliminator%20for%20set%20based%20on%20whether%20it%20is%20empty%20or%20not/near/265099810" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bernd Losert <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/eliminator.20for.20set.20based.20on.20whether.20it.20is.20empty.20or.20not.html#265099810">(Dec 16 2021 at 01:05)</a>:</h4>
<p>First time seeing letI and exactI. What do those do?</p>



<a name="265099839"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eliminator%20for%20set%20based%20on%20whether%20it%20is%20empty%20or%20not/near/265099839" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/eliminator.20for.20set.20based.20on.20whether.20it.20is.20empty.20or.20not.html#265099839">(Dec 16 2021 at 01:05)</a>:</h4>
<p>how about <code>F ≤ pure x \/ ∃ (t : convergence_space α) (ht : t ∈ S), by exactI convergence_space.conv F x</code></p>



<a name="265099848"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eliminator%20for%20set%20based%20on%20whether%20it%20is%20empty%20or%20not/near/265099848" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bernd Losert <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/eliminator.20for.20set.20based.20on.20whether.20it.20is.20empty.20or.20not.html#265099848">(Dec 16 2021 at 01:05)</a>:</h4>
<p>And why does the approach using <code>if then else</code> fail?</p>



<a name="265099917"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eliminator%20for%20set%20based%20on%20whether%20it%20is%20empty%20or%20not/near/265099917" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/eliminator.20for.20set.20based.20on.20whether.20it.20is.20empty.20or.20not.html#265099917">(Dec 16 2021 at 01:06)</a>:</h4>
<p>It can be made to work, but I think it is better to use propositional connectives in this case since you are defining a <code>Prop</code></p>



<a name="265099945"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eliminator%20for%20set%20based%20on%20whether%20it%20is%20empty%20or%20not/near/265099945" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bernd Losert <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/eliminator.20for.20set.20based.20on.20whether.20it.20is.20empty.20or.20not.html#265099945">(Dec 16 2021 at 01:06)</a>:</h4>
<p>I tried to, but it still complained saying that I wasn't defining a Prop.</p>



<a name="265099965"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eliminator%20for%20set%20based%20on%20whether%20it%20is%20empty%20or%20not/near/265099965" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/eliminator.20for.20set.20based.20on.20whether.20it.20is.20empty.20or.20not.html#265099965">(Dec 16 2021 at 01:07)</a>:</h4>
<p>But the code with <code>{ conv := @conv a (set.nonempty.some ne) }</code> is wrong, that is saying that some particular p in the set is converging, not that there exists one that converges</p>



<a name="265100062"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eliminator%20for%20set%20based%20on%20whether%20it%20is%20empty%20or%20not/near/265100062" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bernd Losert <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/eliminator.20for.20set.20based.20on.20whether.20it.20is.20empty.20or.20not.html#265100062">(Dec 16 2021 at 01:08)</a>:</h4>
<p>Ah, you're right. After giving up on the existensial version, I was trying this approach and I didn't realize it was not the same.</p>



<a name="265100221"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eliminator%20for%20set%20based%20on%20whether%20it%20is%20empty%20or%20not/near/265100221" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bernd Losert <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/eliminator.20for.20set.20based.20on.20whether.20it.20is.20empty.20or.20not.html#265100221">(Dec 16 2021 at 01:10)</a>:</h4>
<p>Again, thanks for clarifying. Thank goodness for zulip and the helpful people here. Without them, I would have given up formalizing this stuff.</p>



<a name="265124115"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eliminator%20for%20set%20based%20on%20whether%20it%20is%20empty%20or%20not/near/265124115" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/eliminator.20for.20set.20based.20on.20whether.20it.20is.20empty.20or.20not.html#265124115">(Dec 16 2021 at 08:26)</a>:</h4>
<p>Without the Zulip most of us would have given up. Without Mario I would never have made it through my first year example sheets, let alone schemes</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>