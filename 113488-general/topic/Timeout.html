---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/Timeout.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Timeout.html">Timeout</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="249444127"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Timeout/near/249444127" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Timeout.html#249444127">(Aug 14 2021 at 06:17)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib/issues/8644">#8644</a> just got a random timeout in <code>category_theory.grothendieck</code>. Don't know what you can do with that, but I thought I should tell you.</p>



<a name="256363949"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Timeout/near/256363949" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Timeout.html#256363949">(Oct 06 2021 at 06:32)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib/pull/9524/checks?check_run_id=3808477953">Random timeout in <code>linear_algebra.quadratic_form</code></a> if people want to speed it up.</p>



<a name="256364040"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Timeout/near/256364040" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Timeout.html#256364040">(Oct 06 2021 at 06:33)</a>:</h4>
<p>Is this not fixed by yesterdays<br>
<span class="user-mention silent" data-user-id="112165">rss-bot</span> <a href="#narrow/stream/116290-rss/topic/Recent.20Commits.20to.20mathlib.3Amaster/near/256296996">said</a>:</p>
<blockquote>
<p><strong><a href="https://github.com/leanprover-community/mathlib/commit/7455f47c7037681073655ff0716f7ce09b766c2a">chore(linear_algebra/quadratic_form): speed up quadratic_form.lin_mul…</a></strong><br>
chore(linear_algebra/quadratic_form): speed up quadratic_form.lin_mul_lin (<a href="https://github.com/leanprover-community/mathlib/issues/9567">#9567</a>)</p>
<p>In my single profiler run, this reduced elaboration time from 20s to 1.5s.<br>
<a href="https://github.com/leanprover-community/mathlib/commit/7455f47c7037681073655ff0716f7ce09b766c2a">https://github.com/leanprover-community/mathlib/commit/7455f47c7037681073655ff0716f7ce09b766c2a</a></p>
</blockquote>



<a name="256364204"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Timeout/near/256364204" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Timeout.html#256364204">(Oct 06 2021 at 06:35)</a>:</h4>
<p>I think we just need a bunch of people to merge master.</p>



<a name="256365156"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Timeout/near/256365156" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Timeout.html#256365156">(Oct 06 2021 at 06:47)</a>:</h4>
<p>Oh! Thank you for the pointer, will merge.</p>



<a name="272777967"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Timeout/near/272777967" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Timeout.html#272777967">(Feb 22 2022 at 09:26)</a>:</h4>
<p><span class="user-mention" data-user-id="240862">@Oliver Nash</span> I just hit <a href="https://github.com/leanprover-community/mathlib/runs/5281918834?check_suite_focus=true">a timeout</a> in <code>algebra.lie.engel</code>.</p>



<a name="272778032"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Timeout/near/272778032" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Timeout.html#272778032">(Feb 22 2022 at 09:26)</a>:</h4>
<p>I'll take a look now.</p>



<a name="272778072"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Timeout/near/272778072" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Timeout.html#272778072">(Feb 22 2022 at 09:27)</a>:</h4>
<p>Thanks!</p>



<a name="272778433"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Timeout/near/272778433" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Timeout.html#272778433">(Feb 22 2022 at 09:30)</a>:</h4>
<p>It's <a href="https://github.com/leanprover-community/mathlib/tree/sup_bot_hom">branch#sup_bot_hom</a>, right?</p>



<a name="272778683"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Timeout/near/272778683" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Timeout.html#272778683">(Feb 22 2022 at 09:33)</a>:</h4>
<p>I cannot reproduce this locally with my timeout set to 100000.</p>



<a name="272778848"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Timeout/near/272778848" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Timeout.html#272778848">(Feb 22 2022 at 09:34)</a>:</h4>
<p>I've literally just checked out <a href="https://github.com/leanprover-community/mathlib/tree/sup_bot_hom">branch#sup_bot_hom</a>, grabbed a cache, and tried in VS Code and also <code>lean --make src/algebra/lie/engel.lean</code> at the command line and they both work fine.</p>



<a name="272778897"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Timeout/near/272778897" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Timeout.html#272778897">(Feb 22 2022 at 09:35)</a>:</h4>
<p>I'll look for a way to speed up that proof anyway but I'd like to understand why I cannot reproduce this.</p>



<a name="272779730"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Timeout/near/272779730" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Timeout.html#272779730">(Feb 22 2022 at 09:42)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib/pull/12193">#12193</a> is also hitting a timeout that seems unrelated in <code>geometry/euclidean/oriented_angle.lean:638</code></p>



<a name="272779785"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Timeout/near/272779785" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Timeout.html#272779785">(Feb 22 2022 at 09:43)</a>:</h4>
<p>The code suggests at a first glance it is related to Yaël's timeout:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">@[simp]</span> <span class="kd">lemma</span> <span class="n">oangle_conj_lie</span> <span class="o">(</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">V</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">hb.oangle</span> <span class="o">(</span><span class="n">hb.conj_lie</span> <span class="n">x</span><span class="o">)</span> <span class="o">(</span><span class="n">hb.conj_lie</span> <span class="n">y</span><span class="o">)</span> <span class="bp">=</span> <span class="bp">-</span><span class="n">hb.oangle</span> <span class="n">x</span> <span class="n">y</span> <span class="o">:=</span>
<span class="kd">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">conj_lie</span><span class="o">,</span> <span class="n">oangle</span><span class="o">,</span> <span class="bp">←</span><span class="o">(</span><span class="n">star_ring_end</span> <span class="n">ℂ</span><span class="o">)</span><span class="bp">.</span><span class="n">map_div</span><span class="o">]</span>
</code></pre></div>



<a name="272779935"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Timeout/near/272779935" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Timeout.html#272779935">(Feb 22 2022 at 09:44)</a>:</h4>
<p>Ha, I think the <code>lie</code> there is short for "Linear Isometric Equivalence" and nothing to do with the famous Norwegian!</p>



<a name="272781350"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Timeout/near/272781350" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Timeout.html#272781350">(Feb 22 2022 at 09:59)</a>:</h4>
<p>This makes some improvement anyway: <a href="https://github.com/leanprover-community/mathlib/pull/12205">#12205</a></p>



<a name="272783175"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Timeout/near/272783175" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Timeout.html#272783175">(Feb 22 2022 at 10:16)</a>:</h4>
<p>I couldn't reproduce it locally either <span aria-label="sad" class="emoji emoji-2639" role="img" title="sad">:sad:</span></p>



<a name="272783216"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Timeout/near/272783216" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Timeout.html#272783216">(Feb 22 2022 at 10:16)</a>:</h4>
<p>The timeout in <code>oriented_angle</code> has been fixed yesterday by Rob.</p>



<a name="278432065"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Timeout/near/278432065" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Timeout.html#278432065">(Apr 09 2022 at 21:33)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib/pull/13242">#13242</a> is hitting <a href="https://github.com/leanprover-community/mathlib/runs/5957239530?check_suite_focus=true">a (definitely unrelated) timeou</a>t in <code>category_theory.fin_category</code>. Anyone to issue a speedup?</p>



<a name="278432601"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Timeout/near/278432601" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Timeout.html#278432601">(Apr 09 2022 at 21:46)</a>:</h4>
<p>Update: <a href="https://github.com/leanprover-community/mathlib/pull/13194">#13194</a> and <a href="https://github.com/leanprover-community/mathlib/pull/13197">#13197</a> too <span aria-label="scream" class="emoji emoji-1f631" role="img" title="scream">:scream:</span></p>



<a name="278433646"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Timeout/near/278433646" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Timeout.html#278433646">(Apr 09 2022 at 22:11)</a>:</h4>
<p><span class="user-mention" data-user-id="439483">@Andrew Yang</span>, you're the one to gitblame.</p>



<a name="278433697"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Timeout/near/278433697" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Moritz Doll <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Timeout.html#278433697">(Apr 09 2022 at 22:12)</a>:</h4>
<p>Bors seems to have to different issues: the <code>category_theory.fin_category</code> and name collisions in <code>topology/algebra/group</code> for <code>filter.inv_mem_inv</code> and <code>set.inv_mem_inv</code>.</p>



<a name="278433728"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Timeout/near/278433728" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Timeout.html#278433728">(Apr 09 2022 at 22:13)</a>:</h4>
<p>Argh, those latter ones are mine. I did fix everything as it came but it's an uphill battle.</p>



<a name="278433785"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Timeout/near/278433785" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Timeout.html#278433785">(Apr 09 2022 at 22:14)</a>:</h4>
<p>Can a <span class="user-group-mention" data-user-group-id="2494">@maintainers</span> pull <a href="https://github.com/leanprover-community/mathlib/pull/13170">#13170</a> off the queue then?</p>



<a name="278433794"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Timeout/near/278433794" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Timeout.html#278433794">(Apr 09 2022 at 22:14)</a>:</h4>
<p>I will merge master tomorrow when <a href="https://app.bors.tech/repositories/24316">#bors</a> is less busy</p>



<a name="278434264"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Timeout/near/278434264" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Timeout.html#278434264">(Apr 09 2022 at 22:27)</a>:</h4>
<p>Does <code>bors cancel</code> work? Or is it reserved for maintainers?</p>



<a name="278458946"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Timeout/near/278458946" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Timeout.html#278458946">(Apr 10 2022 at 09:49)</a>:</h4>
<p><a href="https://leanprover-community.github.io/mathlib_docs/find/category_theory.fin_category.obj_as_type_equiv_as_type">docs#category_theory.fin_category.obj_as_type_equiv_as_type</a> takes 41s to compile locally. I'm taking a stab at making it faster.</p>



<a name="278460591"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Timeout/near/278460591" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Timeout.html#278460591">(Apr 10 2022 at 10:30)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib/pull/13298">#13298</a></p>



<a name="278474854"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Timeout/near/278474854" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Moritz Doll <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Timeout.html#278474854">(Apr 10 2022 at 15:49)</a>:</h4>
<p>Bors still has some timeout issues and again category theory is to blame, but this time it is <a href="https://leanprover-community.github.io/mathlib_docs/find/category_theory.groupoid_of_elements">docs#category_theory.groupoid_of_elements</a> and it seems that <a href="https://github.com/leanprover-community/mathlib/pull/13125">#13125</a> is failing repeatedly</p>



<a name="278484476"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Timeout/near/278484476" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Timeout.html#278484476">(Apr 10 2022 at 19:08)</a>:</h4>
<p>Looks like batches are now also timing out on <a href="https://leanprover-community.github.io/mathlib_docs/find/measure_theory.measure.finite_spanning_sets_in.prod">docs#measure_theory.measure.finite_spanning_sets_in.prod</a> : <a href="https://github.com/leanprover-community/mathlib/runs/5962695533?check_suite_focus=true">https://github.com/leanprover-community/mathlib/runs/5962695533?check_suite_focus=true</a> <a href="https://github.com/leanprover-community/mathlib/runs/5963011819?check_suite_focus=true">https://github.com/leanprover-community/mathlib/runs/5963011819?check_suite_focus=true</a></p>



<a name="278484520"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Timeout/near/278484520" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Timeout.html#278484520">(Apr 10 2022 at 19:09)</a>:</h4>
<p>Is my speedup timing out on those? <span aria-label="confused" class="emoji emoji-1f615" role="img" title="confused">:confused:</span></p>



<a name="278484581"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Timeout/near/278484581" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Timeout.html#278484581">(Apr 10 2022 at 19:10)</a>:</h4>
<p>It seems so, unfortunately.</p>



<a name="278484606"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Timeout/near/278484606" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Timeout.html#278484606">(Apr 10 2022 at 19:11)</a>:</h4>
<p>Do you want me to fix them in <a href="https://github.com/leanprover-community/mathlib/pull/13298">#13298</a> then?</p>



<a name="278484865"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Timeout/near/278484865" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Timeout.html#278484865">(Apr 10 2022 at 19:16)</a>:</h4>
<p>Having separate PRs for each fix would be cleaner, but I won't insist. (I have to go AFK for a bit, so if fix(es) appear, hopefully another maintainer can put them on the top of the queue with <code>bors r+ p=1000</code> .)</p>



<a name="278484897"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Timeout/near/278484897" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Timeout.html#278484897">(Apr 10 2022 at 19:17)</a>:</h4>
<p>Yes, but doesn't that risk bors not batching them together?</p>



<a name="278494218"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Timeout/near/278494218" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Timeout.html#278494218">(Apr 10 2022 at 22:59)</a>:</h4>
<p>This is really puzzling. <code>finite_spanning_sets_in (μ.prod ν)</code> alone takes 10-20s to compile. No matter how many type coercions or explicit instances I put in, it still takes as long.</p>



<a name="278494495"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Timeout/near/278494495" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Timeout.html#278494495">(Apr 10 2022 at 23:04)</a>:</h4>
<p>What about adding explicit universes?</p>



<a name="278494510"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Timeout/near/278494510" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Timeout.html#278494510">(Apr 10 2022 at 23:05)</a>:</h4>
<p>Oh I didn't try! I'm onto fixing <a href="https://leanprover-community.github.io/mathlib_docs/find/category_theory.groupoid_of_elements">docs#category_theory.groupoid_of_elements</a> now</p>



<a name="278494636"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Timeout/near/278494636" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Timeout.html#278494636">(Apr 10 2022 at 23:08)</a>:</h4>
<p>Oh miracle! <a href="https://github.com/leanprover-community/mathlib/pull/13298">#13298</a> did go through in the end</p>



<a name="278494746"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Timeout/near/278494746" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Timeout.html#278494746">(Apr 10 2022 at 23:11)</a>:</h4>
<p><span class="user-mention silent" data-user-id="387244">Yaël Dillies</span> <a href="#narrow/stream/113488-general/topic/Timeout/near/278494218">said</a>:</p>
<blockquote>
<p>This is really puzzling. <code>finite_spanning_sets_in (μ.prod ν)</code> alone takes 10-20s to compile. No matter how many type coercions or explicit instances I put in, it still takes as long.</p>
</blockquote>
<p>Is this the definition of <code>finite_spanning_sets_in.prod</code> that you're looking at? I'm curious: what does putting <code>noncomputable!</code> out front do to compilation time? (It seems to be significantly faster on my computer, but I'm not completely sure...)</p>



<a name="278494944"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Timeout/near/278494944" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Timeout.html#278494944">(Apr 10 2022 at 23:16)</a>:</h4>
<p>Oh wow you are right on spot, Kyle. Went down from 20s to milliseconds using <code>noncomputable!</code>.</p>



<a name="278494957"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Timeout/near/278494957" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Timeout.html#278494957">(Apr 10 2022 at 23:17)</a>:</h4>
<p>Does <code>noncomputable!</code> apply hereditarily or do we need to mark <code>noncomputable</code> stuff that uses <code>noncomputable!</code> stuff?</p>



<a name="278495016"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Timeout/near/278495016" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Timeout.html#278495016">(Apr 10 2022 at 23:18)</a>:</h4>
<p>Over those 20s, the compiler's spending a whole lot of time calculating that it basically doesn't need to calculate anything. (The structure it constructs has no computationally relevant fields.)</p>



<a name="278495029"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Timeout/near/278495029" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Timeout.html#278495029">(Apr 10 2022 at 23:19)</a>:</h4>
<p>Since this module is using <code>noncomputable theory</code>, what will happen is that every definition in this file that uses this one will be <code>noncomputable</code> automatically (as necessary).</p>



<a name="278495146"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Timeout/near/278495146" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Timeout.html#278495146">(Apr 10 2022 at 23:22)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib/pull/13325">#13325</a></p>



<a name="278495164"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Timeout/near/278495164" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Timeout.html#278495164">(Apr 10 2022 at 23:23)</a>:</h4>
<p>By the way, this is what the compiler compiles it down to:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="o">[</span><span class="n">compiler.optimize_bytecode</span><span class="o">]</span>  <span class="n">measure_theory.measure.finite_spanning_sets_in.prod</span> <span class="mi">10</span>
<span class="mi">0</span><span class="o">:</span> <span class="n">scnstr</span> <span class="bp">#</span><span class="mi">0</span>
<span class="mi">1</span><span class="o">:</span> <span class="n">ret</span>
</code></pre></div>
<p>That means "create a value using constructor number 0 (with no arguments) and return it."</p>



<a name="278495214"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Timeout/near/278495214" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Timeout.html#278495214">(Apr 10 2022 at 23:24)</a>:</h4>
<p>Heading off for today. I will leave <a href="https://leanprover-community.github.io/mathlib_docs/find/category_theory.groupoid_of_elements">docs#category_theory.groupoid_of_elements</a> now for someone else to fix.</p>



<a name="278495217"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Timeout/near/278495217" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Timeout.html#278495217">(Apr 10 2022 at 23:24)</a>:</h4>
<p>Thanks so much Yael!</p>



<a name="278495238"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Timeout/near/278495238" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Timeout.html#278495238">(Apr 10 2022 at 23:25)</a>:</h4>
<p>Seeing bors failing hurts!</p>



<a name="278495291"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Timeout/near/278495291" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Timeout.html#278495291">(Apr 10 2022 at 23:26)</a>:</h4>
<p>I need to add <code>noncomputable!</code> to my list of things to try when something takes an absurdly long amount of time</p>



<a name="278626028"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Timeout/near/278626028" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Timeout.html#278626028">(Apr 11 2022 at 22:35)</a>:</h4>
<p><span class="user-group-mention" data-user-group-id="2494">@maintainers</span>  (sorry, I have been pinging you a lot this week end <span aria-label="grinning" class="emoji emoji-1f600" role="img" title="grinning">:grinning:</span>), could <a href="https://github.com/leanprover-community/mathlib/pull/13372">#13372</a> be merged quickly?</p>



<a name="278663277"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Timeout/near/278663277" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Timeout.html#278663277">(Apr 12 2022 at 08:40)</a>:</h4>
<p>Could someone put <a href="https://github.com/leanprover-community/mathlib/pull/13170">#13170</a> back on the queue now that it's quieter?</p>



<a name="278664584"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Timeout/near/278664584" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Timeout.html#278664584">(Apr 12 2022 at 08:53)</a>:</h4>
<p>done</p>



<a name="278675025"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Timeout/near/278675025" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Timeout.html#278675025">(Apr 12 2022 at 10:42)</a>:</h4>
<p>Yet <a href="https://github.com/leanprover-community/mathlib/runs/5986616611?check_suite_focus=true">another timeout in <code>category_theory.preadditive.biproducts</code></a> <span aria-label="rolling eyes" class="emoji emoji-1f644" role="img" title="rolling eyes">:rolling_eyes:</span></p>



<a name="278675036"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Timeout/near/278675036" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Timeout.html#278675036">(Apr 12 2022 at 10:42)</a>:</h4>
<p>Is this how mathlib is gonna die? crippled by category theory timeouts?</p>



<a name="278675343"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Timeout/near/278675343" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Timeout.html#278675343">(Apr 12 2022 at 10:47)</a>:</h4>
<p>Ouch...</p>



<a name="278675472"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Timeout/near/278675472" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mauricio Collares <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Timeout.html#278675472">(Apr 12 2022 at 10:48)</a>:</h4>
<p>Assuming timeouts are deterministic, it would be great to have a table of how many heartbeats each def/lemma takes at the moment so people can work on optimizing them before disaster strikes.</p>



<a name="278675524"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Timeout/near/278675524" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Timeout.html#278675524">(Apr 12 2022 at 10:49)</a>:</h4>
<p>"Deterministic" timeouts are unfortunately rarely deterministic...</p>



<a name="278675630"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Timeout/near/278675630" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Timeout.html#278675630">(Apr 12 2022 at 10:51)</a>:</h4>
<p><a href="https://leanprover-community.github.io/mathlib_docs/find/category_theory.biprod.column_nonzero_of_iso">docs#category_theory.biprod.column_nonzero_of_iso</a> indeed takes a whopping 76s to elaborate.</p>



<a name="278676118"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Timeout/near/278676118" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Timeout.html#278676118">(Apr 12 2022 at 10:56)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib/pull/13383">#13383</a>. Once again it's a decidability issue.</p>



<a name="278676282"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Timeout/near/278676282" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Timeout.html#278676282">(Apr 12 2022 at 10:58)</a>:</h4>
<p>We're also exceeding the API rate <span aria-label="sad" class="emoji emoji-2639" role="img" title="sad">:sad:</span></p>



<a name="278676902"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Timeout/near/278676902" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Timeout.html#278676902">(Apr 12 2022 at 11:04)</a>:</h4>
<p><code>by_contradiction</code> is a huge gotcha. I often just stick <code>classical</code> in front of it before using it.</p>



<a name="278676939"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Timeout/near/278676939" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Timeout.html#278676939">(Apr 12 2022 at 11:05)</a>:</h4>
<p><code>by_contra'</code> avoids the decidability check entirely, right?</p>



<a name="278677278"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Timeout/near/278677278" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Timeout.html#278677278">(Apr 12 2022 at 11:08)</a>:</h4>
<p>If the proof now takes 2 seconds instead of 76 then it must be doing _something_ differently but I don't know what.</p>



<a name="280817029"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Timeout/near/280817029" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Timeout.html#280817029">(May 01 2022 at 22:16)</a>:</h4>
<p>I'm hitting <a href="https://github.com/leanprover-community/mathlib/runs/6249399845?check_suite_focus=true">a timeout</a> with <a href="https://leanprover-community.github.io/mathlib_docs/find/AffineScheme.Spec">docs#AffineScheme.Spec</a> (38.5s of decl post-processing) and I don't know how to fix it. Could anyone take a look? Is decl post-processing the attribute applications? <code>Spec</code> is tagged with <code>@[derive [full, faithful, ess_surj], simps]</code>.</p>



<a name="280817036"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Timeout/near/280817036" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Timeout.html#280817036">(May 01 2022 at 22:16)</a>:</h4>
<p>cc <span class="user-mention" data-user-id="439483">@Andrew Yang</span></p>



<a name="280817119"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Timeout/near/280817119" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Timeout.html#280817119">(May 01 2022 at 22:18)</a>:</h4>
<p>Okay it's clearly <code>simps</code> going mad.</p>



<a name="280817446"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Timeout/near/280817446" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Timeout.html#280817446">(May 01 2022 at 22:27)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib/pull/13866">#13866</a></p>



<a name="280862617"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Timeout/near/280862617" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Timeout.html#280862617">(May 02 2022 at 11:42)</a>:</h4>
<p>Note that <code>@[simps]</code> calls <code>simp</code> on the right-hand side in the case that the right-hand side is not a construction application (to figure out what the definition should reduce to). In cases where <code>simp</code> is slow, this means that adding the <code>@[simps]</code> attribute is also slow.</p>



<a name="280863454"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Timeout/near/280863454" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Timeout.html#280863454">(May 02 2022 at 11:51)</a>:</h4>
<p>I'm wondering how much compile time goes into those slow declarations. If each of them takes 30s, it would add up quick...</p>



<a name="280864539"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Timeout/near/280864539" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Timeout.html#280864539">(May 02 2022 at 12:01)</a>:</h4>
<p>Yeah, that might be worth investigating. <code>@[simps]</code> should not be automatically added to all declarations that are not constructor applications, since I think that in many cases you won't use those simp lemmas much.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>