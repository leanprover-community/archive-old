---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/Control.20.60to_additive.60.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Control.20.60to_additive.60.html">Control `to_additive`</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="200783104"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Control%20%60to_additive%60/near/200783104" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Pedro Minicz <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Control.20.60to_additive.60.html#200783104">(Jun 13 2020 at 20:01)</a>:</h4>
<p>How can I tell <code>to_additive</code> to ignore some definitions?</p>



<a name="200783109"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Control%20%60to_additive%60/near/200783109" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Pedro Minicz <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Control.20.60to_additive.60.html#200783109">(Jun 13 2020 at 20:01)</a>:</h4>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="n">group_theory</span><span class="bp">.</span><span class="n">quotient_group</span>
<span class="kn">import</span> <span class="n">set_theory</span><span class="bp">.</span><span class="n">ordinal</span>

<span class="kn">open</span> <span class="n">quotient_group</span>

<span class="kn">namespace</span> <span class="n">cardinal</span>

<span class="kn">variables</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">group</span> <span class="n">α</span><span class="o">]</span> <span class="o">{</span><span class="n">s</span> <span class="o">:</span> <span class="n">set</span> <span class="n">α</span><span class="o">}</span> <span class="o">[</span><span class="n">is_subgroup</span> <span class="n">s</span><span class="o">]</span>

<span class="bp">@</span><span class="o">[</span><span class="n">to_additive</span><span class="o">]</span>
<span class="kn">lemma</span> <span class="n">mk_group_eq_mk_quotient_mul_mk_subgroup</span> <span class="o">:</span>
  <span class="n">mk</span> <span class="n">α</span> <span class="bp">=</span> <span class="n">mk</span> <span class="o">(</span><span class="n">quotient</span> <span class="n">s</span><span class="o">)</span> <span class="bp">*</span> <span class="n">mk</span> <span class="n">s</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">mul_def</span><span class="o">,</span> <span class="n">cardinal</span><span class="bp">.</span><span class="n">eq</span><span class="o">],</span>
  <span class="n">exact</span> <span class="bp">⟨</span><span class="n">is_subgroup</span><span class="bp">.</span><span class="n">group_equiv_quotient_times_subgroup</span> <span class="bp">_⟩</span>
<span class="kn">end</span>
</code></pre></div>



<a name="200783117"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Control%20%60to_additive%60/near/200783117" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Pedro Minicz <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Control.20.60to_additive.60.html#200783117">(Jun 13 2020 at 20:01)</a>:</h4>
<p>I am pretty sure that the problem in the example above is that <code>to_additive</code> changes <code>*</code> to <code>+</code>.</p>



<a name="200783161"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Control%20%60to_additive%60/near/200783161" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Pedro Minicz <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Control.20.60to_additive.60.html#200783161">(Jun 13 2020 at 20:02)</a>:</h4>
<p>The lemma is true for both <code>group</code> and <code>add_group</code>, but the cardinals should always be multiplied!</p>



<a name="200783180"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Control%20%60to_additive%60/near/200783180" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Control.20.60to_additive.60.html#200783180">(Jun 13 2020 at 20:03)</a>:</h4>
<p>See examples in <code>algebra.group_power</code></p>



<a name="200783191"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Control%20%60to_additive%60/near/200783191" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Control.20.60to_additive.60.html#200783191">(Jun 13 2020 at 20:03)</a>:</h4>
<p>I think you need to provide the additive proof by hand, but you can still add the attribute afterwards, so that it will be used by <code>to_additive</code>.</p>



<a name="200783242"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Control%20%60to_additive%60/near/200783242" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Control.20.60to_additive.60.html#200783242">(Jun 13 2020 at 20:04)</a>:</h4>
<p>state the lemma without <code>to_additive</code>, then state the additive version and prove it using the multiplicative version, then mark the multiplicative version as <code>attribute [to_additive add_name] mul_name</code></p>



<a name="200783327"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Control%20%60to_additive%60/near/200783327" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Pedro Minicz <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Control.20.60to_additive.60.html#200783327">(Jun 13 2020 at 20:06)</a>:</h4>
<p>Works perfectly! Thank you!</p>



<a name="200783946"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Control%20%60to_additive%60/near/200783946" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Control.20.60to_additive.60.html#200783946">(Jun 13 2020 at 20:23)</a>:</h4>
<p>This is sort of hinted at in <a href="https://leanprover-community.github.io/mathlib_docs/attributes.html#to_additive">the new tactic doc entry for <code>to_additive</code></a> in the sentence starting with "Even when..." but it might still be unclear. Suggestions for improvements are welcome!</p>



<a name="200784792"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Control%20%60to_additive%60/near/200784792" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Control.20.60to_additive.60.html#200784792">(Jun 13 2020 at 20:43)</a>:</h4>
<p>It makes no sense to manually add <code>to_additive</code> if <code>to_additive</code> fails to correctly transport the type of the lemma. It makes sense if it transfers type but not proof.</p>



<a name="200784852"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Control%20%60to_additive%60/near/200784852" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Control.20.60to_additive.60.html#200784852">(Jun 13 2020 at 20:44)</a>:</h4>
<p>It is rare but possible for it to work even if it doesn't transfer the type, because two translated theorems can cancel each other out</p>



<a name="200784855"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Control%20%60to_additive%60/near/200784855" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Control.20.60to_additive.60.html#200784855">(Jun 13 2020 at 20:44)</a>:</h4>
<p>Probably we should have an ignore list (nat, perm) but my meta programming skills are not good enough.</p>



<a name="200784924"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Control%20%60to_additive%60/near/200784924" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Control.20.60to_additive.60.html#200784924">(Jun 13 2020 at 20:46)</a>:</h4>
<p>actually, when it is a whole network of theorems it's not that unreasonable that the mystery type only appears in some defeq goal and not explicitly in the theorem</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>