---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/New.20limits.20are.20not.20computable.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/New.20limits.20are.20not.20computable.html">New limits are not computable</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="211165127"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/New%20limits%20are%20not%20computable/near/211165127" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Simon Hudon <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/New.20limits.20are.20not.20computable.html#211165127">(Sep 24 2020 at 17:39)</a>:</h4>
<p>The new limits in the category theory library are (intentionally I think) non-computable. Now, I'm working on a concrete category that has binary products I can't figure out how to prove:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">prod.mk_le</span>  <span class="o">{</span><span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="n">ωCPO.</span><span class="o">{</span><span class="n">u</span><span class="o">}}</span> <span class="o">(</span><span class="n">x</span> <span class="n">x'</span> <span class="o">:</span> <span class="n">X</span><span class="o">)</span> <span class="o">(</span><span class="n">y</span> <span class="n">y'</span> <span class="o">:</span> <span class="n">Y</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">prod.mk</span> <span class="n">x</span> <span class="n">y</span> <span class="bp">≤</span> <span class="n">prod.mk</span> <span class="n">x'</span> <span class="n">y'</span> <span class="bp">↔</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">x'</span> <span class="bp">∧</span> <span class="n">y</span> <span class="bp">≤</span> <span class="n">y'</span> <span class="o">:=</span>
</code></pre></div>

<p>with the definition</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">noncomputable</span> <span class="kd">def</span> <span class="n">prod.mk</span> <span class="o">{</span><span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="n">ωCPO.</span><span class="o">{</span><span class="n">u</span><span class="o">}}</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">X</span><span class="o">)</span> <span class="o">(</span><span class="n">y</span> <span class="o">:</span> <span class="n">Y</span><span class="o">)</span> <span class="o">:</span> <span class="bp">↥</span><span class="o">(</span><span class="n">X</span> <span class="bp">⨯</span> <span class="n">Y</span><span class="o">)</span> <span class="o">:=</span>
<span class="k">let</span> <span class="n">a</span> <span class="o">:</span> <span class="n">ωCPO.of</span> <span class="n">punit.</span><span class="o">{</span><span class="n">u</span><span class="bp">+</span><span class="mi">1</span><span class="o">}</span> <span class="bp">⟶</span> <span class="n">X</span> <span class="bp">⨯</span> <span class="n">Y</span> <span class="o">:=</span> <span class="n">limits.prod.lift</span> <span class="o">(</span><span class="n">continuous_hom.const</span> <span class="n">x</span><span class="o">)</span> <span class="o">(</span><span class="n">continuous_hom.const</span> <span class="n">y</span><span class="o">)</span> <span class="k">in</span>
<span class="n">a</span> <span class="n">punit.star</span>
</code></pre></div>

<p>The issue is that it's not clear what the actual type of a product value is.</p>



<a name="211166083"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/New%20limits%20are%20not%20computable/near/211166083" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/New.20limits.20are.20not.20computable.html#211166083">(Sep 24 2020 at 17:45)</a>:</h4>
<p>I was thinking about this too recently. Presumably one can use the fact that the forgetful functor to Type preserves limits, and the fact that the usual product of types satisfies the universal property of the categorical product. I havent had a chance to try it out though</p>



<a name="211166281"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/New%20limits%20are%20not%20computable/near/211166281" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bhavik Mehta <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/New.20limits.20are.20not.20computable.html#211166281">(Sep 24 2020 at 17:47)</a>:</h4>
<p>Could you provide a MWE? I can't seem to get the right imports to get your example to work</p>



<a name="211166832"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/New%20limits%20are%20not%20computable/near/211166832" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Simon Hudon <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/New.20limits.20are.20not.20computable.html#211166832">(Sep 24 2020 at 17:51)</a>:</h4>
<p>Yes, sorry about that. I'll make one up.</p>



<a name="211166941"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/New%20limits%20are%20not%20computable/near/211166941" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Simon Hudon <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/New.20limits.20are.20not.20computable.html#211166941">(Sep 24 2020 at 17:52)</a>:</h4>
<p><span class="user-mention" data-user-id="243562">@Adam Topaz</span> I think when you move the problem to the category of types, you still have the issue that binary products are not constructive there either</p>



<a name="211167313"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/New%20limits%20are%20not%20computable/near/211167313" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Simon Hudon <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/New.20limits.20are.20not.20computable.html#211167313">(Sep 24 2020 at 17:55)</a>:</h4>
<p><span class="user-mention" data-user-id="246273">@Bhavik Mehta</span> Is this better:</p>
<div class="codehilite" data-code-language="Clean"><pre><span></span><code><span class="k">import</span><span class="w"> </span><span class="nc">order.category.omega_complete_partial_order</span><span class="w"></span>

<span class="nc">universes</span><span class="w"> </span><span class="n">u</span><span class="w"></span>

<span class="n">namespace</span><span class="w"> </span><span class="n">category_theory</span><span class="w"></span>

<span class="n">open</span><span class="w"> </span><span class="n">omega_complete_partial_order</span><span class="w"> </span><span class="n">limits</span><span class="w"></span>

<span class="k">instance</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">has_binary_products</span><span class="w"> </span><span class="err">ω</span><span class="nc">CPO</span><span class="o">.</span><span class="p">{</span><span class="n">u</span><span class="p">}</span><span class="w"> </span><span class="o">:=</span><span class="w"></span>
<span class="p">{</span><span class="w"> </span><span class="n">has_limit</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="err">λ</span><span class="w"> </span><span class="nc">F</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="p">{</span><span class="w"> </span><span class="n">exists_limit</span><span class="w"> </span><span class="o">:=</span><span class="w"></span>
<span class="w">  </span><span class="err">⟨</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">cone</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nc">X</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="err">ω</span><span class="nc">CPO</span><span class="o">.</span><span class="k">of</span><span class="w"> </span><span class="p">(</span><span class="nc">F</span><span class="o">.</span><span class="n">obj</span><span class="w"> </span><span class="n">walking_pair</span><span class="o">.</span><span class="n">left</span><span class="w"> </span><span class="err">×</span><span class="w"> </span><span class="nc">F</span><span class="o">.</span><span class="n">obj</span><span class="w"> </span><span class="n">walking_pair</span><span class="o">.</span><span class="n">right</span><span class="p">),</span><span class="w"></span>
<span class="w">                </span><span class="err">π</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">app</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="err">λ</span><span class="w"> </span><span class="nc">X</span><span class="p">,</span><span class="w"> </span><span class="n">match</span><span class="w"> </span><span class="nc">X</span><span class="w"> </span><span class="k">with</span><span class="w"></span>
<span class="w">                                   </span><span class="o">|</span><span class="w"> </span><span class="n">walking_pair</span><span class="o">.</span><span class="n">left</span><span class="w">  </span><span class="o">:=</span><span class="w"> </span><span class="n">continuous_hom</span><span class="o">.</span><span class="n">of_mono</span><span class="w"> </span><span class="n">preorder_hom</span><span class="o">.</span><span class="n">prod</span><span class="o">.</span><span class="n">fst</span><span class="w"> </span><span class="p">(</span><span class="err">λ</span><span class="w"> </span><span class="n">c</span><span class="p">,</span><span class="w"> </span><span class="n">rfl</span><span class="p">)</span><span class="w"></span>
<span class="w">                                   </span><span class="o">|</span><span class="w"> </span><span class="n">walking_pair</span><span class="o">.</span><span class="n">right</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">continuous_hom</span><span class="o">.</span><span class="n">of_mono</span><span class="w"> </span><span class="n">preorder_hom</span><span class="o">.</span><span class="n">prod</span><span class="o">.</span><span class="n">snd</span><span class="w"> </span><span class="p">(</span><span class="err">λ</span><span class="w"> </span><span class="n">c</span><span class="p">,</span><span class="w"> </span><span class="n">rfl</span><span class="p">)</span><span class="w"></span>
<span class="w">                                   </span><span class="n">end</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">},</span><span class="w"></span>
<span class="w">    </span><span class="n">is_limit</span><span class="w"> </span><span class="o">:=</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"> </span><span class="n">lift</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="err">λ</span><span class="w"> </span><span class="n">s</span><span class="p">,</span><span class="w"> </span><span class="err">⟨λ</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="err">π</span><span class="o">.</span><span class="n">app</span><span class="w"> </span><span class="o">_</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">s</span><span class="o">.</span><span class="err">π</span><span class="o">.</span><span class="n">app</span><span class="w"> </span><span class="o">_</span><span class="w"> </span><span class="n">x</span><span class="p">),</span><span class="w"> </span><span class="err">λ</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="n">h</span><span class="p">,</span><span class="w"> </span><span class="err">⟨</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="err">π</span><span class="o">.</span><span class="n">app</span><span class="w"> </span><span class="n">walking_pair</span><span class="o">.</span><span class="n">left</span><span class="p">)</span><span class="o">.</span><span class="n">monotone</span><span class="w"> </span><span class="n">h</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="err">π</span><span class="o">.</span><span class="n">app</span><span class="w"> </span><span class="n">walking_pair</span><span class="o">.</span><span class="n">right</span><span class="p">)</span><span class="o">.</span><span class="n">monotone</span><span class="w"> </span><span class="n">h</span><span class="err">⟩</span><span class="p">,</span><span class="w"></span>
<span class="w">                    </span><span class="err">λ</span><span class="w"> </span><span class="n">c</span><span class="p">,</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">ext</span><span class="p">;</span><span class="w"> </span><span class="n">dsimp</span><span class="p">;</span><span class="w"> </span><span class="n">rw</span><span class="w"> </span><span class="n">continuous_hom</span><span class="o">.</span><span class="n">continuous</span><span class="p">;</span><span class="w"> </span><span class="n">refl</span><span class="err">⟩</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="n">fac</span><span class="err">'</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">rintros</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="err">⟨</span><span class="w"> </span><span class="err">⟩</span><span class="p">;</span><span class="w"> </span><span class="n">ext</span><span class="p">;</span><span class="w"> </span><span class="n">refl</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="n">uniq</span><span class="err">'</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">intros</span><span class="p">;</span><span class="w"> </span><span class="n">ext</span><span class="p">;</span><span class="w"> </span><span class="n">dsimp</span><span class="p">;</span><span class="w"> </span><span class="n">simp</span><span class="w"> </span><span class="p">[</span><span class="n">category_theory</span><span class="o">.</span><span class="n">limits</span><span class="o">.</span><span class="n">has_binary_products</span><span class="o">.</span><span class="n">_match_1</span><span class="p">,</span><span class="w"> </span><span class="err">←</span><span class="w"> </span><span class="n">w</span><span class="p">];</span><span class="w"> </span><span class="n">refl</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="err">⟩</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">}</span><span class="w"></span>

<span class="n">noncomputable</span><span class="w"> </span><span class="n">def</span><span class="w"> </span><span class="n">prod</span><span class="o">.</span><span class="n">mk</span><span class="w"> </span><span class="p">{</span><span class="nc">X</span><span class="w"> </span><span class="nc">Y</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="err">ω</span><span class="nc">CPO</span><span class="o">.</span><span class="p">{</span><span class="n">u</span><span class="p">}}</span><span class="w"> </span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="nc">X</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="n">y</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="nc">Y</span><span class="p">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="err">↥</span><span class="p">(</span><span class="nc">X</span><span class="w"> </span><span class="err">⨯</span><span class="w"> </span><span class="nc">Y</span><span class="p">)</span><span class="w"> </span><span class="o">:=</span><span class="w"></span>
<span class="k">let</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="err">ω</span><span class="nc">CPO</span><span class="o">.</span><span class="k">of</span><span class="w"> </span><span class="n">punit</span><span class="o">.</span><span class="p">{</span><span class="n">u</span><span class="mi">+1</span><span class="p">}</span><span class="w"> </span><span class="err">⟶</span><span class="w"> </span><span class="nc">X</span><span class="w"> </span><span class="err">⨯</span><span class="w"> </span><span class="nc">Y</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">limits</span><span class="o">.</span><span class="n">prod</span><span class="o">.</span><span class="n">lift</span><span class="w"> </span><span class="p">(</span><span class="n">continuous_hom</span><span class="o">.</span><span class="n">const</span><span class="w"> </span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="n">continuous_hom</span><span class="o">.</span><span class="n">const</span><span class="w"> </span><span class="n">y</span><span class="p">)</span><span class="w"> </span><span class="k">in</span><span class="w"></span>
<span class="n">a</span><span class="w"> </span><span class="n">punit</span><span class="o">.</span><span class="n">star</span><span class="w"></span>

<span class="n">lemma</span><span class="w"> </span><span class="n">prod</span><span class="o">.</span><span class="n">mk_le</span><span class="w">  </span><span class="p">{</span><span class="nc">X</span><span class="w"> </span><span class="nc">Y</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="err">ω</span><span class="nc">CPO</span><span class="o">.</span><span class="p">{</span><span class="n">u</span><span class="p">}}</span><span class="w"> </span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="n">x</span><span class="err">'</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="nc">X</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="n">y</span><span class="w"> </span><span class="n">y</span><span class="err">'</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="nc">Y</span><span class="p">)</span><span class="w"> </span><span class="o">:</span><span class="w"></span>
<span class="w">  </span><span class="n">prod</span><span class="o">.</span><span class="n">mk</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="err">≤</span><span class="w"> </span><span class="n">prod</span><span class="o">.</span><span class="n">mk</span><span class="w"> </span><span class="n">x</span><span class="err">'</span><span class="w"> </span><span class="n">y</span><span class="err">'</span><span class="w"> </span><span class="err">↔</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="err">≤</span><span class="w"> </span><span class="n">x</span><span class="err">'</span><span class="w"> </span><span class="err">∧</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="err">≤</span><span class="w"> </span><span class="n">y</span><span class="err">'</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="o">_</span><span class="w"></span>

<span class="n">end</span><span class="w"> </span><span class="n">category_theory</span><span class="w"></span>
</code></pre></div>



<a name="211167496"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/New%20limits%20are%20not%20computable/near/211167496" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bhavik Mehta <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/New.20limits.20are.20not.20computable.html#211167496">(Sep 24 2020 at 17:56)</a>:</h4>
<p>I think you're missing an import - maybe <code>import category_theory.limits.shapes.binary_products</code> at the top - but with that it works, thanks!</p>



<a name="211167624"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/New%20limits%20are%20not%20computable/near/211167624" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Simon Hudon <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/New.20limits.20are.20not.20computable.html#211167624">(Sep 24 2020 at 17:57)</a>:</h4>
<p>Ah! Sorry about that, my copy of mathlib isn't clean</p>



<a name="211167675"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/New%20limits%20are%20not%20computable/near/211167675" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bhavik Mehta <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/New.20limits.20are.20not.20computable.html#211167675">(Sep 24 2020 at 17:57)</a>:</h4>
<p>No worries!</p>



<a name="211171931"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/New%20limits%20are%20not%20computable/near/211171931" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Simon Hudon <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/New.20limits.20are.20not.20computable.html#211171931">(Sep 24 2020 at 18:33)</a>:</h4>
<p>Any luck?</p>



<a name="211172012"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/New%20limits%20are%20not%20computable/near/211172012" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Markus Himmel <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/New.20limits.20are.20not.20computable.html#211172012">(Sep 24 2020 at 18:34)</a>:</h4>
<p>The following might get you on the right track. I'm sorry about how messy it is.</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">order.category.omega_complete_partial_order</span>
<span class="kn">import</span> <span class="n">category_theory.limits.shapes.binary_products</span>

<span class="kd">universes</span> <span class="n">u</span>

<span class="kn">namespace</span> <span class="n">category_theory</span>

<span class="kn">open</span> <span class="n">omega_complete_partial_order</span> <span class="n">limits</span>

<span class="kd">def</span> <span class="n">product_cone</span> <span class="o">(</span><span class="n">F</span> <span class="o">:</span> <span class="n">discrete</span> <span class="n">walking_pair</span> <span class="bp">⥤</span> <span class="n">ωCPO.</span><span class="o">{</span><span class="n">u</span><span class="o">})</span> <span class="o">:</span> <span class="n">cone</span> <span class="n">F</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">X</span> <span class="o">:=</span> <span class="n">ωCPO.of</span> <span class="o">(</span><span class="n">F.obj</span> <span class="n">walking_pair.left</span> <span class="bp">×</span> <span class="n">F.obj</span> <span class="n">walking_pair.right</span><span class="o">),</span>
                <span class="n">π</span> <span class="o">:=</span> <span class="o">{</span> <span class="n">app</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">X</span><span class="o">,</span> <span class="k">match</span> <span class="n">X</span> <span class="k">with</span>
                                   <span class="bp">|</span> <span class="n">walking_pair.left</span>  <span class="o">:=</span> <span class="n">continuous_hom.of_mono</span> <span class="n">preorder_hom.prod.fst</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">c</span><span class="o">,</span> <span class="n">rfl</span><span class="o">)</span>
                                   <span class="bp">|</span> <span class="n">walking_pair.right</span> <span class="o">:=</span> <span class="n">continuous_hom.of_mono</span> <span class="n">preorder_hom.prod.snd</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">c</span><span class="o">,</span> <span class="n">rfl</span><span class="o">)</span>
                                   <span class="kd">end</span> <span class="o">}</span> <span class="o">}</span>

<span class="kd">def</span> <span class="n">product_cone_is_limit</span> <span class="o">(</span><span class="n">F</span> <span class="o">:</span> <span class="n">discrete</span> <span class="n">walking_pair</span> <span class="bp">⥤</span> <span class="n">ωCPO.</span><span class="o">{</span><span class="n">u</span><span class="o">})</span> <span class="o">:</span> <span class="n">is_limit</span> <span class="o">(</span><span class="n">product_cone</span> <span class="n">F</span><span class="o">)</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">lift</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">s</span><span class="o">,</span> <span class="o">⟨</span><span class="bp">λ</span> <span class="n">x</span><span class="o">,</span> <span class="o">(</span><span class="n">s.π.app</span> <span class="n">_</span> <span class="n">x</span><span class="o">,</span> <span class="n">s.π.app</span> <span class="n">_</span> <span class="n">x</span><span class="o">),</span> <span class="bp">λ</span> <span class="n">x</span> <span class="n">y</span> <span class="n">h</span><span class="o">,</span> <span class="o">⟨(</span><span class="n">s.π.app</span> <span class="n">walking_pair.left</span><span class="o">)</span><span class="bp">.</span><span class="n">monotone</span> <span class="n">h</span><span class="o">,</span> <span class="o">(</span><span class="n">s.π.app</span> <span class="n">walking_pair.right</span><span class="o">)</span><span class="bp">.</span><span class="n">monotone</span> <span class="n">h</span><span class="o">⟩,</span>
                    <span class="bp">λ</span> <span class="n">c</span><span class="o">,</span> <span class="kd">by</span> <span class="n">ext</span><span class="bp">;</span> <span class="n">dsimp</span><span class="bp">;</span> <span class="n">rw</span> <span class="n">continuous_hom.continuous</span><span class="bp">;</span> <span class="n">refl</span><span class="o">⟩,</span>
      <span class="n">fac'</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">rintros</span> <span class="n">s</span> <span class="o">⟨</span> <span class="o">⟩</span><span class="bp">;</span> <span class="n">ext</span><span class="bp">;</span> <span class="n">refl</span><span class="o">,</span>
      <span class="n">uniq'</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">intros</span><span class="bp">;</span> <span class="n">ext</span><span class="bp">;</span> <span class="n">dsimp</span><span class="bp">;</span> <span class="n">simp</span> <span class="o">[</span><span class="n">product_cone._match_1</span><span class="o">,</span> <span class="bp">←</span> <span class="n">w</span><span class="o">]</span><span class="bp">;</span> <span class="n">refl</span> <span class="o">}</span>

<span class="kd">instance</span> <span class="o">:</span> <span class="n">has_binary_products</span> <span class="n">ωCPO.</span><span class="o">{</span><span class="n">u</span><span class="o">}</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">has_limit</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">F</span><span class="o">,</span> <span class="n">has_limit.mk</span> <span class="o">⟨</span><span class="n">_</span><span class="o">,</span> <span class="n">product_cone_is_limit</span> <span class="n">F</span><span class="o">⟩</span> <span class="o">}</span>

<span class="kd">noncomputable</span> <span class="kd">def</span> <span class="n">prod_lift</span> <span class="o">{</span><span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="n">ωCPO.</span><span class="o">{</span><span class="n">u</span><span class="o">}}</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">X</span><span class="o">)</span> <span class="o">(</span><span class="n">y</span> <span class="o">:</span> <span class="n">Y</span><span class="o">)</span> <span class="o">:</span> <span class="n">ωCPO.of</span> <span class="n">punit.</span><span class="o">{</span><span class="n">u</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">}</span> <span class="bp">⟶</span> <span class="n">X</span> <span class="bp">⨯</span> <span class="n">Y</span> <span class="o">:=</span>
<span class="n">limits.prod.lift</span> <span class="o">(</span><span class="n">continuous_hom.const</span> <span class="n">x</span><span class="o">)</span> <span class="o">(</span><span class="n">continuous_hom.const</span> <span class="n">y</span><span class="o">)</span>

<span class="kd">noncomputable</span> <span class="kd">def</span> <span class="n">prod.mk</span> <span class="o">{</span><span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="n">ωCPO.</span><span class="o">{</span><span class="n">u</span><span class="o">}}</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">X</span><span class="o">)</span> <span class="o">(</span><span class="n">y</span> <span class="o">:</span> <span class="n">Y</span><span class="o">)</span> <span class="o">:</span> <span class="bp">↥</span><span class="o">(</span><span class="n">X</span> <span class="bp">⨯</span> <span class="n">Y</span><span class="o">)</span> <span class="o">:=</span>
<span class="n">prod_lift</span> <span class="n">x</span> <span class="n">y</span> <span class="n">punit.star</span>

<span class="kd">lemma</span> <span class="n">prod.mk_le</span>  <span class="o">{</span><span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="n">ωCPO.</span><span class="o">{</span><span class="n">u</span><span class="o">}}</span> <span class="o">(</span><span class="n">x</span> <span class="n">x'</span> <span class="o">:</span> <span class="n">X</span><span class="o">)</span> <span class="o">(</span><span class="n">y</span> <span class="n">y'</span> <span class="o">:</span> <span class="n">Y</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">prod.mk</span> <span class="n">x</span> <span class="n">y</span> <span class="bp">≤</span> <span class="n">prod.mk</span> <span class="n">x'</span> <span class="n">y'</span> <span class="bp">↔</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">x'</span> <span class="bp">∧</span> <span class="n">y</span> <span class="bp">≤</span> <span class="n">y'</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="k">let</span> <span class="n">i</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">⨯</span> <span class="n">Y</span> <span class="bp">≅</span> <span class="n">ωCPO.of</span> <span class="o">(</span><span class="n">X</span> <span class="bp">×</span> <span class="n">Y</span><span class="o">)</span> <span class="o">:=</span>
    <span class="n">limits.is_limit.cone_point_unique_up_to_iso</span> <span class="o">(</span><span class="n">limit.is_limit</span> <span class="n">_</span><span class="o">)</span> <span class="o">(</span><span class="n">product_cone_is_limit</span> <span class="o">(</span><span class="n">pair</span> <span class="n">X</span> <span class="n">Y</span><span class="o">)),</span>
  <span class="n">split</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">intro</span> <span class="n">h</span><span class="o">,</span>
    <span class="k">have</span> <span class="o">:</span> <span class="n">i.hom</span> <span class="o">(</span><span class="n">prod.mk</span> <span class="n">x</span> <span class="n">y</span><span class="o">)</span> <span class="bp">≤</span> <span class="n">i.hom</span> <span class="o">(</span><span class="n">prod.mk</span> <span class="n">x'</span> <span class="n">y'</span><span class="o">),</span>
    <span class="o">{</span> <span class="n">exact</span> <span class="n">i.hom.monotone</span> <span class="n">h</span> <span class="o">},</span>
    <span class="n">split</span><span class="o">,</span>
    <span class="o">{</span> <span class="k">have</span> <span class="n">ha</span> <span class="o">:=</span> <span class="o">((</span><span class="n">product_cone</span> <span class="o">(</span><span class="n">pair</span> <span class="n">X</span> <span class="n">Y</span><span class="o">))</span><span class="bp">.</span><span class="n">π.app</span> <span class="n">walking_pair.left</span><span class="o">)</span><span class="bp">.</span><span class="n">monotone</span> <span class="n">this</span><span class="o">,</span>
      <span class="n">change</span> <span class="o">(</span><span class="n">i.hom</span> <span class="bp">≫</span> <span class="o">(</span><span class="n">product_cone</span> <span class="o">(</span><span class="n">pair</span> <span class="n">X</span> <span class="n">Y</span><span class="o">))</span><span class="bp">.</span><span class="n">π.app</span> <span class="n">walking_pair.left</span><span class="o">)</span> <span class="o">(</span><span class="n">prod.mk</span> <span class="n">x</span> <span class="n">y</span><span class="o">)</span> <span class="bp">≤</span>
              <span class="o">(</span><span class="n">i.hom</span> <span class="bp">≫</span> <span class="o">(</span><span class="n">product_cone</span> <span class="o">(</span><span class="n">pair</span> <span class="n">X</span> <span class="n">Y</span><span class="o">))</span><span class="bp">.</span><span class="n">π.app</span> <span class="n">walking_pair.left</span><span class="o">)</span> <span class="o">(</span><span class="n">prod.mk</span> <span class="n">x'</span> <span class="n">y'</span><span class="o">)</span> <span class="n">at</span> <span class="n">ha</span><span class="o">,</span>
      <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">is_limit.cone_point_unique_up_to_iso_hom_comp</span><span class="o">,</span> <span class="n">binary_fan.π_app_left</span><span class="o">,</span> <span class="n">prod.mk</span><span class="o">]</span> <span class="n">at</span> <span class="n">ha</span><span class="o">,</span>
      <span class="n">change</span> <span class="o">(</span><span class="n">prod_lift</span> <span class="n">x</span> <span class="n">y</span> <span class="bp">≫</span> <span class="n">binary_fan.fst</span> <span class="n">_</span><span class="o">)</span> <span class="n">punit.star</span> <span class="bp">≤</span>
        <span class="o">(</span><span class="n">prod_lift</span> <span class="n">x'</span> <span class="n">y'</span> <span class="bp">≫</span> <span class="n">binary_fan.fst</span> <span class="n">_</span><span class="o">)</span> <span class="n">punit.star</span> <span class="n">at</span> <span class="n">ha</span><span class="o">,</span>
      <span class="n">dsimp</span> <span class="n">only</span> <span class="o">[</span><span class="n">prod_lift</span><span class="o">]</span> <span class="n">at</span> <span class="n">ha</span><span class="o">,</span>
      <span class="n">erw</span> <span class="o">[</span><span class="n">prod.lift_fst</span><span class="o">,</span> <span class="n">prod.lift_fst</span><span class="o">]</span> <span class="n">at</span> <span class="n">ha</span><span class="o">,</span>
      <span class="n">exact</span> <span class="n">ha</span> <span class="o">},</span>
    <span class="n">sorry</span><span class="o">,</span> <span class="o">},</span>
  <span class="n">sorry</span><span class="o">,</span>
<span class="kd">end</span>

<span class="kd">end</span> <span class="n">category_theory</span>
</code></pre></div>



<a name="211172331"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/New%20limits%20are%20not%20computable/near/211172331" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Markus Himmel <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/New.20limits.20are.20not.20computable.html#211172331">(Sep 24 2020 at 18:36)</a>:</h4>
<p>There are obviously several (simp) lemmas missing here. Adding them should hopefully make this much less painful. Some of the messiness is also due to the fact that I was discovering what the wCPO category does on the fly.</p>



<a name="211172467"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/New%20limits%20are%20not%20computable/near/211172467" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Simon Hudon <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/New.20limits.20are.20not.20computable.html#211172467">(Sep 24 2020 at 18:37)</a>:</h4>
<p>Thanks for putting the time! Actually, we could have gone with the category of preorders without losing the main points</p>



<a name="211174081"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/New%20limits%20are%20not%20computable/near/211174081" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bhavik Mehta <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/New.20limits.20are.20not.20computable.html#211174081">(Sep 24 2020 at 18:51)</a>:</h4>
<p>fwiw, you can do <code>product_cone</code> for <code>cone (pair X Y)</code> and then use one of the constructors for has_binary_products to get the general case, which makes some of the definitions at the beginning easier</p>



<a name="211174120"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/New%20limits%20are%20not%20computable/near/211174120" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bhavik Mehta <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/New.20limits.20are.20not.20computable.html#211174120">(Sep 24 2020 at 18:51)</a>:</h4>
<p>I agree though that constructing an explicit nice limit cone is the way to go</p>



<a name="211174822"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/New%20limits%20are%20not%20computable/near/211174822" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Simon Hudon <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/New.20limits.20are.20not.20computable.html#211174822">(Sep 24 2020 at 18:57)</a>:</h4>
<p>If you do it that way, in <code>has_binary_products</code> how to you convert from the limit shape <code>F</code> and <code>pair X Y</code>?</p>



<a name="211175676"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/New%20limits%20are%20not%20computable/near/211175676" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Markus Himmel <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/New.20limits.20are.20not.20computable.html#211175676">(Sep 24 2020 at 19:04)</a>:</h4>
<p><code>has_binary_products_of_has_limit_pair</code></p>



<a name="211179160"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/New%20limits%20are%20not%20computable/near/211179160" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bhavik Mehta <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/New.20limits.20are.20not.20computable.html#211179160">(Sep 24 2020 at 19:31)</a>:</h4>
<p>Yeah - this is what I meant by one of the constructors - I just couldn't remember the name off the top of my head!</p>



<a name="211183418"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/New%20limits%20are%20not%20computable/near/211183418" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Simon Hudon <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/New.20limits.20are.20not.20computable.html#211183418">(Sep 24 2020 at 20:08)</a>:</h4>
<p>Ok I managed to reformulate <span class="user-mention" data-user-id="260921">@Markus Himmel</span>'s solution to use <code>cone (pair X Y)</code></p>



<a name="211183440"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/New%20limits%20are%20not%20computable/near/211183440" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Simon Hudon <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/New.20limits.20are.20not.20computable.html#211183440">(Sep 24 2020 at 20:08)</a>:</h4>
<p>To be exact, the binary products definitions</p>



<a name="211183553"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/New%20limits%20are%20not%20computable/near/211183553" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bhavik Mehta <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/New.20limits.20are.20not.20computable.html#211183553">(Sep 24 2020 at 20:09)</a>:</h4>
<p>You can then use <code>binary_fan.mk</code> to make it a bit nicer instead of needing an inline match</p>



<a name="211183938"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/New%20limits%20are%20not%20computable/near/211183938" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Simon Hudon <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/New.20limits.20are.20not.20computable.html#211183938">(Sep 24 2020 at 20:12)</a>:</h4>
<p>Can you elaborate?</p>



<a name="211184438"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/New%20limits%20are%20not%20computable/near/211184438" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bhavik Mehta <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/New.20limits.20are.20not.20computable.html#211184438">(Sep 24 2020 at 20:17)</a>:</h4>
<p>I mean you can define <code>product_cone</code> like this:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">def</span> <span class="n">product_cone</span> <span class="o">(</span><span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="n">ωCPO.</span><span class="o">{</span><span class="n">u</span><span class="o">})</span> <span class="o">:</span> <span class="n">binary_fan</span> <span class="n">X</span> <span class="n">Y</span> <span class="o">:=</span>
<span class="n">binary_fan.mk</span>
  <span class="o">(</span><span class="n">continuous_hom.of_mono</span> <span class="n">preorder_hom.prod.fst</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">c</span><span class="o">,</span> <span class="n">rfl</span><span class="o">)</span> <span class="o">:</span> <span class="n">ωCPO.of</span> <span class="o">(</span><span class="n">X</span> <span class="bp">×</span> <span class="n">Y</span><span class="o">)</span> <span class="bp">⟶</span> <span class="n">_</span><span class="o">)</span>
  <span class="o">(</span><span class="n">continuous_hom.of_mono</span> <span class="n">preorder_hom.prod.snd</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">c</span><span class="o">,</span> <span class="n">rfl</span><span class="o">))</span>
</code></pre></div>



<a name="211184645"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/New%20limits%20are%20not%20computable/near/211184645" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Simon Hudon <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/New.20limits.20are.20not.20computable.html#211184645">(Sep 24 2020 at 20:19)</a>:</h4>
<p>Wow! So efficient!</p>



<a name="211184767"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/New%20limits%20are%20not%20computable/near/211184767" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bhavik Mehta <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/New.20limits.20are.20not.20computable.html#211184767">(Sep 24 2020 at 20:20)</a>:</h4>
<p>I notice now it's pretty annoying to need the type signature of one of the morphisms to specify the cone point - maybe it's worth having <code>P</code> as an explicit argument to <code>binary_fan.mk</code></p>



<a name="211184808"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/New%20limits%20are%20not%20computable/near/211184808" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bhavik Mehta <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/New.20limits.20are.20not.20computable.html#211184808">(Sep 24 2020 at 20:20)</a>:</h4>
<p>But yes there are lots of convenience constructors around these things!</p>



<a name="211184839"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/New%20limits%20are%20not%20computable/near/211184839" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Simon Hudon <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/New.20limits.20are.20not.20computable.html#211184839">(Sep 24 2020 at 20:21)</a>:</h4>
<p>And I keep taking the long way around!</p>



<a name="211184921"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/New%20limits%20are%20not%20computable/near/211184921" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bhavik Mehta <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/New.20limits.20are.20not.20computable.html#211184921">(Sep 24 2020 at 20:21)</a>:</h4>
<p>Perhaps this is a sign that we need better documentation :)</p>



<a name="211184979"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/New%20limits%20are%20not%20computable/near/211184979" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Simon Hudon <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/New.20limits.20are.20not.20computable.html#211184979">(Sep 24 2020 at 20:22)</a>:</h4>
<p>We could probably have the same binary products for every concrete category, provided that the defining property is closed under products</p>



<a name="211185009"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/New%20limits%20are%20not%20computable/near/211185009" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Simon Hudon <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/New.20limits.20are.20not.20computable.html#211185009">(Sep 24 2020 at 20:22)</a>:</h4>
<p>On my side, I tempt to not read a lot of documentation</p>



<a name="211209892"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/New%20limits%20are%20not%20computable/near/211209892" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Simon Hudon <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/New.20limits.20are.20not.20computable.html#211209892">(Sep 25 2020 at 01:38)</a>:</h4>
<p>Ok I managed to shrink <span class="user-mention" data-user-id="260921">@Markus Himmel</span>'s proof to:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">prod.mk_le</span> <span class="o">{</span><span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="n">ωCPO.</span><span class="o">{</span><span class="n">u</span><span class="o">}}</span> <span class="o">(</span><span class="n">x</span> <span class="n">x'</span> <span class="o">:</span> <span class="n">X</span><span class="o">)</span> <span class="o">(</span><span class="n">y</span> <span class="n">y'</span> <span class="o">:</span> <span class="n">Y</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">prod.mk</span> <span class="n">x</span> <span class="n">y</span> <span class="bp">≤</span> <span class="n">prod.mk</span> <span class="n">x'</span> <span class="n">y'</span> <span class="bp">↔</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">x'</span> <span class="bp">∧</span> <span class="n">y</span> <span class="bp">≤</span> <span class="n">y'</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="k">let</span> <span class="n">i</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">⨯</span> <span class="n">Y</span> <span class="bp">≅</span> <span class="n">ωCPO.of</span> <span class="o">(</span><span class="n">X</span> <span class="bp">×</span> <span class="n">Y</span><span class="o">)</span> <span class="o">:=</span>
    <span class="n">ωCPO.of_prod_iso</span> <span class="n">_</span> <span class="n">_</span><span class="o">,</span>
  <span class="n">split</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">intro</span> <span class="n">h</span><span class="o">,</span>
    <span class="k">have</span> <span class="o">:</span> <span class="n">i.hom</span> <span class="o">(</span><span class="n">prod.mk</span> <span class="n">x</span> <span class="n">y</span><span class="o">)</span> <span class="bp">≤</span> <span class="n">i.hom</span> <span class="o">(</span><span class="n">prod.mk</span> <span class="n">x'</span> <span class="n">y'</span><span class="o">),</span>
    <span class="o">{</span> <span class="n">exact</span> <span class="n">i.hom.monotone</span> <span class="n">h</span> <span class="o">},</span>
    <span class="k">have</span> <span class="n">ha</span> <span class="o">:=</span> <span class="o">((</span><span class="n">product_cone</span> <span class="n">X</span> <span class="n">Y</span><span class="o">)</span><span class="bp">.</span><span class="n">π.app</span> <span class="n">walking_pair.left</span><span class="o">)</span><span class="bp">.</span><span class="n">monotone</span> <span class="n">this</span><span class="o">,</span>
    <span class="k">have</span> <span class="n">hb</span> <span class="o">:=</span> <span class="o">((</span><span class="n">product_cone</span> <span class="n">X</span> <span class="n">Y</span><span class="o">)</span><span class="bp">.</span><span class="n">π.app</span> <span class="n">walking_pair.right</span><span class="o">)</span><span class="bp">.</span><span class="n">monotone</span> <span class="n">this</span><span class="o">,</span>
    <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">continuous_hom.const_apply</span><span class="o">,</span> <span class="n">prod_lift_binary_fst</span><span class="o">,</span> <span class="n">prod_lift_binary_snd</span><span class="o">,</span> <span class="bp">←</span> <span class="n">coe_comp</span><span class="o">,</span> <span class="n">is_limit.cone_point_unique_up_to_iso_hom_comp</span><span class="o">,</span> <span class="n">binary_fan.π_app_left</span><span class="o">,</span> <span class="n">prod.mk</span><span class="o">,</span> <span class="n">category.assoc</span><span class="o">,</span> <span class="n">ωCPO.of_prod_iso</span><span class="o">,</span> <span class="n">i</span><span class="o">]</span> <span class="n">at</span> <span class="n">ha</span> <span class="n">hb</span><span class="o">,</span>
    <span class="n">simp</span> <span class="o">[</span><span class="n">ha</span><span class="o">,</span> <span class="n">hb</span><span class="o">],</span> <span class="o">},</span>
  <span class="o">{</span> <span class="n">rintro</span> <span class="o">⟨</span><span class="n">h₀</span><span class="o">,</span> <span class="n">h₁</span><span class="o">⟩,</span>
    <span class="k">suffices</span> <span class="o">:</span> <span class="n">i.hom</span> <span class="o">(</span><span class="n">prod.mk</span> <span class="n">x</span> <span class="n">y</span><span class="o">)</span> <span class="bp">≤</span> <span class="n">i.hom</span> <span class="o">(</span><span class="n">prod.mk</span> <span class="n">x'</span> <span class="n">y'</span><span class="o">),</span>
    <span class="o">{</span> <span class="n">replace</span> <span class="n">this</span> <span class="o">:=</span> <span class="n">i.inv.monotone</span> <span class="n">this</span><span class="o">,</span>
      <span class="n">simpa</span> <span class="n">using</span> <span class="n">this</span> <span class="o">},</span>
    <span class="n">change</span> <span class="n">_</span> <span class="bp">∧</span> <span class="n">_</span><span class="o">,</span>
    <span class="n">simp</span> <span class="o">[</span><span class="n">prod.mk</span><span class="o">],</span>
    <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">continuous_hom.const_apply</span><span class="o">,</span> <span class="n">prod_lift_binary_fst</span><span class="o">,</span> <span class="n">prod_lift_binary_snd</span><span class="o">,</span> <span class="bp">←</span> <span class="n">coe_comp</span><span class="o">,</span> <span class="n">is_limit.cone_point_unique_up_to_iso_hom_comp</span><span class="o">,</span> <span class="n">binary_fan.π_app_left</span><span class="o">,</span> <span class="n">prod.mk</span><span class="o">,</span> <span class="n">category.assoc</span><span class="o">],</span>
    <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="bp">←</span> <span class="n">preorder_hom.prod.fst_to_fun</span><span class="o">,</span> <span class="bp">←</span> <span class="n">omega_complete_partial_order.continuous_hom.prod.fst_to_fun</span><span class="o">],</span>
    <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="bp">←</span> <span class="n">preorder_hom.prod.snd_to_fun</span><span class="o">,</span> <span class="bp">←</span> <span class="n">omega_complete_partial_order.continuous_hom.prod.snd_to_fun</span><span class="o">],</span>
    <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="bp">←</span> <span class="bp">@</span><span class="n">coe_comp</span> <span class="n">ωCPO</span> <span class="n">_</span> <span class="n">_</span> <span class="n">_</span> <span class="o">(</span><span class="n">ωCPO.of</span> <span class="o">(</span><span class="bp">↥</span><span class="n">X</span> <span class="bp">×</span> <span class="bp">↥</span><span class="n">Y</span><span class="o">))</span> <span class="n">Y</span> <span class="n">_</span> <span class="n">continuous_hom.prod.snd</span> <span class="n">star</span><span class="o">,</span> <span class="bp">←</span> <span class="bp">@</span><span class="n">coe_comp</span> <span class="n">ωCPO</span> <span class="n">_</span> <span class="n">_</span> <span class="n">_</span> <span class="o">(</span><span class="n">ωCPO.of</span> <span class="o">(</span><span class="bp">↥</span><span class="n">X</span> <span class="bp">×</span> <span class="bp">↥</span><span class="n">Y</span><span class="o">))</span> <span class="n">X</span> <span class="n">_</span> <span class="n">continuous_hom.prod.fst</span> <span class="n">star</span><span class="o">],</span>
    <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">category.assoc</span><span class="o">,</span> <span class="n">i</span><span class="o">,</span> <span class="n">ωCPO.of_prod_iso_prod_fst</span><span class="o">,</span> <span class="n">ωCPO.of_prod_iso_prod_snd</span><span class="o">,</span> <span class="n">prod_lift_prod_fst</span><span class="o">,</span> <span class="n">prod_lift_prod_snd</span><span class="o">,</span> <span class="n">continuous_hom.const_apply</span><span class="o">,</span> <span class="bp">*</span><span class="o">],</span>
    <span class="n">exact</span> <span class="o">⟨</span><span class="n">trivial</span><span class="o">,</span> <span class="n">trivial</span><span class="o">⟩</span> <span class="o">}</span>
<span class="kd">end</span>
</code></pre></div>

<p>With a few lemmas on top. I could probably shrink it further but I'd like to move on to my main proof</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>