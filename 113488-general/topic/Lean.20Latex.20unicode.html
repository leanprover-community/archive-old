---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/Lean.20Latex.20unicode.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20Latex.20unicode.html">Lean Latex unicode</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="269034871"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20Latex%20unicode/near/269034871" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason KY. <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20Latex.20unicode.html#269034871">(Jan 23 2022 at 19:30)</a>:</h4>
<p>Hi,  I'm trying to present some Lean code in a Latex document. In particular, I have the following code </p>
<div class="codehilite" data-code-language="TeX"><pre><span></span><code><span class="k">\documentclass</span><span class="nb">{</span>article<span class="nb">}</span>

<span class="k">\usepackage</span><span class="na">[utf8x]</span><span class="nb">{</span>inputenc<span class="nb">}</span>
<span class="k">\usepackage</span><span class="nb">{</span>amssymb, upgreek<span class="nb">}</span>

<span class="k">\usepackage</span><span class="nb">{</span>color<span class="nb">}</span>
<span class="k">\definecolor</span><span class="nb">{</span>keywordcolor<span class="nb">}{</span>rgb<span class="nb">}{</span>0.7, 0.1, 0.1<span class="nb">}</span>   <span class="c">% red</span>
<span class="k">\definecolor</span><span class="nb">{</span>commentcolor<span class="nb">}{</span>rgb<span class="nb">}{</span>0.4, 0.4, 0.4<span class="nb">}</span>   <span class="c">% grey</span>
<span class="k">\definecolor</span><span class="nb">{</span>symbolcolor<span class="nb">}{</span>rgb<span class="nb">}{</span>0.0, 0.1, 0.6<span class="nb">}</span>    <span class="c">% blue</span>
<span class="k">\definecolor</span><span class="nb">{</span>sortcolor<span class="nb">}{</span>rgb<span class="nb">}{</span>0.1, 0.5, 0.1<span class="nb">}</span>      <span class="c">% green</span>
<span class="k">\definecolor</span><span class="nb">{</span>errorcolor<span class="nb">}{</span>rgb<span class="nb">}{</span>1, 0, 0<span class="nb">}</span>           <span class="c">% bright red</span>
<span class="k">\definecolor</span><span class="nb">{</span>stringcolor<span class="nb">}{</span>rgb<span class="nb">}{</span>0.5, 0.3, 0.2<span class="nb">}</span>    <span class="c">% brown</span>

<span class="k">\usepackage</span><span class="nb">{</span>listings<span class="nb">}</span>
<span class="k">\def\lstlanguagefiles</span><span class="nb">{</span>lstlean.tex<span class="nb">}</span>
<span class="k">\lstset</span><span class="nb">{</span>language=lean<span class="nb">}</span>

<span class="k">\begin</span><span class="nb">{</span>document<span class="nb">}</span>

<span class="k">\begin</span><span class="nb">{</span>lstlisting<span class="nb">}</span>
  lemma tendsto<span class="nb">_</span>uniformly<span class="nb">_</span>on<span class="nb">_</span>of<span class="nb">_</span>ae<span class="nb">_</span>tendsto' [is<span class="nb">_</span>finite<span class="nb">_</span>measure Œº]
  (hf : ‚àÄ n, measurable (f n)) (hg : measurable g)
  (hfg : ‚àÄ·µê x ‚àÇŒº, tendsto (Œª n, f n x) at<span class="nb">_</span>top (ùìù (g x))) <span class="nb">{</span>Œµ : ‚Ñù<span class="nb">}</span> (hŒµ : 0 &lt; Œµ) :
  ‚àÉ t, measurable<span class="nb">_</span>set t ‚àß Œº t ‚â§ ennreal.of<span class="nb">_</span>real Œµ ‚àß tendsto<span class="nb">_</span>uniformly<span class="nb">_</span>on f g at<span class="nb">_</span>top t·∂ú :=
<span class="k">\end</span><span class="nb">{</span>lstlisting<span class="nb">}</span>

<span class="k">\end</span><span class="nb">{</span>document<span class="nb">}</span>
</code></pre></div>
<p>in the same directory as the <code>lstlean.tex</code> file from <a href="https://github.com/leanprover-community/lean/blob/master/extras/latex/lstlean.tex">https://github.com/leanprover-community/lean/blob/master/extras/latex/lstlean.tex</a></p>
<p>However, when I compile with XeLaTeX all of the unicode is gone. Is there a way to fix this? <br>
Using pdfLaTeX works but I would like to use some packages which is not compatible with pdfLaTeX.</p>



<a name="269035152"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20Latex%20unicode/near/269035152" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20Latex.20unicode.html#269035152">(Jan 23 2022 at 19:36)</a>:</h4>
<p>I can reproduce -- seems to work fine with pdflatex, \foralls and \Rs missing with lualatex and xelatex</p>



<a name="269035239"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20Latex%20unicode/near/269035239" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20Latex.20unicode.html#269035239">(Jan 23 2022 at 19:38)</a>:</h4>
<p>If using xelatex you probably need to remove the <code>\usepackage[utf8x]{inputenc}</code> line at least</p>



<a name="269035265"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20Latex%20unicode/near/269035265" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20Latex.20unicode.html#269035265">(Jan 23 2022 at 19:39)</a>:</h4>
<p>still compiles but still no unicode</p>



<a name="269035278"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20Latex%20unicode/near/269035278" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20Latex.20unicode.html#269035278">(Jan 23 2022 at 19:39)</a>:</h4>
<p>and still compiles with pdflatex and looks fine</p>



<a name="269036275"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20Latex%20unicode/near/269036275" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20Latex.20unicode.html#269036275">(Jan 23 2022 at 19:59)</a>:</h4>
<p>Yeah this seems quite tricky. For Lean 4 it seems minted is recommended to use XeLaTeX <a href="https://leanprover.github.io/lean4/doc/syntax_highlight_in_latex.html">https://leanprover.github.io/lean4/doc/syntax_highlight_in_latex.html</a> but I don't know if there are corresponding instructions / python files for Lean 3</p>



<a name="269036551"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20Latex%20unicode/near/269036551" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20Latex.20unicode.html#269036551">(Jan 23 2022 at 20:04)</a>:</h4>
<p>Ah actually maybe these instructions will work then<br>
<a href="https://github.com/leanprover-community/lean/blob/master/doc/syntax_highlight_in_latex.md">https://github.com/leanprover-community/lean/blob/master/doc/syntax_highlight_in_latex.md</a></p>



<a name="269036565"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20Latex%20unicode/near/269036565" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason KY. <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20Latex.20unicode.html#269036565">(Jan 23 2022 at 20:04)</a>:</h4>
<p>Im able to get: <br>
<a href="/user_uploads/3121/kF3XRQNPHhLHmlr3Ga7UmNSZ/image.png">image.png</a> <br>
with the following: </p>
<div class="message_inline_image"><a href="/user_uploads/3121/kF3XRQNPHhLHmlr3Ga7UmNSZ/image.png" title="image.png"><img src="/user_uploads/3121/kF3XRQNPHhLHmlr3Ga7UmNSZ/image.png"></a></div><div class="codehilite" data-code-language="TeX"><pre><span></span><code><span class="k">\documentclass</span><span class="nb">{</span>article<span class="nb">}</span>
<span class="k">\usepackage</span><span class="nb">{</span>fontspec<span class="nb">}</span>
<span class="c">% switch to a monospace font supporting more Unicode characters</span>
<span class="k">\setmonofont</span><span class="nb">{</span>FreeMono<span class="nb">}</span>
<span class="k">\usepackage</span><span class="nb">{</span>minted<span class="nb">}</span>
<span class="c">% instruct minted to use our local theorem.py</span>
<span class="k">\newmintinline</span><span class="na">[lean]</span><span class="nb">{</span>lean4.py:Lean4Lexer -x<span class="nb">}{</span>bgcolor=white<span class="nb">}</span>
<span class="k">\newminted</span><span class="na">[leancode]</span><span class="nb">{</span>lean4.py:Lean4Lexer -x<span class="nb">}{</span>fontsize=<span class="k">\footnotesize</span><span class="nb">}</span>
<span class="k">\usepackage</span><span class="nb">{</span>newunicodechar<span class="nb">}</span>
<span class="k">\newfontfamily</span><span class="nb">{</span><span class="k">\freeserif</span><span class="nb">}{</span>DejaVu Sans<span class="nb">}</span>
<span class="k">\newunicodechar</span><span class="nb">{</span>ùìù<span class="nb">}{</span><span class="k">\ensuremath</span><span class="nb">{</span><span class="k">\mathcal</span><span class="nb">{</span>N<span class="nb">}}}</span>
<span class="k">\newunicodechar</span><span class="nb">{</span>·µê<span class="nb">}{</span><span class="k">\ensuremath</span><span class="nb">{^</span>m<span class="nb">}}</span>
<span class="k">\newunicodechar</span><span class="nb">{</span>·∂ú<span class="nb">}{</span><span class="k">\ensuremath</span><span class="nb">{^</span>c<span class="nb">}}</span>


<span class="k">\begin</span><span class="nb">{</span>document<span class="nb">}</span>
<span class="c">% some example options</span>
<span class="k">\begin</span><span class="nb">{</span>minted<span class="nb">}</span>[mathescape,
               linenos,
               numbersep=5pt,
               frame=lines,
               framesep=2mm]<span class="nb">{</span>Lean<span class="nb">}</span>
lemma tendsto<span class="nb">_</span>uniformly<span class="nb">_</span>on<span class="nb">_</span>of<span class="nb">_</span>ae<span class="nb">_</span>tendsto' [is<span class="nb">_</span>finite<span class="nb">_</span>measure Œº]
  (hf : ‚àÄ n, measurable (f n)) (hg : measurable g)
  (hfg : ‚àÄ·µê x ‚àÇŒº, tendsto (Œª n, f n x) at<span class="nb">_</span>top (ùìù (g x)))
  <span class="nb">{</span>Œµ : ‚Ñù<span class="nb">}</span> (hŒµ : 0 &lt; Œµ) :
‚àÉ t, measurable<span class="nb">_</span>set t ‚àß Œº t ‚â§ ennreal.of<span class="nb">_</span>real Œµ ‚àß
  tendsto<span class="nb">_</span>uniformly<span class="nb">_</span>on f g at<span class="nb">_</span>top t·∂ú
<span class="k">\end</span><span class="nb">{</span>minted<span class="nb">}</span>
<span class="k">\end</span><span class="nb">{</span>document<span class="nb">}</span>
</code></pre></div>
<p>and the <code>lean4.py</code> from that lean4 page</p>



<a name="269036592"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20Latex%20unicode/near/269036592" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason KY. <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20Latex.20unicode.html#269036592">(Jan 23 2022 at 20:05)</a>:</h4>
<p><span class="user-mention silent" data-user-id="127136">Alex J. Best</span> <a href="#narrow/stream/113488-general/topic/Lean.20Latex.20unicode/near/269036551">said</a>:</p>
<blockquote>
<p>Ah actually maybe these instructions will work then<br>
<a href="https://github.com/leanprover-community/lean/blob/master/doc/syntax_highlight_in_latex.md">https://github.com/leanprover-community/lean/blob/master/doc/syntax_highlight_in_latex.md</a></p>
</blockquote>
<p>Great! I will give it a try</p>



<a name="269036763"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20Latex%20unicode/near/269036763" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason KY. <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20Latex.20unicode.html#269036763">(Jan 23 2022 at 20:09)</a>:</h4>
<p><a href="/user_uploads/3121/-pZ_5CZmh-ogc3EwrDylEtTH/image.png">image.png</a> <br>
It seems that some of the unicode is not declared as with the lean 4 version. I think I will just declare manually for now. <br>
Thanks for the help!</p>
<div class="message_inline_image"><a href="/user_uploads/3121/-pZ_5CZmh-ogc3EwrDylEtTH/image.png" title="image.png"><img src="/user_uploads/3121/-pZ_5CZmh-ogc3EwrDylEtTH/image.png"></a></div>



<a name="269036765"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20Latex%20unicode/near/269036765" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20Latex.20unicode.html#269036765">(Jan 23 2022 at 20:09)</a>:</h4>
<p>Yeah that looks pretty good, it looks like there is lean support in pygments version 2 by default so maybe additional files aren't needed</p>



<a name="269037450"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20Latex%20unicode/near/269037450" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason KY. <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20Latex.20unicode.html#269037450">(Jan 23 2022 at 20:25)</a>:</h4>
<p>Yeah, it seems to work the same way without adding <code>lean4.py</code> or <code>minted.sty</code></p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>