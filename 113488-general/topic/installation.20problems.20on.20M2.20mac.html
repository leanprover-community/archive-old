---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/installation.20problems.20on.20M2.20mac.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/installation.20problems.20on.20M2.20mac.html">installation problems on M2 mac</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="301005116"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/installation%20problems%20on%20M2%20mac/near/301005116" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ruiting Jiang <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/installation.20problems.20on.20M2.20mac.html#301005116">(Sep 27 2022 at 13:25)</a>:</h4>
<p>Hi! I tried to install Lean 3 on an M2 mac following the instructions on the community website. Mathlibtools isn't working for me: the error I get  is</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="bp">%</span> <span class="bp">/</span><span class="n">usr</span><span class="bp">/</span><span class="kn">local</span><span class="bp">/</span><span class="n">bin</span><span class="bp">/</span><span class="n">brew</span> <span class="n">install</span> <span class="n">mathlibtools</span>
<span class="n">Error</span><span class="o">:</span> <span class="n">Cannot</span> <span class="n">install</span> <span class="k">in</span> <span class="n">Homebrew</span> <span class="n">on</span> <span class="n">ARM</span> <span class="n">processor</span> <span class="k">in</span> <span class="n">Intel</span> <span class="n">default</span> <span class="kd">prefix</span> <span class="o">(</span><span class="bp">/</span><span class="n">usr</span><span class="bp">/</span><span class="kn">local</span><span class="o">)</span><span class="bp">!</span>
<span class="n">Please</span> <span class="n">create</span> <span class="n">a</span> <span class="n">new</span> <span class="n">installation</span> <span class="k">in</span> <span class="bp">/</span><span class="n">opt</span><span class="bp">/</span><span class="n">homebrew</span> <span class="n">using</span> <span class="n">one</span> <span class="n">of</span> <span class="n">the</span>
<span class="s2">"Alternative Installs"</span> <span class="k">from</span><span class="o">:</span>
  <span class="n">https</span><span class="o">:</span><span class="bp">//</span><span class="n">docs.brew.sh</span><span class="bp">/</span><span class="n">Installation</span>
<span class="n">You</span> <span class="n">can</span> <span class="n">migrate</span> <span class="n">your</span> <span class="n">previously</span> <span class="n">installed</span> <span class="n">formula</span> <span class="n">list</span> <span class="k">with</span><span class="o">:</span>
  <span class="n">brew</span> <span class="n">bundle</span> <span class="n">dump</span>
<span class="n">jiangruiting</span><span class="bp">@</span><span class="n">jiangruitingdeMacBook</span><span class="bp">-</span><span class="n">Pro</span> <span class="n">xena</span><span class="bp">-</span><span class="n">workshop</span><span class="bp">-</span><span class="n">set</span><span class="bp">-</span><span class="n">families</span> <span class="bp">%</span>
</code></pre></div>
<p>Any ideas? Thanks in advance</p>



<a name="301006127"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/installation%20problems%20on%20M2%20mac/near/301006127" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ruiting Jiang <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/installation.20problems.20on.20M2.20mac.html#301006127">(Sep 27 2022 at 13:31)</a>:</h4>
<p>Progress: I wasn't in the x86 shell. Now I have this:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="bp">%</span> <span class="n">leanproject</span> <span class="n">get</span> <span class="n">YaelDillies</span><span class="bp">/</span><span class="n">xena</span><span class="bp">-</span><span class="n">workshop</span><span class="bp">-</span><span class="n">set</span><span class="bp">-</span><span class="n">families</span>
<span class="n">Cloning</span> <span class="k">from</span> <span class="n">git</span><span class="bp">@</span><span class="n">github.com</span><span class="o">:</span><span class="n">YaelDillies</span><span class="bp">/</span><span class="n">xena</span><span class="bp">-</span><span class="n">workshop</span><span class="bp">-</span><span class="n">set</span><span class="bp">-</span><span class="n">families.git</span>
<span class="n">Error</span> <span class="n">cloning</span> <span class="n">via</span> <span class="n">SSH</span><span class="o">,</span> <span class="n">trying</span> <span class="n">HTTPS...</span>
<span class="n">Cloning</span> <span class="k">from</span> <span class="n">https</span><span class="o">:</span><span class="bp">//</span><span class="n">github.com</span><span class="bp">/</span><span class="n">YaelDillies</span><span class="bp">/</span><span class="n">xena</span><span class="bp">-</span><span class="n">workshop</span><span class="bp">-</span><span class="n">set</span><span class="bp">-</span><span class="n">families.git</span>
<span class="n">configuring</span> <span class="n">xena</span><span class="bp">-</span><span class="n">workshop</span><span class="bp">-</span><span class="n">set</span><span class="bp">-</span><span class="n">families</span> <span class="mi">0</span><span class="bp">.</span><span class="mi">1</span>
<span class="n">mathlib</span><span class="o">:</span> <span class="n">trying</span> <span class="n">to</span> <span class="n">update</span> <span class="n">_target</span><span class="bp">/</span><span class="n">deps</span><span class="bp">/</span><span class="n">mathlib</span> <span class="n">to</span> <span class="n">revision</span> <span class="n">ebf8ff42db1e71dd0880e3f274dd5ac9303b8a2a</span>
<span class="bp">&gt;</span> <span class="n">git</span> <span class="n">fetch</span>    <span class="bp">#</span> <span class="k">in</span> <span class="n">directory</span> <span class="n">_target</span><span class="bp">/</span><span class="n">deps</span><span class="bp">/</span><span class="n">mathlib</span>
<span class="bp">&gt;</span> <span class="n">git</span> <span class="n">checkout</span> <span class="c1">--detach ebf8ff42db1e71dd0880e3f274dd5ac9303b8a2a    # in directory _target/deps/mathlib</span>
<span class="n">fatal</span><span class="o">:</span> <span class="n">reference</span> <span class="n">is</span> <span class="n">not</span> <span class="n">a</span> <span class="n">tree</span><span class="o">:</span> <span class="n">ebf8ff42db1e71dd0880e3f274dd5ac9303b8a2a</span>
<span class="n">external</span> <span class="n">command</span> <span class="n">exited</span> <span class="k">with</span> <span class="n">status</span> <span class="mi">128</span>
<span class="n">Command</span> <span class="sc">'['</span><span class="n">leanpkg'</span><span class="o">,</span> <span class="bp">'</span><span class="n">configure'</span><span class="o">]</span><span class="bp">'</span> <span class="n">returned</span> <span class="n">non</span><span class="bp">-</span><span class="n">zero</span> <span class="n">exit</span> <span class="n">status</span> <span class="mi">1</span><span class="bp">.</span>
<span class="n">jiangruiting</span><span class="bp">@</span><span class="n">dyn897</span><span class="bp">-</span><span class="mi">234</span> <span class="n">Xena</span> <span class="bp">%</span>
</code></pre></div>
<p>I'm close! (PS this is actually Kevin Buzzard talking, I'm trying to get a student set up)</p>



<a name="301006870"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/installation%20problems%20on%20M2%20mac/near/301006870" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ruiting Jiang <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/installation.20problems.20on.20M2.20mac.html#301006870">(Sep 27 2022 at 13:35)</a>:</h4>
<p>(ok got it -- Yael's project has got an invalid toml!)</p>



<a name="301011288"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/installation%20problems%20on%20M2%20mac/near/301011288" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/installation.20problems.20on.20M2.20mac.html#301011288">(Sep 27 2022 at 13:57)</a>:</h4>
<p>Sorry for the noise. This is now resolved. Yael's lean set-up is a bit broken and he managed to create a corrupted project somehow.</p>



<a name="320289469"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/installation%20problems%20on%20M2%20mac/near/320289469" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kind Bubble <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/installation.20problems.20on.20M2.20mac.html#320289469">(Jan 09 2023 at 17:58)</a>:</h4>
<p>I haven't been able to install lean 4 on my new M2 Mac.</p>
<p>When I try to install Rosetta with</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">softwareupdate</span> <span class="c1">--install-rosetta</span>
</code></pre></div>
<p>I get:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">Installing</span> <span class="n">Rosetta</span> <span class="mi">2</span> <span class="n">on</span> <span class="n">this</span> <span class="n">system</span> <span class="n">is</span> <span class="n">not</span> <span class="n">supported.</span>
</code></pre></div>



<a name="320289966"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/installation%20problems%20on%20M2%20mac/near/320289966" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kind Bubble <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/installation.20problems.20on.20M2.20mac.html#320289966">(Jan 09 2023 at 18:00)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="bp">/</span><span class="n">usr</span><span class="bp">/</span><span class="kn">local</span><span class="bp">/</span><span class="n">bin</span><span class="bp">/</span><span class="n">brew</span> <span class="n">install</span> <span class="n">mathlibtools</span>
</code></pre></div>
<p>gives</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">Running</span> <span class="bp">`</span><span class="n">brew</span> <span class="n">update</span> <span class="c1">--auto-update`...</span>
<span class="n">error</span><span class="o">:</span> <span class="n">Not</span> <span class="n">a</span> <span class="n">valid</span> <span class="n">ref</span><span class="o">:</span> <span class="n">refs</span><span class="bp">/</span><span class="n">remotes</span><span class="bp">/</span><span class="n">origin</span><span class="bp">/</span><span class="n">master</span>
<span class="n">fatal</span><span class="o">:</span> <span class="n">ambiguous</span> <span class="n">argument</span> <span class="bp">'</span><span class="n">refs</span><span class="bp">/</span><span class="n">remotes</span><span class="bp">/</span><span class="n">origin</span><span class="bp">/</span><span class="n">master'</span><span class="o">:</span> <span class="n">unknown</span> <span class="n">revision</span> <span class="n">or</span> <span class="n">path</span> <span class="n">not</span> <span class="k">in</span> <span class="n">the</span> <span class="n">working</span> <span class="n">tree.</span>
<span class="n">Use</span> <span class="bp">'</span><span class="c1">--' to separate paths from revisions, like this:</span>
<span class="bp">'</span><span class="n">git</span> <span class="bp">&lt;</span><span class="n">command</span><span class="bp">&gt;</span> <span class="o">[</span><span class="bp">&lt;</span><span class="n">revision</span><span class="bp">&gt;...</span><span class="o">]</span> <span class="c1">-- [&lt;file&gt;...]'</span>
</code></pre></div>



<a name="320318243"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/installation%20problems%20on%20M2%20mac/near/320318243" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alistair Tucker <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/installation.20problems.20on.20M2.20mac.html#320318243">(Jan 09 2023 at 19:55)</a>:</h4>
<p>I think you shouldn't need Rosetta for Lean 4.</p>



<a name="320318335"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/installation%20problems%20on%20M2%20mac/near/320318335" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alistair Tucker <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/installation.20problems.20on.20M2.20mac.html#320318335">(Jan 09 2023 at 19:55)</a>:</h4>
<p>Or mathlibtools</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>