---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/Feature.20request.3A.20Extract.20goal.20.2B.2B.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Feature.20request.3A.20Extract.20goal.20.2B.2B.html">Feature request: Extract goal ++</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="269942636"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Feature%20request%3A%20Extract%20goal%20%2B%2B/near/269942636" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Feature.20request.3A.20Extract.20goal.20.2B.2B.html#269942636">(Jan 30 2022 at 16:45)</a>:</h4>
<p>Idris has a nice feature where (in emacs) <code>C-c C-e</code> extracts a goal as a top-level definition, and replaces the current goal with a call to that new definition. We have something similar with <code>extract_goal</code> in mathlib. How hard would it be to extend <code>extract_goal</code> so that it automatically makes a top level def (with a sorry) and replaces the current goal with that def?</p>



<a name="269942731"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Feature%20request%3A%20Extract%20goal%20%2B%2B/near/269942731" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Feature.20request.3A.20Extract.20goal.20.2B.2B.html#269942731">(Jan 30 2022 at 16:47)</a>:</h4>
<p>(I guess it would have to be a hole command?)</p>



<a name="269942920"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Feature%20request%3A%20Extract%20goal%20%2B%2B/near/269942920" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Andrew Yang <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Feature.20request.3A.20Extract.20goal.20.2B.2B.html#269942920">(Jan 30 2022 at 16:51)</a>:</h4>
<p>Is <a href="https://leanprover-community.github.io/mathlib_docs/tactics.html#abstract">tactic.interactive.abstract</a> what you want? The tactic description looks promising but I have never figured out how to make it work.</p>



<a name="269943689"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Feature%20request%3A%20Extract%20goal%20%2B%2B/near/269943689" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Feature.20request.3A.20Extract.20goal.20.2B.2B.html#269943689">(Jan 30 2022 at 17:05)</a>:</h4>
<p>Maybe! I have never even heard of <code>abstract</code>...</p>



<a name="269943693"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Feature%20request%3A%20Extract%20goal%20%2B%2B/near/269943693" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Feature.20request.3A.20Extract.20goal.20.2B.2B.html#269943693">(Jan 30 2022 at 17:05)</a>:</h4>
<p>I'll have to try it later.</p>



<a name="269945510"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Feature%20request%3A%20Extract%20goal%20%2B%2B/near/269945510" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Feature.20request.3A.20Extract.20goal.20.2B.2B.html#269945510">(Jan 30 2022 at 17:40)</a>:</h4>
<p>I think Adam wants something that changes the source code, right? <code>abstract</code> can be useful but it just creates a new declaration under the hood. I think what you're describing is <code>extract_goal</code> plus VSCode support. This doesn't seem doable with the current <code>Try this:</code> or with hole commands.</p>



<a name="269950586"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Feature%20request%3A%20Extract%20goal%20%2B%2B/near/269950586" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Feature.20request.3A.20Extract.20goal.20.2B.2B.html#269950586">(Jan 30 2022 at 19:19)</a>:</h4>
<p>So what is <code>abstract</code> actually useful for? For example, can it help with deterministic timeouts in long proofs?</p>



<a name="269951871"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Feature%20request%3A%20Extract%20goal%20%2B%2B/near/269951871" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Feature.20request.3A.20Extract.20goal.20.2B.2B.html#269951871">(Jan 30 2022 at 19:42)</a>:</h4>
<p>I just tried this, and I think <code>extract_goal</code> uses <code>pp</code> instead of <code>to_string</code> so copy-pasting goals created by it doesn't usually work :/ is round-tripping easier in Lean4?</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>