---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/Canonical.20form.20for.20.22n.20is.20even.22.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Canonical.20form.20for.20.22n.20is.20even.22.html">Canonical form for "n is even"</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="207023636"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Canonical%20form%20for%20%22n%20is%20even%22/near/207023636" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Wong <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Canonical.20form.20for.20.22n.20is.20even.22.html#207023636">(Aug 15 2020 at 14:12)</a>:</h4>
<p>What's the canonical way to say that a natural number is even? I see <code>2 \dvd n</code>, <code>n % 2 = 0</code>, <code>even n</code>...</p>
<p>Context: I'd like to prove that <code>alternating_sum</code> and <code>++</code> commute when the first list has even length.</p>



<a name="207023727"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Canonical%20form%20for%20%22n%20is%20even%22/near/207023727" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Canonical.20form.20for.20.22n.20is.20even.22.html#207023727">(Aug 15 2020 at 14:15)</a>:</h4>
<p>Given that <code>even n</code> exists, it really ought to be the answer to this question</p>



<a name="207030769"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Canonical%20form%20for%20%22n%20is%20even%22/near/207030769" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Canonical.20form.20for.20.22n.20is.20even.22.html#207030769">(Aug 15 2020 at 17:21)</a>:</h4>
<p>Thanks for un <a href="https://en.wikipedia.org/wiki/XY_problem">#xy</a> ing the question</p>



<a name="207030819"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Canonical%20form%20for%20%22n%20is%20even%22/near/207030819" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Canonical.20form.20for.20.22n.20is.20even.22.html#207030819">(Aug 15 2020 at 17:22)</a>:</h4>
<p>you might want to also consider the more general statement <code>alternating_sum (L1 ++ L2) = alternating_sum L1 + (-1) ^ L1.length * alternating_sum L2</code></p>



<a name="207047734"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Canonical%20form%20for%20%22n%20is%20even%22/near/207047734" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Wong <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Canonical.20form.20for.20.22n.20is.20even.22.html#207047734">(Aug 16 2020 at 01:04)</a>:</h4>
<p>Thanks <span class="user-mention" data-user-id="110032">@Reid Barton</span>. I guess my source of confusion was this lemma, and the one below it:<br>
<a href="https://leanprover-community.github.io/mathlib_docs/data/nat/parity.html#nat.two_not_dvd_two_mul_add_one">https://leanprover-community.github.io/mathlib_docs/data/nat/parity.html#nat.two_not_dvd_two_mul_add_one</a><br>
What's the reason for using <code>2 \dvd</code> here – especially in the module where <code>even</code> is defined?</p>



<a name="207048071"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Canonical%20form%20for%20%22n%20is%20even%22/near/207048071" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Canonical.20form.20for.20.22n.20is.20even.22.html#207048071">(Aug 16 2020 at 01:14)</a>:</h4>
<p>the name of the theorem is <code>not_two_dvd_...</code> so perhaps it's specifically about this form</p>



<a name="207048090"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Canonical%20form%20for%20%22n%20is%20even%22/near/207048090" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Canonical.20form.20for.20.22n.20is.20even.22.html#207048090">(Aug 16 2020 at 01:15)</a>:</h4>
<p>especially in the module where even and odd are defined you are more likely to find alternative representations, because that's where you would prove equivalence of the alternative representations</p>



<a name="207048198"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Canonical%20form%20for%20%22n%20is%20even%22/near/207048198" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Wong <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Canonical.20form.20for.20.22n.20is.20even.22.html#207048198">(Aug 16 2020 at 01:18)</a>:</h4>
<p>I also found <code>parity_simps</code> from reading the source. That should really be documented...</p>



<a name="207048319"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Canonical%20form%20for%20%22n%20is%20even%22/near/207048319" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Canonical.20form.20for.20.22n.20is.20even.22.html#207048319">(Aug 16 2020 at 01:23)</a>:</h4>
<p><code>data.nat.parity</code> is a 100 line file--even if someone were to write documentation for it, the most efficient way to find out what's in it would still be to just read the whole thing.</p>



<a name="207048576"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Canonical%20form%20for%20%22n%20is%20even%22/near/207048576" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Canonical.20form.20for.20.22n.20is.20even.22.html#207048576">(Aug 16 2020 at 01:31)</a>:</h4>
<p>heh, there are some <code>example</code>s at the end of <code>data.nat.parity</code></p>



<a name="207048932"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Canonical%20form%20for%20%22n%20is%20even%22/near/207048932" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Wong <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Canonical.20form.20for.20.22n.20is.20even.22.html#207048932">(Aug 16 2020 at 01:42)</a>:</h4>
<p>Even (hehe) so, when reading the docs I think that there's an expectation that what's listed is the complete public interface for that module. That defs and lemmas are shown, but custom simp sets and examples are not, seems like a bug to me.</p>



<a name="207049118"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Canonical%20form%20for%20%22n%20is%20even%22/near/207049118" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Wong <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Canonical.20form.20for.20.22n.20is.20even.22.html#207049118">(Aug 16 2020 at 01:47)</a>:</h4>
<p>(Examples aren't part of the API but you get what I mean <span aria-label="stuck out tongue" class="emoji emoji-1f61b" role="img" title="stuck out tongue">:stuck_out_tongue:</span>)</p>



<a name="207050929"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Canonical%20form%20for%20%22n%20is%20even%22/near/207050929" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Wong <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Canonical.20form.20for.20.22n.20is.20even.22.html#207050929">(Aug 16 2020 at 02:38)</a>:</h4>
<p>Regarding the <code>(-1) ^ L1.length</code> formulation – that requires a <code>ring</code>, whereas the specialized approach only needs <code>add_comm_group</code> (like the other <code>alternating_sum</code> lemmas). And it gets more complicated when we consider <code>alternating_prod</code>. So perhaps both statements are useful?</p>
<p>And un- <a href="https://en.wikipedia.org/wiki/XY_problem">#xy</a> -ing further, I'm using this to prove "a palindromic number of even length is divisible by 11", so the specialized version would be more useful to me. (I should have mentioned that first whoops)</p>



<a name="207051293"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Canonical%20form%20for%20%22n%20is%20even%22/near/207051293" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Canonical.20form.20for.20.22n.20is.20even.22.html#207051293">(Aug 16 2020 at 02:48)</a>:</h4>
<p>What about</p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="n">data</span><span class="bp">.</span><span class="n">list</span><span class="bp">.</span><span class="n">basic</span>
<span class="kn">import</span> <span class="n">algebra</span><span class="bp">.</span><span class="n">group_power</span>
<span class="kn">open</span> <span class="n">list</span>
<span class="kn">example</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">}</span> <span class="o">[</span><span class="n">add_group</span> <span class="n">α</span><span class="o">]</span> <span class="o">(</span><span class="n">L1</span> <span class="n">L2</span> <span class="o">:</span> <span class="n">list</span> <span class="n">α</span><span class="o">)</span> <span class="o">:</span>
<span class="n">alternating_sum</span> <span class="o">(</span><span class="n">L1</span> <span class="bp">++</span> <span class="n">L2</span><span class="o">)</span> <span class="bp">=</span> <span class="n">alternating_sum</span> <span class="n">L1</span> <span class="bp">+</span> <span class="o">(</span><span class="bp">-</span><span class="mi">1</span><span class="o">)</span> <span class="bp">^</span> <span class="n">L1</span><span class="bp">.</span><span class="n">length</span> <span class="err">•</span><span class="bp">ℤ</span> <span class="n">alternating_sum</span> <span class="n">L2</span>
<span class="o">:=</span> <span class="n">sorry</span>
</code></pre></div>


<p>for the general version, no ring required (in the statement at least).</p>



<a name="207052319"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Canonical%20form%20for%20%22n%20is%20even%22/near/207052319" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Wong <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Canonical.20form.20for.20.22n.20is.20even.22.html#207052319">(Aug 16 2020 at 03:23)</a>:</h4>
<p>Here's what I've got so far:</p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="n">data</span><span class="bp">.</span><span class="n">list</span><span class="bp">.</span><span class="n">basic</span>
<span class="kn">import</span> <span class="n">data</span><span class="bp">.</span><span class="n">nat</span><span class="bp">.</span><span class="n">parity</span>

<span class="kn">open</span> <span class="n">list</span> <span class="n">nat</span>

<span class="kn">lemma</span> <span class="n">alternating_sum_append_of_even_length</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">add_comm_group</span> <span class="n">α</span><span class="o">]</span> <span class="o">:</span>
  <span class="bp">∀</span> <span class="o">(</span><span class="n">l₁</span> <span class="n">l₂</span> <span class="o">:</span> <span class="n">list</span> <span class="n">α</span><span class="o">),</span> <span class="n">even</span> <span class="o">(</span><span class="n">length</span> <span class="n">l₁</span><span class="o">)</span> <span class="bp">→</span> <span class="n">alternating_sum</span> <span class="o">(</span><span class="n">l₁</span> <span class="bp">++</span> <span class="n">l₂</span><span class="o">)</span> <span class="bp">=</span> <span class="n">alternating_sum</span> <span class="n">l₁</span> <span class="bp">+</span> <span class="n">alternating_sum</span> <span class="n">l₂</span>
<span class="bp">|</span> <span class="o">[]</span> <span class="n">l₂</span> <span class="bp">_</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">simp</span>
<span class="bp">|</span> <span class="o">[</span><span class="bp">_</span><span class="o">]</span> <span class="n">l₂</span> <span class="n">h</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">simpa</span> <span class="kn">using</span> <span class="n">h</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">x</span> <span class="bp">::</span> <span class="n">y</span> <span class="bp">::</span> <span class="n">l₁</span><span class="o">)</span> <span class="n">l₂</span> <span class="n">h</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">alternating_sum_append_of_even_length</span> <span class="n">l₁</span> <span class="n">l₂</span> <span class="o">(</span><span class="k">by</span> <span class="n">simpa</span> <span class="o">[</span><span class="n">even_succ</span><span class="o">]</span> <span class="kn">using</span> <span class="n">h</span><span class="o">),</span> <span class="n">add_assoc</span><span class="o">]</span>

<span class="kn">lemma</span> <span class="n">alternating_sum_reverse_of_even_length</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">add_comm_group</span> <span class="n">α</span><span class="o">]</span> <span class="o">:</span>
  <span class="bp">∀</span> <span class="o">(</span><span class="n">l</span> <span class="o">:</span> <span class="n">list</span> <span class="n">α</span><span class="o">),</span> <span class="n">even</span> <span class="o">(</span><span class="n">length</span> <span class="n">l</span><span class="o">)</span> <span class="bp">→</span> <span class="n">alternating_sum</span> <span class="o">(</span><span class="n">reverse</span> <span class="n">l</span><span class="o">)</span> <span class="bp">=</span> <span class="bp">-</span><span class="n">alternating_sum</span> <span class="n">l</span>
<span class="bp">|</span> <span class="o">[]</span> <span class="bp">_</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">simp</span>
<span class="bp">|</span> <span class="o">[</span><span class="bp">_</span><span class="o">]</span> <span class="n">h</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">simpa</span> <span class="kn">using</span> <span class="n">h</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">x</span> <span class="bp">::</span> <span class="n">y</span> <span class="bp">::</span> <span class="n">l</span><span class="o">)</span> <span class="n">h</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">replace</span> <span class="n">h</span> <span class="o">:</span> <span class="n">even</span> <span class="o">(</span><span class="n">length</span> <span class="n">l</span><span class="o">),</span> <span class="k">by</span> <span class="n">simpa</span> <span class="o">[</span><span class="n">even_succ</span><span class="o">]</span> <span class="kn">using</span> <span class="n">h</span><span class="o">,</span>
  <span class="n">simp</span> <span class="o">[</span><span class="n">alternating_sum_append_of_even_length</span> <span class="o">(</span><span class="n">reverse</span> <span class="n">l</span><span class="o">)</span> <span class="o">[</span><span class="n">y</span><span class="o">,</span> <span class="n">x</span><span class="o">]</span> <span class="o">((</span><span class="n">length_reverse</span> <span class="n">l</span><span class="o">)</span><span class="bp">.</span><span class="n">symm</span> <span class="bp">▸</span> <span class="n">h</span><span class="o">),</span>
        <span class="n">alternating_sum_reverse_of_even_length</span> <span class="n">l</span> <span class="n">h</span><span class="o">]</span>
<span class="kn">end</span>
</code></pre></div>



<a name="207052320"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Canonical%20form%20for%20%22n%20is%20even%22/near/207052320" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Wong <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Canonical.20form.20for.20.22n.20is.20even.22.html#207052320">(Aug 16 2020 at 03:23)</a>:</h4>
<p>I'll try Alex's generalization later unless someone else gets to it first</p>



<a name="207636397"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Canonical%20form%20for%20%22n%20is%20even%22/near/207636397" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Wong <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Canonical.20form.20for.20.22n.20is.20even.22.html#207636397">(Aug 21 2020 at 13:53)</a>:</h4>
<p><span aria-label="octopus" class="emoji emoji-1f419" role="img" title="octopus">:octopus:</span> </p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="n">data</span><span class="bp">.</span><span class="n">list</span><span class="bp">.</span><span class="n">basic</span>
<span class="kn">import</span> <span class="n">algebra</span><span class="bp">.</span><span class="n">group_power</span>
<span class="kn">open</span> <span class="n">list</span>

<span class="bp">@</span><span class="o">[</span><span class="n">simp</span><span class="o">]</span>
<span class="kn">lemma</span> <span class="n">alternating_sum_nil</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">has_zero</span> <span class="n">α</span><span class="o">]</span> <span class="o">[</span><span class="n">has_add</span> <span class="n">α</span><span class="o">]</span> <span class="o">[</span><span class="n">has_neg</span> <span class="n">α</span><span class="o">]</span> <span class="o">:</span> <span class="n">alternating_sum</span> <span class="o">(</span><span class="bp">@</span><span class="n">nil</span> <span class="n">α</span><span class="o">)</span> <span class="bp">=</span> <span class="mi">0</span> <span class="o">:=</span> <span class="n">rfl</span>

<span class="kn">lemma</span> <span class="n">alternating_sum_cons</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">add_comm_group</span> <span class="n">α</span><span class="o">]</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">α</span><span class="o">)</span> <span class="o">(</span><span class="n">l</span> <span class="o">:</span> <span class="n">list</span> <span class="n">α</span><span class="o">),</span> <span class="n">alternating_sum</span> <span class="o">(</span><span class="n">x</span> <span class="bp">::</span> <span class="n">l</span><span class="o">)</span> <span class="bp">=</span> <span class="n">x</span> <span class="bp">-</span> <span class="n">alternating_sum</span> <span class="n">l</span>
<span class="bp">|</span> <span class="n">x</span> <span class="o">[]</span> <span class="o">:=</span> <span class="o">(</span><span class="n">sub_zero</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">symm</span>
<span class="bp">|</span> <span class="n">x</span> <span class="o">(</span><span class="n">y</span> <span class="bp">::</span> <span class="n">l</span><span class="o">)</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">rw</span> <span class="o">[</span><span class="n">alternating_sum_cons_cons</span><span class="o">,</span> <span class="n">alternating_sum_cons</span> <span class="n">y</span> <span class="n">l</span><span class="o">,</span> <span class="n">sub_add</span><span class="o">]</span>

<span class="kn">lemma</span> <span class="n">alternating_sum_append</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">add_comm_group</span> <span class="n">α</span><span class="o">]</span> <span class="o">:</span>
<span class="bp">∀</span> <span class="o">(</span><span class="n">l₁</span> <span class="n">l₂</span> <span class="o">:</span> <span class="n">list</span> <span class="n">α</span><span class="o">),</span> <span class="n">alternating_sum</span> <span class="o">(</span><span class="n">l₁</span> <span class="bp">++</span> <span class="n">l₂</span><span class="o">)</span> <span class="bp">=</span> <span class="n">alternating_sum</span> <span class="n">l₁</span> <span class="bp">+</span> <span class="o">(</span><span class="bp">-</span><span class="mi">1</span><span class="o">)</span> <span class="bp">^</span> <span class="n">l₁</span><span class="bp">.</span><span class="n">length</span> <span class="err">•</span><span class="bp">ℤ</span> <span class="n">alternating_sum</span> <span class="n">l₂</span>
<span class="bp">|</span> <span class="o">[]</span> <span class="n">l₂</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">simp</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">x</span> <span class="bp">::</span> <span class="n">l₁</span><span class="o">)</span> <span class="n">l₂</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="k">have</span> <span class="n">h</span> <span class="o">:=</span> <span class="n">alternating_sum_append</span> <span class="n">l₁</span> <span class="n">l₂</span><span class="o">,</span>
  <span class="n">simp</span> <span class="o">[</span><span class="n">alternating_sum_cons</span><span class="o">,</span> <span class="n">pow_succ</span><span class="o">,</span> <span class="n">sub_add</span><span class="o">,</span> <span class="n">h</span><span class="o">]</span>
<span class="kn">end</span>
</code></pre></div>


<p>Now I wonder if it's safe to put <code>@[simp]</code> on <code>alternating_sum_cons</code>...</p>



<a name="207639294"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Canonical%20form%20for%20%22n%20is%20even%22/near/207639294" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Canonical.20form.20for.20.22n.20is.20even.22.html#207639294">(Aug 21 2020 at 14:19)</a>:</h4>
<p>Yes I think that looks like a great simp lemma</p>



<a name="207703042"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Canonical%20form%20for%20%22n%20is%20even%22/near/207703042" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Wong <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Canonical.20form.20for.20.22n.20is.20even.22.html#207703042">(Aug 22 2020 at 02:26)</a>:</h4>
<p>I agree! My concern is about this existing lemma:</p>
<div class="codehilite"><pre><span></span><code><span class="bp">@</span><span class="o">[</span><span class="n">simp</span><span class="o">]</span>
 <span class="kn">theorem</span> <span class="n">alternating_sum_cons_cons&#39;</span> <span class="o">{</span><span class="n">G</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">add_comm_group</span> <span class="n">G</span><span class="o">]</span> <span class="o">(</span><span class="n">g</span> <span class="n">h</span> <span class="o">:</span> <span class="n">G</span><span class="o">)</span> <span class="o">(</span><span class="n">l</span> <span class="o">:</span> <span class="n">list</span> <span class="n">G</span><span class="o">)</span> <span class="o">:</span>
  <span class="o">(</span><span class="n">g</span> <span class="bp">::</span> <span class="n">h</span> <span class="bp">::</span> <span class="n">l</span><span class="o">)</span><span class="bp">.</span><span class="n">alternating_sum</span> <span class="bp">=</span> <span class="n">g</span> <span class="bp">+</span> <span class="bp">-</span><span class="n">h</span> <span class="bp">+</span> <span class="n">l</span><span class="bp">.</span><span class="n">alternating_sum</span> <span class="o">:=</span> <span class="n">rfl</span>
</code></pre></div>


<p>That'll probably conflict with <code>alternating_sum_cons</code>, right? I guess I'll have to try and see</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>