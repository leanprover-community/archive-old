---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/apply_ite.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/apply_ite.html">apply_ite</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="202052459"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/apply_ite/near/202052459" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/apply_ite.html#202052459">(Jun 26 2020 at 04:44)</a>:</h4>
<div class="codehilite"><pre><span></span><code><span class="c1">-- How is this not in mathlib?!</span>
<span class="kn">lemma</span> <span class="n">apply_ite</span> <span class="o">{</span><span class="n">α</span> <span class="n">β</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">β</span><span class="o">)</span> <span class="o">(</span><span class="n">P</span> <span class="o">:</span> <span class="kt">Prop</span><span class="o">)</span> <span class="o">[</span><span class="n">decidable</span> <span class="n">P</span><span class="o">]</span> <span class="o">(</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">α</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">f</span> <span class="o">(</span><span class="n">ite</span> <span class="n">P</span> <span class="n">x</span> <span class="n">y</span><span class="o">)</span> <span class="bp">=</span> <span class="n">ite</span> <span class="n">P</span> <span class="o">(</span><span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="o">(</span><span class="n">f</span> <span class="n">y</span><span class="o">)</span> <span class="o">:=</span>
<span class="k">by</span> <span class="n">split_ifs</span><span class="bp">;</span> <span class="n">refl</span>
</code></pre></div>


<p>Is this already somewhere in mathlib? If not, can I put it in <code>logic/basic.lean</code>?</p>



<a name="202052467"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/apply_ite/near/202052467" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/apply_ite.html#202052467">(Jun 26 2020 at 04:45)</a>:</h4>
<p>Surely there is some existing colloquial way to push a function inside an <code>if</code>...?</p>



<a name="202053785"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/apply_ite/near/202053785" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/apply_ite.html#202053785">(Jun 26 2020 at 05:18)</a>:</h4>
<p>Sounds like a good idea!</p>



<a name="202054143"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/apply_ite/near/202054143" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Stevens <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/apply_ite.html#202054143">(Jun 26 2020 at 05:28)</a>:</h4>
<p>Naive naming question: is this really "apply"? In the "applicative functor" sense, "apply" has the signature <code>F (A -&gt; B) -&gt; F A -&gt; F B</code>, which is the first thing I think of. My guess would have been something like "interchange".</p>



<a name="202054816"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/apply_ite/near/202054816" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/apply_ite.html#202054816">(Jun 26 2020 at 05:44)</a>:</h4>
<p>in mathlib apply means applying a function to an input</p>



<a name="202057662"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/apply_ite/near/202057662" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/apply_ite.html#202057662">(Jun 26 2020 at 06:52)</a>:</h4>
<p>We probably also wants its friend:</p>
<div class="codehilite"><pre><span></span><code><span class="kn">lemma</span> <span class="n">ite_apply</span> <span class="o">{</span><span class="n">α</span><span class="o">}</span> <span class="o">{</span><span class="n">β</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">(</span><span class="n">P</span> <span class="o">:</span> <span class="kt">Prop</span><span class="o">)</span> <span class="o">[</span><span class="n">decidable</span> <span class="n">P</span><span class="o">]</span> <span class="o">(</span><span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="bp">Π</span> <span class="n">x</span><span class="o">,</span> <span class="n">β</span> <span class="n">x</span><span class="o">)</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">α</span><span class="o">)</span> <span class="o">:</span>
  <span class="o">(</span><span class="n">ite</span> <span class="n">P</span> <span class="n">f</span> <span class="n">g</span><span class="o">)</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">ite</span> <span class="n">P</span> <span class="o">(</span><span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="o">(</span><span class="n">g</span> <span class="n">x</span><span class="o">)</span> <span class="o">:=</span>
<span class="k">by</span> <span class="n">split_ifs</span><span class="bp">;</span> <span class="n">refl</span>
</code></pre></div>



<a name="202082198"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/apply_ite/near/202082198" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/apply_ite.html#202082198">(Jun 26 2020 at 12:16)</a>:</h4>
<p>all in mathlib now, part of <a href="https://github.com/leanprover-community/mathlib/issues/3177">#3177</a></p>



<a name="202207327"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/apply_ite/near/202207327" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Simon Hudon <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/apply_ite.html#202207327">(Jun 27 2020 at 22:12)</a>:</h4>
<p>I don't think it will behave well with <code>simp</code> and <code>rw</code> because the outer function on the lhs is a variable</p>



<a name="202211247"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/apply_ite/near/202211247" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/apply_ite.html#202211247">(Jun 28 2020 at 00:11)</a>:</h4>
<p>Yes. To use it you need to write <code>simp [ite_apply _ f]</code>, etc. Maybe I should add a doc-string to that effect.</p>



<a name="202211291"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/apply_ite/near/202211291" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Simon Hudon <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/apply_ite.html#202211291">(Jun 28 2020 at 00:12)</a>:</h4>
<p>Could it be worth having a specialized version of <code>rw</code> to make it more usable?</p>



<a name="202211497"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/apply_ite/near/202211497" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/apply_ite.html#202211497">(Jun 28 2020 at 00:19)</a>:</h4>
<p>Sounds interesting!</p>



<a name="202211504"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/apply_ite/near/202211504" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Simon Hudon <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/apply_ite.html#202211504">(Jun 28 2020 at 00:19)</a>:</h4>
<p>I'd start it with <code>generalize h : ite _ _ _ = x</code></p>



<a name="202211700"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/apply_ite/near/202211700" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/apply_ite.html#202211700">(Jun 28 2020 at 00:25)</a>:</h4>
<p>Could we possibly do something much more general? That is not <code>ite</code> specific in any way, but just tries to do rewriting even without being able to key on the head symbol (because it could be a metavariable).</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>