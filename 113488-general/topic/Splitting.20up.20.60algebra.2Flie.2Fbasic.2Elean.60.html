---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/Splitting.20up.20.60algebra.2Flie.2Fbasic.2Elean.60.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Splitting.20up.20.60algebra.2Flie.2Fbasic.2Elean.60.html">Splitting up `algebra/lie/basic.lean`</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="225608592"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Splitting%20up%20%60algebra/lie/basic.lean%60/near/225608592" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Splitting.20up.20.60algebra.2Flie.2Fbasic.2Elean.60.html#225608592">(Feb 08 2021 at 21:08)</a>:</h4>
<p>The file <code>algebra/lie/classical.lean</code> is currently 2224 lines long. I think it would be helpful to split it up, and I am keen to attempt this. With this in mind, I have sketched out a plan for refactoring below. I would be grateful for any feedback, even (indeed especially) if it differs wildly from what I sketch out below. Please also feel free to ignore my lengthy waffle and just offer general remarks.</p>



<a name="225608627"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Splitting%20up%20%60algebra/lie/basic.lean%60/near/225608627" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Splitting.20up.20.60algebra.2Flie.2Fbasic.2Elean.60.html#225608627">(Feb 08 2021 at 21:09)</a>:</h4>
<ol start="0">
<li>
<p>Details aside:</p>
<ul>
<li>Are people in favour of a refactor with the primary goal of splitting up this relatively large file?</li>
<li>Is it acceptable to attempt such a refactor with one enormous PR? This is my preference because I worry about losing momentum but of course I welcome dissenting opinions.</li>
</ul>
</li>
</ol>



<a name="225608647"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Splitting%20up%20%60algebra/lie/basic.lean%60/near/225608647" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Splitting.20up.20.60algebra.2Flie.2Fbasic.2Elean.60.html#225608647">(Feb 08 2021 at 21:09)</a>:</h4>
<ol>
<li>
<p>I propose:</p>
<ul>
<li>Prioritising progress over perfection</li>
<li>
<p>Concentrating on splitting up <code>algebra/lie/basic.lean</code> and not worrying about the other Lie theory files files, which are:</p>
<ul>
<li><code>algebra/lie/classical.lean</code></li>
<li><code>algebra/lie/direct_sum.lean</code></li>
<li><code>algebra/lie/skew_adjoint.lean</code></li>
<li><code>algebra/lie/universal_enveloping.lean</code><br>
and which, I claim, are in comparatively good shape anyway.</li>
</ul>
</li>
<li>
<p>Trying not to include anything new. Mostly preferring to note any gaps / possible improvements which I notice, rather than bundling them up with what may well be hard-to-review changes.</p>
</li>
</ul>
</li>
</ol>



<a name="225608669"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Splitting%20up%20%60algebra/lie/basic.lean%60/near/225608669" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Splitting.20up.20.60algebra.2Flie.2Fbasic.2Elean.60.html#225608669">(Feb 08 2021 at 21:09)</a>:</h4>
<ol start="2">
<li>
<p>I propose aiming to split <code>algebra/lie/basic.lean</code> into the following 10 files with<br>
  contents approximately as indicated:</p>
<ul>
<li>
<p><code>algebra/lie/basic.lean</code>:</p>
<ul>
<li>definitions of Lie rings, algebras, modules</li>
<li>morphisms, equivs of the above<br>
(this should essentially just be a truncation of <code>algebra/lie/basic.lean</code> at about line 442)</li>
</ul>
</li>
<li>
<p><code>algebra/lie/subalgebra.lean</code>:</p>
<ul>
<li>definition of Lie subalgebras</li>
<li>closely related definitions / results including:<ul>
<li><code>lie_subalgebra.incl</code></li>
<li><code>lie_subalgebra.map</code></li>
<li><code>lie_algebra.morphism.range</code></li>
<li><code>lie_algebra.equiv.of_injective</code></li>
<li><code>lie_algebra.equiv.of_eq</code></li>
<li><code>lie_algebra.equiv.of_subalgebras</code></li>
</ul>
</li>
</ul>
</li>
<li><code>algebra/lie/of_associative.lean</code>:<ul>
<li>Lie algebra obtained from associative algebra via commutator</li>
<li>handful of related results (assoc subalgebras yield Lie subalgebras, Abelian iff commutative, ...)</li>
<li>Lie module as Lie morphism to Lie algebra of endomorphisms (in particular adjoint action)</li>
</ul>
</li>
<li><code>algebra/lie/submodule.lean</code>:<ul>
<li>definition of Lie submodules, Lie ideals</li>
<li>lattice structure</li>
<li>closely related definitions / results including:<ul>
<li><code>lie_submodule.incl</code></li>
<li><code>lie_submodule.map</code></li>
<li><code>lie_submodule.comap</code></li>
<li><code>lie_algebra.morphism.ker</code></li>
<li><code>lie_algebra.morphism.ideal_range</code></li>
<li><code>lie_ideal.map_comap_eq</code></li>
<li><code>lie_ideal.comap_map_eq</code></li>
</ul>
</li>
</ul>
</li>
<li><code>algebra/lie/ideal_operations.lean</code>:<ul>
<li>the bracket operation of Lie ideals on Lie submodules of a Lie module</li>
<li>closely related definitions / results including:<ul>
<li><code>lie_submodule.lie_ideal_oper_eq_linear_span</code></li>
<li><code>lie_submodule.lie_abelian_iff_lie_self_eq_bot</code></li>
<li><code>lie_ideal.comap_bracket_incl_of_le</code></li>
</ul>
</li>
</ul>
</li>
<li><code>algebra/lie/solvable.lean</code><ul>
<li>definition of derived series, derived length, solvable algebras, radical</li>
<li>closely related definitions / results including:<ul>
<li><code>lie_ideal.derived_series_eq_bot_iff</code></li>
<li><code>lie_algebra.derived_abelian_of_ideal</code></li>
<li><code>lie_algebra.radical_is_solvable</code></li>
</ul>
</li>
</ul>
</li>
<li><code>algebra/lie/semisimple.lean</code><ul>
<li>definition of semisimple Lie algebras</li>
<li>closely related definitions / results including:<ul>
<li><code>lie_algebra.is_semisimple_iff_no_solvable_ideals</code></li>
<li><code>lie_algebra.is_semisimple_of_is_simple</code></li>
</ul>
</li>
</ul>
</li>
<li><code>algebra/lie/nilpotent.lean</code>:<ul>
<li>definitions of lower central series, nilpotent modules</li>
<li>closely related definitions / results including:<ul>
<li><code>lie_module.trivial_is_nilpotent</code></li>
<li><code>lie_algebra.is_solvable_of_is_nilpotent</code></li>
</ul>
</li>
</ul>
</li>
<li>
<p><code>algebra/lie/quotient.lean</code>:<br>
  Essentially a direct copy-paste of the <code>namespace quotient</code> blob as it stands.</p>
</li>
<li>
<p><code>algebra/lie/matrix.lean</code>:<br>
  Essentially a direct copy-paste of the <code>section matrices</code> blob as it stands.</p>
</li>
</ul>
</li>
</ol>



<a name="225608682"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Splitting%20up%20%60algebra/lie/basic.lean%60/near/225608682" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Splitting.20up.20.60algebra.2Flie.2Fbasic.2Elean.60.html#225608682">(Feb 08 2021 at 21:09)</a>:</h4>
<ol start="3">
<li>
<p>I propose the following changes to the namespaces which are created in <code>algebra/lie/basic.lean</code>:</p>
<ul>
<li>remove <code>ring_commutator</code> and use extant <code>ring</code>, <code>algebra</code> namespaces instead</li>
<li>rename <code>lie_algebra.morphism</code> → <code>lie_hom</code></li>
<li>rename <code>lie_algebra.equiv</code> → <code>lie_equiv</code></li>
</ul>
<p>For reference, here is a summary of all namespaces currently created in <code>algebra/lie/basic.lean</code>:</p>
<ul>
<li>Those with correpsonding classes:<ul>
<li><code>Type</code>-valued:<ul>
<li><code>lie_ring</code></li>
<li><code>lie_algebra</code></li>
<li><code>lie_ring_module</code></li>
<li><code>lie_module</code></li>
</ul>
</li>
<li><code>Prop</code>-valued:<ul>
<li><code>lie_module.is_trivial</code></li>
<li><code>lie_module.is_irreducible</code></li>
<li><code>lie_module.is_nilpotent</code></li>
<li><code>lie_algebra.is_simple</code></li>
<li><code>lie_algebra.is_solvable</code></li>
<li><code>lie_algebra.is_semisimple</code></li>
</ul>
</li>
</ul>
</li>
<li>Those with corresponding non-class structures:<ul>
<li><code>lie_algebra.morphism</code></li>
<li><code>lie_algebra.equiv</code></li>
<li><code>lie_module_hom</code></li>
<li><code>lie_module_equiv</code></li>
<li><code>lie_subalgebra</code></li>
<li><code>lie_submodule</code></li>
</ul>
</li>
<li>Two other namespaces created directly (i.e., not via class or structure):<ul>
<li><code>ring_commutator</code></li>
<li><code>lie_submodule.quotient</code></li>
</ul>
</li>
</ul>
</li>
</ol>



<a name="225608765"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Splitting%20up%20%60algebra/lie/basic.lean%60/near/225608765" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Splitting.20up.20.60algebra.2Flie.2Fbasic.2Elean.60.html#225608765">(Feb 08 2021 at 21:10)</a>:</h4>
<ol start="4">
<li>
<p>I propose the following bonus changes, related the the proposed namespace changes:</p>
<ul>
<li>Use <code>set_option old_structure_cmd true</code> for <code>lie_algebra.is_simple</code></li>
<li>Rename the field <code>map_lie</code> in the structure <code>lie_module_hom</code> to <code>map_lie'</code> so that we can swap the roles of <code>lie_module_hom.map_lie</code> and <code>lie_module_hom.map_lie'</code> for consistency with  naming conventions elsewhere in Mathlib.</li>
<li>Rename the field <code>map_lie</code> in the structure <code>lie_algebra.morphism</code> to <code>map_lie'</code> so that if we rename <code>lie_algebra.morphism</code> to <code>lie_hom</code> we can still have a <code>simp</code> lemma named <code>map_lie</code>. Currently this is not an issue because the field <code>map_lie</code> lives in <code>lie_algebra.morphism</code> and the <code>simp</code> lemma <code>map_lie</code> lives in <code>lie_algebra</code> but this solution evaporates if we collapse the namespace <code>lie_algebra.morhpism</code> to just <code>lie_hom</code> as I propose above. See also <a href="https://github.com/leanprover-community/mathlib/pull/5794#discussion_r560045647">this comment</a> about enabling dot notation for <code>map_zero</code> which should be addressed as part of these changes.</li>
</ul>
</li>
</ol>



<a name="225608828"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Splitting%20up%20%60algebra/lie/basic.lean%60/near/225608828" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Splitting.20up.20.60algebra.2Flie.2Fbasic.2Elean.60.html#225608828">(Feb 08 2021 at 21:11)</a>:</h4>
<p>Pure file splitting can be done in one big PR, but it's best if you don't make too many side changes at the same time because it doesn't show up well in the git log</p>



<a name="225608884"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Splitting%20up%20%60algebra/lie/basic.lean%60/near/225608884" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Splitting.20up.20.60algebra.2Flie.2Fbasic.2Elean.60.html#225608884">(Feb 08 2021 at 21:11)</a>:</h4>
<p>Thanks, that's helpful. Already that suggests perhaps I should attempt items 2, 3, 4 in three successive PRs.</p>



<a name="225609076"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Splitting%20up%20%60algebra/lie/basic.lean%60/near/225609076" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Splitting.20up.20.60algebra.2Flie.2Fbasic.2Elean.60.html#225609076">(Feb 08 2021 at 21:13)</a>:</h4>
<p>I think this looks like a very solid plan. If possible, I would try to first make a PR that only splits things, and then touch up everything in follow-up PRs.</p>



<a name="225609176"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Splitting%20up%20%60algebra/lie/basic.lean%60/near/225609176" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Splitting.20up.20.60algebra.2Flie.2Fbasic.2Elean.60.html#225609176">(Feb 08 2021 at 21:14)</a>:</h4>
<p>Thanks also, the more I think about it, the more I think this would be easiest for me too.</p>



<a name="225609185"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Splitting%20up%20%60algebra/lie/basic.lean%60/near/225609185" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Splitting.20up.20.60algebra.2Flie.2Fbasic.2Elean.60.html#225609185">(Feb 08 2021 at 21:14)</a>:</h4>
<p>On the other hand, you know this part of the library best. And I don't think there a many dependencies on it (yet). So there is some leeway on the "no big PRs rule"</p>



<a name="225609210"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Splitting%20up%20%60algebra/lie/basic.lean%60/near/225609210" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Splitting.20up.20.60algebra.2Flie.2Fbasic.2Elean.60.html#225609210">(Feb 08 2021 at 21:14)</a>:</h4>
<p>Yes, that's a very general principle. You still need to cope with namespaces and variables commands, that's enough trouble even if you only try a pure split.</p>



<a name="225609307"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Splitting%20up%20%60algebra/lie/basic.lean%60/near/225609307" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Splitting.20up.20.60algebra.2Flie.2Fbasic.2Elean.60.html#225609307">(Feb 08 2021 at 21:15)</a>:</h4>
<p>Note this is <em>much</em> easier than in the pre-linter era where it was very easy to add unnecessary assumptions in such a move.</p>



<a name="225609357"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Splitting%20up%20%60algebra/lie/basic.lean%60/near/225609357" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Splitting.20up.20.60algebra.2Flie.2Fbasic.2Elean.60.html#225609357">(Feb 08 2021 at 21:15)</a>:</h4>
<p>Great point.</p>



<a name="225609379"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Splitting%20up%20%60algebra/lie/basic.lean%60/near/225609379" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Splitting.20up.20.60algebra.2Flie.2Fbasic.2Elean.60.html#225609379">(Feb 08 2021 at 21:16)</a>:</h4>
<p>Ideally you should be able to check that exported declarations don't change.</p>



<a name="225609459"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Splitting%20up%20%60algebra/lie/basic.lean%60/near/225609459" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Splitting.20up.20.60algebra.2Flie.2Fbasic.2Elean.60.html#225609459">(Feb 08 2021 at 21:16)</a>:</h4>
<p>But keeping the ordering of arguments will be very difficult.</p>



<a name="225609481"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Splitting%20up%20%60algebra/lie/basic.lean%60/near/225609481" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Splitting.20up.20.60algebra.2Flie.2Fbasic.2Elean.60.html#225609481">(Feb 08 2021 at 21:16)</a>:</h4>
<p>(I mean implicit and type class arguments).</p>



<a name="225609506"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Splitting%20up%20%60algebra/lie/basic.lean%60/near/225609506" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Splitting.20up.20.60algebra.2Flie.2Fbasic.2Elean.60.html#225609506">(Feb 08 2021 at 21:16)</a>:</h4>
<p>Yes, understood. I think it would basically be impossible to avoid such reordering.</p>



<a name="225609513"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Splitting%20up%20%60algebra/lie/basic.lean%60/near/225609513" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Splitting.20up.20.60algebra.2Flie.2Fbasic.2Elean.60.html#225609513">(Feb 08 2021 at 21:16)</a>:</h4>
<p>You can still try to use leanproject export to yaml to inspect that.</p>



<a name="225609538"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Splitting%20up%20%60algebra/lie/basic.lean%60/near/225609538" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Splitting.20up.20.60algebra.2Flie.2Fbasic.2Elean.60.html#225609538">(Feb 08 2021 at 21:17)</a>:</h4>
<p>I'd love to try that!</p>



<a name="225609563"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Splitting%20up%20%60algebra/lie/basic.lean%60/near/225609563" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Splitting.20up.20.60algebra.2Flie.2Fbasic.2Elean.60.html#225609563">(Feb 08 2021 at 21:17)</a>:</h4>
<p>Is there an easy example of how to ask <code>leanproject</code> to do this?</p>



<a name="225609572"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Splitting%20up%20%60algebra/lie/basic.lean%60/near/225609572" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Splitting.20up.20.60algebra.2Flie.2Fbasic.2Elean.60.html#225609572">(Feb 08 2021 at 21:17)</a>:</h4>
<p>With some python smallish python work you could even check the yaml export up to reordering</p>



<a name="225609597"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Splitting%20up%20%60algebra/lie/basic.lean%60/near/225609597" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Splitting.20up.20.60algebra.2Flie.2Fbasic.2Elean.60.html#225609597">(Feb 08 2021 at 21:17)</a>:</h4>
<p>I hope this is covered in the documentation</p>



<a name="225609667"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Splitting%20up%20%60algebra/lie/basic.lean%60/near/225609667" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Splitting.20up.20.60algebra.2Flie.2Fbasic.2Elean.60.html#225609667">(Feb 08 2021 at 21:18)</a>:</h4>
<p>Ah another case of RTFM :-) I'll look now.</p>



<a name="225609729"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Splitting%20up%20%60algebra/lie/basic.lean%60/near/225609729" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Splitting.20up.20.60algebra.2Flie.2Fbasic.2Elean.60.html#225609729">(Feb 08 2021 at 21:18)</a>:</h4>
<p>At least you can <code>leanproject  decls --help</code></p>



<a name="225609833"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Splitting%20up%20%60algebra/lie/basic.lean%60/near/225609833" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Splitting.20up.20.60algebra.2Flie.2Fbasic.2Elean.60.html#225609833">(Feb 08 2021 at 21:19)</a>:</h4>
<p>There is isn't much to say: make sure your mathlib is fully built, run <code>leanproject decls</code> and go get a coffee (or beer, depending on your local time and CPU power).</p>



<a name="225609867"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Splitting%20up%20%60algebra/lie/basic.lean%60/near/225609867" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Splitting.20up.20.60algebra.2Flie.2Fbasic.2Elean.60.html#225609867">(Feb 08 2021 at 21:19)</a>:</h4>
<p>That will dump a self-explanatory <code>decls.yaml</code></p>



<a name="225609895"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Splitting%20up%20%60algebra/lie/basic.lean%60/near/225609895" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Splitting.20up.20.60algebra.2Flie.2Fbasic.2Elean.60.html#225609895">(Feb 08 2021 at 21:20)</a>:</h4>
<p>I see, excellent. Thanks, I'll try that.</p>



<a name="225609943"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Splitting%20up%20%60algebra/lie/basic.lean%60/near/225609943" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Splitting.20up.20.60algebra.2Flie.2Fbasic.2Elean.60.html#225609943">(Feb 08 2021 at 21:20)</a>:</h4>
<p>Then you can inspect this yaml using any programming language you like.</p>



<a name="225610048"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Splitting%20up%20%60algebra/lie/basic.lean%60/near/225610048" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Splitting.20up.20.60algebra.2Flie.2Fbasic.2Elean.60.html#225610048">(Feb 08 2021 at 21:21)</a>:</h4>
<p>wait</p>



<a name="225610061"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Splitting%20up%20%60algebra/lie/basic.lean%60/near/225610061" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Splitting.20up.20.60algebra.2Flie.2Fbasic.2Elean.60.html#225610061">(Feb 08 2021 at 21:21)</a>:</h4>
<p>Understood. I'd probably reach for Python as you suggest though I'm reluctant to commit to guaranteeing identical exports modulo reordering until I've made an attempt.</p>



<a name="225610077"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Splitting%20up%20%60algebra/lie/basic.lean%60/near/225610077" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Splitting.20up.20.60algebra.2Flie.2Fbasic.2Elean.60.html#225610077">(Feb 08 2021 at 21:21)</a>:</h4>
<p>Maybe I'm confused by my own mess of tools.</p>



<a name="225610109"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Splitting%20up%20%60algebra/lie/basic.lean%60/near/225610109" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Splitting.20up.20.60algebra.2Flie.2Fbasic.2Elean.60.html#225610109">(Feb 08 2021 at 21:21)</a>:</h4>
<p>Maybe the version in <code>leanproject</code> only dumps enough information for use in the blueprint machine.</p>



<a name="225610217"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Splitting%20up%20%60algebra/lie/basic.lean%60/near/225610217" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Splitting.20up.20.60algebra.2Flie.2Fbasic.2Elean.60.html#225610217">(Feb 08 2021 at 21:22)</a>:</h4>
<p>If this is true then you'll need the one from <code>leancrawler</code></p>



<a name="225610224"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Splitting%20up%20%60algebra/lie/basic.lean%60/near/225610224" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Splitting.20up.20.60algebra.2Flie.2Fbasic.2Elean.60.html#225610224">(Feb 08 2021 at 21:22)</a>:</h4>
<p>Well I've kicked it off here anyway so I'll find out in the not-too-distant future.</p>



<a name="225610246"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Splitting%20up%20%60algebra/lie/basic.lean%60/near/225610246" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Splitting.20up.20.60algebra.2Flie.2Fbasic.2Elean.60.html#225610246">(Feb 08 2021 at 21:22)</a>:</h4>
<p>And of course Rob's lean-doc also builds all the relevant information</p>



<a name="225610548"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Splitting%20up%20%60algebra/lie/basic.lean%60/near/225610548" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Splitting.20up.20.60algebra.2Flie.2Fbasic.2Elean.60.html#225610548">(Feb 08 2021 at 21:24)</a>:</h4>
<p>OK thanks. It would be great if I could lean on such tooling to deliver a certificate that any changes I propose conform to a contract I claim. I have a free day tomorrow so I will attempt this then.</p>



<a name="225611471"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Splitting%20up%20%60algebra/lie/basic.lean%60/near/225611471" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Splitting.20up.20.60algebra.2Flie.2Fbasic.2Elean.60.html#225611471">(Feb 08 2021 at 21:32)</a>:</h4>
<p>It's definitely doable, only a matter of time and energy to put in.</p>



<a name="225611814"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Splitting%20up%20%60algebra/lie/basic.lean%60/near/225611814" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Splitting.20up.20.60algebra.2Flie.2Fbasic.2Elean.60.html#225611814">(Feb 08 2021 at 21:34)</a>:</h4>
<p>The version in <code>leanproject</code> doesn't record enough information. But <a href="https://github.com/leanprover-community/leancrawler">leancrawler</a> should work.</p>



<a name="225612000"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Splitting%20up%20%60algebra/lie/basic.lean%60/near/225612000" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Splitting.20up.20.60algebra.2Flie.2Fbasic.2Elean.60.html#225612000">(Feb 08 2021 at 21:36)</a>:</h4>
<p>Thanks, I’ll definitely try it out.</p>



<a name="225617798"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Splitting%20up%20%60algebra/lie/basic.lean%60/near/225617798" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Splitting.20up.20.60algebra.2Flie.2Fbasic.2Elean.60.html#225617798">(Feb 08 2021 at 22:18)</a>:</h4>
<p>I split a 2000 line ordered_group file, 1000 lines of which were about ordered monoids, into two 1000 lines files, one called ordered_group and one called ordered_monoid. I did it because I wanted to add a bunch more stuff about ordered monoids but I really could not face editing a 2000 line file. My first PR was just to break the file in two, and to add a module docstring (and no new lemmas), and I think that breaking a file into ten files is an even better idea. Then I added more ordered monoid stuff later. Note however that what I did had the rather annoying consequence that now git blame says that every lemma about ordered monoids was written by me. I don't know if this is preventable. In your case it might well be the case that the lemmas really _are_ due to you though!</p>



<a name="225758031"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Splitting%20up%20%60algebra/lie/basic.lean%60/near/225758031" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Splitting.20up.20.60algebra.2Flie.2Fbasic.2Elean.60.html#225758031">(Feb 09 2021 at 21:11)</a>:</h4>
<p>First cut at this is now here <a href="https://github.com/leanprover-community/mathlib/pull/6141">https://github.com/leanprover-community/mathlib/pull/6141</a> I will pick it up again tomorrow.</p>



<a name="225877185"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Splitting%20up%20%60algebra/lie/basic.lean%60/near/225877185" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Splitting.20up.20.60algebra.2Flie.2Fbasic.2Elean.60.html#225877185">(Feb 10 2021 at 17:38)</a>:</h4>
<p>I claim that <span aria-label="point up" class="emoji emoji-1f446" role="img" title="point up">:point_up:</span>  PR is now ready for review. In particular I took <span class="user-mention" data-user-id="110031">@Patrick Massot</span> 's advice and used leancrawler to check the exported declarations do not change. To get this to work I had to make a trivial change to leancrawler which I have pushed up in this <a href="https://github.com/leanprover-community/leancrawler/pull/2">leancrawler PR</a>.</p>



<a name="225882482"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Splitting%20up%20%60algebra/lie/basic.lean%60/near/225882482" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Splitting.20up.20.60algebra.2Flie.2Fbasic.2Elean.60.html#225882482">(Feb 10 2021 at 18:11)</a>:</h4>
<p><span class="user-mention" data-user-id="240862">@Oliver Nash</span> thanks so much for doing this!</p>



<a name="225882579"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Splitting%20up%20%60algebra/lie/basic.lean%60/near/225882579" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Splitting.20up.20.60algebra.2Flie.2Fbasic.2Elean.60.html#225882579">(Feb 10 2021 at 18:12)</a>:</h4>
<p>The fact that you checked this using leancrawler means that we can confidently merge this</p>



<a name="225884137"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Splitting%20up%20%60algebra/lie/basic.lean%60/near/225884137" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Splitting.20up.20.60algebra.2Flie.2Fbasic.2Elean.60.html#225884137">(Feb 10 2021 at 18:24)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112680">Johan Commelin</span> <a href="#narrow/stream/113488-general/topic/Splitting.20up.20.60algebra.2Flie.2Fbasic.2Elean.60/near/225882482">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="240862">Oliver Nash</span> thanks so much for doing this!</p>
</blockquote>
<p>Thanks. Of course I'm just clearing up my own mess ;-)</p>



<a name="225983363"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Splitting%20up%20%60algebra/lie/basic.lean%60/near/225983363" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Splitting.20up.20.60algebra.2Flie.2Fbasic.2Elean.60.html#225983363">(Feb 11 2021 at 12:34)</a>:</h4>
<p>I am extremely happy that my enormous file-splitting PR has now been merged. Since I confined myself to simply moving things around in that PR I have a small amount of other refactoring still pending. In particular I propose the following changes to the namespaces which are created in the Lie theory corner of Mathlib:</p>
<p>- remove <code>ring_commutator</code> and use extant <code>ring</code>, <code>algebra</code> namespaces instead<br>
  - rename <code>lie_algebra.morphism</code> → <code>lie_hom</code><br>
  - rename <code>lie_algebra.equiv</code> → <code>lie_equiv</code></p>



<a name="225983412"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Splitting%20up%20%60algebra/lie/basic.lean%60/near/225983412" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Splitting.20up.20.60algebra.2Flie.2Fbasic.2Elean.60.html#225983412">(Feb 11 2021 at 12:34)</a>:</h4>
<p>Does this seem like a good idea?</p>



<a name="225983834"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Splitting%20up%20%60algebra/lie/basic.lean%60/near/225983834" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Splitting.20up.20.60algebra.2Flie.2Fbasic.2Elean.60.html#225983834">(Feb 11 2021 at 12:40)</a>:</h4>
<p>I like all three of them.</p>



<a name="225983919"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Splitting%20up%20%60algebra/lie/basic.lean%60/near/225983919" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Splitting.20up.20.60algebra.2Flie.2Fbasic.2Elean.60.html#225983919">(Feb 11 2021 at 12:40)</a>:</h4>
<p>OK great, I'll attempt them later this afternoon and we can see how it works out.</p>



<a name="225999861"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Splitting%20up%20%60algebra/lie/basic.lean%60/near/225999861" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Splitting.20up.20.60algebra.2Flie.2Fbasic.2Elean.60.html#225999861">(Feb 11 2021 at 14:40)</a>:</h4>
<p>I decided I'd bundle the <code>ring_commutator</code> change with some other tweaks in a final round of refactoring but I now have a PR with the other namespace changes: <a href="https://github.com/leanprover-community/mathlib/pull/6179">https://github.com/leanprover-community/mathlib/pull/6179</a></p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>