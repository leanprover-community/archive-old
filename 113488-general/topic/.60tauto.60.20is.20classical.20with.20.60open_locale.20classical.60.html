---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/.60tauto.60.20is.20classical.20with.20.60open_locale.20classical.60.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.60tauto.60.20is.20classical.20with.20.60open_locale.20classical.60.html">`tauto` is classical with `open_locale classical`</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="209884162"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%60tauto%60%20is%20classical%20with%20%60open_locale%20classical%60/near/209884162" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.60tauto.60.20is.20classical.20with.20.60open_locale.20classical.60.html#209884162">(Sep 12 2020 at 14:42)</a>:</h4>
<p>Hardly a big deal I guess?</p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="n">tactic</span>

<span class="c">/-</span><span class="cm">! boy I should update my lean -/</span>

<span class="n">open_locale</span> <span class="n">classical</span>

<span class="kn">example</span> <span class="o">(</span><span class="n">P</span> <span class="o">:</span> <span class="kt">Prop</span><span class="o">)</span> <span class="o">:</span> <span class="bp">¬</span> <span class="o">(</span><span class="bp">¬</span> <span class="n">P</span><span class="o">)</span> <span class="bp">→</span> <span class="n">P</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">tauto</span>
<span class="kn">end</span>
</code></pre></div>


<p>(Oh -- I just realised I have a super-old mathlib. Hang on.)</p>



<a name="209884457"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%60tauto%60%20is%20classical%20with%20%60open_locale%20classical%60/near/209884457" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Simon Hudon <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.60tauto.60.20is.20classical.20with.20.60open_locale.20classical.60.html#209884457">(Sep 12 2020 at 14:51)</a>:</h4>
<p>That's because <code>open_locale classical</code> makes every proposition decidable and <code>tauto</code> uses the excluded middle (and related laws) when a proposition is decidable. <code>!</code> basically just makes every proposition decidable before <code>tauto</code> gets started.</p>



<a name="209885572"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%60tauto%60%20is%20classical%20with%20%60open_locale%20classical%60/near/209885572" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.60tauto.60.20is.20classical.20with.20.60open_locale.20classical.60.html#209885572">(Sep 12 2020 at 15:20)</a>:</h4>
<p>The reason I ran into it was that I had just explicitly applied LEM in a proof and wanted to show the students that after this one application the rest of the proof was classical, so I ran <code>tauto</code> before and after the LEM application and they both worked :-) This wasn't a live lecture, just something I'm scripting for a video for undergrads.</p>



<a name="209885592"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%60tauto%60%20is%20classical%20with%20%60open_locale%20classical%60/near/209885592" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.60tauto.60.20is.20classical.20with.20.60open_locale.20classical.60.html#209885592">(Sep 12 2020 at 15:21)</a>:</h4>
<p>I thought you don't care</p>



<a name="209885753"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%60tauto%60%20is%20classical%20with%20%60open_locale%20classical%60/near/209885753" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.60tauto.60.20is.20classical.20with.20.60open_locale.20classical.60.html#209885753">(Sep 12 2020 at 15:25)</a>:</h4>
<p>I don't care, but I'm writing an optional video lecture on constructive mathematics.</p>



<a name="209885816"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%60tauto%60%20is%20classical%20with%20%60open_locale%20classical%60/near/209885816" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.60tauto.60.20is.20classical.20with.20.60open_locale.20classical.60.html#209885816">(Sep 12 2020 at 15:26)</a>:</h4>
<p>Do you think the following is true: a theorem in first order logic is true iff it can be proving using <code>intro, apply, exact, have, left, right, split, cases, have</code> and <code>classical.em</code>.</p>



<a name="209885819"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%60tauto%60%20is%20classical%20with%20%60open_locale%20classical%60/near/209885819" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.60tauto.60.20is.20classical.20with.20.60open_locale.20classical.60.html#209885819">(Sep 12 2020 at 15:26)</a>:</h4>
<p>Do I have enough tactics?</p>



<a name="209885828"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%60tauto%60%20is%20classical%20with%20%60open_locale%20classical%60/near/209885828" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.60tauto.60.20is.20classical.20with.20.60open_locale.20classical.60.html#209885828">(Sep 12 2020 at 15:26)</a>:</h4>
<p>sounds about right</p>



<a name="209885831"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%60tauto%60%20is%20classical%20with%20%60open_locale%20classical%60/near/209885831" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.60tauto.60.20is.20classical.20with.20.60open_locale.20classical.60.html#209885831">(Sep 12 2020 at 15:26)</a>:</h4>
<p>wait, first order?</p>



<a name="209885845"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%60tauto%60%20is%20classical%20with%20%60open_locale%20classical%60/near/209885845" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.60tauto.60.20is.20classical.20with.20.60open_locale.20classical.60.html#209885845">(Sep 12 2020 at 15:27)</a>:</h4>
<p>Oh</p>



<a name="209885850"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%60tauto%60%20is%20classical%20with%20%60open_locale%20classical%60/near/209885850" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.60tauto.60.20is.20classical.20with.20.60open_locale.20classical.60.html#209885850">(Sep 12 2020 at 15:27)</a>:</h4>
<p>I just mean propositional calculus, no predicates</p>



<a name="209885909"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%60tauto%60%20is%20classical%20with%20%60open_locale%20classical%60/near/209885909" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.60tauto.60.20is.20classical.20with.20.60open_locale.20classical.60.html#209885909">(Sep 12 2020 at 15:28)</a>:</h4>
<p>I don't know what this stuff is called. "Propositional logic"? The one where there's a completeness theorem that you get by using <code>(P -&gt; Q -&gt; R) -&gt; (P -&gt; Q) -&gt; (P -&gt; R)</code> for modus ponens</p>



<a name="209885927"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%60tauto%60%20is%20classical%20with%20%60open_locale%20classical%60/near/209885927" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.60tauto.60.20is.20classical.20with.20.60open_locale.20classical.60.html#209885927">(Sep 12 2020 at 15:29)</a>:</h4>
<div class="message_inline_image"><a href="https://i.stack.imgur.com/POXIt.png"><img src="https://i.stack.imgur.com/POXIt.png"></a></div>



<a name="209885947"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%60tauto%60%20is%20classical%20with%20%60open_locale%20classical%60/near/209885947" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.60tauto.60.20is.20classical.20with.20.60open_locale.20classical.60.html#209885947">(Sep 12 2020 at 15:29)</a>:</h4>
<p>yeah sounds about right</p>



<a name="209885987"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%60tauto%60%20is%20classical%20with%20%60open_locale%20classical%60/near/209885987" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.60tauto.60.20is.20classical.20with.20.60open_locale.20classical.60.html#209885987">(Sep 12 2020 at 15:30)</a>:</h4>
<p>convince yourself that you can prove everything on this list using your tactics</p>



<a name="209885998"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%60tauto%60%20is%20classical%20with%20%60open_locale%20classical%60/near/209885998" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Thorsten Altenkirch <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.60tauto.60.20is.20classical.20with.20.60open_locale.20classical.60.html#209885998">(Sep 12 2020 at 15:30)</a>:</h4>
<p>You don't need have and it should work for first order. Ah I am using constructor but I guess this is the same as intro?</p>



<a name="209886007"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%60tauto%60%20is%20classical%20with%20%60open_locale%20classical%60/near/209886007" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.60tauto.60.20is.20classical.20with.20.60open_locale.20classical.60.html#209886007">(Sep 12 2020 at 15:30)</a>:</h4>
<p>why don't you need have?</p>



<a name="209886020"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%60tauto%60%20is%20classical%20with%20%60open_locale%20classical%60/near/209886020" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Thorsten Altenkirch <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.60tauto.60.20is.20classical.20with.20.60open_locale.20classical.60.html#209886020">(Sep 12 2020 at 15:31)</a>:</h4>
<p>Ok cut elimination may not work here...</p>



<a name="209886030"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%60tauto%60%20is%20classical%20with%20%60open_locale%20classical%60/near/209886030" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.60tauto.60.20is.20classical.20with.20.60open_locale.20classical.60.html#209886030">(Sep 12 2020 at 15:31)</a>:</h4>
<p>it's good practice to use <code>have</code> anyway</p>



<a name="209886031"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%60tauto%60%20is%20classical%20with%20%60open_locale%20classical%60/near/209886031" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.60tauto.60.20is.20classical.20with.20.60open_locale.20classical.60.html#209886031">(Sep 12 2020 at 15:31)</a>:</h4>
<p>to show your steps</p>



<a name="209886038"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%60tauto%60%20is%20classical%20with%20%60open_locale%20classical%60/near/209886038" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.60tauto.60.20is.20classical.20with.20.60open_locale.20classical.60.html#209886038">(Sep 12 2020 at 15:31)</a>:</h4>
<p>also I prefer <code>refine</code> over <code>apply</code> for the same reason</p>



<a name="209886039"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%60tauto%60%20is%20classical%20with%20%60open_locale%20classical%60/near/209886039" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Thorsten Altenkirch <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.60tauto.60.20is.20classical.20with.20.60open_locale.20classical.60.html#209886039">(Sep 12 2020 at 15:31)</a>:</h4>
<p>sure I wasn't thinking about practice but about Gentzen</p>



<a name="209886056"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%60tauto%60%20is%20classical%20with%20%60open_locale%20classical%60/near/209886056" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.60tauto.60.20is.20classical.20with.20.60open_locale.20classical.60.html#209886056">(Sep 12 2020 at 15:32)</a>:</h4>
<p>basically, the less automation, the better</p>



<a name="209886082"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%60tauto%60%20is%20classical%20with%20%60open_locale%20classical%60/near/209886082" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Thorsten Altenkirch <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.60tauto.60.20is.20classical.20with.20.60open_locale.20classical.60.html#209886082">(Sep 12 2020 at 15:32)</a>:</h4>
<p>depends</p>



<a name="209887431"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%60tauto%60%20is%20classical%20with%20%60open_locale%20classical%60/near/209887431" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.60tauto.60.20is.20classical.20with.20.60open_locale.20classical.60.html#209887431">(Sep 12 2020 at 16:01)</a>:</h4>
<p>(deleted)</p>



<a name="209887591"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%60tauto%60%20is%20classical%20with%20%60open_locale%20classical%60/near/209887591" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.60tauto.60.20is.20classical.20with.20.60open_locale.20classical.60.html#209887591">(Sep 12 2020 at 16:02)</a>:</h4>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="n">tactic</span>

<span class="kn">variables</span> <span class="o">(</span><span class="n">P</span> <span class="n">Q</span> <span class="n">R</span> <span class="o">:</span> <span class="kt">Prop</span><span class="o">)</span>

<span class="kn">example</span> <span class="o">:</span> <span class="o">(</span><span class="n">P</span> <span class="bp">→</span> <span class="n">Q</span> <span class="bp">→</span> <span class="n">R</span><span class="o">)</span> <span class="bp">↔</span> <span class="o">((</span><span class="n">P</span> <span class="bp">∧</span> <span class="n">Q</span><span class="o">)</span> <span class="bp">→</span> <span class="n">R</span><span class="o">)</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">tauto</span><span class="o">,</span> <span class="c1">-- fails</span>
<span class="kn">end</span>
</code></pre></div>


<p>Is this a bug?</p>



<a name="209887924"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%60tauto%60%20is%20classical%20with%20%60open_locale%20classical%60/near/209887924" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Simon Hudon <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.60tauto.60.20is.20classical.20with.20.60open_locale.20classical.60.html#209887924">(Sep 12 2020 at 16:07)</a>:</h4>
<p><code>tauto</code> is not complete for constructive logic and doesn't do any step that it might have to undo later. It could do much better</p>



<a name="209888003"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%60tauto%60%20is%20classical%20with%20%60open_locale%20classical%60/near/209888003" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.60tauto.60.20is.20classical.20with.20.60open_locale.20classical.60.html#209888003">(Sep 12 2020 at 16:09)</a>:</h4>
<p>it works with <code>ifinish</code></p>



<a name="209890303"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%60tauto%60%20is%20classical%20with%20%60open_locale%20classical%60/near/209890303" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.60tauto.60.20is.20classical.20with.20.60open_locale.20classical.60.html#209890303">(Sep 12 2020 at 17:04)</a>:</h4>
<p>I've heard interesting things about <code>ifinish</code></p>



<a name="209890457"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%60tauto%60%20is%20classical%20with%20%60open_locale%20classical%60/near/209890457" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.60tauto.60.20is.20classical.20with.20.60open_locale.20classical.60.html#209890457">(Sep 12 2020 at 17:08)</a>:</h4>
<p>OK so the theorem is that I should be able to prove any classical logic theorem using only <code>intro, exact, apply, cases, split, left, right, exfalso</code> and <code>by_cases</code>.</p>



<a name="209890814"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%60tauto%60%20is%20classical%20with%20%60open_locale%20classical%60/near/209890814" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.60tauto.60.20is.20classical.20with.20.60open_locale.20classical.60.html#209890814">(Sep 12 2020 at 17:18)</a>:</h4>
<p>are you sure you don't need <code>have</code></p>



<a name="209891884"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%60tauto%60%20is%20classical%20with%20%60open_locale%20classical%60/near/209891884" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.60tauto.60.20is.20classical.20with.20.60open_locale.20classical.60.html#209891884">(Sep 12 2020 at 17:43)</a>:</h4>
<p>I think there might be some distance here between "in theory" and "in practice." Lean's tactic mode isn't a natural deduction system. If you allow arbitrary terms to be used with those tactics, then sure, all you need is <code>exact</code>. If you only allow atomic identifiers as proof terms, I think you'll at least need <code>have</code>. This kind of question makes more sense in term mode.</p>



<a name="209892730"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%60tauto%60%20is%20classical%20with%20%60open_locale%20classical%60/near/209892730" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.60tauto.60.20is.20classical.20with.20.60open_locale.20classical.60.html#209892730">(Sep 12 2020 at 18:01)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110064">Kenny Lau</span> <a href="#narrow/stream/113488-general/topic/.60tauto.60.20is.20classical.20with.20.60open_locale.20classical.60/near/209885987">said</a>:</p>
<blockquote>
<p>convince yourself that you can prove everything on this list using your tactics</p>
</blockquote>
<p>I proved all of those without using <code>have</code> but I'm not at all sure.</p>



<a name="209892788"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%60tauto%60%20is%20classical%20with%20%60open_locale%20classical%60/near/209892788" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.60tauto.60.20is.20classical.20with.20.60open_locale.20classical.60.html#209892788">(Sep 12 2020 at 18:02)</a>:</h4>
<p>I see, I need rules about exactly what I will allow for <code>exact</code>. I don't want to allow <code>h.2</code> or anything. Maybe I should ban <code>exact</code> and only allow <code>assumption</code></p>



<a name="209903808"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%60tauto%60%20is%20classical%20with%20%60open_locale%20classical%60/near/209903808" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.60tauto.60.20is.20classical.20with.20.60open_locale.20classical.60.html#209903808">(Sep 12 2020 at 23:05)</a>:</h4>
<p>maybe clearer to write a crippled version of <code>assumption</code>/<code>exact</code> that requires that you specify the name of the assumption.</p>



<a name="209906081"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%60tauto%60%20is%20classical%20with%20%60open_locale%20classical%60/near/209906081" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.60tauto.60.20is.20classical.20with.20.60open_locale.20classical.60.html#209906081">(Sep 13 2020 at 00:11)</a>:</h4>
<p>I'm not sure exactly what this is for, but here are versions of exact and apply that only accept local constants for proof terms. (Maybe they're correct?)</p>
<div class="codehilite"><pre><span></span><code><span class="kn">namespace</span> <span class="n">tactic</span><span class="bp">.</span><span class="n">interactive</span>

<span class="kn">open</span> <span class="n">tactic</span> <span class="n">interactive</span> <span class="n">interactive</span><span class="bp">.</span><span class="n">types</span> <span class="n">expr</span>

<span class="n">meta</span> <span class="n">def</span> <span class="n">exact&#39;</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="n">parse</span> <span class="n">texpr</span><span class="o">)</span> <span class="o">:</span> <span class="n">tactic</span> <span class="n">unit</span> <span class="o">:=</span>
<span class="n">do</span> <span class="n">tgt</span> <span class="o">:</span> <span class="n">expr</span> <span class="err">←</span> <span class="n">target</span><span class="o">,</span>
   <span class="n">x</span> <span class="err">←</span> <span class="n">i_to_expr_strict</span> <span class="bp">``</span><span class="o">(</span><span class="err">%%</span><span class="n">q</span> <span class="o">:</span> <span class="err">%%</span><span class="n">tgt</span><span class="o">),</span>
   <span class="k">match</span> <span class="n">x</span> <span class="k">with</span>
   <span class="bp">|</span> <span class="n">expr</span><span class="bp">.</span><span class="n">local_const</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span> <span class="o">:=</span> <span class="n">tactic</span><span class="bp">.</span><span class="n">exact</span> <span class="n">x</span>
   <span class="bp">|</span> <span class="bp">_</span> <span class="o">:=</span> <span class="n">fail</span> <span class="err">$</span> <span class="n">sformat</span><span class="bp">!</span> <span class="s2">&quot;you must refer to only a single proof term, not ({x})&quot;</span>
   <span class="kn">end</span>

<span class="n">meta</span> <span class="n">def</span> <span class="n">apply&#39;</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="n">parse</span> <span class="n">texpr</span><span class="o">)</span> <span class="o">:</span> <span class="n">tactic</span> <span class="n">unit</span> <span class="o">:=</span>
<span class="n">concat_tags</span> <span class="err">$</span> <span class="n">do</span>
  <span class="n">h</span> <span class="err">←</span> <span class="n">i_to_expr_for_apply</span> <span class="n">q</span><span class="o">,</span>
  <span class="k">match</span> <span class="n">h</span> <span class="k">with</span>
  <span class="bp">|</span> <span class="n">expr</span><span class="bp">.</span><span class="n">local_const</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span> <span class="o">:=</span> <span class="n">tactic</span><span class="bp">.</span><span class="n">apply</span> <span class="n">h</span>
  <span class="bp">|</span> <span class="bp">_</span> <span class="o">:=</span> <span class="n">fail</span> <span class="err">$</span> <span class="n">sformat</span><span class="bp">!</span> <span class="s2">&quot;you must refer to only a single proof term, not ({h})&quot;</span>
  <span class="kn">end</span>

<span class="kn">end</span> <span class="n">tactic</span><span class="bp">.</span><span class="n">interactive</span>

<span class="kn">example</span> <span class="o">{</span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="kt">Prop</span><span class="o">}</span> <span class="o">(</span><span class="n">h₁</span> <span class="o">:</span> <span class="n">p</span> <span class="bp">→</span> <span class="n">q</span><span class="o">)</span> <span class="o">(</span><span class="n">h₂</span> <span class="o">:</span> <span class="n">p</span> <span class="bp">∨</span> <span class="n">q</span><span class="o">)</span> <span class="o">:</span> <span class="n">q</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">cases</span> <span class="n">h₂</span><span class="o">,</span>
  <span class="c1">--exact&#39; h₁ h₂, -- fails, not a single proof term</span>
  <span class="n">apply&#39;</span> <span class="n">h₁</span><span class="o">,</span>
  <span class="n">exact&#39;</span> <span class="n">h₂</span><span class="o">,</span>
  <span class="n">exact&#39;</span> <span class="n">h₂</span><span class="o">,</span>
<span class="kn">end</span>
</code></pre></div>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>