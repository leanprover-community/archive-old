---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/CI.20issues.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/CI.20issues.html">CI issues</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="256042169"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/CI%20issues/near/256042169" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ruben Van de Velde <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/CI.20issues.html#256042169">(Oct 04 2021 at 11:23)</a>:</h4>
<p>It seems like <code>scripts/detect_errors.py</code> is failing with a syntax error, like in <a href="https://github.com/leanprover-community/mathlib/pull/9526/checks?check_run_id=3789550714">https://github.com/leanprover-community/mathlib/pull/9526/checks?check_run_id=3789550714</a> and <a href="https://github.com/leanprover-community/mathlib/pull/9443/checks?check_run_id=3789549047">https://github.com/leanprover-community/mathlib/pull/9443/checks?check_run_id=3789549047</a></p>



<a name="256042740"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/CI%20issues/near/256042740" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/CI.20issues.html#256042740">(Oct 04 2021 at 11:28)</a>:</h4>
<p>The <code>azure2</code> runner has the wrong python version installed</p>



<a name="256042780"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/CI%20issues/near/256042780" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/CI.20issues.html#256042780">(Oct 04 2021 at 11:28)</a>:</h4>
<p><span class="user-mention" data-user-id="123965">@Bryan Gin-ge Chen</span>, do you remember why we turned off the CI feature that installs the correct version of python as part of the build?</p>



<a name="256045502"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/CI%20issues/near/256045502" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/CI.20issues.html#256045502">(Oct 04 2021 at 11:54)</a>:</h4>
<p>That doesn't work for self-hosted runners I believe.</p>



<a name="256046460"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/CI%20issues/near/256046460" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/CI.20issues.html#256046460">(Oct 04 2021 at 12:02)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib/issues/9531">#9531</a></p>



<a name="256046719"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/CI%20issues/near/256046719" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/CI.20issues.html#256046719">(Oct 04 2021 at 12:04)</a>:</h4>
<p>Are there any systems where <code>python</code> == python 3.x, but where there is no <code>python3</code> executable by default?</p>



<a name="256047013"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/CI%20issues/near/256047013" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/CI.20issues.html#256047013">(Oct 04 2021 at 12:06)</a>:</h4>
<p>Not that I know of.</p>



<a name="256047160"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/CI%20issues/near/256047160" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/CI.20issues.html#256047160">(Oct 04 2021 at 12:07)</a>:</h4>
<p><a href="https://www.python.org/dev/peps/pep-0394/">PEP 394</a> recommends always providing a <code>python3</code> (or <code>python2</code>) executable and linking <code>python</code> to either one of them.</p>



<a name="256047207"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/CI%20issues/near/256047207" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/CI.20issues.html#256047207">(Oct 04 2021 at 12:08)</a>:</h4>
<p>So in general, no, that shouldn't happen.</p>



<a name="256047220"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/CI%20issues/near/256047220" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/CI.20issues.html#256047220">(Oct 04 2021 at 12:08)</a>:</h4>
<p>Ok, so this is a no-brainer. Let's merge it.</p>



<a name="256047994"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/CI%20issues/near/256047994" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/CI.20issues.html#256047994">(Oct 04 2021 at 12:14)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110043">Gabriel Ebner</span> <a href="#narrow/stream/113488-general/topic/CI.20issues/near/256047013">said</a>:</p>
<blockquote>
<p>Not that I know of.</p>
</blockquote>
<p>Do venvs create both versions?</p>



<a name="256048241"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/CI%20issues/near/256048241" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/CI.20issues.html#256048241">(Oct 04 2021 at 12:16)</a>:</h4>
<p>At least my venv does: <code>python</code>, <code>python3</code>, and <code>python3.9</code></p>



<a name="256061182"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/CI%20issues/near/256061182" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ruben Van de Velde <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/CI.20issues.html#256061182">(Oct 04 2021 at 13:44)</a>:</h4>
<p>I wonder why bors decided to run <a href="https://github.com/leanprover-community/mathlib/issues/9469">#9469</a> rather than <a href="https://github.com/leanprover-community/mathlib/issues/9531">#9531</a></p>



<a name="256067519"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/CI%20issues/near/256067519" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/CI.20issues.html#256067519">(Oct 04 2021 at 14:26)</a>:</h4>
<p>We didn't put a special priority on <a href="https://github.com/leanprover-community/mathlib/issues/9531">#9531</a>, so when we re-added it after it failed, I guess it went to the end of the line. It seems to be running now though.</p>



<a name="277907619"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/CI%20issues/near/277907619" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jireh Loreaux <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/CI.20issues.html#277907619">(Apr 05 2022 at 16:38)</a>:</h4>
<p>On the lint mathlib CI step I am getting the following error during "retrieve build". I reran but it gave the same error. Can someone explain / help?</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">Starting</span> <span class="n">download</span> <span class="n">for</span> <span class="n">precompiled</span><span class="bp">-</span><span class="n">mathlib</span><span class="bp">-</span><span class="mi">3</span><span class="bp">.</span><span class="mi">42</span><span class="bp">.</span><span class="mi">0</span><span class="bp">-</span><span class="mi">7</span><span class="n">b6fa2b8</span>
<span class="n">Directory</span> <span class="kd">structure</span> <span class="n">has</span> <span class="n">been</span> <span class="n">setup</span> <span class="n">for</span> <span class="n">the</span> <span class="n">artifact</span>
<span class="n">Total</span> <span class="n">number</span> <span class="n">of</span> <span class="n">files</span> <span class="n">that</span> <span class="n">will</span> <span class="n">be</span> <span class="n">downloaded</span><span class="o">:</span> <span class="mi">1</span>
<span class="n">Total</span> <span class="n">file</span> <span class="n">count</span><span class="o">:</span> <span class="mi">1</span> <span class="c1">---- Processed file #0 (0.0%)</span>
<span class="n">Error</span><span class="o">:</span> <span class="n">An</span> <span class="n">error</span> <span class="n">occurred</span> <span class="n">while</span> <span class="n">attempting</span> <span class="n">to</span> <span class="n">decompress</span> <span class="n">the</span> <span class="n">response</span> <span class="n">stream</span>
<span class="n">A</span> <span class="mi">200</span> <span class="n">response</span> <span class="n">code</span> <span class="n">has</span> <span class="n">been</span> <span class="n">received</span> <span class="n">while</span> <span class="n">attempting</span> <span class="n">to</span> <span class="n">download</span> <span class="n">an</span> <span class="n">artifact</span>
<span class="n">Exponential</span> <span class="n">backoff</span> <span class="n">for</span> <span class="n">retry</span> <span class="bp">#</span><span class="mi">1</span><span class="bp">.</span> <span class="n">Waiting</span> <span class="n">for</span> <span class="mi">4959</span> <span class="n">milliseconds</span> <span class="n">before</span> <span class="n">continuing</span> <span class="n">the</span> <span class="n">download</span>
<span class="n">Total</span> <span class="n">file</span> <span class="n">count</span><span class="o">:</span> <span class="mi">1</span> <span class="c1">---- Processed file #0 (0.0%)</span>
<span class="n">Total</span> <span class="n">file</span> <span class="n">count</span><span class="o">:</span> <span class="mi">1</span> <span class="c1">---- Processed file #0 (0.0%)</span>
<span class="n">Total</span> <span class="n">file</span> <span class="n">count</span><span class="o">:</span> <span class="mi">1</span> <span class="c1">---- Processed file #0 (0.0%)</span>
<span class="n">Total</span> <span class="n">file</span> <span class="n">count</span><span class="o">:</span> <span class="mi">1</span> <span class="c1">---- Processed file #0 (0.0%)</span>
<span class="n">Total</span> <span class="n">file</span> <span class="n">count</span><span class="o">:</span> <span class="mi">1</span> <span class="c1">---- Processed file #0 (0.0%)</span>
<span class="n">Finished</span> <span class="n">backoff</span> <span class="n">for</span> <span class="n">retry</span> <span class="bp">#</span><span class="mi">1</span><span class="o">,</span> <span class="n">continuing</span> <span class="k">with</span> <span class="n">download</span>
</code></pre></div>
<p>See here: <a href="https://github.com/leanprover-community/mathlib/runs/5836892681?check_suite_focus=true">https://github.com/leanprover-community/mathlib/runs/5836892681?check_suite_focus=true</a></p>



<a name="277907711"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/CI%20issues/near/277907711" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jireh Loreaux <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/CI.20issues.html#277907711">(Apr 05 2022 at 16:39)</a>:</h4>
<p>The error is longer, but it's basically more of  the same. It seems like it just can't find the build? But I don't know why that would be.</p>



<a name="277908015"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/CI%20issues/near/277908015" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/CI.20issues.html#277908015">(Apr 05 2022 at 16:41)</a>:</h4>
<p>Seems like it took ~2 minutes to fail. Do you have enough RAM to try and reproduce it locally?</p>



<a name="277908472"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/CI%20issues/near/277908472" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jireh Loreaux <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/CI.20issues.html#277908472">(Apr 05 2022 at 16:44)</a>:</h4>
<p>I can try, but I think not. Is 5GB free enough? And what is the procedure exactly? <code>mk_all</code> and then what?</p>



<a name="277908961"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/CI%20issues/near/277908961" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/CI.20issues.html#277908961">(Apr 05 2022 at 16:48)</a>:</h4>
<p>From the logs it looks to me like a temporary hiccup on GitHub's side (though I don't see any issues posted at <a href="https://www.githubstatus.com">https://www.githubstatus.com</a> yet?). I just tried re-running the failed jobs again but it looks like they're failing with the same error.</p>



<a name="277909300"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/CI%20issues/near/277909300" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/CI.20issues.html#277909300">(Apr 05 2022 at 16:50)</a>:</h4>
<p>Seems like GitHub actions is struggling to download artifacts from Azure:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="o">{</span><span class="s2">"$id"</span><span class="o">:</span><span class="s2">"1"</span><span class="o">,</span><span class="s2">"innerException"</span><span class="o">:</span><span class="n">null</span><span class="o">,</span><span class="s2">"message"</span><span class="o">:</span><span class="s2">"The user 'System:PublicAccess;aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa' is not authorized to access this resource."</span><span class="o">,</span><span class="s2">"typeName"</span><span class="o">:</span><span class="s2">"Microsoft.TeamFoundation.Framework.Server.UnauthorizedRequestException, Microsoft.TeamFoundation.Framework.Server"</span><span class="o">,</span><span class="s2">"typeKey"</span><span class="o">:</span><span class="s2">"UnauthorizedRequestException"</span><span class="o">,</span><span class="s2">"errorCode"</span><span class="o">:</span><span class="mi">0</span><span class="o">,</span><span class="s2">"eventId"</span><span class="o">:</span><span class="mi">3000</span><span class="o">}</span>
</code></pre></div>



<a name="277909584"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/CI%20issues/near/277909584" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/CI.20issues.html#277909584">(Apr 05 2022 at 16:52)</a>:</h4>
<p>I've just tried re-running all jobs, in case that refreshes the artifact and fixes things somehow. <span aria-label="shrug" class="emoji emoji-1f937" role="img" title="shrug">:shrug:</span></p>



<a name="277910107"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/CI%20issues/near/277910107" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jireh Loreaux <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/CI.20issues.html#277910107">(Apr 05 2022 at 16:56)</a>:</h4>
<p>Okay, thanks.</p>



<a name="277910972"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/CI%20issues/near/277910972" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/CI.20issues.html#277910972">(Apr 05 2022 at 17:01)</a>:</h4>
<p>Looks like it's working this time!</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>