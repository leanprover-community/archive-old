---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/How.20to.20compile.20lean.20without.20MULTI_THREAD.3F.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/How.20to.20compile.20lean.20without.20MULTI_THREAD.3F.html">How to compile lean without MULTI_THREAD?</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="212066927"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/How%20to%20compile%20lean%20without%20MULTI_THREAD%3F/near/212066927" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Rute <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/How.20to.20compile.20lean.20without.20MULTI_THREAD.3F.html#212066927">(Oct 02 2020 at 12:27)</a>:</h4>
<p>I'm going to preface this with the fact that I really have no experience with C++ development, even compiling C++ code.  Having said that, I'd like to try to compile Lean with <code>MULTI_THREAD</code> off (where <code>MULTI_THREAD</code> is from <a href="https://github.com/leanprover-community/lean/blob/4c40c41ccc0820a4896255efa4b180c9922d8125/src/CMakeLists.txt#L27">this file</a>.)  That will make sure we don't set the <code>LEAN_MULTI_THREAD</code> flag, which forces some delays in the server.  I'd like to try running the lean server (from Python) without this flag so that I can see how it behaves.  Is it significantly faster, but still reliable?</p>
<p>Anyway, how would I go about doing that?  Should I just clone lean, set <a href="https://github.com/leanprover-community/lean/blob/4c40c41ccc0820a4896255efa4b180c9922d8125/src/CMakeLists.txt#L27"><code>option(MULTI_THREAD "MULTI_THREAD" ON)</code></a> to <code>OFF</code>, and then compile from sources as normal?</p>



<a name="212067148"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/How%20to%20compile%20lean%20without%20MULTI_THREAD%3F/near/212067148" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastian Ullrich <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/How.20to.20compile.20lean.20without.20MULTI_THREAD.3F.html#212067148">(Oct 02 2020 at 12:29)</a>:</h4>
<p>Append <code>-DMULTI_THREAD=OFF</code> to your <code>cmake</code> cmdline</p>



<a name="212067169"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/How%20to%20compile%20lean%20without%20MULTI_THREAD%3F/near/212067169" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastian Ullrich <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/How.20to.20compile.20lean.20without.20MULTI_THREAD.3F.html#212067169">(Oct 02 2020 at 12:29)</a>:</h4>
<p>But I don't recall how the server will behave with that flag turned off</p>



<a name="212067187"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/How%20to%20compile%20lean%20without%20MULTI_THREAD%3F/near/212067187" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/How.20to.20compile.20lean.20without.20MULTI_THREAD.3F.html#212067187">(Oct 02 2020 at 12:30)</a>:</h4>
<p>Probably like the javascript version.</p>



<a name="212067243"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/How%20to%20compile%20lean%20without%20MULTI_THREAD%3F/near/212067243" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastian Ullrich <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/How.20to.20compile.20lean.20without.20MULTI_THREAD.3F.html#212067243">(Oct 02 2020 at 12:30)</a>:</h4>
<p>Right, that would make sense :)</p>



<a name="212067357"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/How%20to%20compile%20lean%20without%20MULTI_THREAD%3F/near/212067357" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Rute <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/How.20to.20compile.20lean.20without.20MULTI_THREAD.3F.html#212067357">(Oct 02 2020 at 12:31)</a>:</h4>
<p>Thanks!  Anything I should look out for when running it?</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>