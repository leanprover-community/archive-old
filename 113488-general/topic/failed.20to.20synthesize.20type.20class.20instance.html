---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/failed.20to.20synthesize.20type.20class.20instance.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/failed.20to.20synthesize.20type.20class.20instance.html">failed to synthesize type class instance</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="204996128"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/failed%20to%20synthesize%20type%20class%20instance/near/204996128" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/failed.20to.20synthesize.20type.20class.20instance.html#204996128">(Jul 25 2020 at 09:12)</a>:</h4>
<div class="codehilite"><pre><span></span><code><span class="n">class</span> <span class="n">foo</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">.</span>

<span class="kn">theorem</span> <span class="n">zero_eq_zero_of_foo</span> <span class="o">[</span><span class="n">foo</span><span class="o">]</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">=</span> <span class="mi">0</span> <span class="o">:=</span> <span class="n">rfl</span>

<span class="kn">example</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">=</span> <span class="mi">0</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">rw</span> <span class="n">zero_eq_zero_of_foo</span>
</code></pre></div>



<a name="204996136"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/failed%20to%20synthesize%20type%20class%20instance/near/204996136" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/failed.20to.20synthesize.20type.20class.20instance.html#204996136">(Jul 25 2020 at 09:12)</a>:</h4>
<p>error:</p>
<div class="codehilite"><pre><span></span><code>invalid rewrite tactic, failed to synthesize type class instance
state:
⊢ 0 = 0
</code></pre></div>



<a name="204996140"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/failed%20to%20synthesize%20type%20class%20instance/near/204996140" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/failed.20to.20synthesize.20type.20class.20instance.html#204996140">(Jul 25 2020 at 09:12)</a>:</h4>
<p>is it possible to know which type class instance it failed to synthesize?</p>



<a name="205010769"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/failed%20to%20synthesize%20type%20class%20instance/near/205010769" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/failed.20to.20synthesize.20type.20class.20instance.html#205010769">(Jul 25 2020 at 16:30)</a>:</h4>
<p>I think it failed to synthesize <code>foo</code></p>



<a name="205010840"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/failed%20to%20synthesize%20type%20class%20instance/near/205010840" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/failed.20to.20synthesize.20type.20class.20instance.html#205010840">(Jul 25 2020 at 16:32)</a>:</h4>
<p>more to the point, you can just provide the explicit args to the rewrite, and that should be enough to get typeclass inference to trigger</p>



<a name="205010860"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/failed%20to%20synthesize%20type%20class%20instance/near/205010860" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/failed.20to.20synthesize.20type.20class.20instance.html#205010860">(Jul 25 2020 at 16:33)</a>:</h4>
<p>I think you can also write something like <code>rw @zero_eq_zero_of_foo _</code> so that the typeclass inference is done beforehand instead of in the rewrite</p>



<a name="263762438"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/failed%20to%20synthesize%20type%20class%20instance/near/263762438" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bernd Losert <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/failed.20to.20synthesize.20type.20class.20instance.html#263762438">(Dec 05 2021 at 10:56)</a>:</h4>
<p>This is the error:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">error</span><span class="o">:</span> <span class="n">failed</span> <span class="n">to</span> <span class="n">synthesize</span> <span class="n">type</span> <span class="kd">class</span> <span class="kd">instance</span> <span class="n">for</span>
<span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u_1</span><span class="o">,</span>
<span class="n">β</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u_2</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">β</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">convergence_space</span> <span class="n">β</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">α</span><span class="o">,</span>
<span class="n">l</span> <span class="n">l'</span> <span class="o">:</span> <span class="n">filter</span> <span class="n">α</span><span class="o">,</span>
<span class="n">hl</span> <span class="o">:</span> <span class="n">l.ne_bot</span><span class="o">,</span>
<span class="n">h₀</span> <span class="o">:</span> <span class="n">l</span> <span class="bp">≤</span> <span class="n">l'</span><span class="o">,</span>
<span class="n">h₁</span> <span class="o">:</span> <span class="n">conv</span> <span class="o">(</span><span class="n">map</span> <span class="n">f</span> <span class="n">l'</span><span class="o">)</span> <span class="o">(</span><span class="n">f</span> <span class="n">x</span><span class="o">),</span>
<span class="n">h₂</span> <span class="o">:</span> <span class="n">map</span> <span class="n">f</span> <span class="n">l</span> <span class="bp">≤</span> <span class="n">map</span> <span class="n">f</span> <span class="n">l'</span>
<span class="bp">⊢</span> <span class="n">l.ne_bot</span>
<span class="n">state</span><span class="o">:</span>
<span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u_1</span><span class="o">,</span>
<span class="n">β</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u_2</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">β</span><span class="o">,</span>
<span class="n">t</span> <span class="o">:</span> <span class="n">convergence_space</span> <span class="n">β</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">α</span><span class="o">,</span>
<span class="n">l</span> <span class="n">l'</span> <span class="o">:</span> <span class="n">filter</span> <span class="n">α</span><span class="o">,</span>
<span class="n">hl</span> <span class="o">:</span> <span class="n">l.ne_bot</span><span class="o">,</span>
<span class="n">h₀</span> <span class="o">:</span> <span class="n">l</span> <span class="bp">≤</span> <span class="n">l'</span><span class="o">,</span>
<span class="n">h₁</span> <span class="o">:</span> <span class="n">conv</span> <span class="o">(</span><span class="n">map</span> <span class="n">f</span> <span class="n">l'</span><span class="o">)</span> <span class="o">(</span><span class="n">f</span> <span class="n">x</span><span class="o">),</span>
<span class="n">h₂</span> <span class="o">:</span> <span class="n">map</span> <span class="n">f</span> <span class="n">l</span> <span class="bp">≤</span> <span class="n">map</span> <span class="n">f</span> <span class="n">l'</span>
<span class="bp">⊢</span> <span class="n">conv</span> <span class="o">(</span><span class="n">map</span> <span class="n">f</span> <span class="n">l</span><span class="o">)</span> <span class="o">(</span><span class="n">f</span> <span class="n">x</span><span class="o">)</span>
</code></pre></div>
<p>I don't understand this. It seems that it needs an <code>l.ne_bot</code>, but there is one already, namely <code>hl</code>. I am at a loss about what to do here.</p>



<a name="263762459"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/failed%20to%20synthesize%20type%20class%20instance/near/263762459" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/failed.20to.20synthesize.20type.20class.20instance.html#263762459">(Dec 05 2021 at 10:57)</a>:</h4>
<p>An <a href="https://leanprover-community.github.io/mwe.html">#mwe</a> would help</p>



<a name="263762505"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/failed%20to%20synthesize%20type%20class%20instance/near/263762505" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bernd Losert <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/failed.20to.20synthesize.20type.20class.20instance.html#263762505">(Dec 05 2021 at 10:58)</a>:</h4>
<p>I tried making a mwe, but they all work.</p>



<a name="263762526"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/failed%20to%20synthesize%20type%20class%20instance/near/263762526" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/failed.20to.20synthesize.20type.20class.20instance.html#263762526">(Dec 05 2021 at 10:59)</a>:</h4>
<p>Does lemma assume <code>(hl : l.ne_bot)</code> or <code>[hl : l.ne_bot]</code>? In the former case, you need <code>resetI</code>.</p>



<a name="263762529"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/failed%20to%20synthesize%20type%20class%20instance/near/263762529" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bernd Losert <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/failed.20to.20synthesize.20type.20class.20instance.html#263762529">(Dec 05 2021 at 10:59)</a>:</h4>
<p>It uses <code>[hl : l.ne_bot]</code>.</p>



<a name="263762617"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/failed%20to%20synthesize%20type%20class%20instance/near/263762617" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bernd Losert <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/failed.20to.20synthesize.20type.20class.20instance.html#263762617">(Dec 05 2021 at 11:00)</a>:</h4>
<p>Here's the lemma:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="o">(</span><span class="n">le_conv</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">{</span><span class="n">x</span> <span class="o">:</span> <span class="n">α</span><span class="o">}</span> <span class="o">{</span><span class="n">l</span> <span class="n">l'</span> <span class="o">:</span> <span class="n">filter</span> <span class="n">α</span><span class="o">}</span> <span class="o">[</span><span class="n">ne_bot</span> <span class="n">l</span><span class="o">],</span> <span class="n">l</span> <span class="bp">≤</span> <span class="n">l'</span> <span class="bp">→</span> <span class="n">conv</span> <span class="n">l'</span> <span class="n">x</span> <span class="bp">→</span> <span class="n">conv</span> <span class="n">l</span> <span class="n">x</span><span class="o">)</span>
</code></pre></div>



<a name="263762646"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/failed%20to%20synthesize%20type%20class%20instance/near/263762646" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/failed.20to.20synthesize.20type.20class.20instance.html#263762646">(Dec 05 2021 at 11:01)</a>:</h4>
<p>You need <code>resetI</code> or <code>introI</code></p>



<a name="263762660"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/failed%20to%20synthesize%20type%20class%20instance/near/263762660" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/failed.20to.20synthesize.20type.20class.20instance.html#263762660">(Dec 05 2021 at 11:01)</a>:</h4>
<p>Why do you need <code>ne_bot</code> here?</p>



<a name="263762662"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/failed%20to%20synthesize%20type%20class%20instance/near/263762662" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bernd Losert <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/failed.20to.20synthesize.20type.20class.20instance.html#263762662">(Dec 05 2021 at 11:01)</a>:</h4>
<p>In this silly example: the [ne_bot l] works without me doing anything special:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">def</span> <span class="n">foo</span> <span class="o">(</span><span class="n">l</span> <span class="o">:</span> <span class="n">filter</span> <span class="n">α</span><span class="o">)</span> <span class="o">[</span><span class="n">ne_bot</span> <span class="n">l</span><span class="o">]</span> <span class="o">:</span> <span class="n">filter</span> <span class="n">α</span> <span class="o">:=</span> <span class="n">l</span>
<span class="kd">theorem</span> <span class="n">bar</span> <span class="o">(</span><span class="n">l</span> <span class="o">:</span> <span class="n">filter</span> <span class="n">α</span><span class="o">)</span> <span class="o">[</span><span class="n">ne_bot</span> <span class="n">l</span><span class="o">]</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">β</span><span class="o">)</span> <span class="o">:</span> <span class="n">filter</span> <span class="n">β</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">intros</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">l'</span> <span class="o">:</span> <span class="n">filter</span> <span class="n">β</span><span class="o">,</span> <span class="k">from</span> <span class="n">foo</span> <span class="o">(</span><span class="n">map</span> <span class="n">f</span> <span class="n">l</span><span class="o">),</span>
  <span class="n">exact</span> <span class="n">l'</span>
<span class="kd">end</span>
</code></pre></div>



<a name="263762672"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/failed%20to%20synthesize%20type%20class%20instance/near/263762672" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bernd Losert <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/failed.20to.20synthesize.20type.20class.20instance.html#263762672">(Dec 05 2021 at 11:02)</a>:</h4>
<p><span class="user-mention silent" data-user-id="214703">Yury G. Kudryashov</span> <a href="#narrow/stream/113488-general/topic/failed.20to.20synthesize.20type.20class.20instance/near/263762660">said</a>:</p>
<blockquote>
<p>Why do you need <code>ne_bot</code> here?</p>
</blockquote>
<p>That's part of the lemma.</p>



<a name="263762720"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/failed%20to%20synthesize%20type%20class%20instance/near/263762720" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/failed.20to.20synthesize.20type.20class.20instance.html#263762720">(Dec 05 2021 at 11:02)</a>:</h4>
<p>What is the statement of the lemma you're trying to prove?</p>



<a name="263762732"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/failed%20to%20synthesize%20type%20class%20instance/near/263762732" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/failed.20to.20synthesize.20type.20class.20instance.html#263762732">(Dec 05 2021 at 11:03)</a>:</h4>
<p>IMHO <code>conv</code> shouldn't assume <code>ne_bot</code>, and the trivial filter should converge to any point.</p>



<a name="263762746"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/failed%20to%20synthesize%20type%20class%20instance/near/263762746" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/failed.20to.20synthesize.20type.20class.20instance.html#263762746">(Dec 05 2021 at 11:04)</a>:</h4>
<p>(note that the same sequence can converge to two different points in a non-Hausdorff topological space)</p>



<a name="263762790"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/failed%20to%20synthesize%20type%20class%20instance/near/263762790" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bernd Losert <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/failed.20to.20synthesize.20type.20class.20instance.html#263762790">(Dec 05 2021 at 11:04)</a>:</h4>
<p>Ah, I just noticed something. In the silly example, if I replace <code>intros</code> with <code>intros l lh f</code>, then it stops working. I'm also doing this in the real proof.</p>



<a name="263762805"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/failed%20to%20synthesize%20type%20class%20instance/near/263762805" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/failed.20to.20synthesize.20type.20class.20instance.html#263762805">(Dec 05 2021 at 11:05)</a>:</h4>
<p>Why do you need <code>intros</code> in the example?</p>



<a name="263762807"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/failed%20to%20synthesize%20type%20class%20instance/near/263762807" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bernd Losert <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/failed.20to.20synthesize.20type.20class.20instance.html#263762807">(Dec 05 2021 at 11:05)</a>:</h4>
<p>Is there a special rule regarding intros of variables for instance arguments.</p>



<a name="263762822"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/failed%20to%20synthesize%20type%20class%20instance/near/263762822" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bernd Losert <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/failed.20to.20synthesize.20type.20class.20instance.html#263762822">(Dec 05 2021 at 11:05)</a>:</h4>
<p>The <code>intros</code> is there to simulate what I'm doing in the real proof.</p>



<a name="263762864"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/failed%20to%20synthesize%20type%20class%20instance/near/263762864" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/failed.20to.20synthesize.20type.20class.20instance.html#263762864">(Dec 05 2021 at 11:06)</a>:</h4>
<p>Is it actually</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">theorem</span> <span class="n">bar</span> <span class="o">(</span><span class="n">l</span> <span class="o">:</span> <span class="n">filter</span> <span class="n">α</span><span class="o">)</span> <span class="o">[</span><span class="n">ne_bot</span> <span class="n">l</span><span class="o">]</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">β</span><span class="o">)</span> <span class="o">:</span> <span class="n">filter</span> <span class="n">β</span> <span class="o">:=</span>
</code></pre></div>
<p>or</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">theorem</span> <span class="n">bar</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">l</span> <span class="o">:</span> <span class="n">filter</span> <span class="n">α</span><span class="o">)</span> <span class="o">[</span><span class="n">ne_bot</span> <span class="n">l</span><span class="o">]</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">β</span><span class="o">),</span> <span class="n">filter</span> <span class="n">β</span> <span class="o">:=</span>
</code></pre></div>



<a name="263762874"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/failed%20to%20synthesize%20type%20class%20instance/near/263762874" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bernd Losert <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/failed.20to.20synthesize.20type.20class.20instance.html#263762874">(Dec 05 2021 at 11:06)</a>:</h4>
<p>It's the first one.</p>



<a name="263762882"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/failed%20to%20synthesize%20type%20class%20instance/near/263762882" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/failed.20to.20synthesize.20type.20class.20instance.html#263762882">(Dec 05 2021 at 11:06)</a>:</h4>
<p>This <code>intros</code> is a no-op.</p>



<a name="263762894"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/failed%20to%20synthesize%20type%20class%20instance/near/263762894" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bernd Losert <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/failed.20to.20synthesize.20type.20class.20instance.html#263762894">(Dec 05 2021 at 11:07)</a>:</h4>
<p>Ah, OK.</p>



<a name="263762905"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/failed%20to%20synthesize%20type%20class%20instance/near/263762905" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bernd Losert <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/failed.20to.20synthesize.20type.20class.20instance.html#263762905">(Dec 05 2021 at 11:07)</a>:</h4>
<p>Let me use a forall then.</p>



<a name="263762957"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/failed%20to%20synthesize%20type%20class%20instance/near/263762957" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/failed.20to.20synthesize.20type.20class.20instance.html#263762957">(Dec 05 2021 at 11:08)</a>:</h4>
<p>Use <code>introI</code> or <code>intros l hl, resetI</code> to introduce instance vars.</p>



<a name="263762963"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/failed%20to%20synthesize%20type%20class%20instance/near/263762963" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bernd Losert <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/failed.20to.20synthesize.20type.20class.20instance.html#263762963">(Dec 05 2021 at 11:08)</a>:</h4>
<p>Aha. It produces the same error.</p>



<a name="263762985"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/failed%20to%20synthesize%20type%20class%20instance/near/263762985" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/failed.20to.20synthesize.20type.20class.20instance.html#263762985">(Dec 05 2021 at 11:09)</a>:</h4>
<p>And these lemmas should not need <code>[ne_bot l]</code>.</p>



<a name="263763055"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/failed%20to%20synthesize%20type%20class%20instance/near/263763055" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bernd Losert <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/failed.20to.20synthesize.20type.20class.20instance.html#263763055">(Dec 05 2021 at 11:10)</a>:</h4>
<p><span class="user-mention silent" data-user-id="214703">Yury G. Kudryashov</span> <a href="#narrow/stream/113488-general/topic/failed.20to.20synthesize.20type.20class.20instance/near/263762957">said</a>:</p>
<blockquote>
<p>Use <code>introI</code> or <code>intros l hl, resetI</code> to introduce instance vars.</p>
</blockquote>
<p>It works. Cool. Where is this documented? Is it in  "Theorem Provinig in Lean"?</p>



<a name="263763060"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/failed%20to%20synthesize%20type%20class%20instance/near/263763060" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/failed.20to.20synthesize.20type.20class.20instance.html#263763060">(Dec 05 2021 at 11:10)</a>:</h4>
<p><a href="https://leanprover-community.github.io/mathlib_docs/tactics.html#resetI">tactic#resetI</a></p>



<a name="263763085"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/failed%20to%20synthesize%20type%20class%20instance/near/263763085" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bernd Losert <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/failed.20to.20synthesize.20type.20class.20instance.html#263763085">(Dec 05 2021 at 11:11)</a>:</h4>
<p>Ah, so it's a mathlib specific tactic? It's not part of core Lean? Interesting.</p>



<a name="263763129"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/failed%20to%20synthesize%20type%20class%20instance/near/263763129" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bernd Losert <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/failed.20to.20synthesize.20type.20class.20instance.html#263763129">(Dec 05 2021 at 11:12)</a>:</h4>
<p>I need the <code>[ne_bot l]</code> since I need to rule out the bottom filter.</p>



<a name="263763139"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/failed%20to%20synthesize%20type%20class%20instance/near/263763139" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/failed.20to.20synthesize.20type.20class.20instance.html#263763139">(Dec 05 2021 at 11:13)</a>:</h4>
<p>Why do you need to rule out the bottom filter?</p>



<a name="263763193"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/failed%20to%20synthesize%20type%20class%20instance/near/263763193" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/failed.20to.20synthesize.20type.20class.20instance.html#263763193">(Dec 05 2021 at 11:15)</a>:</h4>
<p>If <code>conv l x</code> corresponds to <code>l ≤ nhds x</code>, then you should have <code>∀ x, conv ⊥ x</code>.</p>



<a name="263763264"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/failed%20to%20synthesize%20type%20class%20instance/near/263763264" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bernd Losert <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/failed.20to.20synthesize.20type.20class.20instance.html#263763264">(Dec 05 2021 at 11:17)</a>:</h4>
<p>I'm working in the more general setting of convergence spaces, so there are no neighborhoods. But yeah, I want to rule out <code>∀ x, conv ⊥ x</code> because that will always be the case according to the convergence space axioms without the [ne_bot l] constraint.</p>



<a name="263763334"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/failed%20to%20synthesize%20type%20class%20instance/near/263763334" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/failed.20to.20synthesize.20type.20class.20instance.html#263763334">(Dec 05 2021 at 11:18)</a>:</h4>
<p>Why do you want to rule out this?</p>



<a name="263763342"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/failed%20to%20synthesize%20type%20class%20instance/near/263763342" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/failed.20to.20synthesize.20type.20class.20instance.html#263763342">(Dec 05 2021 at 11:18)</a>:</h4>
<p>A topological space should define a convergence space, and in a topological space this is true.</p>



<a name="263763453"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/failed%20to%20synthesize%20type%20class%20instance/near/263763453" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bernd Losert <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/failed.20to.20synthesize.20type.20class.20instance.html#263763453">(Dec 05 2021 at 11:21)</a>:</h4>
<p>Is it? I may be misunderstanding something. If the space is Hausdorff, then every filter has at most one limit. This won't work if the bottom filter converges to everything. Unless... Hausdorff means that every ne_bot filter has at most one limit.</p>



<a name="263763463"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/failed%20to%20synthesize%20type%20class%20instance/near/263763463" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/failed.20to.20synthesize.20type.20class.20instance.html#263763463">(Dec 05 2021 at 11:21)</a>:</h4>
<p>If the space is Hausdorff, then every <strong>nontrivial</strong> filter has at most one limit.</p>



<a name="263763526"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/failed%20to%20synthesize%20type%20class%20instance/near/263763526" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/failed.20to.20synthesize.20type.20class.20instance.html#263763526">(Dec 05 2021 at 11:23)</a>:</h4>
<p><a href="https://leanprover-community.github.io/mathlib_docs/find/tendsto_nhds_unique">docs#tendsto_nhds_unique</a></p>



<a name="263763527"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/failed%20to%20synthesize%20type%20class%20instance/near/263763527" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bernd Losert <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/failed.20to.20synthesize.20type.20class.20instance.html#263763527">(Dec 05 2021 at 11:23)</a>:</h4>
<p>OK. That's the part that was missing in my mind. It's a bit confusing since Lean allows the bottom filter to be a filter, but in the literature this is ruled out.</p>



<a name="263763536"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/failed%20to%20synthesize%20type%20class%20instance/near/263763536" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/failed.20to.20synthesize.20type.20class.20instance.html#263763536">(Dec 05 2021 at 11:23)</a>:</h4>
<p>It is very convenient to have a <a href="https://leanprover-community.github.io/mathlib_docs/find/complete_lattice">docs#complete_lattice</a> structure on filters.</p>



<a name="263763603"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/failed%20to%20synthesize%20type%20class%20instance/near/263763603" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/failed.20to.20synthesize.20type.20class.20instance.html#263763603">(Dec 05 2021 at 11:24)</a>:</h4>
<p>But you have to adjust statements/proofs from textbooks.</p>



<a name="263763609"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/failed%20to%20synthesize%20type%20class%20instance/near/263763609" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bernd Losert <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/failed.20to.20synthesize.20type.20class.20instance.html#263763609">(Dec 05 2021 at 11:25)</a>:</h4>
<p>Yeah. I'm having some problem adjusting things as you can tell.</p>



<a name="263763617"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/failed%20to%20synthesize%20type%20class%20instance/near/263763617" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bernd Losert <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/failed.20to.20synthesize.20type.20class.20instance.html#263763617">(Dec 05 2021 at 11:25)</a>:</h4>
<p>Thanks for your help. Much appreciated.</p>



<a name="263772365"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/failed%20to%20synthesize%20type%20class%20instance/near/263772365" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/failed.20to.20synthesize.20type.20class.20instance.html#263772365">(Dec 05 2021 at 15:01)</a>:</h4>
<p>I think using the class <code>ne_bot</code> is not helping here. You can also just write <code>(hl : l ≠ ⊥)</code> and it should make life simpler and easier.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>