---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/Maximum.20Class-Instance.20Resolution.20Depth.20Reached.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Maximum.20Class-Instance.20Resolution.20Depth.20Reached.html">Maximum Class-Instance Resolution Depth Reached</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="171834726"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Maximum%20Class-Instance%20Resolution%20Depth%20Reached/near/171834726" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ken Lee <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Maximum.20Class-Instance.20Resolution.20Depth.20Reached.html#171834726">(Jul 27 2019 at 07:51)</a>:</h4>
<p>This appeared when I tried to use <a href="http://quotient.mk" target="_blank" title="http://quotient.mk">quotient.mk</a>. What does this mean and how can I fix this?</p>



<a name="171835445"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Maximum%20Class-Instance%20Resolution%20Depth%20Reached/near/171835445" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Maximum.20Class-Instance.20Resolution.20Depth.20Reached.html#171835445">(Jul 27 2019 at 08:11)</a>:</h4>
<p>Sometimes it just means you need to increase the bound. Other times it means that something has gone haywire, and instances have been defined that cause the class resolution mechanism (which isn't very clever) to enter a loop.</p>



<a name="171835488"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Maximum%20Class-Instance%20Resolution%20Depth%20Reached/near/171835488" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Maximum.20Class-Instance.20Resolution.20Depth.20Reached.html#171835488">(Jul 27 2019 at 08:12)</a>:</h4>
<p><span class="user-mention" data-user-id="132893">@Ken Lee</span> In what context where you using quotients?</p>



<a name="171835489"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Maximum%20Class-Instance%20Resolution%20Depth%20Reached/near/171835489" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Maximum.20Class-Instance.20Resolution.20Depth.20Reached.html#171835489">(Jul 27 2019 at 08:12)</a>:</h4>
<p>Try <code>set_option class.instance_max_depth 50</code>.</p>



<a name="171835492"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Maximum%20Class-Instance%20Resolution%20Depth%20Reached/near/171835492" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Maximum.20Class-Instance.20Resolution.20Depth.20Reached.html#171835492">(Jul 27 2019 at 08:12)</a>:</h4>
<p>A bunch of algebra? Or a simple equivalence relation?</p>



<a name="171835512"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Maximum%20Class-Instance%20Resolution%20Depth%20Reached/near/171835512" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ken Lee <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Maximum.20Class-Instance.20Resolution.20Depth.20Reached.html#171835512">(Jul 27 2019 at 08:13)</a>:</h4>
<p>I was trying to define orbits under a group action.</p>



<a name="171835572"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Maximum%20Class-Instance%20Resolution%20Depth%20Reached/near/171835572" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ken Lee <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Maximum.20Class-Instance.20Resolution.20Depth.20Reached.html#171835572">(Jul 27 2019 at 08:15)</a>:</h4>
<blockquote>
<p>Try <code>set_option class.instance_max_depth 50</code>.</p>
</blockquote>
<p>This hasn't worked</p>



<a name="171835573"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Maximum%20Class-Instance%20Resolution%20Depth%20Reached/near/171835573" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Maximum.20Class-Instance.20Resolution.20Depth.20Reached.html#171835573">(Jul 27 2019 at 08:15)</a>:</h4>
<p>Try 100</p>



<a name="171835574"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Maximum%20Class-Instance%20Resolution%20Depth%20Reached/near/171835574" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Maximum.20Class-Instance.20Resolution.20Depth.20Reached.html#171835574">(Jul 27 2019 at 08:15)</a>:</h4>
<p>If that fails, it means something else is wrong.</p>



<a name="171835613"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Maximum%20Class-Instance%20Resolution%20Depth%20Reached/near/171835613" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Maximum.20Class-Instance.20Resolution.20Depth.20Reached.html#171835613">(Jul 27 2019 at 08:16)</a>:</h4>
<p>Also... orbits are already in mathlib. (Of course that doesn't forbid you from defining your own. But just so you know.)</p>



<a name="171835616"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Maximum%20Class-Instance%20Resolution%20Depth%20Reached/near/171835616" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ken Lee <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Maximum.20Class-Instance.20Resolution.20Depth.20Reached.html#171835616">(Jul 27 2019 at 08:16)</a>:</h4>
<blockquote>
<p>Try 100</p>
</blockquote>
<p>I tried 500. It still doesn't work.</p>



<a name="171835617"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Maximum%20Class-Instance%20Resolution%20Depth%20Reached/near/171835617" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Maximum.20Class-Instance.20Resolution.20Depth.20Reached.html#171835617">(Jul 27 2019 at 08:16)</a>:</h4>
<p>Ok, then we need more context to figure out what went wrong.</p>



<a name="171835624"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Maximum%20Class-Instance%20Resolution%20Depth%20Reached/near/171835624" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Hughes <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Maximum.20Class-Instance.20Resolution.20Depth.20Reached.html#171835624">(Jul 27 2019 at 08:17)</a>:</h4>
<p>Did you make the<code>setoid</code> an instance?</p>



<a name="171835626"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Maximum%20Class-Instance%20Resolution%20Depth%20Reached/near/171835626" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ken Lee <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Maximum.20Class-Instance.20Resolution.20Depth.20Reached.html#171835626">(Jul 27 2019 at 08:17)</a>:</h4>
<blockquote>
<p>Also... orbits are already in mathlib. (Of course that doesn't forbid you from defining your own. But just so you know.)</p>
</blockquote>
<p>I know haha was just seeing if I can define it in Lean</p>



<a name="171835630"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Maximum%20Class-Instance%20Resolution%20Depth%20Reached/near/171835630" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ken Lee <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Maximum.20Class-Instance.20Resolution.20Depth.20Reached.html#171835630">(Jul 27 2019 at 08:17)</a>:</h4>
<blockquote>
<p>Did you make the<code>setoid</code> an instance?</p>
</blockquote>
<p>Yes <span class="user-mention" data-user-id="110044">@Chris Hughes</span></p>



<a name="171835699"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Maximum%20Class-Instance%20Resolution%20Depth%20Reached/near/171835699" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ken Lee <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Maximum.20Class-Instance.20Resolution.20Depth.20Reached.html#171835699">(Jul 27 2019 at 08:19)</a>:</h4>
<blockquote>
<p>Ok, then we need more context to figure out what went wrong.</p>
</blockquote>
<p>Should I post the entire code? I haven't written much</p>



<a name="171835709"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Maximum%20Class-Instance%20Resolution%20Depth%20Reached/near/171835709" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Hughes <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Maximum.20Class-Instance.20Resolution.20Depth.20Reached.html#171835709">(Jul 27 2019 at 08:19)</a>:</h4>
<p>Yes. It might be that the instance depends on an argument that can't be inferred by type class resolution.</p>



<a name="171835880"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Maximum%20Class-Instance%20Resolution%20Depth%20Reached/near/171835880" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ken Lee <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Maximum.20Class-Instance.20Resolution.20Depth.20Reached.html#171835880">(Jul 27 2019 at 08:24)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">algebra</span><span class="bp">.</span><span class="n">group</span>

<span class="n">universes</span> <span class="n">u0</span> <span class="n">u1</span> <span class="n">u2</span>

<span class="kn">open</span> <span class="n">function</span>

<span class="bp">#</span><span class="kn">print</span> <span class="n">setoid</span>
<span class="bp">#</span><span class="kn">print</span> <span class="n">congr</span>
<span class="kn">theorem</span> <span class="n">congr_alt</span> <span class="o">{</span><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u0</span><span class="o">}</span> <span class="o">{</span><span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u1</span><span class="o">}</span> <span class="o">{</span><span class="n">f₁</span> <span class="n">f₂</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">}</span> <span class="o">{</span><span class="n">x₁</span> <span class="n">x₂</span> <span class="o">:</span> <span class="n">X</span><span class="o">}</span> <span class="o">:</span>
<span class="n">x₁</span> <span class="bp">=</span> <span class="n">x₂</span> <span class="bp">→</span> <span class="n">f₁</span> <span class="bp">=</span> <span class="n">f₂</span> <span class="bp">→</span> <span class="n">f₁</span> <span class="n">x₁</span> <span class="bp">=</span> <span class="n">f₂</span> <span class="n">x₂</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">x1_eq_x2</span> <span class="n">f1_eq_f2</span><span class="o">,</span> <span class="n">congr</span> <span class="n">f1_eq_f2</span> <span class="n">x1_eq_x2</span>

<span class="kn">structure</span> <span class="n">action</span> <span class="o">(</span><span class="n">G</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u0</span><span class="o">)</span> <span class="o">[</span><span class="n">group</span> <span class="n">G</span><span class="o">]</span> <span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u1</span><span class="o">)</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">action</span> <span class="o">:</span> <span class="n">G</span> <span class="bp">→</span> <span class="o">(</span><span class="n">X</span> <span class="bp">→</span> <span class="n">X</span><span class="o">))</span>
<span class="o">(</span><span class="n">map_one</span> <span class="o">:</span> <span class="n">action</span> <span class="mi">1</span> <span class="bp">=</span> <span class="n">id</span><span class="o">)</span>
<span class="o">(</span><span class="n">map_mul</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">G</span><span class="o">,</span> <span class="n">action</span> <span class="o">(</span><span class="n">f</span> <span class="bp">*</span> <span class="n">g</span><span class="o">)</span> <span class="bp">=</span> <span class="n">action</span> <span class="n">f</span> <span class="err">∘</span> <span class="n">action</span> <span class="n">g</span><span class="o">)</span>

<span class="kn">infix</span> <span class="bp">`</span> <span class="n">action</span> <span class="bp">`</span><span class="o">:</span><span class="mi">1000</span> <span class="o">:=</span> <span class="n">action</span>

<span class="kn">instance</span> <span class="n">action</span><span class="bp">.</span><span class="n">setoid</span> <span class="o">{</span><span class="n">G</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u0</span><span class="o">}</span> <span class="o">[</span><span class="n">group</span> <span class="n">G</span><span class="o">]</span> <span class="o">{</span><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u1</span><span class="o">}</span> <span class="o">(</span><span class="n">GX</span> <span class="o">:</span> <span class="n">G</span> <span class="n">action</span> <span class="n">X</span><span class="o">)</span>
<span class="o">:</span> <span class="n">setoid</span> <span class="n">X</span> <span class="o">:=</span> <span class="o">{</span>
  <span class="n">r</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span> <span class="bp">∃</span> <span class="n">g</span> <span class="o">:</span> <span class="n">G</span><span class="o">,</span> <span class="n">GX</span><span class="bp">.</span><span class="n">action</span> <span class="n">g</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">y</span><span class="o">,</span>
  <span class="n">iseqv</span> <span class="o">:=</span> <span class="bp">⟨</span>
    <span class="c1">-- Refl</span>
    <span class="bp">λ</span> <span class="n">x</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span> <span class="bp">⟨</span><span class="mi">1</span><span class="o">,</span> <span class="n">GX</span><span class="bp">.</span><span class="n">map_one</span><span class="bp">.</span><span class="n">symm</span> <span class="bp">▸</span> <span class="n">rfl</span><span class="bp">⟩</span><span class="o">,</span>
    <span class="c1">-- Symm</span>
    <span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">X</span><span class="o">)</span> <span class="bp">⟨</span><span class="n">g</span><span class="o">,</span><span class="n">gx_eq_y</span><span class="bp">⟩</span><span class="o">,</span> <span class="bp">⟨</span><span class="n">g</span><span class="bp">⁻¹</span><span class="o">,</span>
      <span class="k">calc</span> <span class="n">GX</span><span class="bp">.</span><span class="n">action</span> <span class="n">g</span><span class="bp">⁻¹</span> <span class="n">y</span>
            <span class="bp">=</span> <span class="n">GX</span><span class="bp">.</span><span class="n">action</span> <span class="n">g</span><span class="bp">⁻¹</span> <span class="o">(</span><span class="n">GX</span><span class="bp">.</span><span class="n">action</span> <span class="n">g</span> <span class="n">x</span><span class="o">)</span> <span class="o">:</span> <span class="n">gx_eq_y</span><span class="bp">.</span><span class="n">symm</span> <span class="bp">▸</span> <span class="n">rfl</span>
      <span class="bp">...</span> <span class="bp">=</span> <span class="o">(</span><span class="n">GX</span><span class="bp">.</span><span class="n">action</span> <span class="n">g</span><span class="bp">⁻¹</span> <span class="err">∘</span> <span class="n">GX</span><span class="bp">.</span><span class="n">action</span> <span class="n">g</span><span class="o">)</span> <span class="n">x</span> <span class="o">:</span> <span class="n">rfl</span>
      <span class="bp">...</span> <span class="bp">=</span> <span class="n">GX</span><span class="bp">.</span><span class="n">action</span> <span class="o">(</span><span class="n">g</span><span class="bp">⁻¹</span> <span class="bp">*</span> <span class="n">g</span><span class="o">)</span> <span class="n">x</span> <span class="o">:</span> <span class="n">congr_alt</span> <span class="n">rfl</span> <span class="err">$</span> <span class="o">(</span><span class="n">GX</span><span class="bp">.</span><span class="n">map_mul</span> <span class="bp">_</span> <span class="bp">_</span><span class="o">)</span><span class="bp">.</span><span class="n">symm</span>
      <span class="bp">...</span> <span class="bp">=</span> <span class="n">GX</span><span class="bp">.</span><span class="n">action</span> <span class="mi">1</span> <span class="n">x</span> <span class="o">:</span> <span class="n">congr_alt</span> <span class="n">rfl</span> <span class="err">$</span> <span class="n">inv_mul_self</span> <span class="n">g</span> <span class="bp">▸</span> <span class="n">rfl</span>
      <span class="bp">...</span> <span class="bp">=</span> <span class="n">x</span> <span class="o">:</span> <span class="n">GX</span><span class="bp">.</span><span class="n">map_one</span><span class="bp">.</span><span class="n">symm</span> <span class="bp">▸</span> <span class="n">rfl</span>
      <span class="bp">⟩</span>
    <span class="o">,</span>
    <span class="c1">-- Trans</span>
    <span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="n">y</span> <span class="n">z</span> <span class="o">:</span> <span class="n">X</span><span class="o">)</span> <span class="bp">⟨</span><span class="n">g</span><span class="o">,</span><span class="n">gx_eq_y</span><span class="bp">⟩</span> <span class="bp">⟨</span><span class="n">h</span><span class="o">,</span> <span class="n">hy_eq_z</span><span class="bp">⟩</span><span class="o">,</span> <span class="bp">⟨</span><span class="n">h</span> <span class="bp">*</span> <span class="n">g</span><span class="o">,</span>
            <span class="k">calc</span> <span class="n">GX</span><span class="bp">.</span><span class="n">action</span> <span class="o">(</span><span class="n">h</span> <span class="bp">*</span> <span class="n">g</span><span class="o">)</span> <span class="n">x</span>
                    <span class="bp">=</span> <span class="o">(</span><span class="n">GX</span><span class="bp">.</span><span class="n">action</span> <span class="n">h</span> <span class="err">∘</span> <span class="n">GX</span><span class="bp">.</span><span class="n">action</span> <span class="n">g</span><span class="o">)</span> <span class="n">x</span> <span class="o">:</span> <span class="n">congr_alt</span> <span class="n">rfl</span> <span class="err">$</span> <span class="n">GX</span><span class="bp">.</span><span class="n">map_mul</span> <span class="bp">_</span> <span class="bp">_</span>
            <span class="bp">...</span> <span class="bp">=</span> <span class="n">GX</span><span class="bp">.</span><span class="n">action</span> <span class="n">h</span> <span class="n">y</span> <span class="o">:</span> <span class="n">gx_eq_y</span> <span class="bp">▸</span> <span class="n">rfl</span>
            <span class="bp">...</span> <span class="bp">=</span> <span class="n">z</span> <span class="o">:</span> <span class="n">hy_eq_z</span>
        <span class="bp">⟩</span>
  <span class="bp">⟩</span><span class="o">,</span>
<span class="o">}</span>

<span class="n">def</span> <span class="n">orbits</span> <span class="o">{</span><span class="n">G</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u0</span><span class="o">}</span> <span class="o">[</span><span class="n">group</span> <span class="n">G</span><span class="o">]</span> <span class="o">{</span><span class="n">X</span><span class="o">:</span> <span class="kt">Type</span> <span class="n">u1</span><span class="o">}</span> <span class="o">(</span><span class="n">GX</span> <span class="o">:</span> <span class="n">G</span> <span class="n">action</span> <span class="n">X</span><span class="o">)</span> <span class="o">:=</span>
<span class="n">quotient</span> <span class="o">(</span><span class="n">action</span><span class="bp">.</span><span class="n">setoid</span> <span class="n">GX</span><span class="o">)</span>

<span class="kn">set_option</span> <span class="n">class</span><span class="bp">.</span><span class="n">instance_max_depth</span> <span class="mi">100</span>

<span class="n">def</span> <span class="n">orbit</span> <span class="o">{</span><span class="n">G</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u0</span><span class="o">}</span> <span class="o">[</span><span class="n">group</span> <span class="n">G</span><span class="o">]</span> <span class="o">{</span><span class="n">X</span><span class="o">:</span> <span class="kt">Type</span> <span class="n">u1</span><span class="o">}</span> <span class="o">(</span><span class="n">GX</span> <span class="o">:</span> <span class="n">G</span> <span class="n">action</span> <span class="n">X</span><span class="o">)</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">X</span><span class="o">)</span>
<span class="o">:</span> <span class="n">orbits</span> <span class="n">GX</span> <span class="o">:=</span> <span class="err">⟦</span><span class="n">x</span><span class="err">⟧</span>
</pre></div>



<a name="171835945"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Maximum%20Class-Instance%20Resolution%20Depth%20Reached/near/171835945" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ken Lee <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Maximum.20Class-Instance.20Resolution.20Depth.20Reached.html#171835945">(Jul 27 2019 at 08:27)</a>:</h4>
<blockquote>
<p>Yes. It might be that the instance depends on an argument that can't be inferred by type class resolution.</p>
</blockquote>
<p>May I ask, what is type class resolution?</p>



<a name="171836161"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Maximum%20Class-Instance%20Resolution%20Depth%20Reached/near/171836161" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Maximum.20Class-Instance.20Resolution.20Depth.20Reached.html#171836161">(Jul 27 2019 at 08:34)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="n">def</span> <span class="n">orbit</span> <span class="o">{</span><span class="n">G</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u0</span><span class="o">}</span> <span class="o">[</span><span class="n">group</span> <span class="n">G</span><span class="o">]</span> <span class="o">{</span><span class="n">X</span><span class="o">:</span> <span class="kt">Type</span> <span class="n">u1</span><span class="o">}</span> <span class="o">(</span><span class="n">GX</span> <span class="o">:</span> <span class="n">G</span> <span class="n">action</span> <span class="n">X</span><span class="o">)</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">X</span><span class="o">)</span>
<span class="o">:</span> <span class="n">orbits</span> <span class="n">GX</span> <span class="o">:=</span>
<span class="n">quotient</span><span class="bp">.</span><span class="n">mk&#39;</span> <span class="n">x</span>
</pre></div>


<p>works fine</p>



<a name="171836164"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Maximum%20Class-Instance%20Resolution%20Depth%20Reached/near/171836164" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Hughes <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Maximum.20Class-Instance.20Resolution.20Depth.20Reached.html#171836164">(Jul 27 2019 at 08:34)</a>:</h4>
<p>It's the process that fill in the arguments in square brackets.</p>



<a name="171836231"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Maximum%20Class-Instance%20Resolution%20Depth%20Reached/near/171836231" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Maximum.20Class-Instance.20Resolution.20Depth.20Reached.html#171836231">(Jul 27 2019 at 08:36)</a>:</h4>
<p>oh don't forget to import <code>data.quot</code></p>



<a name="171836247"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Maximum%20Class-Instance%20Resolution%20Depth%20Reached/near/171836247" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Hughes <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Maximum.20Class-Instance.20Resolution.20Depth.20Reached.html#171836247">(Jul 27 2019 at 08:38)</a>:</h4>
<p>So the problem was that type class inference didn't know which group action you meant. This information can however be inferred from the expected type (which type class resolution doesn't use). <code>quotient.mk'</code> puts the setoid argument in <code>{}</code> brackets instead of <code>[]</code> brackets, so it uses a different procedure to infer the argument, which does use the expected type.</p>



<a name="171836287"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Maximum%20Class-Instance%20Resolution%20Depth%20Reached/near/171836287" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Maximum.20Class-Instance.20Resolution.20Depth.20Reached.html#171836287">(Jul 27 2019 at 08:38)</a>:</h4>
<p>btw have you looked at the file <code>group_theory.group_action</code>?</p>



<a name="171836293"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Maximum%20Class-Instance%20Resolution%20Depth%20Reached/near/171836293" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Maximum.20Class-Instance.20Resolution.20Depth.20Reached.html#171836293">(Jul 27 2019 at 08:39)</a>:</h4>
<p>(deleted)</p>



<a name="171836356"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Maximum%20Class-Instance%20Resolution%20Depth%20Reached/near/171836356" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ken Lee <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Maximum.20Class-Instance.20Resolution.20Depth.20Reached.html#171836356">(Jul 27 2019 at 08:41)</a>:</h4>
<blockquote>
<p>So the problem was that type class inference didn't know which group action you meant. This information can however be inferred from the expected type (which type class resolution doesn't use). <code>quotient.mk'</code> puts the setoid argument in <code>{}</code> brackets instead of <code>[]</code> brackets, so it uses a different procedure to infer the argument, which does use the expected type.</p>
</blockquote>
<p>Aha thanks for the explanation</p>



<a name="171836404"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Maximum%20Class-Instance%20Resolution%20Depth%20Reached/near/171836404" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ken Lee <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Maximum.20Class-Instance.20Resolution.20Depth.20Reached.html#171836404">(Jul 27 2019 at 08:42)</a>:</h4>
<blockquote>
<p>btw have you looked at the file <code>group_theory.group_action</code>?</p>
</blockquote>
<p>No i have not. Why do you ask? <span class="user-mention" data-user-id="110064">@Kenny Lau</span></p>



<a name="171836410"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Maximum%20Class-Instance%20Resolution%20Depth%20Reached/near/171836410" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Maximum.20Class-Instance.20Resolution.20Depth.20Reached.html#171836410">(Jul 27 2019 at 08:43)</a>:</h4>
<p>because group action is already defined there</p>



<a name="171836476"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Maximum%20Class-Instance%20Resolution%20Depth%20Reached/near/171836476" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ken Lee <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Maximum.20Class-Instance.20Resolution.20Depth.20Reached.html#171836476">(Jul 27 2019 at 08:45)</a>:</h4>
<blockquote>
<p>because group action is already defined there</p>
</blockquote>
<p>Yes I know. But I wanted to exercise my Lean skills!</p>



<a name="171836534"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Maximum%20Class-Instance%20Resolution%20Depth%20Reached/near/171836534" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Maximum.20Class-Instance.20Resolution.20Depth.20Reached.html#171836534">(Jul 27 2019 at 08:47)</a>:</h4>
<p>ok so a difference is that in the official file, the group action is a <code>class</code></p>



<a name="171836535"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Maximum%20Class-Instance%20Resolution%20Depth%20Reached/near/171836535" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Maximum.20Class-Instance.20Resolution.20Depth.20Reached.html#171836535">(Jul 27 2019 at 08:47)</a>:</h4>
<p>while you made it a <code>structure</code></p>



<a name="171836651"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Maximum%20Class-Instance%20Resolution%20Depth%20Reached/near/171836651" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ken Lee <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Maximum.20Class-Instance.20Resolution.20Depth.20Reached.html#171836651">(Jul 27 2019 at 08:50)</a>:</h4>
<p>I forget the difference between the two. Should I have defined it as a class instead? (if so, why?)</p>



<a name="171836661"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Maximum%20Class-Instance%20Resolution%20Depth%20Reached/near/171836661" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Maximum.20Class-Instance.20Resolution.20Depth.20Reached.html#171836661">(Jul 27 2019 at 08:51)</a>:</h4>
<p>I put your file in a washing machine</p>



<a name="171836662"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Maximum%20Class-Instance%20Resolution%20Depth%20Reached/near/171836662" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Maximum.20Class-Instance.20Resolution.20Depth.20Reached.html#171836662">(Jul 27 2019 at 08:51)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">algebra</span><span class="bp">.</span><span class="n">group</span>

<span class="n">universes</span> <span class="n">u0</span> <span class="n">u1</span> <span class="n">u2</span>

<span class="n">class</span> <span class="n">has_scalar</span> <span class="o">(</span><span class="n">G</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u0</span><span class="o">)</span> <span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u1</span><span class="o">)</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">smul</span> <span class="o">:</span> <span class="n">G</span> <span class="bp">→</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">X</span><span class="o">)</span>

<span class="kn">infixr</span> <span class="bp">`</span> <span class="err">•</span> <span class="bp">`</span><span class="o">:</span><span class="mi">73</span> <span class="o">:=</span> <span class="n">has_scalar</span><span class="bp">.</span><span class="n">smul</span>

<span class="n">class</span> <span class="n">action</span> <span class="o">(</span><span class="n">G</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u0</span><span class="o">)</span> <span class="o">[</span><span class="n">group</span> <span class="n">G</span><span class="o">]</span> <span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u1</span><span class="o">)</span> <span class="kn">extends</span> <span class="n">has_scalar</span> <span class="n">G</span> <span class="n">X</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">one_smul</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">x</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span> <span class="o">(</span><span class="mi">1</span> <span class="o">:</span> <span class="n">G</span><span class="o">)</span> <span class="err">•</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">x</span><span class="o">)</span>
<span class="o">(</span><span class="n">mul_smul</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">G</span><span class="o">,</span> <span class="bp">∀</span> <span class="n">x</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span> <span class="o">(</span><span class="n">f</span> <span class="bp">*</span> <span class="n">g</span><span class="o">)</span> <span class="err">•</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">f</span> <span class="err">•</span> <span class="o">(</span><span class="n">g</span> <span class="err">•</span> <span class="n">x</span><span class="o">))</span>
<span class="kn">export</span> <span class="n">action</span> <span class="o">(</span><span class="n">one_smul</span> <span class="n">mul_smul</span><span class="o">)</span>

<span class="kn">infix</span> <span class="bp">`</span> <span class="n">action</span> <span class="bp">`</span><span class="o">:</span><span class="mi">1000</span> <span class="o">:=</span> <span class="n">action</span>

<span class="kn">instance</span> <span class="n">action</span><span class="bp">.</span><span class="n">setoid</span> <span class="o">(</span><span class="n">G</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u0</span><span class="o">)</span> <span class="o">[</span><span class="n">group</span> <span class="n">G</span><span class="o">]</span> <span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u1</span><span class="o">)</span> <span class="o">[</span><span class="n">G</span> <span class="n">action</span> <span class="n">X</span><span class="o">]</span> <span class="o">:</span> <span class="n">setoid</span> <span class="n">X</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">r</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span> <span class="bp">∃</span> <span class="n">g</span> <span class="o">:</span> <span class="n">G</span><span class="o">,</span> <span class="n">g</span> <span class="err">•</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">y</span><span class="o">,</span>
  <span class="n">iseqv</span> <span class="o">:=</span> <span class="bp">⟨</span>
    <span class="c1">-- Refl</span>
    <span class="bp">λ</span> <span class="n">x</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span> <span class="bp">⟨</span><span class="mi">1</span><span class="o">,</span> <span class="k">by</span> <span class="n">rw</span> <span class="n">one_smul</span><span class="bp">⟩</span><span class="o">,</span>
    <span class="c1">-- Symm</span>
    <span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">X</span><span class="o">)</span> <span class="bp">⟨</span><span class="n">g</span><span class="o">,</span> <span class="n">gx_eq_y</span><span class="bp">⟩</span><span class="o">,</span> <span class="bp">⟨</span><span class="n">g</span><span class="bp">⁻¹</span><span class="o">,</span> <span class="k">by</span> <span class="n">rw</span> <span class="o">[</span><span class="err">←</span> <span class="n">gx_eq_y</span><span class="o">,</span> <span class="err">←</span> <span class="n">mul_smul</span><span class="o">,</span> <span class="n">inv_mul_self</span><span class="o">,</span> <span class="n">one_smul</span><span class="o">]</span><span class="bp">⟩</span><span class="o">,</span>
    <span class="c1">-- Trans</span>
    <span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="n">y</span> <span class="n">z</span> <span class="o">:</span> <span class="n">X</span><span class="o">)</span> <span class="bp">⟨</span><span class="n">g</span><span class="o">,</span><span class="n">gx_eq_y</span><span class="bp">⟩</span> <span class="bp">⟨</span><span class="n">h</span><span class="o">,</span> <span class="n">hy_eq_z</span><span class="bp">⟩</span><span class="o">,</span> <span class="bp">⟨</span><span class="n">h</span> <span class="bp">*</span> <span class="n">g</span><span class="o">,</span> <span class="k">by</span> <span class="n">rw</span> <span class="o">[</span><span class="n">mul_smul</span><span class="o">,</span> <span class="n">gx_eq_y</span><span class="o">,</span> <span class="n">hy_eq_z</span><span class="o">]</span><span class="bp">⟩⟩</span> <span class="o">}</span>

<span class="n">def</span> <span class="n">orbits</span> <span class="o">(</span><span class="n">G</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u0</span><span class="o">)</span> <span class="o">[</span><span class="n">group</span> <span class="n">G</span><span class="o">]</span> <span class="o">(</span><span class="n">X</span><span class="o">:</span> <span class="kt">Type</span> <span class="n">u1</span><span class="o">)</span> <span class="o">[</span><span class="n">G</span> <span class="n">action</span> <span class="n">X</span><span class="o">]</span> <span class="o">:=</span>
<span class="n">quotient</span> <span class="o">(</span><span class="n">action</span><span class="bp">.</span><span class="n">setoid</span> <span class="n">G</span> <span class="n">X</span><span class="o">)</span>

<span class="n">def</span> <span class="n">orbit</span> <span class="o">(</span><span class="n">G</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u0</span><span class="o">)</span> <span class="o">[</span><span class="n">group</span> <span class="n">G</span><span class="o">]</span> <span class="o">(</span><span class="n">X</span><span class="o">:</span> <span class="kt">Type</span> <span class="n">u1</span><span class="o">)</span> <span class="o">[</span><span class="n">G</span> <span class="n">action</span> <span class="n">X</span><span class="o">]</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">X</span><span class="o">)</span> <span class="o">:</span> <span class="n">orbits</span> <span class="n">G</span> <span class="n">X</span> <span class="o">:=</span>
<span class="err">⟦</span><span class="n">x</span><span class="err">⟧</span>
</pre></div>



<a name="171836667"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Maximum%20Class-Instance%20Resolution%20Depth%20Reached/near/171836667" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Maximum.20Class-Instance.20Resolution.20Depth.20Reached.html#171836667">(Jul 27 2019 at 08:51)</a>:</h4>
<p><span class="user-mention" data-user-id="110044">@Chris Hughes</span> should it be a class or a structure?</p>



<a name="171836708"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Maximum%20Class-Instance%20Resolution%20Depth%20Reached/near/171836708" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Maximum.20Class-Instance.20Resolution.20Depth.20Reached.html#171836708">(Jul 27 2019 at 08:52)</a>:</h4>
<p><span class="user-mention" data-user-id="132893">@Ken Lee</span> was there a particular reason why you avoided <code>rw</code>?</p>



<a name="171836759"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Maximum%20Class-Instance%20Resolution%20Depth%20Reached/near/171836759" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ken Lee <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Maximum.20Class-Instance.20Resolution.20Depth.20Reached.html#171836759">(Jul 27 2019 at 08:54)</a>:</h4>
<p>Ah this is nice, so we can write <code>g(x) = y</code> effectively.</p>



<a name="171836769"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Maximum%20Class-Instance%20Resolution%20Depth%20Reached/near/171836769" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Hughes <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Maximum.20Class-Instance.20Resolution.20Depth.20Reached.html#171836769">(Jul 27 2019 at 08:55)</a>:</h4>
<p>But this is bad if you want a group to act on a set in lots of different ways.</p>



<a name="171836816"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Maximum%20Class-Instance%20Resolution%20Depth%20Reached/near/171836816" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Maximum.20Class-Instance.20Resolution.20Depth.20Reached.html#171836816">(Jul 27 2019 at 08:56)</a>:</h4>
<p>yeah but then why does the official file use <code>class</code>?</p>



<a name="171836824"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Maximum%20Class-Instance%20Resolution%20Depth%20Reached/near/171836824" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Hughes <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Maximum.20Class-Instance.20Resolution.20Depth.20Reached.html#171836824">(Jul 27 2019 at 08:57)</a>:</h4>
<p>Because we haven't had that problem yet. I'm not sure of the best solution.</p>



<a name="171836827"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Maximum%20Class-Instance%20Resolution%20Depth%20Reached/near/171836827" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Hughes <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Maximum.20Class-Instance.20Resolution.20Depth.20Reached.html#171836827">(Jul 27 2019 at 08:57)</a>:</h4>
<p>There is a mathlib issue about this.</p>



<a name="171836867"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Maximum%20Class-Instance%20Resolution%20Depth%20Reached/near/171836867" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ken Lee <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Maximum.20Class-Instance.20Resolution.20Depth.20Reached.html#171836867">(Jul 27 2019 at 08:58)</a>:</h4>
<p>Doesn't <code>structure</code> reflect better what we do in usual maths, "a group action is a tuple ..."? The actually action itself is important to keep, no?</p>



<a name="171836870"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Maximum%20Class-Instance%20Resolution%20Depth%20Reached/near/171836870" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ken Lee <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Maximum.20Class-Instance.20Resolution.20Depth.20Reached.html#171836870">(Jul 27 2019 at 08:58)</a>:</h4>
<blockquote>
<p><span class="user-mention silent" data-user-id="132893">Ken Lee</span> was there a particular reason why you avoided <code>rw</code>?</p>
</blockquote>
<p>I dunno because I like term mode? <span class="user-mention" data-user-id="110064">@Kenny Lau</span></p>



<a name="171836935"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Maximum%20Class-Instance%20Resolution%20Depth%20Reached/near/171836935" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ken Lee <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Maximum.20Class-Instance.20Resolution.20Depth.20Reached.html#171836935">(Jul 27 2019 at 09:01)</a>:</h4>
<blockquote>
<p>I put your file in a washing machine</p>
</blockquote>
<p>So in the shrunken version of my file, types can only have at most one action on them?</p>



<a name="171836979"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Maximum%20Class-Instance%20Resolution%20Depth%20Reached/near/171836979" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Hughes <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Maximum.20Class-Instance.20Resolution.20Depth.20Reached.html#171836979">(Jul 27 2019 at 09:02)</a>:</h4>
<p>At most one action from the same group. Or at least it will be a pain to have multiple actions from the same group.</p>



<a name="171837416"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Maximum%20Class-Instance%20Resolution%20Depth%20Reached/near/171837416" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Maximum.20Class-Instance.20Resolution.20Depth.20Reached.html#171837416">(Jul 27 2019 at 09:19)</a>:</h4>
<p>But we can use type wrappers to solve this problem.</p>



<a name="171837540"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Maximum%20Class-Instance%20Resolution%20Depth%20Reached/near/171837540" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Hughes <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Maximum.20Class-Instance.20Resolution.20Depth.20Reached.html#171837540">(Jul 27 2019 at 09:23)</a>:</h4>
<p>I'm not sure this will always be a good solution. What if it's an action of the reals on the reals? There's a lot of stuff to transfer from reals onto wrapped reals. And then I can't do <code>action1 x y + action2 x y</code>, because the wrappers will be different.</p>



<a name="171837602"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Maximum%20Class-Instance%20Resolution%20Depth%20Reached/near/171837602" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Maximum.20Class-Instance.20Resolution.20Depth.20Reached.html#171837602">(Jul 27 2019 at 09:24)</a>:</h4>
<p>let's think about group cohomology <span class="user-mention" data-user-id="112680">@Johan Commelin</span></p>



<a name="171837603"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Maximum%20Class-Instance%20Resolution%20Depth%20Reached/near/171837603" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Maximum.20Class-Instance.20Resolution.20Depth.20Reached.html#171837603">(Jul 27 2019 at 09:24)</a>:</h4>
<p>do we have two actions from the same group on the same module?</p>



<a name="171837617"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Maximum%20Class-Instance%20Resolution%20Depth%20Reached/near/171837617" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Maximum.20Class-Instance.20Resolution.20Depth.20Reached.html#171837617">(Jul 27 2019 at 09:25)</a>:</h4>
<p>Not in the generic case, right?</p>



<a name="171837780"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Maximum%20Class-Instance%20Resolution%20Depth%20Reached/near/171837780" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Maximum.20Class-Instance.20Resolution.20Depth.20Reached.html#171837780">(Jul 27 2019 at 09:30)</a>:</h4>
<p>I mean do we have examples of those</p>



<a name="171837834"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Maximum%20Class-Instance%20Resolution%20Depth%20Reached/near/171837834" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Maximum.20Class-Instance.20Resolution.20Depth.20Reached.html#171837834">(Jul 27 2019 at 09:32)</a>:</h4>
<p>Probably yes, I can't immediately think of any.</p>



<a name="171838515"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Maximum%20Class-Instance%20Resolution%20Depth%20Reached/near/171838515" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Maximum.20Class-Instance.20Resolution.20Depth.20Reached.html#171838515">(Jul 27 2019 at 09:55)</a>:</h4>
<p>Tate twists</p>



<a name="171838572"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Maximum%20Class-Instance%20Resolution%20Depth%20Reached/near/171838572" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Maximum.20Class-Instance.20Resolution.20Depth.20Reached.html#171838572">(Jul 27 2019 at 09:57)</a>:</h4>
<p>According to Wiki the m-th Tate twist of V is V tensor Q_p(-1) m times</p>



<a name="171839326"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Maximum%20Class-Instance%20Resolution%20Depth%20Reached/near/171839326" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Maximum.20Class-Instance.20Resolution.20Depth.20Reached.html#171839326">(Jul 27 2019 at 10:22)</a>:</h4>
<p>If we want examples of this, I think we shouldn't look so far away. For any group (typically non-abelian), there is the action of <code>G</code> on itself by left multiplication and by conjugation. So there we have two actions.</p>



<a name="171839364"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Maximum%20Class-Instance%20Resolution%20Depth%20Reached/near/171839364" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Maximum.20Class-Instance.20Resolution.20Depth.20Reached.html#171839364">(Jul 27 2019 at 10:22)</a>:</h4>
<p>Of course this example is (somewhat) moot in the case of group cohomology, because you typically want the coefficients to be abelian.</p>



<a name="171840346"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Maximum%20Class-Instance%20Resolution%20Depth%20Reached/near/171840346" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Maximum.20Class-Instance.20Resolution.20Depth.20Reached.html#171840346">(Jul 27 2019 at 10:53)</a>:</h4>
<p>I have an MSc student who is going to work on group cohomology in Lean this coming year.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>