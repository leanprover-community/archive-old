---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/long-running.20.60simp.60s.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/long-running.20.60simp.60s.html">long-running `simp`s</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="240593578"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/long-running%20%60simp%60s/near/240593578" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/long-running.20.60simp.60s.html#240593578">(May 28 2021 at 11:55)</a>:</h4>
<p>Thoughts on turning long-running <code>simp</code>s into <code>simp only</code>s even if they are terminating? I've noticed that they often crop up unrelatedly when adding <code>simp</code> lemmata, such as in <a href="https://github.com/leanprover-community/mathlib/issues/7692">#7692</a> and <a href="https://github.com/leanprover-community/mathlib/issues/7416">#7416</a> (note commit 3d1c124, which had to change a mostly unrelated file for <code>simp</code> speedups). They also lead to the exact same issues we wanted to avoid with non-terminating <code>simp</code>s, which is having to roll back to an old version, run <code>squeeze_simp</code> (if it can even run without timing out! if not, even <em>more</em> manual fiddling) and swapping that into the new commit. Furthermore, it should speedup mathlib compilation a fair bit.</p>
<p>I get that they look a <em>lot</em> uglier, and I wonder if in the future, we could instead "cache" what simp lemmas are used in some "simp file", so that <code>simp</code> doesn't have to go digging for lemmas every time, which takes centuries</p>



<a name="240593928"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/long-running%20%60simp%60s/near/240593928" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/long-running.20.60simp.60s.html#240593928">(May 28 2021 at 11:59)</a>:</h4>
<p>Turning <code>simp</code> into <code>simp only</code> if they take too long is an accepted practice. I believe the hope is that the switch to Lean 4's discrimination trees will speed up the situation enough that the technical solutions like a separate "<code>simp</code> lemma cache" are not needed yet and we accept the inconvenience of replacing the <code>simp</code>s.</p>



<a name="240595138"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/long-running%20%60simp%60s/near/240595138" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/long-running.20.60simp.60s.html#240595138">(May 28 2021 at 12:12)</a>:</h4>
<p>Woah, just scrolled through the Lean4 presentation; that's amazing, hopefully we can get switched to that in some not-too-far-off-point! It seems far more scalable than the current system seems to be</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>