---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/.E2.9C.94.20leanproject.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.E2.9C.94.20leanproject.html">âœ” leanproject</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="259042656"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%E2%9C%94%20leanproject/near/259042656" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.E2.9C.94.20leanproject.html#259042656">(Oct 26 2021 at 01:53)</a>:</h4>
<p>which Lean3 binary does <code>leanproject</code> make my terminal session point at when I call <code>leanproject build</code> inside a project that uses Lean 3? what is going on?</p>



<a name="259042766"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%E2%9C%94%20leanproject/near/259042766" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.E2.9C.94.20leanproject.html#259042766">(Oct 26 2021 at 01:54)</a>:</h4>
<p>It looks at your <code>leanpkg.toml</code> file, and uses the lean binary requested there.</p>



<a name="259042795"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%E2%9C%94%20leanproject/near/259042795" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.E2.9C.94.20leanproject.html#259042795">(Oct 26 2021 at 01:55)</a>:</h4>
<p>This is managed by <code>elan</code>: it will automatically download missing lean binaries if you haven't previously used the requested version before.</p>



<a name="259043128"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%E2%9C%94%20leanproject/near/259043128" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.E2.9C.94.20leanproject.html#259043128">(Oct 26 2021 at 02:00)</a>:</h4>
<p>if I type <code>which lean</code> it says <code>/home/arthur/.elan/bin/lean</code><br>
then if I type <code>lean --version</code> it says <code>Lean (version 3.34.0, commit ad324bbc96bf, Release)</code></p>
<p>but if I open another terminal and do the same things, it will point at the same lean binary, but the version will be <code>Lean (version 4.0.0-nightly-2021-10-20, commit 68469c248759, Release)</code></p>



<a name="259043328"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%E2%9C%94%20leanproject/near/259043328" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.E2.9C.94.20leanproject.html#259043328">(Oct 26 2021 at 02:03)</a>:</h4>
<p>The "lean binary" you get from <code>which lean</code> is actually <code>elan</code>. If you type <code>elan which lean</code> it will show you the path to the actual lean binary that will be used in that directory.</p>



<a name="259043343"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%E2%9C%94%20leanproject/near/259043343" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.E2.9C.94.20leanproject.html#259043343">(Oct 26 2021 at 02:03)</a>:</h4>
<p><code>lean --version</code> should always say the same thing if you stay in the same directory.</p>



<a name="259043345"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%E2%9C%94%20leanproject/near/259043345" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.E2.9C.94.20leanproject.html#259043345">(Oct 26 2021 at 02:03)</a>:</h4>
<p>In different directories you should expect different results.</p>



<a name="259043477"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%E2%9C%94%20leanproject/near/259043477" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.E2.9C.94.20leanproject.html#259043477">(Oct 26 2021 at 02:05)</a>:</h4>
<p><code>/home/arthur/.elan/bin/lean</code> is a wrapper that looks at your <code>leanpkg.toml</code>, downloads and starts the requested version of Lean.</p>



<a name="259043553"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%E2%9C%94%20leanproject/near/259043553" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.E2.9C.94.20leanproject.html#259043553">(Oct 26 2021 at 02:06)</a>:</h4>
<p>Depending on the content of <code>leanpkg.toml</code>, it will start different actual Lean binaries, and they will report different versions.</p>



<a name="259043657"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%E2%9C%94%20leanproject/near/259043657" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.E2.9C.94.20leanproject.html#259043657">(Oct 26 2021 at 02:08)</a>:</h4>
<p>Wow, my mind froze for a bit but now I think I got it<br>
Thanks for the info!</p>



<a name="259043837"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%E2%9C%94%20leanproject/near/259043837" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.E2.9C.94.20leanproject.html#259043837">(Oct 26 2021 at 02:11)</a>:</h4>
<p>So if I'm not inside a lean project, calling <code>lean</code> will access the binary I added to my <code>PATH</code> manually. But if I'm inside a lean project, <code>lean</code> will call the right lean binary version for that project</p>



<a name="259043907"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%E2%9C%94%20leanproject/near/259043907" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.E2.9C.94.20leanproject.html#259043907">(Oct 26 2021 at 02:12)</a>:</h4>
<p>If you have <code>lean</code> in the path before <code>/home/arthur/.elan/bin/lean</code>, then your shell will never call the elan version.</p>



<a name="259043920"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%E2%9C%94%20leanproject/near/259043920" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.E2.9C.94.20leanproject.html#259043920">(Oct 26 2021 at 02:13)</a>:</h4>
<p>If you have it after elan, then it will always call elan version.</p>



<a name="259043941"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%E2%9C%94%20leanproject/near/259043941" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.E2.9C.94.20leanproject.html#259043941">(Oct 26 2021 at 02:13)</a>:</h4>
<p>Elan has a notion of "the default lean version" that it calls if there is no <code>leanpkg.toml</code>. I don't remember the details.</p>



<a name="259044125"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%E2%9C%94%20leanproject/near/259044125" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.E2.9C.94.20leanproject.html#259044125">(Oct 26 2021 at 02:16)</a>:</h4>
<p>Hopefully you didn't add anything to your <code>PATH</code> manually: that would be contrary to the instructions! Instead, when you installed <code>elan</code> it will have done its thing.</p>



<a name="259044145"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%E2%9C%94%20leanproject/near/259044145" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.E2.9C.94.20leanproject.html#259044145">(Oct 26 2021 at 02:16)</a>:</h4>
<p>I've just downloaded mathlib from git. I shouldn't need to build it, right?<br>
does it come with built sources?</p>



<a name="259044153"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%E2%9C%94%20leanproject/near/259044153" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.E2.9C.94.20leanproject.html#259044153">(Oct 26 2021 at 02:16)</a>:</h4>
<p>You can set the default toolchain in elan using <code>elan default</code>.</p>



<a name="259044158"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%E2%9C%94%20leanproject/near/259044158" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.E2.9C.94.20leanproject.html#259044158">(Oct 26 2021 at 02:17)</a>:</h4>
<p>It does not come with built sources.</p>



<a name="259044169"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%E2%9C%94%20leanproject/near/259044169" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.E2.9C.94.20leanproject.html#259044169">(Oct 26 2021 at 02:17)</a>:</h4>
<p><code>leanproject get-cache</code> downloads olean cache.</p>



<a name="259044172"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%E2%9C%94%20leanproject/near/259044172" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.E2.9C.94.20leanproject.html#259044172">(Oct 26 2021 at 02:17)</a>:</h4>
<p>But <code>leanproject get-cache</code> will obtain them.</p>



<a name="259044257"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%E2%9C%94%20leanproject/near/259044257" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.E2.9C.94.20leanproject.html#259044257">(Oct 26 2021 at 02:18)</a>:</h4>
<p>nice, that was a lot faster than my core i5 <span aria-label="smiley" class="emoji emoji-1f603" role="img" title="smiley">:smiley:</span></p>



<a name="259044391"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%E2%9C%94%20leanproject/near/259044391" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.E2.9C.94.20leanproject.html#259044391">(Oct 26 2021 at 02:20)</a>:</h4>
<p>It's running smoothly. thanks everyone!<br>
I had added lean4 to my path manually and it caused me some confusion</p>



<a name="259044471"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%E2%9C%94%20leanproject/near/259044471" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Notification Bot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.E2.9C.94.20leanproject.html#259044471">(Oct 26 2021 at 02:21)</a>:</h4>
<p><span class="user-mention silent" data-user-id="451983">Arthur Paulino</span> has marked this topic as resolved.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>