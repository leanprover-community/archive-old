---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/algebra.2Epointwise.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/algebra.2Epointwise.html">algebra.pointwise</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="202199340"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/algebra.pointwise/near/202199340" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/algebra.2Epointwise.html#202199340">(Jun 27 2020 at 18:42)</a>:</h4>
<p><span class="user-mention" data-user-id="112680">@Johan Commelin</span> pointed me to this file: <a href="https://github.com/leanprover-community/mathlib/blob/master/src/algebra/pointwise.lean">https://github.com/leanprover-community/mathlib/blob/master/src/algebra/pointwise.lean</a><br>
I didn't know that we had it, probably partly because all the instances are local, which means it's not used that often.</p>
<p>Is there a reason these instances shouldn't be global? Can we add <code>simp</code> lemmas simplifying <code>has_inv.inv '' s</code> and <code>has_inv.inv ⁻¹' s</code> to these operations?</p>



<a name="202199401"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/algebra.pointwise/near/202199401" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/algebra.2Epointwise.html#202199401">(Jun 27 2020 at 18:43)</a>:</h4>
<p>I think it's because sometimes there are other things you can do. Eg, <code>set X</code> is also a boolean algebra...</p>



<a name="202199496"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/algebra.pointwise/near/202199496" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/algebra.2Epointwise.html#202199496">(Jun 27 2020 at 18:45)</a>:</h4>
<p>Hmm, do you want to use the boolean algebra operations as <code>mul</code> and <code>add</code>? In that case I'm wondering whether my approach was better, just writing <code>s.mul t</code> instead of <code>s * t</code> for pointwise multiplication.</p>



<a name="202199649"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/algebra.pointwise/near/202199649" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/algebra.2Epointwise.html#202199649">(Jun 27 2020 at 18:48)</a>:</h4>
<p>Well, the <code>pointwise</code> file also sets up <code>semimodule</code> instances etc... so you would need to duplicate a lot of api</p>



<a name="202199656"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/algebra.pointwise/near/202199656" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/algebra.2Epointwise.html#202199656">(Jun 27 2020 at 18:48)</a>:</h4>
<p>Maybe all the instances can be global, I don't know. I made them <code>local</code> because I was cautious.</p>



<a name="202201327"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/algebra.pointwise/near/202201327" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/algebra.2Epointwise.html#202201327">(Jun 27 2020 at 19:26)</a>:</h4>
<p>Does anyone see any issue with making these instances global?</p>



<a name="202220335"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/algebra.pointwise/near/202220335" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/algebra.2Epointwise.html#202220335">(Jun 28 2020 at 05:08)</a>:</h4>
<p>I propose to change boolean algebras and <code>set</code>s to use <code>∁</code> for complement and <code>\</code> for difference.</p>



<a name="202220336"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/algebra.pointwise/near/202220336" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/algebra.2Epointwise.html#202220336">(Jun 28 2020 at 05:08)</a>:</h4>
<p>Then use <code>+</code>, <code>-</code>, <code>*</code> for pointwise operations on sets.</p>



<a name="202222418"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/algebra.pointwise/near/202222418" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/algebra.2Epointwise.html#202222418">(Jun 28 2020 at 06:20)</a>:</h4>
<p>I agree with Yury; when writing informal math I'm likely to use pointwise operations on sets without comment, but would be pretty explicit if i were using <code>+</code> and <code>*</code> to mean set operations</p>



<a name="202328136"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/algebra.pointwise/near/202328136" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/algebra.2Epointwise.html#202328136">(Jun 29 2020 at 15:41)</a>:</h4>
<p>Please vote: for <code>s : set α</code> what should <code>- s</code> mean:<br>
<span aria-label="one" class="emoji emoji-0031-20e3" role="img" title="one">:one:</span> the complement of <code>s</code><br>
<span aria-label="two" class="emoji emoji-0032-20e3" role="img" title="two">:two:</span> the pointwise negation of <code>s</code>, i.e. <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">{</mo><mi>x</mi><mo>∣</mo><mo>−</mo><mi>x</mi><mo>∈</mo><mi>s</mi><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">\{x \mid -x \in s\}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord mathdefault">x</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∣</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord">−</span><span class="mord mathdefault">x</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">s</span><span class="mclose">}</span></span></span></span> or <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">{</mo><mo>−</mo><mi>x</mi><mo>∣</mo><mi>x</mi><mo>∈</mo><mi>s</mi><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">\{-x \mid x \in s\}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord">−</span><span class="mord mathdefault">x</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∣</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mord mathdefault">x</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">s</span><span class="mclose">}</span></span></span></span></p>



<a name="202328432"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/algebra.pointwise/near/202328432" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/algebra.2Epointwise.html#202328432">(Jun 29 2020 at 15:43)</a>:</h4>
<p>what's the notation for the complement under <span aria-label="two" class="emoji emoji-0032-20e3" role="img" title="two">:two:</span> ?</p>



<a name="202328528"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/algebra.pointwise/near/202328528" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/algebra.2Epointwise.html#202328528">(Jun 29 2020 at 15:44)</a>:</h4>
<p>I thought we've already moved away from negation for set complements to C?</p>



<a name="202328603"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/algebra.pointwise/near/202328603" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/algebra.2Epointwise.html#202328603">(Jun 29 2020 at 15:44)</a>:</h4>
<p>Floris is fighting back.</p>



<a name="202328647"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/algebra.pointwise/near/202328647" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/algebra.2Epointwise.html#202328647">(Jun 29 2020 at 15:45)</a>:</h4>
<p>Wait, when did this happen? (I want option 2)</p>



<a name="202328797"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/algebra.pointwise/near/202328797" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/algebra.2Epointwise.html#202328797">(Jun 29 2020 at 15:46)</a>:</h4>
<p>Also related is what the notation should be for the complement operation in a boolean algebra</p>



<a name="202328800"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/algebra.pointwise/near/202328800" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/algebra.2Epointwise.html#202328800">(Jun 29 2020 at 15:46)</a>:</h4>
<p>Currently it's 1: <a href="https://github.com/leanprover-community/lean/blob/6830e10f2dd24b23aaa50b2ab93d957f6d8559b5/library/init/data/set.lean#L69">https://github.com/leanprover-community/lean/blob/6830e10f2dd24b23aaa50b2ab93d957f6d8559b5/library/init/data/set.lean#L69</a></p>



<a name="202328974"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/algebra.pointwise/near/202328974" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/algebra.2Epointwise.html#202328974">(Jun 29 2020 at 15:48)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110049">Mario Carneiro</span> <a href="#narrow/stream/113488-general/topic/algebra.2Epointwise/near/202328432">said</a>:</p>
<blockquote>
<p>what's the notation for the complement under <span aria-label="two" class="emoji emoji-0032-20e3" role="img" title="two">:two:</span> ?</p>
</blockquote>
<p><a href="/user_uploads/3121/dT918OPjIESXJjHtz9j1xg9O/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/3121/dT918OPjIESXJjHtz9j1xg9O/image.png" title="image.png"><img src="/user_uploads/3121/dT918OPjIESXJjHtz9j1xg9O/image.png"></a></div>



<a name="202329075"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/algebra.pointwise/near/202329075" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/algebra.2Epointwise.html#202329075">(Jun 29 2020 at 15:48)</a>:</h4>
<p>It's a bit annoying that this discussion is spread over two streams.</p>



<a name="202329148"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/algebra.pointwise/near/202329148" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/algebra.2Epointwise.html#202329148">(Jun 29 2020 at 15:49)</a>:</h4>
<p>See: <a href="#narrow/stream/144837-PR-reviews/topic/3212.20compl.20notation">https://leanprover.zulipchat.com/#narrow/stream/144837-PR-reviews/topic/3212.20compl.20notation</a></p>



<a name="202329174"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/algebra.pointwise/near/202329174" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/algebra.2Epointwise.html#202329174">(Jun 29 2020 at 15:49)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span>: for sets we already have <code>s.compl</code>. We could do something like a postfix <code>ᶜ</code> (superscript <code>c</code>)</p>



<a name="202329182"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/algebra.pointwise/near/202329182" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/algebra.2Epointwise.html#202329182">(Jun 29 2020 at 15:49)</a>:</h4>
<p>But Mario's question is actually the relevant one. Nobody in his right mind would use <code>-s</code> to denote the complement of <code>s</code>.</p>



<a name="202329414"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/algebra.pointwise/near/202329414" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/algebra.2Epointwise.html#202329414">(Jun 29 2020 at 15:51)</a>:</h4>
<p>Thanks for the link to <a href="https://github.com/leanprover-community/mathlib/issues/3212">#3212</a>. I did not see that PR yet.</p>



<a name="202391898"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/algebra.pointwise/near/202391898" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/algebra.2Epointwise.html#202391898">(Jun 30 2020 at 03:32)</a>:</h4>
<p>I just saw <code>pointwise_mul_semiring</code>, which has union as "addition", and pointwise multiplication as "multiplication". This instance directly conflicts with having addition mean pointwise addition on sets.</p>
<p>Is this an appropriate place to define <code>foo α := set α</code> and have <code>pointwise_mul_semiring [monoid α] : semiring (foo α)</code>?</p>



<a name="202394408"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/algebra.pointwise/near/202394408" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/algebra.2Epointwise.html#202394408">(Jun 30 2020 at 04:23)</a>:</h4>
<p>Aah, you are right. This is in fact a useful notion, we used it in the perfectoid project. Certainly a type synonym would solve it. But I don't have a good name suggestion at the moment.</p>



<a name="202394502"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/algebra.pointwise/near/202394502" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/algebra.2Epointwise.html#202394502">(Jun 30 2020 at 04:25)</a>:</h4>
<p>If we would add the type synonym, that would still be annoying to work with, right?<br>
For <code>s : foo \a</code> we still would get <code>f '' s : set \a</code>. Do we have to duplicate set operations and instances? (<code>has_union (foo \a)</code>, ...)</p>



<a name="202394797"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/algebra.pointwise/near/202394797" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/algebra.2Epointwise.html#202394797">(Jun 30 2020 at 04:33)</a>:</h4>
<p>Hmm...</p>



<a name="202394803"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/algebra.pointwise/near/202394803" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/algebra.2Epointwise.html#202394803">(Jun 30 2020 at 04:33)</a>:</h4>
<p>I guess this is one reason why I kept all the instances as <code>def</code>s. Just let the user choose locally what they want to do.</p>



<a name="202394848"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/algebra.pointwise/near/202394848" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/algebra.2Epointwise.html#202394848">(Jun 30 2020 at 04:34)</a>:</h4>
<p>You can still do it with enough type annotations, <code>(f '' s  + g ''t : foo \a)</code> or something.</p>



<a name="202394860"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/algebra.pointwise/near/202394860" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/algebra.2Epointwise.html#202394860">(Jun 30 2020 at 04:34)</a>:</h4>
<p>Do we ever want to use <code>pointwise_add</code> and <code>pointwise_semiring</code> in the same declaration?</p>



<a name="202395029"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/algebra.pointwise/near/202395029" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/algebra.2Epointwise.html#202395029">(Jun 30 2020 at 04:39)</a>:</h4>
<p>I don't know what the future will bring...<br>
But I can't think of such a situation right now.</p>



<a name="202398212"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/algebra.pointwise/near/202398212" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/algebra.2Epointwise.html#202398212">(Jun 30 2020 at 06:02)</a>:</h4>
<p>I made the integers as a quotient of nat^2 the other day and with algebra.pi_instances imported it gave nat^2 a 1 which corresponded to (1,1)=0 in Z</p>



<a name="202398304"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/algebra.pointwise/near/202398304" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/algebra.2Epointwise.html#202398304">(Jun 30 2020 at 06:05)</a>:</h4>
<p>That's a different pointwise though</p>



<a name="202398355"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/algebra.pointwise/near/202398355" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/algebra.2Epointwise.html#202398355">(Jun 30 2020 at 06:06)</a>:</h4>
<p>Floris is talking about pointwise addition of subsets of some additive monoid/group</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>