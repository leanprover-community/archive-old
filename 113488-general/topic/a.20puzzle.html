---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/a.20puzzle.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/a.20puzzle.html">a puzzle</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="199125371"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20puzzle/near/199125371" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/a.20puzzle.html#199125371">(May 29 2020 at 08:14)</a>:</h4>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="n">tactic</span><span class="bp">.</span><span class="n">simpa</span>

<span class="kn">set_option</span> <span class="n">old_structure_cmd</span> <span class="n">true</span>

<span class="n">class</span> <span class="n">nonzero</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">has_zero</span> <span class="n">α</span><span class="o">]</span> <span class="o">[</span><span class="n">has_one</span> <span class="n">α</span><span class="o">]</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">zero_ne_one</span> <span class="o">:</span> <span class="o">(</span><span class="mi">0</span> <span class="o">:</span> <span class="n">α</span><span class="o">)</span> <span class="bp">≠</span> <span class="mi">1</span><span class="o">)</span>

<span class="bp">@</span><span class="o">[</span><span class="n">simp</span><span class="o">]</span> <span class="kn">theorem</span> <span class="n">one_ne_zero</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">has_zero</span> <span class="n">α</span><span class="o">]</span> <span class="o">[</span><span class="n">has_one</span> <span class="n">α</span><span class="o">]</span> <span class="o">[</span><span class="n">nonzero</span> <span class="n">α</span><span class="o">]</span> <span class="o">:</span> <span class="o">(</span><span class="mi">1</span> <span class="o">:</span> <span class="n">α</span><span class="o">)</span> <span class="bp">≠</span> <span class="mi">0</span> <span class="o">:=</span>
<span class="n">nonzero</span><span class="bp">.</span><span class="n">zero_ne_one</span><span class="bp">.</span><span class="n">symm</span>

<span class="c">/-</span><span class="cm">- Let&#39;s show some example instances -/</span>
<span class="kn">instance</span> <span class="o">:</span> <span class="n">nonzero</span> <span class="bp">ℕ</span> <span class="o">:=</span>
<span class="bp">⟨</span><span class="n">dec_trivial</span><span class="bp">⟩</span>

<span class="c">/-</span><span class="cm">- Let&#39;s show some example instances -/</span>
<span class="kn">instance</span> <span class="o">:</span> <span class="n">nonzero</span> <span class="bp">ℤ</span> <span class="o">:=</span>
<span class="bp">⟨</span><span class="n">dec_trivial</span><span class="bp">⟩</span>

<span class="kn">theorem</span> <span class="n">test</span> <span class="o">{</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">has_zero</span> <span class="n">R</span><span class="o">]</span> <span class="o">[</span><span class="n">has_one</span> <span class="n">R</span><span class="o">]</span> <span class="o">[</span><span class="n">nonzero</span> <span class="n">R</span><span class="o">]</span> <span class="o">:</span> <span class="o">(</span><span class="mi">1</span> <span class="o">:</span> <span class="n">R</span><span class="o">)</span> <span class="bp">≠</span> <span class="mi">0</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">intro</span> <span class="n">h</span><span class="o">,</span>
  <span class="k">have</span> <span class="o">:</span> <span class="mi">1</span> <span class="bp">=</span> <span class="mi">0</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">simpa</span> <span class="kn">using</span> <span class="n">h</span><span class="o">,</span>
  <span class="n">exact</span> <span class="n">one_ne_zero</span> <span class="n">this</span><span class="o">,</span>
<span class="kn">end</span>
</code></pre></div>



<a name="199125394"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20puzzle/near/199125394" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/a.20puzzle.html#199125394">(May 29 2020 at 08:15)</a>:</h4>
<p>(this is an <a href="https://leanprover-community.github.io/mwe.html">#mwe</a>)</p>



<a name="199125445"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20puzzle/near/199125445" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/a.20puzzle.html#199125445">(May 29 2020 at 08:15)</a>:</h4>
<p>question: the type of <code>this</code> is <code>(1 : \N) = 0</code>. what is going on?</p>



<a name="199125570"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20puzzle/near/199125570" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/a.20puzzle.html#199125570">(May 29 2020 at 08:17)</a>:</h4>
<p>(this is a minimzed version of <a href="https://github.com/leanprover-community/mathlib/blob/b013b2d6318b42e5ae49a4a588b1271e37809685/src/algebra/classical_lie_algebras.lean#L80-L89">https://github.com/leanprover-community/mathlib/blob/b013b2d6318b42e5ae49a4a588b1271e37809685/src/algebra/classical_lie_algebras.lean#L80-L89</a>):</p>
<div class="codehilite"><pre><span></span><code><span class="kn">lemma</span> <span class="n">sl_non_abelian</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="mi">1</span> <span class="bp">&lt;</span> <span class="n">fintype</span><span class="bp">.</span><span class="n">card</span> <span class="n">n</span><span class="o">)</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">lie_algebra</span><span class="bp">.</span><span class="n">is_abelian</span> <span class="err">↥</span><span class="o">(</span><span class="n">sl</span> <span class="n">n</span> <span class="n">R</span><span class="o">)</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">rcases</span> <span class="n">fintype</span><span class="bp">.</span><span class="n">exists_pair_of_one_lt_card</span> <span class="n">h</span> <span class="k">with</span> <span class="bp">⟨</span><span class="n">i</span><span class="o">,</span> <span class="n">j</span><span class="o">,</span> <span class="n">hij</span><span class="bp">⟩</span><span class="o">,</span>
  <span class="k">let</span> <span class="n">A</span> <span class="o">:=</span> <span class="n">Eb</span> <span class="n">R</span> <span class="n">i</span> <span class="n">j</span> <span class="n">hij</span><span class="o">,</span>
  <span class="k">let</span> <span class="n">B</span> <span class="o">:=</span> <span class="n">Eb</span> <span class="n">R</span> <span class="n">j</span> <span class="n">i</span> <span class="n">hij</span><span class="bp">.</span><span class="n">symm</span><span class="o">,</span>
  <span class="n">intros</span> <span class="n">c</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">c&#39;</span> <span class="o">:</span> <span class="n">A</span><span class="bp">.</span><span class="n">val</span> <span class="bp">⬝</span> <span class="n">B</span><span class="bp">.</span><span class="n">val</span> <span class="bp">=</span> <span class="n">B</span><span class="bp">.</span><span class="n">val</span> <span class="bp">⬝</span> <span class="n">A</span><span class="bp">.</span><span class="n">val</span> <span class="o">:=</span> <span class="k">by</span> <span class="o">{</span> <span class="n">rw</span> <span class="o">[</span><span class="err">←</span><span class="n">sub_eq_zero</span><span class="o">,</span> <span class="err">←</span><span class="n">sl_bracket</span><span class="o">,</span> <span class="n">c</span><span class="bp">.</span><span class="n">abelian</span><span class="o">],</span> <span class="n">refl</span><span class="o">,</span> <span class="o">},</span>
  <span class="k">have</span> <span class="o">:</span> <span class="mi">1</span> <span class="bp">=</span> <span class="mi">0</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">simpa</span> <span class="o">[</span><span class="n">matrix</span><span class="bp">.</span><span class="n">mul_val</span><span class="o">,</span> <span class="n">hij</span><span class="o">]</span> <span class="kn">using</span> <span class="o">(</span><span class="n">congr_fun</span> <span class="o">(</span><span class="n">congr_fun</span> <span class="n">c&#39;</span> <span class="n">i</span><span class="o">)</span> <span class="n">i</span><span class="o">),</span>
  <span class="n">exact</span> <span class="n">one_ne_zero</span> <span class="n">this</span><span class="o">,</span>
<span class="kn">end</span>
</code></pre></div>



<a name="199125621"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20puzzle/near/199125621" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/a.20puzzle.html#199125621">(May 29 2020 at 08:17)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110064">Kenny Lau</span> <a href="#narrow/stream/113488-general/topic/a.20puzzle/near/199125445">said</a>:</p>
<blockquote>
<p>question: the type of <code>this</code> is <code>(1 : \N) = 0</code>. what is going on?</p>
</blockquote>
<p>Is <code>simpa</code> simply doing too much work?</p>



<a name="199125690"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20puzzle/near/199125690" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/a.20puzzle.html#199125690">(May 29 2020 at 08:18)</a>:</h4>
<p>Can you trace what it does?</p>



<a name="199125721"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20puzzle/near/199125721" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/a.20puzzle.html#199125721">(May 29 2020 at 08:18)</a>:</h4>
<p>(I know the answer: that's why the topic is called "a puzzle")</p>



<a name="199125739"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20puzzle/near/199125739" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/a.20puzzle.html#199125739">(May 29 2020 at 08:18)</a>:</h4>
<p>I see</p>



<a name="199125810"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20puzzle/near/199125810" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/a.20puzzle.html#199125810">(May 29 2020 at 08:19)</a>:</h4>
<p>Why wouldn't the type be that? That's what you said it was</p>



<a name="199125896"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20puzzle/near/199125896" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/a.20puzzle.html#199125896">(May 29 2020 at 08:20)</a>:</h4>
<p>well when you write <code>by simpa [something] using something_else</code> you would suppose that <code>simpa</code> just converts <code>something_else</code> into the goal</p>



<a name="199125906"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20puzzle/near/199125906" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/a.20puzzle.html#199125906">(May 29 2020 at 08:20)</a>:</h4>
<p>this is kinda an example of an "evil" simpa usage</p>



<a name="199125915"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20puzzle/near/199125915" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/a.20puzzle.html#199125915">(May 29 2020 at 08:20)</a>:</h4>
<p>it looks like it does the job</p>



<a name="199125919"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20puzzle/near/199125919" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/a.20puzzle.html#199125919">(May 29 2020 at 08:20)</a>:</h4>
<p>No, I don't expect that</p>



<a name="199125920"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20puzzle/near/199125920" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/a.20puzzle.html#199125920">(May 29 2020 at 08:20)</a>:</h4>
<p>but it actually does a different job</p>



<a name="199125937"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20puzzle/near/199125937" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/a.20puzzle.html#199125937">(May 29 2020 at 08:21)</a>:</h4>
<p>this line:<br>
<code>have : 1 = 0 := by simpa [matrix.mul_val, hij] using (congr_fun (congr_fun c' i) i)</code></p>



<a name="199125939"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20puzzle/near/199125939" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/a.20puzzle.html#199125939">(May 29 2020 at 08:21)</a>:</h4>
<p>I expect it to simplify the goal as well</p>



<a name="199125950"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20puzzle/near/199125950" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/a.20puzzle.html#199125950">(May 29 2020 at 08:21)</a>:</h4>
<p><code>simpa</code> doesn't constrain the type of the goal at all</p>



<a name="199125975"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20puzzle/near/199125975" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/a.20puzzle.html#199125975">(May 29 2020 at 08:21)</a>:</h4>
<div class="codehilite"><pre><span></span><code><span class="mi">1</span> <span class="n">goal</span>
<span class="n">n</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u₁</span><span class="o">,</span>
<span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u₂</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="mi">1</span> <span class="bp">&lt;</span> <span class="n">fintype</span><span class="bp">.</span><span class="n">card</span> <span class="n">n</span><span class="o">,</span>
<span class="n">i</span> <span class="n">j</span> <span class="o">:</span> <span class="n">n</span><span class="o">,</span>
<span class="n">hij</span> <span class="o">:</span> <span class="n">j</span> <span class="bp">≠</span> <span class="n">i</span><span class="o">,</span>
<span class="n">A</span> <span class="o">:</span> <span class="err">↥</span><span class="o">(</span><span class="n">sl</span> <span class="n">n</span> <span class="n">R</span><span class="o">)</span> <span class="o">:=</span> <span class="n">Eb</span> <span class="n">R</span> <span class="n">i</span> <span class="n">j</span> <span class="n">hij</span><span class="o">,</span>
<span class="n">B</span> <span class="o">:</span> <span class="err">↥</span><span class="o">(</span><span class="n">sl</span> <span class="n">n</span> <span class="n">R</span><span class="o">)</span> <span class="o">:=</span> <span class="n">Eb</span> <span class="n">R</span> <span class="n">j</span> <span class="n">i</span> <span class="bp">_</span><span class="o">,</span>
<span class="n">c</span> <span class="o">:</span> <span class="n">is_abelian</span> <span class="err">↥</span><span class="o">(</span><span class="n">sl</span> <span class="n">n</span> <span class="n">R</span><span class="o">),</span>
<span class="n">c&#39;</span> <span class="o">:</span> <span class="n">A</span><span class="bp">.</span><span class="n">val</span> <span class="bp">⬝</span> <span class="n">B</span><span class="bp">.</span><span class="n">val</span> <span class="bp">=</span> <span class="n">B</span><span class="bp">.</span><span class="n">val</span> <span class="bp">⬝</span> <span class="n">A</span><span class="bp">.</span><span class="n">val</span>
<span class="err">⊢</span> <span class="n">false</span>
</code></pre></div>



<a name="199125979"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20puzzle/near/199125979" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/a.20puzzle.html#199125979">(May 29 2020 at 08:21)</a>:</h4>
<p>in fact I don't think any tactic would be able to stop it from getting the nat default</p>



<a name="199125983"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20puzzle/near/199125983" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/a.20puzzle.html#199125983">(May 29 2020 at 08:21)</a>:</h4>
<p>that's the tactic state before the line</p>



<a name="199126052"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20puzzle/near/199126052" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/a.20puzzle.html#199126052">(May 29 2020 at 08:22)</a>:</h4>
<p>when I read the line, I read "apply <code>A * B</code> and <code>B * A</code> to <code>i i</code> and simplify both sides to obtain <code>1 = 0</code>"</p>



<a name="199126062"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20puzzle/near/199126062" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/a.20puzzle.html#199126062">(May 29 2020 at 08:22)</a>:</h4>
<p>as one would when reading that line</p>



<a name="199126070"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20puzzle/near/199126070" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/a.20puzzle.html#199126070">(May 29 2020 at 08:22)</a>:</h4>
<p>I'm sayinh that when you write <code>have : 1 = 0 := by ...</code> lean has already decided that <code>1</code> is <code>1 : nat</code></p>



<a name="199126090"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20puzzle/near/199126090" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/a.20puzzle.html#199126090">(May 29 2020 at 08:22)</a>:</h4>
<p>I'm saying the one who wrote that line likely had that intention</p>



<a name="199126092"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20puzzle/near/199126092" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/a.20puzzle.html#199126092">(May 29 2020 at 08:22)</a>:</h4>
<p>and it accidentally worked</p>



<a name="199126134"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20puzzle/near/199126134" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/a.20puzzle.html#199126134">(May 29 2020 at 08:23)</a>:</h4>
<p>sure, simp proves lots of surprise theorems</p>



<a name="199126239"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20puzzle/near/199126239" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/a.20puzzle.html#199126239">(May 29 2020 at 08:24)</a>:</h4>
<p>hey <span class="user-mention" data-user-id="240862">@Oliver Nash</span> is online</p>



<a name="199126274"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20puzzle/near/199126274" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/a.20puzzle.html#199126274">(May 29 2020 at 08:25)</a>:</h4>
<p>you are saying that <code>simpa</code> was able to unify <code>(1 : nat) = 0</code> and <code>(1 : R) = 0</code> because they are both false</p>



<a name="199126279"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20puzzle/near/199126279" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/a.20puzzle.html#199126279">(May 29 2020 at 08:25)</a>:</h4>
<p>right</p>



<a name="199126283"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20puzzle/near/199126283" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/a.20puzzle.html#199126283">(May 29 2020 at 08:25)</a>:</h4>
<p>sounds legit</p>



<a name="199126300"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20puzzle/near/199126300" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/a.20puzzle.html#199126300">(May 29 2020 at 08:25)</a>:</h4>
<p>I'm just observing that this is a surprise</p>



<a name="199126320"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20puzzle/near/199126320" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/a.20puzzle.html#199126320">(May 29 2020 at 08:25)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110064">Kenny Lau</span> <a href="#narrow/stream/113488-general/topic/a.20puzzle/near/199126239">said</a>:</p>
<blockquote>
<p>hey <span class="user-mention silent" data-user-id="240862">Oliver Nash</span> is online</p>
</blockquote>
<p>He is but he is also working so he shouldn't even be glancing at this thread! I will study it over lunch.</p>



<a name="199140237"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20puzzle/near/199140237" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/a.20puzzle.html#199140237">(May 29 2020 at 11:13)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110064">Kenny Lau</span> <a href="#narrow/stream/113488-general/topic/a.20puzzle/near/199126090">said</a>:</p>
<blockquote>
<p>I'm saying the one who wrote that line likely had that intention</p>
</blockquote>
<p>Just reading this more carefully now. I can at least confirm the intention of the one who wrote that line was as you suggest: mentally I was parsing <code>1 = 0</code> as <code>(1: R) = 0</code> and thus had a bit of a difference of opinion with Lean which parses it as <code>(1 : ℕ) = 0</code>.</p>



<a name="199140498"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20puzzle/near/199140498" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/a.20puzzle.html#199140498">(May 29 2020 at 11:16)</a>:</h4>
<p>So I suppose what's happening in <code>sl_non_abelian</code> is that the <code>simpa</code> statement in fact succeeds in proving <code>false</code> given its hypotheses by using <code>one_ne_zero</code> but for <code>R</code>. It then uses this to prove what it was asked, namely <code>(1 : ℕ) = 0</code>. And then, rather ridiculously, we prove false again using <code>one_ne_zero</code> but for <code>ℕ</code> rather than <code>R</code> this time.</p>



<a name="199140619"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20puzzle/near/199140619" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/a.20puzzle.html#199140619">(May 29 2020 at 11:17)</a>:</h4>
<p>right</p>



<a name="199140692"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20puzzle/near/199140692" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/a.20puzzle.html#199140692">(May 29 2020 at 11:18)</a>:</h4>
<p>Indeed this seems right since I can replace the last two lines of that lemma with:</p>
<div class="codehilite"><pre><span></span><code><span class="n">simpa</span> <span class="o">[</span><span class="n">matrix</span><span class="bp">.</span><span class="n">mul_val</span><span class="o">,</span> <span class="n">hij</span><span class="o">]</span> <span class="kn">using</span> <span class="o">(</span><span class="n">congr_fun</span> <span class="o">(</span><span class="n">congr_fun</span> <span class="n">c&#39;</span> <span class="n">i</span><span class="o">)</span> <span class="n">i</span><span class="o">),</span>
</code></pre></div>


<p>This is obviously better than the rather hilarious proof in place at present but I propose it might be best to finish as:</p>
<div class="codehilite"><pre><span></span><code>  <span class="k">have</span> <span class="o">:</span> <span class="o">(</span><span class="mi">1</span> <span class="o">:</span> <span class="n">R</span><span class="o">)</span> <span class="bp">=</span> <span class="mi">0</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">simpa</span> <span class="o">[</span><span class="n">matrix</span><span class="bp">.</span><span class="n">mul_val</span><span class="o">,</span> <span class="n">hij</span><span class="o">]</span> <span class="kn">using</span> <span class="o">(</span><span class="n">congr_fun</span> <span class="o">(</span><span class="n">congr_fun</span> <span class="n">c&#39;</span> <span class="n">i</span><span class="o">)</span> <span class="n">i</span><span class="o">),</span>
  <span class="n">exact</span> <span class="n">one_ne_zero</span> <span class="n">this</span><span class="o">,</span>
</code></pre></div>



<a name="199140739"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20puzzle/near/199140739" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/a.20puzzle.html#199140739">(May 29 2020 at 11:19)</a>:</h4>
<p>I can include this tidy up as part of some future PR, or else you might wish to just go for it right now?</p>



<a name="199140754"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20puzzle/near/199140754" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/a.20puzzle.html#199140754">(May 29 2020 at 11:19)</a>:</h4>
<p>Great find! I must now dash out for my lunchtime run.</p>



<a name="199140847"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20puzzle/near/199140847" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/a.20puzzle.html#199140847">(May 29 2020 at 11:20)</a>:</h4>
<p>I guess either way is ok</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>