---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/The.20long.20pole.20in.20mathlib.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/The.20long.20pole.20in.20mathlib.html">The long pole in mathlib</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="253932389"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/The%20long%20pole%20in%20mathlib/near/253932389" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/The.20long.20pole.20in.20mathlib.html#253932389">(Sep 19 2021 at 09:37)</a>:</h4>
<p>I recently computed "the long pole" in mathlib --- the longest chain of transitive imports, weighted by the compilation time of each file. Given arbitrary parallelism, this would give us the compilation time of the entirety of mathlib.</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">data</span><span class="bp">/</span><span class="n">real</span><span class="bp">/</span><span class="n">pi</span>    <span class="mi">34</span><span class="bp">.</span><span class="mi">9626</span>
<span class="n">analysis</span><span class="bp">/</span><span class="n">special_functions</span><span class="bp">/</span><span class="n">integrals</span>    <span class="mi">50</span><span class="bp">.</span><span class="mi">0778</span>
<span class="n">measure_theory</span><span class="bp">/</span><span class="n">integral</span><span class="bp">/</span><span class="n">interval_integral</span>   <span class="mi">88</span><span class="bp">.</span><span class="mi">211</span>
<span class="n">measure_theory</span><span class="bp">/</span><span class="n">measure</span><span class="bp">/</span><span class="n">lebesgue</span> <span class="mi">29</span><span class="bp">.</span><span class="mi">6158</span>
<span class="n">measure_theory</span><span class="bp">/</span><span class="n">constructions</span><span class="bp">/</span><span class="n">pi</span> <span class="mi">40</span><span class="bp">.</span><span class="mi">3023</span>
<span class="n">measure_theory</span><span class="bp">/</span><span class="n">constructions</span><span class="bp">/</span><span class="n">prod</span>   <span class="mi">53</span><span class="bp">.</span><span class="mi">4363</span>
<span class="n">measure_theory</span><span class="bp">/</span><span class="n">integral</span><span class="bp">/</span><span class="n">set_integral</span>    <span class="mi">39</span><span class="bp">.</span><span class="mi">7534</span>
<span class="n">measure_theory</span><span class="bp">/</span><span class="n">integral</span><span class="bp">/</span><span class="n">bochner</span> <span class="mi">70</span><span class="bp">.</span><span class="mi">9691</span>
<span class="n">measure_theory</span><span class="bp">/</span><span class="n">integral</span><span class="bp">/</span><span class="n">set_to_l1</span>   <span class="mi">47</span><span class="bp">.</span><span class="mi">3601</span>
<span class="n">measure_theory</span><span class="bp">/</span><span class="n">function</span><span class="bp">/</span><span class="n">simple_func_dense</span>   <span class="mi">72</span><span class="bp">.</span><span class="mi">6324</span>
<span class="n">measure_theory</span><span class="bp">/</span><span class="n">function</span><span class="bp">/</span><span class="n">l1_space</span>    <span class="mi">51</span><span class="bp">.</span><span class="mi">5644</span>
<span class="n">measure_theory</span><span class="bp">/</span><span class="n">function</span><span class="bp">/</span><span class="n">lp_space</span>    <span class="mi">147</span><span class="bp">.</span><span class="mi">01</span>
<span class="n">measure_theory</span><span class="bp">/</span><span class="n">integral</span><span class="bp">/</span><span class="n">mean_inequalities</span>   <span class="mi">17</span><span class="bp">.</span><span class="mi">5914</span>
<span class="n">analysis</span><span class="bp">/</span><span class="n">mean_inequalities</span>  <span class="mi">36</span><span class="bp">.</span><span class="mi">4278</span>
<span class="n">analysis</span><span class="bp">/</span><span class="n">convex</span><span class="bp">/</span><span class="n">specific_functions</span>  <span class="mi">11</span><span class="bp">.</span><span class="mi">9636</span>
<span class="n">analysis</span><span class="bp">/</span><span class="n">special_functions</span><span class="bp">/</span><span class="n">pow</span>  <span class="mi">124</span><span class="bp">.</span><span class="mi">392</span>
<span class="n">analysis</span><span class="bp">/</span><span class="n">special_functions</span><span class="bp">/</span><span class="n">trigonometric</span>    <span class="mi">172</span><span class="bp">.</span><span class="mi">476</span>
<span class="n">analysis</span><span class="bp">/</span><span class="n">special_functions</span><span class="bp">/</span><span class="n">exp_log</span>  <span class="mi">24</span><span class="bp">.</span><span class="mi">8909</span>
<span class="n">analysis</span><span class="bp">/</span><span class="n">complex</span><span class="bp">/</span><span class="n">real_deriv</span> <span class="mi">16</span><span class="bp">.</span><span class="mi">6262</span>
<span class="n">analysis</span><span class="bp">/</span><span class="n">complex</span><span class="bp">/</span><span class="n">conformal</span>  <span class="mi">24</span><span class="bp">.</span><span class="mi">4022</span>
<span class="n">analysis</span><span class="bp">/</span><span class="n">normed_space</span><span class="bp">/</span><span class="n">conformal_linear_map</span>  <span class="mi">13</span><span class="bp">.</span><span class="mi">4382</span>
<span class="n">analysis</span><span class="bp">/</span><span class="n">normed_space</span><span class="bp">/</span><span class="n">inner_product</span> <span class="mi">225</span><span class="bp">.</span><span class="mi">452</span>
<span class="n">analysis</span><span class="bp">/</span><span class="n">special_functions</span><span class="bp">/</span><span class="n">sqrt</span> <span class="mi">8</span><span class="bp">.</span><span class="mi">66522</span>
<span class="n">analysis</span><span class="bp">/</span><span class="n">calculus</span><span class="bp">/</span><span class="n">times_cont_diff</span>   <span class="mi">115</span><span class="bp">.</span><span class="mi">127</span>
<span class="n">analysis</span><span class="bp">/</span><span class="n">calculus</span><span class="bp">/</span><span class="n">mean_value</span>    <span class="mi">24</span><span class="bp">.</span><span class="mi">793</span>
<span class="n">analysis</span><span class="bp">/</span><span class="n">calculus</span><span class="bp">/</span><span class="n">local_extr</span>    <span class="mi">16</span><span class="bp">.</span><span class="mi">9887</span>
<span class="n">analysis</span><span class="bp">/</span><span class="n">calculus</span><span class="bp">/</span><span class="n">deriv</span> <span class="mi">87</span><span class="bp">.</span><span class="mi">9592</span>
<span class="n">analysis</span><span class="bp">/</span><span class="n">calculus</span><span class="bp">/</span><span class="n">fderiv</span>    <span class="mi">114</span><span class="bp">.</span><span class="mi">51</span>
<span class="n">analysis</span><span class="bp">/</span><span class="n">analytic</span><span class="bp">/</span><span class="n">basic</span> <span class="mi">73</span><span class="bp">.</span><span class="mi">1241</span>
<span class="n">analysis</span><span class="bp">/</span><span class="n">calculus</span><span class="bp">/</span><span class="n">formal_multilinear_series</span> <span class="mi">6</span><span class="bp">.</span><span class="mi">70325</span>
<span class="n">analysis</span><span class="bp">/</span><span class="n">normed_space</span><span class="bp">/</span><span class="n">multilinear</span>   <span class="mi">130</span><span class="bp">.</span><span class="mi">405</span>
<span class="n">analysis</span><span class="bp">/</span><span class="n">normed_space</span><span class="bp">/</span><span class="n">operator_norm</span> <span class="mi">97</span><span class="bp">.</span><span class="mi">637</span>
<span class="n">analysis</span><span class="bp">/</span><span class="n">normed_space</span><span class="bp">/</span><span class="n">linear_isometry</span>   <span class="mi">6</span><span class="bp">.</span><span class="mi">22745</span>
<span class="n">linear_algebra</span><span class="bp">/</span><span class="n">finite_dimensional</span>   <span class="mi">58</span><span class="bp">.</span><span class="mi">8543</span>
<span class="n">field_theory</span><span class="bp">/</span><span class="n">finiteness</span> <span class="mi">5</span><span class="bp">.</span><span class="mi">43609</span>
<span class="n">ring_theory</span><span class="bp">/</span><span class="n">finiteness</span>  <span class="mi">27</span><span class="bp">.</span><span class="mi">3561</span>
<span class="n">ring_theory</span><span class="bp">/</span><span class="n">algebra_tower</span>   <span class="mi">24</span><span class="bp">.</span><span class="mi">1719</span>
<span class="n">ring_theory</span><span class="bp">/</span><span class="n">adjoin</span><span class="bp">/</span><span class="n">fg</span>   <span class="mi">6</span><span class="bp">.</span><span class="mi">21294</span>
<span class="n">ring_theory</span><span class="bp">/</span><span class="n">adjoin</span><span class="bp">/</span><span class="n">polynomial</span>   <span class="mi">5</span><span class="bp">.</span><span class="mi">80635</span>
<span class="n">ring_theory</span><span class="bp">/</span><span class="n">polynomial</span><span class="bp">/</span><span class="n">basic</span>    <span class="mi">72</span><span class="bp">.</span><span class="mi">7344</span>
<span class="n">ring_theory</span><span class="bp">/</span><span class="n">principal_ideal_domain</span>  <span class="mi">12</span><span class="bp">.</span><span class="mi">6089</span>
<span class="n">ring_theory</span><span class="bp">/</span><span class="n">unique_factorization_domain</span> <span class="mi">42</span><span class="bp">.</span><span class="mi">9805</span>
<span class="n">ring_theory</span><span class="bp">/</span><span class="n">integral_domain</span> <span class="mi">9</span><span class="bp">.</span><span class="mi">11644</span>
<span class="n">data</span><span class="bp">/</span><span class="n">polynomial</span><span class="bp">/</span><span class="n">ring_division</span>   <span class="mi">16</span><span class="bp">.</span><span class="mi">6944</span>
<span class="n">data</span><span class="bp">/</span><span class="n">polynomial</span><span class="bp">/</span><span class="n">div</span> <span class="mi">12</span><span class="bp">.</span><span class="mi">952</span>
<span class="n">data</span><span class="bp">/</span><span class="n">polynomial</span><span class="bp">/</span><span class="n">monic</span>   <span class="mi">13</span><span class="bp">.</span><span class="mi">6841</span>
<span class="n">data</span><span class="bp">/</span><span class="n">polynomial</span><span class="bp">/</span><span class="n">reverse</span> <span class="mi">6</span><span class="bp">.</span><span class="mi">24052</span>
<span class="n">data</span><span class="bp">/</span><span class="n">polynomial</span><span class="bp">/</span><span class="n">eval</span>    <span class="mi">33</span><span class="bp">.</span><span class="mi">6065</span>
<span class="n">data</span><span class="bp">/</span><span class="n">polynomial</span><span class="bp">/</span><span class="n">degree</span><span class="bp">/</span><span class="n">definitions</span>  <span class="mi">21</span><span class="bp">.</span><span class="mi">1174</span>
<span class="n">data</span><span class="bp">/</span><span class="n">polynomial</span><span class="bp">/</span><span class="n">monomial</span>    <span class="mi">10</span><span class="bp">.</span><span class="mi">8134</span>
<span class="n">data</span><span class="bp">/</span><span class="n">polynomial</span><span class="bp">/</span><span class="n">coeff</span>   <span class="mi">10</span><span class="bp">.</span><span class="mi">6286</span>
<span class="n">data</span><span class="bp">/</span><span class="n">polynomial</span><span class="bp">/</span><span class="n">basic</span>   <span class="mi">41</span><span class="bp">.</span><span class="mi">7989</span>
<span class="n">algebra</span><span class="bp">/</span><span class="n">monoid_algebra</span><span class="bp">/</span><span class="n">basic</span>    <span class="mi">77</span><span class="bp">.</span><span class="mi">746</span>
<span class="n">algebra</span><span class="bp">/</span><span class="n">non_unital_alg_hom</span>  <span class="mi">5</span><span class="bp">.</span><span class="mi">13058</span>
<span class="n">algebra</span><span class="bp">/</span><span class="n">algebra</span><span class="bp">/</span><span class="n">basic</span>   <span class="mi">37</span><span class="bp">.</span><span class="mi">5372</span>
<span class="n">linear_algebra</span><span class="bp">/</span><span class="n">tensor_product</span>   <span class="mi">45</span><span class="bp">.</span><span class="mi">8692</span>
<span class="n">linear_algebra</span><span class="bp">/</span><span class="n">bilinear_map</span> <span class="mi">3</span><span class="bp">.</span><span class="mi">95732</span>
<span class="n">linear_algebra</span><span class="bp">/</span><span class="n">basic</span>    <span class="mi">92</span><span class="bp">.</span><span class="mi">5836</span>
<span class="n">data</span><span class="bp">/</span><span class="n">dfinsupp</span>   <span class="mi">59</span><span class="bp">.</span><span class="mi">9861</span>
<span class="n">algebra</span><span class="bp">/</span><span class="n">module</span><span class="bp">/</span><span class="n">linear_map</span>   <span class="mi">7</span><span class="bp">.</span><span class="mi">07023</span>
<span class="n">algebra</span><span class="bp">/</span><span class="n">group_action_hom</span>    <span class="mi">4</span><span class="bp">.</span><span class="mi">23101</span>
<span class="n">algebra</span><span class="bp">/</span><span class="n">group_ring_action</span>   <span class="mi">3</span><span class="bp">.</span><span class="mi">2552</span>
<span class="n">ring_theory</span><span class="bp">/</span><span class="n">subring</span> <span class="mi">10</span><span class="bp">.</span><span class="mi">4688</span>
<span class="n">group_theory</span><span class="bp">/</span><span class="n">subgroup</span>   <span class="mi">37</span><span class="bp">.</span><span class="mi">3691</span>
<span class="n">group_theory</span><span class="bp">/</span><span class="n">submonoid</span><span class="bp">/</span><span class="n">center</span>   <span class="mi">2</span><span class="bp">.</span><span class="mi">91385</span>
<span class="n">group_theory</span><span class="bp">/</span><span class="n">submonoid</span><span class="bp">/</span><span class="n">operations</span>   <span class="mi">8</span><span class="bp">.</span><span class="mi">3513</span>
<span class="n">algebra</span><span class="bp">/</span><span class="n">pointwise</span>   <span class="mi">8</span><span class="bp">.</span><span class="mi">32447</span>
<span class="n">algebra</span><span class="bp">/</span><span class="n">module</span><span class="bp">/</span><span class="n">basic</span>    <span class="mi">6</span><span class="bp">.</span><span class="mi">11838</span>
<span class="n">algebra</span><span class="bp">/</span><span class="n">big_operators</span><span class="bp">/</span><span class="n">basic</span> <span class="mi">26</span><span class="bp">.</span><span class="mi">6518</span>
<span class="n">tactic</span><span class="bp">/</span><span class="n">abel</span> <span class="mi">6</span><span class="bp">.</span><span class="mi">3525</span>
<span class="n">tactic</span><span class="bp">/</span><span class="n">norm_num</span> <span class="mi">7</span><span class="bp">.</span><span class="mi">2906</span>
<span class="n">data</span><span class="bp">/</span><span class="n">rat</span><span class="bp">/</span><span class="n">cast</span>   <span class="mi">8</span><span class="bp">.</span><span class="mi">50179</span>
<span class="n">data</span><span class="bp">/</span><span class="n">int</span><span class="bp">/</span><span class="n">char_zero</span>  <span class="mi">1</span><span class="bp">.</span><span class="mi">92927</span>
<span class="n">algebra</span><span class="bp">/</span><span class="n">char_zero</span>   <span class="mi">3</span><span class="bp">.</span><span class="mi">30769</span>
<span class="n">data</span><span class="bp">/</span><span class="n">fintype</span><span class="bp">/</span><span class="n">basic</span>  <span class="mi">26</span><span class="bp">.</span><span class="mi">5525</span>
<span class="n">data</span><span class="bp">/</span><span class="n">finset</span><span class="bp">/</span><span class="n">powerset</span>    <span class="mi">3</span><span class="bp">.</span><span class="mi">87303</span>
<span class="n">data</span><span class="bp">/</span><span class="n">finset</span><span class="bp">/</span><span class="n">lattice</span> <span class="mi">6</span><span class="bp">.</span><span class="mi">63514</span>
<span class="n">data</span><span class="bp">/</span><span class="n">finset</span><span class="bp">/</span><span class="n">fold</span>    <span class="mi">3</span><span class="bp">.</span><span class="mi">0229</span>
<span class="n">data</span><span class="bp">/</span><span class="n">finset</span><span class="bp">/</span><span class="n">basic</span>   <span class="mi">34</span><span class="bp">.</span><span class="mi">6086</span>
<span class="n">data</span><span class="bp">/</span><span class="n">multiset</span><span class="bp">/</span><span class="n">finset_ops</span>    <span class="mi">3</span><span class="bp">.</span><span class="mi">31185</span>
<span class="n">data</span><span class="bp">/</span><span class="n">multiset</span><span class="bp">/</span><span class="n">erase_dup</span> <span class="mi">2</span><span class="bp">.</span><span class="mi">25666</span>
<span class="n">data</span><span class="bp">/</span><span class="n">multiset</span><span class="bp">/</span><span class="n">nodup</span> <span class="mi">2</span><span class="bp">.</span><span class="mi">91105</span>
<span class="n">data</span><span class="bp">/</span><span class="n">multiset</span><span class="bp">/</span><span class="n">powerset</span>  <span class="mi">4</span><span class="bp">.</span><span class="mi">57061</span>
<span class="n">data</span><span class="bp">/</span><span class="n">multiset</span><span class="bp">/</span><span class="n">basic</span> <span class="mi">25</span><span class="bp">.</span><span class="mi">7305</span>
<span class="n">data</span><span class="bp">/</span><span class="n">list</span><span class="bp">/</span><span class="n">perm</span>  <span class="mi">11</span><span class="bp">.</span><span class="mi">7846</span>
<span class="n">data</span><span class="bp">/</span><span class="n">list</span><span class="bp">/</span><span class="n">erase_dup</span> <span class="mi">1</span><span class="bp">.</span><span class="mi">60637</span>
<span class="n">data</span><span class="bp">/</span><span class="n">list</span><span class="bp">/</span><span class="n">nodup</span> <span class="mi">3</span><span class="bp">.</span><span class="mi">45075</span>
<span class="n">data</span><span class="bp">/</span><span class="n">list</span><span class="bp">/</span><span class="n">pairwise</span>  <span class="mi">3</span><span class="bp">.</span><span class="mi">81794</span>
<span class="n">data</span><span class="bp">/</span><span class="n">list</span><span class="bp">/</span><span class="n">sublists</span>  <span class="mi">3</span><span class="bp">.</span><span class="mi">30711</span>
<span class="n">data</span><span class="bp">/</span><span class="n">list</span><span class="bp">/</span><span class="n">basic</span> <span class="mi">42</span><span class="bp">.</span><span class="mi">1169</span>
<span class="n">data</span><span class="bp">/</span><span class="n">nat</span><span class="bp">/</span><span class="n">basic</span>  <span class="mi">9</span><span class="bp">.</span><span class="mi">98537</span>
<span class="n">algebra</span><span class="bp">/</span><span class="n">ordered_ring</span>    <span class="mi">17</span><span class="bp">.</span><span class="mi">1195</span>
<span class="n">data</span><span class="bp">/</span><span class="n">set</span><span class="bp">/</span><span class="n">intervals</span><span class="bp">/</span><span class="n">basic</span>    <span class="mi">16</span><span class="bp">.</span><span class="mi">4385</span>
<span class="n">algebra</span><span class="bp">/</span><span class="n">ordered_group</span>   <span class="mi">10</span><span class="bp">.</span><span class="mi">7727</span>
<span class="n">algebra</span><span class="bp">/</span><span class="n">ordered_monoid</span>  <span class="mi">10</span><span class="bp">.</span><span class="mi">291</span>
<span class="n">algebra</span><span class="bp">/</span><span class="n">group</span><span class="bp">/</span><span class="n">prod</span>  <span class="mi">5</span><span class="bp">.</span><span class="mi">30827</span>
<span class="n">algebra</span><span class="bp">/</span><span class="n">opposites</span>   <span class="mi">2</span><span class="bp">.</span><span class="mi">50444</span>
<span class="n">algebra</span><span class="bp">/</span><span class="n">field</span>   <span class="mi">3</span><span class="bp">.</span><span class="mi">38681</span>
<span class="n">algebra</span><span class="bp">/</span><span class="n">ring</span><span class="bp">/</span><span class="n">basic</span>  <span class="mi">6</span><span class="bp">.</span><span class="mi">85919</span>
<span class="n">algebra</span><span class="bp">/</span><span class="n">regular</span><span class="bp">/</span><span class="n">basic</span>   <span class="mi">1</span><span class="bp">.</span><span class="mi">31733</span>
<span class="n">logic</span><span class="bp">/</span><span class="n">embedding</span> <span class="mi">3</span><span class="bp">.</span><span class="mi">46166</span>
<span class="n">data</span><span class="bp">/</span><span class="n">equiv</span><span class="bp">/</span><span class="n">basic</span>    <span class="mi">15</span><span class="bp">.</span><span class="mi">8946</span>
<span class="n">data</span><span class="bp">/</span><span class="n">set</span><span class="bp">/</span><span class="n">function</span>   <span class="mi">3</span><span class="bp">.</span><span class="mi">41891</span>
<span class="n">data</span><span class="bp">/</span><span class="n">set</span><span class="bp">/</span><span class="n">basic</span>  <span class="mi">18</span><span class="bp">.</span><span class="mi">229</span>
<span class="n">order</span><span class="bp">/</span><span class="n">boolean_algebra</span>   <span class="mi">11</span><span class="bp">.</span><span class="mi">0211</span>
<span class="n">order</span><span class="bp">/</span><span class="n">bounded_lattice</span>   <span class="mi">6</span><span class="bp">.</span><span class="mi">16343</span>
<span class="n">order</span><span class="bp">/</span><span class="n">lattice</span>   <span class="mi">2</span><span class="bp">.</span><span class="mi">56701</span>
<span class="n">order</span><span class="bp">/</span><span class="n">rel_classes</span>   <span class="mi">1</span><span class="bp">.</span><span class="mi">19856</span>
<span class="n">order</span><span class="bp">/</span><span class="n">basic</span> <span class="mi">1</span><span class="bp">.</span><span class="mi">60228</span>
<span class="n">data</span><span class="bp">/</span><span class="n">prod</span>   <span class="mi">0</span><span class="bp">.</span><span class="mi">839731</span>
<span class="n">tactic</span><span class="bp">/</span><span class="n">basic</span>    <span class="mi">0</span><span class="bp">.</span><span class="mi">567406</span>
<span class="n">tactic</span><span class="bp">/</span><span class="n">obviously</span>    <span class="mi">0</span><span class="bp">.</span><span class="mi">494836</span>
<span class="n">tactic</span><span class="bp">/</span><span class="n">tidy</span> <span class="mi">0</span><span class="bp">.</span><span class="mi">568107</span>
<span class="n">tactic</span><span class="bp">/</span><span class="n">norm_cast</span>    <span class="mi">1</span><span class="bp">.</span><span class="mi">24841</span>
<span class="n">tactic</span><span class="bp">/</span><span class="n">hint</span> <span class="mi">0</span><span class="bp">.</span><span class="mi">558297</span>
<span class="n">tactic</span><span class="bp">/</span><span class="n">interactive</span>  <span class="mi">1</span><span class="bp">.</span><span class="mi">2318</span>
<span class="n">tactic</span><span class="bp">/</span><span class="n">dependencies</span> <span class="mi">0</span><span class="bp">.</span><span class="mi">609335</span>
<span class="n">tactic</span><span class="bp">/</span><span class="n">core</span> <span class="mi">1</span><span class="bp">.</span><span class="mi">68626</span>
<span class="n">tactic</span><span class="bp">/</span><span class="n">binder_matching</span>  <span class="mi">0</span><span class="bp">.</span><span class="mi">456182</span>
<span class="kd">meta</span><span class="bp">/</span><span class="n">expr</span>   <span class="mi">1</span><span class="bp">.</span><span class="mi">04582</span>
<span class="kd">meta</span><span class="bp">/</span><span class="n">rb_map</span> <span class="mi">0</span><span class="bp">.</span><span class="mi">421523</span>
<span class="n">data</span><span class="bp">/</span><span class="n">list</span><span class="bp">/</span><span class="n">defs</span>  <span class="mi">0</span><span class="bp">.</span><span class="mi">947617</span>
<span class="n">logic</span><span class="bp">/</span><span class="n">basic</span> <span class="mi">1</span><span class="bp">.</span><span class="mi">61654</span>
<span class="n">tactic</span><span class="bp">/</span><span class="n">doc_commands</span> <span class="mi">0</span><span class="bp">.</span><span class="mi">477453</span>
<span class="n">tactic</span><span class="bp">/</span><span class="n">fix_reflect_string</span>   <span class="mi">0</span><span class="bp">.</span><span class="mi">359337</span>
</code></pre></div>



<a name="253932444"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/The%20long%20pole%20in%20mathlib/near/253932444" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/The.20long.20pole.20in.20mathlib.html#253932444">(Sep 19 2021 at 09:38)</a>:</h4>
<p>If anyone is interested I can post the longest chain starting at any given (or even all) files in mathlib.</p>



<a name="253932482"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/The%20long%20pole%20in%20mathlib/near/253932482" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/The.20long.20pole.20in.20mathlib.html#253932482">(Sep 19 2021 at 09:39)</a>:</h4>
<p>If anyone sees something slow on that list that shouldn't really be needed for <code>data/real/pi</code>, feel free to PR changes that move things off this chain, or speed them up!</p>



<a name="253936297"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/The%20long%20pole%20in%20mathlib/near/253936297" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/The.20long.20pole.20in.20mathlib.html#253936297">(Sep 19 2021 at 10:46)</a>:</h4>
<p>Here's a spanning tree of mathlib, for which each file's parent has been chosen as the slowest-to-compile-given-arbitrary-parallelism:</p>
<p><a href="/user_uploads/3121/SzTF1YhQtjQRYkE4qxLPoVOw/Screen-Shot-2021-09-19-at-8.44.03-pm.png">Screen-Shot-2021-09-19-at-8.44.03-pm.png</a> </p>
<div class="message_inline_image"><a href="/user_uploads/3121/SzTF1YhQtjQRYkE4qxLPoVOw/Screen-Shot-2021-09-19-at-8.44.03-pm.png" title="Screen-Shot-2021-09-19-at-8.44.03-pm.png"><img src="/user_uploads/3121/SzTF1YhQtjQRYkE4qxLPoVOw/Screen-Shot-2021-09-19-at-8.44.03-pm.png"></a></div><p>I have a version in mathematica with tooltips that actually show the files names, but I don't have an easy to share version of that.</p>



<a name="253938595"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/The%20long%20pole%20in%20mathlib/near/253938595" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/The.20long.20pole.20in.20mathlib.html#253938595">(Sep 19 2021 at 11:26)</a>:</h4>
<p>It certainly looks like poor <code>π</code> needs to wait for a lot of stuff. Finite dimensional vector spaces, inner products, unique factorization domains.</p>



<a name="253946556"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/The%20long%20pole%20in%20mathlib/near/253946556" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/The.20long.20pole.20in.20mathlib.html#253946556">(Sep 19 2021 at 13:49)</a>:</h4>
<p>How did you obtain the data? Is it something we should set up a CI bot to do?</p>



<a name="253973715"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/The%20long%20pole%20in%20mathlib/near/253973715" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/The.20long.20pole.20in.20mathlib.html#253973715">(Sep 19 2021 at 21:39)</a>:</h4>
<p>I pulled the JSON file of mathlib build times from the CI stream (e.g. "<a href="https://mathlib-bench.limperg.de/commit/10a620163757cd2cf745db99c686e9721a1d0d3b/json">https://mathlib-bench.limperg.de/commit/10a620163757cd2cf745db99c686e9721a1d0d3b/json</a>"), and then parsed all the mathlib files for <code>import</code> statements.</p>



<a name="253973799"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/The%20long%20pole%20in%20mathlib/near/253973799" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/The.20long.20pole.20in.20mathlib.html#253973799">(Sep 19 2021 at 21:40)</a>:</h4>
<p>It's written in mathematica, so not exactly deployable in CI, but it would be easy to translate if someone wanted to.</p>



<a name="253973810"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/The%20long%20pole%20in%20mathlib/near/253973810" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/The.20long.20pole.20in.20mathlib.html#253973810">(Sep 19 2021 at 21:40)</a>:</h4>
<p><a href="/user_uploads/3121/_RH2PL51yO-_cbXChYFsTz76/mathlib-imports.nb">mathlib-imports.nb</a></p>



<a name="253981628"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/The%20long%20pole%20in%20mathlib/near/253981628" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bolton Bailey <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/The.20long.20pole.20in.20mathlib.html#253981628">(Sep 20 2021 at 00:05)</a>:</h4>
<p>Seems like <code>smul_eq_C_mul</code> in <code>data/polynomial/monomial</code> is the only reason that file can't import <code>data/polynomial/basic</code> directly instead of <code>data/polynomial/coeff</code>. I remember there being some kind of awkward interdependency between those, but I guess it's resolved now.</p>



<a name="253987429"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/The%20long%20pole%20in%20mathlib/near/253987429" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/The.20long.20pole.20in.20mathlib.html#253987429">(Sep 20 2021 at 01:45)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib/issues/9289">#9289</a> was motivated by this analysis: we don't need the theory of finite dimensional vector spaces to develop pi.</p>



<a name="253987441"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/The%20long%20pole%20in%20mathlib/near/253987441" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/The.20long.20pole.20in.20mathlib.html#253987441">(Sep 20 2021 at 01:45)</a>:</h4>
<p>It reduces the long pole from 54.6 minutes to 51.6 minutes.</p>



<a name="253990911"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/The%20long%20pole%20in%20mathlib/near/253990911" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bolton Bailey <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/The.20long.20pole.20in.20mathlib.html#253990911">(Sep 20 2021 at 02:47)</a>:</h4>
<p>Does the longest pole switch to something completely different when you make this change, or is most of it the same?</p>



<a name="253991958"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/The%20long%20pole%20in%20mathlib/near/253991958" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/The.20long.20pole.20in.20mathlib.html#253991958">(Sep 20 2021 at 03:06)</a>:</h4>
<p>No, this one is going to be the long pole for a long time.</p>



<a name="253996525"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/The%20long%20pole%20in%20mathlib/near/253996525" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/The.20long.20pole.20in.20mathlib.html#253996525">(Sep 20 2021 at 04:35)</a>:</h4>
<p>After <a href="https://github.com/leanprover-community/mathlib/issues/9292">#9292</a> and <a href="https://github.com/leanprover-community/mathlib/issues/9293">#9293</a> the long pole is down to 46.5 minutes.</p>



<a name="253997791"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/The%20long%20pole%20in%20mathlib/near/253997791" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/The.20long.20pole.20in.20mathlib.html#253997791">(Sep 20 2021 at 04:59)</a>:</h4>
<p>Here's a script, based on <code>get_axioms_used</code>, that will print the files used in all dependents of a given list of target theorems. If you run this on all theorems in <code>data.real.pi</code> you should get a lower bound on the files that are needed to actually prove the theorems, assuming you don't split any files up:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">data.real.pi</span>

<span class="kd">meta</span> <span class="kd">def</span> <span class="n">tactic.get_dependents_aux</span> <span class="o">(</span><span class="n">env</span> <span class="o">:</span> <span class="n">environment</span><span class="o">)</span> <span class="o">:</span> <span class="n">name</span> <span class="bp">→</span>
  <span class="n">name_set</span> <span class="bp">×</span> <span class="n">name_set</span> <span class="bp">→</span> <span class="n">tactic</span> <span class="o">(</span><span class="n">name_set</span> <span class="bp">×</span> <span class="n">name_set</span><span class="o">)</span>
<span class="bp">|</span> <span class="n">n</span> <span class="n">p</span><span class="bp">@</span><span class="o">(</span><span class="n">fs</span><span class="o">,</span> <span class="n">ns</span><span class="o">)</span> <span class="o">:=</span> <span class="k">if</span> <span class="n">ns.contains</span> <span class="n">n</span> <span class="k">then</span> <span class="n">pure</span> <span class="n">p</span> <span class="k">else</span> <span class="k">do</span>
  <span class="k">let</span> <span class="n">fs</span> <span class="o">:=</span> <span class="k">match</span> <span class="n">env.decl_olean</span> <span class="n">n</span> <span class="k">with</span>
  <span class="bp">|</span> <span class="n">none</span> <span class="o">:=</span> <span class="n">fs</span>
  <span class="bp">|</span> <span class="n">some</span> <span class="n">f</span> <span class="o">:=</span> <span class="n">fs.insert</span> <span class="n">f</span>
  <span class="kd">end</span><span class="o">,</span>
  <span class="n">d</span> <span class="bp">←</span> <span class="n">env.get</span> <span class="n">n</span><span class="o">,</span>
  <span class="k">let</span> <span class="n">ns</span> <span class="o">:=</span> <span class="n">ns.insert</span> <span class="n">n</span><span class="o">,</span>
  <span class="k">let</span> <span class="n">process</span> <span class="o">(</span><span class="n">v</span> <span class="o">:</span> <span class="n">expr</span><span class="o">)</span> <span class="o">:</span> <span class="n">tactic</span> <span class="o">(</span><span class="n">name_set</span> <span class="bp">×</span> <span class="n">name_set</span><span class="o">)</span> <span class="o">:=</span> <span class="o">(</span><span class="k">do</span>
    <span class="n">v.fold</span> <span class="o">(</span><span class="n">pure</span> <span class="o">(</span><span class="n">fs</span><span class="o">,</span> <span class="n">ns</span><span class="o">))</span> <span class="bp">$</span> <span class="bp">λ</span> <span class="n">e</span> <span class="n">_</span> <span class="n">r</span><span class="o">,</span> <span class="n">r</span> <span class="bp">&gt;&gt;=</span> <span class="bp">λ</span> <span class="n">p</span><span class="o">,</span>
      <span class="k">if</span> <span class="n">e.is_constant</span> <span class="k">then</span> <span class="n">tactic.get_dependents_aux</span> <span class="n">e.const_name</span> <span class="n">p</span> <span class="k">else</span> <span class="n">pure</span> <span class="n">p</span><span class="o">),</span>
  <span class="k">match</span> <span class="n">d</span> <span class="k">with</span>
  <span class="bp">|</span> <span class="o">(</span><span class="n">declaration.defn</span> <span class="n">_</span> <span class="n">_</span> <span class="n">_</span> <span class="n">v</span> <span class="n">_</span> <span class="n">_</span><span class="o">)</span> <span class="o">:=</span> <span class="n">process</span> <span class="n">v</span>
  <span class="bp">|</span> <span class="o">(</span><span class="n">declaration.thm</span> <span class="n">_</span> <span class="n">_</span> <span class="n">_</span> <span class="n">v</span><span class="o">)</span>      <span class="o">:=</span> <span class="n">process</span> <span class="n">v.get</span>
  <span class="bp">|</span> <span class="n">_</span> <span class="o">:=</span> <span class="n">pure</span> <span class="o">(</span><span class="n">fs</span><span class="o">,</span> <span class="n">ns</span><span class="o">)</span>
  <span class="kd">end</span>

<span class="kd">meta</span> <span class="kd">def</span> <span class="n">tactic.get_dependents</span> <span class="o">(</span><span class="n">ns</span> <span class="o">:</span> <span class="n">list</span> <span class="n">name</span><span class="o">)</span> <span class="o">:</span> <span class="n">tactic</span> <span class="n">name_set</span> <span class="o">:=</span>
<span class="k">do</span> <span class="n">env</span> <span class="bp">←</span> <span class="n">tactic.get_env</span><span class="o">,</span>
  <span class="n">prod.fst</span> <span class="bp">&lt;$&gt;</span> <span class="n">ns.mfoldl</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">p</span> <span class="n">n</span><span class="o">,</span> <span class="n">tactic.get_dependents_aux</span> <span class="n">env</span> <span class="n">n</span> <span class="n">p</span><span class="o">)</span> <span class="o">(</span><span class="n">mk_name_set</span><span class="o">,</span> <span class="n">mk_name_set</span><span class="o">)</span>

<span class="k">#eval</span> <span class="k">do</span>
  <span class="n">s</span> <span class="bp">←</span> <span class="n">tactic.get_dependents</span> <span class="o">[</span><span class="bp">``</span><span class="n">real.pi_gt_3141592</span><span class="o">,</span> <span class="bp">``</span><span class="n">real.pi_lt_3141593</span><span class="o">],</span>
  <span class="n">s.fold</span> <span class="o">(</span><span class="n">pure</span> <span class="o">())</span> <span class="bp">$</span> <span class="bp">λ</span> <span class="n">e</span> <span class="n">r</span><span class="o">,</span> <span class="n">r</span> <span class="bp">&gt;&gt;</span> <span class="n">tactic.trace</span> <span class="n">e</span>
</code></pre></div>



<a name="253998003"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/The%20long%20pole%20in%20mathlib/near/253998003" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/The.20long.20pole.20in.20mathlib.html#253998003">(Sep 20 2021 at 05:01)</a>:</h4>
<p>Taking the diff from the "long pole" above yields the following list of files, which are imported but for which none of the theorems are used transitively:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">algebra</span><span class="bp">/</span><span class="n">group_ring_action</span>
<span class="n">algebra</span><span class="bp">/</span><span class="n">monoid_algebra</span><span class="bp">/</span><span class="n">basic</span>
<span class="n">algebra</span><span class="bp">/</span><span class="n">non_unital_alg_hom</span>
<span class="n">algebra</span><span class="bp">/</span><span class="n">opposites</span>
<span class="n">algebra</span><span class="bp">/</span><span class="n">ordered_group</span>
<span class="n">algebra</span><span class="bp">/</span><span class="n">ordered_monoid</span>
<span class="n">algebra</span><span class="bp">/</span><span class="n">ordered_ring</span>
<span class="n">analysis</span><span class="bp">/</span><span class="n">analytic</span><span class="bp">/</span><span class="n">basic</span>
<span class="n">analysis</span><span class="bp">/</span><span class="n">calculus</span><span class="bp">/</span><span class="n">local_extr</span>
<span class="n">analysis</span><span class="bp">/</span><span class="n">complex</span><span class="bp">/</span><span class="n">conformal</span>
<span class="n">analysis</span><span class="bp">/</span><span class="n">convex</span><span class="bp">/</span><span class="n">specific_functions</span>
<span class="n">analysis</span><span class="bp">/</span><span class="n">mean_inequalities</span>
<span class="n">analysis</span><span class="bp">/</span><span class="n">normed_space</span><span class="bp">/</span><span class="n">conformal_linear_map</span>
<span class="n">analysis</span><span class="bp">/</span><span class="n">special_functions</span><span class="bp">/</span><span class="n">integrals</span>
<span class="n">analysis</span><span class="bp">/</span><span class="n">special_functions</span><span class="bp">/</span><span class="n">pow</span>
<span class="n">analysis</span><span class="bp">/</span><span class="n">special_functions</span><span class="bp">/</span><span class="n">sqrt</span>
<span class="n">data</span><span class="bp">/</span><span class="n">finset</span><span class="bp">/</span><span class="n">powerset</span>
<span class="n">data</span><span class="bp">/</span><span class="n">list</span><span class="bp">/</span><span class="n">sublists</span>
<span class="n">data</span><span class="bp">/</span><span class="n">multiset</span><span class="bp">/</span><span class="n">powerset</span>
<span class="n">data</span><span class="bp">/</span><span class="n">polynomial</span><span class="bp">/</span><span class="n">basic</span>
<span class="n">data</span><span class="bp">/</span><span class="n">polynomial</span><span class="bp">/</span><span class="n">coeff</span>
<span class="n">data</span><span class="bp">/</span><span class="n">polynomial</span><span class="bp">/</span><span class="n">degree</span><span class="bp">/</span><span class="n">definitions</span>
<span class="n">data</span><span class="bp">/</span><span class="n">polynomial</span><span class="bp">/</span><span class="n">div</span>
<span class="n">data</span><span class="bp">/</span><span class="n">polynomial</span><span class="bp">/</span><span class="n">eval</span>
<span class="n">data</span><span class="bp">/</span><span class="n">polynomial</span><span class="bp">/</span><span class="n">monic</span>
<span class="n">data</span><span class="bp">/</span><span class="n">polynomial</span><span class="bp">/</span><span class="n">monomial</span>
<span class="n">data</span><span class="bp">/</span><span class="n">polynomial</span><span class="bp">/</span><span class="n">reverse</span>
<span class="n">data</span><span class="bp">/</span><span class="n">polynomial</span><span class="bp">/</span><span class="n">ring_division</span>
<span class="n">group_theory</span><span class="bp">/</span><span class="n">submonoid</span><span class="bp">/</span><span class="n">center</span>
<span class="n">linear_algebra</span><span class="bp">/</span><span class="n">tensor_product</span>
<span class="n">measure_theory</span><span class="bp">/</span><span class="n">constructions</span><span class="bp">/</span><span class="n">pi</span>
<span class="n">measure_theory</span><span class="bp">/</span><span class="n">constructions</span><span class="bp">/</span><span class="n">prod</span>
<span class="n">measure_theory</span><span class="bp">/</span><span class="n">function</span><span class="bp">/</span><span class="n">l1_space</span>
<span class="n">measure_theory</span><span class="bp">/</span><span class="n">function</span><span class="bp">/</span><span class="n">lp_space</span>
<span class="n">measure_theory</span><span class="bp">/</span><span class="n">function</span><span class="bp">/</span><span class="n">simple_func_dense</span>
<span class="n">measure_theory</span><span class="bp">/</span><span class="n">integral</span><span class="bp">/</span><span class="n">bochner</span>
<span class="n">measure_theory</span><span class="bp">/</span><span class="n">integral</span><span class="bp">/</span><span class="n">interval_integral</span>
<span class="n">measure_theory</span><span class="bp">/</span><span class="n">integral</span><span class="bp">/</span><span class="n">mean_inequalities</span>
<span class="n">measure_theory</span><span class="bp">/</span><span class="n">integral</span><span class="bp">/</span><span class="n">set_integral</span>
<span class="n">measure_theory</span><span class="bp">/</span><span class="n">integral</span><span class="bp">/</span><span class="n">set_to_l1</span>
<span class="n">measure_theory</span><span class="bp">/</span><span class="n">measure</span><span class="bp">/</span><span class="n">lebesgue</span>
<span class="kd">meta</span><span class="bp">/</span><span class="n">expr</span>
<span class="kd">meta</span><span class="bp">/</span><span class="n">rb_map</span>
<span class="n">ring_theory</span><span class="bp">/</span><span class="n">adjoin</span><span class="bp">/</span><span class="n">basic</span>
<span class="n">ring_theory</span><span class="bp">/</span><span class="n">integral_domain</span>
<span class="n">ring_theory</span><span class="bp">/</span><span class="n">polynomial</span><span class="bp">/</span><span class="n">basic</span>
<span class="n">ring_theory</span><span class="bp">/</span><span class="n">subring</span>
<span class="n">ring_theory</span><span class="bp">/</span><span class="n">unique_factorization_domain</span>
<span class="n">tactic</span><span class="bp">/</span><span class="n">basic</span>
<span class="n">tactic</span><span class="bp">/</span><span class="n">binder_matching</span>
<span class="n">tactic</span><span class="bp">/</span><span class="n">core</span>
<span class="n">tactic</span><span class="bp">/</span><span class="n">dependencies</span>
<span class="n">tactic</span><span class="bp">/</span><span class="n">doc_commands</span>
<span class="n">tactic</span><span class="bp">/</span><span class="n">fix_reflect_string</span>
<span class="n">tactic</span><span class="bp">/</span><span class="n">hint</span>
<span class="n">tactic</span><span class="bp">/</span><span class="n">interactive</span>
<span class="n">tactic</span><span class="bp">/</span><span class="n">obviously</span>
<span class="n">tactic</span><span class="bp">/</span><span class="n">tidy</span>
</code></pre></div>



<a name="253998298"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/The%20long%20pole%20in%20mathlib/near/253998298" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/The.20long.20pole.20in.20mathlib.html#253998298">(Sep 20 2021 at 05:06)</a>:</h4>
<p>Very interesting! Taking the files appearing in the long pile to <code>data.real.pi</code>, subtracting out Mario's list (everything that is actually needed), we get:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">algebra</span><span class="bp">/</span><span class="n">group_ring_action</span>
<span class="n">algebra</span><span class="bp">/</span><span class="n">opposites</span>
<span class="n">analysis</span><span class="bp">/</span><span class="n">analytic</span><span class="bp">/</span><span class="n">basic</span>
<span class="n">analysis</span><span class="bp">/</span><span class="n">calculus</span><span class="bp">/</span><span class="n">inverse</span>
<span class="n">analysis</span><span class="bp">/</span><span class="n">calculus</span><span class="bp">/</span><span class="n">local_extr</span>
<span class="n">analysis</span><span class="bp">/</span><span class="n">convex</span><span class="bp">/</span><span class="n">specific_functions</span>
<span class="n">analysis</span><span class="bp">/</span><span class="n">mean_inequalities</span>
<span class="n">analysis</span><span class="bp">/</span><span class="n">special_functions</span><span class="bp">/</span><span class="n">integrals</span>
<span class="n">analysis</span><span class="bp">/</span><span class="n">special_functions</span><span class="bp">/</span><span class="n">pow</span>
<span class="n">data</span><span class="bp">/</span><span class="n">dfinsupp</span>
<span class="n">data</span><span class="bp">/</span><span class="n">finset</span><span class="bp">/</span><span class="n">powerset</span>
<span class="n">data</span><span class="bp">/</span><span class="n">list</span><span class="bp">/</span><span class="n">sublists</span>
<span class="n">data</span><span class="bp">/</span><span class="n">multiset</span><span class="bp">/</span><span class="n">powerset</span>
<span class="n">linear_algebra</span><span class="bp">/</span><span class="n">tensor_product</span>
<span class="n">measure_theory</span><span class="bp">/</span><span class="n">constructions</span><span class="bp">/</span><span class="n">pi</span>
<span class="n">measure_theory</span><span class="bp">/</span><span class="n">constructions</span><span class="bp">/</span><span class="n">prod</span>
<span class="n">measure_theory</span><span class="bp">/</span><span class="n">function</span><span class="bp">/</span><span class="n">l1_space</span>
<span class="n">measure_theory</span><span class="bp">/</span><span class="n">function</span><span class="bp">/</span><span class="n">lp_space</span>
<span class="n">measure_theory</span><span class="bp">/</span><span class="n">function</span><span class="bp">/</span><span class="n">simple_func_dense</span>
<span class="n">measure_theory</span><span class="bp">/</span><span class="n">integral</span><span class="bp">/</span><span class="n">bochner</span>
<span class="n">measure_theory</span><span class="bp">/</span><span class="n">integral</span><span class="bp">/</span><span class="n">interval_integral</span>
<span class="n">measure_theory</span><span class="bp">/</span><span class="n">integral</span><span class="bp">/</span><span class="n">mean_inequalities</span>
<span class="n">measure_theory</span><span class="bp">/</span><span class="n">integral</span><span class="bp">/</span><span class="n">set_integral</span>
<span class="n">measure_theory</span><span class="bp">/</span><span class="n">integral</span><span class="bp">/</span><span class="n">set_to_l1</span>
<span class="n">measure_theory</span><span class="bp">/</span><span class="n">measure</span><span class="bp">/</span><span class="n">lebesgue</span>
<span class="kd">meta</span><span class="bp">/</span><span class="n">expr</span>
<span class="kd">meta</span><span class="bp">/</span><span class="n">rb_map</span>
<span class="n">ring_theory</span><span class="bp">/</span><span class="n">subring</span>
<span class="n">tactic</span><span class="bp">/</span><span class="n">basic</span>
<span class="n">tactic</span><span class="bp">/</span><span class="n">binder_matching</span>
<span class="n">tactic</span><span class="bp">/</span><span class="n">core</span>
<span class="n">tactic</span><span class="bp">/</span><span class="n">dependencies</span>
<span class="n">tactic</span><span class="bp">/</span><span class="n">doc_commands</span>
<span class="n">tactic</span><span class="bp">/</span><span class="n">fix_reflect_string</span>
<span class="n">tactic</span><span class="bp">/</span><span class="n">hint</span>
<span class="n">tactic</span><span class="bp">/</span><span class="n">interactive</span>
<span class="n">tactic</span><span class="bp">/</span><span class="n">obviously</span>
<span class="n">tactic</span><span class="bp">/</span><span class="n">tidy</span>
<span class="n">topology</span><span class="bp">/</span><span class="n">algebra</span><span class="bp">/</span><span class="n">infinite_sum</span>
<span class="n">topology</span><span class="bp">/</span><span class="n">instances</span><span class="bp">/</span><span class="n">ennreal</span>
</code></pre></div>



<a name="253998337"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/The%20long%20pole%20in%20mathlib/near/253998337" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/The.20long.20pole.20in.20mathlib.html#253998337">(Sep 20 2021 at 05:07)</a>:</h4>
<p>we got different lists <span aria-label="thinking" class="emoji emoji-1f914" role="img" title="thinking">:thinking:</span></p>



<a name="253998362"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/The%20long%20pole%20in%20mathlib/near/253998362" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/The.20long.20pole.20in.20mathlib.html#253998362">(Sep 20 2021 at 05:07)</a>:</h4>
<p>These are the files that we are "uselessly importing" on the way to <code>data.real.pi</code>. In particular "most of measure theory".</p>



<a name="253998437"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/The%20long%20pole%20in%20mathlib/near/253998437" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/The.20long.20pole.20in.20mathlib.html#253998437">(Sep 20 2021 at 05:08)</a>:</h4>
<p>No -- this complement is exactly what is interesting. It's the stuff that, by doing a bit of splitting so we can only import what we really need, can be removed from the import dependencies of <code>data.real.pi</code>.</p>



<a name="253998457"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/The%20long%20pole%20in%20mathlib/near/253998457" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/The.20long.20pole.20in.20mathlib.html#253998457">(Sep 20 2021 at 05:09)</a>:</h4>
<p>No, I mean I updated my list above to do basically the same calculation (I think) and got a different list of files</p>



<a name="253998465"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/The%20long%20pole%20in%20mathlib/near/253998465" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/The.20long.20pole.20in.20mathlib.html#253998465">(Sep 20 2021 at 05:09)</a>:</h4>
<p>mine doesn't have any topology</p>



<a name="253998471"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/The%20long%20pole%20in%20mathlib/near/253998471" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/The.20long.20pole.20in.20mathlib.html#253998471">(Sep 20 2021 at 05:09)</a>:</h4>
<p>Oh! I missed the edit above, soory.</p>



<a name="253998482"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/The%20long%20pole%20in%20mathlib/near/253998482" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/The.20long.20pole.20in.20mathlib.html#253998482">(Sep 20 2021 at 05:09)</a>:</h4>
<p>Oh, maybe you are including the effect of those PRs</p>



<a name="253998495"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/The%20long%20pole%20in%20mathlib/near/253998495" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/The.20long.20pole.20in.20mathlib.html#253998495">(Sep 20 2021 at 05:09)</a>:</h4>
<p>I used latest master</p>



<a name="253998540"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/The%20long%20pole%20in%20mathlib/near/253998540" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/The.20long.20pole.20in.20mathlib.html#253998540">(Sep 20 2021 at 05:10)</a>:</h4>
<p>Yes, I was using a local branch which was the sup of today's PRs on this.</p>



<a name="253998556"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/The%20long%20pole%20in%20mathlib/near/253998556" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/The.20long.20pole.20in.20mathlib.html#253998556">(Sep 20 2021 at 05:10)</a>:</h4>
<p>So the difference between our lists is what I've already removed from the import dependencies of <code>data.real.pi</code>.</p>



<a name="253998590"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/The%20long%20pole%20in%20mathlib/near/253998590" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/The.20long.20pole.20in.20mathlib.html#253998590">(Sep 20 2021 at 05:11)</a>:</h4>
<p>Of course, my PRs have not finished CI, so are probably still horribly broken by missing imports. :-)</p>



<a name="253998602"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/The%20long%20pole%20in%20mathlib/near/253998602" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/The.20long.20pole.20in.20mathlib.html#253998602">(Sep 20 2021 at 05:11)</a>:</h4>
<p>Also, I didn't include all of the theorems in <code>data.real.pi</code>, just the bound calculation</p>



<a name="253998833"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/The%20long%20pole%20in%20mathlib/near/253998833" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/The.20long.20pole.20in.20mathlib.html#253998833">(Sep 20 2021 at 05:15)</a>:</h4>
<p>Oh, and it makes a difference: all these files are added to the list when you add in the wallis product and leibniz series:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">algebra</span><span class="bp">/</span><span class="n">big_operators</span><span class="bp">/</span><span class="n">finsupp</span>
<span class="n">algebra</span><span class="bp">/</span><span class="n">char_p</span><span class="bp">/</span><span class="n">invertible</span>
<span class="n">algebra</span><span class="bp">/</span><span class="n">invertible</span>
<span class="n">algebra</span><span class="bp">/</span><span class="n">monoid_algebra</span><span class="bp">/</span><span class="n">basic</span>
<span class="n">algebra</span><span class="bp">/</span><span class="n">opposites</span>
<span class="n">analysis</span><span class="bp">/</span><span class="n">calculus</span><span class="bp">/</span><span class="n">extend_deriv</span>
<span class="n">analysis</span><span class="bp">/</span><span class="n">calculus</span><span class="bp">/</span><span class="n">local_extr</span>
<span class="n">analysis</span><span class="bp">/</span><span class="n">convex</span><span class="bp">/</span><span class="n">combination</span>
<span class="n">analysis</span><span class="bp">/</span><span class="n">convex</span><span class="bp">/</span><span class="n">cone</span>
<span class="n">analysis</span><span class="bp">/</span><span class="n">convex</span><span class="bp">/</span><span class="n">specific_functions</span>
<span class="n">analysis</span><span class="bp">/</span><span class="n">mean_inequalities</span>
<span class="n">analysis</span><span class="bp">/</span><span class="n">normed_space</span><span class="bp">/</span><span class="n">dual</span>
<span class="n">analysis</span><span class="bp">/</span><span class="n">normed_space</span><span class="bp">/</span><span class="n">extend</span>
<span class="n">analysis</span><span class="bp">/</span><span class="n">normed_space</span><span class="bp">/</span><span class="n">hahn_banach</span>
<span class="n">analysis</span><span class="bp">/</span><span class="n">normed_space</span><span class="bp">/</span><span class="n">indicator_function</span>
<span class="n">analysis</span><span class="bp">/</span><span class="n">normed_space</span><span class="bp">/</span><span class="n">units</span>
<span class="n">analysis</span><span class="bp">/</span><span class="n">special_functions</span><span class="bp">/</span><span class="n">integrals</span>
<span class="n">analysis</span><span class="bp">/</span><span class="n">special_functions</span><span class="bp">/</span><span class="n">pow</span>
<span class="n">data</span><span class="bp">/</span><span class="n">equiv</span><span class="bp">/</span><span class="n">encodable</span><span class="bp">/</span><span class="n">lattice</span>
<span class="n">data</span><span class="bp">/</span><span class="n">equiv</span><span class="bp">/</span><span class="n">local_equiv</span>
<span class="n">data</span><span class="bp">/</span><span class="n">equiv</span><span class="bp">/</span><span class="n">nat</span>
<span class="n">data</span><span class="bp">/</span><span class="n">equiv</span><span class="bp">/</span><span class="n">ring</span>
<span class="n">data</span><span class="bp">/</span><span class="n">nat</span><span class="bp">/</span><span class="n">parity</span>
<span class="n">data</span><span class="bp">/</span><span class="n">opposite</span>
<span class="n">data</span><span class="bp">/</span><span class="n">polynomial</span><span class="bp">/</span><span class="n">basic</span>
<span class="n">data</span><span class="bp">/</span><span class="n">polynomial</span><span class="bp">/</span><span class="n">coeff</span>
<span class="n">data</span><span class="bp">/</span><span class="n">polynomial</span><span class="bp">/</span><span class="n">derivative</span>
<span class="n">data</span><span class="bp">/</span><span class="n">polynomial</span><span class="bp">/</span><span class="n">eval</span>
<span class="n">data</span><span class="bp">/</span><span class="n">polynomial</span><span class="bp">/</span><span class="n">induction</span>
<span class="n">data</span><span class="bp">/</span><span class="n">real</span><span class="bp">/</span><span class="n">conjugate_exponents</span>
<span class="n">data</span><span class="bp">/</span><span class="n">real</span><span class="bp">/</span><span class="n">ereal</span>
<span class="n">data</span><span class="bp">/</span><span class="n">set</span><span class="bp">/</span><span class="n">accumulate</span>
<span class="n">data</span><span class="bp">/</span><span class="n">set</span><span class="bp">/</span><span class="n">intervals</span><span class="bp">/</span><span class="n">disjoint</span>
<span class="n">data</span><span class="bp">/</span><span class="n">set</span><span class="bp">/</span><span class="n">intervals</span><span class="bp">/</span><span class="n">proj_Icc</span>
<span class="n">data</span><span class="bp">/</span><span class="n">set</span><span class="bp">/</span><span class="n">pairwise</span>
<span class="n">group_theory</span><span class="bp">/</span><span class="n">perm</span><span class="bp">/</span><span class="n">basic</span>
<span class="n">linear_algebra</span><span class="bp">/</span><span class="n">linear_pmap</span>
<span class="n">logic</span><span class="bp">/</span><span class="n">relator</span>
<span class="n">measure_theory</span><span class="bp">/</span><span class="n">constructions</span><span class="bp">/</span><span class="n">borel_space</span>
<span class="n">measure_theory</span><span class="bp">/</span><span class="n">function</span><span class="bp">/</span><span class="n">ae_eq_fun</span>
<span class="n">measure_theory</span><span class="bp">/</span><span class="n">function</span><span class="bp">/</span><span class="n">ae_measurable_sequence</span>
<span class="n">measure_theory</span><span class="bp">/</span><span class="n">function</span><span class="bp">/</span><span class="n">ess_sup</span>
<span class="n">measure_theory</span><span class="bp">/</span><span class="n">function</span><span class="bp">/</span><span class="n">l1_space</span>
<span class="n">measure_theory</span><span class="bp">/</span><span class="n">function</span><span class="bp">/</span><span class="n">lp_space</span>
<span class="n">measure_theory</span><span class="bp">/</span><span class="n">function</span><span class="bp">/</span><span class="n">simple_func_dense</span>
<span class="n">measure_theory</span><span class="bp">/</span><span class="n">function</span><span class="bp">/</span><span class="n">special_functions</span>
<span class="n">measure_theory</span><span class="bp">/</span><span class="n">group</span><span class="bp">/</span><span class="n">arithmetic</span>
<span class="n">measure_theory</span><span class="bp">/</span><span class="n">integral</span><span class="bp">/</span><span class="n">bochner</span>
<span class="n">measure_theory</span><span class="bp">/</span><span class="n">integral</span><span class="bp">/</span><span class="n">integrable_on</span>
<span class="n">measure_theory</span><span class="bp">/</span><span class="n">integral</span><span class="bp">/</span><span class="n">interval_integral</span>
<span class="n">measure_theory</span><span class="bp">/</span><span class="n">integral</span><span class="bp">/</span><span class="n">lebesgue</span>
<span class="n">measure_theory</span><span class="bp">/</span><span class="n">integral</span><span class="bp">/</span><span class="n">mean_inequalities</span>
<span class="n">measure_theory</span><span class="bp">/</span><span class="n">integral</span><span class="bp">/</span><span class="n">set_integral</span>
<span class="n">measure_theory</span><span class="bp">/</span><span class="n">integral</span><span class="bp">/</span><span class="n">set_to_l1</span>
<span class="n">measure_theory</span><span class="bp">/</span><span class="n">integral</span><span class="bp">/</span><span class="n">vitali_caratheodory</span>
<span class="n">measure_theory</span><span class="bp">/</span><span class="n">measurable_space</span>
<span class="n">measure_theory</span><span class="bp">/</span><span class="n">measurable_space_def</span>
<span class="n">measure_theory</span><span class="bp">/</span><span class="n">measure</span><span class="bp">/</span><span class="n">lebesgue</span>
<span class="n">measure_theory</span><span class="bp">/</span><span class="n">measure</span><span class="bp">/</span><span class="n">measure_space</span>
<span class="n">measure_theory</span><span class="bp">/</span><span class="n">measure</span><span class="bp">/</span><span class="n">measure_space_def</span>
<span class="n">measure_theory</span><span class="bp">/</span><span class="n">measure</span><span class="bp">/</span><span class="n">outer_measure</span>
<span class="n">measure_theory</span><span class="bp">/</span><span class="n">measure</span><span class="bp">/</span><span class="n">regular</span>
<span class="n">measure_theory</span><span class="bp">/</span><span class="n">measure</span><span class="bp">/</span><span class="n">stieltjes</span>
<span class="n">measure_theory</span><span class="bp">/</span><span class="n">pi_system</span>
<span class="n">order</span><span class="bp">/</span><span class="n">disjointed</span>
<span class="n">order</span><span class="bp">/</span><span class="n">filter</span><span class="bp">/</span><span class="n">archimedean</span>
<span class="n">order</span><span class="bp">/</span><span class="n">filter</span><span class="bp">/</span><span class="n">cofinite</span>
<span class="n">order</span><span class="bp">/</span><span class="n">filter</span><span class="bp">/</span><span class="n">countable_Inter</span>
<span class="n">order</span><span class="bp">/</span><span class="n">filter</span><span class="bp">/</span><span class="n">ennreal</span>
<span class="n">order</span><span class="bp">/</span><span class="n">filter</span><span class="bp">/</span><span class="n">extr</span>
<span class="n">order</span><span class="bp">/</span><span class="n">filter</span><span class="bp">/</span><span class="n">germ</span>
<span class="n">order</span><span class="bp">/</span><span class="n">liminf_limsup</span>
<span class="n">tactic</span><span class="bp">/</span><span class="n">ring_exp</span>
<span class="n">topology</span><span class="bp">/</span><span class="n">algebra</span><span class="bp">/</span><span class="n">group_with_zero</span>
<span class="n">topology</span><span class="bp">/</span><span class="n">algebra</span><span class="bp">/</span><span class="n">infinite_sum</span>
<span class="n">topology</span><span class="bp">/</span><span class="n">algebra</span><span class="bp">/</span><span class="n">ordered</span><span class="bp">/</span><span class="n">liminf_limsup</span>
<span class="n">topology</span><span class="bp">/</span><span class="n">algebra</span><span class="bp">/</span><span class="n">ordered</span><span class="bp">/</span><span class="n">proj_Icc</span>
<span class="n">topology</span><span class="bp">/</span><span class="n">bases</span>
<span class="n">topology</span><span class="bp">/</span><span class="n">dense_embedding</span>
<span class="n">topology</span><span class="bp">/</span><span class="n">instances</span><span class="bp">/</span><span class="n">ennreal</span>
<span class="n">topology</span><span class="bp">/</span><span class="n">instances</span><span class="bp">/</span><span class="n">ereal</span>
<span class="n">topology</span><span class="bp">/</span><span class="n">local_extr</span>
<span class="n">topology</span><span class="bp">/</span><span class="n">local_homeomorph</span>
<span class="n">topology</span><span class="bp">/</span><span class="n">metric_space</span><span class="bp">/</span><span class="n">cau_seq_filter</span>
<span class="n">topology</span><span class="bp">/</span><span class="n">semicontinuous</span>
<span class="n">topology</span><span class="bp">/</span><span class="n">sequences</span>
</code></pre></div>



<a name="253998943"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/The%20long%20pole%20in%20mathlib/near/253998943" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/The.20long.20pole.20in.20mathlib.html#253998943">(Sep 20 2021 at 05:18)</a>:</h4>
<p>which brings the list of unnecessary imports down to:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">algebra</span><span class="bp">/</span><span class="n">group_ring_action</span>
<span class="n">analysis</span><span class="bp">/</span><span class="n">analytic</span><span class="bp">/</span><span class="n">basic</span>
<span class="n">analysis</span><span class="bp">/</span><span class="n">calculus</span><span class="bp">/</span><span class="n">inverse</span>
<span class="n">data</span><span class="bp">/</span><span class="n">dfinsupp</span>
<span class="n">data</span><span class="bp">/</span><span class="n">finset</span><span class="bp">/</span><span class="n">powerset</span>
<span class="n">data</span><span class="bp">/</span><span class="n">list</span><span class="bp">/</span><span class="n">sublists</span>
<span class="n">data</span><span class="bp">/</span><span class="n">multiset</span><span class="bp">/</span><span class="n">powerset</span>
<span class="n">linear_algebra</span><span class="bp">/</span><span class="n">tensor_product</span>
<span class="n">measure_theory</span><span class="bp">/</span><span class="n">constructions</span><span class="bp">/</span><span class="n">pi</span>
<span class="n">measure_theory</span><span class="bp">/</span><span class="n">constructions</span><span class="bp">/</span><span class="n">prod</span>
<span class="kd">meta</span><span class="bp">/</span><span class="n">expr</span>
<span class="kd">meta</span><span class="bp">/</span><span class="n">rb_map</span>
<span class="n">ring_theory</span><span class="bp">/</span><span class="n">subring</span>
<span class="n">tactic</span><span class="bp">/</span><span class="n">basic</span>
<span class="n">tactic</span><span class="bp">/</span><span class="n">binder_matching</span>
<span class="n">tactic</span><span class="bp">/</span><span class="n">core</span>
<span class="n">tactic</span><span class="bp">/</span><span class="n">dependencies</span>
<span class="n">tactic</span><span class="bp">/</span><span class="n">doc_commands</span>
<span class="n">tactic</span><span class="bp">/</span><span class="n">fix_reflect_string</span>
<span class="n">tactic</span><span class="bp">/</span><span class="n">hint</span>
<span class="n">tactic</span><span class="bp">/</span><span class="n">interactive</span>
<span class="n">tactic</span><span class="bp">/</span><span class="n">obviously</span>
<span class="n">tactic</span><span class="bp">/</span><span class="n">tidy</span>
</code></pre></div>



<a name="253999001"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/The%20long%20pole%20in%20mathlib/near/253999001" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/The.20long.20pole.20in.20mathlib.html#253999001">(Sep 20 2021 at 05:18)</a>:</h4>
<p>but it also suggests that maybe the two halves of <code>data.real.pi</code> shouldn't be in the same file</p>



<a name="254081844"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/The%20long%20pole%20in%20mathlib/near/254081844" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/The.20long.20pole.20in.20mathlib.html#254081844">(Sep 20 2021 at 16:55)</a>:</h4>
<p><span class="user-mention" data-user-id="110087">@Scott Morrison</span> What is the difference between the length of the long pole and the length of an actual mathlib compile? Can we gain something by making lean aware of the long pole?</p>



<a name="254098405"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/The%20long%20pole%20in%20mathlib/near/254098405" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/The.20long.20pole.20in.20mathlib.html#254098405">(Sep 20 2021 at 18:45)</a>:</h4>
<p>The Wallis product argument could be rephrased to use the mean value theorem rather than the fundamental theorem of calculus (thus, no measure theory import), if we want to displace the precise position of the long pole.</p>



<a name="254113424"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/The%20long%20pole%20in%20mathlib/near/254113424" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/The.20long.20pole.20in.20mathlib.html#254113424">(Sep 20 2021 at 20:32)</a>:</h4>
<p>I don't think it's particularly valuable to reduce the long pole at the cost of new mathematical arguments, unless they are independently "better".</p>



<a name="254113460"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/The%20long%20pole%20in%20mathlib/near/254113460" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/The.20long.20pole.20in.20mathlib.html#254113460">(Sep 20 2021 at 20:32)</a>:</h4>
<p>I don't want to object to anyone using high powered maths to give easy proofs. :-)</p>



<a name="254113572"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/The%20long%20pole%20in%20mathlib/near/254113572" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/The.20long.20pole.20in.20mathlib.html#254113572">(Sep 20 2021 at 20:33)</a>:</h4>
<p>But, like in real life, if someone gave me a long-winded introduction to subject X, then gave an argument that didn't use it at all, I would be annoyed!</p>



<a name="254132873"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/The%20long%20pole%20in%20mathlib/near/254132873" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/The.20long.20pole.20in.20mathlib.html#254132873">(Sep 20 2021 at 23:15)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112680">Johan Commelin</span> <a href="#narrow/stream/113488-general/topic/The.20long.20pole.20in.20mathlib/near/254081844">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="110087">Scott Morrison</span> What is the difference between the length of the long pole and the length of an actual mathlib compile? Can we gain something by making lean aware of the long pole?</p>
</blockquote>
<p>I guess potentially we could.</p>
<p>Currently the long pole analysis assumes infinite parallelism, in which case the build would be deterministic --- everything would compile as soon as it possibly could. In that idealisation the only way to speed things up is to shorten the long pole by changing the code.</p>
<p>With finite parallelism, every time a core come free you have to make a choice between the new compilation units that become available.</p>
<p>It's not immediately clear how to do a cheap computation on-the-fly to decide this. I guess at the beginning we could just assign each file a score "total compilation time remaining after this file, assuming infinite parallelism", and always pick the file with largest score. This would be pretty easy to implement. It would even be reasonable to simulate (e.g. and compare against the "random" and "smallest score" strategies to get a sense of value).</p>



<a name="254147035"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/The%20long%20pole%20in%20mathlib/near/254147035" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/The.20long.20pole.20in.20mathlib.html#254147035">(Sep 21 2021 at 02:26)</a>:</h4>
<p>Lean is also more finely parallelized than this - each proof is processed independently, although perhaps the advantage of this is dubious and I believe this is no longer done in lean 4. So this "long pole" model is maybe a little too coarse, although it's not entirely wrong to consider the cost of reading through the definitions and other objects involved in parsing a lean file (the single threaded part) since they contribute to this "long pole", but it is a bit untrue to put the elaboration cost of all the proofs in that metric.</p>



<a name="254149543"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/The%20long%20pole%20in%20mathlib/near/254149543" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/The.20long.20pole.20in.20mathlib.html#254149543">(Sep 21 2021 at 03:06)</a>:</h4>
<p>The per-declaration parallelisation is gone in Lean4, and I'm not sure it actually crosses file boundaries in Lean3 anyway. (Does anyone know for sure on this? That is, if <code>A</code> imports <code>B</code>, does compilation of <code>A</code> start once all the definitions on <code>B</code> are done, even if there are still proofs to <code>B</code> being worked on? Or does <code>A</code> not start until the <code>B</code> is completely finished?)</p>



<a name="254152105"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/The%20long%20pole%20in%20mathlib/near/254152105" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/The.20long.20pole.20in.20mathlib.html#254152105">(Sep 21 2021 at 03:52)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110087">Scott Morrison</span> <a href="#narrow/stream/113488-general/topic/The.20long.20pole.20in.20mathlib/near/254132873">said</a>:</p>
<blockquote>
<p>With finite parallelism, every time a core come free you have to make a choice between the new compilation units that become available.</p>
<p>It's not immediately clear how to do a cheap computation on-the-fly to decide this. I guess at the beginning we could just assign each file a score "total compilation time remaining after this file, assuming infinite parallelism", and always pick the file with largest score. This would be pretty easy to implement. It would even be reasonable to simulate (e.g. and compare against the "random" and "smallest score" strategies to get a sense of value).</p>
</blockquote>
<p>Right, I meant exactly this. The score is only an approximation of the "real 16-core parallelism score" because it makes a simplification in computing the score. But it might still be a better heuristic than "pick something random".</p>



<a name="254223601"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/The%20long%20pole%20in%20mathlib/near/254223601" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/The.20long.20pole.20in.20mathlib.html#254223601">(Sep 21 2021 at 15:11)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110087">Scott Morrison</span> <a href="#narrow/stream/113488-general/topic/The.20long.20pole.20in.20mathlib/near/254149543">said</a>:</p>
<blockquote>
<p>The per-declaration parallelisation is gone in Lean4, and I'm not sure it actually crosses file boundaries in Lean3 anyway. (Does anyone know for sure on this? That is, if <code>A</code> imports <code>B</code>, does compilation of <code>A</code> start once all the definitions on <code>B</code> are done, even if there are still proofs to <code>B</code> being worked on? Or does <code>A</code> not start until the <code>B</code> is completely finished?)</p>
</blockquote>
<p>I made a simple test project to check whether lean does move on to lemmas in later files and it seems it does.<br>
In <a href="https://github.com/alexjbest/pole-test">https://github.com/alexjbest/pole-test</a> there are two lean files <code>a</code> and <code>b</code>, each of which has two lemmas, the ones in <code>a</code> sleep for 10 and 20 seconds respectively. The ones in <code>b</code> just spam the CPU with dumb rfl statements. So running <code>lean -j2 src/b.lean</code> to check these files with 2 threads I see nothing happening to the CPU for 10 seconds, then 100% of one core, then 10 seconds later 200%, which I think shows lean is moving on to <code>b</code> with one thread while the longer lemma in <code>a</code> is still being processed. Of course this will look a bit different if your machine is fast enough to do the <code>b</code> lemmas in &lt; 10s.</p>



<a name="254293161"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/The%20long%20pole%20in%20mathlib/near/254293161" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/The.20long.20pole.20in.20mathlib.html#254293161">(Sep 21 2021 at 23:26)</a>:</h4>
<p>Good to know! Thank you. In any case this behaviour is disappearing in Lean4, so we shouldn't plan around it. :-)</p>



<a name="254494233"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/The%20long%20pole%20in%20mathlib/near/254494233" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bolton Bailey <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/The.20long.20pole.20in.20mathlib.html#254494233">(Sep 23 2021 at 07:40)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib/issues/9344">#9344</a> is a PR for a python implementation of this script.</p>



<a name="254500109"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/The%20long%20pole%20in%20mathlib/near/254500109" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/The.20long.20pole.20in.20mathlib.html#254500109">(Sep 23 2021 at 08:31)</a>:</h4>
<p><span class="user-mention" data-user-id="282271">@Bolton Bailey</span>, I see you closed the PR in favour of a PR to mathlibtools. It's perfect if this functionality ends up in <code>leanproject</code>, but be aware the quality standards for <code>leanproject</code> are going to much higher than the <code>scripts/</code> directory of mathlib. Perfect is the enemy of good: if this doesn't make it into <code>leanproject</code>, please do dump it into <code>scripts/</code>!</p>



<a name="254501266"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/The%20long%20pole%20in%20mathlib/near/254501266" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/The.20long.20pole.20in.20mathlib.html#254501266">(Sep 23 2021 at 08:41)</a>:</h4>
<p>A middle ground would be to just <code>import mathlibtools</code>, as something like:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="k">from</span> <span class="n">mathlibtools.lib</span> <span class="kn">import</span> <span class="n">LeanProject</span>

<span class="n">proj</span> <span class="bp">=</span> <span class="n">LeanProject.from_path</span><span class="o">(</span><span class="n">Path</span><span class="o">(</span><span class="s2">"."</span><span class="o">))</span>
<span class="n">graph</span> <span class="bp">=</span> <span class="n">proj.import_graph</span>
</code></pre></div>



<a name="254501440"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/The%20long%20pole%20in%20mathlib/near/254501440" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/The.20long.20pole.20in.20mathlib.html#254501440">(Sep 23 2021 at 08:43)</a>:</h4>
<p>That might be the better choice anyway, in fact, as the json files this processes only really exist for mathlib</p>



<a name="254501529"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/The%20long%20pole%20in%20mathlib/near/254501529" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/The.20long.20pole.20in.20mathlib.html#254501529">(Sep 23 2021 at 08:44)</a>:</h4>
<p>The only downside is that the install instructions for mathlibtools don't make the import available on all platforms</p>



<a name="254501576"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/The%20long%20pole%20in%20mathlib/near/254501576" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/The.20long.20pole.20in.20mathlib.html#254501576">(Sep 23 2021 at 08:44)</a>:</h4>
<p>But if you use <code>pip</code> and not <code>pipx</code> it works fine</p>



<a name="254515818"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/The%20long%20pole%20in%20mathlib/near/254515818" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/The.20long.20pole.20in.20mathlib.html#254515818">(Sep 23 2021 at 10:55)</a>:</h4>
<p>Ok, I cracked and wrote a mathlib scheduler simulator.</p>
<p>These graphs are based on a random scheduler.</p>
<p>Compile time as function of max cores:<br>
<a href="/user_uploads/3121/NmNXT--bG_Urn9alQhxrMsIB/Screen-Shot-2021-09-23-at-8.54.29-pm.png">Screen-Shot-2021-09-23-at-8.54.29-pm.png</a> </p>
<div class="message_inline_image"><a href="/user_uploads/3121/NmNXT--bG_Urn9alQhxrMsIB/Screen-Shot-2021-09-23-at-8.54.29-pm.png" title="Screen-Shot-2021-09-23-at-8.54.29-pm.png"><img src="/user_uploads/3121/NmNXT--bG_Urn9alQhxrMsIB/Screen-Shot-2021-09-23-at-8.54.29-pm.png"></a></div><p>Core usage with max 4/10/40 cores:<br>
<a href="/user_uploads/3121/qYdwrHXH3QT3GzDt1wZhC11i/Screen-Shot-2021-09-23-at-8.50.31-pm.png">Screen-Shot-2021-09-23-at-8.50.31-pm.png</a> <a href="/user_uploads/3121/NN9AS-48M85N0SkXl--cAN-z/Screen-Shot-2021-09-23-at-8.50.36-pm.png">Screen-Shot-2021-09-23-at-8.50.36-pm.png</a> <a href="/user_uploads/3121/njV_vPYNCiSeOu6BuYECK60H/Screen-Shot-2021-09-23-at-8.50.43-pm.png">Screen-Shot-2021-09-23-at-8.50.43-pm.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/3121/qYdwrHXH3QT3GzDt1wZhC11i/Screen-Shot-2021-09-23-at-8.50.31-pm.png" title="Screen-Shot-2021-09-23-at-8.50.31-pm.png"><img src="/user_uploads/3121/qYdwrHXH3QT3GzDt1wZhC11i/Screen-Shot-2021-09-23-at-8.50.31-pm.png"></a></div><div class="message_inline_image"><a href="/user_uploads/3121/NN9AS-48M85N0SkXl--cAN-z/Screen-Shot-2021-09-23-at-8.50.36-pm.png" title="Screen-Shot-2021-09-23-at-8.50.36-pm.png"><img src="/user_uploads/3121/NN9AS-48M85N0SkXl--cAN-z/Screen-Shot-2021-09-23-at-8.50.36-pm.png"></a></div><div class="message_inline_image"><a href="/user_uploads/3121/njV_vPYNCiSeOu6BuYECK60H/Screen-Shot-2021-09-23-at-8.50.43-pm.png" title="Screen-Shot-2021-09-23-at-8.50.43-pm.png"><img src="/user_uploads/3121/njV_vPYNCiSeOu6BuYECK60H/Screen-Shot-2021-09-23-at-8.50.43-pm.png"></a></div>



<a name="254516465"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/The%20long%20pole%20in%20mathlib/near/254516465" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/The.20long.20pole.20in.20mathlib.html#254516465">(Sep 23 2021 at 11:01)</a>:</h4>
<p>So far, trying different scheduling strategies gives no more than about a 10% variation. And "random" seems to be close to the best. :-)</p>



<a name="254516608"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/The%20long%20pole%20in%20mathlib/near/254516608" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/The.20long.20pole.20in.20mathlib.html#254516608">(Sep 23 2021 at 11:02)</a>:</h4>
<p>hmmm, thanks a lot!</p>



<a name="254516630"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/The%20long%20pole%20in%20mathlib/near/254516630" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/The.20long.20pole.20in.20mathlib.html#254516630">(Sep 23 2021 at 11:02)</a>:</h4>
<p>Even though it's a bit disappointing that "random" is good enough</p>



<a name="254519188"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/The%20long%20pole%20in%20mathlib/near/254519188" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/The.20long.20pole.20in.20mathlib.html#254519188">(Sep 23 2021 at 11:28)</a>:</h4>
<p><span class="user-mention" data-user-id="110087">@Scott Morrison</span> what are these graphs/what is the scheduler simulator? is it just working at file level granularity?</p>



<a name="254519304"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/The%20long%20pole%20in%20mathlib/near/254519304" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/The.20long.20pole.20in.20mathlib.html#254519304">(Sep 23 2021 at 11:29)</a>:</h4>
<p>Here's another interesting way to cut the data: weight the files extra based on how much under-utilization there is. That is, if CPU utilization is 3 CPUs when 10 are available, then all three active files get 10/3 more "effective time" to their name. Files with the most effective time spent on them exist at cutpoints and decreases in the time spent there will have outsized benefits</p>



<a name="254600798"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/The%20long%20pole%20in%20mathlib/near/254600798" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/The.20long.20pole.20in.20mathlib.html#254600798">(Sep 23 2021 at 20:35)</a>:</h4>
<p><span class="user-mention" data-user-id="127136">@Alex J. Best</span>, yes, it's just working at file level. I keep track of a set of files remaining. Each entry is a filename, a time to compile that file, and a list of remaining dependencies. Whenever there is a CPU available and at least one file with no remaining dependencies, I pass the list of such files to the "scheduler" function to pick which one to start work on.</p>



<a name="254601485"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/The%20long%20pole%20in%20mathlib/near/254601485" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/The.20long.20pole.20in.20mathlib.html#254601485">(Sep 23 2021 at 20:40)</a>:</h4>
<p>Mario's suggestion, top 20 by utilisation-weighted compilation time:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">measure_theory</span><span class="bp">/</span><span class="n">integral</span><span class="bp">/</span><span class="n">interval_integral</span>   <span class="mi">912</span><span class="bp">.</span><span class="mi">659</span>
<span class="n">measure_theory</span><span class="bp">/</span><span class="n">function</span><span class="bp">/</span><span class="n">simple_func_dense</span>   <span class="mi">717</span><span class="bp">.</span><span class="mi">784</span>
<span class="n">measure_theory</span><span class="bp">/</span><span class="n">integral</span><span class="bp">/</span><span class="n">bochner</span> <span class="mi">698</span><span class="bp">.</span><span class="mi">796</span>
<span class="n">measure_theory</span><span class="bp">/</span><span class="n">integral</span><span class="bp">/</span><span class="n">set_to_l1</span>   <span class="mi">535</span><span class="bp">.</span><span class="mi">138</span>
<span class="n">measure_theory</span><span class="bp">/</span><span class="n">constructions</span><span class="bp">/</span><span class="n">prod</span>   <span class="mi">533</span><span class="bp">.</span><span class="mi">549</span>
<span class="n">analysis</span><span class="bp">/</span><span class="n">special_functions</span><span class="bp">/</span><span class="n">integrals</span>    <span class="mi">511</span><span class="bp">.</span><span class="mi">95</span>
<span class="n">analysis</span><span class="bp">/</span><span class="n">special_functions</span><span class="bp">/</span><span class="n">pow</span>  <span class="mi">417</span><span class="bp">.</span><span class="mi">861</span>
<span class="n">measure_theory</span><span class="bp">/</span><span class="n">integral</span><span class="bp">/</span><span class="n">set_integral</span>    <span class="mi">400</span><span class="bp">.</span><span class="mi">362</span>
<span class="n">measure_theory</span><span class="bp">/</span><span class="n">function</span><span class="bp">/</span><span class="n">lp_space</span>    <span class="mi">373</span><span class="bp">.</span><span class="mi">746</span>
<span class="n">linear_algebra</span><span class="bp">/</span><span class="n">quadratic_form</span>   <span class="mi">331</span><span class="bp">.</span><span class="mi">299</span>
<span class="n">measure_theory</span><span class="bp">/</span><span class="n">function</span><span class="bp">/</span><span class="n">l1_space</span>    <span class="mi">255</span><span class="bp">.</span><span class="mi">831</span>
<span class="n">measure_theory</span><span class="bp">/</span><span class="n">measure</span><span class="bp">/</span><span class="n">hausdorff</span>    <span class="mi">244</span><span class="bp">.</span><span class="mi">415</span>
<span class="n">geometry</span><span class="bp">/</span><span class="n">euclidean</span><span class="bp">/</span><span class="n">circumcenter</span> <span class="mi">236</span><span class="bp">.</span><span class="mi">834</span>
<span class="n">analysis</span><span class="bp">/</span><span class="n">normed_space</span><span class="bp">/</span><span class="n">inner_product</span> <span class="mi">227</span><span class="bp">.</span><span class="mi">198</span>
<span class="n">geometry</span><span class="bp">/</span><span class="n">manifold</span><span class="bp">/</span><span class="n">times_cont_mdiff</span>  <span class="mi">221</span><span class="bp">.</span><span class="mi">865</span>
<span class="n">linear_algebra</span><span class="bp">/</span><span class="n">clifford_algebra</span><span class="bp">/</span><span class="n">equivs</span>  <span class="mi">217</span><span class="bp">.</span><span class="mi">447</span>
<span class="n">measure_theory</span><span class="bp">/</span><span class="n">measure</span><span class="bp">/</span><span class="n">lebesgue</span> <span class="mi">207</span><span class="bp">.</span><span class="mi">226</span>
<span class="n">analysis</span><span class="bp">/</span><span class="n">special_functions</span><span class="bp">/</span><span class="n">trigonometric</span>    <span class="mi">192</span><span class="bp">.</span><span class="mi">349</span>
<span class="n">measure_theory</span><span class="bp">/</span><span class="n">decomposition</span><span class="bp">/</span><span class="n">lebesgue</span>   <span class="mi">181</span><span class="bp">.</span><span class="mi">744</span>
<span class="n">measure_theory</span><span class="bp">/</span><span class="n">measure</span><span class="bp">/</span><span class="n">measure_space</span>    <span class="mi">166</span><span class="bp">.</span><span class="mi">835</span>
</code></pre></div>



<a name="254601595"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/The%20long%20pole%20in%20mathlib/near/254601595" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/The.20long.20pole.20in.20mathlib.html#254601595">(Sep 23 2021 at 20:40)</a>:</h4>
<p>I'm not sure that it is that interesting ---  mostly we're just seeing that the rest of mathlib is done by the time we get to integration.</p>



<a name="254811629"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/The%20long%20pole%20in%20mathlib/near/254811629" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/The.20long.20pole.20in.20mathlib.html#254811629">(Sep 25 2021 at 05:47)</a>:</h4>
<p>I think the measure space library generally opts to introduce a notion and prove everything about it all in one file, so it ends up being a long sequence of files, each depending on one file before it, and not much parallelism is possible.</p>



<a name="254811742"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/The%20long%20pole%20in%20mathlib/near/254811742" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/The.20long.20pole.20in.20mathlib.html#254811742">(Sep 25 2021 at 05:49)</a>:</h4>
<p>As an example, I found it pretty surprising that the file in which we define a product measure already imports "everything" about Lebesgue measure. I would have thought that the basic construction would come much earlier. (e.g. even in a context where integration isn't set up, so Fubini/Tonelli would happen in a later file).</p>



<a name="254811824"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/The%20long%20pole%20in%20mathlib/near/254811824" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/The.20long.20pole.20in.20mathlib.html#254811824">(Sep 25 2021 at 05:50)</a>:</h4>
<p>What can we do to detect such "short poles" in mathlib? That is, linear sequences of files with high compile time</p>



<a name="254814761"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/The%20long%20pole%20in%20mathlib/near/254814761" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/The.20long.20pole.20in.20mathlib.html#254814761">(Sep 25 2021 at 06:42)</a>:</h4>
<p>This is a version of the spanning tree, where the y-coordinate of a node gives the time to reach that file under infinite parallelism, and the parent of each node is the last-to-start import.</p>
<p><a href="/user_uploads/3121/vWAif9iwHih8CSnvPD48gLNA/mathlib-spanning-tree.png">mathlib-spanning-tree.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/3121/vWAif9iwHih8CSnvPD48gLNA/mathlib-spanning-tree.png" title="mathlib-spanning-tree.png"><img src="/user_uploads/3121/vWAif9iwHih8CSnvPD48gLNA/mathlib-spanning-tree.png"></a></div>



<a name="254840814"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/The%20long%20pole%20in%20mathlib/near/254840814" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/The.20long.20pole.20in.20mathlib.html#254840814">(Sep 25 2021 at 13:42)</a>:</h4>
<p>Part of the problem is that Bochner integration imports L1 space which imports Lp space, which imports the function of raising a real number to the p-th power, which imports all of calculus.</p>
<p>We have a construction of the exponential which doesn't use calculus:<br>
<a href="https://leanprover-community.github.io/mathlib_docs/find/data.complex.exponential">docs#data.complex.exponential</a><br>
Would it be worth adding the definition of powers to this file, too?  Then measure theory could be compiled in parallel to calculus rather than after it.</p>



<a name="254849557"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/The%20long%20pole%20in%20mathlib/near/254849557" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/The.20long.20pole.20in.20mathlib.html#254849557">(Sep 25 2021 at 15:51)</a>:</h4>
<p>This sounds great! It does seem like we should be able to do a lot of integration theory without calculus.</p>



<a name="254849788"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/The%20long%20pole%20in%20mathlib/near/254849788" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/The.20long.20pole.20in.20mathlib.html#254849788">(Sep 25 2021 at 15:54)</a>:</h4>
<p>Is the correct version of that link <a href="https://leanprover-community.github.io/mathlib_docs/find/complex.exp">docs#complex.exp</a>?</p>



<a name="254858334"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/The%20long%20pole%20in%20mathlib/near/254858334" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/The.20long.20pole.20in.20mathlib.html#254858334">(Sep 25 2021 at 18:03)</a>:</h4>
<p>I think Heather wanted to link to a file. I guess we could potentially have file#data.complex.exponential ?</p>



<a name="254875759"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/The%20long%20pole%20in%20mathlib/near/254875759" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/The.20long.20pole.20in.20mathlib.html#254875759">(Sep 25 2021 at 22:32)</a>:</h4>
<p>It seems a reasonable first step might be to break <code>analysis/mean_inequalities</code> into separate files, so it's easier to pinpoint exactly which lemmas about <code>has_pow ℝ ℝ</code> are really needed.</p>



<a name="254875824"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/The%20long%20pole%20in%20mathlib/near/254875824" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/The.20long.20pole.20in.20mathlib.html#254875824">(Sep 25 2021 at 22:34)</a>:</h4>
<p>Yes -- note that it's possible that some proofs currently use calculus but wouldn't have to, like I wouldn't be surprised if there's a more direct proof of convexity.</p>



<a name="254876142"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/The%20long%20pole%20in%20mathlib/near/254876142" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/The.20long.20pole.20in.20mathlib.html#254876142">(Sep 25 2021 at 22:39)</a>:</h4>
<p>Another possibility is</p>
<ul>
<li>define <code>[Lp_class f g]</code> where <code>f</code> and <code>g</code> are a pair of inverse functions from <code>ℝ≥0∞</code> to itself satisfying ... some list of properties</li>
<li>define <code>Lp_space</code> to take <code>(f : ℝ≥0∞ → ℝ≥0∞) (g : ℝ≥0∞ → ℝ≥0∞) [Lp_class f g]</code> rather than <code>p</code></li>
<li>check that <code>[Lp_class id id]</code> and define <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>L</mi><mn>1</mn></msup></mrow><annotation encoding="application/x-tex">L^1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord mathnormal">L</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span></span></span></span></span></span></span></span> to be <code>Lp_space id id</code></li>
<li>much later in the hierarchy, check that <code>[Lp_class (λ x, x ^ p) (λ x, x ^ (1 / p))]</code></li>
</ul>



<a name="254876483"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/The%20long%20pole%20in%20mathlib/near/254876483" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/The.20long.20pole.20in.20mathlib.html#254876483">(Sep 25 2021 at 22:44)</a>:</h4>
<p>Hmm, I feel like this is too far a compromise. Mathlib compiling fast is nice, and I don't mind changing from one mathematically plausible definition to another to achieve this, but <code>[Lp_class]</code> doesn't really have a leg to stand on mathematically. :-)</p>



<a name="254876734"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/The%20long%20pole%20in%20mathlib/near/254876734" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/The.20long.20pole.20in.20mathlib.html#254876734">(Sep 25 2021 at 22:49)</a>:</h4>
<p>There would actually be one other use for <code>Lp_class</code>.  It is rather a pain currently that when people work with <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>L</mi><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">L^2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord mathnormal">L</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span>, the squaring involved is raising to the <code>(2:ℝ≥0∞)</code> power rather than the nat-2 power.  One has to mess around with power-cast lemmas, usually explicitly because it's a bit beyond the capabilities of <code>norm_cast</code>. This would let <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>L</mi><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">L^2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord mathnormal">L</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span> be defined with nat-2 powers.</p>



<a name="254877115"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/The%20long%20pole%20in%20mathlib/near/254877115" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rémy Degenne <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/The.20long.20pole.20in.20mathlib.html#254877115">(Sep 25 2021 at 22:55)</a>:</h4>
<p>I feel like changing the proof of convexity of the exponential (and rpow) to use a direct computation (like the first answer there: <a href="https://math.stackexchange.com/questions/1583000/convexity-of-exponential-function">https://math.stackexchange.com/questions/1583000/convexity-of-exponential-function</a>) and isolating the use of calculus in analysis.special_functions.pow is the simpler approach.</p>



<a name="254877181"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/The%20long%20pole%20in%20mathlib/near/254877181" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rémy Degenne <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/The.20long.20pole.20in.20mathlib.html#254877181">(Sep 25 2021 at 22:56)</a>:</h4>
<p>But I agree that the ennreal power in L2 is a pain :)</p>



<a name="254877217"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/The%20long%20pole%20in%20mathlib/near/254877217" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/The.20long.20pole.20in.20mathlib.html#254877217">(Sep 25 2021 at 22:57)</a>:</h4>
<p>OK, let's do that!  Maybe we just need to sit down and figure out the right simp-lemmas to improve working in L2.</p>



<a name="254877229"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/The%20long%20pole%20in%20mathlib/near/254877229" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/The.20long.20pole.20in.20mathlib.html#254877229">(Sep 25 2021 at 22:57)</a>:</h4>
<p>I'd thought I could try working on this today, but I seem to be in a no-ssh-allowed internet environment for a little while, and working on mathlib may just be too painful.</p>



<a name="254915354"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/The%20long%20pole%20in%20mathlib/near/254915354" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rémy Degenne <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/The.20long.20pole.20in.20mathlib.html#254915354">(Sep 26 2021 at 09:13)</a>:</h4>
<p>I have started working on isolating calculus in analysis/special_functions. Currently, all proofs of continuity of exp, log and the trigonometric functions use the existence of derivatives. Then continuity of exp is used for the definition of the real log, which is used in the definition of complex log, cpow, etc.<br>
I am replacing the proofs of continuity by direct ones in order to get a definition of all those objects without using derivatives.</p>



<a name="254932095"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/The%20long%20pole%20in%20mathlib/near/254932095" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/The.20long.20pole.20in.20mathlib.html#254932095">(Sep 26 2021 at 13:37)</a>:</h4>
<p>Do we need the continuity for Lp spaces, though?</p>



<a name="254932445"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/The%20long%20pole%20in%20mathlib/near/254932445" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rémy Degenne <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/The.20long.20pole.20in.20mathlib.html#254932445">(Sep 26 2021 at 13:43)</a>:</h4>
<p>i don't know? i am not sure that I get what you ask.<br>
I have observed that in order to define log (and everything that depends on it), we currently use continuity of the exponential: <a href="https://leanprover-community.github.io/mathlib_docs/find/real.log">docs#real.log</a> uses <a href="https://leanprover-community.github.io/mathlib_docs/find/real.exp_order_iso">docs#real.exp_order_iso</a>, whose surjectivity is proven through continuity. Hence I have made that continuity derivative-free. You want to avoid talking about continuity in those definitions?</p>



<a name="254932515"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/The%20long%20pole%20in%20mathlib/near/254932515" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/The.20long.20pole.20in.20mathlib.html#254932515">(Sep 26 2021 at 13:44)</a>:</h4>
<p>What is our proof that a function defined by a power series <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mo>∑</mo><mi>n</mi></msub><msub><mi>a</mi><mi>n</mi></msub><msup><mi>z</mi><mi>n</mi></msup></mrow><annotation encoding="application/x-tex">\sum_n a_nz^n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0497100000000001em;vertical-align:-0.29971000000000003em;"></span><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:-0.0000050000000000050004em;">∑</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.0016819999999999613em;"><span style="top:-2.40029em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.29971000000000003em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.04398em;">z</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.664392em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span></span></span></span></span></span></span> is continuous where the power series converges? [I mean, what does it use?]</p>



<a name="254949002"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/The%20long%20pole%20in%20mathlib/near/254949002" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/The.20long.20pole.20in.20mathlib.html#254949002">(Sep 26 2021 at 17:52)</a>:</h4>
<p>I see, you're right, continuity seems like the easiest proof of surjectivity.  I can think of three approaches to get continuity:</p>
<ul>
<li>directly as you've done</li>
<li>via <a href="https://leanprover-community.github.io/mathlib_docs/find/analytic_at.continuous_at">docs#analytic_at.continuous_at</a> as <span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> suggests</li>
<li>prove that convex implies continuous (useful to have in any case)</li>
</ul>



<a name="254952863"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/The%20long%20pole%20in%20mathlib/near/254952863" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/The.20long.20pole.20in.20mathlib.html#254952863">(Sep 26 2021 at 18:50)</a>:</h4>
<p>Oh, do we not have the last one?</p>



<a name="254968278"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/The%20long%20pole%20in%20mathlib/near/254968278" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/The.20long.20pole.20in.20mathlib.html#254968278">(Sep 26 2021 at 22:41)</a>:</h4>
<p><span class="user-mention" data-user-id="350992">@Rémy Degenne</span>, please note I have <a href="https://github.com/leanprover-community/mathlib/issues/9340">#9340</a> open, which splits the development of trigonometry across several files. This seems likely to conflict with what you're doing, so perhaps you could either have a look at my PR, or base your work on top of it?</p>



<a name="255009577"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/The%20long%20pole%20in%20mathlib/near/255009577" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rémy Degenne <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/The.20long.20pole.20in.20mathlib.html#255009577">(Sep 27 2021 at 08:09)</a>:</h4>
<p>Indeed, I now have a big pile of conflicts because I split that file in a different way. That merge will be fun.</p>



<a name="255011551"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/The%20long%20pole%20in%20mathlib/near/255011551" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/The.20long.20pole.20in.20mathlib.html#255011551">(Sep 27 2021 at 08:27)</a>:</h4>
<p>Sorry. :-( If it is too painful I can abandon mine. I'd prefer that content-ful PRs get priority over merely re-arranging PRs, of course.</p>



<a name="255011981"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/The%20long%20pole%20in%20mathlib/near/255011981" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rémy Degenne <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/The.20long.20pole.20in.20mathlib.html#255011981">(Sep 27 2021 at 08:31)</a>:</h4>
<p>No problem. I'll deal with it.</p>



<a name="255012123"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/The%20long%20pole%20in%20mathlib/near/255012123" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rémy Degenne <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/The.20long.20pole.20in.20mathlib.html#255012123">(Sep 27 2021 at 08:33)</a>:</h4>
<p>And <a href="https://github.com/leanprover-community/mathlib/issues/9340">#9340</a> is already merged into master anyway, so it's a bit late to abandon it :)</p>



<a name="255039799"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/The%20long%20pole%20in%20mathlib/near/255039799" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rémy Degenne <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/The.20long.20pole.20in.20mathlib.html#255039799">(Sep 27 2021 at 12:35)</a>:</h4>
<p>Looks like <span class="user-mention" data-user-id="214703">@Yury G. Kudryashov</span> is also modifying those files in <a href="https://github.com/leanprover-community/mathlib/issues/9405">#9405</a> and <a href="https://github.com/leanprover-community/mathlib/issues/9406">#9406</a> . I'll come back to this in a few days, when the special_functions folder stabilizes a bit.</p>



<a name="255040168"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/The%20long%20pole%20in%20mathlib/near/255040168" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/The.20long.20pole.20in.20mathlib.html#255040168">(Sep 27 2021 at 12:38)</a>:</h4>
<p>Hi, did I miss some refactoring going on?</p>



<a name="255040238"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/The%20long%20pole%20in%20mathlib/near/255040238" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/The.20long.20pole.20in.20mathlib.html#255040238">(Sep 27 2021 at 12:38)</a>:</h4>
<p>A big sweepy swoop!</p>



<a name="255040312"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/The%20long%20pole%20in%20mathlib/near/255040312" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/The.20long.20pole.20in.20mathlib.html#255040312">(Sep 27 2021 at 12:39)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib/issues/9405">#9405</a> and <a href="https://github.com/leanprover-community/mathlib/issues/9406">#9406</a> are small PRs, I can redo them on top of any large refactor (though if the refactor is not ready yet, then I'd prefer to merge these, then help merging master).</p>



<a name="255040612"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/The%20long%20pole%20in%20mathlib/near/255040612" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rémy Degenne <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/The.20long.20pole.20in.20mathlib.html#255040612">(Sep 27 2021 at 12:41)</a>:</h4>
<p>The refactor is not ready yet, because I did not see another PR that got merged recently and split many files. I will need time to fix my branch. You should go ahead with your PRs.</p>
<p>The story is that I want to remove the dependence on derivatives in the definitions of the various special functions, which means removing derivatives from some proofs of continuity. Then all the files should be split into two, one of which does not import calculus.</p>



<a name="255040738"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/The%20long%20pole%20in%20mathlib/near/255040738" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rémy Degenne <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/The.20long.20pole.20in.20mathlib.html#255040738">(Sep 27 2021 at 12:42)</a>:</h4>
<p>The end goal, which relates this to the title of the thread, is to remove calculus from the imports of lp_space in measure theory</p>



<a name="255041343"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/The%20long%20pole%20in%20mathlib/near/255041343" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/The.20long.20pole.20in.20mathlib.html#255041343">(Sep 27 2021 at 12:47)</a>:</h4>
<p>Note that I'd like to have <code>exp</code> redefined in terms of power series from <code>analytic_at</code> some day.</p>



<a name="255041515"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/The%20long%20pole%20in%20mathlib/near/255041515" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/The.20long.20pole.20in.20mathlib.html#255041515">(Sep 27 2021 at 12:48)</a>:</h4>
<p>And use the same definition for real numbers, complex numbers, and any Banach algebra.</p>



<a name="255041910"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/The%20long%20pole%20in%20mathlib/near/255041910" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/The.20long.20pole.20in.20mathlib.html#255041910">(Sep 27 2021 at 12:51)</a>:</h4>
<p>Though others may not agree.</p>



<a name="255043098"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/The%20long%20pole%20in%20mathlib/near/255043098" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/The.20long.20pole.20in.20mathlib.html#255043098">(Sep 27 2021 at 12:59)</a>:</h4>
<p>previous discussion on this: <a href="#narrow/stream/113488-general/topic/exponential.20in.20banach.20algebras/near/248773988">https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/exponential.20in.20banach.20algebras/near/248773988</a></p>



<a name="256384553"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/The%20long%20pole%20in%20mathlib/near/256384553" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rémy Degenne <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/The.20long.20pole.20in.20mathlib.html#256384553">(Oct 06 2021 at 09:49)</a>:</h4>
<p><span class="user-mention" data-user-id="110087">@Scott Morrison</span> would it be possible to produce the same kind of spanning tree you showed above in that thread, applied to <a href="https://github.com/leanprover-community/mathlib/tree/pow_split">branch#pow_split</a> ? In that branch, most of measure theory does not import derivatives.</p>



<a name="256384612"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/The%20long%20pole%20in%20mathlib/near/256384612" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/The.20long.20pole.20in.20mathlib.html#256384612">(Oct 06 2021 at 09:50)</a>:</h4>
<p>Sure!</p>



<a name="256384782"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/The%20long%20pole%20in%20mathlib/near/256384782" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/The.20long.20pole.20in.20mathlib.html#256384782">(Oct 06 2021 at 09:51)</a>:</h4>
<p>Ah, maybe not, <a href="https://mathlib-bench.limperg.de/commit/ab7d25193590b63a2380632018cfb3c8616accdf">https://mathlib-bench.limperg.de/commit/ab7d25193590b63a2380632018cfb3c8616accdf</a> is down, and I don't have a local copy.</p>



<a name="256384888"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/The%20long%20pole%20in%20mathlib/near/256384888" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/The.20long.20pole.20in.20mathlib.html#256384888">(Oct 06 2021 at 09:52)</a>:</h4>
<p>(These are the build times for files on master --- this won't really be accurate for analysing a different branch: we'll just use a different import graph, and pretend the compile times of individual files haven't changed.)</p>



<a name="256384943"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/The%20long%20pole%20in%20mathlib/near/256384943" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rémy Degenne <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/The.20long.20pole.20in.20mathlib.html#256384943">(Oct 06 2021 at 09:53)</a>:</h4>
<p>I created and deleted files in that branch</p>



<a name="256384960"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/The%20long%20pole%20in%20mathlib/near/256384960" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/The.20long.20pole.20in.20mathlib.html#256384960">(Oct 06 2021 at 09:53)</a>:</h4>
<p><span class="user-mention" data-user-id="256311">@Jannis Limperg</span>, any idea why the build time bot logs are offline?</p>



<a name="256385014"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/The%20long%20pole%20in%20mathlib/near/256385014" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/The.20long.20pole.20in.20mathlib.html#256385014">(Oct 06 2021 at 09:53)</a>:</h4>
<p><span class="user-mention" data-user-id="350992">@Rémy Degenne</span>, it may not actually matter that much --- it will be a matter of whether you've shortened the long pole, rather than sped up individual files.</p>



<a name="256385079"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/The%20long%20pole%20in%20mathlib/near/256385079" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/The.20long.20pole.20in.20mathlib.html#256385079">(Oct 06 2021 at 09:54)</a>:</h4>
<p>i.e. you will still see all the benefit of removing imports, when we look at the cumulative time to reach a given file.</p>



<a name="256385141"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/The%20long%20pole%20in%20mathlib/near/256385141" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rémy Degenne <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/The.20long.20pole.20in.20mathlib.html#256385141">(Oct 06 2021 at 09:55)</a>:</h4>
<p>Right, having an inaccurate time for a few changed files won't matter much.</p>



<a name="256385152"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/The%20long%20pole%20in%20mathlib/near/256385152" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/The.20long.20pole.20in.20mathlib.html#256385152">(Oct 06 2021 at 09:55)</a>:</h4>
<p>But if you want that level of meaningfulness, we'd have to ask Jannis if he can run the bot on your branch.</p>



<a name="256385225"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/The%20long%20pole%20in%20mathlib/near/256385225" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/The.20long.20pole.20in.20mathlib.html#256385225">(Oct 06 2021 at 09:55)</a>:</h4>
<p>I'll check tomorrow if his site has come back online, but probably won't have further time tonight.</p>



<a name="256389184"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/The%20long%20pole%20in%20mathlib/near/256389184" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jannis Limperg <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/The.20long.20pole.20in.20mathlib.html#256389184">(Oct 06 2021 at 10:30)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110087">Scott Morrison</span> <a href="#narrow/stream/113488-general/topic/The.20long.20pole.20in.20mathlib/near/256384960">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="256311">Jannis Limperg</span>, any idea why the build time bot logs are offline?</p>
</blockquote>
<p>They occasionally die for unknown reasons. I've restarted the service; thanks for the ping!</p>
<p>I've also started a build of bc09898fabb811d5da516a854aff52eaa98a14e7 for comparison. <span class="user-mention" data-user-id="350992">@Rémy Degenne</span> is this the right commit?</p>



<a name="256389718"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/The%20long%20pole%20in%20mathlib/near/256389718" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rémy Degenne <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/The.20long.20pole.20in.20mathlib.html#256389718">(Oct 06 2021 at 10:36)</a>:</h4>
<p>yes, that's the right one. Thanks!</p>



<a name="256390247"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/The%20long%20pole%20in%20mathlib/near/256390247" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/The.20long.20pole.20in.20mathlib.html#256390247">(Oct 06 2021 at 10:41)</a>:</h4>
<p>Okay, subject to the timing data being dodgy as described above, <a href="https://github.com/leanprover-community/mathlib/tree/pow_split">branch#pow_split</a> should reduce the infinite-core compile time from 45.9 minutes to 43.6 minutes!</p>



<a name="256390250"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/The%20long%20pole%20in%20mathlib/near/256390250" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/The.20long.20pole.20in.20mathlib.html#256390250">(Oct 06 2021 at 10:41)</a>:</h4>
<p>Nice!</p>



<a name="256390372"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/The%20long%20pole%20in%20mathlib/near/256390372" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rémy Degenne <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/The.20long.20pole.20in.20mathlib.html#256390372">(Oct 06 2021 at 10:42)</a>:</h4>
<p>Thanks for the computation. I expected a bigger effect than a 2min improvement :)</p>



<a name="256390412"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/The%20long%20pole%20in%20mathlib/near/256390412" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/The.20long.20pole.20in.20mathlib.html#256390412">(Oct 06 2021 at 10:43)</a>:</h4>
<p>Call it a 5% improvement? That sounds pretty good!</p>



<a name="256390466"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/The%20long%20pole%20in%20mathlib/near/256390466" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/The.20long.20pole.20in.20mathlib.html#256390466">(Oct 06 2021 at 10:43)</a>:</h4>
<p>When Jannis' build comes back I can give you a more accurate number.</p>



<a name="256390573"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/The%20long%20pole%20in%20mathlib/near/256390573" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jannis Limperg <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/The.20long.20pole.20in.20mathlib.html#256390573">(Oct 06 2021 at 10:44)</a>:</h4>
<p>Ah wait do you need per-file timings from the branch build?</p>



<a name="256390596"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/The%20long%20pole%20in%20mathlib/near/256390596" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/The.20long.20pole.20in.20mathlib.html#256390596">(Oct 06 2021 at 10:44)</a>:</h4>
<p>Yes, that's what would let me do something more accurate.</p>



<a name="256390625"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/The%20long%20pole%20in%20mathlib/near/256390625" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jannis Limperg <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/The.20long.20pole.20in.20mathlib.html#256390625">(Oct 06 2021 at 10:45)</a>:</h4>
<p>Okay, then I'll have to set that up real quick.</p>



<a name="256390630"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/The%20long%20pole%20in%20mathlib/near/256390630" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/The.20long.20pole.20in.20mathlib.html#256390630">(Oct 06 2021 at 10:45)</a>:</h4>
<p>But I don't think it matters too much. In any case, I'm off to bed for today.</p>



<a name="256636348"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/The%20long%20pole%20in%20mathlib/near/256636348" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jannis Limperg <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/The.20long.20pole.20in.20mathlib.html#256636348">(Oct 07 2021 at 19:30)</a>:</h4>
<p><span class="user-mention" data-user-id="110087">@Scott Morrison</span> Here are the timings for the <code>pow_split</code> branch: <a href="/user_uploads/3121/TYzbNX-mbiVskVInJMAPy57l/pow-split-timings.txt">pow-split-timings.txt</a></p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>