---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/well-founded.20lt.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html">well-founded lt</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="287644755"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/287644755" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#287644755">(Jun 27 2022 at 22:17)</a>:</h4>
<p>Is it just me, or do we have some quite glaring design flaws when it comes to well-founded relations?</p>



<a name="287644924"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/287644924" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#287644924">(Jun 27 2022 at 22:19)</a>:</h4>
<p>It's a lot of things, really</p>



<a name="287644975"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/287644975" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#287644975">(Jun 27 2022 at 22:20)</a>:</h4>
<p>First, the fact that <code>well_founded</code> isn't a typeclass is a bit of a minor annoyance</p>



<a name="287645025"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/287645025" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#287645025">(Jun 27 2022 at 22:20)</a>:</h4>
<p>What really bothers me most is that we don't have a clear way of spelling out "a type is well-ordered under <code>&lt;</code>"</p>



<a name="287645073"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/287645073" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#287645073">(Jun 27 2022 at 22:21)</a>:</h4>
<p>The obvious spelling is <code>linear_order α</code> + <code>well_founded (&lt;)</code>, but it turns out this isn't the most convenient spelling because the latter isn't a typeclass</p>



<a name="287645151"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/287645151" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#287645151">(Jun 27 2022 at 22:22)</a>:</h4>
<p>A more convenient spelling is <code>linear_order α</code> + <code>is_well_order α (&lt;)</code>, which is certainly awkward but gives you all that cool typeclass functionality (though you usually still need to name the latter and call <code>h.wf</code>)</p>



<a name="287645468"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/287645468" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#287645468">(Jun 27 2022 at 22:24)</a>:</h4>
<p>Except, if you know that <code>nonempty α</code>, what you <em>really</em> want is <code>conditionally_complete_linear_order_bot α</code>, which is not at all obvious</p>



<a name="287645512"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/287645512" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#287645512">(Jun 27 2022 at 22:25)</a>:</h4>
<p>So what we've ended up with is a bunch of disjointed API using these three different spellings</p>



<a name="287645789"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/287645789" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#287645789">(Jun 27 2022 at 22:27)</a>:</h4>
<p>Oh and also, we don't have any API on <code>preorder α</code> + <code>well_founded (&lt;)</code>, which means that a lot of lemmas that would naturally be stated in terms of <code>≤</code> are instead written in terms of the negation of a general relation</p>



<a name="287645960"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/287645960" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#287645960">(Jun 27 2022 at 22:29)</a>:</h4>
<p>Here's my proposal: we make <code>well_founded</code> into a typeclass <code>is_well_founded</code>, but only use it sparingly, the same way we use typeclasses like <code>is_refl</code> or <code>is_trans</code></p>



<a name="287646178"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/287646178" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#287646178">(Jun 27 2022 at 22:31)</a>:</h4>
<p>I'm not at all an expert in this sort of thing, but one flaw in your proposal is that <code>well_founded</code> is in core Lean, which means that Lean itself is using it to do stuff (e.g. make inductive types work? who knows, I guess someone here will), which means that changing it in any way might not be an option.</p>



<a name="287646194"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/287646194" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#287646194">(Jun 27 2022 at 22:31)</a>:</h4>
<p>Isn't that exactly what <code>is_well_order</code> is?</p>



<a name="287646221"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/287646221" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#287646221">(Jun 27 2022 at 22:31)</a>:</h4>
<p>Well-orders are linear well-founded orders</p>



<a name="287646226"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/287646226" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#287646226">(Jun 27 2022 at 22:31)</a>:</h4>
<p>Not the same thing</p>



<a name="287646487"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/287646487" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#287646487">(Jun 27 2022 at 22:33)</a>:</h4>
<p>Ah so you want to fill up that gap with another rel class? I think that makes sense, because bundling linearity is unexpected from mathlib's point of view (I know it very well and yet I got tricked just here and now once again).</p>



<a name="287646598"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/287646598" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#287646598">(Jun 27 2022 at 22:34)</a>:</h4>
<p>Do we even want <code>is_well_order</code> (as opposed to just the well-foundedness rel class)? What is it used by?</p>



<a name="287646780"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/287646780" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#287646780">(Jun 27 2022 at 22:36)</a>:</h4>
<p>I do think we want <code>is_well_order</code>, since it's used with generic relations here and there. But its uses with <code>&lt;</code> and <code>&gt;</code> should be put into new typeclasses instead.</p>



<a name="287646955"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/287646955" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#287646955">(Jun 27 2022 at 22:37)</a>:</h4>
<p>My question is whether we use the linearity that comes with it or not.</p>



<a name="287647022"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/287647022" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#287647022">(Jun 27 2022 at 22:38)</a>:</h4>
<p>I believe we do</p>



<a name="287647102"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/287647102" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#287647102">(Jun 27 2022 at 22:39)</a>:</h4>
<p>Excluding those lemmas about <code>is_well_order _ (&lt;)</code>, the API for <code>is_well_order</code> seems to consist of only two kinds of things</p>



<a name="287647226"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/287647226" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#287647226">(Jun 27 2022 at 22:40)</a>:</h4>
<p>Typeclass lemmas of the sort you'd expect for one of the unbundled order relation classes, like <code>is_well_order α r → is_irrefl α r</code> and the like</p>



<a name="287647249"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/287647249" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#287647249">(Jun 27 2022 at 22:40)</a>:</h4>
<p>And some sporadic uses in the ordinal library</p>



<a name="287647292"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/287647292" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#287647292">(Jun 27 2022 at 22:40)</a>:</h4>
<p>Sporadic but important uses, like for instance <a href="https://leanprover-community.github.io/mathlib_docs/find/ordinal.type">docs#ordinal.type</a></p>



<a name="287647368"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/287647368" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#287647368">(Jun 27 2022 at 22:41)</a>:</h4>
<p>I don't think this needs to be removed</p>



<a name="287647496"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/287647496" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#287647496">(Jun 27 2022 at 22:42)</a>:</h4>
<p>But yeah, my idea is to fill the gap with one or maybe two new order classes, one for <code>preorder α</code> with well-founded <code>&lt;</code>, and another for <code>linear_order α</code> with well-founded <code>&lt;</code></p>



<a name="287647549"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/287647549" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#287647549">(Jun 27 2022 at 22:43)</a>:</h4>
<p>Not very sure about the second one, since as mentioned previously, it's just <code>conditionally_complete_linear_order_bot</code> + empty types</p>



<a name="287647563"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/287647563" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#287647563">(Jun 27 2022 at 22:43)</a>:</h4>
<p>This sounds like a mixin's job. We do not want those in the main spine of the order hierarchy.</p>



<a name="287647665"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/287647665" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#287647665">(Jun 27 2022 at 22:44)</a>:</h4>
<p><code>conditionally_complete_linear_order_bot</code> is weaker, consider <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><mn>0</mn><mo separator="true">,</mo><mi mathvariant="normal">∞</mi><mo stretchy="false">)</mo><mo>⊆</mo><mi mathvariant="double-struck">R</mi></mrow><annotation encoding="application/x-tex">[0, \infty) \subseteq \mathbb{R}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">∞</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">⊆</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6889em;"></span><span class="mord mathbb">R</span></span></span></span>, or <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><mn>0</mn><mo separator="true">,</mo><mn>1</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">[0,1]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">1</span><span class="mclose">]</span></span></span></span></p>



<a name="287647689"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/287647689" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#287647689">(Jun 27 2022 at 22:44)</a>:</h4>
<p>Oh darn, you're right</p>



<a name="287647829"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/287647829" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#287647829">(Jun 27 2022 at 22:45)</a>:</h4>
<p>Rather,  a nonempty linear_order with well-founded <code>&lt;</code> is equivalent to a <code>conditionally_complete_linear_order_bot</code> with well-founded <code>&lt;</code></p>



<a name="287648108"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/287648108" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#287648108">(Jun 27 2022 at 22:48)</a>:</h4>
<p>Also, since <code>well_founded</code> is on core, we might want to keep it around, but prefer using a new <code>is_well_founded</code> typeclass</p>



<a name="287648159"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/287648159" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#287648159">(Jun 27 2022 at 22:48)</a>:</h4>
<p>Kind of how we have the <code>reflexive</code> predicate but prefer using <code>is_refl</code> for the typeclass inference</p>



<a name="287648634"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/287648634" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#287648634">(Jun 27 2022 at 22:53)</a>:</h4>
<p>Or actually I don't know, what's our opinion on the unbundled typeclasses?</p>



<a name="287648702"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/287648702" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#287648702">(Jun 27 2022 at 22:54)</a>:</h4>
<p>I like them, but I also hear they were part of an abandoned refactor, so maybe I shouldn't be using them?</p>



<a name="287649737"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/287649737" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#287649737">(Jun 27 2022 at 23:04)</a>:</h4>
<p>It might be worth looking at what Lean4 does here, if it does anything</p>



<a name="287649925"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/287649925" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#287649925">(Jun 27 2022 at 23:06)</a>:</h4>
<p>I think an <code>is_well_founded</code> rel class is the way to go. That's whay I did for <a href="https://leanprover-community.github.io/mathlib_docs/find/is_directed">docs#is_directed</a>.</p>



<a name="287660885"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/287660885" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#287660885">(Jun 28 2022 at 01:40)</a>:</h4>
<p>By the way, part of my reason for mentioning this is my annoyance with <a href="https://leanprover-community.github.io/mathlib_docs/find/well_founded.succ">docs#well_founded.succ</a></p>



<a name="287660895"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/287660895" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#287660895">(Jun 28 2022 at 01:40)</a>:</h4>
<p>I don't think we should have that definition in its current form</p>



<a name="287660930"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/287660930" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#287660930">(Jun 28 2022 at 01:41)</a>:</h4>
<p>As the docstring states, it just gives "some" successor, instead of <em>the</em> successor as you really want in almost all cases</p>



<a name="287667131"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/287667131" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#287667131">(Jun 28 2022 at 03:39)</a>:</h4>
<p>I've started working on the idea of both an <code>is_well_founded</code> class and a <code>well_founded_lt</code> / <code>well_founded_gt</code> mixin. It's going great!</p>



<a name="287667143"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/287667143" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#287667143">(Jun 28 2022 at 03:39)</a>:</h4>
<p>Many of the theorems in order/well_founded.lean now have much nicer spellings</p>



<a name="287667218"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/287667218" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#287667218">(Jun 28 2022 at 03:40)</a>:</h4>
<p>Also, I only now realized that <code>is_well_order</code> has a redundant field <span aria-label="fear" class="emoji emoji-1f628" role="img" title="fear">:fear:</span></p>



<a name="287667226"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/287667226" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#287667226">(Jun 28 2022 at 03:40)</a>:</h4>
<p><code>is_well_founded</code> implies <code>is_irrefl</code>, as I proved surprisingly recently</p>



<a name="287667242"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/287667242" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#287667242">(Jun 28 2022 at 03:41)</a>:</h4>
<p>Speaking of redundant fields, what's the deal with <a href="https://leanprover-community.github.io/mathlib_docs/find/is_strict_total_order'">docs#is_strict_total_order'</a>? I know that we don't like to touch core much, but surely one could just remove the redundant field from <a href="https://leanprover-community.github.io/mathlib_docs/find/is_strict_total_order">docs#is_strict_total_order</a> and PR that?</p>



<a name="287667453"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/287667453" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#287667453">(Jun 28 2022 at 03:45)</a>:</h4>
<p>Another question, do we not have a predicate for a <em>minimal</em> element of a set? Not a least one, nor a lower bound</p>



<a name="287671472"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/287671472" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#287671472">(Jun 28 2022 at 05:09)</a>:</h4>
<p>I made a PR at <a href="https://github.com/leanprover-community/mathlib/pull/15023">#15023</a>, but I'm very far from done</p>



<a name="287671996"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/287671996" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#287671996">(Jun 28 2022 at 05:19)</a>:</h4>
<p>Doing this as a mixin was definitely the right approach</p>



<a name="287675677"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/287675677" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Junyan Xu <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#287675677">(Jun 28 2022 at 06:30)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">class</span> <span class="n">well_founded_lt</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">has_lt</span> <span class="n">α</span><span class="o">]</span> <span class="kd">extends</span> <span class="n">is_well_founded</span> <span class="n">α</span> <span class="o">(</span><span class="bp">&lt;</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Prop</span>
</code></pre></div>
<p>Why do you need <code>extend</code>? Are there any precedents? What's wrong about</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">abbreviation</span> <span class="n">well_founded_lt</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">has_lt</span> <span class="n">α</span><span class="o">]</span> <span class="o">:=</span> <span class="n">is_well_founded</span> <span class="n">α</span> <span class="o">(</span><span class="bp">&lt;</span><span class="o">)</span>
</code></pre></div>
<p>?</p>



<a name="287689235"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/287689235" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#287689235">(Jun 28 2022 at 09:11)</a>:</h4>
<p><span class="user-mention silent" data-user-id="459227">Violeta Hernández</span> <a href="#narrow/stream/113488-general/topic/well-founded.20lt/near/287667453">said</a>:</p>
<blockquote>
<p>Another question, do we not have a predicate for a <em>minimal</em> element of a set? Not a least one, nor a lower bound</p>
</blockquote>
<p><a href="https://leanprover-community.github.io/mathlib_docs/find/minimals">docs#minimals</a></p>



<a name="287712040"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/287712040" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#287712040">(Jun 28 2022 at 13:01)</a>:</h4>
<p>I'm really only using extend because of the convenience of having <code>is_well_founded a (lt)</code> automatically inferred</p>



<a name="287712303"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/287712303" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#287712303">(Jun 28 2022 at 13:02)</a>:</h4>
<p>Also, I think <code>minimals</code> is not quite what I want, that seems to assume a reflexive relation when  I'm really working with an irreflexive one</p>



<a name="287712487"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/287712487" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#287712487">(Jun 28 2022 at 13:04)</a>:</h4>
<p>I know it should be changed to <code>{a ∈ s | ∀ ⦃b : α⦄, b ∈ s → r b a → r a b}</code>, but apart from that I don't see what you mean.</p>



<a name="287712609"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/287712609" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#287712609">(Jun 28 2022 at 13:05)</a>:</h4>
<p>Maybe I'm just confused</p>



<a name="287712647"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/287712647" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#287712647">(Jun 28 2022 at 13:05)</a>:</h4>
<p>I'm trying to figure out how to spell <a href="https://leanprover-community.github.io/mathlib_docs/find/well_founded.has_min">docs#well_founded.has_min</a> without writing down all the bare predicates</p>



<a name="287712772"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/287712772" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#287712772">(Jun 28 2022 at 13:06)</a>:</h4>
<p>I think it would be equivalent but not def-eq to <code>nonempty (minimals r s)</code>, since <code>r</code> here is asymmetric</p>



<a name="287712801"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/287712801" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#287712801">(Jun 28 2022 at 13:06)</a>:</h4>
<p>Assuming that change you mention</p>



<a name="287719332"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/287719332" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Junyan Xu <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#287719332">(Jun 28 2022 at 13:57)</a>:</h4>
<p>You want <code>{a ∈ s | ∀ ⦃b : α⦄, b ∈ s → r b a → false}</code> right?<br>
For irreflexive <code>r</code>, <code>r b a → false</code> is equivalent to <code>r b a → a = b</code>, and if <code>r</code> is moreover transitive or well-founded, it's also equivalent to <code>r a b → r b a</code>.</p>



<a name="287727314"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/287727314" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#287727314">(Jun 28 2022 at 14:54)</a>:</h4>
<p>Oh yeah, you're right</p>



<a name="287747388"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/287747388" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#287747388">(Jun 28 2022 at 17:12)</a>:</h4>
<p>I just realized three things</p>



<a name="287747514"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/287747514" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#287747514">(Jun 28 2022 at 17:13)</a>:</h4>
<p>1) every well founded relation has an ordinal-valued height function <br>
2) this coincides with <code>typein</code> in the well-ordered case<br>
3) this coincides with the <code>birthday</code> function on <code>pgame</code></p>



<a name="287747623"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/287747623" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#287747623">(Jun 28 2022 at 17:14)</a>:</h4>
<p>So that's another cool refactor we could do, eventually</p>



<a name="287747829"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/287747829" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#287747829">(Jun 28 2022 at 17:15)</a>:</h4>
<p>Oh and also, this is in simple correspondence with <code>grade</code> on a <code>grade_order</code></p>



<a name="287748028"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/287748028" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#287748028">(Jun 28 2022 at 17:17)</a>:</h4>
<p>By the way, do we have that a <code>grade_order</code> graded by a well-founded type is well-founded?</p>



<a name="287750355"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/287750355" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#287750355">(Jun 28 2022 at 17:34)</a>:</h4>
<p>Nope. Should be easy however.</p>



<a name="287752218"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/287752218" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#287752218">(Jun 28 2022 at 17:50)</a>:</h4>
<p>Don't do it yet though, or I'll have to modify whatever you write in the refactor :P</p>



<a name="287792861"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/287792861" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wrenna Robson <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#287792861">(Jun 29 2022 at 00:08)</a>:</h4>
<p>Violeta, I've nothing to say other than I think you're right that there's some grognuts with how we currently do this and you're doing the good work by addressing them. I've run into them a few times. (Also, yes, surprisingly hard to say things like "this is a minimal element of this set" and suchlike.)</p>



<a name="287794182"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/287794182" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#287794182">(Jun 29 2022 at 00:32)</a>:</h4>
<p>Oh, speaking of that, it's a bit weird how we have the minimum of a set, but in practice, almost always refer to the minimum of a whole type</p>



<a name="287794186"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/287794186" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#287794186">(Jun 29 2022 at 00:32)</a>:</h4>
<p>This leads to <code>mem_univ</code> awkwardness</p>



<a name="287794199"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/287794199" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#287794199">(Jun 29 2022 at 00:32)</a>:</h4>
<p>I left a to-do to remedy that in a followup refactor</p>



<a name="287807625"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/287807625" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#287807625">(Jun 29 2022 at 04:58)</a>:</h4>
<p>I've noticed that <code>is_well_founded</code> isn't quite like the other unbundled classes</p>



<a name="287807639"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/287807639" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#287807639">(Jun 29 2022 at 04:58)</a>:</h4>
<p>Because you can prove much more elaborate theorems on well foundedness that you can on say, irreflexibility</p>



<a name="287807803"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/287807803" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#287807803">(Jun 29 2022 at 05:01)</a>:</h4>
<p>So I'm wondering what our policy on the <code>well_founded</code> predicate should be</p>



<a name="287807885"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/287807885" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#287807885">(Jun 29 2022 at 05:03)</a>:</h4>
<p>I've tried doing what we do with the other unbundled classes, which is using the class for inferred arguments, and the predicate on non-instance theorems</p>



<a name="287807895"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/287807895" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#287807895">(Jun 29 2022 at 05:03)</a>:</h4>
<p>And I've tried putting almost all of the theorems on the typeclass</p>



<a name="287807939"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/287807939" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#287807939">(Jun 29 2022 at 05:04)</a>:</h4>
<p>But it turns out that we do sometimes need to talk about minimums of random well-ordered relations that can't easily made into instances</p>



<a name="287807959"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/287807959" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#287807959">(Jun 29 2022 at 05:05)</a>:</h4>
<p>On one extreme I could just tank the <code>@</code> and state all the cool theorems in terms of <code>is_well_founded</code></p>



<a name="287807998"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/287807998" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#287807998">(Jun 29 2022 at 05:06)</a>:</h4>
<p>On another extreme, I could duplicate the entire API on <code>is_well_founded</code> in terms of <code>well_founded</code></p>



<a name="287808039"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/287808039" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#287808039">(Jun 29 2022 at 05:06)</a>:</h4>
<p>A middle ground solution I'm gravitating towards is having only the basic theorems, like <code>well_founded.has_min</code> and such, stated for general well founded orders, and having everything else use the typeclass</p>



<a name="287808063"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/287808063" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#287808063">(Jun 29 2022 at 05:07)</a>:</h4>
<p>I'd like a second opinion here though</p>



<a name="287808503"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/287808503" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#287808503">(Jun 29 2022 at 05:16)</a>:</h4>
<p>By the way, status update on the refactor: it's going quite well, a bunch of cool theorems on well founded orders can now be upgraded to instances, and pretty much the issue I've encountered is the aforementioned</p>



<a name="287808513"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/287808513" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#287808513">(Jun 29 2022 at 05:17)</a>:</h4>
<p>No end in sight yet btw, I'm still editing quite basic files and we're at 800 lines of diff</p>



<a name="287809393"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/287809393" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#287809393">(Jun 29 2022 at 05:37)</a>:</h4>
<p>Hey question, what's the difference between <code>well_founded.recursion</code> and <code>well_founded.fix</code>?</p>



<a name="287809397"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/287809397" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#287809397">(Jun 29 2022 at 05:37)</a>:</h4>
<p>They have almost the same signature</p>



<a name="287809408"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/287809408" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#287809408">(Jun 29 2022 at 05:37)</a>:</h4>
<p><code>well_founded.recursion</code> doesn't guarantee anything about its output as far as I can tell though</p>



<a name="287809411"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/287809411" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#287809411">(Jun 29 2022 at 05:37)</a>:</h4>
<p>While of course there's <code>well_founded.fix_eq</code></p>



<a name="287811710"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/287811710" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Junyan Xu <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#287811710">(Jun 29 2022 at 06:20)</a>:</h4>
<blockquote>
<p>I'm really only using extend because of the convenience of having is_well_founded a (lt) automatically inferred</p>
</blockquote>
<p>I asked whether there's precedent because I've only seen mathlib use <code>@[reducible] def</code> in such situation (e.g. <a href="https://leanprover-community.github.io/mathlib_docs/find/finite_dimensional/src">src#finite_dimensional</a>) and never seen <code>extends</code> with a single class without adding any field.</p>



<a name="287816665"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/287816665" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#287816665">(Jun 29 2022 at 07:31)</a>:</h4>
<p>The problem with using extend like that is you have to duplicate all existing instances. With reducible def you're providing a nicer spelling that has access to all the same instances as the verbose spelling</p>



<a name="287855887"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/287855887" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#287855887">(Jun 29 2022 at 13:48)</a>:</h4>
<p>What's up with this?</p>



<a name="287855894"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/287855894" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#287855894">(Jun 29 2022 at 13:48)</a>:</h4>
<p><a href="https://leanprover-community.github.io/mathlib_docs/find/well_founded.eq_iff_not_lt_of_le">docs#well_founded.eq_iff_not_lt_of_le</a></p>



<a name="287855924"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/287855924" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#287855924">(Jun 29 2022 at 13:48)</a>:</h4>
<p>Obviously this should be moved, but where to?</p>



<a name="287865723"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/287865723" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#287865723">(Jun 29 2022 at 14:50)</a>:</h4>
<p>Core?</p>



<a name="287865766"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/287865766" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#287865766">(Jun 29 2022 at 14:50)</a>:</h4>
<p>I would be surprised if it didn't exist elsewhere in the library</p>



<a name="287866353"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/287866353" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#287866353">(Jun 29 2022 at 14:53)</a>:</h4>
<p>I think it's hard to argue that anything should move to core unless it needs C++ support</p>



<a name="287866562"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/287866562" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#287866562">(Jun 29 2022 at 14:55)</a>:</h4>
<p>Do we have some file for very basic results on orders other than the one on core?</p>



<a name="287866592"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/287866592" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#287866592">(Jun 29 2022 at 14:55)</a>:</h4>
<p>Preferably a really really early import</p>



<a name="287867297"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/287867297" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#287867297">(Jun 29 2022 at 14:59)</a>:</h4>
<p>Or should I just leave that result awkwardly lying around in the well-founded file?</p>



<a name="287867372"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/287867372" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#287867372">(Jun 29 2022 at 14:59)</a>:</h4>
<p>Or is there any way I can prove/use this result easily?</p>



<a name="287868387"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/287868387" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#287868387">(Jun 29 2022 at 15:05)</a>:</h4>
<p><a href="https://tqft.net/mathlib/order/basic">file#order/basic</a></p>



<a name="287871880"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/287871880" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#287871880">(Jun 29 2022 at 15:27)</a>:</h4>
<p>Oh thanks</p>



<a name="287871897"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/287871897" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#287871897">(Jun 29 2022 at 15:27)</a>:</h4>
<p>Actually I'm just going to restate the result</p>



<a name="287871983"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/287871983" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#287871983">(Jun 29 2022 at 15:27)</a>:</h4>
<p>It's a bit dumb to have the conclusion be <code>m ≤ x → x = m</code> instead of just <code>¬ x &lt; m</code></p>



<a name="287901285"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/287901285" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#287901285">(Jun 29 2022 at 18:55)</a>:</h4>
<p>I'm facing another slight annoyance. Ideally you'd want an instance <code>linear_order α</code> + <code>well_founded_lt α</code> → <code>is_well_order α (&lt;)</code>, but the latter implies <code>is_well_founded α (&lt;)</code> which implies <code>well_founded_lt α</code>, so this doesn't work.</p>



<a name="287901424"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/287901424" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#287901424">(Jun 29 2022 at 18:56)</a>:</h4>
<p>I did declare this as a definition <code>well_founded_lt.is_well_order</code>though, so it's not a major setback</p>



<a name="287901461"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/287901461" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#287901461">(Jun 29 2022 at 18:56)</a>:</h4>
<p>Just something to keep in mind</p>



<a name="287902848"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/287902848" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#287902848">(Jun 29 2022 at 19:05)</a>:</h4>
<p><span class="user-mention silent" data-user-id="387244">Yaël Dillies</span> <a href="#narrow/stream/113488-general/topic/well-founded.20lt/near/287646598">said</a>:</p>
<blockquote>
<p>Do we even want <code>is_well_order</code> (as opposed to just the well-foundedness rel class)? What is it used by?</p>
</blockquote>
<p>On an unrelated note, after scouring the library throughout this refactor, I've seen that we do use <code>is_well_order</code> in its full strength. In fact, I've only found a few theorems that can be generalized to <code>is_well_founded</code>. That said, this class has still been really useful thanks to all the instances you get, on things like subrelations or inverse images.</p>



<a name="287954477"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/287954477" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#287954477">(Jun 29 2022 at 23:23)</a>:</h4>
<p>Here's something fun</p>



<a name="287954501"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/287954501" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#287954501">(Jun 29 2022 at 23:24)</a>:</h4>
<p><a href="https://leanprover-community.github.io/mathlib_docs/find/set.is_wf">docs#set.is_wf</a> is def-eq to <code>well_founded_lt s</code></p>



<a name="287954589"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/287954589" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#287954589">(Jun 29 2022 at 23:24)</a>:</h4>
<p>I've had to heavily modify this file as a result of this refactor anyways, should I just go ahead and ditch that predicate?</p>



<a name="287954978"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/287954978" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#287954978">(Jun 29 2022 at 23:29)</a>:</h4>
<p>Actually, I'll just leave it as a <code>reducible</code> def for now, golf all the theorems, and leave a to-do note to kill that predicate in the future</p>



<a name="287956219"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/287956219" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#287956219">(Jun 29 2022 at 23:43)</a>:</h4>
<p>Now here's a harder question</p>



<a name="287956252"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/287956252" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#287956252">(Jun 29 2022 at 23:43)</a>:</h4>
<p><a href="https://leanprover-community.github.io/mathlib_docs/find/set.is_well_founded_on">docs#set.is_well_founded_on</a> is def-eq to <code>is_well_founded_on s (subrel r s)</code></p>



<a name="287956274"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/287956274" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#287956274">(Jun 29 2022 at 23:44)</a>:</h4>
<p>Does that mean I should treat it like a typeclass argument? It's moved around and rewritten a lot in proofs, so I don't know</p>



<a name="287956377"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/287956377" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#287956377">(Jun 29 2022 at 23:45)</a>:</h4>
<p>And what aboud <a href="https://leanprover-community.github.io/mathlib_docs/find/set.partially_well_ordered_on">docs#set.partially_well_ordered_on</a> and <a href="https://leanprover-community.github.io/mathlib_docs/find/set.is_pwo">docs#set.is_pwo</a>? Those don't look typeclassy at all</p>



<a name="287956544"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/287956544" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#287956544">(Jun 29 2022 at 23:47)</a>:</h4>
<p>If we are going to make <code>is_well_founded</code> into a typeclass, maybe we should do the same with <code>is_pwo</code>?</p>



<a name="287956762"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/287956762" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#287956762">(Jun 29 2022 at 23:49)</a>:</h4>
<p>No, please don't. Why should they be typeclasses? They're statements about a term, not a type</p>



<a name="287956839"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/287956839" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#287956839">(Jun 29 2022 at 23:50)</a>:</h4>
<p>That's the thing, they don't need to be statements about a term</p>



<a name="287956844"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/287956844" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#287956844">(Jun 29 2022 at 23:50)</a>:</h4>
<p>You can talk about partially well-ordered types just fine</p>



<a name="287956864"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/287956864" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#287956864">(Jun 29 2022 at 23:50)</a>:</h4>
<p>Then, the current definition would just be the assertion that the subtype is partially well ordered</p>



<a name="287956867"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/287956867" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#287956867">(Jun 29 2022 at 23:50)</a>:</h4>
<p>And golfing proofs to use some underlying implementation might make the proofs take fewer characters. But it makes the library much more brittle to later rework. Because if you change the implementation of the thing again, all your proofs break</p>



<a name="287956908"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/287956908" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#287956908">(Jun 29 2022 at 23:51)</a>:</h4>
<p>Please take a look at where is_pwo is used. It's used directly on sets, not on types or subtypes. It's what makes Hahn series work</p>



<a name="287957261"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/287957261" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#287957261">(Jun 29 2022 at 23:55)</a>:</h4>
<p>You're right, all current usage of <code>is_pwo</code> in mathlib involves a support set</p>



<a name="287957320"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/287957320" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#287957320">(Jun 29 2022 at 23:56)</a>:</h4>
<p>What's to be done about <code>set.is_wf</code> and <code>set.is_well_founded_on</code> though? It's <code>set.is_wf</code> that makes me feel particularly uneasy</p>



<a name="287957557"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/287957557" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#287957557">(Jun 30 2022 at 00:00)</a>:</h4>
<p>In any case, my refactor will redefine it as <code>well_founded_lt ↥s</code>, because that's what it is. The question is whether we should take the extra step and use it in typeclass inference as we do for <code>well_founded_lt</code>.</p>



<a name="287957933"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/287957933" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#287957933">(Jun 30 2022 at 00:04)</a>:</h4>
<p>This feels like <code>fintype</code> vs <code>set.finite</code>, except this time there's no data involved!</p>



<a name="287957941"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/287957941" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#287957941">(Jun 30 2022 at 00:04)</a>:</h4>
<p>What will be the benefit of relying on typeclass inference for discharging proof goals of set.is_wf?</p>



<a name="287958195"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/287958195" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#287958195">(Jun 30 2022 at 00:07)</a>:</h4>
<p>I can find out myself, I'll disable my typeclass experiment and see if anything becomes tangibly more convenient</p>



<a name="287958433"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/287958433" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#287958433">(Jun 30 2022 at 00:11)</a>:</h4>
<p>It seems I very quickly found the answer: not a lot</p>



<a name="287958439"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/287958439" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#287958439">(Jun 30 2022 at 00:11)</a>:</h4>
<p>I think the sequence of tactics, in terms of symbols written by a user, might become more convenient, as measured by the number of symbols. But it might be less convenient in terms of elaboration and proof construction time, because you're punting the proof obligation to the implicit tactic of typeclass inference. TC is in general weaker than explicit term construction (the most powerful in assisting elaboration, but often the least user-convenient) or just a user-invoked tactic (that isn't apply_instance).</p>



<a name="287958477"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/287958477" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#287958477">(Jun 30 2022 at 00:11)</a>:</h4>
<p>You do sometimes want some of the instances <code>well_founded_on</code> and <code>is_wf</code> are equivalent to, but that can be dealt to with a single auxiliary lemma and <code>haveI</code></p>



<a name="287958607"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/287958607" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#287958607">(Jun 30 2022 at 00:13)</a>:</h4>
<p>For instance here:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">is_well_founded_on.induction</span> <span class="o">{</span><span class="n">s</span> <span class="o">:</span> <span class="n">set</span> <span class="n">α</span><span class="o">}</span> <span class="o">{</span><span class="n">r</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">α</span> <span class="bp">→</span> <span class="kt">Prop</span><span class="o">}</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">s.is_well_founded_on</span> <span class="n">r</span><span class="o">)</span>
  <span class="o">{</span><span class="n">x</span> <span class="o">:</span> <span class="n">α</span><span class="o">}</span> <span class="o">(</span><span class="n">hx</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">∈</span> <span class="n">s</span><span class="o">)</span> <span class="o">{</span><span class="n">P</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="kt">Prop</span><span class="o">}</span> <span class="o">(</span><span class="n">hP</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">y</span> <span class="bp">∈</span> <span class="n">s</span><span class="o">),</span> <span class="o">(</span><span class="bp">∀</span> <span class="o">(</span><span class="n">z</span> <span class="bp">∈</span> <span class="n">s</span><span class="o">),</span> <span class="n">r</span> <span class="n">z</span> <span class="n">y</span> <span class="bp">→</span> <span class="n">P</span> <span class="n">z</span><span class="o">)</span> <span class="bp">→</span> <span class="n">P</span> <span class="n">y</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">P</span> <span class="n">x</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="k">let</span> <span class="n">Q</span> <span class="o">:</span> <span class="n">s</span> <span class="bp">→</span> <span class="kt">Prop</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">y</span><span class="o">,</span> <span class="n">P</span> <span class="n">y</span><span class="o">,</span>
  <span class="n">change</span> <span class="n">Q</span> <span class="o">⟨</span><span class="n">x</span><span class="o">,</span> <span class="n">hx</span><span class="o">⟩,</span>
  <span class="n">haveI</span> <span class="o">:=</span> <span class="n">h.is_well_founded</span><span class="o">,</span>
  <span class="n">refine</span> <span class="n">is_well_founded.induction</span> <span class="o">(</span><span class="n">subrel</span> <span class="n">r</span> <span class="n">s</span><span class="o">)</span> <span class="o">⟨</span><span class="n">x</span><span class="o">,</span> <span class="n">hx</span><span class="o">⟩</span> <span class="n">_</span><span class="o">,</span>
  <span class="n">rintros</span> <span class="o">⟨</span><span class="n">y</span><span class="o">,</span> <span class="n">ys</span><span class="o">⟩</span> <span class="n">ih</span><span class="o">,</span>
  <span class="n">exact</span> <span class="n">hP</span> <span class="n">_</span> <span class="n">ys</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">z</span> <span class="n">zs</span> <span class="n">zy</span><span class="o">,</span> <span class="n">ih</span> <span class="o">⟨</span><span class="n">z</span><span class="o">,</span> <span class="n">zs</span><span class="o">⟩</span> <span class="n">zy</span><span class="o">),</span>
<span class="kd">end</span>
</code></pre></div>
<p><code>is_well_founded_on.is_well_founded</code> is actually just <code>id</code></p>



<a name="287958678"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/287958678" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#287958678">(Jun 30 2022 at 00:14)</a>:</h4>
<p>But that's pretty much the only spot where having this be typeclass searchable could have been remotely convenient</p>



<a name="287958875"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/287958875" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#287958875">(Jun 30 2022 at 00:17)</a>:</h4>
<p>(deleted)</p>



<a name="287958982"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/287958982" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#287958982">(Jun 30 2022 at 00:19)</a>:</h4>
<p>I think that if a part of the library relies in proofs with tactic bodies that utilize haveI, introI, repeatedly, there's some weird api bleedover. I'm not making a judgment call on the category theory portion of the library because I admittedly don't understand it. But for proof discovery, either by guessing a name, or knowing that one had to do introI or haveI to make the rest of the API work for some lemmas, it doesn't work so well with other tactics we have for discovery, like suggest, library_search, or relying on simp.</p>



<a name="287958983"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/287958983" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#287958983">(Jun 30 2022 at 00:19)</a>:</h4>
<p>This assertion of mine is from my experience working on constructing various partial orders on a fixed type, which relied on a lot of letI. I made the questionable choice of relying on separate explicitly specified instances instead of type synonyms.</p>



<a name="287959112"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/287959112" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#287959112">(Jun 30 2022 at 00:21)</a>:</h4>
<p>I've had to use <code>haveI</code> very little, actually</p>



<a name="287959120"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/287959120" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#287959120">(Jun 30 2022 at 00:22)</a>:</h4>
<p>It seems like the lemmas that it's used for subsume other potential uses</p>



<a name="287960251"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/287960251" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#287960251">(Jun 30 2022 at 00:38)</a>:</h4>
<p>Alright, I'm done refactoring that file. I think I've managed to use my new code advantageously without being destructive.</p>



<a name="287960258"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/287960258" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#287960258">(Jun 30 2022 at 00:39)</a>:</h4>
<p>If someone could review it, that would be awesome: <a href="https://github.com/leanprover-community/mathlib/pull/15023/files#diff-885226e6f133825031006afbcd1e5b3cc826941500c61a4f21967571feaf9766">https://github.com/leanprover-community/mathlib/pull/15023/files#diff-885226e6f133825031006afbcd1e5b3cc826941500c61a4f21967571feaf9766</a></p>



<a name="287960275"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/287960275" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#287960275">(Jun 30 2022 at 00:39)</a>:</h4>
<p>Almost all other files on this refactor should be easier to review</p>



<a name="287964026"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/287964026" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#287964026">(Jun 30 2022 at 01:40)</a>:</h4>
<p>The main purpose of <code>well_founded</code> is to support well-founded recursion. Often one will want different orderings on the same type for use in different definitions/proofs. For example, we could put a lot of different orders on <code>list nat</code>. The type class mechanism seems like it would just get in the way here (and type synonyms would be even worse).</p>



<a name="287966542"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/287966542" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#287966542">(Jun 30 2022 at 02:27)</a>:</h4>
<p>What's this in reference to?</p>



<a name="287966594"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/287966594" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#287966594">(Jun 30 2022 at 02:28)</a>:</h4>
<p>The whole refactor?</p>



<a name="287966632"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/287966632" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#287966632">(Jun 30 2022 at 02:29)</a>:</h4>
<p>It's true that there's many possible orderings on a given type, but we usually only care about a handful - that's the reason we have things like <code>has_lt</code> to begin with.</p>



<a name="287966637"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/287966637" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#287966637">(Jun 30 2022 at 02:30)</a>:</h4>
<p>So I'm not sure how the type class mechanism would get in the way</p>



<a name="287967207"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/287967207" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#287967207">(Jun 30 2022 at 02:42)</a>:</h4>
<p>The thing is, we already have tons of theorems and definitions for things that have a well founded <code>&lt;</code> or <code>&gt;</code> specifically. We already employ the typeclass system for this, though in an ineffective manner, since we have to apply theorems for general well founded relations, which we need to keep providing the proof of, and then convert them into theorems on preorders or partial orders or whatnot.</p>



<a name="287967298"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/287967298" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#287967298">(Jun 30 2022 at 02:45)</a>:</h4>
<p>We definitely need predicates for well founded <code>&lt;</code> and well founded <code>&gt;</code>, that's clear to me by now. We use this all throughout mathlib, from finsets to ordinals to linear algebra to category theory. I can't see the problem with taking it one step further and making this inferrable by the typeclass system.</p>



<a name="287968751"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/287968751" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#287968751">(Jun 30 2022 at 03:14)</a>:</h4>
<p>This is subjective, but I feel like my refactor has so far alleviated more problems than it's caused</p>



<a name="287968757"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/287968757" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#287968757">(Jun 30 2022 at 03:15)</a>:</h4>
<p>(deleted)</p>



<a name="287968758"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/287968758" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#287968758">(Jun 30 2022 at 03:15)</a>:</h4>
<p>I do appreciate the opinions though</p>



<a name="287968804"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/287968804" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#287968804">(Jun 30 2022 at 03:16)</a>:</h4>
<p>(deleted)</p>



<a name="287968805"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/287968805" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#287968805">(Jun 30 2022 at 03:16)</a>:</h4>
<p>It's just hard to work on 1500 lines of code for 3 days straight and not get attached, haha</p>



<a name="287968806"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/287968806" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#287968806">(Jun 30 2022 at 03:16)</a>:</h4>
<p>(deleted)</p>



<a name="288002652"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/288002652" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#288002652">(Jun 30 2022 at 09:58)</a>:</h4>
<p><span class="user-mention silent" data-user-id="459227">Violeta Hernández</span> <a href="#narrow/stream/113488-general/topic/well-founded.20lt/near/287645960">said</a>:</p>
<blockquote>
<p>Here's my proposal: we make <code>well_founded</code> into a typeclass <code>is_well_founded</code>, but only use it sparingly, the same way we use typeclasses like <code>is_refl</code> or <code>is_trans</code></p>
</blockquote>
<p>This one I don't think is a good idea.</p>



<a name="288002700"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/288002700" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#288002700">(Jun 30 2022 at 09:59)</a>:</h4>
<p>If it's only about whether <code>(&lt;)</code> is well-founded then it's okay to use a type class, because <code>(&lt;)</code> is already associated to the type by a type class.</p>



<a name="288007688"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/288007688" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#288007688">(Jun 30 2022 at 10:42)</a>:</h4>
<p>I'm not sure what makes this different from the other unbundled typeclasses</p>



<a name="288007723"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/288007723" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#288007723">(Jun 30 2022 at 10:43)</a>:</h4>
<p>Or more specifically, the <code>is_well_order</code> typeclass</p>



<a name="288007756"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/288007756" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#288007756">(Jun 30 2022 at 10:43)</a>:</h4>
<p>That one has a decent amount of use for relations other than <code>(&lt;)</code> and <code>(&gt;)</code>, this wouldn't be any different</p>



<a name="288116141"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/288116141" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#288116141">(Jul 01 2022 at 03:39)</a>:</h4>
<p>I should probably mention</p>



<a name="288116185"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/288116185" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#288116185">(Jul 01 2022 at 03:40)</a>:</h4>
<p>I've been working into splitting off the largest parts of this refactor into different files</p>



<a name="288116209"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/288116209" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#288116209">(Jul 01 2022 at 03:40)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib/pull/15069">#15069</a> <a href="https://github.com/leanprover-community/mathlib/pull/15071">#15071</a> <a href="https://github.com/leanprover-community/mathlib/pull/15073">#15073</a></p>



<a name="288116217"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/288116217" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#288116217">(Jul 01 2022 at 03:40)</a>:</h4>
<p>And also <a href="https://github.com/leanprover-community/mathlib/pull/14707">#14707</a> I guess</p>



<a name="288116219"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/288116219" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#288116219">(Jul 01 2022 at 03:41)</a>:</h4>
<p>Would be super cool if someone could check those out</p>



<a name="288278952"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/288278952" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#288278952">(Jul 02 2022 at 16:42)</a>:</h4>
<p>My refactor builds!!!!!!!!!</p>



<a name="288279430"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/288279430" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#288279430">(Jul 02 2022 at 16:54)</a>:</h4>
<p>Almost, some IMO file broke lol</p>



<a name="288279462"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/288279462" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#288279462">(Jul 02 2022 at 16:56)</a>:</h4>
<p>Final diff clocks in at 2k lines <span aria-label="skull" class="emoji emoji-1f480" role="img" title="skull">:skull:</span></p>



<a name="288279502"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/288279502" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#288279502">(Jul 02 2022 at 16:56)</a>:</h4>
<p>I'll attempt to make more offshoot PRs before this huge one</p>



<a name="288279508"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/288279508" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#288279508">(Jul 02 2022 at 16:56)</a>:</h4>
<p>This looks like a bit much for just introducing an <code>is_well_founded</code> typeclass. Did you scope-creep?</p>



<a name="288279580"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/288279580" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#288279580">(Jul 02 2022 at 16:58)</a>:</h4>
<p>Only in a few files that got their own PRs already</p>



<a name="288279591"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/288279591" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#288279591">(Jul 02 2022 at 16:58)</a>:</h4>
<p>I didn't <em>just</em> introduce the typeclass, I ported the existing theorems on well-founded relations to use said typeclass</p>



<a name="288279667"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/288279667" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#288279667">(Jul 02 2022 at 17:00)</a>:</h4>
<p>And I redefined a few other classes that were just specific cases of said typeclass</p>



<a name="288279672"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/288279672" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#288279672">(Jul 02 2022 at 17:00)</a>:</h4>
<p>If you look at the diff you'll see it's mostly just changing <code>well_founded.min</code> to <code>is_well_founded.min</code> and such throughout almost 60 files</p>



<a name="288279675"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/288279675" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#288279675">(Jul 02 2022 at 17:00)</a>:</h4>
<p>Just a few extra files that had some more drastic changes, and I'm working on documenting and assessing that</p>



<a name="288280907"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/288280907" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#288280907">(Jul 02 2022 at 17:29)</a>:</h4>
<p>Yep, I just went through all my work, and save for the basic files on well-founded relations that I very heavily modified, the whole PR is just a bunch of renames and the occasional golf with the new API.</p>



<a name="288281385"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/well-founded%20lt/near/288281385" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/well-founded.20lt.html#288281385">(Jul 02 2022 at 17:40)</a>:</h4>
<p>I think the diff will drop by like 500 lines or so when my other spinoff PRs are merged</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>