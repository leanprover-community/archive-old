---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/Installing.20mathlib.20on.20M1.20Mac.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Installing.20mathlib.20on.20M1.20Mac.html">Installing mathlib on M1 Mac</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="273201920"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Installing%20mathlib%20on%20M1%20Mac/near/273201920" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Xin Huajian <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Installing.20mathlib.20on.20M1.20Mac.html#273201920">(Feb 25 2022 at 08:45)</a>:</h4>
<p>I tried to install lean and mathlib on m1 mac as the guide from the community, when I used 'brew install mathlibtools' the terminal warned that <em>No available formula with the name "mathlibtools"</em>. Can anyone figure out this problem?</p>



<a name="273205553"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Installing%20mathlib%20on%20M1%20Mac/near/273205553" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alexander Bentkamp <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Installing.20mathlib.20on.20M1.20Mac.html#273205553">(Feb 25 2022 at 09:23)</a>:</h4>
<p>Maybe try <code>brew update</code>?</p>



<a name="273205574"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Installing%20mathlib%20on%20M1%20Mac/near/273205574" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alexander Bentkamp <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Installing.20mathlib.20on.20M1.20Mac.html#273205574">(Feb 25 2022 at 09:23)</a>:</h4>
<p>What version of MacOS are you using?</p>



<a name="273210385"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Installing%20mathlib%20on%20M1%20Mac/near/273210385" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Xin Huajian <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Installing.20mathlib.20on.20M1.20Mac.html#273210385">(Feb 25 2022 at 10:12)</a>:</h4>
<p>I tried  and it didn't work</p>



<a name="273210407"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Installing%20mathlib%20on%20M1%20Mac/near/273210407" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Xin Huajian <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Installing.20mathlib.20on.20M1.20Mac.html#273210407">(Feb 25 2022 at 10:12)</a>:</h4>
<p>macOS Monterey 12.2.1</p>



<a name="273210927"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Installing%20mathlib%20on%20M1%20Mac/near/273210927" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Installing.20mathlib.20on.20M1.20Mac.html#273210927">(Feb 25 2022 at 10:18)</a>:</h4>
<p>can you put the output of the shell session?</p>



<a name="273211368"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Installing%20mathlib%20on%20M1%20Mac/near/273211368" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Xin Huajian <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Installing.20mathlib.20on.20M1.20Mac.html#273211368">(Feb 25 2022 at 10:23)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">Warning</span><span class="o">:</span> <span class="n">No</span> <span class="n">available</span> <span class="n">formula</span> <span class="k">with</span> <span class="n">the</span> <span class="n">name</span> <span class="s2">"mathlibtools"</span><span class="bp">.</span>
<span class="bp">==&gt;</span> <span class="n">Searching</span> <span class="n">for</span> <span class="n">similarly</span> <span class="n">named</span> <span class="n">formulae...</span>
<span class="n">Error</span><span class="o">:</span> <span class="n">No</span> <span class="n">similarly</span> <span class="n">named</span> <span class="n">formulae</span> <span class="n">found.</span>
<span class="bp">==&gt;</span> <span class="n">Searching</span> <span class="n">for</span> <span class="n">a</span> <span class="n">previously</span> <span class="n">deleted</span> <span class="n">formula</span> <span class="o">(</span><span class="k">in</span> <span class="n">the</span> <span class="n">last</span> <span class="n">month</span><span class="o">)</span><span class="bp">...</span>
<span class="n">Error</span><span class="o">:</span> <span class="n">No</span> <span class="n">previously</span> <span class="n">deleted</span> <span class="n">formula</span> <span class="n">found.</span>
<span class="bp">==&gt;</span> <span class="n">Searching</span> <span class="n">taps</span> <span class="n">on</span> <span class="n">GitHub...</span>
<span class="n">Error</span><span class="o">:</span> <span class="n">No</span> <span class="n">formulae</span> <span class="n">found</span> <span class="k">in</span> <span class="n">taps.</span>
</code></pre></div>



<a name="273211576"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Installing%20mathlib%20on%20M1%20Mac/near/273211576" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Installing.20mathlib.20on.20M1.20Mac.html#273211576">(Feb 25 2022 at 10:25)</a>:</h4>
<p>and this is after <code>brew update</code>?</p>



<a name="273211633"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Installing%20mathlib%20on%20M1%20Mac/near/273211633" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Xin Huajian <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Installing.20mathlib.20on.20M1.20Mac.html#273211633">(Feb 25 2022 at 10:26)</a>:</h4>
<p>Yes</p>



<a name="273211754"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Installing%20mathlib%20on%20M1%20Mac/near/273211754" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Installing.20mathlib.20on.20M1.20Mac.html#273211754">(Feb 25 2022 at 10:27)</a>:</h4>
<p>I mean, I guess you can install it using pip, but I really don't get it; <a href="https://formulae.brew.sh/formula/mathlibtools">it's clearly there</a>, on all hoembrew versions too</p>



<a name="273211820"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Installing%20mathlib%20on%20M1%20Mac/near/273211820" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Installing.20mathlib.20on.20M1.20Mac.html#273211820">(Feb 25 2022 at 10:28)</a>:</h4>
<p><code>pip3 install mathlibtools</code> should work similarly well (on some python 3.10 install)? worth trying if you can :/</p>



<a name="273211854"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Installing%20mathlib%20on%20M1%20Mac/near/273211854" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Xin Huajian <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Installing.20mathlib.20on.20M1.20Mac.html#273211854">(Feb 25 2022 at 10:28)</a>:</h4>
<p>OK, I'll try it, thanks!</p>



<a name="273219207"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Installing%20mathlib%20on%20M1%20Mac/near/273219207" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Rute <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Installing.20mathlib.20on.20M1.20Mac.html#273219207">(Feb 25 2022 at 11:51)</a>:</h4>
<p>First, I think you have to use a special Brew for Rosetta2 as per the M1 specific guide <a href="https://leanprover-community.github.io/install/macos.html#m1-macs--apple-silicon">https://leanprover-community.github.io/install/macos.html#m1-macs--apple-silicon</a></p>



<a name="273219480"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Installing%20mathlib%20on%20M1%20Mac/near/273219480" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Rute <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Installing.20mathlib.20on.20M1.20Mac.html#273219480">(Feb 25 2022 at 11:54)</a>:</h4>
<p>Also, I would look at <a class="stream-topic" data-stream-id="113489" href="/#narrow/stream/113489-new-members/topic/M1.20Macs.3A.20Installing.20the.20Lean.203.20toolchain">#new members &gt; M1 Macs: Installing the Lean 3 toolchain</a> if you haven't already.</p>



<a name="273248842"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Installing%20mathlib%20on%20M1%20Mac/near/273248842" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Installing.20mathlib.20on.20M1.20Mac.html#273248842">(Feb 25 2022 at 16:17)</a>:</h4>
<p>For mathlibtools you don't need Intel brew (I use mathlibtools from normal ARM homebrew), so the above is.. quite odd</p>



<a name="273248986"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Installing%20mathlib%20on%20M1%20Mac/near/273248986" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Installing.20mathlib.20on.20M1.20Mac.html#273248986">(Feb 25 2022 at 16:18)</a>:</h4>
<p>Can you maybe try <code>brew install homebrew/core/mathlibtools</code> just to be sure?</p>



<a name="273387104"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Installing%20mathlib%20on%20M1%20Mac/near/273387104" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Xin Huajian <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Installing.20mathlib.20on.20M1.20Mac.html#273387104">(Feb 27 2022 at 06:55)</a>:</h4>
<p>Hi, I installed using<code>pip3 install mathlibtools</code> successfully, but when I tried to start lean in VS Code it outputted that <code>dyld[46350]: Library not loaded: /usr/local/opt/gmp/lib/libgmp.10.dylib</code>. Something seems still undone : (</p>



<a name="273387155"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Installing%20mathlib%20on%20M1%20Mac/near/273387155" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Xin Huajian <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Installing.20mathlib.20on.20M1.20Mac.html#273387155">(Feb 27 2022 at 06:57)</a>:</h4>
<p>Yes, I used the Brew for Rosetta2 as the guide but still received that problem.</p>



<a name="273390190"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Installing%20mathlib%20on%20M1%20Mac/near/273390190" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Stevens <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Installing.20mathlib.20on.20M1.20Mac.html#273390190">(Feb 27 2022 at 08:15)</a>:</h4>
<p><span class="user-mention silent" data-user-id="481527">Xin Huajian</span> <a href="#narrow/stream/113488-general/topic/Installing.20mathlib.20on.20M1.20Mac/near/273387104">said</a>:</p>
<blockquote>
<p>Hi, I installed using<code>pip3 install mathlibtools</code> successfully, but when I tried to start lean in VS Code it outputted that <code>dyld[46350]: Library not loaded: /usr/local/opt/gmp/lib/libgmp.10.dylib</code>. Something seems still undone : (</p>
</blockquote>
<p>Did you <code>brew install gmp</code>?</p>



<a name="284876210"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Installing%20mathlib%20on%20M1%20Mac/near/284876210" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Xin Huajian <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Installing.20mathlib.20on.20M1.20Mac.html#284876210">(Jun 03 2022 at 13:11)</a>:</h4>
<p>Finally I found the solution: <a href="https://leanprover-community.github.io/archive/stream/113489-new-members/topic/M1.20Macs.3A.20Installing.20the.20Lean.203.20toolchain.html">https://leanprover-community.github.io/archive/stream/113489-new-members/topic/M1.20Macs.3A.20Installing.20the.20Lean.203.20toolchain.html</a></p>



<a name="284884265"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Installing%20mathlib%20on%20M1%20Mac/near/284884265" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Installing.20mathlib.20on.20M1.20Mac.html#284884265">(Jun 03 2022 at 14:13)</a>:</h4>
<p>Can you share what there helped solve your issue in the end?</p>



<a name="285013362"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Installing%20mathlib%20on%20M1%20Mac/near/285013362" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Xin Huajian <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Installing.20mathlib.20on.20M1.20Mac.html#285013362">(Jun 05 2022 at 03:02)</a>:</h4>
<p><span class="user-mention silent" data-user-id="321696">Julian Berman</span> <a href="#narrow/stream/113488-general/topic/Installing.20mathlib.20on.20M1.20Mac/near/284884265">said</a>:</p>
<blockquote>
<p>Can you share what there helped solve your issue in the end?</p>
</blockquote>
<p>Now homebrew sopports the M1 chips, and the installing guide on "using Rosetta" seems to be not necessary. The problem that happened when I followed the guide was that the homebrew can't find mathlibtools, I guess it was caused by the incompatibility between x86-running window and the homebrew. Now I directly install homebrew without Rosetta and then I install elan and mathlibtools successfully. <br>
However, there are also some new problems. Although homebrew, elan and mathlibtools support M1 chips, when I use leanproject command, it shows "error: binary package was not provided for 'darwin_aarch64'". <br>
Still suffering.</p>



<a name="285032569"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Installing%20mathlib%20on%20M1%20Mac/near/285032569" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastian Ullrich <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Installing.20mathlib.20on.20M1.20Mac.html#285032569">(Jun 05 2022 at 11:42)</a>:</h4>
<p>This is documented in the elan readme <a href="https://github.com/leanprover/elan#manual-installation">https://github.com/leanprover/elan#manual-installation</a></p>



<a name="289404525"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Installing%20mathlib%20on%20M1%20Mac/near/289404525" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Xin Huajian <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Installing.20mathlib.20on.20M1.20Mac.html#289404525">(Jul 13 2022 at 00:58)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110024">Sebastian Ullrich</span> <a href="#narrow/stream/113488-general/topic/Installing.20mathlib.20on.20M1.20Mac/near/285032569">said</a>:</p>
<blockquote>
<p>This is documented in the elan readme <a href="https://github.com/leanprover/elan#manual-installation">https://github.com/leanprover/elan#manual-installation</a></p>
</blockquote>
<p>Thanks! I finally find the way to install elan and mathlibtools:</p>
<ol>
<li>follow <a href="https://github.com/leanprover/elan#manual-installation">https://github.com/leanprover/elan#manual-installation</a> to install elan</li>
<li>install mathlibtools by elan: </li>
</ol>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">elan</span> <span class="n">toolchain</span> <span class="n">install</span> <span class="n">stable</span>
<span class="n">elan</span> <span class="n">default</span> <span class="n">stable</span>
</code></pre></div>
<ol start="3">
<li>try to use <code>leanproject new myproject</code>, then I found the error <code>Library not loaded: /usr/local/opt/gmp/lib/libgmp.10.dylib</code>. My solution is that: within <code>arch -x86_64 zsh</code>, following <code>https://stackoverflow.com/questions/12852228/installing-gmp-on-macos-x-with-xcode</code> to install gmp in <code>/usr/local/bin</code> instead of <code>/opt/local/bin</code>(where the gmp is if install directly). Then try <code>leanproject new myproject</code> again and then the new project is created. In VSCode, there are no "leanpkg path" error.</li>
</ol>



<a name="291366560"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Installing%20mathlib%20on%20M1%20Mac/near/291366560" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bolton Bailey <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Installing.20mathlib.20on.20M1.20Mac.html#291366560">(Jul 29 2022 at 18:53)</a>:</h4>
<p>My fried is trying to install lean on M1 mac, following the instructions, he gets this error:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">paulgafni</span><span class="bp">@</span><span class="n">Pauls</span><span class="bp">-</span><span class="n">MacBook</span><span class="bp">-</span><span class="n">Air</span> <span class="bp">~</span> <span class="bp">%</span> <span class="n">xcode</span><span class="bp">-</span><span class="n">select</span> <span class="c1">--install</span>
<span class="n">xcode</span><span class="bp">-</span><span class="n">select</span><span class="o">:</span> <span class="n">error</span><span class="o">:</span> <span class="n">command</span> <span class="n">line</span> <span class="n">tools</span> <span class="n">are</span> <span class="n">already</span> <span class="n">installed</span><span class="o">,</span> <span class="n">use</span> <span class="s2">"Software Update"</span> <span class="n">to</span> <span class="n">install</span> <span class="n">updates</span>
<span class="n">paulgafni</span><span class="bp">@</span><span class="n">Pauls</span><span class="bp">-</span><span class="n">MacBook</span><span class="bp">-</span><span class="n">Air</span> <span class="bp">~</span> <span class="bp">%</span> <span class="n">softwareupdate</span> <span class="c1">--install-rosetta</span>
<span class="n">I</span> <span class="k">have</span> <span class="n">read</span> <span class="n">and</span> <span class="n">agree</span> <span class="n">to</span> <span class="n">the</span> <span class="n">terms</span> <span class="n">of</span> <span class="n">the</span> <span class="n">software</span> <span class="n">license</span> <span class="n">agreement.</span> <span class="n">A</span> <span class="n">list</span> <span class="n">of</span> <span class="n">Apple</span> <span class="n">SLAs</span> <span class="n">may</span> <span class="n">be</span> <span class="n">found</span> <span class="n">here</span><span class="o">:</span> <span class="n">http</span><span class="o">:</span><span class="bp">//</span><span class="n">www.apple.com</span><span class="bp">/</span><span class="n">legal</span><span class="bp">/</span><span class="n">sla</span><span class="bp">/</span>
<span class="kt">Type</span> <span class="n">A</span> <span class="n">and</span> <span class="n">press</span> <span class="n">return</span> <span class="n">to</span> <span class="n">agree</span><span class="o">:</span> <span class="n">A</span>
<span class="mi">2022</span><span class="bp">-</span><span class="mi">07</span><span class="bp">-</span><span class="mi">29</span> <span class="mi">11</span><span class="o">:</span><span class="mi">50</span><span class="o">:</span><span class="mi">49</span><span class="bp">.</span><span class="mi">025</span> <span class="n">softwareupdate</span><span class="o">[</span><span class="mi">5082</span><span class="o">:</span><span class="mi">2868074</span><span class="o">]</span> <span class="n">Package</span> <span class="n">Authoring</span> <span class="n">Error</span><span class="o">:</span> <span class="mi">002</span><span class="bp">-</span><span class="mi">42534</span><span class="o">:</span> <span class="n">Package</span> <span class="n">reference</span> <span class="n">com.apple.pkg.RosettaUpdateAuto</span> <span class="n">is</span> <span class="n">missing</span> <span class="n">installKBytes</span> <span class="kn">attribute</span>
<span class="n">Install</span> <span class="n">of</span> <span class="n">Rosetta</span> <span class="mi">2</span> <span class="n">finished</span> <span class="n">successfully</span>
<span class="n">paulgafni</span><span class="bp">@</span><span class="n">Pauls</span><span class="bp">-</span><span class="n">MacBook</span><span class="bp">-</span><span class="n">Air</span> <span class="bp">~</span> <span class="bp">%</span> <span class="n">arch</span> <span class="bp">-</span><span class="n">x86_64</span> <span class="n">zsh</span>
<span class="n">arch</span><span class="o">:</span> <span class="n">posix_spawnp</span><span class="o">:</span> <span class="n">zsh</span><span class="o">:</span> <span class="n">Bad</span> <span class="n">CPU</span> <span class="n">type</span> <span class="k">in</span> <span class="n">executable</span>
</code></pre></div>
<p>What is going on?</p>



<a name="291370607"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Installing%20mathlib%20on%20M1%20Mac/near/291370607" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Installing.20mathlib.20on.20M1.20Mac.html#291370607">(Jul 29 2022 at 19:30)</a>:</h4>
<p>If that's succeeded and/or <code>/usr/sbin/softwareupdate --install-rosetta --agree-to-license</code> says Rosetta is installed already, Google seems to suggest that may mean the Rosetta install is corrupt and you'll have some fun deleting and reinstalling it: <a href="https://www.reddit.com/r/MacOS/comments/rq89is/rosetta_2_issues/i2zwy07/">https://www.reddit.com/r/MacOS/comments/rq89is/rosetta_2_issues/i2zwy07/</a></p>



<a name="298482544"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Installing%20mathlib%20on%20M1%20Mac/near/298482544" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bolton Bailey <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Installing.20mathlib.20on.20M1.20Mac.html#298482544">(Sep 12 2022 at 21:33)</a>:</h4>
<p>Just another question here, when he runs <code>arch -x86_64 bash</code> it seems to work fine. Should this work for the installation?</p>



<a name="301539688"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Installing%20mathlib%20on%20M1%20Mac/near/301539688" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Dean Young <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Installing.20mathlib.20on.20M1.20Mac.html#301539688">(Sep 29 2022 at 22:03)</a>:</h4>
<p>I've got an M1 mac and I'm trying to install mathlib, using the instructions here:</p>
<p><a href="http://leanprover-community.github.io/get_started.html">leanprover-community.github.io/get_started.html</a></p>
<p>Unfortunately, on steps 3 and 4 I get "error: binary package was not provided for 'darwin'".</p>
<p><a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mathlib.20branches.html">https://leanprover-community.github.io/archive/stream/113488-general/topic/mathlib.20branches.html</a></p>



<a name="301539791"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Installing%20mathlib%20on%20M1%20Mac/near/301539791" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Installing.20mathlib.20on.20M1.20Mac.html#301539791">(Sep 29 2022 at 22:04)</a>:</h4>
<p>Did you try <code>elan self update</code>?</p>



<a name="301539861"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Installing%20mathlib%20on%20M1%20Mac/near/301539861" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Installing.20mathlib.20on.20M1.20Mac.html#301539861">(Sep 29 2022 at 22:05)</a>:</h4>
<p>If it doesn't work, try uninstalling elan (<code>elan self uninstall</code>) and reinstalling it.</p>



<a name="301540362"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Installing%20mathlib%20on%20M1%20Mac/near/301540362" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Dean Young <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Installing.20mathlib.20on.20M1.20Mac.html#301540362">(Sep 29 2022 at 22:09)</a>:</h4>
<p>I get this:</p>



<a name="301540367"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Installing%20mathlib%20on%20M1%20Mac/near/301540367" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Dean Young <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Installing.20mathlib.20on.20M1.20Mac.html#301540367">(Sep 29 2022 at 22:09)</a>:</h4>
<p>error: self-uninstall is disabled for this build of elan<br>
error: you should probably use your system package manager to uninstall elan</p>



<a name="301540452"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Installing%20mathlib%20on%20M1%20Mac/near/301540452" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Installing.20mathlib.20on.20M1.20Mac.html#301540452">(Sep 29 2022 at 22:10)</a>:</h4>
<p>Ah then try uninstalling it from brew, or whichever package manager you're using.</p>



<a name="301540656"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Installing%20mathlib%20on%20M1%20Mac/near/301540656" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mauricio Collares <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Installing.20mathlib.20on.20M1.20Mac.html#301540656">(Sep 29 2022 at 22:12)</a>:</h4>
<p>Since you're on M1, remember to use <code>/usr/local/bin/brew</code> instead of just <code>brew</code>: <code>/usr/local/bin/brew update</code> and <code>/usr/local/bin/brew install elan-init</code></p>



<a name="301541079"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Installing%20mathlib%20on%20M1%20Mac/near/301541079" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Dean Young <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Installing.20mathlib.20on.20M1.20Mac.html#301541079">(Sep 29 2022 at 22:16)</a>:</h4>
<p>Thanks very much for your time guys.</p>
<p>Yes I used brew for this. </p>
<p>Following Mauricio's suggestion still produces an error. Here's what I get:</p>
<p>Warning: Treating elan as a formula. For the cask, use homebrew/cask/elan<br>
elan-init 1.4.1 is already installed but outdated (so it will be upgraded).<br>
Error: Cannot install in Homebrew on ARM processor in Intel default prefix (/usr/local)!<br>
Please create a new installation in /opt/homebrew using one of the<br>
"Alternative Installs" from:<br>
<a href="https://docs.brew.sh/Installation">https://docs.brew.sh/Installation</a><br>
You can migrate your previously installed formula list with:<br>
  brew bundle dump</p>
<p>I guess I'm going to create a new installation. Do you know the relevant commands?</p>



<a name="301541313"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Installing%20mathlib%20on%20M1%20Mac/near/301541313" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mauricio Collares <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Installing.20mathlib.20on.20M1.20Mac.html#301541313">(Sep 29 2022 at 22:18)</a>:</h4>
<p>Can you try the same command I mentioned but inside a Rosetta shell? That is, do <code>arch -x86_64 zsh</code> then use the resulting shell to update elan</p>



<a name="301541348"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Installing%20mathlib%20on%20M1%20Mac/near/301541348" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mauricio Collares <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Installing.20mathlib.20on.20M1.20Mac.html#301541348">(Sep 29 2022 at 22:18)</a>:</h4>
<p>If that doesn't work, the installation instructions for M1 Mac are available at <a href="https://leanprover-community.github.io/install/macos.html">https://leanprover-community.github.io/install/macos.html</a></p>



<a name="301748534"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Installing%20mathlib%20on%20M1%20Mac/near/301748534" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Dean Young <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Installing.20mathlib.20on.20M1.20Mac.html#301748534">(Sep 30 2022 at 23:11)</a>:</h4>
<p><span class="user-mention silent" data-user-id="325367">Mauricio Collares</span> <a href="#narrow/stream/113488-general/topic/Installing.20mathlib.20on.20M1.20Mac/near/301541313">said</a>:</p>
<blockquote>
<p>Can you try the same command I mentioned but inside a Rosetta shell? That is, do <code>arch -x86_64 zsh</code> then use the resulting shell to update elan</p>
</blockquote>
<p>Oh this worked, thanks so much Mauricio!</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>