---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/add_torsor.3A.20out_param.3F.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/add_torsor.3A.20out_param.3F.html">add_torsor: out_param?</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="199837267"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/add_torsor%3A%20out_param%3F/near/199837267" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/add_torsor.3A.20out_param.3F.html#199837267">(Jun 05 2020 at 05:27)</a>:</h4>
<p>I'm trying to port <code>analysis/convex</code> to affine spaces. Very often I have to add the vector space as an explicit parameter but <code>convex E s</code> looks strange. Can we use some <code>out_param</code> magic or some other magic to make it work?</p>



<a name="199837357"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/add_torsor%3A%20out_param%3F/near/199837357" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/add_torsor.3A.20out_param.3F.html#199837357">(Jun 05 2020 at 05:29)</a>:</h4>
<p>I want to say that every affine space (should we assume the same for <code>add_torsor</code>s?) has exactly one vector space behind it.</p>



<a name="199837366"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/add_torsor%3A%20out_param%3F/near/199837366" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/add_torsor.3A.20out_param.3F.html#199837366">(Jun 05 2020 at 05:29)</a>:</h4>
<p>We used to have <code>out_param</code>s in modules, and it was a nightmare. So I'm scared by <code>out_param</code>s in general...</p>



<a name="199837382"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/add_torsor%3A%20out_param%3F/near/199837382" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/add_torsor.3A.20out_param.3F.html#199837382">(Jun 05 2020 at 05:29)</a>:</h4>
<p>What kind of nightmare?</p>



<a name="199837429"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/add_torsor%3A%20out_param%3F/near/199837429" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/add_torsor.3A.20out_param.3F.html#199837429">(Jun 05 2020 at 05:30)</a>:</h4>
<p>I think I was not there yet.</p>



<a name="199837431"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/add_torsor%3A%20out_param%3F/near/199837431" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/add_torsor.3A.20out_param.3F.html#199837431">(Jun 05 2020 at 05:30)</a>:</h4>
<p>Do we want <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="double-struck">C</mi></mrow><annotation encoding="application/x-tex">\mathbb{C}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68889em;vertical-align:0em;"></span><span class="mord"><span class="mord mathbb">C</span></span></span></span></span> to be a torsor for <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="double-struck">C</mi></mrow><annotation encoding="application/x-tex">\mathbb{C}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68889em;vertical-align:0em;"></span><span class="mord"><span class="mord mathbb">C</span></span></span></span></span> and <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi mathvariant="double-struck">R</mi><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">\mathbb{R}^2</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord"><span class="mord mathbb">R</span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span>?</p>



<a name="199837439"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/add_torsor%3A%20out_param%3F/near/199837439" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/add_torsor.3A.20out_param.3F.html#199837439">(Jun 05 2020 at 05:30)</a>:</h4>
<p><span class="user-mention silent" data-user-id="214703">Yury G. Kudryashov</span> <a href="#narrow/stream/113488-general/topic/add_torsor.3A.20out_param.3F/near/199837382">said</a>:</p>
<blockquote>
<p>What kind of nightmare?</p>
</blockquote>
<p>Basically, we had the definition of module/vector space, and dimension. And nothing else.</p>



<a name="199837448"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/add_torsor%3A%20out_param%3F/near/199837448" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/add_torsor.3A.20out_param.3F.html#199837448">(Jun 05 2020 at 05:30)</a>:</h4>
<p>Every time someone tried to do something, you would only get a bunch of errors.</p>



<a name="199837454"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/add_torsor%3A%20out_param%3F/near/199837454" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/add_torsor.3A.20out_param.3F.html#199837454">(Jun 05 2020 at 05:31)</a>:</h4>
<p>But back then I didn't understand anything of the discussions about <code>out_param</code>.</p>



<a name="199837458"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/add_torsor%3A%20out_param%3F/near/199837458" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/add_torsor.3A.20out_param.3F.html#199837458">(Jun 05 2020 at 05:31)</a>:</h4>
<p>Then we'll have to live with <code>convex E s</code>.</p>



<a name="199837531"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/add_torsor%3A%20out_param%3F/near/199837531" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/add_torsor.3A.20out_param.3F.html#199837531">(Jun 05 2020 at 05:33)</a>:</h4>
<p><a href="#narrow/stream/113488-general/topic/Module.20refactor">https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Module.20refactor</a> is one thread, but that's not where the story ended</p>



<a name="199837577"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/add_torsor%3A%20out_param%3F/near/199837577" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/add_torsor.3A.20out_param.3F.html#199837577">(Jun 05 2020 at 05:34)</a>:</h4>
<p><a href="#narrow/stream/116395-maths/topic/module.20refactor">https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/module.20refactor</a> is another one</p>



<a name="199837736"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/add_torsor%3A%20out_param%3F/near/199837736" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/add_torsor.3A.20out_param.3F.html#199837736">(Jun 05 2020 at 05:39)</a>:</h4>
<p>But those threads seem to be after the "big" module refactor, which was merged during LUG Freiburg 2018: <a href="#narrow/stream/113488-general/topic/LUG.20Freiburg.202018/near/147245873">https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/LUG.20Freiburg.202018/near/147245873</a></p>



<a name="199837749"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/add_torsor%3A%20out_param%3F/near/199837749" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/add_torsor.3A.20out_param.3F.html#199837749">(Jun 05 2020 at 05:39)</a>:</h4>
<p>I haven't found any zulip threads about the <code>out_param</code> pains that we had before that refactor.</p>



<a name="199844892"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/add_torsor%3A%20out_param%3F/near/199844892" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/add_torsor.3A.20out_param.3F.html#199844892">(Jun 05 2020 at 07:54)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112680">Johan Commelin</span> <a href="#narrow/stream/113488-general/topic/add_torsor.3A.20out_param.3F/near/199837431">said</a>:</p>
<blockquote>
<p>Do we want <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="double-struck">C</mi></mrow><annotation encoding="application/x-tex">\mathbb{C}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68889em;vertical-align:0em;"></span><span class="mord"><span class="mord mathbb">C</span></span></span></span></span> to be a torsor for <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="double-struck">C</mi></mrow><annotation encoding="application/x-tex">\mathbb{C}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68889em;vertical-align:0em;"></span><span class="mord"><span class="mord mathbb">C</span></span></span></span></span> and <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi mathvariant="double-struck">R</mi><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">\mathbb{R}^2</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord"><span class="mord mathbb">R</span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span>?</p>
</blockquote>
<p>I don't think we want that. We want <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="double-struck">C</mi></mrow><annotation encoding="application/x-tex">\mathbb C</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68889em;vertical-align:0em;"></span><span class="mord mathbb">C</span></span></span></span> to be a <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="double-struck">R</mi></mrow><annotation encoding="application/x-tex">\mathbb R</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68889em;vertical-align:0em;"></span><span class="mord mathbb">R</span></span></span></span>-vector space, but this is different. And convexity is a real notion, even if the vector space <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>E</mi></mrow><annotation encoding="application/x-tex">E</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">E</span></span></span></span> can be seen as a <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="double-struck">Q</mi></mrow><annotation encoding="application/x-tex">\mathbb Q</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.85556em;vertical-align:-0.16667em;"></span><span class="mord mathbb">Q</span></span></span></span>-vector space, there is no notion of being <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="double-struck">Q</mi></mrow><annotation encoding="application/x-tex">\mathbb Q</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.85556em;vertical-align:-0.16667em;"></span><span class="mord mathbb">Q</span></span></span></span>-convex (you could define something but that doesn't exists in the real world AFAIK). So it should really <code>convex s</code>.</p>



<a name="199844981"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/add_torsor%3A%20out_param%3F/near/199844981" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/add_torsor.3A.20out_param.3F.html#199844981">(Jun 05 2020 at 07:55)</a>:</h4>
<p>Of course in o-minimal theory ...</p>



<a name="199845024"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/add_torsor%3A%20out_param%3F/near/199845024" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/add_torsor.3A.20out_param.3F.html#199845024">(Jun 05 2020 at 07:56)</a>:</h4>
<p>Never mind</p>



<a name="199845036"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/add_torsor%3A%20out_param%3F/near/199845036" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/add_torsor.3A.20out_param.3F.html#199845036">(Jun 05 2020 at 07:56)</a>:</h4>
<p>But I was replying to whether we want the <code>out_param</code> for <code>add_torsor</code>.</p>



<a name="199845049"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/add_torsor%3A%20out_param%3F/near/199845049" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/add_torsor.3A.20out_param.3F.html#199845049">(Jun 05 2020 at 07:56)</a>:</h4>
<p>And there I think my example applies.</p>



<a name="199845191"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/add_torsor%3A%20out_param%3F/near/199845191" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/add_torsor.3A.20out_param.3F.html#199845191">(Jun 05 2020 at 07:58)</a>:</h4>
<p>Whether you hardcode the reals into <code>convex</code> is a different question (and one that seems reasonable to me).<br>
(All those o-minimal theorists can generalise later. They first need to get the definition of a definable set into mathlib.)</p>



<a name="199846289"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/add_torsor%3A%20out_param%3F/near/199846289" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/add_torsor.3A.20out_param.3F.html#199846289">(Jun 05 2020 at 08:10)</a>:</h4>
<p>The problem is not with hardcoding reals (already done). The problem is in hardcoding the vector space associated to our affine space.</p>



<a name="199846379"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/add_torsor%3A%20out_param%3F/near/199846379" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/add_torsor.3A.20out_param.3F.html#199846379">(Jun 05 2020 at 08:11)</a>:</h4>
<p>And I don't know whether we can do it for affine spaces without doing this for additive torsors</p>



<a name="199846465"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/add_torsor%3A%20out_param%3F/near/199846465" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/add_torsor.3A.20out_param.3F.html#199846465">(Jun 05 2020 at 08:12)</a>:</h4>
<p>Currently some space is an abbreviation for add torsors</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>