---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/Can.20.60unification_hint.60.20help.20with.20casting.3F.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Can.20.60unification_hint.60.20help.20with.20casting.3F.html">Can `unification_hint` help with casting?</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="221681994"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Can%20%60unification_hint%60%20help%20with%20casting%3F/near/221681994" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Can.20.60unification_hint.60.20help.20with.20casting.3F.html#221681994">(Jan 05 2021 at 18:19)</a>:</h4>
<p>If I have a <code>(a : alternating_map R M N ι)</code> and want to cast it to a multilinear_map, I seem to have no choice but to spell out <code>(a : multilinear_map R (λ i : ι, M) N)</code> which is a mouthful. Is there any way I can train the unifier to let me put underscores in there? Ideally I could write<code>(a : multilinear_map _ _ _)</code> and lean would work it out.</p>



<a name="221682297"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Can%20%60unification_hint%60%20help%20with%20casting%3F/near/221682297" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Can.20.60unification_hint.60.20help.20with.20casting.3F.html#221682297">(Jan 05 2021 at 18:22)</a>:</h4>
<p>The problem I guess is that in theory there could be a coercion to some other multilinear map too</p>



<a name="221682358"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Can%20%60unification_hint%60%20help%20with%20casting%3F/near/221682358" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Can.20.60unification_hint.60.20help.20with.20casting.3F.html#221682358">(Jan 05 2021 at 18:22)</a>:</h4>
<p>so is this what unification hints do?</p>



<a name="221682853"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Can%20%60unification_hint%60%20help%20with%20casting%3F/near/221682853" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Can.20.60unification_hint.60.20help.20with.20casting.3F.html#221682853">(Jan 05 2021 at 18:26)</a>:</h4>
<p>In part this is me trying to answer the question "what do unification hints do"</p>



<a name="221683070"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Can%20%60unification_hint%60%20help%20with%20casting%3F/near/221683070" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Can.20.60unification_hint.60.20help.20with.20casting.3F.html#221683070">(Jan 05 2021 at 18:28)</a>:</h4>
<p>I heard very early on in Lean 4 development that they weren't planning on having them so I never took them seriously. Now it turns out that they are there in Lean 4 too so perhaps it's time I figured out what they are.</p>



<a name="221683387"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Can%20%60unification_hint%60%20help%20with%20casting%3F/near/221683387" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Can.20.60unification_hint.60.20help.20with.20casting.3F.html#221683387">(Jan 05 2021 at 18:30)</a>:</h4>
<p>I went back through the zulip history and found:</p>
<ul>
<li>The tests in <code>lean</code> 3, which are completely contrived and seem mostly to be "these are a backdoor for <code>irreducible</code>", which probably is a useful trick to know</li>
<li>The <a href="https://github.com/rwbarton/lean-omin/blob/master/old/unification_hints.lean">lean-omin</a> notes on them</li>
<li><a href="https://lean-forward.github.io/lean-together/2019/slides/demo_structures.lean">That Lean Together 2019 workshop</a> <del>that I dropped the link to</del></li>
</ul>



<a name="221687141"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Can%20%60unification_hint%60%20help%20with%20casting%3F/near/221687141" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Can.20.60unification_hint.60.20help.20with.20casting.3F.html#221687141">(Jan 05 2021 at 19:01)</a>:</h4>
<p>If you figure them out (and they seem useful), please write something up for the community webpage!</p>



<a name="221746672"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Can%20%60unification_hint%60%20help%20with%20casting%3F/near/221746672" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Can.20.60unification_hint.60.20help.20with.20casting.3F.html#221746672">(Jan 06 2021 at 09:11)</a>:</h4>
<p><span class="user-mention" data-user-id="110064">@Kenny Lau</span> see Eric's post for some pointers about unification hints. <span aria-label="up" class="emoji emoji-2b06" role="img" title="up">:up:</span></p>



<a name="222014008"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Can%20%60unification_hint%60%20help%20with%20casting%3F/near/222014008" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Cyril Cohen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Can.20.60unification_hint.60.20help.20with.20casting.3F.html#222014008">(Jan 07 2021 at 22:59)</a>:</h4>
<p>There is actually a research paper about them: <a href="https://www.cs.unibo.it/~sacerdot/PAPERS/tphol09.pdf">https://www.cs.unibo.it/~sacerdot/PAPERS/tphol09.pdf</a></p>



<a name="226628519"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Can%20%60unification_hint%60%20help%20with%20casting%3F/near/226628519" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Can.20.60unification_hint.60.20help.20with.20casting.3F.html#226628519">(Feb 17 2021 at 08:49)</a>:</h4>
<p>Some more motivation for the original question - can unification hints make this legal?</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">data.equiv.ring</span>

<span class="c1">-- fails without filling the underscores. Can we teach lean to guess?</span>
<span class="kd">example</span> <span class="o">{</span><span class="n">M</span> <span class="n">N</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">semiring</span> <span class="n">M</span><span class="o">]</span> <span class="o">[</span><span class="n">semiring</span> <span class="n">N</span><span class="o">]</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">M</span> <span class="bp">≃+*</span> <span class="n">N</span><span class="o">)</span> <span class="o">:=</span> <span class="o">(</span><span class="bp">↑</span><span class="n">f</span> <span class="o">:</span> <span class="n">_</span> <span class="bp">→+*</span> <span class="n">_</span><span class="o">)</span>
</code></pre></div>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>