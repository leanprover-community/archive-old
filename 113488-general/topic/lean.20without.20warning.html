---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/lean.20without.20warning.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.20without.20warning.html">lean without warning</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="236292171"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean%20without%20warning/near/236292171" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.20without.20warning.html#236292171">(Apr 27 2021 at 07:02)</a>:</h4>
<p><span class="user-mention" data-user-id="110043">@Gabriel Ebner</span> how hard would it be to add a command line switch to <code>lean --make</code> to suppress all sorry warnings and <code>#check</code> or <code>#print</code> output, leaving only errors? Those days we are breaking a lot the LFTCM2020 repository with mathlib upgrades and it's very painful to spot the error in a huge flood of warnings and checks.</p>



<a name="236294019"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean%20without%20warning/near/236294019" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.20without.20warning.html#236294019">(Apr 27 2021 at 07:20)</a>:</h4>
<p>My workflow is:</p>
<div class="codehilite" data-code-language="code"><pre><span></span><code>lean --make &gt;&gt; errors.txt
</code></pre></div>
<p>and then open the file <code>errors.txt</code> and look for <code>error</code>.</p>



<a name="236294136"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean%20without%20warning/near/236294136" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.20without.20warning.html#236294136">(Apr 27 2021 at 07:22)</a>:</h4>
<p>Sébastien, seeing the error in real time would be much faster.</p>



<a name="236294175"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean%20without%20warning/near/236294175" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.20without.20warning.html#236294175">(Apr 27 2021 at 07:22)</a>:</h4>
<p>Of course!</p>



<a name="236296590"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean%20without%20warning/near/236296590" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.20without.20warning.html#236296590">(Apr 27 2021 at 07:49)</a>:</h4>
<p>When working on LTE I also wish for a <code>--suppress-warnings</code> option</p>



<a name="236297033"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean%20without%20warning/near/236297033" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.20without.20warning.html#236297033">(Apr 27 2021 at 07:54)</a>:</h4>
<p>I guess for LTE the fix is to just get rid of all those <code>sorry</code>s <span aria-label="stuck out tongue wink" class="emoji emoji-1f61c" role="img" title="stuck out tongue wink">:stuck_out_tongue_wink:</span></p>



<a name="236305240"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean%20without%20warning/near/236305240" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.20without.20warning.html#236305240">(Apr 27 2021 at 09:10)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110031">Patrick Massot</span> <a href="#narrow/stream/113488-general/topic/lean.20without.20warning/near/236294136">said</a>:</p>
<blockquote>
<p>Sébastien, seeing the error in real time would be much faster.</p>
</blockquote>
<p>You can pipe the output of lean through grep or awk. I used to have a script for doing this to one of the metamath tools that had a lot of noisy diagnostics - I would filter out all the diagnostic messages I didn't care about and reformat the errors with color and priority to make them more obvious</p>



<a name="236311829"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean%20without%20warning/near/236311829" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.20without.20warning.html#236311829">(Apr 27 2021 at 10:10)</a>:</h4>
<p>You can but unfortunately you then have to rely on the buffer being flushed. I've tried this and sometimes you just sit there with no output</p>



<a name="236403606"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean%20without%20warning/near/236403606" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ben Toner <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.20without.20warning.html#236403606">(Apr 27 2021 at 20:36)</a>:</h4>
<p>You can move further towards what you want with <code>lean --make 2&gt; /dev/null | grep -v sorry</code>.</p>
<p>This works because the #print and #check commands write to stderr (file descriptor 2) , which we redirect with the <code>2&gt;</code>. Error and warning messages are on stdout so are not affected.</p>
<p>Piping to grep has trade-offs: it consumes the progress messages (e.g. <code>parsing at line 700</code>) and you'll also have to potentially wait as <span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> says, although that can be solved: e.g., on Ubuntu you can <code>sudo apt install expect</code> and then<br>
<code>unbuffer lean --make 2&gt; /dev/null | grep -v sorry</code>.</p>



<a name="236408351"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean%20without%20warning/near/236408351" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.20without.20warning.html#236408351">(Apr 27 2021 at 21:03)</a>:</h4>
<p>Thanks!</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>