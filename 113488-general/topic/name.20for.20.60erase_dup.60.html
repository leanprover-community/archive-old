---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/name.20for.20.60erase_dup.60.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/name.20for.20.60erase_dup.60.html">name for `erase_dup`</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="271845847"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/name%20for%20%60erase_dup%60/near/271845847" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/name.20for.20.60erase_dup.60.html#271845847">(Feb 14 2022 at 15:53)</a>:</h4>
<p>I'm currently defining list.chain_dedup' in <a href="https://github.com/leanprover-community/mathlib/pull/11934">#11934</a>, and there's been a lot of discussion about the name. There's almost two separate things:</p>



<a name="271845886"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/name%20for%20%60erase_dup%60/near/271845886" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/name.20for.20.60erase_dup.60.html#271845886">(Feb 14 2022 at 15:53)</a>:</h4>
<p>/poll What should the function <code>[1,1,1,2,3,3] -&gt; [1,2,3]</code> be called?<br>
<code>norep</code><br>
<code>chain_dedup</code><br>
<code>squeeze</code><br>
<code>uniq</code><br>
<code>erase_rep</code></p>



<a name="271845934"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/name%20for%20%60erase_dup%60/near/271845934" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/name.20for.20.60erase_dup.60.html#271845934">(Feb 14 2022 at 15:54)</a>:</h4>
<p>But secondly, we currently have <code>chain</code> and <code>chain'</code>, with <code>chain a l</code> talking about <code>a :: l</code> whilst <code>chain' l</code> talks about the list itself. I understand that <code>chain a l</code> may be the more sensible CS notion, but as a mathematician I see zero sense in it and would much rather talk about <code>chain' l</code> almost exclusively. I propose we swap these names; is there people against this?</p>



<a name="271846088"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/name%20for%20%60erase_dup%60/near/271846088" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/name.20for.20.60erase_dup.60.html#271846088">(Feb 14 2022 at 15:55)</a>:</h4>
<p>I find myself mostly using <code>chain</code>, actually, so I'm not sure the argument holds.</p>



<a name="271846408"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/name%20for%20%60erase_dup%60/near/271846408" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/name.20for.20.60erase_dup.60.html#271846408">(Feb 14 2022 at 15:57)</a>:</h4>
<p>How come?</p>



<a name="271846785"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/name%20for%20%60erase_dup%60/near/271846785" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/name.20for.20.60erase_dup.60.html#271846785">(Feb 14 2022 at 15:59)</a>:</h4>
<p>I don't actually know. I think it's because the empty list is pathological where I use it, so using <code>chain</code> is a nice sweep-under-the-rug way to forget about it. When I have a <code>chain'</code>, the first thing I do is to case on the list to get back to <code>chain</code>.</p>



<a name="271847755"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/name%20for%20%60erase_dup%60/near/271847755" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/name.20for.20.60erase_dup.60.html#271847755">(Feb 14 2022 at 16:04)</a>:</h4>
<p>If you're able to modify the poll question, you might want to make it clear this function is only removing consecutive repeats, so <code>[2, 2, 3, 3, 2] -&gt; [2, 3, 2]</code></p>



<a name="271849180"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/name%20for%20%60erase_dup%60/near/271849180" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/name.20for.20.60erase_dup.60.html#271849180">(Feb 14 2022 at 16:14)</a>:</h4>
<p><span class="user-mention" data-user-id="387244">@Yaël Dillies</span> Here's another argument: <code>chain</code> seems to be the auxiliary definition for <code>chain'</code>. It's asymmetric, giving you an argument for the pre-head (why not the post-tail?)</p>



<a name="271857307"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/name%20for%20%60erase_dup%60/near/271857307" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joachim Breitner <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/name.20for.20.60erase_dup.60.html#271857307">(Feb 14 2022 at 17:10)</a>:</h4>
<p>A term for consecutive repeated elements of a sequence is “suttering”, I believe, e.g. in state machine machines. I hence added <code>erase_stutter</code> to the list of options</p>



<a name="271857374"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/name%20for%20%60erase_dup%60/near/271857374" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/name.20for.20.60erase_dup.60.html#271857374">(Feb 14 2022 at 17:11)</a>:</h4>
<p>Obscure, but I like it!</p>



<a name="271857436"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/name%20for%20%60erase_dup%60/near/271857436" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joachim Breitner <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/name.20for.20.60erase_dup.60.html#271857436">(Feb 14 2022 at 17:11)</a>:</h4>
<p>There is precedence in the Software Foundations book that teaches ITP with Coq: <a href="https://github.com/bishboria/software-foundations/blob/master/MoreLogic.v#L161">https://github.com/bishboria/software-foundations/blob/master/MoreLogic.v#L161</a></p>



<a name="271859306"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/name%20for%20%60erase_dup%60/near/271859306" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/name.20for.20.60erase_dup.60.html#271859306">(Feb 14 2022 at 17:25)</a>:</h4>
<p>Collecting rationales for some of the names:</p>
<ul>
<li><code>norep</code> came from a Haskell library</li>
<li><code>uniq</code> came from a Haskell library and Unix</li>
<li><code>chain_dedup</code> deduplicates elements in the chainward direction</li>
<li><code>erase_rep</code> mirrors <code>erase_dup</code>, where it seems plausible that there could be a distinction between repetitions and duplications</li>
<li><code>erase_consecutive_dup</code> is a clear modification of <code>erase_dup</code></li>
<li><code>erase_stutter</code> evokes localized repetition, which is a fairly clear metaphor</li>
<li><code>squeeze</code> evokes physically compressing a list, which is less clear</li>
</ul>



<a name="271859406"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/name%20for%20%60erase_dup%60/near/271859406" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/name.20for.20.60erase_dup.60.html#271859406">(Feb 14 2022 at 17:26)</a>:</h4>
<p>uniq is also how unix uniq works.</p>



<a name="271861565"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/name%20for%20%60erase_dup%60/near/271861565" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/name.20for.20.60erase_dup.60.html#271861565">(Feb 14 2022 at 17:42)</a>:</h4>
<p>If we're making an erase_rep, can that be the prod.fst map out of a "counter" function that we write? Otherwise, we'll want that counter later anyway.</p>



<a name="271862015"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/name%20for%20%60erase_dup%60/near/271862015" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/name.20for.20.60erase_dup.60.html#271862015">(Feb 14 2022 at 17:45)</a>:</h4>
<p>Oh, I read <code>erase_rep</code> as "erase representative".</p>



<a name="271862165"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/name%20for%20%60erase_dup%60/near/271862165" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ruben Van de Velde <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/name.20for.20.60erase_dup.60.html#271862165">(Feb 14 2022 at 17:46)</a>:</h4>
<p><code>erase_rpt</code>?</p>



<a name="271862215"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/name%20for%20%60erase_dup%60/near/271862215" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/name.20for.20.60erase_dup.60.html#271862215">(Feb 14 2022 at 17:47)</a>:</h4>
<p><code>erase_repeat</code>?</p>



<a name="271909179"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/name%20for%20%60erase_dup%60/near/271909179" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Junyan Xu <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/name.20for.20.60erase_dup.60.html#271909179">(Feb 15 2022 at 00:20)</a>:</h4>
<p>Googling <code>destutter</code> seems to return a reasonable amount of results, so I added that. By the way, </p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">erase_dup</span> <span class="n">l</span> <span class="n">removes</span> <span class="n">duplicates</span> <span class="k">from</span> <span class="n">l</span> <span class="o">(</span><span class="n">taking</span> <span class="n">only</span> <span class="n">the</span> <span class="n">first</span> <span class="n">occurrence</span><span class="o">)</span><span class="bp">.</span> <span class="n">Defined</span> <span class="n">as</span> <span class="n">pw_filter</span> <span class="o">(</span><span class="bp">≠</span><span class="o">)</span><span class="bp">.</span>
<span class="n">erase_dup</span> <span class="o">[</span><span class="mi">1</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">1</span><span class="o">]</span> <span class="bp">=</span> <span class="o">[</span><span class="mi">0</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">1</span><span class="o">]</span>
</code></pre></div>
<p><a href="https://leanprover-community.github.io/mathlib_docs/find/list.erase_dup">docs#list.erase_dup</a><br>
Why does this not return [1,0,2] ?</p>



<a name="271912094"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/name%20for%20%60erase_dup%60/near/271912094" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/name.20for.20.60erase_dup.60.html#271912094">(Feb 15 2022 at 00:56)</a>:</h4>
<p>The doc is lying, it works from right to left</p>



<a name="271974777"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/name%20for%20%60erase_dup%60/near/271974777" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/name.20for.20.60erase_dup.60.html#271974777">(Feb 15 2022 at 13:43)</a>:</h4>
<p>I ended up going for <code>destutter</code>, now that I finished generalizing to an arbitrary relation. <code>erase_stutter</code> felt a bit too long. I also swapped the <code>'</code>s compared to <code>chain'</code>, now that it doesn't mention it in the name. (And I think that this time, <code>destutter</code> really is the more correct notion  99% of the time - for example, you only have <code>(l.destutter' R a).chain R a</code> if <code>R</code> is reflexive, which is often not the case for these usecases).</p>



<a name="271974922"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/name%20for%20%60erase_dup%60/near/271974922" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/name.20for.20.60erase_dup.60.html#271974922">(Feb 15 2022 at 13:44)</a>:</h4>
<p>It seems like we should rename <code>erase_dup</code> to <code>dedup</code> if we're going to call it <code>destutter</code></p>



<a name="271975300"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/name%20for%20%60erase_dup%60/near/271975300" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/name.20for.20.60erase_dup.60.html#271975300">(Feb 15 2022 at 13:47)</a>:</h4>
<p>Is dedup currently the property of being equal to your own erase_dup?</p>



<a name="271975376"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/name%20for%20%60erase_dup%60/near/271975376" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/name.20for.20.60erase_dup.60.html#271975376">(Feb 15 2022 at 13:48)</a>:</h4>
<p>Also, what's the difference between pw_filter (≠) and erase_dup? Maybe that's the correct way, just use the more general</p>



<a name="271975615"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/name%20for%20%60erase_dup%60/near/271975615" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/name.20for.20.60erase_dup.60.html#271975615">(Feb 15 2022 at 13:49)</a>:</h4>
<p>No, that's <code>nodup</code></p>



<a name="271975759"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/name%20for%20%60erase_dup%60/near/271975759" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/name.20for.20.60erase_dup.60.html#271975759">(Feb 15 2022 at 13:50)</a>:</h4>
<p><a href="https://leanprover-community.github.io/mathlib_docs/find/list.erase_dup">docs#list.erase_dup</a> is <em>defined</em> as <code>pw_filter (≠)</code></p>



<a name="271976112"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/name%20for%20%60erase_dup%60/near/271976112" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/name.20for.20.60erase_dup.60.html#271976112">(Feb 15 2022 at 13:53)</a>:</h4>
<p>why do we keep it around then?</p>



<a name="271976150"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/name%20for%20%60erase_dup%60/near/271976150" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/name.20for.20.60erase_dup.60.html#271976150">(Feb 15 2022 at 13:53)</a>:</h4>
<p>because it's very common?</p>



<a name="271986739"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/name%20for%20%60erase_dup%60/near/271986739" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/name.20for.20.60erase_dup.60.html#271986739">(Feb 15 2022 at 15:03)</a>:</h4>
<p><span class="user-mention silent" data-user-id="310045">Eric Wieser</span> <a href="#narrow/stream/113488-general/topic/name.20for.20.60erase_dup.60/near/271974922">said</a>:</p>
<blockquote>
<p>It seems like we should rename <code>erase_dup</code> to <code>dedup</code> if we're going to call it <code>destutter</code></p>
</blockquote>
<p><a href="https://github.com/leanprover-community/mathlib/pull/12057">#12057</a></p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>