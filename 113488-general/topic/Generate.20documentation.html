---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/Generate.20documentation.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Generate.20documentation.html">Generate documentation</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="168591196"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Generate%20documentation/near/168591196" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Björn Fischer <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Generate.20documentation.html#168591196">(Jun 20 2019 at 12:40)</a>:</h4>
<p>I see there is a <code>--doc</code> command line argument in Lean. But when I try it the resulting file is entirely empty. Is there a trick to it? Or other options to generate docs?</p>



<a name="168591249"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Generate%20documentation/near/168591249" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Generate.20documentation.html#168591249">(Jun 20 2019 at 12:41)</a>:</h4>
<p>I think it's just broken</p>



<a name="168605751"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Generate%20documentation/near/168605751" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Simon Hudon <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Generate.20documentation.html#168605751">(Jun 20 2019 at 15:26)</a>:</h4>
<p><span class="user-mention" data-user-id="198384">@Björn Fischer</span> Can you file an issue on <code>leanprover-community/lean</code>?</p>



<a name="168605845"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Generate%20documentation/near/168605845" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Björn Fischer <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Generate.20documentation.html#168605845">(Jun 20 2019 at 15:27)</a>:</h4>
<p><span class="user-mention" data-user-id="110032">@Reid Barton</span>  Thanks!</p>



<a name="168605925"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Generate%20documentation/near/168605925" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Björn Fischer <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Generate.20documentation.html#168605925">(Jun 20 2019 at 15:28)</a>:</h4>
<p><span class="user-mention" data-user-id="110026">@Simon Hudon</span> Sure! In the meantime, is there any working library to generate docs out there?</p>



<a name="168606284"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Generate%20documentation/near/168606284" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Simon Hudon <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Generate.20documentation.html#168606284">(Jun 20 2019 at 15:32)</a>:</h4>
<p>I know <span class="user-mention" data-user-id="143402">@matt rice</span> is working on something but I don't know what the status is</p>



<a name="168608094"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Generate%20documentation/near/168608094" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Simon Hudon <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Generate.20documentation.html#168608094">(Jun 20 2019 at 15:52)</a>:</h4>
<p>What happens if you use </p>
<div class="codehilite"><pre><span></span><span class="c">/-</span><span class="cm">- docs for the win! -/</span>
<span class="kn">lemma</span> <span class="n">abc</span> <span class="o">:</span> <span class="n">true</span> <span class="o">:=</span> <span class="n">true</span><span class="bp">.</span><span class="n">intro</span>
</pre></div>


<p>instead of </p>
<div class="codehilite"><pre><span></span><span class="c">/-</span><span class="cm"> docs for the win! -/</span>
<span class="kn">lemma</span> <span class="n">abc</span> <span class="o">:</span> <span class="n">true</span> <span class="o">:=</span> <span class="n">true</span><span class="bp">.</span><span class="n">intro</span>
</pre></div>



<a name="168608407"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Generate%20documentation/near/168608407" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Björn Fischer <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Generate.20documentation.html#168608407">(Jun 20 2019 at 15:55)</a>:</h4>
<p>same behavior</p>



<a name="168623584"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Generate%20documentation/near/168623584" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> matt rice <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Generate.20documentation.html#168623584">(Jun 20 2019 at 18:54)</a>:</h4>
<p><span class="user-mention" data-user-id="198384">@Björn Fischer</span> The documentation generator i've been working on is <a href="https://github.com/ratmice/lumpy-leandoc/" target="_blank" title="https://github.com/ratmice/lumpy-leandoc/">here</a> it currently works on linux, and can generate the mathlib documentation, the output could use some work (i.e. it doesn't yet output type information, and is sometimes not pretty).  Haven't managed to test it on windows yet, the file path handling is subtle in a way that may lead to empty output.</p>



<a name="168666241"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Generate%20documentation/near/168666241" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Björn Fischer <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Generate.20documentation.html#168666241">(Jun 21 2019 at 09:05)</a>:</h4>
<p><span class="user-mention" data-user-id="143402">@matt rice</span> Awesome! Just tested it successfully on Linux.</p>



<a name="169483018"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Generate%20documentation/near/169483018" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Generate.20documentation.html#169483018">(Jul 02 2019 at 14:01)</a>:</h4>
<p><span class="user-mention" data-user-id="143402">@matt rice</span> I tried to install <code>lumpy-leandoc</code> but the cargo command fails with message</p>
<div class="codehilite"><pre><span></span>error: failed to run custom build command for `tectonic v0.1.11`
process didn&#39;t exit successfully: `/tmp/cargo-installbDfJsx/release/build/tectonic-f11d59dd300c8949/build-script-build` (exit code: 101)
--- stderr
thread &#39;main&#39; panicked at &#39;called `Result::unwrap()` on an `Err` value: Failure { command: &quot;\&quot;pkg-config\&quot; \&quot;--libs\&quot; \&quot;--cflags\&quot; \&quot;fontconfig harfbuzz &gt;= 1.4 harfbuzz-icu icu-uc freetype2 graphite2 libpng zlib\&quot;&quot;, output: Output { status: ExitStatus(ExitStatus(256)), stdout: &quot;&quot;, stderr: &quot;Package harfbuzz was not found in the pkg-config search path.\nPerhaps you should add the directory containing `harfbuzz.pc\&#39;\nto the PKG_CONFIG_PATH environment variable\nNo package \&#39;harfbuzz\&#39; found\nPackage harfbuzz-icu was not found in the pkg-config search path.\nPerhaps you should add the directory containing `harfbuzz-icu.pc\&#39;\nto the PKG_CONFIG_PATH environment variable\nNo package \&#39;harfbuzz-icu\&#39; found\nPackage graphite2 was not found in the pkg-config search path.\nPerhaps you should add the directory containing `graphite2.pc\&#39;\nto the PKG_CONFIG_PATH environment variable\nNo package \&#39;graphite2\&#39; found\n&quot; } }&#39;, src/libcore/result.rs:997:5
note: Run with `RUST_BACKTRACE=1` environment variable to display a backtrace.

warning: build failed, waiting for other jobs to finish...
</pre></div>


<p>This is using a freshly installed rust. I'm trying to flush my pile of cool things to look at (that's why I'm also pestering Bryan). Also is there any news regarding a more structure output than LaTeX? What about HTML output?</p>



<a name="169495229"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Generate%20documentation/near/169495229" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> matt rice <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Generate.20documentation.html#169495229">(Jul 02 2019 at 16:26)</a>:</h4>
<p><span class="user-mention" data-user-id="110031">@Patrick Massot</span>  It depends, which linux &amp; what version, but with a new enough debian/ubuntu, apt-get install libharfbuzz-dev should bring in all the needed dependencies, there is work in a branch to build that at compile time if not available, but it's not ready yet</p>



<a name="169495428"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Generate%20documentation/near/169495428" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> matt rice <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Generate.20documentation.html#169495428">(Jul 02 2019 at 16:29)</a>:</h4>
<p>As far as HTML output, it shouldn't be hard (in theory easier than latex), both the dependencies syntect and pulldown_cmark have functions to output HTML, the main issue is IIUC they want to output an entire html file per markdown which means a file per def which is an annoying number of files</p>



<a name="169495673"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Generate%20documentation/near/169495673" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Generate.20documentation.html#169495673">(Jul 02 2019 at 16:32)</a>:</h4>
<p>One file per def is not unreasonable if you are displaying proofs</p>



<a name="169496465"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Generate%20documentation/near/169496465" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> matt rice <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Generate.20documentation.html#169496465">(Jul 02 2019 at 16:40)</a>:</h4>
<p>Well, if that is wanted it should be a fairly small patch...</p>
<p>Edit: I should clarify that this wouldn't give any of the inline TeX via KaTeX/MathJax, there is a plan for how to do it, but is a lot of work involved.</p>



<a name="169646547"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Generate%20documentation/near/169646547" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Generate.20documentation.html#169646547">(Jul 04 2019 at 13:04)</a>:</h4>
<p>Thanks <span class="user-mention" data-user-id="143402">@matt rice</span> installing <code>libharfbuzz-dev</code> was enough to compile <code>lumpy-leandoc</code>. I think it would help to add this to the <a href="https://github.com/ratmice/lumpy-leandoc/blob/master/README.md" target="_blank" title="https://github.com/ratmice/lumpy-leandoc/blob/master/README.md">README</a>. Then I tried to run this on the <a href="https://github.com/leanprover-community/lean-perfectoid-spaces" target="_blank" title="https://github.com/leanprover-community/lean-perfectoid-spaces">perfectoid project</a> using this <code>Lumpy.toml</code>:</p>
<div class="codehilite"><pre><span></span>[[documents]]
title = &quot;Example&quot;
file_name = &quot;examples&quot;
authors = [&quot;Kevin Buzzard&quot;, &quot;Johan Commelin&quot;, &quot;Patrick Massot&quot;]
src_dirs = [&quot;src/.&quot;]
output_dir = &quot;docs_out/&quot;
output_formats = [&quot;tex&quot;, &quot;pdf&quot;]
comment_format = &quot;cmark&quot;
</pre></div>


<p>The result was that <code>lumpy-leandoc</code> displayed</p>
<div class="codehilite"><pre><span></span>[2019-07-04T12:52:34Z INFO  lumpy_leandoc] Elapsed=921.888182ms, process lean
[2019-07-04T12:52:34Z INFO  lumpy_leandoc] Elapsed=647.134µs, sorting, sections examples.tex
[2019-07-04T12:52:34Z INFO  lumpy_leandoc] Elapsed=117.504µs, collating, sections examples.tex
[2019-07-04T12:52:34Z INFO  lumpy_leandoc] Elapsed=120.497µs, writing, examples.tex
</pre></div>


<p>then hanged for a very long time, but created some <code>examples.tex</code>. And after a long time:</p>
<div class="codehilite"><pre><span></span>[2019-07-04T13:00:37Z INFO  lumpy_leandoc] Elapsed=482.614324169s, generate, examples.pdf
Error: Error(Msg(&quot;the LaTeX engine failed&quot;), State { next_error: Some(Error(EngineError(&quot;TeX&quot;), State { next_error: Some(Error(Msg(&quot;halted on potentially-recoverable error as specified&quot;), State { next_error: None, backtrace: InternalBacktrace { backtrace: None } })), backtrace: InternalBacktrace { backtrace: None } })), backtrace: InternalBacktrace { backtrace: None } })
</pre></div>


<p>Note that <code>examples.tex</code> is not correct because the author field was missing spaces after <code>\and</code>. After fixing this by hand, one can compile the tex file but it's almost empty: <a href="/user_uploads/3121/RT-3kzXBhFxwo57M17GawTvW/examples.pdf" target="_blank" title="examples.pdf">examples.pdf</a></p>



<a name="169646924"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Generate%20documentation/near/169646924" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Generate.20documentation.html#169646924">(Jul 04 2019 at 13:09)</a>:</h4>
<p>Looking back at the example file in lumpy-leandoc, maybe the fact the output is almost empty is normal. I saw Lean code in the example, but that is actually also from the docstring. So we get only docstring in the output, right?</p>



<a name="169647087"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Generate%20documentation/near/169647087" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Generate.20documentation.html#169647087">(Jul 04 2019 at 13:11)</a>:</h4>
<p>Is there any option to render also Lean code, at least definitions and statements?</p>



<a name="169647288"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Generate%20documentation/near/169647288" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Generate.20documentation.html#169647288">(Jul 04 2019 at 13:14)</a>:</h4>
<p>Or maybe I completely misunderstood the project. I thought the idea was to get the analogue of <a href="http://math-comp.github.io/math-comp/htmldoc/mathcomp.field.galois.html" target="_blank" title="http://math-comp.github.io/math-comp/htmldoc/mathcomp.field.galois.html">math-comp.github.io/math-comp/htmldoc/mathcomp.field.galois.html</a></p>



<a name="169655952"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Generate%20documentation/near/169655952" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> matt rice <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Generate.20documentation.html#169655952">(Jul 04 2019 at 15:23)</a>:</h4>
<p>Thanks, I will have a look at the error (and see if perhaps there isn't a timeout I can lessen), Currently it only output's docstrings and function names.  I was going to include definitions by default (just haven't gotten to it yet), statements may not be possible as lean only allows docstrings on definitions as far as I can tell.  I was planning on adding an "annotate = true" setting to the Lumpy.toml which would generate annotated sources such as you linked.</p>



<a name="169656067"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Generate%20documentation/near/169656067" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Generate.20documentation.html#169656067">(Jul 04 2019 at 15:24)</a>:</h4>
<p>Ok, I'll be happy to test any new version, and I hope you'll get extra motivation from this</p>



<a name="169656100"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Generate%20documentation/near/169656100" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Generate.20documentation.html#169656100">(Jul 04 2019 at 15:25)</a>:</h4>
<p>I also ordered a book about Rust, as it seems knowing Rust is more and more a prerequisite for using Lean</p>



<a name="169656177"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Generate%20documentation/near/169656177" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> matt rice <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Generate.20documentation.html#169656177">(Jul 04 2019 at 15:26)</a>:</h4>
<p>Appreciate the feedback!  Looking at the output it seemed like the index was filled with a lot of empty files with no docstrings, I should probably squelch those I imagine?</p>



<a name="169656208"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Generate%20documentation/near/169656208" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Generate.20documentation.html#169656208">(Jul 04 2019 at 15:27)</a>:</h4>
<p>Indeed there are not very useful, except they remind us that we should write more docstrings!</p>



<a name="169656216"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Generate%20documentation/near/169656216" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> matt rice <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Generate.20documentation.html#169656216">(Jul 04 2019 at 15:27)</a>:</h4>
<p>yeah, that's why i had left them in.</p>



<a name="169656262"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Generate%20documentation/near/169656262" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Generate.20documentation.html#169656262">(Jul 04 2019 at 15:28)</a>:</h4>
<p>Maybe you could output a warning when running lumpy-leandoc, saying we should write docstrings, but remove them from the output document</p>



<a name="169656290"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Generate%20documentation/near/169656290" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> matt rice <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Generate.20documentation.html#169656290">(Jul 04 2019 at 15:29)</a>:</h4>
<p>Thanks, good idea.</p>



<a name="169664020"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Generate%20documentation/near/169664020" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> matt rice <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Generate.20documentation.html#169664020">(Jul 04 2019 at 18:09)</a>:</h4>
<p><span class="user-mention" data-user-id="110031">@Patrick Massot</span> I haven't been able to reproduce the long wait for that error message, It takes only a few seconds here, I'm wondering after fixing that do you still see the long runtime?</p>
<p>Edit: This appears to be an issue with the downloading of latex packages (perhaps a hosting issue), I reproduced it by removing ~/.cache/Tectonic.</p>



<a name="169735341"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Generate%20documentation/near/169735341" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wojciech Nawrocki <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Generate.20documentation.html#169735341">(Jul 05 2019 at 20:53)</a>:</h4>
<p>I looked at this today and it turned out that almost all doc-generation infrastructure for <code>--doc=</code> is already there in Lean. It was only missing a few parts, so I added them in <a href="https://github.com/leanprover-community/lean/pull/54" target="_blank" title="https://github.com/leanprover-community/lean/pull/54">a PR</a>. At the same time, I have no idea what I'm doing so this might well halt and catch fire (although it seems to work in my tests).</p>



<a name="169826737"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Generate%20documentation/near/169826737" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> matt rice <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Generate.20documentation.html#169826737">(Jul 07 2019 at 21:12)</a>:</h4>
<p><span class="user-mention" data-user-id="128280">@Wojciech Nawrocki</span> Sorry for delay in responding to this, i have been attempting to compile mathlib w/ your patches but haven't had much luck.  <code>leanpkg build -- --doc=doc.json</code> eventually uses up all my memory/swap and stops making any timely forward progress (completes without the --doc setting).  Currently trying something like <code>for file in $(find src -name "*.lean"); do lean --make $file --doc="$(basename $file .lean).leandoc_json"; done</code> which if i got that right might finish.</p>



<a name="169826937"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Generate%20documentation/near/169826937" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wojciech Nawrocki <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Generate.20documentation.html#169826937">(Jul 07 2019 at 21:19)</a>:</h4>
<p>Thanks! I'll look into the memory consumption issue. For now I'd advise against spending a lot of time testing these patches, since I simply coded the first thing that worked for simple test cases. Instead, I will now try to better understand how <code>documentation_ext</code>/<code>module_ext</code> are supposed to work and write something to match that.</p>



<a name="169827027"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Generate%20documentation/near/169827027" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wojciech Nawrocki <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Generate.20documentation.html#169827027">(Jul 07 2019 at 21:22)</a>:</h4>
<p>Oh and yeah, currently <code>lean --make --doc=doc.json</code> will put O(<code>n_docstrings_in_mathlib</code>*<code>n_modules_in_mathlib</code>) fields in one file, which is completely unnecessary - it should only output docs for each module once. This is what I am looking into now.</p>



<a name="169827082"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Generate%20documentation/near/169827082" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> matt rice <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Generate.20documentation.html#169827082">(Jul 07 2019 at 21:24)</a>:</h4>
<p>Ahh, I am mainly trying with mathlib since it has the most real docstrings to parse.  Anyhow once i get some output to work with i'll try working on parsing the json in lumpy-leandoc</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>