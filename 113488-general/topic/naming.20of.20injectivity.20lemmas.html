---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/naming.20of.20injectivity.20lemmas.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/naming.20of.20injectivity.20lemmas.html">naming of injectivity lemmas</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="200626959"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/naming%20of%20injectivity%20lemmas/near/200626959" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/naming.20of.20injectivity.20lemmas.html#200626959">(Jun 12 2020 at 01:32)</a>:</h4>
<p>I'd like to bring a bit of order to the naming of injectivity lemmas. Currently in mathlib lemmas with names ending in <code>_inj</code> come in three flavours</p>
<ol>
<li><code>f x = f y → x = y</code></li>
<li><code>f x = f y ↔ x = y</code></li>
<li><code>injective f</code></li>
</ol>
<p>There are also lemmas automatically generated for constructors of inductive types, which are of type 1, but with names ending <code>.inj</code>.<br>
There are also some lemmas in mathlib of type 2, but with names ending <code>_inj_iff</code>.</p>



<a name="200627053"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/naming%20of%20injectivity%20lemmas/near/200627053" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/naming.20of.20injectivity.20lemmas.html#200627053">(Jun 12 2020 at 01:34)</a>:</h4>
<p>And also lemmas of type 3 with <code>injective</code> in the name!</p>



<a name="200627082"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/naming%20of%20injectivity%20lemmas/near/200627082" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/naming.20of.20injectivity.20lemmas.html#200627082">(Jun 12 2020 at 01:35)</a>:</h4>
<p>also a few stragglers, like type 2 lemmas with LHS and RHS reversed...</p>



<a name="200627171"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/naming%20of%20injectivity%20lemmas/near/200627171" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/naming.20of.20injectivity.20lemmas.html#200627171">(Jun 12 2020 at 01:37)</a>:</h4>
<p>Proposals, in descending order of appeal to me:</p>
<ol>
<li>all iff lemmas get renamed to use <code>inj_iff</code></li>
<li>where possible change <code>_inj</code> to <code>.inj</code> and <code>_inj_iff</code> to <code>.inj_iff</code></li>
<li>rename all injective lemmas to use the full word <code>injective</code> in the name (alternatively, change them all to just <code>inj</code>, and not distinguish types 1 and 2)</li>
</ol>



<a name="200627255"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/naming%20of%20injectivity%20lemmas/near/200627255" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/naming.20of.20injectivity.20lemmas.html#200627255">(Jun 12 2020 at 01:38)</a>:</h4>
<p>Proposal 2 to appealing because:</p>
<ul>
<li>it would match the automatically generated <code>.inj</code> lemmas for constructors</li>
<li>it would make it easier for <code>library_search</code> to discard these lemmas (which are rarely useful), without having to process strings (which is too slow).</li>
</ul>



<a name="200628143"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/naming%20of%20injectivity%20lemmas/near/200628143" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/naming.20of.20injectivity.20lemmas.html#200628143">(Jun 12 2020 at 02:01)</a>:</h4>
<p>The naming convention here is supposed to use <code>inj</code> exclusively for (1) or (2) and <code>injective</code> for (3)</p>



<a name="200628231"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/naming%20of%20injectivity%20lemmas/near/200628231" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/naming.20of.20injectivity.20lemmas.html#200628231">(Jun 12 2020 at 02:03)</a>:</h4>
<p>Probably we are being inconsistent about use of <code>inj_iff</code> but I would prefer to use <code>inj_iff</code> iff both versions (1) and (2) exist</p>



<a name="200628235"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/naming%20of%20injectivity%20lemmas/near/200628235" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/naming.20of.20injectivity.20lemmas.html#200628235">(Jun 12 2020 at 02:03)</a>:</h4>
<p>if only (2) exists then there is no problem and we can use <code>inj</code></p>



<a name="200628275"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/naming%20of%20injectivity%20lemmas/near/200628275" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/naming.20of.20injectivity.20lemmas.html#200628275">(Jun 12 2020 at 02:04)</a>:</h4>
<p>I think most instances of (1) are inherited from core</p>



<a name="200628295"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/naming%20of%20injectivity%20lemmas/near/200628295" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/naming.20of.20injectivity.20lemmas.html#200628295">(Jun 12 2020 at 02:05)</a>:</h4>
<p>It seems odd to throw these theorems out though. They don't appear to be any less useful than any other basic algebra lemmas</p>



<a name="200628311"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/naming%20of%20injectivity%20lemmas/near/200628311" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/naming.20of.20injectivity.20lemmas.html#200628311">(Jun 12 2020 at 02:05)</a>:</h4>
<p>It's true that they aren't well suited for backwards reasoning but that shouldn't be a problem for <code>library_search</code> which is only looking for one step proofs in any case</p>



<a name="200629105"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/naming%20of%20injectivity%20lemmas/near/200629105" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/naming.20of.20injectivity.20lemmas.html#200629105">(Jun 12 2020 at 02:22)</a>:</h4>
<p>I wasn't proposing throwing anything out, just renaming.</p>



<a name="200629139"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/naming%20of%20injectivity%20lemmas/near/200629139" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/naming.20of.20injectivity.20lemmas.html#200629139">(Jun 12 2020 at 02:23)</a>:</h4>
<p>Maybe I will start with the low hanging fruit: using <code>injective</code> in the name if and only if the conclusion has <code>injective</code>.</p>



<a name="200629227"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/naming%20of%20injectivity%20lemmas/near/200629227" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/naming.20of.20injectivity.20lemmas.html#200629227">(Jun 12 2020 at 02:25)</a>:</h4>
<p>To clarify the "no throwing out" agenda, my preference would be that every <code>iff</code> injectivity lemma was renamed to to contain <code>inj_iff</code>, for consistency, and that typically (always?) the corresponding unidirectional <code>inj</code> lemma exists as well.</p>



<a name="200629295"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/naming%20of%20injectivity%20lemmas/near/200629295" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/naming.20of.20injectivity.20lemmas.html#200629295">(Jun 12 2020 at 02:26)</a>:</h4>
<p>Regarding <code>injective</code> lemmas, we seem to be very inconsistent between <code>X_injective</code>, <code>injective_X</code>, and sometimes also <code>X.injective</code>.</p>



<a name="200629296"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/naming%20of%20injectivity%20lemmas/near/200629296" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/naming.20of.20injectivity.20lemmas.html#200629296">(Jun 12 2020 at 02:26)</a>:</h4>
<p>What is best?</p>



<a name="200629326"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/naming%20of%20injectivity%20lemmas/near/200629326" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/naming.20of.20injectivity.20lemmas.html#200629326">(Jun 12 2020 at 02:27)</a>:</h4>
<p>Why not reformulate <code>f x = f y → x = y</code> as <code>injective f</code>?</p>



<a name="200629368"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/naming%20of%20injectivity%20lemmas/near/200629368" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/naming.20of.20injectivity.20lemmas.html#200629368">(Jun 12 2020 at 02:28)</a>:</h4>
<p>It's almost the same (<code>injective</code> uses <code>{{x y}}</code>)</p>



<a name="200629977"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/naming%20of%20injectivity%20lemmas/near/200629977" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/naming.20of.20injectivity.20lemmas.html#200629977">(Jun 12 2020 at 02:42)</a>:</h4>
<p>there are various reasons why you might want that syntactic form</p>



<a name="200629986"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/naming%20of%20injectivity%20lemmas/near/200629986" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/naming.20of.20injectivity.20lemmas.html#200629986">(Jun 12 2020 at 02:42)</a>:</h4>
<p>for one thing, if <code>f</code> would be a lambda then this doesn't come out very cleanly</p>



<a name="200629989"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/naming%20of%20injectivity%20lemmas/near/200629989" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/naming.20of.20injectivity.20lemmas.html#200629989">(Jun 12 2020 at 02:42)</a>:</h4>
<p>for example <code>a + b = a + c -&gt; b = c</code></p>



<a name="200630075"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/naming%20of%20injectivity%20lemmas/near/200630075" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/naming.20of.20injectivity.20lemmas.html#200630075">(Jun 12 2020 at 02:44)</a>:</h4>
<blockquote>
<p>To clarify the "no throwing out" agenda, my preference would be that every iff injectivity lemma was renamed to to contain inj_iff, for consistency, and that typically (always?) the corresponding unidirectional inj lemma exists as well.</p>
</blockquote>
<p>I'm arguing for the opposite of this: get rid of the unidirectional lemmas and call all the iff statements <code>inj</code></p>



<a name="200630106"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/naming%20of%20injectivity%20lemmas/near/200630106" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/naming.20of.20injectivity.20lemmas.html#200630106">(Jun 12 2020 at 02:45)</a>:</h4>
<p>I'm not sure what the argument for the unidirectional versions is</p>



<a name="200630158"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/naming%20of%20injectivity%20lemmas/near/200630158" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/naming.20of.20injectivity.20lemmas.html#200630158">(Jun 12 2020 at 02:46)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110087">Scott Morrison</span> <a href="#narrow/stream/113488-general/topic/naming.20of.20injectivity.20lemmas/near/200629295">said</a>:</p>
<blockquote>
<p>Regarding <code>injective</code> lemmas, we seem to be very inconsistent between <code>X_injective</code>, <code>injective_X</code>, and sometimes also <code>X.injective</code>.</p>
</blockquote>
<p>I have a preference for <code>X_injective</code>, but I recognize that the symbol reading convention would have us name it <code>injective_X</code></p>



<a name="200630163"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/naming%20of%20injectivity%20lemmas/near/200630163" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/naming.20of.20injectivity.20lemmas.html#200630163">(Jun 12 2020 at 02:47)</a>:</h4>
<p>I think <code>X_injective</code> yields better autocomplete</p>



<a name="200630169"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/naming%20of%20injectivity%20lemmas/near/200630169" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/naming.20of.20injectivity.20lemmas.html#200630169">(Jun 12 2020 at 02:47)</a>:</h4>
<p>I like <code>X_injective</code>, too.</p>



<a name="200630214"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/naming%20of%20injectivity%20lemmas/near/200630214" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/naming.20of.20injectivity.20lemmas.html#200630214">(Jun 12 2020 at 02:48)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110087">Scott Morrison</span> <a href="#narrow/stream/113488-general/topic/naming.20of.20injectivity.20lemmas/near/200629105">said</a>:</p>
<blockquote>
<p>I wasn't proposing throwing anything out, just renaming.</p>
</blockquote>
<p>I mean throwing out of the strike zone of <code>library_search</code></p>



<a name="200630220"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/naming%20of%20injectivity%20lemmas/near/200630220" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/naming.20of.20injectivity.20lemmas.html#200630220">(Jun 12 2020 at 02:48)</a>:</h4>
<p>isn't that what you are proposing? You want a way to filter these lemmas by name</p>



<a name="200630227"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/naming%20of%20injectivity%20lemmas/near/200630227" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/naming.20of.20injectivity.20lemmas.html#200630227">(Jun 12 2020 at 02:48)</a>:</h4>
<p>Okay --- getting rid of unidirectional lemmas sounds like a great idea, except for the fact that inductive types build these automatically.</p>



<a name="200630235"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/naming%20of%20injectivity%20lemmas/near/200630235" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/naming.20of.20injectivity.20lemmas.html#200630235">(Jun 12 2020 at 02:49)</a>:</h4>
<p>the builtin ones for constructors are fine</p>



<a name="200630243"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/naming%20of%20injectivity%20lemmas/near/200630243" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/naming.20of.20injectivity.20lemmas.html#200630243">(Jun 12 2020 at 02:49)</a>:</h4>
<p>they are well namespaced and required for some automatic constructions so we can't touch them</p>



<a name="200630252"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/naming%20of%20injectivity%20lemmas/near/200630252" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/naming.20of.20injectivity.20lemmas.html#200630252">(Jun 12 2020 at 02:49)</a>:</h4>
<p>Ah, I see. Yes. I've just never seen an useful case where you want <code>library_search</code> to find an <code>inj</code> lemma, and the problem is that they always apply on any <code>eq</code> goal, and then <code>solve_by_elim</code> wastes time on the subsequent goals.</p>



<a name="200630302"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/naming%20of%20injectivity%20lemmas/near/200630302" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/naming.20of.20injectivity.20lemmas.html#200630302">(Jun 12 2020 at 02:50)</a>:</h4>
<p>I tried dropping all <code>.inj</code> lemmas (which you can do without processing strings), and it slightly speeds up the test file.</p>



<a name="200630318"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/naming%20of%20injectivity%20lemmas/near/200630318" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/naming.20of.20injectivity.20lemmas.html#200630318">(Jun 12 2020 at 02:51)</a>:</h4>
<p>I would prefer something a bit more agnostic. For example, if application of the lemma yields a subgoal with metavariables, then all goals must be achievable by <code>assumption</code></p>



<a name="200630369"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/naming%20of%20injectivity%20lemmas/near/200630369" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/naming.20of.20injectivity.20lemmas.html#200630369">(Jun 12 2020 at 02:52)</a>:</h4>
<p>So it seems we are converging on the following:</p>
<ol>
<li>lemmas should have <code>injective</code> in the name iff they have <code>injective</code> in the conclusion</li>
<li><code>X_injective</code> is preferable to <code>injective_X</code>.</li>
<li>Dropping unidirectional <code>inj</code> lemmas in favour of bidirectional ones.</li>
</ol>



<a name="200630382"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/naming%20of%20injectivity%20lemmas/near/200630382" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/naming.20of.20injectivity.20lemmas.html#200630382">(Jun 12 2020 at 02:53)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110049">Mario Carneiro</span> <a href="#narrow/stream/113488-general/topic/naming.20of.20injectivity.20lemmas/near/200630318">said</a>:</p>
<blockquote>
<p>I would prefer something a bit more agnostic. For example, if application of the lemma yields a subgoal with metavariables, then all goals must be achievable by <code>assumption</code></p>
</blockquote>
<p>Here you're saying in particular "by <code>assumption</code>" as opposed to <code>solve_by_elim</code>?</p>



<a name="200630443"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/naming%20of%20injectivity%20lemmas/near/200630443" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/naming.20of.20injectivity.20lemmas.html#200630443">(Jun 12 2020 at 02:54)</a>:</h4>
<p>yes</p>



<a name="200630445"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/naming%20of%20injectivity%20lemmas/near/200630445" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/naming.20of.20injectivity.20lemmas.html#200630445">(Jun 12 2020 at 02:54)</a>:</h4>
<p>as in, no multi step proofs</p>



<a name="200630503"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/naming%20of%20injectivity%20lemmas/near/200630503" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/naming.20of.20injectivity.20lemmas.html#200630503">(Jun 12 2020 at 02:56)</a>:</h4>
<p>You might have to do something slightly more complicated than straight <code>assumption</code> since you may have to try different assumptions in order to make the other hypotheses work</p>



<a name="200630508"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/naming%20of%20injectivity%20lemmas/near/200630508" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/naming.20of.20injectivity.20lemmas.html#200630508">(Jun 12 2020 at 02:56)</a>:</h4>
<p>but you're only wanting this restriction if there is a subgoal with metavariables? I don't think I'm understanding the motivation here.</p>



<a name="200630527"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/naming%20of%20injectivity%20lemmas/near/200630527" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/naming.20of.20injectivity.20lemmas.html#200630527">(Jun 12 2020 at 02:57)</a>:</h4>
<p>The right way to test <code>f x = f y -&gt; x = y</code> against the current goal is to match <code>f x = f y</code> against the hypothesis and then match the goal</p>



<a name="200630529"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/naming%20of%20injectivity%20lemmas/near/200630529" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/naming.20of.20injectivity.20lemmas.html#200630529">(Jun 12 2020 at 02:57)</a>:</h4>
<p>i.e. it is a forward reasoning step not backward</p>



<a name="200630580"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/naming%20of%20injectivity%20lemmas/near/200630580" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/naming.20of.20injectivity.20lemmas.html#200630580">(Jun 12 2020 at 02:58)</a>:</h4>
<p>yes --- that's why I was thinking injectivity lemmas are generally outside the purview of <code>library_search</code></p>



<a name="200630584"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/naming%20of%20injectivity%20lemmas/near/200630584" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/naming.20of.20injectivity.20lemmas.html#200630584">(Jun 12 2020 at 02:58)</a>:</h4>
<p>but since <code>library_search</code> is set up to do backward reasoning, the nearest approximation to this is to switch to forward reasoning mode if it looks like backward reasoning isn't going so well</p>



<a name="200630590"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/naming%20of%20injectivity%20lemmas/near/200630590" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/naming.20of.20injectivity.20lemmas.html#200630590">(Jun 12 2020 at 02:58)</a>:</h4>
<p>most of the bidirectional <code>inj</code> lemmas should probably be <code>@[simp]</code>, and you shouldn't be resorting to <code>library_search</code> until after <code>simp</code> is done.</p>



<a name="200630599"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/naming%20of%20injectivity%20lemmas/near/200630599" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/naming.20of.20injectivity.20lemmas.html#200630599">(Jun 12 2020 at 02:59)</a>:</h4>
<p>true, but I'm imagining a situation where the user has actually typed <code>theorem foo (h : f x = f y) : x = y := by library_search</code></p>



<a name="200630602"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/naming%20of%20injectivity%20lemmas/near/200630602" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/naming.20of.20injectivity.20lemmas.html#200630602">(Jun 12 2020 at 02:59)</a>:</h4>
<p>ah, okay</p>



<a name="200641686"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/naming%20of%20injectivity%20lemmas/near/200641686" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/naming.20of.20injectivity.20lemmas.html#200641686">(Jun 12 2020 at 07:37)</a>:</h4>
<p>Whatever you decide and refactor here, it would be nice to remember to add it to the naming convention guide.</p>



<a name="200799599"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/naming%20of%20injectivity%20lemmas/near/200799599" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/naming.20of.20injectivity.20lemmas.html#200799599">(Jun 14 2020 at 04:28)</a>:</h4>
<p>I haven't actually got very far on the mathlib refactor, but I've recorded the ideas here in <a href="https://github.com/leanprover-community/leanprover-community.github.io/pull/60">https://github.com/leanprover-community/leanprover-community.github.io/pull/60</a>.</p>



<a name="200799736"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/naming%20of%20injectivity%20lemmas/near/200799736" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/naming.20of.20injectivity.20lemmas.html#200799736">(Jun 14 2020 at 04:32)</a>:</h4>
<p>It looks like that file could use some general cleanup. There's some duplication within the file and also with <a href="https://leanprover-community.github.io/contribute/style.html">https://leanprover-community.github.io/contribute/style.html</a></p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>