---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/Beautiful.20proof.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Beautiful.20proof.html">Beautiful proof</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="207142817"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Beautiful%20proof/near/207142817" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jacques Carette <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Beautiful.20proof.html#207142817">(Aug 17 2020 at 13:22)</a>:</h4>
<p>I was leafing through the category_theory library, when I ran across this absolutely beautiful proof:<br>
<a href="https://github.com/leanprover-community/mathlib/blob/2a8d7f3e1e79646b2cc914c477f060123d871a25/src/category_theory/equivalence.lean#L126-L134">https://github.com/leanprover-community/mathlib/blob/2a8d7f3e1e79646b2cc914c477f060123d871a25/src/category_theory/equivalence.lean#L126-L134</a></p>
<p>Question: why isn't this equational style used more often?</p>



<a name="207145350"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Beautiful%20proof/near/207145350" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Beautiful.20proof.html#207145350">(Aug 17 2020 at 13:44)</a>:</h4>
<p>because most proofs can't be written in this manner? :-(</p>



<a name="207145365"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Beautiful%20proof/near/207145365" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ruben Van de Velde <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Beautiful.20proof.html#207145365">(Aug 17 2020 at 13:44)</a>:</h4>
<p>It's really nice - when it works, and the justifications for each step fit on a single line; it's somewhat less pretty otherwise. I suspect that may have something to do with it as well</p>



<a name="207145683"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Beautiful%20proof/near/207145683" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Beautiful.20proof.html#207145683">(Aug 17 2020 at 13:47)</a>:</h4>
<p>Interestingly this particular definition used to be written in a more compact style: <a href="https://github.com/leanprover-community/mathlib/commit/5e5298b9273b44aa06e3b30aa064cf866cd8152a">https://github.com/leanprover-community/mathlib/commit/5e5298b9273b44aa06e3b30aa064cf866cd8152a</a><br>
It was changed to add explicit unitor isomorphisms to reduce the dependence on definitional equality, and at the same time changed to <code>calc</code> style.</p>



<a name="207152091"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Beautiful%20proof/near/207152091" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jacques Carette <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Beautiful.20proof.html#207152091">(Aug 17 2020 at 14:43)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> I'm currently (and for many months now) formalizing category theory, where pretty much all proofs are of this kind, because they are all diagram chases. There are a couple hundred such proofs in agda-categories.  Some of my other work on generalized folds also can have all the proofs written that way.</p>
<p>This isn't a contradiction to your statement. Just that I expected so see more of that in category_theory.</p>
<p>Also, in Agda, because of dependent pattern matching, most proofs by cases / induction, are done "on the left", so that the right hand side frequently can become equational. It's interesting how the underlying features enable different proof styles.</p>
<p><span class="user-mention" data-user-id="110032">@Reid Barton</span> definitional equality is very interesting. Inside proofs, I likewise avoid relying on it. But you can't get away with that for various theorem statements.  We've had to adjust various definitions in agda-categories so that various constructions were such that "op op" was definitionally nothing (a 'no-op'...).  Various theorems in CT became awful monsters without that; still true, just a lot more convoluted.</p>



<a name="207153228"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Beautiful%20proof/near/207153228" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Beautiful.20proof.html#207153228">(Aug 17 2020 at 14:53)</a>:</h4>
<p>For proofs the <code>rw</code>/<code>simp</code> style is a lot more concise, and can potentially be automated completely.</p>



<a name="207153390"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Beautiful%20proof/near/207153390" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Beautiful.20proof.html#207153390">(Aug 17 2020 at 14:55)</a>:</h4>
<blockquote>
<p>most proofs by cases / induction, are done "on the left", so that the right hand side frequently can become equational</p>
</blockquote>
<p>What do you mean by this?</p>



<a name="207258697"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Beautiful%20proof/near/207258697" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jacques Carette <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Beautiful.20proof.html#207258697">(Aug 18 2020 at 13:26)</a>:</h4>
<p><span class="user-mention" data-user-id="110032">@Reid Barton</span> I mean that a <code>case</code> proof in Lean usually ends up being done by a (dependent) pattern-match in Agda, where you get a new case for your proof-function. Because the dependent pattern-match has exposed a lot of new information (in exactly the same way that <code>case</code> does), the rhs proof is much simpler. In constructive settings, I've found that after a bit of reduction, a lot of the proofs that I need to do are then equational in nature.  This is by no means a universal!</p>
<p>I guess I have been proving a whole lot of "X is equivalent to Y" type of theorems, so that surely has coloured my perception. [I did not realize that until now, so I'm happy that I have done so because of your question.]</p>
<p>Hmm, the vast majority of theorems in category theory boil down to "X is equivalent to Y". Even celebrated things like Yoneda and the Grothendieck construction first require a straightforward construction, and then some very thorny proof obligations that express that the construction really works, and really behaves nicely. All of which are diagram chases, i.e. 2D equations.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>