---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/replace.20goal.20with.20definition.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/replace.20goal.20with.20definition.html">replace goal with definition</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="261931443"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/replace%20goal%20with%20definition/near/261931443" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Leonard Wiechmann <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/replace.20goal.20with.20definition.html#261931443">(Nov 18 2021 at 14:09)</a>:</h4>
<p>This is something I run into again and again:<br>
Given a goal of some "non-trivial" form (eg: <code>A &lt;= B</code> for <code>A B : set α</code>),<br>
how do I make lean tell me what the goal means?</p>
<p>as in: how to replace the goal with its definition without knowing what the definition is?<br>
I've tried all kinds of rws/applys, but can't seem to figure out what <code>&lt;=</code> is supposed to mean. Lean surely knows. How do I make it tell me? The <em>very useful</em> go to definition feature only shows me the definition of <code>class has_le</code>, not the instance.</p>



<a name="261931812"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/replace%20goal%20with%20definition/near/261931812" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/replace.20goal.20with.20definition.html#261931812">(Nov 18 2021 at 14:12)</a>:</h4>
<p>You can inspect in the goal in the infoview what <code>has_le</code> instance it is.</p>



<a name="261931868"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/replace%20goal%20with%20definition/near/261931868" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/replace.20goal.20with.20definition.html#261931868">(Nov 18 2021 at 14:12)</a>:</h4>
<p><span class="user-mention" data-user-id="456923">@Leonard Wiechmann</span> In the case of notation, this can be a bit tricky. But if you have <code>foo x y z</code>, then you can do <code>unfold foo</code> to unfold the definition.</p>



<a name="261931932"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/replace%20goal%20with%20definition/near/261931932" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/replace.20goal.20with.20definition.html#261931932">(Nov 18 2021 at 14:13)</a>:</h4>
<p>With notation, you can use widgets in the infoview, like Yaël says, if you are using VSCode.</p>



<a name="261931998"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/replace%20goal%20with%20definition/near/261931998" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/replace.20goal.20with.20definition.html#261931998">(Nov 18 2021 at 14:13)</a>:</h4>
<p>Just click on the <code>≤</code> and drill down the popup windows. The popup windows also have buttons that allow you to "go to definition".</p>



<a name="261932087"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/replace%20goal%20with%20definition/near/261932087" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Leonard Wiechmann <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/replace.20goal.20with.20definition.html#261932087">(Nov 18 2021 at 14:14)</a>:</h4>
<p>I'm not quite sure what it's trying to tell me <span aria-label="thinking" class="emoji emoji-1f914" role="img" title="thinking">:thinking:</span><br>
<a href="/user_uploads/3121/mz9OGzDtFKY1680x4eQD4Lw0/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/3121/mz9OGzDtFKY1680x4eQD4Lw0/image.png" title="image.png"><img src="/user_uploads/3121/mz9OGzDtFKY1680x4eQD4Lw0/image.png"></a></div>



<a name="261932139"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/replace%20goal%20with%20definition/near/261932139" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/replace.20goal.20with.20definition.html#261932139">(Nov 18 2021 at 14:14)</a>:</h4>
<p>Click on <code>preorder.to_has_le</code>. That's the next step.</p>



<a name="261932367"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/replace%20goal%20with%20definition/near/261932367" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Leonard Wiechmann <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/replace.20goal.20with.20definition.html#261932367">(Nov 18 2021 at 14:16)</a>:</h4>
<p>oh boy<br>
<a href="/user_uploads/3121/XZ1QehelEJggVI22onye9HzW/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/3121/XZ1QehelEJggVI22onye9HzW/image.png" title="image.png"><img src="/user_uploads/3121/XZ1QehelEJggVI22onye9HzW/image.png"></a></div>



<a name="261932478"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/replace%20goal%20with%20definition/near/261932478" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Leonard Wiechmann <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/replace.20goal.20with.20definition.html#261932478">(Nov 18 2021 at 14:17)</a>:</h4>
<p>unfold got rid of the notation, but I still don't have a "useful" goal:<br>
<a href="/user_uploads/3121/mCCqtFktcIdwmIKmWu7W0Z1c/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/3121/mCCqtFktcIdwmIKmWu7W0Z1c/image.png" title="image.png"><img src="/user_uploads/3121/mCCqtFktcIdwmIKmWu7W0Z1c/image.png"></a></div>



<a name="261932531"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/replace%20goal%20with%20definition/near/261932531" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/replace.20goal.20with.20definition.html#261932531">(Nov 18 2021 at 14:17)</a>:</h4>
<p>That was a wrong turn <span aria-label="wink" class="emoji emoji-1f609" role="img" title="wink">:wink:</span> In the second box, click on the third subitem</p>



<a name="261932652"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/replace%20goal%20with%20definition/near/261932652" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/replace.20goal.20with.20definition.html#261932652">(Nov 18 2021 at 14:18)</a>:</h4>
<p><span class="user-mention silent" data-user-id="456923">Leonard Wiechmann</span> <a href="#narrow/stream/113488-general/topic/replace.20goal.20with.20definition/near/261931443">said</a>:</p>
<blockquote>
<p>I've tried all kinds of intros/rws/applys, but can't seem to figure out what <code>&lt;=</code> is supposed to mean.</p>
</blockquote>
<p>Did you try <code>intros x hx</code>?</p>



<a name="261932758"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/replace%20goal%20with%20definition/near/261932758" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Leonard Wiechmann <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/replace.20goal.20with.20definition.html#261932758">(Nov 18 2021 at 14:19)</a>:</h4>
<p>yep. I can only introduce one thing. (<code>A : set \a</code>)</p>



<a name="261932814"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/replace%20goal%20with%20definition/near/261932814" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/replace.20goal.20with.20definition.html#261932814">(Nov 18 2021 at 14:20)</a>:</h4>
<p>You can also do this with simp</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">example</span> <span class="o">{</span><span class="n">T</span> <span class="n">R</span> <span class="o">:</span> <span class="n">set</span> <span class="n">ℕ</span><span class="o">}</span> <span class="o">:</span> <span class="n">T</span> <span class="bp">≤</span> <span class="n">R</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">simp</span> <span class="o">[(</span><span class="bp">≤</span><span class="o">)],</span>
  <span class="n">simp</span> <span class="o">[(</span><span class="bp">⊆</span><span class="o">)],</span>
  <span class="n">simp</span> <span class="o">[</span><span class="n">set.subset</span><span class="o">],</span>
<span class="kd">end</span>
</code></pre></div>



<a name="261932854"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/replace%20goal%20with%20definition/near/261932854" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/replace.20goal.20with.20definition.html#261932854">(Nov 18 2021 at 14:20)</a>:</h4>
<p>The <code>&lt;=</code> is whatever <code>partial</code> instance your function takes!</p>



<a name="261932879"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/replace%20goal%20with%20definition/near/261932879" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/replace.20goal.20with.20definition.html#261932879">(Nov 18 2021 at 14:20)</a>:</h4>
<p>You should just delete that</p>



<a name="261932989"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/replace%20goal%20with%20definition/near/261932989" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Leonard Wiechmann <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/replace.20goal.20with.20definition.html#261932989">(Nov 18 2021 at 14:21)</a>:</h4>
<p><span class="user-mention silent" data-user-id="127136">Alex J. Best</span> <a href="#narrow/stream/113488-general/topic/replace.20goal.20with.20definition/near/261932814">said</a>:</p>
<blockquote>
<p>You can also do this with simp</p>
</blockquote>
<p>that's very useful, thanks!</p>



<a name="261933206"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/replace%20goal%20with%20definition/near/261933206" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Leonard Wiechmann <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/replace.20goal.20with.20definition.html#261933206">(Nov 18 2021 at 14:23)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110032">Reid Barton</span> <a href="#narrow/stream/113488-general/topic/replace.20goal.20with.20definition/near/261932854">said</a>:</p>
<blockquote>
<p>The <code>&lt;=</code> is whatever <code>partial</code> instance your function takes!</p>
</blockquote>
<p>I had a feeling, that was the issue.<br>
But without it, I'm having trouble getting <code>is_smallest</code> to choose the right partial order.<br>
<a href="/user_uploads/3121/RW0SAy6XSVg6hm1m7KMhLh10/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/3121/RW0SAy6XSVg6hm1m7KMhLh10/image.png" title="image.png"><img src="/user_uploads/3121/RW0SAy6XSVg6hm1m7KMhLh10/image.png"></a></div>



<a name="261933272"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/replace%20goal%20with%20definition/near/261933272" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/replace.20goal.20with.20definition.html#261933272">(Nov 18 2021 at 14:24)</a>:</h4>
<p>that's because Lean has no idea what you mean</p>



<a name="261933376"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/replace%20goal%20with%20definition/near/261933376" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Leonard Wiechmann <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/replace.20goal.20with.20definition.html#261933376">(Nov 18 2021 at 14:24)</a>:</h4>
<p>yeah, I'm just giving it a function. It can't really know what I mean. So I have to tell it somehow.</p>



<a name="261933378"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/replace%20goal%20with%20definition/near/261933378" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/replace.20goal.20with.20definition.html#261933378">(Nov 18 2021 at 14:24)</a>:</h4>
<p>You should help it by giving a type annotation (and help us by copying and pasting text not screenshots)</p>



<a name="261933489"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/replace%20goal%20with%20definition/near/261933489" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Leonard Wiechmann <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/replace.20goal.20with.20definition.html#261933489">(Nov 18 2021 at 14:25)</a>:</h4>
<p>sorry, I wanted to include the error messages</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">def</span> <span class="n">is_smallest</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">}</span> <span class="o">[</span><span class="n">partial_order</span> <span class="n">α</span><span class="o">]</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">α</span><span class="o">):</span> <span class="kt">Prop</span> <span class="o">:=</span>
  <span class="bp">∀</span> <span class="n">x</span><span class="o">,</span> <span class="n">a</span> <span class="bp">&lt;=</span> <span class="n">x</span>

<span class="kd">lemma</span> <span class="n">powerset_empty_smallest</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">}</span>
  <span class="o">:</span> <span class="n">is_smallest</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">x</span><span class="o">,</span> <span class="n">false</span><span class="o">)</span> <span class="o">:=</span> <span class="gr">sorry</span>
</code></pre></div>



<a name="261933523"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/replace%20goal%20with%20definition/near/261933523" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/replace.20goal.20with.20definition.html#261933523">(Nov 18 2021 at 14:25)</a>:</h4>
<p>The normal way to write the argument of <code>is_smallest</code> is <code>(∅ : set α)</code></p>



<a name="261933752"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/replace%20goal%20with%20definition/near/261933752" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Leonard Wiechmann <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/replace.20goal.20with.20definition.html#261933752">(Nov 18 2021 at 14:27)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110032">Reid Barton</span> <a href="#narrow/stream/113488-general/topic/replace.20goal.20with.20definition/near/261933523">said</a>:</p>
<blockquote>
<p>The normal way to write the argument of <code>is_smallest</code> is <code>(∅ : set α)</code></p>
</blockquote>
<p>oooooh, that's what emptyc is for!<br>
ok, <code>is_smallest (∅ : set α)</code> isn't giving me an error so far.<br>
let's see if I can make the proof work.<br>
thanks!</p>



<a name="261934846"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/replace%20goal%20with%20definition/near/261934846" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Leonard Wiechmann <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/replace.20goal.20with.20definition.html#261934846">(Nov 18 2021 at 14:35)</a>:</h4>
<p>ok, got it working! all of that notation is nice to look at, but really obfuscates what the hypotheses and the goal actually mean.<br>
thanks everyone!</p>



<a name="261942437"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/replace%20goal%20with%20definition/near/261942437" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/replace.20goal.20with.20definition.html#261942437">(Nov 18 2021 at 15:29)</a>:</h4>
<p>The reason that using "canonical" notation is important, is that this is what all the <code>simp</code> lemmas are designed to use, and <code>simp</code> works up to syntactic equality so it matters.</p>



<a name="262002506"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/replace%20goal%20with%20definition/near/262002506" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/replace.20goal.20with.20definition.html#262002506">(Nov 18 2021 at 22:44)</a>:</h4>
<p><span class="user-mention silent" data-user-id="456923">Leonard Wiechmann</span> <a href="#narrow/stream/113488-general/topic/replace.20goal.20with.20definition/near/261933489">said</a>:</p>
<blockquote>
<p>sorry, I wanted to include the error messages</p>
</blockquote>
<p>The usual way I include error messages in code snippets is to put them in comments immediately after the failing command</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>