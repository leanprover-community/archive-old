---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/Lean.20project.20repository.20prototype.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html">Lean project repository prototype</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="205496337"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205496337" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205496337">(Jul 30 2020 at 15:53)</a>:</h4>
<p>I'm noticing more and more things posted here where I think "that's cool, but doesn't fit in mathlib." Unfortunately, with the rate mathlib changes, these things are very susceptible to bit rot. It's time to address this!</p>
<p>I put together the beginnings of a <a href="https://github.com/leanprover-contrib/leanprover-contrib">project repository</a> earlier today. There's a script that (when it's finished) will try to build all <code>lean-3.*.*</code> branches of checked in projects, with respect to the latest corresponding version of mathlib (and the latest versions of other dependencies, if there are any).</p>
<p>The idea right now is not that mathlib contributors are expected to update the collected projects. But if mathlib changes break a project, the project owners will be notified as soon as the CI script runs. (Once a day?) We could also potentially add this as a CI step on mathlib, displaying failures but not blocking merges. </p>
<p>This is very much WIP so comments and suggestions are appreciated. And it's yet another thing that I don't really have time for right now, so if anyone is interested in collaborating/taking charge, let's talk.</p>



<a name="205496464"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205496464" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205496464">(Jul 30 2020 at 15:54)</a>:</h4>
<p>I also remembered halfway into building this that <span class="user-mention" data-user-id="110026">@Simon Hudon</span> had started on something similar a while back. I may have just rediscovered a bunch of ideas he already had! Sorry Simon, maybe you have suggestions here?</p>



<a name="205496717"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205496717" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Simon Hudon <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205496717">(Jul 30 2020 at 15:56)</a>:</h4>
<p>Yes indeed, I have such a project which I haven't touched in a while. The idea is to curate sets of projects in such a way that there's always a known answer to "which version of which packages do I need"</p>



<a name="205496728"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205496728" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205496728">(Jul 30 2020 at 15:56)</a>:</h4>
<p>The script is runnable right now, if you figure out what Python packages you need. It assumes you have <code>lean</code> (via <code>elan</code>), <code>leanpkg</code>, and <code>leanproject</code> in the path. It will check out a bunch of stuff and pollute whatever directory you run it in.</p>



<a name="205496951"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205496951" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205496951">(Jul 30 2020 at 15:58)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110026">Simon Hudon</span> <a href="#narrow/stream/113488-general/topic/Lean.20project.20repository.20prototype/near/205496717">said</a>:</p>
<blockquote>
<p>Yes indeed, I have such a project which I haven't touched in a while. The idea is to curate sets of projects in such a way that there's always a known answer to "which version of which packages do I need"</p>
</blockquote>
<p>Hmm, that sounds slightly different. Do you have this project hosted somewhere?</p>



<a name="205497032"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205497032" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205497032">(Jul 30 2020 at 15:58)</a>:</h4>
<p>That question doesn't always have an answer, does it?</p>



<a name="205497240"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205497240" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Simon Hudon <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205497240">(Jul 30 2020 at 16:00)</a>:</h4>
<p>The point is helping create an answer when possible. Basically, select generations of packages, build them together and report which project is broken, leaving it to the author of the package to decide to fix the breakage or not be a part of that generation</p>



<a name="205497259"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205497259" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Simon Hudon <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205497259">(Jul 30 2020 at 16:00)</a>:</h4>
<p>Here is where I put it: <a href="https://github.com/leanprover-community/mathlib-tools/tree/lean-depot">https://github.com/leanprover-community/mathlib-tools/tree/lean-depot</a></p>



<a name="205497597"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205497597" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205497597">(Jul 30 2020 at 16:02)</a>:</h4>
<p>Cool, thanks. I'll take a look. This sounds very much like what I've done, except I've defined "generations" by Lean versions.</p>



<a name="205497867"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205497867" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205497867">(Jul 30 2020 at 16:04)</a>:</h4>
<p>If you know you want to use packages x, y, and z, you should be able to ask the tool if there are any Lean versions where x, y, and z all build against the last mathlib commit for that version.</p>



<a name="205497871"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205497871" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Simon Hudon <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205497871">(Jul 30 2020 at 16:04)</a>:</h4>
<p>It may not turn out to be a problem but one worry I had was that the repository would become large, of uneven quality and that mathlib maintainers (or specifically me) we become responsible for fixing the breakage.</p>



<a name="205498144"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205498144" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205498144">(Jul 30 2020 at 16:06)</a>:</h4>
<p>This is definitely a worry. It's a matter of setting up the right expectations and rules around entering the repo. Having outdated projects in there isn't a problem, especially if other projects don't depend on them. I think we just need to emphasize that project owners are responsible for updating their own projects.</p>



<a name="205498192"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205498192" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205498192">(Jul 30 2020 at 16:07)</a>:</h4>
<p>We may decide that some subset of projects are "blessed" and get to participate in mathlib CI in some way. Obviously we'd need criteria to make this decision.</p>



<a name="205498250"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205498250" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Simon Hudon <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205498250">(Jul 30 2020 at 16:07)</a>:</h4>
<p>That sounds reasonable. And you may resort to submodules to decentralize the organization</p>



<a name="205498435"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205498435" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205498435">(Jul 30 2020 at 16:09)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110026">Simon Hudon</span> <a href="#narrow/stream/113488-general/topic/Lean.20project.20repository.20prototype/near/205498250">said</a>:</p>
<blockquote>
<p>That sounds reasonable. And you may resort to submodules to decentralize the organization</p>
</blockquote>
<p>Hmm, what do you mean by that?</p>



<a name="205498554"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205498554" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205498554">(Jul 30 2020 at 16:10)</a>:</h4>
<p>The sign-up process I have right now is just adding a link to a repo. There's no checking in code. The build script clones all the relevant repos every time it runs.</p>



<a name="205498636"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205498636" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Simon Hudon <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205498636">(Jul 30 2020 at 16:11)</a>:</h4>
<p>If I have a repo and I want to be part of that collection, <code>git</code> has a <code>submodule</code> feature that lets you reference my repo from yours. Then updating my repo doesn't automatically break your build and your submodule reference must be explicitly updated to follow my official versions.</p>



<a name="205498754"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205498754" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205498754">(Jul 30 2020 at 16:12)</a>:</h4>
<p>Aha. Yeah, I think that isn't needed with the current architecture.</p>



<a name="205498897"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205498897" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205498897">(Jul 30 2020 at 16:13)</a>:</h4>
<p>It might be time to rid of the lean-xyz branches now.</p>



<a name="205499290"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205499290" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205499290">(Jul 30 2020 at 16:16)</a>:</h4>
<p>And move to releases/tags instead?</p>



<a name="205499415"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205499415" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Simon Hudon <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205499415">(Jul 30 2020 at 16:17)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110596">Rob Lewis</span> <a href="#narrow/stream/113488-general/topic/Lean.20project.20repository.20prototype/near/205498754">said</a>:</p>
<blockquote>
<p>Aha. Yeah, I think that isn't needed with the current architecture.</p>
</blockquote>
<p>I'm not sure about that. I feel like if it's necessary to have your code hosted in that repo, it denies people control of their own projects. I think it's worth considering</p>



<a name="205499874"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205499874" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205499874">(Jul 30 2020 at 16:21)</a>:</h4>
<p>My first thought this morning was to fork every checked-in repo to the <code>leanprover-contrib</code> organization, and to automatically update revisions in <code>leanpkg.toml</code>s to point to these forks. But it sounded very messy. Why do we want to deny people control of their own projects?</p>



<a name="205499920"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205499920" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205499920">(Jul 30 2020 at 16:21)</a>:</h4>
<p>I am looking at this as more of a CI thing, less of a package manager. Maybe this is where the difference lies.</p>



<a name="205500186"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205500186" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205500186">(Jul 30 2020 at 16:23)</a>:</h4>
<p>I like the idea of my projects being able to track master very much. What happened with the perfectoid project would be that we'd leave it for a bit, or try to get some of it into mathlib and worry about that, and then we'd try to bump mathlib and the project would break in ways I didn't understand because I don't keep up with all mathlib changes. To hear "a change to mathlib in the last 24 hours just broke your project" is a very welcome piece of news in this situation.</p>



<a name="205500576"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205500576" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205500576">(Jul 30 2020 at 16:26)</a>:</h4>
<p><span class="user-mention" data-user-id="110596">@Rob Lewis</span> more like only having master.  The separation into lean versions is not particularly useful, its much more important to know the mathlib version.  The lean-xyz branches just cause headaches.</p>



<a name="205501168"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205501168" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205501168">(Jul 30 2020 at 16:31)</a>:</h4>
<p>The lean-xyz branches are good as synchronization points though. If every project only has master, and gets updated every few weeks/months to the latest mathlib, how could you ever start a new project with two separate dependencies?</p>



<a name="205501956"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205501956" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205501956">(Jul 30 2020 at 16:38)</a>:</h4>
<p>Haha, with the current release cadence the lean version is kind of a proxy for the mathlib version.. You could always look for commits with matching date manually.  But I won't push this.  Its only a few more days until the clover blooms.</p>



<a name="205502306"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205502306" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205502306">(Jul 30 2020 at 16:41)</a>:</h4>
<p>Yeah, a mathlib release schedule would be just as good. But that'd probably be pegged to a Lean release schedule to some degree, hah.</p>



<a name="205504650"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205504650" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Simon Hudon <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205504650">(Jul 30 2020 at 17:02)</a>:</h4>
<p><span class="user-mention" data-user-id="110596">@Rob Lewis</span> I don't think handling submodules will add so much to your setup and I think if could make a big difference for people who want their package in that archive</p>



<a name="205507682"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205507682" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205507682">(Jul 30 2020 at 17:32)</a>:</h4>
<p>IMHO, a great strength of the AFP for Isabelle is that everything is updated to be compatible with the last release. They have official releases of Isabelle every 8 months, a snapshot of the AFP at that date where everyting compiles, and then the AFP is updated together with master, where someone making a change in master is responsible for fixing what breaks in the AFP.</p>



<a name="205508211"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205508211" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205508211">(Jul 30 2020 at 17:36)</a>:</h4>
<p>So what happens when they refactor subgroups?</p>



<a name="205508649"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205508649" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205508649">(Jul 30 2020 at 17:40)</a>:</h4>
<p>They fix everything. But it's stable enough that they don't need to refactor subgroups every day.</p>



<a name="205508970"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205508970" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Simon Hudon <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205508970">(Jul 30 2020 at 17:43)</a>:</h4>
<p>I'm not sure it's such a good idea that contributors to mathlib would be responsible for a potentially very diverse set of libraries. Especially since I think there should be almost no barrier to entry for that archive so a lot of it can be pretty bad code.</p>



<a name="205509285"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205509285" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205509285">(Jul 30 2020 at 17:46)</a>:</h4>
<p>For the AFP, there is a barrier entry, in the sense that the AFP maintainers check that the code is not crazy. But the bar is not too high either, just reasonable.</p>



<a name="205509747"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205509747" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205509747">(Jul 30 2020 at 17:50)</a>:</h4>
<p>What would be something that is acceptable for the AFP but not acceptable for mathlib?</p>



<a name="205510042"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205510042" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205510042">(Jul 30 2020 at 17:52)</a>:</h4>
<p>If you want to formalize something that is interesting to you but not to the community (logic puzzles from a book, that you want to formalize the way you want), for instance.</p>



<a name="205510070"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205510070" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205510070">(Jul 30 2020 at 17:53)</a>:</h4>
<p>Or 10 different versions of graph libraries that are mutually incompatible.</p>



<a name="205510869"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205510869" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Simon Hudon <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205510869">(Jul 30 2020 at 17:59)</a>:</h4>
<p>I think we might be better off reserving that treatment for only parts of the repository. I think there's a big review load already.</p>



<a name="205511214"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205511214" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205511214">(Jul 30 2020 at 18:02)</a>:</h4>
<p>Yes, I agree that it's not necessary that everything is fixed along the way, especially when the core library is seeing a lot of refactors. It might become an option when things are much more stable. But I think it is important that some things are fixed along with mathlib (for instance books and tutorials)</p>



<a name="205512618"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205512618" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Simon Hudon <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205512618">(Jul 30 2020 at 18:11)</a>:</h4>
<p><span aria-label="+1" class="emoji emoji-1f44d" role="img" title="+1">:+1:</span></p>



<a name="205512673"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205512673" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Simon Hudon <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205512673">(Jul 30 2020 at 18:12)</a>:</h4>
<p>Probably projects that are used by many others too</p>



<a name="205514955"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205514955" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205514955">(Jul 30 2020 at 18:29)</a>:</h4>
<p>This is what I was trying to capture by:<br>
<span class="user-mention silent" data-user-id="110596">Rob Lewis</span> <a href="#narrow/stream/113488-general/topic/Lean.20project.20repository.20prototype/near/205498192">said</a>:</p>
<blockquote>
<p>We may decide that some subset of projects are "blessed" and get to participate in mathlib CI in some way. Obviously we'd need criteria to make this decision.</p>
</blockquote>
<p>The LFTCM tutorials could be blessed. Changes to mathlib that break them would raise a big flag. There would be at least a social obligation to fix the tutorial if you make a PR that raises this flag.</p>



<a name="205515081"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205515081" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205515081">(Jul 30 2020 at 18:30)</a>:</h4>
<p>But I do think we should move away from putting everything important in the mathlib repo. People who want to use the tutorials shouldn't have to clone the mathlib repo. It should be a Lean project like the LFTCM repo was.</p>



<a name="205515190"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205515190" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205515190">(Jul 30 2020 at 18:31)</a>:</h4>
<p>I'm familiar with the Isabelle AFP model and it's an ideal to keep in mind. But I'm pretty sure mathlib still changes too drastically too quickly for it to be practical right now. We'd need a serious review process on entries and the mathlib maintainers are already stretched thin.</p>



<a name="205515372"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205515372" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205515372">(Jul 30 2020 at 18:32)</a>:</h4>
<p>My image here is much lighter weight. It's a way for smaller projects to get a bit of visibility and a bit of automatic updating.</p>



<a name="205515479"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205515479" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205515479">(Jul 30 2020 at 18:33)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110026">Simon Hudon</span> <a href="#narrow/stream/113488-general/topic/Lean.20project.20repository.20prototype/near/205504650">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="110596">Rob Lewis</span> I don't think handling submodules will add so much to your setup and I think if could make a big difference for people who want their package in that archive</p>
</blockquote>
<p>Could you expand on this? I'm really not sure what the benefit is.</p>



<a name="205515634"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205515634" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205515634">(Jul 30 2020 at 18:34)</a>:</h4>
<p>This is a great idea! Is the plan that all projects in the list should pass with latest mathlib  as much as possible? I was thinking it would be good to have  a community maintained  list of projects with interesting work in, this list could do that role also if there was a flag for included in CI or not, as there are already many projects which contain interesting work but are way behind mathlib master.</p>



<a name="205516140"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205516140" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205516140">(Jul 30 2020 at 18:39)</a>:</h4>
<p>It will track the latest version of mathlib that a project compiles with, and flag the project owner if/when the project breaks. So yeah, it will be very easy to make a list of checked in projects and their status (if they compile with new mathlib/the last version they work with).</p>



<a name="205516167"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205516167" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Simon Hudon <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205516167">(Jul 30 2020 at 18:39)</a>:</h4>
<p><span class="user-mention" data-user-id="110596">@Rob Lewis</span> The idea is to make it a decentralized organization. That we can add a project to this archive without relinquishing control of the project or abandoning the github data (issues, pull requests, etc)</p>



<a name="205516324"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205516324" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205516324">(Jul 30 2020 at 18:41)</a>:</h4>
<p>But that's already possible? All you have to do is add your project repo name to <a href="https://github.com/leanprover-contrib/leanprover-contrib/blob/master/projects/projects.yml">https://github.com/leanprover-contrib/leanprover-contrib/blob/master/projects/projects.yml</a></p>



<a name="205516389"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205516389" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Simon Hudon <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205516389">(Jul 30 2020 at 18:41)</a>:</h4>
<p>Ah ok, it's more similar to what I was doing. I thought you were storing the code there</p>



<a name="205516411"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205516411" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205516411">(Jul 30 2020 at 18:42)</a>:</h4>
<p>Well, technically the script doesn't do that yet, it only fetches from the leanprover-contrib repo. But that's what I wrote in the readme :p</p>



<a name="205516552"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205516552" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205516552">(Jul 30 2020 at 18:43)</a>:</h4>
<p>My original thought was to fork repos to this organization but I decided against that. Just haven't updated the couple lines of relevant code since the test repos were in this org anyway, heh.</p>



<a name="205516864"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205516864" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205516864">(Jul 30 2020 at 18:46)</a>:</h4>
<p>The one thing you lose with this setup is auto-updating the checked in repos when there's no breakage. But this gets complicated quick and I don't think it's worth the trouble.</p>



<a name="205516935"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205516935" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Simon Hudon <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205516935">(Jul 30 2020 at 18:46)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110596">Rob Lewis</span> <a href="#narrow/stream/113488-general/topic/Lean.20project.20repository.20prototype/near/205516864">said</a>:</p>
<blockquote>
<p>The one thing you lose with this setup is auto-updating the checked in repos when there's no breakage. But this gets complicated quick and I don't think it's worth the trouble.</p>
</blockquote>
<p>You mean as opposed to hosting the code itself?</p>



<a name="205517127"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205517127" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205517127">(Jul 30 2020 at 18:48)</a>:</h4>
<p>Yes, if we hosted the code ourselves we could update the dependencies automatically. Otherwise we need write permission to the checked in repo.</p>



<a name="205517213"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205517213" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205517213">(Jul 30 2020 at 18:49)</a>:</h4>
<p>But if we keep our own version and update it, it diverges (slightly) from the main version, needing someone to keep them aligned.</p>



<a name="205517452"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205517452" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Simon Hudon <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205517452">(Jul 30 2020 at 18:51)</a>:</h4>
<p>Yeah. I think hosting the blessed projects only might be sufficient.</p>



<a name="205517471"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205517471" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205517471">(Jul 30 2020 at 18:51)</a>:</h4>
<p>The builder could also submit a PR to the affected project (like the nolints PR).</p>



<a name="205517566"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205517566" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Simon Hudon <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205517566">(Jul 30 2020 at 18:52)</a>:</h4>
<p>Or maybe an issue?</p>



<a name="205517590"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205517590" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205517590">(Jul 30 2020 at 18:52)</a>:</h4>
<p>Technically, a PR is an issue (they have the same API and numbering on github).</p>



<a name="205517654"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205517654" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205517654">(Jul 30 2020 at 18:53)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110043">Gabriel Ebner</span> <a href="#narrow/stream/113488-general/topic/Lean.20project.20repository.20prototype/near/205517471">said</a>:</p>
<blockquote>
<p>The builder could also submit a PR to the affected project (like the nolints PR).</p>
</blockquote>
<p>This gets super awkward when you have project 1 depending on project 2 and project 2 needs to update. Then you need to update project 1 to a commit of project 2 that may not exist, depending on if your PR gets squashed, rebased, whatever.</p>



<a name="205517826"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205517826" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205517826">(Jul 30 2020 at 18:54)</a>:</h4>
<p>It also just seems kind of annoying, there will be one PR every day like clockwork unless we magically have a day with no mathlib commits...</p>



<a name="205517914"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205517914" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205517914">(Jul 30 2020 at 18:54)</a>:</h4>
<p>Fair enough, this also rules out one issue per day.  Can we at least spam the owners via email?</p>



<a name="205517983"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205517983" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205517983">(Jul 30 2020 at 18:55)</a>:</h4>
<p>We should definitely open an issue when things break. I don't think spamming them to update helps much of anything.</p>



<a name="205518055"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205518055" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205518055">(Jul 30 2020 at 18:56)</a>:</h4>
<p>In fact, we should just publish an action script to update and build once a day and let people install that themselves.</p>



<a name="205518086"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205518086" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205518086">(Jul 30 2020 at 18:56)</a>:</h4>
<p>That kind of does 90% of the job of this repo, heh.</p>



<a name="205518133"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205518133" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205518133">(Jul 30 2020 at 18:56)</a>:</h4>
<p>It just doesn't handle dependencies very well.</p>



<a name="205518865"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205518865" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205518865">(Jul 30 2020 at 19:02)</a>:</h4>
<p>Ah so it opens one issue, and doesn't open a new one until the first one is closed?  That sounds good to me.<br>
Do you get a notification if a cron job action fails?</p>



<a name="205519111"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205519111" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205519111">(Jul 30 2020 at 19:04)</a>:</h4>
<p>Yeah, someone gets a notification. Whoever last modified the .yml file maybe? The cron job could also open an issue though.</p>



<a name="205519345"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205519345" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205519345">(Jul 30 2020 at 19:06)</a>:</h4>
<p>I wonder who should be spammed for the <code>tutorials</code> or other projects that have multiple maintainers.  Opening an issue is probably the easiest way to notify all interested parties.</p>



<a name="205520415"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205520415" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205520415">(Jul 30 2020 at 19:14)</a>:</h4>
<p>I need to look into what <code>leanpkg</code> does with conflicting dependencies. This project repo might not be necessary at all...</p>



<a name="205520456"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205520456" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205520456">(Jul 30 2020 at 19:14)</a>:</h4>
<p>If you depend on multiple versions of mathlib, the last one "wins" (in the order the dependencies are traversed).</p>



<a name="205520747"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205520747" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205520747">(Jul 30 2020 at 19:18)</a>:</h4>
<p>Hmm. Then I think there is a place for the project repo. <code>leanpkg upgrade</code> isn't recursive, right? It won't updgrade the mathlib revision of a dependency?</p>



<a name="205524376"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205524376" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205524376">(Jul 30 2020 at 19:52)</a>:</h4>
<p>I have completely forgotten what <code>leanpkg upgrade</code> does.  But I'm pretty sure it isn't recursive.</p>



<a name="205524668"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205524668" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Simon Hudon <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205524668">(Jul 30 2020 at 19:54)</a>:</h4>
<p>I think we can be sure that any way it might resolve conflicts won't result in choosing one version of mathlib that will work with all dependencies. I think the need for the project archive is certain</p>



<a name="205526054"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205526054" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ruben Van de Velde <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205526054">(Jul 30 2020 at 20:06)</a>:</h4>
<p>Not sure if this makes sense, but perhaps the project repository could store, for each project, the most recent mathlib commit it works with. Then you could have automation that regularly checks all the projects against current mathlib, and for each project, either updates the project repository (if it still works) or files an issue on the project (if it doesn't). Then you'd only have the daily (or whatever) commits in the project repository, but the maintainers of the projects can still be confident that they <em>can</em> upgrade when they want to</p>



<a name="205533079"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205533079" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205533079">(Jul 30 2020 at 21:10)</a>:</h4>
<p><span class="user-mention silent" data-user-id="307953">Ruben Van de Velde</span> <a href="#narrow/stream/113488-general/topic/Lean.20project.20repository.20prototype/near/205526054">said</a>:</p>
<blockquote>
<p>Not sure if this makes sense, but perhaps the project repository could store, for each project, the most recent mathlib commit it works with. Then you could have automation that regularly checks all the projects against current mathlib, and for each project, either updates the project repository (if it still works) or files an issue on the project (if it doesn't). Then you'd only have the daily (or whatever) commits in the project repository, but the maintainers of the projects can still be confident that they <em>can</em> upgrade when they want to</p>
</blockquote>
<p>I'm not quite sure what you mean by the "project repository" here -- do you mean a fork of the project to <code>leanprover-contrib</code>?</p>



<a name="205533436"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205533436" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ruben Van de Velde <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205533436">(Jul 30 2020 at 21:13)</a>:</h4>
<p>Terminology is a little confusing :)<br>
I was thinking you'd have the projects.yml file include a link to the git repository of the project plus a mathlib commit hash</p>



<a name="205533510"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205533510" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ruben Van de Velde <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205533510">(Jul 30 2020 at 21:14)</a>:</h4>
<p>So the automation would just update the hash in <a href="https://github.com/leanprover-contrib/leanprover-contrib/blob/master/projects/projects.yml">https://github.com/leanprover-contrib/leanprover-contrib/blob/master/projects/projects.yml</a> , not the git repository that holds the actual code</p>



<a name="205533571"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205533571" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ruben Van de Velde <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205533571">(Jul 30 2020 at 21:15)</a>:</h4>
<p>Might be completely off base, but it avoids the issue of pushing changes to all the different git repositories every day</p>



<a name="205533719"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205533719" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205533719">(Jul 30 2020 at 21:16)</a>:</h4>
<p>Ah, I see what you mean. Even better, I think it should store a table: every time CI runs, store the mathlib commit hash and the commit hash of every project that builds wrt that mathlib.</p>



<a name="205533754"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205533754" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205533754">(Jul 30 2020 at 21:17)</a>:</h4>
<p>That way, if you know that you need packages x, y, z working together, you look for the most recent mathlib hash in the table that also has hashes for x, y, and z.</p>



<a name="205533888"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205533888" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205533888">(Jul 30 2020 at 21:18)</a>:</h4>
<p>I definitely don't want to push changes from the CI repo to the projects. I think we should write a (separate) Action script that they can install on their own, to do daily updates.</p>



<a name="205605300"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205605300" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205605300">(Jul 31 2020 at 15:32)</a>:</h4>
<p>This is "live," in that you can sign up your project and it will get checked periodically and open some issues if things are broken. See the <a href="https://github.com/leanprover-contrib/leanprover-contrib">readme</a> for details.</p>



<a name="205605382"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205605382" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205605382">(Jul 31 2020 at 15:33)</a>:</h4>
<p>It stores some history <a href="https://github.com/leanprover-contrib/leanprover-contrib/blob/store-version-history/version_history.yml">here</a>.</p>



<a name="205605452"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205605452" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205605452">(Jul 31 2020 at 15:33)</a>:</h4>
<p>At some point I'll move this to the leanprover-community org. Since the plan is no longer to fork projects, there's no need for a separate org.</p>



<a name="205605561"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205605561" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205605561">(Jul 31 2020 at 15:34)</a>:</h4>
<p>And it will be more powerful with some local Actions scripts on the project repos, coming later.</p>



<a name="205606640"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205606640" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205606640">(Jul 31 2020 at 15:45)</a>:</h4>
<p>Adding <code>lean-x.y.z</code> branches is a massive commitment, is there a chance to make it test <code>master</code>?<br>
If I were to add a <code>lean-3.17.1</code> branch today, will the bot at least try to upgrade it to <code>lean-3.18.4</code> in a few days?</p>



<a name="205607519"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205607519" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205607519">(Jul 31 2020 at 15:52)</a>:</h4>
<p>I only care about building my projects against mathlib master</p>



<a name="205607546"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205607546" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205607546">(Jul 31 2020 at 15:52)</a>:</h4>
<p>My plan is to write an action for the project repo to install, that will mirror each commit to master to the right <code>lean-x.y.z</code> branch. I don't think it should be the job of this tool to guess the "last" project commit for a particular Lean version. Same with trying to upgrade to new Lean versions. If it's done by an action in the project repo, it can automatically push the new branch when a successful upgrade can be done.</p>



<a name="205607634"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205607634" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205607634">(Jul 31 2020 at 15:53)</a>:</h4>
<p>Assuming these actions are in place in the project repo, the project master will always be up to date with a <code>lean-x.y.z</code> branch, so there's no need to test master too.</p>



<a name="205607717"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205607717" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205607717">(Jul 31 2020 at 15:54)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> your projects don't have any dependencies besides mathlib, do they?</p>



<a name="205607727"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205607727" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205607727">(Jul 31 2020 at 15:54)</a>:</h4>
<p>No</p>



<a name="205607839"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205607839" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205607839">(Jul 31 2020 at 15:55)</a>:</h4>
<p>You'll be welcome to add them to this repo, but it won't do anything you can't do locally. I'm going to make a GitHub action you can install on your own project. It will try to upgrade your <code>master</code> to mathlib <code>master</code> every night (or however often you want).</p>



<a name="205608202"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205608202" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205608202">(Jul 31 2020 at 15:59)</a>:</h4>
<p>So if I don't upgrade the lean version, then the repo won't notify if changes in mathlib have broken my project?  If I upgrade the lean version, then I need to upgrade mathlib as well.  So everything needs to be done manually, and the bot doesn't help me.</p>



<a name="205608357"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205608357" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205608357">(Jul 31 2020 at 16:00)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110596">Rob Lewis</span> <a href="#narrow/stream/113488-general/topic/Lean.20project.20repository.20prototype/near/205607839">said</a>:</p>
<blockquote>
<p>You'll be welcome to add them to this repo, but it won't do anything you can't do locally. I'm going to make a GitHub action you can install on your own project. It will try to upgrade your <code>master</code> to mathlib <code>master</code> every night (or however often you want).</p>
</blockquote>
<p>Now that I think about it, this exact action is already running in the tutorial repo. <a href="https://github.com/leanprover-community/tutorials/blob/master/.github/workflows/main.yaml">https://github.com/leanprover-community/tutorials/blob/master/.github/workflows/main.yaml</a> You could copy this directly into the same directory in your own repo and it will update it once a week if it can. Change the funny number at the top to do it more often.</p>



<a name="205608646"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205608646" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205608646">(Jul 31 2020 at 16:03)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110043">Gabriel Ebner</span> <a href="#narrow/stream/113488-general/topic/Lean.20project.20repository.20prototype/near/205608202">said</a>:</p>
<blockquote>
<p>So if I don't upgrade the lean version, then the repo won't notify if changes in mathlib have broken my project?  If I upgrade the lean version, then I need to upgrade mathlib as well.  So everything needs to be done manually, and the bot doesn't help me.</p>
</blockquote>
<p>An action running in your repo will upgrade the Lean and mathlib versions and push to a new <code>lean-x.y.z</code> branch. It can do this regardless of whether your project builds with the upgrade. Then the bot will pick it up.</p>



<a name="205610172"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205610172" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205610172">(Jul 31 2020 at 16:15)</a>:</h4>
<p>The tutorials action doesn't seem to update the <code>lean-x.y.z</code> branch though.</p>



<a name="205617503"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205617503" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205617503">(Jul 31 2020 at 17:25)</a>:</h4>
<p>No, that script is ancient, almost two months old! From before I knew there was any need for the <code>x.y.z.</code> branches. But it will do <span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> 's job of checking his master against mathlib master just fine.</p>



<a name="205652858"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205652858" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205652858">(Jul 31 2020 at 23:45)</a>:</h4>
<p>I just want to add a contrary note here, that I think this whole concept may be harmful. I think already we miss out on lots of good material that is developed in other  repositories, which then bitrots. I'm unpersuaded so far that this proposal will improve this; in fact by blessing it as standard practice it may make it worse, and just leave us with an excellent reference list of broken projects.</p>
<p>Rather, I think we should be encouraging everyone to do their new work on branches of mathlib, and actively discourage even creating new repositories.</p>
<p>I appreciate this is being contrary; hopefully just food for thought and discussion. (Of course I'm happy to help out and contribute if this new system is the way to go.)</p>



<a name="205677083"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205677083" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205677083">(Aug 01 2020 at 11:18)</a>:</h4>
<p>Uh, so my response turned into a short essay, sorry... posting this in pieces.</p>



<a name="205677087"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205677087" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205677087">(Aug 01 2020 at 11:19)</a>:</h4>
<blockquote>
<p>Rather, I think we should be encouraging everyone to do their new work on branches of mathlib, and actively discourage even creating new repositories.</p>
</blockquote>
<p>Doing work on a mathlib branch doesn't accomplish anything unless that work gets PRed. And I don't think it's maintainable to say that every Lean project should be PRed to mathlib.</p>



<a name="205677094"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205677094" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205677094">(Aug 01 2020 at 11:19)</a>:</h4>
<p>First, there's the PR process. We can't assume that anyone making a PR to mathlib will stick around to maintain their own code. So the community needs to be willing and able to keep additions up to date. There's a burden on the person making the PR to get their code into reasonable shape. There's a huge burden on the reviewers to guide them through this process and check that the code actually is reasonable -- you know as well as I do how much effort it can take to get a rough PR into shape.<br>
And any lapses here make a burden for future contributors, who may not even know or care about this material, but need to change something that it depends on.</p>



<a name="205677099"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205677099" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205677099">(Aug 01 2020 at 11:19)</a>:</h4>
<p>Saying that everything should be PRed to mathlib is telling everyone involved that it's always worth it to take on these burdens. I don't think this is fair: I can absolutely imagine someone doing something cool in Lean, that they'd like to keep reasonably up to date, that they don't think is worth the effort of PRing. I  guarantee this has happened before.</p>



<a name="205677100"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205677100" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205677100">(Aug 01 2020 at 11:19)</a>:</h4>
<p>Second, there's the question of what material "belongs" in mathlib. Obviously this is subjective. I don't want to debate the edge cases here, but I can name two projects I've looked at in the last week that I think clearly <em>don't</em> belong and are clearly worth archiving in some way: the Mathematica link and verified Sudoku. I don't know of any programming language where every project written in that language is distributed as part of its standard library.</p>



<a name="205677102"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205677102" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205677102">(Aug 01 2020 at 11:19)</a>:</h4>
<p>Mathlib is a resesarch project in its own right and also a standard library. As a project, I think some of its strengths are that it does things at high levels of generality and is surprisingly interconnected and coherent. We don't (or we try not to) have multiple APIs for the same content, similar things are glued together as much as possible, etc.</p>



<a name="205677103"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205677103" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205677103">(Aug 01 2020 at 11:19)</a>:</h4>
<p>Opening it up with an "anything goes" approach would contradict all this. I can imagine getting five different pedagogical developments of intro calc, based on different first principles, unconnected to each other, unused and unusable in the rest of the library. All have perfectly good value as Lean projects. None fit in mathlib as a research project. And why should they be part of a standard library? It's like five different markdown parsers in Python. If you want to use one, you start your own Python project and <code>pip install</code> that package. Same here: if you want to build material based on someone else's intro calc, you start your own Lean project and <code>leanpkg add</code> that package, which you find on a list on our website, generated from the repository I'm proposing.</p>



<a name="205677155"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205677155" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205677155">(Aug 01 2020 at 11:20)</a>:</h4>
<p>(end of essay)</p>



<a name="205677209"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205677209" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205677209">(Aug 01 2020 at 11:22)</a>:</h4>
<p>Of course none of this is to say that we shouldn't pull in material from other projects when it seems appropriate. And a centralized project repository makes it easier to see what's been done in other projects.</p>



<a name="205677587"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205677587" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205677587">(Aug 01 2020 at 11:34)</a>:</h4>
<p>Maybe we should do both: set up this infrastructure, and at the same time work out of more systematic way to encourage anyone working on something (plausibly) "library-worthy" that we really hope their contribution will make it into mathlib, not just as CI-checked repository, and a good way to do this is to do work in branches of mathlib.</p>



<a name="205677813"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205677813" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205677813">(Aug 01 2020 at 11:42)</a>:</h4>
<p>I am waiting for the discussions to settle down so I can put my project that is worth keeping up to date (with me as maintainer, not mathlib) but not worth distributing to everyone</p>



<a name="205677831"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205677831" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205677831">(Aug 01 2020 at 11:43)</a>:</h4>
<p>My view on this is similar to Kevin's: I want my project to be built against current master, and if a mathlib change breaks it I would like to be notified, but after that if I don't pick it up then it should just be marked as abandoned so that it doesn't bother the global tracker</p>



<a name="205677890"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205677890" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205677890">(Aug 01 2020 at 11:45)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110049">Mario Carneiro</span> <a href="#narrow/stream/113488-general/topic/Lean.20project.20repository.20prototype/near/205677813">said</a>:</p>
<blockquote>
<p>I am waiting for the discussions to settle down so I can put my project that is worth keeping up to date (with me as maintainer, not mathlib) but not worth distributing to everyone</p>
</blockquote>
<p>Does your project meet the criteria <a href="https://github.com/leanprover-contrib/leanprover-contrib#what-to-do-as-a-project-owner">here</a> / can you make one <code>lean-3.17.1</code> branch mirroring master? If so, please add it as a test!</p>



<a name="205677939"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205677939" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205677939">(Aug 01 2020 at 11:46)</a>:</h4>
<p>Clearly more testing is needed. For instance, I see from last night's run that I got the case wrong where mathlib changes but no project does.</p>



<a name="205677945"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205677945" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205677945">(Aug 01 2020 at 11:47)</a>:</h4>
<p>This seems to require that I pin down the version? I just said I don't want to do that (it is too high maintenance)</p>



<a name="205677985"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205677985" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205677985">(Aug 01 2020 at 11:48)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110049">Mario Carneiro</span> <a href="#narrow/stream/113488-general/topic/Lean.20project.20repository.20prototype/near/205677831">said</a>:</p>
<blockquote>
<p>My view on this is similar to Kevin's: I want my project to be built against current master, and if a mathlib change breaks it I would like to be notified, but after that if I don't pick it up then it should just be marked as abandoned so that it doesn't bother the global tracker</p>
</blockquote>
<p>As with Kevin, the only part of this that can't be done locally is publicity -- it sounds like you just want an action that tries to update your project every day.</p>



<a name="205677997"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205677997" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205677997">(Aug 01 2020 at 11:49)</a>:</h4>
<p>every month would be fine for my abandoned projects</p>



<a name="205677998"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205677998" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205677998">(Aug 01 2020 at 11:49)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110049">Mario Carneiro</span> <a href="#narrow/stream/113488-general/topic/Lean.20project.20repository.20prototype/near/205677945">said</a>:</p>
<blockquote>
<p>This seems to require that I pin down the version? I just said I don't want to do that (it is too high maintenance)</p>
</blockquote>
<p>This repo is 48 hours old, not all features are there. For now one version branch is fine.</p>



<a name="205678006"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205678006" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205678006">(Aug 01 2020 at 11:49)</a>:</h4>
<p>I'm thinking this is just an upkeep operation on old projects</p>



<a name="205678052"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205678052" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205678052">(Aug 01 2020 at 11:50)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110596">Rob Lewis</span> <a href="#narrow/stream/113488-general/topic/Lean.20project.20repository.20prototype/near/205608357">said</a>:</p>
<blockquote>
<p>Now that I think about it, this exact action is already running in the tutorial repo. <a href="https://github.com/leanprover-community/tutorials/blob/master/.github/workflows/main.yaml">https://github.com/leanprover-community/tutorials/blob/master/.github/workflows/main.yaml</a> You could copy this directly into the same directory in your own repo and it will update it once a week if it can. Change the funny number at the top to do it more often.</p>
</blockquote>



<a name="205678080"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205678080" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205678080">(Aug 01 2020 at 11:51)</a>:</h4>
<p>Keeping a project that depends only on mathlib up to date is a local task. There's no global activity needed there.</p>



<a name="205678121"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205678121" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205678121">(Aug 01 2020 at 11:52)</a>:</h4>
<p>The job is harder when you have projects with multiple or transitive dependencies.</p>



<a name="205678208"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205678208" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205678208">(Aug 01 2020 at 11:55)</a>:</h4>
<p>I don't think I want to be a first adopter for this kind of thing though. I'll wait until after the tutorials come out</p>



<a name="205678807"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205678807" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205678807">(Aug 01 2020 at 12:13)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110087">Scott Morrison</span> <a href="#narrow/stream/113488-general/topic/Lean.20project.20repository.20prototype/near/205677587">said</a>:</p>
<blockquote>
<p>Maybe we should do both: set up this infrastructure, and at the same time work out of more systematic way to encourage anyone working on something (plausibly) "library-worthy" that we really hope their contribution will make it into mathlib, not just as CI-checked repository, and a good way to do this is to do work in branches of mathlib.</p>
</blockquote>
<p>Sure. I have no picture of what a systematic way to do this would be, but of course I'm not against the idea.</p>



<a name="205681645"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205681645" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Utensil Song <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205681645">(Aug 01 2020 at 13:34)</a>:</h4>
<p>As a newcomer, I really love this prototype and the ideas behind it.</p>



<a name="205681649"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205681649" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Utensil Song <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205681649">(Aug 01 2020 at 13:34)</a>:</h4>
<p>The "monolithic" philosophy behind Mathlib is crucial to absorb important formalized mathematics as much as possible. Every project out there should seriously consider PRing part of it (if not all of it) into mathlib, especially the foundation part of the project that most likely should be kept interconnected and coherent with other parts of Mathlib, be kept general, maintainable, efficient to the standard of mathlib, and encapsulate the foundation into high-level primitives and theorems friendly to users who are less sophisticated in math.</p>



<a name="205681656"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205681656" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Utensil Song <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205681656">(Aug 01 2020 at 13:34)</a>:</h4>
<p>On the other hand, the reality is, as it should be, that there're satellite projects such as tutorials, games, workshop repos to form the ecosystem, as well as formalized projects, domain-specific stand-alone projects, educational projects like in Xena projects. An ecosystem like this is the model that scales.</p>



<a name="205681664"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205681664" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Utensil Song <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205681664">(Aug 01 2020 at 13:35)</a>:</h4>
<p>What's lacking for these projects, are the generic tooling to keep them in good shape. There're lots of tools to help Mathlib to be maintainable but can't be easily reused for a stand-alone project, arguably this is one of the reasons for the projects that are not PRed into Mathlib to rot.</p>



<a name="205681673"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205681673" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Utensil Song <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205681673">(Aug 01 2020 at 13:35)</a>:</h4>
<p>Understandably, the work on generalizing these tools (or merge some tools into a toolkit, e.g. leanproject, format_lean, doc_gen, blueprint etc.) to work for the whole ecosystem is currently marked to have a low priority by core members of Mathlib. This is an inevitable resource bottleneck in the current stage. But these're mostly just hard work (i.e. no hard technical barrier) and definitely can be solved when there're more users of Lean and Mathlib and the motivations accumulate. This prototype sends a signal for these coming goodies.</p>



<a name="205726452"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205726452" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205726452">(Aug 02 2020 at 12:52)</a>:</h4>
<p>Here's a first action: <a href="https://github.com/leanprover-contrib/update-versions-action">https://github.com/leanprover-contrib/update-versions-action</a></p>



<a name="205726469"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205726469" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205726469">(Aug 02 2020 at 12:53)</a>:</h4>
<p>Install this and it will keep your <code>lean-x.y.z</code> branches mirroring master. Going forward, anyway. It won't create anything historical.</p>



<a name="205726587"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205726587" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205726587">(Aug 02 2020 at 12:57)</a>:</h4>
<p>Assuming you don't use <code>lean-x.y.z</code> branches, this action will seem to do nothing for you, which is good. It's just keeping your repo structure compatible with the project repository.</p>



<a name="205781864"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205781864" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205781864">(Aug 03 2020 at 11:03)</a>:</h4>
<p>And here's a second action: <a href="https://github.com/leanprover-contrib/lean-upgrade-action">https://github.com/leanprover-contrib/lean-upgrade-action</a></p>



<a name="205781894"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205781894" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205781894">(Aug 03 2020 at 11:03)</a>:</h4>
<p>Install this and it will try to upgrade your project once a day. It will push the result if the upgrade succeeds and open an issue if the upgrade fails.</p>



<a name="205781942"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205781942" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205781942">(Aug 03 2020 at 11:04)</a>:</h4>
<p>I promise this action has bugs and needs testing.</p>



<a name="205791626"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205791626" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205791626">(Aug 03 2020 at 13:13)</a>:</h4>
<p>Rob, as you can see <a href="https://github.com/leanprover-community/tutorials/pull/24">here</a> whatever <a href="https://github.com/leanprover-community/tutorials/blob/master/.github/workflows/main.yaml">this script</a> is meant to do didn't report a mathlib update breakage. Should I get rid of it and try your latest action?</p>



<a name="205792020"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205792020" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205792020">(Aug 03 2020 at 13:17)</a>:</h4>
<p>Hah. That's because it should say <code>lean src --make</code>.</p>



<a name="205792030"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205792030" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205792030">(Aug 03 2020 at 13:17)</a>:</h4>
<p>But yes, please do switch to the action.</p>



<a name="205792063"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205792063" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205792063">(Aug 03 2020 at 13:17)</a>:</h4>
<p>I think it's fine to keep it scheduled for once a week. The demo workflow for the action schedules it for once a day.</p>



<a name="205792160"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205792160" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205792160">(Aug 03 2020 at 13:18)</a>:</h4>
<p>In fact, let's install both of the new actions and add it to the project repo.</p>



<a name="205793881"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205793881" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205793881">(Aug 03 2020 at 13:34)</a>:</h4>
<p><span class="user-mention" data-user-id="110031">@Patrick Massot</span> a website question while you're here. The project repository stores the success/failure of the builds like this: <a href="https://raw.githubusercontent.com/leanprover-contrib/leanprover-contrib/store-version-history/version_history.yml">https://raw.githubusercontent.com/leanprover-contrib/leanprover-contrib/store-version-history/version_history.yml</a></p>
<p>I'd like to display this on the website as a table.</p>
<div class="codehilite"><pre><span></span><code>             | 3.16.3 | 3.17.0 | 3.17.1 | 3.18.4
mathematica  | build  |        | build  |
test-repo-1  | build  | fail   | build  | fail
test-repo-2  |
another-test |
</code></pre></div>


<p>etc. I can put the data in whatever format is convenient. What would be the way to do this that fits in with the rest of the website generation?</p>



<a name="205794139"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205794139" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205794139">(Aug 03 2020 at 13:36)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110596">Rob Lewis</span> <a href="#narrow/stream/113488-general/topic/Lean.20project.20repository.20prototype/near/205792160">said</a>:</p>
<blockquote>
<p>In fact, let's install both of the new actions and add it to the project repo.</p>
</blockquote>
<p>I'm not sure I understand this sentence.</p>



<a name="205794272"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205794272" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205794272">(Aug 03 2020 at 13:37)</a>:</h4>
<p><a href="https://github.com/leanprover-community/tutorials/issues/25">tutorials#25</a></p>



<a name="205794411"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205794411" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205794411">(Aug 03 2020 at 13:38)</a>:</h4>
<p>Thanks</p>



<a name="205794509"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205794509" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205794509">(Aug 03 2020 at 13:39)</a>:</h4>
<p>About the website question: do you want a new web page in the community website displaying this table?</p>



<a name="205794560"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205794560" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205794560">(Aug 03 2020 at 13:39)</a>:</h4>
<p>Yeah, that was the plan.</p>



<a name="205794637"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205794637" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205794637">(Aug 03 2020 at 13:40)</a>:</h4>
<p>Do you like the tables from the mathlib stats page?</p>



<a name="205794691"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205794691" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205794691">(Aug 03 2020 at 13:40)</a>:</h4>
<p>We can have a page that lists all the projects that are checked in with some information about them, and displays this table at the end, to show which projects are compatible with which Lean versions.</p>



<a name="205794728"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205794728" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205794728">(Aug 03 2020 at 13:41)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110031">Patrick Massot</span> <a href="#narrow/stream/113488-general/topic/Lean.20project.20repository.20prototype/near/205794637">said</a>:</p>
<blockquote>
<p>Do you like the tables from the mathlib stats page?</p>
</blockquote>
<p>Sure, I'm not picky. Those are higher tech than I was imagining for this.</p>



<a name="205794803"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205794803" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205794803">(Aug 03 2020 at 13:42)</a>:</h4>
<p>But if the tools are there, no reason not to reuse them!</p>



<a name="205795004"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205795004" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205795004">(Aug 03 2020 at 13:43)</a>:</h4>
<p>They are very cheap to generate, they use <a href="http://tabulator.info/">http://tabulator.info/</a>. See <a href="https://github.com/leanprover-community/leanprover-community.github.io/blob/newsite/templates/mathlib_stats.html#L180-L188">https://github.com/leanprover-community/leanprover-community.github.io/blob/newsite/templates/mathlib_stats.html#L180-L188</a></p>



<a name="205795124"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205795124" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205795124">(Aug 03 2020 at 13:44)</a>:</h4>
<p>In that case the data comes from <a href="https://leanprover-community.github.io//mathlib_stats/gitstats.js">https://leanprover-community.github.io//mathlib_stats/gitstats.js</a></p>



<a name="205795206"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205795206" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205795206">(Aug 03 2020 at 13:45)</a>:</h4>
<p>Search for <code>authors =</code> and <code>authors_cols = </code> in the js data file</p>



<a name="205795353"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205795353" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205795353">(Aug 03 2020 at 13:46)</a>:</h4>
<p>Simply staring at those examples should be enough to build what you want very easily.</p>



<a name="205795441"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/205795441" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#205795441">(Aug 03 2020 at 13:47)</a>:</h4>
<p>Okay, cool, thanks. I'll take a look.</p>



<a name="207983954"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/207983954" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#207983954">(Aug 25 2020 at 16:16)</a>:</h4>
<p>Just to update people on the status here: I've written some Github Actions scripts that will help maintain your projects. See the recommendations <a href="https://leanprover-community.github.io/ci.html">here</a>. These are still in beta so please report bugs/annoying behavior.</p>
<p>If your project depends only on mathlib (or on nothing at all), and nothing depends on your project, these scripts are really all you need for CI. But you should add it to the <a href="https://github.com/leanprover-contrib/leanprover-contrib/blob/master/projects/projects.yml">contrib repository</a> anyway. This will help if other people want to use your project as a dependency. It will also help with publicity -- I have a draft of a page for the leanprover-community site that will display the checked-in projects with compatibility information.</p>



<a name="207985254"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/207985254" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#207985254">(Aug 25 2020 at 16:27)</a>:</h4>
<p>Thanks! Should you add the tutorials project there?</p>



<a name="207985271"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/207985271" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#207985271">(Aug 25 2020 at 16:27)</a>:</h4>
<p>Or even MIL?</p>



<a name="207985863"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/207985863" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#207985863">(Aug 25 2020 at 16:31)</a>:</h4>
<p>Both of those should definitely use the actions scripts. We can also check them in to the repo, but there's less benefit there. I don't think either will be used as a dependency and they might be out of place on the display page. But that depends what else goes in to the repo I guess.</p>



<a name="207985955"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/207985955" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#207985955">(Aug 25 2020 at 16:32)</a>:</h4>
<p>I was asking about the repo, the script case is clear.</p>



<a name="207985967"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/207985967" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#207985967">(Aug 25 2020 at 16:32)</a>:</h4>
<p>Sorry this wasn't clear.</p>



<a name="207989165"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/207989165" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#207989165">(Aug 25 2020 at 16:56)</a>:</h4>
<p><a href="https://github.com/leanprover-community/leanprover-community.github.io/pull/121">https://github.com/leanprover-community/leanprover-community.github.io/pull/121</a> introduces the page that displays checked in projects.</p>



<a name="207989487"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/207989487" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#207989487">(Aug 25 2020 at 16:58)</a>:</h4>
<p>Does this picture means your script can't build the perfectoid project? Our CI says it builds (with an ancient mathlib of course).</p>



<a name="207989718"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/207989718" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#207989718">(Aug 25 2020 at 17:00)</a>:</h4>
<p>The picture says it doesn't build with mathlib's <code>lean-3.5.1</code> branch. It uses the version branches as "releases."</p>



<a name="207989798"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/207989798" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#207989798">(Aug 25 2020 at 17:00)</a>:</h4>
<p>My guess is, if you found the last commit before you upgraded from 3.4.2 and put that on a branch called <code>lean-3.4.2</code>, you'd get a check mark in that column.</p>



<a name="207989932"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/207989932" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#207989932">(Aug 25 2020 at 17:01)</a>:</h4>
<p><code>lean-3.5.1</code> means right before mathlib moved to whatever the next version of Lean was, right?</p>



<a name="207989986"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/207989986" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#207989986">(Aug 25 2020 at 17:02)</a>:</h4>
<p>Right.</p>



<a name="207990026"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/207990026" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#207990026">(Aug 25 2020 at 17:02)</a>:</h4>
<p>If we are lucky maybe that was not too long after we stopped bumping mathlib in the project.</p>



<a name="207990075"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/207990075" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#207990075">(Aug 25 2020 at 17:02)</a>:</h4>
<p>Johan or Kevin, do you feel some motivation?</p>



<a name="207990108"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/207990108" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#207990108">(Aug 25 2020 at 17:02)</a>:</h4>
<p><code>leanpkg upgrade</code> should bump mathlib to its last commit on the <code>lean-3.5.1</code> branch, if you want to try.</p>



<a name="207990411"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/207990411" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#207990411">(Aug 25 2020 at 17:05)</a>:</h4>
<p>The checkmarks update once a day sometime in the middle of the night European time.</p>



<a name="207992069"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/207992069" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#207992069">(Aug 25 2020 at 17:16)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110596">Rob Lewis</span> <a href="#narrow/stream/113488-general/topic/Lean.20project.20repository.20prototype/near/207989718">said</a>:</p>
<blockquote>
<p>The picture says it doesn't build with mathlib's <code>lean-3.5.1</code> branch. It uses the version branches as "releases."</p>
</blockquote>
<p>To explain this a bit more: the idea with that table is that, if you want to import e.g. <code>mathlib</code>, <code>topos</code>, and <code>lean-perfectoid-spaces</code> in the same project, you need to pick a Lean version that they all support. But there's another compatibility issue, since <code>topos</code> and <code>lean-perfectoid-spaces</code> both depend on <code>mathlib</code>, you need a <code>mathlib</code> version that's compatible with both. So we assume that for any project <code>A</code> depending on <code>B</code> on Lean version <code>x.y.z</code>, the head commit on <code>A</code>'s  <code>x.y.z</code> branch should build using the head commit of <code>B</code>'s <code>x.y.z</code> branch. That's what the check marks are testing. If you need three projects and they all have check marks on the same Lean version, the head commits on those branches are all compatible so you're in luck.</p>



<a name="207992196"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/207992196" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#207992196">(Aug 25 2020 at 17:17)</a>:</h4>
<p>The story the graph tells now is "there's not much compatibility," hah. Best you can do is <code>super2</code>, <code>mathematica</code>, and <code>mathlib</code> on 3.17.1.</p>



<a name="207992252"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/207992252" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#207992252">(Aug 25 2020 at 17:17)</a>:</h4>
<p>Or <code>super</code>, <code>mathematica</code>, and <code>mathlib</code> on 3.4.1, but that's cheating, because neither <code>super</code> nor <code>mathematica</code> use <code>mathlib</code>.</p>



<a name="207992391"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/207992391" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#207992391">(Aug 25 2020 at 17:18)</a>:</h4>
<p>Not a big surprise...</p>



<a name="207992591"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/207992591" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#207992591">(Aug 25 2020 at 17:20)</a>:</h4>
<p>The picture would be rosier if there were more <code>x.y.z</code> branches, which those actions will help with going forward.</p>



<a name="207993801"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/207993801" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#207993801">(Aug 25 2020 at 17:28)</a>:</h4>
<p>I think the main limiting ingredients are project depending on something else than mathlib.</p>



<a name="207993831"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/207993831" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#207993831">(Aug 25 2020 at 17:29)</a>:</h4>
<p>(or, better, on mathlib and something else).</p>



<a name="207995007"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/207995007" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#207995007">(Aug 25 2020 at 17:37)</a>:</h4>
<p>Limiting ingredients for stress-testing the setup, for sure.</p>



<a name="207995084"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/207995084" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#207995084">(Aug 25 2020 at 17:38)</a>:</h4>
<p>The fewer of those we have, the more check marks we should get.</p>



<a name="208005580"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/208005580" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#208005580">(Aug 25 2020 at 18:48)</a>:</h4>
<p>Do we want this perfectoid thing compiling again?</p>



<a name="208364144"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/208364144" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#208364144">(Aug 28 2020 at 16:20)</a>:</h4>
<p>I linked this in another thread, but to repeat it here: <a href="https://leanprover-community.github.io/lean_projects.html">here</a> are all the projects checked in so far. Add yours! And star the ones that are there so we look good.</p>



<a name="208390968"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/208390968" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bhavik Mehta <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#208390968">(Aug 28 2020 at 20:22)</a>:</h4>
<p>I should probably write a better description :)</p>



<a name="209041475"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/209041475" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#209041475">(Sep 03 2020 at 23:39)</a>:</h4>
<p>Darn, I should have looked more carefully for this an hour ago instead of essentially manually rewriting it and then looking after to see if someone else had done this :). This action should basically remove me needing to do these installs manually, right? <a href="https://github.com/Julian/lean-across-the-board/blob/main/.github/workflows/ci.yml#L20-L30">https://github.com/Julian/lean-across-the-board/blob/main/.github/workflows/ci.yml#L20-L30</a></p>



<a name="209041518"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/209041518" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#209041518">(Sep 03 2020 at 23:40)</a>:</h4>
<p>In case it's useful feedback, I did try and find something like this but I looked for something called <code>setup-lean</code>, in line with what other actions use, or for something like <code>toolchain</code>, in line with what the rust (cargo) action uses (<a href="https://github.com/actions-rs/toolchain">https://github.com/actions-rs/toolchain</a>)</p>



<a name="209041805"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/209041805" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#209041805">(Sep 03 2020 at 23:44)</a>:</h4>
<p>Hm. It won't though leave behind the <code>lean</code> binary on the host right, just in the container it's running in? So I wouldn't be able to run the <code>lean --make test</code> command afterwards?</p>



<a name="209061605"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/209061605" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#209061605">(Sep 04 2020 at 07:09)</a>:</h4>
<p>I believe it doesn't leave behind the binary, no. But it runs <code>leanpkg test</code> which first builds <code>src</code> and then <code>test</code> if it exists.</p>



<a name="209061715"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/209061715" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#209061715">(Sep 04 2020 at 07:10)</a>:</h4>
<p>I'm no expert at designing these things, happy to accept improvements.</p>



<a name="209087080"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/209087080" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#209087080">(Sep 04 2020 at 12:23)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110596">Rob Lewis</span> <a href="#narrow/stream/113488-general/topic/Lean.20project.20repository.20prototype/near/209061605">said</a>:</p>
<blockquote>
<p>I believe it doesn't leave behind the binary, no. But it runs <code>leanpkg test</code> which first builds <code>src</code> and then <code>test</code> if it exists.</p>
</blockquote>
<p>Ah that's awesome! Didn't know that (sounds like you may indeed be an expert then :D)</p>



<a name="209150411"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/209150411" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#209150411">(Sep 04 2020 at 23:39)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110596">Rob Lewis</span> <a href="#narrow/stream/113488-general/topic/Lean.20project.20repository.20prototype/near/207983954">said</a>:</p>
<blockquote>
<p>Just to update people on the status here: I've written some Github Actions scripts that will help maintain your projects. See the recommendations <a href="https://leanprover-community.github.io/ci.html">here</a>. These are still in beta so please report bugs/annoying behavior.</p>
<p>If your project depends only on mathlib (or on nothing at all), and nothing depends on your project, these scripts are really all you need for CI. But you should add it to the <a href="https://github.com/leanprover-contrib/leanprover-contrib/blob/master/projects/projects.yml">contrib repository</a> anyway. This will help if other people want to use your project as a dependency. It will also help with publicity -- I have a draft of a page for the leanprover-community site that will display the checked-in projects with compatibility information.</p>
</blockquote>
<p>OK yeah dropping in this action indeed worked perfectly :) thanks!</p>



<a name="209494288"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/209494288" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#209494288">(Sep 09 2020 at 10:33)</a>:</h4>
<p>Another reminder to people, set up some <a href="https://leanprover-community.github.io/ci.html">CI</a> for your project and add it to the <a href="https://leanprover-community.github.io/lean_projects.html">list of external projects</a>! Once the list is a little more populated we should start linking there.</p>



<a name="209692313"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/209692313" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bhavik Mehta <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#209692313">(Sep 10 2020 at 18:53)</a>:</h4>
<p>Out of curiosity, does this give me compiled oleans I can download somewhere like mathlib does?</p>



<a name="209700698"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/209700698" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#209700698">(Sep 10 2020 at 19:54)</a>:</h4>
<p>No, but we could potentially have the CI scripts create github actions artifacts and then maybe have <code>leanproject</code> try to get those for non-mathlib projects. (Maybe this is too much of a step backwards though, since we moved away from that sort of thing due to people hitting GitHub API limits.)</p>



<a name="209701174"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/209701174" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bhavik Mehta <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#209701174">(Sep 10 2020 at 19:57)</a>:</h4>
<p>Aren't the projects already being compiled by CI when there's a new version of mathlib though - so the limits which could be hit are storage of oleans rather then computation usage</p>



<a name="209701396"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/209701396" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#209701396">(Sep 10 2020 at 19:59)</a>:</h4>
<p>Sorry, I was unclear. I meant that <code>leanproject</code> users (maybe it was still called <code>update-mathlib</code> then?) were hitting GitHub's API limits when they tried to download oleans that were hosted on GitHub.</p>



<a name="209701585"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/209701585" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bhavik Mehta <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#209701585">(Sep 10 2020 at 20:00)</a>:</h4>
<p>Ah I see, makes sense</p>



<a name="209701620"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/209701620" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#209701620">(Sep 10 2020 at 20:01)</a>:</h4>
<p>Mathlib's olean files are hosted on Azure right now, and I think it would be difficult to allow random Lean projects to upload their own oleans while keeping the credentials secure.</p>



<a name="209756066"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20project%20repository%20prototype/near/209756066" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.20project.20repository.20prototype.html#209756066">(Sep 11 2020 at 09:02)</a>:</h4>
<p>Yeah, I agree with <span class="user-mention" data-user-id="123965">@Bryan Gin-ge Chen</span> here. We can't allow arbitrary repos to upload to Azure without making it "free unlimited file storage for everyone." We could change the action to upload an artifact which you could download by hand. IIRC, at least when we started using Actions, there was no way to map a commit hash to a particular artifact. And this isn't even well defined, you can run the same action multiple times on the same commit. So "leanproject but downloading from Actions artifacts instead of Azure" doesn't work.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>