---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/aliases.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/aliases.html">aliases</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="249561570"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/aliases/near/249561570" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/aliases.html#249561570">(Aug 16 2021 at 08:29)</a>:</h4>
<p>Do we have a policy about lemma restating? In recent PRs we have both:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">protected</span> <span class="kd">lemma</span> <span class="n">lipschitz</span> <span class="o">:</span> <span class="n">lipschitz_with</span> <span class="mi">1</span> <span class="n">e</span> <span class="o">:=</span> <span class="n">e.isometry.lipschitz</span>

<span class="kn">protected</span> <span class="kd">lemma</span> <span class="n">antilipschitz</span> <span class="o">:</span> <span class="n">antilipschitz_with</span> <span class="mi">1</span> <span class="n">e</span> <span class="o">:=</span> <span class="n">e.isometry.antilipschitz</span>

<span class="kd">@[simp]</span> <span class="kd">lemma</span> <span class="n">ediam_image</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">set</span> <span class="n">P</span><span class="o">)</span> <span class="o">:</span> <span class="n">emetric.diam</span> <span class="o">(</span><span class="n">e</span> <span class="bp">''</span> <span class="n">s</span><span class="o">)</span> <span class="bp">=</span> <span class="n">emetric.diam</span> <span class="n">s</span> <span class="o">:=</span>
<span class="n">e.isometry.ediam_image</span> <span class="n">s</span>

<span class="kd">@[simp]</span> <span class="kd">lemma</span> <span class="n">diam_image</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">set</span> <span class="n">P</span><span class="o">)</span> <span class="o">:</span> <span class="n">metric.diam</span> <span class="o">(</span><span class="n">e</span> <span class="bp">''</span> <span class="n">s</span><span class="o">)</span> <span class="bp">=</span> <span class="n">metric.diam</span> <span class="n">s</span> <span class="o">:=</span>
<span class="n">e.isometry.diam_image</span> <span class="n">s</span>

<span class="kd">@[simp]</span> <span class="kd">lemma</span> <span class="n">comp_continuous_on_iff</span> <span class="o">{</span><span class="n">f</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">P</span><span class="o">}</span> <span class="o">{</span><span class="n">s</span> <span class="o">:</span> <span class="n">set</span> <span class="n">α</span><span class="o">}</span> <span class="o">:</span>
  <span class="n">continuous_on</span> <span class="o">(</span><span class="n">e</span> <span class="bp">∘</span> <span class="n">f</span><span class="o">)</span> <span class="n">s</span> <span class="bp">↔</span> <span class="n">continuous_on</span> <span class="n">f</span> <span class="n">s</span> <span class="o">:=</span>
<span class="n">e.isometry.comp_continuous_on_iff</span>

<span class="kd">@[simp]</span> <span class="kd">lemma</span> <span class="n">comp_continuous_iff</span> <span class="o">{</span><span class="n">f</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">P</span><span class="o">}</span> <span class="o">:</span>
  <span class="n">continuous</span> <span class="o">(</span><span class="n">e</span> <span class="bp">∘</span> <span class="n">f</span><span class="o">)</span> <span class="bp">↔</span> <span class="n">continuous</span> <span class="n">f</span> <span class="o">:=</span>
<span class="n">e.isometry.comp_continuous_iff</span>
</code></pre></div>
<p>in <span class="user-mention" data-user-id="260507">@Heather Macbeth</span> <a href="https://github.com/leanprover-community/mathlib/issues/8660">#8660</a> and the whole <a href="https://github.com/leanprover-community/mathlib/issues/8693">#8693</a> by <span class="user-mention" data-user-id="387244">@Yaël Dillies</span></p>



<a name="249561609"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/aliases/near/249561609" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/aliases.html#249561609">(Aug 16 2021 at 08:29)</a>:</h4>
<p>I don't have an opinion here. I'm frequently tempted to participate in this inflation but I'm always hesitant.</p>



<a name="249561668"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/aliases/near/249561668" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/aliases.html#249561668">(Aug 16 2021 at 08:30)</a>:</h4>
<p>I copied this from similar lemmas for linear_isometries, eg <a href="https://leanprover-community.github.io/mathlib_docs/find/linear_isometry.lipschitz">docs#linear_isometry.lipschitz</a></p>



<a name="249561844"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/aliases/near/249561844" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/aliases.html#249561844">(Aug 16 2021 at 08:32)</a>:</h4>
<p>I think we do this routinely when structures and dot notation are involved</p>



<a name="249561845"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/aliases/near/249561845" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/aliases.html#249561845">(Aug 16 2021 at 08:32)</a>:</h4>
<p>The <code>continuous</code> lemmas were already duplicated (from when does git blame say?). I would be fine with not duplicating them but yeah the dot notation needed becomes quite unwieldy.</p>



<a name="249561965"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/aliases/near/249561965" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/aliases.html#249561965">(Aug 16 2021 at 08:34)</a>:</h4>
<p>In particular, isn't  <code>e.isometry.diam_image</code> a statement about <code>⇑e.isometry</code> not <code>⇑e</code>, meaning the lemmas aren't duplicates <em>syntactically</em>.</p>



<a name="249561971"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/aliases/near/249561971" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/aliases.html#249561971">(Aug 16 2021 at 08:34)</a>:</h4>
<p>Going on a tangent, could <code> a extends b</code> not only declare <code>a.to_b</code>, but also <code>a.to_c when </code>b extends c`?</p>



<a name="249562001"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/aliases/near/249562001" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/aliases.html#249562001">(Aug 16 2021 at 08:34)</a>:</h4>
<p>That's a bad idea Yaël because you now need lemmas about every transitive conversion not just every direct conversion</p>



<a name="249562051"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/aliases/near/249562051" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/aliases.html#249562051">(Aug 16 2021 at 08:35)</a>:</h4>
<p>Ah okay. And how is it done for coercions ?</p>



<a name="249562108"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/aliases/near/249562108" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/aliases.html#249562108">(Aug 16 2021 at 08:36)</a>:</h4>
<p><a href="https://leanprover-community.github.io/mathlib_docs/find/coe_coe">docs#coe_coe</a> reduces transitive coercions to direct ones</p>



<a name="249562138"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/aliases/near/249562138" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/aliases.html#249562138">(Aug 16 2021 at 08:36)</a>:</h4>
<p>In fact with new style structures lean will take <code>a.to_c</code> as syntax for <code>a.to_b.to_c</code> anyway.</p>



<a name="249562264"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/aliases/near/249562264" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/aliases.html#249562264">(Aug 16 2021 at 08:38)</a>:</h4>
<p>I'm also asking in the context of <a href="#narrow/stream/113488-general/topic/dot.20notation.20deficiency/near/249471794">https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/dot.20notation.20deficiency/near/249471794</a></p>



<a name="249562283"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/aliases/near/249562283" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/aliases.html#249562283">(Aug 16 2021 at 08:39)</a>:</h4>
<p>which shows that some duplication is probably unavoidable to keep things under control.</p>



<a name="249562725"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/aliases/near/249562725" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/aliases.html#249562725">(Aug 16 2021 at 08:45)</a>:</h4>
<p>I think the problem is less about keeping verbosity under control, and more about how our use of coercions in structures means that lemmas about a base structure are never a syntactic match for the derived structure; for instance, <code>add_monoid_hom.map_add</code> is a lemma about <code>add_monoid_hom.coe_to_fun</code>, <code>linear_map.map_add</code> is a lemma about <code>linear_map.coe_to_fun</code>, etc. If you use <code>lm.to_add_monoid_hom.map_add</code> instead of <code>lm.map_add</code> you get a proof about <code>⇑lm.to_add_monoid_hom (x + y)</code> instead of <code>⇑lm (x + y)</code>. They're all defeq as proofs, but that's not enough for <code>rw</code> or <code>simp</code>.</p>



<a name="249562757"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/aliases/near/249562757" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/aliases.html#249562757">(Aug 16 2021 at 08:45)</a>:</h4>
<p>I have a proposal for (part of a) solution: typeclasses!</p>



<a name="249562839"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/aliases/near/249562839" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/aliases.html#249562839">(Aug 16 2021 at 08:46)</a>:</h4>
<p>This is the proposal that came up before, right?</p>



<a name="249562868"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/aliases/near/249562868" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/aliases.html#249562868">(Aug 16 2021 at 08:47)</a>:</h4>
<p>Yes, I've been working on it a bit in the past months.</p>



<a name="249562895"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/aliases/near/249562895" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/aliases.html#249562895">(Aug 16 2021 at 08:47)</a>:</h4>
<p>My memory of it is that <a href="https://github.com/leanprover-community/lean/pull/557">https://github.com/leanprover-community/lean/pull/557</a> would probably not only make it easier, but would also make it more compatible with lean4</p>



<a name="249563066"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/aliases/near/249563066" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/aliases.html#249563066">(Aug 16 2021 at 08:49)</a>:</h4>
<p>So the idea is that all types that extend e.g. <code>mul_hom</code> would have a <code>mul_hom_class</code> instance. Then <code>map_mul</code> can be a <code>simp</code> lemma assuming <code>mul_hom_class</code>. <a href="https://github.com/leanprover-community/mathlib/blob/fun_like/src/algebra/group/hom.lean#L208">For example, see this section</a></p>



<a name="249563309"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/aliases/near/249563309" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/aliases.html#249563309">(Aug 16 2021 at 08:53)</a>:</h4>
<p>Presumably this pattern can be generalized to a <code>lipschitz_with</code> proof for all types extending <code>isometry</code>.</p>



<a name="249563399"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/aliases/near/249563399" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/aliases.html#249563399">(Aug 16 2021 at 08:54)</a>:</h4>
<p>This fails if we don't get the common ground for a lemma as a typeclass.</p>



<a name="249563401"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/aliases/near/249563401" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/aliases.html#249563401">(Aug 16 2021 at 08:54)</a>:</h4>
<p><span class="user-mention silent" data-user-id="310045">Eric Wieser</span> <a href="#narrow/stream/113488-general/topic/aliases/near/249562895">said</a>:</p>
<blockquote>
<p>My memory of it is that <a href="https://github.com/leanprover-community/lean/pull/557">https://github.com/leanprover-community/lean/pull/557</a> would probably not only make it easier, but would also make it more compatible with lean4</p>
</blockquote>
<p>Indeed, <a href="https://github.com/leanprover-community/mathlib/blob/fun_like/src/data/fun_like.lean#L65">these lines</a> are essentially the same backport.</p>



<a name="249563422"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/aliases/near/249563422" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/aliases.html#249563422">(Aug 16 2021 at 08:55)</a>:</h4>
<p>Eg, are there several ways to get a <code>map_mul</code>-like lemma?</p>



<a name="249563470"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/aliases/near/249563470" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/aliases.html#249563470">(Aug 16 2021 at 08:55)</a>:</h4>
<p><span class="user-mention silent" data-user-id="238446">Anne Baanen</span> <a href="#narrow/stream/113488-general/topic/aliases/near/249563309">said</a>:</p>
<blockquote>
<p>Presumably this pattern can be generalized to a <code>lipschitz_with</code> proof for all types extending <code>linear_isometry</code>.</p>
</blockquote>
<p><a href="https://leanprover-community.github.io/mathlib_docs/find/isometry">docs#isometry</a>, not <a href="https://leanprover-community.github.io/mathlib_docs/find/linear_isometry">docs#linear_isometry</a>, not that it affects your point.</p>



<a name="249563535"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/aliases/near/249563535" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/aliases.html#249563535">(Aug 16 2021 at 08:56)</a>:</h4>
<p>If we replaced some words by others, this discussion starts very much looking like the order refactor</p>



<a name="249563603"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/aliases/near/249563603" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/aliases.html#249563603">(Aug 16 2021 at 08:57)</a>:</h4>
<p><span class="user-mention silent" data-user-id="387244">Yaël Dillies</span> <a href="#narrow/stream/113488-general/topic/aliases/near/249563422">said</a>:</p>
<blockquote>
<p>Eg, are there several ways to get a <code>map_mul</code>-like lemma?</p>
</blockquote>
<p>Definitely! There are many <code>_hom</code>s that have <code>map_mul</code>: <code>monoid_hom</code>, <code>monoid_with_zero_hom</code>, <code>ring_hom</code>, ... Each of those can have a <code>mul_hom_class</code> instance (via <code>monoid_hom_class.to_mul_hom_class</code> in most cases I assume)</p>



<a name="249563899"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/aliases/near/249563899" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/aliases.html#249563899">(Aug 16 2021 at 09:00)</a>:</h4>
<p><span class="user-mention silent" data-user-id="387244">Yaël Dillies</span> <a href="#narrow/stream/113488-general/topic/aliases/near/249563535">said</a>:</p>
<blockquote>
<p>If we replaced some words by others, this discussion starts very much looking like the order refactor</p>
</blockquote>
<p>I claim this is not really a coincidence, since typeclasses provide a nice way to denote the set of all types with an operation (<code>coe_fn</code>, <code>le</code>) that satisfies some properties (<code>map_mul</code>, <code>mul_le_mul</code>).</p>



<a name="249564061"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/aliases/near/249564061" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/aliases.html#249564061">(Aug 16 2021 at 09:02)</a>:</h4>
<p>By allowing typeclass search in <code>simp</code> we basically get automation for the positive fragment of proposition logic for specific propositions (namely those tagged <code>@[class]</code>), along with the automation for equality that <code>simp</code> provides.</p>



<a name="249564229"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/aliases/near/249564229" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/aliases.html#249564229">(Aug 16 2021 at 09:04)</a>:</h4>
<p><span class="user-mention silent" data-user-id="260507">Heather Macbeth</span> <a href="#narrow/stream/113488-general/topic/aliases/near/249563470">said</a>:</p>
<blockquote>
<p><a href="https://leanprover-community.github.io/mathlib_docs/find/isometry">docs#isometry</a>, not <a href="https://leanprover-community.github.io/mathlib_docs/find/linear_isometry">docs#linear_isometry</a>, not that it affects your point.</p>
</blockquote>
<p>Ah, this invalidates some of my messages above; I assumed that <code>isometry</code> was bundled and defined as roughly <code>{f // isometry f}</code></p>



<a name="249564389"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/aliases/near/249564389" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/aliases.html#249564389">(Aug 16 2021 at 09:06)</a>:</h4>
<p>There is <a href="https://leanprover-community.github.io/mathlib_docs/find/isometric">docs#isometric</a> which is exactly this, and we have (or will have) <code>linear_isometry.to_isometric</code>, <code>affine_isometry.to_isometric</code>.  So if it's more convenient the proof can go <code>f.to_isometric.lipschitz</code>.</p>



<a name="249564526"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/aliases/near/249564526" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/aliases.html#249564526">(Aug 16 2021 at 09:08)</a>:</h4>
<p><span class="user-mention silent" data-user-id="260507">Heather Macbeth</span> <a href="#narrow/stream/113488-general/topic/aliases/near/249564389">said</a>:</p>
<blockquote>
<p>There is <a href="https://leanprover-community.github.io/mathlib_docs/find/isometric">docs#isometric</a> which is exactly this, </p>
</blockquote>
<p>Actually I guess that's not true, since <a href="https://leanprover-community.github.io/mathlib_docs/find/isometric">docs#isometric</a> requires it be an equivalence, not just a map.  It's <code>linear_isometry_equiv.to_isometric</code>, not <code>linear_isometry.to_isometric</code>.</p>



<a name="249564574"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/aliases/near/249564574" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/aliases.html#249564574">(Aug 16 2021 at 09:09)</a>:</h4>
<p>Using an adjective like <code>isometric</code> for the name of a structure in <code>Type</code> seems weird to me (especially since we call the linear version an <code>*_isometry_*</code>)</p>



<a name="249564751"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/aliases/near/249564751" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/aliases.html#249564751">(Aug 16 2021 at 09:11)</a>:</h4>
<p>Yeah, I would have expected <code>isometric</code> to be the Prop one</p>



<a name="249565020"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/aliases/near/249565020" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/aliases.html#249565020">(Aug 16 2021 at 09:15)</a>:</h4>
<p>So we can reuse the insight we gained from the order refactor! That is, have typeclasses "per lemma" and then the meaningful typeclasses each extending some of them.</p>



<a name="249565161"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/aliases/near/249565161" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/aliases.html#249565161">(Aug 16 2021 at 09:17)</a>:</h4>
<p>I'm a little pessimistic we'll learn the opposite of what we learnt there; that the approach doesn't scale, and we got away with it because ordered monoids are used way less often than bundled maps. It would still be good to proceed; either we learn that the appoach isn't as good as we think it is, or the problem goes away.</p>



<a name="249565425"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/aliases/near/249565425" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/aliases.html#249565425">(Aug 16 2021 at 09:20)</a>:</h4>
<p>I expect the opposite might turn out to be the case: we have an enormous pile of <code>simp</code> lemmas with head symbol <code>coe_fn</code>, so removing some of them from the <code>simp</code> set and using typeclasses instead, which have more recognizable head symbols, will scale better in number of <code>_hom</code>s × number of <code>map_</code>s.</p>



<a name="249566170"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/aliases/near/249566170" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/aliases.html#249566170">(Aug 16 2021 at 09:29)</a>:</h4>
<p>Sooo... who will refactor?</p>



<a name="249566191"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/aliases/near/249566191" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/aliases.html#249566191">(Aug 16 2021 at 09:29)</a>:</h4>
<p>Thanks for volunteering Yaël!</p>



<a name="249570747"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/aliases/near/249570747" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/aliases.html#249570747">(Aug 16 2021 at 10:16)</a>:</h4>
<p>I'm slowly working on <a href="https://github.com/leanprover-community/mathlib/tree/fun_like">branch#fun_like</a>. Feel free to fix the build errors :)</p>



<a name="249572463"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/aliases/near/249572463" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/aliases.html#249572463">(Aug 16 2021 at 10:39)</a>:</h4>
<p>So the idea is that we used to deal with group homs as a typeclass predicate on bare functions, and then we switched to bundled homs, and now we're trying bundled homs together with a typeclass predicate on the bundled hom?</p>



<a name="249573500"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/aliases/near/249573500" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/aliases.html#249573500">(Aug 16 2021 at 10:52)</a>:</h4>
<p>The predicate goes on the type of the bundled hom, not the hom itself</p>



<a name="249574412"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/aliases/near/249574412" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/aliases.html#249574412">(Aug 16 2021 at 11:04)</a>:</h4>
<p>Aah yes! Perhaps that's a key difference!</p>



<a name="249574478"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/aliases/near/249574478" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/aliases.html#249574478">(Aug 16 2021 at 11:05)</a>:</h4>
<p>Indeed, this should avoid all the defeq "abuse" that made the old typeclass predicates hard to work with. They aren't called <em>type</em> classes for nothing :)</p>



<a name="249575752"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/aliases/near/249575752" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/aliases.html#249575752">(Aug 16 2021 at 11:23)</a>:</h4>
<p><span class="user-mention silent" data-user-id="238446">Anne Baanen</span> <a href="#narrow/stream/113488-general/topic/aliases/near/249570747">said</a>:</p>
<blockquote>
<p>I'm slowly working on <a href="https://github.com/leanprover-community/mathlib/tree/fun_like">branch#fun_like</a>. Feel free to fix the build errors :)</p>
</blockquote>
<p>Will do!</p>



<a name="271762084"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/aliases/near/271762084" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/aliases.html#271762084">(Feb 13 2022 at 19:52)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110031">Patrick Massot</span> <a href="#narrow/stream/113488-general/topic/aliases/near/249566191">said</a>:</p>
<blockquote>
<p>Thanks for volunteering Yaël!</p>
</blockquote>
<p>Coming back to this, I actually am, now!</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>