---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/context.20like.20expr.20lists.3F.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/context.20like.20expr.20lists.3F.html">context like expr lists?</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="123654389"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/context%20like%20expr%20lists%3F/near/123654389" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob von Raumer <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/context.20like.20expr.20lists.3F.html#123654389">(Mar 13 2018 at 13:24)</a>:</h4>
<p>How do I construct a list of expressions where later entries can depend on earlier ones? Like <code>(A : Sort u) (a : A)</code> as a minimal example... Do I have to use local constants?</p>



<a name="123654415"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/context%20like%20expr%20lists%3F/near/123654415" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/context.20like.20expr.20lists.3F.html#123654415">(Mar 13 2018 at 13:25)</a>:</h4>
<p>when you say list of expressions, are you working in <code>meta</code> land?</p>



<a name="123654423"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/context%20like%20expr%20lists%3F/near/123654423" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob von Raumer <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/context.20like.20expr.20lists.3F.html#123654423">(Mar 13 2018 at 13:25)</a>:</h4>
<p>Yes</p>



<a name="123654424"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/context%20like%20expr%20lists%3F/near/123654424" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/context.20like.20expr.20lists.3F.html#123654424">(Mar 13 2018 at 13:26)</a>:</h4>
<p>it's just <code>list expr</code></p>



<a name="123654473"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/context%20like%20expr%20lists%3F/near/123654473" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/context.20like.20expr.20lists.3F.html#123654473">(Mar 13 2018 at 13:26)</a>:</h4>
<p>all that binding stuff is handled by you</p>



<a name="123654481"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/context%20like%20expr%20lists%3F/near/123654481" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob von Raumer <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/context.20like.20expr.20lists.3F.html#123654481">(Mar 13 2018 at 13:26)</a>:</h4>
<p>Yes, but how is the above example represented for example?</p>



<a name="123654502"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/context%20like%20expr%20lists%3F/near/123654502" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/context.20like.20expr.20lists.3F.html#123654502">(Mar 13 2018 at 13:27)</a>:</h4>
<p>the first expr is <code>`(Sort u)</code>, the second is either <code> `(A)</code> or <code>#0</code> depending on whether <code>A</code> is in context</p>



<a name="123654671"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/context%20like%20expr%20lists%3F/near/123654671" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob von Raumer <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/context.20like.20expr.20lists.3F.html#123654671">(Mar 13 2018 at 13:31)</a>:</h4>
<p>Well at the time I define the list, <code>A</code> is clearly not in context, right?</p>



<a name="123654676"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/context%20like%20expr%20lists%3F/near/123654676" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/context.20like.20expr.20lists.3F.html#123654676">(Mar 13 2018 at 13:31)</a>:</h4>
<p>Maybe; perhaps you are planning for when it is. What's your use case?</p>



<a name="123654723"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/context%20like%20expr%20lists%3F/near/123654723" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob von Raumer <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/context.20like.20expr.20lists.3F.html#123654723">(Mar 13 2018 at 13:32)</a>:</h4>
<p>Just experimenting with the <code>add_inductive</code> API a bit... which is where it should be used as list of parameters or such</p>



<a name="123654735"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/context%20like%20expr%20lists%3F/near/123654735" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob von Raumer <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/context.20like.20expr.20lists.3F.html#123654735">(Mar 13 2018 at 13:33)</a>:</h4>
<p>And <code>meta example : list expr := [\</code>(Sort 1), \`(A)]` immediately gives me "unknown identifier A"..</p>



<a name="123654737"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/context%20like%20expr%20lists%3F/near/123654737" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob von Raumer <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/context.20like.20expr.20lists.3F.html#123654737">(Mar 13 2018 at 13:33)</a>:</h4>
<p><em>sigh</em> How do I escape backticks here?</p>



<a name="123654777"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/context%20like%20expr%20lists%3F/near/123654777" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/context.20like.20expr.20lists.3F.html#123654777">(Mar 13 2018 at 13:34)</a>:</h4>
<p><code>add_inductive</code> doesn't take a list of parameters, it takes <code>ty : expr</code> that specifies the whole type</p>



<a name="123654787"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/context%20like%20expr%20lists%3F/near/123654787" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/context.20like.20expr.20lists.3F.html#123654787">(Mar 13 2018 at 13:34)</a>:</h4>
<p>Since it's a single expression, all the binding is done via <code>expr.pi</code>, and dependencies are done with <code>var</code> (de bruijn variables)</p>



<a name="123654810"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/context%20like%20expr%20lists%3F/near/123654810" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/context.20like.20expr.20lists.3F.html#123654810">(Mar 13 2018 at 13:35)</a>:</h4>
<p>That is, <code>ty</code> should be a closed term</p>



<a name="123654857"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/context%20like%20expr%20lists%3F/near/123654857" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/context.20like.20expr.20lists.3F.html#123654857">(Mar 13 2018 at 13:37)</a>:</h4>
<p>escape backticks with more backticks <code> `` `escaped` `` </code></p>



<a name="123654861"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/context%20like%20expr%20lists%3F/near/123654861" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob von Raumer <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/context.20like.20expr.20lists.3F.html#123654861">(Mar 13 2018 at 13:37)</a>:</h4>
<p>But it takes a list of constructtors, right?</p>



<a name="123654865"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/context%20like%20expr%20lists%3F/near/123654865" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/context.20like.20expr.20lists.3F.html#123654865">(Mar 13 2018 at 13:37)</a>:</h4>
<p>The constructor types are also closed terms</p>



<a name="123654868"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/context%20like%20expr%20lists%3F/near/123654868" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/context.20like.20expr.20lists.3F.html#123654868">(Mar 13 2018 at 13:37)</a>:</h4>
<p>they repeat all the parameters, with the same types</p>



<a name="123654914"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/context%20like%20expr%20lists%3F/near/123654914" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob von Raumer <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/context.20like.20expr.20lists.3F.html#123654914">(Mar 13 2018 at 13:38)</a>:</h4>
<p>Hm, I'd still like to have a data structure like that...</p>



<a name="123654915"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/context%20like%20expr%20lists%3F/near/123654915" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/context.20like.20expr.20lists.3F.html#123654915">(Mar 13 2018 at 13:38)</a>:</h4>
<p>(this is done because constructors may change the binding type, like making things implicit)</p>



<a name="123654921"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/context%20like%20expr%20lists%3F/near/123654921" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/context.20like.20expr.20lists.3F.html#123654921">(Mar 13 2018 at 13:38)</a>:</h4>
<p>Usually, we work in a context, and then it's a <code>list expr</code></p>



<a name="123654928"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/context%20like%20expr%20lists%3F/near/123654928" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/context.20like.20expr.20lists.3F.html#123654928">(Mar 13 2018 at 13:39)</a>:</h4>
<p>the whole tactic state is built around that</p>



<a name="123654931"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/context%20like%20expr%20lists%3F/near/123654931" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/context.20like.20expr.20lists.3F.html#123654931">(Mar 13 2018 at 13:39)</a>:</h4>
<p>that's where local constants come in</p>



<a name="123654988"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/context%20like%20expr%20lists%3F/near/123654988" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob von Raumer <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/context.20like.20expr.20lists.3F.html#123654988">(Mar 13 2018 at 13:40)</a>:</h4>
<p><code>expr</code> could use a bit more documentation somehow, it's really hard to figure out what local constants are</p>



<a name="123655582"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/context%20like%20expr%20lists%3F/near/123655582" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/context.20like.20expr.20lists.3F.html#123655582">(Mar 13 2018 at 13:56)</a>:</h4>
<p><span class="user-mention" data-user-id="110789">@Jakob von Raumer</span> Write what you know and PR it to mathlib/docs/</p>



<a name="123655583"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/context%20like%20expr%20lists%3F/near/123655583" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/context.20like.20expr.20lists.3F.html#123655583">(Mar 13 2018 at 13:56)</a>:</h4>
<p>and then ask about what you don't know</p>



<a name="123655594"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/context%20like%20expr%20lists%3F/near/123655594" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/context.20like.20expr.20lists.3F.html#123655594">(Mar 13 2018 at 13:57)</a>:</h4>
<p>we're trying to make some community-based docs in there</p>



<a name="123655599"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/context%20like%20expr%20lists%3F/near/123655599" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/context.20like.20expr.20lists.3F.html#123655599">(Mar 13 2018 at 13:57)</a>:</h4>
<p>informal and hopefully useful</p>



<a name="123655600"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/context%20like%20expr%20lists%3F/near/123655600" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob von Raumer <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/context.20like.20expr.20lists.3F.html#123655600">(Mar 13 2018 at 13:57)</a>:</h4>
<p>I'll try :)</p>



<a name="123655643"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/context%20like%20expr%20lists%3F/near/123655643" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/context.20like.20expr.20lists.3F.html#123655643">(Mar 13 2018 at 13:58)</a>:</h4>
<p>The rule I usually go for is "if it's not in the reference manual, and it's either not in TPIL/Programming In Lean or it's hard to find, then stick it in mathlib/docs"</p>



<a name="123655655"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/context%20like%20expr%20lists%3F/near/123655655" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob von Raumer <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/context.20like.20expr.20lists.3F.html#123655655">(Mar 13 2018 at 13:59)</a>:</h4>
<p>I think it <em>should</em> be in PIL but it's noted as a TODO there</p>



<a name="123655712"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/context%20like%20expr%20lists%3F/near/123655712" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/context.20like.20expr.20lists.3F.html#123655712">(Mar 13 2018 at 14:00)</a>:</h4>
<p>Then I would urge you to create a short text file called expr.md and simply write some background and then what you're stuck on and PR it to that docs dir. You can assume people have read PIL.</p>



<a name="123705964"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/context%20like%20expr%20lists%3F/near/123705964" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob von Raumer <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/context.20like.20expr.20lists.3F.html#123705964">(Mar 14 2018 at 15:09)</a>:</h4>
<p>What is the purpose of the second <code>name</code> argument to <code>expr.local_const</code>?</p>



<a name="123706023"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/context%20like%20expr%20lists%3F/near/123706023" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob von Raumer <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/context.20like.20expr.20lists.3F.html#123706023">(Mar 14 2018 at 15:10)</a>:</h4>
<p>Ah, got it, pretty printer name...</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>