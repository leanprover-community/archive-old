---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/unknown.20local.20constant.3A.20_ffresh.2E0.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/unknown.20local.20constant.3A.20_ffresh.2E0.html">unknown local constant: _ffresh.0</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="169356858"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/unknown%20local%20constant%3A%20_ffresh.0/near/169356858" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/unknown.20local.20constant.3A.20_ffresh.2E0.html#169356858">(Jun 30 2019 at 22:37)</a>:</h4>
<p>Has anyone seen an otherwise successful <code>def</code> error with <code>unknown local constant: _ffresh.0</code>?</p>



<a name="169356956"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/unknown%20local%20constant%3A%20_ffresh.0/near/169356956" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Simon Hudon <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/unknown.20local.20constant.3A.20_ffresh.2E0.html#169356956">(Jun 30 2019 at 22:41)</a>:</h4>
<p>do you use <code>variable</code> or <code>parameter</code>? Do you use <code>include</code>?</p>



<a name="169357004"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/unknown%20local%20constant%3A%20_ffresh.0/near/169357004" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/unknown.20local.20constant.3A.20_ffresh.2E0.html#169357004">(Jun 30 2019 at 22:43)</a>:</h4>
<p>Yes to all of the above. :-) Changing the name of an argument of the function solved the problem.... Looks bug-ish to me, but I don't have time to minimise now so will proceed with slightly strange argument names!</p>



<a name="169357047"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/unknown%20local%20constant%3A%20_ffresh.0/near/169357047" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Simon Hudon <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/unknown.20local.20constant.3A.20_ffresh.2E0.html#169357047">(Jun 30 2019 at 22:44)</a>:</h4>
<p>you probably have variable <code>x</code>, assumption <code>h</code> mentioning <code>x</code>, <code>include h</code> and then you declare <code>x</code> as an argument to your definition</p>



<a name="169357054"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/unknown%20local%20constant%3A%20_ffresh.0/near/169357054" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Simon Hudon <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/unknown.20local.20constant.3A.20_ffresh.2E0.html#169357054">(Jun 30 2019 at 22:45)</a>:</h4>
<p>Lean does not include the <code>variable</code> but includes <code>h</code></p>



<a name="289281953"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/unknown%20local%20constant%3A%20_ffresh.0/near/289281953" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Andrew Yang <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/unknown.20local.20constant.3A.20_ffresh.2E0.html#289281953">(Jul 12 2022 at 05:53)</a>:</h4>
<p>Has anyone else seen this error? I tried renaming the variables but the error still persists.<br>
A <a href="https://leanprover-community.github.io/mwe.html">#mwe</a> :</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">topology.sheaves.stalks</span>

<span class="kn">open</span> <span class="n">topological_space</span> <span class="n">opposite</span> <span class="n">category_theory</span>

<span class="kd">universes</span> <span class="n">v</span> <span class="n">u</span> <span class="n">w</span>

<span class="kn">namespace</span> <span class="n">Top</span>

<span class="kn">namespace</span> <span class="n">presheaf</span>

<span class="kd">variables</span> <span class="o">{</span><span class="n">X</span> <span class="o">:</span> <span class="n">Top.</span><span class="o">{</span><span class="n">w</span><span class="o">}}</span> <span class="o">{</span><span class="n">C</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">}</span> <span class="o">[</span><span class="n">category.</span><span class="o">{</span><span class="n">v</span><span class="o">}</span> <span class="n">C</span><span class="o">]</span> <span class="o">[</span><span class="n">concrete_category</span> <span class="n">C</span><span class="o">]</span>

<span class="kn">local</span> <span class="kn">attribute</span> <span class="o">[</span><span class="kd">instance</span><span class="o">]</span> <span class="n">concrete_category.has_coe_to_sort</span>

<span class="kd">structure</span> <span class="n">submonoid_presheaf</span> <span class="o">[</span><span class="bp">∀</span> <span class="n">X</span> <span class="o">:</span> <span class="n">C</span><span class="o">,</span> <span class="n">mul_one_class</span> <span class="n">X</span><span class="o">]</span>
  <span class="o">[</span><span class="bp">∀</span> <span class="o">(</span><span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="n">C</span><span class="o">),</span> <span class="n">monoid_hom_class</span> <span class="o">(</span><span class="n">X</span> <span class="bp">⟶</span> <span class="n">Y</span><span class="o">)</span> <span class="n">X</span> <span class="n">Y</span><span class="o">]</span> <span class="o">(</span><span class="n">F</span> <span class="o">:</span> <span class="n">X.presheaf</span> <span class="n">C</span><span class="o">)</span><span class="bp">.</span>

<span class="kd">def</span> <span class="n">localization</span> <span class="o">{</span><span class="n">F</span> <span class="o">:</span> <span class="n">X.presheaf</span> <span class="n">CommRing.</span><span class="o">{</span><span class="n">w</span><span class="o">}}</span> <span class="o">(</span><span class="n">G</span> <span class="o">:</span> <span class="n">F.submonoid_presheaf</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">X.presheaf</span> <span class="n">CommRing</span> <span class="o">:=</span> <span class="gr">sorry</span>

<span class="kd">end</span> <span class="n">presheaf</span>

<span class="kd">end</span> <span class="n">Top</span>
</code></pre></div>



<a name="289320492"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/unknown%20local%20constant%3A%20_ffresh.0/near/289320492" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/unknown.20local.20constant.3A.20_ffresh.2E0.html#289320492">(Jul 12 2022 at 13:08)</a>:</h4>
<p>The error for me is</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">unknown</span> <span class="kn">local</span> <span class="kd">constant</span><span class="o">:</span> <span class="mi">0</span><span class="bp">.</span><span class="n">_fresh.771.40</span>
</code></pre></div>
<p>As far as I'm concerned this is a new error, so you get a point. Congratulations!</p>



<a name="289322970"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/unknown%20local%20constant%3A%20_ffresh.0/near/289322970" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/unknown.20local.20constant.3A.20_ffresh.2E0.html#289322970">(Jul 12 2022 at 13:27)</a>:</h4>
<p>What about the one from 2019 upthread?</p>



<a name="289337484"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/unknown%20local%20constant%3A%20_ffresh.0/near/289337484" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/unknown.20local.20constant.3A.20_ffresh.2E0.html#289337484">(Jul 12 2022 at 15:02)</a>:</h4>
<p>oh darn it</p>



<a name="289343059"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/unknown%20local%20constant%3A%20_ffresh.0/near/289343059" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Junyan Xu <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/unknown.20local.20constant.3A.20_ffresh.2E0.html#289343059">(Jul 12 2022 at 15:38)</a>:</h4>
<p><span class="user-mention" data-user-id="439483">@Andrew Yang</span> <code>G : @submonoid_presheaf _ CommRing _ _ _ _ F</code> works.</p>



<a name="289417361"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/unknown%20local%20constant%3A%20_ffresh.0/near/289417361" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Andrew Yang <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/unknown.20local.20constant.3A.20_ffresh.2E0.html#289417361">(Jul 13 2022 at 05:32)</a>:</h4>
<p>It also works if I use <code>variables {F : X.presheaf CommRing.{w}} (G : F.submonoid_presheaf)</code> instead.<br>
I have no idea why though.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>