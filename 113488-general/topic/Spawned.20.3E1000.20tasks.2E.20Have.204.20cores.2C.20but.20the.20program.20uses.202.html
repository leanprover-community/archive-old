---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/Spawned.20.3E1000.20tasks.2E.20Have.204.20cores.2C.20but.20the.20program.20uses.202.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Spawned.20.3E1000.20tasks.2E.20Have.204.20cores.2C.20but.20the.20program.20uses.202.html">Spawned >1000 tasks. Have 4 cores, but the program uses 2</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="266434964"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Spawned%20%3E1000%20tasks.%20Have%204%20cores%2C%20but%20the%20program%20uses%202/near/266434964" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sofia <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Spawned.20.3E1000.20tasks.2E.20Have.204.20cores.2C.20but.20the.20program.20uses.202.html#266434964">(Dec 30 2021 at 15:05)</a>:</h4>
<p>Hello. I have a program which is trying to spawn over a thousand tasks. I have a 4 core laptop with hyperthreading disabled (suspect), but the program only uses 2 cores. The C++ function hardware_concurrency() returns 4, as does nproc. I do not see why Lean's runtime is using only 2 threads.</p>



<a name="266435020"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Spawned%20%3E1000%20tasks.%20Have%204%20cores%2C%20but%20the%20program%20uses%202/near/266435020" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Spawned.20.3E1000.20tasks.2E.20Have.204.20cores.2C.20but.20the.20program.20uses.202.html#266435020">(Dec 30 2021 at 15:06)</a>:</h4>
<p>Do you invoke <code>lean</code> with the <code>-j</code> flag?</p>



<a name="266435117"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Spawned%20%3E1000%20tasks.%20Have%204%20cores%2C%20but%20the%20program%20uses%202/near/266435117" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sofia <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Spawned.20.3E1000.20tasks.2E.20Have.204.20cores.2C.20but.20the.20program.20uses.202.html#266435117">(Dec 30 2021 at 15:08)</a>:</h4>
<p>I'm using lake and built the program, I'm running the program outside of lean itself (I make this clear as I was using <code>#eval</code> !! before noticing I really should be compiling. :P)</p>
<p>So lets go with no?</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>