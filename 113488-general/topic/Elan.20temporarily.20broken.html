---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/Elan.20temporarily.20broken.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Elan.20temporarily.20broken.html">Elan temporarily broken</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="258188574"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Elan%20temporarily%20broken/near/258188574" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Elan.20temporarily.20broken.html#258188574">(Oct 19 2021 at 12:52)</a>:</h4>
<p>Just a heads-up: I've added an aarch64 build to the latest lean release.  Apparently elan downloads that even if an x86_64 build is available.  Therefore you can't install 3.33.0 using elan at the moment.  Sebastian has already fixed this on master.</p>
<p><span class="user-mention" data-user-id="110024">@Sebastian Ullrich</span> Can you make a new release please?  Or should we change the naming scheme to <code>lean-3.33.0-aarch64-linux.tar.gz</code> so that we don't break old elan versions?</p>



<a name="258188734"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Elan%20temporarily%20broken/near/258188734" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Elan.20temporarily.20broken.html#258188734">(Oct 19 2021 at 12:53)</a>:</h4>
<p>Pulled the aarch64 build for now.</p>



<a name="258188939"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Elan%20temporarily%20broken/near/258188939" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastian Ullrich <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Elan.20temporarily.20broken.html#258188939">(Oct 19 2021 at 12:55)</a>:</h4>
<p>Ok, I've cancelled the release</p>



<a name="258188943"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Elan%20temporarily%20broken/near/258188943" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Elan.20temporarily.20broken.html#258188943">(Oct 19 2021 at 12:55)</a>:</h4>
<p><a href="https://github.com/leanprover/elan/pull/51">https://github.com/leanprover/elan/pull/51</a></p>



<a name="258190287"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Elan%20temporarily%20broken/near/258190287" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Elan.20temporarily.20broken.html#258190287">(Oct 19 2021 at 13:03)</a>:</h4>
<p>And apparently I've broken elan again...  Do you want to fix it or should I submit another one liner?</p>



<a name="258191130"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Elan%20temporarily%20broken/near/258191130" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastian Ullrich <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Elan.20temporarily.20broken.html#258191130">(Oct 19 2021 at 13:09)</a>:</h4>
<p>I fixed it, I think</p>



<a name="258192021"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Elan%20temporarily%20broken/near/258192021" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastian Ullrich <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Elan.20temporarily.20broken.html#258192021">(Oct 19 2021 at 13:15)</a>:</h4>
<p>Wait... I think the fix made it worse. Now not even <code>linux.tar.gz</code> is unique.</p>



<a name="258192745"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Elan%20temporarily%20broken/near/258192745" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Elan.20temporarily.20broken.html#258192745">(Oct 19 2021 at 13:19)</a>:</h4>
<p>Ah, I see.  The old idea was to check if the release tarball contains <code>linux</code>, now we're checking for <code>linux.tar.gz</code>.</p>



<a name="258192914"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Elan%20temporarily%20broken/near/258192914" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Elan.20temporarily.20broken.html#258192914">(Oct 19 2021 at 13:20)</a>:</h4>
<p>So there is no way to add new architectures without breaking old elan versions or calling it <code>penguin-aarch64</code>....</p>



<a name="258194195"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Elan%20temporarily%20broken/near/258194195" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastian Ullrich <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Elan.20temporarily.20broken.html#258194195">(Oct 19 2021 at 13:29)</a>:</h4>
<p>Yeah, there is no good solution here</p>



<a name="258194783"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Elan%20temporarily%20broken/near/258194783" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Elan.20temporarily.20broken.html#258194783">(Oct 19 2021 at 13:32)</a>:</h4>
<p>Yes, I can only see these two solutions:</p>
<ol>
<li>Break old elan installations in a cryptic and hard-to-recover way.</li>
<li>Use <code>lin-aarch64</code> and <code>mac-aarch64</code> for the new architecture names.</li>
</ol>



<a name="258196048"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Elan%20temporarily%20broken/near/258196048" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastian Ullrich <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Elan.20temporarily.20broken.html#258196048">(Oct 19 2021 at 13:40)</a>:</h4>
<p>Any weird name that makes them be listed after the existing downloads would also work</p>



<a name="258196148"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Elan%20temporarily%20broken/near/258196148" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastian Ullrich <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Elan.20temporarily.20broken.html#258196148">(Oct 19 2021 at 13:41)</a>:</h4>
<p><code>linux_aarch64</code> might work</p>



<a name="258196252"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Elan%20temporarily%20broken/near/258196252" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Elan.20temporarily.20broken.html#258196252">(Oct 19 2021 at 13:42)</a>:</h4>
<p>That will still match against <code>linux</code>, wouldn't it?</p>



<a name="258196333"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Elan%20temporarily%20broken/near/258196333" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Elan.20temporarily.20broken.html#258196333">(Oct 19 2021 at 13:42)</a>:</h4>
<p>Ah, you mean github sorts the filenames and elan picks the first match? Hmmm.</p>



<a name="258196518"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Elan%20temporarily%20broken/near/258196518" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Elan.20temporarily.20broken.html#258196518">(Oct 19 2021 at 13:44)</a>:</h4>
<p>Indeed, that works!</p>



<a name="258202113"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Elan%20temporarily%20broken/near/258202113" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Elan.20temporarily.20broken.html#258202113">(Oct 19 2021 at 14:17)</a>:</h4>
<p>I predict that 37 weeks from now, github changes their LOCALE, and hence the way these files are sorted.</p>



<a name="258203034"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Elan%20temporarily%20broken/near/258203034" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastian Ullrich <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Elan.20temporarily.20broken.html#258203034">(Oct 19 2021 at 14:22)</a>:</h4>
<p>Hey, our HTML parsing code has otherwise been working for over three years</p>



<a name="258203035"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Elan%20temporarily%20broken/near/258203035" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Elan.20temporarily.20broken.html#258203035">(Oct 19 2021 at 14:22)</a>:</h4>
<p>37 weeks from now everybody will have hopefully upgraded their elan though.</p>



<a name="258203177"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Elan%20temporarily%20broken/near/258203177" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Elan.20temporarily.20broken.html#258203177">(Oct 19 2021 at 14:23)</a>:</h4>
<p><code>elan</code> tends to be among those things that I only update once every 37 months... it just works silently in the background (-;</p>



<a name="258203231"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Elan%20temporarily%20broken/near/258203231" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastian Ullrich <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Elan.20temporarily.20broken.html#258203231">(Oct 19 2021 at 14:23)</a>:</h4>
<p>I've updated elan and will do a release wehn everything looks good</p>



<a name="258203301"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Elan%20temporarily%20broken/near/258203301" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Elan.20temporarily.20broken.html#258203301">(Oct 19 2021 at 14:24)</a>:</h4>
<p>Anyway, I'm not to worried about this breakage. We just need to remember that if someone pops in with a cryptic and hard-to-recover error, that we point them to this thread.</p>



<a name="258203311"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Elan%20temporarily%20broken/near/258203311" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Elan.20temporarily.20broken.html#258203311">(Oct 19 2021 at 14:24)</a>:</h4>
<p>If you're on nixos, there's an elan package.</p>



<a name="258203363"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Elan%20temporarily%20broken/near/258203363" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Elan.20temporarily.20broken.html#258203363">(Oct 19 2021 at 14:24)</a>:</h4>
<p>Unfortunately not all my boxes are on nixos yet.</p>



<a name="258203761"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Elan%20temporarily%20broken/near/258203761" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Elan.20temporarily.20broken.html#258203761">(Oct 19 2021 at 14:27)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110024">Sebastian Ullrich</span> <a href="#narrow/stream/113488-general/topic/Elan.20temporarily.20broken/near/258203231">said</a>:</p>
<blockquote>
<p>I've updated elan and will do a release wehn everything looks good</p>
</blockquote>
<p>I see, you've decided to rewrite history and remove today. <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span></p>



<a name="258204394"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Elan%20temporarily%20broken/near/258204394" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastian Ullrich <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Elan.20temporarily.20broken.html#258204394">(Oct 19 2021 at 14:30)</a>:</h4>
<p><em>waves hand</em> These aren't the commits you're looking for</p>



<a name="258205269"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Elan%20temporarily%20broken/near/258205269" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastian Ullrich <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Elan.20temporarily.20broken.html#258205269">(Oct 19 2021 at 14:35)</a>:</h4>
<p>Ah, I didn't see your PR until now</p>



<a name="258211000"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Elan%20temporarily%20broken/near/258211000" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Elan.20temporarily.20broken.html#258211000">(Oct 19 2021 at 15:05)</a>:</h4>
<p>Lean 3 PR is up: <a href="https://github.com/leanprover-community/lean/pull/630">https://github.com/leanprover-community/lean/pull/630</a></p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>