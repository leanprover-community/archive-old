---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/Simp.20and.20.60equiv.2Erefl.20.CE.B1.60.20vs.20.60(1.20.3A.20perm.20.20.CE.B1).60.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Simp.20and.20.60equiv.2Erefl.20.CE.B1.60.20vs.20.60(1.20.3A.20perm.20.20.CE.B1).60.html">Simp and `equiv.refl α` vs `(1 : perm  α)`</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="221563291"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Simp%20and%20%60equiv.refl%20%CE%B1%60%20vs%20%60%281%20%3A%20perm%20%20%CE%B1%29%60/near/221563291" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Simp.20and.20.60equiv.2Erefl.20.CE.B1.60.20vs.20.60(1.20.3A.20perm.20.20.CE.B1).60.html#221563291">(Jan 04 2021 at 18:44)</a>:</h4>
<p>Is there any way to tell <code>simp</code> that it is allowed to reduce <code>(1 : perm  α)</code> to <code>equiv.refl α</code> when looking for lemmas (and vice versa)? Or do we have to copy every simp lemma about <code>refl</code> for <code>1</code> too?</p>



<a name="221594426"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Simp%20and%20%60equiv.refl%20%CE%B1%60%20vs%20%60%281%20%3A%20perm%20%20%CE%B1%29%60/near/221594426" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Simp.20and.20.60equiv.2Erefl.20.CE.B1.60.20vs.20.60(1.20.3A.20perm.20.20.CE.B1).60.html#221594426">(Jan 04 2021 at 23:18)</a>:</h4>
<p>You can simplify <code>1</code> to <code>refl</code>.</p>



<a name="221595228"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Simp%20and%20%60equiv.refl%20%CE%B1%60%20vs%20%60%281%20%3A%20perm%20%20%CE%B1%29%60/near/221595228" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Simp.20and.20.60equiv.2Erefl.20.CE.B1.60.20vs.20.60(1.20.3A.20perm.20.20.CE.B1).60.html#221595228">(Jan 04 2021 at 23:30)</a>:</h4>
<p>I'm aware of <a href="https://leanprover-community.github.io/mathlib_docs/find/equiv.perm.one_def">docs#equiv.perm.one_def</a></p>



<a name="221595297"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Simp%20and%20%60equiv.refl%20%CE%B1%60%20vs%20%60%281%20%3A%20perm%20%20%CE%B1%29%60/near/221595297" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Simp.20and.20.60equiv.2Erefl.20.CE.B1.60.20vs.20.60(1.20.3A.20perm.20.20.CE.B1).60.html#221595297">(Jan 04 2021 at 23:30)</a>:</h4>
<p>But it's not a simp lemma, and if I made it one then it would prevent lemmas like <code>mul_one</code> firing</p>



<a name="221595441"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Simp%20and%20%60equiv.refl%20%CE%B1%60%20vs%20%60%281%20%3A%20perm%20%20%CE%B1%29%60/near/221595441" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Simp.20and.20.60equiv.2Erefl.20.CE.B1.60.20vs.20.60(1.20.3A.20perm.20.20.CE.B1).60.html#221595441">(Jan 04 2021 at 23:32)</a>:</h4>
<p>Conversely, if I made its reverse a simp lemma, then <a href="https://leanprover-community.github.io/mathlib_docs/find/equiv.trans_refl">docs#equiv.trans_refl</a> would not fire on <code>(e : equiv A B).trans (refl B)</code></p>



<a name="221595482"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Simp%20and%20%60equiv.refl%20%CE%B1%60%20vs%20%60%281%20%3A%20perm%20%20%CE%B1%29%60/near/221595482" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Simp.20and.20.60equiv.2Erefl.20.CE.B1.60.20vs.20.60(1.20.3A.20perm.20.20.CE.B1).60.html#221595482">(Jan 04 2021 at 23:33)</a>:</h4>
<p>As far as I know, you have two choices:</p>
<ul>
<li>duplicate lemmas;</li>
<li>simplify <code>*</code> to <code>trans</code> and <code>1</code> to <code>refl</code>.</li>
</ul>



<a name="221595596"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Simp%20and%20%60equiv.refl%20%CE%B1%60%20vs%20%60%281%20%3A%20perm%20%20%CE%B1%29%60/near/221595596" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Simp.20and.20.60equiv.2Erefl.20.CE.B1.60.20vs.20.60(1.20.3A.20perm.20.20.CE.B1).60.html#221595596">(Jan 04 2021 at 23:35)</a>:</h4>
<p>I suppose there's a third choice, which is make equiv and perm no longer defeq, so that a cast has to be inserted</p>



<a name="221595628"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Simp%20and%20%60equiv.refl%20%CE%B1%60%20vs%20%60%281%20%3A%20perm%20%20%CE%B1%29%60/near/221595628" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Simp.20and.20.60equiv.2Erefl.20.CE.B1.60.20vs.20.60(1.20.3A.20perm.20.20.CE.B1).60.html#221595628">(Jan 04 2021 at 23:35)</a>:</h4>
<p>And then there's only ever one spelling for each</p>



<a name="221595709"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Simp%20and%20%60equiv.refl%20%CE%B1%60%20vs%20%60%281%20%3A%20perm%20%20%CE%B1%29%60/near/221595709" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Simp.20and.20.60equiv.2Erefl.20.CE.B1.60.20vs.20.60(1.20.3A.20perm.20.20.CE.B1).60.html#221595709">(Jan 04 2021 at 23:36)</a>:</h4>
<p>I think I'll probably just go with the duplication for now...</p>



<a name="221596733"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Simp%20and%20%60equiv.refl%20%CE%B1%60%20vs%20%60%281%20%3A%20perm%20%20%CE%B1%29%60/near/221596733" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Simp.20and.20.60equiv.2Erefl.20.CE.B1.60.20vs.20.60(1.20.3A.20perm.20.20.CE.B1).60.html#221596733">(Jan 04 2021 at 23:46)</a>:</h4>
<p>Simplifying to trans and refl loses the ability to use lemmas about monoids, unfortunately. Is it better to simplify in the context of the monoid, and then simplify, or first simplify all to equivs?</p>



<a name="221597133"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Simp%20and%20%60equiv.refl%20%CE%B1%60%20vs%20%60%281%20%3A%20perm%20%20%CE%B1%29%60/near/221597133" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Simp.20and.20.60equiv.2Erefl.20.CE.B1.60.20vs.20.60(1.20.3A.20perm.20.20.CE.B1).60.html#221597133">(Jan 04 2021 at 23:53)</a>:</h4>
<p>Are there any useful lemmas about monoids that don't also exist for <code>equiv</code>?</p>



<a name="221597230"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Simp%20and%20%60equiv.refl%20%CE%B1%60%20vs%20%60%281%20%3A%20perm%20%20%CE%B1%29%60/near/221597230" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Simp.20and.20.60equiv.2Erefl.20.CE.B1.60.20vs.20.60(1.20.3A.20perm.20.20.CE.B1).60.html#221597230">(Jan 04 2021 at 23:55)</a>:</h4>
<p>monoid_hom?</p>



<a name="221597372"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Simp%20and%20%60equiv.refl%20%CE%B1%60%20vs%20%60%281%20%3A%20perm%20%20%CE%B1%29%60/near/221597372" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Simp.20and.20.60equiv.2Erefl.20.CE.B1.60.20vs.20.60(1.20.3A.20perm.20.20.CE.B1).60.html#221597372">(Jan 04 2021 at 23:57)</a>:</h4>
<p>Showing <code>f (a.trans b) = (f a).trans (f b)</code> would feel like an uphill battle if simp rewrote * into trans</p>



<a name="221597634"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Simp%20and%20%60equiv.refl%20%CE%B1%60%20vs%20%60%281%20%3A%20perm%20%20%CE%B1%29%60/near/221597634" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Simp.20and.20.60equiv.2Erefl.20.CE.B1.60.20vs.20.60(1.20.3A.20perm.20.20.CE.B1).60.html#221597634">(Jan 05 2021 at 00:00)</a>:</h4>
<p>(also to be clear, <a href="https://leanprover-community.github.io/mathlib_docs/find/equiv.perm.perm_group">docs#equiv.perm.perm_group</a> is not just a monoid but a group)</p>



<a name="221624872"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Simp%20and%20%60equiv.refl%20%CE%B1%60%20vs%20%60%281%20%3A%20perm%20%20%CE%B1%29%60/near/221624872" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Simp.20and.20.60equiv.2Erefl.20.CE.B1.60.20vs.20.60(1.20.3A.20perm.20.20.CE.B1).60.html#221624872">(Jan 05 2021 at 09:01)</a>:</h4>
<p>There's also a fourth choice, simplifying <code>trans</code> to <code>*</code>.</p>



<a name="221625061"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Simp%20and%20%60equiv.refl%20%CE%B1%60%20vs%20%60%281%20%3A%20perm%20%20%CE%B1%29%60/near/221625061" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Simp.20and.20.60equiv.2Erefl.20.CE.B1.60.20vs.20.60(1.20.3A.20perm.20.20.CE.B1).60.html#221625061">(Jan 05 2021 at 09:04)</a>:</h4>
<p>That's not always possible, for instance in the <code>(e : equiv A B).trans 1</code> case I mention above`</p>



<a name="221625923"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Simp%20and%20%60equiv.refl%20%CE%B1%60%20vs%20%60%281%20%3A%20perm%20%20%CE%B1%29%60/near/221625923" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Simp.20and.20.60equiv.2Erefl.20.CE.B1.60.20vs.20.60(1.20.3A.20perm.20.20.CE.B1).60.html#221625923">(Jan 05 2021 at 09:16)</a>:</h4>
<p>I was hoping there was some way to make <code>equiv.perm.perm_group.one</code> reducible, but perhaps that doesn't make sense</p>



<a name="221626682"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Simp%20and%20%60equiv.refl%20%CE%B1%60%20vs%20%60%281%20%3A%20perm%20%20%CE%B1%29%60/near/221626682" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Simp.20and.20.60equiv.2Erefl.20.CE.B1.60.20vs.20.60(1.20.3A.20perm.20.20.CE.B1).60.html#221626682">(Jan 05 2021 at 09:26)</a>:</h4>
<p>I'm surprised that <code>trans_refl</code> doesn't fire on <code>e.trans 1</code>.  1 should reducibly reduce to equiv.refl, AFAICT.</p>



<a name="221627081"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Simp%20and%20%60equiv.refl%20%CE%B1%60%20vs%20%60%281%20%3A%20perm%20%20%CE%B1%29%60/near/221627081" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Simp.20and.20.60equiv.2Erefl.20.CE.B1.60.20vs.20.60(1.20.3A.20perm.20.20.CE.B1).60.html#221627081">(Jan 05 2021 at 09:31)</a>:</h4>
<p>Based on the fact the linter does not complain about the lemmas in <a href="https://github.com/leanprover-community/mathlib/issues/5614">#5614</a>, I'm pretty sure it doesn't</p>



<a name="221629120"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Simp%20and%20%60equiv.refl%20%CE%B1%60%20vs%20%60%281%20%3A%20perm%20%20%CE%B1%29%60/near/221629120" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Simp.20and.20.60equiv.2Erefl.20.CE.B1.60.20vs.20.60(1.20.3A.20perm.20.20.CE.B1).60.html#221629120">(Jan 05 2021 at 09:58)</a>:</h4>
<p>That's maybe a bit misleading: you're allowed to specialize simp lemmas, and the linter won't complain.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>