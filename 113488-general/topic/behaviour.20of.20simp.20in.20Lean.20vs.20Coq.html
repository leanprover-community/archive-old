---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/behaviour.20of.20simp.20in.20Lean.20vs.20Coq.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/behaviour.20of.20simp.20in.20Lean.20vs.20Coq.html">behaviour of simp in Lean vs Coq</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="258537903"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/behaviour%20of%20simp%20in%20Lean%20vs%20Coq/near/258537903" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/behaviour.20of.20simp.20in.20Lean.20vs.20Coq.html#258537903">(Oct 21 2021 at 12:43)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112680">Johan Commelin</span> <a href="#narrow/stream/113488-general/topic/future.20of.20proof.20assistant.20tools/near/258537447">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="451983">Arthur Paulino</span> <code>simp</code> already exists, and is used a lot.</p>
</blockquote>
<p>Hm, shouldn't I see <code>true = true</code> in the Lean Infoview here?<br>
<a href="/user_uploads/3121/OjG2Y4cqf42vDnf8NAvzd8Yg/image.png">image.png</a><br>
I tested <code>simp</code> but it didn't seem to do anything. And it doesn't show anything on hover. Also I can't crtl+click on it <span aria-label="thinking" class="emoji emoji-1f914" role="img" title="thinking">:thinking:</span></p>
<div class="message_inline_image"><a href="/user_uploads/3121/OjG2Y4cqf42vDnf8NAvzd8Yg/image.png" title="image.png"><img src="/user_uploads/3121/OjG2Y4cqf42vDnf8NAvzd8Yg/image.png"></a></div>



<a name="258538045"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/behaviour%20of%20simp%20in%20Lean%20vs%20Coq/near/258538045" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/behaviour.20of.20simp.20in.20Lean.20vs.20Coq.html#258538045">(Oct 21 2021 at 12:44)</a>:</h4>
<p>Using <code>;</code> makes the goal view behave unhelpfully (at least in Lean 3, but it seems you're using Lean 4)</p>



<a name="258538149"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/behaviour%20of%20simp%20in%20Lean%20vs%20Coq/near/258538149" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastian Ullrich <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/behaviour.20of.20simp.20in.20Lean.20vs.20Coq.html#258538149">(Oct 21 2021 at 12:45)</a>:</h4>
<p>Please note that this is Lean 4</p>



<a name="258538323"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/behaviour%20of%20simp%20in%20Lean%20vs%20Coq/near/258538323" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/behaviour.20of.20simp.20in.20Lean.20vs.20Coq.html#258538323">(Oct 21 2021 at 12:46)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112680">Johan Commelin</span> <a href="#narrow/stream/113488-general/topic/future.20of.20proof.20assistant.20tools/near/258537597">said</a>:</p>
<blockquote>
<p>All my colleagues work with things like Kähler manifolds, or triangulated categories of motives.</p>
</blockquote>
<p>Do you know we have a branch trying to define Kähler manifolds?</p>



<a name="258538353"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/behaviour%20of%20simp%20in%20Lean%20vs%20Coq/near/258538353" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/behaviour.20of.20simp.20in.20Lean.20vs.20Coq.html#258538353">(Oct 21 2021 at 12:46)</a>:</h4>
<p>You mean it behaves as expected in Lean 3?</p>



<a name="258538755"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/behaviour%20of%20simp%20in%20Lean%20vs%20Coq/near/258538755" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastian Ullrich <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/behaviour.20of.20simp.20in.20Lean.20vs.20Coq.html#258538755">(Oct 21 2021 at 12:49)</a>:</h4>
<p>No, <code>simp</code> here behaves as expected. It applies all registered and explicitly passed equations, none of which are applicable here. Use <code>@[simp] def orr</code> or <code>simp [orr]</code> to add <code>orr</code>'s equations to either set.</p>



<a name="258538833"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/behaviour%20of%20simp%20in%20Lean%20vs%20Coq/near/258538833" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastian Ullrich <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/behaviour.20of.20simp.20in.20Lean.20vs.20Coq.html#258538833">(Oct 21 2021 at 12:49)</a>:</h4>
<p>Coq-Equations' <code>simp</code> also needs to be passed explicit arguments, doesn't it?</p>



<a name="258539030"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/behaviour%20of%20simp%20in%20Lean%20vs%20Coq/near/258539030" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/behaviour.20of.20simp.20in.20Lean.20vs.20Coq.html#258539030">(Oct 21 2021 at 12:50)</a>:</h4>
<p>Ahah! <span class="user-mention" data-user-id="112680">@Johan Commelin</span>, not Kähler manifolds but Kähler modules: it's <a href="https://github.com/leanprover-community/mathlib/issues/4753">#4753</a>.</p>



<a name="258539118"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/behaviour%20of%20simp%20in%20Lean%20vs%20Coq/near/258539118" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/behaviour.20of.20simp.20in.20Lean.20vs.20Coq.html#258539118">(Oct 21 2021 at 12:51)</a>:</h4>
<p>Ooh, I know that one. It's important, but quite different from Kähler manifolds (-;</p>



<a name="258539353"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/behaviour%20of%20simp%20in%20Lean%20vs%20Coq/near/258539353" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/behaviour.20of.20simp.20in.20Lean.20vs.20Coq.html#258539353">(Oct 21 2021 at 12:52)</a>:</h4>
<p>In Coq you can just call <code>simpl.</code>: <br>
<a href="/user_uploads/3121/MhjDCWs9l2_xPjKOP3KLqS7O/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/3121/MhjDCWs9l2_xPjKOP3KLqS7O/image.png" title="image.png"><img src="/user_uploads/3121/MhjDCWs9l2_xPjKOP3KLqS7O/image.png"></a></div>



<a name="258539517"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/behaviour%20of%20simp%20in%20Lean%20vs%20Coq/near/258539517" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/behaviour.20of.20simp.20in.20Lean.20vs.20Coq.html#258539517">(Oct 21 2021 at 12:53)</a>:</h4>
<p>(I've renamed this tail of the thread, because it was going in a different direction.)</p>



<a name="258539779"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/behaviour%20of%20simp%20in%20Lean%20vs%20Coq/near/258539779" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastian Ullrich <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/behaviour.20of.20simp.20in.20Lean.20vs.20Coq.html#258539779">(Oct 21 2021 at 12:55)</a>:</h4>
<p>Ah, that is yet another Coq tactic. We don't have a normalization tactic like that. It seems most people prefer passing the defs to reduce explicitly.</p>



<a name="258540019"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/behaviour%20of%20simp%20in%20Lean%20vs%20Coq/near/258540019" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/behaviour.20of.20simp.20in.20Lean.20vs.20Coq.html#258540019">(Oct 21 2021 at 12:56)</a>:</h4>
<p><code>simp [orr]</code> did the simplification and Lean was already satisfied with <code>true = true</code><br>
<a href="/user_uploads/3121/bCUlrF7beX66zWHGmLITPO8H/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/3121/bCUlrF7beX66zWHGmLITPO8H/image.png" title="image.png"><img src="/user_uploads/3121/bCUlrF7beX66zWHGmLITPO8H/image.png"></a></div>



<a name="258540099"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/behaviour%20of%20simp%20in%20Lean%20vs%20Coq/near/258540099" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/behaviour.20of.20simp.20in.20Lean.20vs.20Coq.html#258540099">(Oct 21 2021 at 12:57)</a>:</h4>
<p>maybe it simplified <code>true = true</code> further to <code>true</code>?</p>



<a name="258540121"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/behaviour%20of%20simp%20in%20Lean%20vs%20Coq/near/258540121" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastian Ullrich <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/behaviour.20of.20simp.20in.20Lean.20vs.20Coq.html#258540121">(Oct 21 2021 at 12:57)</a>:</h4>
<p>to <code>True</code>, but yes :)</p>



<a name="258540179"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/behaviour%20of%20simp%20in%20Lean%20vs%20Coq/near/258540179" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastian Ullrich <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/behaviour.20of.20simp.20in.20Lean.20vs.20Coq.html#258540179">(Oct 21 2021 at 12:57)</a>:</h4>
<p>In other words, Lean's <code>simp</code> is modelled after Isabelle, not Coq</p>



<a name="258540393"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/behaviour%20of%20simp%20in%20Lean%20vs%20Coq/near/258540393" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/behaviour.20of.20simp.20in.20Lean.20vs.20Coq.html#258540393">(Oct 21 2021 at 12:58)</a>:</h4>
<p>I see, but now it got me thinking because I asked Lean to explicitly simplify the <code>orr</code> and it feels like it did more than I wanted</p>



<a name="258540541"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/behaviour%20of%20simp%20in%20Lean%20vs%20Coq/near/258540541" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/behaviour.20of.20simp.20in.20Lean.20vs.20Coq.html#258540541">(Oct 21 2021 at 12:59)</a>:</h4>
<p>That's why you can use <code>simp only [orr]</code>.</p>



<a name="258540757"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/behaviour%20of%20simp%20in%20Lean%20vs%20Coq/near/258540757" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/behaviour.20of.20simp.20in.20Lean.20vs.20Coq.html#258540757">(Oct 21 2021 at 13:00)</a>:</h4>
<p><code>simp only [orr]</code> goes all the way down too</p>



<a name="258541778"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/behaviour%20of%20simp%20in%20Lean%20vs%20Coq/near/258541778" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/behaviour.20of.20simp.20in.20Lean.20vs.20Coq.html#258541778">(Oct 21 2021 at 13:07)</a>:</h4>
<p>That's because one of the equation lemmas for "orr" is precisely your goal</p>



<a name="258541940"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/behaviour%20of%20simp%20in%20Lean%20vs%20Coq/near/258541940" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/behaviour.20of.20simp.20in.20Lean.20vs.20Coq.html#258541940">(Oct 21 2021 at 13:08)</a>:</h4>
<p>If you're trying to prove <code>a = b</code> and you have <code>h : a = b</code>, you wouldn't say "rewrite to <code>b = b</code>, then reflexivity", you'd jump directly to "h is the proof"</p>



<a name="258542233"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/behaviour%20of%20simp%20in%20Lean%20vs%20Coq/near/258542233" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/behaviour.20of.20simp.20in.20Lean.20vs.20Coq.html#258542233">(Oct 21 2021 at 13:10)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110024">Sebastian Ullrich</span> <a href="#narrow/stream/113488-general/topic/behaviour.20of.20simp.20in.20Lean.20vs.20Coq/near/258539779">said</a>:</p>
<blockquote>
<p>Ah, that is yet another Coq tactic. We don't have a normalization tactic like that. It seems most people prefer passing the defs to reduce explicitly.</p>
</blockquote>
<p>It would be really really nice to get a reduction tactic in lean. <code>simp</code> is the best we have but it's a poor approximation of kernel reduction. <code>whnf</code> can be made to work but is not configurable, and often goes too far.</p>



<a name="258542357"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/behaviour%20of%20simp%20in%20Lean%20vs%20Coq/near/258542357" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/behaviour.20of.20simp.20in.20Lean.20vs.20Coq.html#258542357">(Oct 21 2021 at 13:11)</a>:</h4>
<p>And yes, there are a lot of open design questions about how far to reduce given what input</p>



<a name="258542539"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/behaviour%20of%20simp%20in%20Lean%20vs%20Coq/near/258542539" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/behaviour.20of.20simp.20in.20Lean.20vs.20Coq.html#258542539">(Oct 21 2021 at 13:12)</a>:</h4>
<p>From an user standpoint, I'd want it to go as far as I want so I feel like I have complete control of what I'm doing</p>



<a name="258542587"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/behaviour%20of%20simp%20in%20Lean%20vs%20Coq/near/258542587" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/behaviour.20of.20simp.20in.20Lean.20vs.20Coq.html#258542587">(Oct 21 2021 at 13:13)</a>:</h4>
<blockquote>
<p>I'd want it to go as far as I want </p>
</blockquote>
<p>well yes, the hard part is reading the user's mind about this</p>



<a name="258542637"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/behaviour%20of%20simp%20in%20Lean%20vs%20Coq/near/258542637" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/behaviour.20of.20simp.20in.20Lean.20vs.20Coq.html#258542637">(Oct 21 2021 at 13:13)</a>:</h4>
<p>you can reduce too much and you can reduce not enough and both are bad</p>



<a name="258542745"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/behaviour%20of%20simp%20in%20Lean%20vs%20Coq/near/258542745" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/behaviour.20of.20simp.20in.20Lean.20vs.20Coq.html#258542745">(Oct 21 2021 at 13:14)</a>:</h4>
<p><code>simp</code> has some control over reduction in the form of specifying what functions to reduce (plus some basic simp things like <code>x = x</code> is true)</p>



<a name="258542856"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/behaviour%20of%20simp%20in%20Lean%20vs%20Coq/near/258542856" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/behaviour.20of.20simp.20in.20Lean.20vs.20Coq.html#258542856">(Oct 21 2021 at 13:15)</a>:</h4>
<p>Hm, what if I could tell the number of reduction rounds? Lean would be able to know how many recursive calls would be allowed</p>



<a name="258542890"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/behaviour%20of%20simp%20in%20Lean%20vs%20Coq/near/258542890" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/behaviour.20of.20simp.20in.20Lean.20vs.20Coq.html#258542890">(Oct 21 2021 at 13:15)</a>:</h4>
<p>I think there is a cfg for that</p>



<a name="258542952"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/behaviour%20of%20simp%20in%20Lean%20vs%20Coq/near/258542952" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/behaviour.20of.20simp.20in.20Lean.20vs.20Coq.html#258542952">(Oct 21 2021 at 13:16)</a>:</h4>
<p>but it's really not a good way to write proof scripts because it is very specific to the particular rewrite sequence</p>



<a name="258543110"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/behaviour%20of%20simp%20in%20Lean%20vs%20Coq/near/258543110" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/behaviour.20of.20simp.20in.20Lean.20vs.20Coq.html#258543110">(Oct 21 2021 at 13:17)</a>:</h4>
<p>and if it has to backtrack then it gets much harder to specify where in the tree you want to go</p>



<a name="258543151"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/behaviour%20of%20simp%20in%20Lean%20vs%20Coq/near/258543151" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/behaviour.20of.20simp.20in.20Lean.20vs.20Coq.html#258543151">(Oct 21 2021 at 13:17)</a>:</h4>
<p>Right, I might want to take baby steps for a particularly hard step</p>



<a name="258543215"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/behaviour%20of%20simp%20in%20Lean%20vs%20Coq/near/258543215" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/behaviour.20of.20simp.20in.20Lean.20vs.20Coq.html#258543215">(Oct 21 2021 at 13:17)</a>:</h4>
<p><code>rw</code> is better suited for baby steps. <code>simp</code> is more like "do all these things until you can't find anything to do"</p>



<a name="258543298"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/behaviour%20of%20simp%20in%20Lean%20vs%20Coq/near/258543298" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/behaviour.20of.20simp.20in.20Lean.20vs.20Coq.html#258543298">(Oct 21 2021 at 13:18)</a>:</h4>
<p>let me try <code>rw</code></p>



<a name="258543984"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/behaviour%20of%20simp%20in%20Lean%20vs%20Coq/near/258543984" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/behaviour.20of.20simp.20in.20Lean.20vs.20Coq.html#258543984">(Oct 21 2021 at 13:22)</a>:</h4>
<p>How do I make <code>rw</code> accept one of my matches for <code>orr</code>?<br>
<a href="/user_uploads/3121/1czlx7JqW7P3X0TosvUAVQFy/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/3121/1czlx7JqW7P3X0TosvUAVQFy/image.png" title="image.png"><img src="/user_uploads/3121/1czlx7JqW7P3X0TosvUAVQFy/image.png"></a></div>



<a name="258544684"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/behaviour%20of%20simp%20in%20Lean%20vs%20Coq/near/258544684" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/behaviour.20of.20simp.20in.20Lean.20vs.20Coq.html#258544684">(Oct 21 2021 at 13:27)</a>:</h4>
<p><code>rw [orr]</code></p>



<a name="258544745"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/behaviour%20of%20simp%20in%20Lean%20vs%20Coq/near/258544745" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/behaviour.20of.20simp.20in.20Lean.20vs.20Coq.html#258544745">(Oct 21 2021 at 13:28)</a>:</h4>
<p>also, post code, not images</p>



<a name="258544804"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/behaviour%20of%20simp%20in%20Lean%20vs%20Coq/near/258544804" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/behaviour.20of.20simp.20in.20Lean.20vs.20Coq.html#258544804">(Oct 21 2021 at 13:28)</a>:</h4>
<p>see <a href="https://github.com/leanprover-community/mathlib/wiki/Code-in-backticks">#backticks</a></p>



<a name="258544973"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/behaviour%20of%20simp%20in%20Lean%20vs%20Coq/near/258544973" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/behaviour.20of.20simp.20in.20Lean.20vs.20Coq.html#258544973">(Oct 21 2021 at 13:29)</a>:</h4>
<p>ah, the code itself doesn't show where the error lies. but now <code>orr</code> is underlined in red and the error says</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">tactic</span> <span class="bp">'</span><span class="n">rewrite'</span> <span class="n">failed</span><span class="o">,</span> <span class="n">equality</span> <span class="n">or</span> <span class="n">iff</span> <span class="n">proof</span> <span class="n">expected</span>
  <span class="n">Bool</span>
<span class="n">b</span> <span class="o">:</span> <span class="n">Bool</span>
<span class="bp">⊢</span> <span class="n">orr</span> <span class="n">true</span> <span class="n">b</span> <span class="bp">=</span> <span class="n">true</span>
</code></pre></div>



<a name="258545120"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/behaviour%20of%20simp%20in%20Lean%20vs%20Coq/near/258545120" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/behaviour.20of.20simp.20in.20Lean.20vs.20Coq.html#258545120">(Oct 21 2021 at 13:30)</a>:</h4>
<p>this will work in lean 3, but I think lean 4 doesn't support it yet and you have to make do with <code>simp</code></p>



<a name="258545213"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/behaviour%20of%20simp%20in%20Lean%20vs%20Coq/near/258545213" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/behaviour.20of.20simp.20in.20Lean.20vs.20Coq.html#258545213">(Oct 21 2021 at 13:30)</a>:</h4>
<p>There are some settings you can give to simp to make it act basically like <code>rw</code>, this is the <code>simp_rw</code> tactic in lean 3</p>



<a name="258545340"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/behaviour%20of%20simp%20in%20Lean%20vs%20Coq/near/258545340" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/behaviour.20of.20simp.20in.20Lean.20vs.20Coq.html#258545340">(Oct 21 2021 at 13:31)</a>:</h4>
<p>eh, could you post your code?</p>



<a name="258545428"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/behaviour%20of%20simp%20in%20Lean%20vs%20Coq/near/258545428" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/behaviour.20of.20simp.20in.20Lean.20vs.20Coq.html#258545428">(Oct 21 2021 at 13:32)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">def</span> <span class="n">orr</span> <span class="o">:</span> <span class="n">Bool</span> <span class="bp">→</span> <span class="n">Bool</span> <span class="bp">→</span> <span class="n">Bool</span>
<span class="bp">|</span> <span class="n">true</span><span class="o">,</span> <span class="n">_</span> <span class="bp">=&gt;</span> <span class="n">true</span>
<span class="bp">|</span> <span class="n">false</span><span class="o">,</span> <span class="n">b</span> <span class="bp">=&gt;</span> <span class="n">b</span>

<span class="kd">theorem</span> <span class="n">orr_true</span> <span class="o">(</span><span class="n">b</span> <span class="o">:</span> <span class="n">Bool</span><span class="o">)</span> <span class="o">:</span> <span class="n">orr</span> <span class="n">true</span> <span class="n">b</span> <span class="bp">=</span> <span class="n">true</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="o">{</span><span class="n">rw</span> <span class="o">[</span><span class="n">orr</span><span class="o">]}</span>
</code></pre></div>



<a name="258545978"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/behaviour%20of%20simp%20in%20Lean%20vs%20Coq/near/258545978" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/behaviour.20of.20simp.20in.20Lean.20vs.20Coq.html#258545978">(Oct 21 2021 at 13:35)</a>:</h4>
<p>I'm satisfied if it's because it's still WIP tho, no worries <span aria-label="smiley" class="emoji emoji-1f603" role="img" title="smiley">:smiley:</span></p>



<a name="258546113"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/behaviour%20of%20simp%20in%20Lean%20vs%20Coq/near/258546113" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/behaviour.20of.20simp.20in.20Lean.20vs.20Coq.html#258546113">(Oct 21 2021 at 13:36)</a>:</h4>
<p><code>rfl</code> does it <span aria-label="wink" class="emoji emoji-1f609" role="img" title="wink">:wink:</span></p>



<a name="258546576"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/behaviour%20of%20simp%20in%20Lean%20vs%20Coq/near/258546576" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/behaviour.20of.20simp.20in.20Lean.20vs.20Coq.html#258546576">(Oct 21 2021 at 13:39)</a>:</h4>
<p>Oh, I know. I'm not just trying to prove the theorem. I'm trying to do it in a controlled way. Going directly to reflexivity might be a big leap for people who are trying to understand how computers handle programmed proofs</p>



<a name="258546911"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/behaviour%20of%20simp%20in%20Lean%20vs%20Coq/near/258546911" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/behaviour.20of.20simp.20in.20Lean.20vs.20Coq.html#258546911">(Oct 21 2021 at 13:41)</a>:</h4>
<p>Oh, it looks like you <a href="https://github.com/leanprover/lean4/blob/master/src/Lean/Elab/Tactic/Simp.lean#L191">can't turn off <code>eq_self</code></a>, even if you use <code>simp only</code>. There should probably be a config option for that</p>



<a name="258547469"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/behaviour%20of%20simp%20in%20Lean%20vs%20Coq/near/258547469" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/behaviour.20of.20simp.20in.20Lean.20vs.20Coq.html#258547469">(Oct 21 2021 at 13:44)</a>:</h4>
<p>lean 3 has a whole collection of more controlled unfolding tactics, like <code>dsimp</code>, <code>unfold</code>, <code>delta</code> and others. As far as I know most of them don't exist in lean 4 yet</p>



<a name="258547564"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/behaviour%20of%20simp%20in%20Lean%20vs%20Coq/near/258547564" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/behaviour.20of.20simp.20in.20Lean.20vs.20Coq.html#258547564">(Oct 21 2021 at 13:45)</a>:</h4>
<p>and some of them might be "won't fix" since the number of unfolding tactics in lean 3 is a little ridiculous</p>



<a name="258548055"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/behaviour%20of%20simp%20in%20Lean%20vs%20Coq/near/258548055" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/behaviour.20of.20simp.20in.20Lean.20vs.20Coq.html#258548055">(Oct 21 2021 at 13:48)</a>:</h4>
<p>One way to prevent it from closing the goal is to change the rhs to something less trivial:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">theorem</span> <span class="n">orr_true</span> <span class="o">(</span><span class="n">b</span> <span class="o">:</span> <span class="n">Bool</span><span class="o">)</span> <span class="o">:</span> <span class="n">orr</span> <span class="n">true</span> <span class="n">b</span> <span class="bp">=</span> <span class="n">c</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">orr</span><span class="o">]</span>
  <span class="c1">-- |- true = c</span>
</code></pre></div>



<a name="258548290"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/behaviour%20of%20simp%20in%20Lean%20vs%20Coq/near/258548290" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/behaviour.20of.20simp.20in.20Lean.20vs.20Coq.html#258548290">(Oct 21 2021 at 13:49)</a>:</h4>
<p>Makes sense. Let's see how the API design will evolve. For me it was very impactful to my learning process to see how Coq processed everything until it ends up with types I defined on both ends of the equation</p>



<a name="258550370"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/behaviour%20of%20simp%20in%20Lean%20vs%20Coq/near/258550370" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/behaviour.20of.20simp.20in.20Lean.20vs.20Coq.html#258550370">(Oct 21 2021 at 14:01)</a>:</h4>
<p>well, API design doesn't evolve on its own, it needs input from people "in the field" to see what works. Generally things don't change unless someone (usually one of the developers) runs across a paper cut and tries to fix it</p>



<a name="258551242"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/behaviour%20of%20simp%20in%20Lean%20vs%20Coq/near/258551242" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/behaviour.20of.20simp.20in.20Lean.20vs.20Coq.html#258551242">(Oct 21 2021 at 14:06)</a>:</h4>
<p>Right, that's what I meant <span aria-label="smiley" class="emoji emoji-1f603" role="img" title="smiley">:smiley:</span></p>



<a name="258553983"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/behaviour%20of%20simp%20in%20Lean%20vs%20Coq/near/258553983" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/behaviour.20of.20simp.20in.20Lean.20vs.20Coq.html#258553983">(Oct 21 2021 at 14:22)</a>:</h4>
<p>But just to rephrase what I meant before. It would make more sense to me for <code>simp</code> to go all the way  until it can't progress if it didn't accept parameters. But if I have to explicit the <code>orr</code> as a parameter, I would expect it to be more surgical on what to simplify.</p>



<a name="258556404"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/behaviour%20of%20simp%20in%20Lean%20vs%20Coq/near/258556404" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/behaviour.20of.20simp.20in.20Lean.20vs.20Coq.html#258556404">(Oct 21 2021 at 14:34)</a>:</h4>
<p>it is being surgical; it is just that your definition of surgical doesn't include reflexivity and simp's does</p>



<a name="258557465"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/behaviour%20of%20simp%20in%20Lean%20vs%20Coq/near/258557465" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/behaviour.20of.20simp.20in.20Lean.20vs.20Coq.html#258557465">(Oct 21 2021 at 14:39)</a>:</h4>
<p>also, keep in mind that <code>simp only</code> is not only for teaching; mathlib uses it a lot, because the default simp set is expensive in many circumstances, and adding <code>eq_self</code> all the time for proofs of e.g. <code>(x + y) + z = x + (z + y)</code> by <code>simp only [add_comm, add_assoc]</code> would get tiresome</p>



<a name="258565626"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/behaviour%20of%20simp%20in%20Lean%20vs%20Coq/near/258565626" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/behaviour.20of.20simp.20in.20Lean.20vs.20Coq.html#258565626">(Oct 21 2021 at 15:23)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110049">Mario Carneiro</span> <a href="#narrow/stream/113488-general/topic/behaviour.20of.20simp.20in.20Lean.20vs.20Coq/near/258556404">said</a>:</p>
<blockquote>
<p>it is being surgical; it is just that your definition of surgical doesn't include reflexivity and simp's does</p>
</blockquote>
<p>Thanks for the clarification. That's precisely it. You were surgical <span aria-label="smiley" class="emoji emoji-1f603" role="img" title="smiley">:smiley:</span></p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>