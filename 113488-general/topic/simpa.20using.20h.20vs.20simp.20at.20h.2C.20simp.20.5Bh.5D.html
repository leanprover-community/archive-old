---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/simpa.20using.20h.20vs.20simp.20at.20h.2C.20simp.20.5Bh.5D.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/simpa.20using.20h.20vs.20simp.20at.20h.2C.20simp.20.5Bh.5D.html">simpa using h vs simp at h, simp [h]</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="134084181"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/simpa%20using%20h%20vs%20simp%20at%20h%2C%20simp%20%5Bh%5D/near/134084181" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sean Leather <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/simpa.20using.20h.20vs.20simp.20at.20h.2C.20simp.20.5Bh.5D.html#134084181">(Sep 17 2018 at 07:01)</a>:</h4>
<p>On a few occasions, I've found that <code>simp at h, simp [h]</code> works when <code>simpa using h</code> does not. I thought the latter was intended to replace the former. Is this not the case?</p>



<a name="134084418"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/simpa%20using%20h%20vs%20simp%20at%20h%2C%20simp%20%5Bh%5D/near/134084418" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/simpa.20using.20h.20vs.20simp.20at.20h.2C.20simp.20.5Bh.5D.html#134084418">(Sep 17 2018 at 07:08)</a>:</h4>
<p>They are not equivalent. <code>simpa using h</code> is equivalent to <code>simp at h |-, exact h</code></p>



<a name="134084429"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/simpa%20using%20h%20vs%20simp%20at%20h%2C%20simp%20%5Bh%5D/near/134084429" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/simpa.20using.20h.20vs.20simp.20at.20h.2C.20simp.20.5Bh.5D.html#134084429">(Sep 17 2018 at 07:09)</a>:</h4>
<p>in particular, <code>simp at h, simp [h]</code> may use <code>h</code> to rewrite in subterms, while <code>simpa</code> is just preparing to match it directly against the goal</p>



<a name="134084491"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/simpa%20using%20h%20vs%20simp%20at%20h%2C%20simp%20%5Bh%5D/near/134084491" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/simpa.20using.20h.20vs.20simp.20at.20h.2C.20simp.20.5Bh.5D.html#134084491">(Sep 17 2018 at 07:11)</a>:</h4>
<p>This makes <code>simpa</code> less powerful but more controlled, especially when quantifiers get involved</p>



<a name="134084497"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/simpa%20using%20h%20vs%20simp%20at%20h%2C%20simp%20%5Bh%5D/near/134084497" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sean Leather <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/simpa.20using.20h.20vs.20simp.20at.20h.2C.20simp.20.5Bh.5D.html#134084497">(Sep 17 2018 at 07:11)</a>:</h4>
<p>Ah, okay. Thanks.</p>



<a name="134086319"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/simpa%20using%20h%20vs%20simp%20at%20h%2C%20simp%20%5Bh%5D/near/134086319" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/simpa.20using.20h.20vs.20simp.20at.20h.2C.20simp.20.5Bh.5D.html#134086319">(Sep 17 2018 at 07:56)</a>:</h4>
<p>Sean -- do you fancy editing the simp docs to explain this? I never really feel on top of this subtlety so never feel equipped to change them to explain it. I am still at the stage where I just try random combinations of simp, simpa, simp!, <code>simp * at *</code> and just keep going until it works.</p>



<a name="134086363"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/simpa%20using%20h%20vs%20simp%20at%20h%2C%20simp%20%5Bh%5D/near/134086363" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/simpa.20using.20h.20vs.20simp.20at.20h.2C.20simp.20.5Bh.5D.html#134086363">(Sep 17 2018 at 07:57)</a>:</h4>
<p><a href="https://github.com/leanprover/mathlib/blob/master/docs/extras/simp.md" target="_blank" title="https://github.com/leanprover/mathlib/blob/master/docs/extras/simp.md">https://github.com/leanprover/mathlib/blob/master/docs/extras/simp.md</a></p>



<a name="134086406"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/simpa%20using%20h%20vs%20simp%20at%20h%2C%20simp%20%5Bh%5D/near/134086406" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/simpa.20using.20h.20vs.20simp.20at.20h.2C.20simp.20.5Bh.5D.html#134086406">(Sep 17 2018 at 07:58)</a>:</h4>
<p>Just edit the community one I guess</p>



<a name="134087022"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/simpa%20using%20h%20vs%20simp%20at%20h%2C%20simp%20%5Bh%5D/near/134087022" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sean Leather <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/simpa.20using.20h.20vs.20simp.20at.20h.2C.20simp.20.5Bh.5D.html#134087022">(Sep 17 2018 at 08:13)</a>:</h4>
<p>Hmm, I don't know. I'm just looking at that document for the first time. I don't find it very easy to follow for reference, and I wouldn't know where to put what. I think Mario answering Zulip questions in a document would be better. <span class="emoji emoji-1f609" title="wink">:wink:</span></p>



<a name="134101631"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/simpa%20using%20h%20vs%20simp%20at%20h%2C%20simp%20%5Bh%5D/near/134101631" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sean Leather <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/simpa.20using.20h.20vs.20simp.20at.20h.2C.20simp.20.5Bh.5D.html#134101631">(Sep 17 2018 at 13:50)</a>:</h4>
<p>To make matters even more interesting, I have a goal that isn't solved by <code>by simp at h, simp [h]</code> but is solved by <code>by simp at h; simp; exact h</code> or <code>by simp at h; simp [h] {contextual := tt}</code> or <code>Î» x, by simpa using h x</code>. After <code>by simp at h; simp</code>, <code>h</code> and the goal look exactly the same (with <code>set_option pp.all true</code>). I'm not clear on why it can't be solved.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>