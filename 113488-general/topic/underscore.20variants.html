---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/underscore.20variants.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/underscore.20variants.html">underscore variants</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="199113814"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/underscore%20variants/near/199113814" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/underscore.20variants.html#199113814">(May 29 2020 at 04:50)</a>:</h4>
<p>Yesterday I was talking with Reid, and we thought it might be nice if we can have variants on the ever-awesome underscore <code>_</code>.</p>
<ul>
<li><code>_</code> The good old underscore that does what it currently does</li>
<li><code>_₁</code> An underscore that tells lean: no matter what, whenever this tactic is over, you must have figured out how to assign this meta-variable</li>
<li><code>_₂</code> An underscore that tells lean: no matter what, whenever this tactic is over, you must not assign this meta-variable. It has to become a new goal</li>
</ul>
<p>We can discuss the notation later. Is this possible? Would others like this?</p>
<p>Here's a reason <code>_₂</code> might be useful. Now that interactive <code>calc</code> is using <code>refine</code>, some of the underscores in a calc-block will become new goals, and others will be filled in by lean. For readability, it can be very useful to have a visual cue as to which underscores will generate goals that will be filled in later. Currently the visual cue is a comment, but it would be much better if this is tied in to the actual code. After all, comments rot.</p>



<a name="199116237"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/underscore%20variants/near/199116237" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/underscore.20variants.html#199116237">(May 29 2020 at 05:45)</a>:</h4>
<p>Interesting! I like the idea, but it sounds hard to implement.</p>
<p>How about <code>_.</code> instead of <code>_₁</code>, denoting "this ends here!", and <code>_?</code> instead of <code>_₂</code>, for "this one remains a mystery"?</p>



<a name="199116584"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/underscore%20variants/near/199116584" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/underscore.20variants.html#199116584">(May 29 2020 at 05:52)</a>:</h4>
<p><code>_.</code> might be confused with <code>_</code> followed by <code>.</code></p>



<a name="199117337"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/underscore%20variants/near/199117337" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/underscore.20variants.html#199117337">(May 29 2020 at 06:06)</a>:</h4>
<p>It could also be confused with <code>._</code> which means an inaccessible pattern</p>



<a name="199117376"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/underscore%20variants/near/199117376" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/underscore.20variants.html#199117376">(May 29 2020 at 06:07)</a>:</h4>
<p>I think I would rather have a new tactic like <code>exact</code> but with <code>_₂</code> markings</p>



<a name="199117384"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/underscore%20variants/near/199117384" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/underscore.20variants.html#199117384">(May 29 2020 at 06:07)</a>:</h4>
<p>rather than using these marks everywhere</p>



<a name="199117427"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/underscore%20variants/near/199117427" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/underscore.20variants.html#199117427">(May 29 2020 at 06:08)</a>:</h4>
<p>(this could even be implemented without lean support)</p>



<a name="199118061"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/underscore%20variants/near/199118061" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/underscore.20variants.html#199118061">(May 29 2020 at 06:36)</a>:</h4>
<p>I would like to keep the notation short (if we are discussing notation anyways) because I want to encourage this to be used in place of <code>_</code>. But first of all, we need to figure out whether this can be implemented.</p>



<a name="199119296"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/underscore%20variants/near/199119296" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/underscore.20variants.html#199119296">(May 29 2020 at 06:56)</a>:</h4>
<p>it can be implemented in mathlib easily</p>



<a name="199119474"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/underscore%20variants/near/199119474" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/underscore.20variants.html#199119474">(May 29 2020 at 06:58)</a>:</h4>
<p>you make <code>_₂</code> a notation for <code>id_subgoal _</code> and then in the <code>exact_with_marked_subgoals</code> tactic (name TBD) you scour the term for these <code>id_subgoal</code> terms, remove them from the input, produce subgoals for them, elaborate the term, double check that the subgoals are still unassigned and add them to the tactic state</p>



<a name="199121701"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/underscore%20variants/near/199121701" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/underscore.20variants.html#199121701">(May 29 2020 at 07:29)</a>:</h4>
<p>Je ne comprend pas... would you mind translating that to Latin?</p>



<a name="199121757"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/underscore%20variants/near/199121757" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/underscore.20variants.html#199121757">(May 29 2020 at 07:30)</a>:</h4>
<p>As in... it sounds cool and reasonable, but I have no idea what you are really suggesting.</p>



<a name="199121785"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/underscore%20variants/near/199121785" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/underscore.20variants.html#199121785">(May 29 2020 at 07:30)</a>:</h4>
<p>Do you want to write a new tactic <code>exact_with_marked_subgoals</code> that should help here?</p>



<a name="199121830"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/underscore%20variants/near/199121830" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/underscore.20variants.html#199121830">(May 29 2020 at 07:31)</a>:</h4>
<p>Is this going to be a user facing tactic, or is this supposed to be hidden behind notation/api etc...</p>



<a name="199121893"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/underscore%20variants/near/199121893" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/underscore.20variants.html#199121893">(May 29 2020 at 07:32)</a>:</h4>
<p>I think the idea is that you'd initially write some tactic under a new name, and if it works nicely you could imagine eventually dropping it in as a replacement for the core <code>exact</code>.</p>



<a name="199121903"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/underscore%20variants/near/199121903" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/underscore.20variants.html#199121903">(May 29 2020 at 07:32)</a>:</h4>
<p>Is there some kind of doubles underline in Unicode?</p>



<a name="199123387"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/underscore%20variants/near/199123387" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/underscore.20variants.html#199123387">(May 29 2020 at 07:51)</a>:</h4>
<p>I don't think we should change <code>exact</code> or <code>refine</code>. This requires special handling at tactic granularity, so I think it is appropriate to have a new <code>exact/refine</code> combination tactic</p>



<a name="199123456"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/underscore%20variants/near/199123456" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/underscore.20variants.html#199123456">(May 29 2020 at 07:52)</a>:</h4>
<p>it sounds like it will mostly only be used for things like <code>calc</code> anyway</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>