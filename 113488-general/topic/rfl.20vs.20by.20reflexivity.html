---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/rfl.20vs.20by.20reflexivity.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/rfl.20vs.20by.20reflexivity.html">rfl vs by reflexivity</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="197804638"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rfl%20vs%20by%20reflexivity/near/197804638" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Egbert Rijke <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/rfl.20vs.20by.20reflexivity.html#197804638">(May 16 2020 at 16:58)</a>:</h4>
<p>Sometimes <code>by reflexivity</code> does the job, whereas <code>rfl</code> isn't accepted. Can anyone tell the difference between the two?</p>



<a name="197804654"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rfl%20vs%20by%20reflexivity/near/197804654" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/rfl.20vs.20by.20reflexivity.html#197804654">(May 16 2020 at 16:59)</a>:</h4>
<p>The reflexivity tactic will close any goal of the form <code>R a a</code> where <code>R</code> is a relation tagged with the <code>[refl]</code> attribute</p>



<a name="197804657"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rfl%20vs%20by%20reflexivity/near/197804657" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/rfl.20vs.20by.20reflexivity.html#197804657">(May 16 2020 at 16:59)</a>:</h4>
<p><a href="https://leanprover-community.github.io/mathlib_docs/tactics.html#refl%20/%20reflexivity">https://leanprover-community.github.io/mathlib_docs/tactics.html#refl%20/%20reflexivity</a></p>



<a name="197804703"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rfl%20vs%20by%20reflexivity/near/197804703" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bhavik Mehta <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/rfl.20vs.20by.20reflexivity.html#197804703">(May 16 2020 at 17:00)</a>:</h4>
<p>I think the difference you're observing is based on the relation in question - <code>rfl</code> will prove anything like <code>a = a</code> but <code>reflexivity</code> will work for any reflexive relation, not just equality</p>



<a name="197804709"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rfl%20vs%20by%20reflexivity/near/197804709" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/rfl.20vs.20by.20reflexivity.html#197804709">(May 16 2020 at 17:00)</a>:</h4>
<p>It's all in the doc.</p>



<a name="197804714"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rfl%20vs%20by%20reflexivity/near/197804714" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Egbert Rijke <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/rfl.20vs.20by.20reflexivity.html#197804714">(May 16 2020 at 17:01)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110038">Kevin Buzzard</span> <a href="#narrow/stream/113488-general/topic/rfl.20vs.20by.20reflexivity/near/197804654">said</a>:</p>
<blockquote>
<p>The reflexivity tactic will close any goal of the form <code>R a a</code> where <code>R</code> is a relation tagged with the <code>[refl]</code> attribute</p>
</blockquote>
<p>But they even seem to differ when you're doing ordinary equational reasoning. I'm not working with more general relations at the moment.</p>



<a name="197804889"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rfl%20vs%20by%20reflexivity/near/197804889" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/rfl.20vs.20by.20reflexivity.html#197804889">(May 16 2020 at 17:05)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib/wiki/Minimum-Working-Example-&#40;MWE&#41;">#mwe</a> ?</p>



<a name="197805073"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rfl%20vs%20by%20reflexivity/near/197805073" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Egbert Rijke <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/rfl.20vs.20by.20reflexivity.html#197805073">(May 16 2020 at 17:09)</a>:</h4>
<p>Here is my <a href="/user_uploads/3121/WjVXUD4SSdo-2qJujDF9mn5k/mwe.lean">mwe</a></p>



<a name="197805127"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rfl%20vs%20by%20reflexivity/near/197805127" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Egbert Rijke <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/rfl.20vs.20by.20reflexivity.html#197805127">(May 16 2020 at 17:10)</a>:</h4>
<p>At the end there is an application of <code>by reflexivity</code> which can't be replaced by <code>rfl</code></p>



<a name="197805155"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rfl%20vs%20by%20reflexivity/near/197805155" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Egbert Rijke <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/rfl.20vs.20by.20reflexivity.html#197805155">(May 16 2020 at 17:11)</a>:</h4>
<p>PS, I'm still on 3.11 because I don't know how to update with elan. The install guide only told me how to install it, but not how to keep it up to date :P</p>



<a name="197805218"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rfl%20vs%20by%20reflexivity/near/197805218" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/rfl.20vs.20by.20reflexivity.html#197805218">(May 16 2020 at 17:13)</a>:</h4>
<p>Seems like an elaboration order issue. It works with <code>by exact rfl</code></p>



<a name="197805243"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rfl%20vs%20by%20reflexivity/near/197805243" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/rfl.20vs.20by.20reflexivity.html#197805243">(May 16 2020 at 17:13)</a>:</h4>
<p>And replacing the whole calc by rfl works</p>



<a name="197805291"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rfl%20vs%20by%20reflexivity/near/197805291" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Egbert Rijke <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/rfl.20vs.20by.20reflexivity.html#197805291">(May 16 2020 at 17:14)</a>:</h4>
<p>Ah that simplifies things :)</p>



<a name="197805293"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rfl%20vs%20by%20reflexivity/near/197805293" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/rfl.20vs.20by.20reflexivity.html#197805293">(May 16 2020 at 17:14)</a>:</h4>
<p>About your updating question, I need more context. Did you create a Lean project using <code>leanproject</code>?</p>



<a name="197805316"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rfl%20vs%20by%20reflexivity/near/197805316" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Egbert Rijke <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/rfl.20vs.20by.20reflexivity.html#197805316">(May 16 2020 at 17:15)</a>:</h4>
<p>Yes, using <code>leanproject new ...</code></p>



<a name="197805325"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rfl%20vs%20by%20reflexivity/near/197805325" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/rfl.20vs.20by.20reflexivity.html#197805325">(May 16 2020 at 17:15)</a>:</h4>
<p>And you want to upgrade to the latest shiny Lean+mathlib?</p>



<a name="197805329"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rfl%20vs%20by%20reflexivity/near/197805329" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Egbert Rijke <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/rfl.20vs.20by.20reflexivity.html#197805329">(May 16 2020 at 17:15)</a>:</h4>
<p>Of course!</p>



<a name="197805374"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rfl%20vs%20by%20reflexivity/near/197805374" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/rfl.20vs.20by.20reflexivity.html#197805374">(May 16 2020 at 17:16)</a>:</h4>
<p><code>leanproject upgrade</code> will do that</p>



<a name="197805376"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rfl%20vs%20by%20reflexivity/near/197805376" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Egbert Rijke <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/rfl.20vs.20by.20reflexivity.html#197805376">(May 16 2020 at 17:16)</a>:</h4>
<p>Great!</p>



<a name="197805379"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rfl%20vs%20by%20reflexivity/near/197805379" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Egbert Rijke <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/rfl.20vs.20by.20reflexivity.html#197805379">(May 16 2020 at 17:16)</a>:</h4>
<p>That's easy:)</p>



<a name="197805381"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rfl%20vs%20by%20reflexivity/near/197805381" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Egbert Rijke <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/rfl.20vs.20by.20reflexivity.html#197805381">(May 16 2020 at 17:16)</a>:</h4>
<p>Thanks a lot!</p>



<a name="197805385"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rfl%20vs%20by%20reflexivity/near/197805385" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/rfl.20vs.20by.20reflexivity.html#197805385">(May 16 2020 at 17:16)</a>:</h4>
<p>Not just <code>up</code>?</p>



<a name="197805395"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rfl%20vs%20by%20reflexivity/near/197805395" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/rfl.20vs.20by.20reflexivity.html#197805395">(May 16 2020 at 17:17)</a>:</h4>
<p>That's when I'll get so addicted to it that he'll want to do it several times a day</p>



<a name="197805410"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rfl%20vs%20by%20reflexivity/near/197805410" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/rfl.20vs.20by.20reflexivity.html#197805410">(May 16 2020 at 17:17)</a>:</h4>
<p>like you do</p>



<a name="197805473"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rfl%20vs%20by%20reflexivity/near/197805473" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Egbert Rijke <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/rfl.20vs.20by.20reflexivity.html#197805473">(May 16 2020 at 17:18)</a>:</h4>
<p>Actually, <code>leanproject upgrade</code> was countered by <code>no such command exists</code>. But <code>leanproject up</code> works, so I guess I might as well be an addict XD</p>



<a name="197805497"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rfl%20vs%20by%20reflexivity/near/197805497" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/rfl.20vs.20by.20reflexivity.html#197805497">(May 16 2020 at 17:19)</a>:</h4>
<p>Oh sorry, it's <code>upgrade-mathlib</code></p>



<a name="197805500"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rfl%20vs%20by%20reflexivity/near/197805500" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/rfl.20vs.20by.20reflexivity.html#197805500">(May 16 2020 at 17:19)</a>:</h4>
<p>I've been addicted for too long, I forgot the long version</p>



<a name="197805550"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rfl%20vs%20by%20reflexivity/near/197805550" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/rfl.20vs.20by.20reflexivity.html#197805550">(May 16 2020 at 17:20)</a>:</h4>
<p>I need to add more synonyms. I already have <code>upgrade-mathlib</code>, <code>update-mathlib</code> and <code>up</code></p>



<a name="197805554"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rfl%20vs%20by%20reflexivity/near/197805554" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/rfl.20vs.20by.20reflexivity.html#197805554">(May 16 2020 at 17:20)</a>:</h4>
<p>(because nobody can remember whether it's update or upgrade)</p>



<a name="197805572"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rfl%20vs%20by%20reflexivity/near/197805572" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/rfl.20vs.20by.20reflexivity.html#197805572">(May 16 2020 at 17:21)</a>:</h4>
<p>Another trick: <code>leanproject --help</code> can help.</p>



<a name="197805648"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rfl%20vs%20by%20reflexivity/near/197805648" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Egbert Rijke <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/rfl.20vs.20by.20reflexivity.html#197805648">(May 16 2020 at 17:22)</a>:</h4>
<p>Do I need to restart vscode when I've upgraded lean, or is that not necessary?</p>



<a name="197805659"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rfl%20vs%20by%20reflexivity/near/197805659" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/rfl.20vs.20by.20reflexivity.html#197805659">(May 16 2020 at 17:23)</a>:</h4>
<p>I think the extension detects it and restarts lean</p>



<a name="197805662"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rfl%20vs%20by%20reflexivity/near/197805662" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Egbert Rijke <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/rfl.20vs.20by.20reflexivity.html#197805662">(May 16 2020 at 17:23)</a>:</h4>
<p>Great!</p>



<a name="197805669"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rfl%20vs%20by%20reflexivity/near/197805669" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/rfl.20vs.20by.20reflexivity.html#197805669">(May 16 2020 at 17:23)</a>:</h4>
<p>(but restarting VScode just in case would have been faster than typing the question)</p>



<a name="197805719"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rfl%20vs%20by%20reflexivity/near/197805719" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Egbert Rijke <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/rfl.20vs.20by.20reflexivity.html#197805719">(May 16 2020 at 17:24)</a>:</h4>
<p>Ok thanks for your help:)</p>



<a name="197806548"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rfl%20vs%20by%20reflexivity/near/197806548" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/rfl.20vs.20by.20reflexivity.html#197806548">(May 16 2020 at 17:44)</a>:</h4>
<p><span class="user-mention silent" data-user-id="253568">Egbert Rijke</span> <a href="#narrow/stream/113488-general/topic/rfl.20vs.20by.20reflexivity/near/197805073">said</a>:</p>
<blockquote>
<p>Here is my <a href="/user_uploads/3121/WjVXUD4SSdo-2qJujDF9mn5k/mwe.lean">mwe</a></p>
</blockquote>
<p>Why upload a file instead of copy-pasting the text? The latter should be easier for both you and the people who want to read your example?</p>
<div class="codehilite"><pre><span></span><code><span class="kn">namespace</span> <span class="n">mwe</span>

<span class="n">universes</span> <span class="n">u</span> <span class="n">v</span> <span class="n">w</span>

<span class="kn">inductive</span> <span class="n">list_of_length</span> <span class="o">(</span><span class="n">A</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span> <span class="o">:</span> <span class="bp">ℕ</span> <span class="bp">→</span> <span class="kt">Type</span> <span class="n">u</span>
<span class="bp">|</span> <span class="n">nil</span> <span class="o">:</span> <span class="n">list_of_length</span> <span class="mi">0</span>
<span class="bp">|</span> <span class="n">cons</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">),</span> <span class="n">A</span> <span class="bp">→</span> <span class="n">list_of_length</span> <span class="n">n</span> <span class="bp">→</span> <span class="n">list_of_length</span> <span class="o">(</span><span class="n">n</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span>

<span class="kn">namespace</span> <span class="n">list_of_length</span>

<span class="n">def</span> <span class="n">head</span> <span class="o">{</span><span class="n">A</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">}</span> <span class="o">:</span>
    <span class="bp">∀</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">),</span> <span class="n">list_of_length</span> <span class="n">A</span> <span class="o">(</span><span class="n">n</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span> <span class="bp">→</span> <span class="n">A</span>
<span class="bp">|</span> <span class="n">n</span> <span class="o">(</span><span class="n">cons</span> <span class="n">n&#39;</span> <span class="n">a</span> <span class="n">x</span><span class="o">)</span> <span class="o">:=</span> <span class="n">a</span>

<span class="n">def</span> <span class="n">tail</span> <span class="o">{</span><span class="n">A</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">}</span> <span class="o">:</span>
    <span class="bp">∀</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">),</span> <span class="n">list_of_length</span> <span class="n">A</span> <span class="o">(</span><span class="n">n</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span> <span class="bp">→</span> <span class="n">list_of_length</span> <span class="n">A</span> <span class="n">n</span>
<span class="bp">|</span> <span class="n">n</span> <span class="o">(</span><span class="n">cons</span> <span class="n">n&#39;</span> <span class="n">a</span> <span class="n">x</span><span class="o">)</span> <span class="o">:=</span> <span class="n">x</span>

<span class="n">def</span> <span class="n">Matrix</span> <span class="o">(</span><span class="n">m</span> <span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">A</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span> <span class="o">:=</span>
<span class="n">list_of_length</span> <span class="o">(</span><span class="n">list_of_length</span> <span class="n">A</span> <span class="n">n</span><span class="o">)</span> <span class="n">m</span>

<span class="n">def</span> <span class="n">top_row</span> <span class="o">{</span><span class="n">A</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">}</span> <span class="o">{</span><span class="n">m</span> <span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">}</span> <span class="o">:</span>
    <span class="n">Matrix</span> <span class="o">(</span><span class="n">m</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span> <span class="n">n</span> <span class="n">A</span> <span class="bp">→</span> <span class="n">list_of_length</span> <span class="n">A</span> <span class="n">n</span> <span class="o">:=</span>
<span class="n">head</span> <span class="n">m</span>

<span class="n">def</span> <span class="n">tail_rows</span> <span class="o">{</span><span class="n">A</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">}</span> <span class="o">{</span><span class="n">m</span> <span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">}</span> <span class="o">:</span>
    <span class="n">Matrix</span> <span class="o">(</span><span class="n">m</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span> <span class="n">n</span> <span class="n">A</span> <span class="bp">→</span> <span class="n">Matrix</span> <span class="n">m</span> <span class="n">n</span> <span class="n">A</span> <span class="o">:=</span>
<span class="n">tail</span> <span class="n">m</span>

<span class="n">def</span> <span class="n">cons_horizontal</span> <span class="o">{</span><span class="n">A</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">}</span> <span class="o">:</span>
    <span class="bp">∀</span> <span class="o">{</span><span class="n">m</span> <span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">},</span> <span class="n">list_of_length</span> <span class="n">A</span> <span class="n">m</span> <span class="bp">→</span> <span class="n">Matrix</span> <span class="n">m</span> <span class="n">n</span> <span class="n">A</span> <span class="bp">→</span> <span class="n">Matrix</span> <span class="n">m</span> <span class="o">(</span><span class="n">n</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span> <span class="n">A</span>
<span class="bp">|</span> <span class="mi">0</span> <span class="n">n</span> <span class="n">nil</span> <span class="n">M</span> <span class="o">:=</span> <span class="n">nil</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">m</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span> <span class="n">n</span> <span class="o">(</span><span class="n">cons</span> <span class="n">m&#39;</span> <span class="n">a</span> <span class="n">x</span><span class="o">)</span> <span class="n">M</span> <span class="o">:=</span>
    <span class="n">cons</span> <span class="n">m</span> <span class="o">(</span><span class="n">cons</span> <span class="n">n</span> <span class="n">a</span> <span class="o">(</span><span class="n">top_row</span> <span class="n">M</span><span class="o">))</span> <span class="o">(</span><span class="n">cons_horizontal</span> <span class="n">x</span> <span class="o">(</span><span class="n">tail_rows</span> <span class="n">M</span><span class="o">))</span>

<span class="kn">theorem</span> <span class="n">top_row_cons_horizontal</span> <span class="o">{</span><span class="n">A</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">}</span> <span class="o">:</span>
    <span class="bp">∀</span> <span class="o">{</span><span class="n">m</span> <span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">}</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">list_of_length</span> <span class="n">A</span> <span class="o">(</span><span class="n">m</span><span class="bp">+</span><span class="mi">1</span><span class="o">))</span> <span class="o">(</span><span class="n">M</span> <span class="o">:</span> <span class="n">Matrix</span> <span class="o">(</span><span class="n">m</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span> <span class="n">n</span> <span class="n">A</span><span class="o">),</span>
    <span class="n">top_row</span> <span class="o">(</span><span class="n">cons_horizontal</span> <span class="n">x</span> <span class="n">M</span><span class="o">)</span> <span class="bp">=</span> <span class="n">cons</span> <span class="n">n</span> <span class="o">(</span><span class="n">head</span> <span class="n">m</span> <span class="n">x</span><span class="o">)</span> <span class="o">(</span><span class="n">top_row</span> <span class="n">M</span><span class="o">)</span>
<span class="bp">|</span> <span class="n">m</span> <span class="n">n</span> <span class="o">(</span><span class="n">cons</span> <span class="n">m&#39;</span> <span class="n">a</span> <span class="n">x</span><span class="o">)</span> <span class="o">(</span><span class="n">cons</span> <span class="n">m&#39;&#39;</span> <span class="n">y</span> <span class="n">M</span><span class="o">)</span> <span class="o">:=</span>
    <span class="k">calc</span>
    <span class="n">top_row</span> <span class="o">(</span><span class="n">cons_horizontal</span> <span class="o">(</span><span class="n">cons</span> <span class="n">m&#39;</span> <span class="n">a</span> <span class="n">x</span><span class="o">)</span> <span class="o">(</span><span class="n">cons</span> <span class="n">m&#39;&#39;</span> <span class="n">y</span> <span class="n">M</span><span class="o">))</span>
        <span class="bp">=</span> <span class="n">cons</span> <span class="n">n</span> <span class="n">a</span> <span class="n">y</span> <span class="o">:</span> <span class="n">rfl</span>
    <span class="bp">...</span> <span class="bp">=</span> <span class="n">cons</span> <span class="n">n</span> <span class="o">(</span><span class="n">head</span> <span class="n">m</span> <span class="o">(</span><span class="n">cons</span> <span class="n">m&#39;</span> <span class="n">a</span> <span class="n">x</span><span class="o">))</span> <span class="o">(</span><span class="n">top_row</span> <span class="o">(</span><span class="n">cons</span> <span class="n">m&#39;&#39;</span> <span class="n">y</span> <span class="n">M</span><span class="o">))</span> <span class="o">:</span> <span class="k">by</span> <span class="n">reflexivity</span>

<span class="kn">end</span> <span class="n">list_of_length</span>

<span class="kn">end</span> <span class="n">mwe</span>
</code></pre></div>



<a name="197807014"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rfl%20vs%20by%20reflexivity/near/197807014" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Egbert Rijke <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/rfl.20vs.20by.20reflexivity.html#197807014">(May 16 2020 at 17:55)</a>:</h4>
<p>Ok, I'll do that next time. Thanks!</p>



<a name="197809629"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rfl%20vs%20by%20reflexivity/near/197809629" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/rfl.20vs.20by.20reflexivity.html#197809629">(May 16 2020 at 19:01)</a>:</h4>
<p>You can also restart Lean without restarting VS Code by hitting ctrl+P and typing "Lean restart" into the command palette. You can assign a keybind to it by searching for the same thing in the VS Code keybinds.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>