---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/khatex.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/khatex.html">khatex</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="208345157"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/khatex/near/208345157" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/khatex.html#208345157">(Aug 28 2020 at 13:52)</a>:</h4>
<p><span class="user-mention" data-user-id="121918">@Edward Ayers</span> could you comment on <a href="https://github.com/leanprover/vscode-lean/pull/225">https://github.com/leanprover/vscode-lean/pull/225</a>? What do you want khatex for? And why not using mathjax instead, especially now that we have mathjax 3.0?</p>



<a name="208345248"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/khatex/near/208345248" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Edward Ayers <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/khatex.html#208345248">(Aug 28 2020 at 13:53)</a>:</h4>
<p>I guess I'm just more familiar with katex. I'm not married to it.</p>



<a name="208345347"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/khatex/near/208345347" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Edward Ayers <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/khatex.html#208345347">(Aug 28 2020 at 13:54)</a>:</h4>
<p>The plan is to try this out as a model for adding certain useful libraries to widgets.</p>



<a name="208345605"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/khatex/near/208345605" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Edward Ayers <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/khatex.html#208345605">(Aug 28 2020 at 13:56)</a>:</h4>
<p>The principled way would be to allow Lean to emit javascript that can run random libraries. But the thinking is that katex and D3 cover a lot of the use cases for having custom javascript libraries, so it makes sense to add them in directly to vscode-lean.</p>



<a name="208345756"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/khatex/near/208345756" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/khatex.html#208345756">(Aug 28 2020 at 13:57)</a>:</h4>
<p>What do you have in mind using D3? This is a huge library (which very low-level and difficult to learn, but that's a different story).</p>



<a name="208345764"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/khatex/near/208345764" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Edward Ayers <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/khatex.html#208345764">(Aug 28 2020 at 13:57)</a>:</h4>
<p>If people don't like it (eg it bloats the vscode extension too much) then it is no problem to remove it.</p>



<a name="208345811"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/khatex/near/208345811" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Edward Ayers <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/khatex.html#208345811">(Aug 28 2020 at 13:57)</a>:</h4>
<p>There are some React wrappers for D3 that I was looking at</p>



<a name="208346122"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/khatex/near/208346122" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Edward Ayers <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/khatex.html#208346122">(Aug 28 2020 at 14:00)</a>:</h4>
<p>Even just being able to let Lean widgets render graphs would be really useful.</p>



<a name="208346219"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/khatex/near/208346219" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/khatex.html#208346219">(Aug 28 2020 at 14:00)</a>:</h4>
<p>Wouldn't be easier to work on "jump to definition" in the info view?</p>



<a name="208346711"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/khatex/near/208346711" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Edward Ayers <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/khatex.html#208346711">(Aug 28 2020 at 14:04)</a>:</h4>
<p>well triaging is a different question...</p>



<a name="208346777"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/khatex/near/208346777" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/khatex.html#208346777">(Aug 28 2020 at 14:04)</a>:</h4>
<p>Sure, you're free to work on anything you find most fun.</p>



<a name="208347051"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/khatex/near/208347051" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/khatex.html#208347051">(Aug 28 2020 at 14:07)</a>:</h4>
<p>I would totally use <a href="https://github.com/Kha/">Kha</a>tex</p>



<a name="208347109"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/khatex/near/208347109" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/khatex.html#208347109">(Aug 28 2020 at 14:08)</a>:</h4>
<p>I didn't think of it that way</p>



<a name="208347188"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/khatex/near/208347188" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Edward Ayers <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/khatex.html#208347188">(Aug 28 2020 at 14:08)</a>:</h4>
<p>Is there some beef around katex vs mathjax? Afaict they seem to be exactly the same but I'm not really paying attention</p>



<a name="208347608"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/khatex/near/208347608" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/khatex.html#208347608">(Aug 28 2020 at 14:12)</a>:</h4>
<p>This was also my impression.  I thought katex is the new, modern, cool, <em>in</em> rewrite of mathjax.</p>



<a name="208347641"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/khatex/near/208347641" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/khatex.html#208347641">(Aug 28 2020 at 14:12)</a>:</h4>
<p>No, that's the old new mathjax</p>



<a name="208347649"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/khatex/near/208347649" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/khatex.html#208347649">(Aug 28 2020 at 14:12)</a>:</h4>
<p>The new new mathjax is mathjax 3.0</p>



<a name="208347682"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/khatex/near/208347682" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/khatex.html#208347682">(Aug 28 2020 at 14:13)</a>:</h4>
<p>But I'm not a specialist here.</p>



<a name="208347909"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/khatex/near/208347909" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/khatex.html#208347909">(Aug 28 2020 at 14:15)</a>:</h4>
<p><a href="https://pbelmans.ncag.info/blog/2015/12/21/on-towards-mathjax-3-0/">https://pbelmans.ncag.info/blog/2015/12/21/on-towards-mathjax-3-0/</a> is 5 years old, but maybe still relevant</p>



<a name="208347941"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/khatex/near/208347941" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/khatex.html#208347941">(Aug 28 2020 at 14:15)</a>:</h4>
<p>Written by the guy who does the frontend for Stacks Project and Kerodon</p>



<a name="208348098"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/khatex/near/208348098" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/khatex.html#208348098">(Aug 28 2020 at 14:16)</a>:</h4>
<p>Does mathjax 3 support tikz?!</p>



<a name="208348176"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/khatex/near/208348176" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/khatex.html#208348176">(Aug 28 2020 at 14:17)</a>:</h4>
<p>No. plastex uses server-side tikz rendering.</p>



<a name="208348260"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/khatex/near/208348260" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/khatex.html#208348260">(Aug 28 2020 at 14:18)</a>:</h4>
<p>Ah ok</p>



<a name="208348286"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/khatex/near/208348286" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Edward Ayers <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/khatex.html#208348286">(Aug 28 2020 at 14:18)</a>:</h4>
<p>Looks like it's an open issue though: <a href="https://github.com/mathjax/MathJax/issues/41">https://github.com/mathjax/MathJax/issues/41</a></p>



<a name="208348297"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/khatex/near/208348297" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Edward Ayers <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/khatex.html#208348297">(Aug 28 2020 at 14:18)</a>:</h4>
<p>That would be a game changer</p>



<a name="208348414"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/khatex/near/208348414" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Edward Ayers <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/khatex.html#208348414">(Aug 28 2020 at 14:19)</a>:</h4>
<p>This compiles tex to web assembly and then renders as an svg (!) <a href="https://github.com/kisonecat/tikzjax">https://github.com/kisonecat/tikzjax</a></p>



<a name="208348600"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/khatex/near/208348600" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Edward Ayers <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/khatex.html#208348600">(Aug 28 2020 at 14:20)</a>:</h4>
<p>So assuming that library works we could actually do this in theory</p>



<a name="208348882"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/khatex/near/208348882" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/khatex.html#208348882">(Aug 28 2020 at 14:23)</a>:</h4>
<p>It's probably pretty slow.</p>



<a name="208356911"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/khatex/near/208356911" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/khatex.html#208356911">(Aug 28 2020 at 15:24)</a>:</h4>
<p>Hopefully this makes it easier to tackle <a href="https://github.com/leanprover/vscode-lean/issues/139">leanprover/vscode-lean#139</a> (on rendering LaTeX in doc strings on hover).</p>



<a name="208358629"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/khatex/near/208358629" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/khatex.html#208358629">(Aug 28 2020 at 15:37)</a>:</h4>
<p>Speaking of slowness, did something happen in the last couple of days? The widget view sometimes lags like crazy.</p>



<a name="208360872"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/khatex/near/208360872" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Edward Ayers <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/khatex.html#208360872">(Aug 28 2020 at 15:54)</a>:</h4>
<p>I don't think so.</p>



<a name="208360994"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/khatex/near/208360994" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Edward Ayers <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/khatex.html#208360994">(Aug 28 2020 at 15:55)</a>:</h4>
<p>3.19 came out but idk what would have changed to cause it to be slow</p>



<a name="208361117"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/khatex/near/208361117" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/khatex.html#208361117">(Aug 28 2020 at 15:56)</a>:</h4>
<p>Let's wait to see if anyone else noticed something, and if Gabriel has an idea. Maybe it's my computer.</p>



<a name="208361422"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/khatex/near/208361422" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/khatex.html#208361422">(Aug 28 2020 at 15:58)</a>:</h4>
<p>mathlib master isn't on 3.19.0c yet anyways. Do you notice it happening on any specific files, or just all of them in general?</p>



<a name="208361497"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/khatex/near/208361497" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/khatex.html#208361497">(Aug 28 2020 at 15:59)</a>:</h4>
<p>I've been working both on linear algebra and integration.</p>



<a name="208366891"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/khatex/near/208366891" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/khatex.html#208366891">(Aug 28 2020 at 16:44)</a>:</h4>
<p>When Scott shared his screen this afternoon, he also had trouble with the widget view</p>



<a name="208406259"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/khatex/near/208406259" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/khatex.html#208406259">(Aug 28 2020 at 23:51)</a>:</h4>
<p>Yeah, it was lagging badly. It seemed like when my mouse passed over the rendered goal, nothing would happen for 2-10 seconds, and then there would be a sudden burst of different highlighting passing through the rendered goal, presumably following the path of my mouse.</p>



<a name="208406326"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/khatex/near/208406326" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/khatex.html#208406326">(Aug 28 2020 at 23:52)</a>:</h4>
<p>The other things I would <strong>really</strong> like in the goal view are:</p>
<ol>
<li>whitespace and indenting matching the plain text view (I often turn off widgets because the expressions become unreadable without indenting)</li>
<li>coloured parentheses to show matching pairs!</li>
</ol>



<a name="208422605"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/khatex/near/208422605" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex Peattie <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/khatex.html#208422605">(Aug 29 2020 at 07:56)</a>:</h4>
<p><span class="user-mention" data-user-id="110087">@Scott Morrison</span> (or anyone else) could you share an example of a theorem with a goal that's very laggy?</p>



<a name="208426919"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/khatex/near/208426919" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/khatex.html#208426919">(Aug 29 2020 at 10:11)</a>:</h4>
<p>e.g. if I put the cursor at line 107 of <code>src/topology/sheaves/sheaf_of_functions.lean</code> in <code>master</code>, go to the first goal, then shake the mouse up and down over the goal, I can quickly get it to lag many seconds behind.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>