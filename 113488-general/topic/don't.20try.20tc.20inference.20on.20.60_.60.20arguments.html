---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/don't.20try.20tc.20inference.20on.20.60_.60.20arguments.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/don't.20try.20tc.20inference.20on.20.60_.60.20arguments.html">don't try tc inference on `_` arguments</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="214745294"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/don%27t%20try%20tc%20inference%20on%20%60_%60%20arguments/near/214745294" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/don't.20try.20tc.20inference.20on.20.60_.60.20arguments.html#214745294">(Oct 27 2020 at 18:42)</a>:</h4>
<p>Sometimes Lean isn't being smart when you tell it <code>refine my_lemma x</code>, and so you say <code>refine @my_lemma _ _ _ _ x</code>. But then the 2nd <code>_</code> is some typeclass argument that Lean can't find, and so the <code>refine</code> fails. Instead, I would like it to turn that argument into a new goal.<br>
Of course <code>_</code> is powerful the way it is, so we shouldn't change that.</p>
<p>Can we make <code>…</code> mean roughly the same to Lean, except that it will just blindly turn that argument into a goal, without trying to infer it by elaboration or typeclass search?</p>



<a name="214745412"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/don%27t%20try%20tc%20inference%20on%20%60_%60%20arguments/near/214745412" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/don't.20try.20tc.20inference.20on.20.60_.60.20arguments.html#214745412">(Oct 27 2020 at 18:43)</a>:</h4>
<p><span aria-label="four leaf clover" class="emoji emoji-1f340" role="img" title="four leaf clover">:four_leaf_clover:</span></p>



<a name="214745432"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/don%27t%20try%20tc%20inference%20on%20%60_%60%20arguments/near/214745432" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/don't.20try.20tc.20inference.20on.20.60_.60.20arguments.html#214745432">(Oct 27 2020 at 18:43)</a>:</h4>
<p>Does <code>notation `…` := id _</code> work?</p>



<a name="214745453"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/don%27t%20try%20tc%20inference%20on%20%60_%60%20arguments/near/214745453" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/don't.20try.20tc.20inference.20on.20.60_.60.20arguments.html#214745453">(Oct 27 2020 at 18:43)</a>:</h4>
<p>That's <span class="user-mention" data-user-id="110049">@Mario Carneiro</span>'s standard trick.</p>



<a name="214745519"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/don%27t%20try%20tc%20inference%20on%20%60_%60%20arguments/near/214745519" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/don't.20try.20tc.20inference.20on.20.60_.60.20arguments.html#214745519">(Oct 27 2020 at 18:44)</a>:</h4>
<p>I haven't tried yet.</p>



<a name="214745567"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/don%27t%20try%20tc%20inference%20on%20%60_%60%20arguments/near/214745567" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/don't.20try.20tc.20inference.20on.20.60_.60.20arguments.html#214745567">(Oct 27 2020 at 18:44)</a>:</h4>
<p>I wish it was easier to experiment with Lean 4, since I think this exact feature already exists.</p>



<a name="214745612"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/don%27t%20try%20tc%20inference%20on%20%60_%60%20arguments/near/214745612" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/don't.20try.20tc.20inference.20on.20.60_.60.20arguments.html#214745612">(Oct 27 2020 at 18:44)</a>:</h4>
<p>Well, not using the name <code>…</code></p>



<a name="214745669"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/don%27t%20try%20tc%20inference%20on%20%60_%60%20arguments/near/214745669" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/don't.20try.20tc.20inference.20on.20.60_.60.20arguments.html#214745669">(Oct 27 2020 at 18:45)</a>:</h4>
<p>I think it's <code>refine @my_lemma ?inst_1 ?inst_2</code> etc.</p>



<a name="214745706"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/don%27t%20try%20tc%20inference%20on%20%60_%60%20arguments/near/214745706" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/don't.20try.20tc.20inference.20on.20.60_.60.20arguments.html#214745706">(Oct 27 2020 at 18:45)</a>:</h4>
<p>Errm, I mean <code>refine @myLemma ?inst1 ?inst2</code> of course.</p>



<a name="214745732"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/don%27t%20try%20tc%20inference%20on%20%60_%60%20arguments/near/214745732" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/don't.20try.20tc.20inference.20on.20.60_.60.20arguments.html#214745732">(Oct 27 2020 at 18:45)</a>:</h4>
<p>Yes, something with question marks</p>



<a name="214745870"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/don%27t%20try%20tc%20inference%20on%20%60_%60%20arguments/near/214745870" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/don't.20try.20tc.20inference.20on.20.60_.60.20arguments.html#214745870">(Oct 27 2020 at 18:46)</a>:</h4>
<p><a href="https://github.com/leanprover/lean4/blob/8e16589f603f3425119df8533fda9204ff6b0599/tests/lean/namedHoles.lean">https://github.com/leanprover/lean4/blob/8e16589f603f3425119df8533fda9204ff6b0599/tests/lean/namedHoles.lean</a></p>



<a name="214746049"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/don%27t%20try%20tc%20inference%20on%20%60_%60%20arguments/near/214746049" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/don't.20try.20tc.20inference.20on.20.60_.60.20arguments.html#214746049">(Oct 27 2020 at 18:47)</a>:</h4>
<p>I think maybe also a <code>?</code> without a name is a fresh hole. I didn't realize there were named holes, that seems neat though I'm not sure offhand where it would come up...</p>



<a name="214746287"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/don%27t%20try%20tc%20inference%20on%20%60_%60%20arguments/near/214746287" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/don't.20try.20tc.20inference.20on.20.60_.60.20arguments.html#214746287">(Oct 27 2020 at 18:49)</a>:</h4>
<p>Unnamed holes are <code>?_</code> IIRC.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>