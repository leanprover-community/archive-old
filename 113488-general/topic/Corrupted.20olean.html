---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/Corrupted.20olean.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Corrupted.20olean.html">Corrupted olean</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="295866794"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Corrupted%20olean/near/295866794" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Corrupted.20olean.html#295866794">(Aug 29 2022 at 14:59)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib/pull/16281">#16281</a> is currently failing CI because <a href="https://tqft.net/mathlib/order/imp">file#order/imp</a> has a corrupted olean. I tried merging master but that didn't fix anything. The file is absolutely fine in local. What do I do? <span aria-label="scream" class="emoji emoji-1f631" role="img" title="scream">:scream:</span></p>



<a name="295958905"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Corrupted%20olean/near/295958905" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mauricio Collares <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Corrupted.20olean.html#295958905">(Aug 29 2022 at 17:20)</a>:</h4>
<p>Either <code>bors r+</code> and hope for the best (which should be fine, because bors will squash and rebase your changes and the corrupted olean won't be used), or open a separate rebased PR. The corrupted olean was generated by <code>nael</code>, which is no longer in use, so this shouldn't happen again.</p>



<a name="295961349"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Corrupted%20olean/near/295961349" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mauricio Collares <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Corrupted.20olean.html#295961349">(Aug 29 2022 at 17:33)</a>:</h4>
<p>Wait, I think <code>62047e97143e5f2a97ce33208df9f80b7f6e7266</code> doesn't build:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="bp">/</span><span class="n">home</span><span class="bp">/</span><span class="n">collares</span><span class="bp">/</span><span class="n">mathlib</span><span class="bp">/</span><span class="n">src</span><span class="bp">/</span><span class="n">data</span><span class="bp">/</span><span class="n">finset</span><span class="bp">/</span><span class="n">basic.lean</span><span class="o">:</span><span class="mi">1252</span><span class="o">:</span><span class="mi">67</span><span class="o">:</span> <span class="n">error</span><span class="o">:</span> <span class="n">type</span> <span class="n">mismatch</span><span class="o">,</span> <span class="n">term</span>
  <span class="n">sup_sdiff_self_left</span>
<span class="n">has</span> <span class="n">type</span>
  <span class="bp">∀</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="bp">?</span><span class="n">m_1</span><span class="o">),</span> <span class="n">b</span> <span class="bp">\</span> <span class="n">a</span> <span class="bp">⊔</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">b</span> <span class="bp">⊔</span> <span class="n">a</span>
<span class="n">but</span> <span class="n">is</span> <span class="n">expected</span> <span class="n">to</span> <span class="k">have</span> <span class="n">type</span>
  <span class="n">s</span> <span class="bp">\</span> <span class="n">t</span> <span class="bp">∪</span> <span class="n">t</span> <span class="bp">=</span> <span class="n">s</span> <span class="bp">∪</span> <span class="n">t</span>
<span class="bp">/</span><span class="n">home</span><span class="bp">/</span><span class="n">collares</span><span class="bp">/</span><span class="n">mathlib</span><span class="bp">/</span><span class="n">src</span><span class="bp">/</span><span class="n">data</span><span class="bp">/</span><span class="n">finset</span><span class="bp">/</span><span class="n">basic.lean</span><span class="o">:</span><span class="mi">1250</span><span class="o">:</span><span class="mi">67</span><span class="o">:</span> <span class="n">error</span><span class="o">:</span> <span class="n">type</span> <span class="n">mismatch</span><span class="o">,</span> <span class="n">term</span>
  <span class="n">sup_sdiff_self_right</span>
<span class="n">has</span> <span class="n">type</span>
  <span class="bp">∀</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="bp">?</span><span class="n">m_1</span><span class="o">),</span> <span class="n">a</span> <span class="bp">⊔</span> <span class="n">b</span> <span class="bp">\</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">a</span> <span class="bp">⊔</span> <span class="n">b</span>
<span class="n">but</span> <span class="n">is</span> <span class="n">expected</span> <span class="n">to</span> <span class="k">have</span> <span class="n">type</span>
  <span class="n">s</span> <span class="bp">∪</span> <span class="n">t</span> <span class="bp">\</span> <span class="n">s</span> <span class="bp">=</span> <span class="n">s</span> <span class="bp">∪</span> <span class="n">t</span>
</code></pre></div>



<a name="295967602"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Corrupted%20olean/near/295967602" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Corrupted.20olean.html#295967602">(Aug 29 2022 at 18:06)</a>:</h4>
<p>Yeah, I'm expecting this kind of error, so the corrupted file is annoying...</p>



<a name="296001617"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Corrupted%20olean/near/296001617" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mauricio Collares <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Corrupted.20olean.html#296001617">(Aug 29 2022 at 21:12)</a>:</h4>
<p>Next up:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="bp">/</span><span class="n">home</span><span class="bp">/</span><span class="n">collares</span><span class="bp">/</span><span class="n">mathlib</span><span class="bp">/</span><span class="n">src</span><span class="bp">/</span><span class="n">order</span><span class="bp">/</span><span class="n">hom</span><span class="bp">/</span><span class="n">basic.lean</span><span class="o">:</span><span class="mi">811</span><span class="o">:</span><span class="mi">0</span><span class="o">:</span> <span class="n">error</span><span class="o">:</span> <span class="o">(</span><span class="n">deterministic</span><span class="o">)</span> <span class="n">timeout</span>
<span class="bp">/</span><span class="n">home</span><span class="bp">/</span><span class="n">collares</span><span class="bp">/</span><span class="n">mathlib</span><span class="bp">/</span><span class="n">src</span><span class="bp">/</span><span class="n">order</span><span class="bp">/</span><span class="n">hom</span><span class="bp">/</span><span class="n">basic.lean</span><span class="o">:</span><span class="mi">806</span><span class="o">:</span><span class="mi">0</span><span class="o">:</span> <span class="n">error</span><span class="o">:</span> <span class="o">(</span><span class="n">deterministic</span><span class="o">)</span> <span class="n">timeout</span>
</code></pre></div>
<p>This is <code>order_iso.map_inf</code>.</p>



<a name="296003159"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Corrupted%20olean/near/296003159" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mauricio Collares <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Corrupted.20olean.html#296003159">(Aug 29 2022 at 21:24)</a>:</h4>
<p><span class="user-mention" data-user-id="387244">@Yaël Dillies</span> Please revert my commit after CI runs :) If it doesn't build after reverting, then I think you should just start another branch on top of current master.</p>
<p>Edit: Never mind, my previous approach was not as hacky as it should have been. I just added and removed a  <code>rm src/order/imp.olean</code> build step to <code>build.yml</code>, so things should be working now.</p>



<a name="296076528"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Corrupted%20olean/near/296076528" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Corrupted.20olean.html#296076528">(Aug 30 2022 at 10:50)</a>:</h4>
<p>Note that when CI fails, the second call of <code>lean --make</code> to try to fix bad oleans doesn't run</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>