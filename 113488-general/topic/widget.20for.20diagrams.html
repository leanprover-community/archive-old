---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/widget.20for.20diagrams.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/widget.20for.20diagrams.html">widget for diagrams</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="207227259"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/widget%20for%20diagrams/near/207227259" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/widget.20for.20diagrams.html#207227259">(Aug 18 2020 at 06:29)</a>:</h4>
<p>What do we need to do, to write a widget that turns</p>
<div class="codehilite"><pre><span></span><code><span class="n">pullback</span><span class="bp">.</span><span class="n">fst</span> <span class="err">≫</span> <span class="n">pullback</span><span class="bp">.</span><span class="n">fst</span> <span class="err">≫</span> <span class="n">ex1</span> <span class="err">≫</span> <span class="n">x</span><span class="bp">.</span><span class="n">hom</span> <span class="err">≫</span> <span class="n">pullback</span><span class="bp">.</span><span class="n">snd</span> <span class="bp">=</span> <span class="n">pullback</span><span class="bp">.</span><span class="n">snd</span> <span class="err">≫</span> <span class="n">pullback</span><span class="bp">.</span><span class="n">snd</span> <span class="err">≫</span> <span class="n">ey2</span> <span class="err">≫</span> <span class="n">y</span><span class="bp">.</span><span class="n">hom</span> <span class="err">≫</span> <span class="n">pullback</span><span class="bp">.</span><span class="n">snd</span>
</code></pre></div>


<p>into a beautifully rendered diagram?</p>



<a name="207227434"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/widget%20for%20diagrams/near/207227434" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/widget.20for.20diagrams.html#207227434">(Aug 18 2020 at 06:32)</a>:</h4>
<p>and then drag and drop to fill in commutative cells?</p>



<a name="207227467"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/widget%20for%20diagrams/near/207227467" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/widget.20for.20diagrams.html#207227467">(Aug 18 2020 at 06:33)</a>:</h4>
<p>Well, that would be a follow-up feature.</p>



<a name="207227508"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/widget%20for%20diagrams/near/207227508" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/widget.20for.20diagrams.html#207227508">(Aug 18 2020 at 06:34)</a>:</h4>
<p>But just displaying the diagram would be a first step</p>



<a name="207227524"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/widget%20for%20diagrams/near/207227524" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/widget.20for.20diagrams.html#207227524">(Aug 18 2020 at 06:34)</a>:</h4>
<p>Now I need to grab pen and paper to be able to figure out what the next step is. And that feels like defeat to me.</p>



<a name="207227963"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/widget%20for%20diagrams/near/207227963" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Markus Himmel <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/widget.20for.20diagrams.html#207227963">(Aug 18 2020 at 06:44)</a>:</h4>
<p>Rendering <em>a</em> diagram is certainly possible using a widget that emits inline svg. Rendering a <em>beautiful</em> diagram is another matter entirely, since graph drawing is a difficult problem.</p>



<a name="207228131"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/widget%20for%20diagrams/near/207228131" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/widget.20for.20diagrams.html#207228131">(Aug 18 2020 at 06:47)</a>:</h4>
<p>Maybe, if we use D3, we can let the user push around the nodes?</p>



<a name="207228173"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/widget%20for%20diagrams/near/207228173" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/widget.20for.20diagrams.html#207228173">(Aug 18 2020 at 06:48)</a>:</h4>
<p>That would already be really nice</p>



<a name="207232707"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/widget%20for%20diagrams/near/207232707" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Markus Himmel <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/widget.20for.20diagrams.html#207232707">(Aug 18 2020 at 07:56)</a>:</h4>
<p>Hmm.. I seems like <code>script</code> tags emitted by widgets don't get executed :/</p>



<a name="207233627"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/widget%20for%20diagrams/near/207233627" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/widget.20for.20diagrams.html#207233627">(Aug 18 2020 at 08:09)</a>:</h4>
<p>That means we can't have custom interactions?</p>



<a name="207233641"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/widget%20for%20diagrams/near/207233641" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/widget.20for.20diagrams.html#207233641">(Aug 18 2020 at 08:09)</a>:</h4>
<p>I understand the security risk...</p>



<a name="207233690"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/widget%20for%20diagrams/near/207233690" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/widget.20for.20diagrams.html#207233690">(Aug 18 2020 at 08:10)</a>:</h4>
<p>Time to fork VScode rofl?</p>



<a name="207233696"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/widget%20for%20diagrams/near/207233696" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/widget.20for.20diagrams.html#207233696">(Aug 18 2020 at 08:10)</a>:</h4>
<p>It's enough to change the extension.</p>



<a name="207233715"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/widget%20for%20diagrams/near/207233715" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/widget.20for.20diagrams.html#207233715">(Aug 18 2020 at 08:10)</a>:</h4>
<p>PRs to enable the remote code execution are welcome.</p>



<a name="207233739"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/widget%20for%20diagrams/near/207233739" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/widget.20for.20diagrams.html#207233739">(Aug 18 2020 at 08:11)</a>:</h4>
<p>But maybe <span class="user-mention" data-user-id="121918">@Edward Ayers</span> has some thoughts on this as well.</p>



<a name="207237789"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/widget%20for%20diagrams/near/207237789" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/widget.20for.20diagrams.html#207237789">(Aug 18 2020 at 09:02)</a>:</h4>
<p>Which part of the vs-code extension currently forbids script tags?</p>



<a name="207237913"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/widget%20for%20diagrams/near/207237913" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/widget.20for.20diagrams.html#207237913">(Aug 18 2020 at 09:04)</a>:</h4>
<p>It's not forbidden.  In fact, we already use <code>&lt;script&gt;</code> to include react, the infoview javascript, etc.  It's just that the script tags in the widgets are not rendered as script tags apparently.</p>



<a name="207237959"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/widget%20for%20diagrams/near/207237959" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/widget.20for.20diagrams.html#207237959">(Aug 18 2020 at 09:05)</a>:</h4>
<p>This is the code that renders the widget:<br>
<a href="https://github.com/leanprover/vscode-lean/blob/f30589f89c3a1c7d95b160eb0b42ad25cc0527d2/infoview/widget.tsx#L173">https://github.com/leanprover/vscode-lean/blob/f30589f89c3a1c7d95b160eb0b42ad25cc0527d2/infoview/widget.tsx#L173</a></p>



<a name="207238202"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/widget%20for%20diagrams/near/207238202" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Wong <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/widget.20for.20diagrams.html#207238202">(Aug 18 2020 at 09:08)</a>:</h4>
<p>Related: <a href="https://stackoverflow.com/q/40989629/617159">https://stackoverflow.com/q/40989629/617159</a></p>



<a name="207238203"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/widget%20for%20diagrams/near/207238203" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/widget.20for.20diagrams.html#207238203">(Aug 18 2020 at 09:08)</a>:</h4>
<p>Looks like it's possible by setting the <code>dangerouslySetInnerHTML</code> attribute to a string like <code>&lt;script&gt;...&lt;/script&gt;</code></p>



<a name="207238227"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/widget%20for%20diagrams/near/207238227" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Wong <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/widget.20for.20diagrams.html#207238227">(Aug 18 2020 at 09:09)</a>:</h4>
<p>It looks like the issue is that script tags don't appear in the DOM</p>



<a name="207238252"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/widget%20for%20diagrams/near/207238252" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Wong <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/widget.20for.20diagrams.html#207238252">(Aug 18 2020 at 09:10)</a>:</h4>
<p>So React has no way of seeing whether the tag has already been inserted beforehand</p>



<a name="207245359"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/widget%20for%20diagrams/near/207245359" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex Peattie <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/widget.20for.20diagrams.html#207245359">(Aug 18 2020 at 10:49)</a>:</h4>
<p>My instinct is that sending a <code>&lt;script&gt;</code> tag from Lean and injecting it into VSCode wouldn't be the best way to go <span aria-label="upside down" class="emoji emoji-1f643" role="img" title="upside down">:upside_down:</span>. If I understand the way that widgets work currently, the Lean server sends some HTML back to VSCode which is then rendered by VSCode with fairly minimal post-processing.</p>
<p>For a diagrammatic widget, the best best would probably to send back something simple that VSCode can post-process, e.g. the Lean server sends:</p>
<div class="codehilite"><pre><span></span><code><span class="p">&lt;</span><span class="nt">span</span> <span class="na">class</span><span class="o">=</span><span class="s">&#39;widget widget-diagram&#39;</span><span class="p">&gt;</span>
  digraph {
    a -&gt; b;
    b -&gt; c;
    c -&gt; d;
    d -&gt; a;
  }
<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
</code></pre></div>


<p>And VSCode could then use any Graphviz compatible library (i.e. D3) to render the <a href="https://graphs.grevian.org/resources/static/images/example3.png">corresponding image</a>.</p>
<div class="message_inline_image"><a href="https://graphs.grevian.org/resources/static/images/example3.png" title="corresponding image"><img src="https://graphs.grevian.org/resources/static/images/example3.png"></a></div>



<a name="207248094"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/widget%20for%20diagrams/near/207248094" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Markus Himmel <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/widget.20for.20diagrams.html#207248094">(Aug 18 2020 at 11:27)</a>:</h4>
<p>Sure, but then you need to change the Lean server and/or the VS code extension for every visualization. I was hoping for something that can live in mathlib.</p>



<a name="207249067"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/widget%20for%20diagrams/near/207249067" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex Peattie <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/widget.20for.20diagrams.html#207249067">(Aug 18 2020 at 11:40)</a>:</h4>
<p>If I'm understanding right I don't think the Lean server would need to be changed, as I think the changes could go into <a href="https://github.com/leanprover-community/mathlib/blob/master/src/tactic/interactive_expr.lean">tactic/interactive_expr.lean</a>? You're right about needing VSCode changes, but unfortunately injecting a <code>&lt;script&gt;</code> tag inside of React, inside of a VSCode extension will really be a nightmare. (Especially because VSCode extensions are a sort of subprocess inside VSCode as well). For example, the <code>&lt;script&gt;</code> is likely to mess with React's rendering cycle, unless it's specifically rendered with React in mind...</p>



<a name="207291293"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/widget%20for%20diagrams/near/207291293" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Edward Ayers <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/widget.20for.20diagrams.html#207291293">(Aug 18 2020 at 17:45)</a>:</h4>
<p>Yeah I've been thinking about how to support 3rd party javascript libraries and I don't have any watertight ideas. There are two problems; how to specify which libraries you want (eg give some cdn addresses for D3, Katex etc), the second problem is figuring out how to get the lean widgets system to talk to it, because eg D3 relies on the developer being able to write some script, but atm widgets can only make some static html with simple event handlers.</p>
<p>Adding <code>dangerouslySetInnerHTML</code> with scripts won't work atm but I don't think it's as hacky as it sounds. The lean code is already trusted, eg it can meddle with the file system etc so having it be able to insert arbitrary scripts doesn't seem that bad. The problem is that <code>dangerouslySetInnerHTML</code> takes a JS object as an argument rather than a string, so some C++ would need to change. Even then, the script might be removed from the DOM when a rerender takes place which might be bad.</p>
<p>One idea: in lean you can write some html or javascript as a string and then you can pass it to vscode to insert statically before any widgets start rendering. There would still be a bit of work to get something like D3 working but you could then do it in principle.  This would also solve some of the requests for people wanting to add their CSS to the infoview.</p>



<a name="207292034"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/widget%20for%20diagrams/near/207292034" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Edward Ayers <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/widget.20for.20diagrams.html#207292034">(Aug 18 2020 at 17:51)</a>:</h4>
<p>Also svg should just work (tm):</p>
<div class="codehilite"><pre><span></span><code><span class="n">h</span> <span class="s2">&quot;svg&quot;</span> <span class="o">[</span><span class="n">attr</span><span class="bp">.</span><span class="n">val</span> <span class="s2">&quot;height&quot;</span> <span class="s2">&quot;100&quot;</span><span class="o">,</span> <span class="n">attr</span><span class="bp">.</span><span class="n">val</span> <span class="s2">&quot;width&quot;</span> <span class="s2">&quot;100&quot;</span><span class="o">]</span> <span class="o">[</span>
     <span class="n">h</span> <span class="s2">&quot;circle&quot;</span>
       <span class="o">[</span> <span class="n">attr</span><span class="bp">.</span><span class="n">val</span> <span class="s2">&quot;cx&quot;</span> <span class="s2">&quot;50&quot;</span>
       <span class="o">,</span> <span class="n">attr</span><span class="bp">.</span><span class="n">val</span> <span class="s2">&quot;cy&quot;</span> <span class="s2">&quot;50&quot;</span>
       <span class="o">,</span> <span class="n">attr</span><span class="bp">.</span><span class="n">val</span> <span class="s2">&quot;r&quot;</span> <span class="s2">&quot;40&quot;</span>
       <span class="o">,</span> <span class="n">attr</span><span class="bp">.</span><span class="n">val</span> <span class="s2">&quot;stroke&quot;</span> <span class="s2">&quot;black&quot;</span>
       <span class="o">,</span> <span class="n">attr</span><span class="bp">.</span><span class="n">val</span> <span class="s2">&quot;strokeWidth&quot;</span> <span class="s2">&quot;3&quot;</span>
       <span class="o">,</span> <span class="n">attr</span><span class="bp">.</span><span class="n">val</span> <span class="s2">&quot;fill&quot;</span> <span class="s2">&quot;red&quot;</span>
       <span class="o">]</span> <span class="o">[]</span>
<span class="o">]</span>
</code></pre></div>



<a name="207292128"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/widget%20for%20diagrams/near/207292128" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Edward Ayers <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/widget.20for.20diagrams.html#207292128">(Aug 18 2020 at 17:52)</a>:</h4>
<p>So another approach would be to write a whole diagram rendering library in Lean</p>



<a name="207292171"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/widget%20for%20diagrams/near/207292171" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Edward Ayers <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/widget.20for.20diagrams.html#207292171">(Aug 18 2020 at 17:52)</a>:</h4>
<p>How hard can it be?</p>



<a name="207292322"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/widget%20for%20diagrams/near/207292322" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Edward Ayers <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/widget.20for.20diagrams.html#207292322">(Aug 18 2020 at 17:54)</a>:</h4>
<p>I deffo want to support KaTeX ootb at some point though.</p>



<a name="207293483"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/widget%20for%20diagrams/near/207293483" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex Peattie <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/widget.20for.20diagrams.html#207293483">(Aug 18 2020 at 18:03)</a>:</h4>
<p><span class="user-mention silent" data-user-id="121918">Edward Ayers</span> <a href="#narrow/stream/113488-general/topic/widget.20for.20diagrams/near/207291293">said</a>:</p>
<blockquote>
<p>One idea: in lean you can write some html or javascript as a string and then you can pass it to vscode to insert statically before any widgets start rendering. There would still be a bit of work to get something like D3 working but you could then do it in principle.  This would also solve some of the requests for people wanting to add their CSS to the infoview.</p>
</blockquote>
<p>I think the main blocker for this approach currently would be the fact that the Infoview uses React - React doesn't really like anyone controlling the DOM tree apart from itself... For example you can see <a href="https://www.smashingmagazine.com/2018/02/react-d3-ecosystem/">here</a> the sort of contortions you usually have to do to get D3 to work in a React context (basically you get D3 to write a "faux DOM" first rather than inserting things on the page directly). The Infoview could be rewritten to just use plain JS, which would make it much easier to have 3rd party scripts change things in the infoview.</p>



<a name="207293508"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/widget%20for%20diagrams/near/207293508" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex Peattie <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/widget.20for.20diagrams.html#207293508">(Aug 18 2020 at 18:03)</a>:</h4>
<p>Yet another idea (if the main goal is visualizations in the short term) could be to extend VSCode to support a visualization grammar like <a href="https://vega.github.io/vega-lite/">Vega Lite</a> or <a href="https://github.com/penrose/penrose">Penrose</a>...</p>



<a name="207293552"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/widget%20for%20diagrams/near/207293552" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex Peattie <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/widget.20for.20diagrams.html#207293552">(Aug 18 2020 at 18:03)</a>:</h4>
<p><span class="user-mention silent" data-user-id="121918">Edward Ayers</span> <a href="#narrow/stream/113488-general/topic/widget.20for.20diagrams/near/207292322">said</a>:</p>
<blockquote>
<p>I deffo want to support KaTeX ootb at some point though.</p>
</blockquote>
<p>That would be cool, I see there's an <a href="https://github.com/KaTeX/KaTeX/pull/2396">open PR</a> to add commutative diagrams to KaTeX too <span aria-label="grinning" class="emoji emoji-1f600" role="img" title="grinning">:grinning:</span></p>



<a name="207298873"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/widget%20for%20diagrams/near/207298873" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/widget.20for.20diagrams.html#207298873">(Aug 18 2020 at 18:47)</a>:</h4>
<p>One thought is that maybe the VS Code extension could support plugging in other JS apps that talk to the Lean server in place of the info view. Or possibly the info view should support passing messages to some other webview panel with other JS / HTML code.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>