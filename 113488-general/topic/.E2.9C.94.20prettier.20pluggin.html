---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/.E2.9C.94.20prettier.20pluggin.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.E2.9C.94.20prettier.20pluggin.html">✔ prettier pluggin</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="259574899"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%E2%9C%94%20prettier%20pluggin/near/259574899" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.E2.9C.94.20prettier.20pluggin.html#259574899">(Oct 29 2021 at 19:52)</a>:</h4>
<p>Is there a <a href="https://marketplace.visualstudio.com/items?itemName=esbenp.prettier-vscode">prettier</a> pluggin for Lean yet?</p>



<a name="259575265"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%E2%9C%94%20prettier%20pluggin/near/259575265" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.E2.9C.94.20prettier.20pluggin.html#259575265">(Oct 29 2021 at 19:55)</a>:</h4>
<p>No. In general, things like this are going to much easier in Lean4, where the pretty-printer roundtrips reliably(?), unlike in Lean3, where pretty printing has many bad edge cases. As you've probably seen, we're already quite opinionated about formatting of Lean3 code, and all looking forward to the computer holding our hand to get this right when we switch to Lean4.</p>



<a name="259575697"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%E2%9C%94%20prettier%20pluggin/near/259575697" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Notification Bot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.E2.9C.94.20prettier.20pluggin.html#259575697">(Oct 29 2021 at 19:59)</a>:</h4>
<p><span class="user-mention silent" data-user-id="451983">Arthur Paulino</span> has marked this topic as resolved.</p>



<a name="264536293"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%E2%9C%94%20prettier%20pluggin/near/264536293" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.E2.9C.94.20prettier.20pluggin.html#264536293">(Dec 11 2021 at 02:43)</a>:</h4>
<p>Old thread, but how will Lean 4 help with formatting?</p>



<a name="264536792"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%E2%9C%94%20prettier%20pluggin/near/264536792" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Huỳnh Trần Khanh <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.E2.9C.94.20prettier.20pluggin.html#264536792">(Dec 11 2021 at 02:54)</a>:</h4>
<p><span class="user-mention silent" data-user-id="451983">Arthur Paulino</span> <a href="#narrow/stream/113488-general/topic/.E2.9C.94.20prettier.20pluggin/near/264536293">said</a>:</p>
<blockquote>
<p>Old thread, but how will Lean 4 help with formatting?</p>
</blockquote>
<p>this is just a guess: the pretty printer is horrible in Lean 3, it often prints things that are not syntactically correct or do not typecheck. however this situation is improved in Lean 4</p>



<a name="264536800"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%E2%9C%94%20prettier%20pluggin/near/264536800" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Huỳnh Trần Khanh <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.E2.9C.94.20prettier.20pluggin.html#264536800">(Dec 11 2021 at 02:55)</a>:</h4>
<p>(ofc if you are more familiar with Lean 4 feel free to correct me if I'm saying nonsense)</p>



<a name="264536889"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%E2%9C%94%20prettier%20pluggin/near/264536889" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.E2.9C.94.20prettier.20pluggin.html#264536889">(Dec 11 2021 at 02:56)</a>:</h4>
<p>But how would it work in practice? Calling something like <code>lake prettyprint</code>? Hitting some shortcut that triggers an action from the Lean 4 plugin and formats the file?</p>



<a name="264536992"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%E2%9C%94%20prettier%20pluggin/near/264536992" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Huỳnh Trần Khanh <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.E2.9C.94.20prettier.20pluggin.html#264536992">(Dec 11 2021 at 02:59)</a>:</h4>
<p>oh <span aria-label="joy" class="emoji emoji-1f602" role="img" title="joy">:joy:</span> I can't answer this question but ideally it should have some sort of format on save mechanism <span aria-label="joy" class="emoji emoji-1f602" role="img" title="joy">:joy:</span> I have that turned on when working with JavaScript files <span aria-label="grinning" class="emoji emoji-1f600" role="img" title="grinning">:grinning:</span></p>
<p>anyway I'm positively impressed by the maturity of JavaScript tooling, if Lean wants to succeed and be adopted by the mainstream we should pay a lot of attention to the tooling</p>



<a name="264537225"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%E2%9C%94%20prettier%20pluggin/near/264537225" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Huỳnh Trần Khanh <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.E2.9C.94.20prettier.20pluggin.html#264537225">(Dec 11 2021 at 03:03)</a>:</h4>
<p>my hunch, however is the "char based parser" in Lean 4 is going to interfere with pretty printing <span aria-label="rolling on the floor laughing" class="emoji emoji-1f923" role="img" title="rolling on the floor laughing">:rolling_on_the_floor_laughing:</span> from the looks of it parsers call each other randomly using something similar to cooperative multitasking... which sounds like a nightmare</p>



<a name="264537251"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%E2%9C%94%20prettier%20pluggin/near/264537251" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Huỳnh Trần Khanh <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.E2.9C.94.20prettier.20pluggin.html#264537251">(Dec 11 2021 at 03:04)</a>:</h4>
<p>ofc this is merely speculation</p>



<a name="264539616"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%E2%9C%94%20prettier%20pluggin/near/264539616" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wojciech Nawrocki <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.E2.9C.94.20prettier.20pluggin.html#264539616">(Dec 11 2021 at 04:03)</a>:</h4>
<p>Because the mathlib porting effort involves a step transforming an internal representation of Lean 3 mathlib theorems into Lean 4 source code, and this step needs to reliably produce readable, well-formed code using Lean 4's builtin pretty printing facilities, we can expect those facilities to be pretty good. As for the interface, it would be a minor amount of work to write a command-line wrapper which parses a Lean 4 file and outputs the pretty-printed/formatted version. The only caveat is, afaik this isn't very configurable, so it would be closer to e.g. <a href="https://github.com/psf/black">Black</a> than <a href="https://clang.llvm.org/docs/ClangFormatStyleOptions.html">clang-format</a>.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>