---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/fooling.20.60squeeze_simp.60.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/fooling.20.60squeeze_simp.60.html">fooling `squeeze_simp`</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="283083185"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/fooling%20%60squeeze_simp%60/near/283083185" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/fooling.20.60squeeze_simp.60.html#283083185">(May 20 2022 at 15:06)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">tactic</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">â„¤</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">a</span><span class="bp">+</span><span class="n">b</span><span class="o">)</span><span class="bp">^</span><span class="mi">3</span><span class="bp">=</span><span class="n">a</span><span class="bp">^</span><span class="mi">3</span><span class="bp">+</span><span class="mi">3</span><span class="bp">*</span><span class="n">a</span><span class="bp">^</span><span class="mi">2</span><span class="bp">*</span><span class="n">b</span><span class="bp">+</span><span class="mi">3</span><span class="bp">*</span><span class="n">a</span><span class="bp">*</span><span class="n">b</span><span class="bp">^</span><span class="mi">2</span><span class="bp">+</span><span class="n">b</span><span class="bp">^</span><span class="mi">3</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">squeeze_simp</span> <span class="o">[</span><span class="k">show</span> <span class="o">(</span><span class="n">a</span><span class="bp">+</span><span class="n">b</span><span class="o">)</span><span class="bp">^</span><span class="mi">3</span><span class="bp">=</span><span class="n">a</span><span class="bp">^</span><span class="mi">3</span><span class="bp">+</span><span class="mi">3</span><span class="bp">*</span><span class="n">a</span><span class="bp">^</span><span class="mi">2</span><span class="bp">*</span><span class="n">b</span><span class="bp">+</span><span class="mi">3</span><span class="bp">*</span><span class="n">a</span><span class="bp">*</span><span class="n">b</span><span class="bp">^</span><span class="mi">2</span><span class="bp">+</span><span class="n">b</span><span class="bp">^</span><span class="mi">3</span><span class="o">,</span> <span class="kd">by</span> <span class="n">ring</span><span class="o">]</span>
<span class="kd">end</span>
</code></pre></div>
<p>succeeds, and suggests</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">Try</span> <span class="n">this</span><span class="o">:</span> <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="k">show</span> <span class="o">((</span><span class="k">fun</span> <span class="o">(</span><span class="n">this</span> <span class="o">:</span> <span class="o">(</span><span class="n">frozen_name</span> <span class="n">eq</span><span class="o">)</span> <span class="o">((</span><span class="n">frozen_name</span> <span class="n">has_pow.pow</span><span class="o">)</span> <span class="o">((</span><span class="n">frozen_name</span> <span class="n">has_add.add</span><span class="o">)</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="mi">3</span><span class="o">)</span> <span class="o">((</span><span class="n">frozen_name</span> <span class="n">has_add.add</span><span class="o">)</span> <span class="o">((</span><span class="n">frozen_name</span> <span class="n">has_add.add</span><span class="o">)</span> <span class="o">((</span><span class="n">frozen_name</span> <span class="n">has_add.add</span><span class="o">)</span> <span class="o">((</span><span class="n">frozen_name</span> <span class="n">has_pow.pow</span><span class="o">)</span> <span class="n">a</span> <span class="mi">3</span><span class="o">)</span> <span class="o">((</span><span class="n">frozen_name</span> <span class="n">has_mul.mul</span><span class="o">)</span> <span class="o">((</span><span class="n">frozen_name</span> <span class="n">has_mul.mul</span><span class="o">)</span> <span class="mi">3</span> <span class="o">((</span><span class="n">frozen_name</span> <span class="n">has_pow.pow</span><span class="o">)</span> <span class="n">a</span> <span class="mi">2</span><span class="o">))</span> <span class="n">b</span><span class="o">))</span> <span class="o">((</span><span class="n">frozen_name</span> <span class="n">has_mul.mul</span><span class="o">)</span> <span class="o">((</span><span class="n">frozen_name</span> <span class="n">has_mul.mul</span><span class="o">)</span> <span class="mi">3</span> <span class="n">a</span><span class="o">)</span> <span class="o">((</span><span class="n">frozen_name</span> <span class="n">has_pow.pow</span><span class="o">)</span> <span class="n">b</span> <span class="mi">2</span><span class="o">)))</span> <span class="o">((</span><span class="n">frozen_name</span> <span class="n">has_pow.pow</span><span class="o">)</span> <span class="n">b</span> <span class="mi">3</span><span class="o">))),</span> <span class="n">this</span><span class="o">)</span> <span class="o">(</span><span class="kd">by</span> <span class="o">(</span><span class="n">typed_expr</span> <span class="o">(</span><span class="n">tactic</span> <span class="n">unit</span><span class="o">)</span> <span class="o">(</span><span class="n">interactive.executor.execute_explicit</span> <span class="n">tactic</span> <span class="o">(</span><span class="n">has_bind.seq</span> <span class="o">(</span><span class="n">tactic.save_info</span> <span class="o">(</span><span class="n">anonymous_constructor</span> <span class="o">(</span><span class="mi">4</span><span class="bp">.</span><span class="n">_.9</span> <span class="mi">5</span> <span class="mi">57</span><span class="o">)))</span> <span class="o">(</span><span class="n">tactic.istep</span> <span class="mi">5</span> <span class="mi">57</span> <span class="mi">5</span> <span class="mi">57</span> <span class="mi">80</span> <span class="o">(</span><span class="n">tactic.interactive.ring</span> <span class="o">(</span><span class="n">as_is</span> <span class="o">(</span><span class="n">option.none.</span><span class="o">{</span><span class="mi">0</span><span class="o">}</span> <span class="n">unit</span><span class="o">)))))))))]</span>
</code></pre></div>
<p>which unsurprisingly doesn't work. Probably a <code>wontfix</code> but thought it was good for a laugh on a Friday afternoon.</p>



<a name="283086536"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/fooling%20%60squeeze_simp%60/near/283086536" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/fooling.20.60squeeze_simp.60.html#283086536">(May 20 2022 at 15:32)</a>:</h4>
<p>cc <span class="user-mention" data-user-id="451983">@Arthur Paulino</span>  - can we make a whacky amalgamation of <code>pp</code> and <code>to_string</code> to fix this?</p>



<a name="283086576"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/fooling%20%60squeeze_simp%60/near/283086576" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/fooling.20.60squeeze_simp.60.html#283086576">(May 20 2022 at 15:32)</a>:</h4>
<p>do people know if this was an issue in the past? I'm wondering how to control this</p>



<a name="283086705"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/fooling%20%60squeeze_simp%60/near/283086705" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/fooling.20.60squeeze_simp.60.html#283086705">(May 20 2022 at 15:33)</a>:</h4>
<p>Given the priority I would mark it to be solved in Lean 4 since we have more metaprogramming power there</p>



<a name="283086858"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/fooling%20%60squeeze_simp%60/near/283086858" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/fooling.20.60squeeze_simp.60.html#283086858">(May 20 2022 at 15:34)</a>:</h4>
<p>(not that this would be too complicated, it's just that the solution here wouldn't necessarily be translated to Lean 4)</p>



<a name="283087001"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/fooling%20%60squeeze_simp%60/near/283087001" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/fooling.20.60squeeze_simp.60.html#283087001">(May 20 2022 at 15:35)</a>:</h4>
<p>there's a similar issue that <span class="user-mention" data-user-id="321696">@Julian Berman</span>  reported: </p>
<blockquote>
<p>changed line 526 of measure_theory/decomposition/jordan.lean to squeeze_simp</p>
</blockquote>
<p>I'll try some quick fixes and see what it can do</p>



<a name="283116776"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/fooling%20%60squeeze_simp%60/near/283116776" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/fooling.20.60squeeze_simp.60.html#283116776">(May 20 2022 at 19:37)</a>:</h4>
<p>I'm not really suggesting this needs fixing, I just thought it was funny :-)</p>



<a name="283116796"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/fooling%20%60squeeze_simp%60/near/283116796" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/fooling.20.60squeeze_simp.60.html#283116796">(May 20 2022 at 19:37)</a>:</h4>
<p>Yep, this is ~hopeless in lean 3, it needs actual AST data. We have that now, but not AST printing</p>



<a name="283116910"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/fooling%20%60squeeze_simp%60/near/283116910" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/fooling.20.60squeeze_simp.60.html#283116910">(May 20 2022 at 19:38)</a>:</h4>
<p>it is something that occasionally annoys me about squeeze_simp, it might be better if it just tells me what to add and delete from my list instead of trying and failing to print what I wrote</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>