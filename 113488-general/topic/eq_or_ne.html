---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/eq_or_ne.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/eq_or_ne.html">eq_or_ne</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="237023025"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq_or_ne/near/237023025" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Benjamin Davidson <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/eq_or_ne.html#237023025">(May 02 2021 at 03:44)</a>:</h4>
<p>Would these be a welcome addition? I find myself writing <code>by_cases ha : a ≠ 0</code> pretty often, and these would be convenient if one  wanted to use <code>rcases</code> or didn't want to have to <code>rw not_not at ha</code>. I think these would also be easier to find by "guessing the name and using the autocomplete tool."</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">logic.basic</span>

<span class="kd">variables</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">α</span><span class="o">)</span>

<span class="kd">lemma</span> <span class="n">eq_or_ne</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">b</span> <span class="bp">∨</span> <span class="n">a</span> <span class="bp">≠</span> <span class="n">b</span> <span class="o">:=</span> <span class="n">em</span> <span class="bp">$</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">b</span>

<span class="kd">lemma</span> <span class="n">ne_or_eq</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≠</span> <span class="n">b</span> <span class="bp">∨</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">b</span> <span class="o">:=</span> <span class="o">(</span><span class="n">eq_or_ne</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">symm</span>

<span class="kd">lemma</span> <span class="n">eq_zero_or_ne_zero</span> <span class="o">[</span><span class="n">has_zero</span> <span class="n">α</span><span class="o">]</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">=</span> <span class="mi">0</span> <span class="bp">∨</span> <span class="n">a</span> <span class="bp">≠</span> <span class="mi">0</span> <span class="o">:=</span> <span class="n">eq_or_ne</span> <span class="n">a</span> <span class="mi">0</span>

<span class="kd">lemma</span> <span class="n">ne_zero_or_eq_zero</span> <span class="o">[</span><span class="n">has_zero</span> <span class="n">α</span><span class="o">]</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≠</span> <span class="mi">0</span> <span class="bp">∨</span> <span class="n">a</span> <span class="bp">=</span> <span class="mi">0</span> <span class="o">:=</span> <span class="n">ne_or_eq</span> <span class="n">a</span> <span class="mi">0</span>
</code></pre></div>



<a name="237023238"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq_or_ne/near/237023238" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/eq_or_ne.html#237023238">(May 02 2021 at 03:48)</a>:</h4>
<p>Why not use <code>by_cases a = 0</code>?</p>



<a name="237023374"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq_or_ne/near/237023374" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Benjamin Davidson <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/eq_or_ne.html#237023374">(May 02 2021 at 03:51)</a>:</h4>
<p>I do, but sometimes I find that it's more convenient to deal with the <code>ne</code> case first (i.e. if it is the trivial one).</p>



<a name="237023472"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq_or_ne/near/237023472" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Benjamin Davidson <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/eq_or_ne.html#237023472">(May 02 2021 at 03:54)</a>:</h4>
<p>This is really nothing more than a question of "are they worth adding for the convenience," there's no brilliance to these lemmas at all.</p>



<a name="237023510"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq_or_ne/near/237023510" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/eq_or_ne.html#237023510">(May 02 2021 at 03:54)</a>:</h4>
<p>I still would use <code>by_cases a=0, swap</code></p>



<a name="237023560"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq_or_ne/near/237023560" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/eq_or_ne.html#237023560">(May 02 2021 at 03:55)</a>:</h4>
<p>IMO I don't mediately see a use case for these, but perhaps someone else knows of a situation where they would be worth it</p>



<a name="237029694"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq_or_ne/near/237029694" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/eq_or_ne.html#237029694">(May 02 2021 at 05:56)</a>:</h4>
<p>I don't think it is worth it, except possibly <code>(em p).swap</code> if we don't already have it. The others are just substitution instances of lemmas with longer names</p>



<a name="237033159"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq_or_ne/near/237033159" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/eq_or_ne.html#237033159">(May 02 2021 at 07:02)</a>:</h4>
<p>What about defining <code>by_cases_swap</code>?</p>



<a name="237034183"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq_or_ne/near/237034183" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/eq_or_ne.html#237034183">(May 02 2021 at 07:23)</a>:</h4>
<p>I don't see any advantage to defining two tactics in a row as a composite tactic. Just use two tactics</p>



<a name="237034241"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq_or_ne/near/237034241" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/eq_or_ne.html#237034241">(May 02 2021 at 07:24)</a>:</h4>
<p>More tactics means more to learn. It is better to keep tactics orthogonal so they can be used compositionally</p>



<a name="237036227"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq_or_ne/near/237036227" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/eq_or_ne.html#237036227">(May 02 2021 at 08:05)</a>:</h4>
<p><code>eq_or_ne</code> would be nice because it would produce hypotheses that use <code>a ≠ b</code> instead of <code>not (a = b)</code></p>



<a name="237036299"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq_or_ne/near/237036299" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/eq_or_ne.html#237036299">(May 02 2021 at 08:06)</a>:</h4>
<p>One is a notation for the other so it doesn't change anything, right?</p>



<a name="237036731"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq_or_ne/near/237036731" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rémy Degenne <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/eq_or_ne.html#237036731">(May 02 2021 at 08:15)</a>:</h4>
<p>you cannot do <code>h.symm</code> on <code>h : not (a = b)</code>, but you can on <code>h : a ≠ b</code>. I very often write <code>rw ← ne.def at h</code> after a <code>by_cases h : a = b</code>,  when <code>a = b</code> happens to be more convenient in the first case, but some lemma I want to use needs <code>b ≠ a</code> in the second case.</p>



<a name="237037216"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq_or_ne/near/237037216" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/eq_or_ne.html#237037216">(May 02 2021 at 08:25)</a>:</h4>
<p>Right. It's not just notation, <a href="https://leanprover-community.github.io/mathlib_docs/find/ne">docs#ne</a> is a type alias.</p>



<a name="237037303"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq_or_ne/near/237037303" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/eq_or_ne.html#237037303">(May 02 2021 at 08:26)</a>:</h4>
<p>Although it's been discussed before that we should just teach <code>by_cases</code> to perform that rewrite automatically</p>



<a name="237041161"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq_or_ne/near/237041161" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ruben Van de Velde <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/eq_or_ne.html#237041161">(May 02 2021 at 09:41)</a>:</h4>
<p>Also, you can do <code>obtain (rfl|h) := eq_or_ne a b,</code>, which <code>by_cases</code> can't (as far as I know)</p>



<a name="237043038"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq_or_ne/near/237043038" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Benjamin Davidson <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/eq_or_ne.html#237043038">(May 02 2021 at 10:17)</a>:</h4>
<p>Exactly, that's what I was referring to above when I mentioned <code>rcases</code>.</p>



<a name="237043108"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq_or_ne/near/237043108" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ruben Van de Velde <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/eq_or_ne.html#237043108">(May 02 2021 at 10:18)</a>:</h4>
<p>Oh look, I didn't read :)</p>



<a name="237043127"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq_or_ne/near/237043127" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Benjamin Davidson <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/eq_or_ne.html#237043127">(May 02 2021 at 10:19)</a>:</h4>
<p>I'm glad to see we had the same train of thought :)</p>



<a name="237043235"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq_or_ne/near/237043235" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Benjamin Davidson <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/eq_or_ne.html#237043235">(May 02 2021 at 10:21)</a>:</h4>
<p>And the other aspect of convenience I had in mind is what Eric mentioned about having <code>a ≠ b</code> instead of <code>¬ a = b</code>.</p>



<a name="237046950"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq_or_ne/near/237046950" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/eq_or_ne.html#237046950">(May 02 2021 at 11:36)</a>:</h4>
<blockquote>
<p>you cannot do h.symm on h : not (a = b), but you can on h : a ≠ b.</p>
</blockquote>
<p>You can do <code>ne.symm h</code> though, so this isn't a major inconvenience</p>



<a name="237050256"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq_or_ne/near/237050256" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rémy Degenne <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/eq_or_ne.html#237050256">(May 02 2021 at 12:38)</a>:</h4>
<p>I did not realize that. Thanks for the tip, that will same me the <code>rw</code> line.</p>



<a name="238008192"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq_or_ne/near/238008192" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Benjamin Davidson <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/eq_or_ne.html#238008192">(May 09 2021 at 04:43)</a>:</h4>
<p>What is the verdict on this? I am fine following Mario's opinion, but there seems to have been some feedback in favor of adding <code>eq_or_ne</code>.</p>



<a name="238008262"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq_or_ne/near/238008262" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/eq_or_ne.html#238008262">(May 09 2021 at 04:44)</a>:</h4>
<p>It's fine to add it, I don't think it's particularly necessary but mathlib is not minimalist</p>



<a name="238008266"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq_or_ne/near/238008266" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Benjamin Davidson <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/eq_or_ne.html#238008266">(May 09 2021 at 04:45)</a>:</h4>
<p>Personally, since my original post, I have already had two circumstances where it would have been very convenient to have such a lemma to use with <code>obtain</code>/<code>rcases</code>.</p>



<a name="242141439"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq_or_ne/near/242141439" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/eq_or_ne.html#242141439">(Jun 09 2021 at 22:58)</a>:</h4>
<p>sorry to necro this, but is there any reason we did this but _only_ for <code>Prop</code>?</p>



<a name="242145321"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq_or_ne/near/242145321" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/eq_or_ne.html#242145321">(Jun 09 2021 at 23:54)</a>:</h4>
<p><a href="https://leanprover-community.github.io/mathlib_docs/find/eq_or_ne">docs#eq_or_ne</a> - gosh, we really did do that.</p>



<a name="242145760"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq_or_ne/near/242145760" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/eq_or_ne.html#242145760">(Jun 10 2021 at 00:01)</a>:</h4>
<p>probably someone forgot to declare the variables and it picked up the variable declaration which is a Prop since it's logic.basic</p>



<a name="242146401"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq_or_ne/near/242146401" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/eq_or_ne.html#242146401">(Jun 10 2021 at 00:10)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib/issues/7865">#7865</a></p>



<a name="242159769"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq_or_ne/near/242159769" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Benjamin Davidson <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/eq_or_ne.html#242159769">(Jun 10 2021 at 05:00)</a>:</h4>
<p>I'm so sorry, that's exactly what happened - I didn't realize that <code>a</code> and <code>b</code> were declared as <code>Prop</code>. My bad, and thank you for catching and fixing this Eric.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>