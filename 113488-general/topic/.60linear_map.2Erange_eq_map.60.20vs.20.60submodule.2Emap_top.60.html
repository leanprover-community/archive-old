---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/.60linear_map.2Erange_eq_map.60.20vs.20.60submodule.2Emap_top.60.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.60linear_map.2Erange_eq_map.60.20vs.20.60submodule.2Emap_top.60.html">`linear_map.range_eq_map` vs `submodule.map_top`</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="235821791"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%60linear_map.range_eq_map%60%20vs%20%60submodule.map_top%60/near/235821791" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.60linear_map.2Erange_eq_map.60.20vs.20.60submodule.2Emap_top.60.html#235821791">(Apr 23 2021 at 11:02)</a>:</h4>
<p>It looks like we have a duplicated lemma, viz: <a href="https://leanprover-community.github.io/mathlib_docs/find/linear_map.range_eq_map">docs#linear_map.range_eq_map</a> vs <a href="https://leanprover-community.github.io/mathlib_docs/find/submodule.map_top">docs#submodule.map_top</a></p>



<a name="235821901"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%60linear_map.range_eq_map%60%20vs%20%60submodule.map_top%60/near/235821901" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.60linear_map.2Erange_eq_map.60.20vs.20.60submodule.2Emap_top.60.html#235821901">(Apr 23 2021 at 11:03)</a>:</h4>
<p>/poll Which one should we keep?</p>



<a name="235822265"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%60linear_map.range_eq_map%60%20vs%20%60submodule.map_top%60/near/235822265" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.60linear_map.2Erange_eq_map.60.20vs.20.60submodule.2Emap_top.60.html#235822265">(Apr 23 2021 at 11:06)</a>:</h4>
<p>See also <a href="https://github.com/leanprover-community/mathlib/pull/7227#pullrequestreview-639764803">my comment on #7227</a></p>



<a name="235822360"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%60linear_map.range_eq_map%60%20vs%20%60submodule.map_top%60/near/235822360" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.60linear_map.2Erange_eq_map.60.20vs.20.60submodule.2Emap_top.60.html#235822360">(Apr 23 2021 at 11:07)</a>:</h4>
<p>Random data point: I opened a PR earlier today with code that has been broken by <a href="https://github.com/leanprover-community/mathlib/issues/7227">#7227</a> and when I looked for the lemma I found range_eq_map first</p>



<a name="235822542"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%60linear_map.range_eq_map%60%20vs%20%60submodule.map_top%60/near/235822542" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.60linear_map.2Erange_eq_map.60.20vs.20.60submodule.2Emap_top.60.html#235822542">(Apr 23 2021 at 11:08)</a>:</h4>
<p>My vote goes for: <del>either</del> keep both <code>range</code> and <code>map_top</code><del>, or get rid of both <code>range</code> and <code>map_top</code></del>. If we want to rewrite away <code>range</code> in most proofs, why use it in the statement?</p>



<a name="235823084"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%60linear_map.range_eq_map%60%20vs%20%60submodule.map_top%60/near/235823084" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.60linear_map.2Erange_eq_map.60.20vs.20.60submodule.2Emap_top.60.html#235823084">(Apr 23 2021 at 11:14)</a>:</h4>
<p>Anne, are you voting for eliminating <a href="https://leanprover-community.github.io/mathlib_docs/find/linear_map.range">docs#linear_map.range</a> entirely?</p>



<a name="235823439"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%60linear_map.range_eq_map%60%20vs%20%60submodule.map_top%60/near/235823439" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.60linear_map.2Erange_eq_map.60.20vs.20.60submodule.2Emap_top.60.html#235823439">(Apr 23 2021 at 11:17)</a>:</h4>
<p>I'm considering it, if using <code>range</code> means almost all proofs start with <code>rw range_eq_map</code>.</p>



<a name="235823481"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%60linear_map.range_eq_map%60%20vs%20%60submodule.map_top%60/near/235823481" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.60linear_map.2Erange_eq_map.60.20vs.20.60submodule.2Emap_top.60.html#235823481">(Apr 23 2021 at 11:17)</a>:</h4>
<p>There are lots of proofs using <code>range</code> that start with <code>exists.elim</code> hidden behind <code>let</code>, <code>obtain</code>, <code>λ ⟨x, hx⟩,</code> ...</p>



<a name="235823671"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%60linear_map.range_eq_map%60%20vs%20%60submodule.map_top%60/near/235823671" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.60linear_map.2Erange_eq_map.60.20vs.20.60submodule.2Emap_top.60.html#235823671">(Apr 23 2021 at 11:19)</a>:</h4>
<p>The point of <a href="https://github.com/leanprover-community/mathlib/issues/7227">#7227</a> was to be able to more freely switch between <code>set.range</code> and <code>linear_map.range</code> in contexts where they were coerced to a type; I'd argue any arguments for removing the latter would also apply to the former.</p>



<a name="235824333"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%60linear_map.range_eq_map%60%20vs%20%60submodule.map_top%60/near/235824333" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.60linear_map.2Erange_eq_map.60.20vs.20.60submodule.2Emap_top.60.html#235824333">(Apr 23 2021 at 11:24)</a>:</h4>
<p>Okay, since it is a feature that <code>y ∈ range f</code> is defeq to <code>∃ x, f x = y</code> (for <code>set</code> and for <code>linear_map</code>), then we should have both <code>range</code> and <code>map</code>. Therefore, <code>map_top</code> is a good <code>simp</code> lemma since it turns <code>∃ x, x ∈ \top ∧ f x = y</code> into <code>∃ x, f x = y</code> and we should prefer it over <code>range_eq_map</code>.</p>



<a name="235824407"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%60linear_map.range_eq_map%60%20vs%20%60submodule.map_top%60/near/235824407" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.60linear_map.2Erange_eq_map.60.20vs.20.60submodule.2Emap_top.60.html#235824407">(Apr 23 2021 at 11:25)</a>:</h4>
<p>Is it worth having both for ease of discovery?</p>



<a name="235824439"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%60linear_map.range_eq_map%60%20vs%20%60submodule.map_top%60/near/235824439" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.60linear_map.2Erange_eq_map.60.20vs.20.60submodule.2Emap_top.60.html#235824439">(Apr 23 2021 at 11:25)</a>:</h4>
<p>I assume we have <a href="https://leanprover-community.github.io/mathlib_docs/find/set.image_univ">docs#set.image_univ</a> but not <a href="https://leanprover-community.github.io/mathlib_docs/find/set.range_eq_image">docs#set.range_eq_image</a></p>



<a name="235824582"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%60linear_map.range_eq_map%60%20vs%20%60submodule.map_top%60/near/235824582" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.60linear_map.2Erange_eq_map.60.20vs.20.60submodule.2Emap_top.60.html#235824582">(Apr 23 2021 at 11:27)</a>:</h4>
<p>Which I suppose would be an argument for either removing <code>linear_map.range_eq_map</code> or adding the <code>set</code> lemma</p>



<a name="235824629"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%60linear_map.range_eq_map%60%20vs%20%60submodule.map_top%60/near/235824629" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.60linear_map.2Erange_eq_map.60.20vs.20.60submodule.2Emap_top.60.html#235824629">(Apr 23 2021 at 11:27)</a>:</h4>
<blockquote>
<p>Therefore, <code>map_top</code> is a good simp lemma</p>
</blockquote>
<p>In that case, we should probably add <a href="https://leanprover-community.github.io/mathlib_docs/find/submonoid.map_top">docs#submonoid.map_top</a> and <a href="https://leanprover-community.github.io/mathlib_docs/find/subgroup.map_top">docs#subgroup.map_top</a> and <a href="https://leanprover-community.github.io/mathlib_docs/find/subfield.map_top">docs#subfield.map_top</a> and <a href="https://leanprover-community.github.io/mathlib_docs/find/lie_submodule.map_top">docs#lie_submodule.map_top</a> and <a href="https://leanprover-community.github.io/mathlib_docs/find/lie_ideal.map_top">docs#lie_ideal.map_top</a>, and rename <a href="https://leanprover-community.github.io/mathlib_docs/find/algebra.map_top">docs#algebra.map_top</a> to <code>subalgebra.map_top</code>.</p>



<a name="235837410"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%60linear_map.range_eq_map%60%20vs%20%60submodule.map_top%60/near/235837410" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.60linear_map.2Erange_eq_map.60.20vs.20.60submodule.2Emap_top.60.html#235837410">(Apr 23 2021 at 13:11)</a>:</h4>
<p>I like them both</p>



<a name="235837439"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%60linear_map.range_eq_map%60%20vs%20%60submodule.map_top%60/near/235837439" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.60linear_map.2Erange_eq_map.60.20vs.20.60submodule.2Emap_top.60.html#235837439">(Apr 23 2021 at 13:11)</a>:</h4>
<p>and <code>map_top</code> is a good simp lemma</p>



<a name="235837550"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%60linear_map.range_eq_map%60%20vs%20%60submodule.map_top%60/near/235837550" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.60linear_map.2Erange_eq_map.60.20vs.20.60submodule.2Emap_top.60.html#235837550">(Apr 23 2021 at 13:12)</a>:</h4>
<p>So add the missing lemmas but don't remove any, would be your vote?</p>



<a name="235843440"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%60linear_map.range_eq_map%60%20vs%20%60submodule.map_top%60/near/235843440" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.60linear_map.2Erange_eq_map.60.20vs.20.60submodule.2Emap_top.60.html#235843440">(Apr 23 2021 at 13:51)</a>:</h4>
<p><span class="user-mention" data-user-id="310045">@Eric Wieser</span> I actually need to define <code>lie_module_hom.range</code> and <code>lie_submodule.map_top</code> for something right now. Should I just follow the pattern you put in place for <code>linear_map.range</code> and so also introduce <code>lie_submodule.copy</code>?</p>



<a name="235843817"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%60linear_map.range_eq_map%60%20vs%20%60submodule.map_top%60/near/235843817" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.60linear_map.2Erange_eq_map.60.20vs.20.60submodule.2Emap_top.60.html#235843817">(Apr 23 2021 at 13:53)</a>:</h4>
<p>Yes, I think introducing <code>.copy</code> is a good idea</p>



<a name="235843871"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%60linear_map.range_eq_map%60%20vs%20%60submodule.map_top%60/near/235843871" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.60linear_map.2Erange_eq_map.60.20vs.20.60submodule.2Emap_top.60.html#235843871">(Apr 23 2021 at 13:54)</a>:</h4>
<p>Thanks, will do.</p>



<a name="235845192"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%60linear_map.range_eq_map%60%20vs%20%60submodule.map_top%60/near/235845192" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.60linear_map.2Erange_eq_map.60.20vs.20.60submodule.2Emap_top.60.html#235845192">(Apr 23 2021 at 14:02)</a>:</h4>
<p>Is this pattern explained in some library note?</p>



<a name="235845292"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%60linear_map.range_eq_map%60%20vs%20%60submodule.map_top%60/near/235845292" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.60linear_map.2Erange_eq_map.60.20vs.20.60submodule.2Emap_top.60.html#235845292">(Apr 23 2021 at 14:03)</a>:</h4>
<p>I don't believe it is but I think it should be!</p>



<a name="235845388"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%60linear_map.range_eq_map%60%20vs%20%60submodule.map_top%60/near/235845388" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.60linear_map.2Erange_eq_map.60.20vs.20.60submodule.2Emap_top.60.html#235845388">(Apr 23 2021 at 14:03)</a>:</h4>
<p>I can include a library note as part of my PR if desired?</p>



<a name="235845427"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%60linear_map.range_eq_map%60%20vs%20%60submodule.map_top%60/near/235845427" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.60linear_map.2Erange_eq_map.60.20vs.20.60submodule.2Emap_top.60.html#235845427">(Apr 23 2021 at 14:03)</a>:</h4>
<p>It's in the docstring for <a href="https://leanprover-community.github.io/mathlib_docs/find/linear_map.range_coe">docs#linear_map.range_coe</a>, <a href="https://leanprover-community.github.io/mathlib_docs/find/monoid_hom.coe_mrange">docs#monoid_hom.coe_mrange</a>, etc</p>



<a name="235845485"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%60linear_map.range_eq_map%60%20vs%20%60submodule.map_top%60/near/235845485" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.60linear_map.2Erange_eq_map.60.20vs.20.60submodule.2Emap_top.60.html#235845485">(Apr 23 2021 at 14:04)</a>:</h4>
<p>Perhaps it should me migrated to a library note</p>



<a name="235845653"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%60linear_map.range_eq_map%60%20vs%20%60submodule.map_top%60/near/235845653" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.60linear_map.2Erange_eq_map.60.20vs.20.60submodule.2Emap_top.60.html#235845653">(Apr 23 2021 at 14:05)</a>:</h4>
<p>Oh good, those lemmas have different names...</p>



<a name="235845853"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%60linear_map.range_eq_map%60%20vs%20%60submodule.map_top%60/near/235845853" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.60linear_map.2Erange_eq_map.60.20vs.20.60submodule.2Emap_top.60.html#235845853">(Apr 23 2021 at 14:06)</a>:</h4>
<p>From that page</p>
<blockquote>
<p>Note that <code>monoid_hom.mrange</code> is deliberately defined in a way that makes this true by <code>rfl</code>, as this means the types <code>↥(set.range f)</code> and <code>↥f.mrange</code> are interchangeable without proof obligations.</p>
</blockquote>



<a name="235845997"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%60linear_map.range_eq_map%60%20vs%20%60submodule.map_top%60/near/235845997" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.60linear_map.2Erange_eq_map.60.20vs.20.60submodule.2Emap_top.60.html#235845997">(Apr 23 2021 at 14:07)</a>:</h4>
<p>I think a good library note would also explain <em>how</em> this goal is achieved.</p>



<a name="235973886"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%60linear_map.range_eq_map%60%20vs%20%60submodule.map_top%60/near/235973886" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.60linear_map.2Erange_eq_map.60.20vs.20.60submodule.2Emap_top.60.html#235973886">(Apr 24 2021 at 14:23)</a>:</h4>
<p>I have attempted to include such a library note in <a href="https://github.com/leanprover-community/mathlib/issues/7313">#7313</a> <a href="https://github.com/leanprover-community/mathlib/pull/7313/files#diff-c965538e812a886218af4cbf509527efe95eed112b198a92c854f61bbf3ba22cR515">here</a>.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>