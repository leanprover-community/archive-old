---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/rsuffices.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/rsuffices.html">rsuffices</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="294353670"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rsuffices/near/294353670" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/rsuffices.html#294353670">(Aug 19 2022 at 19:59)</a>:</h4>
<p>I feel like <code>rsuffices</code> is misnamed. It's not a recursive <code>suffices</code>. What would alternative names be, before <a href="https://github.com/leanprover-community/mathlib/pull/16159">#16159</a> lands and makes renaming painful?</p>



<a name="294354227"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rsuffices/near/294354227" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason KY. <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/rsuffices.html#294354227">(Aug 19 2022 at 20:02)</a>:</h4>
<p>I like the name <code>rsuffices</code> since its intuitive if you know what the other <code>r</code>-version of tactics do</p>



<a name="294370461"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rsuffices/near/294370461" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/rsuffices.html#294370461">(Aug 19 2022 at 22:14)</a>:</h4>
<p>The game here is "<code>obtain</code> is to <code>have</code> as ____ is to <code>suffices</code>", right?</p>



<a name="294370865"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rsuffices/near/294370865" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/rsuffices.html#294370865">(Aug 19 2022 at 22:19)</a>:</h4>
<p>Which makes <code>rsuffices</code> look like a bad name because we're not using similar syntax to <code>rcases</code></p>



<a name="294370954"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rsuffices/near/294370954" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/rsuffices.html#294370954">(Aug 19 2022 at 22:20)</a>:</h4>
<p>for the record, <a href="https://github.com/leanprover-community/mathlib/pull/15735">#15735</a> was quite a fan of the name. I originally named it as <code>suffices'</code>.</p>



<a name="294371088"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rsuffices/near/294371088" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/rsuffices.html#294371088">(Aug 19 2022 at 22:22)</a>:</h4>
<p>one thing to note about <code>rsuffices</code> and that may be worth fixing is that:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">rsuffices</span> <span class="o">(</span><span class="n">ha</span><span class="bp">|</span><span class="n">hb</span><span class="o">)</span> <span class="o">:</span> <span class="n">p</span> <span class="bp">∨</span> <span class="n">q</span><span class="o">,</span>
<span class="o">{</span> <span class="o">{</span> <span class="n">stuff_for_p</span> <span class="o">},</span>
  <span class="o">{</span> <span class="n">stuff_for_q</span> <span class="o">}</span> <span class="o">},</span>
<span class="o">{</span> <span class="n">rest</span> <span class="o">}</span>
</code></pre></div>
<p>is invalid syntax, and instead you have to skip the outer grouping bracket. I don't know how much of an issue this is.</p>



<a name="294371115"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rsuffices/near/294371115" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/rsuffices.html#294371115">(Aug 19 2022 at 22:22)</a>:</h4>
<p>I actually expect that behavior. It's quite nice.</p>



<a name="294371197"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rsuffices/near/294371197" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/rsuffices.html#294371197">(Aug 19 2022 at 22:23)</a>:</h4>
<p>Maybe it's actually <code>obtain</code> that is badly named and it should be called <code>rhave</code>.</p>



<a name="294371275"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rsuffices/near/294371275" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/rsuffices.html#294371275">(Aug 19 2022 at 22:24)</a>:</h4>
<p>in some ways I feel like <code>obtain</code> should be called <code>have</code></p>



<a name="294371284"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rsuffices/near/294371284" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/rsuffices.html#294371284">(Aug 19 2022 at 22:24)</a>:</h4>
<p><a href="#narrow/stream/113488-general/topic/rsuffices.3F/near/281623150">https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rsuffices.3F/near/281623150</a> <span aria-label="upside down" class="emoji emoji-1f643" role="img" title="upside down">:upside_down:</span></p>



<a name="294371397"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rsuffices/near/294371397" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/rsuffices.html#294371397">(Aug 19 2022 at 22:25)</a>:</h4>
<p>I mean, yeah. In an ideal world we wouldn't have <code>have</code>/<code>haveI</code>/<code>obtain</code> (and no <code>obtainI</code>?!), <code>cases</code>/<code>casesI</code>/<code>rcases</code>, <code>intro</code>/<code>intros</code>/<code>rintro</code>/<code>rintros</code>/<code>introsI</code>, but just one of each family.</p>



<a name="294371484"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rsuffices/near/294371484" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/rsuffices.html#294371484">(Aug 19 2022 at 22:26)</a>:</h4>
<p>you forgot <code>introsI</code> L) I was going to add <code>obtainI/rcasesI</code> as it's useful for <a href="https://leanprover-community.github.io/mathlib_docs/find/eq_zero_or_ne_zero">docs#eq_zero_or_ne_zero</a>, but I agree it's a bit of a farce we need all this</p>



<a name="294371531"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rsuffices/near/294371531" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/rsuffices.html#294371531">(Aug 19 2022 at 22:27)</a>:</h4>
<p>The I versions are a necessary evil to avoid performance issues I believe</p>



<a name="294371555"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rsuffices/near/294371555" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/rsuffices.html#294371555">(Aug 19 2022 at 22:27)</a>:</h4>
<p>That's still 2x blowup on the number of tactics <span aria-label="frown" class="emoji emoji-1f641" role="img" title="frown">:frown:</span></p>



<a name="294371603"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rsuffices/near/294371603" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/rsuffices.html#294371603">(Aug 19 2022 at 22:28)</a>:</h4>
<p>it'll be gone in lean4!</p>



<a name="294371614"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rsuffices/near/294371614" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/rsuffices.html#294371614">(Aug 19 2022 at 22:28)</a>:</h4>
<p>Although I guess they could just unfreeze the cache if trying to intro without unfreezing fails</p>



<a name="294372384"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rsuffices/near/294372384" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/rsuffices.html#294372384">(Aug 19 2022 at 22:36)</a>:</h4>
<p>They could use a flag, like <code>!</code>, for resetting the instance cache. (So <code>have!</code> or <code>intros!</code>)</p>



<a name="294372449"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rsuffices/near/294372449" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/rsuffices.html#294372449">(Aug 19 2022 at 22:37)</a>:</h4>
<p>there is some kind of precedent for this: i believe LTE uses a zero-width space for <code>by exactI</code></p>



<a name="294372521"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rsuffices/near/294372521" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/rsuffices.html#294372521">(Aug 19 2022 at 22:38)</a>:</h4>
<p>yep: <a href="https://github.com/leanprover-community/lean-liquid/blob/master/src/hacks_and_tricks/by_exactI_hack.lean">https://github.com/leanprover-community/lean-liquid/blob/master/src/hacks_and_tricks/by_exactI_hack.lean</a></p>



<a name="294372549"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rsuffices/near/294372549" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/rsuffices.html#294372549">(Aug 19 2022 at 22:39)</a>:</h4>
<p>Sometimes I've wondered what it would be like if we had a more systematic approach to flags, perhaps <code>intros/I</code> for the <code>/I</code> flag, rather than needing to come up with some symbol for each one. The thought experiment is "if the syntax were solved, would we use more flags?"</p>



<a name="294372600"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rsuffices/near/294372600" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/rsuffices.html#294372600">(Aug 19 2022 at 22:39)</a>:</h4>
<p>You'd write <code>tactic/a/b/c</code> to apply multiple flags. One precedent is MS-DOS switches, and another is an odd language called Rebol that has "refinements" for a similar purpose to give function variants.</p>



<a name="294399959"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rsuffices/near/294399959" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/rsuffices.html#294399959">(Aug 20 2022 at 06:45)</a>:</h4>
<p><code>intros x y z { unfreeze := tt }</code> feels like our standard syntax for flags</p>



<a name="294400013"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rsuffices/near/294400013" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/rsuffices.html#294400013">(Aug 20 2022 at 06:46)</a>:</h4>
<p>Of course, that's longer than <code>unfreezingI { intros x y z }</code></p>



<a name="294402897"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rsuffices/near/294402897" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/rsuffices.html#294402897">(Aug 20 2022 at 07:23)</a>:</h4>
<p>You can almost always replace <code>tacticI</code> with <code>resetI, tactic</code> or <code>tactic, resetI</code> or <code>unfreezingI { tactic }</code> which is why I didn't make copies of all tactics to begin with, only the common ones</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>