---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/.60module.20.E2.84.A4.20.E2.84.A4.60.20is.20noncomputable!.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.60module.20.E2.84.A4.20.E2.84.A4.60.20is.20noncomputable!.html">`module ℤ ℤ` is noncomputable!</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="258163252"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%60module%20%E2%84%A4%20%E2%84%A4%60%20is%20noncomputable%21/near/258163252" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.60module.20.E2.84.A4.20.E2.84.A4.60.20is.20noncomputable!.html#258163252">(Oct 19 2021 at 09:06)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">analysis.normed_space.basic</span>

<span class="kd">instance</span> <span class="n">integers_are_hard</span> <span class="o">:</span> <span class="n">module</span> <span class="n">ℤ</span> <span class="n">ℤ</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">apply_instance</span>
<span class="c1">-- definition 'integers_are_hard' is noncomputable, it depends on 'int.normed_comm_ring'</span>
</code></pre></div>



<a name="258163544"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%60module%20%E2%84%A4%20%E2%84%A4%60%20is%20noncomputable%21/near/258163544" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.60module.20.E2.84.A4.20.E2.84.A4.60.20is.20noncomputable!.html#258163544">(Oct 19 2021 at 09:09)</a>:</h4>
<p>Should <code>int.comm_ring</code> get a higher priority then <code>int.normed_comm_ring</code>?</p>



<a name="258163666"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%60module%20%E2%84%A4%20%E2%84%A4%60%20is%20noncomputable%21/near/258163666" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.60module.20.E2.84.A4.20.E2.84.A4.60.20is.20noncomputable!.html#258163666">(Oct 19 2021 at 09:10)</a>:</h4>
<p>This has the same problem:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">analysis.normed_space.basic</span>
<span class="kd">instance</span> <span class="n">still_hard</span> <span class="o">:</span> <span class="n">add_comm_group</span> <span class="n">ℤ</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">apply_instance</span>
</code></pre></div>



<a name="258163724"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%60module%20%E2%84%A4%20%E2%84%A4%60%20is%20noncomputable%21/near/258163724" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.60module.20.E2.84.A4.20.E2.84.A4.60.20is.20noncomputable!.html#258163724">(Oct 19 2021 at 09:11)</a>:</h4>
<p>I guess we just need to add <a href="https://leanprover-community.github.io/mathlib_docs/find/int.add_comm_group">docs#int.add_comm_group</a> rather than having it be found transitively</p>



<a name="258163746"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%60module%20%E2%84%A4%20%E2%84%A4%60%20is%20noncomputable%21/near/258163746" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.60module.20.E2.84.A4.20.E2.84.A4.60.20is.20noncomputable!.html#258163746">(Oct 19 2021 at 09:11)</a>:</h4>
<p>Or lean needs to lean to not look for noncomputable instances before trying the computable ones</p>



<a name="258164073"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%60module%20%E2%84%A4%20%E2%84%A4%60%20is%20noncomputable%21/near/258164073" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.60module.20.E2.84.A4.20.E2.84.A4.60.20is.20noncomputable!.html#258164073">(Oct 19 2021 at 09:14)</a>:</h4>
<p>I guess that's a clean option, although I don't know if that will blow up running times.</p>



<a name="258164589"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%60module%20%E2%84%A4%20%E2%84%A4%60%20is%20noncomputable%21/near/258164589" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.60module.20.E2.84.A4.20.E2.84.A4.60.20is.20noncomputable!.html#258164589">(Oct 19 2021 at 09:19)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib/issues/9803">#9803</a></p>



<a name="258168593"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%60module%20%E2%84%A4%20%E2%84%A4%60%20is%20noncomputable%21/near/258168593" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.60module.20.E2.84.A4.20.E2.84.A4.60.20is.20noncomputable!.html#258168593">(Oct 19 2021 at 09:55)</a>:</h4>
<p>Is the <code>coe</code> from <code>int</code> to <code>real</code> computable? Maybe a better definition for <code>norm n</code> would be to take the absolute value in <code>int</code> and then coerce?</p>



<a name="258168684"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%60module%20%E2%84%A4%20%E2%84%A4%60%20is%20noncomputable%21/near/258168684" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.60module.20.E2.84.A4.20.E2.84.A4.60.20is.20noncomputable!.html#258168684">(Oct 19 2021 at 09:56)</a>:</h4>
<p>I guess that doesn't really help with anything and might be more awkward for proofs</p>



<a name="258169019"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%60module%20%E2%84%A4%20%E2%84%A4%60%20is%20noncomputable%21/near/258169019" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.60module.20.E2.84.A4.20.E2.84.A4.60.20is.20noncomputable!.html#258169019">(Oct 19 2021 at 09:59)</a>:</h4>
<p>I think that would be a good idea, and shouldn't impact proofs much; just that <code>dsimp</code> might no longer apply <code>int.norm_cast_real</code></p>



<a name="258181815"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%60module%20%E2%84%A4%20%E2%84%A4%60%20is%20noncomputable%21/near/258181815" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.60module.20.E2.84.A4.20.E2.84.A4.60.20is.20noncomputable!.html#258181815">(Oct 19 2021 at 11:57)</a>:</h4>
<p><span class="user-mention" data-user-id="110032">@Reid Barton</span>, I had a go at doing that, but found I needed <a href="https://github.com/leanprover-community/mathlib/issues/9806">#9806</a> first</p>



<a name="258181828"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%60module%20%E2%84%A4%20%E2%84%A4%60%20is%20noncomputable%21/near/258181828" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.60module.20.E2.84.A4.20.E2.84.A4.60.20is.20noncomputable!.html#258181828">(Oct 19 2021 at 11:58)</a>:</h4>
<p>Even <code>0 : ennreal</code> is noncomputable</p>



<a name="258182977"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%60module%20%E2%84%A4%20%E2%84%A4%60%20is%20noncomputable%21/near/258182977" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.60module.20.E2.84.A4.20.E2.84.A4.60.20is.20noncomputable!.html#258182977">(Oct 19 2021 at 12:07)</a>:</h4>
<p>Yeah I feel like this approach is maybe too fiddly, which is why I suggested using <code>erased</code> on the other topic.</p>



<a name="258902027"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%60module%20%E2%84%A4%20%E2%84%A4%60%20is%20noncomputable%21/near/258902027" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.60module.20.E2.84.A4.20.E2.84.A4.60.20is.20noncomputable!.html#258902027">(Oct 24 2021 at 22:33)</a>:</h4>
<p>The rest of my progress was <a href="https://github.com/leanprover-community/mathlib/issues/9946">#9946</a>. I suspect changing the definition of <code>norm</code> on <code>int</code> to be computable isn't worth losing the definitional equality with the coercion inside the norm, so I didn't quite go that far.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>