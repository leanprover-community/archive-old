---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/VSCode.20highlighting.20stopped.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/VSCode.20highlighting.20stopped.html">VSCode highlighting stopped</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="240686949"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/VSCode%20highlighting%20stopped/near/240686949" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Horatiu Cheval <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/VSCode.20highlighting.20stopped.html#240686949">(May 29 2021 at 06:31)</a>:</h4>
<p>Suddenly, VSCode highlights selectively only some of the keywords. Restarting doesn't work, and it happens only in this project.<br>
<a href="/user_uploads/3121/VGBf6U-3d3iniHC0bUW8Qgm_/highlight-broken.png">highlight-broken.png</a> <br>
Has anyone seen this or knows how could I fix it?</p>
<div class="message_inline_image"><a href="/user_uploads/3121/VGBf6U-3d3iniHC0bUW8Qgm_/highlight-broken.png" title="highlight-broken.png"><img src="/user_uploads/3121/VGBf6U-3d3iniHC0bUW8Qgm_/highlight-broken.png"></a></div>



<a name="240687096"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/VSCode%20highlighting%20stopped/near/240687096" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/VSCode.20highlighting.20stopped.html#240687096">(May 29 2021 at 06:34)</a>:</h4>
<p>This could easily be my fault</p>



<a name="240687101"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/VSCode%20highlighting%20stopped/near/240687101" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/VSCode.20highlighting.20stopped.html#240687101">(May 29 2021 at 06:34)</a>:</h4>
<p>Can you create a mwe?</p>



<a name="240687179"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/VSCode%20highlighting%20stopped/near/240687179" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Horatiu Cheval <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/VSCode.20highlighting.20stopped.html#240687179">(May 29 2021 at 06:36)</a>:</h4>
<p>I'll try to</p>



<a name="240688378"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/VSCode%20highlighting%20stopped/near/240688378" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Horatiu Cheval <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/VSCode.20highlighting.20stopped.html#240688378">(May 29 2021 at 07:05)</a>:</h4>
<p>Ok, so I managed to reduce to this file:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">inductive</span> <span class="n">type</span>
<span class="bp">|</span> <span class="n">zero</span> <span class="o">:</span> <span class="n">type</span>
<span class="bp">|</span> <span class="n">arrow</span> <span class="o">:</span> <span class="n">type</span> <span class="bp">→</span> <span class="n">type</span> <span class="bp">→</span> <span class="n">type</span>

<span class="kn">namespace</span> <span class="n">type</span>

  <span class="kd">infixl</span> <span class="bp">`↣`</span> <span class="o">:</span> <span class="mi">50</span> <span class="o">:=</span> <span class="n">arrow</span>

  <span class="kd">@[simp]</span>
  <span class="kd">def</span> <span class="n">interpret</span> <span class="o">:</span> <span class="n">type</span> <span class="bp">→</span> <span class="kt">Type</span>
  <span class="bp">|</span> <span class="n">zero</span> <span class="o">:=</span> <span class="n">ℕ</span>
  <span class="bp">|</span> <span class="o">(</span><span class="n">σ</span> <span class="bp">↣</span> <span class="n">τ</span><span class="o">)</span> <span class="o">:=</span> <span class="n">σ.interpret</span> <span class="bp">→</span> <span class="n">τ.interpret</span>

  <span class="kd">notation</span> <span class="bp">`∥`</span> <span class="n">σ</span> <span class="bp">`∥`</span> <span class="o">:=</span> <span class="n">σ.interpret</span>

<span class="kd">end</span> <span class="n">type</span>

<span class="kd">inductive</span> <span class="n">formula</span>
<span class="bp">|</span> <span class="n">prime</span> <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="kt">Prop</span><span class="o">)</span> <span class="o">[</span><span class="n">decidable</span> <span class="n">p</span><span class="o">]</span> <span class="o">:</span> <span class="n">formula</span>
<span class="bp">|</span> <span class="n">universal</span> <span class="o">{</span><span class="n">σ</span> <span class="o">:</span> <span class="n">type</span><span class="o">}</span> <span class="o">:</span> <span class="o">(</span><span class="bp">∥</span><span class="n">σ</span><span class="bp">∥</span> <span class="bp">→</span> <span class="n">formula</span><span class="o">)</span> <span class="bp">→</span> <span class="n">formula</span>

<span class="kn">namespace</span> <span class="n">formula</span>

  <span class="kd">notation</span> <span class="bp">`∀∀`</span> <span class="n">binders</span> <span class="bp">`;`</span> <span class="n">r</span><span class="o">:(</span><span class="n">scoped</span> <span class="n">A</span><span class="o">,</span> <span class="n">universal</span> <span class="n">A</span><span class="o">)</span> <span class="o">:=</span> <span class="n">r</span>

  <span class="c1">-- removing `eqext` fixes the highlighting following it</span>
  <span class="kd">def</span> <span class="n">eqext</span> <span class="o">:</span> <span class="bp">Π</span> <span class="o">{</span><span class="n">σ</span> <span class="o">:</span> <span class="n">type</span><span class="o">},</span> <span class="bp">∥</span><span class="n">σ</span><span class="bp">∥</span> <span class="bp">→</span> <span class="bp">∥</span><span class="n">σ</span><span class="bp">∥</span> <span class="bp">→</span> <span class="n">formula</span>
  <span class="bp">|</span> <span class="n">type.zero</span> <span class="n">x</span> <span class="n">y</span> <span class="o">:=</span> <span class="n">prime</span> <span class="bp">$</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">y</span>
  <span class="bp">|</span> <span class="o">(</span><span class="n">σ</span> <span class="bp">↣</span> <span class="n">τ</span><span class="o">)</span> <span class="n">x</span> <span class="n">y</span> <span class="o">:=</span> <span class="bp">∀∀</span> <span class="o">(</span><span class="n">z</span> <span class="o">:</span> <span class="bp">∥</span><span class="n">σ</span><span class="bp">∥</span><span class="o">)</span> <span class="bp">;</span> <span class="o">(</span><span class="n">eqext</span> <span class="o">(</span><span class="n">x</span> <span class="n">z</span><span class="o">)</span> <span class="o">(</span><span class="n">y</span> <span class="n">z</span><span class="o">))</span>

  <span class="kd">def</span> <span class="n">def_no_highlight</span> <span class="o">:</span> <span class="n">formula</span> <span class="bp">→</span> <span class="kt">Prop</span> <span class="o">:=</span> <span class="gr">sorry</span>

  <span class="kn">section</span> <span class="n">section_no_highlight</span>

  <span class="kd">end</span> <span class="n">section_no_highlight</span>

<span class="kd">end</span> <span class="n">formula</span>
</code></pre></div>



<a name="240688427"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/VSCode%20highlighting%20stopped/near/240688427" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Horatiu Cheval <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/VSCode.20highlighting.20stopped.html#240688427">(May 29 2021 at 07:06)</a>:</h4>
<p>Which on my computer looks like this:<br>
<a href="/user_uploads/3121/MQi9MKsAMkJE4m-HSYW9PQJ_/highlight-broken-mwe.png">highlight-broken-mwe.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/3121/MQi9MKsAMkJE4m-HSYW9PQJ_/highlight-broken-mwe.png" title="highlight-broken-mwe.png"><img src="/user_uploads/3121/MQi9MKsAMkJE4m-HSYW9PQJ_/highlight-broken-mwe.png"></a></div>



<a name="240688460"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/VSCode%20highlighting%20stopped/near/240688460" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Horatiu Cheval <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/VSCode.20highlighting.20stopped.html#240688460">(May 29 2021 at 07:07)</a>:</h4>
<p>The <code>eqext</code> function seems to be the culprit here</p>



<a name="240689415"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/VSCode%20highlighting%20stopped/near/240689415" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/VSCode.20highlighting.20stopped.html#240689415">(May 29 2021 at 07:37)</a>:</h4>
<p>Ah, the highlighting is being confused by <code>\forall\forall</code>, and looking for a trailing comma</p>



<a name="240689530"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/VSCode%20highlighting%20stopped/near/240689530" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/VSCode.20highlighting.20stopped.html#240689530">(May 29 2021 at 07:40)</a>:</h4>
<p>Which would be fixable by changing the highlighter to only recognize <code>forall</code> if followed by a space (even though the space is not strictly required)</p>



<a name="240689533"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/VSCode%20highlighting%20stopped/near/240689533" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/VSCode.20highlighting.20stopped.html#240689533">(May 29 2021 at 07:40)</a>:</h4>
<p>(deleted)</p>



<a name="240689594"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/VSCode%20highlighting%20stopped/near/240689594" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/VSCode.20highlighting.20stopped.html#240689594">(May 29 2021 at 07:42)</a>:</h4>
<p>Is this a deal breaker for the new highlighter? Essentially, by using heuristics for better highlighting, there will always be user-defined syntax that will make those heuristics misfire.</p>



<a name="240690153"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/VSCode%20highlighting%20stopped/near/240690153" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Horatiu Cheval <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/VSCode.20highlighting.20stopped.html#240690153">(May 29 2021 at 07:59)</a>:</h4>
<p>Thank you for looking into it. For one, I am happy to workaround this by replacing the semicolon with a comma in this notation. (off-topic: which seems to work better anyway. <code>∀∀ z : ∥σ∥ , (eqext (x z) (y z))</code> works but <br>
<code>∀∀ (z : ∥σ∥) ; (eqext (x z) (y z))</code> needs those parentheses around the typing statement in order to parse, if someone is willing to shed some light on this behaviour)</p>



<a name="240690236"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/VSCode%20highlighting%20stopped/near/240690236" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Horatiu Cheval <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/VSCode.20highlighting.20stopped.html#240690236">(May 29 2021 at 08:01)</a>:</h4>
<p>I'm probably not the right person at all to discuss these design decisions, but wouldn't it be weird if <code>\forall</code> followed immediately by a <code>(</code> or a <code>{</code> wouldn't be recognized?</p>



<a name="240690306"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/VSCode%20highlighting%20stopped/near/240690306" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/VSCode.20highlighting.20stopped.html#240690306">(May 29 2021 at 08:02)</a>:</h4>
<p>Mathlib style is to write it with a space anyway</p>



<a name="240690413"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/VSCode%20highlighting%20stopped/near/240690413" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Horatiu Cheval <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/VSCode.20highlighting.20stopped.html#240690413">(May 29 2021 at 08:05)</a>:</h4>
<p>Right, it's not a big deal</p>



<a name="240714171"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/VSCode%20highlighting%20stopped/near/240714171" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bhavik Mehta <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/VSCode.20highlighting.20stopped.html#240714171">(May 29 2021 at 18:17)</a>:</h4>
<p>Another example (distinct from Horatiu's and the other one I've mentioned) happens in data/list/defs from line 386 down, I think the issue is <code>
section forall₂</code></p>



<a name="240717309"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/VSCode%20highlighting%20stopped/near/240717309" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/VSCode.20highlighting.20stopped.html#240717309">(May 29 2021 at 19:28)</a>:</h4>
<p><code>\b</code> is evidently meaningless in regexes when this much unicode is used</p>



<a name="240767175"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/VSCode%20highlighting%20stopped/near/240767175" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bhavik Mehta <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/VSCode.20highlighting.20stopped.html#240767175">(May 30 2021 at 18:04)</a>:</h4>
<p>Is this intended to be fixed? Or do we have to live with the fact that mathlib lists don't highlight correctly</p>



<a name="240767398"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/VSCode%20highlighting%20stopped/near/240767398" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/VSCode.20highlighting.20stopped.html#240767398">(May 30 2021 at 18:10)</a>:</h4>
<p>Forall2 should be another easy fix, but not from mobile, which is all I have available till Tuesday</p>



<a name="240927529"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/VSCode%20highlighting%20stopped/near/240927529" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/VSCode.20highlighting.20stopped.html#240927529">(Jun 01 2021 at 11:28)</a>:</h4>
<p>Fixed in <a href="https://github.com/leanprover/vscode-lean/pull/272">https://github.com/leanprover/vscode-lean/pull/272</a></p>



<a name="240933917"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/VSCode%20highlighting%20stopped/near/240933917" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/VSCode.20highlighting.20stopped.html#240933917">(Jun 01 2021 at 12:32)</a>:</h4>
<p>It's a shame github just updated linguist with the previous version</p>



<a name="240982071"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/VSCode%20highlighting%20stopped/near/240982071" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/VSCode.20highlighting.20stopped.html#240982071">(Jun 01 2021 at 18:12)</a>:</h4>
<p>Nothing is ever easy - github interprets the syntax file in a different way to how vscode does...</p>



<a name="240982337"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/VSCode%20highlighting%20stopped/near/240982337" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/VSCode.20highlighting.20stopped.html#240982337">(Jun 01 2021 at 18:14)</a>:</h4>
<p>There's also the growing issue of support for Lean 4 in the github syntax highlighting: <a href="https://github.com/leanprover/lean4/issues/377">https://github.com/leanprover/lean4/issues/377</a></p>



<a name="241077258"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/VSCode%20highlighting%20stopped/near/241077258" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/VSCode.20highlighting.20stopped.html#241077258">(Jun 01 2021 at 21:18)</a>:</h4>
<p>Github linguist lets you <a href="https://github.com/github/linguist/blob/master/docs/overrides.md#using-gitattributes">override syntax in <code>.gitattributes</code></a> - so I don't think we need to support a polyglot grammar.</p>



<a name="241085182"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/VSCode%20highlighting%20stopped/near/241085182" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/VSCode.20highlighting.20stopped.html#241085182">(Jun 01 2021 at 22:46)</a>:</h4>
<p>I noticed a couple other places where highlighting stopped:<br>
<code>core.init.meta.simp_tactic</code><br>
<a href="/user_uploads/3121/divpqzVTW5PDqprDcIrmeo8d/image.png">image.png</a> </p>
<div class="message_inline_image"><a href="/user_uploads/3121/divpqzVTW5PDqprDcIrmeo8d/image.png" title="image.png"><img src="/user_uploads/3121/divpqzVTW5PDqprDcIrmeo8d/image.png"></a></div><p><code>core.init.meta.smt.rsimp</code><br>
<a href="/user_uploads/3121/EpKND9MYyCjMK6p6VJYHCpl7/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/3121/EpKND9MYyCjMK6p6VJYHCpl7/image.png" title="image.png"><img src="/user_uploads/3121/EpKND9MYyCjMK6p6VJYHCpl7/image.png"></a></div>



<a name="241085389"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/VSCode%20highlighting%20stopped/near/241085389" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/VSCode.20highlighting.20stopped.html#241085389">(Jun 01 2021 at 22:49)</a>:</h4>
<p>Also <code>meta def</code> is not highlighted for most of <code>core.init.meta.tactic</code>.</p>



<a name="241085670"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/VSCode%20highlighting%20stopped/near/241085670" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/VSCode.20highlighting.20stopped.html#241085670">(Jun 01 2021 at 22:52)</a>:</h4>
<p>Which extension version?</p>



<a name="241085687"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/VSCode%20highlighting%20stopped/near/241085687" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/VSCode.20highlighting.20stopped.html#241085687">(Jun 01 2021 at 22:52)</a>:</h4>
<p>Thanks for the report</p>



<a name="241085944"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/VSCode%20highlighting%20stopped/near/241085944" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/VSCode.20highlighting.20stopped.html#241085944">(Jun 01 2021 at 22:55)</a>:</h4>
<p><code>lean 0.16.34</code></p>



<a name="241086514"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/VSCode%20highlighting%20stopped/near/241086514" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/VSCode.20highlighting.20stopped.html#241086514">(Jun 01 2021 at 23:01)</a>:</h4>
<p>I'll look at this again tomorrow.</p>



<a name="241097799"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/VSCode%20highlighting%20stopped/near/241097799" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/VSCode.20highlighting.20stopped.html#241097799">(Jun 02 2021 at 01:53)</a>:</h4>
<p>Here is another one where highlighting fails on <code>0.16.34</code>:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="c">/-</span><span class="cm"> @[simps]: -/</span>

<span class="kd">def</span> <span class="n">foo</span> <span class="o">:=</span> <span class="mi">1</span>
</code></pre></div>



<a name="241107207"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/VSCode%20highlighting%20stopped/near/241107207" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/VSCode.20highlighting.20stopped.html#241107207">(Jun 02 2021 at 05:25)</a>:</h4>
<p>Another bug I just found. It doesn't detect the dot at the end of lines (order/bounded_lattice):</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">@[simp]</span> <span class="kd">theorem</span> <span class="n">top_ne_coe</span> <span class="o">{</span><span class="n">a</span> <span class="o">:</span> <span class="n">α</span><span class="o">}</span> <span class="o">:</span> <span class="bp">⊤</span> <span class="bp">≠</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">with_top</span> <span class="n">α</span><span class="o">)</span> <span class="bp">.</span>
<span class="kd">@[simp]</span> <span class="kd">theorem</span> <span class="n">coe_ne_top</span> <span class="o">{</span><span class="n">a</span> <span class="o">:</span> <span class="n">α</span><span class="o">}</span> <span class="o">:</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">with_top</span> <span class="n">α</span><span class="o">)</span> <span class="bp">≠</span> <span class="bp">⊤</span> <span class="bp">.</span>

<span class="kd">@[priority 10]</span>
<span class="kd">instance</span> <span class="n">has_lt</span> <span class="o">[</span><span class="n">has_lt</span> <span class="n">α</span><span class="o">]</span> <span class="o">:</span> <span class="n">has_lt</span> <span class="o">(</span><span class="n">with_top</span> <span class="n">α</span><span class="o">)</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">lt</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">o₁</span> <span class="n">o₂</span> <span class="o">:</span> <span class="n">option</span> <span class="n">α</span><span class="o">,</span> <span class="bp">∃</span> <span class="n">b</span> <span class="bp">∈</span> <span class="n">o₁</span><span class="o">,</span> <span class="bp">∀</span> <span class="n">a</span> <span class="bp">∈</span> <span class="n">o₂</span><span class="o">,</span> <span class="n">b</span> <span class="bp">&lt;</span> <span class="n">a</span> <span class="o">}</span>
</code></pre></div>
<p><a href="/user_uploads/3121/1cLhJsL20hbzswLr3ypp0Uiz/image.png">yet another bug</a></p>
<div class="message_inline_image"><a href="/user_uploads/3121/1cLhJsL20hbzswLr3ypp0Uiz/image.png" title="yet another bug"><img src="/user_uploads/3121/1cLhJsL20hbzswLr3ypp0Uiz/image.png"></a></div>



<a name="241110153"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/VSCode%20highlighting%20stopped/near/241110153" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/VSCode.20highlighting.20stopped.html#241110153">(Jun 02 2021 at 06:30)</a>:</h4>
<p>I think the <code>@[simps]</code> one has always been broken</p>



<a name="241111148"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/VSCode%20highlighting%20stopped/near/241111148" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/VSCode.20highlighting.20stopped.html#241111148">(Jun 02 2021 at 06:48)</a>:</h4>
<p>The other bug is the <code> `name </code> parser not knowing when to stop and eating the <code>)</code></p>



<a name="241115588"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/VSCode%20highlighting%20stopped/near/241115588" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/VSCode.20highlighting.20stopped.html#241115588">(Jun 02 2021 at 07:48)</a>:</h4>
<p>At that point, is it worth spending too much time on fixing all of that? You said that the lean4 highlighting uses directly Lean's parsing, right?</p>



<a name="241116476"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/VSCode%20highlighting%20stopped/near/241116476" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/VSCode.20highlighting.20stopped.html#241116476">(Jun 02 2021 at 07:59)</a>:</h4>
<p>Fixes were easy: <a href="https://github.com/leanprover/vscode-lean/pull/273">https://github.com/leanprover/vscode-lean/pull/273</a></p>



<a name="241116606"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/VSCode%20highlighting%20stopped/near/241116606" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/VSCode.20highlighting.20stopped.html#241116606">(Jun 02 2021 at 08:00)</a>:</h4>
<p>I have no idea what lean4 highlighting looks like, I don't have it installed</p>



<a name="241117223"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/VSCode%20highlighting%20stopped/near/241117223" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/VSCode.20highlighting.20stopped.html#241117223">(Jun 02 2021 at 08:06)</a>:</h4>
<p>I've left the <code>simps</code> one alone as it's a problem with the markdown parser, and I don't want to open that can of worms too</p>



<a name="241122180"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/VSCode%20highlighting%20stopped/near/241122180" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Marc Huisinga <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/VSCode.20highlighting.20stopped.html#241122180">(Jun 02 2021 at 09:00)</a>:</h4>
<p><span class="user-mention silent" data-user-id="387244">Yaël Dillies</span> <a href="#narrow/stream/113488-general/topic/VSCode.20highlighting.20stopped/near/241115588">said</a>:</p>
<blockquote>
<p>At that point, is it worth spending too much time on fixing all of that? You said that the lean4 highlighting uses directly Lean's parsing, right?</p>
</blockquote>
<p>Lean 4 uses both the VSCode syntax highlighting and semantic highlighting (which happens on the server side). The downside of semantic highlighting is that the code needs to be elaborated to display the highlighting, so it's always good to have something like the VSCode highlighting as a backup.</p>



<a name="241122944"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/VSCode%20highlighting%20stopped/near/241122944" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/VSCode.20highlighting.20stopped.html#241122944">(Jun 02 2021 at 09:08)</a>:</h4>
<p><span class="user-mention" data-user-id="221921">@Marc Huisinga</span>, can you paste a screenshot of what the highlighting looks like for a typical lean4 definition?</p>



<a name="241123011"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/VSCode%20highlighting%20stopped/near/241123011" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/VSCode.20highlighting.20stopped.html#241123011">(Jun 02 2021 at 09:08)</a>:</h4>
<p>(preferably one that leverages the semantic highlighting)</p>



<a name="241123028"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/VSCode%20highlighting%20stopped/near/241123028" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Marc Huisinga <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/VSCode.20highlighting.20stopped.html#241123028">(Jun 02 2021 at 09:09)</a>:</h4>
<p><span class="user-mention silent" data-user-id="310045">Eric Wieser</span> <a href="#narrow/stream/113488-general/topic/VSCode.20highlighting.20stopped/near/241122944">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="221921">Marc Huisinga</span>, can you paste a screenshot of what the highlighting looks like for a typical lean4 definition?</p>
</blockquote>
<p>Stolen from the Lean 4 course at KIT:<br>
<a href="/user_uploads/3121/yw6Ybn3voTfmUQrMII0PH4Kn/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/3121/yw6Ybn3voTfmUQrMII0PH4Kn/image.png" title="image.png"><img src="/user_uploads/3121/yw6Ybn3voTfmUQrMII0PH4Kn/image.png"></a></div>



<a name="241123069"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/VSCode%20highlighting%20stopped/near/241123069" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Marc Huisinga <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/VSCode.20highlighting.20stopped.html#241123069">(Jun 02 2021 at 09:09)</a>:</h4>
<p>note that all tactics are highlighted, variables etc.</p>



<a name="241123236"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/VSCode%20highlighting%20stopped/near/241123236" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/VSCode.20highlighting.20stopped.html#241123236">(Jun 02 2021 at 09:11)</a>:</h4>
<p>Odd that <code>count_erase</code> is highlighted but not the other lemmas in <code>simp</code></p>



<a name="241123306"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/VSCode%20highlighting%20stopped/near/241123306" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Marc Huisinga <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/VSCode.20highlighting.20stopped.html#241123306">(Jun 02 2021 at 09:12)</a>:</h4>
<p>maybe because that's the induction hypothesis</p>



<a name="241123328"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/VSCode%20highlighting%20stopped/near/241123328" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/VSCode.20highlighting.20stopped.html#241123328">(Jun 02 2021 at 09:12)</a>:</h4>
<p>But at any rate, the fact that <code>{as : ...}</code> in the argument is in a pale blue is consistent with the new lean3 vscode syntax, which is nice</p>



<a name="241123590"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/VSCode%20highlighting%20stopped/near/241123590" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastian Ullrich <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/VSCode.20highlighting.20stopped.html#241123590">(Jun 02 2021 at 09:15)</a>:</h4>
<p><span class="user-mention silent" data-user-id="310045">Eric Wieser</span> <a href="#narrow/stream/113488-general/topic/VSCode.20highlighting.20stopped/near/241123236">said</a>:</p>
<blockquote>
<p>Odd that <code>count_erase</code> is highlighted but not the other lemmas in <code>simp</code></p>
</blockquote>
<p>It's telling you "why are you using recursion in a tactic proof"</p>



<a name="241123613"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/VSCode%20highlighting%20stopped/near/241123613" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Marc Huisinga <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/VSCode.20highlighting.20stopped.html#241123613">(Jun 02 2021 at 09:15)</a>:</h4>
<p>Here's an example from a macro declaration where the keywords in the macro are highlighted in the <code>macro_rules</code> command:<br>
<a href="/user_uploads/3121/dXYf_nAKVEhMxAB0ZujFRg45/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/3121/dXYf_nAKVEhMxAB0ZujFRg45/image.png" title="image.png"><img src="/user_uploads/3121/dXYf_nAKVEhMxAB0ZujFRg45/image.png"></a></div>



<a name="241123632"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/VSCode%20highlighting%20stopped/near/241123632" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Marc Huisinga <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/VSCode.20highlighting.20stopped.html#241123632">(Jun 02 2021 at 09:15)</a>:</h4>
<p>I guess the sepBy highlighting might be a bug</p>



<a name="241123841"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/VSCode%20highlighting%20stopped/near/241123841" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastian Ullrich <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/VSCode.20highlighting.20stopped.html#241123841">(Jun 02 2021 at 09:17)</a>:</h4>
<p>Well, that <em>is</em> the token :) . Not sure if we should add some heuristics to terminate highlighting before the <code>(</code>, or add some annotation in the parser for that.</p>



<a name="241124332"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/VSCode%20highlighting%20stopped/near/241124332" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Marc Huisinga <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/VSCode.20highlighting.20stopped.html#241124332">(Jun 02 2021 at 09:22)</a>:</h4>
<p>One more example with string interpolation:<br>
<a href="/user_uploads/3121/nsFphxTCChT3ocw_ztMpZSgD/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/3121/nsFphxTCChT3ocw_ztMpZSgD/image.png" title="image.png"><img src="/user_uploads/3121/nsFphxTCChT3ocw_ztMpZSgD/image.png"></a></div>



<a name="241125841"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/VSCode%20highlighting%20stopped/near/241125841" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/VSCode.20highlighting.20stopped.html#241125841">(Jun 02 2021 at 09:37)</a>:</h4>
<p>is it possible to revert the coloring of regular text inside the interpolation? like that <code>&lt;-</code> shouldn't be brown</p>



<a name="241126250"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/VSCode%20highlighting%20stopped/near/241126250" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastian Ullrich <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/VSCode.20highlighting.20stopped.html#241126250">(Jun 02 2021 at 09:40)</a>:</h4>
<p>I don't think LSP has an appropriate token kind for that. But it lets us invent our own.</p>



<a name="241134215"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/VSCode%20highlighting%20stopped/near/241134215" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/VSCode.20highlighting.20stopped.html#241134215">(Jun 02 2021 at 11:09)</a>:</h4>
<p><span class="user-mention silent" data-user-id="111080">Floris van Doorn</span> <a href="#narrow/stream/113488-general/topic/VSCode.20highlighting.20stopped/near/241097799">said</a>:</p>
<blockquote>
<p>Here is another one where highlighting fails on <code>0.16.34</code>:</p>
<p><div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="c">/-</span><span class="cm"> @[simps]: -/</span>

<span class="kd">def</span> <span class="n">foo</span> <span class="o">:=</span> <span class="mi">1</span>
</code></pre></div><br>
</p>
</blockquote>
<p>Filed as <a href="https://github.com/leanprover/vscode-lean/issues/274">https://github.com/leanprover/vscode-lean/issues/274</a>, this has probably been around as long as we've highlighted markdown comments.</p>



<a name="241173839"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/VSCode%20highlighting%20stopped/near/241173839" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/VSCode.20highlighting.20stopped.html#241173839">(Jun 02 2021 at 16:27)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110049">Mario Carneiro</span> <a href="#narrow/stream/113488-general/topic/VSCode.20highlighting.20stopped/near/241125841">said</a>:</p>
<blockquote>
<p>is it possible to revert the coloring of regular text inside the interpolation? like that <code>&lt;-</code> shouldn't be brown</p>
</blockquote>
<p>The vim syntax highlighting does that for all strings by default, and I believe we could do that in vscode as well.  It works mostly fine, except for <code>syntax "{" term "}" : term</code>, where <code>" term "</code> is highlighted as a string.  There was some talk of enabling interpolation by default for all strings, then we'd just need to write <code>"\{"</code> instead.</p>



<a name="241174155"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/VSCode%20highlighting%20stopped/near/241174155" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/VSCode.20highlighting.20stopped.html#241174155">(Jun 02 2021 at 16:29)</a>:</h4>
<p>wait, why <em>isn't</em> that interpreted as an interpolated string by lean? Is it because <code>syntax</code> is magic?</p>



<a name="241174292"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/VSCode%20highlighting%20stopped/near/241174292" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/VSCode.20highlighting.20stopped.html#241174292">(Jun 02 2021 at 16:30)</a>:</h4>
<p>It would be nice if we could escape braces today, even if it's not necessary. It might help with these things</p>



<a name="243387137"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/VSCode%20highlighting%20stopped/near/243387137" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/VSCode.20highlighting.20stopped.html#243387137">(Jun 21 2021 at 14:06)</a>:</h4>
<p>In <code>data.list.rotate</code>, probably because of <code>exists</code><br>
<a href="/user_uploads/3121/Fz1ZTgYRXp11z79xdJ53gT5V/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/3121/Fz1ZTgYRXp11z79xdJ53gT5V/image.png" title="image.png"><img src="/user_uploads/3121/Fz1ZTgYRXp11z79xdJ53gT5V/image.png"></a></div>



<a name="243392639"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/VSCode%20highlighting%20stopped/near/243392639" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/VSCode.20highlighting.20stopped.html#243392639">(Jun 21 2021 at 14:42)</a>:</h4>
<p>Honestly, I'm beginning to feel that highlighting the argument names brought more issues than it's worth because the failure mode is so extreme.  (Looking though the screenshot, the <code>λ ⟨n, hn⟩, ...</code> is also highlighted incorrectly.)</p>



<a name="243392905"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/VSCode%20highlighting%20stopped/near/243392905" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/VSCode.20highlighting.20stopped.html#243392905">(Jun 21 2021 at 14:44)</a>:</h4>
<p>I agree with Gabriel. I never noticed any issues with highlighting for years, because I wasn't observant enough to spot any of the subtleties which people would occasionally spot, but now I'm noticing issues all the time which are really easy to spot, like the above.</p>



<a name="243396486"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/VSCode%20highlighting%20stopped/near/243396486" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/VSCode.20highlighting.20stopped.html#243396486">(Jun 21 2021 at 15:07)</a>:</h4>
<p>There was a really long and obvious in <code>subgroup</code>, and it didn't have anything to do with the new highlighting, but yeah I agree that this seems to have introduced lots.</p>



<a name="243402643"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/VSCode%20highlighting%20stopped/near/243402643" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/VSCode.20highlighting.20stopped.html#243402643">(Jun 21 2021 at 15:48)</a>:</h4>
<p>The change that fixed <code>subgroup</code> was independent of the change that introduced the binder names</p>



<a name="243403150"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/VSCode%20highlighting%20stopped/near/243403150" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/VSCode.20highlighting.20stopped.html#243403150">(Jun 21 2021 at 15:52)</a>:</h4>
<p>I'll put together a patch to fix the above two bugs, even if we do eventually decide to revert the feature entirely</p>



<a name="243405499"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/VSCode%20highlighting%20stopped/near/243405499" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/VSCode.20highlighting.20stopped.html#243405499">(Jun 21 2021 at 16:09)</a>:</h4>
<p><span class="user-mention silent" data-user-id="387244">Yaël Dillies</span> <a href="#narrow/stream/113488-general/topic/VSCode.20highlighting.20stopped/near/243387137">said</a>:</p>
<blockquote>
<p>In <code>data.list.rotate</code>, probably because of <code>exists</code><br>
<a href="/user_uploads/3121/Fz1ZTgYRXp11z79xdJ53gT5V/image.png">image.png</a></p>
</blockquote>
<p>Fixed in <a href="https://github.com/leanprover/vscode-lean/pull/276">https://github.com/leanprover/vscode-lean/pull/276</a></p>



<a name="243405998"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/VSCode%20highlighting%20stopped/near/243405998" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/VSCode.20highlighting.20stopped.html#243405998">(Jun 21 2021 at 16:13)</a>:</h4>
<p>Well, almost...</p>



<a name="243407375"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/VSCode%20highlighting%20stopped/near/243407375" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/VSCode.20highlighting.20stopped.html#243407375">(Jun 21 2021 at 16:24)</a>:</h4>
<p>Ok, fixed properly and updated with a fix for <code>λ ⟨n, hn⟩, ...</code> too:</p>
<p><a href="user_uploads/3121/YJX4CylKYr5mgsYdIu1t511M/image.png">image.png</a></p>
<div class="message_inline_image"><a href="user_uploads/3121/YJX4CylKYr5mgsYdIu1t511M/image.png" title="image.png"><img src="user_uploads/3121/YJX4CylKYr5mgsYdIu1t511M/image.png"></a></div>



<a name="243408102"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/VSCode%20highlighting%20stopped/near/243408102" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/VSCode.20highlighting.20stopped.html#243408102">(Jun 21 2021 at 16:30)</a>:</h4>
<p>Highlighting the contents of the<code>⟨⟩</code> as a parameter is the wrong thing to do anyway, as you can have all sorts of weird things in there:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="k">#check</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">⟨</span><span class="bp">.</span><span class="o">((</span><span class="mi">1</span><span class="o">,</span> <span class="n">unit.star</span><span class="o">)</span><span class="bp">.</span><span class="n">snd</span><span class="o">),</span> <span class="o">(</span><span class="n">y</span><span class="o">,</span> <span class="o">(</span><span class="n">z</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">))⟩,</span> <span class="mi">1</span> <span class="o">:</span> <span class="n">unit</span> <span class="bp">×</span> <span class="n">ℕ</span> <span class="bp">×</span> <span class="n">ℕ</span> <span class="bp">→</span> <span class="n">ℕ</span><span class="o">)</span>
</code></pre></div>



<a name="243873091"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/VSCode%20highlighting%20stopped/near/243873091" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bhavik Mehta <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/VSCode.20highlighting.20stopped.html#243873091">(Jun 25 2021 at 03:52)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">algebra.ring.basic</span>

<span class="kd">example</span> <span class="o">{</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">ring</span> <span class="o">(</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)]</span> <span class="o">:</span> <span class="n">false</span> <span class="o">:=</span>
<span class="gr">sorry</span>
</code></pre></div>
<p>highlights in unexpected ways:<br>
<a href="/user_uploads/3121/NFhsCTt6-eFQhhiNFgQzl4b-/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/3121/NFhsCTt6-eFQhhiNFgQzl4b-/image.png" title="image.png"><img src="/user_uploads/3121/NFhsCTt6-eFQhhiNFgQzl4b-/image.png"></a></div>



<a name="243945390"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/VSCode%20highlighting%20stopped/near/243945390" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/VSCode.20highlighting.20stopped.html#243945390">(Jun 25 2021 at 17:22)</a>:</h4>
<p>I'm not so worried about the parameter highlighting occasionally being suboptimal - it's the cases where it breaks things that worked before I added it that I'm most worried about. Thanks for the report anyway, I'll have a go at fixing that one once the other PR is merged.</p>



<a name="244291654"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/VSCode%20highlighting%20stopped/near/244291654" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/VSCode.20highlighting.20stopped.html#244291654">(Jun 29 2021 at 14:38)</a>:</h4>
<p>I don't know if this one is already reported:<br>
<code>listΠ</code><br>
<a href="https://github.com/leanprover-community/mathlib/blob/master/src/tactic/rcases.lean#L426">https://github.com/leanprover-community/mathlib/blob/master/src/tactic/rcases.lean#L426</a><br>
<a href="/user_uploads/3121/DHlp9jn0dNl24z2QJrYvP4Je/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/3121/DHlp9jn0dNl24z2QJrYvP4Je/image.png" title="image.png"><img src="/user_uploads/3121/DHlp9jn0dNl24z2QJrYvP4Je/image.png"></a></div>



<a name="244296304"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/VSCode%20highlighting%20stopped/near/244296304" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/VSCode.20highlighting.20stopped.html#244296304">(Jun 29 2021 at 15:05)</a>:</h4>
<p>It pains me a bit given how much work went into it, but I've now removed the binder highlighting completely.</p>



<a name="244297106"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/VSCode%20highlighting%20stopped/near/244297106" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Marc Huisinga <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/VSCode.20highlighting.20stopped.html#244297106">(Jun 29 2021 at 15:09)</a>:</h4>
<p>Removing it from vscode-lean4 might also be the right call. I had originally removed it in the first iteration of the syntax highlighting for the same reasons (and the fact that Lean 4 was expected to have semantic highlighting).</p>



<a name="244297431"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/VSCode%20highlighting%20stopped/near/244297431" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/VSCode.20highlighting.20stopped.html#244297431">(Jun 29 2021 at 15:11)</a>:</h4>
<p>I don't think we ever had it in vscode-lean4 (or at least I can't find it right now).</p>



<a name="244297491"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/VSCode%20highlighting%20stopped/near/244297491" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Marc Huisinga <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/VSCode.20highlighting.20stopped.html#244297491">(Jun 29 2021 at 15:11)</a>:</h4>
<p>You're right, I was thinking of definition name highlighting! Sorry.</p>



<a name="244298008"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/VSCode%20highlighting%20stopped/near/244298008" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/VSCode.20highlighting.20stopped.html#244298008">(Jun 29 2021 at 15:14)</a>:</h4>
<p>Definition name highlighting is much less tricky, since it can't go on forever (at some point there's going to be whitespace).  Highlighting binder names can go wrong much more easily, since you need to keep track of nested parentheses, etc.  (And god forbid somebody declares <code>noooo(</code> as a prefix notation.)</p>



<a name="244299533"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/VSCode%20highlighting%20stopped/near/244299533" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Marc Huisinga <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/VSCode.20highlighting.20stopped.html#244299533">(Jun 29 2021 at 15:23)</a>:</h4>
<p>TextMate grammars are spooky</p>



<a name="244299994"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/VSCode%20highlighting%20stopped/near/244299994" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/VSCode.20highlighting.20stopped.html#244299994">(Jun 29 2021 at 15:26)</a>:</h4>
<p>Right, the binder hightlighting never had a chance if faced with <code>nooo(</code>. <del><code>listΠ</code> would be straighforward to add another fix for.</del></p>



<a name="244300128"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/VSCode%20highlighting%20stopped/near/244300128" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/VSCode.20highlighting.20stopped.html#244300128">(Jun 29 2021 at 15:27)</a>:</h4>
<p>Ah, actually <code>listΠ</code> would be impossible to handle, since it's notation defined as <code>local notation `listΠ` := list_Pi</code></p>



<a name="244300172"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/VSCode%20highlighting%20stopped/near/244300172" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/VSCode.20highlighting.20stopped.html#244300172">(Jun 29 2021 at 15:27)</a>:</h4>
<p>And there's no way for the textmate grammar to know when someone has stolen its binder syntax to use for something else - this is exactly like the <code>nooo(</code> case, and would require heuristics based on what someone would "reasonably want to do"</p>



<a name="244342160"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/VSCode%20highlighting%20stopped/near/244342160" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bhavik Mehta <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/VSCode.20highlighting.20stopped.html#244342160">(Jun 29 2021 at 20:23)</a>:</h4>
<p>It looks like highlighting for lambdas has gone too - is it my imagination or was that there before the binder highlighting?</p>



<a name="244346164"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/VSCode%20highlighting%20stopped/near/244346164" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/VSCode.20highlighting.20stopped.html#244346164">(Jun 29 2021 at 20:53)</a>:</h4>
<p>That was part of the binder highlighting</p>



<a name="244349339"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/VSCode%20highlighting%20stopped/near/244349339" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/VSCode.20highlighting.20stopped.html#244349339">(Jun 29 2021 at 21:19)</a>:</h4>
<p>Maybe we can ship a second "Lean (with binders)" syntax file and let users choose between them?</p>



<a name="244349463"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/VSCode%20highlighting%20stopped/near/244349463" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/VSCode.20highlighting.20stopped.html#244349463">(Jun 29 2021 at 21:20)</a>:</h4>
<p>Even though lean 4 has semantic highlighting, it won't work on github where a (modified) TextMate engine is used</p>



<a name="244358500"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/VSCode%20highlighting%20stopped/near/244358500" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bhavik Mehta <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/VSCode.20highlighting.20stopped.html#244358500">(Jun 29 2021 at 22:51)</a>:</h4>
<p><span class="user-mention silent" data-user-id="310045">Eric Wieser</span> <a href="#narrow/stream/113488-general/topic/VSCode.20highlighting.20stopped/near/244346164">said</a>:</p>
<blockquote>
<p>That was part of the binder highlighting</p>
</blockquote>
<p>Hmm I'm fairly sure that in examples like<br>
<a href="/user_uploads/3121/-ZXeXSKHRoQy5kr-6-R0Ioar/image.png">image.png</a> <br>
the <code>λ</code> was highlighted before the binders change...</p>
<div class="message_inline_image"><a href="/user_uploads/3121/-ZXeXSKHRoQy5kr-6-R0Ioar/image.png" title="image.png"><img src="/user_uploads/3121/-ZXeXSKHRoQy5kr-6-R0Ioar/image.png"></a></div>



<a name="244359013"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/VSCode%20highlighting%20stopped/near/244359013" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bhavik Mehta <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/VSCode.20highlighting.20stopped.html#244359013">(Jun 29 2021 at 22:57)</a>:</h4>
<p>I went looking for some old screenshots to double check: <a href="/user_uploads/3121/-7LB782x-utn2VlLXsyk26Bd/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/3121/-7LB782x-utn2VlLXsyk26Bd/image.png" title="image.png"><img src="/user_uploads/3121/-7LB782x-utn2VlLXsyk26Bd/image.png"></a></div>



<a name="244359043"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/VSCode%20highlighting%20stopped/near/244359043" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bhavik Mehta <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/VSCode.20highlighting.20stopped.html#244359043">(Jun 29 2021 at 22:57)</a>:</h4>
<p>(from the discord, posted in May)</p>



<a name="244814274"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/VSCode%20highlighting%20stopped/near/244814274" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bhavik Mehta <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/VSCode.20highlighting.20stopped.html#244814274">(Jul 03 2021 at 16:50)</a>:</h4>
<p>Could we have this feature back? It would be a shame for this to disappear in favour of seemingly nothing</p>



<a name="244814899"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/VSCode%20highlighting%20stopped/near/244814899" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/VSCode.20highlighting.20stopped.html#244814899">(Jul 03 2021 at 17:06)</a>:</h4>
<p>The whole feature or just blue <code>λ</code>?</p>



<a name="244819306"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/VSCode%20highlighting%20stopped/near/244819306" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bhavik Mehta <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/VSCode.20highlighting.20stopped.html#244819306">(Jul 03 2021 at 18:57)</a>:</h4>
<p>Blue λ</p>



<a name="244819309"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/VSCode%20highlighting%20stopped/near/244819309" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bhavik Mehta <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/VSCode.20highlighting.20stopped.html#244819309">(Jul 03 2021 at 18:57)</a>:</h4>
<p>Essentially just how it was before the binders change</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>