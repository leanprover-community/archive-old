---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/Lean.203.2E21.2E0c.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E21.2E0c.html">Lean 3.21.0c</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="212991272"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.21.0c/near/212991272" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E21.2E0c.html#212991272">(Oct 12 2020 at 02:01)</a>:</h4>
<p>It's been another month, so here's <a href="https://github.com/leanprover-community/lean/releases/tag/v3.21.0">Lean 3.21.0c</a>! Thanks to <span class="user-mention" data-user-id="110087">@Scott Morrison</span>, <span class="user-mention" data-user-id="112680">@Johan Commelin</span> and <span class="user-mention" data-user-id="121918">@Edward Ayers</span> for their contributions (and <span class="user-mention" data-user-id="110043">@Gabriel Ebner</span> and <span class="user-mention" data-user-id="110596">@Rob Lewis</span>  for reviewing and merging their PRs)!</p>
<p>Features:</p>
<ul>
<li>Simplify definition of <code>band</code> and <code>bor</code> (<a href="https://github.com/leanprover-community/lean/issues/466">lean#466</a>)</li>
<li>More advice in docstrings for <code>Exists</code>, <code>not</code>, <code>and</code>, and <code>or</code> (<a href="https://github.com/leanprover-community/lean/issues/296">lean#296</a>)</li>
</ul>
<p>Bug fixes:</p>
<ul>
<li>Fix typo in docstring for <code>tactic.exact</code> (<a href="https://github.com/leanprover-community/lean/issues/472">lean#472</a>)</li>
<li>Fix missing code block in <a href="https://github.com/leanprover-community/lean/blob/master/doc/widget_server.md">widget server docs</a> (<a href="https://github.com/leanprover-community/lean/issues/473">lean#473</a>)</li>
</ul>
<p>Changes:</p>
<ul>
<li>Remove global notation for <code>vector.cons</code> (<a href="https://github.com/leanprover-community/lean/issues/471">lean#471</a>)</li>
</ul>
<p>Mathlib PR: <a href="https://github.com/leanprover-community/mathlib/issues/4578">#4578</a></p>



<a name="212995636"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.21.0c/near/212995636" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E21.2E0c.html#212995636">(Oct 12 2020 at 03:55)</a>:</h4>
<p>In <a href="https://github.com/leanprover-community/mathlib/issues/4578">#4578</a>, I'm slowly tearing out all the instances of <code>::</code> notation applied to vectors. Did we want to replace it with some (other) localized notation or are we happy with having a bunch of <code>vector.cons</code> everywhere?</p>



<a name="212995697"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.21.0c/near/212995697" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E21.2E0c.html#212995697">(Oct 12 2020 at 03:56)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> I think most of the files I've been fixing were written by you, so let me know what your preference is.</p>



<a name="212997789"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.21.0c/near/212997789" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E21.2E0c.html#212997789">(Oct 12 2020 at 04:53)</a>:</h4>
<p>How about a global notation <code>::ᵥ</code> or <code>:ᵥ</code>?</p>



<a name="212998679"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.21.0c/near/212998679" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E21.2E0c.html#212998679">(Oct 12 2020 at 05:14)</a>:</h4>
<p><code>vector</code> is defined in core. Where would be a good place to add <code>::ᵥ</code>?</p>



<a name="212999057"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.21.0c/near/212999057" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E21.2E0c.html#212999057">(Oct 12 2020 at 05:24)</a>:</h4>
<p>How about <code>has_cons</code>?</p>



<a name="213000608"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.21.0c/near/213000608" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E21.2E0c.html#213000608">(Oct 12 2020 at 06:03)</a>:</h4>
<p>No, this will break many uses of <code>list.cons</code></p>



<a name="213000640"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.21.0c/near/213000640" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E21.2E0c.html#213000640">(Oct 12 2020 at 06:04)</a>:</h4>
<p><span class="user-mention" data-user-id="123965">@Bryan Gin-ge Chen</span> We have a <code>data.vector2</code> file for additional foundational material supplementing core's <code>data.vector</code></p>



<a name="213000662"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.21.0c/near/213000662" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E21.2E0c.html#213000662">(Oct 12 2020 at 06:04)</a>:</h4>
<p>maybe it's been renamed to <code>data.vector.basic</code></p>



<a name="213014580"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.21.0c/near/213014580" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E21.2E0c.html#213014580">(Oct 12 2020 at 09:15)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> <a href="https://github.com/leanprover-community/mathlib/issues/4578">#4578</a> passes CI. A couple of files have changed, with <code>::</code> replaced by <code>vector.cons</code>.</p>



<a name="213014600"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.21.0c/near/213014600" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E21.2E0c.html#213014600">(Oct 12 2020 at 09:15)</a>:</h4>
<p>Personally, I would be happy to kick it on the queue like this.</p>



<a name="213014625"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.21.0c/near/213014625" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E21.2E0c.html#213014625">(Oct 12 2020 at 09:15)</a>:</h4>
<p>Do you think reinstating the <code>localized</code> notation is worth it?</p>



<a name="213014790"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.21.0c/near/213014790" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E21.2E0c.html#213014790">(Oct 12 2020 at 09:17)</a>:</h4>
<p>localized isn't going to work here, because it clobbers list.cons when open</p>



<a name="213014881"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.21.0c/near/213014881" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E21.2E0c.html#213014881">(Oct 12 2020 at 09:18)</a>:</h4>
<p>Ok, then I would be a big fan of just merging the PR as is</p>



<a name="213014885"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.21.0c/near/213014885" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E21.2E0c.html#213014885">(Oct 12 2020 at 09:18)</a>:</h4>
<p>it's not uncommon to be working with <code>list.cons</code> and <code>vector.cons</code> simultaneously, they aren't that separate in their definition</p>



<a name="213014935"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.21.0c/near/213014935" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E21.2E0c.html#213014935">(Oct 12 2020 at 09:19)</a>:</h4>
<p>Instead, I suggest using a global but disambiguated notation such as <code>::ᵥ</code> (see above)</p>



<a name="213015163"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.21.0c/near/213015163" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E21.2E0c.html#213015163">(Oct 12 2020 at 09:21)</a>:</h4>
<p>Yes, I read that suggestion. But is it worth it? <code>vector.cons</code> isn't used that much at all.</p>



<a name="213015410"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.21.0c/near/213015410" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E21.2E0c.html#213015410">(Oct 12 2020 at 09:23)</a>:</h4>
<p>I think a cons like operation for a vector like type is important, although perhaps the vector like type would be better suited as <code>fin n -&gt; A</code></p>



<a name="213015532"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.21.0c/near/213015532" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E21.2E0c.html#213015532">(Oct 12 2020 at 09:24)</a>:</h4>
<p>but looking at the files that were changed, I certainly would not have wanted to deal with the lack of notation while writing them</p>



<a name="213018605"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.21.0c/near/213018605" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E21.2E0c.html#213018605">(Oct 12 2020 at 09:55)</a>:</h4>
<p>I pushed a patch using the notation</p>



<a name="213020366"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.21.0c/near/213020366" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E21.2E0c.html#213020366">(Oct 12 2020 at 10:16)</a>:</h4>
<p>I think this is now ready for review</p>



<a name="213076991"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.21.0c/near/213076991" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E21.2E0c.html#213076991">(Oct 12 2020 at 19:22)</a>:</h4>
<p>Do we want to make <code>::ᵥ</code> localized notation, so that we can also use it for <code>finvec</code> and potentially other vector-like structures?</p>



<a name="213077935"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.21.0c/near/213077935" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E21.2E0c.html#213077935">(Oct 12 2020 at 19:33)</a>:</h4>
<p>Hmm, that might make sense</p>



<a name="213078009"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.21.0c/near/213078009" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E21.2E0c.html#213078009">(Oct 12 2020 at 19:33)</a>:</h4>
<blockquote>
<p>Yury G. Kudryashov: How about has_cons?<br>
Mario Carneiro: No, this will break many uses of list.cons</p>
</blockquote>
<p>Maybe we can nevertheless have a <code>has_consv</code>?</p>



<a name="213110559"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.21.0c/near/213110559" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E21.2E0c.html#213110559">(Oct 13 2020 at 04:16)</a>:</h4>
<p>I was hoping that with a disambiguated notation there wouldn't be name contention</p>



<a name="213110566"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.21.0c/near/213110566" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E21.2E0c.html#213110566">(Oct 13 2020 at 04:16)</a>:</h4>
<p>can't finvec use a different letter?</p>



<a name="213115802"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.21.0c/near/213115802" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E21.2E0c.html#213115802">(Oct 13 2020 at 06:23)</a>:</h4>
<p>NOOOOOOOOOOOOOO!!!</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">configuring</span> <span class="n">mathlib</span> <span class="mi">0</span><span class="bp">.</span><span class="mi">1</span>
<span class="bp">/</span><span class="n">home</span><span class="bp">/</span><span class="n">runner</span><span class="bp">/</span><span class="n">work</span><span class="bp">/</span><span class="n">mathlib</span><span class="bp">/</span><span class="n">mathlib</span><span class="bp">/</span><span class="n">src</span><span class="bp">/</span><span class="n">tactic</span><span class="bp">/</span><span class="n">linarith</span><span class="bp">/</span><span class="n">verification.lean</span><span class="o">:</span><span class="mi">162</span><span class="o">:</span><span class="mi">20</span><span class="o">:</span> <span class="n">error</span><span class="o">:</span> <span class="n">ambiguous</span> <span class="n">overload</span><span class="o">,</span> <span class="n">possible</span> <span class="n">interpretations</span>
  <span class="n">hz</span> <span class="o">::</span> <span class="bp">↑</span><span class="n">l'</span>
  <span class="n">hz</span> <span class="o">::</span> <span class="n">l'</span>
<span class="n">Additional</span> <span class="n">information</span><span class="o">:</span>
<span class="bp">/</span><span class="n">home</span><span class="bp">/</span><span class="n">runner</span><span class="bp">/</span><span class="n">work</span><span class="bp">/</span><span class="n">mathlib</span><span class="bp">/</span><span class="n">mathlib</span><span class="bp">/</span><span class="n">src</span><span class="bp">/</span><span class="n">tactic</span><span class="bp">/</span><span class="n">linarith</span><span class="bp">/</span><span class="n">verification.lean</span><span class="o">:</span><span class="mi">162</span><span class="o">:</span><span class="mi">20</span><span class="o">:</span> <span class="n">context</span><span class="o">:</span> <span class="n">switched</span> <span class="n">to</span> <span class="n">basic</span> <span class="n">overload</span> <span class="n">resolution</span> <span class="n">where</span> <span class="n">arguments</span> <span class="n">are</span> <span class="n">elaborated</span> <span class="n">without</span> <span class="n">any</span> <span class="n">information</span> <span class="n">about</span> <span class="n">the</span> <span class="n">expected</span> <span class="n">type</span> <span class="n">because</span> <span class="n">it</span> <span class="n">failed</span> <span class="n">to</span> <span class="n">disambiguate</span> <span class="n">overload</span> <span class="n">using</span> <span class="n">the</span> <span class="n">expected</span> <span class="n">type</span>
  <span class="bp">?</span><span class="n">m_1</span>
<span class="n">the</span> <span class="n">following</span> <span class="n">overloaded</span> <span class="n">terms</span> <span class="n">were</span> <span class="n">applicable</span>
  <span class="n">multiset.cons</span>
  <span class="n">list.cons</span>
</code></pre></div>



<a name="213115809"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.21.0c/near/213115809" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E21.2E0c.html#213115809">(Oct 13 2020 at 06:24)</a>:</h4>
<p>We went through all this trouble to get rid of <code>vector.cons</code> notation, and voila, there is the next conflict.</p>



<a name="213115853"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.21.0c/near/213115853" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E21.2E0c.html#213115853">(Oct 13 2020 at 06:24)</a>:</h4>
<p>Fresh from <a href="https://github.com/leanprover-community/mathlib/issues/4593">#4593</a></p>



<a name="213116367"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.21.0c/near/213116367" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E21.2E0c.html#213116367">(Oct 13 2020 at 06:35)</a>:</h4>
<p>Hmm... I was wondering about the focus on <code>vector</code> because of that.  I guess I should get rid of the <code>::</code> notation in <a href="https://github.com/leanprover-community/mathlib/blob/master/src/data/sym.lean">https://github.com/leanprover-community/mathlib/blob/master/src/data/sym.lean</a> as well?</p>



<a name="213118291"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.21.0c/near/213118291" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E21.2E0c.html#213118291">(Oct 13 2020 at 07:08)</a>:</h4>
<p>yep, IIRC it was a three-way conflict with <code>list.cons</code>, <code>vector.cons</code> and <code>multiset.cons</code>, although apparently <code>sym</code> has joined the party</p>



<a name="213118334"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.21.0c/near/213118334" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E21.2E0c.html#213118334">(Oct 13 2020 at 07:08)</a>:</h4>
<p>However the other occurrences are in mathlib so it's less hard to fix those</p>



<a name="213118398"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.21.0c/near/213118398" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E21.2E0c.html#213118398">(Oct 13 2020 at 07:09)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> So, what do you suggest?</p>



<a name="213118411"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.21.0c/near/213118411" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E21.2E0c.html#213118411">(Oct 13 2020 at 07:09)</a>:</h4>
<p><code>::m</code> ?</p>



<a name="213118420"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.21.0c/near/213118420" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E21.2E0c.html#213118420">(Oct 13 2020 at 07:10)</a>:</h4>
<p>sure, why not</p>



<a name="213118503"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.21.0c/near/213118503" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E21.2E0c.html#213118503">(Oct 13 2020 at 07:11)</a>:</h4>
<p>I mean it's either that or reserve a unicode block like category theory is doing with arrows</p>



<a name="213118582"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.21.0c/near/213118582" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E21.2E0c.html#213118582">(Oct 13 2020 at 07:12)</a>:</h4>
<p>Hmpfz... I'll try to summon the courage for the refactor</p>



<a name="213118614"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.21.0c/near/213118614" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E21.2E0c.html#213118614">(Oct 13 2020 at 07:12)</a>:</h4>
<p><code>᠅</code> MONGOLIAN FOUR DOTS</p>



<a name="213120224"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.21.0c/near/213120224" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E21.2E0c.html#213120224">(Oct 13 2020 at 07:37)</a>:</h4>
<p>For multisets we could also standardize on <code>insert</code>.</p>



<a name="213120289"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.21.0c/near/213120289" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E21.2E0c.html#213120289">(Oct 13 2020 at 07:38)</a>:</h4>
<p>(I don't know if a notation for <code>insert</code> would conflict with the set notation or not.)</p>



<a name="213120318"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.21.0c/near/213120318" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E21.2E0c.html#213120318">(Oct 13 2020 at 07:38)</a>:</h4>
<p>Is the reason there's no <code>has_cons</code> because there's no way to then make <code>::</code> a pattern? Or would overloading still be a problem somehow?</p>



<a name="213125932"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.21.0c/near/213125932" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E21.2E0c.html#213125932">(Oct 13 2020 at 08:42)</a>:</h4>
<p><code>::</code> can be a pattern, no problem.  (Even <code>x + 1</code> is a pattern, even though both <code>+</code> and <code>1</code> are type classes.)</p>



<a name="213129135"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.21.0c/near/213129135" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E21.2E0c.html#213129135">(Oct 13 2020 at 09:15)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> Can you be more specific about why <code>has_cons</code> would break uses of <code>list.cons</code>?</p>



<a name="213129238"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.21.0c/near/213129238" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E21.2E0c.html#213129238">(Oct 13 2020 at 09:16)</a>:</h4>
<p>Just a hunch, because <code>list.cons</code> is so fundamental, it's bound to be syntax matched in several places</p>



<a name="213129969"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.21.0c/near/213129969" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E21.2E0c.html#213129969">(Oct 13 2020 at 09:24)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib/issues/4600">#4600</a> introduces notation for <code>multiset.const</code></p>



<a name="213129992"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.21.0c/near/213129992" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E21.2E0c.html#213129992">(Oct 13 2020 at 09:24)</a>:</h4>
<p>I'd be more worried about type inference breaking in more places, e.g. <code>(x::xs).length</code> might no longer work, etc.</p>



<a name="213130396"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.21.0c/near/213130396" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E21.2E0c.html#213130396">(Oct 13 2020 at 09:29)</a>:</h4>
<p>On the other hand, this could also open some wonderful new possibilities.  If we additionally make a type class for <code>nil</code>, then the following could work:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="o">([</span><span class="mi">1</span><span class="o">,</span><span class="mi">2</span><span class="o">,</span><span class="mi">3</span><span class="o">]</span> <span class="o">:</span> <span class="n">list</span> <span class="n">ℕ</span><span class="o">)</span>
<span class="o">([</span><span class="mi">1</span><span class="o">,</span><span class="mi">2</span><span class="o">,</span><span class="mi">3</span><span class="o">]</span> <span class="o">:</span> <span class="n">vector</span> <span class="n">ℕ</span> <span class="mi">3</span><span class="o">)</span>
<span class="o">([</span><span class="mi">1</span><span class="o">,</span><span class="mi">2</span><span class="o">,</span><span class="mi">3</span><span class="o">]</span> <span class="o">:</span> <span class="n">finvec</span> <span class="n">ℕ</span> <span class="mi">3</span><span class="o">)</span>
<span class="o">([</span><span class="mi">1</span><span class="o">,</span><span class="mi">2</span><span class="o">,</span><span class="mi">3</span><span class="o">]</span> <span class="o">:</span> <span class="n">multiset</span> <span class="n">ℕ</span><span class="o">)</span>
</code></pre></div>



<a name="213130799"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.21.0c/near/213130799" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E21.2E0c.html#213130799">(Oct 13 2020 at 09:33)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="o">([</span><span class="sc">'a'</span><span class="o">,</span> <span class="sc">'b'</span><span class="o">,</span> <span class="sc">'c'</span><span class="o">]</span> <span class="o">:</span> <span class="n">string</span><span class="o">)</span>
<span class="o">([</span><span class="mi">1</span><span class="o">,</span><span class="mi">2</span><span class="o">,</span><span class="mi">3</span><span class="o">]</span> <span class="o">:</span> <span class="n">buffer</span> <span class="n">ℕ</span><span class="o">)</span>
</code></pre></div>



<a name="213130811"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.21.0c/near/213130811" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E21.2E0c.html#213130811">(Oct 13 2020 at 09:33)</a>:</h4>
<p>I am not qualified to weigh the pros and cons</p>



<a name="213131090"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.21.0c/near/213131090" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E21.2E0c.html#213131090">(Oct 13 2020 at 09:36)</a>:</h4>
<p>Another con (that we already have for <code>ℕ</code>):</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">example</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">++</span> <span class="o">[]</span> <span class="bp">=</span> <span class="n">x</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">induction</span> <span class="n">x</span><span class="o">,</span>
  <span class="n">refl</span><span class="o">,</span>
  <span class="c1">-- ⊢list.cons x_hd x_tl ++ [] = list.cons x_hd x_tl</span>
  <span class="c1">-- :-(</span>
<span class="kd">end</span>
</code></pre></div>



<a name="213132293"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.21.0c/near/213132293" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E21.2E0c.html#213132293">(Oct 13 2020 at 09:49)</a>:</h4>
<p>I guess reverting the <code>::\_m</code> notation for multiset will be rather easy. You can just global search replace. So, does it make sense to merge <a href="https://github.com/leanprover-community/mathlib/issues/4600">#4600</a> for now, and maybe revert it when the experimens with <code>has_cons</code> are positive?</p>



<a name="213132559"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.21.0c/near/213132559" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E21.2E0c.html#213132559">(Oct 13 2020 at 09:52)</a>:</h4>
<p>I like <a href="https://github.com/leanprover-community/mathlib/issues/4600">#4600</a>.  The cons/nil type classes are more risky and definitely more work, it doesn't make sense to block <a href="https://github.com/leanprover-community/mathlib/issues/4600">#4600</a> on it.</p>



<a name="213146869"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.21.0c/near/213146869" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E21.2E0c.html#213146869">(Oct 13 2020 at 12:36)</a>:</h4>
<p>I've fixed the whitespace around the notation</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>