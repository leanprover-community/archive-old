---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/list.2Eprod.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/list.2Eprod.html">list.prod</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="128334739"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/list.prod/near/128334739" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/list.2Eprod.html#128334739">(Jun 19 2018 at 23:30)</a>:</h4>
<p>Was there any point in time where <code>list.prod [t]</code> was definitionally equivalent to <code>t * 1</code>?</p>



<a name="128335761"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/list.prod/near/128335761" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/list.2Eprod.html#128335761">(Jun 19 2018 at 23:57)</a>:</h4>
<p>and was there any point in time where <code>list.prod (x :: L) = x * list.prod L</code> was <code>rfl</code>?</p>



<a name="128335831"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/list.prod/near/128335831" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Simon Hudon <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/list.2Eprod.html#128335831">(Jun 19 2018 at 23:59)</a>:</h4>
<p>I think not. The foldl implementation is faster and Leo has been pretty aggressive with optimization from the start</p>



<a name="128335838"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/list.prod/near/128335838" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/list.2Eprod.html#128335838">(Jun 19 2018 at 23:59)</a>:</h4>
<p>interesting. my category repo seems to answer yes to my questions</p>



<a name="128335887"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/list.prod/near/128335887" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/list.2Eprod.html#128335887">(Jun 20 2018 at 00:00)</a>:</h4>
<p>i.e. a code worked some time ago, and now it doesn't</p>



<a name="128335915"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/list.prod/near/128335915" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Simon Hudon <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/list.2Eprod.html#128335915">(Jun 20 2018 at 00:00)</a>:</h4>
<p>You can have an even clearer answer and use <code>git blame</code> on the definition of <code>list.product</code></p>



<a name="128335924"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/list.prod/near/128335924" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/list.2Eprod.html#128335924">(Jun 20 2018 at 00:01)</a>:</h4>
<p>how do I do that?</p>



<a name="128335941"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/list.prod/near/128335941" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Simon Hudon <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/list.2Eprod.html#128335941">(Jun 20 2018 at 00:01)</a>:</h4>
<p>Do you use emacs and magit?</p>



<a name="128335996"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/list.prod/near/128335996" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/list.2Eprod.html#128335996">(Jun 20 2018 at 00:02)</a>:</h4>
<p>eh... not really</p>



<a name="128336002"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/list.prod/near/128336002" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Simon Hudon <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/list.2Eprod.html#128336002">(Jun 20 2018 at 00:02)</a>:</h4>
<p>You can get the instructions on using <code>git blame</code> by typing <code>man git-blame</code> in a terminal</p>



<a name="128347985"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/list.prod/near/128347985" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/list.2Eprod.html#128347985">(Jun 20 2018 at 06:31)</a>:</h4>
<p>Alternatively, you go to GitHub, and lookup the relevant line: <a href="https://github.com/leanprover/mathlib/blob/e1f795d0d929fa6b5458a04bd6bb5889e503b0bf/data/list/basic.lean#L1054" target="_blank" title="https://github.com/leanprover/mathlib/blob/e1f795d0d929fa6b5458a04bd6bb5889e503b0bf/data/list/basic.lean#L1054">https://github.com/leanprover/mathlib/blob/e1f795d0d929fa6b5458a04bd6bb5889e503b0bf/data/list/basic.lean#L1054</a><br>
Then you click on the <code>...</code> to the left of that line, and choose <code>git blame</code>. That gives you <a href="https://github.com/leanprover/mathlib/blob/e1f795d0d929fa6b5458a04bd6bb5889e503b0bf/data/list/basic.lean#L1054" target="_blank" title="https://github.com/leanprover/mathlib/blob/e1f795d0d929fa6b5458a04bd6bb5889e503b0bf/data/list/basic.lean#L1054">https://github.com/leanprover/mathlib/blob/e1f795d0d929fa6b5458a04bd6bb5889e503b0bf/data/list/basic.lean#L1054</a></p>



<a name="128348026"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/list.prod/near/128348026" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/list.2Eprod.html#128348026">(Jun 20 2018 at 06:32)</a>:</h4>
<p>But I don't see an easy option to walk through the history of that line. On the command line you <em>can</em> do that, with <code>git log</code> and some options. See also <a href="https://flummox-engineering.blogspot.com/2016/05/view-specific-lines-of-source-code-in-git-history.html" target="_blank" title="https://flummox-engineering.blogspot.com/2016/05/view-specific-lines-of-source-code-in-git-history.html">https://flummox-engineering.blogspot.com/2016/05/view-specific-lines-of-source-code-in-git-history.html</a></p>



<a name="128362377"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/list.prod/near/128362377" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johannes HÃ¶lzl <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/list.2Eprod.html#128362377">(Jun 20 2018 at 13:24)</a>:</h4>
<p>I traced it back, it was always <code>foldl</code>. I ported the definition from Lean2's library. I think we should change it to <code>foldr</code> then we get the expected equalities.</p>



<a name="128362751"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/list.prod/near/128362751" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Simon Hudon <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/list.2Eprod.html#128362751">(Jun 20 2018 at 13:35)</a>:</h4>
<p>Is there a way to use <code>foldr</code> as the definition but run <code>foldl</code> implementation in the VM?</p>



<a name="128362770"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/list.prod/near/128362770" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/list.2Eprod.html#128362770">(Jun 20 2018 at 13:35)</a>:</h4>
<p>If you want to patch Lean, then yes.</p>



<a name="128362903"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/list.prod/near/128362903" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Simon Hudon <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/list.2Eprod.html#128362903">(Jun 20 2018 at 13:38)</a>:</h4>
<p>That sounds less trivial than the "yes" suggests <span class="emoji emoji-1f61d" title="stuck out tongue closed eyes">:stuck_out_tongue_closed_eyes:</span></p>



<a name="128364747"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/list.prod/near/128364747" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/list.2Eprod.html#128364747">(Jun 20 2018 at 14:18)</a>:</h4>
<p><code>{-# RULES #-}</code>with a proof obligation would be neat...</p>



<a name="128364931"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/list.prod/near/128364931" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Simon Hudon <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/list.2Eprod.html#128364931">(Jun 20 2018 at 14:22)</a>:</h4>
<p>you could probably write it <code>@[rule]</code> before a lemma</p>



<a name="128368155"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/list.prod/near/128368155" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Hughes <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/list.2Eprod.html#128368155">(Jun 20 2018 at 15:34)</a>:</h4>
<blockquote>
<p>and was there any point in time where <code>list.prod (x :: L) = x * list.prod L</code> was <code>rfl</code>?</p>
</blockquote>
<p>I don't think it was even equal to that with non commutative multiplication, <code>list.prod (x :: L) = list.prod L * x</code>at the moment.</p>



<a name="264384007"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/list.prod/near/264384007" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/list.2Eprod.html#264384007">(Dec 09 2021 at 23:47)</a>:</h4>
<p>I found myself wanting the foldr definition for <a href="https://github.com/leanprover-community/mathlib/issues/10674">#10674</a>, as there the definitional equality is important. I ended up having to define a foldr version of sum there for my recursor's type to work</p>



<a name="265148551"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/list.prod/near/265148551" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/list.2Eprod.html#265148551">(Dec 16 2021 at 12:33)</a>:</h4>
<p>(xref <a href="https://github.com/leanprover-community/mathlib/pull/161">#161</a> for reference)</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>