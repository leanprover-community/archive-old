---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/two.20orphaned.20lemmas.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/two.20orphaned.20lemmas.html">two orphaned lemmas</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="204541914"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/two%20orphaned%20lemmas/near/204541914" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/two.20orphaned.20lemmas.html#204541914">(Jul 21 2020 at 12:41)</a>:</h4>
<p>I'm trying to slice up <code>algebra.big_operators</code> into small files, both because it was getting quite jumbled, and also because every time I look at the output of <code>leanproject import-graph --to X</code> there's an unpleasant knot at <code>algebra.big_operators</code>. :-)</p>



<a name="204541995"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/two%20orphaned%20lemmas/near/204541995" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/two.20orphaned.20lemmas.html#204541995">(Jul 21 2020 at 12:42)</a>:</h4>
<p>This has mostly gone well, but I've been left with two lemmas, neither of which get used anywhere in mathlib, and neither of which has a natural home anymore.</p>



<a name="204542026"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/two%20orphaned%20lemmas/near/204542026" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/two.20orphaned.20lemmas.html#204542026">(Jul 21 2020 at 12:42)</a>:</h4>
<div class="codehilite"><pre><span></span><code><span class="kn">protected</span> <span class="kn">lemma</span> <span class="n">sum_nat_coe_enat</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">finset</span> <span class="n">α</span><span class="o">)</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:</span>
  <span class="o">(</span><span class="err">∑</span> <span class="n">x</span> <span class="k">in</span> <span class="n">s</span><span class="o">,</span> <span class="o">(</span><span class="n">f</span> <span class="n">x</span> <span class="o">:</span> <span class="n">enat</span><span class="o">))</span> <span class="bp">=</span> <span class="o">(</span><span class="err">∑</span> <span class="n">x</span>  <span class="k">in</span> <span class="n">s</span><span class="o">,</span> <span class="n">f</span> <span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">classical</span><span class="o">,</span>
  <span class="n">induction</span> <span class="n">s</span> <span class="kn">using</span> <span class="n">finset</span><span class="bp">.</span><span class="n">induction</span> <span class="k">with</span> <span class="n">a</span> <span class="n">s</span> <span class="n">has</span> <span class="n">ih</span> <span class="n">h</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">simp</span> <span class="o">},</span>
  <span class="o">{</span> <span class="n">simp</span> <span class="o">[</span><span class="n">has</span><span class="o">,</span> <span class="n">ih</span><span class="o">]</span> <span class="o">}</span>
<span class="kn">end</span>
</code></pre></div>



<a name="204542041"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/two%20orphaned%20lemmas/near/204542041" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/two.20orphaned.20lemmas.html#204542041">(Jul 21 2020 at 12:42)</a>:</h4>
<div class="codehilite"><pre><span></span><code><span class="c">/-</span><span class="cm">- A product over all subsets of `s ∪ {x}` is obtained by multiplying the product over all subsets</span>
<span class="cm">of `s`, and over all subsets of `s` to which one adds `x`. -/</span>
<span class="bp">@</span><span class="o">[</span><span class="n">to_additive</span><span class="o">]</span>
<span class="kn">lemma</span> <span class="n">prod_powerset_insert</span> <span class="o">[</span><span class="n">decidable_eq</span> <span class="n">α</span><span class="o">]</span> <span class="o">[</span><span class="n">comm_monoid</span> <span class="n">β</span><span class="o">]</span> <span class="o">{</span><span class="n">s</span> <span class="o">:</span> <span class="n">finset</span> <span class="n">α</span><span class="o">}</span> <span class="o">{</span><span class="n">x</span> <span class="o">:</span> <span class="n">α</span><span class="o">}</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">x</span> <span class="err">∉</span> <span class="n">s</span><span class="o">)</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">finset</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">β</span><span class="o">)</span> <span class="o">:</span>
  <span class="o">(</span><span class="err">∏</span> <span class="n">a</span> <span class="k">in</span> <span class="o">(</span><span class="n">insert</span> <span class="n">x</span> <span class="n">s</span><span class="o">)</span><span class="bp">.</span><span class="n">powerset</span><span class="o">,</span> <span class="n">f</span> <span class="n">a</span><span class="o">)</span> <span class="bp">=</span>
    <span class="o">(</span><span class="err">∏</span> <span class="n">a</span> <span class="k">in</span> <span class="n">s</span><span class="bp">.</span><span class="n">powerset</span><span class="o">,</span> <span class="n">f</span> <span class="n">a</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="err">∏</span> <span class="n">t</span> <span class="k">in</span> <span class="n">s</span><span class="bp">.</span><span class="n">powerset</span><span class="o">,</span> <span class="n">f</span> <span class="o">(</span><span class="n">insert</span> <span class="n">x</span> <span class="n">t</span><span class="o">))</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">powerset_insert</span><span class="o">,</span> <span class="n">finset</span><span class="bp">.</span><span class="n">prod_union</span><span class="o">,</span> <span class="n">finset</span><span class="bp">.</span><span class="n">prod_image</span><span class="o">],</span>
  <span class="o">{</span> <span class="k">assume</span> <span class="n">t₁</span> <span class="n">h₁</span> <span class="n">t₂</span> <span class="n">h₂</span> <span class="n">heq</span><span class="o">,</span>
    <span class="n">rw</span> <span class="o">[</span><span class="err">←</span> <span class="n">finset</span><span class="bp">.</span><span class="n">erase_insert</span> <span class="o">(</span><span class="n">not_mem_of_mem_powerset_of_not_mem</span> <span class="n">h₁</span> <span class="n">h</span><span class="o">),</span>
        <span class="err">←</span> <span class="n">finset</span><span class="bp">.</span><span class="n">erase_insert</span> <span class="o">(</span><span class="n">not_mem_of_mem_powerset_of_not_mem</span> <span class="n">h₂</span> <span class="n">h</span><span class="o">),</span> <span class="n">heq</span><span class="o">]</span> <span class="o">},</span>
  <span class="o">{</span> <span class="n">rw</span> <span class="n">finset</span><span class="bp">.</span><span class="n">disjoint_iff_ne</span><span class="o">,</span>
    <span class="k">assume</span> <span class="n">t₁</span> <span class="n">h₁</span> <span class="n">t₂</span> <span class="n">h₂</span><span class="o">,</span>
    <span class="n">rcases</span> <span class="n">finset</span><span class="bp">.</span><span class="n">mem_image</span><span class="bp">.</span><span class="mi">1</span> <span class="n">h₂</span> <span class="k">with</span> <span class="bp">⟨</span><span class="n">t₃</span><span class="o">,</span> <span class="n">h₃</span><span class="o">,</span> <span class="n">H₃₂</span><span class="bp">⟩</span><span class="o">,</span>
    <span class="n">rw</span> <span class="err">←</span> <span class="n">H₃₂</span><span class="o">,</span>
    <span class="n">exact</span> <span class="n">ne_insert_of_not_mem</span> <span class="bp">_</span> <span class="bp">_</span> <span class="o">(</span><span class="n">not_mem_of_mem_powerset_of_not_mem</span> <span class="n">h₁</span> <span class="n">h</span><span class="o">)</span> <span class="o">}</span>
<span class="kn">end</span>
</code></pre></div>



<a name="204542061"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/two%20orphaned%20lemmas/near/204542061" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/two.20orphaned.20lemmas.html#204542061">(Jul 21 2020 at 12:42)</a>:</h4>
<p>Please use suitable emojis to indicate their preferred fate. :-)</p>



<a name="204542080"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/two%20orphaned%20lemmas/near/204542080" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/two.20orphaned.20lemmas.html#204542080">(Jul 21 2020 at 12:42)</a>:</h4>
<p>More seriously, suggestions where to put them welcome.</p>



<a name="204542145"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/two%20orphaned%20lemmas/near/204542145" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/two.20orphaned.20lemmas.html#204542145">(Jul 21 2020 at 12:43)</a>:</h4>
<p>Put them in <code>algebra.big_operators.orphans</code>?</p>



<a name="204542156"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/two%20orphaned%20lemmas/near/204542156" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/two.20orphaned.20lemmas.html#204542156">(Jul 21 2020 at 12:43)</a>:</h4>
<p>They're currently in <code>algebra.big_operators.others</code> :-)</p>



<a name="204543613"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/two%20orphaned%20lemmas/near/204543613" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/two.20orphaned.20lemmas.html#204543613">(Jul 21 2020 at 12:58)</a>:</h4>
<p><code>sum_nat_coe_enat</code> is just a case of <code>sum_hom</code>, right? Then we can just delete it.</p>



<a name="204543685"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/two%20orphaned%20lemmas/near/204543685" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/two.20orphaned.20lemmas.html#204543685">(Jul 21 2020 at 12:58)</a>:</h4>
<p>Alas, <code>enat</code> is not an <code>add_monoid</code></p>



<a name="204543798"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/two%20orphaned%20lemmas/near/204543798" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/two.20orphaned.20lemmas.html#204543798">(Jul 21 2020 at 12:59)</a>:</h4>
<p>Why not?</p>



<a name="204543833"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/two%20orphaned%20lemmas/near/204543833" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/two.20orphaned.20lemmas.html#204543833">(Jul 21 2020 at 12:59)</a>:</h4>
<p>Ooh, is it?</p>



<a name="204543863"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/two%20orphaned%20lemmas/near/204543863" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/two.20orphaned.20lemmas.html#204543863">(Jul 21 2020 at 12:59)</a>:</h4>
<p>It's not cancellative</p>



<a name="204543869"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/two%20orphaned%20lemmas/near/204543869" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/two.20orphaned.20lemmas.html#204543869">(Jul 21 2020 at 13:00)</a>:</h4>
<p>Aah, it's multiplication that is an issue</p>



<a name="204543910"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/two%20orphaned%20lemmas/near/204543910" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/two.20orphaned.20lemmas.html#204543910">(Jul 21 2020 at 13:00)</a>:</h4>
<p>There is even an <code>instance : add_comm_monoid enat</code></p>



<a name="204543914"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/two%20orphaned%20lemmas/near/204543914" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/two.20orphaned.20lemmas.html#204543914">(Jul 21 2020 at 13:00)</a>:</h4>
<p>Right</p>



<a name="204543955"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/two%20orphaned%20lemmas/near/204543955" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/two.20orphaned.20lemmas.html#204543955">(Jul 21 2020 at 13:00)</a>:</h4>
<p>/me should think before talking</p>



<a name="204543998"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/two%20orphaned%20lemmas/near/204543998" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/two.20orphaned.20lemmas.html#204543998">(Jul 21 2020 at 13:00)</a>:</h4>
<p><span class="user-mention" data-user-id="110087">@Scott Morrison</span> That signs its fate, I think (and mine??? <span aria-label="worried" class="emoji emoji-1f61f" role="img" title="worried">:worried:</span> )</p>



<a name="204544414"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/two%20orphaned%20lemmas/near/204544414" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/two.20orphaned.20lemmas.html#204544414">(Jul 21 2020 at 13:04)</a>:</h4>
<p>Great. I might go look at the git blame to see who wanted the other lemma.</p>



<a name="204544462"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/two%20orphaned%20lemmas/near/204544462" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/two.20orphaned.20lemmas.html#204544462">(Jul 21 2020 at 13:04)</a>:</h4>
<p>(Now that I've said that, it's going to be me, and I'll feel weirdly awkward for having no memory of it.)</p>



<a name="204544678"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/two%20orphaned%20lemmas/near/204544678" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/two.20orphaned.20lemmas.html#204544678">(Jul 21 2020 at 13:06)</a>:</h4>
<p>Two days ago I asked someone if some fact about digits was in mathlib and they replied "you PRed it last week"</p>



<a name="204544698"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/two%20orphaned%20lemmas/near/204544698" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/two.20orphaned.20lemmas.html#204544698">(Jul 21 2020 at 13:06)</a>:</h4>
<p>Sebastien introduced into back in <a href="https://github.com/leanprover-community/mathlib/issues/1908">#1908</a>, but didn't use it in that PR.</p>



<a name="204544768"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/two%20orphaned%20lemmas/near/204544768" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/two.20orphaned.20lemmas.html#204544768">(Jul 21 2020 at 13:07)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110038">Kevin Buzzard</span> <a href="#narrow/stream/113488-general/topic/two.20orphaned.20lemmas/near/204544678">said</a>:</p>
<blockquote>
<p>Two days ago I asked someone if some fact about digits was in mathlib and they replied "you PRed it last week"</p>
</blockquote>
<p><a href="https://mathoverflow.net/questions/23989/are-the-norms-of-graphs-dense-in-any-interval#comment50174_23993">https://mathoverflow.net/questions/23989/are-the-norms-of-graphs-dense-in-any-interval#comment50174_23993</a></p>



<a name="204544989"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/two%20orphaned%20lemmas/near/204544989" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/two.20orphaned.20lemmas.html#204544989">(Jul 21 2020 at 13:09)</a>:</h4>
<p>Ah, I'm making false accusations against Sebastien. He used the additive version.</p>



<a name="204545115"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/two%20orphaned%20lemmas/near/204545115" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/two.20orphaned.20lemmas.html#204545115">(Jul 21 2020 at 13:10)</a>:</h4>
<p>And I'm wrong that it's orphaned, oops!</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>