---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/function.20with.20random.20definition.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/function.20with.20random.20definition.html">function with random definition</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="179703264"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20with%20random%20definition/near/179703264" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/function.20with.20random.20definition.html#179703264">(Nov 02 2019 at 13:51)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">tactic</span><span class="bp">.</span><span class="n">tauto</span>

<span class="c">/-</span><span class="cm"></span>
<span class="cm">    f</span>
<span class="cm">  A → B</span>
<span class="cm">g ↓   ↓ h</span>
<span class="cm">  C → D</span>
<span class="cm">    j</span>
<span class="cm">-/</span>


<span class="n">def</span> <span class="n">random</span> <span class="o">{</span><span class="n">A</span> <span class="n">B</span> <span class="n">C</span> <span class="n">D</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">}</span>
<span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">A</span> <span class="bp">→</span> <span class="n">B</span><span class="o">)</span>
<span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="n">A</span> <span class="bp">→</span> <span class="n">C</span><span class="o">)</span>
<span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">B</span> <span class="bp">→</span> <span class="n">D</span><span class="o">)</span>
<span class="o">(</span><span class="n">j</span> <span class="o">:</span> <span class="n">C</span> <span class="bp">→</span> <span class="n">D</span><span class="o">)</span>
  <span class="o">:</span> <span class="n">A</span> <span class="bp">→</span> <span class="n">D</span> <span class="o">:=</span>
<span class="k">by</span> <span class="n">tauto</span> <span class="c1">-- !</span>

<span class="c">/-</span><span class="cm"></span>
<span class="cm">Solve the maze!</span>

<span class="cm">(start here) -&gt; [add two] -&gt; (could go this way)</span>
<span class="cm">    ↓                                ↓</span>
<span class="cm">(or this way) -&gt; [add one] -&gt; (get to here)</span>
<span class="cm">-/</span>

<span class="bp">#</span><span class="kn">eval</span> <span class="n">random</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">x</span><span class="o">,</span> <span class="n">x</span> <span class="bp">+</span> <span class="mi">2</span><span class="o">)</span> <span class="n">id</span> <span class="n">id</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">x</span><span class="o">,</span> <span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="mi">0</span> <span class="c1">-- random{1,2}</span>
</pre></div>



<a name="179703321"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20with%20random%20definition/near/179703321" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/function.20with.20random.20definition.html#179703321">(Nov 02 2019 at 13:52)</a>:</h4>
<p>it commutes!</p>



<a name="179703324"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20with%20random%20definition/near/179703324" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/function.20with.20random.20definition.html#179703324">(Nov 02 2019 at 13:52)</a>:</h4>
<p>It shouldn't do -- did I make an error?</p>



<a name="179703336"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20with%20random%20definition/near/179703336" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/function.20with.20random.20definition.html#179703336">(Nov 02 2019 at 13:53)</a>:</h4>
<p>These are types not props</p>



<a name="179703396"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20with%20random%20definition/near/179703396" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/function.20with.20random.20definition.html#179703396">(Nov 02 2019 at 13:54)</a>:</h4>
<p>my mistake, I thought you used x+1+2 and x+2+1</p>



<a name="179703400"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20with%20random%20definition/near/179703400" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/function.20with.20random.20definition.html#179703400">(Nov 02 2019 at 13:55)</a>:</h4>
<p>rofl I just permuted the inputs and got it to give a different answer :D</p>



<a name="179703416"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20with%20random%20definition/near/179703416" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/function.20with.20random.20definition.html#179703416">(Nov 02 2019 at 13:55)</a>:</h4>
<p>I don't think <code>tauto</code> was designed for diagram chasing</p>



<a name="179703421"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20with%20random%20definition/near/179703421" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/function.20with.20random.20definition.html#179703421">(Nov 02 2019 at 13:55)</a>:</h4>
<p>I was overjoyed when I found that it did it!</p>



<a name="179703426"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20with%20random%20definition/near/179703426" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/function.20with.20random.20definition.html#179703426">(Nov 02 2019 at 13:55)</a>:</h4>
<p>I think <code>solve_by_elim</code> will do though</p>



<a name="179703467"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20with%20random%20definition/near/179703467" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/function.20with.20random.20definition.html#179703467">(Nov 02 2019 at 13:56)</a>:</h4>
<p>I'm making a whole bunch of definitions in tactic mode for the natural number game, and tauto is my big reveal like simp is for proving a+b+c+d+e=e+d+c+b+a</p>



<a name="179703486"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20with%20random%20definition/near/179703486" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/function.20with.20random.20definition.html#179703486">(Nov 02 2019 at 13:57)</a>:</h4>
<p>I am using these ideas to teach mathematicians about intro, apply, have and exact in a context where they are not freaking out about <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>P</mi><mtext>  </mtext><mo>⟹</mo><mtext>  </mtext><mi>Q</mi></mrow><annotation encoding="application/x-tex">P\implies Q</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.70733em;vertical-align:-0.024em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">⟹</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">Q</span></span></span></span> being a function</p>



<a name="179703609"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20with%20random%20definition/near/179703609" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/function.20with.20random.20definition.html#179703609">(Nov 02 2019 at 14:00)</a>:</h4>
<p>We saw Antoine making a classic mathematician's error yesterday -- he had <code>f : X -&gt; Y, A B : X, h : A = B, |- f A = f B</code> and wanted to <code>rw f</code> instead of <code>rw h</code>. We can't tell the difference between = and -&gt; in the sense that we do not look out carefully for it.</p>



<a name="179703636"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20with%20random%20definition/near/179703636" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/function.20with.20random.20definition.html#179703636">(Nov 02 2019 at 14:01)</a>:</h4>
<p><code>rw</code> does something which in the CS world is all very interesting and there's lots of theory and what have you, but to a mathematician a rewrite is an invisible step, because once A=B then A can be replaced by B at any stage in the future, immediately, and without question -- no justification needed.</p>



<a name="179703650"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20with%20random%20definition/near/179703650" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/function.20with.20random.20definition.html#179703650">(Nov 02 2019 at 14:01)</a>:</h4>
<p>so mathematicians know that <code>rw</code> is for something something which isn't really there. And then if P implies Q and we know P then of course we know Q, that argument isn't really there either, it's just obvious from the logic</p>



<a name="179703651"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20with%20random%20definition/near/179703651" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/function.20with.20random.20definition.html#179703651">(Nov 02 2019 at 14:01)</a>:</h4>
<p>not invisible exactly, mathematicians are familiar with equality chains</p>



<a name="179703653"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20with%20random%20definition/near/179703653" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/function.20with.20random.20definition.html#179703653">(Nov 02 2019 at 14:01)</a>:</h4>
<p>so it must be <code>rw</code> as well.</p>



<a name="179703693"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20with%20random%20definition/near/179703693" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/function.20with.20random.20definition.html#179703693">(Nov 02 2019 at 14:02)</a>:</h4>
<p>Yes, and we're familiar with implies chains.</p>



<a name="179703705"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20with%20random%20definition/near/179703705" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/function.20with.20random.20definition.html#179703705">(Nov 02 2019 at 14:02)</a>:</h4>
<p>But when you <em>watch mathematicians doing mathematics</em> they write chains of arguments, and sometimes they're rewriting = and sometimes they're applying P -&gt; Q and both of these (completely different) things are just so completely embedded in a mathematician that they find it hard to tell them apart, they're just both doing something trivial and obvious</p>



<a name="179703767"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20with%20random%20definition/near/179703767" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/function.20with.20random.20definition.html#179703767">(Nov 02 2019 at 14:04)</a>:</h4>
<p>I have this every year with schoolkids, they show up here and I ask them to prove <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msqrt><mn>2</mn></msqrt><mo>+</mo><msqrt><mn>6</mn></msqrt><mo>&lt;</mo><msqrt><mn>15</mn></msqrt></mrow><annotation encoding="application/x-tex">\sqrt{2}+\sqrt{6}&lt;\sqrt{15}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1.04em;vertical-align:-0.13278em;"></span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.90722em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="padding-left:0.833em;"><span class="mord">2</span></span></span><span style="top:-2.86722em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail" style="min-width:0.853em;height:1.08em;"><svg height="1.08em" preserveAspectRatio="xMinYMin slice" viewBox="0 0 400000 1080" width="400em"><path d="M95,702c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5, -10,-9.5,-14c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54c44.2,-33.3,65.8, -50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10s173,378,173,378c0.7,0, 35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429c69,-144,104.5,-217.7,106.5, -221c5.3,-9.3,12,-14,20,-14H400000v40H845.2724s-225.272,467,-225.272,467 s-235,486,-235,486c-2.7,4.7,-9,7,-19,7c-6,0,-10,-1,-12,-3s-194,-422,-194,-422 s-65,47,-65,47z M834 80H400000v40H845z"></path></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.13278em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.04em;vertical-align:-0.13278em;"></span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.90722em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="padding-left:0.833em;"><span class="mord">6</span></span></span><span style="top:-2.86722em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail" style="min-width:0.853em;height:1.08em;"><svg height="1.08em" preserveAspectRatio="xMinYMin slice" viewBox="0 0 400000 1080" width="400em"><path d="M95,702c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5, -10,-9.5,-14c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54c44.2,-33.3,65.8, -50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10s173,378,173,378c0.7,0, 35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429c69,-144,104.5,-217.7,106.5, -221c5.3,-9.3,12,-14,20,-14H400000v40H845.2724s-225.272,467,-225.272,467 s-235,486,-235,486c-2.7,4.7,-9,7,-19,7c-6,0,-10,-1,-12,-3s-194,-422,-194,-422 s-65,47,-65,47z M834 80H400000v40H845z"></path></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.13278em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.04em;vertical-align:-0.13278em;"></span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.90722em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="padding-left:0.833em;"><span class="mord">1</span><span class="mord">5</span></span></span><span style="top:-2.86722em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail" style="min-width:0.853em;height:1.08em;"><svg height="1.08em" preserveAspectRatio="xMinYMin slice" viewBox="0 0 400000 1080" width="400em"><path d="M95,702c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5, -10,-9.5,-14c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54c44.2,-33.3,65.8, -50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10s173,378,173,378c0.7,0, 35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429c69,-144,104.5,-217.7,106.5, -221c5.3,-9.3,12,-14,20,-14H400000v40H845.2724s-225.272,467,-225.272,467 s-235,486,-235,486c-2.7,4.7,-9,7,-19,7c-6,0,-10,-1,-12,-3s-194,-422,-194,-422 s-65,47,-65,47z M834 80H400000v40H845z"></path></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.13278em;"><span></span></span></span></span></span></span></span></span> and they just square both sides, press on, end up deducing 48&lt;49, say this is true so they're done, and <em>they don't even write the connector from each line to the next</em>. They are not trained to do this at school.</p>



<a name="179703784"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20with%20random%20definition/near/179703784" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/function.20with.20random.20definition.html#179703784">(Nov 02 2019 at 14:05)</a>:</h4>
<p>At school, they are given an equation and told to prove another equation, and they do it using three rewrites, each of which generates a new equation, and I've looked at the mark sheets for these things because my sons have been doing them and the mark scheme is "one point for each of the intermediate equations". No mention at all of the underlying logic.</p>



<a name="179703837"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20with%20random%20definition/near/179703837" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/function.20with.20random.20definition.html#179703837">(Nov 02 2019 at 14:06)</a>:</h4>
<p>And similarly they might be asked to prove P -&gt; Q and they prove P -&gt; A -&gt; B -&gt; C -&gt; Q and they get one point for each of A, B, C so *they just write "P, A, B, C, Q, done" and get full marks</p>



<a name="179703845"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20with%20random%20definition/near/179703845" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/function.20with.20random.20definition.html#179703845">(Nov 02 2019 at 14:06)</a>:</h4>
<p>and then they show up at Imperial with top marks for their school exams and they don't know the difference between P -&gt; Q and P = Q.</p>



<a name="179716621"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20with%20random%20definition/near/179716621" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/function.20with.20random.20definition.html#179716621">(Nov 02 2019 at 20:06)</a>:</h4>
<blockquote>
<p>I think <code>solve_by_elim</code> will do though</p>
</blockquote>
<p>OK so I can't get anything to work for this one:</p>
<div class="codehilite"><pre><span></span><span class="kn">example</span> <span class="o">(</span><span class="n">A</span> <span class="n">B</span> <span class="n">C</span> <span class="n">D</span> <span class="n">E</span> <span class="n">F</span> <span class="n">G</span> <span class="n">H</span> <span class="n">I</span> <span class="n">J</span> <span class="n">K</span> <span class="n">L</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span>
<span class="o">(</span><span class="n">f1</span> <span class="o">:</span> <span class="n">A</span> <span class="bp">→</span> <span class="n">B</span><span class="o">)</span> <span class="o">(</span><span class="n">f2</span> <span class="o">:</span> <span class="n">B</span> <span class="bp">→</span> <span class="n">E</span><span class="o">)</span> <span class="o">(</span><span class="n">f3</span> <span class="o">:</span> <span class="n">E</span> <span class="bp">→</span> <span class="n">D</span><span class="o">)</span> <span class="o">(</span><span class="n">f4</span> <span class="o">:</span> <span class="n">D</span> <span class="bp">→</span> <span class="n">A</span><span class="o">)</span> <span class="o">(</span><span class="n">f5</span> <span class="o">:</span> <span class="n">E</span> <span class="bp">→</span> <span class="n">F</span><span class="o">)</span>
<span class="o">(</span><span class="n">f6</span> <span class="o">:</span> <span class="n">F</span> <span class="bp">→</span> <span class="n">C</span><span class="o">)</span> <span class="o">(</span><span class="n">f7</span> <span class="o">:</span> <span class="n">B</span> <span class="bp">→</span> <span class="n">C</span><span class="o">)</span> <span class="o">(</span><span class="n">f8</span> <span class="o">:</span> <span class="n">F</span> <span class="bp">→</span> <span class="n">G</span><span class="o">)</span> <span class="o">(</span><span class="n">f9</span> <span class="o">:</span> <span class="n">G</span> <span class="bp">→</span> <span class="n">J</span><span class="o">)</span> <span class="o">(</span><span class="n">f10</span> <span class="o">:</span> <span class="n">I</span> <span class="bp">→</span> <span class="n">J</span><span class="o">)</span>
<span class="o">(</span><span class="n">f11</span> <span class="o">:</span> <span class="n">J</span> <span class="bp">→</span> <span class="n">I</span><span class="o">)</span> <span class="o">(</span><span class="n">f12</span> <span class="o">:</span> <span class="n">I</span> <span class="bp">→</span> <span class="n">H</span><span class="o">)</span> <span class="o">(</span><span class="n">f13</span> <span class="o">:</span> <span class="n">E</span> <span class="bp">→</span> <span class="n">H</span><span class="o">)</span> <span class="o">(</span><span class="n">f14</span> <span class="o">:</span> <span class="n">H</span> <span class="bp">→</span> <span class="n">K</span><span class="o">)</span> <span class="o">(</span><span class="n">f15</span> <span class="o">:</span> <span class="n">I</span> <span class="bp">→</span> <span class="n">L</span><span class="o">)</span>
 <span class="o">:</span> <span class="n">A</span> <span class="bp">→</span> <span class="n">L</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">intro</span> <span class="n">a</span><span class="o">,</span> <span class="n">apply</span> <span class="n">f15</span><span class="o">,</span> <span class="n">apply</span> <span class="n">f11</span><span class="o">,</span> <span class="n">apply</span> <span class="n">f9</span><span class="o">,</span> <span class="n">apply</span> <span class="n">f8</span><span class="o">,</span> <span class="n">apply</span> <span class="n">f5</span><span class="o">,</span> <span class="n">apply</span> <span class="n">f2</span><span class="o">,</span> <span class="n">apply</span> <span class="n">f1</span><span class="o">,</span> <span class="n">assumption</span><span class="o">,</span>
<span class="kn">end</span>
</pre></div>


<p>Is there one tactic which solves this example? I'm happy to put move everything before or after the colon if it helps. I couldn't get either <code>tauto</code> or <code>solve_by_elim</code> to work. Note: they are types not props.</p>



<a name="179716640"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20with%20random%20definition/near/179716640" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/function.20with.20random.20definition.html#179716640">(Nov 02 2019 at 20:07)</a>:</h4>
<p>It's just a maze. There a some loops (e.g. f1,f2,f3,f4)</p>



<a name="179716720"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20with%20random%20definition/near/179716720" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/function.20with.20random.20definition.html#179716720">(Nov 02 2019 at 20:09)</a>:</h4>
<p>Oh I've just noticed that I can't even solve it if I change them all to Props! <code>tauto!</code> just sits there, <code>tauto</code> fails, <code>solve_by_elim</code> fails :-/</p>



<a name="179717129"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20with%20random%20definition/near/179717129" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/function.20with.20random.20definition.html#179717129">(Nov 02 2019 at 20:19)</a>:</h4>
<p>How about this?</p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">tactic</span><span class="bp">.</span><span class="n">basic</span>

<span class="kn">example</span> <span class="o">(</span><span class="n">A</span> <span class="n">B</span> <span class="n">C</span> <span class="n">D</span> <span class="n">E</span> <span class="n">F</span> <span class="n">G</span> <span class="n">H</span> <span class="n">I</span> <span class="n">J</span> <span class="n">K</span> <span class="n">L</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span>
<span class="o">(</span><span class="n">f1</span> <span class="o">:</span> <span class="n">A</span> <span class="bp">→</span> <span class="n">B</span><span class="o">)</span> <span class="o">(</span><span class="n">f2</span> <span class="o">:</span> <span class="n">B</span> <span class="bp">→</span> <span class="n">E</span><span class="o">)</span> <span class="o">(</span><span class="n">f3</span> <span class="o">:</span> <span class="n">E</span> <span class="bp">→</span> <span class="n">D</span><span class="o">)</span> <span class="o">(</span><span class="n">f4</span> <span class="o">:</span> <span class="n">D</span> <span class="bp">→</span> <span class="n">A</span><span class="o">)</span> <span class="o">(</span><span class="n">f5</span> <span class="o">:</span> <span class="n">E</span> <span class="bp">→</span> <span class="n">F</span><span class="o">)</span>
<span class="o">(</span><span class="n">f6</span> <span class="o">:</span> <span class="n">F</span> <span class="bp">→</span> <span class="n">C</span><span class="o">)</span> <span class="o">(</span><span class="n">f7</span> <span class="o">:</span> <span class="n">B</span> <span class="bp">→</span> <span class="n">C</span><span class="o">)</span> <span class="o">(</span><span class="n">f8</span> <span class="o">:</span> <span class="n">F</span> <span class="bp">→</span> <span class="n">G</span><span class="o">)</span> <span class="o">(</span><span class="n">f9</span> <span class="o">:</span> <span class="n">G</span> <span class="bp">→</span> <span class="n">J</span><span class="o">)</span> <span class="o">(</span><span class="n">f10</span> <span class="o">:</span> <span class="n">I</span> <span class="bp">→</span> <span class="n">J</span><span class="o">)</span>
<span class="o">(</span><span class="n">f11</span> <span class="o">:</span> <span class="n">J</span> <span class="bp">→</span> <span class="n">I</span><span class="o">)</span> <span class="o">(</span><span class="n">f12</span> <span class="o">:</span> <span class="n">I</span> <span class="bp">→</span> <span class="n">H</span><span class="o">)</span> <span class="o">(</span><span class="n">f13</span> <span class="o">:</span> <span class="n">E</span> <span class="bp">→</span> <span class="n">H</span><span class="o">)</span> <span class="o">(</span><span class="n">f14</span> <span class="o">:</span> <span class="n">H</span> <span class="bp">→</span> <span class="n">K</span><span class="o">)</span> <span class="o">(</span><span class="n">f15</span> <span class="o">:</span> <span class="n">I</span> <span class="bp">→</span> <span class="n">L</span><span class="o">)</span>
 <span class="o">:</span> <span class="n">A</span> <span class="bp">→</span> <span class="n">L</span> <span class="o">:=</span>
 <span class="k">begin</span>
  <span class="n">intro</span> <span class="n">a</span><span class="o">,</span>
  <span class="n">repeat</span> <span class="o">{</span><span class="n">assumption</span> <span class="bp">&lt;|&gt;</span> <span class="n">apply_assumption</span><span class="o">},</span>
 <span class="kn">end</span>
</pre></div>



<a name="179717204"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20with%20random%20definition/near/179717204" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/function.20with.20random.20definition.html#179717204">(Nov 02 2019 at 20:21)</a>:</h4>
<p>I am pretty sure that if I permute f1-f15 then you will get lost.</p>



<a name="179717252"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20with%20random%20definition/near/179717252" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/function.20with.20random.20definition.html#179717252">(Nov 02 2019 at 20:22)</a>:</h4>
<p>And if that's not true then I'm pretty sure I could generate a level which was solvable but for which this tactic wouldn't work.</p>



<a name="179717271"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20with%20random%20definition/near/179717271" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/function.20with.20random.20definition.html#179717271">(Nov 02 2019 at 20:23)</a>:</h4>
<p>What do I need? a SAT solver? An SMT solver? I am just indicating how clueless I am here.</p>



<a name="179717277"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20with%20random%20definition/near/179717277" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/function.20with.20random.20definition.html#179717277">(Nov 02 2019 at 20:23)</a>:</h4>
<p>An ATP? How do I solve it in Isabelle?</p>



<a name="179717344"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20with%20random%20definition/near/179717344" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/function.20with.20random.20definition.html#179717344">(Nov 02 2019 at 20:25)</a>:</h4>
<p>Current version of challenge:</p>
<div class="codehilite"><pre><span></span><span class="kn">example</span> <span class="o">(</span><span class="n">A</span> <span class="n">B</span> <span class="n">C</span> <span class="n">D</span> <span class="n">E</span> <span class="n">F</span> <span class="n">G</span> <span class="n">H</span> <span class="n">I</span> <span class="n">J</span> <span class="n">K</span> <span class="n">L</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span>
<span class="o">(</span><span class="n">f_for_Bryan</span> <span class="o">:</span> <span class="n">L</span> <span class="bp">→</span> <span class="n">L</span><span class="o">)</span>
<span class="o">(</span><span class="n">f1</span> <span class="o">:</span> <span class="n">A</span> <span class="bp">→</span> <span class="n">B</span><span class="o">)</span> <span class="o">(</span><span class="n">f2</span> <span class="o">:</span> <span class="n">B</span> <span class="bp">→</span> <span class="n">E</span><span class="o">)</span> <span class="o">(</span><span class="n">f3</span> <span class="o">:</span> <span class="n">E</span> <span class="bp">→</span> <span class="n">D</span><span class="o">)</span> <span class="o">(</span><span class="n">f4</span> <span class="o">:</span> <span class="n">D</span> <span class="bp">→</span> <span class="n">A</span><span class="o">)</span> <span class="o">(</span><span class="n">f5</span> <span class="o">:</span> <span class="n">E</span> <span class="bp">→</span> <span class="n">F</span><span class="o">)</span>
<span class="o">(</span><span class="n">f6</span> <span class="o">:</span> <span class="n">F</span> <span class="bp">→</span> <span class="n">C</span><span class="o">)</span> <span class="o">(</span><span class="n">f7</span> <span class="o">:</span> <span class="n">B</span> <span class="bp">→</span> <span class="n">C</span><span class="o">)</span> <span class="o">(</span><span class="n">f8</span> <span class="o">:</span> <span class="n">F</span> <span class="bp">→</span> <span class="n">G</span><span class="o">)</span> <span class="o">(</span><span class="n">f9</span> <span class="o">:</span> <span class="n">G</span> <span class="bp">→</span> <span class="n">J</span><span class="o">)</span> <span class="o">(</span><span class="n">f10</span> <span class="o">:</span> <span class="n">I</span> <span class="bp">→</span> <span class="n">J</span><span class="o">)</span>
<span class="o">(</span><span class="n">f11</span> <span class="o">:</span> <span class="n">J</span> <span class="bp">→</span> <span class="n">I</span><span class="o">)</span> <span class="o">(</span><span class="n">f12</span> <span class="o">:</span> <span class="n">I</span> <span class="bp">→</span> <span class="n">H</span><span class="o">)</span> <span class="o">(</span><span class="n">f13</span> <span class="o">:</span> <span class="n">E</span> <span class="bp">→</span> <span class="n">H</span><span class="o">)</span> <span class="o">(</span><span class="n">f14</span> <span class="o">:</span> <span class="n">H</span> <span class="bp">→</span> <span class="n">K</span><span class="o">)</span> <span class="o">(</span><span class="n">f15</span> <span class="o">:</span> <span class="n">I</span> <span class="bp">→</span> <span class="n">L</span><span class="o">)</span>
 <span class="o">:</span> <span class="n">A</span> <span class="bp">→</span> <span class="n">L</span> <span class="o">:=</span>
 <span class="k">begin</span>
  <span class="n">intro</span> <span class="n">a</span><span class="o">,</span>
  <span class="n">repeat</span> <span class="o">{</span><span class="n">assumption</span> <span class="bp">&lt;|&gt;</span> <span class="n">apply_assumption</span><span class="o">},</span> <span class="c1">-- hangs forever</span>
 <span class="kn">end</span>
</pre></div>



<a name="179717423"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20with%20random%20definition/near/179717423" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/function.20with.20random.20definition.html#179717423">(Nov 02 2019 at 20:26)</a>:</h4>
<p>I will grudgingly accept  one-tactic answer which works for Props only, and I'm happy with intros or reverts before the tactic.</p>



<a name="179717770"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20with%20random%20definition/near/179717770" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/function.20with.20random.20definition.html#179717770">(Nov 02 2019 at 20:35)</a>:</h4>
<p>Not quite the same thing, but I think <code>tfae</code> is supposed to do something like this to prove <code>iff</code>s. There are <a href="https://github.com/leanprover-community/mathlib/pull/1600/files#diff-c4911975b6c6e4ce5852e1617245aa68R133" target="_blank" title="https://github.com/leanprover-community/mathlib/pull/1600/files#diff-c4911975b6c6e4ce5852e1617245aa68R133">some tests</a> in <span class="user-mention" data-user-id="110026">@Simon Hudon</span>'s PR <a href="https://github.com/leanprover-community/mathlib/issues/1600" target="_blank" title="https://github.com/leanprover-community/mathlib/issues/1600">#1600</a> for <code>tfae</code> which are kind of reminiscent of your examples.</p>
<p>Presumably someone well-versed in the mysteries of meta code could write something like <a href="https://en.wikipedia.org/wiki/Dijkstra%27s_algorithm" target="_blank" title="https://en.wikipedia.org/wiki/Dijkstra%27s_algorithm">Dijkstra's algorithm</a> or some other pathfinding algorithm for these challenges?</p>



<a name="179718166"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20with%20random%20definition/near/179718166" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/function.20with.20random.20definition.html#179718166">(Nov 02 2019 at 20:44)</a>:</h4>
<p><code>cc</code> works for Props. Feature request: make <code>cc</code> work for types :D</p>



<a name="179718403"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20with%20random%20definition/near/179718403" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jesse Michael Han <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/function.20with.20random.20definition.html#179718403">(Nov 02 2019 at 20:49)</a>:</h4>
<p>you could hack it by using <code>cc</code> to find a proof for the <code>nonempty</code> versions of your hypotheses, then fold over the proof to figure out how to produce the required term</p>



<a name="179718723"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20with%20random%20definition/near/179718723" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/function.20with.20random.20definition.html#179718723">(Nov 02 2019 at 20:57)</a>:</h4>
<p>that might be asking a bit much for my users :D They've only just learnt <code>apply</code></p>



<a name="179720159"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20with%20random%20definition/near/179720159" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Antoine Chambert-Loir <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/function.20with.20random.20definition.html#179720159">(Nov 02 2019 at 21:39)</a>:</h4>
<p>What puzzled me (and still puzzles me) in the way tactics are taught in the natural number game is that I did not understand precisely on what expression they act and by what kind of magic they progressively build a term of the correct type.</p>



<a name="179720323"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20with%20random%20definition/near/179720323" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/function.20with.20random.20definition.html#179720323">(Nov 02 2019 at 21:44)</a>:</h4>
<p>I am teaching it in a completely different way to Theorem Proving In Lean, just for an experiment really. Computer scientists are terrified by <code>rw</code> because it is a very complex tactic, replacing entire subterms of a term by other subterms whilst trying to remain consistent and typecheck. On the other hand if a mathematician knows A=B then they can just change every A to a B without even feeling like they are doing anything.</p>



<a name="179720344"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20with%20random%20definition/near/179720344" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/function.20with.20random.20definition.html#179720344">(Nov 02 2019 at 21:45)</a>:</h4>
<p><code>rw</code> always acts on the goal. Should I say this more explicitly? I must say Antoine, your feedback has been invaluable so far, because I know I can trust you as a mathematician, so if you find something difficult I can be confident that you understand the mathematics and the problem is the explanation.</p>



<a name="179721006"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20with%20random%20definition/near/179721006" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/function.20with.20random.20definition.html#179721006">(Nov 02 2019 at 22:06)</a>:</h4>
<blockquote>
<p>I did not understand precisely on what expression [tactics] act and by what kind of magic they progressively build a term of the correct type.</p>
</blockquote>
<p>This is not something I understand too well either, but let me try anyway. Tactics operate on the "tactic state", which includes:<br>
- the "environment" (containing all declarations like <code>def</code> and <code>theorem</code>), <br>
- the "local context" (containing a list of the hypotheses available in the current proof), and <br>
- all current goals. </p>
<p>All this state is wrapped in some functional programming construct called a "monad" (which allows for e.g. backtracking and error-handling) to make it convenient to manipulate via Lean code (tactics are "just" functions involving this "tactic monad"). </p>
<p>For more info, there's <a href="https://github.com/leanprover-community/mathlib/blob/master/docs/extras/tactic_writing.md" target="_blank" title="https://github.com/leanprover-community/mathlib/blob/master/docs/extras/tactic_writing.md">the tactic writing tutorial in the mathlib docs</a> with pointers to some more sources.</p>



<a name="179722798"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20with%20random%20definition/near/179722798" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/function.20with.20random.20definition.html#179722798">(Nov 02 2019 at 23:06)</a>:</h4>
<p>Ha ha so one answer to Antoine's question is that it all works via the magic of category theory</p>



<a name="179723073"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20with%20random%20definition/near/179723073" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> tirima <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/function.20with.20random.20definition.html#179723073">(Nov 02 2019 at 23:16)</a>:</h4>
<p>World 4, level 8 in 25 <code>rw</code> instead of 27:</p>
<div class="codehilite"><pre><span></span><span class="n">rw</span> <span class="n">one_eq_succ_zero</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">pow_succ</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">pow_succ</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">pow_succ</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">pow_succ</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">pow_succ</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">pow_succ</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">pow_zero</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">pow_zero</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">pow_zero</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">one_mul</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">one_mul</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">one_mul</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">mul_add</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">add_mul</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">add_mul</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">mul_comm</span> <span class="n">b</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">add_assoc</span><span class="o">,</span>
<span class="n">rw</span> <span class="err">←</span> <span class="n">add_assoc</span> <span class="o">(</span><span class="n">a</span><span class="bp">*</span><span class="n">b</span><span class="o">),</span>
<span class="n">rw</span> <span class="n">succ_mul</span><span class="o">,</span>
<span class="n">rw</span> <span class="err">←</span><span class="n">one_eq_succ_zero</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">one_mul</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">add_mul</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">add_assoc</span> <span class="o">(</span><span class="n">a</span><span class="bp">*</span><span class="n">a</span><span class="o">),</span>
<span class="n">rw</span> <span class="n">add_comm</span> <span class="o">(</span><span class="n">b</span><span class="bp">*</span><span class="n">b</span><span class="o">),</span>
</pre></div>



<a name="180285359"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20with%20random%20definition/near/180285359" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/function.20with.20random.20definition.html#180285359">(Nov 09 2019 at 00:06)</a>:</h4>
<p>We really need to get <code>rewrite_search</code> into mathlib... :-)</p>



<a name="180300609"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20with%20random%20definition/near/180300609" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/function.20with.20random.20definition.html#180300609">(Nov 09 2019 at 07:15)</a>:</h4>
<p>Isn't this <code>simp</code>?</p>



<a name="180308468"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20with%20random%20definition/near/180308468" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastian Ullrich <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/function.20with.20random.20definition.html#180308468">(Nov 09 2019 at 11:16)</a>:</h4>
<p>Am I doing this right? <a href="/user_uploads/3121/O9r8V7CDCyReiTY5Aia1abij/3fsdr0.jpg" target="_blank" title="3fsdr0.jpg">3fsdr0.jpg</a></p>
<div class="message_inline_image"><a href="/user_uploads/3121/O9r8V7CDCyReiTY5Aia1abij/3fsdr0.jpg" target="_blank" title="3fsdr0.jpg"><img src="/user_uploads/3121/O9r8V7CDCyReiTY5Aia1abij/3fsdr0.jpg"></a></div>



<a name="180308474"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20with%20random%20definition/near/180308474" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastian Ullrich <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/function.20with.20random.20definition.html#180308474">(Nov 09 2019 at 11:17)</a>:</h4>
<p>(No, I don't think I am...)</p>



<a name="180309175"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20with%20random%20definition/near/180309175" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/function.20with.20random.20definition.html#180309175">(Nov 09 2019 at 11:38)</a>:</h4>
<p><code>simp</code> is magic as far as I am concerned. I know that in the case above it's <code>ring</code> I need, but that's because I read the spoiler on Twitter</p>



<a name="180309230"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20with%20random%20definition/near/180309230" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/function.20with.20random.20definition.html#180309230">(Nov 09 2019 at 11:40)</a>:</h4>
<p>I remember Patrick a while ago saying "ha ha I remember the days when I just tried <code>simp</code> on every goal" and I'm like "yeah, that's me now"</p>



<a name="180309234"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20with%20random%20definition/near/180309234" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/function.20with.20random.20definition.html#180309234">(Nov 09 2019 at 11:40)</a>:</h4>
<p>I remember when someone told me that it worked best on equalities. That was a big step forward.</p>



<a name="180316364"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20with%20random%20definition/near/180316364" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/function.20with.20random.20definition.html#180316364">(Nov 09 2019 at 14:55)</a>:</h4>
<p>The first proof I wrote for that one used <code>simp</code>:</p>
<div class="codehilite"><pre><span></span><span class="kn">lemma</span> <span class="n">add_squared</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">mynat</span><span class="o">)</span> <span class="o">:</span>
  <span class="o">(</span><span class="n">a</span> <span class="bp">+</span> <span class="n">b</span><span class="o">)</span> <span class="err">^</span> <span class="o">(</span><span class="n">succ</span><span class="o">(</span><span class="mi">1</span><span class="o">))</span> <span class="bp">=</span>
<span class="n">a</span> <span class="err">^</span> <span class="o">(</span><span class="n">succ</span><span class="o">(</span><span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="n">b</span><span class="err">^</span><span class="o">(</span><span class="n">succ</span><span class="o">(</span><span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="o">(</span><span class="n">succ</span><span class="o">(</span><span class="mi">1</span><span class="o">))</span><span class="bp">*</span><span class="n">a</span><span class="bp">*</span><span class="n">b</span> <span class="o">:=</span>
 <span class="k">begin</span>
  <span class="n">simp</span> <span class="o">[</span><span class="n">pow_succ</span><span class="o">,</span> <span class="n">pow_one</span><span class="o">,</span> <span class="n">mul_add</span><span class="o">,</span> <span class="n">succ_mul</span><span class="o">],</span>
<span class="kn">end</span>
</pre></div>


<p>Then I read the twitter stuff and thought that maybe <code>simp</code> was against the spirit of the question or something so I tried again.</p>
<blockquote>
<p><code>simp</code> is magic as far as I am concerned.</p>
</blockquote>
<p>Didn't you just say "we don't have tactics sophisticated enough to be called black boxes" ? <span aria-label="stuck out tongue wink" class="emoji emoji-1f61c" role="img" title="stuck out tongue wink">:stuck_out_tongue_wink:</span></p>



<a name="180323477"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20with%20random%20definition/near/180323477" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/function.20with.20random.20definition.html#180323477">(Nov 09 2019 at 17:41)</a>:</h4>
<p>Ha ha, you are absolutely right :D I guess I was thinking more about "mathematical" tactics, like <code>ring</code>, <code>linarith</code> and <code>norm_num</code>. Whilst of course I could never have written any of these myself, the <em>mathematical</em> jobs they achieve are exactly the sort of things which mathematicians (e.g. by the time they arrive at my university) are told are "trivial". To put it another way, these complicated tactics fill in gaps which mathematicians are under no obligation to justify on paper: "One readily checks that <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">(</mo><mi>a</mi><mi>X</mi><mo>+</mo><mi>b</mi><mi>Y</mi><mo>+</mo><mi>c</mi><msup><mi>X</mi><mn>2</mn></msup><mo>+</mo><mi>d</mi><msup><mi>Y</mi><mn>3</mn></msup><mo stretchy="false">)</mo><mo>∗</mo><mo stretchy="false">(</mo><mi>e</mi><msup><mi>X</mi><mn>2</mn></msup><mo>+</mo><mi>f</mi><mo>+</mo><mi>g</mi><mi>Y</mi><mo stretchy="false">)</mo><mo>=</mo><mi>a</mi><mi>e</mi><msup><mi>X</mi><mn>3</mn></msup><mo>+</mo><mo>⋯</mo></mrow><annotation encoding="application/x-tex">(aX+bY+cX^2+dY^3)*(eX^2+f+gY)=aeX^3+\cdots</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathdefault">a</span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.77777em;vertical-align:-0.08333em;"></span><span class="mord mathdefault">b</span><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.897438em;vertical-align:-0.08333em;"></span><span class="mord mathdefault">c</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mord mathdefault">d</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathdefault">e</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.897438em;vertical-align:-0.08333em;"></span><span class="mord mathdefault">a</span><span class="mord mathdefault">e</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.31em;vertical-align:0em;"></span><span class="minner">⋯</span></span></span></span>", etc. All of <code>simp</code>, <code>tauto</code>, <code>cc</code>, <code>finish</code>, <code>abel</code>, <code>omega</code> or whatever are black magic in the sense that I don't know the algorithms they're using, all I know is that they sometimes work for me.</p>
<p>I guess this leads to a more general point. Part of the reason I have no idea what <code>cc</code> does is that the documentation, "Tries to prove the main goal using congruence closure", means absolutely nothing to me (and probably to most mathematicians). All the tactics which I do think of as black boxes -- perhaps there should be examples of the kind of question they are expected to solve somewhere? My own personal documentation for <code>simp</code> is "tries to prove X=Y by randomly rewriting results of the form A=B which have been tagged with <code>simp</code>". I have no idea what the strategy is but at least it felt like an insight when I realised that this was what it was doing.</p>



<a name="180326256"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20with%20random%20definition/near/180326256" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/function.20with.20random.20definition.html#180326256">(Nov 09 2019 at 18:53)</a>:</h4>
<p>I do think the question of what counts as "trivial" (and how far we are from being able to do trivial things trivially in Lean+mathlib) is very interesting. But that probably deserves its own topic.</p>
<p>On your second paragraph: the mathlib tactics have pretty good docs all in one place <a href="https://github.com/leanprover-community/mathlib/blob/master/docs/tactics.md" target="_blank" title="https://github.com/leanprover-community/mathlib/blob/master/docs/tactics.md">here</a> (it looks like they mostly have examples, too). We should probably add links to the "extra" doc page you wrote for <a href="https://github.com/leanprover-community/mathlib/blob/master/docs/extras/simp.md" target="_blank" title="https://github.com/leanprover-community/mathlib/blob/master/docs/extras/simp.md"><code>simp</code></a> and the one Patrick wrote for <a href="https://github.com/leanprover-community/mathlib/blob/master/docs/extras/cc.md" target="_blank" title="https://github.com/leanprover-community/mathlib/blob/master/docs/extras/cc.md"><code>cc</code></a>, since those are a bit harder to find.</p>



<a name="201517292"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20with%20random%20definition/near/201517292" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Nish <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/function.20with.20random.20definition.html#201517292">(Jun 21 2020 at 05:06)</a>:</h4>
<p>Improved to 19 (we were supposed to have access to <code>two_eq_succ_one</code>, right?)</p>
<div class="codehilite"><pre><span></span><code><span class="n">rw</span> <span class="n">two_eq_succ_one</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">pow_succ</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">pow_succ</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">pow_succ</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">pow_one</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">pow_one</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">pow_one</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">succ_mul</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">one_mul</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">add_mul</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">add_mul</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">mul_add</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">mul_add</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">mul_comm</span> <span class="n">b</span> <span class="n">a</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">add_assoc</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">add_assoc</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">add_comm</span> <span class="o">(</span><span class="n">a</span> <span class="bp">*</span> <span class="n">b</span><span class="o">)</span> <span class="o">(</span><span class="n">b</span> <span class="bp">*</span> <span class="n">b</span><span class="o">),</span>
<span class="n">rw</span> <span class="err">←</span> <span class="n">add_assoc</span> <span class="o">(</span><span class="n">a</span> <span class="bp">*</span> <span class="n">b</span><span class="o">)</span> <span class="o">(</span><span class="n">b</span> <span class="bp">*</span> <span class="n">b</span><span class="o">)</span> <span class="o">(</span><span class="n">a</span> <span class="bp">*</span> <span class="n">b</span><span class="o">),</span>
<span class="n">rw</span> <span class="n">add_comm</span> <span class="o">(</span><span class="n">a</span> <span class="bp">*</span> <span class="n">b</span><span class="o">)</span> <span class="o">(</span><span class="n">b</span> <span class="bp">*</span> <span class="n">b</span><span class="o">),</span>
<span class="n">rw</span> <span class="n">add_assoc</span> <span class="o">(</span><span class="n">b</span> <span class="bp">*</span> <span class="n">b</span><span class="o">)</span> <span class="o">(</span><span class="n">a</span> <span class="bp">*</span> <span class="n">b</span><span class="o">)</span> <span class="o">(</span><span class="n">a</span> <span class="bp">*</span> <span class="n">b</span><span class="o">),</span>
<span class="n">refl</span><span class="o">,</span>
</code></pre></div>



<a name="201534262"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20with%20random%20definition/near/201534262" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> David Chew <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/function.20with.20random.20definition.html#201534262">(Jun 21 2020 at 13:25)</a>:</h4>
<p>20 steps  with only auto selection,  to match <span class="user-mention" data-user-id="313602">@Nish</span> (I counted 20 steps in theirs)</p>
<div class="codehilite"><pre><span></span><code><span class="n">rw</span> <span class="n">add_comm</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">two_eq_succ_one</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">pow_succ</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">pow_succ</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">pow_succ</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">pow_one</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">pow_one</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">pow_one</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">mul_add</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">succ_mul</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">one_mul</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">add_mul</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">add_mul</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">add_mul</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">add_assoc</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">add_comm</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">mul_comm</span><span class="o">,</span>
<span class="n">rw</span> <span class="err">←</span> <span class="n">add_assoc</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">add_assoc</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">add_comm</span><span class="o">,</span>
<span class="n">refl</span><span class="o">,</span>
</code></pre></div>



<a name="201534644"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20with%20random%20definition/near/201534644" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> David Chew <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/function.20with.20random.20definition.html#201534644">(Jun 21 2020 at 13:35)</a>:</h4>
<p>Improved to 19 steps</p>
<div class="codehilite"><pre><span></span><code><span class="n">rw</span> <span class="n">add_comm</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">two_eq_succ_one</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">pow_succ</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">pow_succ</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">pow_succ</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">pow_one</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">pow_one</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">pow_one</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">mul_add</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">succ_mul</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">one_mul</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">add_mul</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">add_mul</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">add_mul</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">mul_comm</span> <span class="n">a</span> <span class="n">b</span><span class="o">,</span>
<span class="n">rw</span> <span class="err">←</span> <span class="n">add_assoc</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">add_comm</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">add_assoc</span><span class="o">,</span>
<span class="n">rw</span> <span class="err">←</span> <span class="n">add_assoc</span><span class="o">,</span>
<span class="n">refl</span><span class="o">,</span>
</code></pre></div>



<a name="201535218"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20with%20random%20definition/near/201535218" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/function.20with.20random.20definition.html#201535218">(Jun 21 2020 at 13:53)</a>:</h4>
<p>now can you prove you can't do it in 18? ;-)</p>



<a name="202661258"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20with%20random%20definition/near/202661258" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Learning Balance <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/function.20with.20random.20definition.html#202661258">(Jul 02 2020 at 08:19)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110038">Kevin Buzzard</span> <a href="#narrow/stream/113488-general/topic/function.20with.20random.20definition/near/201535218">said</a>:</p>
<blockquote>
<p>now can you prove you can't do it in 18? ;-)</p>
</blockquote>
<p>This would suggest you can't prove such a thing.  ;-)</p>
<div class="codehilite"><pre><span></span><code><span class="n">rw</span> <span class="n">add_right_comm</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">two_eq_succ_one</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">succ_mul</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">pow_succ</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">add_mul</span><span class="o">,</span>
<span class="n">rw</span> <span class="err">←</span> <span class="n">add_assoc</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">pow_succ</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">pow_one</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">pow_one</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">one_mul</span><span class="o">,</span>
<span class="n">rw</span> <span class="err">←</span> <span class="n">mul_add</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">pow_succ</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">pow_one</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">add_mul</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">mul_add</span> <span class="n">b</span> <span class="n">a</span> <span class="n">b</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">add_assoc</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">mul_comm</span> <span class="n">a</span> <span class="n">b</span><span class="o">,</span>
<span class="n">refl</span><span class="o">,</span>
</code></pre></div>



<a name="202661821"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20with%20random%20definition/near/202661821" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/function.20with.20random.20definition.html#202661821">(Jul 02 2020 at 08:26)</a>:</h4>
<p>It's like the Rubik's cube</p>



<a name="202970068"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20with%20random%20definition/near/202970068" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> John Cremona <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/function.20with.20random.20definition.html#202970068">(Jul 06 2020 at 09:44)</a>:</h4>
<p>I did this in 21, and I'm only a couple of days into all this:<br>
rw two_eq_succ_one,<br>
rw pow_succ,<br>
rw pow_succ, <br>
rw pow_succ, <br>
rw pow_one, <br>
rw pow_one, <br>
rw pow_one, <br>
rw succ_eq_add_one, <br>
rw add_mul, <br>
rw add_mul, <br>
rw one_mul, <br>
rw add_mul, <br>
rw mul_add,<br>
rw mul_add, <br>
rw add_right_comm,<br>
rw add_comm (b*a),<br>
rw mul_comm b a,<br>
rw add_assoc (a*a),<br>
rw add_assoc (a*a),<br>
rw add_assoc (b*b),<br>
refl,</p>



<a name="202970628"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20with%20random%20definition/near/202970628" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/function.20with.20random.20definition.html#202970628">(Jul 06 2020 at 09:51)</a>:</h4>
<p><span class="user-mention" data-user-id="317002">@John Cremona</span> Welcome!<br>
(Note that you can use <a href="https://github.com/leanprover-community/mathlib/wiki/Code-in-backticks">#backticks</a> to get syntax highlighting of the code.)</p>



<a name="202971678"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20with%20random%20definition/near/202971678" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/function.20with.20random.20definition.html#202971678">(Jul 06 2020 at 10:04)</a>:</h4>
<p><span class="user-mention" data-user-id="317002">@John Cremona</span> I remember you mentioning to me a couple of years ago that you had embarked upon a proof from first principles that given <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>g</mi><mo>∈</mo><mi>G</mi></mrow><annotation encoding="application/x-tex">g\in G</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.7335400000000001em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault">G</span></span></span></span> (<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>G</mi></mrow><annotation encoding="application/x-tex">G</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault">G</span></span></span></span> a group),  the map from <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="double-struck">Z</mi></mrow><annotation encoding="application/x-tex">\mathbb{Z}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68889em;vertical-align:0em;"></span><span class="mord"><span class="mord mathbb">Z</span></span></span></span></span> to <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>G</mi></mrow><annotation encoding="application/x-tex">G</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault">G</span></span></span></span> sending <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">n</span></span></span></span> to <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>g</mi><mi>n</mi></msup></mrow><annotation encoding="application/x-tex">g^n</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.858832em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.664392em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span></span></span></span></span></span></span></span> was a group homomorphism, and that it had been much more painful than you had expected. Me and some young mathematicians were working on this last Thursday at Xena and came up with a much more conceptual proof, involving first defining a function which given a bijection <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi><mo>→</mo><mi>A</mi></mrow><annotation encoding="application/x-tex">A\to A</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault">A</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault">A</span></span></span></span> and an integer <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">n</span></span></span></span> returns the $$n$$th iterate of this bijection; we proved <span class="tex-error">$$f^{[n+m]=f^{[n]}\circ f^{[m]}$$</span> by some sort of general induction principle we had lying around. Having set up the basic API for this function we could do stuff like the group theory question easily. I mention all this because as I'm sure you know, you can solve the level above very quickly with <code>ring</code>, although I think that trying to figure out the actual minimum number of moves might be a hard problem.</p>



<a name="202971813"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20with%20random%20definition/near/202971813" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> John Cremona <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/function.20with.20random.20definition.html#202971813">(Jul 06 2020 at 10:06)</a>:</h4>
<p>You are wrong in saying that I know how to solve this in any other way!  I know precisely 0 beyind what I have learned so far in the Natural Number Game, and I have not finished that yet.</p>



<a name="202972039"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20with%20random%20definition/near/202972039" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> John Cremona <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/function.20with.20random.20definition.html#202972039">(Jul 06 2020 at 10:09)</a>:</h4>
<p>By the way, I think the list of streams in this zulip chat is totally chaotic and unhelpful, e.g. the vast number of subtopics under "new members" most of which are not at all suitable reading for newbies.  For a start it would be good to have a thread for beginners' help specifically for the Natural Number Game  where any replies of the form "all you need to do is &lt;something more advanced than has so far been introduced in the NNG&gt;" is banned.</p>



<a name="202973060"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20with%20random%20definition/near/202973060" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/function.20with.20random.20definition.html#202973060">(Jul 06 2020 at 10:23)</a>:</h4>
<p>You're certainly right that we should try to move some of the traffic in "new members" out to the other streams.</p>



<a name="202974240"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20with%20random%20definition/near/202974240" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/function.20with.20random.20definition.html#202974240">(Jul 06 2020 at 10:39)</a>:</h4>
<p>Maybe we should replace it with a "Getting started" or "First proofs in lean" stream, I think half the problem is that a lot of people self-identify as "new members" even if they've used lean for quite a while and therefore post questions in there that are really quite advanced.</p>



<a name="202974805"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20with%20random%20definition/near/202974805" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/function.20with.20random.20definition.html#202974805">(Jul 06 2020 at 10:47)</a>:</h4>
<p>Proposal:</p>
<ol>
<li><code>introductions</code>: people write a short intro, other people say hi and welcome.</li>
<li><code>getting started</code>: questions by people who just started using lean; answers shouldn't assume anything advanced</li>
<li><code>new members</code> get's banned, because it currently is one big grabbag.</li>
</ol>
<p>We could even add a dedicated <code>natural number game</code> stream, if people like this.</p>



<a name="202975671"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20with%20random%20definition/near/202975671" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/function.20with.20random.20definition.html#202975671">(Jul 06 2020 at 10:58)</a>:</h4>
<p>what's the difference between 2 and 3</p>



<a name="202975677"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20with%20random%20definition/near/202975677" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> John Cremona <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/function.20with.20random.20definition.html#202975677">(Jul 06 2020 at 10:58)</a>:</h4>
<p>Certainly at the moment I feel much too intimidated to ask for any help since I'm sure the answers are all obvious.  In fact so far I have come up with the answers myself (after a while) and then they seem obvious to me too. Usually.</p>



<a name="202976269"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20with%20random%20definition/near/202976269" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/function.20with.20random.20definition.html#202976269">(Jul 06 2020 at 11:07)</a>:</h4>
<p><span class="user-mention" data-user-id="317002">@John Cremona</span>  don't feel any pressure to do this, this community really is very question friendly! Maybe because lean still pretty new and comparatively small scale a lot of answers to basic questions just aren't out there in an easy to find manner, so asking here is really the quickest way to go, and there are lots of people happy to answer "obvious" questions.</p>



<a name="202978145"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20with%20random%20definition/near/202978145" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/function.20with.20random.20definition.html#202978145">(Jul 06 2020 at 11:39)</a>:</h4>
<p><span class="user-mention" data-user-id="317002">@John Cremona</span> I will echo what Alex said. If you want an answer fast, just ask. There is soooo much new stuff that you need to wrap your head around, and usually there will be someone that can answer your question in 5 minutes, and it takes them 10 seconds, whereas it might take a newcomer 5 hours to figure it out alone...</p>



<a name="202978186"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20with%20random%20definition/near/202978186" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/function.20with.20random.20definition.html#202978186">(Jul 06 2020 at 11:40)</a>:</h4>
<p>So, we love to answer easy questions.</p>



<a name="204054608"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20with%20random%20definition/near/204054608" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gunjeet Singh <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/function.20with.20random.20definition.html#204054608">(Jul 16 2020 at 07:48)</a>:</h4>
<p>i did that Boss_Boss Power level in 20 steps... will try further to get it to 18 (if that's even possible :)</p>
<p>rw two_eq_succ_one, <br>
rw pow_succ, <br>
rw pow_succ, <br>
rw pow_succ, <br>
rw mul_assoc (succ 1) a b, <br>
rw succ_mul, <br>
rw one_mul, <br>
rw pow_one, <br>
rw pow_one, <br>
rw pow_one, <br>
rw mul_add, <br>
rw add_mul, <br>
rw add_mul,<br>
rw add_comm (a<em>b) (b</em>b),<br>
rw add_assoc (a*a) ,<br>
rw ←  add_assoc (b*a),<br>
rw add_comm (b*a),<br>
rw  add_assoc (b*b),<br>
rw ← add_assoc(a*a),<br>
rw add_comm (b<em>a) (a</em>b),<br>
refl,</p>



<a name="204055628"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20with%20random%20definition/near/204055628" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/function.20with.20random.20definition.html#204055628">(Jul 16 2020 at 08:01)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib/wiki/Code-in-backticks">#backticks</a></p>



<a name="204729306"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20with%20random%20definition/near/204729306" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/function.20with.20random.20definition.html#204729306">(Jul 22 2020 at 22:19)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110038">Kevin Buzzard</span> <a href="#narrow/stream/113488-general/topic/function.20with.20random.20definition/near/180309230">said</a>:</p>
<blockquote>
<p>I remember Patrick a while ago saying "ha ha I remember the days when I just tried <code>simp</code> on every goal" and I'm like "yeah, that's me now"</p>
</blockquote>
<p>I'm here from the future as a new user just going over the number game tut again and this line speaks to me (especially considering how many times out of laziness I just typed it into this same exercise just to have it lazily sort the terms for me)</p>



<a name="204732730"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20with%20random%20definition/near/204732730" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/function.20with.20random.20definition.html#204732730">(Jul 22 2020 at 23:00)</a>:</h4>
<p>I made a bad job of that whole <code>simp</code> stuff. If you play the complex number game you'll see me explaining <code>simp</code> much better.</p>



<a name="225697465"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20with%20random%20definition/near/225697465" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> PsyMar#2210 <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/function.20with.20random.20definition.html#225697465">(Feb 09 2021 at 14:31)</a>:</h4>
<p>Got it in 17 rws.  took about... 5-10 minutes, though my hungry cat says longer.</p>
<p>rw two_eq_succ_one,<br>
rw pow_succ,<br>
rw pow_succ,<br>
rw pow_succ,<br>
rw succ_mul,<br>
rw pow_one,<br>
rw pow_one,<br>
rw pow_one,<br>
rw one_mul,<br>
rw add_mul,<br>
rw mul_add,<br>
rw mul_add,<br>
rw mul_comm b a,<br>
rw ← add_assoc,<br>
rw add_right_comm (a * a) (b * b) ((a + a) * b),<br>
rw add_mul,<br>
rw ← add_assoc,<br>
refl,</p>



<a name="225703732"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20with%20random%20definition/near/225703732" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/function.20with.20random.20definition.html#225703732">(Feb 09 2021 at 15:11)</a>:</h4>
<p>Nice!</p>



<a name="248219720"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20with%20random%20definition/near/248219720" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Michael <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/function.20with.20random.20definition.html#248219720">(Aug 03 2021 at 13:23)</a>:</h4>
<p>Hello, I have just started the natural number game today and I have managed World 4, Level 8 in 19 <code>rw</code>:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">rw</span> <span class="n">two_eq_succ_one</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">pow_succ</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">pow_one</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">pow_succ</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">pow_one</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">pow_succ</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">pow_one</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">succ_mul</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">one_mul</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">mul_add</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">add_mul</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">add_mul</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">add_mul</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">add_assoc</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">add_comm</span> <span class="o">(</span><span class="n">a</span> <span class="bp">*</span> <span class="n">b</span><span class="o">)</span> <span class="o">(</span><span class="n">b</span> <span class="bp">*</span> <span class="n">b</span><span class="o">),</span>
<span class="n">rw</span> <span class="n">add_comm</span> <span class="o">(</span><span class="n">b</span> <span class="bp">*</span> <span class="n">a</span><span class="o">),</span>
<span class="n">rw</span> <span class="n">add_assoc</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">mul_comm</span> <span class="n">b</span> <span class="n">a</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">add_assoc</span><span class="o">,</span>
<span class="n">refl</span><span class="o">,</span>
</code></pre></div>
<p>I have seen in the thread that someone else has managed this too but I thought I would share my proof anyway.</p>



<a name="248253996"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20with%20random%20definition/near/248253996" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/function.20with.20random.20definition.html#248253996">(Aug 03 2021 at 17:41)</a>:</h4>
<p>I should have a leaderboard :-) Well done!</p>



<a name="248401161"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20with%20random%20definition/near/248401161" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anindya Banerjee <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/function.20with.20random.20definition.html#248401161">(Aug 04 2021 at 20:03)</a>:</h4>
<p>Hello, I started the natural number game recently and thus far have managed to work up to Power World. I wonder about the following solution to Power World, Level 8:</p>
<p>rw two_eq_succ_one, <br>
rw pow_succ,<br>
repeat {rw pow_one},<br>
rw mul_add,<br>
repeat {rw pow_succ},<br>
repeat {rw pow_one},<br>
ring,</p>
<p>I must admit that I don't understand the very last step ("ring") in the proof, although Lean seems to accept it. </p>
<p>Thanks in advance for any suggestions.</p>



<a name="248402461"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20with%20random%20definition/near/248402461" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/function.20with.20random.20definition.html#248402461">(Aug 04 2021 at 20:15)</a>:</h4>
<p><code>ring</code> is a tactic that solves goals that are true in all (commutative?) rings, and the goal at the end is one of those things</p>



<a name="248405287"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20with%20random%20definition/near/248405287" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anindya Banerjee <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/function.20with.20random.20definition.html#248405287">(Aug 04 2021 at 20:34)</a>:</h4>
<p>Thank you.</p>
<p>I have another question with Level 9 of Function World, for which my attempt is:</p>
<p>intros a:A, have b:=f1 a, have e:=f2 b, have f:=f5 e, <br>
have g:=f8 f, have j:=f9 g, have i:=f11 j, <br>
apply f15, exact i,</p>
<p>Here Lean reports:</p>
<p>26:19: goal<br>
no goals</p>
<p>and</p>
<p>24:8: error:<br>
invalid 'begin-end' expression, ',' expected<br>
24:12: error:<br>
sync</p>
<p>I am trying to understand the error.</p>
<p>Thanks in advance.</p>



<a name="248408009"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20with%20random%20definition/near/248408009" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/function.20with.20random.20definition.html#248408009">(Aug 04 2021 at 20:57)</a>:</h4>
<p>the error is the fact you said <code>intros a:A</code> instead of just <code>intros a</code>. as Lean knows that the next thing you're <code>intro</code>ing, there's no need to tell it what type it is; it'll figure it out for you, and therefore the tactic gets confused as to why you're trying to tell it.</p>



<a name="248408125"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20with%20random%20definition/near/248408125" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/function.20with.20random.20definition.html#248408125">(Aug 04 2021 at 20:58)</a>:</h4>
<p>(this isn't always true - sometimes you will want to say, but it's true in most cases)</p>



<a name="279985756"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20with%20random%20definition/near/279985756" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> xp2_882030kgz010602 <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/function.20with.20random.20definition.html#279985756">(Apr 24 2022 at 15:23)</a>:</h4>
<p>I somehow got 18 rewrites. I wasn't even trying for a record.<br>
<code>rw two_eq_succ_one,
rw pow_succ,
rw pow_succ,
rw pow_succ,
rw pow_one,
rw pow_one,
rw pow_one,
rw succ_mul,
rw one_mul,
rw mul_add,
rw add_mul,
rw add_mul,
rw add_mul,
rw add_assoc,
rw add_assoc,
rw mul_comm b,
rw add_comm (b*b) (a*b+a*b),
rw ←add_assoc (a*b),
refl,</code></p>



<a name="279990358"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20with%20random%20definition/near/279990358" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Aaron Bies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/function.20with.20random.20definition.html#279990358">(Apr 24 2022 at 17:21)</a>:</h4>
<p>I had not realized you can define functions in tactic mode and it actually tells you your assumptions and goals<br>
This is the funniest thing to me, more programming languages should do this</p>



<a name="279992950"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20with%20random%20definition/near/279992950" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Aaron Bies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/function.20with.20random.20definition.html#279992950">(Apr 24 2022 at 18:19)</a>:</h4>
<p>I understand why this works, but it still feels illegal</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">def</span> <span class="n">what</span> <span class="o">{</span><span class="n">α</span> <span class="n">β</span> <span class="n">γ</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">}</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">β</span><span class="o">)</span> <span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="n">β</span> <span class="bp">→</span> <span class="n">γ</span><span class="o">)</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">α</span><span class="o">)</span> <span class="o">:</span> <span class="n">γ</span> <span class="o">:=</span>
  <span class="kd">by</span> <span class="n">solve_by_elim</span>
</code></pre></div>



<a name="280001012"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20with%20random%20definition/near/280001012" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Rute <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/function.20with.20random.20definition.html#280001012">(Apr 24 2022 at 21:33)</a>:</h4>
<p>Aaron, even without tactic mode, if you use an underscore for each yet-to-be-written term, you can get the same effect in term mode (i.e. having Lean tell you your goals and assumptions).  Every functional language should have a language server which does this!</p>



<a name="280001898"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20with%20random%20definition/near/280001898" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/function.20with.20random.20definition.html#280001898">(Apr 24 2022 at 21:59)</a>:</h4>
<p>Lean also has "holes".</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">def</span> <span class="n">what</span> <span class="o">{</span><span class="n">α</span> <span class="n">β</span> <span class="n">γ</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">}</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">β</span><span class="o">)</span> <span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="n">β</span> <span class="bp">→</span> <span class="n">γ</span><span class="o">)</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">α</span><span class="o">)</span> <span class="o">:</span> <span class="n">γ</span> <span class="o">:=</span> <span class="o">{</span><span class="bp">!</span> <span class="bp">!</span><span class="o">}</span>
</code></pre></div>
<p>Try doing the "use <code>library_search</code> to complete the goal" hole command.</p>



<a name="280485807"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20with%20random%20definition/near/280485807" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Tariq Erwa <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/function.20with.20random.20definition.html#280485807">(Apr 28 2022 at 12:32)</a>:</h4>
<p>My attempt at Power World level 8 @ 25 rewrites</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">rw</span> <span class="n">two_eq_succ_one</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">pow_succ</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">pow_one</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">mul_add</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">add_mul</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">add_assoc</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">add_comm</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">add_mul</span><span class="o">,</span>
<span class="n">rw</span> <span class="bp">←</span> <span class="n">add_assoc</span><span class="o">,</span>
<span class="n">rw</span> <span class="bp">←</span> <span class="n">mul_one</span> <span class="o">(</span><span class="n">b</span><span class="bp">*</span><span class="n">a</span><span class="o">),</span>
<span class="n">rw</span> <span class="n">mul_comm</span> <span class="n">b</span> <span class="n">a</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">add_assoc</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">add_comm</span><span class="o">,</span>
<span class="n">rw</span> <span class="bp">←</span> <span class="n">mul_succ</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">mul_comm</span> <span class="o">(</span><span class="n">a</span><span class="bp">*</span><span class="n">b</span><span class="o">)</span> <span class="o">(</span><span class="n">succ</span> <span class="mi">1</span><span class="o">),</span>
<span class="n">rw</span> <span class="bp">←</span> <span class="n">add_comm</span> <span class="o">(</span><span class="n">a</span><span class="bp">*</span><span class="n">a</span><span class="o">)</span> <span class="o">(</span><span class="n">b</span><span class="bp">*</span><span class="n">b</span><span class="o">),</span>
<span class="n">rw</span> <span class="bp">←</span> <span class="n">pow_one</span> <span class="n">a</span><span class="o">,</span>
<span class="n">rw</span> <span class="bp">←</span> <span class="n">pow_one</span> <span class="n">b</span><span class="o">,</span>
<span class="n">rw</span> <span class="bp">←</span> <span class="n">pow_add</span> <span class="n">a</span> <span class="mi">1</span> <span class="mi">1</span><span class="o">,</span>
<span class="n">rw</span> <span class="bp">←</span> <span class="n">pow_add</span> <span class="n">b</span> <span class="mi">1</span> <span class="mi">1</span><span class="o">,</span>
<span class="n">rw</span> <span class="bp">←</span> <span class="n">succ_eq_add_one</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">pow_one</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">pow_one</span><span class="o">,</span>
<span class="n">rw</span> <span class="bp">←</span> <span class="n">mul_assoc</span><span class="o">,</span>
<span class="n">rw</span> <span class="bp">←</span> <span class="n">two_eq_succ_one</span><span class="o">,</span>
<span class="n">refl</span><span class="o">,</span>
</code></pre></div>



<a name="302257428"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20with%20random%20definition/near/302257428" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Omar Hidmi <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/function.20with.20random.20definition.html#302257428">(Oct 04 2022 at 13:13)</a>:</h4>
<p>My answer to Power world level 8 in 15 rows:</p>
<p>rw two_eq_succ_one,<br>
rw one_eq_succ_zero,<br>
repeat {rw pow_succ},<br>
repeat {rw pow_one},<br>
rw succ_mul,<br>
repeat {rw pow_zero},<br>
repeat {rw one_mul},<br>
rw mul_add,<br>
repeat {rw add_mul},<br>
repeat {rw add_assoc},<br>
rw mul_comm b,<br>
rw succ_mul,<br>
rw zero_mul,<br>
rw zero_add,<br>
simp,</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>