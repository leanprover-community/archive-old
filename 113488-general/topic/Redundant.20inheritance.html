---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/Redundant.20inheritance.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Redundant.20inheritance.html">Redundant inheritance</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="254707199"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Redundant%20inheritance/near/254707199" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alice Laroche <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Redundant.20inheritance.html#254707199">(Sep 24 2021 at 13:52)</a>:</h4>
<p>Is there a way to let a class by an extension of two class who are extensions of the same class : <br>
Something like this :<br>
A<br>
| \<br>
B C<br>
|  /<br>
D</p>



<a name="254707364"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Redundant%20inheritance/near/254707364" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Redundant.20inheritance.html#254707364">(Sep 24 2021 at 13:54)</a>:</h4>
<p>Yes, see for example <a href="https://leanprover-community.github.io/mathlib_docs/find/monoid/src">src#monoid</a></p>



<a name="254707466"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Redundant%20inheritance/near/254707466" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Redundant.20inheritance.html#254707466">(Sep 24 2021 at 13:54)</a>:</h4>
<p>Which uses <code>set_option old_structure_cmd true</code></p>



<a name="254707513"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Redundant%20inheritance/near/254707513" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Redundant.20inheritance.html#254707513">(Sep 24 2021 at 13:54)</a>:</h4>
<p>If you don't want to use that option, see <a href="https://leanprover-community.github.io/mathlib_docs/find/mul_action_with_zero/src">src#mul_action_with_zero</a> for an example</p>



<a name="254708725"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Redundant%20inheritance/near/254708725" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alice Laroche <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Redundant.20inheritance.html#254708725">(Sep 24 2021 at 14:01)</a>:</h4>
<p>Hmm, i probably misunderstand or misread something because mul_action_with_zero only inherit from one class ?</p>



<a name="254708753"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Redundant%20inheritance/near/254708753" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Redundant.20inheritance.html#254708753">(Sep 24 2021 at 14:01)</a>:</h4>
<p><code>mul_action_with_zero</code> seems to say that the answer is "copy the fields manually". The thing about <code>set_option old_structure_cmd true</code> is that it makes structures which can be slow to use for some reason; old structures have been removed from Lean 4.</p>



<a name="254708916"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Redundant%20inheritance/near/254708916" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Redundant.20inheritance.html#254708916">(Sep 24 2021 at 14:02)</a>:</h4>
<p>Yes, Kevin is correct; without <code>old_structure_cmd</code>, the answer is "you can't do it automatically", but also "you can do it manually by defining <a href="https://leanprover-community.github.io/mathlib_docs/find/mul_action_with_zero.to_smul_with_zero">docs#mul_action_with_zero.to_smul_with_zero</a> yourself".</p>



<a name="254708943"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Redundant%20inheritance/near/254708943" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Redundant.20inheritance.html#254708943">(Sep 24 2021 at 14:03)</a>:</h4>
<p><code>mul_action_with_zero</code> "extends from <code>smul_with_zero</code>" in the weak sense that it copies the fields manually. If the old structure command setting is set, then you can just extend like you would imagine, and it works.</p>



<a name="254709364"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Redundant%20inheritance/near/254709364" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alice Laroche <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Redundant.20inheritance.html#254709364">(Sep 24 2021 at 14:05)</a>:</h4>
<p>I tried the settings but i got a <code>don't know how to synthesize placeholder</code> error</p>



<a name="254709576"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Redundant%20inheritance/near/254709576" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Redundant.20inheritance.html#254709576">(Sep 24 2021 at 14:06)</a>:</h4>
<p><a href="https://leanprover-community.github.io/mwe.html">#mwe</a>?</p>



<a name="254710249"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Redundant%20inheritance/near/254710249" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alice Laroche <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Redundant.20inheritance.html#254710249">(Sep 24 2021 at 14:10)</a>:</h4>
<p>I'm on it</p>



<a name="254711756"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Redundant%20inheritance/near/254711756" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alice Laroche <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Redundant.20inheritance.html#254711756">(Sep 24 2021 at 14:19)</a>:</h4>
<p>Erfff, sorry, i saw a typo while reducing to a MWE...<br>
for my defense, the typo was three line below where the error was showing</p>



<a name="254711946"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Redundant%20inheritance/near/254711946" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Redundant.20inheritance.html#254711946">(Sep 24 2021 at 14:20)</a>:</h4>
<p>Yeah, sometimes I get into the habit of writing <code>#exit</code> directly after the bit where I'm totally confused to see if this helps :-)</p>



<a name="254711983"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Redundant%20inheritance/near/254711983" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alice Laroche <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Redundant.20inheritance.html#254711983">(Sep 24 2021 at 14:20)</a>:</h4>
<p>I wonder why the functionality was disabled tho, there was a bad trade-off ?</p>



<a name="254712205"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Redundant%20inheritance/near/254712205" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Redundant.20inheritance.html#254712205">(Sep 24 2021 at 14:22)</a>:</h4>
<p>It can have bad performance</p>



<a name="254712261"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Redundant%20inheritance/near/254712261" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Redundant.20inheritance.html#254712261">(Sep 24 2021 at 14:22)</a>:</h4>
<p>For many years the mathematicians here just complained about how it was going to disappear, and then around a year ago we started getting bad slowdown when doing some stuff and it finally dawned on us why Leo hated it so much :-)</p>



<a name="254712317"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Redundant%20inheritance/near/254712317" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Redundant.20inheritance.html#254712317">(Sep 24 2021 at 14:23)</a>:</h4>
<p>Try <code>#print linear_ordered_field</code> if you want to be scared</p>



<a name="254712389"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Redundant%20inheritance/near/254712389" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Redundant.20inheritance.html#254712389">(Sep 24 2021 at 14:23)</a>:</h4>
<p>Here's a detailed explanation of why Leo wanted to switch: <a href="https://github.com/leanprover/lean/wiki/Refactoring-structures">https://github.com/leanprover/lean/wiki/Refactoring-structures</a></p>



<a name="254712510"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Redundant%20inheritance/near/254712510" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Redundant.20inheritance.html#254712510">(Sep 24 2021 at 14:24)</a>:</h4>
<p>In that message, "currently" := "old_structure_cmd", and "the new proposal" is the current default.</p>



<a name="254712806"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Redundant%20inheritance/near/254712806" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alice Laroche <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Redundant.20inheritance.html#254712806">(Sep 24 2021 at 14:26)</a>:</h4>
<p>Okayyy, i can see the problem<br>
Hope there will be a way one day because the new way of redundant inheritance is... well, it still can be usefull, but it loose usefullness</p>



<a name="254714272"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Redundant%20inheritance/near/254714272" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alice Laroche <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Redundant.20inheritance.html#254714272">(Sep 24 2021 at 14:35)</a>:</h4>
<p>And is there a way to not add new field ?<br>
Since i only wanted to unifies two different class.<br>
(let's say, for exemple, i have the injective class and the surjective class and i want to create the bijective class)<br>
It seem useless, but i need it for a software who use lean in backend</p>



<a name="254714747"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Redundant%20inheritance/near/254714747" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Redundant.20inheritance.html#254714747">(Sep 24 2021 at 14:38)</a>:</h4>
<p>Yes, just end the line with a <code>.</code> after <code>extends foo α, bar α β</code>, no <code>:=</code>.</p>



<a name="254714804"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Redundant%20inheritance/near/254714804" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alice Laroche <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Redundant.20inheritance.html#254714804">(Sep 24 2021 at 14:38)</a>:</h4>
<p>Oh well</p>



<a name="254714920"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Redundant%20inheritance/near/254714920" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Redundant.20inheritance.html#254714920">(Sep 24 2021 at 14:39)</a>:</h4>
<p>(Usually a <code>.</code> to end a statement can be left out, in this case I think you need it to help the parser.)</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>