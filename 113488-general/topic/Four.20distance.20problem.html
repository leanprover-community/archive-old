---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/Four.20distance.20problem.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Four.20distance.20problem.html">Four distance problem</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="318907523"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Four%20distance%20problem/near/318907523" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Lars Ericson <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Four.20distance.20problem.html#318907523">(Jan 01 2023 at 21:28)</a>:</h4>
<p>This is a briefly stated open problem in rational numbers for which Lean has the structure built up to check a proof, if one existed: "Given a unit square in the plane. Is it possible for all four distances from any point in the square to the four vertices to be rational numbers?"  </p>
<p>References:</p>
<p><a href="http://www.math.bas.bg/smb/kolokvium/2022_11_16-NKM-Jordan_Stoyanov-talk.pdf">http://www.math.bas.bg/smb/kolokvium/2022_11_16-NKM-Jordan_Stoyanov-talk.pdf</a><br>
<a href="https://arxiv.org/pdf/1904.12097.pdf">https://arxiv.org/pdf/1904.12097.pdf</a><br>
<a href="https://unsolvedproblems.org/index_files/RationalDistance.htm">https://unsolvedproblems.org/index_files/RationalDistance.htm</a></p>



<a name="318908361"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Four%20distance%20problem/near/318908361" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Four.20distance.20problem.html#318908361">(Jan 01 2023 at 21:39)</a>:</h4>
<p><span class="user-mention silent" data-user-id="364351">Lars Ericson</span> <a href="#narrow/stream/113488-general/topic/Four.20distance.20problem/near/318907523">said</a>:</p>
<blockquote>
<p>Lean has the structure built up to check a proof, if one existed</p>
</blockquote>
<p>Better not to make a claim like that until a proof actually exists and you can see what it uses :)</p>



<a name="318908484"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Four%20distance%20problem/near/318908484" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Junyan Xu <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Four.20distance.20problem.html#318908484">(Jan 01 2023 at 21:40)</a>:</h4>
<p>A similar unsolved problem is <a href="https://en.wikipedia.org/wiki/Euler_brick#Perfect_cuboid">https://en.wikipedia.org/wiki/Euler_brick#Perfect_cuboid</a></p>



<a name="318909239"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Four%20distance%20problem/near/318909239" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Junyan Xu <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Four.20distance.20problem.html#318909239">(Jan 01 2023 at 21:51)</a>:</h4>
<p><a href="https://en.wikipedia.org/wiki/Congruent_number">https://en.wikipedia.org/wiki/Congruent_number</a> is also about Diophantine equations from elementary geometry.</p>
<p>Let me mention there are rational <em>angle</em> problems as well, but the question is not existence but classification in general:<br>
Planar quadrilateral: <a href="https://en.wikipedia.org/wiki/Langley%27s_Adventitious_Angles">https://en.wikipedia.org/wiki/Langley%27s_Adventitious_Angles</a><br>
Recent work on tetrahedra:<br>
<a href="https://github.com/kedlaya/tetrahedra#readme">https://github.com/kedlaya/tetrahedra#readme</a><br>
<a href="https://mobile.twitter.com/marty__weissman/status/1333670741590503425">https://mobile.twitter.com/marty__weissman/status/1333670741590503425</a></p>
<div class="inline-preview-twitter"><div class="twitter-tweet"><a href="https://mobile.twitter.com/marty__weissman/status/1333670741590503425"><img class="twitter-avatar" src="https://uploads.zulipusercontent.net/7390ca994732c4dc2d6125c6c3b1bcf5d45a7782/68747470733a2f2f7062732e7477696d672e636f6d2f70726f66696c655f696d616765732f313238393334303237313832363537393435382f33545955767043755f6e6f726d616c2e6a7067"></a><p>A remarkable result on the ArXiv tonight, due to Kedlaya, Kolpakov, Poonen, and Rubinstein, at <a href="https://t.co/YNcWqgZj3M">https://arxiv.org/pdf/2011.14232.pdf</a>.  One of the highlights is that they fully classify tetrahedra (= triangular pyramids) with rational dihedral angles.  Here's what they prove... (1/n)</p><span>- Marty Weissman (@marty__weissman)</span></div></div>



<a name="318909394"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Four%20distance%20problem/near/318909394" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Michael Stoll <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Four.20distance.20problem.html#318909394">(Jan 01 2023 at 21:53)</a>:</h4>
<p><span class="user-mention silent" data-user-id="260507">Heather Macbeth</span> <a href="#narrow/stream/113488-general/topic/Four.20distance.20problem/near/318908361">said</a>:</p>
<blockquote>
<p>Better not to make a claim like that until a proof actually exists and you can see what it uses :)</p>
</blockquote>
<p>Cf. Fermat's Last Theorem <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span></p>



<a name="318919849"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Four%20distance%20problem/near/318919849" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Four.20distance.20problem.html#318919849">(Jan 02 2023 at 00:43)</a>:</h4>
<p>Easy <span aria-label="upside down" class="emoji emoji-1f643" role="img" title="upside down">:upside_down:</span> :</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">topology.metric_space.basic</span>
<span class="kn">import</span> <span class="n">data.real.irrational</span>

<span class="kd">lemma</span> <span class="n">no_not_like_that</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">×</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">:</span>
  <span class="c1">-- a point within the square</span>
  <span class="bp">∃</span> <span class="n">x</span> <span class="o">(</span><span class="n">h₁</span> <span class="o">:</span> <span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">0</span><span class="o">)</span> <span class="bp">≤</span> <span class="n">x</span><span class="o">)</span> <span class="o">(</span><span class="n">h₂</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">≤</span> <span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">1</span><span class="o">)),</span>
    <span class="c1">-- such that the "distance" to every point is rational</span>
    <span class="bp">¬</span><span class="n">irrational</span> <span class="o">(</span><span class="n">dist</span> <span class="n">x</span> <span class="o">((</span><span class="mi">0</span><span class="o">,</span> <span class="mi">0</span><span class="o">)</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">×</span> <span class="n">ℝ</span><span class="o">))</span> <span class="bp">∧</span>
    <span class="bp">¬</span><span class="n">irrational</span> <span class="o">(</span><span class="n">dist</span> <span class="n">x</span> <span class="o">((</span><span class="mi">0</span><span class="o">,</span> <span class="mi">1</span><span class="o">)</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">×</span> <span class="n">ℝ</span><span class="o">))</span> <span class="bp">∧</span>
    <span class="bp">¬</span><span class="n">irrational</span> <span class="o">(</span><span class="n">dist</span> <span class="n">x</span> <span class="o">((</span><span class="mi">1</span><span class="o">,</span> <span class="mi">1</span><span class="o">)</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">×</span> <span class="n">ℝ</span><span class="o">))</span> <span class="bp">∧</span>
    <span class="bp">¬</span><span class="n">irrational</span> <span class="o">(</span><span class="n">dist</span> <span class="n">x</span> <span class="o">((</span><span class="mi">1</span><span class="o">,</span> <span class="mi">0</span><span class="o">)</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">×</span> <span class="n">ℝ</span><span class="o">))</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">refine</span> <span class="o">⟨(</span><span class="mi">2</span><span class="bp">⁻¹</span><span class="o">,</span> <span class="mi">2</span><span class="bp">⁻¹</span><span class="o">),</span> <span class="n">_</span><span class="o">,</span> <span class="n">_</span><span class="o">,</span> <span class="n">_</span><span class="o">⟩,</span>
  <span class="o">{</span> <span class="n">norm_num</span> <span class="o">},</span>
  <span class="o">{</span> <span class="n">norm_num</span> <span class="o">},</span>
  <span class="n">norm_num</span> <span class="o">[</span><span class="n">prod.dist_eq</span><span class="o">,</span> <span class="n">real.dist_eq</span><span class="o">,</span> <span class="n">abs</span><span class="o">,</span> <span class="n">irrational_inv_iff</span><span class="o">],</span>
  <span class="n">simp_rw</span> <span class="o">[</span><span class="n">one_div</span><span class="o">,</span> <span class="n">irrational_inv_iff</span><span class="o">],</span>
  <span class="n">exact_mod_cast</span> <span class="o">(</span><span class="mi">2</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span><span class="bp">.</span><span class="n">not_irrational</span>
<span class="kd">end</span>
</code></pre></div>



<a name="318927750"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Four%20distance%20problem/near/318927750" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oisin McGuinness <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Four.20distance.20problem.html#318927750">(Jan 02 2023 at 02:58)</a>:</h4>
<p>Yes, it is easy to prove  by hand or in Lean, that in the case when the point is <strong>inside</strong> the square, that the coordinates are forced to be rational. But following the links referenced by Lars, which have interesting diagrams to illustrate, that the hard problem is when the given point is <em>outside</em> the square, and that case is not proven.... <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span></p>



<a name="318927960"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Four%20distance%20problem/near/318927960" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oisin McGuinness <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Four.20distance.20problem.html#318927960">(Jan 02 2023 at 03:02)</a>:</h4>
<p>So the "in the square" in the first post should be "in the plane" to match the references...</p>



<a name="318977667"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Four%20distance%20problem/near/318977667" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Four.20distance.20problem.html#318977667">(Jan 02 2023 at 11:45)</a>:</h4>
<p><span class="user-mention" data-user-id="522558">@Oisin McGuinness</span>, in case it wasn't obvious; my proof above isn't showing that the problem is trivial, but is instead exploiting an ambiguity in what is meant by distance. It uses the inf norm not the euclidean norm, as that happens to be the default!</p>



<a name="318987250"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Four%20distance%20problem/near/318987250" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Four.20distance.20problem.html#318987250">(Jan 02 2023 at 12:54)</a>:</h4>
<p>That's only an ambiguity caused by a really poor default choice on lean's part as opposed to anything a mathematician would care about</p>



<a name="318987530"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Four%20distance%20problem/near/318987530" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Four.20distance.20problem.html#318987530">(Jan 02 2023 at 12:56)</a>:</h4>
<p>Lean didn't choose anything, we did.</p>



<a name="318987618"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Four%20distance%20problem/near/318987618" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Four.20distance.20problem.html#318987618">(Jan 02 2023 at 12:57)</a>:</h4>
<p>And Eric purposefully chose to use the wrong representation of <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi mathvariant="double-struck">R</mi><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">\mathbb{R}^2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mord"><span class="mord mathbb">R</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span> in his joke.</p>



<a name="318987819"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Four%20distance%20problem/near/318987819" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Four.20distance.20problem.html#318987819">(Jan 02 2023 at 12:59)</a>:</h4>
<p>Aah I see. So the version of R^2 with the correct metric is there but under another name? My point still stands that no mathematician would ever say "ah but with what metric on R^2? There are many!"</p>



<a name="318988480"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Four%20distance%20problem/near/318988480" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Four.20distance.20problem.html#318988480">(Jan 02 2023 at 13:04)</a>:</h4>
<p>Sure, the intended one is <code>euclidean_space ℝ (fin 2)</code>.</p>



<a name="319004120"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Four%20distance%20problem/near/319004120" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Four.20distance.20problem.html#319004120">(Jan 02 2023 at 14:34)</a>:</h4>
<p>Of course, if they really did mean to talk about the inf metric, the problem would be about points in a unit "circle"...</p>



<a name="319004312"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Four%20distance%20problem/near/319004312" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Four.20distance.20problem.html#319004312">(Jan 02 2023 at 14:35)</a>:</h4>
<p>There has been <a href="#narrow/stream/217875-Is-there-code-for-X.3F/topic/Inner.20product.20space.20on.20.CE.B1.20.C3.97.20.CE.B2/near/292851174">some discussion about having a <code>euclidean_space</code> version of <code>prod</code> before</a>: (or <code>prod_Lp</code> which is at least sensible for <code>p ∈ {1, 2, ∞}</code>), but it's a lot of boilerplate and mid-port would be a bad time to pursue it.</p>



<a name="319036470"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Four%20distance%20problem/near/319036470" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Four.20distance.20problem.html#319036470">(Jan 02 2023 at 18:19)</a>:</h4>
<p><del>Using the euclidean norm on general products doesn't work very well to fix this issue, since then <code>ℝ × (ℝ × ℝ)</code> and <code>(ℝ × ℝ) × ℝ</code> get completely different metrics, and neither one is the one you would expect</del></p>



<a name="319079608"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Four%20distance%20problem/near/319079608" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Four.20distance.20problem.html#319079608">(Jan 02 2023 at 18:30)</a>:</h4>
<p><del>I agree, but only when <code>p ∈ {1, 2, ∞}</code> doesn't hold</del></p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>