---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/literate.20lean.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/literate.20lean.html">literate lean</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="263836874"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/literate%20lean/near/263836874" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Thorsten Altenkirch <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/literate.20lean.html#263836874">(Dec 06 2021 at 11:26)</a>:</h4>
<p>What is the best way to write a document including lean proofs using latex or markup? I only want to have one source as in literate programming, and I don't want to repeat Lean code (which is what happens when I use the sphinx markup I use for my lecture notes, because the lean code blocks cannot depend on each other.</p>



<a name="263837094"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/literate%20lean/near/263837094" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/literate.20lean.html#263837094">(Dec 06 2021 at 11:29)</a>:</h4>
<p><span class="user-mention silent" data-user-id="271218">Thorsten Altenkirch</span> <a href="#narrow/stream/113488-general/topic/literate.20lean/near/263836874">said</a>:</p>
<blockquote>
<p>What is the best way to write a document including lean proofs using latex or markup? I only want to have one source as in literate programming, and I don't want to repeat Lean code (which is what happens when I use the sphinx markup I use for my lecture notes, because the lean code blocks cannot depend on each other.</p>
</blockquote>
<p>If you want to stick to sphinx, it shouldn't be too hard to write a plugin that makes this work; there are already such plugins for things like ipython</p>



<a name="263837151"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/literate%20lean/near/263837151" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/literate.20lean.html#263837151">(Dec 06 2021 at 11:29)</a>:</h4>
<p>How are you using sphinx with lean at the moment? It sounds like you have it set up so that it <em>can</em> run individual blocks already?</p>



<a name="263837275"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/literate%20lean/near/263837275" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/literate.20lean.html#263837275">(Dec 06 2021 at 11:31)</a>:</h4>
<p><span class="user-mention" data-user-id="271218">@Thorsten Altenkirch</span> Two examples are: <a href="https://www.ma.imperial.ac.uk/~buzzard/docs/lean/sandwich.html">https://www.ma.imperial.ac.uk/~buzzard/docs/lean/sandwich.html</a><br>
<a href="https://leanprover-community.github.io/mathematics_in_lean/introduction.html">https://leanprover-community.github.io/mathematics_in_lean/introduction.html</a></p>



<a name="263837291"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/literate%20lean/near/263837291" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/literate.20lean.html#263837291">(Dec 06 2021 at 11:31)</a>:</h4>
<p><span class="user-mention" data-user-id="110043">@Gabriel Ebner</span> knows how to setup the second. I think it uses sphinx</p>



<a name="263837387"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/literate%20lean/near/263837387" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Thorsten Altenkirch <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/literate.20lean.html#263837387">(Dec 06 2021 at 11:32)</a>:</h4>
<p>I co<br>
<span class="user-mention silent" data-user-id="310045">Eric Wieser</span> <a href="#narrow/stream/113488-general/topic/literate.20lean/near/263837094">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="271218">Thorsten Altenkirch</span> <a href="#narrow/stream/113488-general/topic/literate.20lean/near/263836874">said</a>:</p>
<blockquote>
<p>What is the best way to write a document including lean proofs using latex or markup? I only want to have one source as in literate programming, and I don't want to repeat Lean code (which is what happens when I use the sphinx markup I use for my lecture notes, because the lean code blocks cannot depend on each other.</p>
</blockquote>
<p>If you want to stick to sphinx, it shouldn't be too hard to write a plugin that makes this work; there are already such plugins for things like ipython</p>
</blockquote>
<p>I copied Jeremy et al's setup for the lean tutorial but as I said it doesn't use the contents of previous code boxes.</p>



<a name="263837502"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/literate%20lean/near/263837502" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/literate.20lean.html#263837502">(Dec 06 2021 at 11:33)</a>:</h4>
<p>Presumably you're referring to the "try it" links that open the web editor?</p>



<a name="263837550"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/literate%20lean/near/263837550" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/literate.20lean.html#263837550">(Dec 06 2021 at 11:34)</a>:</h4>
<p>That's somewhat by design.  You can add extra Lean code that doesn't show up in the rendered document by placing it outside of the <code>-- BEGIN</code> and <code>-- END</code> markers like here: <a href="https://github.com/leanprover/theorem_proving_in_lean/blame/6cd7dd5d5c225a46a29bedd0081468c5b097c424/axioms_and_computation.rst#L133-L148">https://github.com/leanprover/theorem_proving_in_lean/blame/6cd7dd5d5c225a46a29bedd0081468c5b097c424/axioms_and_computation.rst#L133-L148</a></p>



<a name="263837568"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/literate%20lean/near/263837568" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Thorsten Altenkirch <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/literate.20lean.html#263837568">(Dec 06 2021 at 11:34)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112680">Johan Commelin</span> <a href="#narrow/stream/113488-general/topic/literate.20lean/near/263837291">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="110043">Gabriel Ebner</span> knows how to setup the second. I think it uses sphinx</p>
</blockquote>
<p>Yes, I am using this setup. Now I have a student who is writing his project report about a Lean project. The disadavnatgae is that code blocks can't depend on each other.</p>



<a name="263837609"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/literate%20lean/near/263837609" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Thorsten Altenkirch <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/literate.20lean.html#263837609">(Dec 06 2021 at 11:35)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110043">Gabriel Ebner</span> <a href="#narrow/stream/113488-general/topic/literate.20lean/near/263837550">said</a>:</p>
<blockquote>
<p>That's somewhat by design.  You can add extra Lean code that doesn't show up in the rendered document by placing it outside of the <code>-- BEGIN</code> and <code>-- END</code> markers like here: <a href="https://github.com/leanprover/theorem_proving_in_lean/blame/6cd7dd5d5c225a46a29bedd0081468c5b097c424/axioms_and_computation.rst#L133-L148">https://github.com/leanprover/theorem_proving_in_lean/blame/6cd7dd5d5c225a46a29bedd0081468c5b097c424/axioms_and_computation.rst#L133-L148</a></p>
</blockquote>
<p>Yes, I know and I am using this. However, the point of literate programming is that you don't have to repeat code because when you change something you only want to change it in one place.</p>



<a name="263837727"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/literate%20lean/near/263837727" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/literate.20lean.html#263837727">(Dec 06 2021 at 11:36)</a>:</h4>
<p>The code that extracts the Lean code from the document is super simple, you can probably change it to concatenate the previous snippets: <a href="https://github.com/leanprover/theorem_proving_in_lean/blob/6cd7dd5d5c225a46a29bedd0081468c5b097c424/lean_sphinx.py#L28-L44">https://github.com/leanprover/theorem_proving_in_lean/blob/6cd7dd5d5c225a46a29bedd0081468c5b097c424/lean_sphinx.py#L28-L44</a></p>



<a name="263837772"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/literate%20lean/near/263837772" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/literate.20lean.html#263837772">(Dec 06 2021 at 11:36)</a>:</h4>
<p>You could probably even use the existing <code>:names:</code> mechanic to concatenate code if it shares the same <code>name</code></p>



<a name="263838003"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/literate%20lean/near/263838003" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/literate.20lean.html#263838003">(Dec 06 2021 at 11:39)</a>:</h4>
<p>Ah, that's only present in <a href="https://github.com/avigad/mathematics_in_lean_source/blob/master/lean_sphinx.py#L29-L51">https://github.com/avigad/mathematics_in_lean_source/blob/master/lean_sphinx.py#L29-L51</a></p>



<a name="263838065"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/literate%20lean/near/263838065" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/literate.20lean.html#263838065">(Dec 06 2021 at 11:40)</a>:</h4>
<p>I guess we should probably make a new repo to contain the sphinx extension so that we don't have these diverging duplicates?</p>



<a name="263838148"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/literate%20lean/near/263838148" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/literate.20lean.html#263838148">(Dec 06 2021 at 11:41)</a>:</h4>
<p>The "mathematics in lean" version of the script is definitely the odd one out here.  The names feature is really specific to that one book, it's also the only book that distributes a git repository with the extracted snippets.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>