---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/reducing.20determinate.20of.20a.20matrix.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/reducing.20determinate.20of.20a.20matrix.html">reducing determinate of a matrix</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="203380390"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/reducing%20determinate%20of%20a%20matrix/near/203380390" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Christopher Upshaw <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/reducing.20determinate.20of.20a.20matrix.html#203380390">(Jul 09 2020 at 12:44)</a>:</h4>
<p>(Is this how I ask a question?)<br>
How do I get <code>finset.univ.sum (λ (σ : equiv.perm n), ↑↑(⇑equiv.perm.sign σ) * finset.univ.prod (λ (i : n), M (⇑σ i) i))</code> (i.e the definition of determinant in linear_algebra) to reduce to the formula m.det = (m 0 0) * (m 1 1) - (m 0 1) * (m 1 0)  (in the case n = fin 2)?</p>



<a name="203380809"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/reducing%20determinate%20of%20a%20matrix/near/203380809" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/reducing.20determinate.20of.20a.20matrix.html#203380809">(Jul 09 2020 at 12:48)</a>:</h4>
<p>I don't believe there is an easy way to do this, since <code>finset.sum</code> is not really designed for computation. Either you would have to show <code>finset.univ : finset (equiv.perm (fin 2))</code> is equal to a specific list of permutations, or you need to do some tricks with reducing the expression enough that <code>simp</code> or <code>rw</code> can deal with it.</p>



<a name="203381201"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/reducing%20determinate%20of%20a%20matrix/near/203381201" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/reducing.20determinate.20of.20a.20matrix.html#203381201">(Jul 09 2020 at 12:52)</a>:</h4>
<p>Like we have <code>fin_cases</code>, we need a tactic that "writes out a sum"</p>



<a name="203381392"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/reducing%20determinate%20of%20a%20matrix/near/203381392" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/reducing.20determinate.20of.20a.20matrix.html#203381392">(Jul 09 2020 at 12:54)</a>:</h4>
<p>It might be relevant to my talk on linear algebra next week, so let's see how far I get.</p>



<a name="203381519"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/reducing%20determinate%20of%20a%20matrix/near/203381519" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/reducing.20determinate.20of.20a.20matrix.html#203381519">(Jul 09 2020 at 12:55)</a>:</h4>
<p>(And yes, <span class="user-mention" data-user-id="214520">@Christopher Upshaw</span>, this is how you ask a question! :-)</p>



<a name="203381635"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/reducing%20determinate%20of%20a%20matrix/near/203381635" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/reducing.20determinate.20of.20a.20matrix.html#203381635">(Jul 09 2020 at 12:56)</a>:</h4>
<p>(You might be disappointed by how often questions are answered with "hmm... we should make that work". But then hopefully you'll be pleased by how often someone then makes it work. :-)</p>



<a name="203381735"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/reducing%20determinate%20of%20a%20matrix/near/203381735" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/reducing.20determinate.20of.20a.20matrix.html#203381735">(Jul 09 2020 at 12:57)</a>:</h4>
<p>We could try a proof like this:</p>
<div class="codehilite"><pre><span></span><code><span class="kn">lemma</span> <span class="n">det_2x2</span> <span class="o">(</span><span class="n">M</span> <span class="o">:</span> <span class="n">matrix</span> <span class="o">(</span><span class="n">fin</span> <span class="mi">2</span><span class="o">)</span> <span class="o">(</span><span class="n">fin</span> <span class="mi">2</span><span class="o">)</span> <span class="n">R</span><span class="o">)</span> <span class="o">:</span> <span class="n">M</span><span class="bp">.</span><span class="n">det</span> <span class="bp">=</span> <span class="n">M</span> <span class="mi">0</span> <span class="mi">0</span> <span class="bp">*</span> <span class="n">M</span> <span class="mi">1</span> <span class="mi">1</span> <span class="bp">-</span> <span class="n">M</span> <span class="mi">1</span> <span class="mi">0</span> <span class="bp">*</span> <span class="n">M</span> <span class="mi">0</span> <span class="mi">1</span> <span class="o">:=</span>
<span class="k">calc</span> <span class="n">M</span><span class="bp">.</span><span class="n">det</span> <span class="bp">=</span> <span class="bp">_</span> <span class="c">/-</span><span class="cm"> fill in something clever -/</span> <span class="o">:</span> <span class="n">refl</span>
<span class="bp">...</span> <span class="bp">=</span> <span class="n">M</span> <span class="mi">0</span> <span class="mi">0</span> <span class="bp">*</span> <span class="n">M</span> <span class="mi">1</span> <span class="mi">1</span> <span class="bp">-</span> <span class="n">M</span> <span class="mi">1</span> <span class="mi">0</span> <span class="bp">*</span> <span class="n">M</span> <span class="mi">0</span> <span class="mi">1</span> <span class="o">:</span> <span class="k">by</span> <span class="o">{</span> <span class="n">simp</span><span class="o">,</span> <span class="n">ring</span> <span class="o">}</span>
</code></pre></div>



<a name="203381822"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/reducing%20determinate%20of%20a%20matrix/near/203381822" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/reducing.20determinate.20of.20a.20matrix.html#203381822">(Jul 09 2020 at 12:58)</a>:</h4>
<p>The obvious choice is to ask Lean to reduce <code>M.det</code> as much as it can with the command <code>#reduce M.det</code>, but that gives a timeout.</p>



<a name="203381971"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/reducing%20determinate%20of%20a%20matrix/near/203381971" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/reducing.20determinate.20of.20a.20matrix.html#203381971">(Jul 09 2020 at 12:59)</a>:</h4>
<p>So let's just guess that Lean can reduce <code>finset.sum</code> to a sum of two things, and that works:</p>
<div class="codehilite"><pre><span></span><code><span class="kn">lemma</span> <span class="n">det_2x2</span> <span class="o">(</span><span class="n">M</span> <span class="o">:</span> <span class="n">matrix</span> <span class="o">(</span><span class="n">fin</span> <span class="mi">2</span><span class="o">)</span> <span class="o">(</span><span class="n">fin</span> <span class="mi">2</span><span class="o">)</span> <span class="n">R</span><span class="o">)</span> <span class="o">:</span> <span class="n">M</span><span class="bp">.</span><span class="n">det</span> <span class="bp">=</span> <span class="n">M</span> <span class="mi">0</span> <span class="mi">0</span> <span class="bp">*</span> <span class="n">M</span> <span class="mi">1</span> <span class="mi">1</span> <span class="bp">-</span> <span class="n">M</span> <span class="mi">1</span> <span class="mi">0</span> <span class="bp">*</span> <span class="n">M</span> <span class="mi">0</span> <span class="mi">1</span> <span class="o">:=</span>
<span class="k">calc</span> <span class="n">M</span><span class="bp">.</span><span class="n">det</span> <span class="bp">=</span> <span class="bp">_</span> <span class="bp">+</span> <span class="bp">_</span> <span class="o">:</span> <span class="n">refl</span> <span class="bp">_</span>
<span class="bp">...</span> <span class="bp">=</span> <span class="n">M</span> <span class="mi">0</span> <span class="mi">0</span> <span class="bp">*</span> <span class="n">M</span> <span class="mi">1</span> <span class="mi">1</span> <span class="bp">-</span> <span class="n">M</span> <span class="mi">1</span> <span class="mi">0</span> <span class="bp">*</span> <span class="n">M</span> <span class="mi">0</span> <span class="mi">1</span> <span class="o">:</span> <span class="k">by</span> <span class="o">{</span> <span class="n">simp</span><span class="o">,</span> <span class="n">ring</span> <span class="o">}</span> <span class="c1">-- error: focused goal has not been solved</span>
</code></pre></div>



<a name="203382058"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/reducing%20determinate%20of%20a%20matrix/near/203382058" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/reducing.20determinate.20of.20a.20matrix.html#203382058">(Jul 09 2020 at 13:00)</a>:</h4>
<p>But it's not a sum of three things:</p>
<div class="codehilite"><pre><span></span><code><span class="kn">lemma</span> <span class="n">det_2x2</span> <span class="o">(</span><span class="n">M</span> <span class="o">:</span> <span class="n">matrix</span> <span class="o">(</span><span class="n">fin</span> <span class="mi">2</span><span class="o">)</span> <span class="o">(</span><span class="n">fin</span> <span class="mi">2</span><span class="o">)</span> <span class="n">R</span><span class="o">)</span> <span class="o">:</span> <span class="n">M</span><span class="bp">.</span><span class="n">det</span> <span class="bp">=</span> <span class="n">M</span> <span class="mi">0</span> <span class="mi">0</span> <span class="bp">*</span> <span class="n">M</span> <span class="mi">1</span> <span class="mi">1</span> <span class="bp">-</span> <span class="n">M</span> <span class="mi">1</span> <span class="mi">0</span> <span class="bp">*</span> <span class="n">M</span> <span class="mi">0</span> <span class="mi">1</span> <span class="o">:=</span>
<span class="k">calc</span> <span class="n">M</span><span class="bp">.</span><span class="n">det</span> <span class="bp">=</span> <span class="bp">_</span> <span class="bp">+</span> <span class="bp">_</span> <span class="bp">+</span> <span class="bp">_</span> <span class="o">:</span> <span class="n">refl</span> <span class="bp">_</span> <span class="c1">-- error: type mismatch</span>
<span class="bp">...</span> <span class="bp">=</span> <span class="n">M</span> <span class="mi">0</span> <span class="mi">0</span> <span class="bp">*</span> <span class="n">M</span> <span class="mi">1</span> <span class="mi">1</span> <span class="bp">-</span> <span class="n">M</span> <span class="mi">1</span> <span class="mi">0</span> <span class="bp">*</span> <span class="n">M</span> <span class="mi">0</span> <span class="mi">1</span> <span class="o">:</span> <span class="k">by</span> <span class="o">{</span> <span class="n">simp</span><span class="o">,</span> <span class="n">ring</span> <span class="o">}</span>
</code></pre></div>



<a name="203382146"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/reducing%20determinate%20of%20a%20matrix/near/203382146" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/reducing.20determinate.20of.20a.20matrix.html#203382146">(Jul 09 2020 at 13:01)</a>:</h4>
<p>Aha, but adding parentheses around the addition works!</p>
<div class="codehilite"><pre><span></span><code><span class="kn">lemma</span> <span class="n">det_2x2</span> <span class="o">(</span><span class="n">M</span> <span class="o">:</span> <span class="n">matrix</span> <span class="o">(</span><span class="n">fin</span> <span class="mi">2</span><span class="o">)</span> <span class="o">(</span><span class="n">fin</span> <span class="mi">2</span><span class="o">)</span> <span class="n">R</span><span class="o">)</span> <span class="o">:</span> <span class="n">M</span><span class="bp">.</span><span class="n">det</span> <span class="bp">=</span> <span class="n">M</span> <span class="mi">0</span> <span class="mi">0</span> <span class="bp">*</span> <span class="n">M</span> <span class="mi">1</span> <span class="mi">1</span> <span class="bp">-</span> <span class="n">M</span> <span class="mi">1</span> <span class="mi">0</span> <span class="bp">*</span> <span class="n">M</span> <span class="mi">0</span> <span class="mi">1</span> <span class="o">:=</span>
<span class="k">calc</span> <span class="n">M</span><span class="bp">.</span><span class="n">det</span> <span class="bp">=</span> <span class="bp">_</span> <span class="bp">+</span> <span class="o">(</span><span class="bp">_</span> <span class="bp">+</span> <span class="bp">_</span><span class="o">)</span> <span class="o">:</span> <span class="n">refl</span> <span class="bp">_</span>
<span class="bp">...</span> <span class="bp">=</span> <span class="n">M</span> <span class="mi">0</span> <span class="mi">0</span> <span class="bp">*</span> <span class="n">M</span> <span class="mi">1</span> <span class="mi">1</span> <span class="bp">-</span> <span class="n">M</span> <span class="mi">1</span> <span class="mi">0</span> <span class="bp">*</span> <span class="n">M</span> <span class="mi">0</span> <span class="mi">1</span> <span class="o">:</span> <span class="k">by</span> <span class="o">{</span> <span class="n">simp</span><span class="o">,</span> <span class="n">ring</span> <span class="o">}</span> <span class="c1">-- error: focused goal has not been solved</span>
</code></pre></div>



<a name="203382334"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/reducing%20determinate%20of%20a%20matrix/near/203382334" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/reducing.20determinate.20of.20a.20matrix.html#203382334">(Jul 09 2020 at 13:02)</a>:</h4>
<p>In fact, the last term should be <code>0</code>: <code>_ + (_ + 0)</code> doesn't give a type error.</p>



<a name="203382366"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/reducing%20determinate%20of%20a%20matrix/near/203382366" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/reducing.20determinate.20of.20a.20matrix.html#203382366">(Jul 09 2020 at 13:03)</a>:</h4>
<p>Let's check out the goal that <code>simp, ring</code> didn't solve:</p>
<div class="codehilite"><pre><span></span><code><span class="o">(</span><span class="err">∏</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">fin</span> <span class="mi">2</span><span class="o">),</span> <span class="n">M</span> <span class="o">(</span><span class="err">⇑</span><span class="o">(</span><span class="err">⇑</span><span class="o">((</span><span class="n">equiv</span><span class="bp">.</span><span class="n">refl</span> <span class="o">(</span><span class="n">fin</span> <span class="mi">2</span><span class="o">))</span><span class="bp">.</span><span class="n">equiv_congr</span> <span class="o">(</span><span class="n">equiv</span><span class="bp">.</span><span class="n">refl</span> <span class="o">(</span><span class="n">fin</span> <span class="mi">2</span><span class="o">)))</span> <span class="mi">1</span><span class="o">)</span> <span class="n">x</span><span class="o">)</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span>
        <span class="err">↑↑</span><span class="o">(</span><span class="n">sign</span> <span class="o">(</span><span class="err">⇑</span><span class="o">((</span><span class="n">equiv</span><span class="bp">.</span><span class="n">refl</span> <span class="o">(</span><span class="n">fin</span> <span class="mi">2</span><span class="o">))</span><span class="bp">.</span><span class="n">equiv_congr</span> <span class="o">(</span><span class="n">equiv</span><span class="bp">.</span><span class="n">refl</span> <span class="o">(</span><span class="n">fin</span> <span class="mi">2</span><span class="o">)))</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span>
      <span class="o">(</span><span class="err">∏</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">fin</span> <span class="mi">2</span><span class="o">),</span>
           <span class="n">M</span> <span class="o">(</span><span class="err">⇑</span><span class="o">(</span><span class="err">⇑</span><span class="o">((</span><span class="n">equiv</span><span class="bp">.</span><span class="n">refl</span> <span class="o">(</span><span class="n">fin</span> <span class="mi">2</span><span class="o">))</span><span class="bp">.</span><span class="n">equiv_congr</span> <span class="o">(</span><span class="n">equiv</span><span class="bp">.</span><span class="n">refl</span> <span class="o">(</span><span class="n">fin</span> <span class="mi">2</span><span class="o">)))</span> <span class="o">(</span><span class="n">swap</span> <span class="bp">⟨</span><span class="mi">0</span><span class="o">,</span> <span class="bp">_⟩</span> <span class="bp">⟨</span><span class="mi">1</span><span class="o">,</span> <span class="bp">_⟩</span><span class="o">))</span> <span class="n">x</span><span class="o">)</span> <span class="n">x</span><span class="o">)</span> <span class="bp">*</span>
        <span class="err">↑↑</span><span class="o">(</span><span class="n">sign</span> <span class="o">(</span><span class="err">⇑</span><span class="o">((</span><span class="n">equiv</span><span class="bp">.</span><span class="n">refl</span> <span class="o">(</span><span class="n">fin</span> <span class="mi">2</span><span class="o">))</span><span class="bp">.</span><span class="n">equiv_congr</span> <span class="o">(</span><span class="n">equiv</span><span class="bp">.</span><span class="n">refl</span> <span class="o">(</span><span class="n">fin</span> <span class="mi">2</span><span class="o">)))</span> <span class="o">(</span><span class="n">swap</span> <span class="bp">⟨</span><span class="mi">0</span><span class="o">,</span> <span class="bp">_⟩</span> <span class="bp">⟨</span><span class="mi">1</span><span class="o">,</span> <span class="bp">_⟩</span><span class="o">)))</span> <span class="bp">=</span>
    <span class="n">M</span> <span class="mi">1</span> <span class="mi">1</span> <span class="bp">*</span> <span class="n">M</span> <span class="mi">0</span> <span class="mi">0</span> <span class="bp">-</span> <span class="n">M</span> <span class="mi">0</span> <span class="mi">1</span> <span class="bp">*</span> <span class="n">M</span> <span class="mi">1</span> <span class="mi">0</span>
</code></pre></div>



<a name="203382385"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/reducing%20determinate%20of%20a%20matrix/near/203382385" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/reducing.20determinate.20of.20a.20matrix.html#203382385">(Jul 09 2020 at 13:03)</a>:</h4>
<p>Looks like we need to do the same trick with these products as we did for the sum.</p>



<a name="203382514"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/reducing%20determinate%20of%20a%20matrix/near/203382514" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/reducing.20determinate.20of.20a.20matrix.html#203382514">(Jul 09 2020 at 13:04)</a>:</h4>
<p>Yup, this doesn't give a type error:</p>
<div class="codehilite"><pre><span></span><code><span class="kn">lemma</span> <span class="n">det_2x2</span> <span class="o">(</span><span class="n">M</span> <span class="o">:</span> <span class="n">matrix</span> <span class="o">(</span><span class="n">fin</span> <span class="mi">2</span><span class="o">)</span> <span class="o">(</span><span class="n">fin</span> <span class="mi">2</span><span class="o">)</span> <span class="n">R</span><span class="o">)</span> <span class="o">:</span> <span class="n">M</span><span class="bp">.</span><span class="n">det</span> <span class="bp">=</span> <span class="n">M</span> <span class="mi">0</span> <span class="mi">0</span> <span class="bp">*</span> <span class="n">M</span> <span class="mi">1</span> <span class="mi">1</span> <span class="bp">-</span> <span class="n">M</span> <span class="mi">1</span> <span class="mi">0</span> <span class="bp">*</span> <span class="n">M</span> <span class="mi">0</span> <span class="mi">1</span> <span class="o">:=</span>
<span class="k">calc</span> <span class="n">M</span><span class="bp">.</span><span class="n">det</span> <span class="bp">=</span> <span class="o">(</span><span class="bp">_</span> <span class="bp">*</span> <span class="o">(</span><span class="bp">_</span> <span class="bp">*</span> <span class="o">(</span><span class="bp">_</span> <span class="bp">*</span> <span class="mi">1</span><span class="o">)))</span> <span class="bp">+</span> <span class="o">((</span><span class="bp">_</span> <span class="bp">*</span> <span class="o">(</span><span class="bp">_</span> <span class="bp">*</span> <span class="o">(</span><span class="bp">_</span> <span class="bp">*</span> <span class="mi">1</span><span class="o">)))</span> <span class="bp">+</span> <span class="mi">0</span><span class="o">)</span> <span class="o">:</span> <span class="n">refl</span> <span class="bp">_</span>
<span class="bp">...</span> <span class="bp">=</span> <span class="n">M</span> <span class="mi">0</span> <span class="mi">0</span> <span class="bp">*</span> <span class="n">M</span> <span class="mi">1</span> <span class="mi">1</span> <span class="bp">-</span> <span class="n">M</span> <span class="mi">1</span> <span class="mi">0</span> <span class="bp">*</span> <span class="n">M</span> <span class="mi">0</span> <span class="mi">1</span> <span class="o">:</span> <span class="k">by</span> <span class="o">{</span> <span class="n">simp</span><span class="o">,</span> <span class="n">ring</span> <span class="o">}</span> <span class="c1">-- error: focused goal has not been solved</span>
</code></pre></div>



<a name="203382700"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/reducing%20determinate%20of%20a%20matrix/near/203382700" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/reducing.20determinate.20of.20a.20matrix.html#203382700">(Jul 09 2020 at 13:06)</a>:</h4>
<p>Looking at the goal again, we get:</p>
<div class="codehilite"><pre><span></span><code><span class="err">⊢</span> <span class="n">M</span> <span class="o">(</span><span class="err">⇑</span><span class="o">(</span><span class="err">⇑</span><span class="o">((</span><span class="n">equiv</span><span class="bp">.</span><span class="n">refl</span> <span class="o">(</span><span class="n">fin</span> <span class="mi">2</span><span class="o">))</span><span class="bp">.</span><span class="n">equiv_congr</span> <span class="o">(</span><span class="n">equiv</span><span class="bp">.</span><span class="n">refl</span> <span class="o">(</span><span class="n">fin</span> <span class="mi">2</span><span class="o">)))</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">⟨</span><span class="mi">1</span><span class="o">,</span> <span class="bp">_⟩</span><span class="o">)</span> <span class="bp">⟨</span><span class="mi">1</span><span class="o">,</span> <span class="bp">_⟩</span> <span class="bp">*</span>
          <span class="n">M</span> <span class="o">(</span><span class="err">⇑</span><span class="o">(</span><span class="err">⇑</span><span class="o">((</span><span class="n">equiv</span><span class="bp">.</span><span class="n">refl</span> <span class="o">(</span><span class="n">fin</span> <span class="mi">2</span><span class="o">))</span><span class="bp">.</span><span class="n">equiv_congr</span> <span class="o">(</span><span class="n">equiv</span><span class="bp">.</span><span class="n">refl</span> <span class="o">(</span><span class="n">fin</span> <span class="mi">2</span><span class="o">)))</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">⟨</span><span class="mi">0</span><span class="o">,</span> <span class="bp">_⟩</span><span class="o">)</span> <span class="bp">⟨</span><span class="mi">0</span><span class="o">,</span> <span class="bp">_⟩</span> <span class="bp">*</span>
        <span class="err">↑↑</span><span class="o">(</span><span class="n">sign</span> <span class="o">(</span><span class="err">⇑</span><span class="o">((</span><span class="n">equiv</span><span class="bp">.</span><span class="n">refl</span> <span class="o">(</span><span class="n">fin</span> <span class="mi">2</span><span class="o">))</span><span class="bp">.</span><span class="n">equiv_congr</span> <span class="o">(</span><span class="n">equiv</span><span class="bp">.</span><span class="n">refl</span> <span class="o">(</span><span class="n">fin</span> <span class="mi">2</span><span class="o">)))</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span>
      <span class="n">M</span> <span class="o">(</span><span class="err">⇑</span><span class="o">(</span><span class="err">⇑</span><span class="o">((</span><span class="n">equiv</span><span class="bp">.</span><span class="n">refl</span> <span class="o">(</span><span class="n">fin</span> <span class="mi">2</span><span class="o">))</span><span class="bp">.</span><span class="n">equiv_congr</span> <span class="o">(</span><span class="n">equiv</span><span class="bp">.</span><span class="n">refl</span> <span class="o">(</span><span class="n">fin</span> <span class="mi">2</span><span class="o">)))</span> <span class="o">(</span><span class="n">swap</span> <span class="bp">⟨</span><span class="mi">0</span><span class="o">,</span> <span class="bp">_⟩</span> <span class="bp">⟨</span><span class="mi">1</span><span class="o">,</span> <span class="bp">_⟩</span><span class="o">))</span> <span class="bp">⟨</span><span class="mi">1</span><span class="o">,</span> <span class="bp">_⟩</span><span class="o">)</span>
            <span class="bp">⟨</span><span class="mi">1</span><span class="o">,</span> <span class="bp">_⟩</span> <span class="bp">*</span>
          <span class="n">M</span> <span class="o">(</span><span class="err">⇑</span><span class="o">(</span><span class="err">⇑</span><span class="o">((</span><span class="n">equiv</span><span class="bp">.</span><span class="n">refl</span> <span class="o">(</span><span class="n">fin</span> <span class="mi">2</span><span class="o">))</span><span class="bp">.</span><span class="n">equiv_congr</span> <span class="o">(</span><span class="n">equiv</span><span class="bp">.</span><span class="n">refl</span> <span class="o">(</span><span class="n">fin</span> <span class="mi">2</span><span class="o">)))</span> <span class="o">(</span><span class="n">swap</span> <span class="bp">⟨</span><span class="mi">0</span><span class="o">,</span> <span class="bp">_⟩</span> <span class="bp">⟨</span><span class="mi">1</span><span class="o">,</span> <span class="bp">_⟩</span><span class="o">))</span> <span class="bp">⟨</span><span class="mi">0</span><span class="o">,</span> <span class="bp">_⟩</span><span class="o">)</span>
            <span class="bp">⟨</span><span class="mi">0</span><span class="o">,</span> <span class="bp">_⟩</span> <span class="bp">*</span>
        <span class="err">↑↑</span><span class="o">(</span><span class="n">sign</span> <span class="o">(</span><span class="err">⇑</span><span class="o">((</span><span class="n">equiv</span><span class="bp">.</span><span class="n">refl</span> <span class="o">(</span><span class="n">fin</span> <span class="mi">2</span><span class="o">))</span><span class="bp">.</span><span class="n">equiv_congr</span> <span class="o">(</span><span class="n">equiv</span><span class="bp">.</span><span class="n">refl</span> <span class="o">(</span><span class="n">fin</span> <span class="mi">2</span><span class="o">)))</span> <span class="o">(</span><span class="n">swap</span> <span class="bp">⟨</span><span class="mi">0</span><span class="o">,</span> <span class="bp">_⟩</span> <span class="bp">⟨</span><span class="mi">1</span><span class="o">,</span> <span class="bp">_⟩</span><span class="o">)))</span> <span class="bp">=</span>
    <span class="n">M</span> <span class="mi">1</span> <span class="mi">1</span> <span class="bp">*</span> <span class="n">M</span> <span class="mi">0</span> <span class="mi">0</span> <span class="bp">-</span> <span class="n">M</span> <span class="mi">0</span> <span class="mi">1</span> <span class="bp">*</span> <span class="n">M</span> <span class="mi">1</span> <span class="mi">0</span>
</code></pre></div>


<p>So we should just fill in some values and we can finish.</p>



<a name="203383035"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/reducing%20determinate%20of%20a%20matrix/near/203383035" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/reducing.20determinate.20of.20a.20matrix.html#203383035">(Jul 09 2020 at 13:09)</a>:</h4>
<p>And with a bit of fiddling with the coercions, we get:</p>
<div class="codehilite"><pre><span></span><code><span class="kn">lemma</span> <span class="n">det_2x2</span> <span class="o">(</span><span class="n">M</span> <span class="o">:</span> <span class="n">matrix</span> <span class="o">(</span><span class="n">fin</span> <span class="mi">2</span><span class="o">)</span> <span class="o">(</span><span class="n">fin</span> <span class="mi">2</span><span class="o">)</span> <span class="n">R</span><span class="o">)</span> <span class="o">:</span> <span class="n">M</span><span class="bp">.</span><span class="n">det</span> <span class="bp">=</span> <span class="n">M</span> <span class="mi">0</span> <span class="mi">0</span> <span class="bp">*</span> <span class="n">M</span> <span class="mi">1</span> <span class="mi">1</span> <span class="bp">-</span> <span class="n">M</span> <span class="mi">1</span> <span class="mi">0</span> <span class="bp">*</span> <span class="n">M</span> <span class="mi">0</span> <span class="mi">1</span> <span class="o">:=</span>
<span class="k">calc</span> <span class="n">M</span><span class="bp">.</span><span class="n">det</span> <span class="bp">=</span> <span class="o">((</span><span class="mi">1</span> <span class="o">:</span> <span class="n">units</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="bp">_</span> <span class="bp">*</span> <span class="o">(</span><span class="bp">_</span> <span class="bp">*</span> <span class="mi">1</span><span class="o">)))</span> <span class="bp">+</span> <span class="o">(((</span><span class="bp">-</span><span class="mi">1</span> <span class="o">:</span> <span class="n">units</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="bp">_</span> <span class="bp">*</span> <span class="o">(</span><span class="bp">_</span> <span class="bp">*</span> <span class="mi">1</span><span class="o">)))</span> <span class="bp">+</span> <span class="mi">0</span><span class="o">)</span> <span class="o">:</span> <span class="n">refl</span> <span class="n">M</span><span class="bp">.</span><span class="n">det</span>
<span class="bp">...</span> <span class="bp">=</span> <span class="n">M</span> <span class="mi">0</span> <span class="mi">0</span> <span class="bp">*</span> <span class="n">M</span> <span class="mi">1</span> <span class="mi">1</span> <span class="bp">-</span> <span class="n">M</span> <span class="mi">1</span> <span class="mi">0</span> <span class="bp">*</span> <span class="n">M</span> <span class="mi">0</span> <span class="mi">1</span> <span class="o">:</span> <span class="k">by</span> <span class="o">{</span> <span class="n">simp</span><span class="o">,</span> <span class="n">ring</span> <span class="o">}</span>
</code></pre></div>



<a name="203383093"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/reducing%20determinate%20of%20a%20matrix/near/203383093" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/reducing.20determinate.20of.20a.20matrix.html#203383093">(Jul 09 2020 at 13:10)</a>:</h4>
<p>QED :-)</p>



<a name="203383094"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/reducing%20determinate%20of%20a%20matrix/near/203383094" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/reducing.20determinate.20of.20a.20matrix.html#203383094">(Jul 09 2020 at 13:10)</a>:</h4>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="n">linear_algebra</span><span class="bp">.</span><span class="n">matrix</span>

<span class="kn">lemma</span> <span class="n">det_2x2</span> <span class="o">{</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">comm_ring</span> <span class="n">R</span><span class="o">]</span> <span class="o">(</span><span class="n">M</span> <span class="o">:</span> <span class="n">matrix</span> <span class="o">(</span><span class="n">fin</span> <span class="mi">2</span><span class="o">)</span> <span class="o">(</span><span class="n">fin</span> <span class="mi">2</span><span class="o">)</span> <span class="n">R</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">M</span><span class="bp">.</span><span class="n">det</span> <span class="bp">=</span> <span class="n">M</span> <span class="mi">0</span> <span class="mi">0</span> <span class="bp">*</span> <span class="n">M</span> <span class="mi">1</span> <span class="mi">1</span> <span class="bp">-</span> <span class="n">M</span> <span class="mi">1</span> <span class="mi">0</span> <span class="bp">*</span> <span class="n">M</span> <span class="mi">0</span> <span class="mi">1</span> <span class="o">:=</span>
<span class="k">calc</span> <span class="n">M</span><span class="bp">.</span><span class="n">det</span> <span class="bp">=</span> <span class="o">((</span><span class="mi">0</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">M</span> <span class="mi">0</span> <span class="mi">0</span> <span class="bp">*</span> <span class="o">(</span><span class="n">M</span> <span class="mi">1</span> <span class="mi">1</span> <span class="bp">*</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="o">(</span><span class="bp">-</span><span class="o">(</span><span class="mi">0</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">M</span> <span class="mi">1</span> <span class="mi">0</span> <span class="bp">*</span> <span class="o">(</span><span class="n">M</span> <span class="mi">0</span> <span class="mi">1</span> <span class="bp">*</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="mi">0</span><span class="o">)</span> <span class="o">:</span> <span class="n">R</span><span class="o">)</span> <span class="o">:</span> <span class="n">rfl</span>
       <span class="bp">...</span> <span class="bp">=</span> <span class="n">M</span> <span class="mi">0</span> <span class="mi">0</span> <span class="bp">*</span> <span class="n">M</span> <span class="mi">1</span> <span class="mi">1</span> <span class="bp">-</span> <span class="n">M</span> <span class="mi">1</span> <span class="mi">0</span> <span class="bp">*</span> <span class="n">M</span> <span class="mi">0</span> <span class="mi">1</span> <span class="o">:</span>
  <span class="k">by</span> <span class="n">simp_rw</span> <span class="o">[</span><span class="n">zero_add</span><span class="o">,</span> <span class="n">mul_one</span><span class="o">,</span> <span class="n">one_mul</span><span class="o">,</span> <span class="n">add_zero</span><span class="o">,</span> <span class="n">neg_one_mul</span><span class="o">,</span> <span class="n">sub_eq_add_neg</span><span class="o">]</span>
</code></pre></div>



<a name="203383194"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/reducing%20determinate%20of%20a%20matrix/near/203383194" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/reducing.20determinate.20of.20a.20matrix.html#203383194">(Jul 09 2020 at 13:11)</a>:</h4>
<p>oh curses I'm slightly slower</p>



<a name="203394218"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/reducing%20determinate%20of%20a%20matrix/near/203394218" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/reducing.20determinate.20of.20a.20matrix.html#203394218">(Jul 09 2020 at 14:43)</a>:</h4>
<p>Well done to both of you, very nice</p>



<a name="203394386"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/reducing%20determinate%20of%20a%20matrix/near/203394386" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/reducing.20determinate.20of.20a.20matrix.html#203394386">(Jul 09 2020 at 14:44)</a>:</h4>
<p>Now can you do 3*3? ;-)</p>



<a name="203394700"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/reducing%20determinate%20of%20a%20matrix/near/203394700" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/reducing.20determinate.20of.20a.20matrix.html#203394700">(Jul 09 2020 at 14:46)</a>:</h4>
<p>I can do it, but I won't <span aria-label="upside down" class="emoji emoji-1f643" role="img" title="upside down">:upside_down:</span></p>



<a name="203457410"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/reducing%20determinate%20of%20a%20matrix/near/203457410" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/reducing.20determinate.20of.20a.20matrix.html#203457410">(Jul 10 2020 at 00:12)</a>:</h4>
<p>If we had a tactic that, like <code>fin_cases</code>, used <code>eval_expr</code> to obtain an underlying list, and replaced the finset.prod with an explicit list.prod over that list, how helpful would that be in these cases?</p>



<a name="203457610"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/reducing%20determinate%20of%20a%20matrix/near/203457610" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/reducing.20determinate.20of.20a.20matrix.html#203457610">(Jul 10 2020 at 00:16)</a>:</h4>
<p>It's probably easier to show the n x n case via the definition of det that uses minors</p>



<a name="203457617"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/reducing%20determinate%20of%20a%20matrix/near/203457617" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/reducing.20determinate.20of.20a.20matrix.html#203457617">(Jul 10 2020 at 00:17)</a>:</h4>
<p>And induction</p>



<a name="203459102"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/reducing%20determinate%20of%20a%20matrix/near/203459102" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/reducing.20determinate.20of.20a.20matrix.html#203459102">(Jul 10 2020 at 00:48)</a>:</h4>
<p>I had the wrong definition here.</p>



<a name="203459449"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/reducing%20determinate%20of%20a%20matrix/near/203459449" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/reducing.20determinate.20of.20a.20matrix.html#203459449">(Jul 10 2020 at 00:56)</a>:</h4>
<p>Something more like this. Still not sure how to generate the <code>ni \neq i</code> on the fly:</p>
<hr>
<div class="codehilite"><pre><span></span><code><span class="n">def</span> <span class="n">det_via_minors</span> <span class="o">{</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">}</span> <span class="o">{</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">field</span> <span class="n">R</span><span class="o">]</span>
    <span class="o">(</span><span class="n">M</span> <span class="o">:</span> <span class="n">matrix</span> <span class="o">(</span><span class="n">fin</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="o">(</span><span class="n">fin</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="n">R</span><span class="o">)</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="n">fin</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="o">:</span> <span class="n">R</span> <span class="o">:=</span>
    <span class="k">let</span> <span class="n">c</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">j</span> <span class="o">:</span> <span class="n">fin</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">),</span> <span class="o">(</span><span class="bp">-</span><span class="mi">1</span> <span class="o">:</span> <span class="n">R</span><span class="o">)</span> <span class="bp">^</span> <span class="o">(</span><span class="n">i</span><span class="bp">.</span><span class="n">val</span> <span class="bp">+</span> <span class="n">j</span><span class="bp">.</span><span class="n">val</span><span class="o">)</span> <span class="k">in</span>
    <span class="err">∑</span> <span class="n">j</span><span class="o">,</span> <span class="o">(</span><span class="n">M</span> <span class="n">i</span> <span class="n">j</span> <span class="err">•</span> <span class="o">(</span><span class="n">c</span> <span class="n">j</span> <span class="err">•</span> <span class="n">minor</span> <span class="n">M</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">ni</span><span class="o">,</span> <span class="n">fin</span><span class="bp">.</span><span class="n">pred_above</span> <span class="n">i</span> <span class="n">ni</span> <span class="bp">_</span><span class="o">)</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">nj</span><span class="o">,</span> <span class="n">fin</span><span class="bp">.</span><span class="n">pred_above</span> <span class="n">j</span> <span class="n">nj</span> <span class="bp">_</span><span class="o">)))</span>
<span class="bp">```</span><span class="c1">---</span>
<span class="n">still</span> <span class="n">wrong</span>
</code></pre></div>



<a name="203482658"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/reducing%20determinate%20of%20a%20matrix/near/203482658" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/reducing.20determinate.20of.20a.20matrix.html#203482658">(Jul 10 2020 at 08:39)</a>:</h4>
<p>Not suggesting that you need to change your approach, but: when I was working with minors to <a href="https://github.com/leanprover-community/mathlib/blob/master/src/linear_algebra/nonsingular_inverse.lean#L214">define the adjugate</a>, I found it easier to define it in terms of Cramer's map. So instead of directly removing a row and column from the matrix, set the <code>i</code>th column to the <code>j</code>'th basis vector. And as the next step, show that going from <code>cramer_map A</code> to <code>minor A</code> doesn't change the determinant.</p>



<a name="203501180"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/reducing%20determinate%20of%20a%20matrix/near/203501180" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/reducing.20determinate.20of.20a.20matrix.html#203501180">(Jul 10 2020 at 12:36)</a>:</h4>
<p>I'll try that out. But if the idea is to reduce the det of an explicit 2 x 2 matrix to the ad - bc term, wouldn't relying on a linear map make that difficult?</p>



<a name="205023887"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/reducing%20determinate%20of%20a%20matrix/near/205023887" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eloi <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/reducing.20determinate.20of.20a.20matrix.html#205023887">(Jul 25 2020 at 22:13)</a>:</h4>
<p><span class="user-mention silent" data-user-id="238446">Anne Baanen</span> <a href="#narrow/stream/113488-general/topic/reducing.20determinate.20of.20a.20matrix/near/203381735">said</a>:</p>
<blockquote>
<p>We could try a proof like this:</p>
<div class="codehilite"><pre><span></span><code><span class="kn">lemma</span> <span class="n">det_2x2</span> <span class="o">(</span><span class="n">M</span> <span class="o">:</span> <span class="n">matrix</span> <span class="o">(</span><span class="n">fin</span> <span class="mi">2</span><span class="o">)</span> <span class="o">(</span><span class="n">fin</span> <span class="mi">2</span><span class="o">)</span> <span class="n">R</span><span class="o">)</span> <span class="o">:</span> <span class="n">M</span><span class="bp">.</span><span class="n">det</span> <span class="bp">=</span> <span class="n">M</span> <span class="mi">0</span> <span class="mi">0</span> <span class="bp">*</span> <span class="n">M</span> <span class="mi">1</span> <span class="mi">1</span> <span class="bp">-</span> <span class="n">M</span> <span class="mi">1</span> <span class="mi">0</span> <span class="bp">*</span> <span class="n">M</span> <span class="mi">0</span> <span class="mi">1</span> <span class="o">:=</span>
<span class="k">calc</span> <span class="n">M</span><span class="bp">.</span><span class="n">det</span> <span class="bp">=</span> <span class="bp">_</span> <span class="c">/-</span><span class="cm"> fill in something clever -/</span> <span class="o">:</span> <span class="n">refl</span>
<span class="bp">...</span> <span class="bp">=</span> <span class="n">M</span> <span class="mi">0</span> <span class="mi">0</span> <span class="bp">*</span> <span class="n">M</span> <span class="mi">1</span> <span class="mi">1</span> <span class="bp">-</span> <span class="n">M</span> <span class="mi">1</span> <span class="mi">0</span> <span class="bp">*</span> <span class="n">M</span> <span class="mi">0</span> <span class="mi">1</span> <span class="o">:</span> <span class="k">by</span> <span class="o">{</span> <span class="n">simp</span><span class="o">,</span> <span class="n">ring</span> <span class="o">}</span>
</code></pre></div>


</blockquote>
<p>Hi, I tried this method but for the inverse, and it worked sometimes:<br>
This works fine:</p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="n">tactic</span>
<span class="kn">import</span> <span class="n">linear_algebra</span><span class="bp">.</span><span class="n">special_linear_group</span>
<span class="kn">open</span> <span class="n">matrix</span>

<span class="kn">lemma</span> <span class="n">inverse₀₀</span> <span class="o">(</span><span class="n">M</span> <span class="o">:</span> <span class="n">special_linear_group</span> <span class="o">(</span><span class="n">fin</span> <span class="mi">2</span><span class="o">)</span> <span class="bp">ℤ</span><span class="o">):</span> <span class="n">M</span><span class="bp">⁻¹</span> <span class="mi">0</span> <span class="mi">0</span> <span class="bp">=</span> <span class="n">M</span> <span class="mi">1</span> <span class="mi">1</span> <span class="o">:=</span>
<span class="k">calc</span> <span class="n">M</span><span class="bp">⁻¹</span> <span class="mi">0</span> <span class="mi">0</span> <span class="bp">=</span> <span class="o">(</span><span class="mi">1</span><span class="bp">*</span><span class="o">(</span><span class="mi">1</span><span class="bp">*</span> <span class="o">(</span> <span class="bp">_</span> <span class="bp">*</span> <span class="mi">1</span><span class="o">)))</span> <span class="bp">+</span> <span class="o">(</span> <span class="bp">-</span><span class="mi">1</span> <span class="bp">*</span><span class="o">(</span> <span class="bp">_</span> <span class="bp">*</span> <span class="mi">0</span><span class="o">)</span> <span class="bp">+</span> <span class="mi">0</span><span class="o">):</span> <span class="n">refl</span> <span class="bp">_</span>
        <span class="bp">...</span> <span class="bp">=</span> <span class="n">M</span> <span class="mi">1</span> <span class="mi">1</span> <span class="o">:</span> <span class="k">by</span> <span class="o">{</span><span class="n">simp</span><span class="o">,</span> <span class="n">ring</span><span class="o">}</span>

<span class="kn">lemma</span> <span class="n">inverse₀₁</span> <span class="o">(</span><span class="n">M</span> <span class="o">:</span> <span class="n">special_linear_group</span> <span class="o">(</span><span class="n">fin</span> <span class="mi">2</span><span class="o">)</span> <span class="bp">ℤ</span><span class="o">):</span> <span class="n">M</span><span class="bp">⁻¹</span> <span class="mi">0</span> <span class="mi">1</span> <span class="bp">=</span> <span class="bp">-</span> <span class="n">M</span> <span class="mi">0</span> <span class="mi">1</span> <span class="o">:=</span>
<span class="k">calc</span> <span class="n">M</span><span class="bp">⁻¹</span> <span class="mi">0</span> <span class="mi">1</span> <span class="bp">=</span> <span class="o">(</span><span class="mi">1</span> <span class="bp">*</span> <span class="o">(</span><span class="bp">_</span> <span class="bp">*</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">+</span> <span class="o">(</span><span class="bp">-</span><span class="mi">1</span> <span class="bp">*</span> <span class="o">(</span><span class="mi">1</span><span class="bp">*</span> <span class="o">(</span><span class="bp">_</span> <span class="bp">*</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="mi">0</span><span class="o">):</span> <span class="n">refl</span> <span class="bp">_</span>
        <span class="bp">...</span> <span class="bp">=</span> <span class="bp">-</span> <span class="n">M</span> <span class="mi">0</span> <span class="mi">1</span> <span class="o">:</span><span class="k">by</span> <span class="o">{</span><span class="n">simp</span><span class="o">,</span> <span class="n">ring</span><span class="o">}</span>
</code></pre></div>


<p>but I don't know how to make this one work:</p>
<div class="codehilite"><pre><span></span><code><span class="kn">lemma</span> <span class="n">inverse₁₀</span> <span class="o">(</span><span class="n">M</span> <span class="o">:</span> <span class="n">special_linear_group</span> <span class="o">(</span><span class="n">fin</span> <span class="mi">2</span><span class="o">)</span> <span class="bp">ℤ</span><span class="o">):</span> <span class="n">M</span><span class="bp">⁻¹</span> <span class="mi">1</span> <span class="mi">0</span> <span class="bp">=</span> <span class="bp">-</span> <span class="n">M</span> <span class="mi">1</span> <span class="mi">0</span> <span class="o">:=</span>
<span class="k">calc</span> <span class="n">M</span><span class="bp">⁻¹</span> <span class="mi">0</span> <span class="mi">1</span> <span class="bp">=</span> <span class="o">(</span><span class="mi">1</span> <span class="bp">*</span> <span class="o">(</span><span class="bp">_</span> <span class="bp">*</span> <span class="o">(</span><span class="bp">_</span> <span class="bp">*</span> <span class="mi">1</span><span class="o">)))</span> <span class="bp">+</span> <span class="o">(</span><span class="bp">-</span><span class="mi">1</span> <span class="bp">*</span> <span class="o">(</span><span class="bp">_</span> <span class="bp">*</span> <span class="bp">_</span><span class="o">)</span> <span class="bp">+</span> <span class="mi">0</span><span class="o">):</span> <span class="n">refl</span> <span class="bp">_</span>
        <span class="bp">...</span> <span class="bp">=</span> <span class="bp">-</span> <span class="n">M</span> <span class="mi">0</span> <span class="mi">1</span> <span class="o">:</span><span class="k">by</span> <span class="o">{</span><span class="n">simp</span><span class="o">,</span> <span class="n">ring</span><span class="o">}</span>
</code></pre></div>


<p>Using <code>#reduce</code> I obtain:</p>
<div class="codehilite"><pre><span></span><code><span class="kn">variables</span> <span class="n">A</span> <span class="o">:</span> <span class="n">special_linear_group</span> <span class="o">(</span><span class="n">fin</span> <span class="mi">2</span><span class="o">)</span> <span class="bp">ℤ</span>
<span class="bp">#</span><span class="n">reduce</span> <span class="n">A</span><span class="bp">⁻¹</span> <span class="mi">1</span> <span class="mi">0</span>
<span class="c1">-- result:</span>
<span class="c">/-</span><span class="cm"></span>
<span class="cm">(</span>
<span class="cm">    (int.of_nat 1).mul(                     This is 1 * ( 0 * (_ * 1))</span>
<span class="cm">            (int.of_nat 0).mul (</span>
<span class="cm">                (A.val ⟨1, _⟩ ⟨1, _⟩).mul (</span>
<span class="cm">                    int.of_nat 1</span>
<span class="cm">    )))).add                                            +</span>
<span class="cm">    ((-[1+ 0].mul (                                -1 * (_ * 1)</span>
<span class="cm">        (A.val ⟨1, _⟩ ⟨0, _⟩).mul (</span>
<span class="cm">            int.of_nat 1</span>
<span class="cm">    ))).add (                                           +</span>
<span class="cm">        int.of_nat 0))                                  0</span>
<span class="cm">-/</span>
</code></pre></div>


<p>but writing </p>
<div class="codehilite"><pre><span></span><code><span class="kn">lemma</span> <span class="n">inverse₁₀</span> <span class="o">(</span><span class="n">M</span> <span class="o">:</span> <span class="n">special_linear_group</span> <span class="o">(</span><span class="n">fin</span> <span class="mi">2</span><span class="o">)</span> <span class="bp">ℤ</span><span class="o">):</span> <span class="n">M</span><span class="bp">⁻¹</span> <span class="mi">1</span> <span class="mi">0</span> <span class="bp">=</span> <span class="bp">-</span> <span class="n">M</span> <span class="mi">1</span> <span class="mi">0</span> <span class="o">:=</span>
<span class="k">calc</span> <span class="n">M</span><span class="bp">⁻¹</span> <span class="mi">0</span> <span class="mi">1</span> <span class="bp">=</span> <span class="o">(</span><span class="mi">1</span> <span class="bp">*</span> <span class="o">(</span><span class="bp">_</span> <span class="bp">*</span> <span class="o">(</span><span class="bp">_</span> <span class="bp">*</span> <span class="mi">1</span><span class="o">)))</span> <span class="bp">+</span> <span class="o">(</span><span class="bp">-</span><span class="mi">1</span> <span class="bp">*</span> <span class="o">(</span><span class="bp">_</span> <span class="bp">*</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span> <span class="mi">0</span><span class="o">):</span> <span class="n">refl</span> <span class="bp">_</span>
        <span class="bp">...</span> <span class="bp">=</span> <span class="bp">-</span> <span class="n">M</span> <span class="mi">0</span> <span class="mi">1</span> <span class="o">:</span><span class="k">by</span> <span class="o">{</span><span class="n">simp</span><span class="o">,</span> <span class="n">ring</span><span class="o">}</span>
</code></pre></div>


<p>does not work. However writing the <code>1</code> in the "wrong" place works¿?:</p>
<div class="codehilite"><pre><span></span><code><span class="kn">lemma</span> <span class="n">inverse₁₀</span> <span class="o">(</span><span class="n">M</span> <span class="o">:</span> <span class="n">special_linear_group</span> <span class="o">(</span><span class="n">fin</span> <span class="mi">2</span><span class="o">)</span> <span class="bp">ℤ</span><span class="o">):</span> <span class="n">M</span><span class="bp">⁻¹</span> <span class="mi">1</span> <span class="mi">0</span> <span class="bp">=</span> <span class="bp">-</span> <span class="n">M</span> <span class="mi">1</span> <span class="mi">0</span> <span class="o">:=</span>
<span class="k">calc</span> <span class="n">M</span><span class="bp">⁻¹</span> <span class="mi">0</span> <span class="mi">1</span> <span class="bp">=</span> <span class="o">(</span><span class="mi">1</span> <span class="bp">*</span> <span class="o">(</span><span class="bp">_</span> <span class="bp">*</span> <span class="o">(</span><span class="bp">_</span> <span class="bp">*</span> <span class="mi">1</span><span class="o">)))</span> <span class="bp">+</span> <span class="o">(</span><span class="bp">-</span><span class="mi">1</span> <span class="bp">*</span> <span class="o">(</span><span class="mi">1</span> <span class="bp">*</span> <span class="bp">_</span><span class="o">)</span> <span class="bp">+</span> <span class="mi">0</span><span class="o">):</span> <span class="n">refl</span> <span class="bp">_</span>
        <span class="bp">...</span> <span class="bp">=</span> <span class="bp">-</span> <span class="n">M</span> <span class="mi">0</span> <span class="mi">1</span> <span class="o">:</span><span class="k">by</span> <span class="o">{</span><span class="n">simp</span><span class="o">,</span> <span class="n">ring</span><span class="o">}</span>
</code></pre></div>


<p>After that I get stuck and I can't make it work.</p>
<p>Thanks, and sorry for the long question <span aria-label="scroll" class="emoji emoji-1f4dc" role="img" title="scroll">:scroll:</span></p>



<a name="205024391"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/reducing%20determinate%20of%20a%20matrix/near/205024391" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/reducing.20determinate.20of.20a.20matrix.html#205024391">(Jul 25 2020 at 22:26)</a>:</h4>
<p>you got the indices wrong on <code> M⁻¹ 1 0</code> and <code>- M 1 0</code></p>



<a name="205024420"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/reducing%20determinate%20of%20a%20matrix/near/205024420" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/reducing.20determinate.20of.20a.20matrix.html#205024420">(Jul 25 2020 at 22:27)</a>:</h4>
<div class="codehilite"><pre><span></span><code><span class="kn">lemma</span> <span class="n">inverse₁₀</span> <span class="o">(</span><span class="n">M</span> <span class="o">:</span> <span class="n">special_linear_group</span> <span class="o">(</span><span class="n">fin</span> <span class="mi">2</span><span class="o">)</span> <span class="bp">ℤ</span><span class="o">):</span> <span class="n">M</span><span class="bp">⁻¹</span> <span class="mi">1</span> <span class="mi">0</span> <span class="bp">=</span> <span class="bp">-</span> <span class="n">M</span> <span class="mi">1</span> <span class="mi">0</span> <span class="o">:=</span>
<span class="k">calc</span> <span class="n">M</span><span class="bp">⁻¹</span> <span class="mi">1</span> <span class="mi">0</span> <span class="bp">=</span> <span class="o">(</span><span class="mi">1</span> <span class="bp">*</span> <span class="o">(</span><span class="mi">0</span> <span class="bp">*</span> <span class="o">(</span><span class="bp">_</span> <span class="bp">*</span> <span class="mi">1</span><span class="o">)))</span> <span class="bp">+</span> <span class="o">(</span><span class="bp">-</span><span class="mi">1</span> <span class="bp">*</span> <span class="o">(</span><span class="bp">_</span> <span class="bp">*</span> <span class="bp">_</span><span class="o">)</span> <span class="bp">+</span> <span class="mi">0</span><span class="o">):</span> <span class="n">rfl</span>
        <span class="bp">...</span> <span class="bp">=</span> <span class="bp">-</span> <span class="n">M</span> <span class="mi">1</span> <span class="mi">0</span> <span class="o">:</span> <span class="k">by</span> <span class="o">{</span><span class="n">simp</span><span class="o">,</span> <span class="n">ring</span><span class="o">}</span>
</code></pre></div>



<a name="205024617"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/reducing%20determinate%20of%20a%20matrix/near/205024617" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eloi <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/reducing.20determinate.20of.20a.20matrix.html#205024617">(Jul 25 2020 at 22:32)</a>:</h4>
<p>Ouch thanks <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span></p>



<a name="205024631"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/reducing%20determinate%20of%20a%20matrix/near/205024631" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/reducing.20determinate.20of.20a.20matrix.html#205024631">(Jul 25 2020 at 22:33)</a>:</h4>
<p>by the way, you can be even more clever with this kind of proof, since rfl lines are always redundant in <code>calc</code>:</p>
<div class="codehilite"><pre><span></span><code><span class="kn">lemma</span> <span class="n">inverse₁₀</span> <span class="o">(</span><span class="n">M</span> <span class="o">:</span> <span class="n">special_linear_group</span> <span class="o">(</span><span class="n">fin</span> <span class="mi">2</span><span class="o">)</span> <span class="bp">ℤ</span><span class="o">):</span> <span class="n">M</span><span class="bp">⁻¹</span> <span class="mi">1</span> <span class="mi">0</span> <span class="bp">=</span> <span class="bp">-</span> <span class="n">M</span> <span class="mi">1</span> <span class="mi">0</span> <span class="o">:=</span>
<span class="k">show</span> <span class="o">(</span><span class="mi">1</span> <span class="bp">*</span> <span class="o">(</span><span class="mi">0</span> <span class="bp">*</span> <span class="o">(</span><span class="bp">_</span> <span class="bp">*</span> <span class="mi">1</span><span class="o">))</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="bp">+</span> <span class="o">(</span><span class="bp">-</span><span class="mi">1</span> <span class="bp">*</span> <span class="o">(</span><span class="bp">_</span> <span class="bp">*</span> <span class="bp">_</span><span class="o">)</span> <span class="bp">+</span> <span class="mi">0</span><span class="o">)</span> <span class="bp">=</span> <span class="bp">_</span><span class="o">,</span> <span class="k">by</span> <span class="o">{</span><span class="n">simp</span><span class="o">,</span> <span class="n">ring</span><span class="o">}</span>
</code></pre></div>



<a name="226532927"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/reducing%20determinate%20of%20a%20matrix/near/226532927" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/reducing.20determinate.20of.20a.20matrix.html#226532927">(Feb 16 2021 at 16:05)</a>:</h4>
<p>Finally, due to <a href="https://github.com/leanprover-community/mathlib/issues/5593">#5593</a>, we have:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">data.matrix.notation</span>
<span class="kn">import</span> <span class="n">linear_algebra.determinant</span>
<span class="kn">import</span> <span class="n">group_theory.perm.fin</span>
<span class="kn">import</span> <span class="n">tactic.norm_swap</span>

<span class="kd">example</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">comm_ring</span> <span class="n">α</span><span class="o">]</span> <span class="o">{</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="n">d</span> <span class="o">:</span> <span class="n">α</span><span class="o">}</span> <span class="o">:</span>
  <span class="n">matrix.det</span> <span class="bp">!</span><span class="o">[</span><span class="bp">!</span><span class="o">[</span><span class="n">a</span><span class="o">,</span> <span class="n">b</span><span class="o">],</span> <span class="bp">!</span><span class="o">[</span><span class="n">c</span><span class="o">,</span> <span class="n">d</span><span class="o">]]</span> <span class="bp">=</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">d</span> <span class="bp">-</span> <span class="n">b</span> <span class="bp">*</span> <span class="n">c</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">simp</span> <span class="o">[</span><span class="n">matrix.det</span><span class="o">,</span> <span class="n">finset.univ_perm_fin_succ</span><span class="o">,</span> <span class="bp">←</span><span class="n">finset.univ_product_univ</span><span class="o">,</span> <span class="n">finset.sum_product</span><span class="o">,</span>
        <span class="n">fin.sum_univ_succ</span><span class="o">,</span> <span class="n">fin.prod_univ_succ</span><span class="o">],</span>
  <span class="n">ring</span>
<span class="kd">end</span>

<span class="kd">example</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">comm_ring</span> <span class="n">α</span><span class="o">]</span> <span class="o">(</span><span class="n">A</span> <span class="o">:</span> <span class="n">matrix</span> <span class="o">(</span><span class="n">fin</span> <span class="mi">3</span><span class="o">)</span> <span class="o">(</span><span class="n">fin</span> <span class="mi">3</span><span class="o">)</span> <span class="n">α</span><span class="o">)</span> <span class="o">{</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="n">d</span> <span class="n">e</span> <span class="n">f</span> <span class="n">g</span> <span class="n">h</span> <span class="n">i</span> <span class="o">:</span> <span class="n">α</span><span class="o">}</span> <span class="o">:</span>
        <span class="n">matrix.det</span> <span class="bp">!</span><span class="o">[</span><span class="bp">!</span><span class="o">[</span><span class="n">a</span><span class="o">,</span> <span class="n">b</span><span class="o">,</span> <span class="n">c</span><span class="o">],</span> <span class="bp">!</span><span class="o">[</span><span class="n">d</span><span class="o">,</span> <span class="n">e</span><span class="o">,</span> <span class="n">f</span><span class="o">],</span> <span class="bp">!</span><span class="o">[</span><span class="n">g</span><span class="o">,</span> <span class="n">h</span><span class="o">,</span> <span class="n">i</span><span class="o">]]</span> <span class="bp">=</span>
          <span class="n">a</span> <span class="bp">*</span> <span class="n">e</span> <span class="bp">*</span> <span class="n">i</span> <span class="bp">-</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">f</span> <span class="bp">*</span> <span class="n">h</span> <span class="bp">-</span> <span class="n">b</span> <span class="bp">*</span> <span class="n">d</span> <span class="bp">*</span> <span class="n">i</span> <span class="bp">+</span> <span class="n">b</span> <span class="bp">*</span> <span class="n">f</span> <span class="bp">*</span> <span class="n">g</span> <span class="bp">+</span> <span class="n">c</span> <span class="bp">*</span> <span class="n">d</span> <span class="bp">*</span> <span class="n">h</span> <span class="bp">-</span> <span class="n">c</span> <span class="bp">*</span> <span class="n">e</span> <span class="bp">*</span> <span class="n">g</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="c1">-- We utilize the `norm_swap` plugin for `norm_num` to reduce swap terms</span>
  <span class="n">norm_num</span> <span class="o">[</span><span class="n">matrix.det</span><span class="o">,</span> <span class="n">finset.univ_perm_fin_succ</span><span class="o">,</span> <span class="bp">←</span><span class="n">finset.univ_product_univ</span><span class="o">,</span>
            <span class="n">finset.sum_product</span><span class="o">,</span> <span class="n">fin.sum_univ_succ</span><span class="o">,</span> <span class="n">fin.prod_univ_succ</span><span class="o">],</span>
  <span class="n">ring</span>
<span class="kd">end</span>
</code></pre></div>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>