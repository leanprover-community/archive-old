---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/set.20notation.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/set.20notation.html">set notation</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="188656082"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/set%20notation/near/188656082" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/set.20notation.html#188656082">(Feb 20 2020 at 17:00)</a>:</h4>
<p>Currently <code>{a, b}</code> is defined as <code>insert b {a}</code>, so various lemmas about insert reverse the order. E.g., <code>Sup {a, b}</code> simplifies to <code>sup b a</code> while I'd expect <code>sup a b</code>. Is there any reason to have it this way?</p>



<a name="193818978"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/set%20notation/near/193818978" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/set.20notation.html#193818978">(Apr 13 2020 at 20:43)</a>:</h4>
<p>From times to times I get random errors using set notations. We can do:</p>
<div class="codehilite"><pre><span></span><span class="kn">variables</span> <span class="n">s</span> <span class="o">:</span> <span class="n">set</span> <span class="bp">ℕ</span>

<span class="bp">#</span><span class="kn">check</span> <span class="o">{</span><span class="n">x</span> <span class="bp">|</span> <span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">}</span>
<span class="bp">#</span><span class="kn">check</span> <span class="o">{</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℤ</span> <span class="bp">|</span> <span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">}</span>
<span class="bp">#</span><span class="kn">check</span> <span class="o">{</span><span class="n">x</span> <span class="err">∈</span> <span class="n">s</span> <span class="bp">|</span> <span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">}</span>
</pre></div>


<p>But sometimes the second variant rises an error "function expected at", but it's very hard to minimize. Does anyone understand the magic behind this notation? Only the last variation (which is pretty rarely used) has a clear origin using the <code>has_sep</code> class.</p>



<a name="193820282"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/set%20notation/near/193820282" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/set.20notation.html#193820282">(Apr 13 2020 at 20:56)</a>:</h4>
<p>The first two are parsed in C++ with hardcoded <code>set_of</code></p>



<a name="193820395"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/set%20notation/near/193820395" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/set.20notation.html#193820395">(Apr 13 2020 at 20:57)</a>:</h4>
<p><a href="https://github.com/leanprover-community/lean/blob/master/src/frontends/lean/brackets.cpp#L28" title="https://github.com/leanprover-community/lean/blob/master/src/frontends/lean/brackets.cpp#L28">https://github.com/leanprover-community/lean/blob/master/src/frontends/lean/brackets.cpp#L28</a></p>



<a name="193821997"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/set%20notation/near/193821997" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/set.20notation.html#193821997">(Apr 13 2020 at 21:12)</a>:</h4>
<p>Yes I understand that things that are not defined by Lean code are defined by C++ code. My question was not precise enough. I'd like to know whether other people see random failure with these notations and know how to fix them.</p>



<a name="193822596"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/set%20notation/near/193822596" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/set.20notation.html#193822596">(Apr 13 2020 at 21:17)</a>:</h4>
<p>I've never seen a failure, but it's possible that it's triggered by certain combinations of leaving things out which I might be systematically avoiding for style reasons</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>