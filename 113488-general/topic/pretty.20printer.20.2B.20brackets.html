---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/pretty.20printer.20.2B.20brackets.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/pretty.20printer.20.2B.20brackets.html">pretty printer + brackets</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="236908168"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pretty%20printer%20%2B%20brackets/near/236908168" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/pretty.20printer.20.2B.20brackets.html#236908168">(Apr 30 2021 at 21:43)</a>:</h4>
<p><a href="/user_uploads/3121/lKDZYnKRPtGa8Td-4NxMTXdp/image.png">image.png</a> </p>
<div class="message_inline_image"><a href="/user_uploads/3121/lKDZYnKRPtGa8Td-4NxMTXdp/image.png" title="image.png"><img src="/user_uploads/3121/lKDZYnKRPtGa8Td-4NxMTXdp/image.png"></a></div><p>is this considered a bug or a feature?</p>



<a name="236913377"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pretty%20printer%20%2B%20brackets/near/236913377" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/pretty.20printer.20.2B.20brackets.html#236913377">(Apr 30 2021 at 22:41)</a>:</h4>
<p>Bug</p>



<a name="236913461"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pretty%20printer%20%2B%20brackets/near/236913461" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/pretty.20printer.20.2B.20brackets.html#236913461">(Apr 30 2021 at 22:42)</a>:</h4>
<p>But I think it's a font rendering bug in webkit / blink</p>



<a name="236913480"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pretty%20printer%20%2B%20brackets/near/236913480" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/pretty.20printer.20.2B.20brackets.html#236913480">(Apr 30 2021 at 22:42)</a>:</h4>
<p>I've seen it in doc-gen too</p>



<a name="236913495"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pretty%20printer%20%2B%20brackets/near/236913495" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/pretty.20printer.20.2B.20brackets.html#236913495">(Apr 30 2021 at 22:43)</a>:</h4>
<p>I've also seen this sometimes. I think it usually only happens when coercion arrows are present.</p>



<a name="236913886"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pretty%20printer%20%2B%20brackets/near/236913886" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/pretty.20printer.20.2B.20brackets.html#236913886">(Apr 30 2021 at 22:47)</a>:</h4>
<p>This is the "random close-bracket in the wrong place" bug I think?</p>



<a name="237139333"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pretty%20printer%20%2B%20brackets/near/237139333" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/pretty.20printer.20.2B.20brackets.html#237139333">(May 03 2021 at 10:11)</a>:</h4>
<p>Some of my students see this bug <em>everywhere</em> and it's driving me crazy, especially since I can't reproduce it on any computer I can access to. I think fixing this should be very high priority but I don't see how to help without being able to reproduce.</p>



<a name="237139542"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pretty%20printer%20%2B%20brackets/near/237139542" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/pretty.20printer.20.2B.20brackets.html#237139542">(May 03 2021 at 10:13)</a>:</h4>
<p>is the second close bracket considered a bug?</p>



<a name="237139551"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pretty%20printer%20%2B%20brackets/near/237139551" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/pretty.20printer.20.2B.20brackets.html#237139551">(May 03 2021 at 10:13)</a>:</h4>
<p>because I see that all the time</p>



<a name="237139626"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pretty%20printer%20%2B%20brackets/near/237139626" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/pretty.20printer.20.2B.20brackets.html#237139626">(May 03 2021 at 10:14)</a>:</h4>
<p>I think only the <code>)</code> in the blue box is the bug</p>



<a name="237139659"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pretty%20printer%20%2B%20brackets/near/237139659" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/pretty.20printer.20.2B.20brackets.html#237139659">(May 03 2021 at 10:14)</a>:</h4>
<p>Because the reading order has to backtrack vertically which isn't how reading is supposed to work</p>



<a name="237139794"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pretty%20printer%20%2B%20brackets/near/237139794" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/pretty.20printer.20.2B.20brackets.html#237139794">(May 03 2021 at 10:16)</a>:</h4>
<p>I see this bug a lot for <code>↥</code>, but it seems not to happen for <code>⇑</code> for me</p>



<a name="237139861"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pretty%20printer%20%2B%20brackets/near/237139861" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/pretty.20printer.20.2B.20brackets.html#237139861">(May 03 2021 at 10:16)</a>:</h4>
<p>Putting the cursor at the beginning of this line does it for me:<br>
<a href="https://github.com/leanprover-community/mathlib/blob/0cc3cd54efb97332e973e0ff1ca94dbd486899eb/src/algebra/direct_sum_graded.lean#L584">https://github.com/leanprover-community/mathlib/blob/0cc3cd54efb97332e973e0ff1ca94dbd486899eb/src/algebra/direct_sum_graded.lean#L584</a></p>



<a name="237139871"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pretty%20printer%20%2B%20brackets/near/237139871" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/pretty.20printer.20.2B.20brackets.html#237139871">(May 03 2021 at 10:16)</a>:</h4>
<p><a href="user_uploads/3121/7S_dDSWq895paWvJSk6bx-zx/image.png">image.png</a></p>
<div class="message_inline_image"><a href="user_uploads/3121/7S_dDSWq895paWvJSk6bx-zx/image.png" title="image.png"><img src="user_uploads/3121/7S_dDSWq895paWvJSk6bx-zx/image.png"></a></div>



<a name="237140107"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pretty%20printer%20%2B%20brackets/near/237140107" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/pretty.20printer.20.2B.20brackets.html#237140107">(May 03 2021 at 10:19)</a>:</h4>
<p>This also reproduces it for me:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">algebra.pointwise</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">S</span> <span class="o">:</span> <span class="n">set</span> <span class="n">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="bp">↥</span><span class="o">(</span><span class="n">S</span> <span class="bp">+</span> <span class="n">S</span><span class="o">)</span> <span class="bp">=</span> <span class="bp">↥</span><span class="o">(</span><span class="n">S</span> <span class="bp">+</span> <span class="n">S</span><span class="o">)</span> <span class="o">:=</span> <span class="gr">sorry</span>  <span class="c1">-- goal view is wonky at the sorry</span>
</code></pre></div>



<a name="237142451"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pretty%20printer%20%2B%20brackets/near/237142451" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/pretty.20printer.20.2B.20brackets.html#237142451">(May 03 2021 at 10:41)</a>:</h4>
<p>I see no issue at all</p>



<a name="237142546"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pretty%20printer%20%2B%20brackets/near/237142546" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/pretty.20printer.20.2B.20brackets.html#237142546">(May 03 2021 at 10:42)</a>:</h4>
<p>in Eric's two examples</p>



<a name="237144302"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pretty%20printer%20%2B%20brackets/near/237144302" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/pretty.20printer.20.2B.20brackets.html#237144302">(May 03 2021 at 11:01)</a>:</h4>
<p>With what font?</p>



<a name="237144308"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pretty%20printer%20%2B%20brackets/near/237144308" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/pretty.20printer.20.2B.20brackets.html#237144308">(May 03 2021 at 11:02)</a>:</h4>
<p>This is a font / CSS issue I think</p>



<a name="237144446"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pretty%20printer%20%2B%20brackets/near/237144446" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/pretty.20printer.20.2B.20brackets.html#237144446">(May 03 2021 at 11:03)</a>:</h4>
<p>DevaVu sans mono</p>



<a name="237144582"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pretty%20printer%20%2B%20brackets/near/237144582" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/pretty.20printer.20.2B.20brackets.html#237144582">(May 03 2021 at 11:04)</a>:</h4>
<p>I see it with Consolas on Windows</p>



<a name="237144852"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pretty%20printer%20%2B%20brackets/near/237144852" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/pretty.20printer.20.2B.20brackets.html#237144852">(May 03 2021 at 11:07)</a>:</h4>
<p>The CSS specifies the indents in terms of "ch", the width of an <code>0</code>. In consolas, that character is considerably narrower than an <code>0</code>:<br>
<a href="/user_uploads/3121/1tltKY9lqvApcV24cL-rU1UU/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/3121/1tltKY9lqvApcV24cL-rU1UU/image.png" title="image.png"><img src="/user_uploads/3121/1tltKY9lqvApcV24cL-rU1UU/image.png"></a></div>



<a name="237144868"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pretty%20printer%20%2B%20brackets/near/237144868" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/pretty.20printer.20.2B.20brackets.html#237144868">(May 03 2021 at 11:07)</a>:</h4>
<p>it's a font thing for sure; just installed dejavu sans mono and it's fixed itself<br>
<a href="/user_uploads/3121/-9cpD2g_8FOaU6hWsU0Lb-e0/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/3121/-9cpD2g_8FOaU6hWsU0Lb-e0/image.png" title="image.png"><img src="/user_uploads/3121/-9cpD2g_8FOaU6hWsU0Lb-e0/image.png"></a></div>



<a name="237145162"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pretty%20printer%20%2B%20brackets/near/237145162" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/pretty.20printer.20.2B.20brackets.html#237145162">(May 03 2021 at 11:10)</a>:</h4>
<p><span class="user-mention" data-user-id="121918">@Edward Ayers</span> do you think you could fix this issue now that we understood where it comes from?</p>



<a name="237145363"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pretty%20printer%20%2B%20brackets/near/237145363" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/pretty.20printer.20.2B.20brackets.html#237145363">(May 03 2021 at 11:12)</a>:</h4>
<p>Does anyone know a simple way to explain how to install DejaVu sans mono on Windows or Mac? I mean simple enough that students could understand.</p>



<a name="237145397"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pretty%20printer%20%2B%20brackets/near/237145397" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/pretty.20printer.20.2B.20brackets.html#237145397">(May 03 2021 at 11:13)</a>:</h4>
<p>its super easy on windows, just get the files, double click them and there's an install button</p>



<a name="237145435"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pretty%20printer%20%2B%20brackets/near/237145435" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/pretty.20printer.20.2B.20brackets.html#237145435">(May 03 2021 at 11:13)</a>:</h4>
<p><a href="/user_uploads/3121/Zhu6QETiY0dUFYeXUYu7p4dV/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/3121/Zhu6QETiY0dUFYeXUYu7p4dV/image.png" title="image.png"><img src="/user_uploads/3121/Zhu6QETiY0dUFYeXUYu7p4dV/image.png"></a></div>



<a name="237145785"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pretty%20printer%20%2B%20brackets/near/237145785" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/pretty.20printer.20.2B.20brackets.html#237145785">(May 03 2021 at 11:16)</a>:</h4>
<p><del>Here's a <a href="https://leanprover-community.github.io/mwe.html">#mwe</a>: <a href="/user_uploads/3121/e3kBXb5H9wIr6BmEEvh_Oc9b/bad.html">bad.html</a></del> edit: i messed that up</p>



<a name="237145837"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pretty%20printer%20%2B%20brackets/near/237145837" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/pretty.20printer.20.2B.20brackets.html#237145837">(May 03 2021 at 11:17)</a>:</h4>
<p>Similarly on a mac. Download the zip file, unzip it, double click on a font file, and click "install font":<br>
<a href="/user_uploads/3121/2ImrNW7ny9vZqRvZKtFOFPh2/Screen-Shot-2021-05-03-at-9.16.38-pm.png">Screen-Shot-2021-05-03-at-9.16.38-pm.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/3121/2ImrNW7ny9vZqRvZKtFOFPh2/Screen-Shot-2021-05-03-at-9.16.38-pm.png" title="Screen-Shot-2021-05-03-at-9.16.38-pm.png"><img src="/user_uploads/3121/2ImrNW7ny9vZqRvZKtFOFPh2/Screen-Shot-2021-05-03-at-9.16.38-pm.png"></a></div>



<a name="237146045"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pretty%20printer%20%2B%20brackets/near/237146045" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/pretty.20printer.20.2B.20brackets.html#237146045">(May 03 2021 at 11:20)</a>:</h4>
<p>Thanks Eric and Scott, I'll try to tell my students to try this.</p>



<a name="237146399"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pretty%20printer%20%2B%20brackets/near/237146399" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/pretty.20printer.20.2B.20brackets.html#237146399">(May 03 2021 at 11:23)</a>:</h4>
<p>If I change <code>ch</code> to <code>ex</code> in the CSS the problem goes away</p>



<a name="237146462"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pretty%20printer%20%2B%20brackets/near/237146462" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/pretty.20printer.20.2B.20brackets.html#237146462">(May 03 2021 at 11:24)</a>:</h4>
<p>Actual mwe copied out of vscode: <a href="/user_uploads/3121/lFdbsFII9nm3Qz7rI6eQb_i5/bad.html">bad.html</a></p>



<a name="237146497"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pretty%20printer%20%2B%20brackets/near/237146497" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/pretty.20printer.20.2B.20brackets.html#237146497">(May 03 2021 at 11:24)</a>:</h4>
<p>Which is weird, because <code>ch</code> is supposedly the width of a <code>0</code>, and <code>ex</code> the width of an <code>x</code>... Which are the same in a monospace font</p>



<a name="237146772"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pretty%20printer%20%2B%20brackets/near/237146772" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/pretty.20printer.20.2B.20brackets.html#237146772">(May 03 2021 at 11:27)</a>:</h4>
<p>Your bad example displays fine here. Maybe I don't have that font and my browser falls back to a good one.</p>



<a name="237146783"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pretty%20printer%20%2B%20brackets/near/237146783" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/pretty.20printer.20.2B.20brackets.html#237146783">(May 03 2021 at 11:27)</a>:</h4>
<p>i also thought <code>ex</code> was width, but just googled and it seems <code>ex</code> is height of <code>x</code> (which is the same, but not the same as height of 0? unsure)</p>



<a name="237146793"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pretty%20printer%20%2B%20brackets/near/237146793" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/pretty.20printer.20.2B.20brackets.html#237146793">(May 03 2021 at 11:27)</a>:</h4>
<p>not sure if Linux has consolas Patrick</p>



<a name="237149276"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pretty%20printer%20%2B%20brackets/near/237149276" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/pretty.20printer.20.2B.20brackets.html#237149276">(May 03 2021 at 11:53)</a>:</h4>
<p>Ah, in that case my proposed fix is not a justified one</p>



<a name="237720247"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pretty%20printer%20%2B%20brackets/near/237720247" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Edward Ayers <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/pretty.20printer.20.2B.20brackets.html#237720247">(May 06 2021 at 20:04)</a>:</h4>
<p>The autoindenting CSS strikes again</p>



<a name="237720629"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pretty%20printer%20%2B%20brackets/near/237720629" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Edward Ayers <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/pretty.20printer.20.2B.20brackets.html#237720629">(May 06 2021 at 20:08)</a>:</h4>
<p>The problem is that get getting the pretty indenting in CSS to work is a little hacky. I think that the correct approach would be to take full control of newlines and so on based on the width of the view, but I think that would be quite a lot of work.</p>



<a name="237720770"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pretty%20printer%20%2B%20brackets/near/237720770" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/pretty.20printer.20.2B.20brackets.html#237720770">(May 06 2021 at 20:08)</a>:</h4>
<p>Presumably the text reflowing would be a JavaScript job within the view window</p>



<a name="237720814"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pretty%20printer%20%2B%20brackets/near/237720814" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/pretty.20printer.20.2B.20brackets.html#237720814">(May 06 2021 at 20:09)</a>:</h4>
<p>But I agree, that sounds like a lot of work</p>



<a name="237720838"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pretty%20printer%20%2B%20brackets/near/237720838" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Edward Ayers <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/pretty.20printer.20.2B.20brackets.html#237720838">(May 06 2021 at 20:09)</a>:</h4>
<p>Ideally no. Because it breaks the abstraction of Lean sending widgety HTML.</p>



<a name="237720856"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pretty%20printer%20%2B%20brackets/near/237720856" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Edward Ayers <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/pretty.20printer.20.2B.20brackets.html#237720856">(May 06 2021 at 20:09)</a>:</h4>
<p>But practically yes do it with javascript</p>



<a name="237720954"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pretty%20printer%20%2B%20brackets/near/237720954" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/pretty.20printer.20.2B.20brackets.html#237720954">(May 06 2021 at 20:10)</a>:</h4>
<p>Oh, I assumed the goal view was special-cased</p>



<a name="237720976"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pretty%20printer%20%2B%20brackets/near/237720976" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Edward Ayers <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/pretty.20printer.20.2B.20brackets.html#237720976">(May 06 2021 at 20:10)</a>:</h4>
<p>No it's all done by lean</p>



<a name="237721020"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pretty%20printer%20%2B%20brackets/near/237721020" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/pretty.20printer.20.2B.20brackets.html#237721020">(May 06 2021 at 20:11)</a>:</h4>
<p>Alternatively: output every character in the goal view in its own span with  min-width set to 1ch</p>



<a name="237721060"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pretty%20printer%20%2B%20brackets/near/237721060" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/pretty.20printer.20.2B.20brackets.html#237721060">(May 06 2021 at 20:11)</a>:</h4>
<p>But that increases the textual size of the html by an order of magnitude</p>



<a name="237721093"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pretty%20printer%20%2B%20brackets/near/237721093" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Edward Ayers <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/pretty.20printer.20.2B.20brackets.html#237721093">(May 06 2021 at 20:11)</a>:</h4>
<p>The dream of widgets was that absolutely all of the presentation code would be in Lean, so you wouldn't have to ever worry about javascript. But there are lots of places where that breaks so I don't think it's worth holding on to that abstraction in the cases where it is clearly awkward.</p>



<a name="237721284"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pretty%20printer%20%2B%20brackets/near/237721284" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Edward Ayers <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/pretty.20printer.20.2B.20brackets.html#237721284">(May 06 2021 at 20:13)</a>:</h4>
<p><span class="user-mention silent" data-user-id="310045">Eric Wieser</span> <a href="#narrow/stream/113488-general/topic/pretty.20printer.20.2B.20brackets/near/237721060">said</a>:</p>
<blockquote>
<p>But that increases the textual size of the html by an order of magnitude</p>
</blockquote>
<p>I suspect this would actually have ok performance.</p>



<a name="237721469"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pretty%20printer%20%2B%20brackets/near/237721469" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/pretty.20printer.20.2B.20brackets.html#237721469">(May 06 2021 at 20:14)</a>:</h4>
<p>Maybe it's sufficient to put a span around every word with min-width proportional to its number of characters</p>



<a name="237721482"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pretty%20printer%20%2B%20brackets/near/237721482" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Edward Ayers <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/pretty.20printer.20.2B.20brackets.html#237721482">(May 06 2021 at 20:14)</a>:</h4>
<p>yeah that might work</p>



<a name="237721494"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pretty%20printer%20%2B%20brackets/near/237721494" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Edward Ayers <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/pretty.20printer.20.2B.20brackets.html#237721494">(May 06 2021 at 20:14)</a>:</h4>
<p>might get some clipping</p>



<a name="237721509"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pretty%20printer%20%2B%20brackets/near/237721509" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/pretty.20printer.20.2B.20brackets.html#237721509">(May 06 2021 at 20:15)</a>:</h4>
<p>Assuming we don't wrap within words right now</p>



<a name="237721524"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pretty%20printer%20%2B%20brackets/near/237721524" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/pretty.20printer.20.2B.20brackets.html#237721524">(May 06 2021 at 20:15)</a>:</h4>
<p>Min-width shouldn't clip</p>



<a name="237721574"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pretty%20printer%20%2B%20brackets/near/237721574" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/pretty.20printer.20.2B.20brackets.html#237721574">(May 06 2021 at 20:15)</a>:</h4>
<p>It should just insert extra space sometimes</p>



<a name="237721677"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pretty%20printer%20%2B%20brackets/near/237721677" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Edward Ayers <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/pretty.20printer.20.2B.20brackets.html#237721677">(May 06 2021 at 20:16)</a>:</h4>
<p>yeah an alternative might be to just add some extra space whenever there is a grouping in the pretty-printed sexpr</p>



<a name="237722316"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pretty%20printer%20%2B%20brackets/near/237722316" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Edward Ayers <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/pretty.20printer.20.2B.20brackets.html#237722316">(May 06 2021 at 20:21)</a>:</h4>
<p>The styles to fiddle with are in <a href="https://github.com/leanprover-community/mathlib/blob/9c86e38141b94bcd23665717f26c1da1622c59a7/src/tactic/interactive_expr.lean#L157">https://github.com/leanprover-community/mathlib/blob/9c86e38141b94bcd23665717f26c1da1622c59a7/src/tactic/interactive_expr.lean#L157</a></p>



<a name="237722993"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pretty%20printer%20%2B%20brackets/near/237722993" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/pretty.20printer.20.2B.20brackets.html#237722993">(May 06 2021 at 20:26)</a>:</h4>
<p>Isn't there at least a temporary fix swapping <code>ex</code> and <code>ch</code> or whatever?</p>



<a name="237723292"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pretty%20printer%20%2B%20brackets/near/237723292" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Edward Ayers <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/pretty.20printer.20.2B.20brackets.html#237723292">(May 06 2021 at 20:29)</a>:</h4>
<p><span class="user-mention" data-user-id="310045">@Eric Wieser</span> sorry why did setting it as <code>ex</code> work?</p>



<a name="237723405"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pretty%20printer%20%2B%20brackets/near/237723405" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Edward Ayers <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/pretty.20printer.20.2B.20brackets.html#237723405">(May 06 2021 at 20:30)</a>:</h4>
<p><span class="user-mention silent" data-user-id="310045">Eric Wieser</span> <a href="#narrow/stream/113488-general/topic/pretty.20printer.20.2B.20brackets/near/237146399">said</a>:</p>
<blockquote>
<p><del>If I change <code>ch</code> to <code>ex</code> in the CSS the problem goes away</del></p>
</blockquote>
<p>Why was this crossed out sorry?</p>



<a name="237723643"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pretty%20printer%20%2B%20brackets/near/237723643" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/pretty.20printer.20.2B.20brackets.html#237723643">(May 06 2021 at 20:32)</a>:</h4>
<p>Because it is a bad idea</p>



<a name="237723671"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pretty%20printer%20%2B%20brackets/near/237723671" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/pretty.20printer.20.2B.20brackets.html#237723671">(May 06 2021 at 20:32)</a>:</h4>
<p><code>ex</code> is for vertical spacing</p>



<a name="237723730"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pretty%20printer%20%2B%20brackets/near/237723730" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Edward Ayers <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/pretty.20printer.20.2B.20brackets.html#237723730">(May 06 2021 at 20:32)</a>:</h4>
<p>So for context, <span class="user-mention" data-user-id="235513">@Daniel Fabian</span>  spotted a trick where you can emulate Wadler-style pretty printing in CSS by setting the text indentation to be a negative number and padding to be minus that number, then if that block can't fit on one line, it will linebreak with an apparent indent. But what is happening here (which I unfortunately didn't observe because I have a all-unicode monospaced font) is some width calculating maths in the browser is messing up and it is linebreaking because of the different-width characters.</p>



<a name="237723805"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pretty%20printer%20%2B%20brackets/near/237723805" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Edward Ayers <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/pretty.20printer.20.2B.20brackets.html#237723805">(May 06 2021 at 20:33)</a>:</h4>
<p><span class="user-mention silent" data-user-id="310045">Eric Wieser</span> <a href="#narrow/stream/113488-general/topic/pretty.20printer.20.2B.20brackets/near/237723671">said</a>:</p>
<blockquote>
<p><code>ex</code> is for vertical spacing</p>
</blockquote>
<p>But did it actually fix the problem?</p>



<a name="237723822"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pretty%20printer%20%2B%20brackets/near/237723822" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Edward Ayers <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/pretty.20printer.20.2B.20brackets.html#237723822">(May 06 2021 at 20:33)</a>:</h4>
<p>Maybe we could use px</p>



<a name="237724148"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pretty%20printer%20%2B%20brackets/near/237724148" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Edward Ayers <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/pretty.20printer.20.2B.20brackets.html#237724148">(May 06 2021 at 20:35)</a>:</h4>
<p><span class="user-mention" data-user-id="310045">@Eric Wieser</span>  how do I use your bad.html mwe?</p>



<a name="237724257"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pretty%20printer%20%2B%20brackets/near/237724257" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Edward Ayers <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/pretty.20printer.20.2B.20brackets.html#237724257">(May 06 2021 at 20:36)</a>:</h4>
<p>should it just render bad or do I need to change the width of the viewport?</p>



<a name="237724320"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pretty%20printer%20%2B%20brackets/near/237724320" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/pretty.20printer.20.2B.20brackets.html#237724320">(May 06 2021 at 20:36)</a>:</h4>
<p>It should just render badly</p>



<a name="237724356"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pretty%20printer%20%2B%20brackets/near/237724356" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Edward Ayers <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/pretty.20printer.20.2B.20brackets.html#237724356">(May 06 2021 at 20:36)</a>:</h4>
<p>In chrome?</p>



<a name="237724400"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pretty%20printer%20%2B%20brackets/near/237724400" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/pretty.20printer.20.2B.20brackets.html#237724400">(May 06 2021 at 20:37)</a>:</h4>
<p>Anything other than 1ch will not indent right when it's actually supposed to wrap</p>



<a name="237724413"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pretty%20printer%20%2B%20brackets/near/237724413" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/pretty.20printer.20.2B.20brackets.html#237724413">(May 06 2021 at 20:37)</a>:</h4>
<p>Chrome on windows</p>



<a name="237725338"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pretty%20printer%20%2B%20brackets/near/237725338" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Edward Ayers <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/pretty.20printer.20.2B.20brackets.html#237725338">(May 06 2021 at 20:44)</a>:</h4>
<p>Do you know if there are any linux fonts where this bug happens?</p>



<a name="237725459"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pretty%20printer%20%2B%20brackets/near/237725459" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Edward Ayers <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/pretty.20printer.20.2B.20brackets.html#237725459">(May 06 2021 at 20:45)</a>:</h4>
<p>got it</p>



<a name="237725849"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pretty%20printer%20%2B%20brackets/near/237725849" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Edward Ayers <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/pretty.20printer.20.2B.20brackets.html#237725849">(May 06 2021 at 20:48)</a>:</h4>
<p><span class="user-mention" data-user-id="310045">@Eric Wieser</span>  please could you have a go at changing the <code>ex</code> → <code>em</code>?</p>



<a name="237726024"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pretty%20printer%20%2B%20brackets/near/237726024" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Edward Ayers <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/pretty.20printer.20.2B.20brackets.html#237726024">(May 06 2021 at 20:49)</a>:</h4>
<p>never mind it breaks for me</p>



<a name="237726036"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pretty%20printer%20%2B%20brackets/near/237726036" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Edward Ayers <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/pretty.20printer.20.2B.20brackets.html#237726036">(May 06 2021 at 20:49)</a>:</h4>
<p>wow</p>



<a name="237735538"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pretty%20printer%20%2B%20brackets/near/237735538" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Edward Ayers <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/pretty.20printer.20.2B.20brackets.html#237735538">(May 06 2021 at 21:45)</a>:</h4>
<p>This bug is mad</p>



<a name="237735846"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pretty%20printer%20%2B%20brackets/near/237735846" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Edward Ayers <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/pretty.20printer.20.2B.20brackets.html#237735846">(May 06 2021 at 21:47)</a>:</h4>
<p><span class="user-mention" data-user-id="310045">@Eric Wieser</span> please could you try the bad example with <code>0.9ch</code>?</p>



<a name="237736040"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pretty%20printer%20%2B%20brackets/near/237736040" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/pretty.20printer.20.2B.20brackets.html#237736040">(May 06 2021 at 21:49)</a>:</h4>
<p>The bug is easier to reproduce another way</p>



<a name="237736046"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pretty%20printer%20%2B%20brackets/near/237736046" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/pretty.20printer.20.2B.20brackets.html#237736046">(May 06 2021 at 21:49)</a>:</h4>
<p>Change 1ch to 2ch</p>



<a name="237736060"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pretty%20printer%20%2B%20brackets/near/237736060" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Edward Ayers <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/pretty.20printer.20.2B.20brackets.html#237736060">(May 06 2021 at 21:50)</a>:</h4>
<p>where?</p>



<a name="237736127"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pretty%20printer%20%2B%20brackets/near/237736127" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/pretty.20printer.20.2B.20brackets.html#237736127">(May 06 2021 at 21:50)</a>:</h4>
<p>And instead of using the weird arrow character that is too narrow, compare a one char prefix with a two char prefix</p>



<a name="237736138"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pretty%20printer%20%2B%20brackets/near/237736138" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/pretty.20printer.20.2B.20brackets.html#237736138">(May 06 2021 at 21:50)</a>:</h4>
<p>Everywhere</p>



<a name="237736183"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pretty%20printer%20%2B%20brackets/near/237736183" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/pretty.20printer.20.2B.20brackets.html#237736183">(May 06 2021 at 21:50)</a>:</h4>
<p>The cause is that <code>\u-|</code> is less than 1ch wide</p>



<a name="237736422"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pretty%20printer%20%2B%20brackets/near/237736422" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/pretty.20printer.20.2B.20brackets.html#237736422">(May 06 2021 at 21:53)</a>:</h4>
<p>I can give you a better repro tomorrow</p>



<a name="237736579"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pretty%20printer%20%2B%20brackets/near/237736579" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Edward Ayers <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/pretty.20printer.20.2B.20brackets.html#237736579">(May 06 2021 at 21:55)</a>:</h4>
<p>no need I've found a small one</p>



<a name="237736968"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pretty%20printer%20%2B%20brackets/near/237736968" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/pretty.20printer.20.2B.20brackets.html#237736968">(May 06 2021 at 21:58)</a>:</h4>
<p>Did you find the ascii-only repro?</p>



<a name="237737020"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pretty%20printer%20%2B%20brackets/near/237737020" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Edward Ayers <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/pretty.20printer.20.2B.20brackets.html#237737020">(May 06 2021 at 21:59)</a>:</h4>
<p>Yeah you get it whenever the <del>text-indent</del> minus text-indent is <del>lower</del> greater than the minwidth char</p>



<a name="237737042"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pretty%20printer%20%2B%20brackets/near/237737042" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Edward Ayers <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/pretty.20printer.20.2B.20brackets.html#237737042">(May 06 2021 at 21:59)</a>:</h4>
<p>so if you use a non-monospace font then you get it p quickly</p>



<a name="237737085"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pretty%20printer%20%2B%20brackets/near/237737085" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/pretty.20printer.20.2B.20brackets.html#237737085">(May 06 2021 at 21:59)</a>:</h4>
<p>Right, but you can get it for monospace ascii too</p>



<a name="237737122"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pretty%20printer%20%2B%20brackets/near/237737122" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Edward Ayers <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/pretty.20printer.20.2B.20brackets.html#237737122">(May 06 2021 at 21:59)</a>:</h4>
<p>Yes by setting it to <code>2ch</code></p>



<a name="237737193"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pretty%20printer%20%2B%20brackets/near/237737193" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Edward Ayers <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/pretty.20printer.20.2B.20brackets.html#237737193">(May 06 2021 at 22:00)</a>:</h4>
<p>since that is a greater width than the narrowest char</p>



<a name="237737317"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pretty%20printer%20%2B%20brackets/near/237737317" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/pretty.20printer.20.2B.20brackets.html#237737317">(May 06 2021 at 22:01)</a>:</h4>
<p>That sounds like the reverse of what you said above</p>



<a name="237737352"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pretty%20printer%20%2B%20brackets/near/237737352" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Edward Ayers <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/pretty.20printer.20.2B.20brackets.html#237737352">(May 06 2021 at 22:01)</a>:</h4>
<p>text indent is negative</p>



<a name="237737402"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pretty%20printer%20%2B%20brackets/near/237737402" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Edward Ayers <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/pretty.20printer.20.2B.20brackets.html#237737402">(May 06 2021 at 22:01)</a>:</h4>
<p>ygwim</p>



<a name="237737515"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pretty%20printer%20%2B%20brackets/near/237737515" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Edward Ayers <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/pretty.20printer.20.2B.20brackets.html#237737515">(May 06 2021 at 22:02)</a>:</h4>
<p>So the quick-and-dirty solution is to set it to use <code>0.9ch</code> or whatever width these offending chars are</p>



<a name="237737534"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pretty%20printer%20%2B%20brackets/near/237737534" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Edward Ayers <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/pretty.20printer.20.2B.20brackets.html#237737534">(May 06 2021 at 22:03)</a>:</h4>
<p>maybe just set it as 0.5ch</p>



<a name="237737609"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pretty%20printer%20%2B%20brackets/near/237737609" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Edward Ayers <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/pretty.20printer.20.2B.20brackets.html#237737609">(May 06 2021 at 22:03)</a>:</h4>
<p>and then the quest begins to find a way of indenting stuff that doesn't require this hack</p>



<a name="237737632"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pretty%20printer%20%2B%20brackets/near/237737632" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Edward Ayers <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/pretty.20printer.20.2B.20brackets.html#237737632">(May 06 2021 at 22:03)</a>:</h4>
<p>in the first place</p>



<a name="237737925"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pretty%20printer%20%2B%20brackets/near/237737925" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/pretty.20printer.20.2B.20brackets.html#237737925">(May 06 2021 at 22:06)</a>:</h4>
<p>0.5 makes the line wrapping look a little weird though</p>



<a name="237737987"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pretty%20printer%20%2B%20brackets/near/237737987" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Edward Ayers <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/pretty.20printer.20.2B.20brackets.html#237737987">(May 06 2021 at 22:06)</a>:</h4>
<p>what is the biggest number you can get away with?</p>



<a name="237738005"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pretty%20printer%20%2B%20brackets/near/237738005" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Edward Ayers <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/pretty.20printer.20.2B.20brackets.html#237738005">(May 06 2021 at 22:07)</a>:</h4>
<p>I think that the main pain point is windows users with consolas</p>



<a name="237738014"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pretty%20printer%20%2B%20brackets/near/237738014" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/pretty.20printer.20.2B.20brackets.html#237738014">(May 06 2021 at 22:07)</a>:</h4>
<p><code>\_l</code> is pretty darn narrow</p>



<a name="237738167"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pretty%20printer%20%2B%20brackets/near/237738167" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/pretty.20printer.20.2B.20brackets.html#237738167">(May 06 2021 at 22:08)</a>:</h4>
<p>Frankly just putting coe_sort in a 1ch box would fix all the problems I actually see often</p>



<a name="237738297"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pretty%20printer%20%2B%20brackets/near/237738297" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Edward Ayers <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/pretty.20printer.20.2B.20brackets.html#237738297">(May 06 2021 at 22:09)</a>:</h4>
<p>Ok maybe let's do that for now, and a few other common killers</p>



<a name="237739387"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pretty%20printer%20%2B%20brackets/near/237739387" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Edward Ayers <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/pretty.20printer.20.2B.20brackets.html#237739387">(May 06 2021 at 22:19)</a>:</h4>
<p>I'll have another go tomorrow</p>



<a name="238404129"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pretty%20printer%20%2B%20brackets/near/238404129" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/pretty.20printer.20.2B.20brackets.html#238404129">(May 12 2021 at 00:50)</a>:</h4>
<p>just to make everything even more annoying, this can even happen with DejaVu Sans Mono depending on the screen resolution and stuff (if I make the widget screen-wide, it goes away but that's clearly undesirable :b there's some other wider element way above in the goal view,  and for some reason it doesn't allow this to be wider because of it)</p>
<p><a href="/user_uploads/3121/h5idSy7Ctigo5W07OJv00-H4/image.png">image.png</a> </p>
<div class="message_inline_image"><a href="/user_uploads/3121/h5idSy7Ctigo5W07OJv00-H4/image.png" title="image.png"><img src="/user_uploads/3121/h5idSy7Ctigo5W07OJv00-H4/image.png"></a></div><p>(<code>polynomial_galois_group.lean:243</code>)</p>



<a name="238406811"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pretty%20printer%20%2B%20brackets/near/238406811" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/pretty.20printer.20.2B.20brackets.html#238406811">(May 12 2021 at 01:22)</a>:</h4>
<p>I actually put my info view as a horizontal split instead, so below my code rather than beside it, for this sort of reason, I find it far easier to read that way even if having less lines of the source code visible is occasionally annoying.</p>



<a name="238435570"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pretty%20printer%20%2B%20brackets/near/238435570" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/pretty.20printer.20.2B.20brackets.html#238435570">(May 12 2021 at 07:56)</a>:</h4>
<p>Eric, that image doesn't seem to show the same bug</p>



<a name="238435677"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/pretty%20printer%20%2B%20brackets/near/238435677" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/pretty.20printer.20.2B.20brackets.html#238435677">(May 12 2021 at 07:57)</a>:</h4>
<p>I think that's working as intended, or at least could be construed to be; unlike the original report, it's not actively breaking the reading order</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>