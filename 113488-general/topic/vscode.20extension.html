---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/vscode.20extension.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/vscode.20extension.html">vscode extension</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="197556822"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/vscode%20extension/near/197556822" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/vscode.20extension.html#197556822">(May 14 2020 at 13:51)</a>:</h4>
<p>The vscode extension now has two new features:</p>
<ul>
<li><code>ctrl+shift+p sticky</code>: allows you to sticky the infoview at the current position.  It will keep updating and show the errors at the original position even if you edit somewhere else.  Thanks to <span class="user-mention" data-user-id="110049">@Mario Carneiro</span> </li>
<li>The <code>see note [sandwich]</code> comments are linkified.</li>
</ul>



<a name="197562731"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/vscode%20extension/near/197562731" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/vscode.20extension.html#197562731">(May 14 2020 at 14:25)</a>:</h4>
<p>But how about <code>ctrl + shift + p -- "Lean restart"</code>?</p>



<a name="197604238"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/vscode%20extension/near/197604238" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Daniel Fabian <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/vscode.20extension.html#197604238">(May 14 2020 at 19:13)</a>:</h4>
<p>Is there a feature like paste the current goal? </p>
<p>A long chain of tactics is very convenient to write, but basically impossible to read without vscode. So sometimes it'd be very, add a <code>show [paste current goal here]</code> or a <code>calc [paste current goal here]</code> just to make the proof easier to read.</p>
<p>However as it stands now, the moment you write <code>show</code> or <code>calc</code> it wipes the proof state and you basically don't know what you're trying to write.</p>



<a name="197604272"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/vscode%20extension/near/197604272" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/vscode.20extension.html#197604272">(May 14 2020 at 19:13)</a>:</h4>
<p>There is a tactic <code>extract_goal</code></p>



<a name="197604310"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/vscode%20extension/near/197604310" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/vscode.20extension.html#197604310">(May 14 2020 at 19:13)</a>:</h4>
<p>It's not exactly what you describe</p>



<a name="197604406"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/vscode%20extension/near/197604406" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/vscode.20extension.html#197604406">(May 14 2020 at 19:14)</a>:</h4>
<p>I usually write</p>
<div class="codehilite"><pre><span></span><code><span class="c">/-</span><span class="cm"></span>
<span class="cm">-/</span>
</code></pre></div>


<p>and then paste the goal in it.</p>



<a name="197604412"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/vscode%20extension/near/197604412" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Daniel Fabian <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/vscode.20extension.html#197604412">(May 14 2020 at 19:14)</a>:</h4>
<p>we have an <code>alt+v</code> for things like <code>library_search</code>, right?</p>



<a name="197604439"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/vscode%20extension/near/197604439" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/vscode.20extension.html#197604439">(May 14 2020 at 19:14)</a>:</h4>
<p>After that, I prepend <code>show</code>, or <code>calc</code>, or <code>change</code>, etc...</p>



<a name="197604448"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/vscode%20extension/near/197604448" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/vscode.20extension.html#197604448">(May 14 2020 at 19:14)</a>:</h4>
<p>And then remove the comments</p>



<a name="197604460"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/vscode%20extension/near/197604460" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Daniel Fabian <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/vscode.20extension.html#197604460">(May 14 2020 at 19:15)</a>:</h4>
<p>ya, same, lol. Alternatively you can pause the goal. Which would be ok, if you could keybind it, I suppose.</p>



<a name="197604487"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/vscode%20extension/near/197604487" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/vscode.20extension.html#197604487">(May 14 2020 at 19:15)</a>:</h4>
<p>You can keybind it</p>



<a name="197604508"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/vscode%20extension/near/197604508" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/vscode.20extension.html#197604508">(May 14 2020 at 19:15)</a>:</h4>
<p>I saw discussion a couple of days ago. Haven't done it myself</p>



<a name="197604512"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/vscode%20extension/near/197604512" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Daniel Fabian <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/vscode.20extension.html#197604512">(May 14 2020 at 19:15)</a>:</h4>
<p>oh, what's the command called?</p>



<a name="197604535"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/vscode%20extension/near/197604535" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/vscode.20extension.html#197604535">(May 14 2020 at 19:15)</a>:</h4>
<p>Something with <code>freeze</code> or <code>sticky</code>, I guess</p>



<a name="197604597"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/vscode%20extension/near/197604597" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/vscode.20extension.html#197604597">(May 14 2020 at 19:16)</a>:</h4>
<p><a href="#narrow/stream/113489-new-members/topic/lean.20for.20coq.20users.3F/near/196924597">https://leanprover.zulipchat.com/#narrow/stream/113489-new-members/topic/lean.20for.20coq.20users.3F/near/196924597</a></p>



<a name="197604610"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/vscode%20extension/near/197604610" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/vscode.20extension.html#197604610">(May 14 2020 at 19:16)</a>:</h4>
<p>Do you have the newest VScode lean extension? One was released today, I think.</p>



<a name="197604617"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/vscode%20extension/near/197604617" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/vscode.20extension.html#197604617">(May 14 2020 at 19:16)</a>:</h4>
<p>Search for "toggle updating" in the keyboard shortcuts.</p>



<a name="197604696"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/vscode%20extension/near/197604696" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/vscode.20extension.html#197604696">(May 14 2020 at 19:17)</a>:</h4>
<p>There's also a very new feature that freezes the position that's being inspected in the goal window. I haven't played around with that yet.</p>



<a name="197604699"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/vscode%20extension/near/197604699" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Daniel Fabian <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/vscode.20extension.html#197604699">(May 14 2020 at 19:17)</a>:</h4>
<p>there's sticky position</p>



<a name="197605170"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/vscode%20extension/near/197605170" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Daniel Fabian <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/vscode.20extension.html#197605170">(May 14 2020 at 19:21)</a>:</h4>
<p>oh, it doesn't show up in the commands but DOES show up in the keybindings. Ok that's just simply confusing :P</p>



<a name="197605638"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/vscode%20extension/near/197605638" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/vscode.20extension.html#197605638">(May 14 2020 at 19:25)</a>:</h4>
<p>We could easily add it to the commands. I'll open a PR to do it later tonight if no one beats me to it.</p>



<a name="197605833"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/vscode%20extension/near/197605833" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Daniel Fabian <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/vscode.20extension.html#197605833">(May 14 2020 at 19:27)</a>:</h4>
<p>As a general rule, I think we should have the commands available through the commands panel. Until today I didn't even know that it was possible for a keybind to <em>not</em> show up in the commands list.</p>



<a name="197640417"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/vscode%20extension/near/197640417" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/vscode.20extension.html#197640417">(May 15 2020 at 01:59)</a>:</h4>
<p>This ended up being a bigger PR than I thought it would be: <a href="https://github.com/leanprover/vscode-lean/issues/161">leanprover/vscode-lean#161</a> .</p>



<a name="201410195"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/vscode%20extension/near/201410195" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/vscode.20extension.html#201410195">(Jun 19 2020 at 16:06)</a>:</h4>
<p>Does anyone have any useful "tactic state filters" they use frequently (beyond the two included by default)? <span class="user-mention" data-user-id="121918">@Edward Ayers</span> is looking for a few test cases.</p>



<a name="201410230"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/vscode%20extension/near/201410230" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Edward Ayers <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/vscode.20extension.html#201410230">(Jun 19 2020 at 16:07)</a>:</h4>
<p>I've found some in the default config of vscode</p>



<a name="201410328"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/vscode%20extension/near/201410328" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Edward Ayers <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/vscode.20extension.html#201410328">(Jun 19 2020 at 16:07)</a>:</h4>
<p>So far I've got:</p>
<div class="codehilite"><pre><span></span><code><span class="p">[</span>
        <span class="p">{</span>
            <span class="nt">&quot;regex&quot;</span><span class="p">:</span> <span class="s2">&quot;^_&quot;</span><span class="p">,</span>
            <span class="nt">&quot;match&quot;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
            <span class="nt">&quot;flags&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;goals only&quot;</span><span class="p">,</span>
            <span class="nt">&quot;regex&quot;</span><span class="p">:</span> <span class="s2">&quot;^(‚ä¢|\\d+ goals|case|$)&quot;</span><span class="p">,</span>
            <span class="nt">&quot;match&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
            <span class="nt">&quot;flags&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span>
        <span class="p">}</span>
    <span class="p">]</span><span class="err">,</span>
</code></pre></div>



<a name="201413884"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/vscode%20extension/near/201413884" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/vscode.20extension.html#201413884">(Jun 19 2020 at 16:39)</a>:</h4>
<p>I'd be keen to see a filter which doesn't make it say <code>no info found at scratch6.lean:1:2</code> at the top at all times.</p>



<a name="201414081"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/vscode%20extension/near/201414081" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Edward Ayers <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/vscode.20extension.html#201414081">(Jun 19 2020 at 16:41)</a>:</h4>
<p>Would it be better to just not show anything?</p>



<a name="201414245"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/vscode%20extension/near/201414245" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/vscode.20extension.html#201414245">(Jun 19 2020 at 16:43)</a>:</h4>
<p>My instinct as a user (I've been using the widget stuff for about 24 hours now) is that whenever I'm in the middle of a proof, I just want to look at the very top of the output on the right and see my current goal. I found it a bit disorientating that there was always something above it.</p>



<a name="201414346"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/vscode%20extension/near/201414346" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Edward Ayers <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/vscode.20extension.html#201414346">(Jun 19 2020 at 16:44)</a>:</h4>
<p>:/ It shouldn't show <code>no info found</code> if the current goal is there</p>



<a name="201414937"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/vscode%20extension/near/201414937" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Edward Ayers <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/vscode.20extension.html#201414937">(Jun 19 2020 at 16:50)</a>:</h4>
<p><a href="/user_uploads/3121/OyyqDoOuZMlpMzbDuJcFqqni/lean-0.15.15.vsix">lean-0.15.15.vsix</a></p>



<a name="201446885"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/vscode%20extension/near/201446885" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/vscode.20extension.html#201446885">(Jun 19 2020 at 22:29)</a>:</h4>
<p>Oh, my current version shows "Error updating: . Try again." at the top of lean goal mode. I'll try updating.</p>



<a name="201446987"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/vscode%20extension/near/201446987" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/vscode.20extension.html#201446987">(Jun 19 2020 at 22:30)</a>:</h4>
<p>ooh that fixed it</p>



<a name="201815643"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/vscode%20extension/near/201815643" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/vscode.20extension.html#201815643">(Jun 24 2020 at 06:42)</a>:</h4>
<p>In VSCode over Remote-SSH, in the public lean extension (0.15.x), the freeze/unfreeze button is wonky:</p>
<p><a href="/user_uploads/3121/85Oihp88Lxw9eFact4ZQciIH/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/3121/85Oihp88Lxw9eFact4ZQciIH/image.png" title="image.png"><img src="/user_uploads/3121/85Oihp88Lxw9eFact4ZQciIH/image.png"></a></div>



<a name="201819547"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/vscode%20extension/near/201819547" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/vscode.20extension.html#201819547">(Jun 24 2020 at 07:46)</a>:</h4>
<p>Yes, loading local resources is pretty broken in vscode at the moment. <a href="https://github.com/microsoft/vscode/issues/89038">https://github.com/microsoft/vscode/issues/89038</a>  There was a fix planned for this month's release, but the fix is delayed.<br>
As a workaround, we're running an http server on localhost.  I'm not surprised this doesn't work over ssh.</p>



<a name="204304432"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/vscode%20extension/near/204304432" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Daniel Fabian <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/vscode.20extension.html#204304432">(Jul 18 2020 at 15:20)</a>:</h4>
<p>Any idea how hard/easy it would be to provide some rudimentary refactoring? We have go to definition and peek definition. One that I feel is missing and would be super helpful would be rename. This is not just a simple regex replace, because of variable shadowing, so we'd want the right variable to be renamed.</p>



<a name="204308495"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/vscode%20extension/near/204308495" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/vscode.20extension.html#204308495">(Jul 18 2020 at 17:01)</a>:</h4>
<p>I agree this would be really helpful, but it seems like it would be pretty difficult to me. VS Code does provide an API for <a href="https://code.visualstudio.com/api/references/vscode-api#RenameProvider">extensions to perform "symbol renames"</a>, however we would need a new Lean server command that would be able to search through all files in the project and figure out what edits would be appropriate.</p>
<p>As far as I know, the Lean 3 server doesn't currently have any way to search through files without opening them, so for a gigantic project like mathlib, that might take a very long time. I'm also not sure whether Lean currently remembers anything about the syntactic form of defs / theorems / proofs (other than where declarations are initially defined).</p>
<p>I seem to recall <span class="user-mention" data-user-id="112680">@Johan Commelin</span> had some secret tool using <a href="https://github.com/leanprover-community/lean-client-python">lean-client-python</a> that could do some of this though?</p>



<a name="204308642"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/vscode%20extension/near/204308642" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/vscode.20extension.html#204308642">(Jul 18 2020 at 17:04)</a>:</h4>
<p>It was actually <span class="user-mention" data-user-id="115715">@Jason Rute</span> that wrote the secret tool</p>



<a name="204313861"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/vscode%20extension/near/204313861" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Daniel Fabian <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/vscode.20extension.html#204313861">(Jul 18 2020 at 19:15)</a>:</h4>
<p>Oh I see. When I asked about this, I wasn't so much thinking large-scale refactoring as more like rename an <code>m</code> to an <code>s</code> inside of a function.</p>



<a name="204313903"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/vscode%20extension/near/204313903" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Daniel Fabian <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/vscode.20extension.html#204313903">(Jul 18 2020 at 19:16)</a>:</h4>
<p>would that be easier?</p>



<a name="204317750"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/vscode%20extension/near/204317750" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/vscode.20extension.html#204317750">(Jul 18 2020 at 21:04)</a>:</h4>
<p>Not sure. Like I said, the Lean server doesn't have functionality like this currently so it would have to be added in any case. Feel free to create an issue at <a href="https://github.com/leanprover-communtiy/lean/issues">https://github.com/leanprover-communtiy/lean/issues</a> but it might be something that won't appear before Lean 4.</p>



<a name="204317787"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/vscode%20extension/near/204317787" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/vscode.20extension.html#204317787">(Jul 18 2020 at 21:05)</a>:</h4>
<p>It also depends on how good the secret tool is; hopefully <span class="user-mention" data-user-id="115715">@Jason Rute</span> will show up and say more...</p>



<a name="204320161"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/vscode%20extension/near/204320161" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Rute <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/vscode.20extension.html#204320161">(Jul 18 2020 at 22:10)</a>:</h4>
<p>The "secret tool" is not so much as a secret as something that isn't as developed as it could be.  The code is here (currently in its own branch): <a href="https://github.com/leanprover-community/lean-client-python/blob/find-and-replace-example/examples/find_and_replace.py">https://github.com/leanprover-community/lean-client-python/blob/find-and-replace-example/examples/find_and_replace.py</a></p>



<a name="204320165"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/vscode%20extension/near/204320165" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Rute <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/vscode.20extension.html#204320165">(Jul 18 2020 at 22:10)</a>:</h4>
<p>Basically it is a fairly simple use case of the lean server, specifically Patrick's <a href="https://github.com/leanprover-community/lean-client-python">lean-client for python</a>.  We first find all strings of the desired form and then use the lean server to check if they are instances of the definition in question.  It will only work for instances that the lean server info command works on.  So it won't say work on the original definition (but that particular case could be fixed.)  Depending on the number of instances of the string it could take from minutes to hours to refactor.</p>



<a name="204320166"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/vscode%20extension/near/204320166" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Rute <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/vscode.20extension.html#204320166">(Jul 18 2020 at 22:10)</a>:</h4>
<p>The reason that this tool is not as developed as it could be is:</p>
<ol>
<li>The Lean client for python is still going through some significant bug fixes.  I dropped the ball here, but will try to finish them up.</li>
<li>This is really just a quick implementation of an idea.  (I wrote it in an afternoon.)  If someone is more ambitious (and knows about Python's <code>await</code>), they could try to turn it into a product.  (I have a number of ideas, but not the time or motivation to work on them now.)   The code above should be readable and if not, I can give you a walkthrough.  Also, I have shared step-by-step instructions with <span class="user-mention" data-user-id="112680">@Johan Commelin</span> that I'd be happy to share out with anyone.</li>
</ol>



<a name="204320233"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/vscode%20extension/near/204320233" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Rute <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/vscode.20extension.html#204320233">(Jul 18 2020 at 22:12)</a>:</h4>
<p>More about that tool can be found here: <a href="#narrow/stream/144837-PR-reviews/topic/.232953.20submodule.2Esubtype/near/199815692">https://leanprover.zulipchat.com/#narrow/stream/144837-PR-reviews/topic/.232953.20submodule.2Esubtype/near/199815692</a></p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>