---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/elaboration.20and.20unification.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/elaboration.20and.20unification.html">elaboration and unification</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="218174888"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/elaboration%20and%20unification/near/218174888" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Paul van Wamelen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/elaboration.20and.20unification.html#218174888">(Nov 28 2020 at 18:21)</a>:</h4>
<p>Can someone suggest a good reference for learning more about what exactly is meant by 'elaboration' and 'unification'? I have a vague feel for what they are but would like to learn more.</p>



<a name="218175320"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/elaboration%20and%20unification/near/218175320" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/elaboration.20and.20unification.html#218175320">(Nov 28 2020 at 18:33)</a>:</h4>
<p>My very vague understanding of what's going on here is that in principle elaboration and unification are just the study of filling in certain kinds of blanks. For example when you <code>apply</code> some theorem of the form a = b to a goal of <code>f x = 37</code> the elaborator figures out that a is going to be f x and b is going to be 37. However the issue is that sometimes the elaborator has to solve a gigantic logic problem, and how it solves it is very system specific, so now I have to start talking about Lean and because I'm just going from experience rather than reading the C++ code or meta Lean code (neither of which I understand) things will now start to get hazier.</p>
<p>Lean has this attribute system, where you can just stick a "tag" like <code>simp</code> or <code>no_lint docstring</code> or <code>irreducible</code> or even a tag which you made up yourself, onto a definition or theorem. These tags don't change the definition or theorem in any way, but they change the way various internal systems treat the definition or theorem. For example tagging a theorem with <code>simp</code> makes the simplifier aware of it. There are several tags which you can attach to things which change the way Lean elaborates them, for example <code>elab_as_eliminator</code> or <code>elab_simple</code>, and these slightly change the way the (presumably rather complicated) elaborator works when it's trying to fill in all the <code>{}</code> and <code>_</code> gaps in the term which it's trying to complete. We've seen examples recently where elaboration can fail for all sorts of obscure reasons, and then someone like Mario or Reid or one of the other people who _do_ know what's going on comes along and suggests a very minor tweak and all of a sudden things are working again.</p>



<a name="218175568"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/elaboration%20and%20unification/near/218175568" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Paul van Wamelen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/elaboration.20and.20unification.html#218175568">(Nov 28 2020 at 18:40)</a>:</h4>
<p>Isn't "figures out that a is going to be f x and b is going to be 37" unification? And elaboration is basically filling in underscores and other stuff that the user didn't supply explicitly?<br>
Are there some settings or traces that can show me what elaboration does?</p>



<a name="218175621"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/elaboration%20and%20unification/near/218175621" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/elaboration.20and.20unification.html#218175621">(Nov 28 2020 at 18:42)</a>:</h4>
<p>Elaboration is the whole proof script -&gt; proof process, which includes unification, type class inference, and running tactics</p>



<a name="218175634"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/elaboration%20and%20unification/near/218175634" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/elaboration.20and.20unification.html#218175634">(Nov 28 2020 at 18:43)</a>:</h4>
<p>unification is specifically "A : T needs to have type T' here so T = T' and therefore this and that metavariable can be assigned"</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>