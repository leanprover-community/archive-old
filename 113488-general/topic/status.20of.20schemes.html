---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/status.20of.20schemes.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html">status of schemes</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="207612276"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207612276" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207612276">(Aug 21 2020 at 08:56)</a>:</h4>
<p>And this uses category theory</p>



<a name="207612314"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207612314" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207612314">(Aug 21 2020 at 08:56)</a>:</h4>
<p>And I'm pretty sure that they're not at the point where we can start doing this</p>



<a name="207612334"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207612334" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207612334">(Aug 21 2020 at 08:56)</a>:</h4>
<p>Surely there is lots of work on schemes that can come to mathlib now, before anyone runs into needing sheaves of modules over a sheaf of rings...</p>



<a name="207612358"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207612358" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207612358">(Aug 21 2020 at 08:57)</a>:</h4>
<p>We can't even define a scheme I don't think Scott</p>



<a name="207612483"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207612483" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207612483">(Aug 21 2020 at 08:58)</a>:</h4>
<p>You're saying that checking the sheaf condition on a basis is the blocker?</p>



<a name="207612488"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207612488" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207612488">(Aug 21 2020 at 08:58)</a>:</h4>
<p>ok, so i can</p>
<div class="codehilite"><pre><span></span><code><span class="n">code</span> <span class="o">[</span><span class="n">anything</span> <span class="n">i</span> <span class="n">want</span><span class="o">]</span>
</code></pre></div>


<p>and if i import a file it will be from the version of mathlib that i have in my lean directory?</p>



<a name="207612508"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207612508" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207612508">(Aug 21 2020 at 08:59)</a>:</h4>
<p>Damiano read how to install projects on the community website</p>



<a name="207612509"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207612509" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207612509">(Aug 21 2020 at 08:59)</a>:</h4>
<p>That's good to know, I'll try to make that happen. I didn't realise anyone was yet waiting on that.</p>



<a name="207612514"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207612514" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207612514">(Aug 21 2020 at 08:59)</a>:</h4>
<p>Scott here's the issue</p>



<a name="207612545"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207612545" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207612545">(Aug 21 2020 at 08:59)</a>:</h4>
<p>A scheme is a ringed space locally isomorphic to Spec R</p>



<a name="207612554"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207612554" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207612554">(Aug 21 2020 at 08:59)</a>:</h4>
<p>The isomorphism takes place in the category of spaces equipped with a presheaf of rings</p>



<a name="207612614"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207612614" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207612614">(Aug 21 2020 at 09:00)</a>:</h4>
<p>But putting the presheaf of rings on Spec R is not as easy as it sounds because of non affine opens</p>



<a name="207612637"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207612637" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207612637">(Aug 21 2020 at 09:00)</a>:</h4>
<p>In Lean-scheme we put the presheaf on a basis</p>



<a name="207612661"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207612661" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207612661">(Aug 21 2020 at 09:01)</a>:</h4>
<p>Then proved it was a sheaf (although sheafifying would also work)</p>



<a name="207612680"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207612680" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207612680">(Aug 21 2020 at 09:01)</a>:</h4>
<p>And then proved that sheaves on X were the same as sheaves on a basis</p>



<a name="207612683"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207612683" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207612683">(Aug 21 2020 at 09:01)</a>:</h4>
<p>By hand</p>



<a name="207612696"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207612696" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207612696">(Aug 21 2020 at 09:01)</a>:</h4>
<p>In our particular case</p>



<a name="207612757"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207612757" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207612757">(Aug 21 2020 at 09:02)</a>:</h4>
<p>My understanding is that <span class="user-mention" data-user-id="246273">@Bhavik Mehta</span> has a bunch of this stuff in the topos repo but he also has a thesis to write</p>



<a name="207612813"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207612813" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207612813">(Aug 21 2020 at 09:03)</a>:</h4>
<p>I wish I knew whether we should be doing this with sites. Or just presheaves on <code>opens X</code>.</p>



<a name="207612888"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207612888" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207612888">(Aug 21 2020 at 09:04)</a>:</h4>
<p>The construction I sketched needs the concept of sheaf on something more general than opens X</p>



<a name="207612915"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207612915" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207612915">(Aug 21 2020 at 09:04)</a>:</h4>
<p>One could make the construction in a completely different way of course</p>



<a name="207612934"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207612934" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207612934">(Aug 21 2020 at 09:05)</a>:</h4>
<p>I think Hartshorne does it totally differently</p>



<a name="207612980"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207612980" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207612980">(Aug 21 2020 at 09:05)</a>:</h4>
<p>Are you just saying you want to check the sheaf condition only for covers consisting of opens in the basis?</p>



<a name="207612994"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207612994" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207612994">(Aug 21 2020 at 09:05)</a>:</h4>
<p>That's easy to do in the current setup.</p>



<a name="207613072"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207613072" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207613072">(Aug 21 2020 at 09:06)</a>:</h4>
<p><span class="user-mention" data-user-id="321459">@Damiano Testa</span> IIRC Hartshorne defines the sheaf of rings on Spec R directly by looking at functions on U taking values in some crazy disjoint union of rings</p>



<a name="207613084"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207613084" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207613084">(Aug 21 2020 at 09:06)</a>:</h4>
<p>This might be a way to proceed</p>



<a name="207613115"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207613115" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207613115">(Aug 21 2020 at 09:07)</a>:</h4>
<p>I think Harshorne basically defined the stalks first, and then recover the sheaf using "continuous" sections of the stalks;</p>



<a name="207613145"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207613145" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207613145">(Aug 21 2020 at 09:07)</a>:</h4>
<p>Scott I'm just saying that the way we did it pre category followed the stacks project approach which needed the concept of a presheaf and sheaf on a basis</p>



<a name="207613211"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207613211" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207613211">(Aug 21 2020 at 09:08)</a>:</h4>
<p>And my understanding is that these are not yet in mathlib</p>



<a name="207613241"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207613241" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207613241">(Aug 21 2020 at 09:08)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110038">Kevin Buzzard</span> <a href="#narrow/stream/113489-new-members/topic/invalid.20import/near/207613084">said</a>:</p>
<blockquote>
<p>This might be a way to proceed</p>
</blockquote>
<p>I think that he mentions <em>espaces étalés</em> somewhere, but it might be only in an exercise</p>



<a name="207613261"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207613261" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207613261">(Aug 21 2020 at 09:08)</a>:</h4>
<p>We should move this thread to #maths and call it current status of schemes</p>



<a name="207613263"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207613263" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207613263">(Aug 21 2020 at 09:08)</a>:</h4>
<p><a href="https://stacks.math.columbia.edu/tag/009H">https://stacks.math.columbia.edu/tag/009H</a></p>



<a name="207613284"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207613284" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207613284">(Aug 21 2020 at 09:09)</a>:</h4>
<p>Damiano I'm talking about the definition Hartshorne gives of the sheaf of rings on Spec R</p>



<a name="207613291"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207613291" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Notification Bot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207613291">(Aug 21 2020 at 09:09)</a>:</h4>
<p>This topic was moved here from <a class="stream-topic" data-stream-id="113489" href="/#narrow/stream/113489-new-members/topic/invalid.20import">#new members &gt; invalid import</a> by <span class="user-mention silent" data-user-id="110087">Scott Morrison</span></p>



<a name="207613353"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207613353" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207613353">(Aug 21 2020 at 09:10)</a>:</h4>
<p>Yes Scott we formalised stuff like that.</p>



<a name="207613367"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207613367" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207613367">(Aug 21 2020 at 09:10)</a>:</h4>
<p>In a hands on way</p>



<a name="207613399"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207613399" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207613399">(Aug 21 2020 at 09:11)</a>:</h4>
<p>With sheaves modelled as dependent functions taking values in Type</p>



<a name="207613472"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207613472" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207613472">(Aug 21 2020 at 09:12)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110038">Kevin Buzzard</span> <a href="#narrow/stream/113488-general/topic/status.20of.20schemes/near/207613284">said</a>:</p>
<blockquote>
<p>Damiano I'm talking about the definition Hartshorne gives of the sheaf of rings on Spec R</p>
</blockquote>
<p>Yes, he uses "continuous sections" by mapping to the disjoint union over all primes of the localizations</p>



<a name="207613473"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207613473" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207613473">(Aug 21 2020 at 09:12)</a>:</h4>
<p>One way to proceed here would be to deviate from the stacks project and use Hartshorne's definition, which is essentially applying the sheafification functor by hand</p>



<a name="207613510"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207613510" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207613510">(Aug 21 2020 at 09:12)</a>:</h4>
<p>I suspect that, in the long run, using sites might be a more robust approach</p>



<a name="207613516"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207613516" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207613516">(Aug 21 2020 at 09:12)</a>:</h4>
<p>Right Damiano. One could work in current mathlib and define this presheaf of rings</p>



<a name="207613534"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207613534" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207613534">(Aug 21 2020 at 09:13)</a>:</h4>
<p>If one went this way then there would be no need for sites</p>



<a name="207613537"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207613537" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207613537">(Aug 21 2020 at 09:13)</a>:</h4>
<p>after all, all this discussion is heavily founded on the notion of open sets and covers, which sites already contain in their definitions</p>



<a name="207613558"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207613558" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207613558">(Aug 21 2020 at 09:13)</a>:</h4>
<p>Sure, but you see in this game you always have to decide where to stop</p>



<a name="207613573"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207613573" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207613573">(Aug 21 2020 at 09:13)</a>:</h4>
<p>ok, I see!</p>



<a name="207613592"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207613592" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207613592">(Aug 21 2020 at 09:13)</a>:</h4>
<p>I could just as easily argue that schemes should not be formalised because they're a special case of stacks</p>



<a name="207613657"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207613657" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207613657">(Aug 21 2020 at 09:14)</a>:</h4>
<p>Or that we should just concentrate on making the topos</p>



<a name="207613659"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207613659" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207613659">(Aug 21 2020 at 09:14)</a>:</h4>
<p>which indeed is where i was going!  ahahaha</p>



<a name="207613669"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207613669" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207613669">(Aug 21 2020 at 09:14)</a>:</h4>
<p>:-)</p>



<a name="207613709"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207613709" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207613709">(Aug 21 2020 at 09:15)</a>:</h4>
<p>I think that there's no obstruction to just making the sheaf directly a la Hartshorne</p>



<a name="207613728"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207613728" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207613728">(Aug 21 2020 at 09:15)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110038">Kevin Buzzard</span> <a href="#narrow/stream/113488-general/topic/status.20of.20schemes/near/207612508">said</a>:</p>
<blockquote>
<p>Damiano read how to install projects on the community website</p>
</blockquote>
<p>(In the meantime, I have managed to create my own version of the current version of mathlib!  thanks!)</p>



<a name="207613748"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207613748" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207613748">(Aug 21 2020 at 09:15)</a>:</h4>
<p><code>leanproject get mathlib</code></p>



<a name="207613798"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207613798" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207613798">(Aug 21 2020 at 09:16)</a>:</h4>
<p>In there there's an algebraic geometry directory</p>



<a name="207613817"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207613817" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207613817">(Aug 21 2020 at 09:16)</a>:</h4>
<p>You could make a new file called spec</p>



<a name="207613825"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207613825" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207613825">(Aug 21 2020 at 09:16)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110038">Kevin Buzzard</span> <a href="#narrow/stream/113488-general/topic/status.20of.20schemes/near/207613709">said</a>:</p>
<blockquote>
<p>I think that there's no obstruction to just making the sheaf directly a la Hartshorne</p>
</blockquote>
<p>I just wanted to point out that, defining schemes à la Hartshorne also seems a great goal!</p>



<a name="207613828"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207613828" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207613828">(Aug 21 2020 at 09:16)</a>:</h4>
<p>.lean</p>



<a name="207613861"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207613861" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207613861">(Aug 21 2020 at 09:17)</a>:</h4>
<p>And then try to define the sheaf of rings on Spec R, following Hartshorne</p>



<a name="207613876"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207613876" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207613876">(Aug 21 2020 at 09:17)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110038">Kevin Buzzard</span> <a href="#narrow/stream/113488-general/topic/status.20of.20schemes/near/207613817">said</a>:</p>
<blockquote>
<p>You could make a new file called spec</p>
</blockquote>
<p>(ok, i did something similar and, hopefully, equivalent: i typed </p>
<div class="codehilite"><pre><span></span><code><span class="n">leanproject</span> <span class="n">new</span> <span class="n">Chevalley</span>
</code></pre></div>


<p>and now i am working in there)</p>



<a name="207613937"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207613937" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207613937">(Aug 21 2020 at 09:18)</a>:</h4>
<p>Now you have a new project</p>



<a name="207613967"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207613967" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207613967">(Aug 21 2020 at 09:18)</a>:</h4>
<p>The issue is not making schemes</p>



<a name="207613972"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207613972" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207613972">(Aug 21 2020 at 09:18)</a>:</h4>
<p>The issue is getting schemes into mathlib</p>



<a name="207614022"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207614022" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207614022">(Aug 21 2020 at 09:19)</a>:</h4>
<p>So really the work defining the presheaf of rings should be done in a clone of mathlib, not in a new repo</p>



<a name="207614100"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207614100" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207614100">(Aug 21 2020 at 09:20)</a>:</h4>
<p>Once we have the presheaf of rings on Spec R it will be easy to make schemes</p>



<a name="207614128"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207614128" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207614128">(Aug 21 2020 at 09:20)</a>:</h4>
<p>I have a little time, maybe I can just start this now</p>



<a name="207614142"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207614142" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207614142">(Aug 21 2020 at 09:21)</a>:</h4>
<p>After all, I'm only working on three other projects</p>



<a name="207614294"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207614294" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207614294">(Aug 21 2020 at 09:23)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> I think that if I could shadow your progress, then I would be asking many fewer silly questions here on the chat: is there a way for me to "peek" what it is that you are doing?</p>



<a name="207614485"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207614485" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207614485">(Aug 21 2020 at 09:26)</a>:</h4>
<p><span class="user-mention" data-user-id="321459">@Damiano Testa</span> you could do a screen share with someone</p>



<a name="207614492"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207614492" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207614492">(Aug 21 2020 at 09:27)</a>:</h4>
<p>Kenny regularly streams what he is doing</p>



<a name="207614587"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207614587" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207614587">(Aug 21 2020 at 09:28)</a>:</h4>
<p>someone is streaming at this very moment!</p>



<a name="207614666"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207614666" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207614666">(Aug 21 2020 at 09:29)</a>:</h4>
<p>ah, where are the streams?</p>



<a name="207614752"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207614752" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207614752">(Aug 21 2020 at 09:30)</a>:</h4>
<p>the same channel where we talked last time</p>



<a name="207614760"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207614760" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207614760">(Aug 21 2020 at 09:30)</a>:</h4>
<p>in discord, to be clear</p>



<a name="207614776"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207614776" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207614776">(Aug 21 2020 at 09:31)</a>:</h4>
<p>Ah, ok!  i was looking here...</p>



<a name="207614788"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207614788" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207614788">(Aug 21 2020 at 09:31)</a>:</h4>
<p>it seems they have stopped streaming now</p>



<a name="207614815"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207614815" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207614815">(Aug 21 2020 at 09:31)</a>:</h4>
<p>hmm... thinking about it, I fear we want <code>prop_limits</code> to land before we define sites...</p>



<a name="207614816"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207614816" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207614816">(Aug 21 2020 at 09:31)</a>:</h4>
<p>I'll stream in discord</p>



<a name="207614871"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207614871" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207614871">(Aug 21 2020 at 09:32)</a>:</h4>
<p>limits of propositions?</p>



<a name="207614897"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207614897" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207614897">(Aug 21 2020 at 09:32)</a>:</h4>
<p>limits <em>as</em> propositions.</p>



<a name="207615270"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207615270" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207615270">(Aug 21 2020 at 09:38)</a>:</h4>
<p>(The <code>has_limit</code> typeclass should be in <code>Prop</code>, rather than carrying non-subsingleton data.)</p>



<a name="207624500"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207624500" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207624500">(Aug 21 2020 at 11:40)</a>:</h4>
<p><span class="user-mention" data-user-id="321459">@Damiano Testa</span> and whoever else is interested (because I know that at least one other person was talking about schemes -- I forget who :-(  ) -- if people want to do scheme stuff right now then probably the way to proceed is to define the sheaf on Spec(R) following Hartshorne (i.e. building it explicitly as functions from U to disjoint union of R_P for P in U) rather than following the stacks project. I have started a branch of mathlib called <code>spec-of-a-ring</code> which starts on this. I have filled in a lot of the data, but I have sorried all the theorems.</p>



<a name="207624696"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207624696" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207624696">(Aug 21 2020 at 11:43)</a>:</h4>
<p>You can see the file online <a href="https://github.com/leanprover-community/mathlib/blob/spec-of-a-ring/src/algebraic_geometry/structure_sheaf.lean">here</a> . To get it on your computer, just go into your local copy of mathlib in a terminal and type</p>
<div class="codehilite"><pre><span></span><code>git pull
git checkout spec-of-a-ring
</code></pre></div>


<p>and you should be able to now find the file in the algebraic_geometry directory. Feel free to start filling in the <code>sorry</code>s! You can do them all in begin/end blocks; other people can tidy up later.</p>



<a name="207625581"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207625581" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207625581">(Aug 21 2020 at 11:57)</a>:</h4>
<p>If you ignore <code>is_locally_allowable</code> for a second, then we've already got the presheaf of dependent functions (sections of the bundle with fibres <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>R</mi><mi>p</mi></msub></mrow><annotation encoding="application/x-tex">R_p</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.969438em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.15139200000000003em;"><span style="top:-2.5500000000000003em;margin-left:-0.00773em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">p</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span></span></span></span>), and indeed the fact that this forms a sheaf.</p>
<p>We don't have the general machinery for this yet, but I think the right thing to do is next notice that <code>is_locally_allowable</code> is a local condition, and the sub-presheaf consisting of dependent functions satisfying some local condition is always a sub-sheaf.</p>



<a name="207625860"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207625860" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207625860">(Aug 21 2020 at 12:00)</a>:</h4>
<p>i.e. I think we should define a suitable <code>T : prime_spectrum R -&gt; Type</code>, and obtain a presheaf of all dependent functions as <code>presheaf.to_Types T</code> and the sheaf condition as <code>sheaf_condition.to_Types T</code>.  Then do some abstract nonsense about "local conditions".</p>



<a name="207626786"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207626786" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207626786">(Aug 21 2020 at 12:13)</a>:</h4>
<p>Kenny was really focused on the idea that the sheaf of dependent functions was the important idea -- the big sheaf</p>



<a name="207627176"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207627176" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207627176">(Aug 21 2020 at 12:18)</a>:</h4>
<p>Something like:</p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="n">topology</span><span class="bp">.</span><span class="n">sheaves</span><span class="bp">.</span><span class="n">sheaf_of_functions</span>

<span class="kn">variables</span> <span class="o">{</span><span class="n">X</span> <span class="o">:</span> <span class="n">Top</span><span class="o">}</span>
<span class="kn">variables</span> <span class="o">(</span><span class="n">T</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="kt">Type</span><span class="o">)</span>

<span class="kn">open</span> <span class="n">topological_space</span>

<span class="n">def</span> <span class="n">condition_restricts</span> <span class="o">(</span><span class="n">P</span> <span class="o">:</span> <span class="bp">Π</span> <span class="o">{</span><span class="n">U</span> <span class="o">:</span> <span class="n">opens</span> <span class="n">X</span><span class="o">},</span> <span class="o">(</span><span class="bp">Π</span> <span class="n">x</span> <span class="o">:</span> <span class="n">U</span><span class="o">,</span> <span class="n">T</span> <span class="n">x</span><span class="o">)</span> <span class="bp">→</span> <span class="kt">Prop</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">:=</span>
<span class="bp">∀</span> <span class="o">(</span><span class="n">U</span> <span class="n">V</span> <span class="o">:</span> <span class="n">opens</span> <span class="n">X</span><span class="o">)</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="n">U</span> <span class="err">⟶</span> <span class="n">V</span><span class="o">)</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="bp">Π</span> <span class="n">x</span> <span class="o">:</span> <span class="n">V</span><span class="o">,</span> <span class="n">T</span> <span class="n">x</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">P</span> <span class="n">f</span><span class="o">),</span> <span class="n">P</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">x</span> <span class="o">:</span> <span class="n">U</span><span class="o">,</span> <span class="n">f</span> <span class="o">(</span><span class="n">i</span> <span class="n">x</span><span class="o">))</span>

<span class="n">def</span> <span class="n">condition_is_local</span> <span class="o">(</span><span class="n">P</span> <span class="o">:</span> <span class="bp">Π</span> <span class="o">{</span><span class="n">U</span> <span class="o">:</span> <span class="n">opens</span> <span class="n">X</span><span class="o">},</span> <span class="o">(</span><span class="bp">Π</span> <span class="n">x</span> <span class="o">:</span> <span class="n">U</span><span class="o">,</span> <span class="n">T</span> <span class="n">x</span><span class="o">)</span> <span class="bp">→</span> <span class="kt">Prop</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">:=</span>
<span class="bp">∀</span> <span class="o">(</span><span class="n">U</span> <span class="o">:</span> <span class="n">opens</span> <span class="n">X</span><span class="o">)</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="bp">Π</span> <span class="n">x</span> <span class="o">:</span> <span class="n">U</span><span class="o">,</span> <span class="n">T</span> <span class="n">x</span><span class="o">)</span> <span class="o">(</span><span class="n">w</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">x</span> <span class="o">:</span> <span class="n">U</span><span class="o">,</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">V</span> <span class="o">:</span> <span class="n">opens</span> <span class="n">X</span><span class="o">)</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="n">V</span> <span class="err">⟶</span> <span class="n">U</span><span class="o">),</span> <span class="n">P</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">x</span> <span class="o">:</span> <span class="n">V</span><span class="o">,</span> <span class="n">f</span> <span class="o">(</span><span class="n">i</span> <span class="n">x</span> <span class="o">:</span> <span class="n">U</span><span class="o">))),</span> <span class="n">P</span> <span class="n">f</span>
</code></pre></div>



<a name="207627260"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207627260" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207627260">(Aug 21 2020 at 12:19)</a>:</h4>
<p>hopefully if <code>P</code> satisfies both <code>condition_restricts</code> and <code>condition_is_local</code> then the dependent functions satisfying the predicate P form a presheaf and a sheaf, respectively.</p>



<a name="207627322"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207627322" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207627322">(Aug 21 2020 at 12:20)</a>:</h4>
<p>Then it's just a matter of verifying these for <code>is_locally_allowable</code>.</p>



<a name="207627367"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207627367" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207627367">(Aug 21 2020 at 12:20)</a>:</h4>
<p>(but I have very low confidence in any of this... please shoot it down!)</p>



<a name="207627938"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207627938" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207627938">(Aug 21 2020 at 12:27)</a>:</h4>
<p>So the presheaf part is easy:</p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="n">topology</span><span class="bp">.</span><span class="n">sheaves</span><span class="bp">.</span><span class="n">sheaf_of_functions</span>

<span class="kn">universe</span> <span class="n">v</span>

<span class="kn">variables</span> <span class="o">{</span><span class="n">X</span> <span class="o">:</span> <span class="n">Top</span><span class="bp">.</span><span class="o">{</span><span class="n">v</span><span class="o">}}</span>
<span class="kn">variables</span> <span class="o">{</span><span class="n">T</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="kt">Type</span><span class="o">}</span>

<span class="kn">open</span> <span class="n">topological_space</span>
<span class="kn">open</span> <span class="n">opposite</span>

<span class="n">def</span> <span class="n">condition_restricts</span> <span class="o">(</span><span class="n">P</span> <span class="o">:</span> <span class="bp">Π</span> <span class="o">{</span><span class="n">U</span> <span class="o">:</span> <span class="n">opens</span> <span class="n">X</span><span class="o">},</span> <span class="o">(</span><span class="bp">Π</span> <span class="n">x</span> <span class="o">:</span> <span class="n">U</span><span class="o">,</span> <span class="n">T</span> <span class="n">x</span><span class="o">)</span> <span class="bp">→</span> <span class="kt">Prop</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">:=</span>
<span class="bp">∀</span> <span class="o">{</span><span class="n">U</span> <span class="n">V</span> <span class="o">:</span> <span class="n">opens</span> <span class="n">X</span><span class="o">}</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="n">U</span> <span class="err">⟶</span> <span class="n">V</span><span class="o">)</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="bp">Π</span> <span class="n">x</span> <span class="o">:</span> <span class="n">V</span><span class="o">,</span> <span class="n">T</span> <span class="n">x</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">P</span> <span class="n">f</span><span class="o">),</span> <span class="n">P</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">x</span> <span class="o">:</span> <span class="n">U</span><span class="o">,</span> <span class="n">f</span> <span class="o">(</span><span class="n">i</span> <span class="n">x</span><span class="o">))</span>

<span class="n">def</span> <span class="n">condition_is_local</span> <span class="o">(</span><span class="n">P</span> <span class="o">:</span> <span class="bp">Π</span> <span class="o">{</span><span class="n">U</span> <span class="o">:</span> <span class="n">opens</span> <span class="n">X</span><span class="o">},</span> <span class="o">(</span><span class="bp">Π</span> <span class="n">x</span> <span class="o">:</span> <span class="n">U</span><span class="o">,</span> <span class="n">T</span> <span class="n">x</span><span class="o">)</span> <span class="bp">→</span> <span class="kt">Prop</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">:=</span>
<span class="bp">∀</span> <span class="o">{</span><span class="n">U</span> <span class="o">:</span> <span class="n">opens</span> <span class="n">X</span><span class="o">}</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="bp">Π</span> <span class="n">x</span> <span class="o">:</span> <span class="n">U</span><span class="o">,</span> <span class="n">T</span> <span class="n">x</span><span class="o">)</span> <span class="o">(</span><span class="n">w</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">x</span> <span class="o">:</span> <span class="n">U</span><span class="o">,</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">V</span> <span class="o">:</span> <span class="n">opens</span> <span class="n">X</span><span class="o">)</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="n">V</span> <span class="err">⟶</span> <span class="n">U</span><span class="o">),</span> <span class="n">P</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">x</span> <span class="o">:</span> <span class="n">V</span><span class="o">,</span> <span class="n">f</span> <span class="o">(</span><span class="n">i</span> <span class="n">x</span> <span class="o">:</span> <span class="n">U</span><span class="o">))),</span> <span class="n">P</span> <span class="n">f</span>

<span class="n">def</span> <span class="n">presheaf_of_dependent_functions_satisfying_condition</span>
  <span class="o">(</span><span class="n">P</span> <span class="o">:</span> <span class="bp">Π</span> <span class="o">{</span><span class="n">U</span> <span class="o">:</span> <span class="n">opens</span> <span class="n">X</span><span class="o">},</span> <span class="o">(</span><span class="bp">Π</span> <span class="n">x</span> <span class="o">:</span> <span class="n">U</span><span class="o">,</span> <span class="n">T</span> <span class="n">x</span><span class="o">)</span> <span class="bp">→</span> <span class="kt">Prop</span><span class="o">)</span>
  <span class="o">(</span><span class="n">w</span> <span class="o">:</span> <span class="n">condition_restricts</span> <span class="bp">@</span><span class="n">P</span><span class="o">)</span> <span class="o">:</span>
  <span class="o">(</span><span class="n">opens</span> <span class="n">X</span><span class="o">)</span><span class="err">ᵒᵖ</span> <span class="err">⥤</span> <span class="kt">Type</span> <span class="n">v</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">obj</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">U</span><span class="o">,</span> <span class="o">{</span> <span class="n">f</span> <span class="o">:</span> <span class="bp">Π</span> <span class="n">x</span> <span class="o">:</span> <span class="n">unop</span> <span class="n">U</span><span class="o">,</span> <span class="n">T</span> <span class="n">x</span> <span class="bp">//</span> <span class="n">P</span> <span class="n">f</span> <span class="o">},</span>
  <span class="n">map</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">U</span> <span class="n">V</span> <span class="n">i</span> <span class="n">f</span><span class="o">,</span> <span class="bp">⟨λ</span> <span class="n">x</span><span class="o">,</span> <span class="n">f</span><span class="bp">.</span><span class="mi">1</span> <span class="o">(</span><span class="n">i</span><span class="bp">.</span><span class="n">unop</span> <span class="n">x</span><span class="o">),</span> <span class="n">w</span> <span class="n">i</span><span class="bp">.</span><span class="n">unop</span> <span class="n">f</span><span class="bp">.</span><span class="mi">1</span> <span class="n">f</span><span class="bp">.</span><span class="mi">2</span><span class="bp">⟩</span> <span class="o">}</span>
</code></pre></div>



<a name="207628148"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207628148" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207628148">(Aug 21 2020 at 12:29)</a>:</h4>
<p>I think I'm going to go to bed before attempting the sheaf condition (wimping out!), but it hopefully is just an abstraction of the existing <a href="https://leanprover-community.github.io/mathlib_docs/find/Top.sheaf_condition.to_Top/src">src#Top.sheaf_condition.to_Top</a> that Johan and I wrote.</p>



<a name="207628747"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207628747" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207628747">(Aug 21 2020 at 12:35)</a>:</h4>
<p>I might have to go to the beach but hopefully I can get to this later when sanity has been restored</p>



<a name="207630587"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207630587" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bhavik Mehta <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207630587">(Aug 21 2020 at 12:57)</a>:</h4>
<div class="codehilite"><pre><span></span><code><span class="c">/-</span><span class="cm">- We enforce here that the open cover is actually contained in the given set. -/</span>
<span class="n">def</span> <span class="n">down_closed_open_cover</span> <span class="o">(</span><span class="n">U</span> <span class="o">:</span> <span class="n">opens</span> <span class="n">X</span><span class="o">)</span> <span class="o">(</span><span class="n">S</span> <span class="o">:</span> <span class="n">set</span> <span class="o">(</span><span class="n">opens</span> <span class="n">X</span><span class="o">))</span> <span class="o">:=</span> <span class="o">(</span><span class="bp">∀</span> <span class="n">V</span> <span class="err">∈</span> <span class="n">S</span><span class="o">,</span> <span class="n">V</span> <span class="bp">≤</span> <span class="n">U</span><span class="o">)</span> <span class="bp">∧</span> <span class="o">(</span><span class="bp">∀</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">U</span><span class="o">,</span> <span class="bp">∃</span> <span class="n">V</span><span class="o">,</span> <span class="n">V</span> <span class="err">∈</span> <span class="n">S</span> <span class="bp">∧</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">V</span><span class="o">)</span>

<span class="kn">variable</span> <span class="o">(</span><span class="n">P</span> <span class="o">:</span> <span class="o">(</span><span class="n">opens</span> <span class="n">X</span><span class="o">)</span><span class="err">ᵒᵖ</span> <span class="err">⥤</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span>

<span class="n">def</span> <span class="n">restrict_presheaf</span> <span class="o">{</span><span class="n">U</span> <span class="n">V</span> <span class="o">:</span> <span class="n">opens</span> <span class="n">X</span><span class="o">}</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">V</span> <span class="bp">≤</span> <span class="n">U</span><span class="o">)</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">P</span><span class="bp">.</span><span class="n">obj</span> <span class="o">(</span><span class="n">opposite</span><span class="bp">.</span><span class="n">op</span> <span class="n">U</span><span class="o">))</span> <span class="o">:</span>
  <span class="n">P</span><span class="bp">.</span><span class="n">obj</span> <span class="o">(</span><span class="n">opposite</span><span class="bp">.</span><span class="n">op</span> <span class="n">V</span><span class="o">)</span> <span class="o">:=</span> <span class="n">P</span><span class="bp">.</span><span class="n">map</span> <span class="o">(</span><span class="n">hom_of_le</span> <span class="n">h</span><span class="o">)</span><span class="bp">.</span><span class="n">op</span> <span class="n">s</span>

<span class="n">def</span> <span class="n">locality</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">:=</span>
  <span class="bp">∀</span> <span class="o">(</span><span class="n">U</span> <span class="o">:</span> <span class="n">opens</span> <span class="n">X</span><span class="o">)</span> <span class="o">(</span><span class="n">S</span><span class="o">)</span> <span class="o">(</span><span class="n">c</span> <span class="o">:</span> <span class="n">down_closed_open_cover</span> <span class="n">U</span> <span class="n">S</span><span class="o">)</span> <span class="o">(</span><span class="n">s</span> <span class="n">t</span> <span class="o">:</span> <span class="n">P</span><span class="bp">.</span><span class="n">obj</span> <span class="o">(</span><span class="n">opposite</span><span class="bp">.</span><span class="n">op</span> <span class="n">U</span><span class="o">)),</span>
    <span class="o">(</span><span class="bp">∀</span> <span class="n">Ui</span> <span class="err">∈</span> <span class="n">S</span><span class="o">,</span> <span class="n">restrict_presheaf</span> <span class="n">P</span> <span class="o">(</span><span class="n">c</span><span class="bp">.</span><span class="mi">1</span> <span class="n">Ui</span> <span class="n">H</span><span class="o">)</span> <span class="n">s</span> <span class="bp">=</span> <span class="n">restrict_presheaf</span> <span class="n">P</span> <span class="o">(</span><span class="n">c</span><span class="bp">.</span><span class="mi">1</span> <span class="n">Ui</span> <span class="n">H</span><span class="o">)</span> <span class="n">t</span><span class="o">)</span> <span class="bp">→</span> <span class="n">s</span> <span class="bp">=</span> <span class="n">t</span>

<span class="n">def</span> <span class="n">gluing</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span> <span class="o">:=</span>
  <span class="bp">Π</span> <span class="o">(</span><span class="n">U</span> <span class="o">:</span> <span class="n">opens</span> <span class="n">X</span><span class="o">)</span> <span class="o">(</span><span class="n">S</span><span class="o">)</span> <span class="o">(</span><span class="n">c</span> <span class="o">:</span> <span class="n">down_closed_open_cover</span> <span class="n">U</span> <span class="n">S</span><span class="o">)</span> <span class="o">(</span><span class="n">s&#39;</span> <span class="o">:</span> <span class="bp">Π</span> <span class="o">(</span><span class="n">Ui</span> <span class="err">∈</span> <span class="n">S</span><span class="o">),</span> <span class="n">P</span><span class="bp">.</span><span class="n">obj</span> <span class="o">(</span><span class="n">opposite</span><span class="bp">.</span><span class="n">op</span> <span class="n">Ui</span><span class="o">))</span>
    <span class="o">(</span><span class="n">hs</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">Ui</span> <span class="n">Uj</span> <span class="err">∈</span> <span class="n">S</span><span class="o">),</span> <span class="n">restrict_presheaf</span> <span class="n">P</span> <span class="o">(</span><span class="n">lattice</span><span class="bp">.</span><span class="n">inf_le_left</span> <span class="bp">_</span> <span class="n">Uj</span><span class="o">)</span> <span class="o">(</span><span class="n">s&#39;</span> <span class="bp">_</span> <span class="err">‹</span><span class="bp">_</span><span class="err">›</span><span class="o">)</span> <span class="bp">=</span> <span class="n">restrict_presheaf</span> <span class="n">P</span> <span class="o">(</span><span class="n">lattice</span><span class="bp">.</span><span class="n">inf_le_right</span> <span class="n">Ui</span> <span class="n">Uj</span><span class="o">)</span> <span class="o">(</span><span class="n">s&#39;</span> <span class="bp">_</span> <span class="err">‹</span><span class="bp">_</span><span class="err">›</span><span class="o">)),</span>
    <span class="o">{</span><span class="n">s</span> <span class="o">:</span> <span class="n">P</span><span class="bp">.</span><span class="n">obj</span> <span class="o">(</span><span class="n">opposite</span><span class="bp">.</span><span class="n">op</span> <span class="n">U</span><span class="o">)</span> <span class="bp">//</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">Ui</span> <span class="err">∈</span> <span class="n">S</span><span class="o">),</span> <span class="n">restrict_presheaf</span> <span class="n">P</span> <span class="o">(</span><span class="n">c</span><span class="bp">.</span><span class="mi">1</span> <span class="bp">_</span> <span class="n">H</span><span class="o">)</span> <span class="n">s</span> <span class="bp">=</span> <span class="n">s&#39;</span> <span class="bp">_</span> <span class="n">H</span><span class="o">}</span>
</code></pre></div>


<p>I'd put together this, which might be useful - a sheaf is then just a presheaf with locality and gluing axioms</p>



<a name="207630653"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207630653" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bhavik Mehta <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207630653">(Aug 21 2020 at 12:58)</a>:</h4>
<p>(I only made this to make sure my abstract sheaf axioms were the same thing as the ones on wikipedia, I'm not claiming these are the best for mathlib)</p>



<a name="207645029"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207645029" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207645029">(Aug 21 2020 at 15:05)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112680">Johan Commelin</span> <a href="#narrow/stream/113488-general/topic/status.20of.20schemes/near/207611505">said</a>:</p>
<blockquote>
<p><code>algebraic_geometry/prime_spectrum</code></p>
</blockquote>
<p>Dear Johan,</p>
<p>I am trying to use your <code>prime_spectrum</code> file, and I believe that the following should be true, but I am having lots of trouble proving it: am I misunderstanding something?  Is this already proved in your file?  I tried searching for something along these lines, but was unable to find anything</p>
<p>Thank you very much!</p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="n">data</span><span class="bp">.</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">induction</span>
<span class="kn">import</span> <span class="n">algebraic_geometry</span><span class="bp">.</span><span class="n">prime_spectrum</span>

<span class="kn">open</span> <span class="n">prime_spectrum</span>

<span class="n">universes</span> <span class="n">u</span>


<span class="kn">variables</span> <span class="o">{</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">}</span> <span class="o">[</span><span class="n">comm_ring</span> <span class="n">R</span><span class="o">]</span> <span class="o">(</span><span class="n">I</span> <span class="o">:</span> <span class="n">prime_spectrum</span> <span class="o">(</span><span class="n">polynomial</span> <span class="n">R</span><span class="o">))</span>

<span class="n">noncomputable</span> <span class="n">def</span> <span class="n">Cstar</span> <span class="o">:=</span> <span class="n">prime_spectrum</span><span class="bp">.</span><span class="n">comap</span> <span class="o">(</span><span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="o">:</span> <span class="n">R</span> <span class="bp">→+*</span> <span class="n">polynomial</span> <span class="n">R</span><span class="o">)</span>

<span class="kn">lemma</span> <span class="n">incl</span> <span class="o">{</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">}</span> <span class="o">[</span><span class="n">comm_ring</span> <span class="n">R</span><span class="o">]</span> <span class="o">(</span><span class="n">I</span> <span class="o">:</span> <span class="n">prime_spectrum</span> <span class="o">(</span><span class="n">polynomial</span> <span class="n">R</span><span class="o">))</span>
 <span class="o">:</span> <span class="bp">∀</span> <span class="n">p</span> <span class="err">∈</span> <span class="o">(</span><span class="n">Cstar</span> <span class="n">I</span><span class="o">)</span><span class="bp">.</span><span class="mi">1</span> <span class="o">,</span> <span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="n">p</span> <span class="err">∈</span> <span class="n">I</span><span class="bp">.</span><span class="mi">1</span> <span class="o">:=</span>
<span class="k">begin</span>

    <span class="n">sorry</span><span class="o">,</span>
<span class="kn">end</span>
</code></pre></div>



<a name="207645631"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207645631" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207645631">(Aug 21 2020 at 15:10)</a>:</h4>
<p>(Although I do not need this at the moment, basically what I am interested in is that if the ring map A --&gt; B is an inclusion, then, in terms of sets rather than types, the induced map on spectra is simply the intersection of an ideal in the larger ring B with the smaller ring A.)</p>



<a name="207645704"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207645704" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207645704">(Aug 21 2020 at 15:11)</a>:</h4>
<p>Tell me try</p>



<a name="207645798"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207645798" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207645798">(Aug 21 2020 at 15:12)</a>:</h4>
<p>sure!  and no rush: I will have to leave soon, and I am not sure that I will have time to seriously look at this over the weekend.  I will be definitely looking at it on Monday, though!</p>



<a name="207645854"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207645854" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207645854">(Aug 21 2020 at 15:12)</a>:</h4>
<div class="codehilite"><pre><span></span><code><span class="kn">lemma</span> <span class="n">incl</span> <span class="o">{</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">}</span> <span class="o">[</span><span class="n">comm_ring</span> <span class="n">R</span><span class="o">]</span> <span class="o">(</span><span class="n">I</span> <span class="o">:</span> <span class="n">prime_spectrum</span> <span class="o">(</span><span class="n">polynomial</span> <span class="n">R</span><span class="o">))</span>
 <span class="o">:</span> <span class="bp">∀</span> <span class="n">p</span> <span class="err">∈</span> <span class="o">(</span><span class="n">Cstar</span> <span class="n">I</span><span class="o">)</span><span class="bp">.</span><span class="n">as_ideal</span> <span class="o">,</span> <span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="n">p</span> <span class="err">∈</span> <span class="n">I</span><span class="bp">.</span><span class="n">as_ideal</span> <span class="o">:=</span>
<span class="k">begin</span>
    <span class="n">intros</span> <span class="n">p</span> <span class="n">hp</span><span class="o">,</span>
    <span class="n">dsimp</span> <span class="o">[</span><span class="n">Cstar</span><span class="o">]</span> <span class="n">at</span> <span class="n">hp</span><span class="o">,</span>
    <span class="n">simp</span> <span class="n">at</span> <span class="n">hp</span><span class="o">,</span>
    <span class="n">exact</span> <span class="n">hp</span><span class="o">,</span>
<span class="kn">end</span>
</code></pre></div>



<a name="207645898"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207645898" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207645898">(Aug 21 2020 at 15:13)</a>:</h4>
<div class="codehilite"><pre><span></span><code><span class="kn">lemma</span> <span class="n">incl</span> <span class="o">{</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">}</span> <span class="o">[</span><span class="n">comm_ring</span> <span class="n">R</span><span class="o">]</span> <span class="o">(</span><span class="n">I</span> <span class="o">:</span> <span class="n">prime_spectrum</span> <span class="o">(</span><span class="n">polynomial</span> <span class="n">R</span><span class="o">))</span>
 <span class="o">:</span> <span class="bp">∀</span> <span class="n">p</span> <span class="err">∈</span> <span class="o">(</span><span class="n">Cstar</span> <span class="n">I</span><span class="o">)</span><span class="bp">.</span><span class="n">as_ideal</span> <span class="o">,</span> <span class="n">polynomial</span><span class="bp">.</span><span class="n">C</span> <span class="n">p</span> <span class="err">∈</span> <span class="n">I</span><span class="bp">.</span><span class="n">as_ideal</span> <span class="o">:=</span>
<span class="k">begin</span>
    <span class="n">intros</span> <span class="n">p</span> <span class="n">hp</span><span class="o">,</span> <span class="n">exact</span> <span class="n">hp</span><span class="o">,</span>
<span class="kn">end</span>
</code></pre></div>



<a name="207645901"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207645901" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207645901">(Aug 21 2020 at 15:13)</a>:</h4>
<p>really?!  this quick?</p>
<p>Let me use it!  Ahaah</p>



<a name="207646098"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207646098" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207646098">(Aug 21 2020 at 15:15)</a>:</h4>
<p>Thank you very much!</p>



<a name="207646119"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207646119" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207646119">(Aug 21 2020 at 15:15)</a>:</h4>
<p>In other words, <code>hp</code> is by definition the thing that you wanted to prove (-;</p>



<a name="207646918"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207646918" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207646918">(Aug 21 2020 at 15:20)</a>:</h4>
<p>Yes, I can see that, although it was not clear to me that this was the case...  Lean is very good at understanding its own code!  And so are you!</p>



<a name="207646929"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207646929" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207646929">(Aug 21 2020 at 15:20)</a>:</h4>
<p>Thank you very much!</p>



<a name="207647016"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207647016" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207647016">(Aug 21 2020 at 15:21)</a>:</h4>
<p>I need to go now, but I will continue on Monday!</p>



<a name="207647235"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207647235" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207647235">(Aug 21 2020 at 15:23)</a>:</h4>
<p>Ciao!</p>



<a name="207705591"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207705591" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207705591">(Aug 22 2020 at 03:44)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span>, I pushed the "local predicate" construction as <a href="https://github.com/leanprover-community/mathlib/issues/3906">#3906</a>.</p>



<a name="207705642"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207705642" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207705642">(Aug 22 2020 at 03:45)</a>:</h4>
<p>Now I think all that is required to build the sheaf on <code>prime_spectrum R</code> is to package <code>is_locally_allowable</code> as a <code>local_predicate</code>. Hopefully that is easy from the definition.</p>



<a name="207705688"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207705688" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207705688">(Aug 22 2020 at 03:46)</a>:</h4>
<p>(Putting the ring structure on is orthogonal --- because of <a href="https://github.com/leanprover-community/mathlib/issues/3609">#3609</a>, we can ignore the ring structure while checking the sheaf condition.)</p>



<a name="207705807"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207705807" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207705807">(Aug 22 2020 at 03:50)</a>:</h4>
<p>Nice!</p>



<a name="207706100"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207706100" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207706100">(Aug 22 2020 at 04:00)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110087">Scott Morrison</span> <a href="#narrow/stream/113488-general/topic/status.20of.20schemes/near/207705642">said</a>:</p>
<blockquote>
<p>Now I think all that is required to build the sheaf on <code>prime_spectrum R</code> is to package <code>is_locally_allowable</code> as a <code>local_predicate</code>. Hopefully that is easy from the definition.</p>
</blockquote>
<p>We also need a presheaf to start with, right?</p>



<a name="207706378"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207706378" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207706378">(Aug 22 2020 at 04:09)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110087">Scott Morrison</span> <a href="#narrow/stream/113488-general/topic/status.20of.20schemes/near/207705688">said</a>:</p>
<blockquote>
<p>(Putting the ring structure on is orthogonal --- because of <a href="https://github.com/leanprover-community/mathlib/issues/3609">#3609</a>, we can ignore the ring structure while checking the sheaf condition.)</p>
</blockquote>
<p>Looks good! I left a review with some typos I found.</p>



<a name="207708825"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207708825" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207708825">(Aug 22 2020 at 05:31)</a>:</h4>
<p>I was starting to look at <span class="user-mention" data-user-id="110038">@Kevin Buzzard</span>'s <code>spec-of-a-ring</code> branch, and getting worried because his definition of <a href="https://github.com/leanprover-community/mathlib/blob/spec-of-a-ring/src/algebraic_geometry/structure_sheaf.lean#L15"><code>is_locally_allowable</code></a> isn't obviously local in the sense of <a href="https://github.com/leanprover-community/mathlib/issues/3906">#3906</a>.</p>
<p>However when I go look at Hartshorne (p.70) <a href="/user_uploads/3121/-Rhp_cRgfQr6HUlLitqe0vXB/File-Aug-22-15-28-25.jpeg">File-Aug-22-15-28-25.jpeg</a> I get happier, because the definition there is obviously local in my sense, but also sadder, because it's not obvious to me that this is equivalent to the definition Kevin gave. If anyone wants to help me sort this out that would be great. :-)</p>
<div class="message_inline_image"><a href="/user_uploads/3121/-Rhp_cRgfQr6HUlLitqe0vXB/File-Aug-22-15-28-25.jpeg" title="File-Aug-22-15-28-25.jpeg"><img src="/user_uploads/3121/-Rhp_cRgfQr6HUlLitqe0vXB/File-Aug-22-15-28-25.jpeg"></a></div>



<a name="207708894"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207708894" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207708894">(Aug 22 2020 at 05:33)</a>:</h4>
<p><span class="user-mention" data-user-id="110087">@Scott Morrison</span> Sure! Let's try to figure this out.</p>



<a name="207708898"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207708898" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207708898">(Aug 22 2020 at 05:33)</a>:</h4>
<p>Let me grab a copy of Kevin's branch</p>



<a name="207708944"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207708944" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207708944">(Aug 22 2020 at 05:34)</a>:</h4>
<p>(I'm happy to do a screen share if that's the easiest way --- just let me know when you've had a look)</p>



<a name="207709011"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207709011" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207709011">(Aug 22 2020 at 05:36)</a>:</h4>
<p>Ok, I have the branch open</p>



<a name="207709016"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207709016" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207709016">(Aug 22 2020 at 05:37)</a>:</h4>
<p>I guess we'll have breakfast in 15 a 30 minutes, but we can try a quick screenshare</p>



<a name="207711614"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207711614" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207711614">(Aug 22 2020 at 07:03)</a>:</h4>
<p>I did some more work after we finished, <span class="user-mention" data-user-id="112680">@Johan Commelin</span>, and it seems to work well.</p>



<a name="207711617"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207711617" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207711617">(Aug 22 2020 at 07:03)</a>:</h4>
<p>I have the structure sheaf on Spec R (although not the ring structure).</p>



<a name="207711728"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207711728" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207711728">(Aug 22 2020 at 07:06)</a>:</h4>
<p>That shouldn't be too hard, right?</p>



<a name="207711742"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207711742" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207711742">(Aug 22 2020 at 07:07)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib/issues/3907">#3907</a>, if anyone wants to look at it.</p>



<a name="207711789"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207711789" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207711789">(Aug 22 2020 at 07:08)</a>:</h4>
<p>No, the ring structure is hopefully straightforward, but it is going to be a little messy because we need to check that the ring operations interact properly with <code>locally_quotient</code>.</p>



<a name="207711906"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207711906" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207711906">(Aug 22 2020 at 07:12)</a>:</h4>
<p>Let's define schemes today (-;</p>



<a name="207712000"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207712000" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207712000">(Aug 22 2020 at 07:15)</a>:</h4>
<p>Okay, so what comes next? Should we just do the ring structure?</p>



<a name="207712002"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207712002" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207712002">(Aug 22 2020 at 07:15)</a>:</h4>
<p>Morning. If my definition is not the same as Hartshorne then I messed up because it was supposed to be</p>



<a name="207712045"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207712045" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207712045">(Aug 22 2020 at 07:16)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span>, notice your condition never talks about any smaller open sets inside <code>U</code>.</p>



<a name="207712055"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207712055" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207712055">(Aug 22 2020 at 07:17)</a>:</h4>
<p>You've just asked for functions on <code>U</code> which are, on <code>U</code>, a quotient.</p>



<a name="207712057"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207712057" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207712057">(Aug 22 2020 at 07:17)</a>:</h4>
<p><span class="user-mention" data-user-id="110087">@Scott Morrison</span> I left a minor review</p>



<a name="207712099"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207712099" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207712099">(Aug 22 2020 at 07:18)</a>:</h4>
<p>Next steps:</p>
<ol start="0">
<li>ring structure</li>
<li>compute stalks</li>
<li>define LRS</li>
<li>show that comap is a hom of LRS</li>
</ol>



<a name="207712123"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207712123" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207712123">(Aug 22 2020 at 07:19)</a>:</h4>
<p>How does the computation of stalks go?</p>



<a name="207712172"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207712172" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207712172">(Aug 22 2020 at 07:20)</a>:</h4>
<p>Clearly there is a map from the stalk to <code>stalks x</code></p>



<a name="207712174"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207712174" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207712174">(Aug 22 2020 at 07:20)</a>:</h4>
<p>Show that it is bijective</p>



<a name="207712175"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207712175" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207712175">(Aug 22 2020 at 07:20)</a>:</h4>
<p>We are definitely exceeding my level of studiousness when reading Hartshorne 20 years ago. :-)</p>



<a name="207712313"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207712313" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207712313">(Aug 22 2020 at 07:25)</a>:</h4>
<p><span class="user-mention" data-user-id="110087">@Scott Morrison</span>  Want to screenshare again?</p>



<a name="207712356"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207712356" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207712356">(Aug 22 2020 at 07:26)</a>:</h4>
<p>Sure!</p>



<a name="207712360"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207712360" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207712360">(Aug 22 2020 at 07:26)</a>:</h4>
<p>Same room?</p>



<a name="207715747"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207715747" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207715747">(Aug 22 2020 at 09:16)</a>:</h4>
<p>Finished the ring structure, but not yet that the restriction maps are ring_homs</p>



<a name="207715863"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207715863" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207715863">(Aug 22 2020 at 09:20)</a>:</h4>
<p>Okay, that was trivial, all worked by <code>rfl</code>.</p>



<a name="207715866"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207715866" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207715866">(Aug 22 2020 at 09:20)</a>:</h4>
<p>We have the structure sheaf on Spec R, as a sheaf of commutative rings!</p>



<a name="207716161"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207716161" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207716161">(Aug 22 2020 at 09:30)</a>:</h4>
<p>Awesome!</p>



<a name="207716242"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207716242" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207716242">(Aug 22 2020 at 09:32)</a>:</h4>
<p><span class="user-mention" data-user-id="110087">@Scott Morrison</span> did you push?</p>



<a name="207716246"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207716246" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207716246">(Aug 22 2020 at 09:33)</a>:</h4>
<p>up next is the iso to stalks?</p>



<a name="207716459"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207716459" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207716459">(Aug 22 2020 at 09:38)</a>:</h4>
<p><span class="user-mention" data-user-id="110087">@Scott Morrison</span> I pushed a tiny tweak</p>



<a name="207716462"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207716462" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207716462">(Aug 22 2020 at 09:38)</a>:</h4>
<p>(Most of what I did was duplicate)</p>



<a name="207716740"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207716740" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207716740">(Aug 22 2020 at 09:47)</a>:</h4>
<p>I am spending the day travelling so might not be much help. Remember that the local isomorphism in the definition of schemes is only an isomorphism of spaces equipped with a presheaf of rings and because affine schemes are locally ringed spaces you only need to say that a scheme is a ringed space which is locally affine</p>



<a name="207716787"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207716787" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207716787">(Aug 22 2020 at 09:48)</a>:</h4>
<p>Can we pull back a presheaf of rings on a space to an open subspace?</p>



<a name="207717373"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207717373" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207717373">(Aug 22 2020 at 10:07)</a>:</h4>
<p>No, we don't have pullback to an open yet.</p>



<a name="207717635"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207717635" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207717635">(Aug 22 2020 at 10:15)</a>:</h4>
<p>I'm thinking of a reform. I want a definition (i.e. implementation) that is best suited for Lean. Here is what I have come up with:</p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="n">algebraic_geometry</span><span class="bp">.</span><span class="n">prime_spectrum</span>
<span class="kn">import</span> <span class="n">ring_theory</span><span class="bp">.</span><span class="n">localization</span>

<span class="n">universes</span> <span class="n">u</span> <span class="n">v</span>

<span class="n">noncomputable</span> <span class="n">theory</span>
<span class="n">open_locale</span> <span class="n">classical</span>

<span class="kn">variables</span> <span class="o">(</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span> <span class="o">[</span><span class="n">comm_ring</span> <span class="n">R</span><span class="o">]</span>

<span class="c1">-- How far can I go avoiding partial functions and sigma types?</span>

<span class="c">/-</span><span class="cm">- set (Σ x, S x) = Π x, set (S x)  -/</span>
<span class="kn">structure</span> <span class="n">stalk_topology</span> <span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span> <span class="o">(</span><span class="n">S</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="kt">Type</span> <span class="n">v</span><span class="o">)</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">is_open</span> <span class="o">:</span> <span class="o">(</span><span class="bp">Π</span> <span class="n">x</span><span class="o">,</span> <span class="n">set</span> <span class="o">(</span><span class="n">S</span> <span class="n">x</span><span class="o">))</span> <span class="bp">→</span> <span class="kt">Prop</span><span class="o">)</span>
<span class="c1">-- TODO : univ, inter, sUnion</span>

<span class="c1">-- TODO : add the hypothesis of them forming a basis</span>
<span class="n">def</span> <span class="n">stalk_topology</span><span class="bp">.</span><span class="n">generate_from_basis</span> <span class="o">{</span><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">}</span> <span class="o">{</span><span class="n">S</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="kt">Type</span> <span class="n">v</span><span class="o">}</span>
  <span class="o">(</span><span class="n">B</span> <span class="o">:</span> <span class="n">set</span> <span class="o">(</span><span class="bp">Π</span> <span class="n">x</span><span class="o">,</span> <span class="n">set</span> <span class="o">(</span><span class="n">S</span> <span class="n">x</span><span class="o">)))</span> <span class="o">:</span> <span class="n">stalk_topology</span> <span class="n">X</span> <span class="n">S</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">is_open</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">s</span><span class="o">,</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="bp">Π</span> <span class="n">x</span><span class="o">,</span> <span class="n">S</span> <span class="n">x</span><span class="o">),</span> <span class="o">(</span><span class="bp">∀</span> <span class="n">x</span><span class="o">,</span> <span class="n">f</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">s</span> <span class="n">x</span><span class="o">)</span> <span class="bp">→</span>
    <span class="bp">∃</span> <span class="n">b</span> <span class="err">∈</span> <span class="n">B</span><span class="o">,</span> <span class="bp">∀</span> <span class="n">x</span><span class="o">,</span> <span class="k">by</span> <span class="n">exact</span> <span class="n">f</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">b</span> <span class="n">x</span> <span class="bp">∧</span> <span class="n">b</span> <span class="n">x</span> <span class="err">⊆</span> <span class="n">s</span> <span class="n">x</span> <span class="o">}</span>


<span class="n">def</span> <span class="n">espace_etale</span> <span class="o">(</span><span class="n">P</span> <span class="o">:</span> <span class="n">prime_spectrum</span> <span class="n">R</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span> <span class="o">:=</span>
<span class="n">localization</span><span class="bp">.</span><span class="n">at_prime</span> <span class="n">P</span><span class="bp">.</span><span class="mi">1</span>

<span class="c1">-- I claim that this contains exactly the same information.</span>
<span class="n">def</span> <span class="n">structure_sheaf</span> <span class="o">:</span> <span class="n">stalk_topology</span> <span class="o">(</span><span class="n">prime_spectrum</span> <span class="n">R</span><span class="o">)</span> <span class="o">(</span><span class="n">espace_etale</span> <span class="n">R</span><span class="o">)</span> <span class="o">:=</span>
<span class="n">stalk_topology</span><span class="bp">.</span><span class="n">generate_from_basis</span>
  <span class="o">{</span> <span class="n">s</span> <span class="bp">|</span> <span class="bp">∃</span> <span class="n">f</span> <span class="n">a</span> <span class="o">:</span> <span class="n">R</span><span class="o">,</span> <span class="bp">∃</span> <span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span> <span class="bp">∀</span> <span class="n">x</span> <span class="o">:</span> <span class="n">prime_spectrum</span> <span class="n">R</span><span class="o">,</span>
      <span class="o">(</span><span class="k">if</span> <span class="n">H</span> <span class="o">:</span> <span class="n">f</span> <span class="err">∈</span> <span class="n">x</span><span class="bp">.</span><span class="mi">1</span> <span class="k">then</span> <span class="err">∅</span> <span class="k">else</span> <span class="o">{</span><span class="n">localization</span><span class="bp">.</span><span class="n">mk</span> <span class="n">a</span> <span class="bp">⟨</span><span class="n">f</span> <span class="bp">^</span> <span class="n">n</span><span class="o">,</span>
        <span class="k">show</span> <span class="n">f</span> <span class="bp">^</span> <span class="n">n</span> <span class="err">∈</span> <span class="n">x</span><span class="bp">.</span><span class="n">val</span><span class="bp">.</span><span class="n">prime_compl</span><span class="bp">.</span><span class="n">carrier</span><span class="o">,</span>
        <span class="k">from</span> <span class="n">mt</span> <span class="o">(</span><span class="n">x</span><span class="bp">.</span><span class="mi">2</span><span class="bp">.</span><span class="n">mem_of_pow_mem</span> <span class="n">n</span><span class="o">)</span> <span class="n">H</span><span class="bp">⟩</span><span class="o">})</span>
    <span class="bp">=</span> <span class="n">s</span> <span class="n">x</span> <span class="o">}</span>
</code></pre></div>



<a name="207722446"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207722446" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bhavik Mehta <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207722446">(Aug 22 2020 at 12:34)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110038">Kevin Buzzard</span> <a href="#narrow/stream/113488-general/topic/status.20of.20schemes/near/207612757">said</a>:</p>
<blockquote>
<p>My understanding is that <span class="user-mention silent" data-user-id="246273">Bhavik Mehta</span> has a bunch of this stuff in the topos repo but he also has a thesis to write</p>
</blockquote>
<p>Yeah, I'm in the process of slowly PR-ing the preliminary stuff though</p>



<a name="207723842"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207723842" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207723842">(Aug 22 2020 at 13:08)</a>:</h4>
<p><span class="user-mention" data-user-id="112680">@Johan Commelin</span>, I'm done for the day I think, but I just pushed <code>LRS</code>, which includes a definition of <code>Scheme</code>. There are no sorries in that file, but there are sorries elsewhere!</p>



<a name="207723848"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207723848" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207723848">(Aug 22 2020 at 13:08)</a>:</h4>
<p>At least to get to the definition, all we need now is restricting a <code>PresheafedSpace</code> / <code>SheafedSpace</code> / <code>LocallyRingedSpace</code> to an open subset.</p>



<a name="207723853"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207723853" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207723853">(Aug 22 2020 at 13:09)</a>:</h4>
<p>Those restrictions are stubbed out in their respective files, but the actual content is not there.</p>



<a name="207724017"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207724017" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207724017">(Aug 22 2020 at 13:13)</a>:</h4>
<p>Ok, thanks for all you've done!</p>



<a name="207724215"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207724215" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207724215">(Aug 22 2020 at 13:18)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> <span class="user-mention" data-user-id="112680">@Johan Commelin</span> what do you think of my idea?</p>



<a name="207724451"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207724451" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207724451">(Aug 22 2020 at 13:24)</a>:</h4>
<p>My intuition <span aria-label="stuck out tongue wink" class="emoji emoji-1f61c" role="img" title="stuck out tongue wink">:stuck_out_tongue_wink:</span> likes the categorical approach</p>



<a name="207724455"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207724455" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207724455">(Aug 22 2020 at 13:24)</a>:</h4>
<p>But maybe Lean doesn't...</p>



<a name="207724458"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207724458" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207724458">(Aug 22 2020 at 13:24)</a>:</h4>
<p>I'm trying to find it out</p>



<a name="207724480"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207724480" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207724480">(Aug 22 2020 at 13:25)</a>:</h4>
<p>I guess your idea would also work, but then we shift the problem to next year, when we want to discuss etale sheaves.</p>



<a name="207725286"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207725286" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207725286">(Aug 22 2020 at 13:46)</a>:</h4>
<p>I'm not saying this is the right approach, but the etale topos does have enough points, so the espace etale approach "could" work in the etale topology as well.</p>



<a name="207726848"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207726848" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207726848">(Aug 22 2020 at 14:29)</a>:</h4>
<p><span class="user-mention" data-user-id="110064">@Kenny Lau</span> when the dust has settled it will be interesting to see which approach can glue schemes together. Making projective 1 space by glueing two affine 1 spaces will be a key exercise</p>



<a name="207744941"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207744941" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207744941">(Aug 22 2020 at 22:33)</a>:</h4>
<p>So I think that at least one of the remaining sorries on the way to the definition of <code>Scheme</code> deserves to wait until we get <code>prop_limits</code> right. When definining <code>LocallyRingedSpace.restrict</code>, we need to check that a stalk of the restriction to some <code>U</code> is the stalk of the original LRS. The right way to do this is to show that neighbourhoods inside <code>U</code> are cofinal in all neighbourhoods.</p>
<p>But I don't really want to define <code>cofinal</code> until I know how we're fixing <code>has_limit</code> and friends.</p>



<a name="207745045"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207745045" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207745045">(Aug 22 2020 at 22:36)</a>:</h4>
<p><span class="user-mention" data-user-id="110087">@Scott Morrison</span>, naive question -- is the definition <code>local_predicate</code>in <a href="https://github.com/leanprover-community/mathlib/issues/3906">#3906</a> equivalent to the 1st + 3rd axioms in <a href="https://leanprover-community.github.io/mathlib_docs/find/structure_groupoid.local_invariant_prop">docs#structure_groupoid.local_invariant_prop</a>?</p>



<a name="207745185"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207745185" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207745185">(Aug 22 2020 at 22:40)</a>:</h4>
<p>I can't quite understand what <code>local_invariant_prop</code> is saying, but I don't think so. For one, in <code>local_predicate</code> there is only a single topological space anywhere in the picture, but <code>local_invariant_prop</code> has two.</p>



<a name="207745242"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207745242" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207745242">(Aug 22 2020 at 22:42)</a>:</h4>
<p>Certainly <code>local_predicate</code> is more general -- I guess I'm asking if <code>local_invariant_prop</code> could be rewritten to extend it.</p>



<a name="207745297"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207745297" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207745297">(Aug 22 2020 at 22:44)</a>:</h4>
<p>Easier question, perhaps -- is the first axiom of <code>local_invariant_prop</code> the same as <a href="https://github.com/leanprover-community/mathlib/issues/3906">#3906</a> 's <code>prelocal_predicate</code>?</p>



<a name="207745305"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207745305" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207745305">(Aug 22 2020 at 22:44)</a>:</h4>
<p>No, I still don't think so. <code>local_invariant_prop.local</code> seems much more specific. It says that it suffices to check the property on any open neighbourhood of the point <code>x</code>.</p>



<a name="207745321"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207745321" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207745321">(Aug 22 2020 at 22:45)</a>:</h4>
<p><code>prelocal_predicate</code> only says that it's necessary that the property also hold on a smaller nbhd, if it holds on a big nbhd.</p>



<a name="207745326"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207745326" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207745326">(Aug 22 2020 at 22:45)</a>:</h4>
<p>Ah -- so in fact, it is more akin to <code>local_predicate</code> than <code>prelocal_predicate</code>?</p>



<a name="207745373"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207745373" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207745373">(Aug 22 2020 at 22:46)</a>:</h4>
<p>well, but <code>local_predicate</code> still doesn't care about any particular point</p>



<a name="207745383"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207745383" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207745383">(Aug 22 2020 at 22:47)</a>:</h4>
<p>it says that if at every point in the <code>U</code> of definition you can find a nbhd <code>V</code> where the property holds, the property holds for the function on all of <code>U</code>.</p>



<a name="207745393"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207745393" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207745393">(Aug 22 2020 at 22:47)</a>:</h4>
<p>so still I think there's an incompatible order of quantifiers difference between the two</p>



<a name="207745395"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207745395" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207745395">(Aug 22 2020 at 22:47)</a>:</h4>
<p>(I still haven't got my head around a canonical example of <code>local_invariant_prop</code>, however, so I may just be wrong.)</p>



<a name="207745442"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207745442" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207745442">(Aug 22 2020 at 22:49)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110087">Scott Morrison</span> <a href="#narrow/stream/113488-general/topic/status.20of.20schemes/near/207745395">said</a>:</p>
<blockquote>
<p>(I still haven't got my head around a canonical example of <code>local_invariant_prop</code>, however, so I may just be wrong.)</p>
</blockquote>
<p>(<code>local_invariant_prop</code> is for classes of functions between manifolds which are (1) characterized locally and (2) are basically expressed in terms of the model space, for example smoothness)</p>



<a name="207745503"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207745503" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207745503">(Aug 22 2020 at 22:51)</a>:</h4>
<p>Regardless of the logical relation between them, a big mismatch between them is going to be that <code>local_invariant_prop</code> uses total functions, while <code>local_predicate</code> is all in terms of functions defined only on some <code>U : opens X</code>. (Possibly this is a bad idea, but it seems to work.)</p>



<a name="207745558"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207745558" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207745558">(Aug 22 2020 at 22:53)</a>:</h4>
<p>I can have a look later to see if I can reformulate <code>local_predicate</code> more like this... The first step would be to change the predicate to take a third argument, a particular point. This is making an assumption about the form the predicates take, but I think in all examples this holds.</p>



<a name="207745601"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207745601" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207745601">(Aug 22 2020 at 22:54)</a>:</h4>
<p>But I'm not certain this is a good idea --- the current design is meant to be "exactly what you need to check so that a subset of dependent functions forms a presheaf / sheaf".</p>



<a name="207745609"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207745609" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207745609">(Aug 22 2020 at 22:55)</a>:</h4>
<p>Certainly I think if it is possible to provide some glue going from <code>local_invariant_prop</code> to <code>local_predicate</code> that would be great.</p>



<a name="207745621"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207745621" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207745621">(Aug 22 2020 at 22:55)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110087">Scott Morrison</span> <a href="#narrow/stream/113488-general/topic/status.20of.20schemes/near/207745609">said</a>:</p>
<blockquote>
<p>Certainly I think if it is possible to provide some glue going from <code>local_invariant_prop</code> to <code>local_predicate</code> that would be great.</p>
</blockquote>
<p>Yep, that's exactly what I would hope for, I don't think it matters if the definitional organizations differ.</p>



<a name="207745623"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207745623" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207745623">(Aug 22 2020 at 22:55)</a>:</h4>
<p>We do want to be able to effortlessly say "the rings of smooth functions on open sets form a sheaf, because smoothness is a local property"</p>



<a name="207745672"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207745672" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207745672">(Aug 22 2020 at 22:57)</a>:</h4>
<p>(not, in case Patrick is watching, that I have any desire to infect differential geometry with sheaves --- just for the sake of the exercise :-)</p>



<a name="207746733"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207746733" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207746733">(Aug 22 2020 at 23:30)</a>:</h4>
<p><span class="user-mention" data-user-id="260507">@Heather Macbeth</span> could you point me to the instance of <code>local_invariant_prop</code> for C^\infty smoothness? I can try to add this as an example.</p>



<a name="207746746"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207746746" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207746746">(Aug 22 2020 at 23:31)</a>:</h4>
<p>I would be very interested to see this!  <a href="https://leanprover-community.github.io/mathlib_docs/find/times_cont_diff_within_at_local_invariant_prop">docs#times_cont_diff_within_at_local_invariant_prop</a></p>



<a name="207747353"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207747353" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207747353">(Aug 22 2020 at 23:52)</a>:</h4>
<p><span class="user-mention" data-user-id="110087">@Scott Morrison</span> sorry if I missed this in the discussion above and/or the code... do you have a way of restricting a <code>(pre)local_predicate</code> to an open set?</p>



<a name="207747361"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207747361" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207747361">(Aug 22 2020 at 23:53)</a>:</h4>
<p>That's the <a href="https://github.com/leanprover-community/mathlib/pull/3906/files#diff-48a768093d7f785d9d94cce5a6b93a0eR51"><code>res</code></a> field.</p>



<a name="207747464"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207747464" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207747464">(Aug 22 2020 at 23:56)</a>:</h4>
<p>I mean taking, say, a <code>prelocal_predicate T</code> where T is a dependent function on X, and and open set U in X, and obtaining a <code>prelocal_predicate T'</code> where T' is the restriction of T to U.</p>



<a name="207747469"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207747469" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207747469">(Aug 22 2020 at 23:57)</a>:</h4>
<p>I'm thinking about how to make the sheafification with this approach</p>



<a name="207747474"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207747474" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207747474">(Aug 22 2020 at 23:57)</a>:</h4>
<p>No, I don't have that.</p>



<a name="207747477"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207747477" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207747477">(Aug 22 2020 at 23:57)</a>:</h4>
<p>I.e. the left adjoint of the forgetful functor from <code>local_predicate</code> to <code>prelocal_predicate</code></p>



<a name="207747633"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207747633" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207747633">(Aug 23 2020 at 00:01)</a>:</h4>
<p>Do you mean define the sheafification as the subsheaf of dependent functions into the stalks, given by the <code>local_predicate</code> of being locally induced by something from the presheaf? (i.e. Proposition-Definition II.1.2 of Hartshorne)</p>



<a name="207747639"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207747639" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207747639">(Aug 23 2020 at 00:01)</a>:</h4>
<p>Exactly</p>



<a name="207747663"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207747663" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207747663">(Aug 23 2020 at 00:02)</a>:</h4>
<p>(I assume, I don't have Hartshorne in front of me)</p>



<a name="207747679"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207747679" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207747679">(Aug 23 2020 at 00:02)</a>:</h4>
<p>But I don't see how that relates to restricting?</p>



<a name="207747695"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207747695" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207747695">(Aug 23 2020 at 00:03)</a>:</h4>
<p><a href="/user_uploads/3121/RzBqZBDKh5gOgI8lhKxjyuRR/File-Aug-23-10-02-33.jpeg">Proposition-Definition II.1.2 of Hartshorne</a></p>
<div class="message_inline_image"><a href="/user_uploads/3121/RzBqZBDKh5gOgI8lhKxjyuRR/File-Aug-23-10-02-33.jpeg" title="Proposition-Definition II.1.2 of Hartshorne"><img src="/user_uploads/3121/RzBqZBDKh5gOgI8lhKxjyuRR/File-Aug-23-10-02-33.jpeg"></a></div>



<a name="207747930"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207747930" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207747930">(Aug 23 2020 at 00:10)</a>:</h4>
<p>I'd be happy to give this a go, it does sounds like a good test of <code>local_predicate</code>. Let me know if you're already doing it!</p>



<a name="207747939"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207747939" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207747939">(Aug 23 2020 at 00:10)</a>:</h4>
<p>You're right this should be easy to write down. I was thinking of using covers of U</p>



<a name="207748047"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207748047" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207748047">(Aug 23 2020 at 00:13)</a>:</h4>
<p>I was planning on trying it out, but I won't be able to do much until a few hours from now</p>



<a name="207748049"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207748049" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207748049">(Aug 23 2020 at 00:13)</a>:</h4>
<p>great, okay!</p>



<a name="207748586"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207748586" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207748586">(Aug 23 2020 at 00:32)</a>:</h4>
<p>I pushed a start on this to <code>sheafification</code>:</p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="n">topology</span><span class="bp">.</span><span class="n">sheaves</span><span class="bp">.</span><span class="n">local_predicate</span>
<span class="kn">import</span> <span class="n">topology</span><span class="bp">.</span><span class="n">sheaves</span><span class="bp">.</span><span class="n">stalks</span>

<span class="n">universes</span> <span class="n">v</span>

<span class="n">noncomputable</span> <span class="n">theory</span>

<span class="kn">open</span> <span class="n">Top</span>
<span class="kn">open</span> <span class="n">topological_space</span>
<span class="kn">open</span> <span class="n">opposite</span>
<span class="kn">open</span> <span class="n">category_theory</span><span class="bp">.</span><span class="n">limits</span>

<span class="kn">variables</span> <span class="o">{</span><span class="n">X</span> <span class="o">:</span> <span class="n">Top</span><span class="bp">.</span><span class="o">{</span><span class="n">v</span><span class="o">}}</span>
<span class="kn">variables</span> <span class="o">(</span><span class="n">F</span> <span class="o">:</span> <span class="n">presheaf</span> <span class="o">(</span><span class="kt">Type</span> <span class="n">v</span><span class="o">)</span> <span class="n">X</span><span class="o">)</span>

<span class="kn">namespace</span> <span class="n">sheafification</span>

<span class="n">def</span> <span class="n">stalks</span> <span class="o">:</span> <span class="bp">Π</span> <span class="n">x</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span> <span class="kt">Type</span> <span class="n">v</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">x</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span> <span class="n">F</span><span class="bp">.</span><span class="n">stalk</span> <span class="n">x</span>

<span class="c1">-- TODO it seems all `local_predicate`s have `pred` starting with:</span>
<span class="c1">-- `λ U f, ∀ x : U, ∃ (V : opens X) (m : x.1 ∈ V) (i : V ⟶ U) ...`</span>
<span class="c1">-- Make a definition of this shape, and make it easier to prove `res` and `locality`?</span>

<span class="n">def</span> <span class="n">predicate</span> <span class="o">:</span> <span class="n">local_predicate</span> <span class="o">(</span><span class="n">stalks</span> <span class="n">F</span><span class="o">)</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">pred</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">U</span> <span class="n">f</span><span class="o">,</span> <span class="bp">∀</span> <span class="n">x</span> <span class="o">:</span> <span class="n">U</span><span class="o">,</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">V</span> <span class="o">:</span> <span class="n">opens</span> <span class="n">X</span><span class="o">)</span> <span class="o">(</span><span class="n">m</span> <span class="o">:</span> <span class="n">x</span><span class="bp">.</span><span class="mi">1</span> <span class="err">∈</span> <span class="n">V</span><span class="o">)</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="n">V</span> <span class="err">⟶</span> <span class="n">U</span><span class="o">)</span> <span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="n">F</span><span class="bp">.</span><span class="n">obj</span> <span class="o">(</span><span class="n">op</span> <span class="n">V</span><span class="o">)),</span>
    <span class="n">f</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">colimit</span><span class="bp">.</span><span class="n">ι</span> <span class="o">((</span><span class="n">open_nhds</span><span class="bp">.</span><span class="n">inclusion</span> <span class="n">x</span><span class="bp">.</span><span class="mi">1</span><span class="o">)</span><span class="bp">.</span><span class="n">op</span> <span class="err">⋙</span> <span class="n">F</span><span class="o">)</span> <span class="o">(</span><span class="n">op</span> <span class="bp">⟨</span><span class="n">V</span><span class="o">,</span> <span class="n">m</span><span class="bp">⟩</span><span class="o">)</span> <span class="n">g</span><span class="o">,</span> <span class="c1">-- TODO define `germ`!</span>
  <span class="n">res</span> <span class="o">:=</span> <span class="n">sorry</span><span class="o">,</span>
  <span class="n">locality</span> <span class="o">:=</span> <span class="n">sorry</span><span class="o">,</span> <span class="o">}</span>

<span class="kn">end</span> <span class="n">sheafification</span>

<span class="n">def</span> <span class="n">sheafification</span> <span class="o">:</span> <span class="n">sheaf</span> <span class="o">(</span><span class="kt">Type</span> <span class="n">v</span><span class="o">)</span> <span class="n">X</span> <span class="o">:=</span>
<span class="n">subsheaf_to_Types</span> <span class="o">(</span><span class="n">sheafification</span><span class="bp">.</span><span class="n">predicate</span> <span class="n">F</span><span class="o">)</span>

<span class="c1">-- TODO check the stalks are correct</span>
<span class="c1">-- TODO functoriality</span>
</code></pre></div>



<a name="207748871"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207748871" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207748871">(Aug 23 2020 at 00:43)</a>:</h4>
<p>Nice! I was thinking even more low-level... something like this:</p>
<div class="codehilite"><pre><span></span><code><span class="n">def</span> <span class="n">sheafify</span> <span class="o">(</span><span class="n">P</span> <span class="o">:</span> <span class="n">prelocal_predicate</span> <span class="n">T</span><span class="o">)</span> <span class="o">:</span> <span class="n">local_predicate</span> <span class="n">T</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">pred</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">U</span> <span class="n">f</span><span class="o">,</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">U</span><span class="o">),</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">V</span> <span class="o">:</span> <span class="n">opens</span> <span class="n">X</span><span class="o">)</span> <span class="o">(</span><span class="n">mem</span> <span class="o">:</span> <span class="n">x</span><span class="bp">.</span><span class="mi">1</span> <span class="err">∈</span> <span class="n">V</span><span class="o">)</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="n">V</span> <span class="err">⟶</span> <span class="n">U</span><span class="o">),</span>
    <span class="n">P</span><span class="bp">.</span><span class="n">pred</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">x</span> <span class="o">:</span> <span class="n">V</span><span class="o">,</span> <span class="n">f</span> <span class="o">(</span><span class="n">i</span> <span class="n">x</span> <span class="o">:</span> <span class="n">U</span><span class="o">)),</span>
  <span class="n">res</span> <span class="o">:=</span> <span class="n">sorry</span><span class="o">,</span>
  <span class="n">locality</span> <span class="o">:=</span> <span class="n">sorry</span> <span class="o">}</span>
</code></pre></div>



<a name="207749392"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207749392" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207749392">(Aug 23 2020 at 01:01)</a>:</h4>
<p>oh!</p>



<a name="207751621"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207751621" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207751621">(Aug 23 2020 at 02:18)</a>:</h4>
<p>Neat!</p>
<div class="codehilite"><pre><span></span><code><span class="n">def</span> <span class="n">sheafify</span> <span class="o">{</span><span class="n">T</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="kt">Type</span> <span class="n">v</span><span class="o">}</span> <span class="o">(</span><span class="n">P</span> <span class="o">:</span> <span class="n">prelocal_predicate</span> <span class="n">T</span><span class="o">)</span> <span class="o">:</span> <span class="n">local_predicate</span> <span class="n">T</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">pred</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">U</span> <span class="n">f</span><span class="o">,</span> <span class="bp">∀</span> <span class="n">x</span> <span class="o">:</span> <span class="n">U</span><span class="o">,</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">V</span> <span class="o">:</span> <span class="n">opens</span> <span class="n">X</span><span class="o">)</span> <span class="o">(</span><span class="n">m</span> <span class="o">:</span> <span class="n">x</span><span class="bp">.</span><span class="mi">1</span> <span class="err">∈</span> <span class="n">V</span><span class="o">)</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="n">V</span> <span class="err">⟶</span> <span class="n">U</span><span class="o">),</span> <span class="n">P</span><span class="bp">.</span><span class="n">pred</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">x</span> <span class="o">:</span> <span class="n">V</span><span class="o">,</span> <span class="n">f</span> <span class="o">(</span><span class="n">i</span> <span class="n">x</span> <span class="o">:</span> <span class="n">U</span><span class="o">)),</span>
  <span class="n">res</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">V</span> <span class="n">U</span> <span class="n">i</span> <span class="n">f</span> <span class="n">w</span> <span class="n">x</span><span class="o">,</span>
  <span class="k">begin</span>
    <span class="n">specialize</span> <span class="n">w</span> <span class="o">(</span><span class="n">i</span> <span class="n">x</span><span class="o">),</span>
    <span class="n">rcases</span> <span class="n">w</span> <span class="k">with</span> <span class="bp">⟨</span><span class="n">V&#39;</span><span class="o">,</span> <span class="n">m&#39;</span><span class="o">,</span> <span class="n">i&#39;</span><span class="o">,</span> <span class="n">p</span><span class="bp">⟩</span><span class="o">,</span>
    <span class="n">use</span> <span class="n">V</span> <span class="err">⊓</span> <span class="n">V&#39;</span><span class="o">,</span>
    <span class="n">use</span> <span class="bp">⟨</span><span class="n">x</span><span class="bp">.</span><span class="mi">2</span><span class="o">,</span> <span class="n">m&#39;</span><span class="bp">⟩</span><span class="o">,</span>
    <span class="n">use</span> <span class="n">opens</span><span class="bp">.</span><span class="n">inf_le_left</span> <span class="bp">_</span> <span class="bp">_</span><span class="o">,</span>
    <span class="n">convert</span> <span class="n">P</span><span class="bp">.</span><span class="n">res</span> <span class="o">(</span><span class="n">opens</span><span class="bp">.</span><span class="n">inf_le_right</span> <span class="n">V</span> <span class="n">V&#39;</span><span class="o">)</span> <span class="bp">_</span> <span class="n">p</span><span class="o">,</span>
  <span class="kn">end</span><span class="o">,</span>
  <span class="n">locality</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">U</span> <span class="n">f</span> <span class="n">w</span> <span class="n">x</span><span class="o">,</span>
  <span class="k">begin</span>
    <span class="n">specialize</span> <span class="n">w</span> <span class="n">x</span><span class="o">,</span>
    <span class="n">rcases</span> <span class="n">w</span> <span class="k">with</span> <span class="bp">⟨</span><span class="n">V</span><span class="o">,</span> <span class="n">m</span><span class="o">,</span> <span class="n">i</span><span class="o">,</span> <span class="n">p</span><span class="bp">⟩</span><span class="o">,</span>
    <span class="n">specialize</span> <span class="n">p</span> <span class="bp">⟨</span><span class="n">x</span><span class="bp">.</span><span class="mi">1</span><span class="o">,</span> <span class="n">m</span><span class="bp">⟩</span><span class="o">,</span>
    <span class="n">rcases</span> <span class="n">p</span> <span class="k">with</span> <span class="bp">⟨</span><span class="n">V&#39;</span><span class="o">,</span> <span class="n">m&#39;</span><span class="o">,</span> <span class="n">i&#39;</span><span class="o">,</span> <span class="n">p&#39;</span><span class="bp">⟩</span><span class="o">,</span>
    <span class="n">use</span> <span class="n">V&#39;</span><span class="o">,</span>
    <span class="n">use</span> <span class="n">m&#39;</span><span class="o">,</span>
    <span class="n">use</span> <span class="n">i&#39;</span> <span class="err">≫</span> <span class="n">i</span><span class="o">,</span>
    <span class="n">exact</span> <span class="n">p&#39;</span><span class="o">,</span>
  <span class="kn">end</span><span class="o">,</span> <span class="o">}</span>
</code></pre></div>



<a name="207752373"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207752373" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207752373">(Aug 23 2020 at 02:42)</a>:</h4>
<p>Golfed a little bit:</p>
<div class="codehilite"><pre><span></span><code><span class="n">def</span> <span class="n">sheafify</span> <span class="o">{</span><span class="n">T</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="kt">Type</span> <span class="n">v</span><span class="o">}</span> <span class="o">(</span><span class="n">P</span> <span class="o">:</span> <span class="n">prelocal_predicate</span> <span class="n">T</span><span class="o">)</span> <span class="o">:</span> <span class="n">local_predicate</span> <span class="n">T</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">pred</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">U</span> <span class="n">f</span><span class="o">,</span> <span class="bp">∀</span> <span class="n">x</span> <span class="o">:</span> <span class="n">U</span><span class="o">,</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">V</span> <span class="o">:</span> <span class="n">opens</span> <span class="n">X</span><span class="o">)</span> <span class="o">(</span><span class="n">m</span> <span class="o">:</span> <span class="n">x</span><span class="bp">.</span><span class="mi">1</span> <span class="err">∈</span> <span class="n">V</span><span class="o">)</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="n">V</span> <span class="err">⟶</span> <span class="n">U</span><span class="o">),</span> <span class="n">P</span><span class="bp">.</span><span class="n">pred</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">x</span> <span class="o">:</span> <span class="n">V</span><span class="o">,</span> <span class="n">f</span> <span class="o">(</span><span class="n">i</span> <span class="n">x</span> <span class="o">:</span> <span class="n">U</span><span class="o">)),</span>
  <span class="n">res</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">V</span> <span class="n">U</span> <span class="n">i</span> <span class="n">f</span> <span class="n">w</span> <span class="n">x</span><span class="o">,</span>
  <span class="k">begin</span>
    <span class="n">specialize</span> <span class="n">w</span> <span class="o">(</span><span class="n">i</span> <span class="n">x</span><span class="o">),</span>
    <span class="n">rcases</span> <span class="n">w</span> <span class="k">with</span> <span class="bp">⟨</span><span class="n">V&#39;</span><span class="o">,</span> <span class="n">m&#39;</span><span class="o">,</span> <span class="n">i&#39;</span><span class="o">,</span> <span class="n">p</span><span class="bp">⟩</span><span class="o">,</span>
    <span class="n">refine</span> <span class="bp">⟨</span><span class="n">V</span> <span class="err">⊓</span> <span class="n">V&#39;</span><span class="o">,</span><span class="bp">⟨</span><span class="n">x</span><span class="bp">.</span><span class="mi">2</span><span class="o">,</span><span class="n">m&#39;</span><span class="bp">⟩</span><span class="o">,</span><span class="n">opens</span><span class="bp">.</span><span class="n">inf_le_left</span> <span class="bp">_</span> <span class="bp">_</span><span class="o">,</span><span class="bp">_⟩</span><span class="o">,</span>
    <span class="n">convert</span> <span class="n">P</span><span class="bp">.</span><span class="n">res</span> <span class="o">(</span><span class="n">opens</span><span class="bp">.</span><span class="n">inf_le_right</span> <span class="n">V</span> <span class="n">V&#39;</span><span class="o">)</span> <span class="bp">_</span> <span class="n">p</span><span class="o">,</span>
  <span class="kn">end</span><span class="o">,</span>
  <span class="n">locality</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">U</span> <span class="n">f</span> <span class="n">w</span> <span class="n">x</span><span class="o">,</span>
  <span class="k">begin</span>
    <span class="n">specialize</span> <span class="n">w</span> <span class="n">x</span><span class="o">,</span>
    <span class="n">rcases</span> <span class="n">w</span> <span class="k">with</span> <span class="bp">⟨</span><span class="n">V</span><span class="o">,</span> <span class="n">m</span><span class="o">,</span> <span class="n">i</span><span class="o">,</span> <span class="n">p</span><span class="bp">⟩</span><span class="o">,</span>
    <span class="n">specialize</span> <span class="n">p</span> <span class="bp">⟨</span><span class="n">x</span><span class="bp">.</span><span class="mi">1</span><span class="o">,</span> <span class="n">m</span><span class="bp">⟩</span><span class="o">,</span>
    <span class="n">rcases</span> <span class="n">p</span> <span class="k">with</span> <span class="bp">⟨</span><span class="n">V&#39;</span><span class="o">,</span> <span class="n">m&#39;</span><span class="o">,</span> <span class="n">i&#39;</span><span class="o">,</span> <span class="n">p&#39;</span><span class="bp">⟩</span><span class="o">,</span>
    <span class="n">exact</span> <span class="bp">⟨</span><span class="n">V&#39;</span><span class="o">,</span><span class="n">m&#39;</span><span class="o">,</span><span class="n">i&#39;</span> <span class="err">≫</span> <span class="n">i</span><span class="o">,</span><span class="n">p&#39;</span><span class="bp">⟩</span><span class="o">,</span>
  <span class="kn">end</span> <span class="o">}</span>
</code></pre></div>



<a name="207753435"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207753435" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207753435">(Aug 23 2020 at 03:16)</a>:</h4>
<p>I don't know if this is worth doing, but there is a natural category structure on "dependent functions", and it's possible to build a category of local_predicates on top of that. Sheaves (of sets on a topological space) as a category should be essentially this. </p>
<p>Here's a little sketch of the category of dependent functions:</p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="n">tactic</span>
<span class="kn">import</span> <span class="n">category_theory</span><span class="bp">.</span><span class="n">category</span>

<span class="kn">open</span> <span class="n">category_theory</span>

<span class="kn">variable</span> <span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span>

<span class="n">def</span> <span class="n">depfun</span> <span class="o">:=</span> <span class="o">(</span><span class="err">Σ</span> <span class="o">{</span><span class="n">G</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">},</span> <span class="bp">Π</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">X</span><span class="o">),</span> <span class="n">G</span> <span class="n">x</span><span class="o">)</span>

<span class="kn">namespace</span> <span class="n">depfun</span>

<span class="kn">variable</span> <span class="o">{</span><span class="n">X</span><span class="o">}</span>
<span class="n">def</span> <span class="n">hom</span> <span class="o">(</span><span class="n">T1</span> <span class="n">T2</span> <span class="o">:</span> <span class="n">depfun</span> <span class="n">X</span><span class="o">)</span> <span class="o">:=</span>
  <span class="o">{</span> <span class="n">g</span> <span class="o">:</span> <span class="bp">Π</span> <span class="o">{</span><span class="n">x</span> <span class="o">:</span> <span class="n">X</span><span class="o">},</span> <span class="n">T1</span><span class="bp">.</span><span class="n">fst</span> <span class="n">x</span> <span class="bp">→</span> <span class="n">T2</span><span class="bp">.</span><span class="n">fst</span> <span class="n">x</span> <span class="bp">//</span> <span class="bp">∀</span> <span class="n">x</span><span class="o">,</span> <span class="n">g</span> <span class="o">(</span><span class="n">T1</span><span class="bp">.</span><span class="n">snd</span> <span class="n">x</span><span class="o">)</span> <span class="bp">=</span> <span class="n">T2</span><span class="bp">.</span><span class="n">snd</span> <span class="n">x</span> <span class="o">}</span>

<span class="kn">namespace</span> <span class="n">hom</span>

<span class="n">def</span> <span class="n">id</span> <span class="o">(</span><span class="n">T</span> <span class="o">:</span> <span class="n">depfun</span> <span class="n">X</span><span class="o">)</span> <span class="o">:</span> <span class="n">depfun</span><span class="bp">.</span><span class="n">hom</span> <span class="n">T</span> <span class="n">T</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">val</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">x</span><span class="o">,</span> <span class="n">id</span><span class="o">,</span>
  <span class="n">property</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">tauto</span> <span class="o">}</span>

<span class="n">def</span> <span class="n">comp</span> <span class="o">(</span><span class="n">T1</span> <span class="n">T2</span> <span class="n">T3</span> <span class="o">:</span> <span class="n">depfun</span> <span class="n">X</span><span class="o">)</span> <span class="o">(</span><span class="n">F</span> <span class="o">:</span> <span class="n">hom</span> <span class="n">T1</span> <span class="n">T2</span><span class="o">)</span> <span class="o">(</span><span class="n">G</span> <span class="o">:</span> <span class="n">hom</span> <span class="n">T2</span> <span class="n">T3</span><span class="o">)</span> <span class="o">:</span> <span class="n">hom</span> <span class="n">T1</span> <span class="n">T3</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">val</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">x</span> <span class="n">y</span><span class="o">,</span> <span class="n">G</span><span class="bp">.</span><span class="n">val</span> <span class="err">$</span> <span class="n">F</span><span class="bp">.</span><span class="n">val</span> <span class="n">y</span><span class="o">,</span>
  <span class="n">property</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">x</span><span class="o">,</span> <span class="k">by</span> <span class="n">rw</span> <span class="o">[</span><span class="n">F</span><span class="bp">.</span><span class="mi">2</span><span class="o">,</span><span class="n">G</span><span class="bp">.</span><span class="mi">2</span><span class="o">]</span> <span class="o">}</span>

<span class="kn">end</span> <span class="n">hom</span>

<span class="kn">instance</span> <span class="o">:</span> <span class="n">category</span> <span class="o">(</span><span class="n">depfun</span> <span class="n">X</span><span class="o">)</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">hom</span> <span class="o">:=</span> <span class="n">depfun</span><span class="bp">.</span><span class="n">hom</span><span class="o">,</span>
  <span class="n">id</span> <span class="o">:=</span> <span class="n">depfun</span><span class="bp">.</span><span class="n">hom</span><span class="bp">.</span><span class="n">id</span><span class="o">,</span>
  <span class="n">comp</span> <span class="o">:=</span> <span class="n">depfun</span><span class="bp">.</span><span class="n">hom</span><span class="bp">.</span><span class="n">comp</span> <span class="o">}</span>
<span class="kn">end</span> <span class="n">depfun</span>
</code></pre></div>



<a name="207755879"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207755879" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207755879">(Aug 23 2020 at 04:32)</a>:</h4>
<p><span class="user-mention" data-user-id="243562">@Adam Topaz</span>, I've refactored the <code>spec</code> branch (<a href="https://github.com/leanprover-community/mathlib/issues/3907">#3907</a>) to use <code>prelocal_predicate.sheafify</code>. It's nice!</p>



<a name="207755998"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207755998" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207755998">(Aug 23 2020 at 04:37)</a>:</h4>
<p>Note that Bhavik already did sheafification in an arbitrary topos</p>



<a name="207759550"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207759550" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207759550">(Aug 23 2020 at 06:47)</a>:</h4>
<p>Right but it's not in mathlib</p>



<a name="207759603"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207759603" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207759603">(Aug 23 2020 at 06:49)</a>:</h4>
<p>Actually defining the sheafification is now delightfully easy --- just a couple of lines:</p>
<div class="codehilite"><pre><span></span><code><span class="n">def</span> <span class="n">is_germ</span> <span class="o">:</span> <span class="n">prelocal_predicate</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">x</span><span class="o">,</span> <span class="n">F</span><span class="bp">.</span><span class="n">stalk</span> <span class="n">x</span><span class="o">)</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">pred</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">U</span> <span class="n">f</span><span class="o">,</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="n">F</span><span class="bp">.</span><span class="n">obj</span> <span class="o">(</span><span class="n">op</span> <span class="n">U</span><span class="o">)),</span> <span class="bp">∀</span> <span class="n">x</span> <span class="o">:</span> <span class="n">U</span><span class="o">,</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">F</span><span class="bp">.</span><span class="n">germ</span> <span class="n">x</span> <span class="n">g</span><span class="o">,</span>
  <span class="n">res</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">V</span> <span class="n">U</span> <span class="n">i</span> <span class="n">f</span> <span class="bp">⟨</span><span class="n">g</span><span class="o">,</span> <span class="n">p</span><span class="bp">⟩</span><span class="o">,</span> <span class="bp">⟨</span><span class="n">F</span><span class="bp">.</span><span class="n">map</span> <span class="n">i</span><span class="bp">.</span><span class="n">op</span> <span class="n">g</span><span class="o">,</span> <span class="bp">λ</span> <span class="n">x</span><span class="o">,</span> <span class="o">(</span><span class="n">p</span> <span class="o">(</span><span class="n">i</span> <span class="n">x</span><span class="o">))</span><span class="bp">.</span><span class="n">trans</span> <span class="o">(</span><span class="n">F</span><span class="bp">.</span><span class="n">germ_res</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span><span class="o">)</span><span class="bp">.</span><span class="n">symm</span><span class="bp">⟩</span><span class="o">,</span> <span class="o">}</span>

<span class="n">def</span> <span class="n">is_locally_germ</span> <span class="o">:</span> <span class="n">local_predicate</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">x</span><span class="o">,</span> <span class="n">F</span><span class="bp">.</span><span class="n">stalk</span> <span class="n">x</span><span class="o">)</span> <span class="o">:=</span> <span class="o">(</span><span class="n">is_germ</span> <span class="n">F</span><span class="o">)</span><span class="bp">.</span><span class="n">sheafify</span>

<span class="n">def</span> <span class="n">sheafify</span> <span class="o">:</span> <span class="n">sheaf</span> <span class="o">(</span><span class="kt">Type</span> <span class="n">v</span><span class="o">)</span> <span class="n">X</span> <span class="o">:=</span>
<span class="n">subsheaf_to_Types</span> <span class="o">(</span><span class="n">sheafify</span><span class="bp">.</span><span class="n">is_locally_germ</span> <span class="n">F</span><span class="o">)</span>
</code></pre></div>


<p>I'm trying to prove that the stalks are the original stalks, and I can do the constructions, but checking well-definedness I'm in <code>classical.some</code> hell.</p>



<a name="207768046"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207768046" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bhavik Mehta <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207768046">(Aug 23 2020 at 11:11)</a>:</h4>
<p>Yeah I'm in the process of putting it in mathlib though</p>



<a name="207768393"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207768393" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207768393">(Aug 23 2020 at 11:21)</a>:</h4>
<p>The sheafification I was playing with today is not that important. It was just a spin-off of what we've been doing on Spec R in the last few days.</p>



<a name="207769684"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207769684" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bhavik Mehta <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207769684">(Aug 23 2020 at 12:01)</a>:</h4>
<p>I don't know if it would be worth investigating other constructions of sheafification though - for instance if there's a particular construction which gives nice defeq properties for geometers then it could be worthwhile to use that version as the definition, and since it should be isomorphic to my version (once the sheafify-forget adjunction is done for some other version) properties like being a geometric morphism of topoi would drop out: this is a question for the geometers really</p>



<a name="207772530"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207772530" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207772530">(Aug 23 2020 at 13:14)</a>:</h4>
<p>We should experiment!</p>



<a name="207773168"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207773168" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207773168">(Aug 23 2020 at 13:26)</a>:</h4>
<p>Regardless what the definition is, we would need the theorem that the stalks of the sheafification agree with those of the presheaf, and an "extensionality" principle that a map of sheaves is an iso iff it is an iso on all stalks. This makes me think that the disjoint union of stalks definition has a good chance of being useful in practice.</p>



<a name="207776285"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207776285" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207776285">(Aug 23 2020 at 14:37)</a>:</h4>
<p>I'm just trying to catch up on all this stuff today</p>



<a name="207787909"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207787909" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207787909">(Aug 23 2020 at 19:35)</a>:</h4>
<p>How far are we from sheaves of modules on a ringed space? From bundled locally ringed spaces?</p>



<a name="207788389"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207788389" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207788389">(Aug 23 2020 at 19:49)</a>:</h4>
<p>Have we isolated some kind of concept of a "concrete sheaf" on a topological space, as being a subsheaf of the sections of a dependent pi type? And the theory of sheafification is nice and straightforward here. Is this what has happened?</p>



<a name="207796433"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207796433" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207796433">(Aug 23 2020 at 23:27)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span>, there is a branch <a href="https://github.com/leanprover-community/mathlib/tree/LRS">branch#LRS</a> that Johan and I have been working on that defines a bundled <code>LocallyRingedSpace</code>, as well as a bundled <code>Scheme</code>.</p>



<a name="207796487"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207796487" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207796487">(Aug 23 2020 at 23:28)</a>:</h4>
<p>It has two major sorries:</p>
<ol>
<li>checking that when you pull back a presheaf along an open embedding, you don't change the stalks</li>
<li>checking that the stalks of <code>Spec R</code> are the localizations</li>
</ol>



<a name="207796511"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207796511" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207796511">(Aug 23 2020 at 23:29)</a>:</h4>
<p>For 1., the thorough way to do this would be to set up the theory of cofinal functors. (Because the inclusion of "nbhds of x within U" into "nbhds of x" is cofinal, so colimits are the same.)</p>



<a name="207796572"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207796572" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207796572">(Aug 23 2020 at 23:30)</a>:</h4>
<p>We're pretty well set up to do this, because <span class="user-mention" data-user-id="246273">@Bhavik Mehta</span> made a nice API for connected categories. I thought about this a little, but struggled getting my head around doing the construction without ever inducting on zigzags... I think instead you want to use the characterisation "functors out of a connected category to a discrete category are constant" directly.</p>



<a name="207796588"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207796588" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207796588">(Aug 23 2020 at 23:31)</a>:</h4>
<p>For 2. as far as I can see it is just a matter of copying and pasting the relevant page of Hartshorne. I haven't started this yet, but would be happy to either do it, or screen share with someone and see if we can hack it out. I don't see any particular obstruction.</p>



<a name="207796699"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207796699" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207796699">(Aug 23 2020 at 23:34)</a>:</h4>
<blockquote>
<p>How far are we from sheaves of modules on a ringed space? </p>
</blockquote>
<p>I haven't made any progress on this. One thing I would like to try is modelling a sheaf of rings as an internal ring object in sheaves, and then talking about a sheaf of modules as an internal module object. However, the "internal objects" development that exists so far is largely incompatible with the changes we really ought to make to get <code>prop_limits</code> (making the currently evil <code>has_limit</code> typeclass into a Prop) merged.</p>
<p>So I've stopped working on / thinking about internal objects, until we get that done.</p>



<a name="207796825"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207796825" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207796825">(Aug 23 2020 at 23:38)</a>:</h4>
<p>The two main blockers on the <code>prop_limits</code> branch are now:</p>
<ol>
<li>fixing the construction of a monoidal category from a category with binary products, so it's possible to specify which binary products you want to use,</li>
<li>the file <a href="https://leanprover-community.github.io/mathlib_docs/find/Top.sheaf_condition.to_Types/src">src#Top.sheaf_condition.to_Types</a> uses an "it's obvious" step that relied on Lean knowing the definition of limits in <code>Type</code>, and this is currently broken on the <code>prop_limits</code> branch, and every time I look at it my head hurts.</li>
</ol>



<a name="207796846"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207796846" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207796846">(Aug 23 2020 at 23:39)</a>:</h4>
<p>That said, it may be that <span class="user-mention" data-user-id="110032">@Reid Barton</span> has other ideas besides the <code>prop_limits</code> branch about how to resolve the <code>has_limit</code> issue, but I'm not sure where his thinking is on this.</p>



<a name="207796903"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207796903" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207796903">(Aug 23 2020 at 23:40)</a>:</h4>
<p>The PR <a href="https://github.com/leanprover-community/mathlib/issues/3873">#3873</a>, already merged into <code>prop_limits</code> takes care of one of the other obstructions, namely getting all the constructions of limits in concrete categories working compatibly with a propositional <code>has_limit</code> typeclass. (I think this obstruction is where <span class="user-mention" data-user-id="260921">@Markus Himmel</span> originally paused when he started the <code>prop_limits</code> branch.)</p>



<a name="207797024"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207797024" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bhavik Mehta <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207797024">(Aug 23 2020 at 23:44)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110087">Scott Morrison</span> <a href="#narrow/stream/113488-general/topic/status.20of.20schemes/near/207796699">said</a>:</p>
<blockquote>
<blockquote>
<p>How far are we from sheaves of modules on a ringed space? </p>
</blockquote>
<p>modelling a sheaf of rings as an internal ring object in sheaves</p>
</blockquote>
<p>I think this is a useful thing to have as well</p>



<a name="207797043"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207797043" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bhavik Mehta <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207797043">(Aug 23 2020 at 23:45)</a>:</h4>
<p>I think one thing which will help the <code>has_limit</code> issue yet also be useful for <code>prop_limits</code> would be to have basically everything stated in terms of <code>is_limit</code> rather than "the" limit</p>



<a name="207797292"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207797292" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207797292">(Aug 23 2020 at 23:52)</a>:</h4>
<p>Yes. I understand that this is better, but it's also usually really painful. :-)</p>



<a name="207799947"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207799947" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207799947">(Aug 24 2020 at 01:06)</a>:</h4>
<p>I'm still playing around with these local predicates: here's an idea for sheaves of modules using <code>local_predicate</code>:</p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="n">algebra</span>
<span class="kn">import</span> <span class="n">topology</span><span class="bp">.</span><span class="n">sheaves</span><span class="bp">.</span><span class="n">local_predicate</span>

<span class="kn">open</span> <span class="n">Top</span>
<span class="kn">open</span> <span class="n">topological_space</span>
<span class="kn">universe</span> <span class="n">v</span>
<span class="kn">variables</span> <span class="o">{</span><span class="n">X</span> <span class="o">:</span> <span class="n">Top</span><span class="bp">.</span><span class="o">{</span><span class="n">v</span><span class="o">}}</span>
<span class="kn">variables</span> <span class="o">(</span><span class="n">T</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="kt">Type</span> <span class="n">v</span><span class="o">)</span> <span class="o">(</span><span class="n">S</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="kt">Type</span> <span class="n">v</span><span class="o">)</span>

<span class="kn">structure</span> <span class="n">local_ring_predicate</span> <span class="kn">extends</span> <span class="n">local_predicate</span> <span class="n">T</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">fibre_ring</span> <span class="o">(</span><span class="n">x</span>  <span class="o">:</span> <span class="n">X</span><span class="o">)</span> <span class="o">:</span> <span class="n">ring</span> <span class="o">(</span><span class="n">T</span> <span class="n">x</span><span class="o">))</span>
<span class="o">(</span><span class="n">is_subring</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">{</span><span class="n">U</span> <span class="o">:</span> <span class="n">opens</span> <span class="n">X</span><span class="o">},</span> <span class="n">is_subring</span> <span class="o">(</span><span class="n">pred</span> <span class="o">:</span> <span class="n">set</span> <span class="o">(</span><span class="bp">Π</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">U</span><span class="o">),</span> <span class="n">T</span> <span class="n">x</span><span class="o">)))</span>

<span class="kn">structure</span> <span class="n">local_module_predicate</span> <span class="o">(</span><span class="n">A</span> <span class="o">:</span> <span class="n">local_ring_predicate</span> <span class="n">T</span><span class="o">)</span> <span class="kn">extends</span> <span class="n">local_predicate</span> <span class="n">S</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">fibre_add_comm_group</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">X</span><span class="o">)</span> <span class="o">:</span> <span class="n">add_comm_group</span> <span class="o">(</span><span class="n">S</span> <span class="n">x</span><span class="o">))</span>
<span class="o">(</span><span class="n">fibre_module</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">X</span><span class="o">)</span> <span class="o">:</span> <span class="k">by</span> <span class="n">letI</span> <span class="o">:=</span> <span class="n">A</span><span class="bp">.</span><span class="n">fibre_ring</span> <span class="n">x</span><span class="bp">;</span> <span class="n">exact</span> <span class="n">module</span> <span class="o">(</span><span class="n">T</span> <span class="n">x</span><span class="o">)</span> <span class="o">(</span><span class="n">S</span> <span class="n">x</span><span class="o">))</span>
<span class="o">(</span><span class="n">is_submodule</span> <span class="o">:</span> <span class="n">sorry</span><span class="o">)</span> <span class="c1">-- is_submodule doesn&#39;t exist in mathlib, but you get the idea.</span>
</code></pre></div>


<p>Of course, this is different from the categorical approach that <span class="user-mention" data-user-id="110087">@Scott Morrison</span> and <span class="user-mention" data-user-id="112680">@Johan Commelin</span> have used.</p>



<a name="207800020"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207800020" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207800020">(Aug 24 2020 at 01:08)</a>:</h4>
<p>Yes, I know that I shouldn't use <code>is_subring</code> :)</p>



<a name="207800039"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207800039" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207800039">(Aug 24 2020 at 01:09)</a>:</h4>
<p>Wouldn't it make more sense to parametrise by <code>fibre_ring</code>, rather than bundle it?</p>



<a name="207800087"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207800087" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207800087">(Aug 24 2020 at 01:10)</a>:</h4>
<p>Oh yeah, good point. I guess that way the instance will be found in the second definition.</p>



<a name="207800094"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207800094" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207800094">(Aug 24 2020 at 01:11)</a>:</h4>
<p>one way to deal with the deprecation of <code>is_subring</code> would be to rename <code>local_predicate.pred</code> to <code>local_predicate.carrier</code>, and have <code>local_ring_predicate</code> extend <code>subring</code>... not sure if this actually makes sense.</p>



<a name="207800103"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207800103" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207800103">(Aug 24 2020 at 01:11)</a>:</h4>
<p>(the idea being to force <code>.pred</code> and <code>.carrier</code> to agree by having them be the same thing)</p>



<a name="207800142"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207800142" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207800142">(Aug 24 2020 at 01:12)</a>:</h4>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="n">algebra</span>
<span class="kn">import</span> <span class="n">topology</span><span class="bp">.</span><span class="n">sheaves</span><span class="bp">.</span><span class="n">local_predicate</span>

<span class="kn">open</span> <span class="n">Top</span>
<span class="kn">open</span> <span class="n">topological_space</span>
<span class="kn">universe</span> <span class="n">v</span>
<span class="kn">variables</span> <span class="o">{</span><span class="n">X</span> <span class="o">:</span> <span class="n">Top</span><span class="bp">.</span><span class="o">{</span><span class="n">v</span><span class="o">}}</span>
<span class="kn">variables</span> <span class="o">(</span><span class="n">T</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="kt">Type</span> <span class="n">v</span><span class="o">)</span> <span class="o">(</span><span class="n">S</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="kt">Type</span> <span class="n">v</span><span class="o">)</span>

<span class="kn">structure</span> <span class="n">local_ring_predicate</span> <span class="o">[</span><span class="bp">Π</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">X</span><span class="o">),</span> <span class="n">ring</span> <span class="o">(</span><span class="n">T</span> <span class="n">x</span><span class="o">)]</span> <span class="kn">extends</span> <span class="n">local_predicate</span> <span class="n">T</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">is_subring</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">{</span><span class="n">U</span> <span class="o">:</span> <span class="n">opens</span> <span class="n">X</span><span class="o">},</span> <span class="n">is_subring</span> <span class="o">(</span><span class="n">pred</span> <span class="o">:</span> <span class="n">set</span> <span class="o">(</span><span class="bp">Π</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">U</span><span class="o">),</span> <span class="n">T</span> <span class="n">x</span><span class="o">)))</span>

<span class="kn">structure</span> <span class="n">local_module_predicate</span> <span class="o">[</span><span class="bp">Π</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">X</span><span class="o">),</span> <span class="n">ring</span> <span class="o">(</span><span class="n">T</span> <span class="n">x</span><span class="o">)]</span> <span class="o">(</span><span class="n">A</span> <span class="o">:</span> <span class="n">local_ring_predicate</span> <span class="n">T</span><span class="o">)</span>
  <span class="o">[</span><span class="bp">Π</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">X</span><span class="o">),</span> <span class="n">add_comm_group</span> <span class="o">(</span><span class="n">S</span> <span class="n">x</span><span class="o">)]</span> <span class="o">[</span><span class="bp">Π</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">X</span><span class="o">),</span> <span class="n">module</span> <span class="o">(</span><span class="n">T</span> <span class="n">x</span><span class="o">)</span> <span class="o">(</span><span class="n">S</span> <span class="n">x</span><span class="o">)]</span> <span class="kn">extends</span> <span class="n">local_predicate</span> <span class="n">S</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">is_submodule</span> <span class="o">:</span> <span class="n">sorry</span><span class="o">)</span> <span class="c1">-- is_submodule doesn&#39;t exist in mathlib, but you get the idea.</span>
</code></pre></div>



<a name="207800164"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207800164" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207800164">(Aug 24 2020 at 01:13)</a>:</h4>
<p>In another direction, <span class="user-mention" data-user-id="243562">@Adam Topaz</span>, do you know of an abstract condition on <code> prelocal_predicate</code> that ensures that the stalk of its sheafification is the original fibre?</p>



<a name="207800222"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207800222" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207800222">(Aug 24 2020 at 01:14)</a>:</h4>
<p>I was trying to do this in the <code>sheafification</code> branch, where the <code>prelocal_predicate</code> is just <code>is_germ</code>. I ran into trouble with <code>classical.some</code>.</p>



<a name="207800234"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207800234" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207800234">(Aug 24 2020 at 01:15)</a>:</h4>
<p>I think finishing off that isomorphism in the <code>sheafification</code> branch is a good test of this <code>local_predicate</code> setup.</p>



<a name="207800301"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207800301" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207800301">(Aug 24 2020 at 01:17)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110087">Scott Morrison</span> <a href="#narrow/stream/113488-general/topic/status.20of.20schemes/near/207800164">said</a>:</p>
<blockquote>
<p>In another direction, <span class="user-mention silent" data-user-id="243562">Adam Topaz</span>, do you know of an abstract condition on <code> prelocal_predicate</code> that ensures that the stalk of its sheafification is the original fibre?</p>
</blockquote>
<p>Yes, you can just say that for every element <code>z</code> of <code>T x</code>, there is some neighborhood <code>U</code> of <code>x</code>, and some section <code>w</code> over U, where Z and w agree over x.</p>



<a name="207800721"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207800721" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207800721">(Aug 24 2020 at 01:29)</a>:</h4>
<p>Doesn't that only give a (presumably surjective) map from the fibre to the stalk?</p>



<a name="207800833"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207800833" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207800833">(Aug 24 2020 at 01:32)</a>:</h4>
<p>I don't think so... The union of the sections over the neighborhoods is the colimit in the category of sets, and the sections over the open sets are already defined as subsets of the union of the fibres.</p>



<a name="207800898"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207800898" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207800898">(Aug 24 2020 at 01:34)</a>:</h4>
<p>Oh actually I think you're right.</p>



<a name="207800917"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207800917" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207800917">(Aug 24 2020 at 01:35)</a>:</h4>
<p>E.g. think about SpecZ, and put the fibre over a prime of Z to be the residue field of that point.</p>



<a name="207800964"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207800964" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207800964">(Aug 24 2020 at 01:36)</a>:</h4>
<p>But I think we can get around this by imposing some injectivity</p>



<a name="207800973"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207800973" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207800973">(Aug 24 2020 at 01:37)</a>:</h4>
<p>Ah but even that is too restrictive in general!</p>



<a name="207801035"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207801035" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207801035">(Aug 24 2020 at 01:39)</a>:</h4>
<p>Yeah I don't see how to make it work in general <span aria-label="frown" class="emoji emoji-1f641" role="img" title="frown">:frown:</span></p>



<a name="207801147"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207801147" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207801147">(Aug 24 2020 at 01:42)</a>:</h4>
<p>The only way I see how to do it is by saying that the canonical map from the union to the fibre is a bijection.</p>



<a name="207801162"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207801162" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207801162">(Aug 24 2020 at 01:43)</a>:</h4>
<p>Do you have any idea how to proceed at <a href="https://github.com/leanprover-community/mathlib/blob/sheafification/src/topology/sheaves/sheafify.lean#L55">https://github.com/leanprover-community/mathlib/blob/sheafification/src/topology/sheaves/sheafify.lean#L55</a>?</p>



<a name="207801270"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207801270" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207801270">(Aug 24 2020 at 01:46)</a>:</h4>
<p>Ok so you can take the condition i mentioned above (which is equiv to surjectivity) and add another condition saying that whenever <code>z</code> is in <code>T x</code> and <code>wi</code> is a section over <code>Ui</code>, i=1,2, mapping to z, there is a neighborhood V contained in the intersection of U1 and U2, such that w1 and w2 agree everywhere over V. This is an ugly condition, but still elementary</p>



<a name="207801350"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207801350" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207801350">(Aug 24 2020 at 01:49)</a>:</h4>
<p>Hmm I'm on mobile now, but I'll try to look at that file a little later if I have time (tomorrow for sure)</p>



<a name="207801882"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207801882" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207801882">(Aug 24 2020 at 02:07)</a>:</h4>
<p>Even with this approach, <code>classical.some</code> will still be used to pass from a bijection to an isomorphism <span aria-label="oh no" class="emoji emoji-1f615" role="img" title="oh no">:oh_no:</span></p>



<a name="207803319"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207803319" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207803319">(Aug 24 2020 at 02:53)</a>:</h4>
<p>Okay, I think something like this should work:</p>
<div class="codehilite"><pre><span></span><code><span class="kn">structure</span> <span class="n">compat_local_predicate</span> <span class="kn">extends</span> <span class="n">prelocal_predicate</span> <span class="n">T</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">surj</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">X</span><span class="o">)</span> <span class="o">(</span><span class="n">z</span> <span class="o">:</span> <span class="n">T</span> <span class="n">x</span><span class="o">)</span> <span class="o">:</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">U</span> <span class="o">:</span> <span class="n">opens</span> <span class="n">X</span><span class="o">)</span> <span class="o">(</span><span class="n">m</span> <span class="o">:</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">U</span><span class="o">)</span> <span class="o">(</span><span class="n">w</span> <span class="o">:</span> <span class="bp">Π</span> <span class="o">(</span><span class="n">u</span> <span class="o">:</span> <span class="n">U</span><span class="o">),</span> <span class="n">T</span> <span class="n">u</span><span class="o">),</span> <span class="n">pred</span> <span class="n">w</span> <span class="bp">∧</span> <span class="o">(</span><span class="n">z</span> <span class="bp">=</span> <span class="n">w</span> <span class="bp">⟨</span><span class="n">x</span><span class="o">,</span><span class="n">m</span><span class="bp">⟩</span><span class="o">))</span>
<span class="o">(</span><span class="n">inj</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">X</span><span class="o">)</span> <span class="o">(</span><span class="n">z</span> <span class="o">:</span> <span class="n">T</span> <span class="n">x</span><span class="o">)</span> <span class="o">(</span><span class="n">U₁</span> <span class="n">U₂</span> <span class="o">:</span> <span class="n">opens</span> <span class="n">X</span><span class="o">)</span> <span class="o">(</span><span class="n">m₁</span> <span class="o">:</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">U₁</span><span class="o">)</span> <span class="o">(</span><span class="n">m₂</span> <span class="o">:</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">U₂</span><span class="o">)</span>
  <span class="o">(</span><span class="n">w₁</span> <span class="o">:</span> <span class="bp">Π</span> <span class="o">(</span><span class="n">u₁</span> <span class="o">:</span> <span class="n">U₁</span><span class="o">),</span> <span class="n">T</span> <span class="n">u₁</span><span class="o">)</span> <span class="o">(</span><span class="n">w₂</span> <span class="o">:</span> <span class="bp">Π</span> <span class="o">(</span><span class="n">u₂</span> <span class="o">:</span> <span class="n">U₂</span><span class="o">),</span> <span class="n">T</span> <span class="n">u₂</span><span class="o">)</span> <span class="o">(</span><span class="n">h₁</span> <span class="o">:</span> <span class="n">pred</span> <span class="n">w₁</span><span class="o">)</span> <span class="o">(</span><span class="n">h₂</span> <span class="o">:</span> <span class="n">pred</span> <span class="n">w₂</span><span class="o">)</span>
  <span class="o">(</span><span class="n">e₁</span> <span class="o">:</span> <span class="n">w₁</span> <span class="bp">⟨</span><span class="n">x</span><span class="o">,</span><span class="n">m₁</span><span class="bp">⟩</span> <span class="bp">=</span> <span class="n">z</span><span class="o">)</span> <span class="o">(</span><span class="n">e₂</span> <span class="o">:</span> <span class="n">w₂</span> <span class="bp">⟨</span><span class="n">x</span><span class="o">,</span><span class="n">m₂</span><span class="bp">⟩</span> <span class="bp">=</span> <span class="n">z</span><span class="o">)</span> <span class="o">:</span>
  <span class="bp">∃</span> <span class="o">(</span><span class="n">V</span> <span class="o">:</span> <span class="n">opens</span> <span class="n">X</span><span class="o">)</span> <span class="o">(</span><span class="n">i₁</span> <span class="o">:</span> <span class="n">V</span> <span class="err">⟶</span> <span class="n">U₁</span><span class="o">)</span> <span class="o">(</span><span class="n">i₂</span> <span class="o">:</span> <span class="n">V</span> <span class="err">⟶</span> <span class="n">U₂</span><span class="o">)</span> <span class="o">(</span><span class="n">w</span> <span class="o">:</span> <span class="bp">Π</span> <span class="o">(</span><span class="n">v</span> <span class="o">:</span> <span class="n">V</span><span class="o">),</span> <span class="n">T</span> <span class="n">v</span><span class="o">),</span>
  <span class="bp">∀</span> <span class="o">(</span><span class="n">v</span> <span class="o">:</span> <span class="n">V</span><span class="o">),</span> <span class="n">w₁</span> <span class="o">(</span><span class="n">i₁</span> <span class="n">v</span><span class="o">)</span> <span class="bp">=</span> <span class="n">w</span> <span class="n">v</span> <span class="bp">∧</span> <span class="n">w₂</span> <span class="o">(</span><span class="n">i₂</span> <span class="n">v</span><span class="o">)</span> <span class="bp">=</span> <span class="n">w</span> <span class="n">v</span><span class="o">)</span>
</code></pre></div>



<a name="207804242"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207804242" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207804242">(Aug 24 2020 at 03:22)</a>:</h4>
<p>almost there with the proof that this give injectivity...</p>



<a name="207804288"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207804288" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207804288">(Aug 24 2020 at 03:22)</a>:</h4>
<p><span class="user-mention" data-user-id="110087">@Scott Morrison</span> Concerning <code>sheafify.foo</code>, I think the (pen-and-paper) correct way to define this is using the universal property of the colimit. I'm not sure how to phrase this using the colimits from mathlib though.</p>



<a name="207804679"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207804679" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207804679">(Aug 24 2020 at 03:35)</a>:</h4>
<p>Okay, injectivity and surjectivity from these condition are now proved in <a href="https://github.com/leanprover-community/mathlib/issues/3906">#3906</a>.</p>



<a name="207804913"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207804913" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207804913">(Aug 24 2020 at 03:43)</a>:</h4>
<p>Hopefully this will be useful both for sheafify, and for calculating the stalks of Spec R.</p>



<a name="207804920"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207804920" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207804920">(Aug 24 2020 at 03:43)</a>:</h4>
<p>Oh ... hmm, maybe I'm not sure if the injectivity condition applies for Spec R.</p>



<a name="207804968"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207804968" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207804968">(Aug 24 2020 at 03:44)</a>:</h4>
<p>I guess it does... this is exactly Hartshorne's argument, just factored out a bit strangely.</p>



<a name="207804978"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207804978" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207804978">(Aug 24 2020 at 03:44)</a>:</h4>
<p>with a bit of work to construct the <code>V</code> in Adam's language.</p>



<a name="207805159"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207805159" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207805159">(Aug 24 2020 at 03:50)</a>:</h4>
<p><code>sheafify.foo</code> on the sheafification branch is now just <code>stalk_to_fiber</code>, defined in <a href="https://github.com/leanprover-community/mathlib/issues/3906">#3906</a> (and constructed, as you said, Adam, using <code>colimit.desc</code>.)</p>



<a name="207805838"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207805838" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207805838">(Aug 24 2020 at 04:11)</a>:</h4>
<p>Yeah it should all be fine for <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mi>p</mi><mi>e</mi><mi>c</mi><mi>R</mi></mrow><annotation encoding="application/x-tex">Spec R</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mord mathnormal">p</span><span class="mord mathnormal">e</span><span class="mord mathnormal">c</span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span></span></span></span>. Here's the "pen-and-paper" proof I would give in a commutative algebra class :) </p>
<p>If <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="fraktur">p</mi></mrow><annotation encoding="application/x-tex">\mathfrak{p}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.71302em;vertical-align:-0.18906em;"></span><span class="mord"><span class="mord mathfrak">p</span></span></span></span></span> is a prime and <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mi mathvariant="normal">/</mi><mi>f</mi><mo>∈</mo><msub><mi>R</mi><mi mathvariant="fraktur">p</mi></msub></mrow><annotation encoding="application/x-tex">a/f \in R_{\mathfrak{p}}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">a</span><span class="mord">/</span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.965672em;vertical-align:-0.282342em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.21677199999999996em;"><span style="top:-2.5500000000000003em;margin-left:-0.00773em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathfrak mtight">p</span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.282342em;"><span></span></span></span></span></span></span></span></span></span>, then just think of <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mi mathvariant="normal">/</mi><mi>f</mi></mrow><annotation encoding="application/x-tex">a/f</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">a</span><span class="mord">/</span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span></span></span></span> as a section over the standard open set <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>U</mi><mi>f</mi></msub></mrow><annotation encoding="application/x-tex">U_f</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.969438em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10903em;">U</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361079999999999em;"><span style="top:-2.5500000000000003em;margin-left:-0.10903em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10764em;">f</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span></span></span></span>, and this gives surjectivity. And if <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>U</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>U</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">U_1,U_2</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10903em;">U</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.10903em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10903em;">U</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.10903em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> are neighborhoods of <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="fraktur">p</mi></mrow><annotation encoding="application/x-tex">\mathfrak{p}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.71302em;vertical-align:-0.18906em;"></span><span class="mord"><span class="mord mathfrak">p</span></span></span></span></span> and <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>w</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">w_i</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.02691em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> are sections which agree in <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>R</mi><mi mathvariant="fraktur">p</mi></msub></mrow><annotation encoding="application/x-tex">R_\mathfrak{p}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.965672em;vertical-align:-0.282342em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.21677199999999996em;"><span style="top:-2.5500000000000003em;margin-left:-0.00773em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathfrak mtight">p</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.282342em;"><span></span></span></span></span></span></span></span></span></span>, then first  make <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>U</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">U_1</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10903em;">U</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.10903em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> and <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>U</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">U_2</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10903em;">U</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.10903em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> a bit smaller to assume they're standard opens <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>U</mi><msub><mi>f</mi><mn>1</mn></msub></msub></mrow><annotation encoding="application/x-tex">U_{f_1}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.969438em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10903em;">U</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361079999999999em;"><span style="top:-2.5500000000000003em;margin-left:-0.10903em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31731428571428577em;"><span style="top:-2.357em;margin-left:-0.10764em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span></span></span></span> and <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>U</mi><msub><mi>f</mi><mn>2</mn></msub></msub></mrow><annotation encoding="application/x-tex">U_{f_2}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.969438em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10903em;">U</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361079999999999em;"><span style="top:-2.5500000000000003em;margin-left:-0.10903em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31731428571428577em;"><span style="top:-2.357em;margin-left:-0.10764em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span></span></span></span> (this is fine since the standard opens form a basis for the topology), so WLOG <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>w</mi><mi>i</mi></msub><mo>=</mo><msub><mi>a</mi><mi>i</mi></msub><mi mathvariant="normal">/</mi><msub><mi>f</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">w_i = a_i/f_i</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.02691em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">/</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.10764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> (really, I should say <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>a</mi><mi>i</mi></msub><mi mathvariant="normal">/</mi><mo stretchy="false">(</mo><msub><mi>f</mi><mi>i</mi></msub><msup><mo stretchy="false">)</mo><msub><mi>n</mi><mi>i</mi></msub></msup></mrow><annotation encoding="application/x-tex">a_i/(f_i)^{n_i}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">/</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.10764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.664392em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3280857142857143em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span>, but then just replace <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>f</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">f_i</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.10764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> with <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><msub><mi>f</mi><mi>i</mi></msub><msup><mo stretchy="false">)</mo><msub><mi>n</mi><mi>i</mi></msub></msup></mrow><annotation encoding="application/x-tex">(f_i)^{n_i}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.10764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.664392em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3280857142857143em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span>). Saying they're equal in the localization at <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="fraktur">p</mi></mrow><annotation encoding="application/x-tex">\mathfrak{p}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.71302em;vertical-align:-0.18906em;"></span><span class="mord"><span class="mord mathfrak">p</span></span></span></span></span> means that there is some <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi><mo mathvariant="normal">∉</mo><mi mathvariant="fraktur">p</mi></mrow><annotation encoding="application/x-tex">s \notin \mathfrak{p}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">s</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel"><span class="mord"><span class="mrel">∈</span></span><span class="mord vbox"><span class="thinbox"><span class="llap"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="inner"><span class="mord"><span class="mord">/</span><span class="mspace" style="margin-right:0.05555555555555555em;"></span></span></span><span class="fix"></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.71302em;vertical-align:-0.18906em;"></span><span class="mord"><span class="mord mathfrak">p</span></span></span></span></span> such that <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>a</mi><mn>1</mn></msub><mo>⋅</mo><msub><mi>f</mi><mn>2</mn></msub><mo>⋅</mo><mi>s</mi><mo>=</mo><msub><mi>a</mi><mn>2</mn></msub><mo>⋅</mo><msub><mi>f</mi><mn>1</mn></msub><mo>⋅</mo><mi>s</mi></mrow><annotation encoding="application/x-tex">a_1 \cdot f_2 \cdot s = a_2 \cdot f_1 \cdot s</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.59445em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.10764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">s</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.59445em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.10764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">s</span></span></span></span>. Take <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>V</mi></mrow><annotation encoding="application/x-tex">V</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.22222em;">V</span></span></span></span> to be the intersection <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>U</mi><msub><mi>f</mi><mn>1</mn></msub></msub><mo>∩</mo><msub><mi>U</mi><msub><mi>f</mi><mn>2</mn></msub></msub><mo>∩</mo><msub><mi>U</mi><mi>s</mi></msub><mo>=</mo><msub><mi>U</mi><mrow><msub><mi>f</mi><mn>1</mn></msub><mo>⋅</mo><msub><mi>f</mi><mn>2</mn></msub><mo>⋅</mo><mi>s</mi></mrow></msub></mrow><annotation encoding="application/x-tex">U_{f_1} \cap U_{f_2} \cap U_{s} = U_{f_1 \cdot f_2 \cdot s}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.969438em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10903em;">U</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361079999999999em;"><span style="top:-2.5500000000000003em;margin-left:-0.10903em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31731428571428577em;"><span style="top:-2.357em;margin-left:-0.10764em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∩</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.969438em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10903em;">U</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361079999999999em;"><span style="top:-2.5500000000000003em;margin-left:-0.10903em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31731428571428577em;"><span style="top:-2.357em;margin-left:-0.10764em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∩</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10903em;">U</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.10903em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">s</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.969438em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10903em;">U</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361079999999999em;"><span style="top:-2.5500000000000003em;margin-left:-0.10903em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31731428571428577em;"><span style="top:-2.357em;margin-left:-0.10764em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span><span class="mbin mtight">⋅</span><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31731428571428577em;"><span style="top:-2.357em;margin-left:-0.10764em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span><span class="mbin mtight">⋅</span><span class="mord mathnormal mtight">s</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span></span></span></span>, etc.</p>



<a name="207805954"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207805954" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207805954">(Aug 24 2020 at 04:14)</a>:</h4>
<p>Of course, I'm assuming you take <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>R</mi><mi mathvariant="fraktur">p</mi></msub></mrow><annotation encoding="application/x-tex">R_\mathfrak{p}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.965672em;vertical-align:-0.282342em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.21677199999999996em;"><span style="top:-2.5500000000000003em;margin-left:-0.00773em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathfrak mtight">p</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.282342em;"><span></span></span></span></span></span></span></span></span></span> to be the fibre over <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="fraktur">p</mi></mrow><annotation encoding="application/x-tex">\mathfrak{p}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.71302em;vertical-align:-0.18906em;"></span><span class="mord"><span class="mord mathfrak">p</span></span></span></span></span>. </p>
<p>It's actually quite interesting that in some cases (I guess reduced schemes would be enough?) you can take the residue field as the fibre, and define the structure sheaf using a <code>local_predicate</code>. This should satisfy the surjectivity condition but not injectivity, but should yield the same sheaf!</p>



<a name="207822274"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207822274" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207822274">(Aug 24 2020 at 09:16)</a>:</h4>
<p><span class="user-mention" data-user-id="110087">@Scott Morrison</span> What's up next?</p>



<a name="207825690"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207825690" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207825690">(Aug 24 2020 at 09:58)</a>:</h4>
<p>So, in the <code>sheafification</code> branch (which is a bit of a sideshow, but I think an excellent exercise of the machinery), we now have that the stalks are correct, except that there's a sorry:</p>
<div class="codehilite"><pre><span></span><code><span class="kn">lemma</span> <span class="n">germ_eq</span> <span class="o">(</span><span class="n">F</span> <span class="o">:</span> <span class="n">X</span><span class="bp">.</span><span class="n">presheaf</span> <span class="o">(</span><span class="kt">Type</span> <span class="n">v</span><span class="o">))</span> <span class="o">{</span><span class="n">U</span> <span class="n">V</span> <span class="o">:</span> <span class="n">opens</span> <span class="n">X</span><span class="o">}</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">X</span><span class="o">)</span> <span class="o">(</span><span class="n">mU</span> <span class="o">:</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">U</span><span class="o">)</span> <span class="o">(</span><span class="n">mV</span> <span class="o">:</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">V</span><span class="o">)</span>
  <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">F</span><span class="bp">.</span><span class="n">obj</span> <span class="o">(</span><span class="n">op</span> <span class="n">U</span><span class="o">))</span> <span class="o">(</span><span class="n">t</span> <span class="o">:</span> <span class="n">F</span><span class="bp">.</span><span class="n">obj</span> <span class="o">(</span><span class="n">op</span> <span class="n">V</span><span class="o">))</span>
  <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">germ</span> <span class="n">F</span> <span class="bp">⟨</span><span class="n">x</span><span class="o">,</span> <span class="n">mU</span><span class="bp">⟩</span> <span class="n">s</span> <span class="bp">=</span> <span class="n">germ</span> <span class="n">F</span> <span class="bp">⟨</span><span class="n">x</span><span class="o">,</span> <span class="n">mV</span><span class="bp">⟩</span> <span class="n">t</span><span class="o">)</span> <span class="o">:</span>
  <span class="bp">∃</span> <span class="o">(</span><span class="n">W</span> <span class="o">:</span> <span class="n">opens</span> <span class="n">X</span><span class="o">)</span> <span class="o">(</span><span class="n">m</span> <span class="o">:</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">W</span><span class="o">)</span> <span class="o">(</span><span class="n">iU</span> <span class="o">:</span> <span class="n">W</span> <span class="err">⟶</span> <span class="n">U</span><span class="o">)</span> <span class="o">(</span><span class="n">iV</span> <span class="o">:</span> <span class="n">W</span> <span class="err">⟶</span> <span class="n">V</span><span class="o">),</span> <span class="n">F</span><span class="bp">.</span><span class="n">map</span> <span class="n">iU</span><span class="bp">.</span><span class="n">op</span> <span class="n">s</span> <span class="bp">=</span> <span class="n">F</span><span class="bp">.</span><span class="n">map</span> <span class="n">iV</span><span class="bp">.</span><span class="n">op</span> <span class="n">t</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">sorry</span><span class="o">,</span>
<span class="kn">end</span>
</code></pre></div>



<a name="207825739"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207825739" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207825739">(Aug 24 2020 at 09:59)</a>:</h4>
<p>Now that we have good machinery for checking that <code>stalk_to_fiber</code> is a bijection, we should sit down and write the proof that the stalks of Spec R are correct. (e.g. following Hartshorne, or close to isomorphically the proof Adam wrote above).</p>



<a name="207825834"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207825834" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207825834">(Aug 24 2020 at 10:00)</a>:</h4>
<p>I would like to do <code>germ_eq</code>, but it's hard to get at!</p>



<a name="207825904"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207825904" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207825904">(Aug 24 2020 at 10:01)</a>:</h4>
<p>The problem is just that we don't have much machinery for filtered / directed colimits.</p>



<a name="207826037"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207826037" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207826037">(Aug 24 2020 at 10:03)</a>:</h4>
<p>I just pushed a proof of <code>local_ring.of_ring_equiv</code></p>



<a name="207826172"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207826172" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207826172">(Aug 24 2020 at 10:04)</a>:</h4>
<p>The maths proof would say "If two points in a colimit are equal, they are related by some zigzag of morphisms in the indexing diagram. Since we're looking at open sets (which form a directed set), we can just take the intersection of all the open sets appearing in that zigzag, and in fact the two points are related by a single V shape in the indexing diagram. That's the <code>W</code> in the goal."</p>



<a name="207826215"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207826215" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207826215">(Aug 24 2020 at 10:05)</a>:</h4>
<p>But I don't want to actually have a zigzag appear, and I don't think we have the right induction principle to hand. :-(</p>



<a name="207826244"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207826244" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207826244">(Aug 24 2020 at 10:05)</a>:</h4>
<p>Right</p>



<a name="207826322"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207826322" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207826322">(Aug 24 2020 at 10:06)</a>:</h4>
<p>We could leave that for now, and just do the stalks in Spec R calculation. Starting in about 90 minutes I'd be happy to screenshare that. (What's the verb for pair-programming remotely?)</p>



<a name="207826438"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207826438" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207826438">(Aug 24 2020 at 10:08)</a>:</h4>
<p>remogramming?</p>



<a name="207828148"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207828148" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207828148">(Aug 24 2020 at 10:32)</a>:</h4>
<p>These are filtered colimits -- surely this makes things easier. We surely don't need zigzags.</p>



<a name="207828908"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207828908" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207828908">(Aug 24 2020 at 10:43)</a>:</h4>
<p>If it helps, I think <a href="https://github.com/leanprover-community/mathlib/commit/bc457fb5716fbffe63cbcc10b4ce7a253c720f84">this</a> is an old proof of what you're looking for</p>



<a name="207919404"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/207919404" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#207919404">(Aug 25 2020 at 02:27)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110032">Reid Barton</span> <a href="#narrow/stream/113488-general/topic/status.20of.20schemes/near/207828908">said</a>:</p>
<blockquote>
<p>If it helps, I think <a href="https://github.com/leanprover-community/mathlib/commit/bc457fb5716fbffe63cbcc10b4ce7a253c720f84">this</a> is an old proof of what you're looking for</p>
</blockquote>
<p>Perfect! I had seen this before, but forgotten it. I've just taken the liberty of merging <code>master</code> into <a href="https://github.com/leanprover-community/mathlib/tree/filtered-colimits-2">branch#filtered-colimits-2</a>, and making the necessary changes.</p>
<p>Could you make a PR out of it? I only made small changes, so on the assumption I didn't botch anything it looks straightforward to me. I can make the PR if you'd prefer, too.</p>



<a name="208264477"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208264477" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208264477">(Aug 27 2020 at 19:27)</a>:</h4>
<p>All you need to be able to do to make schemes, are</p>
<ul>
<li>the definition of a sheaf of rings on a topological space,</li>
<li>ability to pull back a presheaf of rings along an open immersion,</li>
<li>ability to talk about an isomorphism of presheaves of rings on a fixed space, and</li>
<li>The definition of the canonical presheaf of rings on Spec(R).</li>
</ul>
<p>How close are we to these four things?</p>



<a name="208264542"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208264542" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208264542">(Aug 27 2020 at 19:27)</a>:</h4>
<p>Other things are interesting for the API but not needed for the definition.</p>



<a name="208265329"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208265329" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208265329">(Aug 27 2020 at 19:34)</a>:</h4>
<p>We have all those 4 things</p>



<a name="208265376"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208265376" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208265376">(Aug 27 2020 at 19:34)</a>:</h4>
<p>so we can define schemes in mathlib, right?</p>



<a name="208265422"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208265422" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208265422">(Aug 27 2020 at 19:35)</a>:</h4>
<p>Yup, everything is already PR'd</p>



<a name="208265443"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208265443" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208265443">(Aug 27 2020 at 19:35)</a>:</h4>
<p>But we want to know that Spec(R) is a functor to schemes.</p>



<a name="208265761"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208265761" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208265761">(Aug 27 2020 at 19:38)</a>:</h4>
<p>we want to know all sorts of things, but it would be wonderful actually get the definition of a scheme into mathlib</p>



<a name="208265768"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208265768" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208265768">(Aug 27 2020 at 19:38)</a>:</h4>
<p>this is the milestone</p>



<a name="208265780"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208265780" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208265780">(Aug 27 2020 at 19:38)</a>:</h4>
<p>not that some map is a functor</p>



<a name="208268054"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208268054" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208268054">(Aug 27 2020 at 19:58)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112680">Johan Commelin</span> <a href="#narrow/stream/113488-general/topic/status.20of.20schemes/near/208265329">said</a>:</p>
<blockquote>
<p>We have all those 4 things</p>
</blockquote>
<p>How do I pull back a presheaf of rings along an open immersion?</p>



<a name="208268145"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208268145" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208268145">(Aug 27 2020 at 19:59)</a>:</h4>
<p>I was under the impression that restriction of sheaves to open sets was not done yet.</p>



<a name="208268585"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208268585" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208268585">(Aug 27 2020 at 20:02)</a>:</h4>
<p>Sure, but presheaves is easier</p>



<a name="208268623"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208268623" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208268623">(Aug 27 2020 at 20:02)</a>:</h4>
<p>Is it done for preseheaves?</p>



<a name="208268664"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208268664" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208268664">(Aug 27 2020 at 20:03)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> one of the PRs contains a way to turn an <code>h : open_embedding f</code> into a functor <code>opens U \func opens X</code>.</p>



<a name="208268684"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208268684" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208268684">(Aug 27 2020 at 20:03)</a>:</h4>
<p>And then you simply compose with the <code>\op</code> of that.</p>



<a name="208268958"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208268958" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208268958">(Aug 27 2020 at 20:05)</a>:</h4>
<p>How do I search for this? I want to see a recent PR which contained a commit which mentions <code>open_embedding</code>. How do I look for this?</p>



<a name="208268985"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208268985" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208268985">(Aug 27 2020 at 20:05)</a>:</h4>
<p>I haven't been looking at the PR's</p>



<a name="208269084"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208269084" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208269084">(Aug 27 2020 at 20:06)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib/search?q=open_embedding&amp;type=Issues">https://github.com/leanprover-community/mathlib/search?q=open_embedding&amp;type=Issues</a></p>



<a name="208269489"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208269489" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208269489">(Aug 27 2020 at 20:09)</a>:</h4>
<p>I can't find it. I need precisely what you said Johan.</p>



<a name="208269791"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208269791" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208269791">(Aug 27 2020 at 20:12)</a>:</h4>
<p>1 sec, finding the link</p>



<a name="208269879"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208269879" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208269879">(Aug 27 2020 at 20:13)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib/blob/LRS/src/topology/category/Top/opens.lean#L172">https://github.com/leanprover-community/mathlib/blob/LRS/src/topology/category/Top/opens.lean#L172</a></p>



<a name="208269888"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208269888" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208269888">(Aug 27 2020 at 20:13)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> <span aria-label="up" class="emoji emoji-2b06" role="img" title="up">:up:</span></p>



<a name="208290529"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208290529" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208290529">(Aug 27 2020 at 23:59)</a>:</h4>
<p>Note that <a href="https://github.com/leanprover-community/mathlib/tree/LRS">branch#LRS</a> which Johan just linked to is not yet a PR!</p>



<a name="208291082"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208291082" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208291082">(Aug 28 2020 at 00:06)</a>:</h4>
<p>Sorry, maybe I'm missing something, but I don't we need more than what Kevin has said?</p>



<a name="208291124"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208291124" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208291124">(Aug 28 2020 at 00:07)</a>:</h4>
<p>In particular, in the definition of <code>Scheme</code> we want a cover by opens on each of which our sheaf of local rings is isomorphic <strong>as a locally ringed space</strong> to some Spec R.</p>



<a name="208291182"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208291182" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208291182">(Aug 28 2020 at 00:08)</a>:</h4>
<p>(That is, it's not good enough to just say that the presheaf of local rings on <code>U</code>  is isomorphic as a presheaf to the presheaf on some Spec R.)</p>



<a name="208291202"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208291202" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208291202">(Aug 28 2020 at 00:08)</a>:</h4>
<p>The point being that locally ringed spaces are not a full subcategory of <code>SheafedSpace</code>, but rather have an extra condition about the maximal ideals.</p>



<a name="208291210"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208291210" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208291210">(Aug 28 2020 at 00:08)</a>:</h4>
<p>So we're still missing </p>
<ol>
<li>that <code>Spec R</code> is a locally ringed space</li>
<li>that the restriction of a locally ringed space along an open embedding is a locally ringed space.</li>
</ol>



<a name="208291334"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208291334" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208291334">(Aug 28 2020 at 00:11)</a>:</h4>
<p>So far we have only <code>Spec R</code> as a <code>SheafedSpace</code>.</p>



<a name="208291412"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208291412" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208291412">(Aug 28 2020 at 00:12)</a>:</h4>
<p>We know that the underlying type of the stalk at a point <code>x : prime_spectrum R</code> is isomorphic to the localization of <code>R</code> at <code>x</code>. But we don't yet have that this isomorphism is an isomorphism of rings.</p>



<a name="208291587"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208291587" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208291587">(Aug 28 2020 at 00:15)</a>:</h4>
<p>This is the sorry at <a href="https://github.com/leanprover-community/mathlib/blob/LRS/src/algebraic_geometry/structure_sheaf.lean#L311">https://github.com/leanprover-community/mathlib/blob/LRS/src/algebraic_geometry/structure_sheaf.lean#L311</a></p>



<a name="208291730"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208291730" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208291730">(Aug 28 2020 at 00:17)</a>:</h4>
<p>To prove this, I would like to first prove that the <code>forget CommRing</code> preserves filtered colimits, and hence that the stalk (as a <code>CommRing</code>) at <code>x</code> is the same as the stalk (as a <code>Type</code>) at <code>x</code>, and so the isomorphism of rings can use the existing isomorphism of types.</p>
<p>We'll then need to check that it is actually a morphism of rings, but I think this part will not be hard.</p>



<a name="208291948"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208291948" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208291948">(Aug 28 2020 at 00:20)</a>:</h4>
<p>There is a WIP branch <code>preserves_filtered_colimits</code> that is doing this, but I having got into the woods a bit, I think I would like to redo this branch, and actually prove that filtered colimits commute with finite limits, and then use this framework when showing forgetful functors preserve filtered colimits. It's more work if we're just racing to <code>Scheme</code>, but I think it will be nicer in the long run, and you basically do most of the work along the way in any case. If anyone wants a category-theoretic task to work on, I know how to chop up this goal into some separate subunits and would be happy to have help / have someone do it!</p>



<a name="208292023"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208292023" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208292023">(Aug 28 2020 at 00:22)</a>:</h4>
<p>For 2. (restricting a locally ringed space along an open embedding to get another LRS), what we already have is that you can restrict a <code>PresheafedSpace</code> or a <code>SheafedSpace</code>.</p>



<a name="208292034"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208292034" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208292034">(Aug 28 2020 at 00:22)</a>:</h4>
<p>See in particular <a href="https://github.com/leanprover-community/mathlib/blob/LRS/src/algebraic_geometry/sheafed_space.lean#L97">https://github.com/leanprover-community/mathlib/blob/LRS/src/algebraic_geometry/sheafed_space.lean#L97</a>, with no sorries.</p>



<a name="208292070"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208292070" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208292070">(Aug 28 2020 at 00:23)</a>:</h4>
<p>However what we don't have yet is</p>
<div class="codehilite"><pre><span></span><code><span class="n">def</span> <span class="n">restrict_stalk_iso</span> <span class="o">{</span><span class="n">U</span> <span class="o">:</span> <span class="n">Top</span><span class="o">}</span> <span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="n">PresheafedSpace</span> <span class="n">C</span><span class="o">)</span>
  <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">U</span> <span class="err">⟶</span> <span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="n">Top</span><span class="bp">.</span><span class="o">{</span><span class="n">v</span><span class="o">}))</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">open_embedding</span> <span class="n">f</span><span class="o">)</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">U</span><span class="o">)</span> <span class="o">:</span>
  <span class="o">(</span><span class="n">X</span><span class="bp">.</span><span class="n">restrict</span> <span class="n">f</span> <span class="n">h</span><span class="o">)</span><span class="bp">.</span><span class="n">stalk</span> <span class="n">x</span> <span class="err">≅</span> <span class="n">X</span><span class="bp">.</span><span class="n">stalk</span> <span class="o">(</span><span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="o">:=</span>
</code></pre></div>



<a name="208292263"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208292263" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208292263">(Aug 28 2020 at 00:26)</a>:</h4>
<p>This should not be hard: the correct way to do this is to define cofinal functors (easy), show that "open neighbourhoods of x within U" is cofinal inside "open neighbourhoods of x" (easy), and show that precomposing with a cofinal functor doesn't change the colimit (should not be hard, but hasn't been done yet, and requires looking at from the right angle before it's easy!)</p>



<a name="208292330"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208292330" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208292330">(Aug 28 2020 at 00:28)</a>:</h4>
<p>This is also on my agenda, but I haven't made any start on it, so again if anyone would like to jump in and do any of those three steps (obviously the definition of cofinal functor comes first, but it's just a one-liner, in terms of <a href="https://leanprover-community.github.io/mathlib_docs/find/category_theory.connected/src">src#category_theory.connected</a> and <a href="https://leanprover-community.github.io/mathlib_docs/find/category_theory.over/src">src#category_theory.over</a>) please do so!</p>



<a name="208297381"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208297381" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208297381">(Aug 28 2020 at 02:04)</a>:</h4>
<p>I think the point is that an isomorphism of ringed spaces induces isomorphisms on stalks, and an isomorphism of local rings is a local morphism (since the unique maximal ideals are preserved). But schemes are not interesting. What is interesting are <strong>morphisms</strong> of schemes, and everything that Scott has said is necessary for this.</p>



<a name="208297742"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208297742" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208297742">(Aug 28 2020 at 02:09)</a>:</h4>
<p>Hmm --- but maybe we should do this later?</p>



<a name="208297812"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208297812" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208297812">(Aug 28 2020 at 02:10)</a>:</h4>
<p>So yes, a scheme is "just" a <em>ringed</em> space which is locally isomorphic to Spec, but you really do want an isomorphism of locally ringed spaces for all the actually interesting properties of schemes <span aria-label="smiling face" class="emoji emoji-263a" role="img" title="smiling face">:smiling_face:</span>️</p>



<a name="208297850"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208297850" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208297850">(Aug 28 2020 at 02:11)</a>:</h4>
<p>So give the definition just asking for an isomorphism on each <code>U</code> to Spec R as a PresheafedSpace</p>



<a name="208297864"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208297864" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208297864">(Aug 28 2020 at 02:11)</a>:</h4>
<p>and then give a theorem later that these isomorphisms are in fact automatically isomorphisms as LocallyRingedSpace?</p>



<a name="208297975"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208297975" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208297975">(Aug 28 2020 at 02:13)</a>:</h4>
<p>That sounds reasonable!</p>



<a name="208298032"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208298032" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208298032">(Aug 28 2020 at 02:13)</a>:</h4>
<p>This has the advantage also of slicing into smaller PRs. And I can get the one up to the definition of <code>Scheme</code> out the door quite quickly if I make this change.</p>



<a name="208298055"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208298055" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208298055">(Aug 28 2020 at 02:13)</a>:</h4>
<p>and I guess it is what Kevin had in mind all along.</p>



<a name="208298220"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208298220" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208298220">(Aug 28 2020 at 02:15)</a>:</h4>
<p>Actually, even for morphisms of schemes, why is what I've been talking about necessary?</p>



<a name="208298270"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208298270" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208298270">(Aug 28 2020 at 02:16)</a>:</h4>
<p>For this you really do need to know that the maps on stalks are local morphisms.</p>



<a name="208298287"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208298287" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208298287">(Aug 28 2020 at 02:16)</a>:</h4>
<p>E.g. it's necessary to prove the spec gamma adjunction</p>



<a name="208298291"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208298291" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208298291">(Aug 28 2020 at 02:16)</a>:</h4>
<p>Yes, but that's in the definition of <code>LocallyRingedSpace</code></p>



<a name="208298320"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208298320" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208298320">(Aug 28 2020 at 02:16)</a>:</h4>
<p>there's nothing in the definition of morphisms that asks for compatibility with the cover by affines?</p>



<a name="208298337"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208298337" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208298337">(Aug 28 2020 at 02:17)</a>:</h4>
<p>Could you link the definition of <code>LocallyRingedSpace</code>?</p>



<a name="208298347"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208298347" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208298347">(Aug 28 2020 at 02:17)</a>:</h4>
<p>Yeah the category of schemes is a full subcategory of locally ringed spaces</p>



<a name="208298349"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208298349" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208298349">(Aug 28 2020 at 02:17)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib/blob/LRS/src/algebraic_geometry/locally_ringed_space.lean">https://github.com/leanprover-community/mathlib/blob/LRS/src/algebraic_geometry/locally_ringed_space.lean</a></p>



<a name="208298359"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208298359" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208298359">(Aug 28 2020 at 02:17)</a>:</h4>
<p>Thanks <span aria-label="grinning face with smiling eyes" class="emoji emoji-1f601" role="img" title="grinning face with smiling eyes">:grinning_face_with_smiling_eyes:</span></p>



<a name="208298401"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208298401" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208298401">(Aug 28 2020 at 02:18)</a>:</h4>
<p>The key line is <a href="https://github.com/leanprover-community/mathlib/blob/LRS/src/algebraic_geometry/locally_ringed_space.lean#L109">https://github.com/leanprover-community/mathlib/blob/LRS/src/algebraic_geometry/locally_ringed_space.lean#L109</a></p>



<a name="208298421"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208298421" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208298421">(Aug 28 2020 at 02:19)</a>:</h4>
<p>So yeah, as long as we can get schemes to be an object in this category, we should be fine</p>



<a name="208298516"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208298516" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208298516">(Aug 28 2020 at 02:20)</a>:</h4>
<p>Okay, I'll rip out the sorries and make the PR, in that case!</p>



<a name="208298517"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208298517" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208298517">(Aug 28 2020 at 02:20)</a>:</h4>
<p>And this boils down to proving the map we were discussing before is a ring isomorphism, and that <code>is_local_ring</code> is preserved under isomorphisms</p>



<a name="208298644"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208298644" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208298644">(Aug 28 2020 at 02:23)</a>:</h4>
<p>The compatibility with affines for morphisms of schemes is "just" the statement that the global sections of the structure sheaf of Spec R is "just" R.</p>



<a name="208298701"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208298701" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208298701">(Aug 28 2020 at 02:24)</a>:</h4>
<p>Oh, and the fact that the basic opens for affine schemes are a basis for the topology, which is just some simple commutative algebra</p>



<a name="208298818"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208298818" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208298818">(Aug 28 2020 at 02:26)</a>:</h4>
<p>There's a notion of an <em>affine</em> morphism of schemes, which says additionally that the preimage of any affine open is again an affine open, but this is an additional property.</p>



<a name="208300074"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208300074" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208300074">(Aug 28 2020 at 02:53)</a>:</h4>
<p>Okay! The <a href="https://github.com/leanprover-community/mathlib/tree/LRS">branch#LRS</a> has no sorries, and a definition of <code>Scheme</code> that I think is correct. :-)</p>



<a name="208300079"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208300079" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208300079">(Aug 28 2020 at 02:53)</a>:</h4>
<p>I'll polish things a bit, but will make it a PR shortly.</p>



<a name="208300634"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208300634" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208300634">(Aug 28 2020 at 03:04)</a>:</h4>
<p>Wait... is the isomorphism here <a href="https://github.com/leanprover-community/mathlib/blob/93f74f255d8788c7bfb9b714f5be76a8fb4cd1ce/src/algebraic_geometry/Scheme.lean#L27">https://github.com/leanprover-community/mathlib/blob/93f74f255d8788c7bfb9b714f5be76a8fb4cd1ce/src/algebraic_geometry/Scheme.lean#L27</a> an isomorphism of ringed spaces?</p>



<a name="208300668"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208300668" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208300668">(Aug 28 2020 at 03:05)</a>:</h4>
<p>yes</p>



<a name="208300675"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208300675" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208300675">(Aug 28 2020 at 03:05)</a>:</h4>
<p>an isomorphism in <code>SheafedSpace CommRing</code>.</p>



<a name="208300683"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208300683" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208300683">(Aug 28 2020 at 03:05)</a>:</h4>
<p>Ah ok.</p>



<a name="208300692"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208300692" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208300692">(Aug 28 2020 at 03:05)</a>:</h4>
<p>I will make that more obvious by replacing one of the <code>_</code> with <code>CommRing</code> :-)</p>



<a name="208300731"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208300731" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208300731">(Aug 28 2020 at 03:06)</a>:</h4>
<p>and add a comment while I'm at it!</p>



<a name="208300866"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208300866" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208300866">(Aug 28 2020 at 03:09)</a>:</h4>
<p>added</p>
<div class="codehilite"><pre><span></span><code><span class="c">/-</span><span class="cm">-</span>
<span class="cm">We define `Scheme` as a `X : LocallyRingedSpace`,</span>
<span class="cm">along with a proof that every point has an open neighbourhood `U`</span>
<span class="cm">so that that the restriction of `X` to `U` is isomorphic, as a space with a sheaf of commutative rings,</span>
<span class="cm">to `Spec.SheafedSpace R` for some `R : CommRing`.</span>

<span class="cm">(Note we&#39;re not asking in the definition that this is an isomorphism as locally ringed spaces,</span>
<span class="cm">although that is a consequence.)</span>
<span class="cm">-/</span>
</code></pre></div>



<a name="208301766"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208301766" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208301766">(Aug 28 2020 at 03:31)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span>, <a href="https://github.com/leanprover-community/mathlib/issues/3961">#3961</a>!</p>



<a name="208303702"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208303702" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208303702">(Aug 28 2020 at 04:18)</a>:</h4>
<p><span class="user-mention" data-user-id="110087">@Scott Morrison</span> Thanks a lot!</p>



<a name="208303762"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208303762" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208303762">(Aug 28 2020 at 04:20)</a>:</h4>
<p>We could even check the iso in <code>*Pre*SheafedSpace CommRing</code></p>



<a name="208303809"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208303809" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208303809">(Aug 28 2020 at 04:20)</a>:</h4>
<p>That's mathematically easier, but you might need to jump throught extra projections in Lean</p>



<a name="208303898"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208303898" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208303898">(Aug 28 2020 at 04:22)</a>:</h4>
<p>it's not actually any easier, because <code>SheafedSpace CommRing</code> is a full subcategory of <code>PresheafedSpace CommRing</code>.</p>



<a name="208303902"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208303902" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208303902">(Aug 28 2020 at 04:22)</a>:</h4>
<p>so in fact it's even definitionally the same</p>



<a name="208303907"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208303907" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208303907">(Aug 28 2020 at 04:23)</a>:</h4>
<p>but I agree that it still might be conceptually easier :-)</p>



<a name="208303910"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208303910" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208303910">(Aug 28 2020 at 04:23)</a>:</h4>
<p>it costs one additional projection</p>



<a name="208304233"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208304233" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208304233">(Aug 28 2020 at 04:31)</a>:</h4>
<p><span class="user-mention" data-user-id="110087">@Scott Morrison</span> It is easier, because it means that to build a scheme you don't need to check any sheaf condition</p>



<a name="208304299"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208304299" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208304299">(Aug 28 2020 at 04:32)</a>:</h4>
<p>oh...</p>



<a name="208304313"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208304313" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208304313">(Aug 28 2020 at 04:32)</a>:</h4>
<p>but then we would not want to extend <code>LocallyRingedSpace</code></p>



<a name="208304338"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208304338" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208304338">(Aug 28 2020 at 04:33)</a>:</h4>
<p>perhaps it is better to leave the definition as is (perhaps in future make it even stronger!) but provide an alternative constructor that starts with just a <code>PresheafedSpace CommRing</code>, and the data for <code>affine</code></p>



<a name="208304339"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208304339" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208304339">(Aug 28 2020 at 04:33)</a>:</h4>
<p>Right... so my initial idea was to just build an extra constructor.</p>



<a name="208304388"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208304388" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208304388">(Aug 28 2020 at 04:34)</a>:</h4>
<p>we need gluing of sheaves first! :-)</p>



<a name="208304391"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208304391" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208304391">(Aug 28 2020 at 04:34)</a>:</h4>
<p>You do need to check the sheaf condition on the whole space X.</p>



<a name="208304406"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208304406" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208304406">(Aug 28 2020 at 04:34)</a>:</h4>
<p><span class="user-mention" data-user-id="243562">@Adam Topaz</span> but the point is you know the sheaf condition on each affine (because it's Spec R, which satisfies the sheaf condition)</p>



<a name="208304420"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208304420" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208304420">(Aug 28 2020 at 04:34)</a>:</h4>
<p>No, that doesn't follow.</p>



<a name="208304428"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208304428" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208304428">(Aug 28 2020 at 04:35)</a>:</h4>
<p>oh...</p>



<a name="208304429"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208304429" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208304429">(Aug 28 2020 at 04:35)</a>:</h4>
<p>indeed</p>



<a name="208304432"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208304432" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208304432">(Aug 28 2020 at 04:35)</a>:</h4>
<p>E.g. take a disjoint union of specs</p>



<a name="208304440"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208304440" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208304440">(Aug 28 2020 at 04:35)</a>:</h4>
<p>because we have nothing in the definition about the overlaps, which you would need for gluing</p>



<a name="208304496"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208304496" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208304496">(Aug 28 2020 at 04:36)</a>:</h4>
<p>I see, so the best you could hope for is a constructor that takes a <code>PresheafedSpace CommRing</code>, and the data for affine, and some extra data about compatibility between the affines?</p>



<a name="208304503"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208304503" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208304503">(Aug 28 2020 at 04:36)</a>:</h4>
<p>Ooops, I guess I messed up.</p>



<a name="208304538"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208304538" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208304538">(Aug 28 2020 at 04:37)</a>:</h4>
<p><span class="user-mention" data-user-id="112680">@Johan Commelin</span> what you said originally is fine, it's the isomorphisms between the specs and the members of the open cover that can be iso's of presheaved spaces.</p>



<a name="208304581"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208304581" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208304581">(Aug 28 2020 at 04:38)</a>:</h4>
<p>in any case, if anyone wants to pair-program attempt gluing of sheaves at some point, let me know :-)</p>



<a name="208304590"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208304590" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208304590">(Aug 28 2020 at 04:38)</a>:</h4>
<p>I guess I should first review a bunch of PRs</p>



<a name="208306863"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208306863" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208306863">(Aug 28 2020 at 05:26)</a>:</h4>
<p><span class="user-mention" data-user-id="110087">@Scott Morrison</span> could you have a look at <a href="https://github.com/leanprover-community/mathlib/issues/3907">#3907</a>? The diff is way too large</p>



<a name="208306994"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208306994" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208306994">(Aug 28 2020 at 05:29)</a>:</h4>
<p>Fixed</p>



<a name="208339057"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208339057" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208339057">(Aug 28 2020 at 13:03)</a>:</h4>
<p>The linter report on <a href="https://github.com/leanprover-community/mathlib/issues/3961">#3961</a>:</p>
<div class="codehilite"><pre><span></span><code><span class="c">/-</span><span class="cm"> TYPES ARE MISSING INHABITED INSTANCES: -/</span>
<span class="c1">-- algebraic_geometry/Scheme.lean</span>
<span class="bp">#</span><span class="kn">print</span> <span class="n">algebraic_geometry</span><span class="bp">.</span><span class="n">Scheme</span> <span class="c">/-</span><span class="cm"> inhabited instance missing -/</span>

<span class="c1">-- algebraic_geometry/locally_ringed_space.lean</span>
<span class="bp">#</span><span class="kn">print</span> <span class="n">algebraic_geometry</span><span class="bp">.</span><span class="n">LocallyRingedSpace</span> <span class="c">/-</span><span class="cm"> inhabited instance missing -/</span>

<span class="c1">-- algebraic_geometry/sheafed_space.lean</span>
<span class="bp">#</span><span class="kn">print</span> <span class="n">algebraic_geometry</span><span class="bp">.</span><span class="n">SheafedSpace</span> <span class="c">/-</span><span class="cm"> inhabited instance missing -/</span>
</code></pre></div>



<a name="208339215"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208339215" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208339215">(Aug 28 2020 at 13:04)</a>:</h4>
<p>It has a point. You can't really say you defined <code>Scheme</code> if you don't have a single example.</p>



<a name="208339224"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208339224" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208339224">(Aug 28 2020 at 13:04)</a>:</h4>
<p>I can make a stupid instance of <code>SheafedSpace</code> easily enough.</p>



<a name="208339651"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208339651" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208339651">(Aug 28 2020 at 13:08)</a>:</h4>
<p>The empty scheme?</p>



<a name="208339982"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208339982" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208339982">(Aug 28 2020 at 13:10)</a>:</h4>
<p>Aka Spec 0</p>



<a name="208340120"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208340120" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208340120">(Aug 28 2020 at 13:11)</a>:</h4>
<p>I can't say we didn't use this trick for perfectoid spaces...</p>



<a name="208340552"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208340552" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208340552">(Aug 28 2020 at 13:14)</a>:</h4>
<p>The default CommRing is the trivial ring right? So this actually "makes sense".</p>



<a name="208340710"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208340710" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208340710">(Aug 28 2020 at 13:16)</a>:</h4>
<p>Does <code>CommRing</code> have a default instance? TIL</p>



<a name="208340754"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208340754" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208340754">(Aug 28 2020 at 13:16)</a>:</h4>
<p>I mean <code>inhabited</code>.</p>



<a name="208341535"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208341535" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208341535">(Aug 28 2020 at 13:23)</a>:</h4>
<p>Well, we don't yet know that <code>Spec R</code> is a scheme...</p>



<a name="208341649"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208341649" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208341649">(Aug 28 2020 at 13:24)</a>:</h4>
<p>The real message is you can put <code>@[nolint ...]</code> but getting <code>Spec R</code> has a scheme will be really urgent.</p>



<a name="208342190"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208342190" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208342190">(Aug 28 2020 at 13:29)</a>:</h4>
<p>The empty scheme should be fine, since the scheme condition is for all x in  X, blah blah.</p>



<a name="208343190"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208343190" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208343190">(Aug 28 2020 at 13:36)</a>:</h4>
<p>checking the sheaf condition is not as easy as it should be :-)</p>



<a name="208343317"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208343317" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208343317">(Aug 28 2020 at 13:37)</a>:</h4>
<p><span class="user-mention" data-user-id="110087">@Scott Morrison</span> We have <code>Spec_as_LRS (CommRing.of pempty)</code></p>



<a name="208343405"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208343405" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208343405">(Aug 28 2020 at 13:38)</a>:</h4>
<p><span class="user-mention" data-user-id="243562">@Adam Topaz</span> <span class="user-mention" data-user-id="321459">@Damiano Testa</span> If you are interested, Kevin seems to be live streaming a review of these PRs on Discord...</p>



<a name="208343429"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208343429" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208343429">(Aug 28 2020 at 13:38)</a>:</h4>
<p>no, that relies on sorries, we only have <code>Spec.SheafedSpace</code>. But that will do!</p>



<a name="208343431"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208343431" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208343431">(Aug 28 2020 at 13:38)</a>:</h4>
<p><span class="user-mention" data-user-id="110087">@Scott Morrison</span> So you can use that LRS, and check it is a scheme.</p>



<a name="208343449"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208343449" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208343449">(Aug 28 2020 at 13:38)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112680">Johan Commelin</span> <a href="#narrow/stream/113488-general/topic/status.20of.20schemes/near/208343317">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="110087">Scott Morrison</span> We have <code>Spec_as_LRS (CommRing.of pempty)</code></p>
</blockquote>
<p>Thanks for the heads up!</p>



<a name="208343452"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208343452" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208343452">(Aug 28 2020 at 13:38)</a>:</h4>
<p>Ooh, you are right!</p>



<a name="208343703"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208343703" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208343703">(Aug 28 2020 at 13:40)</a>:</h4>
<p>so I just need <code>prime_spectrum punit \equiv pempty</code></p>



<a name="208344287"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208344287" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208344287">(Aug 28 2020 at 13:45)</a>:</h4>
<p>I just realized that I don't know how to use discord...</p>



<a name="208344637"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208344637" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208344637">(Aug 28 2020 at 13:48)</a>:</h4>
<p>Oooh, that's just because you're too old <span aria-label="grinning face with smiling eyes" class="emoji emoji-1f601" role="img" title="grinning face with smiling eyes">:grinning_face_with_smiling_eyes:</span> <span aria-label="rofl" class="emoji emoji-1f923" role="img" title="rofl">:rofl:</span></p>



<a name="208344666"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208344666" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208344666">(Aug 28 2020 at 13:48)</a>:</h4>
<p>It's designed for 14 year old kids that are addicted to video gaming</p>



<a name="208344684"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208344684" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208344684">(Aug 28 2020 at 13:48)</a>:</h4>
<p>Sounds about right.... and I think I've aged 20 years over the last 5 months...</p>



<a name="208344703"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208344703" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208344703">(Aug 28 2020 at 13:48)</a>:</h4>
<p>But since Lean is just as addictive as a video game...</p>



<a name="208344739"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208344739" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208344739">(Aug 28 2020 at 13:49)</a>:</h4>
<p><span class="user-mention silent" data-user-id="243562">Adam Topaz</span> <a href="#narrow/stream/113488-general/topic/status.20of.20schemes/near/208344684">said</a>:</p>
<blockquote>
<p>Sounds about right.... and I think I've aged 20 years over the last 5 months...</p>
</blockquote>
<p>Ooof, you shouldn't do that too often</p>



<a name="208344749"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208344749" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208344749">(Aug 28 2020 at 13:49)</a>:</h4>
<p>It <em>is</em> a video game. But we have progress to make on graphics.</p>



<a name="208345872"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208345872" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208345872">(Aug 28 2020 at 13:58)</a>:</h4>
<p>yay, I have <code>inhabited Scheme</code>.</p>



<a name="208346196"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208346196" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208346196">(Aug 28 2020 at 14:00)</a>:</h4>
<p>Is there a <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">∅</mi></mrow><annotation encoding="application/x-tex">\varnothing</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.66334em;vertical-align:-0.08167em;"></span><span class="mord amsrm">∅</span></span></span></span> emoji? <span aria-label="wink" class="emoji emoji-1f609" role="img" title="wink">:wink:</span></p>



<a name="208346268"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208346268" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208346268">(Aug 28 2020 at 14:01)</a>:</h4>
<p>Now you can make one, we are allowed custom emojis.</p>



<a name="208365255"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208365255" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208365255">(Aug 28 2020 at 16:30)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112680">Johan Commelin</span> <a href="#narrow/stream/113488-general/topic/status.20of.20schemes/near/208343405">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="243562">Adam Topaz</span> <span class="user-mention silent" data-user-id="321459">Damiano Testa</span> If you are interested, Kevin seems to be live streaming a review of these PRs on Discord...</p>
</blockquote>
<p>Sorry, I got distracted by Sylow's theorems...</p>



<a name="208365400"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208365400" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208365400">(Aug 28 2020 at 16:31)</a>:</h4>
<p>We shouldn't need that Spec(zero ring) = empty to prove that the empty scheme is a scheme, right?</p>



<a name="208366388"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208366388" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208366388">(Aug 28 2020 at 16:40)</a>:</h4>
<p>no, but you do need to do some work (even the empty space has a nontrivial covering family, namely the empty cover of the empty set)</p>



<a name="208451302"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208451302" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208451302">(Aug 29 2020 at 20:01)</a>:</h4>
<p>The structure sheaf is now in mathlib</p>



<a name="208451341"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208451341" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208451341">(Aug 29 2020 at 20:02)</a>:</h4>
<p>We should have the category of schemes this weekend!</p>



<a name="208451355"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208451355" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208451355">(Aug 29 2020 at 20:02)</a>:</h4>
<p>That would be a really nice milestone!</p>



<a name="208451530"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208451530" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208451530">(Aug 29 2020 at 20:07)</a>:</h4>
<p>Next step will be to port our definition of perfectoid spaces to mathlib...</p>



<a name="208455861"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208455861" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208455861">(Aug 29 2020 at 21:55)</a>:</h4>
<p>This is certainly looking much closer to being feasible than a few weeks ago.</p>



<a name="208516592"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208516592" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208516592">(Aug 31 2020 at 03:17)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib/issues/3961">#3961</a> ... LGTM</p>



<a name="208519910"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208519910" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208519910">(Aug 31 2020 at 04:36)</a>:</h4>
<p>Bryan had a few more comments, which I've just addressed.</p>



<a name="208520349"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208520349" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208520349">(Aug 31 2020 at 04:50)</a>:</h4>
<p>Thanks! I just added one more tiny comment.</p>



<a name="208520735"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208520735" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208520735">(Aug 31 2020 at 05:03)</a>:</h4>
<p>I hit the commit button on that tiny comment (-;</p>



<a name="208521000"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208521000" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208521000">(Aug 31 2020 at 05:11)</a>:</h4>
<p>And I told bors what I think about all this.</p>



<a name="208521694"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208521694" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208521694">(Aug 31 2020 at 05:32)</a>:</h4>
<p><a href="https://github.com/leanprover-community/leanprover-community.github.io/pull/122">https://github.com/leanprover-community/leanprover-community.github.io/pull/122</a><br>
Please feel free to make this PR to the overview page more complete</p>



<a name="208522721"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208522721" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208522721">(Aug 31 2020 at 06:01)</a>:</h4>
<p>(The build should pass after <a href="https://github.com/leanprover-community/mathlib/issues/3961">#3961</a> lands.)</p>



<a name="208523147"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208523147" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208523147">(Aug 31 2020 at 06:10)</a>:</h4>
<p>I would prefer  a top-level "Geometry" with bot the affine stuff, manifolds and algebraic geometry.</p>



<a name="208523165"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208523165" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208523165">(Aug 31 2020 at 06:11)</a>:</h4>
<p>"Differentiable manifolds" in analysis is already very weird, putting schemes in general  algebra may be even worse.</p>



<a name="208523184"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208523184" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208523184">(Aug 31 2020 at 06:11)</a>:</h4>
<p>Ok, let's reorganise a bit</p>



<a name="208523264"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208523264" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208523264">(Aug 31 2020 at 06:12)</a>:</h4>
<p>Could you do it Johan?</p>



<a name="208523350"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208523350" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208523350">(Aug 31 2020 at 06:14)</a>:</h4>
<p>Yup, I just did <span class="user-mention" data-user-id="110031">@Patrick Massot</span></p>



<a name="208525673"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208525673" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208525673">(Aug 31 2020 at 07:03)</a>:</h4>
<p>Could you fix it somehow ?</p>



<a name="208526128"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208526128" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208526128">(Aug 31 2020 at 07:10)</a>:</h4>
<p><span class="user-mention" data-user-id="110031">@Patrick Massot</span> I think we should just rerun. Because schemes are now in mathlib</p>



<a name="208526195"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208526195" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208526195">(Aug 31 2020 at 07:11)</a>:</h4>
<p>"Pull requests that have a failing status can’t be merged on a phone. "</p>



<a name="208526290"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208526290" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208526290">(Aug 31 2020 at 07:12)</a>:</h4>
<p>Ah, I think we have to wait for the docs to build again since the site build uses the exported JSON from there.</p>



<a name="208526314"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208526314" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208526314">(Aug 31 2020 at 07:13)</a>:</h4>
<p><span class="user-mention" data-user-id="123965">@Bryan Gin-ge Chen</span> Can we cheat and make it build faster on this day?</p>



<a name="208526318"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208526318" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208526318">(Aug 31 2020 at 07:13)</a>:</h4>
<p>Or do we have to wait until the bot thinks it is time?</p>



<a name="208526334"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208526334" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208526334">(Aug 31 2020 at 07:13)</a>:</h4>
<p>If we can have this go live in 15 minutes, then <span class="user-mention" data-user-id="110031">@Patrick Massot</span> can demo this in his talk (-;</p>



<a name="208526360"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208526360" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208526360">(Aug 31 2020 at 07:13)</a>:</h4>
<p>No pressure <span aria-label="stuck out tongue wink" class="emoji emoji-1f61c" role="img" title="stuck out tongue wink">:stuck_out_tongue_wink:</span></p>



<a name="208526436"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208526436" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208526436">(Aug 31 2020 at 07:14)</a>:</h4>
<p>Let me try re-running one of the doc build actions here: <a href="https://github.com/leanprover-community/doc-gen/actions">https://github.com/leanprover-community/doc-gen/actions</a></p>



<a name="208526568"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208526568" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208526568">(Aug 31 2020 at 07:16)</a>:</h4>
<p>The docs seem to take a random amount of time between 5 and 20 minutes to build, so I'm not sure if we'll make it <span aria-label="sweat" class="emoji emoji-1f613" role="img" title="sweat">:sweat:</span></p>



<a name="208526610"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208526610" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208526610">(Aug 31 2020 at 07:17)</a>:</h4>
<p>It sometimes also takes 10-20 minutes for github to update the docs website.</p>



<a name="208526669"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208526669" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208526669">(Aug 31 2020 at 07:18)</a>:</h4>
<p>Well, I guess Patrick will have to see halfway his talk whether it's done or not (-;</p>



<a name="208527436"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208527436" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208527436">(Aug 31 2020 at 07:29)</a>:</h4>
<p>You are too fast with restarting the CI.</p>



<a name="208527471"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208527471" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208527471">(Aug 31 2020 at 07:30)</a>:</h4>
<p>Yeah, the doc build finished, but the website hasn't updated yet.</p>



<a name="208527500"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208527500" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208527500">(Aug 31 2020 at 07:30)</a>:</h4>
<p>Oh, it looks like it should work now.</p>



<a name="208528092"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208528092" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208528092">(Aug 31 2020 at 07:39)</a>:</h4>
<p>Yeah it built!!!</p>



<a name="208528248"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208528248" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208528248">(Aug 31 2020 at 07:42)</a>:</h4>
<p><a href="https://leanprover-community.github.io/mathlib-overview.html">The new overview is live!</a></p>



<a name="208528266"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208528266" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208528266">(Aug 31 2020 at 07:43)</a>:</h4>
<p>We did all the effort for... <em>two</em> words on this page?</p>



<a name="208528350"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208528350" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208528350">(Aug 31 2020 at 07:44)</a>:</h4>
<p>It was reorganized so that there's a new section "Geometry", I think.</p>



<a name="208528631"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208528631" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208528631">(Aug 31 2020 at 07:48)</a>:</h4>
<p><span class="user-mention" data-user-id="123965">@Bryan Gin-ge Chen</span> <span class="user-mention" data-user-id="110043">@Gabriel Ebner</span> Thanks a lot!</p>



<a name="208528638"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208528638" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208528638">(Aug 31 2020 at 07:48)</a>:</h4>
<p><span class="user-mention" data-user-id="110031">@Patrick Massot</span> good luck with your talk</p>



<a name="208533780"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208533780" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208533780">(Aug 31 2020 at 08:56)</a>:</h4>
<p>You know what? I was running out of time and didn't have time to show the overview page... <span aria-label="blushing" class="emoji emoji-1f633" role="img" title="blushing">:blushing:</span></p>



<a name="208535357"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208535357" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208535357">(Aug 31 2020 at 09:16)</a>:</h4>
<p>...</p>



<a name="208535698"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/208535698" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#208535698">(Aug 31 2020 at 09:20)</a>:</h4>
<p>The order in the new section is a bit surprising, maybe we should go up and list things as "Affine and Euclidean geometry", "Algebraic geometry" and "Differential geometry".</p>



<a name="209924968"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/209924968" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#209924968">(Sep 13 2020 at 10:49)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112165">rss-bot</span> <a href="#narrow/stream/116290-rss/topic/Recent.20Commits.20to.20mathlib.3Amaster/near/209921649">said</a>:</p>
<blockquote>
<p><strong><a href="https://github.com/leanprover-community/mathlib/commit/5d35e626086c4e1639e49cd7cf574bc48592f554">feat(algebraic_geometry/*): Gamma the global sections functor (#4126)</a></strong><br>
feat(algebraic_geometry/*): Gamma the global sections functor (<a href="https://github.com/leanprover-community/mathlib/issues/4126">#4126</a>)<br>
<a href="https://github.com/leanprover-community/mathlib/commit/5d35e626086c4e1639e49cd7cf574bc48592f554">https://github.com/leanprover-community/mathlib/commit/5d35e626086c4e1639e49cd7cf574bc48592f554</a></p>
</blockquote>



<a name="214162686"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/214162686" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ramon Fernandez Mir <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#214162686">(Oct 22 2020 at 09:29)</a>:</h4>
<p>Hey, it's been a while. So happy to see that schemes are finally in mathlib and done properly, using the category theory library.</p>



<a name="214162850"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/214162850" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ramon Fernandez Mir <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#214162850">(Oct 22 2020 at 09:31)</a>:</h4>
<p>Is anyone working on making Spec a functor? Was thinking of giving it a go</p>



<a name="214163520"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/214163520" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#214163520">(Oct 22 2020 at 09:37)</a>:</h4>
<p>I don't think anyone is actively working on it atm</p>



<a name="214163562"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/214163562" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#214163562">(Oct 22 2020 at 09:38)</a>:</h4>
<p><span class="user-mention" data-user-id="132858">@Ramon Fernandez Mir</span> Also, welcome back!</p>



<a name="214253494"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/214253494" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#214253494">(Oct 22 2020 at 22:01)</a>:</h4>
<p>Fantastic!</p>



<a name="214253585"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/214253585" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#214253585">(Oct 22 2020 at 22:02)</a>:</h4>
<p>I've been gearing up to prove that morphisms of sheaves are epi/mono/iso iff they are stalkwise, on the way to doing sheafification properly, but there's been a bit of hiatus in the progress.</p>



<a name="214253669"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/214253669" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#214253669">(Oct 22 2020 at 22:03)</a>:</h4>
<p>I also proved a while back that filtered colimits commute with finite limits, and wanted to use this to show that the forgetful functors (in particular, from CommRing to Type) preserved stalks, but again I have stalled on this for a while.</p>



<a name="214253781"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/214253781" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#214253781">(Oct 22 2020 at 22:04)</a>:</h4>
<p>We do now have cofinal functors, although I don't think I got around to stating that open neighbourhoods of x within U were cofinal in open nhds of x.</p>



<a name="214253793"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/214253793" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#214253793">(Oct 22 2020 at 22:04)</a>:</h4>
<p>This is probably essential somewhere soon. :-)</p>



<a name="214278490"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/214278490" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#214278490">(Oct 23 2020 at 06:35)</a>:</h4>
<p>I might try some of the exercises in chapter 2 of Hartshorne when my course is done (1 week to go) but we need sheafification of presheaves of abelian groups to state a lot of them</p>



<a name="252005927"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/252005927" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Justus Springer <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#252005927">(Sep 04 2021 at 14:53)</a>:</h4>
<p>I take the liberty to revive this thread: I'm currently working on the adjunction between Spec and Gamma, following the approach in the stacks project <a href="https://stacks.math.columbia.edu/tag/01HX">here</a>. I realized that in order to prove <a href="https://stacks.math.columbia.edu/tag/01HZ">this lemma</a>, I need a version of <a href="https://leanprover-community.github.io/mathlib_docs/find/Top.presheaf.germ_exist">docs#Top.presheaf.germ_exist</a> for CommRing-valued sheaves. For that, it would suffice to know that the forgetful functor of CommRing preserves stalks (or more generally, filtered colimits). Have you ever gotten around to prove this <span class="user-mention" data-user-id="110087">@Scott Morrison</span> ? If not, I could try to adopt this project if that's okay. Is the code on <a href="https://github.com/leanprover-community/mathlib/tree/preserves_filtered_colimits">branch#preserves_filtered_colimits</a> the latest attempt? Any advice on how to continue from here would be helpful!</p>



<a name="252040085"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/status%20of%20schemes/near/252040085" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/status.20of.20schemes.html#252040085">(Sep 05 2021 at 01:33)</a>:</h4>
<p>Sorry, I didn't make further progress.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>