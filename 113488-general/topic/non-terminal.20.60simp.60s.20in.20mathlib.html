---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/non-terminal.20.60simp.60s.20in.20mathlib.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/non-terminal.20.60simp.60s.20in.20mathlib.html">non-terminal `simp`s in mathlib</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="291241345"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/non-terminal%20%60simp%60s%20in%20mathlib/near/291241345" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/non-terminal.20.60simp.60s.20in.20mathlib.html#291241345">(Jul 28 2022 at 19:38)</a>:</h4>
<p>Can we lint for non-terminal <code>simp</code>s? Can we automatically list all non-terminal <code>simp</code>s or <code>dsimp</code>s for which the output of <code>squeeze_(d)simp</code> doesn't work as a drop-in replacement?</p>
<p>I was surprised to see a non-terminal <code>simp</code> in mathlib but apparently there are plenty around.</p>



<a name="291241695"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/non-terminal%20%60simp%60s%20in%20mathlib/near/291241695" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/non-terminal.20.60simp.60s.20in.20mathlib.html#291241695">(Jul 28 2022 at 19:41)</a>:</h4>
<p>Redefining <code>simp</code> to mean <code>simp; done</code> would error on all non-terminal <code>simp</code>s, but would probably be a lot of effort...</p>



<a name="291241989"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/non-terminal%20%60simp%60s%20in%20mathlib/near/291241989" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/non-terminal.20.60simp.60s.20in.20mathlib.html#291241989">(Jul 28 2022 at 19:43)</a>:</h4>
<p>Or just making <code>simp</code> emit a warning in those cases</p>



<a name="291242056"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/non-terminal%20%60simp%60s%20in%20mathlib/near/291242056" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/non-terminal.20.60simp.60s.20in.20mathlib.html#291242056">(Jul 28 2022 at 19:44)</a>:</h4>
<p>Which mathlib would ban as it can't be noisy</p>



<a name="291242097"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/non-terminal%20%60simp%60s%20in%20mathlib/near/291242097" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/non-terminal.20.60simp.60s.20in.20mathlib.html#291242097">(Jul 28 2022 at 19:44)</a>:</h4>
<p>This is bad, because a few tactics are allowed after <code>simp</code>, for example <code>refl</code> (but maybe <code>done</code> calls <code>refl</code>?).</p>



<a name="291242152"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/non-terminal%20%60simp%60s%20in%20mathlib/near/291242152" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Junyan Xu <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/non-terminal.20.60simp.60s.20in.20mathlib.html#291242152">(Jul 28 2022 at 19:45)</a>:</h4>
<p><a href="#narrow/stream/113489-new-members/topic/A.20first.20proof/near/291241627">cross link about squeeze_dsimp</a></p>



<a name="291242227"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/non-terminal%20%60simp%60s%20in%20mathlib/near/291242227" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/non-terminal.20.60simp.60s.20in.20mathlib.html#291242227">(Jul 28 2022 at 19:45)</a>:</h4>
<p>You could also do <code>simp; refl; done</code>.</p>



<a name="291242394"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/non-terminal%20%60simp%60s%20in%20mathlib/near/291242394" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Junyan Xu <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/non-terminal.20.60simp.60s.20in.20mathlib.html#291242394">(Jul 28 2022 at 19:46)</a>:</h4>
<p>It seems <code>simp, refl</code> can always be replaced by <code>simpa</code> (but <code>simpa</code> also checks the assumptions which may be a waste of CPU cycles?).</p>



<a name="291242815"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/non-terminal%20%60simp%60s%20in%20mathlib/near/291242815" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/non-terminal.20.60simp.60s.20in.20mathlib.html#291242815">(Jul 28 2022 at 19:50)</a>:</h4>
<p>I'm generally happy with <code>simp, ring</code> as well as <code>simp, refl</code> but I'm not too happy with too much else (in the sense that I try to avoid it in code I write).</p>



<a name="291243003"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/non-terminal%20%60simp%60s%20in%20mathlib/near/291243003" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/non-terminal.20.60simp.60s.20in.20mathlib.html#291243003">(Jul 28 2022 at 19:51)</a>:</h4>
<p>I suspect that it is easy to make future uses of simp comply with no non-terminal use.  Backporting this would likely be a lot of work due to many edge-cases and widespread use of <code>simp</code>.</p>



<a name="291243068"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/non-terminal%20%60simp%60s%20in%20mathlib/near/291243068" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/non-terminal.20.60simp.60s.20in.20mathlib.html#291243068">(Jul 28 2022 at 19:52)</a>:</h4>
<p>I understand the rule as "<code>simp</code> and it's done".</p>



<a name="291243083"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/non-terminal%20%60simp%60s%20in%20mathlib/near/291243083" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/non-terminal.20.60simp.60s.20in.20mathlib.html#291243083">(Jul 28 2022 at 19:52)</a>:</h4>
<p>I understand the rule as "<code>simp</code> and it's done".</p>



<a name="291243231"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/non-terminal%20%60simp%60s%20in%20mathlib/near/291243231" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/non-terminal.20.60simp.60s.20in.20mathlib.html#291243231">(Jul 28 2022 at 19:53)</a>:</h4>
<p>We could have a <code>simp_old</code> with the current behaviour and sed for it.  And then have the new <code>simp</code> with some form of check (tracing something seems a good idea, so you coul still use it while in the middle of a proof, before cleaning up).</p>



<a name="291243446"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/non-terminal%20%60simp%60s%20in%20mathlib/near/291243446" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/non-terminal.20.60simp.60s.20in.20mathlib.html#291243446">(Jul 28 2022 at 19:55)</a>:</h4>
<p>Regarding <code>simpa</code> for <code>simp, refl</code>: I remember Mario being horrified by this use when this came up in an earlier thread.</p>



<a name="291244481"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/non-terminal%20%60simp%60s%20in%20mathlib/near/291244481" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/non-terminal.20.60simp.60s.20in.20mathlib.html#291244481">(Jul 28 2022 at 20:02)</a>:</h4>
<p>Here is a proposal: <code>simp; reflexivity, done &lt;|&gt; trace "squeeze me"</code>.</p>



<a name="291245471"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/non-terminal%20%60simp%60s%20in%20mathlib/near/291245471" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/non-terminal.20.60simp.60s.20in.20mathlib.html#291245471">(Jul 28 2022 at 20:10)</a>:</h4>
<p>I also like to use <code>simpa using h</code> when <code>h</code> simplifies to <code>false</code>, just to throw in another way Mario might be horrified at how we use his creation.</p>



<a name="291245588"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/non-terminal%20%60simp%60s%20in%20mathlib/near/291245588" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/non-terminal.20.60simp.60s.20in.20mathlib.html#291245588">(Jul 28 2022 at 20:11)</a>:</h4>
<p>Oh, I use simpa to show false: I did not realize that Mario did not like that either!</p>



<a name="291245719"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/non-terminal%20%60simp%60s%20in%20mathlib/near/291245719" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/non-terminal.20.60simp.60s.20in.20mathlib.html#291245719">(Jul 28 2022 at 20:12)</a>:</h4>
<p>I had assumed it's off-label usage, but maybe it was meant for this.</p>



<a name="291245780"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/non-terminal%20%60simp%60s%20in%20mathlib/near/291245780" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/non-terminal.20.60simp.60s.20in.20mathlib.html#291245780">(Jul 28 2022 at 20:13)</a>:</h4>
<p>Probably we should have <code>simpr</code> or <code>simpf</code> or other monstrously-named tactics to do these special cases. The reason I don't mind <code>simp, ring</code> is that I figure that if <code>simp</code> has turned the goal into something that <code>ring</code> can solve then no amount of further simplification is going to break the <code>ring</code> application.</p>



<a name="291246120"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/non-terminal%20%60simp%60s%20in%20mathlib/near/291246120" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/non-terminal.20.60simp.60s.20in.20mathlib.html#291246120">(Jul 28 2022 at 20:15)</a>:</h4>
<p><span class="user-mention silent" data-user-id="387244">Yaël Dillies</span> <a href="#narrow/stream/113488-general/topic/non-terminal.20.60simp.60s.20in.20mathlib/near/291242097">said</a>:</p>
<blockquote>
<p>This is bad, because a few tactics are allowed after <code>simp</code>, for example <code>refl</code> (but maybe <code>done</code> calls <code>refl</code>?).</p>
</blockquote>
<p>this really shouldn't be allowed, and if you want it you should spell it out with <code>simpa using rfl</code></p>



<a name="291246230"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/non-terminal%20%60simp%60s%20in%20mathlib/near/291246230" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/non-terminal.20.60simp.60s.20in.20mathlib.html#291246230">(Jul 28 2022 at 20:16)</a>:</h4>
<p>no tactics after <code>simp</code> are ever safe</p>



<a name="291246246"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/non-terminal%20%60simp%60s%20in%20mathlib/near/291246246" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/non-terminal.20.60simp.60s.20in.20mathlib.html#291246246">(Jul 28 2022 at 20:16)</a>:</h4>
<p>is my opnion idk</p>



<a name="291246273"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/non-terminal%20%60simp%60s%20in%20mathlib/near/291246273" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/non-terminal.20.60simp.60s.20in.20mathlib.html#291246273">(Jul 28 2022 at 20:16)</a>:</h4>
<p>While we are on this topic, <a href="https://leanprover-community.github.io/mathlib_docs/find/mul_eq_zero">docs#mul_eq_zero</a> seems to go against what Kevin said about <code>simp, ring</code>.  This is a personal battle of mine again this simp lemma... <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span></p>



<a name="291246274"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/non-terminal%20%60simp%60s%20in%20mathlib/near/291246274" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/non-terminal.20.60simp.60s.20in.20mathlib.html#291246274">(Jul 28 2022 at 20:16)</a>:</h4>
<p>What about after <code>norm_num</code>, which calls <code>simp</code>?</p>



<a name="291246361"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/non-terminal%20%60simp%60s%20in%20mathlib/near/291246361" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/non-terminal.20.60simp.60s.20in.20mathlib.html#291246361">(Jul 28 2022 at 20:17)</a>:</h4>
<p>Does norm_num call "free-style" simp or is it <code>simp only</code>s?</p>



<a name="291246503"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/non-terminal%20%60simp%60s%20in%20mathlib/near/291246503" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/non-terminal.20.60simp.60s.20in.20mathlib.html#291246503">(Jul 28 2022 at 20:18)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">example</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">≃</span> <span class="n">α</span><span class="o">)</span> <span class="o">:</span> <span class="n">f.symm</span> <span class="bp">∘</span> <span class="n">f</span> <span class="bp">=</span> <span class="n">id</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">norm_num</span>
</code></pre></div>



<a name="291246535"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/non-terminal%20%60simp%60s%20in%20mathlib/near/291246535" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/non-terminal.20.60simp.60s.20in.20mathlib.html#291246535">(Jul 28 2022 at 20:19)</a>:</h4>
<p>it's <code>simp [-one_div]</code></p>



<a name="291246538"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/non-terminal%20%60simp%60s%20in%20mathlib/near/291246538" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/non-terminal.20.60simp.60s.20in.20mathlib.html#291246538">(Jul 28 2022 at 20:19)</a>:</h4>
<p>dear lord</p>



<a name="291246801"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/non-terminal%20%60simp%60s%20in%20mathlib/near/291246801" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/non-terminal.20.60simp.60s.20in.20mathlib.html#291246801">(Jul 28 2022 at 20:21)</a>:</h4>
<p>gaargh <code>mul_eq_zero</code> is evil!</p>



<a name="291246995"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/non-terminal%20%60simp%60s%20in%20mathlib/near/291246995" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/non-terminal.20.60simp.60s.20in.20mathlib.html#291246995">(Jul 28 2022 at 20:22)</a>:</h4>
<p>I think mul_eq_zero makes sense as an informal simp lemma, but as an actual simp lemma, i always have to -it.</p>



<a name="291249135"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/non-terminal%20%60simp%60s%20in%20mathlib/near/291249135" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Junyan Xu <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/non-terminal.20.60simp.60s.20in.20mathlib.html#291249135">(Jul 28 2022 at 20:40)</a>:</h4>
<p>Sometimes a change to simp lemmas could change the final <code>refl</code> from necessary to unnecessary, or vice versa. Which means you need to change <code>simpa</code> to <code>simp</code> or vice versa. But this is easy to fix.</p>



<a name="291251129"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/non-terminal%20%60simp%60s%20in%20mathlib/near/291251129" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/non-terminal.20.60simp.60s.20in.20mathlib.html#291251129">(Jul 28 2022 at 20:57)</a>:</h4>
<p><span class="user-mention silent" data-user-id="306601">Kyle Miller</span> <a href="#narrow/stream/113488-general/topic/non-terminal.20.60simp.60s.20in.20mathlib/near/291245471">said</a>:</p>
<blockquote>
<p>I also like to use <code>simpa using h</code> when <code>h</code> simplifies to <code>false</code>, just to throw in another way Mario might be horrified at how we use his creation.</p>
</blockquote>
<p>That would be equivalently <code>simp at h</code>, no?</p>



<a name="291251497"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/non-terminal%20%60simp%60s%20in%20mathlib/near/291251497" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/non-terminal.20.60simp.60s.20in.20mathlib.html#291251497">(Jul 28 2022 at 21:00)</a>:</h4>
<p><code>mul_eq_zero</code> makes sense as an <code>auto</code> style lemma, i.e. if you had <code>simp</code> + some light propositional reasoning. As it is currently I wouldn't expect most <code>x = 0</code> theorems to be <code>simp</code>-able to <code>true</code> which is what you need for <code>mul_eq_zero</code> to be useful</p>



<a name="291251704"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/non-terminal%20%60simp%60s%20in%20mathlib/near/291251704" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/non-terminal.20.60simp.60s.20in.20mathlib.html#291251704">(Jul 28 2022 at 21:02)</a>:</h4>
<p>If one is <code>simp</code>able to <code>true</code> then I bet <code>ring</code> solves it too!</p>



<a name="291251930"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/non-terminal%20%60simp%60s%20in%20mathlib/near/291251930" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/non-terminal.20.60simp.60s.20in.20mathlib.html#291251930">(Jul 28 2022 at 21:04)</a>:</h4>
<p>not necessarily, it might be <code>f x = 0</code> because it's in the kernel of a map or it's a hypothesis provided to simp or it's the cardinality of the empty type or something similarly obscure</p>



<a name="291254910"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/non-terminal%20%60simp%60s%20in%20mathlib/near/291254910" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/non-terminal.20.60simp.60s.20in.20mathlib.html#291254910">(Jul 28 2022 at 21:34)</a>:</h4>
<p><span class="user-mention" data-user-id="224323">@Junyan Xu</span> I managed to manually squeeze the last two <code>dsimp</code>s on that branch! You're right, <code>show_term</code> doesn't do anything helpful. I kept throwing in the head symbol until it worked. The final proof (line 408) is now two lines longer because the list is long, but it compiles much more quickly.</p>



<a name="291255708"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/non-terminal%20%60simp%60s%20in%20mathlib/near/291255708" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Junyan Xu <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/non-terminal.20.60simp.60s.20in.20mathlib.html#291255708">(Jul 28 2022 at 21:41)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> Thanks for the work! It seems clear that removing non-terminal dsimp is much more difficult than removing non-terminal simps, which may contribute to the fact that non-terminal dsimp is much more prevalent. (I guess one could also consider using <code>squeeze_simp</code> then removing all non-rfl lemmas from the result ...)</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>