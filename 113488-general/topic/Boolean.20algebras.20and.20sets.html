---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/Boolean.20algebras.20and.20sets.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Boolean.20algebras.20and.20sets.html">Boolean algebras and sets</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="286737789"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Boolean%20algebras%20and%20sets/near/286737789" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Boolean.20algebras.20and.20sets.html#286737789">(Jun 20 2022 at 00:29)</a>:</h4>
<p>There is tension in the import tree between <a href="https://tqft.net/mathlib/order/boolean_algebra">file#order/boolean_algebra</a>, <a href="https://tqft.net/mathlib/order/hom/basic">file#order/hom/basic</a> and <a href="https://tqft.net/mathlib/data/set/basic">file#data/set/basic</a>, because each wants to import the next:</p>
<ul>
<li><a href="https://leanprover-community.github.io/mathlib_docs/find/compl">docs#compl</a> is an order isomorphism to the order dual (<a href="https://leanprover-community.github.io/mathlib_docs/find/order_iso.compl">docs#order_iso.compl</a>), and this provides many lemmas. For example, <a href="https://leanprover-community.github.io/mathlib_docs/find/compl_antitone">docs#compl_antitone</a></li>
<li>We bundle set equivalences as order isos. For example, <a href="https://leanprover-community.github.io/mathlib_docs/find/order_iso.set.univ">docs#order_iso.set.univ</a></li>
<li><a href="https://leanprover-community.github.io/mathlib_docs/find/set">docs#set</a> is a <a href="https://leanprover-community.github.io/mathlib_docs/find/boolean_algebra">docs#boolean_algebra</a></li>
</ul>
<p>At the moment, it works somehow, but any tweak (<a href="https://github.com/leanprover-community/mathlib/pull/14809">#14809</a> or <a href="https://github.com/leanprover-community/mathlib/tree/heyting_algebra">branch#heyting_algebra</a>) makes the tower of cards collapse.</p>



<a name="286737925"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Boolean%20algebras%20and%20sets/near/286737925" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Boolean.20algebras.20and.20sets.html#286737925">(Jun 20 2022 at 00:33)</a>:</h4>
<p>/poll What should we do?</p>
<ul>
<li>Move the set equivalences to <code>data.set.basic</code></li>
<li>Split a new file <code>order.hom.set</code> off <code>order.hom.basic</code> for the set equivalences</li>
<li>Split a new file <code>data.set.order</code> off <code>data.set.basic</code> for the order properties</li>
<li>Keep adding the lemmas derived from <code>order_iso.compl</code> to <code>order.hom.basic</code></li>
<li>Pray for content-addressing</li>
</ul>



<a name="286738016"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Boolean%20algebras%20and%20sets/near/286738016" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Boolean.20algebras.20and.20sets.html#286738016">(Jun 20 2022 at 00:35)</a>:</h4>
<p>I would like to emphasize that these options are not mutually exclusive. I think 1 and 3 would make a great combo, by greatly reducing import stress <strong>and</strong> shrinking <code>data.set.basic</code> (which is one of mathlib's biggest files).</p>



<a name="286738070"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Boolean%20algebras%20and%20sets/near/286738070" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Boolean.20algebras.20and.20sets.html#286738070">(Jun 20 2022 at 00:37)</a>:</h4>
<p>cc <span class="user-mention" data-user-id="329425">@Peter Nelson</span> because this will very soon block your matroid work (I was rewriting your branch in the style of your first PR and I hit this)</p>



<a name="286743642"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Boolean%20algebras%20and%20sets/near/286743642" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Peter Nelson <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Boolean.20algebras.20and.20sets.html#286743642">(Jun 20 2022 at 02:31)</a>:</h4>
<p>I like 1 and 3 as well. Thanks for all the thought you’ve given to this!</p>



<a name="286760538"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Boolean%20algebras%20and%20sets/near/286760538" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Boolean.20algebras.20and.20sets.html#286760538">(Jun 20 2022 at 07:46)</a>:</h4>
<p>What does 3 even mean? I don't think lemmas about <code>⊆</code> like <a href="https://leanprover-community.github.io/mathlib_docs/find/set.subset_union_left">docs#set.subset_union_left</a> should go outside <code>data.set.basic</code>?</p>



<a name="286760630"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Boolean%20algebras%20and%20sets/near/286760630" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Boolean.20algebras.20and.20sets.html#286760630">(Jun 20 2022 at 07:47)</a>:</h4>
<p>I think we could go even further than 2, and move <code>order_iso</code> out of <code>order.hom.basic</code> to <code>order.hom.equiv</code> or something.</p>



<a name="286760768"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Boolean%20algebras%20and%20sets/near/286760768" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Boolean.20algebras.20and.20sets.html#286760768">(Jun 20 2022 at 07:49)</a>:</h4>
<p>(oh, but I guess that doesn't solve this particular problem)</p>



<a name="286762826"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Boolean%20algebras%20and%20sets/near/286762826" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Boolean.20algebras.20and.20sets.html#286762826">(Jun 20 2022 at 08:12)</a>:</h4>
<p>It would be moving the material about complements, which is what requires <code>order.boolean_algebra</code> in <code>data.set.basic</code>. But I agree that not moving the other order instances is somewhat dissatisfactory.</p>



<a name="286853830"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Boolean%20algebras%20and%20sets/near/286853830" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Boolean.20algebras.20and.20sets.html#286853830">(Jun 21 2022 at 01:21)</a>:</h4>
<p>I am now trying to implement 2 and I can't keep thinking that it would be easier to move <a href="https://leanprover-community.github.io/mathlib_docs/find/set.range">docs#set.range</a>, <a href="https://leanprover-community.github.io/mathlib_docs/find/set.image">docs#set.image</a> to move to a new file <code>data.set.defs</code>.</p>



<a name="286853892"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Boolean%20algebras%20and%20sets/near/286853892" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Boolean.20algebras.20and.20sets.html#286853892">(Jun 21 2022 at 01:22)</a>:</h4>
<p>The order files use <code>set</code> for its basic constructions, not for its order structure, but <code>data.set.basic</code> is a mix of it all.</p>



<a name="286854047"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Boolean%20algebras%20and%20sets/near/286854047" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Boolean.20algebras.20and.20sets.html#286854047">(Jun 21 2022 at 01:25)</a>:</h4>
<p>For reference, implementing 1 or 2 means moving stuff from <a href="https://tqft.net/mathlib/logic/embedding">file#logic/embedding</a>, <a href="https://leanprover-community.github.io/mathlib_docs/find/order">docs#order</a>/rel_iso, <a href="https://leanprover-community.github.io/mathlib_docs/find/order">docs#order</a>/hom/basic to either one (or three?) new file(s) or dumping it into <a href="https://leanprover-community.github.io/mathlib_docs/find/data">docs#data</a>/set/basic.</p>



<a name="286872939"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Boolean%20algebras%20and%20sets/near/286872939" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Boolean.20algebras.20and.20sets.html#286872939">(Jun 21 2022 at 06:56)</a>:</h4>
<p>I'm definitely also happy with <code>data.set.defs</code>. I'm a bit surprised that all those files use constructions on sets, but no basic lemmas.</p>



<a name="286872997"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Boolean%20algebras%20and%20sets/near/286872997" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Boolean.20algebras.20and.20sets.html#286872997">(Jun 21 2022 at 06:57)</a>:</h4>
<p>I see e.g. <code>function.injective.image_injective</code> in <a href="https://tqft.net/mathlib/logic/embedding">file#logic/embedding</a>. That should definitely not go in <code>data.set.defs</code>.</p>



<a name="286879196"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Boolean%20algebras%20and%20sets/near/286879196" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Boolean.20algebras.20and.20sets.html#286879196">(Jun 21 2022 at 08:07)</a>:</h4>
<p>If the name <code>defs</code> is putting you off, this brings me back to proposition 3.</p>



<a name="286905377"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Boolean%20algebras%20and%20sets/near/286905377" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Boolean.20algebras.20and.20sets.html#286905377">(Jun 21 2022 at 12:30)</a>:</h4>
<p>I think it would be good to keep the <code>boolean_algebra</code> instance in <code>data.set.basic</code>. I think it would be confusing if all binary set operations are defined in <code>data.set.basic</code>, but the complement is in another file.<br>
I think it's good to follow the example of <code>equiv</code>, which also has <a href="https://tqft.net/mathlib/logic/equiv/set">file#logic/equiv/set</a> separately. So we can separate <code>embedding</code>/<code>rel_iso</code>/<code>order_hom</code> interactions with <code>set</code> to separate files (i.e. option 2). If you don't want to create 3 new files, maybe you can do with moving <code>embedding</code> stuff into <code>data.set.function</code> (if that doesn't create issues) and have a single new file <code>order.hom.set</code>.</p>



<a name="286905687"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Boolean%20algebras%20and%20sets/near/286905687" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Boolean.20algebras.20and.20sets.html#286905687">(Jun 21 2022 at 12:33)</a>:</h4>
<p>But what if I also move the binary set operations to the new file <code>data.set.order</code>?</p>



<a name="286905853"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Boolean%20algebras%20and%20sets/near/286905853" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Boolean.20algebras.20and.20sets.html#286905853">(Jun 21 2022 at 12:34)</a>:</h4>
<p>Apparently it's <a href="https://tqft.net/mathlib/logic/equiv/set">file#logic/equiv/set</a> now BTW</p>



<a name="286906138"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Boolean%20algebras%20and%20sets/near/286906138" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Boolean.20algebras.20and.20sets.html#286906138">(Jun 21 2022 at 12:37)</a>:</h4>
<p>Thanks, fixed</p>



<a name="286906556"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Boolean%20algebras%20and%20sets/near/286906556" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Boolean.20algebras.20and.20sets.html#286906556">(Jun 21 2022 at 12:40)</a>:</h4>
<p>But if it makes your life a lot easier, I can live with a file <code>data.set.compl</code> where you move <code>compl</code> and <code>diff</code>. I think it would make the findability of some lemmas harder (e.g. <a href="https://leanprover-community.github.io/mathlib_docs/find/set.image_compl_eq">docs#set.image_compl_eq</a> for a random example), so I would prefer a different solution.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>