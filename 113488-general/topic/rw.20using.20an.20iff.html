---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/rw.20using.20an.20iff.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/rw.20using.20an.20iff.html">rw using an iff</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="267373029"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rw%20using%20an%20iff/near/267373029" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bernd Losert <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/rw.20using.20an.20iff.html#267373029">(Jan 09 2022 at 19:21)</a>:</h4>
<p>Is it possible to use rw with an iff theorem? I'm getting an error when I try to use it.</p>



<a name="267373075"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rw%20using%20an%20iff/near/267373075" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/rw.20using.20an.20iff.html#267373075">(Jan 09 2022 at 19:22)</a>:</h4>
<p>Yes, <code>rw</code> can rewrite using iffs and equalities. It would be helpful if you posted a <a href="https://leanprover-community.github.io/mwe.html">#mwe</a> for this.</p>



<a name="267373167"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rw%20using%20an%20iff/near/267373167" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bernd Losert <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/rw.20using.20an.20iff.html#267373167">(Jan 09 2022 at 19:24)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">tactic</span>
<span class="kn">import</span> <span class="n">order.filter.partial</span>
<span class="kn">import</span> <span class="n">order.filter.ultrafilter</span>
<span class="kn">import</span> <span class="n">algebra.support</span>

<span class="kd">noncomputable theory</span>
<span class="kn">open</span> <span class="n">set</span> <span class="n">function</span> <span class="n">filter</span> <span class="n">classical</span>
<span class="n">open_locale</span> <span class="n">classical</span> <span class="n">filter</span>

<span class="kd">variables</span> <span class="o">{</span><span class="n">X</span> <span class="n">Y</span> <span class="n">Z</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span>

<span class="kd">lemma</span> <span class="n">ultrafilter_comap_ne_bot</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">)</span> <span class="o">(</span><span class="n">A</span> <span class="o">:</span> <span class="n">set</span> <span class="n">X</span><span class="o">)</span> <span class="o">(</span><span class="bp">𝒱</span> <span class="o">:</span> <span class="n">ultrafilter</span> <span class="n">Y</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">f</span> <span class="bp">''</span> <span class="n">A</span> <span class="bp">∈</span> <span class="bp">𝒱</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">comap</span> <span class="n">f</span> <span class="bp">𝒱</span><span class="o">)</span><span class="bp">.</span><span class="n">ne_bot</span> <span class="o">:=</span> <span class="kd">begin</span>
  <span class="n">rw</span> <span class="n">filter.forall_mem_nonempty_iff_ne_bot</span>
<span class="kd">end</span>
</code></pre></div>



<a name="267373192"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rw%20using%20an%20iff/near/267373192" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Johnson <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/rw.20using.20an.20iff.html#267373192">(Jan 09 2022 at 19:25)</a>:</h4>
<p>Rewrite it in the other direction:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">rw</span> <span class="bp">←</span><span class="n">filter.forall_mem_nonempty_iff_ne_bot</span>
</code></pre></div>



<a name="267373258"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rw%20using%20an%20iff/near/267373258" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bernd Losert <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/rw.20using.20an.20iff.html#267373258">(Jan 09 2022 at 19:27)</a>:</h4>
<p>Ah, it works. I remember trying that and it gave me an error. Weird.</p>



<a name="267373428"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rw%20using%20an%20iff/near/267373428" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bernd Losert <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/rw.20using.20an.20iff.html#267373428">(Jan 09 2022 at 19:31)</a>:</h4>
<p>So now I have this, and it's giving me an error that I don't know how to fix:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">tactic</span>
<span class="kn">import</span> <span class="n">order.filter.partial</span>
<span class="kn">import</span> <span class="n">order.filter.ultrafilter</span>
<span class="kn">import</span> <span class="n">algebra.support</span>

<span class="kd">noncomputable theory</span>
<span class="kn">open</span> <span class="n">set</span> <span class="n">function</span> <span class="n">filter</span> <span class="n">classical</span>
<span class="n">open_locale</span> <span class="n">classical</span> <span class="n">filter</span>

<span class="kd">variables</span> <span class="o">{</span><span class="n">X</span> <span class="n">Y</span> <span class="n">Z</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span>

<span class="kd">lemma</span> <span class="n">ultrafilter_comap_ne_bot</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">)</span> <span class="o">(</span><span class="n">A</span> <span class="o">:</span> <span class="n">set</span> <span class="n">X</span><span class="o">)</span> <span class="o">(</span><span class="bp">𝒱</span> <span class="o">:</span> <span class="n">ultrafilter</span> <span class="n">Y</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">f</span> <span class="bp">''</span> <span class="n">A</span> <span class="bp">∈</span> <span class="bp">𝒱</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">comap</span> <span class="n">f</span> <span class="bp">𝒱</span><span class="o">)</span><span class="bp">.</span><span class="n">ne_bot</span> <span class="o">:=</span> <span class="kd">begin</span>
  <span class="n">rw</span> <span class="bp">←</span> <span class="n">filter.forall_mem_nonempty_iff_ne_bot</span><span class="o">,</span>
  <span class="k">assume</span> <span class="n">A</span> <span class="o">:</span> <span class="n">set</span> <span class="n">X</span><span class="o">,</span>
  <span class="k">assume</span> <span class="n">h'</span> <span class="o">:</span> <span class="n">A</span> <span class="bp">∈</span> <span class="n">comap</span> <span class="n">f</span> <span class="bp">𝒱</span><span class="o">,</span>
  <span class="k">have</span> <span class="o">:</span> <span class="o">(</span><span class="n">f</span> <span class="bp">''</span> <span class="n">A</span><span class="o">)</span><span class="bp">.</span><span class="n">nonempty</span> <span class="o">:=</span> <span class="n">ultrafilter.nonempty_of_mem</span> <span class="n">h</span><span class="o">,</span>
<span class="kd">end</span>
</code></pre></div>



<a name="267373565"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rw%20using%20an%20iff/near/267373565" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bernd Losert <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/rw.20using.20an.20iff.html#267373565">(Jan 09 2022 at 19:34)</a>:</h4>
<p>Ah, I guess it's because the A I'm using is not the same A from the statement of the lemma.</p>



<a name="267373855"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rw%20using%20an%20iff/near/267373855" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bernd Losert <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/rw.20using.20an.20iff.html#267373855">(Jan 09 2022 at 19:41)</a>:</h4>
<p>Proving this is giving me more trouble that I thought. This is the proof that I want to write in Lean:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">Since</span> <span class="n">f</span> <span class="bp">''</span> <span class="n">A</span> <span class="bp">∈</span> <span class="bp">𝒱</span><span class="o">,</span> <span class="k">then</span> <span class="n">for</span> <span class="n">every</span> <span class="n">V</span> <span class="bp">∈</span> <span class="bp">𝒱</span><span class="o">,</span> <span class="n">we</span> <span class="k">have</span> <span class="n">that</span> <span class="n">f</span> <span class="bp">''</span> <span class="n">A</span> <span class="bp">∩</span> <span class="n">V</span> <span class="bp">≠</span> <span class="bp">Ø</span><span class="o">,</span> <span class="n">hence</span> <span class="n">f</span> <span class="bp">⁻¹'</span> <span class="n">V</span> <span class="bp">≠</span> <span class="bp">Ø</span><span class="o">,</span> <span class="n">hence</span> <span class="bp">Ø</span> <span class="bp">∉</span> <span class="n">comap</span> <span class="n">f</span> <span class="bp">𝒱</span> <span class="o">,</span> <span class="n">hence</span> <span class="n">comap</span> <span class="n">f</span> <span class="bp">𝒱.</span><span class="n">ne_bot</span>
</code></pre></div>



<a name="267374336"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rw%20using%20an%20iff/near/267374336" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bernd Losert <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/rw.20using.20an.20iff.html#267374336">(Jan 09 2022 at 19:52)</a>:</h4>
<p>Hmm... I think I need an extra condition: <code>nonempty A</code>.</p>



<a name="267374518"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rw%20using%20an%20iff/near/267374518" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/rw.20using.20an.20iff.html#267374518">(Jan 09 2022 at 19:57)</a>:</h4>
<p>This doesn't seem to be true: "since <code>f '' A ∩ V ≠ Ø</code> then <code>f ⁻¹' V ≠ Ø</code>". If <code>f</code> is surjective, for example, it would be.</p>



<a name="267374535"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rw%20using%20an%20iff/near/267374535" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/rw.20using.20an.20iff.html#267374535">(Jan 09 2022 at 19:58)</a>:</h4>
<p>Doesn't the a in A work?</p>



<a name="267374621"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rw%20using%20an%20iff/near/267374621" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/rw.20using.20an.20iff.html#267374621">(Jan 09 2022 at 19:59)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">ultrafilter_comap_ne_bot</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">)</span> <span class="o">(</span><span class="n">A</span> <span class="o">:</span> <span class="n">set</span> <span class="n">X</span><span class="o">)</span> <span class="o">(</span><span class="bp">𝒱</span> <span class="o">:</span> <span class="n">ultrafilter</span> <span class="n">Y</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">f</span> <span class="bp">''</span> <span class="n">A</span> <span class="bp">∈</span> <span class="bp">𝒱</span><span class="o">)</span> <span class="o">:</span>
  <span class="o">(</span><span class="n">comap</span> <span class="n">f</span> <span class="bp">𝒱</span><span class="o">)</span><span class="bp">.</span><span class="n">ne_bot</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">apply</span> <span class="n">comap_ne_bot</span><span class="o">,</span>
  <span class="n">intros</span> <span class="n">U</span> <span class="n">U_in</span><span class="o">,</span>
  <span class="n">rcases</span> <span class="o">(</span><span class="n">ultrafilter.nonempty_of_mem</span> <span class="bp">$</span> <span class="n">inter_mem</span> <span class="n">h</span> <span class="n">U_in</span><span class="o">)</span> <span class="k">with</span> <span class="o">⟨</span><span class="bp">-</span><span class="o">,</span> <span class="o">⟨</span><span class="n">x</span><span class="o">,</span> <span class="n">h</span><span class="o">,</span> <span class="n">rfl</span><span class="o">⟩,</span> <span class="n">h'</span><span class="o">⟩,</span>
  <span class="n">tauto</span><span class="o">,</span>
<span class="kd">end</span>
</code></pre></div>



<a name="267375236"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rw%20using%20an%20iff/near/267375236" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/rw.20using.20an.20iff.html#267375236">(Jan 09 2022 at 20:08)</a>:</h4>
<p>If you want to put this in mathlib then you should fix the binders, something like:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">ultrafilter.comap_ne_bot</span> <span class="o">(</span><span class="bp">𝒱</span> <span class="o">:</span> <span class="n">ultrafilter</span> <span class="n">Y</span><span class="o">)</span> <span class="o">{</span><span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">}</span> <span class="o">{</span><span class="n">A</span> <span class="o">:</span> <span class="n">set</span> <span class="n">X</span><span class="o">}</span>  <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">f</span> <span class="bp">''</span> <span class="n">A</span> <span class="bp">∈</span> <span class="bp">𝒱</span><span class="o">)</span> <span class="o">:</span>
  <span class="o">(</span><span class="n">comap</span> <span class="n">f</span> <span class="bp">𝒱</span><span class="o">)</span><span class="bp">.</span><span class="n">ne_bot</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">apply</span> <span class="n">comap_ne_bot</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">U</span> <span class="n">U_in</span><span class="o">,</span> <span class="n">_</span><span class="o">),</span>
  <span class="n">rcases</span> <span class="o">(</span><span class="n">filter.nonempty_of_mem</span> <span class="bp">$</span> <span class="n">inter_mem</span> <span class="n">h</span> <span class="n">U_in</span><span class="o">)</span> <span class="k">with</span> <span class="o">⟨</span><span class="bp">-</span><span class="o">,</span> <span class="o">⟨</span><span class="n">x</span><span class="o">,</span> <span class="bp">-</span><span class="o">,</span> <span class="n">rfl</span><span class="o">⟩,</span> <span class="n">h</span><span class="o">⟩,</span>
  <span class="n">exact</span> <span class="o">⟨</span><span class="n">x</span><span class="o">,</span> <span class="n">h</span><span class="o">⟩</span>
<span class="kd">end</span>
</code></pre></div>



<a name="267375343"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rw%20using%20an%20iff/near/267375343" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/rw.20using.20an.20iff.html#267375343">(Jan 09 2022 at 20:11)</a>:</h4>
<p>And of course it has nothing to do with ultrafilters so you should put in the basic filter file defining comap as</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">filter.comap_ne_bot_of_image_mem</span> <span class="o">{</span><span class="n">F</span> <span class="o">:</span> <span class="n">filter</span> <span class="n">Y</span><span class="o">}</span> <span class="o">[</span><span class="n">ne_bot</span> <span class="n">F</span><span class="o">]</span> <span class="o">{</span><span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">}</span> <span class="o">{</span><span class="n">A</span> <span class="o">:</span> <span class="n">set</span> <span class="n">X</span><span class="o">}</span>
  <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">f</span> <span class="bp">''</span> <span class="n">A</span> <span class="bp">∈</span> <span class="n">F</span><span class="o">)</span> <span class="o">:</span>  <span class="o">(</span><span class="n">comap</span> <span class="n">f</span> <span class="n">F</span><span class="o">)</span><span class="bp">.</span><span class="n">ne_bot</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">apply</span> <span class="n">comap_ne_bot</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">U</span> <span class="n">U_in</span><span class="o">,</span> <span class="n">_</span><span class="o">),</span>
  <span class="n">rcases</span> <span class="o">(</span><span class="n">filter.nonempty_of_mem</span> <span class="bp">$</span> <span class="n">inter_mem</span> <span class="n">h</span> <span class="n">U_in</span><span class="o">)</span> <span class="k">with</span> <span class="o">⟨</span><span class="bp">-</span><span class="o">,</span> <span class="o">⟨</span><span class="n">x</span><span class="o">,</span> <span class="bp">-</span><span class="o">,</span> <span class="n">rfl</span><span class="o">⟩,</span> <span class="n">h</span><span class="o">⟩,</span>
  <span class="n">exact</span> <span class="o">⟨</span><span class="n">x</span><span class="o">,</span> <span class="n">h</span><span class="o">⟩</span>
<span class="kd">end</span>
</code></pre></div>



<a name="267375424"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rw%20using%20an%20iff/near/267375424" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/rw.20using.20an.20iff.html#267375424">(Jan 09 2022 at 20:12)</a>:</h4>
<p>And then, having reached this state, you'll realize it's already there.</p>



<a name="267375825"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rw%20using%20an%20iff/near/267375825" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bernd Losert <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/rw.20using.20an.20iff.html#267375825">(Jan 09 2022 at 20:21)</a>:</h4>
<p>Aha. Nice find. There's so many of this little lemmas, I get lost trying to find what I need, especially when I have to jump between the filter and ultrafilter stuff.</p>



<a name="267376239"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rw%20using%20an%20iff/near/267376239" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bernd Losert <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/rw.20using.20an.20iff.html#267376239">(Jan 09 2022 at 20:30)</a>:</h4>
<p>I'm trying to use it in this bigger lemma, but it doesn't work:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">tactic</span>
<span class="kn">import</span> <span class="n">order.filter.partial</span>
<span class="kn">import</span> <span class="n">order.filter.ultrafilter</span>
<span class="kn">import</span> <span class="n">algebra.support</span>

<span class="kd">noncomputable theory</span>
<span class="kn">open</span> <span class="n">set</span> <span class="n">function</span> <span class="n">filter</span> <span class="n">classical</span>
<span class="n">open_locale</span> <span class="n">classical</span> <span class="n">filter</span>

<span class="kd">variables</span> <span class="o">{</span><span class="n">X</span> <span class="n">Y</span> <span class="n">Z</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span>

<span class="kd">lemma</span> <span class="n">ultrafilter_comap_set</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">)</span> <span class="o">(</span><span class="n">A</span> <span class="o">:</span> <span class="n">set</span> <span class="n">X</span><span class="o">)</span> <span class="o">(</span><span class="bp">𝒱</span> <span class="o">:</span> <span class="n">ultrafilter</span> <span class="n">Y</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">f</span> <span class="bp">''</span> <span class="n">A</span> <span class="bp">∈</span> <span class="bp">𝒱</span><span class="o">)</span> <span class="o">:</span>
<span class="bp">∃</span> <span class="bp">𝒰</span> <span class="o">:</span> <span class="n">ultrafilter</span> <span class="n">X</span><span class="o">,</span> <span class="bp">𝒰.</span><span class="n">map</span> <span class="n">f</span> <span class="bp">=</span> <span class="bp">𝒱</span> <span class="bp">∧</span> <span class="n">A</span> <span class="bp">∈</span> <span class="bp">𝒰</span> <span class="o">:=</span> <span class="kd">begin</span>
  <span class="k">let</span> <span class="n">ℱ</span> <span class="o">:=</span> <span class="n">comap</span> <span class="n">f</span> <span class="bp">𝒱</span><span class="o">,</span>
  <span class="n">haveI</span> <span class="o">:</span> <span class="n">ℱ.ne_bot</span> <span class="o">:=</span> <span class="n">filter.comap_ne_bot_of_image_mem</span> <span class="bp">𝒱.</span><span class="n">ne_bot</span> <span class="n">h</span><span class="o">,</span>
  <span class="k">let</span> <span class="bp">𝒰</span> <span class="o">:=</span> <span class="n">ultrafilter.of</span> <span class="n">ℱ</span><span class="o">,</span>
  <span class="n">use</span> <span class="bp">𝒰</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">h</span> <span class="o">:</span> <span class="bp">𝒰.</span><span class="n">map</span> <span class="n">f</span> <span class="bp">=</span> <span class="bp">𝒱</span><span class="o">,</span> <span class="gr">sorry</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">h'</span> <span class="o">:</span> <span class="n">A</span> <span class="bp">∈</span> <span class="bp">𝒰</span><span class="o">,</span> <span class="gr">sorry</span><span class="o">,</span>
  <span class="n">exact</span> <span class="n">and.intro</span> <span class="n">h</span> <span class="n">h'</span><span class="o">,</span>
<span class="kd">end</span>
</code></pre></div>



<a name="267376331"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rw%20using%20an%20iff/near/267376331" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bernd Losert <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/rw.20using.20an.20iff.html#267376331">(Jan 09 2022 at 20:32)</a>:</h4>
<p><code>unknown identifier 'filter.comap_ne_bot_of_image_mem'</code> is the error.</p>



<a name="267376419"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rw%20using%20an%20iff/near/267376419" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bernd Losert <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/rw.20using.20an.20iff.html#267376419">(Jan 09 2022 at 20:35)</a>:</h4>
<p>Oops. It's called filter.ne_bot.comap_of_image_mem. Haha.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>