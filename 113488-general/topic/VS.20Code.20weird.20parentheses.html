---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/VS.20Code.20weird.20parentheses.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/VS.20Code.20weird.20parentheses.html">VS Code weird parentheses</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="269462319"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/VS%20Code%20weird%20parentheses/near/269462319" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Johnson <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/VS.20Code.20weird.20parentheses.html#269462319">(Jan 26 2022 at 18:53)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">tactic</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">ℕ</span> <span class="bp">→</span> <span class="n">bool</span><span class="o">)</span> <span class="o">:</span> <span class="n">f</span> <span class="mi">0</span> <span class="bp">↔</span> <span class="n">true</span> <span class="bp">→</span> <span class="n">f</span> <span class="mi">0</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="c1">--</span>
<span class="kd">end</span>
</code></pre></div>
<p><a href="/user_uploads/3121/ahR-E4CtF1JG8MPLBF90djmK/001.png">Screenshot</a> </p>
<div class="message_inline_image"><a href="/user_uploads/3121/ahR-E4CtF1JG8MPLBF90djmK/001.png" title="Screenshot"><img src="/user_uploads/3121/ahR-E4CtF1JG8MPLBF90djmK/001.png"></a></div><p>Why are the closed parentheses on a new line?<br>
If we remove <code>import tactic</code>, then it is rendered as normal.</p>



<a name="269462404"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/VS%20Code%20weird%20parentheses/near/269462404" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/VS.20Code.20weird.20parentheses.html#269462404">(Jan 26 2022 at 18:54)</a>:</h4>
<p>fonts, I feel like there was some work to get this working with all fonts but it didn't really go far</p>



<a name="269462546"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/VS%20Code%20weird%20parentheses/near/269462546" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/VS.20Code.20weird.20parentheses.html#269462546">(Jan 26 2022 at 18:55)</a>:</h4>
<p>if you use DejaVu Sans Mono it should fix itself (you don't need to change your editor font, you can just change the infoview font using the "Lean: Info View Style" setting (I do <code>.font-code { font-family: "DejaVu Sans Mono" }</code>)</p>



<a name="276524865"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/VS%20Code%20weird%20parentheses/near/276524865" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Johnson <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/VS.20Code.20weird.20parentheses.html#276524865">(Mar 24 2022 at 19:00)</a>:</h4>
<p>It was working nice so far with DejaVu Sans Mono, but today I saw the issue again. Is there an alternative font to fix this?</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">tactic</span>
<span class="kd">structure</span> <span class="n">A</span> <span class="o">:=</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">list</span> <span class="n">ℕ</span><span class="o">)</span>
<span class="kd">example</span> <span class="o">:</span> <span class="n">nonempty</span> <span class="n">A</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="k">let</span> <span class="n">x</span> <span class="o">:</span> <span class="n">A</span> <span class="o">:=</span> <span class="o">⟨[]⟩,</span>
  <span class="n">use</span> <span class="n">x</span><span class="o">,</span>
<span class="kd">end</span>
</code></pre></div>
<p><a href="/user_uploads/3121/os106CsKwJdkSgX_HN_2rPx-/001.png">Screenshot</a></p>
<div class="message_inline_image"><a href="/user_uploads/3121/os106CsKwJdkSgX_HN_2rPx-/001.png" title="Screenshot"><img src="/user_uploads/3121/os106CsKwJdkSgX_HN_2rPx-/001.png"></a></div>



<a name="276528272"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/VS%20Code%20weird%20parentheses/near/276528272" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/VS.20Code.20weird.20parentheses.html#276528272">(Mar 24 2022 at 19:30)</a>:</h4>
<p>damn, and it seems that all those glyphs are dejavu sans mono as well, not a "backup" glyph :(</p>



<a name="276535062"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/VS%20Code%20weird%20parentheses/near/276535062" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/VS.20Code.20weird.20parentheses.html#276535062">(Mar 24 2022 at 20:28)</a>:</h4>
<p>Did we decide this was a vscode issue or a WebKit/blink issue?</p>



<a name="276535366"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/VS%20Code%20weird%20parentheses/near/276535366" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/VS.20Code.20weird.20parentheses.html#276535366">(Mar 24 2022 at 20:31)</a>:</h4>
<p>You can see it in the docs too, if this helps: <a href="/user_uploads/3121/HGN2o7T5tXo_HVklK63Wiz4a/brackets.png">brackets.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/3121/HGN2o7T5tXo_HVklK63Wiz4a/brackets.png" title="brackets.png"><img src="/user_uploads/3121/HGN2o7T5tXo_HVklK63Wiz4a/brackets.png"></a></div>



<a name="276535685"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/VS%20Code%20weird%20parentheses/near/276535685" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/VS.20Code.20weird.20parentheses.html#276535685">(Mar 24 2022 at 20:33)</a>:</h4>
<p>yikes, we changed the font to avoid this exact thing happening</p>



<a name="276535751"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/VS%20Code%20weird%20parentheses/near/276535751" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/VS.20Code.20weird.20parentheses.html#276535751">(Mar 24 2022 at 20:34)</a>:</h4>
<p><a href="https://leanprover-community.github.io/mathlib_docs/find/zmod.units_equiv_coprime">docs#zmod.units_equiv_coprime</a></p>



<a name="276536587"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/VS%20Code%20weird%20parentheses/near/276536587" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/VS.20Code.20weird.20parentheses.html#276536587">(Mar 24 2022 at 20:40)</a>:</h4>
<p><a href="/user_uploads/3121/lC7mzhm7OWvKv1lBzFAtFrOT/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/3121/lC7mzhm7OWvKv1lBzFAtFrOT/image.png" title="image.png"><img src="/user_uploads/3121/lC7mzhm7OWvKv1lBzFAtFrOT/image.png"></a></div>



<a name="276536615"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/VS%20Code%20weird%20parentheses/near/276536615" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/VS.20Code.20weird.20parentheses.html#276536615">(Mar 24 2022 at 20:40)</a>:</h4>
<p>interestingly,  it's the character being too _small_; if you make it bigger using CSS stuff, the stuff works</p>



<a name="276537382"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/VS%20Code%20weird%20parentheses/near/276537382" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/VS.20Code.20weird.20parentheses.html#276537382">(Mar 24 2022 at 20:47)</a>:</h4>
<p>I thought we got rid of this bug last year, but it indeed came back this year, punishing my students using windows.</p>



<a name="276632302"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/VS%20Code%20weird%20parentheses/near/276632302" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Johnson <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/VS.20Code.20weird.20parentheses.html#276632302">(Mar 25 2022 at 15:06)</a>:</h4>
<p>This resolves the issue for any font (the only problem is that some long expressions may not always span across multiple lines):</p>
<div class="codehilite" data-code-language="CSS"><pre><span></span><code><span class="p">.</span><span class="nc">expr</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="p">.</span><span class="nc">expr-boundary</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">white-space</span><span class="p">:</span><span class="w"> </span><span class="kc">pre-wrap</span><span class="w"> </span><span class="cp">!important</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="p">.</span><span class="nc">expr-boundary</span><span class="w"> </span><span class="nt">span</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">white-space</span><span class="p">:</span><span class="w"> </span><span class="kc">pre</span><span class="w"> </span><span class="cp">!important</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
</code></pre></div>
<p><a href="/user_uploads/3121/fHPOQXNGkMlFWGWYzHSVw_1f/001.png">Screenshot.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/3121/fHPOQXNGkMlFWGWYzHSVw_1f/001.png" title="Screenshot.png"><img src="/user_uploads/3121/fHPOQXNGkMlFWGWYzHSVw_1f/001.png"></a></div>



<a name="276634504"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/VS%20Code%20weird%20parentheses/near/276634504" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/VS.20Code.20weird.20parentheses.html#276634504">(Mar 25 2022 at 15:21)</a>:</h4>
<p><span class="user-mention" data-user-id="456794">@Patrick Johnson</span> nice, I think we should add this to the tips and tricks page <a href="https://leanprover-community.github.io/tips_and_tricks.html">https://leanprover-community.github.io/tips_and_tricks.html</a>, do you want to add it or shall I?<br>
Is it the case that one can now use any font for the info view or is dejavu sans mono still best?</p>



<a name="276635027"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/VS%20Code%20weird%20parentheses/near/276635027" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/VS.20Code.20weird.20parentheses.html#276635027">(Mar 25 2022 at 15:24)</a>:</h4>
<p>wait what? Can someone explain where I type this?</p>



<a name="276635068"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/VS%20Code%20weird%20parentheses/near/276635068" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/VS.20Code.20weird.20parentheses.html#276635068">(Mar 25 2022 at 15:24)</a>:</h4>
<p><a href="/user_uploads/3121/78orLNp-uoXEMgttKB2Ibfgx/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/3121/78orLNp-uoXEMgttKB2Ibfgx/image.png" title="image.png"><img src="/user_uploads/3121/78orLNp-uoXEMgttKB2Ibfgx/image.png"></a></div>



<a name="276635147"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/VS%20Code%20weird%20parentheses/near/276635147" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/VS.20Code.20weird.20parentheses.html#276635147">(Mar 25 2022 at 15:25)</a>:</h4>
<p><span class="user-mention" data-user-id="456794">@Patrick Johnson</span>  Instead of the tips&amp;tricks page could you please PR the change to doc-gen and the vscode extension?  This is an honest bug, we should fix it for everyone.</p>



<a name="276635327"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/VS%20Code%20weird%20parentheses/near/276635327" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/VS.20Code.20weird.20parentheses.html#276635327">(Mar 25 2022 at 15:26)</a>:</h4>
<p><a href="/user_uploads/3121/DMR_pD6Bkbc1YUeiEV4JYF5s/css.png">css.png</a> Wrong search, right?</p>
<div class="message_inline_image"><a href="/user_uploads/3121/DMR_pD6Bkbc1YUeiEV4JYF5s/css.png" title="css.png"><img src="/user_uploads/3121/DMR_pD6Bkbc1YUeiEV4JYF5s/css.png"></a></div>



<a name="276635344"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/VS%20Code%20weird%20parentheses/near/276635344" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/VS.20Code.20weird.20parentheses.html#276635344">(Mar 25 2022 at 15:26)</a>:</h4>
<p>yeah, in the settings UI</p>



<a name="276635377"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/VS%20Code%20weird%20parentheses/near/276635377" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/VS.20Code.20weird.20parentheses.html#276635377">(Mar 25 2022 at 15:26)</a>:</h4>
<p>Press <code>ctrl+,</code> and type in the resulting search bar</p>



<a name="276635392"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/VS%20Code%20weird%20parentheses/near/276635392" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/VS.20Code.20weird.20parentheses.html#276635392">(Mar 25 2022 at 15:26)</a>:</h4>
<p>thanks</p>



<a name="276635732"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/VS%20Code%20weird%20parentheses/near/276635732" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/VS.20Code.20weird.20parentheses.html#276635732">(Mar 25 2022 at 15:29)</a>:</h4>
<p>I'm still not 100% sure what I should be doing but if it's going to be fixed upstream maybe I'll just wait</p>



<a name="276678387"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/VS%20Code%20weird%20parentheses/near/276678387" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Johnson <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/VS.20Code.20weird.20parentheses.html#276678387">(Mar 25 2022 at 21:01)</a>:</h4>
<blockquote>
<p>Instead of the tips&amp;tricks page could you please PR the change to doc-gen and the vscode extension? This is an honest bug, we should fix it for everyone.</p>
</blockquote>
<p>It's more like a workaround rather than a fix. With this patch, long expressions may sometimes overflow horizontally.</p>
<p>VS Code extension doesn't seem to be generating inline CSS attributes. That seems to happen in mathlib, in particular <a href="https://github.com/leanprover-community/mathlib/blob/b6d246a6ec5c1bd51f8570e81b1b83f95e836ac9/src/tactic/interactive_expr.lean#L196">here</a>. Only the outer-most <code>expr-boundary</code> should have <code>pre-wrap</code>, nested expressions should only be <code>pre</code>. Unfortunately, I can't test it, because compiling mathlib locally is out of reach for my machine. Please feel free to open PR yourself if you can make it work.</p>



<a name="276698034"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/VS%20Code%20weird%20parentheses/near/276698034" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/VS.20Code.20weird.20parentheses.html#276698034">(Mar 26 2022 at 01:35)</a>:</h4>
<p>You can make the PR, push to github, wait for CI to compile, and then fetch the oleans using <code>leanproject</code>, right?</p>



<a name="276718588"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/VS%20Code%20weird%20parentheses/near/276718588" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Johnson <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/VS.20Code.20weird.20parentheses.html#276718588">(Mar 26 2022 at 10:30)</a>:</h4>
<p>Yes, but given that I'm not very familiar with meta programming in Lean, it may result in a very long chain of trial-and-error attempts, triggering many CI runs and taking a lot of time. It will definitely be easier for someone who already knows how stuff works.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>