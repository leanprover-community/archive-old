---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/option.20is.20a.20monad.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/option.20is.20a.20monad.html">option is a monad</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="192572549"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/option%20is%20a%20monad/near/192572549" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/option.20is.20a.20monad.html#192572549">(Apr 01 2020 at 18:30)</a>:</h4>
<p>I read in Programming in Lean that option is a monad. I rolled my own <code>option</code> and decided to try and define a term of type <code>monad option</code>. I seem to have to fill in a bunch of fields, I've done half of them, and it's just dawned on me that none of them are proofs :-/ I have <code>map_const</code>, <code>seq_left</code> and <code>seq_right</code> left to do. But I'm not doing the right thing because I'm sure there should be proofs involved. Should I be proving it's a lawful monad?</p>



<a name="192572602"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/option%20is%20a%20monad/near/192572602" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/option.20is.20a.20monad.html#192572602">(Apr 01 2020 at 18:30)</a>:</h4>
<p>Yes</p>



<a name="192573048"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/option%20is%20a%20monad/near/192573048" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/option.20is.20a.20monad.html#192573048">(Apr 01 2020 at 18:33)</a>:</h4>
<p><code>monad</code> is for programming, and programmers don't need proofs</p>



<a name="192573200"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/option%20is%20a%20monad/near/192573200" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/option.20is.20a.20monad.html#192573200">(Apr 01 2020 at 18:34)</a>:</h4>
<p>Kevin, what you're doing is called Haskell. To become Lean you need the lawfulness.</p>



<a name="192573266"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/option%20is%20a%20monad/near/192573266" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/option.20is.20a.20monad.html#192573266">(Apr 01 2020 at 18:35)</a>:</h4>
<p>I was actually experimenting with things which I thought might be worth doing in the tutorial project</p>



<a name="192573289"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/option%20is%20a%20monad/near/192573289" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/option.20is.20a.20monad.html#192573289">(Apr 01 2020 at 18:35)</a>:</h4>
<p>but for some reason I thought a monad had about two fields and two proofs</p>



<a name="192573425"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/option%20is%20a%20monad/near/192573425" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/option.20is.20a.20monad.html#192573425">(Apr 01 2020 at 18:36)</a>:</h4>
<p>and currently I seem to have to prove <code>map_const_eq</code>, <code>_id_map</code>, <code>bind_pure_comp_eq_map</code>, <code>bind_map_eq_seq</code>, <code>pure_bind</code>, <code>bind_assoc</code> and I also have to guess definitions of <code>map_const</code>, <code>seq_left</code> and <code>seq_right</code></p>



<a name="192573436"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/option%20is%20a%20monad/near/192573436" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/option.20is.20a.20monad.html#192573436">(Apr 01 2020 at 18:36)</a>:</h4>
<p>this has got a bit out of hand.</p>



<a name="192573515"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/option%20is%20a%20monad/near/192573515" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/option.20is.20a.20monad.html#192573515">(Apr 01 2020 at 18:37)</a>:</h4>
<p>The category_theory monad would look more like what you expect</p>



<a name="192573523"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/option%20is%20a%20monad/near/192573523" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/option.20is.20a.20monad.html#192573523">(Apr 01 2020 at 18:37)</a>:</h4>
<p>Furthermore I have no idea what all the notation means in the goals :-) <code>x &gt;&gt;= pure ∘ f = f &lt;$&gt; x</code> ?</p>



<a name="192573526"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/option%20is%20a%20monad/near/192573526" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/option.20is.20a.20monad.html#192573526">(Apr 01 2020 at 18:37)</a>:</h4>
<p>but I don't know whether it is suitable for your purposes</p>



<a name="192573550"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/option%20is%20a%20monad/near/192573550" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/option.20is.20a.20monad.html#192573550">(Apr 01 2020 at 18:37)</a>:</h4>
<p>My purposes are trying to figure out if I can teach schoolkids what monads are</p>



<a name="192573615"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/option%20is%20a%20monad/near/192573615" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jasmin Blanchette <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/option.20is.20a.20monad.html#192573615">(Apr 01 2020 at 18:38)</a>:</h4>
<p>At the VU, we just defined our own monad class.</p>



<a name="192573625"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/option%20is%20a%20monad/near/192573625" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jasmin Blanchette <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/option.20is.20a.20monad.html#192573625">(Apr 01 2020 at 18:38)</a>:</h4>
<p>To avoid all that stuff.</p>



<a name="192573659"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/option%20is%20a%20monad/near/192573659" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jasmin Blanchette <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/option.20is.20a.20monad.html#192573659">(Apr 01 2020 at 18:38)</a>:</h4>
<p>Two fields, <em>three</em> proofs.</p>



<a name="192573698"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/option%20is%20a%20monad/near/192573698" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/option.20is.20a.20monad.html#192573698">(Apr 01 2020 at 18:39)</a>:</h4>
<p>What's with the burrito?</p>



<a name="192573708"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/option%20is%20a%20monad/near/192573708" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/option.20is.20a.20monad.html#192573708">(Apr 01 2020 at 18:39)</a>:</h4>
<p>Is one of them <code>(f &gt;&gt;= λ (_x : α → β), _x &lt;$&gt; x) = f &lt;*&gt; x</code></p>



<a name="192573710"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/option%20is%20a%20monad/near/192573710" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/option.20is.20a.20monad.html#192573710">(Apr 01 2020 at 18:39)</a>:</h4>
<p>Seriously?</p>



<a name="192573726"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/option%20is%20a%20monad/near/192573726" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/option.20is.20a.20monad.html#192573726">(Apr 01 2020 at 18:39)</a>:</h4>
<p><span class="user-mention" data-user-id="110031">@Patrick Massot</span> Search for monad and burrito</p>



<a name="192573747"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/option%20is%20a%20monad/near/192573747" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/option.20is.20a.20monad.html#192573747">(Apr 01 2020 at 18:39)</a>:</h4>
<p>And brew yourself a cup of coffee.... you'll have a long evening</p>



<a name="192573837"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/option%20is%20a%20monad/near/192573837" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/option.20is.20a.20monad.html#192573837">(Apr 01 2020 at 18:40)</a>:</h4>
<p><a href="https://duckduckgo.com/?t=ffab&amp;q=monad+burrito&amp;atb=v1-1&amp;ia=web" title="https://duckduckgo.com/?t=ffab&amp;q=monad+burrito&amp;atb=v1-1&amp;ia=web">https://duckduckgo.com/?t=ffab&amp;q=monad+burrito&amp;atb=v1-1&amp;ia=web</a></p>



<a name="192573863"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/option%20is%20a%20monad/near/192573863" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/option.20is.20a.20monad.html#192573863">(Apr 01 2020 at 18:40)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> Does Lean know what a burrito is?</p>



<a name="192573882"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/option%20is%20a%20monad/near/192573882" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/option.20is.20a.20monad.html#192573882">(Apr 01 2020 at 18:40)</a>:</h4>
<p>This is the original source: <a href="https://byorgey.wordpress.com/2009/01/12/abstraction-intuition-and-the-monad-tutorial-fallacy/" title="https://byorgey.wordpress.com/2009/01/12/abstraction-intuition-and-the-monad-tutorial-fallacy/">https://byorgey.wordpress.com/2009/01/12/abstraction-intuition-and-the-monad-tutorial-fallacy/</a></p>



<a name="192573887"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/option%20is%20a%20monad/near/192573887" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/option.20is.20a.20monad.html#192573887">(Apr 01 2020 at 18:40)</a>:</h4>
<p>You could try proving that those are monads</p>



<a name="192573924"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/option%20is%20a%20monad/near/192573924" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/option.20is.20a.20monad.html#192573924">(Apr 01 2020 at 18:41)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112680">Johan Commelin</span> <a href="#narrow/stream/113488-general/topic/option.20is.20a.20monad/near/192573837" title="#narrow/stream/113488-general/topic/option.20is.20a.20monad/near/192573837">said</a>:</p>
<blockquote>
<p><a href="https://duckduckgo.com/?t=ffab&amp;q=monad+burrito&amp;atb=v1-1&amp;ia=web" title="https://duckduckgo.com/?t=ffab&amp;q=monad+burrito&amp;atb=v1-1&amp;ia=web">https://duckduckgo.com/?t=ffab&amp;q=monad+burrito&amp;atb=v1-1&amp;ia=web</a></p>
</blockquote>
<p>I commend you for using duckduckgo.</p>



<a name="192574240"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/option%20is%20a%20monad/near/192574240" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/option.20is.20a.20monad.html#192574240">(Apr 01 2020 at 18:43)</a>:</h4>
<p>Reminds me of <a href="https://twitter.com/agnoster/status/44636629423497217" title="https://twitter.com/agnoster/status/44636629423497217">this</a></p>
<div class="inline-preview-twitter"><div class="twitter-tweet"><a href="https://twitter.com/agnoster/status/44636629423497217"><img class="twitter-avatar" src="https://pbs.twimg.com/profile_images/433743062221606912/KIL_MiBp_normal.jpeg"></a><p><a href="https://twitter.com/wilshipley" title="https://twitter.com/wilshipley">@wilshipley</a> git gets easier once you get the basic idea that branches are homeomorphic endofunctors mapping submanifolds of a Hilbert space.</p><span>- Isaac Wolkerstorfer (@agnoster)</span></div></div>



<a name="192574827"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/option%20is%20a%20monad/near/192574827" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/option.20is.20a.20monad.html#192574827">(Apr 01 2020 at 18:48)</a>:</h4>
<p>Oh, I remember now. I've met those before, but I forgot.</p>



<a name="192586491"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/option%20is%20a%20monad/near/192586491" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/option.20is.20a.20monad.html#192586491">(Apr 01 2020 at 20:13)</a>:</h4>
<p>Today is the perfect day, and this is the perfect thread, to mention <a href="https://webapps.wesleyan.edu/redirector/emorehouse.web.wesleyan.edu?path=/silliness/burrito_monads.pdf" title="https://webapps.wesleyan.edu/redirector/emorehouse.web.wesleyan.edu?path=/silliness/burrito_monads.pdf">Burritos for the hungry mathematician</a></p>



<a name="192590314"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/option%20is%20a%20monad/near/192590314" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/option.20is.20a.20monad.html#192590314">(Apr 01 2020 at 20:43)</a>:</h4>
<p><a href="https://neoeinstein.github.io/monads-are-not-burritos/" title="https://neoeinstein.github.io/monads-are-not-burritos/">https://neoeinstein.github.io/monads-are-not-burritos/</a></p>



<a name="192633580"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/option%20is%20a%20monad/near/192633580" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/option.20is.20a.20monad.html#192633580">(Apr 02 2020 at 08:21)</a>:</h4>
<p>So it is a theorem in Lean, that what Leo de Moura thinks a monad is, is the same as what Scott Morrison thinks a monad is?</p>



<a name="192633704"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/option%20is%20a%20monad/near/192633704" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/option.20is.20a.20monad.html#192633704">(Apr 02 2020 at 08:23)</a>:</h4>
<p>Category theory is some weird way for type theory to formally verify programming languages or something.</p>



<a name="192633749"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/option%20is%20a%20monad/near/192633749" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/option.20is.20a.20monad.html#192633749">(Apr 02 2020 at 08:23)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110038">Kevin Buzzard</span> <a href="#narrow/stream/113488-general/topic/option.20is.20a.20monad/near/192633580" title="#narrow/stream/113488-general/topic/option.20is.20a.20monad/near/192633580">said</a>:</p>
<blockquote>
<p>So it is a theorem in Lean, that what Leo de Moura thinks a monad is, is the same as what Scott Morrison thinks a monad is?</p>
</blockquote>
<p>Not sure if this has been done.</p>



<a name="192633865"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/option%20is%20a%20monad/near/192633865" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/option.20is.20a.20monad.html#192633865">(Apr 02 2020 at 08:25)</a>:</h4>
<p>Why is the Lean term <code>option.monad</code> a monad, Scott Morrison?</p>



<a name="192634078"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/option%20is%20a%20monad/near/192634078" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/option.20is.20a.20monad.html#192634078">(Apr 02 2020 at 08:27)</a>:</h4>
<p>One answer is <a href="https://github.com/leanprover-community/mathlib/blob/master/src/category_theory/monad/types.lean" title="https://github.com/leanprover-community/mathlib/blob/master/src/category_theory/monad/types.lean">https://github.com/leanprover-community/mathlib/blob/master/src/category_theory/monad/types.lean</a></p>



<a name="192634094"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/option%20is%20a%20monad/near/192634094" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/option.20is.20a.20monad.html#192634094">(Apr 02 2020 at 08:27)</a>:</h4>
<p>Which takes a type-level lawful monad and produces a category theoretic monad.</p>



<a name="192634171"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/option%20is%20a%20monad/near/192634171" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/option.20is.20a.20monad.html#192634171">(Apr 02 2020 at 08:28)</a>:</h4>
<p>But we "just" need to understand why <code>option</code> is an algebra object in the monoidal category of endofunctors of <code>Type</code>.</p>



<a name="192634907"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/option%20is%20a%20monad/near/192634907" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/option.20is.20a.20monad.html#192634907">(Apr 02 2020 at 08:36)</a>:</h4>
<p>Oh wow, so <code>monad</code> has this crazy evolution!</p>



<a name="192635082"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/option%20is%20a%20monad/near/192635082" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/option.20is.20a.20monad.html#192635082">(Apr 02 2020 at 08:39)</a>:</h4>
<p>Johannes got it into what a computer scientist thought a category was?</p>



<a name="192635598"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/option%20is%20a%20monad/near/192635598" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/option.20is.20a.20monad.html#192635598">(Apr 02 2020 at 08:44)</a>:</h4>
<p>If you wanted to prove that option was a monad purely in the category theoretic definition, you would start with:</p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">category_theory</span><span class="bp">.</span><span class="n">monad</span><span class="bp">.</span><span class="n">basic</span>
<span class="kn">import</span> <span class="n">category_theory</span><span class="bp">.</span><span class="n">functorial</span>
<span class="kn">import</span> <span class="n">category_theory</span><span class="bp">.</span><span class="n">types</span>

<span class="kn">open</span> <span class="n">category_theory</span>

<span class="bp">@</span><span class="o">[</span><span class="kn">reducible</span><span class="o">]</span>
<span class="n">def</span> <span class="n">Option</span> <span class="o">:=</span> <span class="n">of_type_functor</span> <span class="n">option</span><span class="bp">.</span><span class="o">{</span><span class="mi">0</span><span class="o">}</span>

<span class="kn">instance</span> <span class="n">monad_Option</span> <span class="o">:</span> <span class="n">monad</span> <span class="n">Option</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">η</span> <span class="o">:=</span>
    <span class="c1">-- We need to provide `𝟭 Type ⟶ Option`,</span>
    <span class="c1">-- i.e. a natural transformation from the identity functor to the Option functor</span>
    <span class="c1">-- In components, this just means for each type `α` a morphism from `α` to `option α`.</span>
    <span class="c1">-- I can think of two good options, `some` and `none`.</span>
    <span class="c1">-- Let&#39;s guess `some` is the right answer!</span>
    <span class="c1">-- Hopefully the category theoretic automation is good enough we won&#39;t need to check naturality.</span>
    <span class="o">{</span> <span class="n">app</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">α</span> <span class="n">x</span><span class="o">,</span> <span class="n">some</span> <span class="n">x</span><span class="o">,</span> <span class="o">},</span>
    <span class="c1">-- Indeed, the naturality proof was provided &quot;under the hood&quot;.</span>
  <span class="n">μ</span> <span class="o">:=</span>
  <span class="c1">-- Now we need to provide `Option ⋙ Option ⟶ Option`.</span>
  <span class="o">{</span> <span class="n">app</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">α</span> <span class="n">x</span><span class="o">,</span>
    <span class="k">begin</span>
      <span class="n">dsimp</span> <span class="o">[</span><span class="n">Option</span><span class="o">]</span> <span class="n">at</span> <span class="n">x</span><span class="o">,</span> <span class="n">dsimp</span> <span class="o">[</span><span class="n">Option</span><span class="o">],</span>
      <span class="c1">-- There&#39;s only one sensible thing to do:</span>
      <span class="n">exact</span> <span class="n">x</span><span class="bp">.</span><span class="n">get_or_else</span> <span class="n">none</span><span class="o">,</span>
    <span class="kn">end</span><span class="o">,</span>
    <span class="c1">-- Unfortunately, naturality doesn&#39;t happen automatically this time!</span>
    <span class="n">naturality&#39;</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">α</span> <span class="n">β</span> <span class="n">f</span><span class="o">,</span>
    <span class="k">begin</span>
      <span class="n">ext</span><span class="o">,</span> <span class="n">dsimp</span><span class="o">,</span>
      <span class="n">cases</span> <span class="n">x</span><span class="o">,</span>
      <span class="c1">-- There appears to be a ridiculous lack of `simp` lemmas about the `option` functor...</span>
      <span class="n">sorry</span><span class="o">,</span>
      <span class="n">sorry</span><span class="o">,</span>
    <span class="kn">end</span><span class="o">},</span>
  <span class="c1">-- We still need to prove that what we wrote down constituted an algebra in `Type ⥤ Type`:</span>
  <span class="n">left_unit&#39;</span> <span class="o">:=</span> <span class="n">sorry</span><span class="o">,</span>
  <span class="n">right_unit&#39;</span> <span class="o">:=</span> <span class="n">sorry</span><span class="o">,</span>
  <span class="n">assoc&#39;</span> <span class="o">:=</span> <span class="n">sorry</span><span class="o">,</span> <span class="o">}</span>
</pre></div>



<a name="192635817"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/option%20is%20a%20monad/near/192635817" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/option.20is.20a.20monad.html#192635817">(Apr 02 2020 at 08:46)</a>:</h4>
<p>I've given up there because people have neglected to prove the obvious simp lemmas about the <code>functor</code> and <code>is_lawful_functor</code> instances they biult for <code>option</code>.</p>



<a name="192635849"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/option%20is%20a%20monad/near/192635849" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/option.20is.20a.20monad.html#192635849">(Apr 02 2020 at 08:46)</a>:</h4>
<p>Maybe I should have just proved it was a functor by hand, and then the <code>monad</code> proof would be worked automatically.</p>



<a name="192636027"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/option%20is%20a%20monad/near/192636027" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/option.20is.20a.20monad.html#192636027">(Apr 02 2020 at 08:48)</a>:</h4>
<p>Scott, you look at those proofs and think <em>sigh, I must go and write more automation</em></p>



<a name="192636110"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/option%20is%20a%20monad/near/192636110" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/option.20is.20a.20monad.html#192636110">(Apr 02 2020 at 08:49)</a>:</h4>
<p>I think I look at them and say "hey, we are five computer game puzzles away from proving that option is a monad, let's play some computer games"</p>



<a name="192636207"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/option%20is%20a%20monad/near/192636207" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/option.20is.20a.20monad.html#192636207">(Apr 02 2020 at 08:50)</a>:</h4>
<p>Oh, actually the reason those proofs were breaking was that I wrote <code>{ app := λ α x, none, },</code> when I'd said in the comment that we were going to write <code>{ app := λ α x, some x, },</code></p>



<a name="192636275"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/option%20is%20a%20monad/near/192636275" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/option.20is.20a.20monad.html#192636275">(Apr 02 2020 at 08:50)</a>:</h4>
<p>Can you post a fixed version?</p>



<a name="192636315"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/option%20is%20a%20monad/near/192636315" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/option.20is.20a.20monad.html#192636315">(Apr 02 2020 at 08:51)</a>:</h4>
<p>Yes. Indeed, if you turn on case bashing then tidy just handles everything:</p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">category_theory</span><span class="bp">.</span><span class="n">monad</span><span class="bp">.</span><span class="n">basic</span>
<span class="kn">import</span> <span class="n">category_theory</span><span class="bp">.</span><span class="n">types</span>

<span class="kn">open</span> <span class="n">category_theory</span>

<span class="c1">-- We turn on case bashing, to case split on `option` hypotheses.</span>
<span class="n">attribute</span> <span class="o">[</span><span class="n">tidy</span><span class="o">]</span> <span class="n">tactic</span><span class="bp">.</span><span class="n">case_bash</span>

<span class="n">def</span> <span class="n">Option</span> <span class="o">:=</span> <span class="n">of_type_functor</span> <span class="n">option</span><span class="bp">.</span><span class="o">{</span><span class="mi">0</span><span class="o">}</span>

<span class="kn">instance</span> <span class="n">monad_Option</span> <span class="o">:</span> <span class="n">monad</span> <span class="n">Option</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">η</span> <span class="o">:=</span>
    <span class="c1">-- We need to provide `𝟭 Type ⟶ Option`,</span>
    <span class="c1">-- i.e. a natural transformation from the identity functor to the Option functor</span>
    <span class="c1">-- In components, this just means for each type `α` a morphism from `α` to `option α`.</span>
    <span class="c1">-- I can think of two good options, `some` and `none`.</span>
    <span class="c1">-- Let&#39;s guess `some` is the right answer!</span>
    <span class="c1">-- Hopefully the category theoretic automation is good enough we won&#39;t need to check naturality.</span>
    <span class="o">{</span> <span class="n">app</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">α</span> <span class="n">x</span><span class="o">,</span> <span class="n">some</span> <span class="n">x</span><span class="o">,</span> <span class="o">},</span>
    <span class="c1">-- Indeed, the naturality proof was provided &quot;under the hood&quot;.</span>
  <span class="n">μ</span> <span class="o">:=</span>
  <span class="c1">-- Now we need to provide `Option ⋙ Option ⟶ Option`.</span>
  <span class="o">{</span> <span class="n">app</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">α</span> <span class="n">x</span><span class="o">,</span> <span class="n">x</span><span class="bp">.</span><span class="n">get_or_else</span> <span class="n">none</span><span class="o">,</span> <span class="o">},</span> <span class="o">}</span>
</pre></div>



<a name="192636443"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/option%20is%20a%20monad/near/192636443" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/option.20is.20a.20monad.html#192636443">(Apr 02 2020 at 08:52)</a>:</h4>
<p>Option is a monad!</p>



<a name="192636479"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/option%20is%20a%20monad/near/192636479" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/option.20is.20a.20monad.html#192636479">(Apr 02 2020 at 08:52)</a>:</h4>
<p>in just three lines, plus comments :-)</p>



<a name="192636509"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/option%20is%20a%20monad/near/192636509" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/option.20is.20a.20monad.html#192636509">(Apr 02 2020 at 08:53)</a>:</h4>
<p>Now what about the theorem that <code>_root_.monad</code> is a monad?</p>



<a name="192636577"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/option%20is%20a%20monad/near/192636577" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/option.20is.20a.20monad.html#192636577">(Apr 02 2020 at 08:53)</a>:</h4>
<p>this is so cool</p>



<a name="192636584"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/option%20is%20a%20monad/near/192636584" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/option.20is.20a.20monad.html#192636584">(Apr 02 2020 at 08:53)</a>:</h4>
<p>Thanks <span class="user-mention" data-user-id="266440">@Shing Tak Lam</span></p>



<a name="192636671"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/option%20is%20a%20monad/near/192636671" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/option.20is.20a.20monad.html#192636671">(Apr 02 2020 at 08:54)</a>:</h4>
<p>@Kevin, what do you mean? That's the proof Johannes wrote that I linked above.</p>



<a name="192636679"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/option%20is%20a%20monad/near/192636679" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/option.20is.20a.20monad.html#192636679">(Apr 02 2020 at 08:54)</a>:</h4>
<p>I see, so it's all there.</p>



<a name="192636758"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/option%20is%20a%20monad/near/192636758" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/option.20is.20a.20monad.html#192636758">(Apr 02 2020 at 08:55)</a>:</h4>
<p>Yes. To prove <code>option</code> is a category-theoretic monad you should of course just combine the fact people have proved it's a computer science monad already, and the generic translation to category-theoretic monads.</p>



<a name="192636818"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/option%20is%20a%20monad/near/192636818" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/option.20is.20a.20monad.html#192636818">(Apr 02 2020 at 08:56)</a>:</h4>
<p>The proof I wrote above is just for pedagogy.</p>



<a name="192651350"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/option%20is%20a%20monad/near/192651350" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/option.20is.20a.20monad.html#192651350">(Apr 02 2020 at 11:28)</a>:</h4>
<p><span class="user-mention" data-user-id="110026">@Simon Hudon</span> would you ever need to import <code>category_theory.monad.types</code> when you are, say, writing meta code? Do you ever use <code>option.monad</code>? Presumably you use monads? What would happen if they were tagged <code>noncomputable</code>?</p>



<a name="192651852"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/option%20is%20a%20monad/near/192651852" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/option.20is.20a.20monad.html#192651852">(Apr 02 2020 at 11:35)</a>:</h4>
<p><code>option.monad</code> is used whenever you write <code>opt &gt;&gt;= f</code> where <code>opt : option A</code></p>



<a name="192651859"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/option%20is%20a%20monad/near/192651859" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/option.20is.20a.20monad.html#192651859">(Apr 02 2020 at 11:35)</a>:</h4>
<p>actually that's not quite correct because there is a <code>has_bind</code> superclass that provides that, but <code>monad</code> gives you other haskelly notations like <code>&lt;*&gt;</code> and <code>*&gt;</code></p>



<a name="192652310"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/option%20is%20a%20monad/near/192652310" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/option.20is.20a.20monad.html#192652310">(Apr 02 2020 at 11:40)</a>:</h4>
<p>actually <code>monad</code> is basically just the join of other typeclasses, so it doesn't contribute anything new but other functions are written to that interface. So for instance you can't write <code>return a : option A</code> without using <code>option.monad</code></p>



<a name="192652392"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/option%20is%20a%20monad/near/192652392" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/option.20is.20a.20monad.html#192652392">(Apr 02 2020 at 11:41)</a>:</h4>
<p>but you can write <code>pure a : option A</code> which is the name contributed by <code>applicative</code> (thank you haskell for having not one but two nonintuitive names for the same function), or of course <code>some a : option A</code></p>



<a name="192652967"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/option%20is%20a%20monad/near/192652967" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/option.20is.20a.20monad.html#192652967">(Apr 02 2020 at 11:48)</a>:</h4>
<p>I don't have a clue what <code>&gt;&gt;=</code> means. Is this notation commonly used? This is some meta thing, right? <span aria-label="wink" class="emoji emoji-1f609" role="img" title="wink">:wink:</span></p>



<a name="192653041"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/option%20is%20a%20monad/near/192653041" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/option.20is.20a.20monad.html#192653041">(Apr 02 2020 at 11:49)</a>:</h4>
<p>and all the other funny emoticons like <code>&lt;*&gt;</code>?</p>



<a name="192653046"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/option%20is%20a%20monad/near/192653046" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/option.20is.20a.20monad.html#192653046">(Apr 02 2020 at 11:49)</a>:</h4>
<p><code>a &gt;&gt;= \lam b. f</code> means the same as <code>do b &lt;- a, f</code>, which is how you will normally see it</p>



<a name="192653114"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/option%20is%20a%20monad/near/192653114" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/option.20is.20a.20monad.html#192653114">(Apr 02 2020 at 11:50)</a>:</h4>
<p>actually <code>do</code> notation is just syntax for the former</p>



<a name="192653115"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/option%20is%20a%20monad/near/192653115" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/option.20is.20a.20monad.html#192653115">(Apr 02 2020 at 11:50)</a>:</h4>
<p>OK so I must confess that I have seen <code>b &lt;- a</code> before.</p>



<a name="192653157"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/option%20is%20a%20monad/near/192653157" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/option.20is.20a.20monad.html#192653157">(Apr 02 2020 at 11:50)</a>:</h4>
<p>And what would happen if I made it noncomputable? Would anything break?</p>



<a name="192653168"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/option%20is%20a%20monad/near/192653168" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/option.20is.20a.20monad.html#192653168">(Apr 02 2020 at 11:50)</a>:</h4>
<p>yes, everything would break</p>



<a name="192653178"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/option%20is%20a%20monad/near/192653178" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/option.20is.20a.20monad.html#192653178">(Apr 02 2020 at 11:51)</a>:</h4>
<p>What exactly?</p>



<a name="192653182"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/option%20is%20a%20monad/near/192653182" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/option.20is.20a.20monad.html#192653182">(Apr 02 2020 at 11:51)</a>:</h4>
<p>all tactics</p>



<a name="192653184"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/option%20is%20a%20monad/near/192653184" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/option.20is.20a.20monad.html#192653184">(Apr 02 2020 at 11:51)</a>:</h4>
<p>All tactics?</p>



<a name="192653190"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/option%20is%20a%20monad/near/192653190" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/option.20is.20a.20monad.html#192653190">(Apr 02 2020 at 11:51)</a>:</h4>
<p>rofl</p>



<a name="192653239"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/option%20is%20a%20monad/near/192653239" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/option.20is.20a.20monad.html#192653239">(Apr 02 2020 at 11:51)</a>:</h4>
<p>taking away bind is like taking away function composition</p>



<a name="192653297"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/option%20is%20a%20monad/near/192653297" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/option.20is.20a.20monad.html#192653297">(Apr 02 2020 at 11:52)</a>:</h4>
<p>But what would happen if Scott made his construction noncomputable?</p>



<a name="192653301"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/option%20is%20a%20monad/near/192653301" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/option.20is.20a.20monad.html#192653301">(Apr 02 2020 at 11:52)</a>:</h4>
<p>you can have a function, but only one. two is too many</p>



<a name="192653384"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/option%20is%20a%20monad/near/192653384" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/option.20is.20a.20monad.html#192653384">(Apr 02 2020 at 11:52)</a>:</h4>
<p>That said, <code>category_theory.monad.types</code> has very little impact if any on the lean programmer</p>



<a name="192653398"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/option%20is%20a%20monad/near/192653398" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/option.20is.20a.20monad.html#192653398">(Apr 02 2020 at 11:53)</a>:</h4>
<p><code>monad Option</code> is not even the same monad as <code>monad option</code></p>



<a name="192653422"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/option%20is%20a%20monad/near/192653422" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/option.20is.20a.20monad.html#192653422">(Apr 02 2020 at 11:53)</a>:</h4>
<p>because we don't use <code>category_theory.monad</code> for any of that</p>



<a name="192653428"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/option%20is%20a%20monad/near/192653428" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/option.20is.20a.20monad.html#192653428">(Apr 02 2020 at 11:53)</a>:</h4>
<p>Hence the two Wikipedia pages I guess</p>



<a name="192653535"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/option%20is%20a%20monad/near/192653535" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/option.20is.20a.20monad.html#192653535">(Apr 02 2020 at 11:54)</a>:</h4>
<p>Also, it should be noted that it is not an exact match (between Leo's monad and Scott's monad in the category of types) because of universe issues</p>



<a name="192653588"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/option%20is%20a%20monad/near/192653588" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/option.20is.20a.20monad.html#192653588">(Apr 02 2020 at 11:54)</a>:</h4>
<p>Leo's monad has two universe parameters, Scott's has one</p>



<a name="192653616"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/option%20is%20a%20monad/near/192653616" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/option.20is.20a.20monad.html#192653616">(Apr 02 2020 at 11:55)</a>:</h4>
<p>I don't care, I'm into ZFC</p>



<a name="192653643"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/option%20is%20a%20monad/near/192653643" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/option.20is.20a.20monad.html#192653643">(Apr 02 2020 at 11:55)</a>:</h4>
<p>I know my small category from my large category</p>



<a name="192653676"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/option%20is%20a%20monad/near/192653676" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/option.20is.20a.20monad.html#192653676">(Apr 02 2020 at 11:55)</a>:</h4>
<p>It matters here for more than size reasons</p>



<a name="192653698"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/option%20is%20a%20monad/near/192653698" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/option.20is.20a.20monad.html#192653698">(Apr 02 2020 at 11:55)</a>:</h4>
<p>it's the difference between asking for a function <code>f : X -&gt; Y</code> and <code>f : X -&gt; X</code></p>



<a name="192653773"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/option%20is%20a%20monad/near/192653773" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/option.20is.20a.20monad.html#192653773">(Apr 02 2020 at 11:56)</a>:</h4>
<p>Yes but the generic mathematician chooses to ignore these foundational issues</p>



<a name="192653790"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/option%20is%20a%20monad/near/192653790" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/option.20is.20a.20monad.html#192653790">(Apr 02 2020 at 11:56)</a>:</h4>
<p>We work in Type in Type.</p>



<a name="192653795"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/option%20is%20a%20monad/near/192653795" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/option.20is.20a.20monad.html#192653795">(Apr 02 2020 at 11:56)</a>:</h4>
<p>I'm saying it's more than that</p>



<a name="192653838"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/option%20is%20a%20monad/near/192653838" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/option.20is.20a.20monad.html#192653838">(Apr 02 2020 at 11:56)</a>:</h4>
<p>We're careful not to press the bad self-destruct button in Type-in-Type.</p>



<a name="192653849"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/option%20is%20a%20monad/near/192653849" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/option.20is.20a.20monad.html#192653849">(Apr 02 2020 at 11:56)</a>:</h4>
<p>Leo's monads literally contain objects that are not monads in Scott's sense because they don't have a multiplication</p>



<a name="192653898"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/option%20is%20a%20monad/near/192653898" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/option.20is.20a.20monad.html#192653898">(Apr 02 2020 at 11:57)</a>:</h4>
<p>they have a <code>bind</code> operator but not a <code>join</code></p>



<a name="192653905"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/option%20is%20a%20monad/near/192653905" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/option.20is.20a.20monad.html#192653905">(Apr 02 2020 at 11:57)</a>:</h4>
<p>Oh you're just saying that Johannes proved something about lawful monads?</p>



<a name="192653945"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/option%20is%20a%20monad/near/192653945" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/option.20is.20a.20monad.html#192653945">(Apr 02 2020 at 11:57)</a>:</h4>
<p>which one are we talking about now?</p>



<a name="192654063"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/option%20is%20a%20monad/near/192654063" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/option.20is.20a.20monad.html#192654063">(Apr 02 2020 at 11:58)</a>:</h4>
<p><code>monad</code> is a predicate on functions <code>F : Type u -&gt; Type v</code>. Crucially, unlike the category theory monad situation, you cannot iterate <code>F</code></p>



<a name="192654075"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/option%20is%20a%20monad/near/192654075" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/option.20is.20a.20monad.html#192654075">(Apr 02 2020 at 11:58)</a>:</h4>
<p>So monads are like topoi, the word is used by different people to mean literally different things?</p>



<a name="192654109"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/option%20is%20a%20monad/near/192654109" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/option.20is.20a.20monad.html#192654109">(Apr 02 2020 at 11:59)</a>:</h4>
<p>The definition of category theory monad uses a function <code>mu : F (F X) -&gt; F X</code> which doesn't typecheck</p>



<a name="192654137"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/option%20is%20a%20monad/near/192654137" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/option.20is.20a.20monad.html#192654137">(Apr 02 2020 at 11:59)</a>:</h4>
<p>(<code>mu</code> is also called <code>join</code> in the haskell tradition)</p>



<a name="192654292"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/option%20is%20a%20monad/near/192654292" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/option.20is.20a.20monad.html#192654292">(Apr 02 2020 at 12:00)</a>:</h4>
<p>Instead, the "multiplication operator" is written in a sort of continuation passing style, <code>bind : F A -&gt; (A -&gt; F B) -&gt; F B</code>, which doesn't require iterating <code>F</code></p>



<a name="192654492"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/option%20is%20a%20monad/near/192654492" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/option.20is.20a.20monad.html#192654492">(Apr 02 2020 at 12:02)</a>:</h4>
<p>The proof that <code>bind</code> and <code>join</code> are equivalent defines <code>join x = bind x id</code> but <code>id</code> doesn't typecheck here because one side is in <code>Type u</code> and the other is in <code>Type v</code></p>



<a name="192655049"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/option%20is%20a%20monad/near/192655049" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/option.20is.20a.20monad.html#192655049">(Apr 02 2020 at 12:07)</a>:</h4>
<p>I'm not sure how you could capture this in a category theory setting, since it is like you have two categories and some of the arrows in the diagram are spanning both categories</p>



<a name="192655389"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/option%20is%20a%20monad/near/192655389" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/option.20is.20a.20monad.html#192655389">(Apr 02 2020 at 12:11)</a>:</h4>
<p>Perhaps you could go for <code>Kleisli (F : Type u -&gt; Type v) := {obj := Type u, hom := \lam A B, A -&gt; F B}</code> with bind as composition</p>



<a name="192655528"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/option%20is%20a%20monad/near/192655528" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/option.20is.20a.20monad.html#192655528">(Apr 02 2020 at 12:12)</a>:</h4>
<p>and the statement that <code>F</code> is a lawful monad is the same as the claim that this forms a category</p>



<a name="192665210"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/option%20is%20a%20monad/near/192665210" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/option.20is.20a.20monad.html#192665210">(Apr 02 2020 at 13:31)</a>:</h4>
<p>Do we know of any monad that intrinsically change universe? (i.e. where you can only define with v \ne u)</p>



<a name="192666375"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/option%20is%20a%20monad/near/192666375" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/option.20is.20a.20monad.html#192666375">(Apr 02 2020 at 13:40)</a>:</h4>
<p>There was a time when <code>io</code> was a universe changing monad, although right now that's not necessary because it is implemented with meta constants</p>



<a name="192666543"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/option%20is%20a%20monad/near/192666543" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/option.20is.20a.20monad.html#192666543">(Apr 02 2020 at 13:42)</a>:</h4>
<p>there is a way to make the collection of all <code>monad_io</code>'s a universe changing monad</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>