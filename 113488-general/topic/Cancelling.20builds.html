---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/Cancelling.20builds.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Cancelling.20builds.html">Cancelling builds</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="220094463"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Cancelling%20builds/near/220094463" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Cancelling.20builds.html#220094463">(Dec 16 2020 at 09:39)</a>:</h4>
<p>(deleted)</p>



<a name="220094480"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Cancelling%20builds/near/220094480" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Cancelling.20builds.html#220094480">(Dec 16 2020 at 09:39)</a>:</h4>
<p>(deleted)</p>



<a name="220095058"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Cancelling%20builds/near/220095058" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Cancelling.20builds.html#220095058">(Dec 16 2020 at 09:46)</a>:</h4>
<p>Sometimes when I'm working on a PR, I push up a commit that I know I will shortly follow with some other(s). In these cases I tend to cancel the CI jobs for the commit because it seems rather wasteful to kick off redundant hours of CPU time, and possibly, might generate queueing for others.</p>



<a name="220095127"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Cancelling%20builds/near/220095127" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Cancelling.20builds.html#220095127">(Dec 16 2020 at 09:47)</a>:</h4>
<p>My questions are:</p>
<ol>
<li>Does this actually help in any meaningful way?</li>
<li>If the answer to the above is yes, could/should we have a new commit to a branch automatically cancel the CI work for any previous commits?</li>
</ol>



<a name="220096538"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Cancelling%20builds/near/220096538" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Cancelling.20builds.html#220096538">(Dec 16 2020 at 10:01)</a>:</h4>
<p>How do you cancel CI? I've done this on several occasions in the past -- I push something and I think "I'm done" and then look through it and think "oops no I forgot a full stop in a docstring" so push something else 10 seconds later</p>



<a name="220096651"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Cancelling%20builds/near/220096651" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Cancelling.20builds.html#220096651">(Dec 16 2020 at 10:02)</a>:</h4>
<p>There is a cancel button on the top right of pages like: <a href="https://github.com/leanprover-community/mathlib/runs/1562693851">https://github.com/leanprover-community/mathlib/runs/1562693851</a></p>



<a name="220096843"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Cancelling%20builds/near/220096843" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Cancelling.20builds.html#220096843">(Dec 16 2020 at 10:04)</a>:</h4>
<p>I don't think the button does much, from my experience</p>



<a name="220097064"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Cancelling%20builds/near/220097064" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Cancelling.20builds.html#220097064">(Dec 16 2020 at 10:06)</a>:</h4>
<p>Works for me, I just restarted and then cancelled a job of mine that failed yesterday to test, <a href="https://github.com/leanprover-community/mathlib/runs/1562938073">https://github.com/leanprover-community/mathlib/runs/1562938073</a></p>



<a name="220099132"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Cancelling%20builds/near/220099132" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Cancelling.20builds.html#220099132">(Dec 16 2020 at 10:28)</a>:</h4>
<p><a href="https://github.community/t/github-actions-cancel-redundant-builds-not-solved/16025">https://github.community/t/github-actions-cancel-redundant-builds-not-solved/16025</a> is one way to do point 2</p>



<a name="220099310"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Cancelling%20builds/near/220099310" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Cancelling.20builds.html#220099310">(Dec 16 2020 at 10:30)</a>:</h4>
<p>Although if I've waited an hour and a half for a build, then spot a doc typo, usually I want the build to complete so that I at least have a cache to work off, in parallel to the updated version re-building for integration into mathlib</p>



<a name="220099611"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Cancelling%20builds/near/220099611" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Cancelling.20builds.html#220099611">(Dec 16 2020 at 10:34)</a>:</h4>
<p><span class="user-mention silent" data-user-id="127136">Alex J. Best</span> <a href="#narrow/stream/113488-general/topic/Cancelling.20builds/near/220097064">said</a>:</p>
<blockquote>
<p>Works for me, I just restarted and then cancelled a job of mine that failed yesterday to test, <a href="https://github.com/leanprover-community/mathlib/runs/1562938073">https://github.com/leanprover-community/mathlib/runs/1562938073</a></p>
</blockquote>
<p>are you a mod?</p>



<a name="220099648"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Cancelling%20builds/near/220099648" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Cancelling.20builds.html#220099648">(Dec 16 2020 at 10:34)</a>:</h4>
<p>Works for me too: <a href="https://github.com/leanprover-community/mathlib/runs/1563081307">https://github.com/leanprover-community/mathlib/runs/1563081307</a></p>



<a name="220099655"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Cancelling%20builds/near/220099655" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Cancelling.20builds.html#220099655">(Dec 16 2020 at 10:34)</a>:</h4>
<p>Nope I'm not a maintainer or anything</p>



<a name="220099659"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Cancelling%20builds/near/220099659" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Cancelling.20builds.html#220099659">(Dec 16 2020 at 10:34)</a>:</h4>
<p>nvm it worked for me but not immediately</p>



<a name="220270907"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Cancelling%20builds/near/220270907" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Lacker <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Cancelling.20builds.html#220270907">(Dec 17 2020 at 17:03)</a>:</h4>
<p>it's helpful in general to have CI run for old commits, because if there's a bug you can use the CI history to track down where you introduced it. so I would suggest leaving the behavior like it is, if we have enough CI capacity. if you know you're not going to need it then it's fine to cancel it</p>



<a name="220272080"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Cancelling%20builds/near/220272080" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Cancelling.20builds.html#220272080">(Dec 17 2020 at 17:12)</a>:</h4>
<p>One thing that I sometimes find confusing is when I push a commit, then notice a stupid typo and push a fix, and then three hours later github informs me that I broke something, and I think my fix didn't work, but no, it just is reporting on the earlier commit</p>



<a name="220273728"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Cancelling%20builds/near/220273728" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastian Ullrich <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Cancelling.20builds.html#220273728">(Dec 17 2020 at 17:23)</a>:</h4>
<p>So next time you explicitly cancel the build and then Github thinks it would be a great idea to send you an email about your having cancelled the build <span aria-label="dizzy" class="emoji emoji-1f635" role="img" title="dizzy">:dizzy:</span></p>



<a name="220274646"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Cancelling%20builds/near/220274646" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Cancelling.20builds.html#220274646">(Dec 17 2020 at 17:29)</a>:</h4>
<p>Thanks for all the answers. Sounds like we should leave things as they are. I'm a bit amazed that CPU time is so cheap. Shows what I know!</p>



<a name="220276978"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Cancelling%20builds/near/220276978" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Cancelling.20builds.html#220276978">(Dec 17 2020 at 17:45)</a>:</h4>
<p>I've wondered how Github justifies all the services they offer for free. I guess it's PR/advertising. We're just a drop in the bucket of open source projects and we still use a huge amount of resources. Huge in that we couldn't pay for them at market price.</p>



<a name="220277096"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Cancelling%20builds/near/220277096" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Cancelling.20builds.html#220277096">(Dec 17 2020 at 17:46)</a>:</h4>
<p>At one point the Zulip archive script was using like 100gb of bandwidth a day. That's a Github action cloning a repo from Github.</p>



<a name="220277511"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Cancelling%20builds/near/220277511" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Lacker <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Cancelling.20builds.html#220277511">(Dec 17 2020 at 17:49)</a>:</h4>
<p>the main value of github overall, to microsoft, is not even to make money directly, but as a part of microsoft's larger set of developer products, and all the azure services. 100gb of bandwidth a day is not too much - their cost of supporting any single open source project is probably dwarfed by the cost of a single full time microsoft employee</p>



<a name="220277746"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Cancelling%20builds/near/220277746" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Lacker <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Cancelling.20builds.html#220277746">(Dec 17 2020 at 17:50)</a>:</h4>
<p>if you're curious about the business models behind software industry things like this i recommend reading stratechery - for example this on the github acquisition <a href="https://stratechery.com/2018/the-cost-of-developers/">https://stratechery.com/2018/the-cost-of-developers/</a></p>



<a name="220278264"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Cancelling%20builds/near/220278264" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Lacker <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Cancelling.20builds.html#220278264">(Dec 17 2020 at 17:54)</a>:</h4>
<p>providing open source CI is probably a cost-effective way to get developers familiar with using azure</p>



<a name="224777108"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Cancelling%20builds/near/224777108" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Cancelling.20builds.html#224777108">(Feb 01 2021 at 19:19)</a>:</h4>
<p>cc: <span class="user-mention" data-user-id="315523">@Colter MacDonald</span> (for future reference)</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>