---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/counting.20function.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/counting.20function.html">counting function</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="259199813"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/counting%20function/near/259199813" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Vladimir Goryachev <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/counting.20function.html#259199813">(Oct 27 2021 at 07:03)</a>:</h4>
<p><span class="user-mention" data-user-id="310045">@Eric Wieser</span> You have suggested renaming Inf_plus into Inf_add. What is your reasoning behind it?</p>



<a name="259200409"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/counting%20function/near/259200409" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/counting.20function.html#259200409">(Oct 27 2021 at 07:11)</a>:</h4>
<p>Uniformity with the rest of the library. It may be worth reading <a href="https://leanprover-community.github.io/contribute/naming.html">#naming</a>.</p>



<a name="259200965"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/counting%20function/near/259200965" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Vladimir Goryachev <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/counting.20function.html#259200965">(Oct 27 2021 at 07:19)</a>:</h4>
<p>Thanks, such a file was what I was looking for!</p>



<a name="259201929"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/counting%20function/near/259201929" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Vladimir Goryachev <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/counting.20function.html#259201929">(Oct 27 2021 at 07:31)</a>:</h4>
<p>Meanwhile, I have created a PR <a href="https://github.com/leanprover-community/mathlib/issues/10001">#10001</a> where I add two lemmas proved by refl to data/nat/basic</p>



<a name="259202119"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/counting%20function/near/259202119" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Vladimir Goryachev <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/counting.20function.html#259202119">(Oct 27 2021 at 07:33)</a>:</h4>
<p>(By the way, maybe we should move this conversation to general? It seems have grown out of scope of "Is there code for X" quite a while ago)</p>



<a name="259205141"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/counting%20function/near/259205141" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Vladimir Goryachev <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/counting.20function.html#259205141">(Oct 27 2021 at 08:10)</a>:</h4>
<p>I think I'll wait for <a href="https://github.com/leanprover-community/mathlib/issues/10001">#10001</a> to be accepted before making a PR about Inf_add.</p>



<a name="259208768"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/counting%20function/near/259208768" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Vladimir Goryachev <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/counting.20function.html#259208768">(Oct 27 2021 at 08:47)</a>:</h4>
<p>Next, I am looking into redefining of <code>order_embedding_of_set</code> and <code>order_iso_of_nat</code> in terms of <code>nth</code>. Currently, we have the proof that <code>nth</code> is the same as <code>order_iso_of_nat</code>. If we change the definition of <code>order_iso_of_nat</code> to be just <code>nth</code>, this prove would become the proof of the fact that <code>order_iso_of_nat</code> equals some scary arcane expression (which is currently the definition):</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">rel_iso.of_surjective</span> <span class="o">(</span><span class="n">rel_embedding.order_embedding_of_lt_embedding</span>
  <span class="o">(</span><span class="n">rel_embedding.nat_lt</span> <span class="o">(</span><span class="n">nat.subtype.of_nat</span> <span class="n">s</span><span class="o">)</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">n</span><span class="o">,</span> <span class="n">nat.subtype.lt_succ_self</span> <span class="n">_</span><span class="o">)))</span>
  <span class="n">nat.subtype.of_nat_surjective</span>
</code></pre></div>
<p>Do we want to have such a characterisation? Would it be useful for anything? Or was it used simply because there was nothing better to write instead?</p>



<a name="259292040"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/counting%20function/near/259292040" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Vladimir Goryachev <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/counting.20function.html#259292040">(Oct 27 2021 at 19:14)</a>:</h4>
<p><span class="user-mention silent" data-user-id="409003">Vladimir Goryachev</span> <a href="#narrow/stream/113488-general/topic/counting.20function/near/259205141">said</a>:</p>
<blockquote>
<p>I think I'll wait for <a href="https://github.com/leanprover-community/mathlib/issues/10001">#10001</a> to be accepted before making a PR about Inf_add.</p>
</blockquote>
<p>Yay, my first PR merged, even if a trivial one : )</p>
<p>I have made <a href="https://github.com/leanprover-community/mathlib/issues/10008">#10008</a></p>



<a name="259292854"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/counting%20function/near/259292854" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/counting.20function.html#259292854">(Oct 27 2021 at 19:20)</a>:</h4>
<p>I felt just the same when my first PR, defining the complex numbers and proving they were a ring, was accepted :-)</p>



<a name="259294667"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/counting%20function/near/259294667" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/counting.20function.html#259294667">(Oct 27 2021 at 19:35)</a>:</h4>
<p>My very first PR was swapping two arguments on an obscure lemma for dot notation to work</p>



<a name="259296061"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/counting%20function/near/259296061" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Vladimir Goryachev <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/counting.20function.html#259296061">(Oct 27 2021 at 19:45)</a>:</h4>
<p>Ah, I have found the file, it is actually <code>data/equiv/denumerable</code>.</p>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> , in this thread we have defined functions <code>nth</code> and <code>count</code>, same as your <code>of_nat</code> and <code>to_fun_aux</code> of <code>data/equiv/denumerable</code> (I could not find the functionality when I asked for it in the "Is there code for X" channel). However, here we have developed some of the basic results further, including counting elements of finite subsets of N. Could you please give your opinion on how we should integrate the things we have defined and proved into what you have defined and proved earlier? Thank you for your attention.</p>



<a name="259296660"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/counting%20function/near/259296660" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/counting.20function.html#259296660">(Oct 27 2021 at 19:50)</a>:</h4>
<p>The content of this thread is not quite the same as what <code>denumerable</code> does. <code>denumerable</code> is about coming up with some mapping to/from <code>nat</code>, but it is not an increasing function (necessarily), and indeed in most applications there is no notion of increasing since the source type has no ordering (besides the one it inherits from the bijection to <code>nat</code>). The <code>nth</code> and <code>count</code> functions are useful but probably wouldn't fit as a sub-part or application of <code>denumerable</code>. I think you should just make a new file <code>data.nat.nth</code> about this function.</p>



<a name="259296947"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/counting%20function/near/259296947" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/counting.20function.html#259296947">(Oct 27 2021 at 19:52)</a>:</h4>
<p>Oh, I see now what you mean about <code>to_fun_aux</code>. I guess the <code>denumerable</code> implementation for infinite sets is the same as your function</p>



<a name="259297184"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/counting%20function/near/259297184" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/counting.20function.html#259297184">(Oct 27 2021 at 19:54)</a>:</h4>
<p>I totally forgot that existed</p>



<a name="259297274"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/counting%20function/near/259297274" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Vladimir Goryachev <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/counting.20function.html#259297274">(Oct 27 2021 at 19:55)</a>:</h4>
<p>Yes, so in the comments to the PR it was advised to not have two distinct definitions implementing the same thing.</p>



<a name="259297313"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/counting%20function/near/259297313" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/counting.20function.html#259297313">(Oct 27 2021 at 19:55)</a>:</h4>
<p>The usual solution to that is to either relate them or use one in place of the other</p>



<a name="259297363"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/counting%20function/near/259297363" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/counting.20function.html#259297363">(Oct 27 2021 at 19:55)</a>:</h4>
<p>and prove the theorems in the union of both developments</p>



<a name="259299058"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/counting%20function/near/259299058" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Vladimir Goryachev <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/counting.20function.html#259299058">(Oct 27 2021 at 20:07)</a>:</h4>
<p>Do you have any opinion on whether should <code>of_nat</code> be redefined on terms of <code>nth</code> or vice versa?</p>



<a name="259300398"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/counting%20function/near/259300398" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/counting.20function.html#259300398">(Oct 27 2021 at 20:18)</a>:</h4>
<p>assuming you have looked at the proof of <code>of_nat</code> and mined the ideas from it, I think denumerable could just be referencing your version. I'm fairly sure that no one is using the denumerable instance for infinite sets, it was just proven to show that it's true</p>



<a name="259300714"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/counting%20function/near/259300714" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Vladimir Goryachev <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/counting.20function.html#259300714">(Oct 27 2021 at 20:20)</a>:</h4>
<p>Thank you! Then, I guess, I'll try to redefine <code>of_nat</code> in terms of <code>nth</code>.</p>



<a name="259302067"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/counting%20function/near/259302067" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Vladimir Goryachev <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/counting.20function.html#259302067">(Oct 27 2021 at 20:31)</a>:</h4>
<p>Well, I try to import count into denumerable, and I get an import cycle <code>data.nat.count &lt; set_theory.fincard &lt; set_theory.cardinal &lt; data.set.countable &lt; data.equiv.list &lt; data.equiv.denumerable &lt; data.nat. count</code>. Wow.</p>



<a name="259304437"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/counting%20function/near/259304437" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/counting.20function.html#259304437">(Oct 27 2021 at 20:51)</a>:</h4>
<p>why is <code>fincard</code> in the file?</p>



<a name="259310275"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/counting%20function/near/259310275" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/counting.20function.html#259310275">(Oct 27 2021 at 21:36)</a>:</h4>
<p>It's used to state lemmas for finite and infinite sets simultaneously by looking at its cardinal. I strongly voted against those because it's either finite or infinite here and nobody uses cardinals anyway.</p>



<a name="259345813"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/counting%20function/near/259345813" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Vladimir Goryachev <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/counting.20function.html#259345813">(Oct 28 2021 at 06:37)</a>:</h4>
<p>I'd side with Yaёl here. I think the cardinal lemmas didn't quite fit: set-theoretic cardinals should come after describing how to count, not in the same file. This was okay as it did not break anything, but now I think it is a legitimate reason to remove them. My default action would be to delete the lemmas, but anyone is free to move them to separate file like nat/count_cardinal or something.</p>
<p>But that would all come a bit further, as now I'd be focused at PR-ing simple lemmas which precede the count lemmas itself.</p>



<a name="259492056"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/counting%20function/near/259492056" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Vladimir Goryachev <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/counting.20function.html#259492056">(Oct 29 2021 at 07:44)</a>:</h4>
<p>For PR <a href="https://github.com/leanprover-community/mathlib/issues/10008">#10008</a>, I was advised to make some changes, and made them now. Is it true that to ask for a review again, I simply need to add "awaiting review" label, and it will get reviewed (at some point)?</p>



<a name="259492132"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/counting%20function/near/259492132" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ruben Van de Velde <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/counting.20function.html#259492132">(Oct 29 2021 at 07:45)</a>:</h4>
<p>Yep</p>



<a name="259492215"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/counting%20function/near/259492215" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Vladimir Goryachev <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/counting.20function.html#259492215">(Oct 29 2021 at 07:46)</a>:</h4>
<p>Thanks!</p>



<a name="259493157"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/counting%20function/near/259493157" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/counting.20function.html#259493157">(Oct 29 2021 at 07:58)</a>:</h4>
<p><span class="user-mention" data-user-id="409003">@Vladimir Goryachev</span> If you make sure your PR ends up on <a href="https://bit.ly/3zVLgqR">#queue</a> than it has a very high chance of getting reviewed (-;<br>
That list is made up of PRs that have the <code>awaiting review</code> label, are not blocked by other PRs, don't have merge conflicts, are not waiting for a CI run, etc... (see the filters at the top of the list).</p>



<a name="259493472"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/counting%20function/near/259493472" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/counting.20function.html#259493472">(Oct 29 2021 at 08:01)</a>:</h4>
<p>I left a few more stylistic comments.</p>



<a name="259503738"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/counting%20function/near/259503738" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Vladimir Goryachev <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/counting.20function.html#259503738">(Oct 29 2021 at 09:58)</a>:</h4>
<p>Thanks, changes pushed!<br>
I hope to get used to placing spaces before colons soon, it just felt weird, kind of like placing spaces before commas : )</p>



<a name="260664311"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/counting%20function/near/260664311" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Vladimir Goryachev <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/counting.20function.html#260664311">(Nov 08 2021 at 14:34)</a>:</h4>
<p><span class="user-mention" data-user-id="387244">@Yaël Dillies</span> , I am trying to implement the changes you propose for the Inf_add lemma, but Lean says that it does not know what is <code>le_cInf</code> in the proof of Inf_add'. How do I fix this?</p>



<a name="260664436"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/counting%20function/near/260664436" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/counting.20function.html#260664436">(Nov 08 2021 at 14:35)</a>:</h4>
<p>That's weird... Try to see whether you indeed import <code>order.conditionally_complete_lattice</code> because that's where it is: <a href="https://leanprover-community.github.io/mathlib_docs/order/conditionally_complete_lattice.html#le_cInf">https://leanprover-community.github.io/mathlib_docs/order/conditionally_complete_lattice.html#le_cInf</a></p>



<a name="260665274"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/counting%20function/near/260665274" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Vladimir Goryachev <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/counting.20function.html#260665274">(Nov 08 2021 at 14:42)</a>:</h4>
<p>Ah, sorry, it actually knows what it is, it has some other problem...</p>



<a name="260665663"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/counting%20function/near/260665663" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Vladimir Goryachev <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/counting.20function.html#260665663">(Nov 08 2021 at 14:45)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">type</span> <span class="n">mismatch</span><span class="o">,</span> <span class="n">term</span>
    <span class="n">le_of_not_lt</span> <span class="bp">?</span><span class="n">m_5</span>
  <span class="n">has</span> <span class="n">type</span>
    <span class="bp">?</span><span class="n">m_3</span> <span class="bp">≤</span> <span class="bp">?</span><span class="n">m_4</span>
  <span class="n">but</span> <span class="n">is</span> <span class="n">expected</span> <span class="n">to</span> <span class="k">have</span> <span class="n">type</span>
    <span class="bp">?</span><span class="n">m_2</span> <span class="bp">≤</span> <span class="n">b</span>
</code></pre></div>
<p>and</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">type</span> <span class="n">mismatch</span><span class="o">,</span> <span class="n">term</span>
    <span class="n">le_cInf</span> <span class="bp">?</span><span class="n">m_5</span> <span class="bp">?</span><span class="n">m_6</span>
  <span class="n">has</span> <span class="n">type</span>
    <span class="bp">?</span><span class="n">m_3</span> <span class="bp">≤</span> <span class="n">Inf</span> <span class="bp">?</span><span class="n">m_4</span>
  <span class="n">but</span> <span class="n">is</span> <span class="n">expected</span> <span class="n">to</span> <span class="k">have</span> <span class="n">type</span>
    <span class="n">n</span> <span class="bp">≤</span> <span class="n">Inf</span> <span class="o">{</span><span class="n">m</span> <span class="o">:</span> <span class="n">ℕ</span> <span class="bp">|</span> <span class="n">p</span> <span class="o">(</span><span class="n">m</span> <span class="bp">-</span> <span class="n">n</span><span class="o">)}</span>
</code></pre></div>



<a name="260665855"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/counting%20function/near/260665855" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/counting.20function.html#260665855">(Nov 08 2021 at 14:46)</a>:</h4>
<p>And that's what you get with my suggestion and no other modification?</p>



<a name="260666005"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/counting%20function/near/260666005" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Vladimir Goryachev <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/counting.20function.html#260666005">(Nov 08 2021 at 14:47)</a>:</h4>
<p>Let me recheck it quickly</p>



<a name="260667445"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/counting%20function/near/260667445" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Vladimir Goryachev <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/counting.20function.html#260667445">(Nov 08 2021 at 14:56)</a>:</h4>
<p>Yes, if I do no other modification and paste your code into nat/lattice, deleting my previous proofs of Inf_add and Inf_add', I get this error messages.</p>



<a name="260667837"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/counting%20function/near/260667837" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Vladimir Goryachev <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/counting.20function.html#260667837">(Nov 08 2021 at 14:58)</a>:</h4>
<p>I think I see what the second error message is saying though - it is expected to say something about nat.Inf, but the lemma speaks about general Inf instead. I have had this appearing before, and had to type nat.Inf in proofs manually. Here, however, there is no nat version of le_cInf, and I can not do that.</p>



<a name="260668634"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/counting%20function/near/260668634" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/counting.20function.html#260668634">(Nov 08 2021 at 15:03)</a>:</h4>
<p><code>nat.Inf</code> <strong>is</strong> a <code>cInf</code> (through <a href="https://leanprover-community.github.io/mathlib_docs/find/nat.conditionally_complete_linear_order_bot">docs#nat.conditionally_complete_linear_order_bot</a>)</p>



<a name="260669278"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/counting%20function/near/260669278" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Vladimir Goryachev <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/counting.20function.html#260669278">(Nov 08 2021 at 15:08)</a>:</h4>
<p>Well, I don't know, it was just a hypothesis for what's wrong...</p>



<a name="260669948"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/counting%20function/near/260669948" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Vladimir Goryachev <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/counting.20function.html#260669948">(Nov 08 2021 at 15:13)</a>:</h4>
<p>If I place <code>apply le_cInf</code> before this <code>refine</code>, the error message is just</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">invalid</span> <span class="n">apply</span> <span class="n">tactic</span><span class="o">,</span> <span class="n">failed</span> <span class="n">to</span> <span class="n">unify</span>
  <span class="n">n</span> <span class="bp">≤</span> <span class="n">Inf</span> <span class="o">{</span><span class="n">m</span> <span class="o">:</span> <span class="n">ℕ</span> <span class="bp">|</span> <span class="n">p</span> <span class="o">(</span><span class="n">m</span> <span class="bp">-</span> <span class="n">n</span><span class="o">)}</span>
<span class="k">with</span>
  <span class="bp">?</span><span class="n">m_3</span> <span class="bp">≤</span> <span class="n">Inf</span> <span class="bp">?</span><span class="n">m_4</span>
</code></pre></div>



<a name="260670811"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/counting%20function/near/260670811" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Vladimir Goryachev <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/counting.20function.html#260670811">(Nov 08 2021 at 15:19)</a>:</h4>
<p>The proof works on your computer though, right?</p>



<a name="260671496"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/counting%20function/near/260671496" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/counting.20function.html#260671496">(Nov 08 2021 at 15:24)</a>:</h4>
<p>It worked on Gitpod.</p>



<a name="260671954"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/counting%20function/near/260671954" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Vladimir Goryachev <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/counting.20function.html#260671954">(Nov 08 2021 at 15:27)</a>:</h4>
<p>Okay... Should I just press "commit suggestion" in github, and see if it compiles there?</p>



<a name="260672127"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/counting%20function/near/260672127" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/counting.20function.html#260672127">(Nov 08 2021 at 15:28)</a>:</h4>
<p>Yeah, probably</p>



<a name="260672144"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/counting%20function/near/260672144" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/counting.20function.html#260672144">(Nov 08 2021 at 15:28)</a>:</h4>
<p>If it fails, I'll fix it.</p>



<a name="260672291"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/counting%20function/near/260672291" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Vladimir Goryachev <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/counting.20function.html#260672291">(Nov 08 2021 at 15:29)</a>:</h4>
<p>Thank you. Done!</p>



<a name="260672466"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/counting%20function/near/260672466" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/counting.20function.html#260672466">(Nov 08 2021 at 15:30)</a>:</h4>
<p>ALso, I can PR the few <code>nat.find</code> lemmas I came up with separately if you want.</p>



<a name="260672602"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/counting%20function/near/260672602" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Vladimir Goryachev <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/counting.20function.html#260672602">(Nov 08 2021 at 15:31)</a>:</h4>
<p>I am fine both ways here.</p>



<a name="260765384"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/counting%20function/near/260765384" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Vladimir Goryachev <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/counting.20function.html#260765384">(Nov 09 2021 at 08:10)</a>:</h4>
<p><span class="user-mention" data-user-id="387244">@Yaël Dillies</span> , it did not compile on the server, got the error message I was speaking about.</p>



<a name="260765400"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/counting%20function/near/260765400" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/counting.20function.html#260765400">(Nov 09 2021 at 08:11)</a>:</h4>
<p>Will look into that</p>



<a name="260841198"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/counting%20function/near/260841198" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Vladimir Goryachev <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/counting.20function.html#260841198">(Nov 09 2021 at 18:41)</a>:</h4>
<p>I also have a question about the lemma <code>list.range_add</code>. It is stated about list.range, but the list.range file prompts to do any math about ranges with list.Ico instead. So, shouldn't this lemma be stated about Ico instead, as well as the lemmas <code>multiset.range_add</code>and <code>finset.range_add</code>?</p>



<a name="261006628"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/counting%20function/near/261006628" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Vladimir Goryachev <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/counting.20function.html#261006628">(Nov 10 2021 at 15:34)</a>:</h4>
<p>So anyway, I have changed the coed for Inf_add' into something that compiles.</p>



<a name="261006805"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/counting%20function/near/261006805" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Vladimir Goryachev <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/counting.20function.html#261006805">(Nov 10 2021 at 15:35)</a>:</h4>
<p>I have another question. How do I change a name of a lemma in mathlib in a way that changes the name everywhere where it is used?</p>



<a name="261007132"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/counting%20function/near/261007132" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/counting.20function.html#261007132">(Nov 10 2021 at 15:37)</a>:</h4>
<p>egergious use of ctrl+f :) ctrl+shift+f usually works in vscode</p>



<a name="261008066"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/counting%20function/near/261008066" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/counting.20function.html#261008066">(Nov 10 2021 at 15:44)</a>:</h4>
<p>Ah! I was fixing it just now!</p>



<a name="261008641"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/counting%20function/near/261008641" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Vladimir Goryachev <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/counting.20function.html#261008641">(Nov 10 2021 at 15:48)</a>:</h4>
<p>I would still be grateful for a more eloquent proof than mine : )</p>



<a name="261008720"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/counting%20function/near/261008720" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Vladimir Goryachev <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/counting.20function.html#261008720">(Nov 10 2021 at 15:49)</a>:</h4>
<p><span class="user-mention" data-user-id="284160">@Eric Rodriguez</span> Will it work for all of mathlib though, or for the current file only?</p>



<a name="261009334"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/counting%20function/near/261009334" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/counting.20function.html#261009334">(Nov 10 2021 at 15:53)</a>:</h4>
<p>The problem was just that the instance was defined below. I moved the lemma and now it's fine.</p>



<a name="261009920"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/counting%20function/near/261009920" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Vladimir Goryachev <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/counting.20function.html#261009920">(Nov 10 2021 at 15:56)</a>:</h4>
<p>I see! Thank you very much.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>