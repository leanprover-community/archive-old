---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/expression.20for.20undeclared.20declaration.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/expression.20for.20undeclared.20declaration.html">expression for undeclared declaration</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="197810429"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/expression%20for%20undeclared%20declaration/near/197810429" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/expression.20for.20undeclared.20declaration.html#197810429">(May 16 2020 at 19:16)</a>:</h4>
<div class="codehilite"><pre><span></span><code><span class="bp">#</span><span class="kn">check</span> <span class="bp">`</span><span class="o">[</span><span class="n">rw</span> <span class="n">foo</span><span class="o">]</span>
<span class="c">/-</span><span class="cm"></span>
<span class="cm">has_bind.seq (tactic.save_info {line := 102, column := 9})</span>
<span class="cm">  (tactic.step</span>
<span class="cm">     (tactic.interactive.rw</span>
<span class="cm">        {rules := [{pos := {line := 102, column := 12}, symm := ff, rule := ``(foo)}], end_pos := none pos}</span>
<span class="cm">        (interactive.loc.ns [none]))) :</span>
<span class="cm">  tactic unit</span>
<span class="cm">-/</span>

<span class="bp">#</span><span class="kn">check</span> <span class="bp">``</span><span class="o">(</span><span class="n">foo</span><span class="o">)</span> <span class="c1">-- unknown identifier &#39;foo&#39;</span>
</code></pre></div>



<a name="197810439"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/expression%20for%20undeclared%20declaration/near/197810439" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/expression.20for.20undeclared.20declaration.html#197810439">(May 16 2020 at 19:17)</a>:</h4>
<p>why can I have ``(foo) inside rewrite but not by itself?</p>



<a name="197810492"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/expression%20for%20undeclared%20declaration/near/197810492" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/expression.20for.20undeclared.20declaration.html#197810492">(May 16 2020 at 19:18)</a>:</h4>
<p>and what exactly does it do? I tried <code>pp.all</code> but it's still ``(foo)</p>



<a name="197810729"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/expression%20for%20undeclared%20declaration/near/197810729" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Keeley Hoek <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/expression.20for.20undeclared.20declaration.html#197810729">(May 16 2020 at 19:24)</a>:</h4>
<p>You <em>could</em> have <code>``(foo)</code> directly, but lean doesn't let you on purpose</p>



<a name="197810735"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/expression%20for%20undeclared%20declaration/near/197810735" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Keeley Hoek <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/expression.20for.20undeclared.20declaration.html#197810735">(May 16 2020 at 19:24)</a>:</h4>
<p>Someone just wrote code which checks this</p>



<a name="197810737"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/expression%20for%20undeclared%20declaration/near/197810737" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Keeley Hoek <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/expression.20for.20undeclared.20declaration.html#197810737">(May 16 2020 at 19:24)</a>:</h4>
<p>To catch mistakes</p>



<a name="197810761"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/expression%20for%20undeclared%20declaration/near/197810761" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Keeley Hoek <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/expression.20for.20undeclared.20declaration.html#197810761">(May 16 2020 at 19:25)</a>:</h4>
<p>And it is convenient when, while you're writing your tactic, to write  <code>``(foo)</code> and mean the <code>foo</code> which is currently in-scope, so lean secretly does the replacement <code>foo</code> -&gt; <code>my.namspace.foo</code></p>



<a name="197810883"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/expression%20for%20undeclared%20declaration/near/197810883" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Keeley Hoek <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/expression.20for.20undeclared.20declaration.html#197810883">(May 16 2020 at 19:28)</a>:</h4>
<p>See:</p>
<div class="codehilite"><pre><span></span><code><span class="kn">lemma</span> <span class="n">foo</span><span class="o">:</span> <span class="n">unit</span> <span class="o">:=</span> <span class="o">()</span>

<span class="n">run_cmd</span> <span class="o">(</span><span class="n">do</span> <span class="n">tactic</span><span class="bp">.</span><span class="n">trace</span> <span class="o">((</span><span class="bp">@</span><span class="n">expr</span><span class="bp">.</span><span class="n">const</span> <span class="n">ff</span> <span class="bp">`</span><span class="n">foo</span> <span class="o">[]))</span><span class="bp">.</span><span class="n">to_raw_fmt</span><span class="o">)</span>
<span class="n">run_cmd</span> <span class="o">(</span><span class="n">do</span> <span class="n">tactic</span><span class="bp">.</span><span class="n">trace</span> <span class="bp">``</span><span class="o">(</span><span class="n">foo</span><span class="o">)</span><span class="bp">.</span><span class="n">to_raw_fmt</span><span class="o">)</span>
</code></pre></div>



<a name="197810889"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/expression%20for%20undeclared%20declaration/near/197810889" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Keeley Hoek <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/expression.20for.20undeclared.20declaration.html#197810889">(May 16 2020 at 19:28)</a>:</h4>
<p>They print the same</p>



<a name="197811001"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/expression%20for%20undeclared%20declaration/near/197811001" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Keeley Hoek <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/expression.20for.20undeclared.20declaration.html#197811001">(May 16 2020 at 19:31)</a>:</h4>
<p>Without the <code>to_raw_fmt</code>s they print differently, but just because of secret macros wrapped around the latter (is my understanding)</p>



<a name="197812502"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/expression%20for%20undeclared%20declaration/near/197812502" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/expression.20for.20undeclared.20declaration.html#197812502">(May 16 2020 at 20:07)</a>:</h4>
<p>The actual equivalent is <code>```(foo)</code></p>



<a name="197812530"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/expression%20for%20undeclared%20declaration/near/197812530" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/expression.20for.20undeclared.20declaration.html#197812530">(May 16 2020 at 20:07)</a>:</h4>
<p>to do the same as <code>`[rw foo]</code> would be something like <code>to_expr ```(foo) &gt;&gt;= \lam h, rewrite_goal h</code></p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>