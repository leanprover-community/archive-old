---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/Dependency.20Graph.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Dependency.20Graph.html">Dependency Graph</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="221507188"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Dependency%20Graph/near/221507188" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Henning Dieterichs <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Dependency.20Graph.html#221507188">(Jan 04 2021 at 10:13)</a>:</h4>
<p>Is there a way to extract a dependency graph of all lemmas in some folder? (like this: <a href="https://leanprover-community.github.io/sphere-eversion/blueprint/dep_graph.html">https://leanprover-community.github.io/sphere-eversion/blueprint/dep_graph.html</a>) It should consider @[simp] lemmatas.<br>
Would love to integrate such a dependency graph into VS Code (like the info view) where you can click on lemmas to jump to their definition.</p>



<a name="221508572"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Dependency%20Graph/near/221508572" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Dependency.20Graph.html#221508572">(Jan 04 2021 at 10:31)</a>:</h4>
<p>Do you care about dependent tactics too?</p>



<a name="221508604"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Dependency%20Graph/near/221508604" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Dependency.20Graph.html#221508604">(Jan 04 2021 at 10:31)</a>:</h4>
<p>For lemmas, presumably you could "just" look at the term-mode proof for the lemma, and extract all the symbol names</p>



<a name="221508687"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Dependency%20Graph/near/221508687" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Dependency.20Graph.html#221508687">(Jan 04 2021 at 10:32)</a>:</h4>
<p>The sphere eversion dependency graph is not generated by Lean (it couldn't be since it most of the project is not yet in Lean). It's generated by plasTeX.</p>



<a name="221508746"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Dependency%20Graph/near/221508746" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Dependency.20Graph.html#221508746">(Jan 04 2021 at 10:33)</a>:</h4>
<p>What you want is closer to what leancrawler is doing. It generated the graph on the <a href="https://leanprover-community.github.io/lean-perfectoid-spaces/">perfectoid home page</a> for instance.</p>



<a name="221508990"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Dependency%20Graph/near/221508990" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Henning Dieterichs <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Dependency.20Graph.html#221508990">(Jan 04 2021 at 10:36)</a>:</h4>
<blockquote>
<p>Do you care about dependent tactics too?</p>
</blockquote>
<p>I'm fine with just the lemmas ;)</p>



<a name="221509053"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Dependency%20Graph/near/221509053" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Henning Dieterichs <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Dependency.20Graph.html#221509053">(Jan 04 2021 at 10:38)</a>:</h4>
<p><span class="user-mention silent" data-user-id="310045">Eric Wieser</span> <a href="#narrow/stream/113488-general/topic/Dependency.20Graph/near/221508604">said</a>:</p>
<blockquote>
<p>For lemmas, presumably you could "just" look at the term-mode proof for the lemma, and extract all the symbol names</p>
</blockquote>
<p>Is there some lean command that does this? Should I use the lean CLI + a custom tool that parses the output?</p>



<a name="221509115"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Dependency%20Graph/near/221509115" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Dependency.20Graph.html#221509115">(Jan 04 2021 at 10:38)</a>:</h4>
<p>Again, <a href="https://github.com/leanprover-community/leancrawler">leancrawler</a> does that.</p>



<a name="221509148"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Dependency%20Graph/near/221509148" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Dependency.20Graph.html#221509148">(Jan 04 2021 at 10:38)</a>:</h4>
<p>The Lean side is <a href="https://github.com/leanprover-community/leancrawler/blob/master/src/leancrawler/deps.lean">https://github.com/leanprover-community/leancrawler/blob/master/src/leancrawler/deps.lean</a></p>



<a name="221509207"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Dependency%20Graph/near/221509207" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Henning Dieterichs <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Dependency.20Graph.html#221509207">(Jan 04 2021 at 10:39)</a>:</h4>
<p>The python code is basically <a href="https://github.com/leanprover-community/leancrawler/blob/master/src/leancrawler/crawler.py">this</a>, right?</p>



<a name="221509284"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Dependency%20Graph/near/221509284" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Dependency.20Graph.html#221509284">(Jan 04 2021 at 10:40)</a>:</h4>
<p>Yes. It parses a YAML file created by the Lean side.</p>



<a name="221509299"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Dependency%20Graph/near/221509299" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Dependency.20Graph.html#221509299">(Jan 04 2021 at 10:40)</a>:</h4>
<p>To be honest I don't really remember the current state of this project, but I know Daniel Selsam used it more recently than I did.</p>



<a name="221509509"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Dependency%20Graph/near/221509509" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Henning Dieterichs <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Dependency.20Graph.html#221509509">(Jan 04 2021 at 10:43)</a>:</h4>
<p>Sadly, I don't know any python. Also, I think for integration into vscode, a typescript implementation might be more suited since vscode ships nodejs. Given the current size of the python codebase in lean-crawler, what do you think of a rewrite in typescript?  I guess it shouldn't take longer than an evening.</p>



<a name="221509742"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Dependency%20Graph/near/221509742" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Dependency.20Graph.html#221509742">(Jan 04 2021 at 10:45)</a>:</h4>
<p>Sure, this is a very simple project, and the python code gather statistics you don't care about in your project. However I should warn you that those graphs grow very fast. I'm afraid you won't have anything readable except in the simplest examples. You can watch the first part of my <a href="https://www.youtube.com/watch?v=ZVDBqLebHXo&amp;list=PLlF-CfQhukNkWwZt45vkNfWfuO-tBBqPN&amp;index=9">Pittsburgh talk</a> last year for comments about that.</p>
<div class="youtube-video message_inline_image"><a data-id="ZVDBqLebHXo" href="https://www.youtube.com/watch?v=ZVDBqLebHXo&amp;list=PLlF-CfQhukNkWwZt45vkNfWfuO-tBBqPN&amp;index=9"><img src="https://i.ytimg.com/vi/ZVDBqLebHXo/default.jpg"></a></div>



<a name="221509791"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Dependency%20Graph/near/221509791" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Dependency.20Graph.html#221509791">(Jan 04 2021 at 10:46)</a>:</h4>
<p>I'd be slightly tempted to integrate <code>leancrawler</code> into doc-gen, which is an argument for it remaining in python</p>



<a name="221509817"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Dependency%20Graph/near/221509817" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Dependency.20Graph.html#221509817">(Jan 04 2021 at 10:46)</a>:</h4>
<p>But not an argument against building another tool in Typescript</p>



<a name="221509900"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Dependency%20Graph/near/221509900" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Henning Dieterichs <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Dependency.20Graph.html#221509900">(Jan 04 2021 at 10:47)</a>:</h4>
<p>I guess it also reports all definitios/lemmas inside of mathlib? Maybe some heavy filter could reduce the size. I don't know what a typical lean project looks like though.</p>



<a name="221510199"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Dependency%20Graph/near/221510199" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Henning Dieterichs <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Dependency.20Graph.html#221510199">(Jan 04 2021 at 10:51)</a>:</h4>
<p>I'm currently at about 120 lemmas and theorems for my program verification proof - I think it could be insightful to see their dependencies live in vscode. I guess this size is still very manageable.</p>



<a name="221510234"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Dependency%20Graph/near/221510234" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Dependency.20Graph.html#221510234">(Jan 04 2021 at 10:52)</a>:</h4>
<p>Something in vscode that shows dependencies between lemmas even within the current file seems pretty useful.</p>



<a name="221510720"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Dependency%20Graph/near/221510720" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Dependency.20Graph.html#221510720">(Jan 04 2021 at 10:57)</a>:</h4>
<p>It should be possible to make something useful with the Lean 3 <a href="https://github.com/leanprover-community/lean/blob/master/doc/widget_server.md">widget framework</a> and the Lean code in <code>leancrawler</code>. Making a nice-looking graph will probably be a pain since widgets can't currently call external JS libraries, though.</p>



<a name="221511119"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Dependency%20Graph/near/221511119" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Henning Dieterichs <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Dependency.20Graph.html#221511119">(Jan 04 2021 at 11:01)</a>:</h4>
<p>I already had a quick look at the widget framework. I would like the dependency view to be non-invasive and asynchronous though (i.e. I don't want the graph export to affect the proof checking and vice versa). The graph also shouldn't be rendered inside the info view but rather in its own view. I guess this makes it somewhat unsuitable for the widget framework?</p>



<a name="221511220"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Dependency%20Graph/near/221511220" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Edward Ayers <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Dependency.20Graph.html#221511220">(Jan 04 2021 at 11:02)</a>:</h4>
<p>Yeah that's right Henning. Async rendering and having custom windows  is currently still 'future work'.</p>



<a name="221511340"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Dependency%20Graph/near/221511340" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Edward Ayers <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Dependency.20Graph.html#221511340">(Jan 04 2021 at 11:03)</a>:</h4>
<p>Another dream is to have access to graph libraries like D3</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>