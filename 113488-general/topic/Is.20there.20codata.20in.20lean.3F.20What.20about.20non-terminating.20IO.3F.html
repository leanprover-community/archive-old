---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/Is.20there.20codata.20in.20lean.3F.20What.20about.20non-terminating.20IO.3F.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Is.20there.20codata.20in.20lean.3F.20What.20about.20non-terminating.20IO.3F.html">Is there codata in lean? What about non-terminating IO?</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="305365856"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Is%20there%20codata%20in%20lean%3F%20What%20about%20non-terminating%20IO%3F/near/305365856" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Erika Su <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Is.20there.20codata.20in.20lean.3F.20What.20about.20non-terminating.20IO.3F.html#305365856">(Oct 21 2022 at 14:17)</a>:</h4>
<p>Hi, I am a newbie for lean language. I have some question to which i cannot find answer simply by google. Hopefully someone can help me.<br>
First, recursion scheme and codata: A common pattern for functional language is</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="o">(</span><span class="n">co</span><span class="o">)</span><span class="kd">inductive</span> <span class="n">Fix</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="kt">Type</span> <span class="bp">-&gt;</span> <span class="kt">Type</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Type</span> <span class="o">:=</span>
  <span class="bp">|</span> <span class="n">f</span> <span class="o">(</span><span class="n">Fix</span> <span class="n">f</span><span class="o">)</span>
</code></pre></div>
<p>which define how a data can be constructed (the maximum fixpoint in term of domain theory).<br>
If we use inductive in the above definiton, the lean would <strong>correctly</strong> reject the program, as pattern matching on such data structure cannot assure termination:<br>
<a href="/user_uploads/3121/u-IizZPFZCvHjvbP8QexudQ1/图片.png">图片.png</a> <br>
So,  how shall i apply codata pattern in term of programming in lean? Shall i just define a typeclass describing how data can be destructed?</p>
<div class="message_inline_image"><a href="/user_uploads/3121/u-IizZPFZCvHjvbP8QexudQ1/图片.png" title="图片.png"><img src="/user_uploads/3121/u-IizZPFZCvHjvbP8QexudQ1/图片.png"></a></div><p>Another problem is IO that cannot ensure termination:<br>
<a href="/user_uploads/3121/nN--n6eKgwboTQ5t3MnrzfYJ/图片.png">图片.png</a> <br>
the manual says lean4 doesn't have meta yet. So how do i implement this intention?</p>
<div class="message_inline_image"><a href="/user_uploads/3121/nN--n6eKgwboTQ5t3MnrzfYJ/图片.png" title="图片.png"><img src="/user_uploads/3121/nN--n6eKgwboTQ5t3MnrzfYJ/图片.png"></a></div>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>