---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/import.20hierarchy.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/import.20hierarchy.html">import hierarchy</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="213647577"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/import%20hierarchy/near/213647577" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/import.20hierarchy.html#213647577">(Oct 17 2020 at 11:27)</a>:</h4>
<p>Suppose I want to state the lemma that if <code>A</code> is nonempty and <code>R</code> is a ring of char p then <code>A -&gt; R</code> is a ring of char p.</p>



<a name="213647586"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/import%20hierarchy/near/213647586" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/import.20hierarchy.html#213647586">(Oct 17 2020 at 11:27)</a>:</h4>
<p>The "char p" involves the file <code>algebra.char_p</code> and the <code>A -&gt; R</code> involves the file <code>algebra.ring.pi</code></p>



<a name="213647631"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/import%20hierarchy/near/213647631" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/import.20hierarchy.html#213647631">(Oct 17 2020 at 11:28)</a>:</h4>
<p>currently I believe the two files do not import each other</p>



<a name="213647639"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/import%20hierarchy/near/213647639" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/import.20hierarchy.html#213647639">(Oct 17 2020 at 11:28)</a>:</h4>
<p>so is there a way to put this lemma in mathlib without messing up the import hierarchy? or does this not matter at all?</p>



<a name="213648411"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/import%20hierarchy/near/213648411" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/import.20hierarchy.html#213648411">(Oct 17 2020 at 11:51)</a>:</h4>
<p>My impression is that the way this sort of thing is handled is you just make a new file and import them both, or dump it in a file which imports both.</p>



<a name="213652297"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/import%20hierarchy/near/213652297" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/import.20hierarchy.html#213652297">(Oct 17 2020 at 13:36)</a>:</h4>
<p><span class="user-mention" data-user-id="110064">@Kenny Lau</span> I think in this case it's ok to import <code>alg.ring.pi</code> in <code>alg.char_p</code></p>



<a name="213652433"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/import%20hierarchy/near/213652433" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/import.20hierarchy.html#213652433">(Oct 17 2020 at 13:40)</a>:</h4>
<p><span class="user-mention" data-user-id="112680">@Johan Commelin</span> then we're making <code>alg.char_p</code> depend on more files</p>



<a name="213652616"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/import%20hierarchy/near/213652616" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/import.20hierarchy.html#213652616">(Oct 17 2020 at 13:44)</a>:</h4>
<p>I think this is a bigger problem than we think, in the sense that we might need an entirely new approach to dealing with hierarchy</p>



<a name="213652619"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/import%20hierarchy/near/213652619" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/import.20hierarchy.html#213652619">(Oct 17 2020 at 13:44)</a>:</h4>
<p>I'm sure issues like this is hidden everywhere in mathlib</p>



<a name="213652627"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/import%20hierarchy/near/213652627" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/import.20hierarchy.html#213652627">(Oct 17 2020 at 13:45)</a>:</h4>
<p>Maybe more segmentation (dividing files into multiple files) is the solution</p>



<a name="213652631"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/import%20hierarchy/near/213652631" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/import.20hierarchy.html#213652631">(Oct 17 2020 at 13:45)</a>:</h4>
<p>content addressable declarations</p>



<a name="213652810"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/import%20hierarchy/near/213652810" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/import.20hierarchy.html#213652810">(Oct 17 2020 at 13:49)</a>:</h4>
<p>For example, <a href="https://github.com/leanprover-community/mathlib/blob/ca2e6f4262e9d0192a562f050e643f4ba1513a17/src/ring_theory/principal_ideal_domain.lean"><code>ring_theory.principal_ideal_domain</code></a> imports <code>ring_theory.noetherian</code> and <code>ring_theory.unique_factorization_domain</code></p>



<a name="213652813"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/import%20hierarchy/near/213652813" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/import.20hierarchy.html#213652813">(Oct 17 2020 at 13:49)</a>:</h4>
<p>I'm pretty sure you don't need those imports to define PID</p>



<a name="213653227"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/import%20hierarchy/near/213653227" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/import.20hierarchy.html#213653227">(Oct 17 2020 at 13:59)</a>:</h4>
<p>what about smaller files, more directories, and more default.lean files?</p>



<a name="213653800"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/import%20hierarchy/near/213653800" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/import.20hierarchy.html#213653800">(Oct 17 2020 at 14:12)</a>:</h4>
<p>Sounds like a good idea to me</p>



<a name="213653893"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/import%20hierarchy/near/213653893" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/import.20hierarchy.html#213653893">(Oct 17 2020 at 14:15)</a>:</h4>
<p>This way you could have the option to import giant things (by importing the default file), or little things by importing individual files</p>



<a name="213654101"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/import%20hierarchy/near/213654101" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/import.20hierarchy.html#213654101">(Oct 17 2020 at 14:19)</a>:</h4>
<p>I would still love to see a version of Lean that is similar to <a href="http://unisonweb.org">unisonweb.org</a><br>
Every declaration is hashed, and the hash is its stable name. (Before hashing, you also replace all names in the declaration by the hashes that they point to.)</p>



<a name="213654172"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/import%20hierarchy/near/213654172" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/import.20hierarchy.html#213654172">(Oct 17 2020 at 14:20)</a>:</h4>
<p>You dump everything into a database, and you no longer really have directories or files.</p>



<a name="213654177"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/import%20hierarchy/near/213654177" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/import.20hierarchy.html#213654177">(Oct 17 2020 at 14:20)</a>:</h4>
<p>Says the nixos user <span aria-label="wink" class="emoji emoji-1f609" role="img" title="wink">:wink:</span></p>



<a name="213654183"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/import%20hierarchy/near/213654183" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/import.20hierarchy.html#213654183">(Oct 17 2020 at 14:20)</a>:</h4>
<p>But they do have tooling to "extract files" that you can then edit, and push back to the db</p>



<a name="213654219"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/import%20hierarchy/near/213654219" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/import.20hierarchy.html#213654219">(Oct 17 2020 at 14:21)</a>:</h4>
<p>The reason this might be tricky for Lean / mathlib is that we have proof search going on. If all <code>simp</code> and <code>tidy</code> proofs would be replaced by the stable output of <code>squeeze_simp</code> and <code>tidy?</code>, then we might be a lot closer to making this work.</p>



<a name="213654277"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/import%20hierarchy/near/213654277" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/import.20hierarchy.html#213654277">(Oct 17 2020 at 14:22)</a>:</h4>
<p>But then we would get really long and ugly proofs (e.g. in category theory). So I feel like maybe you would need to store multiple layers of proofs.</p>



<a name="213654288"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/import%20hierarchy/near/213654288" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/import.20hierarchy.html#213654288">(Oct 17 2020 at 14:22)</a>:</h4>
<p>And then you quickly go down a rabbit hole of open problems and cute dreams. But nothing that we can actually realise in a short amount of time.</p>



<a name="213654304"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/import%20hierarchy/near/213654304" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/import.20hierarchy.html#213654304">(Oct 17 2020 at 14:23)</a>:</h4>
<p>So probably the more pragmatic solution is what Adam said above: more dirs, more files, more default.lean</p>



<a name="213654577"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/import%20hierarchy/near/213654577" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/import.20hierarchy.html#213654577">(Oct 17 2020 at 14:29)</a>:</h4>
<p>The other pragmatic solution is to ask Mario to make us a Lean layer on top of MM0 so that we have an ITP that compiles mathlib in &lt; 5s, and then we can just dump everything into one file, like <a href="http://set.mm">set.mm</a>.</p>



<a name="213655211"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/import%20hierarchy/near/213655211" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/import.20hierarchy.html#213655211">(Oct 17 2020 at 14:44)</a>:</h4>
<p>Unison sounds really cool BTW</p>



<a name="213655585"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/import%20hierarchy/near/213655585" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/import.20hierarchy.html#213655585">(Oct 17 2020 at 14:54)</a>:</h4>
<p>Just thinking out loud.... How would this hashing AST a la unison work with typeclasses? E.g. how would I define two different category instances on the same type? Right now I would make an alias, and define a new instance on the alias.</p>



<a name="213655725"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/import%20hierarchy/near/213655725" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/import.20hierarchy.html#213655725">(Oct 17 2020 at 14:58)</a>:</h4>
<p>I think you can make that work, if you have some special <code>type_alias</code> constructor in the language</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>