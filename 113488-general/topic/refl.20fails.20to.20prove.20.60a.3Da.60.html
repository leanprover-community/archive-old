---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/refl.20fails.20to.20prove.20.60a.3Da.60.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/refl.20fails.20to.20prove.20.60a.3Da.60.html">refl fails to prove `a=a`</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="199543419"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/refl%20fails%20to%20prove%20%60a%3Da%60/near/199543419" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Keefer Rowan <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/refl.20fails.20to.20prove.20.60a.3Da.60.html#199543419">(Jun 02 2020 at 19:47)</a>:</h4>
<p>I got this error message after using the <code>refl</code> tactic,</p>
<div class="codehilite"><pre><span></span><code><span class="n">invalid</span> <span class="n">apply</span> <span class="n">tactic</span><span class="o">,</span> <span class="n">failed</span> <span class="n">to</span> <span class="n">unify</span>
  <span class="err">∥</span><span class="mi">2</span> <span class="err">•</span> <span class="n">x</span> <span class="bp">+</span> <span class="bp">-</span><span class="o">(</span><span class="n">y</span> <span class="n">n</span> <span class="bp">+</span> <span class="n">y</span> <span class="n">m</span><span class="o">)</span><span class="err">∥</span> <span class="bp">=</span> <span class="err">∥</span><span class="mi">2</span> <span class="err">•</span> <span class="n">x</span> <span class="bp">+</span> <span class="bp">-</span><span class="o">(</span><span class="n">y</span> <span class="n">n</span> <span class="bp">+</span> <span class="n">y</span> <span class="n">m</span><span class="o">)</span><span class="err">∥</span>
<span class="k">with</span>
  <span class="err">?</span><span class="n">m_2</span> <span class="bp">=</span> <span class="err">?</span><span class="n">m_2</span>
</code></pre></div>


<p>The context is too large to reproduce reasonably here and obviously I shouldn't be able to construct a simple example of this behavior here.  Any idea why this could happen?</p>



<a name="199543451"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/refl%20fails%20to%20prove%20%60a%3Da%60/near/199543451" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Hughes <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/refl.20fails.20to.20prove.20.60a.3Da.60.html#199543451">(Jun 02 2020 at 19:48)</a>:</h4>
<p>What type is <code>x</code>?</p>



<a name="199543515"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/refl%20fails%20to%20prove%20%60a%3Da%60/near/199543515" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Keefer Rowan <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/refl.20fails.20to.20prove.20.60a.3Da.60.html#199543515">(Jun 02 2020 at 19:48)</a>:</h4>
<p><code>x : \alpha</code> <code>\alpha : Type*</code>.</p>



<a name="199543562"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/refl%20fails%20to%20prove%20%60a%3Da%60/near/199543562" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Keefer Rowan <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/refl.20fails.20to.20prove.20.60a.3Da.60.html#199543562">(Jun 02 2020 at 19:48)</a>:</h4>
<p><code>\alpha</code> is a module over <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="double-struck">C</mi></mrow><annotation encoding="application/x-tex">\mathbb{C}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68889em;vertical-align:0em;"></span><span class="mord"><span class="mord mathbb">C</span></span></span></span></span> also.</p>



<a name="199543628"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/refl%20fails%20to%20prove%20%60a%3Da%60/near/199543628" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/refl.20fails.20to.20prove.20.60a.3Da.60.html#199543628">(Jun 02 2020 at 19:49)</a>:</h4>
<p>Can you copy paste the goal state?</p>



<a name="199543632"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/refl%20fails%20to%20prove%20%60a%3Da%60/near/199543632" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Keefer Rowan <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/refl.20fails.20to.20prove.20.60a.3Da.60.html#199543632">(Jun 02 2020 at 19:49)</a>:</h4>
<p>Perhaps one of the two's is of type <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="double-struck">C</mi></mrow><annotation encoding="application/x-tex">\mathbb{C}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68889em;vertical-align:0em;"></span><span class="mord"><span class="mord mathbb">C</span></span></span></span></span> and one is of <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="double-struck">N</mi></mrow><annotation encoding="application/x-tex">\mathbb{N}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68889em;vertical-align:0em;"></span><span class="mord"><span class="mord mathbb">N</span></span></span></span></span> or something like that, how would I check that?</p>



<a name="199543644"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/refl%20fails%20to%20prove%20%60a%3Da%60/near/199543644" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Keefer Rowan <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/refl.20fails.20to.20prove.20.60a.3Da.60.html#199543644">(Jun 02 2020 at 19:49)</a>:</h4>
<p><code>∥2 • x + -(y n + y m)∥ = ∥2 • x + -(y n + y m)∥</code></p>



<a name="199543656"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/refl%20fails%20to%20prove%20%60a%3Da%60/near/199543656" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/refl.20fails.20to.20prove.20.60a.3Da.60.html#199543656">(Jun 02 2020 at 19:49)</a>:</h4>
<p>No, I mean everything (also the assumptions)</p>



<a name="199543663"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/refl%20fails%20to%20prove%20%60a%3Da%60/near/199543663" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Hughes <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/refl.20fails.20to.20prove.20.60a.3Da.60.html#199543663">(Jun 02 2020 at 19:49)</a>:</h4>
<p>Can you print what the goal is after <code>set_option pp.all true</code></p>



<a name="199543712"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/refl%20fails%20to%20prove%20%60a%3Da%60/near/199543712" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Keefer Rowan <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/refl.20fails.20to.20prove.20.60a.3Da.60.html#199543712">(Jun 02 2020 at 19:50)</a>:</h4>
<div class="codehilite"><pre><span></span><code><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u_1</span><span class="o">,</span>
<span class="bp">_</span><span class="n">inst_1</span> <span class="o">:</span> <span class="n">add_comm_group</span> <span class="n">α</span><span class="o">,</span>
<span class="bp">_</span><span class="n">inst_2</span> <span class="o">:</span> <span class="n">module</span> <span class="n">ℂ</span> <span class="n">α</span><span class="o">,</span>
<span class="bp">_</span><span class="n">inst_3</span> <span class="o">:</span> <span class="n">hilbert_space</span> <span class="n">α</span><span class="o">,</span>
<span class="n">A</span> <span class="o">:</span> <span class="n">submodule</span> <span class="n">ℂ</span> <span class="n">α</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">is_closed</span> <span class="n">A</span><span class="bp">.</span><span class="n">carrier</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">α</span><span class="o">,</span>
<span class="n">S</span> <span class="o">:</span> <span class="n">set</span> <span class="n">ℝ</span> <span class="o">:=</span> <span class="n">range</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">y</span> <span class="o">:</span> <span class="err">↥</span><span class="n">A</span><span class="o">),</span> <span class="err">∥</span><span class="n">x</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">y</span><span class="err">∥</span><span class="o">),</span>
<span class="n">δ</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="o">:=</span> <span class="n">Inf</span> <span class="n">S</span><span class="o">,</span>
<span class="n">x_def</span> <span class="o">:</span> <span class="n">x</span> <span class="err">∈</span> <span class="err">⊤</span><span class="o">,</span>
<span class="n">S_def</span> <span class="o">:</span> <span class="n">S</span> <span class="bp">=</span> <span class="n">range</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">y</span> <span class="o">:</span> <span class="err">↥</span><span class="n">A</span><span class="o">),</span> <span class="err">∥</span><span class="n">x</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">y</span><span class="err">∥</span><span class="o">),</span>
<span class="n">δ_def</span> <span class="o">:</span> <span class="n">δ</span> <span class="bp">=</span> <span class="n">Inf</span> <span class="n">S</span><span class="o">,</span>
<span class="n">p₁</span> <span class="o">:</span> <span class="n">bdd_below</span> <span class="n">S</span><span class="o">,</span>
<span class="n">p₂</span> <span class="o">:</span> <span class="n">S</span><span class="bp">.</span><span class="n">nonempty</span><span class="o">,</span>
<span class="n">a</span> <span class="o">:</span> <span class="bp">ℕ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span>
<span class="n">a_def₁</span> <span class="o">:</span> <span class="n">tendsto</span> <span class="n">a</span> <span class="n">at_top</span> <span class="o">(</span><span class="n">nhds</span> <span class="o">(</span><span class="n">Inf</span> <span class="n">S</span><span class="o">)),</span>
<span class="n">a_def₂</span> <span class="o">:</span> <span class="n">range</span> <span class="n">a</span> <span class="err">⊆</span> <span class="n">S</span><span class="o">,</span>
<span class="n">p₃</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">),</span> <span class="n">a</span> <span class="n">n</span> <span class="err">∈</span> <span class="n">range</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">y</span> <span class="o">:</span> <span class="err">↥</span><span class="n">A</span><span class="o">),</span> <span class="err">∥</span><span class="n">x</span> <span class="bp">-</span> <span class="err">↑</span><span class="n">y</span><span class="err">∥</span><span class="o">),</span>
<span class="n">y</span> <span class="o">:</span> <span class="bp">ℕ</span> <span class="bp">→</span> <span class="n">α</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">),</span> <span class="o">(</span><span class="n">some</span> <span class="bp">_</span><span class="o">)</span><span class="bp">.</span><span class="n">val</span><span class="o">,</span>
<span class="n">this</span> <span class="o">:</span>
  <span class="bp">∀</span> <span class="o">(</span><span class="n">n</span> <span class="n">m</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">),</span> <span class="mi">2</span> <span class="bp">*</span> <span class="o">(</span><span class="err">∥</span><span class="n">y</span> <span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="err">∥</span> <span class="bp">^</span> <span class="mi">2</span> <span class="bp">+</span> <span class="err">∥</span><span class="n">y</span> <span class="n">m</span> <span class="bp">-</span> <span class="n">x</span><span class="err">∥</span> <span class="bp">^</span> <span class="mi">2</span><span class="o">)</span> <span class="bp">=</span> <span class="err">∥</span><span class="n">y</span> <span class="n">n</span> <span class="bp">-</span> <span class="n">y</span> <span class="n">m</span><span class="err">∥</span> <span class="bp">^</span> <span class="mi">2</span> <span class="bp">+</span> <span class="err">∥</span><span class="n">y</span> <span class="n">n</span> <span class="bp">+</span> <span class="n">y</span> <span class="n">m</span> <span class="bp">-</span> <span class="mi">2</span> <span class="err">•</span> <span class="n">x</span><span class="err">∥</span> <span class="bp">^</span> <span class="mi">2</span><span class="o">,</span>
<span class="n">n</span> <span class="n">m</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">this</span> <span class="o">:</span> <span class="err">∥</span><span class="n">y</span> <span class="n">n</span> <span class="bp">-</span> <span class="n">y</span> <span class="n">m</span><span class="err">∥</span> <span class="bp">^</span> <span class="mi">2</span> <span class="bp">+</span> <span class="err">∥</span><span class="n">y</span> <span class="n">n</span> <span class="bp">+</span> <span class="n">y</span> <span class="n">m</span> <span class="bp">-</span> <span class="mi">2</span> <span class="err">•</span> <span class="n">x</span><span class="err">∥</span> <span class="bp">^</span> <span class="mi">2</span> <span class="bp">=</span> <span class="mi">2</span> <span class="bp">*</span> <span class="o">(</span><span class="err">∥</span><span class="n">y</span> <span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="err">∥</span> <span class="bp">^</span> <span class="mi">2</span> <span class="bp">+</span> <span class="err">∥</span><span class="n">y</span> <span class="n">m</span> <span class="bp">-</span> <span class="n">x</span><span class="err">∥</span> <span class="bp">^</span> <span class="mi">2</span><span class="o">),</span>
<span class="n">this</span> <span class="o">:</span> <span class="err">∥</span><span class="n">y</span> <span class="n">n</span> <span class="bp">-</span> <span class="n">y</span> <span class="n">m</span><span class="err">∥</span> <span class="bp">^</span> <span class="mi">2</span> <span class="bp">=</span> <span class="mi">2</span> <span class="bp">*</span> <span class="o">(</span><span class="err">∥</span><span class="n">y</span> <span class="n">n</span> <span class="bp">-</span> <span class="n">x</span><span class="err">∥</span> <span class="bp">^</span> <span class="mi">2</span> <span class="bp">+</span> <span class="err">∥</span><span class="n">y</span> <span class="n">m</span> <span class="bp">-</span> <span class="n">x</span><span class="err">∥</span> <span class="bp">^</span> <span class="mi">2</span><span class="o">)</span> <span class="bp">-</span> <span class="err">∥</span><span class="n">y</span> <span class="n">n</span> <span class="bp">+</span> <span class="n">y</span> <span class="n">m</span> <span class="bp">-</span> <span class="mi">2</span> <span class="err">•</span> <span class="n">x</span><span class="err">∥</span> <span class="bp">^</span> <span class="mi">2</span><span class="o">,</span>
<span class="n">this</span> <span class="o">:</span> <span class="err">∥</span><span class="bp">-</span><span class="mi">1</span><span class="err">∥</span> <span class="bp">=</span> <span class="mi">1</span>
<span class="err">⊢</span> <span class="err">∥</span><span class="mi">2</span> <span class="err">•</span> <span class="n">x</span> <span class="bp">+</span> <span class="bp">-</span><span class="o">(</span><span class="n">y</span> <span class="n">n</span> <span class="bp">+</span> <span class="n">y</span> <span class="n">m</span><span class="o">)</span><span class="err">∥</span> <span class="bp">=</span> <span class="err">∥</span><span class="mi">2</span> <span class="err">•</span> <span class="n">x</span> <span class="bp">+</span> <span class="bp">-</span><span class="o">(</span><span class="n">y</span> <span class="n">n</span> <span class="bp">+</span> <span class="n">y</span> <span class="n">m</span><span class="o">)</span><span class="err">∥</span>
</code></pre></div>



<a name="199543717"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/refl%20fails%20to%20prove%20%60a%3Da%60/near/199543717" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/refl.20fails.20to.20prove.20.60a.3Da.60.html#199543717">(Jun 02 2020 at 19:50)</a>:</h4>
<p><code>set_option pp.all true</code> will show you the gory details.</p>



<a name="199543743"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/refl%20fails%20to%20prove%20%60a%3Da%60/near/199543743" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/refl.20fails.20to.20prove.20.60a.3Da.60.html#199543743">(Jun 02 2020 at 19:50)</a>:</h4>
<p>Use</p>
<div class="codehilite"><pre><span></span><code><span class="bp">```</span>
<span class="n">code</span>
<span class="n">more</span> <span class="n">code</span>
<span class="bp">```</span>
</code></pre></div>


<p>for code blocks</p>



<a name="199543795"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/refl%20fails%20to%20prove%20%60a%3Da%60/near/199543795" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/refl.20fails.20to.20prove.20.60a.3Da.60.html#199543795">(Jun 02 2020 at 19:50)</a>:</h4>
<p>Does <code>simp</code> help?</p>



<a name="199543813"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/refl%20fails%20to%20prove%20%60a%3Da%60/near/199543813" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Hughes <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/refl.20fails.20to.20prove.20.60a.3Da.60.html#199543813">(Jun 02 2020 at 19:51)</a>:</h4>
<p>What's the definition of <code>hilbert_space</code>?</p>



<a name="199543814"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/refl%20fails%20to%20prove%20%60a%3Da%60/near/199543814" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/refl.20fails.20to.20prove.20.60a.3Da.60.html#199543814">(Jun 02 2020 at 19:51)</a>:</h4>
<p>It might change some invisible things</p>



<a name="199543845"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/refl%20fails%20to%20prove%20%60a%3Da%60/near/199543845" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Keefer Rowan <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/refl.20fails.20to.20prove.20.60a.3Da.60.html#199543845">(Jun 02 2020 at 19:51)</a>:</h4>
<div class="codehilite"><pre><span></span><code><span class="bp">@</span><span class="n">eq</span><span class="bp">.</span><span class="o">{</span><span class="mi">1</span><span class="o">}</span> <span class="n">real</span>
    <span class="o">(</span><span class="bp">@</span><span class="n">has_norm</span><span class="bp">.</span><span class="n">norm</span><span class="bp">.</span><span class="o">{</span><span class="n">u_1</span><span class="o">}</span> <span class="n">α</span>
       <span class="o">(</span><span class="bp">@</span><span class="n">normed_group</span><span class="bp">.</span><span class="n">to_has_norm</span><span class="bp">.</span><span class="o">{</span><span class="n">u_1</span><span class="o">}</span> <span class="n">α</span>
          <span class="o">(</span><span class="bp">@</span><span class="n">innerc_product_space_is_normed_group</span><span class="bp">.</span><span class="o">{</span><span class="n">u_1</span><span class="o">}</span> <span class="n">α</span> <span class="bp">_</span><span class="n">inst_1</span> <span class="bp">_</span><span class="n">inst_2</span>
             <span class="o">(</span><span class="bp">@</span><span class="n">hilbert_space</span><span class="bp">.</span><span class="n">to_innerc_product_space</span><span class="bp">.</span><span class="o">{</span><span class="n">u_1</span><span class="o">}</span> <span class="n">α</span> <span class="bp">_</span><span class="n">inst_1</span> <span class="bp">_</span><span class="n">inst_2</span> <span class="bp">_</span><span class="n">inst_3</span><span class="o">)))</span>
       <span class="o">(</span><span class="bp">@</span><span class="n">has_add</span><span class="bp">.</span><span class="n">add</span><span class="bp">.</span><span class="o">{</span><span class="n">u_1</span><span class="o">}</span> <span class="n">α</span>
          <span class="o">(</span><span class="bp">@</span><span class="n">add_semigroup</span><span class="bp">.</span><span class="n">to_has_add</span><span class="bp">.</span><span class="o">{</span><span class="n">u_1</span><span class="o">}</span> <span class="n">α</span>
             <span class="o">(</span><span class="bp">@</span><span class="n">add_monoid</span><span class="bp">.</span><span class="n">to_add_semigroup</span><span class="bp">.</span><span class="o">{</span><span class="n">u_1</span><span class="o">}</span> <span class="n">α</span>
                <span class="o">(</span><span class="bp">@</span><span class="n">add_group</span><span class="bp">.</span><span class="n">to_add_monoid</span><span class="bp">.</span><span class="o">{</span><span class="n">u_1</span><span class="o">}</span> <span class="n">α</span> <span class="o">(</span><span class="bp">@</span><span class="n">add_comm_group</span><span class="bp">.</span><span class="n">to_add_group</span><span class="bp">.</span><span class="o">{</span><span class="n">u_1</span><span class="o">}</span> <span class="n">α</span> <span class="bp">_</span><span class="n">inst_1</span><span class="o">))))</span>
          <span class="o">(</span><span class="bp">@</span><span class="n">has_scalar</span><span class="bp">.</span><span class="n">smul</span><span class="bp">.</span><span class="o">{</span><span class="mi">0</span> <span class="n">u_1</span><span class="o">}</span> <span class="n">nat</span> <span class="n">α</span>
             <span class="o">(</span><span class="bp">@</span><span class="n">mul_action</span><span class="bp">.</span><span class="n">to_has_scalar</span><span class="bp">.</span><span class="o">{</span><span class="mi">0</span> <span class="n">u_1</span><span class="o">}</span> <span class="n">nat</span> <span class="n">α</span> <span class="o">(</span><span class="bp">@</span><span class="n">semiring</span><span class="bp">.</span><span class="n">to_monoid</span><span class="bp">.</span><span class="o">{</span><span class="mi">0</span><span class="o">}</span> <span class="n">nat</span> <span class="n">nat</span><span class="bp">.</span><span class="n">semiring</span><span class="o">)</span>
                <span class="o">(</span><span class="bp">@</span><span class="n">distrib_mul_action</span><span class="bp">.</span><span class="n">to_mul_action</span><span class="bp">.</span><span class="o">{</span><span class="mi">0</span> <span class="n">u_1</span><span class="o">}</span> <span class="n">nat</span> <span class="n">α</span> <span class="o">(</span><span class="bp">@</span><span class="n">semiring</span><span class="bp">.</span><span class="n">to_monoid</span><span class="bp">.</span><span class="o">{</span><span class="mi">0</span><span class="o">}</span> <span class="n">nat</span> <span class="n">nat</span><span class="bp">.</span><span class="n">semiring</span><span class="o">)</span>
                   <span class="o">(</span><span class="bp">@</span><span class="n">add_comm_monoid</span><span class="bp">.</span><span class="n">to_add_monoid</span><span class="bp">.</span><span class="o">{</span><span class="n">u_1</span><span class="o">}</span> <span class="n">α</span> <span class="o">(</span><span class="bp">@</span><span class="n">add_comm_group</span><span class="bp">.</span><span class="n">to_add_comm_monoid</span><span class="bp">.</span><span class="o">{</span><span class="n">u_1</span><span class="o">}</span> <span class="n">α</span> <span class="bp">_</span><span class="n">inst_1</span><span class="o">))</span>
                   <span class="o">(</span><span class="bp">@</span><span class="n">semimodule</span><span class="bp">.</span><span class="n">to_distrib_mul_action</span><span class="bp">.</span><span class="o">{</span><span class="mi">0</span> <span class="n">u_1</span><span class="o">}</span> <span class="n">nat</span> <span class="n">α</span> <span class="n">nat</span><span class="bp">.</span><span class="n">semiring</span>
                      <span class="o">(</span><span class="bp">@</span><span class="n">add_comm_group</span><span class="bp">.</span><span class="n">to_add_comm_monoid</span><span class="bp">.</span><span class="o">{</span><span class="n">u_1</span><span class="o">}</span> <span class="n">α</span> <span class="bp">_</span><span class="n">inst_1</span><span class="o">)</span>
                      <span class="o">(</span><span class="bp">@</span><span class="n">add_comm_monoid</span><span class="bp">.</span><span class="n">nat_semimodule</span><span class="bp">.</span><span class="o">{</span><span class="n">u_1</span><span class="o">}</span> <span class="n">α</span>
                         <span class="o">(</span><span class="bp">@</span><span class="n">add_comm_group</span><span class="bp">.</span><span class="n">to_add_comm_monoid</span><span class="bp">.</span><span class="o">{</span><span class="n">u_1</span><span class="o">}</span> <span class="n">α</span> <span class="bp">_</span><span class="n">inst_1</span><span class="o">)))))</span>
             <span class="o">(</span><span class="bp">@</span><span class="n">bit0</span><span class="bp">.</span><span class="o">{</span><span class="mi">0</span><span class="o">}</span> <span class="n">nat</span> <span class="n">nat</span><span class="bp">.</span><span class="n">has_add</span> <span class="o">(</span><span class="bp">@</span><span class="n">has_one</span><span class="bp">.</span><span class="n">one</span><span class="bp">.</span><span class="o">{</span><span class="mi">0</span><span class="o">}</span> <span class="n">nat</span> <span class="n">nat</span><span class="bp">.</span><span class="n">has_one</span><span class="o">))</span>
             <span class="n">x</span><span class="o">)</span>
          <span class="o">(</span><span class="bp">@</span><span class="n">has_neg</span><span class="bp">.</span><span class="n">neg</span><span class="bp">.</span><span class="o">{</span><span class="n">u_1</span><span class="o">}</span> <span class="n">α</span> <span class="o">(</span><span class="bp">@</span><span class="n">add_group</span><span class="bp">.</span><span class="n">to_has_neg</span><span class="bp">.</span><span class="o">{</span><span class="n">u_1</span><span class="o">}</span> <span class="n">α</span> <span class="o">(</span><span class="bp">@</span><span class="n">add_comm_group</span><span class="bp">.</span><span class="n">to_add_group</span><span class="bp">.</span><span class="o">{</span><span class="n">u_1</span><span class="o">}</span> <span class="n">α</span> <span class="bp">_</span><span class="n">inst_1</span><span class="o">))</span>
             <span class="o">(</span><span class="bp">@</span><span class="n">has_add</span><span class="bp">.</span><span class="n">add</span><span class="bp">.</span><span class="o">{</span><span class="n">u_1</span><span class="o">}</span> <span class="n">α</span>
                <span class="o">(</span><span class="bp">@</span><span class="n">add_semigroup</span><span class="bp">.</span><span class="n">to_has_add</span><span class="bp">.</span><span class="o">{</span><span class="n">u_1</span><span class="o">}</span> <span class="n">α</span>
                   <span class="o">(</span><span class="bp">@</span><span class="n">add_monoid</span><span class="bp">.</span><span class="n">to_add_semigroup</span><span class="bp">.</span><span class="o">{</span><span class="n">u_1</span><span class="o">}</span> <span class="n">α</span>
                      <span class="o">(</span><span class="bp">@</span><span class="n">add_group</span><span class="bp">.</span><span class="n">to_add_monoid</span><span class="bp">.</span><span class="o">{</span><span class="n">u_1</span><span class="o">}</span> <span class="n">α</span> <span class="o">(</span><span class="bp">@</span><span class="n">add_comm_group</span><span class="bp">.</span><span class="n">to_add_group</span><span class="bp">.</span><span class="o">{</span><span class="n">u_1</span><span class="o">}</span> <span class="n">α</span> <span class="bp">_</span><span class="n">inst_1</span><span class="o">))))</span>
                <span class="o">(</span><span class="n">y</span> <span class="n">n</span><span class="o">)</span>
                <span class="o">(</span><span class="n">y</span> <span class="n">m</span><span class="o">)))))</span>
    <span class="o">(</span><span class="bp">@</span><span class="n">has_norm</span><span class="bp">.</span><span class="n">norm</span><span class="bp">.</span><span class="o">{</span><span class="n">u_1</span><span class="o">}</span> <span class="n">α</span>
       <span class="o">(</span><span class="bp">@</span><span class="n">normed_group</span><span class="bp">.</span><span class="n">to_has_norm</span><span class="bp">.</span><span class="o">{</span><span class="n">u_1</span><span class="o">}</span> <span class="n">α</span>
          <span class="o">(</span><span class="bp">@</span><span class="n">innerc_product_space_is_normed_group</span><span class="bp">.</span><span class="o">{</span><span class="n">u_1</span><span class="o">}</span> <span class="n">α</span> <span class="bp">_</span><span class="n">inst_1</span> <span class="bp">_</span><span class="n">inst_2</span>
             <span class="o">(</span><span class="bp">@</span><span class="n">hilbert_space</span><span class="bp">.</span><span class="n">to_innerc_product_space</span><span class="bp">.</span><span class="o">{</span><span class="n">u_1</span><span class="o">}</span> <span class="n">α</span> <span class="bp">_</span><span class="n">inst_1</span> <span class="bp">_</span><span class="n">inst_2</span> <span class="bp">_</span><span class="n">inst_3</span><span class="o">)))</span>
       <span class="o">(</span><span class="bp">@</span><span class="n">has_add</span><span class="bp">.</span><span class="n">add</span><span class="bp">.</span><span class="o">{</span><span class="n">u_1</span><span class="o">}</span> <span class="n">α</span>
          <span class="o">(</span><span class="bp">@</span><span class="n">add_semigroup</span><span class="bp">.</span><span class="n">to_has_add</span><span class="bp">.</span><span class="o">{</span><span class="n">u_1</span><span class="o">}</span> <span class="n">α</span>
             <span class="o">(</span><span class="bp">@</span><span class="n">add_monoid</span><span class="bp">.</span><span class="n">to_add_semigroup</span><span class="bp">.</span><span class="o">{</span><span class="n">u_1</span><span class="o">}</span> <span class="n">α</span>
                <span class="o">(</span><span class="bp">@</span><span class="n">add_group</span><span class="bp">.</span><span class="n">to_add_monoid</span><span class="bp">.</span><span class="o">{</span><span class="n">u_1</span><span class="o">}</span> <span class="n">α</span> <span class="o">(</span><span class="bp">@</span><span class="n">add_comm_group</span><span class="bp">.</span><span class="n">to_add_group</span><span class="bp">.</span><span class="o">{</span><span class="n">u_1</span><span class="o">}</span> <span class="n">α</span> <span class="bp">_</span><span class="n">inst_1</span><span class="o">))))</span>
          <span class="o">(</span><span class="bp">@</span><span class="n">has_scalar</span><span class="bp">.</span><span class="n">smul</span><span class="bp">.</span><span class="o">{</span><span class="mi">0</span> <span class="n">u_1</span><span class="o">}</span> <span class="n">complex</span> <span class="n">α</span>
             <span class="o">(</span><span class="bp">@</span><span class="n">mul_action</span><span class="bp">.</span><span class="n">to_has_scalar</span><span class="bp">.</span><span class="o">{</span><span class="mi">0</span> <span class="n">u_1</span><span class="o">}</span> <span class="n">complex</span> <span class="n">α</span>
                <span class="o">(</span><span class="bp">@</span><span class="n">ring</span><span class="bp">.</span><span class="n">to_monoid</span><span class="bp">.</span><span class="o">{</span><span class="mi">0</span><span class="o">}</span> <span class="n">complex</span>
                   <span class="o">(</span><span class="bp">@</span><span class="n">normed_ring</span><span class="bp">.</span><span class="n">to_ring</span><span class="bp">.</span><span class="o">{</span><span class="mi">0</span><span class="o">}</span> <span class="n">complex</span> <span class="o">(</span><span class="bp">@</span><span class="n">normed_field</span><span class="bp">.</span><span class="n">to_normed_ring</span><span class="bp">.</span><span class="o">{</span><span class="mi">0</span><span class="o">}</span> <span class="n">complex</span> <span class="n">complex</span><span class="bp">.</span><span class="n">normed_field</span><span class="o">)))</span>
                <span class="o">(</span><span class="bp">@</span><span class="n">distrib_mul_action</span><span class="bp">.</span><span class="n">to_mul_action</span><span class="bp">.</span><span class="o">{</span><span class="mi">0</span> <span class="n">u_1</span><span class="o">}</span> <span class="n">complex</span> <span class="n">α</span>
                   <span class="o">(</span><span class="bp">@</span><span class="n">ring</span><span class="bp">.</span><span class="n">to_monoid</span><span class="bp">.</span><span class="o">{</span><span class="mi">0</span><span class="o">}</span> <span class="n">complex</span>
                      <span class="o">(</span><span class="bp">@</span><span class="n">normed_ring</span><span class="bp">.</span><span class="n">to_ring</span><span class="bp">.</span><span class="o">{</span><span class="mi">0</span><span class="o">}</span> <span class="n">complex</span>
                         <span class="o">(</span><span class="bp">@</span><span class="n">normed_field</span><span class="bp">.</span><span class="n">to_normed_ring</span><span class="bp">.</span><span class="o">{</span><span class="mi">0</span><span class="o">}</span> <span class="n">complex</span> <span class="n">complex</span><span class="bp">.</span><span class="n">normed_field</span><span class="o">)))</span>
                   <span class="o">(</span><span class="bp">@</span><span class="n">add_group</span><span class="bp">.</span><span class="n">to_add_monoid</span><span class="bp">.</span><span class="o">{</span><span class="n">u_1</span><span class="o">}</span> <span class="n">α</span> <span class="o">(</span><span class="bp">@</span><span class="n">add_comm_group</span><span class="bp">.</span><span class="n">to_add_group</span><span class="bp">.</span><span class="o">{</span><span class="n">u_1</span><span class="o">}</span> <span class="n">α</span> <span class="bp">_</span><span class="n">inst_1</span><span class="o">))</span>
                   <span class="o">(</span><span class="bp">@</span><span class="n">semimodule</span><span class="bp">.</span><span class="n">to_distrib_mul_action</span><span class="bp">.</span><span class="o">{</span><span class="mi">0</span> <span class="n">u_1</span><span class="o">}</span> <span class="n">complex</span> <span class="n">α</span>
                      <span class="o">(</span><span class="bp">@</span><span class="n">nonzero_semiring</span><span class="bp">.</span><span class="n">to_semiring</span><span class="bp">.</span><span class="o">{</span><span class="mi">0</span><span class="o">}</span> <span class="n">complex</span>
                         <span class="o">(</span><span class="bp">@</span><span class="n">nonzero_comm_semiring</span><span class="bp">.</span><span class="n">to_nonzero_semiring</span><span class="bp">.</span><span class="o">{</span><span class="mi">0</span><span class="o">}</span> <span class="n">complex</span>
                            <span class="o">(</span><span class="bp">@</span><span class="n">nonzero_comm_ring</span><span class="bp">.</span><span class="n">to_nonzero_comm_semiring</span><span class="bp">.</span><span class="o">{</span><span class="mi">0</span><span class="o">}</span> <span class="n">complex</span>
                               <span class="o">(</span><span class="bp">@</span><span class="n">local_ring</span><span class="bp">.</span><span class="n">to_nonzero_comm_ring</span><span class="bp">.</span><span class="o">{</span><span class="mi">0</span><span class="o">}</span> <span class="n">complex</span>
                                  <span class="o">(</span><span class="bp">@</span><span class="n">field</span><span class="bp">.</span><span class="n">local_ring</span><span class="bp">.</span><span class="o">{</span><span class="mi">0</span><span class="o">}</span> <span class="n">complex</span> <span class="n">complex</span><span class="bp">.</span><span class="n">field</span><span class="o">)))))</span>
                      <span class="o">(</span><span class="bp">@</span><span class="n">add_comm_group</span><span class="bp">.</span><span class="n">to_add_comm_monoid</span><span class="bp">.</span><span class="o">{</span><span class="n">u_1</span><span class="o">}</span> <span class="n">α</span> <span class="bp">_</span><span class="n">inst_1</span><span class="o">)</span>
                      <span class="o">(</span><span class="bp">@</span><span class="n">module</span><span class="bp">.</span><span class="n">to_semimodule</span><span class="bp">.</span><span class="o">{</span><span class="mi">0</span> <span class="n">u_1</span><span class="o">}</span> <span class="n">complex</span> <span class="n">α</span>
                         <span class="o">(</span><span class="bp">@</span><span class="n">normed_ring</span><span class="bp">.</span><span class="n">to_ring</span><span class="bp">.</span><span class="o">{</span><span class="mi">0</span><span class="o">}</span> <span class="n">complex</span>
                            <span class="o">(</span><span class="bp">@</span><span class="n">normed_field</span><span class="bp">.</span><span class="n">to_normed_ring</span><span class="bp">.</span><span class="o">{</span><span class="mi">0</span><span class="o">}</span> <span class="n">complex</span> <span class="n">complex</span><span class="bp">.</span><span class="n">normed_field</span><span class="o">))</span>
                         <span class="bp">_</span><span class="n">inst_1</span>
                         <span class="bp">_</span><span class="n">inst_2</span><span class="o">))))</span>
             <span class="o">(</span><span class="bp">@</span><span class="n">bit0</span><span class="bp">.</span><span class="o">{</span><span class="mi">0</span><span class="o">}</span> <span class="n">complex</span> <span class="n">complex</span><span class="bp">.</span><span class="n">has_add</span> <span class="o">(</span><span class="bp">@</span><span class="n">has_one</span><span class="bp">.</span><span class="n">one</span><span class="bp">.</span><span class="o">{</span><span class="mi">0</span><span class="o">}</span> <span class="n">complex</span> <span class="n">complex</span><span class="bp">.</span><span class="n">has_one</span><span class="o">))</span>
             <span class="n">x</span><span class="o">)</span>
          <span class="o">(</span><span class="bp">@</span><span class="n">has_neg</span><span class="bp">.</span><span class="n">neg</span><span class="bp">.</span><span class="o">{</span><span class="n">u_1</span><span class="o">}</span> <span class="n">α</span> <span class="o">(</span><span class="bp">@</span><span class="n">add_group</span><span class="bp">.</span><span class="n">to_has_neg</span><span class="bp">.</span><span class="o">{</span><span class="n">u_1</span><span class="o">}</span> <span class="n">α</span> <span class="o">(</span><span class="bp">@</span><span class="n">add_comm_group</span><span class="bp">.</span><span class="n">to_add_group</span><span class="bp">.</span><span class="o">{</span><span class="n">u_1</span><span class="o">}</span> <span class="n">α</span> <span class="bp">_</span><span class="n">inst_1</span><span class="o">))</span>
             <span class="o">(</span><span class="bp">@</span><span class="n">has_add</span><span class="bp">.</span><span class="n">add</span><span class="bp">.</span><span class="o">{</span><span class="n">u_1</span><span class="o">}</span> <span class="n">α</span>
                <span class="o">(</span><span class="bp">@</span><span class="n">add_semigroup</span><span class="bp">.</span><span class="n">to_has_add</span><span class="bp">.</span><span class="o">{</span><span class="n">u_1</span><span class="o">}</span> <span class="n">α</span>
                   <span class="o">(</span><span class="bp">@</span><span class="n">add_monoid</span><span class="bp">.</span><span class="n">to_add_semigroup</span><span class="bp">.</span><span class="o">{</span><span class="n">u_1</span><span class="o">}</span> <span class="n">α</span>
                      <span class="o">(</span><span class="bp">@</span><span class="n">add_group</span><span class="bp">.</span><span class="n">to_add_monoid</span><span class="bp">.</span><span class="o">{</span><span class="n">u_1</span><span class="o">}</span> <span class="n">α</span> <span class="o">(</span><span class="bp">@</span><span class="n">add_comm_group</span><span class="bp">.</span><span class="n">to_add_group</span><span class="bp">.</span><span class="o">{</span><span class="n">u_1</span><span class="o">}</span> <span class="n">α</span> <span class="bp">_</span><span class="n">inst_1</span><span class="o">))))</span>
                <span class="o">(</span><span class="n">y</span> <span class="n">n</span><span class="o">)</span>
                <span class="o">(</span><span class="n">y</span> <span class="n">m</span><span class="o">)))))</span>
</code></pre></div>



<a name="199543850"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/refl%20fails%20to%20prove%20%60a%3Da%60/near/199543850" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Hughes <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/refl.20fails.20to.20prove.20.60a.3Da.60.html#199543850">(Jun 02 2020 at 19:51)</a>:</h4>
<p>I think you might have two different <code>module ℂ α</code> instances.</p>



<a name="199544022"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/refl%20fails%20to%20prove%20%60a%3Da%60/near/199544022" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/refl.20fails.20to.20prove.20.60a.3Da.60.html#199544022">(Jun 02 2020 at 19:52)</a>:</h4>
<p>Also, it seems like you constructed <code>y</code> using choice, so I guess you need to use <code>some_spec</code> at some point</p>



<a name="199544035"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/refl%20fails%20to%20prove%20%60a%3Da%60/near/199544035" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Keefer Rowan <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/refl.20fails.20to.20prove.20.60a.3Da.60.html#199544035">(Jun 02 2020 at 19:52)</a>:</h4>
<p><code>class hilbert_space (α : Type*) [add_comm_group α] [module ℂ α] extends innerc_product_space α, complete_space α.</code></p>



<a name="199544069"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/refl%20fails%20to%20prove%20%60a%3Da%60/near/199544069" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Keefer Rowan <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/refl.20fails.20to.20prove.20.60a.3Da.60.html#199544069">(Jun 02 2020 at 19:53)</a>:</h4>
<div class="codehilite"><pre><span></span><code><span class="n">class</span> <span class="n">innerc_product_space</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">add_comm_group</span> <span class="n">α</span><span class="o">]</span> <span class="o">[</span><span class="n">module</span> <span class="n">ℂ</span> <span class="n">α</span><span class="o">]</span> <span class="kn">extends</span> <span class="n">sesq_form</span> <span class="n">ℂ</span> <span class="n">α</span> <span class="o">(</span><span class="n">ring_anti_equiv</span><span class="bp">.</span><span class="n">mk</span> <span class="o">(</span><span class="n">function</span><span class="bp">.</span><span class="n">involutive</span><span class="bp">.</span><span class="n">to_equiv</span> <span class="n">conj</span> <span class="n">conj_involutive</span><span class="o">))</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">herm</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">x</span> <span class="n">y</span><span class="o">,</span> <span class="n">sesq</span> <span class="n">x</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">conj</span> <span class="o">(</span><span class="n">sesq</span> <span class="n">y</span> <span class="n">x</span><span class="o">))</span>
<span class="o">(</span><span class="n">nonneg</span>    <span class="o">:</span> <span class="bp">∀</span> <span class="n">x</span><span class="o">,</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="o">(</span><span class="n">sesq</span> <span class="n">x</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">re</span><span class="o">)</span>
<span class="o">(</span><span class="n">definite</span>  <span class="o">:</span> <span class="bp">∀</span> <span class="n">x</span><span class="o">,</span> <span class="n">sesq</span> <span class="n">x</span> <span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span> <span class="bp">→</span> <span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">)</span>
</code></pre></div>



<a name="199544094"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/refl%20fails%20to%20prove%20%60a%3Da%60/near/199544094" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/refl.20fails.20to.20prove.20.60a.3Da.60.html#199544094">(Jun 02 2020 at 19:53)</a>:</h4>
<p>Try <code>congr</code></p>



<a name="199544125"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/refl%20fails%20to%20prove%20%60a%3Da%60/near/199544125" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/refl.20fails.20to.20prove.20.60a.3Da.60.html#199544125">(Jun 02 2020 at 19:53)</a>:</h4>
<p>You have two different <code>mul_action</code>s in that printout</p>



<a name="199544199"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/refl%20fails%20to%20prove%20%60a%3Da%60/near/199544199" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Hughes <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/refl.20fails.20to.20prove.20.60a.3Da.60.html#199544199">(Jun 02 2020 at 19:54)</a>:</h4>
<p>The <code>2</code> on the left is a <code>nat</code>, but the <code>2</code> on the right is <code>complex</code> I think.</p>



<a name="199544203"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/refl%20fails%20to%20prove%20%60a%3Da%60/near/199544203" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/refl.20fails.20to.20prove.20.60a.3Da.60.html#199544203">(Jun 02 2020 at 19:54)</a>:</h4>
<p>Yup</p>



<a name="199544215"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/refl%20fails%20to%20prove%20%60a%3Da%60/near/199544215" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/refl.20fails.20to.20prove.20.60a.3Da.60.html#199544215">(Jun 02 2020 at 19:54)</a>:</h4>
<p>So I hope <code>simp</code> will help</p>



<a name="199544277"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/refl%20fails%20to%20prove%20%60a%3Da%60/near/199544277" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Hughes <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/refl.20fails.20to.20prove.20.60a.3Da.60.html#199544277">(Jun 02 2020 at 19:54)</a>:</h4>
<p>Do we have those simp lemmas?</p>



<a name="199544298"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/refl%20fails%20to%20prove%20%60a%3Da%60/near/199544298" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/refl.20fails.20to.20prove.20.60a.3Da.60.html#199544298">(Jun 02 2020 at 19:55)</a>:</h4>
<p>I hope so</p>



<a name="199544312"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/refl%20fails%20to%20prove%20%60a%3Da%60/near/199544312" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Keefer Rowan <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/refl.20fails.20to.20prove.20.60a.3Da.60.html#199544312">(Jun 02 2020 at 19:55)</a>:</h4>
<p>After <code>simp</code> with pp : <code>⊢ ∥2 • x + (-y m + -y n)∥ = ∥2 • x + (-y m + -y n)∥</code></p>



<a name="199544336"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/refl%20fails%20to%20prove%20%60a%3Da%60/near/199544336" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/refl.20fails.20to.20prove.20.60a.3Da.60.html#199544336">(Jun 02 2020 at 19:55)</a>:</h4>
<p><span class="user-mention" data-user-id="300684">@Keefer Rowan</span> So the problem is that the <code>\bu</code> is used in two different ways</p>



<a name="199544424"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/refl%20fails%20to%20prove%20%60a%3Da%60/near/199544424" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Keefer Rowan <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/refl.20fails.20to.20prove.20.60a.3Da.60.html#199544424">(Jun 02 2020 at 19:56)</a>:</h4>
<p>Do we have that <code>(2 : \N) \bu x = x + x</code>? And then <code>(2:\C) \bu x</code> is given by the module structure?</p>



<a name="199544438"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/refl%20fails%20to%20prove%20%60a%3Da%60/near/199544438" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Hughes <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/refl.20fails.20to.20prove.20.60a.3Da.60.html#199544438">(Jun 02 2020 at 19:56)</a>:</h4>
<p>What should <code>simp</code> normal form be for this. Move everything to <code>nat</code> I guess is the only choice.</p>



<a name="199544454"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/refl%20fails%20to%20prove%20%60a%3Da%60/near/199544454" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Hughes <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/refl.20fails.20to.20prove.20.60a.3Da.60.html#199544454">(Jun 02 2020 at 19:56)</a>:</h4>
<p>I bet <code>simp [bit0]</code> will work.</p>



<a name="199544598"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/refl%20fails%20to%20prove%20%60a%3Da%60/near/199544598" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/refl.20fails.20to.20prove.20.60a.3Da.60.html#199544598">(Jun 02 2020 at 19:57)</a>:</h4>
<p><span class="user-mention silent" data-user-id="300684">Keefer Rowan</span> <a href="#narrow/stream/113488-general/topic/refl.20fails.20to.20prove.20.60a.3Da.60/near/199544424">said</a>:</p>
<blockquote>
<p>Do we have that <code>(2 : \N) \bu x = x + x</code>? And then <code>(2:\C) \bu x</code> is given by the module structure?</p>
</blockquote>
<p><code>rw [show 2 = 1 + 1, from rfl, add_smul]</code></p>



<a name="199544765"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/refl%20fails%20to%20prove%20%60a%3Da%60/near/199544765" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Keefer Rowan <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/refl.20fails.20to.20prove.20.60a.3Da.60.html#199544765">(Jun 02 2020 at 19:58)</a>:</h4>
<div class="codehilite"><pre><span></span><code>      <span class="n">simp</span> <span class="o">[</span><span class="n">bit0</span><span class="o">],</span>
      <span class="n">rw</span> <span class="o">[</span><span class="n">add_smul</span><span class="o">,</span> <span class="n">add_smul</span><span class="o">,</span> <span class="n">one_smul</span><span class="o">,</span> <span class="n">one_smul</span><span class="o">],</span>
</code></pre></div>


<p>showed it. </p>
<p>Thanks all!</p>
<p>Any way to get the pp to show types of numerals?</p>



<a name="199545267"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/refl%20fails%20to%20prove%20%60a%3Da%60/near/199545267" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/refl.20fails.20to.20prove.20.60a.3Da.60.html#199545267">(Jun 02 2020 at 20:02)</a>:</h4>
<p>That's a nice idea. Probably if they aren't <code>nat</code>?</p>



<a name="199545352"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/refl%20fails%20to%20prove%20%60a%3Da%60/near/199545352" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/refl.20fails.20to.20prove.20.60a.3Da.60.html#199545352">(Jun 02 2020 at 20:03)</a>:</h4>
<p>Could something like <code>elide</code> be used for that? (Not <code>elide</code> itself, but similar concept maybe?)</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>