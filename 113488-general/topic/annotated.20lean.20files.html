---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/annotated.20lean.20files.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/annotated.20lean.20files.html">annotated lean files</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="195553127"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/annotated%20lean%20files/near/195553127" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Rute <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/annotated.20lean.20files.html#195553127">(Apr 28 2020 at 12:05)</a>:</h4>
<p><a href="https://github.com/jasonrute/annotated_lean" title="https://github.com/jasonrute/annotated_lean">I made a project which annotates Lean files</a> with all of the information from the Lean server shown graphically for every file in Lean core init and mathlib.</p>
<p><a href="/user_uploads/3121/e2N_zfIuDELBESK1rskK6t9q/Screen-Shot-2020-04-28-at-8.04.08-AM.png" title="Screen-Shot-2020-04-28-at-8.04.08-AM.png">Screen-Shot-2020-04-28-at-8.04.08-AM.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/3121/e2N_zfIuDELBESK1rskK6t9q/Screen-Shot-2020-04-28-at-8.04.08-AM.png" title="Screen-Shot-2020-04-28-at-8.04.08-AM.png"><img src="/user_uploads/3121/e2N_zfIuDELBESK1rskK6t9q/Screen-Shot-2020-04-28-at-8.04.08-AM.png"></a></div>



<a name="195553316"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/annotated%20lean%20files/near/195553316" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Rute <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/annotated.20lean.20files.html#195553316">(Apr 28 2020 at 12:07)</a>:</h4>
<p>I don't know that this is of interest to anyone, but I made it as a way to debug the information I was extracting from the Lean server in <a href="https://github.com/jasonrute/lean_info_scrapper" title="https://github.com/jasonrute/lean_info_scrapper">this project</a>.</p>



<a name="195553519"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/annotated%20lean%20files/near/195553519" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Rute <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/annotated.20lean.20files.html#195553519">(Apr 28 2020 at 12:08)</a>:</h4>
<p>If you are interested in using the Lean server programmatically (for example, through the new <a href="https://github.com/leanprover-community/lean-client-python" title="https://github.com/leanprover-community/lean-client-python">Lean client for Python</a>) it is an easy way to see what information is available (and how messy it is).</p>



<a name="195553755"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/annotated%20lean%20files/near/195553755" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Rute <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/annotated.20lean.20files.html#195553755">(Apr 28 2020 at 12:11)</a>:</h4>
<p>This isn't meant to compete with useful tools like <a href="https://github.com/leanprover-community/format_lean" title="https://github.com/leanprover-community/format_lean">Format Lean</a>.</p>



<a name="195554640"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/annotated%20lean%20files/near/195554640" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Rute <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/annotated.20lean.20files.html#195554640">(Apr 28 2020 at 12:19)</a>:</h4>
<p>I did find a weird quirk.  Sometimes the last letter in a projection (if I'm using the right term) doesn't have any information.  I don't know that this matters for vs code, but it is worth mentioning.  For example, here is an example in <a href="https://htmlpreview.github.io/?https://github.com/jasonrute/annotated_lean/blob/master/html/algebra__archimedean.html" title="https://htmlpreview.github.io/?https://github.com/jasonrute/annotated_lean/blob/master/html/algebra__archimedean.html">algebra/archimedean.lean</a>.<br>
<a href="/user_uploads/3121/7VrDNHuh6aGapmmoSGdmRnjF/Screen-Shot-2020-04-28-at-8.18.57-AM.png" title="Screen-Shot-2020-04-28-at-8.18.57-AM.png">Screen-Shot-2020-04-28-at-8.18.57-AM.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/3121/7VrDNHuh6aGapmmoSGdmRnjF/Screen-Shot-2020-04-28-at-8.18.57-AM.png" title="Screen-Shot-2020-04-28-at-8.18.57-AM.png"><img src="/user_uploads/3121/7VrDNHuh6aGapmmoSGdmRnjF/Screen-Shot-2020-04-28-at-8.18.57-AM.png"></a></div>



<a name="195554940"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/annotated%20lean%20files/near/195554940" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/annotated.20lean.20files.html#195554940">(Apr 28 2020 at 12:22)</a>:</h4>
<p>I'm curious what that looks like if you throw some unicode in there</p>



<a name="195555154"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/annotated%20lean%20files/near/195555154" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Rute <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/annotated.20lean.20files.html#195555154">(Apr 28 2020 at 12:24)</a>:</h4>
<p>What do you mean?  If you have a file in mind, you can look at <a href="https://github.com/jasonrute/annotated_lean/blob/master/index.md" title="https://github.com/jasonrute/annotated_lean/blob/master/index.md">them all here</a>.  Many of the unicode characters show up.  Some with better fixed width than others.  (Fonts are hard!)</p>



<a name="195555309"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/annotated%20lean%20files/near/195555309" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/annotated.20lean.20files.html#195555309">(Apr 28 2020 at 12:25)</a>:</h4>
<p>I was thinking more of mocking up a small test file, rather than looking for good examples in mathlib</p>



<a name="195555399"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/annotated%20lean%20files/near/195555399" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/annotated.20lean.20files.html#195555399">(Apr 28 2020 at 12:26)</a>:</h4>
<p>I am wondering if it is still off by 1 character if the name of the projection has a unicode character in it</p>



<a name="195555425"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/annotated%20lean%20files/near/195555425" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/annotated.20lean.20files.html#195555425">(Apr 28 2020 at 12:26)</a>:</h4>
<p>because this is probably an off by one error in the accounting</p>



<a name="195555497"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/annotated%20lean%20files/near/195555497" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/annotated.20lean.20files.html#195555497">(Apr 28 2020 at 12:27)</a>:</h4>
<p>I don't think mathlib has any projections with unicode names</p>



<a name="195555517"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/annotated%20lean%20files/near/195555517" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Rute <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/annotated.20lean.20files.html#195555517">(Apr 28 2020 at 12:27)</a>:</h4>
<p>Oh, I see.</p>



<a name="195555598"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/annotated%20lean%20files/near/195555598" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/annotated.20lean.20files.html#195555598">(Apr 28 2020 at 12:28)</a>:</h4>
<p>actually <code>.\alpha</code> might be in use somewhere</p>



<a name="195555709"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/annotated%20lean%20files/near/195555709" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Rute <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/annotated.20lean.20files.html#195555709">(Apr 28 2020 at 12:29)</a>:</h4>
<p>Also it isn't always that way.  If you look at <a href="https://htmlpreview.github.io/?https://github.com/jasonrute/annotated_lean/blob/master/html/algebra__archimedean.html" title="https://htmlpreview.github.io/?https://github.com/jasonrute/annotated_lean/blob/master/html/algebra__archimedean.html">algebra/archimedean.lean</a>, you will see that sometimes the final p in <code>.imp</code> is missing information and sometimes it is not.</p>



<a name="195556120"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/annotated%20lean%20files/near/195556120" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Rute <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/annotated.20lean.20files.html#195556120">(Apr 28 2020 at 12:32)</a>:</h4>
<p>Also, for those that just want to browse, if you hover over the annotations, you can see the information they display.  (I used pp.all=true for the data by the way).<br>
<a href="/user_uploads/3121/BN3NC8RsQ-nytepFro1Y5xID/Screen-Shot-2020-04-28-at-8.31.51-AM.png" title="Screen-Shot-2020-04-28-at-8.31.51-AM.png">Screen-Shot-2020-04-28-at-8.31.51-AM.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/3121/BN3NC8RsQ-nytepFro1Y5xID/Screen-Shot-2020-04-28-at-8.31.51-AM.png" title="Screen-Shot-2020-04-28-at-8.31.51-AM.png"><img src="/user_uploads/3121/BN3NC8RsQ-nytepFro1Y5xID/Screen-Shot-2020-04-28-at-8.31.51-AM.png"></a></div>



<a name="195557016"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/annotated%20lean%20files/near/195557016" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/annotated.20lean.20files.html#195557016">(Apr 28 2020 at 12:40)</a>:</h4>
<p>I notice also in algebra/archimedean.lean that all the spans are messed up on L85-90</p>



<a name="195557543"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/annotated%20lean%20files/near/195557543" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Rute <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/annotated.20lean.20files.html#195557543">(Apr 28 2020 at 12:44)</a>:</h4>
<p>how so?</p>



<a name="195557603"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/annotated%20lean%20files/near/195557603" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/annotated.20lean.20files.html#195557603">(Apr 28 2020 at 12:45)</a>:</h4>
<p>besides all being useless things talking about the <code>exact</code> tactic, they are mostly pointing at whitespace</p>



<a name="195557632"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/annotated%20lean%20files/near/195557632" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/annotated.20lean.20files.html#195557632">(Apr 28 2020 at 12:45)</a>:</h4>
<p>This is a nice project! At some point I think we should have a way to produce the <a href="https://leanprover-community.github.io/mathlib_docs/" title="https://leanprover-community.github.io/mathlib_docs/">API docs</a> including the full annotated source (hidden by default of course).</p>



<a name="195558098"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/annotated%20lean%20files/near/195558098" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Rute <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/annotated.20lean.20files.html#195558098">(Apr 28 2020 at 12:49)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> This is a quite common occurrence.  The behavior seems to be that if it is inside of a tactic parser (terminology?) for, say, the exact tactic.  Then every character which is not associated with something else is coded for that tactic.  Since this is designed as a language server, I don't know if this enables certain behavior in vs code and emacs or if it is a bug.</p>



<a name="195558203"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/annotated%20lean%20files/near/195558203" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Rute <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/annotated.20lean.20files.html#195558203">(Apr 28 2020 at 12:50)</a>:</h4>
<p>It even gets weirder when you have tactics inside tactics inside terms inside tactics. <span aria-label="slight smile" class="emoji emoji-1f642" role="img" title="slight smile">:slight_smile:</span></p>



<a name="195558219"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/annotated%20lean%20files/near/195558219" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/annotated.20lean.20files.html#195558219">(Apr 28 2020 at 12:50)</a>:</h4>
<p>I expect that you are the first person to try to visualize the data like this, and doubtless you will find many bugs</p>



<a name="195558490"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/annotated%20lean%20files/near/195558490" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/annotated.20lean.20files.html#195558490">(Apr 28 2020 at 12:52)</a>:</h4>
<p>We should ping <span class="user-mention" data-user-id="221921">@Marc Huisinga</span> who seems to be related to Lean 4 server mode.</p>



<a name="195558761"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/annotated%20lean%20files/near/195558761" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Marc Huisinga <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/annotated.20lean.20files.html#195558761">(Apr 28 2020 at 12:55)</a>:</h4>
<p>don't worry, i read pretty much everything on here! unfortunately i can't exactly say much about the server mode yet since i'm still working on getting the necessary glue code in place to get some very basic functionality (ideally so i can at least transition from emacs to vscode ...)</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>