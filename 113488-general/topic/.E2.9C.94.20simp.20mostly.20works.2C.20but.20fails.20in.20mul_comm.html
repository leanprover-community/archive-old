---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/.E2.9C.94.20simp.20mostly.20works.2C.20but.20fails.20in.20mul_comm.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.E2.9C.94.20simp.20mostly.20works.2C.20but.20fails.20in.20mul_comm.html">✔ simp mostly works, but fails in mul_comm</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="266756465"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%E2%9C%94%20simp%20mostly%20works%2C%20but%20fails%20in%20mul_comm/near/266756465" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sigma <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.E2.9C.94.20simp.20mostly.20works.2C.20but.20fails.20in.20mul_comm.html#266756465">(Jan 04 2022 at 00:52)</a>:</h4>
<p>I'm defining a comm_ring, the ring part all goes over fine, simp unfolds the multiplication to its definition.  But once I try to prove mul_comm, simp fails and can't unfold them for some reason.  It just says "simplify tactic failed to simplify"  <a href="/user_uploads/3121/x1Ad9FsF0DbHsFCT6Hm8kQFV/image.png">image.png</a> </p>
<div class="message_inline_image"><a href="/user_uploads/3121/x1Ad9FsF0DbHsFCT6Hm8kQFV/image.png" title="image.png"><img src="/user_uploads/3121/x1Ad9FsF0DbHsFCT6Hm8kQFV/image.png"></a></div><p>And when I try to take baby steps and add in a</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="k">have</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">b</span>  <span class="bp">=</span> <span class="n">seq.mk</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">n</span><span class="o">,</span> <span class="n">finset.sum</span> <span class="o">(</span><span class="n">finset.nat.antidiagonal</span> <span class="n">n</span><span class="o">)</span>
    <span class="o">(</span><span class="bp">λ</span> <span class="n">m</span> <span class="o">:</span> <span class="n">ℕ</span> <span class="bp">×</span> <span class="n">ℕ</span><span class="o">,</span> <span class="n">a.f</span> <span class="n">m.fst</span> <span class="bp">*</span> <span class="n">b.f</span> <span class="n">m.snd</span><span class="o">)),</span>
</code></pre></div>
<p>it says failed to synthesize instance of <code>has_mul (seq M)</code>.  What's going wrong?</p>



<a name="266756492"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%E2%9C%94%20simp%20mostly%20works%2C%20but%20fails%20in%20mul_comm/near/266756492" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.E2.9C.94.20simp.20mostly.20works.2C.20but.20fails.20in.20mul_comm.html#266756492">(Jan 04 2022 at 00:52)</a>:</h4>
<p>can you post your code?</p>



<a name="266756545"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%E2%9C%94%20simp%20mostly%20works%2C%20but%20fails%20in%20mul_comm/near/266756545" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sigma <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.E2.9C.94.20simp.20mostly.20works.2C.20but.20fails.20in.20mul_comm.html#266756545">(Jan 04 2022 at 00:53)</a>:</h4>
<p>its spread over a couple files, but I can try</p>



<a name="266756695"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%E2%9C%94%20simp%20mostly%20works%2C%20but%20fails%20in%20mul_comm/near/266756695" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.E2.9C.94.20simp.20mostly.20works.2C.20but.20fails.20in.20mul_comm.html#266756695">(Jan 04 2022 at 00:55)</a>:</h4>
<p>if it's mathlib just push to a branch and we can look at it, or try to make a <a href="https://leanprover-community.github.io/mwe.html">#mwe</a>; we have no clue what <code>seq_ext</code> is</p>



<a name="266756741"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%E2%9C%94%20simp%20mostly%20works%2C%20but%20fails%20in%20mul_comm/near/266756741" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.E2.9C.94.20simp.20mostly.20works.2C.20but.20fails.20in.20mul_comm.html#266756741">(Jan 04 2022 at 00:55)</a>:</h4>
<p>(else just a gist)</p>



<a name="266756874"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%E2%9C%94%20simp%20mostly%20works%2C%20but%20fails%20in%20mul_comm/near/266756874" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.E2.9C.94.20simp.20mostly.20works.2C.20but.20fails.20in.20mul_comm.html#266756874">(Jan 04 2022 at 00:55)</a>:</h4>
<p>Try defining the mul instance before defining the ring instance. In between, have a lemma that says what multiplication of seq means</p>



<a name="266756875"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%E2%9C%94%20simp%20mostly%20works%2C%20but%20fails%20in%20mul_comm/near/266756875" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.E2.9C.94.20simp.20mostly.20works.2C.20but.20fails.20in.20mul_comm.html#266756875">(Jan 04 2022 at 00:55)</a>:</h4>
<p>I guess what's going on is that you defined the <code>mul</code> in that definition of <code>comm_ring</code>, and so Lean is gettinf confused what you really want to do</p>



<a name="266758467"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%E2%9C%94%20simp%20mostly%20works%2C%20but%20fails%20in%20mul_comm/near/266758467" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sigma <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.E2.9C.94.20simp.20mostly.20works.2C.20but.20fails.20in.20mul_comm.html#266758467">(Jan 04 2022 at 01:15)</a>:</h4>
<p>defining the mul ahead of it and a simp lemma worked, thanks</p>



<a name="266758619"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%E2%9C%94%20simp%20mostly%20works%2C%20but%20fails%20in%20mul_comm/near/266758619" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Notification Bot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.E2.9C.94.20simp.20mostly.20works.2C.20but.20fails.20in.20mul_comm.html#266758619">(Jan 04 2022 at 01:17)</a>:</h4>
<p><span class="user-mention silent" data-user-id="436145">Sigma</span> has marked this topic as resolved.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>