---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/not.20a.20structure.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/not.20a.20structure.html">not a structure</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="199003107"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/not%20a%20structure/near/199003107" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/not.20a.20structure.html#199003107">(May 28 2020 at 10:03)</a>:</h4>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="n">algebra</span><span class="bp">.</span><span class="n">ordered_group</span>

<span class="kn">set_option</span> <span class="n">old_structure_cmd</span> <span class="n">true</span>

<span class="c">/-</span><span class="cm">- Extend `nonneg_add_comm_group` to support ordered rings</span>
<span class="cm">  specified by their nonnegative elements -/</span>
<span class="n">class</span> <span class="n">nonneg_ring</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="kn">extends</span> <span class="n">ring</span> <span class="n">α</span><span class="o">,</span> <span class="n">nonneg_add_comm_group</span> <span class="n">α</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">mul_nonneg</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">{</span><span class="n">a</span> <span class="n">b</span><span class="o">},</span> <span class="n">nonneg</span> <span class="n">a</span> <span class="bp">→</span> <span class="n">nonneg</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">nonneg</span> <span class="o">(</span><span class="n">a</span> <span class="bp">*</span> <span class="n">b</span><span class="o">))</span>
<span class="o">(</span><span class="n">mul_pos</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">{</span><span class="n">a</span> <span class="n">b</span><span class="o">},</span> <span class="n">pos</span> <span class="n">a</span> <span class="bp">→</span> <span class="n">pos</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">pos</span> <span class="o">(</span><span class="n">a</span> <span class="bp">*</span> <span class="n">b</span><span class="o">))</span>
<span class="o">(</span><span class="n">zero_ne_one</span> <span class="o">:</span> <span class="o">(</span><span class="mi">0</span> <span class="o">:</span> <span class="n">α</span><span class="o">)</span> <span class="bp">≠</span> <span class="mi">1</span><span class="o">)</span>

<span class="c">/-</span><span class="cm">- Extend `nonneg_add_comm_group` to support linearly ordered rings</span>
<span class="cm">  specified by their nonnegative elements -/</span>
<span class="n">class</span> <span class="n">linear_nonneg_ring</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="kn">extends</span> <span class="n">domain</span> <span class="n">α</span><span class="o">,</span> <span class="n">nonneg_add_comm_group</span> <span class="n">α</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">mul_nonneg</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">{</span><span class="n">a</span> <span class="n">b</span><span class="o">},</span> <span class="n">nonneg</span> <span class="n">a</span> <span class="bp">→</span> <span class="n">nonneg</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">nonneg</span> <span class="o">(</span><span class="n">a</span> <span class="bp">*</span> <span class="n">b</span><span class="o">))</span>
<span class="o">(</span><span class="n">nonneg_total</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">a</span><span class="o">,</span> <span class="n">nonneg</span> <span class="n">a</span> <span class="bp">∨</span> <span class="n">nonneg</span> <span class="o">(</span><span class="bp">-</span><span class="n">a</span><span class="o">))</span>

<span class="kn">namespace</span> <span class="n">nonneg_ring</span>
<span class="kn">variables</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">nonneg_ring</span> <span class="n">α</span><span class="o">]</span>

<span class="n">def</span> <span class="n">to_linear_nonneg_ring</span>
  <span class="o">(</span><span class="n">nonneg_total</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">a</span> <span class="o">:</span> <span class="n">α</span><span class="o">,</span> <span class="n">nonneg</span> <span class="n">a</span> <span class="bp">∨</span> <span class="n">nonneg</span> <span class="o">(</span><span class="bp">-</span><span class="n">a</span><span class="o">))</span>
  <span class="o">:</span> <span class="n">linear_nonneg_ring</span> <span class="n">α</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">nonneg_total</span> <span class="o">:=</span> <span class="n">nonneg_total</span><span class="o">,</span>
  <span class="n">eq_zero_or_eq_zero_of_mul_eq_zero</span> <span class="o">:=</span> <span class="n">sorry</span><span class="o">,</span>
  <span class="bp">..</span><span class="err">‹</span><span class="n">nonneg_ring</span> <span class="n">α</span><span class="err">›</span> <span class="o">}</span>

<span class="kn">end</span> <span class="n">nonneg_ring</span>
</code></pre></div>



<a name="199003122"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/not%20a%20structure/near/199003122" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/not.20a.20structure.html#199003122">(May 28 2020 at 10:04)</a>:</h4>
<div class="codehilite"><pre><span></span><code><span class="n">invalid</span> <span class="kn">structure</span> <span class="n">value</span> <span class="o">{</span><span class="bp">...</span><span class="o">},</span> <span class="n">expected</span> <span class="n">type</span> <span class="n">is</span> <span class="n">known</span><span class="o">,</span> <span class="n">but</span> <span class="n">it</span> <span class="n">is</span> <span class="n">not</span> <span class="n">a</span> <span class="kn">structure</span>
  <span class="n">linear_nonneg_ring</span> <span class="n">α</span>
</code></pre></div>



<a name="199003169"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/not%20a%20structure/near/199003169" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/not.20a.20structure.html#199003169">(May 28 2020 at 10:04)</a>:</h4>
<p>the error is in the last declaration</p>



<a name="199003184"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/not%20a%20structure/near/199003184" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/not.20a.20structure.html#199003184">(May 28 2020 at 10:04)</a>:</h4>
<p>somehow Lean decided that I can't use <code>{</code> for <code>linear_nonneg_ring</code></p>



<a name="199003352"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/not%20a%20structure/near/199003352" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/not.20a.20structure.html#199003352">(May 28 2020 at 10:06)</a>:</h4>
<p>I get no errors on master</p>



<a name="199003418"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/not%20a%20structure/near/199003418" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/not.20a.20structure.html#199003418">(May 28 2020 at 10:07)</a>:</h4>
<p>you could also try</p>
<div class="codehilite"><pre><span></span><code><span class="o">{</span> <span class="n">linear_nonneg_ring</span> <span class="bp">.</span>
  <span class="n">nonneg_total</span> <span class="o">:=</span> <span class="n">nonneg_total</span><span class="o">,</span>
  <span class="n">eq_zero_or_eq_zero_of_mul_eq_zero</span> <span class="o">:=</span> <span class="n">sorry</span><span class="o">,</span>
  <span class="bp">..</span><span class="err">‹</span><span class="n">nonneg_ring</span> <span class="n">α</span><span class="err">›</span> <span class="o">}</span>
</code></pre></div>



<a name="199003461"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/not%20a%20structure/near/199003461" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/not.20a.20structure.html#199003461">(May 28 2020 at 10:07)</a>:</h4>
<div class="codehilite"><pre><span></span><code><span class="n">invalid</span> <span class="kn">structure</span> <span class="kn">instance</span><span class="o">,</span> <span class="err">&#39;</span><span class="n">linear_nonneg_ring&#39;</span> <span class="n">is</span> <span class="n">not</span> <span class="n">the</span> <span class="n">name</span> <span class="n">of</span> <span class="n">a</span> <span class="kn">structure</span> <span class="n">type</span>
</code></pre></div>



<a name="199003489"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/not%20a%20structure/near/199003489" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/not.20a.20structure.html#199003489">(May 28 2020 at 10:07)</a>:</h4>
<p><code>#print linear_nonneg_ring</code>?</p>



<a name="199003588"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/not%20a%20structure/near/199003588" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/not.20a.20structure.html#199003588">(May 28 2020 at 10:08)</a>:</h4>
<p>also for some reason the definition of <code>linear_nonneg_ring</code> is a bit slow to elaborate</p>



<a name="199003599"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/not%20a%20structure/near/199003599" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/not.20a.20structure.html#199003599">(May 28 2020 at 10:08)</a>:</h4>
<div class="codehilite"><pre><span></span><code><span class="bp">@</span><span class="o">[</span><span class="n">class</span><span class="o">,</span> <span class="n">priority</span> <span class="mi">100</span><span class="o">]</span>
<span class="kn">inductive</span> <span class="n">linear_nonneg_ring</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u_1</span> <span class="bp">→</span> <span class="kt">Type</span> <span class="n">u_1</span>
<span class="n">constructors</span><span class="o">:</span>
<span class="n">linear_nonneg_ring</span><span class="bp">.</span><span class="n">mk</span> <span class="o">:</span> <span class="bp">Π</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u_1</span><span class="o">}</span> <span class="o">[</span><span class="bp">_</span><span class="n">to_ring</span> <span class="o">:</span> <span class="n">ring</span> <span class="n">α</span><span class="o">]</span> <span class="o">[</span><span class="bp">_</span><span class="n">to_no_zero_divisors</span> <span class="o">:</span> <span class="n">no_zero_divisors</span> <span class="n">α</span><span class="o">]</span> <span class="o">[</span><span class="bp">_</span><span class="n">to_nonzero</span> <span class="o">:</span> <span class="n">nonzero</span> <span class="n">α</span><span class="o">]</span>
<span class="o">(</span><span class="n">add</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">α</span><span class="o">)</span> <span class="o">(</span><span class="n">add_assoc</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">α</span><span class="o">),</span> <span class="n">a</span> <span class="bp">+</span> <span class="n">b</span> <span class="bp">+</span> <span class="n">c</span> <span class="bp">=</span> <span class="n">a</span> <span class="bp">+</span> <span class="o">(</span><span class="n">b</span> <span class="bp">+</span> <span class="n">c</span><span class="o">))</span> <span class="o">(</span><span class="n">zero</span> <span class="o">:</span> <span class="n">α</span><span class="o">)</span>
<span class="o">(</span><span class="n">zero_add</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">α</span><span class="o">),</span> <span class="mi">0</span> <span class="bp">+</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">a</span><span class="o">)</span> <span class="o">(</span><span class="n">add_zero</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">α</span><span class="o">),</span> <span class="n">a</span> <span class="bp">+</span> <span class="mi">0</span> <span class="bp">=</span> <span class="n">a</span><span class="o">)</span> <span class="o">(</span><span class="n">neg</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">α</span><span class="o">)</span>
<span class="o">(</span><span class="n">add_left_neg</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">α</span><span class="o">),</span> <span class="bp">-</span><span class="n">a</span> <span class="bp">+</span> <span class="n">a</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">)</span> <span class="o">(</span><span class="n">add_comm</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">α</span><span class="o">),</span> <span class="n">a</span> <span class="bp">+</span> <span class="n">b</span> <span class="bp">=</span> <span class="n">b</span> <span class="bp">+</span> <span class="n">a</span><span class="o">)</span> <span class="o">(</span><span class="n">nonneg</span> <span class="n">pos</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="kt">Prop</span><span class="o">)</span>
<span class="o">(</span><span class="n">pos_iff</span> <span class="o">:</span>
  <span class="n">auto_param</span> <span class="o">(</span><span class="bp">∀</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">α</span><span class="o">),</span> <span class="n">pos</span> <span class="n">a</span> <span class="bp">↔</span> <span class="n">nonneg</span> <span class="n">a</span> <span class="bp">∧</span> <span class="bp">¬</span><span class="n">nonneg</span> <span class="o">(</span><span class="bp">-</span><span class="n">a</span><span class="o">))</span> <span class="o">(</span><span class="n">name</span><span class="bp">.</span><span class="n">mk_string</span> <span class="s2">&quot;order_laws_tac&quot;</span> <span class="n">name</span><span class="bp">.</span><span class="n">anonymous</span><span class="o">))</span>
<span class="o">(</span><span class="n">zero_nonneg</span> <span class="o">:</span> <span class="n">nonneg</span> <span class="mi">0</span><span class="o">)</span> <span class="o">(</span><span class="n">add_nonneg</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">{</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">α</span><span class="o">},</span> <span class="n">nonneg</span> <span class="n">a</span> <span class="bp">→</span> <span class="n">nonneg</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">nonneg</span> <span class="o">(</span><span class="n">a</span> <span class="bp">+</span> <span class="n">b</span><span class="o">))</span>
<span class="o">(</span><span class="n">nonneg_antisymm</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">{</span><span class="n">a</span> <span class="o">:</span> <span class="n">α</span><span class="o">},</span> <span class="n">nonneg</span> <span class="n">a</span> <span class="bp">→</span> <span class="n">nonneg</span> <span class="o">(</span><span class="bp">-</span><span class="n">a</span><span class="o">)</span> <span class="bp">→</span> <span class="n">a</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">),</span>
  <span class="o">(</span><span class="bp">∀</span> <span class="o">{</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">α</span><span class="o">},</span> <span class="n">nonneg</span> <span class="n">a</span> <span class="bp">→</span> <span class="n">nonneg</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">nonneg</span> <span class="o">(</span><span class="n">a</span> <span class="bp">*</span> <span class="n">b</span><span class="o">))</span> <span class="bp">→</span>
  <span class="o">(</span><span class="bp">∀</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">α</span><span class="o">),</span> <span class="n">nonneg</span> <span class="n">a</span> <span class="bp">∨</span> <span class="n">nonneg</span> <span class="o">(</span><span class="bp">-</span><span class="n">a</span><span class="o">))</span> <span class="bp">→</span> <span class="n">linear_nonneg_ring</span> <span class="n">α</span>
</code></pre></div>



<a name="199003625"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/not%20a%20structure/near/199003625" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/not.20a.20structure.html#199003625">(May 28 2020 at 10:09)</a>:</h4>
<p>aha</p>



<a name="199003647"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/not%20a%20structure/near/199003647" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/not.20a.20structure.html#199003647">(May 28 2020 at 10:09)</a>:</h4>
<p>wait where's my <code>nonneg_total</code></p>



<a name="199003655"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/not%20a%20structure/near/199003655" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/not.20a.20structure.html#199003655">(May 28 2020 at 10:09)</a>:</h4>
<div class="codehilite"><pre><span></span><code><span class="bp">#</span><span class="kn">print</span> <span class="n">linear_nonneg_ring</span>
</code></pre></div>


<div class="codehilite"><pre><span></span><code><span class="bp">@</span><span class="o">[</span><span class="n">class</span><span class="o">]</span>
<span class="kn">structure</span> <span class="n">linear_nonneg_ring</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u_1</span> <span class="bp">→</span> <span class="kt">Type</span> <span class="n">u_1</span>
<span class="n">fields</span><span class="o">:</span>
<span class="n">linear_nonneg_ring</span><span class="bp">.</span><span class="n">add</span> <span class="o">:</span> <span class="bp">Π</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u_1</span><span class="o">}</span> <span class="o">[</span><span class="n">c</span> <span class="o">:</span> <span class="n">linear_nonneg_ring</span> <span class="n">α</span><span class="o">],</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">α</span>
<span class="n">linear_nonneg_ring</span><span class="bp">.</span><span class="n">add_assoc</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u_1</span><span class="o">}</span> <span class="o">[</span><span class="n">c</span> <span class="o">:</span> <span class="n">linear_nonneg_ring</span> <span class="n">α</span><span class="o">]</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="n">c_1</span> <span class="o">:</span> <span class="n">α</span><span class="o">),</span> <span class="n">a</span> <span class="bp">+</span> <span class="n">b</span> <span class="bp">+</span> <span class="n">c_1</span> <span class="bp">=</span> <span class="n">a</span> <span class="bp">+</span> <span class="o">(</span><span class="n">b</span> <span class="bp">+</span> <span class="n">c_1</span><span class="o">)</span>
<span class="n">linear_nonneg_ring</span><span class="bp">.</span><span class="n">zero</span> <span class="o">:</span> <span class="bp">Π</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u_1</span><span class="o">}</span> <span class="o">[</span><span class="n">c</span> <span class="o">:</span> <span class="n">linear_nonneg_ring</span> <span class="n">α</span><span class="o">],</span> <span class="n">α</span>
<span class="n">linear_nonneg_ring</span><span class="bp">.</span><span class="n">zero_add</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u_1</span><span class="o">}</span> <span class="o">[</span><span class="n">c</span> <span class="o">:</span> <span class="n">linear_nonneg_ring</span> <span class="n">α</span><span class="o">]</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">α</span><span class="o">),</span> <span class="mi">0</span> <span class="bp">+</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">a</span>
<span class="n">linear_nonneg_ring</span><span class="bp">.</span><span class="n">add_zero</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u_1</span><span class="o">}</span> <span class="o">[</span><span class="n">c</span> <span class="o">:</span> <span class="n">linear_nonneg_ring</span> <span class="n">α</span><span class="o">]</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">α</span><span class="o">),</span> <span class="n">a</span> <span class="bp">+</span> <span class="mi">0</span> <span class="bp">=</span> <span class="n">a</span>
<span class="n">linear_nonneg_ring</span><span class="bp">.</span><span class="n">neg</span> <span class="o">:</span> <span class="bp">Π</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u_1</span><span class="o">}</span> <span class="o">[</span><span class="n">c</span> <span class="o">:</span> <span class="n">linear_nonneg_ring</span> <span class="n">α</span><span class="o">],</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">α</span>
<span class="n">linear_nonneg_ring</span><span class="bp">.</span><span class="n">add_left_neg</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u_1</span><span class="o">}</span> <span class="o">[</span><span class="n">c</span> <span class="o">:</span> <span class="n">linear_nonneg_ring</span> <span class="n">α</span><span class="o">]</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">α</span><span class="o">),</span> <span class="bp">-</span><span class="n">a</span> <span class="bp">+</span> <span class="n">a</span> <span class="bp">=</span> <span class="mi">0</span>
<span class="n">linear_nonneg_ring</span><span class="bp">.</span><span class="n">add_comm</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u_1</span><span class="o">}</span> <span class="o">[</span><span class="n">c</span> <span class="o">:</span> <span class="n">linear_nonneg_ring</span> <span class="n">α</span><span class="o">]</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">α</span><span class="o">),</span> <span class="n">a</span> <span class="bp">+</span> <span class="n">b</span> <span class="bp">=</span> <span class="n">b</span> <span class="bp">+</span> <span class="n">a</span>
<span class="n">linear_nonneg_ring</span><span class="bp">.</span><span class="n">mul</span> <span class="o">:</span> <span class="bp">Π</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u_1</span><span class="o">}</span> <span class="o">[</span><span class="n">c</span> <span class="o">:</span> <span class="n">linear_nonneg_ring</span> <span class="n">α</span><span class="o">],</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">α</span>
<span class="n">linear_nonneg_ring</span><span class="bp">.</span><span class="n">mul_assoc</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u_1</span><span class="o">}</span> <span class="o">[</span><span class="n">c</span> <span class="o">:</span> <span class="n">linear_nonneg_ring</span> <span class="n">α</span><span class="o">]</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="n">c_1</span> <span class="o">:</span> <span class="n">α</span><span class="o">),</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">b</span> <span class="bp">*</span> <span class="n">c_1</span> <span class="bp">=</span> <span class="n">a</span> <span class="bp">*</span> <span class="o">(</span><span class="n">b</span> <span class="bp">*</span> <span class="n">c_1</span><span class="o">)</span>
<span class="n">linear_nonneg_ring</span><span class="bp">.</span><span class="n">one</span> <span class="o">:</span> <span class="bp">Π</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u_1</span><span class="o">}</span> <span class="o">[</span><span class="n">c</span> <span class="o">:</span> <span class="n">linear_nonneg_ring</span> <span class="n">α</span><span class="o">],</span> <span class="n">α</span>
<span class="n">linear_nonneg_ring</span><span class="bp">.</span><span class="n">one_mul</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u_1</span><span class="o">}</span> <span class="o">[</span><span class="n">c</span> <span class="o">:</span> <span class="n">linear_nonneg_ring</span> <span class="n">α</span><span class="o">]</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">α</span><span class="o">),</span> <span class="mi">1</span> <span class="bp">*</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">a</span>
<span class="n">linear_nonneg_ring</span><span class="bp">.</span><span class="n">mul_one</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u_1</span><span class="o">}</span> <span class="o">[</span><span class="n">c</span> <span class="o">:</span> <span class="n">linear_nonneg_ring</span> <span class="n">α</span><span class="o">]</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">α</span><span class="o">),</span> <span class="n">a</span> <span class="bp">*</span> <span class="mi">1</span> <span class="bp">=</span> <span class="n">a</span>
<span class="n">linear_nonneg_ring</span><span class="bp">.</span><span class="n">left_distrib</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u_1</span><span class="o">}</span> <span class="o">[</span><span class="n">c</span> <span class="o">:</span> <span class="n">linear_nonneg_ring</span> <span class="n">α</span><span class="o">]</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="n">c_1</span> <span class="o">:</span> <span class="n">α</span><span class="o">),</span> <span class="n">a</span> <span class="bp">*</span> <span class="o">(</span><span class="n">b</span> <span class="bp">+</span> <span class="n">c_1</span><span class="o">)</span> <span class="bp">=</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">b</span> <span class="bp">+</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">c_1</span>
<span class="n">linear_nonneg_ring</span><span class="bp">.</span><span class="n">right_distrib</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u_1</span><span class="o">}</span> <span class="o">[</span><span class="n">c</span> <span class="o">:</span> <span class="n">linear_nonneg_ring</span> <span class="n">α</span><span class="o">]</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="n">c_1</span> <span class="o">:</span> <span class="n">α</span><span class="o">),</span> <span class="o">(</span><span class="n">a</span> <span class="bp">+</span> <span class="n">b</span><span class="o">)</span> <span class="bp">*</span> <span class="n">c_1</span> <span class="bp">=</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">c_1</span> <span class="bp">+</span> <span class="n">b</span> <span class="bp">*</span> <span class="n">c_1</span>
<span class="n">linear_nonneg_ring</span><span class="bp">.</span><span class="n">eq_zero_or_eq_zero_of_mul_eq_zero</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u_1</span><span class="o">}</span> <span class="o">[</span><span class="n">c</span> <span class="o">:</span> <span class="n">linear_nonneg_ring</span> <span class="n">α</span><span class="o">]</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">α</span><span class="o">),</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">b</span> <span class="bp">=</span> <span class="mi">0</span> <span class="bp">→</span> <span class="n">a</span> <span class="bp">=</span> <span class="mi">0</span> <span class="bp">∨</span> <span class="n">b</span> <span class="bp">=</span> <span class="mi">0</span>
<span class="n">linear_nonneg_ring</span><span class="bp">.</span><span class="n">zero_ne_one</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u_1</span><span class="o">}</span> <span class="o">[</span><span class="n">c</span> <span class="o">:</span> <span class="n">linear_nonneg_ring</span> <span class="n">α</span><span class="o">],</span> <span class="mi">0</span> <span class="bp">≠</span> <span class="mi">1</span>
<span class="n">linear_nonneg_ring</span><span class="bp">.</span><span class="n">nonneg</span> <span class="o">:</span> <span class="bp">Π</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u_1</span><span class="o">}</span> <span class="o">[</span><span class="n">c</span> <span class="o">:</span> <span class="n">linear_nonneg_ring</span> <span class="n">α</span><span class="o">],</span> <span class="n">α</span> <span class="bp">→</span> <span class="kt">Prop</span>
<span class="n">linear_nonneg_ring</span><span class="bp">.</span><span class="n">pos</span> <span class="o">:</span> <span class="bp">Π</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u_1</span><span class="o">}</span> <span class="o">[</span><span class="n">c</span> <span class="o">:</span> <span class="n">linear_nonneg_ring</span> <span class="n">α</span><span class="o">],</span> <span class="n">α</span> <span class="bp">→</span> <span class="kt">Prop</span>
<span class="n">linear_nonneg_ring</span><span class="bp">.</span><span class="n">pos_iff</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u_1</span><span class="o">}</span> <span class="o">[</span><span class="n">c</span> <span class="o">:</span> <span class="n">linear_nonneg_ring</span> <span class="n">α</span><span class="o">],</span>
  <span class="n">auto_param</span>
    <span class="o">(</span><span class="bp">∀</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">α</span><span class="o">),</span> <span class="n">linear_nonneg_ring</span><span class="bp">.</span><span class="n">pos</span> <span class="n">a</span> <span class="bp">↔</span> <span class="n">linear_nonneg_ring</span><span class="bp">.</span><span class="n">nonneg</span> <span class="n">a</span> <span class="bp">∧</span> <span class="bp">¬</span><span class="n">linear_nonneg_ring</span><span class="bp">.</span><span class="n">nonneg</span> <span class="o">(</span><span class="bp">-</span><span class="n">a</span><span class="o">))</span>
    <span class="o">(</span><span class="n">name</span><span class="bp">.</span><span class="n">mk_string</span> <span class="s2">&quot;order_laws_tac&quot;</span> <span class="n">name</span><span class="bp">.</span><span class="n">anonymous</span><span class="o">)</span>
<span class="n">linear_nonneg_ring</span><span class="bp">.</span><span class="n">zero_nonneg</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u_1</span><span class="o">}</span> <span class="o">[</span><span class="n">c</span> <span class="o">:</span> <span class="n">linear_nonneg_ring</span> <span class="n">α</span><span class="o">],</span> <span class="n">linear_nonneg_ring</span><span class="bp">.</span><span class="n">nonneg</span> <span class="mi">0</span>
<span class="n">linear_nonneg_ring</span><span class="bp">.</span><span class="n">add_nonneg</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u_1</span><span class="o">}</span> <span class="o">[</span><span class="n">c</span> <span class="o">:</span> <span class="n">linear_nonneg_ring</span> <span class="n">α</span><span class="o">]</span> <span class="o">{</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">α</span><span class="o">},</span>
  <span class="n">linear_nonneg_ring</span><span class="bp">.</span><span class="n">nonneg</span> <span class="n">a</span> <span class="bp">→</span> <span class="n">linear_nonneg_ring</span><span class="bp">.</span><span class="n">nonneg</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">linear_nonneg_ring</span><span class="bp">.</span><span class="n">nonneg</span> <span class="o">(</span><span class="n">a</span> <span class="bp">+</span> <span class="n">b</span><span class="o">)</span>
<span class="n">linear_nonneg_ring</span><span class="bp">.</span><span class="n">nonneg_antisymm</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u_1</span><span class="o">}</span> <span class="o">[</span><span class="n">c</span> <span class="o">:</span> <span class="n">linear_nonneg_ring</span> <span class="n">α</span><span class="o">]</span> <span class="o">{</span><span class="n">a</span> <span class="o">:</span> <span class="n">α</span><span class="o">},</span>
  <span class="n">linear_nonneg_ring</span><span class="bp">.</span><span class="n">nonneg</span> <span class="n">a</span> <span class="bp">→</span> <span class="n">linear_nonneg_ring</span><span class="bp">.</span><span class="n">nonneg</span> <span class="o">(</span><span class="bp">-</span><span class="n">a</span><span class="o">)</span> <span class="bp">→</span> <span class="n">a</span> <span class="bp">=</span> <span class="mi">0</span>
<span class="n">linear_nonneg_ring</span><span class="bp">.</span><span class="n">mul_nonneg</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u_1</span><span class="o">}</span> <span class="o">[</span><span class="n">c</span> <span class="o">:</span> <span class="n">linear_nonneg_ring</span> <span class="n">α</span><span class="o">]</span> <span class="o">{</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">α</span><span class="o">},</span>
  <span class="n">linear_nonneg_ring</span><span class="bp">.</span><span class="n">nonneg</span> <span class="n">a</span> <span class="bp">→</span> <span class="n">linear_nonneg_ring</span><span class="bp">.</span><span class="n">nonneg</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">linear_nonneg_ring</span><span class="bp">.</span><span class="n">nonneg</span> <span class="o">(</span><span class="n">a</span> <span class="bp">*</span> <span class="n">b</span><span class="o">)</span>
<span class="n">linear_nonneg_ring</span><span class="bp">.</span><span class="n">nonneg_total</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u_1</span><span class="o">}</span> <span class="o">[</span><span class="n">c</span> <span class="o">:</span> <span class="n">linear_nonneg_ring</span> <span class="n">α</span><span class="o">]</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">α</span><span class="o">),</span> <span class="n">linear_nonneg_ring</span><span class="bp">.</span><span class="n">nonneg</span> <span class="n">a</span> <span class="bp">∨</span> <span class="n">linear_nonneg_ring</span><span class="bp">.</span><span class="n">nonneg</span> <span class="o">(</span><span class="bp">-</span><span class="n">a</span><span class="o">)</span>
</code></pre></div>



<a name="199003679"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/not%20a%20structure/near/199003679" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/not.20a.20structure.html#199003679">(May 28 2020 at 10:09)</a>:</h4>
<p>you got an <code>inductive</code>, not a <code>structure</code></p>



<a name="199003691"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/not%20a%20structure/near/199003691" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/not.20a.20structure.html#199003691">(May 28 2020 at 10:09)</a>:</h4>
<p>why?</p>



<a name="199003701"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/not%20a%20structure/near/199003701" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/not.20a.20structure.html#199003701">(May 28 2020 at 10:09)</a>:</h4>
<p>I didn't touch old_strcture_command</p>



<a name="199003744"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/not%20a%20structure/near/199003744" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/not.20a.20structure.html#199003744">(May 28 2020 at 10:10)</a>:</h4>
<p>this is very strange</p>



<a name="199003757"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/not%20a%20structure/near/199003757" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/not.20a.20structure.html#199003757">(May 28 2020 at 10:10)</a>:</h4>
<p>I wasn't even aware this was a fallback</p>



<a name="199003772"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/not%20a%20structure/near/199003772" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/not.20a.20structure.html#199003772">(May 28 2020 at 10:10)</a>:</h4>
<p>maybe the latest version broke something</p>



<a name="199003802"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/not%20a%20structure/near/199003802" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/not.20a.20structure.html#199003802">(May 28 2020 at 10:10)</a>:</h4>
<p>what's even stranger is the thing above it works</p>



<a name="199003809"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/not%20a%20structure/near/199003809" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/not.20a.20structure.html#199003809">(May 28 2020 at 10:11)</a>:</h4>
<div class="codehilite"><pre><span></span><code><span class="n">ordered_ring</span><span class="bp">.</span><span class="n">lean</span><span class="o">:</span><span class="mi">826</span><span class="o">:</span><span class="mi">0</span><span class="o">:</span> <span class="n">information</span> <span class="kn">print</span> <span class="n">result</span>
<span class="bp">@</span><span class="o">[</span><span class="n">class</span><span class="o">,</span> <span class="n">priority</span> <span class="mi">100</span><span class="o">]</span>
<span class="kn">structure</span> <span class="n">nonneg_ring</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u_1</span> <span class="bp">→</span> <span class="kt">Type</span> <span class="n">u_1</span>
<span class="n">fields</span><span class="o">:</span>
<span class="n">nonneg_ring</span><span class="bp">.</span><span class="n">add</span> <span class="o">:</span> <span class="bp">Π</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u_1</span><span class="o">}</span> <span class="o">[</span><span class="n">c</span> <span class="o">:</span> <span class="n">nonneg_ring</span> <span class="n">α</span><span class="o">],</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">α</span>
<span class="n">nonneg_ring</span><span class="bp">.</span><span class="n">add_assoc</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u_1</span><span class="o">}</span> <span class="o">[</span><span class="n">c</span> <span class="o">:</span> <span class="n">nonneg_ring</span> <span class="n">α</span><span class="o">]</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="n">c_1</span> <span class="o">:</span> <span class="n">α</span><span class="o">),</span> <span class="n">a</span> <span class="bp">+</span> <span class="n">b</span> <span class="bp">+</span> <span class="n">c_1</span> <span class="bp">=</span> <span class="n">a</span> <span class="bp">+</span> <span class="o">(</span><span class="n">b</span> <span class="bp">+</span> <span class="n">c_1</span><span class="o">)</span>
<span class="n">nonneg_ring</span><span class="bp">.</span><span class="n">zero</span> <span class="o">:</span> <span class="bp">Π</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u_1</span><span class="o">}</span> <span class="o">[</span><span class="n">c</span> <span class="o">:</span> <span class="n">nonneg_ring</span> <span class="n">α</span><span class="o">],</span> <span class="n">α</span>
<span class="n">nonneg_ring</span><span class="bp">.</span><span class="n">zero_add</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u_1</span><span class="o">}</span> <span class="o">[</span><span class="n">c</span> <span class="o">:</span> <span class="n">nonneg_ring</span> <span class="n">α</span><span class="o">]</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">α</span><span class="o">),</span> <span class="mi">0</span> <span class="bp">+</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">a</span>
<span class="n">nonneg_ring</span><span class="bp">.</span><span class="n">add_zero</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u_1</span><span class="o">}</span> <span class="o">[</span><span class="n">c</span> <span class="o">:</span> <span class="n">nonneg_ring</span> <span class="n">α</span><span class="o">]</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">α</span><span class="o">),</span> <span class="n">a</span> <span class="bp">+</span> <span class="mi">0</span> <span class="bp">=</span> <span class="n">a</span>
<span class="n">nonneg_ring</span><span class="bp">.</span><span class="n">neg</span> <span class="o">:</span> <span class="bp">Π</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u_1</span><span class="o">}</span> <span class="o">[</span><span class="n">c</span> <span class="o">:</span> <span class="n">nonneg_ring</span> <span class="n">α</span><span class="o">],</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">α</span>
<span class="n">nonneg_ring</span><span class="bp">.</span><span class="n">add_left_neg</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u_1</span><span class="o">}</span> <span class="o">[</span><span class="n">c</span> <span class="o">:</span> <span class="n">nonneg_ring</span> <span class="n">α</span><span class="o">]</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">α</span><span class="o">),</span> <span class="bp">-</span><span class="n">a</span> <span class="bp">+</span> <span class="n">a</span> <span class="bp">=</span> <span class="mi">0</span>
<span class="n">nonneg_ring</span><span class="bp">.</span><span class="n">add_comm</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u_1</span><span class="o">}</span> <span class="o">[</span><span class="n">c</span> <span class="o">:</span> <span class="n">nonneg_ring</span> <span class="n">α</span><span class="o">]</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">α</span><span class="o">),</span> <span class="n">a</span> <span class="bp">+</span> <span class="n">b</span> <span class="bp">=</span> <span class="n">b</span> <span class="bp">+</span> <span class="n">a</span>
<span class="n">nonneg_ring</span><span class="bp">.</span><span class="n">mul</span> <span class="o">:</span> <span class="bp">Π</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u_1</span><span class="o">}</span> <span class="o">[</span><span class="n">c</span> <span class="o">:</span> <span class="n">nonneg_ring</span> <span class="n">α</span><span class="o">],</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">α</span>
<span class="n">nonneg_ring</span><span class="bp">.</span><span class="n">mul_assoc</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u_1</span><span class="o">}</span> <span class="o">[</span><span class="n">c</span> <span class="o">:</span> <span class="n">nonneg_ring</span> <span class="n">α</span><span class="o">]</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="n">c_1</span> <span class="o">:</span> <span class="n">α</span><span class="o">),</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">b</span> <span class="bp">*</span> <span class="n">c_1</span> <span class="bp">=</span> <span class="n">a</span> <span class="bp">*</span> <span class="o">(</span><span class="n">b</span> <span class="bp">*</span> <span class="n">c_1</span><span class="o">)</span>
<span class="n">nonneg_ring</span><span class="bp">.</span><span class="n">one</span> <span class="o">:</span> <span class="bp">Π</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u_1</span><span class="o">}</span> <span class="o">[</span><span class="n">c</span> <span class="o">:</span> <span class="n">nonneg_ring</span> <span class="n">α</span><span class="o">],</span> <span class="n">α</span>
<span class="n">nonneg_ring</span><span class="bp">.</span><span class="n">one_mul</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u_1</span><span class="o">}</span> <span class="o">[</span><span class="n">c</span> <span class="o">:</span> <span class="n">nonneg_ring</span> <span class="n">α</span><span class="o">]</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">α</span><span class="o">),</span> <span class="mi">1</span> <span class="bp">*</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">a</span>
<span class="n">nonneg_ring</span><span class="bp">.</span><span class="n">mul_one</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u_1</span><span class="o">}</span> <span class="o">[</span><span class="n">c</span> <span class="o">:</span> <span class="n">nonneg_ring</span> <span class="n">α</span><span class="o">]</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">α</span><span class="o">),</span> <span class="n">a</span> <span class="bp">*</span> <span class="mi">1</span> <span class="bp">=</span> <span class="n">a</span>
<span class="n">nonneg_ring</span><span class="bp">.</span><span class="n">left_distrib</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u_1</span><span class="o">}</span> <span class="o">[</span><span class="n">c</span> <span class="o">:</span> <span class="n">nonneg_ring</span> <span class="n">α</span><span class="o">]</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="n">c_1</span> <span class="o">:</span> <span class="n">α</span><span class="o">),</span> <span class="n">a</span> <span class="bp">*</span> <span class="o">(</span><span class="n">b</span> <span class="bp">+</span> <span class="n">c_1</span><span class="o">)</span> <span class="bp">=</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">b</span> <span class="bp">+</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">c_1</span>
<span class="n">nonneg_ring</span><span class="bp">.</span><span class="n">right_distrib</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u_1</span><span class="o">}</span> <span class="o">[</span><span class="n">c</span> <span class="o">:</span> <span class="n">nonneg_ring</span> <span class="n">α</span><span class="o">]</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="n">c_1</span> <span class="o">:</span> <span class="n">α</span><span class="o">),</span> <span class="o">(</span><span class="n">a</span> <span class="bp">+</span> <span class="n">b</span><span class="o">)</span> <span class="bp">*</span> <span class="n">c_1</span> <span class="bp">=</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">c_1</span> <span class="bp">+</span> <span class="n">b</span> <span class="bp">*</span> <span class="n">c_1</span>
<span class="n">nonneg_ring</span><span class="bp">.</span><span class="n">nonneg</span> <span class="o">:</span> <span class="bp">Π</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u_1</span><span class="o">}</span> <span class="o">[</span><span class="n">c</span> <span class="o">:</span> <span class="n">nonneg_ring</span> <span class="n">α</span><span class="o">],</span> <span class="n">α</span> <span class="bp">→</span> <span class="kt">Prop</span>
<span class="n">nonneg_ring</span><span class="bp">.</span><span class="n">pos</span> <span class="o">:</span> <span class="bp">Π</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u_1</span><span class="o">}</span> <span class="o">[</span><span class="n">c</span> <span class="o">:</span> <span class="n">nonneg_ring</span> <span class="n">α</span><span class="o">],</span> <span class="n">α</span> <span class="bp">→</span> <span class="kt">Prop</span>
<span class="n">nonneg_ring</span><span class="bp">.</span><span class="n">pos_iff</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u_1</span><span class="o">}</span> <span class="o">[</span><span class="n">c</span> <span class="o">:</span> <span class="n">nonneg_ring</span> <span class="n">α</span><span class="o">],</span>
  <span class="n">auto_param</span> <span class="o">(</span><span class="bp">∀</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">α</span><span class="o">),</span> <span class="n">nonneg_ring</span><span class="bp">.</span><span class="n">pos</span> <span class="n">a</span> <span class="bp">↔</span> <span class="n">nonneg_ring</span><span class="bp">.</span><span class="n">nonneg</span> <span class="n">a</span> <span class="bp">∧</span> <span class="bp">¬</span><span class="n">nonneg_ring</span><span class="bp">.</span><span class="n">nonneg</span> <span class="o">(</span><span class="bp">-</span><span class="n">a</span><span class="o">))</span>
    <span class="o">(</span><span class="n">name</span><span class="bp">.</span><span class="n">mk_string</span> <span class="s2">&quot;order_laws_tac&quot;</span> <span class="n">name</span><span class="bp">.</span><span class="n">anonymous</span><span class="o">)</span>
<span class="n">nonneg_ring</span><span class="bp">.</span><span class="n">zero_nonneg</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u_1</span><span class="o">}</span> <span class="o">[</span><span class="n">c</span> <span class="o">:</span> <span class="n">nonneg_ring</span> <span class="n">α</span><span class="o">],</span> <span class="n">nonneg_ring</span><span class="bp">.</span><span class="n">nonneg</span> <span class="mi">0</span>
<span class="n">nonneg_ring</span><span class="bp">.</span><span class="n">add_nonneg</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u_1</span><span class="o">}</span> <span class="o">[</span><span class="n">c</span> <span class="o">:</span> <span class="n">nonneg_ring</span> <span class="n">α</span><span class="o">]</span> <span class="o">{</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">α</span><span class="o">},</span>
  <span class="n">nonneg_ring</span><span class="bp">.</span><span class="n">nonneg</span> <span class="n">a</span> <span class="bp">→</span> <span class="n">nonneg_ring</span><span class="bp">.</span><span class="n">nonneg</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">nonneg_ring</span><span class="bp">.</span><span class="n">nonneg</span> <span class="o">(</span><span class="n">a</span> <span class="bp">+</span> <span class="n">b</span><span class="o">)</span>
<span class="n">nonneg_ring</span><span class="bp">.</span><span class="n">nonneg_antisymm</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u_1</span><span class="o">}</span> <span class="o">[</span><span class="n">c</span> <span class="o">:</span> <span class="n">nonneg_ring</span> <span class="n">α</span><span class="o">]</span> <span class="o">{</span><span class="n">a</span> <span class="o">:</span> <span class="n">α</span><span class="o">},</span> <span class="n">nonneg_ring</span><span class="bp">.</span><span class="n">nonneg</span> <span class="n">a</span> <span class="bp">→</span> <span class="n">nonneg_ring</span><span class="bp">.</span><span class="n">nonneg</span> <span class="o">(</span><span class="bp">-</span><span class="n">a</span><span class="o">)</span> <span class="bp">→</span> <span class="n">a</span> <span class="bp">=</span> <span class="mi">0</span>
<span class="n">nonneg_ring</span><span class="bp">.</span><span class="n">mul_nonneg</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u_1</span><span class="o">}</span> <span class="o">[</span><span class="n">c</span> <span class="o">:</span> <span class="n">nonneg_ring</span> <span class="n">α</span><span class="o">]</span> <span class="o">{</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">α</span><span class="o">},</span>
  <span class="n">nonneg_ring</span><span class="bp">.</span><span class="n">nonneg</span> <span class="n">a</span> <span class="bp">→</span> <span class="n">nonneg_ring</span><span class="bp">.</span><span class="n">nonneg</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">nonneg_ring</span><span class="bp">.</span><span class="n">nonneg</span> <span class="o">(</span><span class="n">a</span> <span class="bp">*</span> <span class="n">b</span><span class="o">)</span>
<span class="n">nonneg_ring</span><span class="bp">.</span><span class="n">mul_pos</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u_1</span><span class="o">}</span> <span class="o">[</span><span class="n">c</span> <span class="o">:</span> <span class="n">nonneg_ring</span> <span class="n">α</span><span class="o">]</span> <span class="o">{</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">α</span><span class="o">},</span> <span class="n">nonneg_ring</span><span class="bp">.</span><span class="n">pos</span> <span class="n">a</span> <span class="bp">→</span> <span class="n">nonneg_ring</span><span class="bp">.</span><span class="n">pos</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">nonneg_ring</span><span class="bp">.</span><span class="n">pos</span> <span class="o">(</span><span class="n">a</span> <span class="bp">*</span> <span class="n">b</span><span class="o">)</span>
<span class="n">nonneg_ring</span><span class="bp">.</span><span class="n">zero_ne_one</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u_1</span><span class="o">}</span> <span class="o">[</span><span class="n">c</span> <span class="o">:</span> <span class="n">nonneg_ring</span> <span class="n">α</span><span class="o">],</span> <span class="mi">0</span> <span class="bp">≠</span> <span class="mi">1</span>
</code></pre></div>



<a name="199003825"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/not%20a%20structure/near/199003825" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/not.20a.20structure.html#199003825">(May 28 2020 at 10:11)</a>:</h4>
<p>what's the difference</p>



<a name="199003839"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/not%20a%20structure/near/199003839" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/not.20a.20structure.html#199003839">(May 28 2020 at 10:11)</a>:</h4>
<p>aha!</p>



<a name="199003849"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/not%20a%20structure/near/199003849" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/not.20a.20structure.html#199003849">(May 28 2020 at 10:11)</a>:</h4>
<p>I used "false" to define <code>domain</code></p>



<a name="199003851"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/not%20a%20structure/near/199003851" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/not.20a.20structure.html#199003851">(May 28 2020 at 10:11)</a>:</h4>
<div class="codehilite"><pre><span></span><code><span class="kn">set_option</span> <span class="n">old_structure_cmd</span> <span class="n">false</span>

<span class="c">/-</span><span class="cm">- A domain is a ring with no zero divisors, i.e. satisfying</span>
<span class="cm">  the condition `a * b = 0 ↔ a = 0 ∨ b = 0`. Alternatively, a domain</span>
<span class="cm">  is an integral domain without assuming commutativity of multiplication. -/</span>
<span class="n">class</span> <span class="n">domain</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span> <span class="kn">extends</span> <span class="n">ring</span> <span class="n">α</span><span class="o">,</span> <span class="n">no_zero_divisors</span> <span class="n">α</span><span class="o">,</span> <span class="n">nonzero</span> <span class="n">α</span>
</code></pre></div>



<a name="199003859"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/not%20a%20structure/near/199003859" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/not.20a.20structure.html#199003859">(May 28 2020 at 10:11)</a>:</h4>
<p>oh no</p>



<a name="199003873"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/not%20a%20structure/near/199003873" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/not.20a.20structure.html#199003873">(May 28 2020 at 10:11)</a>:</h4>
<p>no that means unit</p>



<a name="199003941"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/not%20a%20structure/near/199003941" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/not.20a.20structure.html#199003941">(May 28 2020 at 10:12)</a>:</h4>
<p>oh you mean <code>old_structure_cmd false</code></p>



<a name="199003988"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/not%20a%20structure/near/199003988" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/not.20a.20structure.html#199003988">(May 28 2020 at 10:13)</a>:</h4>
<p>looks like I cannot use any "false" ever</p>



<a name="199004000"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/not%20a%20structure/near/199004000" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/not.20a.20structure.html#199004000">(May 28 2020 at 10:13)</a>:</h4>
<p>but otherwise I get this error:</p>
<div class="codehilite"><pre><span></span><code><span class="n">type</span> <span class="n">mismatch</span> <span class="n">at</span> <span class="n">application</span>
  <span class="bp">@</span><span class="n">ring</span><span class="bp">.</span><span class="n">to_semiring</span> <span class="n">α</span> <span class="n">right_distrib</span>
<span class="n">term</span>
  <span class="n">right_distrib</span>
<span class="n">has</span> <span class="n">type</span>
  <span class="bp">∀</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">α</span><span class="o">),</span> <span class="o">(</span><span class="n">a</span> <span class="bp">+</span> <span class="n">b</span><span class="o">)</span> <span class="bp">*</span> <span class="n">c</span> <span class="bp">=</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">c</span> <span class="bp">+</span> <span class="n">b</span> <span class="bp">*</span> <span class="n">c</span>
<span class="n">but</span> <span class="n">is</span> <span class="n">expected</span> <span class="n">to</span> <span class="k">have</span> <span class="n">type</span>
  <span class="n">ring</span> <span class="n">α</span>
</code></pre></div>



<a name="199004011"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/not%20a%20structure/near/199004011" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/not.20a.20structure.html#199004011">(May 28 2020 at 10:13)</a>:</h4>
<p>what's an mwe of creating a class that is registered as an inductive?</p>



<a name="199004012"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/not%20a%20structure/near/199004012" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/not.20a.20structure.html#199004012">(May 28 2020 at 10:13)</a>:</h4>
<p>so my workaround is to declare the Props as parameters</p>



<a name="199004179"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/not%20a%20structure/near/199004179" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/not.20a.20structure.html#199004179">(May 28 2020 at 10:15)</a>:</h4>
<p>boom</p>



<a name="199004195"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/not%20a%20structure/near/199004195" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/not.20a.20structure.html#199004195">(May 28 2020 at 10:16)</a>:</h4>
<div class="codehilite"><pre><span></span><code><span class="kn">universe</span> <span class="n">u</span>

<span class="kn">set_option</span> <span class="n">old_structure_cmd</span> <span class="n">true</span>

<span class="n">class</span> <span class="n">A</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span> <span class="kn">extends</span> <span class="n">has_zero</span> <span class="n">α</span><span class="bp">.</span>
<span class="n">class</span> <span class="n">B</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span> <span class="o">[</span><span class="n">has_zero</span> <span class="n">α</span><span class="o">]</span> <span class="o">:</span> <span class="kt">Prop</span><span class="bp">.</span>

<span class="kn">set_option</span> <span class="n">old_structure_cmd</span> <span class="n">false</span>

<span class="n">class</span> <span class="n">C</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span> <span class="kn">extends</span> <span class="n">A</span> <span class="n">α</span><span class="o">,</span> <span class="n">B</span> <span class="n">α</span><span class="bp">.</span>

<span class="kn">set_option</span> <span class="n">old_structure_cmd</span> <span class="n">true</span>

<span class="n">class</span> <span class="n">D</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span> <span class="kn">extends</span> <span class="n">C</span> <span class="n">α</span><span class="bp">.</span>

<span class="bp">#</span><span class="kn">print</span> <span class="n">D</span>
</code></pre></div>



<a name="199004230"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/not%20a%20structure/near/199004230" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/not.20a.20structure.html#199004230">(May 28 2020 at 10:16)</a>:</h4>
<div class="codehilite"><pre><span></span><code><span class="bp">@</span><span class="o">[</span><span class="n">class</span><span class="o">]</span>
<span class="kn">inductive</span> <span class="n">D</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span> <span class="bp">→</span> <span class="kt">Type</span> <span class="n">u</span>
<span class="n">constructors</span><span class="o">:</span>
<span class="n">D</span><span class="bp">.</span><span class="n">mk</span> <span class="o">:</span> <span class="bp">Π</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">}</span> <span class="o">[</span><span class="bp">_</span><span class="n">to_A</span> <span class="o">:</span> <span class="n">A</span> <span class="n">α</span><span class="o">]</span> <span class="o">[</span><span class="bp">_</span><span class="n">to_B</span> <span class="o">:</span> <span class="n">B</span> <span class="n">α</span><span class="o">],</span> <span class="n">D</span> <span class="n">α</span>
</code></pre></div>



<a name="199004328"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/not%20a%20structure/near/199004328" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/not.20a.20structure.html#199004328">(May 28 2020 at 10:17)</a>:</h4>
<p>hm, I get that too</p>



<a name="199004577"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/not%20a%20structure/near/199004577" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/not.20a.20structure.html#199004577">(May 28 2020 at 10:20)</a>:</h4>
<div class="codehilite"><pre><span></span><code><span class="n">class</span> <span class="n">A</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span><span class="bp">.</span>
<span class="bp">#</span><span class="kn">print</span> <span class="n">A</span>
</code></pre></div>



<a name="199004586"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/not%20a%20structure/near/199004586" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/not.20a.20structure.html#199004586">(May 28 2020 at 10:20)</a>:</h4>
<div class="codehilite"><pre><span></span><code><span class="bp">@</span><span class="o">[</span><span class="n">class</span><span class="o">]</span>
<span class="kn">inductive</span> <span class="n">A</span> <span class="o">:</span> <span class="kt">Type</span> <span class="bp">→</span> <span class="kt">Type</span>
<span class="n">constructors</span><span class="o">:</span>
<span class="n">A</span><span class="bp">.</span><span class="n">mk</span> <span class="o">:</span> <span class="bp">Π</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">},</span> <span class="n">A</span> <span class="n">α</span>
</code></pre></div>



<a name="199004599"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/not%20a%20structure/near/199004599" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/not.20a.20structure.html#199004599">(May 28 2020 at 10:21)</a>:</h4>
<p>boom, guaranteed MWE</p>



<a name="199004615"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/not%20a%20structure/near/199004615" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/not.20a.20structure.html#199004615">(May 28 2020 at 10:21)</a>:</h4>
<div class="codehilite"><pre><span></span><code><span class="n">class</span> <span class="n">A</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">.</span>
<span class="bp">#</span><span class="kn">print</span> <span class="n">A</span>
</code></pre></div>



<a name="199004617"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/not%20a%20structure/near/199004617" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/not.20a.20structure.html#199004617">(May 28 2020 at 10:21)</a>:</h4>
<div class="codehilite"><pre><span></span><code><span class="bp">@</span><span class="o">[</span><span class="n">class</span><span class="o">]</span>
<span class="kn">inductive</span> <span class="n">A</span> <span class="o">:</span> <span class="kt">Type</span>
<span class="n">constructors</span><span class="o">:</span>
<span class="n">A</span><span class="bp">.</span><span class="n">mk</span> <span class="o">:</span> <span class="n">A</span>
</code></pre></div>



<a name="199004626"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/not%20a%20structure/near/199004626" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/not.20a.20structure.html#199004626">(May 28 2020 at 10:21)</a>:</h4>
<p>this is more minimal</p>



<a name="199004730"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/not%20a%20structure/near/199004730" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/not.20a.20structure.html#199004730">(May 28 2020 at 10:22)</a>:</h4>
<p>that's nuts</p>



<a name="199004747"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/not%20a%20structure/near/199004747" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/not.20a.20structure.html#199004747">(May 28 2020 at 10:23)</a>:</h4>
<p>one would think this is in the test suite</p>



<a name="199004791"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/not%20a%20structure/near/199004791" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/not.20a.20structure.html#199004791">(May 28 2020 at 10:23)</a>:</h4>
<p>but:</p>
<div class="codehilite"><pre><span></span><code><span class="n">class</span> <span class="n">A</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">.</span>
<span class="n">class</span> <span class="n">C</span> <span class="kn">extends</span> <span class="n">A</span><span class="bp">.</span>
<span class="bp">#</span><span class="kn">print</span> <span class="n">C</span>
</code></pre></div>



<a name="199004799"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/not%20a%20structure/near/199004799" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/not.20a.20structure.html#199004799">(May 28 2020 at 10:23)</a>:</h4>
<div class="codehilite"><pre><span></span><code><span class="bp">@</span><span class="o">[</span><span class="n">class</span><span class="o">]</span>
<span class="kn">structure</span> <span class="n">C</span> <span class="o">:</span> <span class="kt">Type</span>
<span class="n">fields</span><span class="o">:</span>
<span class="n">C</span><span class="bp">.</span><span class="n">to_A</span> <span class="o">:</span> <span class="bp">Π</span> <span class="o">[</span><span class="n">c</span> <span class="o">:</span> <span class="n">C</span><span class="o">],</span> <span class="n">A</span>
</code></pre></div>



<a name="199004873"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/not%20a%20structure/near/199004873" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/not.20a.20structure.html#199004873">(May 28 2020 at 10:24)</a>:</h4>
<p>maybe it's just the 0-arity?</p>



<a name="199004893"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/not%20a%20structure/near/199004893" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/not.20a.20structure.html#199004893">(May 28 2020 at 10:24)</a>:</h4>
<p>If you give the class a field it probably works too</p>



<a name="199005696"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/not%20a%20structure/near/199005696" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/not.20a.20structure.html#199005696">(May 28 2020 at 10:34)</a>:</h4>
<div class="codehilite"><pre><span></span><code><span class="n">class</span> <span class="n">A</span> <span class="o">:</span> <span class="kt">Type</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">B</span> <span class="o">:</span> <span class="n">true</span><span class="o">)</span>

<span class="n">class</span> <span class="n">C</span> <span class="kn">extends</span> <span class="n">A</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">D</span> <span class="o">:</span> <span class="n">true</span><span class="o">)</span>

<span class="kn">set_option</span> <span class="n">old_structure_cmd</span> <span class="n">true</span>
<span class="n">class</span> <span class="n">E</span> <span class="kn">extends</span> <span class="n">C</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">F</span> <span class="o">:</span> <span class="n">true</span><span class="o">)</span>

<span class="bp">#</span><span class="kn">print</span> <span class="n">E</span>
</code></pre></div>



<a name="199005702"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/not%20a%20structure/near/199005702" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/not.20a.20structure.html#199005702">(May 28 2020 at 10:34)</a>:</h4>
<div class="codehilite"><pre><span></span><code><span class="bp">@</span><span class="o">[</span><span class="n">class</span><span class="o">]</span>
<span class="kn">inductive</span> <span class="n">E</span> <span class="o">:</span> <span class="kt">Type</span>
<span class="n">constructors</span><span class="o">:</span>
<span class="n">E</span><span class="bp">.</span><span class="n">mk</span> <span class="o">:</span> <span class="bp">Π</span> <span class="o">[</span><span class="bp">_</span><span class="n">to_A</span> <span class="o">:</span> <span class="n">A</span><span class="o">],</span> <span class="n">true</span> <span class="bp">→</span> <span class="n">true</span> <span class="bp">→</span> <span class="n">E</span>
</code></pre></div>



<a name="199005705"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/not%20a%20structure/near/199005705" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/not.20a.20structure.html#199005705">(May 28 2020 at 10:34)</a>:</h4>
<p>this is minimal</p>



<a name="199005715"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/not%20a%20structure/near/199005715" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/not.20a.20structure.html#199005715">(May 28 2020 at 10:34)</a>:</h4>
<p>modulo each class having a parameter</p>



<a name="199005718"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/not%20a%20structure/near/199005718" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/not.20a.20structure.html#199005718">(May 28 2020 at 10:34)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span></p>



<a name="199005741"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/not%20a%20structure/near/199005741" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/not.20a.20structure.html#199005741">(May 28 2020 at 10:35)</a>:</h4>
<p>and finally, the glorious error:</p>
<div class="codehilite"><pre><span></span><code><span class="n">class</span> <span class="n">A</span> <span class="o">:</span> <span class="kt">Type</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">B</span> <span class="o">:</span> <span class="n">true</span><span class="o">)</span>

<span class="n">class</span> <span class="n">C</span> <span class="kn">extends</span> <span class="n">A</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">D</span> <span class="o">:</span> <span class="n">true</span><span class="o">)</span>

<span class="kn">set_option</span> <span class="n">old_structure_cmd</span> <span class="n">true</span>
<span class="n">class</span> <span class="n">E</span> <span class="kn">extends</span> <span class="n">C</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">F</span> <span class="o">:</span> <span class="n">true</span><span class="o">)</span>

<span class="n">def</span> <span class="n">G</span> <span class="o">:</span> <span class="n">E</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">B</span> <span class="o">:=</span> <span class="n">trivial</span><span class="o">,</span>
  <span class="n">D</span> <span class="o">:=</span> <span class="n">trivial</span><span class="o">,</span>
  <span class="n">F</span> <span class="o">:=</span> <span class="n">trivial</span> <span class="o">}</span>
</code></pre></div>



<a name="199005748"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/not%20a%20structure/near/199005748" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/not.20a.20structure.html#199005748">(May 28 2020 at 10:35)</a>:</h4>
<div class="codehilite"><pre><span></span><code><span class="n">invalid</span> <span class="kn">structure</span> <span class="n">value</span> <span class="o">{</span><span class="bp">...</span><span class="o">},</span> <span class="n">expected</span> <span class="n">type</span> <span class="n">is</span> <span class="n">known</span><span class="o">,</span> <span class="n">but</span> <span class="n">it</span> <span class="n">is</span> <span class="n">not</span> <span class="n">a</span> <span class="kn">structure</span>
  <span class="n">E</span>
</code></pre></div>



<a name="199005875"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/not%20a%20structure/near/199005875" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/not.20a.20structure.html#199005875">(May 28 2020 at 10:37)</a>:</h4>
<p>so <code>A</code> and <code>C</code> are both <code>structure</code>s</p>



<a name="199005880"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/not%20a%20structure/near/199005880" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/not.20a.20structure.html#199005880">(May 28 2020 at 10:37)</a>:</h4>
<p>but <code>E</code> is <code>inductive</code></p>



<a name="199024852"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/not%20a%20structure/near/199024852" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/not.20a.20structure.html#199024852">(May 28 2020 at 13:53)</a>:</h4>
<p><a href="https://github.com/leanprover-community/lean/issues/285">lean#285</a></p>



<a name="199043298"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/not%20a%20structure/near/199043298" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/not.20a.20structure.html#199043298">(May 28 2020 at 16:08)</a>:</h4>
<p>I don't think it was ever supported to extend new-style structures using old-style structures.  Is it possible to just not do it here?</p>



<a name="199046367"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/not%20a%20structure/near/199046367" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/not.20a.20structure.html#199046367">(May 28 2020 at 16:32)</a>:</h4>
<p><span class="user-mention" data-user-id="110043">@Gabriel Ebner</span> it would be, if not for this bug:</p>
<div class="codehilite"><pre><span></span><code><span class="kn">set_option</span> <span class="n">old_structure_cmd</span> <span class="n">true</span>
<span class="n">class</span> <span class="n">A</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span><span class="bp">.</span>
<span class="n">class</span> <span class="n">B</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="kn">extends</span> <span class="n">A</span> <span class="n">α</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">BB</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span>
<span class="n">class</span> <span class="n">C</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="o">[</span><span class="n">A</span> <span class="n">α</span><span class="o">]</span><span class="bp">.</span>
<span class="n">class</span> <span class="n">D</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="kn">extends</span> <span class="n">B</span> <span class="n">α</span><span class="o">,</span> <span class="n">C</span> <span class="n">α</span><span class="bp">.</span>
</code></pre></div>



<a name="199046373"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/not%20a%20structure/near/199046373" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/not.20a.20structure.html#199046373">(May 28 2020 at 16:32)</a>:</h4>
<div class="codehilite"><pre><span></span><code><span class="n">failed</span> <span class="n">to</span> <span class="n">add</span> <span class="n">declaration</span> <span class="n">to</span> <span class="n">environment</span><span class="o">,</span> <span class="n">it</span> <span class="n">contains</span> <span class="n">local</span> <span class="kn">constants</span>
</code></pre></div>



<a name="199046453"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/not%20a%20structure/near/199046453" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/not.20a.20structure.html#199046453">(May 28 2020 at 16:33)</a>:</h4>
<p>which can be fixed by using <code>old_structure_cmd false</code></p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>