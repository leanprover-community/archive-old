---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/RFC.3A.20adding.20dot.20notations.20.238556.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/RFC.3A.20adding.20dot.20notations.20.238556.html">RFC: adding dot notations #8556</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="248467148"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/RFC%3A%20adding%20dot%20notations%20%238556/near/248467148" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/RFC.3A.20adding.20dot.20notations.20.238556.html#248467148">(Aug 05 2021 at 11:59)</a>:</h4>
<p>I was getting annoyed that working with definitions such as <code>irreducible</code>, <code>prime</code> and <code>associated</code>, I had to write quite verbose terms like <code>dvd_symm_of_irreducible (irreducible_of_prime (prime_of_factor _ hp)) (irreducible_of_prime (prime_of_factor _ hq)) hdvd</code>, where a lot of redundancy can be eliminated with dot notation: <code>(prime_of_factor _ hp).irreducible.dvd_symm (prime_of_factor _ hq).irreducible hdvd</code>. So I made PR <a href="https://github.com/leanprover-community/mathlib/issues/8556">#8556</a>, which changes the spelling of many of the lemmas in <code>algebra/associated.lean</code> to make usage of dot notation easier.</p>
<p>Since this would affect a lot of files, I want to see what everyone thinks before fully putting my efforts behind the PR.</p>



<a name="248467351"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/RFC%3A%20adding%20dot%20notations%20%238556/near/248467351" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/RFC.3A.20adding.20dot.20notations.20.238556.html#248467351">(Aug 05 2021 at 12:01)</a>:</h4>
<p>Did you consider using <code>alias</code> to make aliases similar to eg <code>lt_of_le_of_lt</code> and <code>has_le.le.trans_lt</code>?</p>



<a name="248467457"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/RFC%3A%20adding%20dot%20notations%20%238556/near/248467457" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/RFC.3A.20adding.20dot.20notations.20.238556.html#248467457">(Aug 05 2021 at 12:02)</a>:</h4>
<p>That would certainly be a way to reduce your workload, but I think in this case having the dot notations alone is fine if you're willing to purge all uses of the old spellings.</p>



<a name="248467482"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/RFC%3A%20adding%20dot%20notations%20%238556/near/248467482" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/RFC.3A.20adding.20dot.20notations.20.238556.html#248467482">(Aug 05 2021 at 12:02)</a>:</h4>
<p>I did, but I feel like the new names are strictly better, since they are shorter (turning <code>_</code> or <code>_of_</code> into <code>.</code>) but otherwise the same.</p>



<a name="248467634"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/RFC%3A%20adding%20dot%20notations%20%238556/near/248467634" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/RFC.3A.20adding.20dot.20notations.20.238556.html#248467634">(Aug 05 2021 at 12:04)</a>:</h4>
<p>(OK, <code>dvd_iff_dvd_of_rel_right</code> did become <code>associated.dvd_iff_dvd_right</code> which is slightly longer, but I believe the <code>rel</code> in the original name was a mistake.)</p>



<a name="248467655"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/RFC%3A%20adding%20dot%20notations%20%238556/near/248467655" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/RFC.3A.20adding.20dot.20notations.20.238556.html#248467655">(Aug 05 2021 at 12:04)</a>:</h4>
<p>Okay well then as a dot notation partisan I back up that change!</p>



<a name="248467693"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/RFC%3A%20adding%20dot%20notations%20%238556/near/248467693" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/RFC.3A.20adding.20dot.20notations.20.238556.html#248467693">(Aug 05 2021 at 12:05)</a>:</h4>
<p>But do not forget to make some of them <code>protected</code> <span aria-label="wink" class="emoji emoji-1f609" role="img" title="wink">:wink:</span></p>



<a name="248472884"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/RFC%3A%20adding%20dot%20notations%20%238556/near/248472884" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/RFC.3A.20adding.20dot.20notations.20.238556.html#248472884">(Aug 05 2021 at 12:57)</a>:</h4>
<p>BTW: Is there a comprehensive guide to the use of dot notation? Given its ubiquity, isn't it something which would deserve to appear in the left column of <a href="https://leanprover-community.github.io/mathlib_docs/">https://leanprover-community.github.io/mathlib_docs/</a> ?</p>



<a name="248473892"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/RFC%3A%20adding%20dot%20notations%20%238556/near/248473892" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/RFC.3A.20adding.20dot.20notations.20.238556.html#248473892">(Aug 05 2021 at 13:05)</a>:</h4>
<p>Or perhaps in <a href="https://leanprover-community.github.io/contribute/naming.html">#naming</a></p>



<a name="248474181"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/RFC%3A%20adding%20dot%20notations%20%238556/near/248474181" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/RFC.3A.20adding.20dot.20notations.20.238556.html#248474181">(Aug 05 2021 at 13:07)</a>:</h4>
<p>I totally agree. in general, there are many things I could see added to the website, like a glossary, a sortable list of files (similar to the contributors page)...</p>



<a name="248474254"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/RFC%3A%20adding%20dot%20notations%20%238556/near/248474254" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/RFC.3A.20adding.20dot.20notations.20.238556.html#248474254">(Aug 05 2021 at 13:08)</a>:</h4>
<p>But isn't the dot notation somewhat deeper than just a naming convention? The fact that I can write <code>P.irreducible</code> to apply <code>prime.irreducible</code> to a prime <code>P</code> is not (well?) documented, right?</p>



<a name="248474490"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/RFC%3A%20adding%20dot%20notations%20%238556/near/248474490" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/RFC.3A.20adding.20dot.20notations.20.238556.html#248474490">(Aug 05 2021 at 13:10)</a>:</h4>
<p>The things in the left column of mathlib_docs tend to be related to library design choices. What you're describing are language features, which probably belong in the parts of the lean reference manual that were never written.</p>



<a name="248474780"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/RFC%3A%20adding%20dot%20notations%20%238556/near/248474780" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/RFC.3A.20adding.20dot.20notations.20.238556.html#248474780">(Aug 05 2021 at 13:13)</a>:</h4>
<p>Ah I thought Filippo was more talking about what kind of things mathlib uses dot notation for.</p>



<a name="248475161"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/RFC%3A%20adding%20dot%20notations%20%238556/near/248475161" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/RFC.3A.20adding.20dot.20notations.20.238556.html#248475161">(Aug 05 2021 at 13:16)</a>:</h4>
<p>Right, that's the viewpoint that suggests <a href="https://leanprover-community.github.io/contribute/naming.html">#naming</a> is a good place to me</p>



<a name="248475474"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/RFC%3A%20adding%20dot%20notations%20%238556/near/248475474" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/RFC.3A.20adding.20dot.20notations.20.238556.html#248475474">(Aug 05 2021 at 13:19)</a>:</h4>
<p>Well, indeed what I had in mind was more the "language feature" as Eric calls it, and if this has never been documented then my point is not very sound.  If it is a matter of what should/should not have dot notation, I agree that <a href="https://leanprover-community.github.io/contribute/naming.html">#naming</a> is the right place.</p>



<a name="248476557"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/RFC%3A%20adding%20dot%20notations%20%238556/near/248476557" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/RFC.3A.20adding.20dot.20notations.20.238556.html#248476557">(Aug 05 2021 at 13:28)</a>:</h4>
<p><span class="user-mention silent" data-user-id="310045">Eric Wieser</span> <a href="#narrow/stream/113488-general/topic/RFC.3A.20adding.20dot.20notations.20.238556/near/248475161">said</a>:</p>
<blockquote>
<p>Right, that's the viewpoint that suggests <a href="https://leanprover-community.github.io/contribute/naming.html">#naming</a> is a good place to me</p>
</blockquote>
<p>I think we should indeed expand this section of <a href="https://leanprover-community.github.io/contribute/naming.html">#naming</a>:</p>
<blockquote>
<p>It is useful to use dot notation even for types which are not inductive types. For instance, we use:</p>
<p><div class="codehilite" data-code-language="Lean"><pre><span></span><code>    <span class="n">le.trans</span>
    <span class="n">lt.trans_le</span>
    <span class="n">le.trans_lt</span>
</code></pre></div><br>
</p>
</blockquote>



<a name="248476614"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/RFC%3A%20adding%20dot%20notations%20%238556/near/248476614" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/RFC.3A.20adding.20dot.20notations.20.238556.html#248476614">(Aug 05 2021 at 13:29)</a>:</h4>
<p>Eh! This is a lie. These lemmas have a prepended <code>has_le</code> or <code>has_lt</code> namespace.</p>



<a name="248477327"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/RFC%3A%20adding%20dot%20notations%20%238556/near/248477327" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/RFC.3A.20adding.20dot.20notations.20.238556.html#248477327">(Aug 05 2021 at 13:35)</a>:</h4>
<p>Perhaps:</p>
<blockquote>
<p>Introduce dot notation when it is practical to do so, namely when a parameter has a name as its head symbol. Following this convention, <code>∀ {x}, foo x → bar x ∨ baz x</code> should be called <code>foo.bar_or_baz</code> rather than <code>bar_or_baz_of_foo</code>. Examples in mathlib:</p>
<p><div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">has_le.le.trans</span> <span class="c1">-- in addition to `le_trans`</span>
<span class="n">has_lt.lt.trans_le</span> <span class="c1">-- in addition to `lt_of_lt_of_le`</span>
<span class="n">has_le.le.trans_lt</span> <span class="c1">-- in addition to `lt_of_le_of_lt`</span>
<span class="n">prime.irreducible</span> <span class="c1">-- instead of `irreducible_of_prime`</span>
</code></pre></div><br>
</p>
</blockquote>



<a name="248477467"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/RFC%3A%20adding%20dot%20notations%20%238556/near/248477467" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/RFC.3A.20adding.20dot.20notations.20.238556.html#248477467">(Aug 05 2021 at 13:37)</a>:</h4>
<p>You can even talk about cases where the head symbol <strong>isn't</strong> the one that's dot notated. I'm still very unclear about when it works.</p>



<a name="248477543"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/RFC%3A%20adding%20dot%20notations%20%238556/near/248477543" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/RFC.3A.20adding.20dot.20notations.20.238556.html#248477543">(Aug 05 2021 at 13:37)</a>:</h4>
<p>Right, if <code>(x : foo y z)</code> (which has <code>foo</code> as the head symbol) but <code>foo y z</code> unfolds to <code>bar z y</code>, then <code>x.baz</code> will still find <code>bar.foo</code></p>



<a name="248477618"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/RFC%3A%20adding%20dot%20notations%20%238556/near/248477618" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/RFC.3A.20adding.20dot.20notations.20.238556.html#248477618">(Aug 05 2021 at 13:38)</a>:</h4>
<p>It seems to work so long as you totally apply the function (not leaving any <code>→</code>). If you partially apply it, sometimes it works, sometimes it doesn't.</p>



<a name="248477679"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/RFC%3A%20adding%20dot%20notations%20%238556/near/248477679" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/RFC.3A.20adding.20dot.20notations.20.238556.html#248477679">(Aug 05 2021 at 13:38)</a>:</h4>
<p><span class="user-mention silent" data-user-id="387244">Yaël Dillies</span>, don't confuse head symbol with first argument</p>



<a name="248477704"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/RFC%3A%20adding%20dot%20notations%20%238556/near/248477704" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/RFC.3A.20adding.20dot.20notations.20.238556.html#248477704">(Aug 05 2021 at 13:38)</a>:</h4>
<p>Ah, uh, yeah that's probably the problem.</p>



<a name="248477723"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/RFC%3A%20adding%20dot%20notations%20%238556/near/248477723" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/RFC.3A.20adding.20dot.20notations.20.238556.html#248477723">(Aug 05 2021 at 13:39)</a>:</h4>
<p>Mind adding an explanation of that too? <span aria-label="grinning" class="emoji emoji-1f600" role="img" title="grinning">:grinning:</span></p>



<a name="248477746"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/RFC%3A%20adding%20dot%20notations%20%238556/near/248477746" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/RFC.3A.20adding.20dot.20notations.20.238556.html#248477746">(Aug 05 2021 at 13:39)</a>:</h4>
<p><a href="https://leanprover-community.github.io/mathlib_docs/find/tactic.whnf">docs#tactic.whnf</a> <del>I think might</del> <em>does not</em> mention what head symbols are, but is relevant nonetheless.</p>



<a name="248480979"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/RFC%3A%20adding%20dot%20notations%20%238556/near/248480979" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/RFC.3A.20adding.20dot.20notations.20.238556.html#248480979">(Aug 05 2021 at 14:01)</a>:</h4>
<p>Thinking about it a bit more, it's not really the most accurate description that "a parameter has a name as its head". I want to definitely include things like <code>associated x y</code>, definitely excluding things like <code>associated x y ∨ associated y z</code> (sincee the head symbol is <code>or</code>, which is not descriptive enough), and potentially allowing <code>associated x (2 * y)</code> (where the head symbol does not fully describe the situation, but is recognizable enough).</p>



<a name="248481219"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/RFC%3A%20adding%20dot%20notations%20%238556/near/248481219" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/RFC.3A.20adding.20dot.20notations.20.238556.html#248481219">(Aug 05 2021 at 14:03)</a>:</h4>
<p>"a parameter has a name as its head" is a reasonably accurate description of when dot notation works, but perhaps not of when it is a good choice</p>



<a name="248481596"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/RFC%3A%20adding%20dot%20notations%20%238556/near/248481596" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/RFC.3A.20adding.20dot.20notations.20.238556.html#248481596">(Aug 05 2021 at 14:06)</a>:</h4>
<p>I understand dot notation as just accessing into the term's namespace. So if you have something called <code>my_term.my_lemma</code> and a term <code>h : my_term</code>, then <code>h.my_lemma</code> will work. This is why <code>l : list R</code> and then <code>l.foldr</code> works, even though <code>list.foldr (f : α → β → β)  (b : β) : list α → β</code>.</p>



<a name="248482232"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/RFC%3A%20adding%20dot%20notations%20%238556/near/248482232" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/RFC.3A.20adding.20dot.20notations.20.238556.html#248482232">(Aug 05 2021 at 14:10)</a>:</h4>
<p>Indeed! So coming at it from a namespace-based viewpoint sounds like it would be clearer:</p>
<blockquote>
<p>Prefer namespacing over longer un-namespaced names, when we can use dot notation. Following this convention, ∀ {x}, foo x → bar x ∨ baz x should be called foo.bar_or_baz rather than bar_or_baz_of_foo. Examples in mathlib:</p>
</blockquote>



<a name="248482319"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/RFC%3A%20adding%20dot%20notations%20%238556/near/248482319" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/RFC.3A.20adding.20dot.20notations.20.238556.html#248482319">(Aug 05 2021 at 14:11)</a>:</h4>
<p>s/so that/when/</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>