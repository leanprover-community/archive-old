---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/from.20iso.20between.20sets.20to.20iso.20between.20groups.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/from.20iso.20between.20sets.20to.20iso.20between.20groups.html">from iso between sets to iso between groups</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="291001960"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/from%20iso%20between%20sets%20to%20iso%20between%20groups/near/291001960" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jiatong Yang <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/from.20iso.20between.20sets.20to.20iso.20between.20groups.html#291001960">(Jul 27 2022 at 08:08)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">data.fintype.basic</span>

<span class="kd">universes</span> <span class="n">u</span>

<span class="kd">def</span> <span class="n">G4</span> <span class="o">:=</span> <span class="n">fin</span> <span class="mi">4</span>
<span class="kd">lemma</span> <span class="n">mul_comm_of_G4</span> <span class="o">[</span><span class="n">group</span> <span class="n">G4</span><span class="o">]</span> <span class="o">(</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">G4</span><span class="o">)</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">y</span> <span class="bp">*</span> <span class="n">x</span> <span class="o">:=</span> <span class="gr">sorry</span>

<span class="sd">/-- Every group of order 4 is commutative -/</span>
<span class="kd">lemma</span> <span class="n">mul_comm_of_card_eq_four</span> <span class="o">(</span><span class="n">G</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span> <span class="o">[</span><span class="n">fintype</span> <span class="n">G</span><span class="o">]</span> <span class="o">[</span><span class="n">group</span> <span class="n">G</span><span class="o">]</span> <span class="o">(</span><span class="n">hG4</span> <span class="o">:</span> <span class="n">fintype.card</span> <span class="n">G</span> <span class="bp">=</span> <span class="mi">4</span><span class="o">)</span> <span class="o">:</span>
  <span class="bp">∀</span> <span class="n">g</span> <span class="n">h</span> <span class="o">:</span> <span class="n">G</span><span class="o">,</span> <span class="n">g</span> <span class="bp">*</span> <span class="n">h</span> <span class="bp">=</span> <span class="n">h</span> <span class="bp">*</span> <span class="n">g</span> <span class="o">:=</span> <span class="gr">sorry</span>
</code></pre></div>
<p>How to prove <code>mul_comm_of_card_eq_four</code> using  <code>mul_comm_of_G4</code>?</p>



<a name="291002329"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/from%20iso%20between%20sets%20to%20iso%20between%20groups/near/291002329" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Junyan Xu <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/from.20iso.20between.20sets.20to.20iso.20between.20groups.html#291002329">(Jul 27 2022 at 08:13)</a>:</h4>
<p>there's <a href="https://leanprover-community.github.io/mathlib_docs/find/equiv.group">docs#equiv.group</a></p>



<a name="291002461"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/from%20iso%20between%20sets%20to%20iso%20between%20groups/near/291002461" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Andrew Yang <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/from.20iso.20between.20sets.20to.20iso.20between.20groups.html#291002461">(Jul 27 2022 at 08:14)</a>:</h4>
<p>And <a href="https://leanprover-community.github.io/mathlib_docs/find/fintype.equiv_fin">docs#fintype.equiv_fin</a> should also be helpful.</p>



<a name="291005328"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/from%20iso%20between%20sets%20to%20iso%20between%20groups/near/291005328" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/from.20iso.20between.20sets.20to.20iso.20between.20groups.html#291005328">(Jul 27 2022 at 08:48)</a>:</h4>
<p>What's the maths proof? It's not enough to say "these types have the same number of elements", you need to show that you can match the group identity with the identity etc</p>



<a name="291005399"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/from%20iso%20between%20sets%20to%20iso%20between%20groups/near/291005399" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/from.20iso.20between.20sets.20to.20iso.20between.20groups.html#291005399">(Jul 27 2022 at 08:49)</a>:</h4>
<p>Oh, I guess here because you stated G4 without a specific group structure you don't have that problem</p>



<a name="291005878"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/from%20iso%20between%20sets%20to%20iso%20between%20groups/near/291005878" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jiatong Yang <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/from.20iso.20between.20sets.20to.20iso.20between.20groups.html#291005878">(Jul 27 2022 at 08:55)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">data.fintype.basic</span>
<span class="kn">import</span> <span class="n">logic.equiv.transfer_instance</span>

<span class="kd">universes</span> <span class="n">u</span>

<span class="kd">def</span> <span class="n">G4</span> <span class="o">:=</span> <span class="n">fin</span> <span class="mi">4</span>
<span class="kd">lemma</span> <span class="n">mul_comm_of_G4</span> <span class="o">[</span><span class="n">H</span> <span class="o">:</span> <span class="n">group</span> <span class="n">G4</span><span class="o">]</span> <span class="o">(</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">G4</span><span class="o">)</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">y</span> <span class="bp">*</span> <span class="n">x</span> <span class="o">:=</span> <span class="gr">sorry</span>

<span class="sd">/-- Every group of order 4 is commutative -/</span>
<span class="kd">lemma</span> <span class="n">mul_comm_of_card_eq_four</span> <span class="o">(</span><span class="n">G</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span> <span class="o">[</span><span class="n">fintype</span> <span class="n">G</span><span class="o">]</span> <span class="o">[</span><span class="n">group</span> <span class="n">G</span><span class="o">]</span> <span class="o">(</span><span class="n">hG4</span> <span class="o">:</span> <span class="n">fintype.card</span> <span class="n">G</span> <span class="bp">=</span> <span class="mi">4</span><span class="o">)</span> <span class="o">:</span>
  <span class="bp">∀</span> <span class="n">g</span> <span class="n">h</span> <span class="o">:</span> <span class="n">G</span><span class="o">,</span> <span class="n">g</span> <span class="bp">*</span> <span class="n">h</span> <span class="bp">=</span> <span class="n">h</span> <span class="bp">*</span> <span class="n">g</span> <span class="o">:=</span> <span class="kd">begin</span>
  <span class="k">have</span> <span class="n">e</span> <span class="o">:</span> <span class="n">G</span> <span class="bp">≃</span> <span class="n">G4</span> <span class="o">:=</span> <span class="kd">begin</span>
    <span class="n">change</span> <span class="n">G4</span> <span class="k">with</span> <span class="n">fin</span> <span class="mi">4</span><span class="o">,</span>
    <span class="n">rw</span> <span class="bp">←</span> <span class="n">hG4</span><span class="o">,</span>
    <span class="n">apply</span> <span class="n">fintype.equiv_fin</span><span class="o">,</span>
  <span class="kd">end</span><span class="o">,</span>
  <span class="k">let</span> <span class="n">grp</span> <span class="o">:=</span> <span class="n">equiv.group</span> <span class="n">e.symm</span><span class="o">,</span>
  <span class="n">intros</span> <span class="n">g</span> <span class="n">h</span><span class="o">,</span>
  <span class="k">have</span> <span class="o">:</span> <span class="o">(</span><span class="n">e.to_fun</span> <span class="n">g</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">e.to_fun</span> <span class="n">h</span><span class="o">)</span><span class="bp">=</span> <span class="o">(</span><span class="n">e.to_fun</span> <span class="n">h</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">e.to_fun</span> <span class="n">g</span><span class="o">),</span>
  <span class="n">exact</span> <span class="n">mul_comm_of_G4</span> <span class="o">(</span><span class="n">e.to_fun</span> <span class="n">g</span><span class="o">)</span> <span class="o">(</span><span class="n">e.to_fun</span> <span class="n">h</span><span class="o">),</span>
<span class="kd">end</span>
</code></pre></div>
<p>I'm sorry that I still cannot finish this proof...</p>



<a name="291006638"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/from%20iso%20between%20sets%20to%20iso%20between%20groups/near/291006638" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/from.20iso.20between.20sets.20to.20iso.20between.20groups.html#291006638">(Jul 27 2022 at 09:02)</a>:</h4>
<p>Looks like you've solved the annoying equiv part of the proof at least</p>



<a name="291006790"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/from%20iso%20between%20sets%20to%20iso%20between%20groups/near/291006790" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/from.20iso.20between.20sets.20to.20iso.20between.20groups.html#291006790">(Jul 27 2022 at 09:04)</a>:</h4>
<p>Oh right, there's a missing sorry in that proof</p>



<a name="291007155"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/from%20iso%20between%20sets%20to%20iso%20between%20groups/near/291007155" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jiatong Yang <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/from.20iso.20between.20sets.20to.20iso.20between.20groups.html#291007155">(Jul 27 2022 at 09:08)</a>:</h4>
<p>I haven't solved the equiv part <span aria-label="sob" class="emoji emoji-1f62d" role="img" title="sob">:sob:</span></p>



<a name="291008790"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/from%20iso%20between%20sets%20to%20iso%20between%20groups/near/291008790" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/from.20iso.20between.20sets.20to.20iso.20between.20groups.html#291008790">(Jul 27 2022 at 09:23)</a>:</h4>
<p>A bit sloppy, but this works:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">data.fintype.basic</span>
<span class="kn">import</span> <span class="n">logic.equiv.transfer_instance</span>

<span class="kd">universes</span> <span class="n">u</span>

<span class="kd">def</span> <span class="n">G4</span> <span class="o">:=</span> <span class="n">fin</span> <span class="mi">4</span>
<span class="kd">lemma</span> <span class="n">mul_comm_of_G4</span> <span class="o">[</span><span class="n">H</span> <span class="o">:</span> <span class="n">group</span> <span class="n">G4</span><span class="o">]</span> <span class="o">(</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">G4</span><span class="o">)</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">y</span> <span class="bp">*</span> <span class="n">x</span> <span class="o">:=</span> <span class="gr">sorry</span>

<span class="sd">/-- Every group of order 4 is commutative -/</span>
<span class="kd">lemma</span> <span class="n">mul_comm_of_card_eq_four</span> <span class="o">(</span><span class="n">G</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span> <span class="o">[</span><span class="n">fintype</span> <span class="n">G</span><span class="o">]</span> <span class="o">[</span><span class="n">group</span> <span class="n">G</span><span class="o">]</span> <span class="o">(</span><span class="n">hG4</span> <span class="o">:</span> <span class="n">fintype.card</span> <span class="n">G</span> <span class="bp">=</span> <span class="mi">4</span><span class="o">)</span> <span class="o">:</span>
  <span class="bp">∀</span> <span class="n">g</span> <span class="n">h</span> <span class="o">:</span> <span class="n">G</span><span class="o">,</span> <span class="n">g</span> <span class="bp">*</span> <span class="n">h</span> <span class="bp">=</span> <span class="n">h</span> <span class="bp">*</span> <span class="n">g</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="k">have</span> <span class="n">e</span> <span class="o">:</span> <span class="n">G</span> <span class="bp">≃</span> <span class="n">G4</span> <span class="o">:=</span> <span class="n">fintype.equiv_fin_of_card_eq</span> <span class="n">hG4</span><span class="o">,</span>
  <span class="n">rw</span> <span class="n">e.symm.surjective.forall₂</span><span class="o">,</span>
  <span class="n">intros</span> <span class="n">g</span> <span class="n">h</span><span class="o">,</span>
  <span class="n">apply</span> <span class="n">e.injective</span><span class="o">,</span>
  <span class="n">letI</span> <span class="n">grp</span> <span class="o">:=</span> <span class="n">equiv.group</span> <span class="n">e.symm</span><span class="o">,</span>
  <span class="n">convert</span> <span class="n">mul_comm_of_G4</span> <span class="n">_</span> <span class="n">_</span><span class="o">,</span>
  <span class="n">rw</span> <span class="n">equiv.symm_symm</span><span class="o">,</span>
  <span class="n">rw</span> <span class="n">equiv.symm_symm</span><span class="o">,</span>
<span class="kd">end</span>
</code></pre></div>



<a name="291009515"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/from%20iso%20between%20sets%20to%20iso%20between%20groups/near/291009515" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/from.20iso.20between.20sets.20to.20iso.20between.20groups.html#291009515">(Jul 27 2022 at 09:31)</a>:</h4>
<p>Ah, this is a bit slicker:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="sd">/-- Every group of order 4 is commutative -/</span>
<span class="kd">lemma</span> <span class="n">mul_comm_of_card_eq_four</span> <span class="o">(</span><span class="n">G</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span> <span class="o">[</span><span class="n">fintype</span> <span class="n">G</span><span class="o">]</span> <span class="o">[</span><span class="n">group</span> <span class="n">G</span><span class="o">]</span> <span class="o">(</span><span class="n">hG4</span> <span class="o">:</span> <span class="n">fintype.card</span> <span class="n">G</span> <span class="bp">=</span> <span class="mi">4</span><span class="o">)</span>
  <span class="o">(</span><span class="n">g</span> <span class="n">h</span> <span class="o">:</span> <span class="n">G</span><span class="o">)</span> <span class="o">:</span> <span class="n">g</span> <span class="bp">*</span> <span class="n">h</span> <span class="bp">=</span> <span class="n">h</span> <span class="bp">*</span> <span class="n">g</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="k">have</span> <span class="n">e</span> <span class="o">:</span> <span class="n">G</span> <span class="bp">≃</span> <span class="n">G4</span> <span class="o">:=</span> <span class="n">fintype.equiv_fin_of_card_eq</span> <span class="n">hG4</span><span class="o">,</span>
  <span class="n">letI</span> <span class="n">grp</span> <span class="o">:=</span> <span class="n">equiv.group</span> <span class="n">e.symm</span><span class="o">,</span>
  <span class="k">let</span> <span class="n">e'</span> <span class="o">:=</span> <span class="n">e.symm.mul_equiv</span><span class="o">,</span>
  <span class="k">have</span> <span class="o">:=</span> <span class="n">fun_like.congr_arg</span> <span class="n">e'</span> <span class="o">(</span><span class="n">mul_comm_of_G4</span> <span class="o">(</span><span class="n">e'.symm</span> <span class="n">g</span><span class="o">)</span> <span class="o">(</span><span class="n">e'.symm</span> <span class="n">h</span><span class="o">)),</span>
  <span class="n">simpa</span> <span class="n">only</span> <span class="o">[</span><span class="n">map_mul</span><span class="o">,</span> <span class="n">mul_equiv.apply_symm_apply</span><span class="o">],</span>
<span class="kd">end</span>
</code></pre></div>
<p>Where <a href="https://leanprover-community.github.io/mathlib_docs/find/equiv.mul_equiv">docs#equiv.mul_equiv</a> is responsible for most of the cleanup</p>



<a name="291009570"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/from%20iso%20between%20sets%20to%20iso%20between%20groups/near/291009570" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/from.20iso.20between.20sets.20to.20iso.20between.20groups.html#291009570">(Jul 27 2022 at 09:31)</a>:</h4>
<p>I'm a little suspicious that your <code>mul_comm_of_G4</code> doesn't state what you think it states, but I guess you'll find out when you start trying to prove it!</p>



<a name="291017088"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/from%20iso%20between%20sets%20to%20iso%20between%20groups/near/291017088" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/from.20iso.20between.20sets.20to.20iso.20between.20groups.html#291017088">(Jul 27 2022 at 10:50)</a>:</h4>
<p>What are you worried about? It's still true, right?</p>



<a name="291017166"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/from%20iso%20between%20sets%20to%20iso%20between%20groups/near/291017166" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/from.20iso.20between.20sets.20to.20iso.20between.20groups.html#291017166">(Jul 27 2022 at 10:51)</a>:</h4>
<p>I think there are two open PRs now proving that all groups of order p^2 are commutative by the way</p>



<a name="291017192"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/from%20iso%20between%20sets%20to%20iso%20between%20groups/near/291017192" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/from.20iso.20between.20sets.20to.20iso.20between.20groups.html#291017192">(Jul 27 2022 at 10:51)</a>:</h4>
<p>Yes, but it's just as hard as the next lemma, right?</p>



<a name="291017282"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/from%20iso%20between%20sets%20to%20iso%20between%20groups/near/291017282" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/from.20iso.20between.20sets.20to.20iso.20between.20groups.html#291017282">(Jul 27 2022 at 10:52)</a>:</h4>
<p>Yes!</p>



<a name="291018808"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/from%20iso%20between%20sets%20to%20iso%20between%20groups/near/291018808" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/from.20iso.20between.20sets.20to.20iso.20between.20groups.html#291018808">(Jul 27 2022 at 11:08)</a>:</h4>
<p>Possibly harder than the next lemma, because either you don't unfold G4 in which case it's basically identical, or do you unfold it and now you have <code>1 : fin 4</code> and <code>1 : G4</code> for which equality is undecidable</p>



<a name="291020050"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/from%20iso%20between%20sets%20to%20iso%20between%20groups/near/291020050" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jiatong Yang <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/from.20iso.20between.20sets.20to.20iso.20between.20groups.html#291020050">(Jul 27 2022 at 11:22)</a>:</h4>
<p>Thank you a lot. I've unlocked the answer to the problem since I couldn't solve the first lemma either. <span aria-label="sob" class="emoji emoji-1f62d" role="img" title="sob">:sob:</span></p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>