---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/Contributing.20AVL.20tree.20module.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Contributing.20AVL.20tree.20module.html">Contributing AVL tree module</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="281699974"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Contributing%20AVL%20tree%20module/near/281699974" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Henry Pearson <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Contributing.20AVL.20tree.20module.html#281699974">(May 09 2022 at 15:19)</a>:</h4>
<p>Hi, for the past few months I have been writing a formalisation of AVL trees as part of an undergraduate project. I was looking to potentially contribute this to mathlib - would anyone be able to help me with this process? My code for the project can be found here <a href="https://github.com/HenryPearson2001/avltree">https://github.com/HenryPearson2001/avltree</a>. Thanks!</p>



<a name="281710802"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Contributing%20AVL%20tree%20module/near/281710802" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jannis Limperg <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Contributing.20AVL.20tree.20module.html#281710802">(May 09 2022 at 16:33)</a>:</h4>
<p>Looks cool! I'm afraid I can't help much with the contribution process, but I have one comment on the content: if you want your operations to be efficient, you need to cache the depth in each <code>avlnode</code>. Otherwise you recompute it all the time. Well-formedness then needs to be extended to include the invariant that the cached depth is correct. (I had a student last year who did a similar project and we made the same mistake. <span aria-label="innocent" class="emoji emoji-1f607" role="img" title="innocent">:innocent:</span> )</p>



<a name="281711730"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Contributing%20AVL%20tree%20module/near/281711730" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Henry Pearson <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Contributing.20AVL.20tree.20module.html#281711730">(May 09 2022 at 16:40)</a>:</h4>
<p>Ah thanks for the message! I did consider this but decided not to cache the depth for simplicity, my reasoning for not needing it being that the module is not designed for practical usage of AVL trees, only to prove theorems involving AVL trees, so it only matters that the structure 'looks correct' if that makes sense.</p>



<a name="281713153"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Contributing%20AVL%20tree%20module/near/281713153" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jannis Limperg <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Contributing.20AVL.20tree.20module.html#281713153">(May 09 2022 at 16:51)</a>:</h4>
<p>Sure! But the practical version (for which, I think, not much needs to change beyond the depth caching) would be much more interesting. Not so much for Lean 3 but in Lean 4, it would be really nice to have some verified and reasonably performant data structures.</p>



<a name="281715707"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Contributing%20AVL%20tree%20module/near/281715707" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Henry Pearson <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Contributing.20AVL.20tree.20module.html#281715707">(May 09 2022 at 17:09)</a>:</h4>
<p>Ah yeah that's true, I'll have a look at changing it</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>