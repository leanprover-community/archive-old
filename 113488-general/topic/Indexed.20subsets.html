---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/Indexed.20subsets.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Indexed.20subsets.html">Indexed subsets</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="257044978"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Indexed%20subsets/near/257044978" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Henrik Böving <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Indexed.20subsets.html#257044978">(Oct 11 2021 at 10:42)</a>:</h4>
<p>I'm doing some set theory and stumbled upon something I am rather unsure how to express in Lean, basically if <code>A : set (set α)</code> I'd like to express something like:</p>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi mathvariant="normal">∀</mi><msub><mi>A</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>A</mi><mn>2</mn></msub><mo separator="true">,</mo><mo>…</mo><mo separator="true">,</mo><msub><mi>A</mi><mi>n</mi></msub><mo>∈</mo><mi>A</mi><mo separator="true">,</mo><mrow><mo fence="true">(</mo><munderover><mo>⋃</mo><mrow><mi>i</mi><mo>=</mo><mn>0</mn></mrow><mi>n</mi></munderover><msub><mi>A</mi><mi>i</mi></msub><mo fence="true">)</mo></mrow><mo>∈</mo><mi>A</mi></mrow><annotation encoding="application/x-tex">\forall A_1, A_2, \dots, A_n \in A, \left(\bigcup_{i=0}^n A_i \right) \in A</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord">∀</span><span class="mord"><span class="mord mathnormal">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathnormal">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner">…</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathnormal">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:3.027669em;vertical-align:-1.277669em;"></span><span class="mord mathnormal">A</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size4">(</span></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.6513970000000002em;"><span style="top:-1.872331em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">0</span></span></span></span><span style="top:-3.050005em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">⋃</span></span></span><span style="top:-4.3000050000000005em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.277669em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathnormal">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size4">)</span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal">A</span></span></span></span></span></p>
<p>And I have no idea at all how to deal with these indexed subsets of A, would someone happen to know?</p>



<a name="257045480"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Indexed%20subsets/near/257045480" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Indexed.20subsets.html#257045480">(Oct 11 2021 at 10:47)</a>:</h4>
<p><span class="user-mention" data-user-id="395550">@Henrik Böving</span> There are basically two options: you can work with an (unordered) set of sets: <code>As : set (set X)</code>. Or you can have a function <code>I → set X</code>, where <code>I</code> is an indexing type such as <code>fin n</code>.</p>



<a name="257045510"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Indexed%20subsets/near/257045510" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Indexed.20subsets.html#257045510">(Oct 11 2021 at 10:47)</a>:</h4>
<p>In the second case, <code>I</code> could or could not come with an ordering.</p>



<a name="257048428"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Indexed%20subsets/near/257048428" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Henrik Böving <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Indexed.20subsets.html#257048428">(Oct 11 2021 at 11:12)</a>:</h4>
<p>Would there be any advantages from one over the other in this specific case?</p>



<a name="257049767"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Indexed%20subsets/near/257049767" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Indexed.20subsets.html#257049767">(Oct 11 2021 at 11:24)</a>:</h4>
<p>I might use <code>∀ X : finset A</code>, and using <code>finset.sup</code> to express the condition you want.</p>



<a name="257051010"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Indexed%20subsets/near/257051010" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Indexed.20subsets.html#257051010">(Oct 11 2021 at 11:36)</a>:</h4>
<p>Depending on the situation you might also get by with just the cases n = 2 and (if applicable) n = 0</p>



<a name="257051422"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Indexed%20subsets/near/257051422" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Indexed.20subsets.html#257051422">(Oct 11 2021 at 11:40)</a>:</h4>
<p>Here are some ways to express this. I recommend going with Reid's suggestion (option 4)</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">data.finset.lattice</span>
<span class="kn">import</span> <span class="n">data.set.finite</span>

<span class="kd">variables</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span>
<span class="kd">def</span> <span class="n">closed_under_finite_unions1</span> <span class="o">(</span><span class="n">A</span> <span class="o">:</span> <span class="n">set</span> <span class="o">(</span><span class="n">set</span> <span class="n">α</span><span class="o">))</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">:=</span>
<span class="bp">∀</span> <span class="n">B</span> <span class="o">:</span> <span class="n">finset</span> <span class="o">(</span><span class="n">set</span> <span class="n">α</span><span class="o">),</span> <span class="bp">↑</span><span class="n">B</span> <span class="bp">⊆</span> <span class="n">A</span> <span class="bp">→</span> <span class="n">B.sup</span> <span class="n">id</span> <span class="bp">∈</span> <span class="n">A</span>

<span class="kd">def</span> <span class="n">closed_under_finite_unions2</span> <span class="o">(</span><span class="n">A</span> <span class="o">:</span> <span class="n">set</span> <span class="o">(</span><span class="n">set</span> <span class="n">α</span><span class="o">))</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">:=</span>
<span class="bp">∀</span> <span class="n">B</span> <span class="o">:</span> <span class="n">set</span> <span class="o">(</span><span class="n">set</span> <span class="n">α</span><span class="o">),</span> <span class="n">B.finite</span> <span class="bp">→</span> <span class="n">B</span> <span class="bp">⊆</span> <span class="n">A</span> <span class="bp">→</span> <span class="bp">⋃₀</span> <span class="n">B</span> <span class="bp">∈</span> <span class="n">A</span>

<span class="kd">def</span> <span class="o">{</span><span class="n">u</span><span class="o">}</span> <span class="n">closed_under_finite_unions3</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">}</span> <span class="o">(</span><span class="n">A</span> <span class="o">:</span> <span class="n">set</span> <span class="o">(</span><span class="n">set</span> <span class="n">α</span><span class="o">))</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">:=</span>
<span class="bp">∀</span> <span class="o">(</span><span class="n">ι</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span> <span class="o">(</span><span class="n">B</span> <span class="o">:</span> <span class="n">ι</span> <span class="bp">→</span> <span class="n">set</span> <span class="n">α</span><span class="o">),</span> <span class="n">fintype</span> <span class="n">ι</span> <span class="bp">→</span> <span class="o">(</span><span class="bp">∀</span> <span class="n">i</span><span class="o">,</span> <span class="n">B</span> <span class="n">i</span> <span class="bp">∈</span> <span class="n">A</span><span class="o">)</span> <span class="bp">→</span> <span class="o">(</span><span class="bp">⋃</span> <span class="n">i</span><span class="o">,</span> <span class="n">B</span> <span class="n">i</span><span class="o">)</span> <span class="bp">∈</span> <span class="n">A</span>

<span class="kd">def</span> <span class="n">closed_under_finite_unions4</span> <span class="o">(</span><span class="n">A</span> <span class="o">:</span> <span class="n">set</span> <span class="o">(</span><span class="n">set</span> <span class="n">α</span><span class="o">))</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">:=</span>
<span class="bp">∅</span> <span class="bp">∈</span> <span class="n">A</span> <span class="bp">∧</span> <span class="bp">∀</span> <span class="n">A₁</span> <span class="n">A₂</span> <span class="bp">∈</span> <span class="n">A</span><span class="o">,</span> <span class="n">A₁</span> <span class="bp">∪</span> <span class="n">A₂</span> <span class="bp">∈</span> <span class="n">A</span>
</code></pre></div>
<p>You can then have the other versions as theorems.</p>



<a name="257051534"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Indexed%20subsets/near/257051534" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Indexed.20subsets.html#257051534">(Oct 11 2021 at 11:41)</a>:</h4>
<p>compare <a href="https://leanprover-community.github.io/mathlib_docs/find/is_pi_system">docs#is_pi_system</a></p>



<a name="257052681"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Indexed%20subsets/near/257052681" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Henrik Böving <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Indexed.20subsets.html#257052681">(Oct 11 2021 at 11:52)</a>:</h4>
<p>I went with the indexed approach for now since it most closely matches what I want to express, thanks to everyone!</p>



<a name="257054082"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Indexed%20subsets/near/257054082" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Indexed.20subsets.html#257054082">(Oct 11 2021 at 12:05)</a>:</h4>
<p>It's worth noting that you can always recover the set version from the indexed version by choosing <code>I</code> as <code>coe_sort As</code> and <code>f : I → set X</code> as <code>coe</code></p>



<a name="257075318"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Indexed%20subsets/near/257075318" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Indexed.20subsets.html#257075318">(Oct 11 2021 at 14:52)</a>:</h4>
<p>It may be convenient to require <code>closed_under_finite_unions4</code> in the definition, then have others as theorems.</p>



<a name="257075409"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Indexed%20subsets/near/257075409" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Indexed.20subsets.html#257075409">(Oct 11 2021 at 14:53)</a>:</h4>
<p>Because it will be easier to prove that some set of sets satisfies the predicate.</p>



<a name="257075522"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Indexed%20subsets/near/257075522" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Indexed.20subsets.html#257075522">(Oct 11 2021 at 14:54)</a>:</h4>
<p>Also, in version 3 the <code>ι</code> is restricted to universe <code>u</code>. In a lemma you could remove that restriction.</p>



<a name="257075551"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Indexed%20subsets/near/257075551" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Indexed.20subsets.html#257075551">(Oct 11 2021 at 14:54)</a>:</h4>
<p>(You'll certainly be happy to have the flexibility to use <code>ι = fin n</code>)</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>