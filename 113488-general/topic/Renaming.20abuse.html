---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/Renaming.20abuse.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Renaming.20abuse.html">Renaming abuse</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="274618088"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Renaming%20abuse/near/274618088" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Renaming.20abuse.html#274618088">(Mar 08 2022 at 22:38)</a>:</h4>
<p>Consider this:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">order.conditionally_complete_lattice</span>

<span class="kd">set_option</span> <span class="n">old_structure_cmd</span> <span class="n">true</span>

<span class="kd">class</span> <span class="n">conditionally_complete_linear_ordered_field</span> <span class="o">(</span><span class="n">F</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span>
  <span class="kd">extends</span> <span class="n">linear_ordered_field</span> <span class="n">F</span><span class="o">,</span> <span class="n">conditionally_complete_linear_order</span> <span class="n">F</span>
</code></pre></div>
<p>This fails with an exotic error:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">invalid</span> <span class="bp">'</span><span class="kd">structure</span><span class="bp">'</span> <span class="n">header</span><span class="o">,</span> <span class="n">field</span> <span class="bp">'</span><span class="n">max_def'</span> <span class="k">from</span> <span class="bp">'</span><span class="n">conditionally_complete_linear_order'</span> <span class="n">has</span> <span class="n">already</span> <span class="n">been</span> <span class="n">declared</span> <span class="k">with</span> <span class="n">a</span> <span class="n">different</span> <span class="n">type</span>
  <span class="n">auto_param</span> <span class="o">(</span><span class="n">max</span> <span class="bp">=</span> <span class="n">max_default</span><span class="o">)</span>
    <span class="o">(</span><span class="n">name.mk_string</span> <span class="s2">"reflexivity"</span> <span class="o">(</span><span class="n">name.mk_string</span> <span class="s2">"interactive"</span> <span class="o">(</span><span class="n">name.mk_string</span> <span class="s2">"tactic"</span> <span class="n">name.anonymous</span><span class="o">)))</span>
<span class="n">and</span>
  <span class="n">auto_param</span> <span class="o">(</span><span class="n">sup</span> <span class="bp">=</span> <span class="n">max_default</span><span class="o">)</span>
    <span class="o">(</span><span class="n">name.mk_string</span> <span class="s2">"reflexivity"</span> <span class="o">(</span><span class="n">name.mk_string</span> <span class="s2">"interactive"</span> <span class="o">(</span><span class="n">name.mk_string</span> <span class="s2">"tactic"</span> <span class="n">name.anonymous</span><span class="o">)))</span>
</code></pre></div>
<p>and I believe the culprit is <span class="user-mention" data-user-id="310045">@Eric Wieser</span>'s <a href="https://github.com/leanprover-community/mathlib/pull/11309">#11309</a>!</p>



<a name="274618326"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Renaming%20abuse/near/274618326" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Renaming.20abuse.html#274618326">(Mar 08 2022 at 22:41)</a>:</h4>
<p>In this specific case, I'm more than happy to not use old structures, but this seems to go against the style of the algebraic hierarchy.</p>



<a name="274618683"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Renaming%20abuse/near/274618683" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Renaming.20abuse.html#274618683">(Mar 08 2022 at 22:45)</a>:</h4>
<p>We could always rename <code>min</code> to inf globally to make that specific problem go away, I just was too lazy too (as <a href="https://leanprover-community.github.io/mathlib_docs/find/linear_order">docs#linear_order</a> is still in core)</p>



<a name="274618730"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Renaming%20abuse/near/274618730" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Renaming.20abuse.html#274618730">(Mar 08 2022 at 22:45)</a>:</h4>
<p>I believe it's in core because it's used to order actions within tactics.</p>



<a name="277428421"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Renaming%20abuse/near/277428421" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Renaming.20abuse.html#277428421">(Apr 01 2022 at 14:43)</a>:</h4>
<p>Solved it temporarily by <code>renaming</code> the fields myself.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>