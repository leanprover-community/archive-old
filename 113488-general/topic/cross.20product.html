---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/cross.20product.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html">cross product</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="265410455"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/265410455" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#265410455">(Dec 18 2021 at 10:16)</a>:</h4>
<p>One of the targets on <a href="https://github.com/leanprover-community/mathlib/wiki/Undergrad-TODO-trivial-targets">https://github.com/leanprover-community/mathlib/wiki/Undergrad-TODO-trivial-targets</a> is the cross product. I agree that it is quite easy to define the cross product on <code>fin 3 → ℝ</code>. But presumably that is not the correct generality, and we want to define it on arbitrary 3-dimensional oriented Euclidean spaces, or something like that.<br>
Maybe that's not even the right generality, and we want something else in fact...</p>
<p>If you have an opinion on what the cross product in Lean should look like, please share it here.</p>



<a name="265410467"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/265410467" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#265410467">(Dec 18 2021 at 10:17)</a>:</h4>
<p>&lt;insert some property&gt; Lie bracket?</p>



<a name="265411073"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/265411073" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#265411073">(Dec 18 2021 at 10:32)</a>:</h4>
<p>I don't think we should waste time here. If nobody is interested in the generalization then let's do the specific undergrad case and it will be refactored if anyone needs a generalization in the future. The optimal thing to do now is probably the case of an oriented three dimensional real inner product space, and it would be nice to make sure this applies to <code>fin 3 → ℝ</code>.</p>



<a name="265411451"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/265411451" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#265411451">(Dec 18 2021 at 10:43)</a>:</h4>
<p>Would the binary exterior product be a sensible thing to formalize relating to this?</p>



<a name="265411827"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/265411827" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#265411827">(Dec 18 2021 at 10:53)</a>:</h4>
<p>Maybe the binary specialization isn't as useful for the exterior product as it is for the tensor product.</p>



<a name="265411878"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/265411878" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#265411878">(Dec 18 2021 at 10:54)</a>:</h4>
<p>I think it would be good to have <code>cross_alternating : alternating_map R V V (fin 2)</code> somewhere.</p>



<a name="265411885"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/265411885" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#265411885">(Dec 18 2021 at 10:55)</a>:</h4>
<p><span class="user-mention" data-user-id="110031">@Patrick Massot</span> Would it be good enough to only deal with the case <code>fin 3 → ℝ</code>?</p>



<a name="265411900"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/265411900" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#265411900">(Dec 18 2021 at 10:55)</a>:</h4>
<p>(To be honest, I don't think I've ever used the cross product after some example sheet in my 1st year LinAlg course.)</p>



<a name="265412697"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/265412697" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#265412697">(Dec 18 2021 at 11:13)</a>:</h4>
<p>I agree we should probably have the generalization to an inner product space</p>



<a name="265412702"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/265412702" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#265412702">(Dec 18 2021 at 11:13)</a>:</h4>
<p>Otherwise we can't use it to talk about the model of polar coordinates <code>(r, θ, ψ)</code> without forcing the user to go via an equiv</p>



<a name="265412864"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/265412864" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#265412864">(Dec 18 2021 at 11:17)</a>:</h4>
<p>Honestly, I think we could get away with doing only <code>fin 3 → ℝ</code>. This definition is really nothing important.</p>



<a name="265412926"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/265412926" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#265412926">(Dec 18 2021 at 11:18)</a>:</h4>
<p>If we don't do the full generalization, we may as well do <code>fin 3 → R</code> so that we can take a cross product of integer vectors, right?</p>



<a name="265414493"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/265414493" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#265414493">(Dec 18 2021 at 11:56)</a>:</h4>
<p>You need some <code>sin(θ)</code> in the definition, right?</p>



<a name="265415424"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/265415424" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joseph Myers <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#265415424">(Dec 18 2021 at 12:18)</a>:</h4>
<p>If you define it for a given basis, an arbitrary <code>comm_ring</code> should work.</p>
<p>If you define it for an orientation without specifying a choice of basis, you need extra structure (such as the real inner product) to make the result (as a vector in the same space as the arguments) depend only on the orientation.</p>
<p>I guess that means that the cross product with respect to a given basis is a sensible thing to define, whether or not we also define it with respect to an orientation and prove how it relates to <code>sin</code> in a real inner product space.</p>
<p>We don't yet have "given an orientation of a real inner product space, there exists an orthonormal basis corresponding to that orientation" (but that's something <a href="https://github.com/leanprover-community/mathlib/pull/10737">#10737</a> is aiming towards, being able to describe how concrete basis / alternating map manipulations relate to orientations).</p>



<a name="265420380"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/265420380" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#265420380">(Dec 18 2021 at 14:09)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112680">Johan Commelin</span> <a href="#narrow/stream/113488-general/topic/cross.20product/near/265414493">said</a>:</p>
<blockquote>
<p>You need some <code>sin(θ)</code> in the definition, right?</p>
</blockquote>
<p>Johan -- the definition is <code>\lam i, if i = 0 then a(1)*b(1)-a(2)*b(2) else if i = 1 then a(2)*b(0)-a(0)*b(2) else a(0)*b(1)-a(1)*b(0)</code></p>



<a name="265420485"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/265420485" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#265420485">(Dec 18 2021 at 14:11)</a>:</h4>
<p>Good point!</p>



<a name="265420701"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/265420701" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#265420701">(Dec 18 2021 at 14:15)</a>:</h4>
<p>Probably better with <code>![_, _, _]</code></p>



<a name="265433167"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/265433167" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kalle Kytölä <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#265433167">(Dec 18 2021 at 18:15)</a>:</h4>
<p>Is it meaningful to make the cross-product an instance of <a href="https://leanprover-community.github.io/mathlib_docs/find/lie_ring">docs#lie_ring</a> on the type <code>fin 3 → R</code> for <code>[add_comm_group R]</code>?</p>



<a name="265433224"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/265433224" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kalle Kytölä <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#265433224">(Dec 18 2021 at 18:16)</a>:</h4>
<p>I don't know if that plays well with nice notation, though.</p>



<a name="265433322"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/265433322" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#265433322">(Dec 18 2021 at 18:18)</a>:</h4>
<p>wouldn't you need <code>(comm_)ring</code>? but yes, I'd agree that's sensible and then makes it very easy to state at any level of generality</p>



<a name="265433597"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/265433597" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kalle Kytölä <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#265433597">(Dec 18 2021 at 18:24)</a>:</h4>
<p>I'm not very familiar with the implementation of <code>lie_ring</code>, but I think it has <code>add_comm_group</code> assumption.</p>
<p>By the way, I agree with much of the previous discussion that it is not obvious what generalizations we would care about. The cross product is mathematically a bit odd; I think it is something of a "law of small numbers" that there are not too many antisymmetric bilinear gadgets with Jacobi identity on merely 3 dimensional spaces, and therefore the cross product coincides with many conceptually different things.</p>
<p>But allowing e.g. integer entries seems meaningful, as <span class="user-mention silent" data-user-id="310045">Eric Wieser</span> pointed out.</p>



<a name="265433794"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/265433794" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#265433794">(Dec 18 2021 at 18:25)</a>:</h4>
<p>The cross product is an isomorphism of <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi mathvariant="double-struck">R</mi><mn>3</mn></msup></mrow><annotation encoding="application/x-tex">\mathbb{R}^3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mord"><span class="mord mathbb">R</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span></span></span></span></span></span></span></span> with <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi mathvariant="normal">Λ</mi><mn>2</mn></msup><mo stretchy="false">(</mo><msup><mi mathvariant="double-struck">R</mi><mn>3</mn></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\Lambda^2(\mathbb{R}^3)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0641em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord">Λ</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathbb">R</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span> and its existence comes from the coincidence that 3 choose 2 is 3 again.</p>



<a name="265433981"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/265433981" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kalle Kytölä <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#265433981">(Dec 18 2021 at 18:26)</a>:</h4>
<p>One of the coincidences I had in mind, indeed.</p>



<a name="265434925"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/265434925" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kalle Kytölä <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#265434925">(Dec 18 2021 at 18:35)</a>:</h4>
<p>To me, the implementation of cross product as an instance of <a href="https://leanprover-community.github.io/mathlib_docs/find/lie_ring">docs#lie_ring</a> would involve only two potential drawbacks: </p>
<ul>
<li>competing instances of <code>lie_ring</code> on <code>fin 3 → R</code> (although I don't currently see serious competitors)</li>
<li>difficulty to use nice notation (or would <code>⁅u, v⁆</code> be acceptable as such for the cross product?).</li>
</ul>



<a name="265436213"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/265436213" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#265436213">(Dec 18 2021 at 19:00)</a>:</h4>
<p>I meant the definition as Kevin wrote above to work, you need + and * so <code>comm_ring</code> seems like the sensible way to create the instance. The instance could be localised, too</p>



<a name="265436988"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/265436988" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#265436988">(Dec 18 2021 at 19:18)</a>:</h4>
<p>Every ring <code>R</code> is a Lie algebra, so <code>fin 3 → R</code> would be the Lie algebra <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>R</mi><mrow><mo>⊕</mo><mn>3</mn></mrow></msup></mrow><annotation encoding="application/x-tex">R^{⊕ 3}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">⊕</span><span class="mord mtight">3</span></span></span></span></span></span></span></span></span></span></span></span>.</p>



<a name="265437030"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/265437030" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#265437030">(Dec 18 2021 at 19:18)</a>:</h4>
<p>I think that's what mathlib currently assumes it to be.</p>



<a name="265438429"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/265438429" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#265438429">(Dec 18 2021 at 19:44)</a>:</h4>
<p>I don't think we should have a globally registered notation for cross product. This is too specialized.</p>



<a name="265441297"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/265441297" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#265441297">(Dec 18 2021 at 20:22)</a>:</h4>
<p><code>×₃</code> as locale notation?</p>



<a name="265535460"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/265535460" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Martin Dvořák <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#265535460">(Dec 20 2021 at 08:49)</a>:</h4>
<p>Is anybody working on it? If not, I'd like to take this task. Since I am a beginner, this looks good for me because it is probably the easiest-to-implement TODO in mathlib right now.</p>



<a name="265535759"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/265535759" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Martin Dvořák <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#265535759">(Dec 20 2021 at 08:53)</a>:</h4>
<p>I suppose I would define cross product as a function of the type <code>(fin 3 → α) → (fin 3 → α)</code> and I would prove some trivial properties of it (like anticommutativity). Is there something I should be aware of before I start?</p>



<a name="265536556"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/265536556" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#265536556">(Dec 20 2021 at 09:00)</a>:</h4>
<p>I think you should be aware of the above discussion <span aria-label="wink" class="emoji emoji-1f609" role="img" title="wink">:wink:</span> (There are a tonne of generalizations, but I think the consensus is that it's ok to focus on <code>fin 3 → R</code> for now.)</p>



<a name="265536596"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/265536596" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#265536596">(Dec 20 2021 at 09:01)</a>:</h4>
<p>Also, please use <code>R</code> instead of <code>α</code>. It is a useful signal to the reader that <code>R</code> is not some random type, but caries a ring-like structure.</p>



<a name="265541619"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/265541619" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Martin Dvořák <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#265541619">(Dec 20 2021 at 09:55)</a>:</h4>
<p>Thank you! So you mean <code>R</code> not <code>ℝ</code> right?</p>



<a name="265543652"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/265543652" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Martin Dvořák <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#265543652">(Dec 20 2021 at 10:16)</a>:</h4>
<p>Thanks! Imma do it! I think it will be a great exercise to start with and experience the whole mathlib workflow before I dive into something complicated.</p>



<a name="265557546"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/265557546" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joseph Myers <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#265557546">(Dec 20 2021 at 12:44)</a>:</h4>
<p>Maybe at least bilinearity should be bundled (so <code>(fin 3 → R) →ₗ[R] (fin 3 → R) →ₗ[R] (fin 3 → R)</code>)?</p>



<a name="265558475"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/265558475" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#265558475">(Dec 20 2021 at 12:55)</a>:</h4>
<p>Should we be calling <code>star</code> on the output and requiring <code>star_ring R</code>? <a href="https://math.stackexchange.com/q/129227/1896">https://math.stackexchange.com/q/129227/1896</a> suggests we probably should.</p>



<a name="265558619"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/265558619" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Martin Dvořák <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#265558619">(Dec 20 2021 at 12:57)</a>:</h4>
<p><span class="user-mention silent" data-user-id="266253">Joseph Myers</span> <a href="#narrow/stream/113488-general/topic/cross.20product/near/265557546">said</a>:</p>
<blockquote>
<p>Maybe at least bilinearity should be bundled (so <code>(fin 3 → R) →ₗ[R] (fin 3 → R) →ₗ[R] (fin 3 → R)</code>)?</p>
</blockquote>
<p>What does it mean?</p>



<a name="265558777"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/265558777" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#265558777">(Dec 20 2021 at 12:59)</a>:</h4>
<p>It means exactly what Joseph said, that the map is bilinear</p>



<a name="265558804"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/265558804" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#265558804">(Dec 20 2021 at 12:59)</a>:</h4>
<p>i.e. linear in both arguments</p>



<a name="265558952"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/265558952" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Martin Dvořák <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#265558952">(Dec 20 2021 at 13:00)</a>:</h4>
<p>Yes but what is the syntax <code>→ₗ[R]</code> for?</p>



<a name="265559012"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/265559012" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#265559012">(Dec 20 2021 at 13:00)</a>:</h4>
<p><a href="https://leanprover-community.github.io/mathlib_docs/find/linear_map">docs#linear_map</a></p>



<a name="265559067"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/265559067" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#265559067">(Dec 20 2021 at 13:01)</a>:</h4>
<p>If you type in the full type as above, you can hover over it in vs-code to find out what the syntax means</p>



<a name="265559123"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/265559123" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Martin Dvořák <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#265559123">(Dec 20 2021 at 13:01)</a>:</h4>
<p>Thank yall for helping the n00b!</p>



<a name="265611110"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/265611110" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Martin Dvořák <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#265611110">(Dec 20 2021 at 20:18)</a>:</h4>
<p>Can I get your feedback on my wip please? This is my first time contributing (not only to Lean/mathlib but also to any open source).<br>
<a href="https://github.com/madvorak/mathlib/blob/master/src/linear_algebra/cross_product.lean">https://github.com/madvorak/mathlib/blob/master/src/linear_algebra/cross_product.lean</a></p>



<a name="265612889"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/265612889" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Andrew Yang <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#265612889">(Dec 20 2021 at 20:36)</a>:</h4>
<p>A quick golf</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="sd">/-- cross product is anti-commutative -/</span>
<span class="kd">lemma</span> <span class="n">cross_product_anticomm</span> <span class="o">(</span><span class="n">v</span> <span class="n">w</span> <span class="o">:</span> <span class="n">fin</span> <span class="mi">3</span> <span class="bp">→</span> <span class="n">R</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">v</span> <span class="bp">×₃</span> <span class="n">w</span> <span class="bp">=</span> <span class="bp">-</span> <span class="o">(</span><span class="n">w</span> <span class="bp">×₃</span> <span class="n">v</span><span class="o">)</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">simp</span> <span class="o">[</span><span class="n">cross_product</span><span class="o">,</span> <span class="n">mul_comm</span> <span class="o">(</span><span class="n">v</span> <span class="n">_</span><span class="o">)</span> <span class="o">(</span><span class="n">w</span> <span class="n">_</span><span class="o">)]</span>
<span class="kd">end</span>
</code></pre></div>



<a name="265613970"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/265613970" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Martin Dvořák <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#265613970">(Dec 20 2021 at 20:47)</a>:</h4>
<p><span class="user-mention silent" data-user-id="439483">Andrew Yang</span> <a href="#narrow/stream/113488-general/topic/cross.20product/near/265612889">said</a>:</p>
<blockquote>
<p>A quick golf</p>
<p><div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="sd">/-- cross product is anti-commutative -/</span>
<span class="kd">lemma</span> <span class="n">cross_product_anticomm</span> <span class="o">(</span><span class="n">v</span> <span class="n">w</span> <span class="o">:</span> <span class="n">fin</span> <span class="mi">3</span> <span class="bp">→</span> <span class="n">R</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">v</span> <span class="bp">×₃</span> <span class="n">w</span> <span class="bp">=</span> <span class="bp">-</span> <span class="o">(</span><span class="n">w</span> <span class="bp">×₃</span> <span class="n">v</span><span class="o">)</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">simp</span> <span class="o">[</span><span class="n">cross_product</span><span class="o">,</span> <span class="n">mul_comm</span> <span class="o">(</span><span class="n">v</span> <span class="n">_</span><span class="o">)</span> <span class="o">(</span><span class="n">w</span> <span class="n">_</span><span class="o">)]</span>
<span class="kd">end</span>
</code></pre></div><br>
</p>
</blockquote>
<p>Thanks a lot!!!!!</p>
<p>I will try to write more proofs in a similar manner.</p>



<a name="265614301"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/265614301" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#265614301">(Dec 20 2021 at 20:50)</a>:</h4>
<p>Going back to the Dec 18 discussion, regarding the correct generalization: I think the cross product is commonly regarded as being a bilinear map on <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi mathvariant="double-struck">R</mi><mn>3</mn></msup></mrow><annotation encoding="application/x-tex">\mathbb{R}^3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mord"><span class="mord mathbb">R</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span></span></span></span></span></span></span></span>, and anyone who uses generalizations tends not to use the cross product itself.</p>
<p>The property that completely determines the cross product is the triple product: <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mi>u</mi><mo>×</mo><mi>v</mi><mo stretchy="false">)</mo><mo>⋅</mo><mi>w</mi><mo>=</mo><mi>det</mi><mo>⁡</mo><mo stretchy="false">[</mo><mi>u</mi><mtext> </mtext><mi>v</mi><mtext> </mtext><mi>w</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">(u \times v)\cdot w=\det[u\ v\ w]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal">u</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mop">det</span><span class="mopen">[</span><span class="mord mathnormal">u</span><span class="mspace"> </span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mspace"> </span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mclose">]</span></span></span></span>. The idea is that <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>w</mi><mo>↦</mo><mi>det</mi><mo>⁡</mo><mo stretchy="false">[</mo><mi>u</mi><mtext> </mtext><mi>v</mi><mtext> </mtext><mi>w</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">w\mapsto \det[u\ v\ w]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.522em;vertical-align:-0.011em;"></span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">↦</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mop">det</span><span class="mopen">[</span><span class="mord mathnormal">u</span><span class="mspace"> </span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mspace"> </span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mclose">]</span></span></span></span> is an element of <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><msup><mi mathvariant="double-struck">R</mi><mn>3</mn></msup><msup><mo stretchy="false">)</mo><mo>∗</mo></msup></mrow><annotation encoding="application/x-tex">(\mathbb{R}^3)^*</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0641em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathbb">R</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span></span></span></span></span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6887em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">∗</span></span></span></span></span></span></span></span></span></span></span>, and the dot product lets you take this dual vector and turn it back into a vector.</p>
<p>A general version is that if you have some fixed <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>ω</mi><mo>∈</mo><msup><mi mathvariant="normal">Λ</mi><mrow><mi>k</mi><mo>+</mo><mn>1</mn></mrow></msup><mo stretchy="false">(</mo><mi>V</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\omega\in \Lambda^{k+1}(V)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">ω</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.0991em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord">Λ</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8491em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="mclose">)</span></span></span></span> when <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>V</mi></mrow><annotation encoding="application/x-tex">V</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.22222em;">V</span></span></span></span> is an inner product space, you can take vectors <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>v</mi><mn>1</mn></msub><mo separator="true">,</mo><mo>…</mo><mo separator="true">,</mo><msub><mi>v</mi><mi>k</mi></msub><mo>∈</mo><mi>V</mi></mrow><annotation encoding="application/x-tex">v_1,\dots,v_k\in V</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7335em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner">…</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.22222em;">V</span></span></span></span>, compute the iterated interior multiplication <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>i</mi><msub><mi>v</mi><mi>k</mi></msub></msub><msub><mi>i</mi><msub><mi>v</mi><mrow><mi>k</mi><mo>−</mo><mn>1</mn></mrow></msub></msub><mo>⋯</mo><msub><mi>i</mi><msub><mi>v</mi><mn>1</mn></msub></msub><mo stretchy="false">(</mo><mi>ω</mi><mo stretchy="false">)</mo><mo>∈</mo><msup><mi>V</mi><mo>∗</mo></msup></mrow><annotation encoding="application/x-tex">i_{v_k}i_{v_{k-1}}\cdots i_{v_1}(\omega)\in V^*</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0475em;vertical-align:-0.2975em;"></span><span class="mord"><span class="mord mathnormal">i</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3488em;margin-left:-0.0359em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.1512em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2559em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal">i</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3488em;margin-left:-0.0359em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2107em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2975em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner">⋯</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">i</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3173em;"><span style="top:-2.357em;margin-left:-0.0359em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2501em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03588em;">ω</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6887em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6887em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">∗</span></span></span></span></span></span></span></span></span></span></span>, then dualize using the inner product to get an element of <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>V</mi></mrow><annotation encoding="application/x-tex">V</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.22222em;">V</span></span></span></span>. This defines an alternating linear map <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi mathvariant="normal">Λ</mi><mi>k</mi></msup><mi>V</mi><mo>→</mo><mi>V</mi></mrow><annotation encoding="application/x-tex">\Lambda^k V\to V</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8491em;"></span><span class="mord"><span class="mord">Λ</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8491em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span></span></span></span></span><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.22222em;">V</span></span></span></span>.  The <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi><mo>=</mo><mn>2</mn></mrow><annotation encoding="application/x-tex">k=2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">2</span></span></span></span> case when <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>ω</mi></mrow><annotation encoding="application/x-tex">\omega</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">ω</span></span></span></span> is the determinant form gives the cross product.</p>



<a name="265615985"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/265615985" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Martin Dvořák <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#265615985">(Dec 20 2021 at 21:07)</a>:</h4>
<p><span class="user-mention silent" data-user-id="439483">Andrew Yang</span> <a href="#narrow/stream/113488-general/topic/cross.20product/near/265612889">said</a>:</p>
<blockquote>
<p>A quick golf</p>
<p><div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="sd">/-- cross product is anti-commutative -/</span>
<span class="kd">lemma</span> <span class="n">cross_product_anticomm</span> <span class="o">(</span><span class="n">v</span> <span class="n">w</span> <span class="o">:</span> <span class="n">fin</span> <span class="mi">3</span> <span class="bp">→</span> <span class="n">R</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">v</span> <span class="bp">×₃</span> <span class="n">w</span> <span class="bp">=</span> <span class="bp">-</span> <span class="o">(</span><span class="n">w</span> <span class="bp">×₃</span> <span class="n">v</span><span class="o">)</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">simp</span> <span class="o">[</span><span class="n">cross_product</span><span class="o">,</span> <span class="n">mul_comm</span> <span class="o">(</span><span class="n">v</span> <span class="n">_</span><span class="o">)</span> <span class="o">(</span><span class="n">w</span> <span class="n">_</span><span class="o">)]</span>
<span class="kd">end</span>
</code></pre></div><br>
</p>
</blockquote>
<p>Is the part <code>(v _) (w _)</code> needed?</p>



<a name="265616115"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/265616115" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Andrew Yang <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#265616115">(Dec 20 2021 at 21:08)</a>:</h4>
<p>Seems that it's not. Lean is smarter than I thought.</p>



<a name="265616379"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/265616379" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Martin Dvořák <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#265616379">(Dec 20 2021 at 21:10)</a>:</h4>
<p><span class="user-mention silent" data-user-id="439483">Andrew Yang</span> <a href="#narrow/stream/113488-general/topic/cross.20product/near/265616115">said</a>:</p>
<blockquote>
<p>Seems that it's not. Lean is smarter than I thought.</p>
</blockquote>
<p>What is the process of finding out that <code>simp</code> with my definition and the only lemma <code>mul_comm</code> is enough?</p>



<a name="265616591"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/265616591" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Andrew Yang <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#265616591">(Dec 20 2021 at 21:13)</a>:</h4>
<p>after <code>simp [cross_product]</code>, you will see that the two sides of the equation only differs by some <code>mul_comm</code>.</p>



<a name="265616730"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/265616730" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#265616730">(Dec 20 2021 at 21:14)</a>:</h4>
<p>Importantly, even though you could rewrite with <code>mul_comm</code> repeatedly forever, <code>simp</code> will put things into a normal form.</p>



<a name="265616876"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/265616876" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Martin Dvořák <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#265616876">(Dec 20 2021 at 21:16)</a>:</h4>
<p>Oh! Now I see that sequence </p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">dsimp</span> <span class="o">[</span><span class="n">cross_product</span><span class="o">],</span>
<span class="n">simp</span> <span class="o">[</span><span class="n">mul_comm</span><span class="o">],</span>
</code></pre></div>
<p>accomplishes the goal as well!</p>



<a name="265617082"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/265617082" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#265617082">(Dec 20 2021 at 21:18)</a>:</h4>
<p>Btw, you can get it down to just one line with</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">cross_product_anticomm</span> <span class="o">(</span><span class="n">v</span> <span class="n">w</span> <span class="o">:</span> <span class="n">fin</span> <span class="mi">3</span> <span class="bp">→</span> <span class="n">R</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">v</span> <span class="bp">×₃</span> <span class="n">w</span> <span class="bp">=</span> <span class="bp">-</span> <span class="o">(</span><span class="n">w</span> <span class="bp">×₃</span> <span class="n">v</span><span class="o">)</span> <span class="o">:=</span>
<span class="kd">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">cross_product</span><span class="o">,</span> <span class="n">mul_comm</span><span class="o">]</span>
</code></pre></div>
<p>Here's another:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">cross_product_anticomm'</span> <span class="o">(</span><span class="n">v</span> <span class="n">w</span> <span class="o">:</span> <span class="n">fin</span> <span class="mi">3</span> <span class="bp">→</span> <span class="n">R</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">v</span> <span class="bp">×₃</span> <span class="n">w</span> <span class="bp">+</span> <span class="n">w</span> <span class="bp">×₃</span> <span class="n">v</span> <span class="bp">=</span> <span class="mi">0</span> <span class="o">:=</span>
<span class="kd">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">cross_product</span><span class="o">,</span> <span class="n">add_eq_zero_iff_eq_neg</span><span class="o">,</span> <span class="n">mul_comm</span><span class="o">]</span>
</code></pre></div>



<a name="265617186"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/265617186" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#265617186">(Dec 20 2021 at 21:20)</a>:</h4>
<p>If you add spaces around the notation, you'll get somewhat more legible output in the goal window:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">local</span> <span class="kd">infix</span> <span class="bp">`</span> <span class="bp">×₃</span> <span class="bp">`</span><span class="o">:</span> <span class="mi">68</span> <span class="o">:=</span> <span class="n">cross_product</span>
<span class="kn">local</span> <span class="kd">infix</span> <span class="bp">`</span> <span class="bp">⬝</span> <span class="bp">`</span> <span class="o">:</span> <span class="mi">67</span> <span class="o">:=</span> <span class="n">matrix.dot_product</span>
</code></pre></div>



<a name="265618108"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/265618108" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Martin Dvořák <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#265618108">(Dec 20 2021 at 21:31)</a>:</h4>
<p><span class="user-mention silent" data-user-id="306601">Kyle Miller</span> <a href="#narrow/stream/113488-general/topic/cross.20product/near/265614301">said</a>:</p>
<blockquote>
<p>Going back to the Dec 18 discussion, regarding the correct generalization: I think the cross product is commonly regarded as being a bilinear map on <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi mathvariant="double-struck">R</mi><mn>3</mn></msup></mrow><annotation encoding="application/x-tex">\mathbb{R}^3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mord"><span class="mord mathbb">R</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span></span></span></span></span></span></span></span>, and anyone who uses generalizations tends not to use the cross product itself.</p>
<p>The property that completely determines the cross product is the triple product: <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mi>u</mi><mo>×</mo><mi>v</mi><mo stretchy="false">)</mo><mo>⋅</mo><mi>w</mi><mo>=</mo><mi>det</mi><mo>⁡</mo><mo stretchy="false">[</mo><mi>u</mi><mtext> </mtext><mi>v</mi><mtext> </mtext><mi>w</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">(u \times v)\cdot w=\det[u\ v\ w]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal">u</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mop">det</span><span class="mopen">[</span><span class="mord mathnormal">u</span><span class="mspace"> </span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mspace"> </span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mclose">]</span></span></span></span>. The idea is that <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>w</mi><mo>↦</mo><mi>det</mi><mo>⁡</mo><mo stretchy="false">[</mo><mi>u</mi><mtext> </mtext><mi>v</mi><mtext> </mtext><mi>w</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">w\mapsto \det[u\ v\ w]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.522em;vertical-align:-0.011em;"></span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">↦</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mop">det</span><span class="mopen">[</span><span class="mord mathnormal">u</span><span class="mspace"> </span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mspace"> </span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mclose">]</span></span></span></span> is an element of <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><msup><mi mathvariant="double-struck">R</mi><mn>3</mn></msup><msup><mo stretchy="false">)</mo><mo>∗</mo></msup></mrow><annotation encoding="application/x-tex">(\mathbb{R}^3)^*</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0641em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathbb">R</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span></span></span></span></span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6887em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">∗</span></span></span></span></span></span></span></span></span></span></span>, and the dot product lets you take this dual vector and turn it back into a vector.</p>
<p>A general version is that if you have some fixed <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>ω</mi><mo>∈</mo><msup><mi mathvariant="normal">Λ</mi><mrow><mi>k</mi><mo>+</mo><mn>1</mn></mrow></msup><mo stretchy="false">(</mo><mi>V</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\omega\in \Lambda^{k+1}(V)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">ω</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.0991em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord">Λ</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8491em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="mclose">)</span></span></span></span> when <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>V</mi></mrow><annotation encoding="application/x-tex">V</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.22222em;">V</span></span></span></span> is an inner product space, you can take vectors <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>v</mi><mn>1</mn></msub><mo separator="true">,</mo><mo>…</mo><mo separator="true">,</mo><msub><mi>v</mi><mi>k</mi></msub><mo>∈</mo><mi>V</mi></mrow><annotation encoding="application/x-tex">v_1,\dots,v_k\in V</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7335em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner">…</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.22222em;">V</span></span></span></span>, compute the iterated interior multiplication <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>i</mi><msub><mi>v</mi><mi>k</mi></msub></msub><msub><mi>i</mi><msub><mi>v</mi><mrow><mi>k</mi><mo>−</mo><mn>1</mn></mrow></msub></msub><mo>⋯</mo><msub><mi>i</mi><msub><mi>v</mi><mn>1</mn></msub></msub><mo stretchy="false">(</mo><mi>ω</mi><mo stretchy="false">)</mo><mo>∈</mo><msup><mi>V</mi><mo>∗</mo></msup></mrow><annotation encoding="application/x-tex">i_{v_k}i_{v_{k-1}}\cdots i_{v_1}(\omega)\in V^*</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0475em;vertical-align:-0.2975em;"></span><span class="mord"><span class="mord mathnormal">i</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3488em;margin-left:-0.0359em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.1512em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2559em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal">i</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3488em;margin-left:-0.0359em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2107em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2975em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner">⋯</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">i</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3173em;"><span style="top:-2.357em;margin-left:-0.0359em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2501em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03588em;">ω</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6887em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6887em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">∗</span></span></span></span></span></span></span></span></span></span></span>, then dualize using the inner product to get an element of <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>V</mi></mrow><annotation encoding="application/x-tex">V</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.22222em;">V</span></span></span></span>. This defines an alternating linear map <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi mathvariant="normal">Λ</mi><mi>k</mi></msup><mi>V</mi><mo>→</mo><mi>V</mi></mrow><annotation encoding="application/x-tex">\Lambda^k V\to V</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8491em;"></span><span class="mord"><span class="mord">Λ</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8491em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span></span></span></span></span><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.22222em;">V</span></span></span></span>.  The <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi><mo>=</mo><mn>2</mn></mrow><annotation encoding="application/x-tex">k=2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">2</span></span></span></span> case when <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>ω</mi></mrow><annotation encoding="application/x-tex">\omega</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">ω</span></span></span></span> is the determinant form gives the cross product.</p>
</blockquote>
<p>Oh! That is a beautiful motivation!</p>



<a name="265618246"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/265618246" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Martin Dvořák <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#265618246">(Dec 20 2021 at 21:32)</a>:</h4>
<p>BTW should we fork this conversation — move my n00bish implementation question to a separate thread?</p>



<a name="265618575"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/265618575" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#265618575">(Dec 20 2021 at 21:37)</a>:</h4>
<p><span class="user-mention" data-user-id="417654">@Martin Dvořák</span> More golfing using a lemma with a questionable proof (it perhaps depends on the definition of <code>finset.sum</code> a bit too much?)</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">dot_product_unfold'</span> <span class="o">(</span><span class="n">v</span> <span class="n">w</span> <span class="o">:</span> <span class="n">fin</span> <span class="mi">3</span> <span class="bp">→</span> <span class="n">R</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">v</span> <span class="bp">⬝</span> <span class="n">w</span> <span class="bp">=</span> <span class="n">v</span> <span class="mi">0</span> <span class="bp">*</span> <span class="n">w</span> <span class="mi">0</span> <span class="bp">+</span> <span class="n">v</span> <span class="mi">1</span> <span class="bp">*</span> <span class="n">w</span> <span class="mi">1</span> <span class="bp">+</span> <span class="n">v</span> <span class="mi">2</span> <span class="bp">*</span> <span class="n">w</span> <span class="mi">2</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">simp</span> <span class="o">[</span><span class="n">matrix.dot_product</span><span class="o">,</span> <span class="n">add_assoc</span><span class="o">],</span>
  <span class="n">rw</span> <span class="bp">←</span> <span class="n">add_zero</span> <span class="o">(</span><span class="n">v</span> <span class="mi">2</span> <span class="bp">*</span> <span class="n">w</span> <span class="mi">2</span><span class="o">),</span>
  <span class="n">refl</span><span class="o">,</span>
<span class="kd">end</span>

<span class="kd">lemma</span> <span class="n">cross_product_perpendicular_first_arg</span> <span class="o">(</span><span class="n">v</span> <span class="n">w</span> <span class="o">:</span> <span class="n">fin</span> <span class="mi">3</span> <span class="bp">→</span> <span class="n">R</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">v</span> <span class="bp">⬝</span> <span class="o">(</span><span class="n">v</span> <span class="bp">×₃</span> <span class="n">w</span><span class="o">)</span> <span class="bp">=</span> <span class="mi">0</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">cross_product</span><span class="o">,</span> <span class="n">dot_product_unfold'</span><span class="o">],</span>
  <span class="n">simp</span> <span class="o">[</span><span class="n">mul_sub</span><span class="o">,</span> <span class="n">mul_assoc</span><span class="o">,</span> <span class="n">mul_left_comm</span><span class="o">],</span>
<span class="kd">end</span>
</code></pre></div>



<a name="265618865"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/265618865" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#265618865">(Dec 20 2021 at 21:41)</a>:</h4>
<p>There's a nonterminal simp here, but that lemma is useful for the triple product permutation lemma:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">triple_product_equality</span> <span class="o">(</span><span class="n">u</span> <span class="n">v</span> <span class="n">w</span> <span class="o">:</span> <span class="n">fin</span> <span class="mi">3</span> <span class="bp">→</span> <span class="n">R</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">u</span> <span class="bp">⬝</span> <span class="o">(</span><span class="n">v</span> <span class="bp">×₃</span> <span class="n">w</span><span class="o">)</span> <span class="bp">=</span> <span class="n">v</span> <span class="bp">⬝</span> <span class="o">(</span><span class="n">w</span> <span class="bp">×₃</span> <span class="n">u</span><span class="o">)</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">cross_product</span><span class="o">,</span> <span class="n">dot_product_unfold'</span><span class="o">],</span>
  <span class="n">simp</span> <span class="o">[</span><span class="n">mul_sub</span><span class="o">,</span> <span class="n">mul_assoc</span><span class="o">,</span> <span class="n">mul_left_comm</span><span class="o">,</span> <span class="n">mul_comm</span><span class="o">],</span>
  <span class="n">ring</span><span class="o">,</span>
<span class="kd">end</span>
</code></pre></div>



<a name="265618972"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/265618972" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#265618972">(Dec 20 2021 at 21:42)</a>:</h4>
<p>You can always use <a href="https://leanprover-community.github.io/mathlib_docs/find/finset.sum_univ_succ">docs#finset.sum_univ_succ</a> or whatever it's called</p>



<a name="265619020"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/265619020" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#265619020">(Dec 20 2021 at 21:43)</a>:</h4>
<p>This works, too:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">triple_product_equality</span> <span class="o">(</span><span class="n">u</span> <span class="n">v</span> <span class="n">w</span> <span class="o">:</span> <span class="n">fin</span> <span class="mi">3</span> <span class="bp">→</span> <span class="n">R</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">u</span> <span class="bp">⬝</span> <span class="o">(</span><span class="n">v</span> <span class="bp">×₃</span> <span class="n">w</span><span class="o">)</span> <span class="bp">=</span> <span class="n">v</span> <span class="bp">⬝</span> <span class="o">(</span><span class="n">w</span> <span class="bp">×₃</span> <span class="n">u</span><span class="o">)</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">cross_product</span><span class="o">,</span> <span class="n">dot_product_unfold'</span><span class="o">,</span>
    <span class="n">matrix.head_cons</span><span class="o">,</span> <span class="n">matrix.cons_vec_bit0_eq_alt0</span><span class="o">,</span> <span class="n">matrix.empty_append</span><span class="o">,</span> <span class="n">matrix.cons_val_one</span><span class="o">,</span>
    <span class="n">matrix.cons_vec_alt0</span><span class="o">,</span> <span class="n">matrix.cons_append</span><span class="o">,</span> <span class="n">matrix.cons_val_zero</span><span class="o">],</span>
  <span class="n">ring</span><span class="o">,</span>
<span class="kd">end</span>
</code></pre></div>



<a name="265619103"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/265619103" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#265619103">(Dec 20 2021 at 21:44)</a>:</h4>
<p><span class="user-mention" data-user-id="308899">@Yakov Pechersky</span> Great:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">dot_product_unfold'</span> <span class="o">(</span><span class="n">v</span> <span class="n">w</span> <span class="o">:</span> <span class="n">fin</span> <span class="mi">3</span> <span class="bp">→</span> <span class="n">R</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">v</span> <span class="bp">⬝</span> <span class="n">w</span> <span class="bp">=</span> <span class="n">v</span> <span class="mi">0</span> <span class="bp">*</span> <span class="n">w</span> <span class="mi">0</span> <span class="bp">+</span> <span class="n">v</span> <span class="mi">1</span> <span class="bp">*</span> <span class="n">w</span> <span class="mi">1</span> <span class="bp">+</span> <span class="n">v</span> <span class="mi">2</span> <span class="bp">*</span> <span class="n">w</span> <span class="mi">2</span> <span class="o">:=</span>
<span class="kd">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">matrix.dot_product</span><span class="o">,</span> <span class="n">add_assoc</span><span class="o">,</span> <span class="n">fin.sum_univ_succ</span><span class="o">]</span>
</code></pre></div>



<a name="265619271"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/265619271" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Martin Dvořák <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#265619271">(Dec 20 2021 at 21:46)</a>:</h4>
<p>Do you still want me to create the PR in the end, even tho most of the code is yours?</p>



<a name="265619407"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/265619407" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Martin Dvořák <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#265619407">(Dec 20 2021 at 21:48)</a>:</h4>
<p>Ye deserve the credit but I actually wanted to experience the whole workflow with Lean/mathlib. So I don't know now.</p>



<a name="265619647"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/265619647" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#265619647">(Dec 20 2021 at 21:51)</a>:</h4>
<p><span class="user-mention silent" data-user-id="417654">Martin Dvořák</span> <a href="#narrow/stream/113488-general/topic/cross.20product/near/265619407">said</a>:</p>
<blockquote>
<p>Ye deserve the credit but I actually wanted to experience the whole workflow with Lean/mathlib. So I don't know now.</p>
</blockquote>
<p>There's an "Authors" field at the top of <code>mathlib</code> files. You can credit Kyle and yourself there in alphabetic order. I've done if before and it was fine <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span></p>



<a name="265619756"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/265619756" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Martin Dvořák <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#265619756">(Dec 20 2021 at 21:52)</a>:</h4>
<p>OK! And copyright goes to?</p>



<a name="265619785"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/265619785" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#265619785">(Dec 20 2021 at 21:53)</a>:</h4>
<p><span class="user-mention" data-user-id="417654">@Martin Dvořák</span> Please create the PR! Creating the PR and shepherding it through the review process is a large part of the work.</p>



<a name="265619819"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/265619819" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#265619819">(Dec 20 2021 at 21:53)</a>:</h4>
<p><span class="user-mention silent" data-user-id="417654">Martin Dvořák</span> <a href="#narrow/stream/113488-general/topic/cross.20product/near/265619756">said</a>:</p>
<blockquote>
<p>OK! And copyright goes to?</p>
</blockquote>
<p>You're creating the file so I think it's you <span aria-label="+1" class="emoji emoji-1f44d" role="img" title="+1">:+1:</span></p>



<a name="265619880"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/265619880" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Martin Dvořák <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#265619880">(Dec 20 2021 at 21:54)</a>:</h4>
<p>OK ok. But I should sort out the <code>→ₗ[R]</code> first, right?</p>



<a name="265620735"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/265620735" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#265620735">(Dec 20 2021 at 22:02)</a>:</h4>
<p><span class="user-mention" data-user-id="417654">@Martin Dvořák</span> A possible framework. I don't know this part of the library well enough to know if this is the best way to do it though:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">def</span> <span class="n">cross_product</span> <span class="o">:</span> <span class="o">(</span><span class="n">fin</span> <span class="mi">3</span> <span class="bp">→</span> <span class="n">R</span><span class="o">)</span> <span class="bp">→ₗ</span><span class="o">[</span><span class="n">R</span><span class="o">]</span> <span class="o">(</span><span class="n">fin</span> <span class="mi">3</span> <span class="bp">→</span> <span class="n">R</span><span class="o">)</span> <span class="bp">→ₗ</span><span class="o">[</span><span class="n">R</span><span class="o">]</span> <span class="o">(</span><span class="n">fin</span> <span class="mi">3</span> <span class="bp">→</span> <span class="n">R</span><span class="o">)</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">a</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">b</span><span class="o">,</span>
      <span class="bp">!</span><span class="o">[</span> <span class="o">(</span><span class="n">a</span> <span class="mi">1</span><span class="o">)</span><span class="bp">*</span><span class="o">(</span><span class="n">b</span> <span class="mi">2</span><span class="o">)</span> <span class="bp">-</span> <span class="o">(</span><span class="n">a</span> <span class="mi">2</span><span class="o">)</span><span class="bp">*</span><span class="o">(</span><span class="n">b</span> <span class="mi">1</span><span class="o">)</span> <span class="o">,</span> <span class="o">(</span><span class="n">a</span> <span class="mi">2</span><span class="o">)</span><span class="bp">*</span><span class="o">(</span><span class="n">b</span> <span class="mi">0</span><span class="o">)</span> <span class="bp">-</span> <span class="o">(</span><span class="n">a</span> <span class="mi">0</span><span class="o">)</span><span class="bp">*</span><span class="o">(</span><span class="n">b</span> <span class="mi">2</span><span class="o">)</span> <span class="o">,</span> <span class="o">(</span><span class="n">a</span> <span class="mi">0</span><span class="o">)</span><span class="bp">*</span><span class="o">(</span><span class="n">b</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="o">(</span><span class="n">a</span> <span class="mi">1</span><span class="o">)</span><span class="bp">*</span><span class="o">(</span><span class="n">b</span> <span class="mi">0</span><span class="o">)</span> <span class="o">],</span>
    <span class="n">map_add'</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">a</span> <span class="n">b</span><span class="o">,</span> <span class="kd">begin</span>
      <span class="gr">sorry</span>
    <span class="kd">end</span><span class="o">,</span>
    <span class="n">map_smul'</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">c</span> <span class="n">a</span><span class="o">,</span> <span class="kd">begin</span>
      <span class="gr">sorry</span>
    <span class="kd">end</span> <span class="o">},</span>
  <span class="n">map_add'</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">a</span> <span class="n">b</span><span class="o">,</span> <span class="kd">begin</span>
    <span class="gr">sorry</span>
  <span class="kd">end</span><span class="o">,</span>
  <span class="n">map_smul'</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">c</span> <span class="n">a</span><span class="o">,</span> <span class="kd">begin</span>
    <span class="gr">sorry</span>
  <span class="kd">end</span> <span class="o">}</span>
</code></pre></div>



<a name="265627168"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/265627168" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Martin Dvořák <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#265627168">(Dec 20 2021 at 23:12)</a>:</h4>
<p>I made progress.<br>
<a href="https://github.com/madvorak/mathlib/blob/master/src/linear_algebra/cross_product.lean">https://github.com/madvorak/mathlib/blob/master/src/linear_algebra/cross_product.lean</a></p>
<p>My current problem is that I don't know how to attack goals of this form:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="bp">⊢</span> <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">b</span> <span class="o">:</span> <span class="n">fin</span> <span class="mi">3</span> <span class="bp">→</span> <span class="n">R</span><span class="o">),</span>
  <span class="bp">!</span><span class="o">[(</span><span class="n">c</span> <span class="bp">•</span> <span class="n">a</span><span class="o">)</span> <span class="mi">1</span> <span class="bp">*</span> <span class="n">b</span> <span class="mi">2</span> <span class="bp">-</span> <span class="o">(</span><span class="n">c</span> <span class="bp">•</span> <span class="n">a</span><span class="o">)</span> <span class="mi">2</span> <span class="bp">*</span> <span class="n">b</span> <span class="mi">1</span><span class="o">,</span> <span class="o">(</span><span class="n">c</span> <span class="bp">•</span> <span class="n">a</span><span class="o">)</span> <span class="mi">2</span> <span class="bp">*</span> <span class="n">b</span> <span class="mi">0</span> <span class="bp">-</span> <span class="o">(</span><span class="n">c</span> <span class="bp">•</span> <span class="n">a</span><span class="o">)</span> <span class="mi">0</span> <span class="bp">*</span> <span class="n">b</span> <span class="mi">2</span><span class="o">,</span> <span class="o">(</span><span class="n">c</span> <span class="bp">•</span> <span class="n">a</span><span class="o">)</span> <span class="mi">0</span> <span class="bp">*</span> <span class="n">b</span> <span class="mi">1</span> <span class="bp">-</span> <span class="o">(</span><span class="n">c</span> <span class="bp">•</span> <span class="n">a</span><span class="o">)</span> <span class="mi">1</span> <span class="bp">*</span> <span class="n">b</span> <span class="mi">0</span><span class="o">],</span>
  <span class="n">map_add'</span> <span class="o">:=</span> <span class="n">_</span><span class="o">,</span> <span class="n">map_smul'</span> <span class="o">:=</span> <span class="n">_</span><span class="o">}</span>
 <span class="bp">=</span> <span class="bp">⇑</span><span class="o">(</span><span class="n">ring_hom.id</span> <span class="n">R</span><span class="o">)</span>
  <span class="n">c</span> <span class="bp">•</span> <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">b</span> <span class="o">:</span> <span class="n">fin</span> <span class="mi">3</span> <span class="bp">→</span> <span class="n">R</span><span class="o">),</span> <span class="bp">!</span><span class="o">[</span><span class="n">a</span> <span class="mi">1</span> <span class="bp">*</span> <span class="n">b</span> <span class="mi">2</span> <span class="bp">-</span> <span class="n">a</span> <span class="mi">2</span> <span class="bp">*</span> <span class="n">b</span> <span class="mi">1</span><span class="o">,</span> <span class="n">a</span> <span class="mi">2</span> <span class="bp">*</span> <span class="n">b</span> <span class="mi">0</span> <span class="bp">-</span> <span class="n">a</span> <span class="mi">0</span> <span class="bp">*</span> <span class="n">b</span> <span class="mi">2</span><span class="o">,</span> <span class="n">a</span> <span class="mi">0</span> <span class="bp">*</span> <span class="n">b</span> <span class="mi">1</span> <span class="bp">-</span> <span class="n">a</span> <span class="mi">1</span> <span class="bp">*</span> <span class="n">b</span> <span class="mi">0</span><span class="o">],</span>
  <span class="n">map_add'</span> <span class="o">:=</span> <span class="n">_</span><span class="o">,</span> <span class="n">map_smul'</span> <span class="o">:=</span> <span class="n">_</span><span class="o">}</span>
</code></pre></div>



<a name="265627332"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/265627332" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Martin Dvořák <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#265627332">(Dec 20 2021 at 23:14)</a>:</h4>
<p>Unless I am mistaken, I am on the outside level, hence I need to prove equality of two functions of the type <code>(fin 3 → R) →ₗ[R] (fin 3 → R)</code>.</p>



<a name="265627496"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/265627496" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#265627496">(Dec 20 2021 at 23:16)</a>:</h4>
<p>Have you tried <code>ext</code>?</p>



<a name="265627633"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/265627633" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#265627633">(Dec 20 2021 at 23:18)</a>:</h4>
<p>BTW, we have <a href="https://leanprover-community.github.io/mathlib_docs/linear_algebra/bilinear_map.html#linear_map.mk%E2%82%82">https://leanprover-community.github.io/mathlib_docs/linear_algebra/bilinear_map.html#linear_map.mk%E2%82%82</a> for creating bilinear maps.</p>



<a name="265627664"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/265627664" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Martin Dvořák <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#265627664">(Dec 20 2021 at 23:19)</a>:</h4>
<p>After <code>ext</code> I see the following goal, which I understand even less:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="bp">⊢</span> <span class="bp">⇑</span><span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">b</span> <span class="o">:</span> <span class="n">fin</span> <span class="mi">3</span> <span class="bp">→</span> <span class="n">R</span><span class="o">),</span> <span class="bp">!</span><span class="o">[(</span><span class="n">c</span> <span class="bp">•</span> <span class="n">a</span><span class="o">)</span> <span class="mi">1</span> <span class="bp">*</span> <span class="n">b</span> <span class="mi">2</span> <span class="bp">-</span> <span class="o">(</span><span class="n">c</span> <span class="bp">•</span> <span class="n">a</span><span class="o">)</span> <span class="mi">2</span> <span class="bp">*</span> <span class="n">b</span> <span class="mi">1</span><span class="o">,</span> <span class="o">(</span><span class="n">c</span> <span class="bp">•</span> <span class="n">a</span><span class="o">)</span> <span class="mi">2</span> <span class="bp">*</span> <span class="n">b</span> <span class="mi">0</span> <span class="bp">-</span> <span class="o">(</span><span class="n">c</span> <span class="bp">•</span> <span class="n">a</span><span class="o">)</span> <span class="mi">0</span> <span class="bp">*</span> <span class="n">b</span> <span class="mi">2</span><span class="o">,</span> <span class="o">(</span><span class="n">c</span> <span class="bp">•</span> <span class="n">a</span><span class="o">)</span> <span class="mi">0</span> <span class="bp">*</span> <span class="n">b</span> <span class="mi">1</span> <span class="bp">-</span> <span class="o">(</span><span class="n">c</span> <span class="bp">•</span> <span class="n">a</span><span class="o">)</span> <span class="mi">1</span> <span class="bp">*</span> <span class="n">b</span> <span class="mi">0</span><span class="o">],</span> <span class="n">map_add'</span> <span class="o">:=</span> <span class="n">_</span><span class="o">,</span> <span class="n">map_smul'</span> <span class="o">:=</span> <span class="n">_</span><span class="o">}</span> <span class="n">x</span> <span class="n">x_1</span> <span class="bp">=</span> <span class="bp">⇑</span><span class="o">(</span><span class="bp">⇑</span><span class="o">(</span><span class="n">ring_hom.id</span> <span class="n">R</span><span class="o">)</span> <span class="n">c</span> <span class="bp">•</span> <span class="o">{</span><span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="o">(</span><span class="n">b</span> <span class="o">:</span> <span class="n">fin</span> <span class="mi">3</span> <span class="bp">→</span> <span class="n">R</span><span class="o">),</span> <span class="bp">!</span><span class="o">[</span><span class="n">a</span> <span class="mi">1</span> <span class="bp">*</span> <span class="n">b</span> <span class="mi">2</span> <span class="bp">-</span> <span class="n">a</span> <span class="mi">2</span> <span class="bp">*</span> <span class="n">b</span> <span class="mi">1</span><span class="o">,</span> <span class="n">a</span> <span class="mi">2</span> <span class="bp">*</span> <span class="n">b</span> <span class="mi">0</span> <span class="bp">-</span> <span class="n">a</span> <span class="mi">0</span> <span class="bp">*</span> <span class="n">b</span> <span class="mi">2</span><span class="o">,</span> <span class="n">a</span> <span class="mi">0</span> <span class="bp">*</span> <span class="n">b</span> <span class="mi">1</span> <span class="bp">-</span> <span class="n">a</span> <span class="mi">1</span> <span class="bp">*</span> <span class="n">b</span> <span class="mi">0</span><span class="o">],</span> <span class="n">map_add'</span> <span class="o">:=</span> <span class="n">_</span><span class="o">,</span> <span class="n">map_smul'</span> <span class="o">:=</span> <span class="n">_</span><span class="o">})</span> <span class="n">x</span> <span class="n">x_1</span>
</code></pre></div>
<p><a href="/user_uploads/3121/6e7BhVFL2jv1lEYw-wN3bFpn/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/3121/6e7BhVFL2jv1lEYw-wN3bFpn/image.png" title="image.png"><img src="/user_uploads/3121/6e7BhVFL2jv1lEYw-wN3bFpn/image.png"></a></div>



<a name="265627797"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/265627797" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#265627797">(Dec 20 2021 at 23:20)</a>:</h4>
<p>Clean it up for you own eyes using <code>dsimp</code>.</p>



<a name="265627803"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/265627803" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Martin Dvořák <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#265627803">(Dec 20 2021 at 23:21)</a>:</h4>
<p><span class="user-mention silent" data-user-id="214703">Yury G. Kudryashov</span> <a href="#narrow/stream/113488-general/topic/cross.20product/near/265627633">said</a>:</p>
<blockquote>
<p>BTW, we have <a href="https://leanprover-community.github.io/mathlib_docs/linear_algebra/bilinear_map.html#linear_map.mk%E2%82%82">https://leanprover-community.github.io/mathlib_docs/linear_algebra/bilinear_map.html#linear_map.mk%E2%82%82</a> for creating bilinear maps.</p>
</blockquote>
<p>I don't understand the code. Can I somehow use it to just prove the linearity in the second argument and use the "symmetry"?</p>



<a name="265628611"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/265628611" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#265628611">(Dec 20 2021 at 23:31)</a>:</h4>
<p>No, it's not about (anti)symmetric maps. You can use </p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">def</span> <span class="n">cross_product</span> <span class="o">:</span> <span class="o">(</span><span class="n">fin</span> <span class="mi">3</span> <span class="bp">→</span> <span class="n">R</span><span class="o">)</span> <span class="bp">→ₗ</span><span class="o">[</span><span class="n">R</span><span class="o">]</span> <span class="o">(</span><span class="n">fin</span> <span class="mi">3</span> <span class="bp">→</span> <span class="n">R</span><span class="o">)</span> <span class="bp">→ₗ</span><span class="o">[</span><span class="n">R</span><span class="o">]</span> <span class="o">(</span><span class="n">fin</span> <span class="mi">3</span> <span class="bp">→</span> <span class="n">R</span><span class="o">)</span> <span class="o">:=</span>
<span class="n">linear_map.mk₂</span>
  <span class="o">(</span><span class="bp">λ</span> <span class="n">a</span> <span class="n">b</span><span class="o">,</span> <span class="bp">!</span><span class="o">[</span><span class="bp">...</span><span class="o">])</span> <span class="c1">-- same is in your code</span>
  <span class="n">_</span>
  <span class="n">_</span>
  <span class="n">_</span>
  <span class="n">_</span>
</code></pre></div>
<p>This way you don't need to use <code>linear_map.ext</code></p>



<a name="265630287"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/265630287" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Martin Dvořák <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#265630287">(Dec 20 2021 at 23:55)</a>:</h4>
<p>[crowdproving]<br>
Well, this is my current state of the proof:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="bp">⊢</span> <span class="bp">!</span><span class="o">[</span><span class="n">c</span> <span class="bp">*</span> <span class="o">(</span><span class="n">a</span> <span class="mi">1</span> <span class="bp">*</span> <span class="n">b</span> <span class="mi">2</span> <span class="bp">-</span> <span class="n">a</span> <span class="mi">2</span> <span class="bp">*</span> <span class="n">b</span> <span class="mi">1</span><span class="o">),</span> <span class="n">c</span> <span class="bp">*</span> <span class="o">(</span><span class="n">a</span> <span class="mi">2</span> <span class="bp">*</span> <span class="n">b</span> <span class="mi">0</span> <span class="bp">-</span> <span class="n">a</span> <span class="mi">0</span> <span class="bp">*</span> <span class="n">b</span> <span class="mi">2</span><span class="o">),</span> <span class="n">c</span> <span class="bp">*</span> <span class="o">(</span><span class="n">a</span> <span class="mi">0</span> <span class="bp">*</span> <span class="n">b</span> <span class="mi">1</span> <span class="bp">-</span> <span class="n">a</span> <span class="mi">1</span> <span class="bp">*</span> <span class="n">b</span> <span class="mi">0</span><span class="o">)]</span> <span class="n">x</span>
<span class="bp">=</span> <span class="n">c</span> <span class="bp">*</span> <span class="bp">!</span><span class="o">[</span><span class="n">a</span> <span class="mi">1</span> <span class="bp">*</span> <span class="n">b</span> <span class="mi">2</span> <span class="bp">-</span> <span class="n">a</span> <span class="mi">2</span> <span class="bp">*</span> <span class="n">b</span> <span class="mi">1</span><span class="o">,</span> <span class="n">a</span> <span class="mi">2</span> <span class="bp">*</span> <span class="n">b</span> <span class="mi">0</span> <span class="bp">-</span> <span class="n">a</span> <span class="mi">0</span> <span class="bp">*</span> <span class="n">b</span> <span class="mi">2</span><span class="o">,</span> <span class="n">a</span> <span class="mi">0</span> <span class="bp">*</span> <span class="n">b</span> <span class="mi">1</span> <span class="bp">-</span> <span class="n">a</span> <span class="mi">1</span> <span class="bp">*</span> <span class="n">b</span> <span class="mi">0</span><span class="o">]</span> <span class="n">x</span>
</code></pre></div>
<p>On the LHS, the vector gets first multiplied and then the element gets selected.<br>
On the RHS, the element first gets selected and then it is multiplied.<br>
<a href="/user_uploads/3121/AJ-DTRHQ163lGYTlu9DWv91f/image.png">image.png</a> <br>
Any idea how to close the goal?</p>
<div class="message_inline_image"><a href="/user_uploads/3121/AJ-DTRHQ163lGYTlu9DWv91f/image.png" title="image.png"><img src="/user_uploads/3121/AJ-DTRHQ163lGYTlu9DWv91f/image.png"></a></div>



<a name="265630743"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/265630743" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#265630743">(Dec 21 2021 at 00:01)</a>:</h4>
<p>Move multiplication inside, then use extensionality.</p>



<a name="265630872"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/265630872" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Martin Dvořák <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#265630872">(Dec 21 2021 at 00:03)</a>:</h4>
<p>What do you mean by "inside" please?</p>



<a name="265630883"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/265630883" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#265630883">(Dec 21 2021 at 00:03)</a>:</h4>
<p>inside the vector</p>



<a name="265631418"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/265631418" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Martin Dvořák <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#265631418">(Dec 21 2021 at 00:10)</a>:</h4>
<p>I should probably be trivial, but I am lost. I am probably too tired. Imma continue tomorrow.</p>



<a name="265631740"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/265631740" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#265631740">(Dec 21 2021 at 00:15)</a>:</h4>
<p>Can you post your code again? A few incantations of <code>simp</code> should really get you there.</p>



<a name="265631821"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/265631821" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#265631821">(Dec 21 2021 at 00:16)</a>:</h4>
<p>Try <code>rw pi.const_mul</code> or something.</p>



<a name="265632961"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/265632961" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#265632961">(Dec 21 2021 at 00:29)</a>:</h4>
<p><code>fin_cases x; simp</code> ought to work</p>



<a name="265638350"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/265638350" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joseph Myers <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#265638350">(Dec 21 2021 at 01:49)</a>:</h4>
<p>Rather than using <code>![]</code> I'd suggest <code>λ i, a (i + 1) * b (i + 2) - a (i + 2) * b (i + 1)</code> and then hopefully you don't need to use <code>fin_cases</code>.</p>



<a name="265670775"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/265670775" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Martin Dvořák <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#265670775">(Dec 21 2021 at 10:41)</a>:</h4>
<p><span class="user-mention silent" data-user-id="310045">Eric Wieser</span> <a href="#narrow/stream/113488-general/topic/cross.20product/near/265632961">said</a>:</p>
<blockquote>
<p><code>fin_cases x; simp</code> ought to work</p>
</blockquote>
<p>It works! Awesome! Thanks a lot!</p>
<p>Also <code>fin_cases x; refl,</code> works as well, so I will keep the latter.</p>



<a name="265675558"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/265675558" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Martin Dvořák <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#265675558">(Dec 21 2021 at 11:39)</a>:</h4>
<p>With your great help, I finished the proofs! What do you think?</p>
<p><a href="https://github.com/madvorak/mathlib/blob/master/src/linear_algebra/cross_product.lean">https://github.com/madvorak/mathlib/blob/master/src/linear_algebra/cross_product.lean</a></p>



<a name="265676844"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/265676844" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Martin Dvořák <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#265676844">(Dec 21 2021 at 11:56)</a>:</h4>
<p>In the lemmata (everything that follows after line 58), I should rename the arguments to <code>x</code> and <code>y</code> in order to comply with the mathlib's manual of style, right?</p>



<a name="265676926"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/265676926" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Martin Dvořák <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#265676926">(Dec 21 2021 at 11:57)</a>:</h4>
<p>However, I don't understand what Jeremy Avigad meant by writing that <code>a</code>, <code>b</code>, <code>c</code> are for propositions.<br>
<a href="https://leanprover-community.github.io/contribute/style.html">https://leanprover-community.github.io/contribute/style.html</a></p>



<a name="265677290"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/265677290" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#265677290">(Dec 21 2021 at 12:01)</a>:</h4>
<p>On formatting style, check how curly brackets are used in other proofs.<br>
I also see some <a href="https://leanprover-community.github.io/glossary.html#non-terminal-simp">glossary#non-terminal-simp</a> usages, which is avoided in mathlib</p>



<a name="265677325"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/265677325" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Martin Dvořák <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#265677325">(Dec 21 2021 at 12:01)</a>:</h4>
<p>Thank you! I will revise it.</p>



<a name="265678070"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/265678070" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#265678070">(Dec 21 2021 at 12:11)</a>:</h4>
<p>This link contains some useful information about documentation: <a href="https://leanprover-community.github.io/contribute/doc.html">https://leanprover-community.github.io/contribute/doc.html</a><br>
Your file is currently missing a module documentation, which summarizes what you're exploring, a somewhat precise overview of the main definitions you're proposing and, if applicable, a few <code>#TODO</code> items for next steps.</p>
<p>We usually don't add documentation for lemmas/theorems, although I think this is not forbidden. The motivation is that we try to make the lemmas names precise and explicit enough.</p>



<a name="265678626"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/265678626" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#265678626">(Dec 21 2021 at 12:19)</a>:</h4>
<p><span class="user-mention silent" data-user-id="451983">Arthur Paulino</span> <a href="#narrow/stream/113488-general/topic/cross.20product/near/265678070">said</a>:</p>
<blockquote>
<p>We usually don't add documentation for lemmas/theorems</p>
</blockquote>
<p>I think you got this impression from reading only elementary lemmas in mathlib.</p>



<a name="265678676"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/265678676" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#265678676">(Dec 21 2021 at 12:19)</a>:</h4>
<p>What is useless is adding a docstring which takes longer to read than the actual statement.</p>



<a name="265678686"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/265678686" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Martin Dvořák <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#265678686">(Dec 21 2021 at 12:19)</a>:</h4>
<p>Did I name my lemmata well?</p>



<a name="265678781"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/265678781" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#265678781">(Dec 21 2021 at 12:20)</a>:</h4>
<p>Arthur, you can have a look at <a href="https://leanprover-community.github.io/mathlib_docs/analysis/calculus/parametric_interval_integral.html">https://leanprover-community.github.io/mathlib_docs/analysis/calculus/parametric_interval_integral.html</a> for instance. Lemmas there have quite a number of assumptions and docstrings help a bit.</p>



<a name="265678915"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/265678915" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#265678915">(Dec 21 2021 at 12:22)</a>:</h4>
<p>Looking at this page myself, I have a question for <span class="user-mention" data-user-id="110596">@Rob Lewis</span>: why do we get all those <code>«μ»</code> instead of <code>μ</code>?</p>



<a name="265678971"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/265678971" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#265678971">(Dec 21 2021 at 12:22)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110031">Patrick Massot</span> <a href="#narrow/stream/113488-general/topic/cross.20product/near/265678781">said</a>:</p>
<blockquote>
<p>Arthur, you can have a look at <a href="https://leanprover-community.github.io/mathlib_docs/analysis/calculus/parametric_interval_integral.html">https://leanprover-community.github.io/mathlib_docs/analysis/calculus/parametric_interval_integral.html</a> for instance. Lemmas there have quite a number of assumptions and docstrings help a bit.</p>
</blockquote>
<p>Nice! There's even an explanation for the reasoning behind the proof itself. I was wondering if it was a thing in mathlib</p>



<a name="265679114"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/265679114" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#265679114">(Dec 21 2021 at 12:24)</a>:</h4>
<p>Oh wait, the docstring doesn't explain the proof. Nevermind. But it does help understanding the assumptions</p>



<a name="265679288"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/265679288" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#265679288">(Dec 21 2021 at 12:26)</a>:</h4>
<p>We also have complicated proofs having comments explaining the strategy (and such comments can also be found in module docstrings).</p>



<a name="265679325"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/265679325" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#265679325">(Dec 21 2021 at 12:26)</a>:</h4>
<p>Have a look at <a href="https://github.com/leanprover-community/mathlib/blob/2ceda7850a0aaa35f31697072c755fb3de3dbaa7/src/topology/metric_space/baire.lean#L42">https://github.com/leanprover-community/mathlib/blob/2ceda7850a0aaa35f31697072c755fb3de3dbaa7/src/topology/metric_space/baire.lean#L42</a> for instance.</p>



<a name="265681043"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/265681043" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#265681043">(Dec 21 2021 at 12:47)</a>:</h4>
<p>The weird brackets are because somewhere μ is defined as notation,  and the brackets say "not the notation"</p>



<a name="265681328"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/265681328" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#265681328">(Dec 21 2021 at 12:50)</a>:</h4>
<p>But this notation is clearly not in scope here.</p>



<a name="265681381"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/265681381" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#265681381">(Dec 21 2021 at 12:51)</a>:</h4>
<p>All <code>open_locale</code> notation is in scope in doc-gen</p>



<a name="265689679"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/265689679" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#265689679">(Dec 21 2021 at 14:18)</a>:</h4>
<p><span class="user-mention" data-user-id="417654">@Martin Dvořák</span> I got rid of the nonterminal simps and got things somewhat more mathlib ready. I tried speeding up some of the proofs using some specialized lemmas for operations on 3-vectors (<code>vec3_eq</code>, <code>vec3_add</code>, and so on). I also switched the definition of <code>cross_product</code> to Yury's suggestion and created a locale for vector notation.</p>
<p>There's also the determinant characterization of the triple product:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">triple_product_eq_det</span> <span class="o">(</span><span class="n">u</span> <span class="n">v</span> <span class="n">w</span> <span class="o">:</span> <span class="n">fin</span> <span class="mi">3</span> <span class="bp">→</span> <span class="n">R</span><span class="o">)</span> <span class="o">:</span> <span class="n">u</span> <span class="bp">⬝</span> <span class="o">(</span><span class="n">v</span> <span class="bp">×₃</span> <span class="n">w</span><span class="o">)</span> <span class="bp">=</span> <span class="n">matrix.det</span> <span class="bp">!</span><span class="o">[</span> <span class="n">u</span><span class="o">,</span> <span class="n">v</span><span class="o">,</span> <span class="n">w</span> <span class="o">]</span>
</code></pre></div>
<p>Code:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="c">/-</span><span class="cm"></span>
<span class="cm">Copyright (c) 2021 Martin Dvorak. All rights reserved.</span>
<span class="cm">Released under Apache 2.0 license as described in the file LICENSE.</span>
<span class="cm">Authors: Martin Dvorak, Kyle Miller, Eric Wieser, Andrew Yang</span>
<span class="cm">-/</span>

<span class="kn">import</span> <span class="n">data.matrix.basic</span>
<span class="kn">import</span> <span class="n">data.matrix.notation</span>
<span class="kn">import</span> <span class="n">tactic.fin_cases</span>
<span class="kn">import</span> <span class="n">linear_algebra.bilinear_map</span>
<span class="kn">import</span> <span class="n">linear_algebra.matrix.determinant</span>

<span class="c">/-</span><span class="cm">!</span>
<span class="cm"># Cross products</span>

<span class="cm">This module defines the cross product of vectors in $R^3$ for $R$ a commutive ring.</span>

<span class="cm">## Main definitions</span>

<span class="cm">* `cross_product` is the cross product of pairs of vectors in $R^3$.</span>

<span class="cm">## Main results</span>

<span class="cm">* `triple_product_eq_det`</span>

<span class="cm">## Notation</span>

<span class="cm">The locale `vectors` gives the following notations:</span>

<span class="cm">* `×₃` for the cross product</span>
<span class="cm">* `⬝` for dot products</span>

<span class="cm">## Tags</span>

<span class="cm">cross product</span>

<span class="cm">-/</span>

<span class="kd">variables</span> <span class="o">{</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span>

<span class="kd">lemma</span> <span class="n">vec3_eq</span> <span class="o">{</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">fin</span> <span class="mi">3</span> <span class="bp">→</span> <span class="n">R</span><span class="o">}</span>
  <span class="o">(</span><span class="n">h0</span> <span class="o">:</span> <span class="n">a</span> <span class="mi">0</span> <span class="bp">=</span> <span class="n">b</span> <span class="mi">0</span><span class="o">)</span> <span class="o">(</span><span class="n">h1</span> <span class="o">:</span> <span class="n">a</span> <span class="mi">1</span> <span class="bp">=</span> <span class="n">b</span> <span class="mi">1</span><span class="o">)</span> <span class="o">(</span><span class="n">h2</span> <span class="o">:</span> <span class="n">a</span> <span class="mi">2</span> <span class="bp">=</span> <span class="n">b</span> <span class="mi">2</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">a</span> <span class="bp">=</span> <span class="n">b</span> <span class="o">:=</span>
<span class="kd">by</span> <span class="o">{</span> <span class="n">ext</span> <span class="n">x</span><span class="o">,</span> <span class="n">fin_cases</span> <span class="n">x</span><span class="bp">;</span> <span class="n">assumption</span> <span class="o">}</span>

<span class="kd">lemma</span> <span class="n">vec3_eq'</span> <span class="o">{</span><span class="n">a0</span> <span class="n">a1</span> <span class="n">a2</span> <span class="n">b0</span> <span class="n">b1</span> <span class="n">b2</span> <span class="o">:</span> <span class="n">R</span><span class="o">}</span>
  <span class="o">(</span><span class="n">h0</span> <span class="o">:</span> <span class="n">a0</span> <span class="bp">=</span> <span class="n">b0</span><span class="o">)</span> <span class="o">(</span><span class="n">h1</span> <span class="o">:</span> <span class="n">a1</span> <span class="bp">=</span> <span class="n">b1</span><span class="o">)</span> <span class="o">(</span><span class="n">h2</span> <span class="o">:</span> <span class="n">a2</span> <span class="bp">=</span> <span class="n">b2</span><span class="o">)</span> <span class="o">:</span>
  <span class="bp">!</span><span class="o">[</span><span class="n">a0</span><span class="o">,</span> <span class="n">a1</span><span class="o">,</span> <span class="n">a2</span><span class="o">]</span> <span class="bp">=</span> <span class="bp">!</span><span class="o">[</span><span class="n">b0</span><span class="o">,</span> <span class="n">b1</span><span class="o">,</span> <span class="n">b2</span><span class="o">]</span> <span class="o">:=</span>
<span class="kd">by</span> <span class="n">rw</span> <span class="o">[</span><span class="n">h0</span><span class="o">,</span> <span class="n">h1</span><span class="o">,</span> <span class="n">h2</span><span class="o">]</span>

<span class="kd">variables</span> <span class="o">[</span><span class="n">comm_ring</span> <span class="n">R</span><span class="o">]</span>

<span class="kd">lemma</span> <span class="n">vec3_add</span> <span class="o">{</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">fin</span> <span class="mi">3</span> <span class="bp">→</span> <span class="n">R</span><span class="o">}</span> <span class="o">:</span>
  <span class="n">a</span> <span class="bp">+</span> <span class="n">b</span> <span class="bp">=</span> <span class="bp">!</span><span class="o">[</span><span class="n">a</span> <span class="mi">0</span> <span class="bp">+</span> <span class="n">b</span> <span class="mi">0</span><span class="o">,</span> <span class="n">a</span> <span class="mi">1</span> <span class="bp">+</span> <span class="n">b</span> <span class="mi">1</span><span class="o">,</span> <span class="n">a</span> <span class="mi">2</span> <span class="bp">+</span> <span class="n">b</span> <span class="mi">2</span><span class="o">]</span> <span class="o">:=</span>
<span class="kd">by</span> <span class="o">{</span> <span class="n">apply</span> <span class="n">vec3_eq</span><span class="bp">;</span> <span class="n">refl</span> <span class="o">}</span>

<span class="kd">lemma</span> <span class="n">vec3_add'</span> <span class="o">{</span><span class="n">a0</span> <span class="n">a1</span> <span class="n">a2</span> <span class="n">b0</span> <span class="n">b1</span> <span class="n">b2</span> <span class="o">:</span> <span class="n">R</span><span class="o">}</span> <span class="o">:</span>
  <span class="bp">!</span><span class="o">[</span><span class="n">a0</span><span class="o">,</span> <span class="n">a1</span><span class="o">,</span> <span class="n">a2</span><span class="o">]</span> <span class="bp">+</span> <span class="bp">!</span><span class="o">[</span><span class="n">b0</span><span class="o">,</span> <span class="n">b1</span><span class="o">,</span> <span class="n">b2</span><span class="o">]</span> <span class="bp">=</span> <span class="bp">!</span><span class="o">[</span><span class="n">a0</span> <span class="bp">+</span> <span class="n">b0</span><span class="o">,</span> <span class="n">a1</span> <span class="bp">+</span> <span class="n">b1</span><span class="o">,</span> <span class="n">a2</span> <span class="bp">+</span> <span class="n">b2</span><span class="o">]</span> <span class="o">:=</span>
<span class="kd">by</span> <span class="o">{</span> <span class="n">rw</span> <span class="n">vec3_add</span><span class="o">,</span> <span class="n">refl</span> <span class="o">}</span>

<span class="sd">/-- The cross product of two vectors in $R^3$ for $R$ a commutative ring. -/</span>
<span class="kd">def</span> <span class="n">cross_product</span> <span class="o">:</span> <span class="o">(</span><span class="n">fin</span> <span class="mi">3</span> <span class="bp">→</span> <span class="n">R</span><span class="o">)</span> <span class="bp">→ₗ</span><span class="o">[</span><span class="n">R</span><span class="o">]</span> <span class="o">(</span><span class="n">fin</span> <span class="mi">3</span> <span class="bp">→</span> <span class="n">R</span><span class="o">)</span> <span class="bp">→ₗ</span><span class="o">[</span><span class="n">R</span><span class="o">]</span> <span class="o">(</span><span class="n">fin</span> <span class="mi">3</span> <span class="bp">→</span> <span class="n">R</span><span class="o">)</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">apply</span> <span class="n">linear_map.mk₂</span> <span class="n">R</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">fin</span> <span class="mi">3</span> <span class="bp">→</span> <span class="n">R</span><span class="o">),</span>
    <span class="bp">!</span><span class="o">[</span> <span class="o">(</span><span class="n">a</span> <span class="mi">1</span><span class="o">)</span><span class="bp">*</span><span class="o">(</span><span class="n">b</span> <span class="mi">2</span><span class="o">)</span> <span class="bp">-</span> <span class="o">(</span><span class="n">a</span> <span class="mi">2</span><span class="o">)</span><span class="bp">*</span><span class="o">(</span><span class="n">b</span> <span class="mi">1</span><span class="o">)</span> <span class="o">,</span>
       <span class="o">(</span><span class="n">a</span> <span class="mi">2</span><span class="o">)</span><span class="bp">*</span><span class="o">(</span><span class="n">b</span> <span class="mi">0</span><span class="o">)</span> <span class="bp">-</span> <span class="o">(</span><span class="n">a</span> <span class="mi">0</span><span class="o">)</span><span class="bp">*</span><span class="o">(</span><span class="n">b</span> <span class="mi">2</span><span class="o">)</span> <span class="o">,</span>
       <span class="o">(</span><span class="n">a</span> <span class="mi">0</span><span class="o">)</span><span class="bp">*</span><span class="o">(</span><span class="n">b</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="o">(</span><span class="n">a</span> <span class="mi">1</span><span class="o">)</span><span class="bp">*</span><span class="o">(</span><span class="n">b</span> <span class="mi">0</span><span class="o">)</span> <span class="o">])</span><span class="bp">;</span>
  <span class="n">intros</span><span class="bp">;</span>
  <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">vec3_add'</span><span class="o">,</span> <span class="n">pi.add_apply</span><span class="o">,</span> <span class="n">algebra.id.smul_eq_mul</span><span class="o">,</span> <span class="n">matrix.smul_cons</span><span class="o">,</span>
    <span class="n">matrix.smul_empty</span><span class="o">,</span> <span class="n">pi.smul_apply</span><span class="o">]</span><span class="bp">;</span>
  <span class="n">apply</span> <span class="n">vec3_eq'</span><span class="bp">;</span>
  <span class="n">ring</span>
<span class="kd">end</span>

<span class="n">localized</span> <span class="s2">"infixl ` ×₃ `: 68 := cross_product"</span> <span class="k">in</span> <span class="n">vectors</span>
<span class="n">localized</span> <span class="s2">"infix ` ⬝ ` : 67 := matrix.dot_product"</span> <span class="k">in</span> <span class="n">vectors</span>

<span class="kd">lemma</span> <span class="n">cross_product_def</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">fin</span> <span class="mi">3</span> <span class="bp">→</span> <span class="n">R</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">a</span> <span class="bp">×₃</span> <span class="n">b</span> <span class="bp">=</span> <span class="bp">!</span><span class="o">[</span> <span class="o">(</span><span class="n">a</span> <span class="mi">1</span><span class="o">)</span><span class="bp">*</span><span class="o">(</span><span class="n">b</span> <span class="mi">2</span><span class="o">)</span> <span class="bp">-</span> <span class="o">(</span><span class="n">a</span> <span class="mi">2</span><span class="o">)</span><span class="bp">*</span><span class="o">(</span><span class="n">b</span> <span class="mi">1</span><span class="o">)</span> <span class="o">,</span>
              <span class="o">(</span><span class="n">a</span> <span class="mi">2</span><span class="o">)</span><span class="bp">*</span><span class="o">(</span><span class="n">b</span> <span class="mi">0</span><span class="o">)</span> <span class="bp">-</span> <span class="o">(</span><span class="n">a</span> <span class="mi">0</span><span class="o">)</span><span class="bp">*</span><span class="o">(</span><span class="n">b</span> <span class="mi">2</span><span class="o">)</span> <span class="o">,</span>
              <span class="o">(</span><span class="n">a</span> <span class="mi">0</span><span class="o">)</span><span class="bp">*</span><span class="o">(</span><span class="n">b</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="o">(</span><span class="n">a</span> <span class="mi">1</span><span class="o">)</span><span class="bp">*</span><span class="o">(</span><span class="n">b</span> <span class="mi">0</span><span class="o">)</span> <span class="o">]</span> <span class="o">:=</span> <span class="n">rfl</span>

<span class="kd">lemma</span> <span class="n">cross_product_anticomm</span> <span class="o">(</span><span class="n">v</span> <span class="n">w</span> <span class="o">:</span> <span class="n">fin</span> <span class="mi">3</span> <span class="bp">→</span> <span class="n">R</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">v</span> <span class="bp">×₃</span> <span class="n">w</span> <span class="bp">=</span> <span class="bp">-</span> <span class="o">(</span><span class="n">w</span> <span class="bp">×₃</span> <span class="n">v</span><span class="o">)</span> <span class="o">:=</span>
<span class="kd">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">cross_product_def</span><span class="o">,</span> <span class="n">mul_comm</span><span class="o">]</span>

<span class="kd">lemma</span> <span class="n">cross_product_anticomm'</span> <span class="o">(</span><span class="n">v</span> <span class="n">w</span> <span class="o">:</span> <span class="n">fin</span> <span class="mi">3</span> <span class="bp">→</span> <span class="n">R</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">v</span> <span class="bp">×₃</span> <span class="n">w</span> <span class="bp">+</span> <span class="n">w</span> <span class="bp">×₃</span> <span class="n">v</span> <span class="bp">=</span> <span class="mi">0</span> <span class="o">:=</span>
<span class="kd">by</span> <span class="n">rw</span> <span class="o">[</span><span class="n">add_eq_zero_iff_eq_neg</span><span class="o">,</span> <span class="n">cross_product_anticomm</span><span class="o">]</span>

<span class="kd">lemma</span> <span class="n">cross_product_self_eq_zero_vector</span> <span class="o">(</span><span class="n">v</span> <span class="o">:</span> <span class="n">fin</span> <span class="mi">3</span> <span class="bp">→</span> <span class="n">R</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">v</span> <span class="bp">×₃</span> <span class="n">v</span> <span class="bp">=</span> <span class="mi">0</span> <span class="o">:=</span>
<span class="kd">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">cross_product_def</span><span class="o">,</span> <span class="n">mul_comm</span><span class="o">]</span>

<span class="kd">lemma</span> <span class="n">vec3_dot_product</span> <span class="o">(</span><span class="n">v</span> <span class="n">w</span> <span class="o">:</span> <span class="n">fin</span> <span class="mi">3</span> <span class="bp">→</span> <span class="n">R</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">v</span> <span class="bp">⬝</span> <span class="n">w</span> <span class="bp">=</span> <span class="n">v</span> <span class="mi">0</span> <span class="bp">*</span> <span class="n">w</span> <span class="mi">0</span> <span class="bp">+</span> <span class="n">v</span> <span class="mi">1</span> <span class="bp">*</span> <span class="n">w</span> <span class="mi">1</span> <span class="bp">+</span> <span class="n">v</span> <span class="mi">2</span> <span class="bp">*</span> <span class="n">w</span> <span class="mi">2</span> <span class="o">:=</span>
<span class="kd">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">matrix.dot_product</span><span class="o">,</span> <span class="n">add_assoc</span><span class="o">,</span> <span class="n">fin.sum_univ_succ</span><span class="o">]</span>

<span class="kd">lemma</span> <span class="n">dot_self_cross_product_eq_zero</span> <span class="o">(</span><span class="n">v</span> <span class="n">w</span> <span class="o">:</span> <span class="n">fin</span> <span class="mi">3</span> <span class="bp">→</span> <span class="n">R</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">v</span> <span class="bp">⬝</span> <span class="o">(</span><span class="n">v</span> <span class="bp">×₃</span> <span class="n">w</span><span class="o">)</span> <span class="bp">=</span> <span class="mi">0</span> <span class="o">:=</span>
<span class="kd">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">cross_product_def</span><span class="o">,</span> <span class="n">vec3_dot_product</span><span class="o">,</span> <span class="n">mul_sub</span><span class="o">,</span> <span class="n">mul_assoc</span><span class="o">,</span> <span class="n">mul_left_comm</span><span class="o">]</span>

<span class="kd">lemma</span> <span class="n">dot_cross_product_self_eq_zero</span> <span class="o">(</span><span class="n">v</span> <span class="n">w</span> <span class="o">:</span> <span class="n">fin</span> <span class="mi">3</span> <span class="bp">→</span> <span class="n">R</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">w</span> <span class="bp">⬝</span> <span class="o">(</span><span class="n">v</span> <span class="bp">×₃</span> <span class="n">w</span><span class="o">)</span> <span class="bp">=</span> <span class="mi">0</span> <span class="o">:=</span>
<span class="kd">by</span> <span class="n">rw</span> <span class="o">[</span><span class="n">cross_product_anticomm</span><span class="o">,</span> <span class="n">matrix.dot_product_neg</span><span class="o">,</span> <span class="n">dot_self_cross_product_eq_zero</span><span class="o">,</span> <span class="n">neg_zero</span><span class="o">]</span>

<span class="sd">/-- Cyclic permutations preserve triple product.</span>
<span class="sd">See also `triple_product_eq_det`. -/</span>
<span class="kd">lemma</span> <span class="n">triple_product_permutation</span> <span class="o">(</span><span class="n">u</span> <span class="n">v</span> <span class="n">w</span> <span class="o">:</span> <span class="n">fin</span> <span class="mi">3</span> <span class="bp">→</span> <span class="n">R</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">u</span> <span class="bp">⬝</span> <span class="o">(</span><span class="n">v</span> <span class="bp">×₃</span> <span class="n">w</span><span class="o">)</span> <span class="bp">=</span> <span class="n">v</span> <span class="bp">⬝</span> <span class="o">(</span><span class="n">w</span> <span class="bp">×₃</span> <span class="n">u</span><span class="o">)</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">cross_product_def</span><span class="o">,</span> <span class="n">vec3_dot_product</span><span class="o">,</span> <span class="n">matrix.head_cons</span><span class="o">,</span> <span class="n">matrix.cons_vec_bit0_eq_alt0</span><span class="o">,</span>
    <span class="n">matrix.empty_append</span><span class="o">,</span> <span class="n">matrix.cons_val_one</span><span class="o">,</span> <span class="n">matrix.cons_vec_alt0</span><span class="o">,</span> <span class="n">matrix.cons_append</span><span class="o">,</span>
    <span class="n">matrix.cons_val_zero</span><span class="o">],</span>
  <span class="n">ring</span><span class="o">,</span>
<span class="kd">end</span>

<span class="kd">lemma</span> <span class="n">triple_product_eq_det</span> <span class="o">(</span><span class="n">u</span> <span class="n">v</span> <span class="n">w</span> <span class="o">:</span> <span class="n">fin</span> <span class="mi">3</span> <span class="bp">→</span> <span class="n">R</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">u</span> <span class="bp">⬝</span> <span class="o">(</span><span class="n">v</span> <span class="bp">×₃</span> <span class="n">w</span><span class="o">)</span> <span class="bp">=</span> <span class="n">matrix.det</span> <span class="bp">!</span><span class="o">[</span> <span class="n">u</span><span class="o">,</span> <span class="n">v</span><span class="o">,</span> <span class="n">w</span> <span class="o">]</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">vec3_dot_product</span><span class="o">,</span> <span class="n">cross_product_def</span><span class="o">,</span> <span class="n">matrix.det_fin_three</span><span class="o">,</span>
    <span class="n">matrix.head_cons</span><span class="o">,</span>
    <span class="n">matrix.cons_vec_bit0_eq_alt0</span><span class="o">,</span> <span class="n">matrix.empty_vec_alt0</span><span class="o">,</span>
    <span class="n">matrix.cons_vec_alt0</span><span class="o">,</span> <span class="n">matrix.vec_head_vec_alt0</span><span class="o">,</span>
    <span class="n">fin.fin_append_apply_zero</span><span class="o">,</span>
    <span class="n">matrix.empty_append</span><span class="o">,</span> <span class="n">matrix.cons_append</span><span class="o">,</span>
    <span class="n">matrix.cons_val'</span><span class="o">,</span> <span class="n">matrix.cons_val_one</span><span class="o">,</span> <span class="n">matrix.cons_val_zero</span><span class="o">],</span>
  <span class="n">ring</span><span class="o">,</span>
<span class="kd">end</span>
</code></pre></div>



<a name="265689992"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/265689992" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#265689992">(Dec 21 2021 at 14:22)</a>:</h4>
<p>By the way, is there a way to make <code>cross_product</code> pretty print properly? The expression <code>v ×₃ w = - (w ×₃ v)</code> prints as <code>⇑(⇑cross_product v) w = -⇑(⇑cross_product w) v</code>.</p>



<a name="265690192"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/265690192" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#265690192">(Dec 21 2021 at 14:24)</a>:</h4>
<p>You'll probably want to write out the <code>coe_fn</code>/<code>⇑</code> in the notation, so something like (untested):</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">notation</span> <span class="n">v</span> <span class="bp">`</span> <span class="bp">×₃</span> <span class="bp">`</span> <span class="n">w</span> <span class="o">:=</span> <span class="bp">⇑</span><span class="o">(</span><span class="bp">⇑</span><span class="n">cross_product</span> <span class="n">v</span><span class="o">)</span> <span class="n">w</span>
</code></pre></div>



<a name="265690981"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/265690981" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#265690981">(Dec 21 2021 at 14:32)</a>:</h4>
<p>I haven't been able to get that to work or any number of permutations... Did you manage, <span class="user-mention" data-user-id="310045">@Eric Wieser</span>?</p>



<a name="265691059"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/265691059" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#265691059">(Dec 21 2021 at 14:32)</a>:</h4>
<p>No, I didn't. Is this in a branch / PR somewhere?</p>



<a name="265691142"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/265691142" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#265691142">(Dec 21 2021 at 14:33)</a>:</h4>
<p>There's a code snippet of a complete module I posted two messages up.</p>



<a name="265691203"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/265691203" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#265691203">(Dec 21 2021 at 14:34)</a>:</h4>
<p>I'm having trouble too. How does <a href="https://leanprover-community.github.io/mathlib_docs/find/linear_map.comp/src">src#linear_map.comp</a> do it?</p>



<a name="265691256"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/265691256" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#265691256">(Dec 21 2021 at 14:34)</a>:</h4>
<p>My point is that I think this is mature enough that zulip is probably no longer the best place to discuss it, and it would probably make sense for <span class="user-mention" data-user-id="417654">@Martin Dvořák</span> to make a PR</p>



<a name="265691318"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/265691318" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#265691318">(Dec 21 2021 at 14:34)</a>:</h4>
<p>Ah right, that's not bundled.</p>



<a name="265692826"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/265692826" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Martin Dvořák <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#265692826">(Dec 21 2021 at 14:48)</a>:</h4>
<p>Thank you very much for your helps! I will take care of the PR.</p>



<a name="265693870"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/265693870" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Martin Dvořák <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#265693870">(Dec 21 2021 at 14:59)</a>:</h4>
<p>If you say that <code>triple_product_eq_det</code> is the main result, should I denote it as a <code>theorem</code> instead?</p>



<a name="265694180"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/265694180" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#265694180">(Dec 21 2021 at 15:02)</a>:</h4>
<p>You can put other main results, too. I just wanted to be sure to include that since it's theoretically important.</p>



<a name="265694191"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/265694191" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Martin Dvořák <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#265694191">(Dec 21 2021 at 15:02)</a>:</h4>
<p>Can we keep the identifiers <code>u</code>, <code>v</code>, <code>w</code> as name of vectors (even tho they are probably standard names for universes in Lean/mathlib)?</p>



<a name="265694246"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/265694246" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Martin Dvořák <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#265694246">(Dec 21 2021 at 15:03)</a>:</h4>
<p><span class="user-mention silent" data-user-id="306601">Kyle Miller</span> <a href="#narrow/stream/113488-general/topic/cross.20product/near/265694180">said</a>:</p>
<blockquote>
<p>You can put other main results, too. I just wanted to be sure to include that since it's theoretically important.</p>
</blockquote>
<p>I don't want to exaggerate the importance of the other results. I just wanted to denote it as a <code>theorem</code> unless you are opposed to it.</p>



<a name="265694271"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/265694271" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#265694271">(Dec 21 2021 at 15:03)</a>:</h4>
<p><code>data.fin.vec_notation</code> seems to use <code>u</code> and <code>v</code> for vectors</p>



<a name="265694464"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/265694464" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Martin Dvořák <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#265694464">(Dec 21 2021 at 15:04)</a>:</h4>
<p><span class="user-mention silent" data-user-id="306601">Kyle Miller</span> <a href="#narrow/stream/113488-general/topic/cross.20product/near/265694271">said</a>:</p>
<blockquote>
<p><code>data.fin.vec_notation</code> seems to use <code>u</code> and <code>v</code> for vectors</p>
</blockquote>
<p>Oh, that's weird. In this file, the identifier <code>u</code> is used in both meanings (globally universe; in arguments a vector).</p>



<a name="265694527"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/265694527" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#265694527">(Dec 21 2021 at 15:05)</a>:</h4>
<p>I'm not sure it matters whether it's a <code>theorem</code> or not -- in the docs everything seems to be a <code>theorem</code> anyway -- so feel free to choose how you want.</p>



<a name="265694693"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/265694693" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Martin Dvořák <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#265694693">(Dec 21 2021 at 15:06)</a>:</h4>
<p>BTW how did you generate the long list of all lemmata used in the last simp?</p>



<a name="265694695"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/265694695" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#265694695">(Dec 21 2021 at 15:06)</a>:</h4>
<p>In <code>data.fin.vec_notation</code>, <code>u</code> is used as both a universe variable and an argument, too.</p>



<a name="265694705"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/265694705" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#265694705">(Dec 21 2021 at 15:06)</a>:</h4>
<p><code>simp?</code></p>



<a name="265694714"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/265694714" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Martin Dvořák <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#265694714">(Dec 21 2021 at 15:07)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">vec3_dot_product</span><span class="o">,</span> <span class="n">cross_product_def</span><span class="o">,</span> <span class="n">matrix.det_fin_three</span><span class="o">,</span>
    <span class="n">matrix.head_cons</span><span class="o">,</span>
    <span class="n">matrix.cons_vec_bit0_eq_alt0</span><span class="o">,</span> <span class="n">matrix.empty_vec_alt0</span><span class="o">,</span>
    <span class="n">matrix.cons_vec_alt0</span><span class="o">,</span> <span class="n">matrix.vec_head_vec_alt0</span><span class="o">,</span>
    <span class="n">fin.fin_append_apply_zero</span><span class="o">,</span>
    <span class="n">matrix.empty_append</span><span class="o">,</span> <span class="n">matrix.cons_append</span><span class="o">,</span>
    <span class="n">matrix.cons_val'</span><span class="o">,</span> <span class="n">matrix.cons_val_one</span><span class="o">,</span> <span class="n">matrix.cons_val_zero</span><span class="o">],</span>
</code></pre></div>



<a name="265694752"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/265694752" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#265694752">(Dec 21 2021 at 15:07)</a>:</h4>
<p>Yeah, I seeded it with the first three and then did <code>simp? [vec3_dot_product, cross_product_def, matrix.det_fin_three]</code></p>



<a name="265694784"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/265694784" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Martin Dvořák <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#265694784">(Dec 21 2021 at 15:07)</a>:</h4>
<p>I suppose you didn't write it by hand. Can I first call just <code>simp</code> and then get the list of all used lemmata in it?</p>



<a name="265694825"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/265694825" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Martin Dvořák <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#265694825">(Dec 21 2021 at 15:07)</a>:</h4>
<p>Thanks!</p>



<a name="265694921"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/265694921" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Martin Dvořák <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#265694921">(Dec 21 2021 at 15:08)</a>:</h4>
<p>And is there any semantics in which lemmata you placed on the same line?</p>



<a name="265695015"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/265695015" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#265695015">(Dec 21 2021 at 15:09)</a>:</h4>
<p>I mostly made sure the three main ones came first in case someone wanted to regenerate it later, and any other rearrangements I might have made don't matter.</p>



<a name="265775406"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/265775406" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#265775406">(Dec 22 2021 at 07:58)</a>:</h4>
<p>Just a very minor comment: should</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">cross_product_anticomm</span> <span class="o">(</span><span class="n">v</span> <span class="n">w</span> <span class="o">:</span> <span class="n">fin</span> <span class="mi">3</span> <span class="bp">→</span> <span class="n">R</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">v</span> <span class="bp">×₃</span> <span class="n">w</span> <span class="bp">=</span> <span class="bp">-</span> <span class="o">(</span><span class="n">w</span> <span class="bp">×₃</span> <span class="n">v</span><span class="o">)</span> <span class="o">:=</span>
</code></pre></div>
<p>be formulated with the minus sign on the other side of the equality?</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="c1">--  The right-hand side is "easier" than the left-hand side</span>
<span class="kd">lemma</span> <span class="n">cross_product_anticomm</span> <span class="o">(</span><span class="n">v</span> <span class="n">w</span> <span class="o">:</span> <span class="n">fin</span> <span class="mi">3</span> <span class="bp">→</span> <span class="n">R</span><span class="o">)</span> <span class="o">:</span>
  <span class="bp">-</span> <span class="o">(</span><span class="n">v</span> <span class="bp">×₃</span> <span class="n">w</span><span class="o">)</span> <span class="bp">=</span> <span class="n">w</span> <span class="bp">×₃</span> <span class="n">v</span> <span class="o">:=</span>
</code></pre></div>



<a name="265776743"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/265776743" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#265776743">(Dec 22 2021 at 08:18)</a>:</h4>
<p>That seems nicer, yeah.</p>



<a name="265779733"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/265779733" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Martin Dvořák <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#265779733">(Dec 22 2021 at 08:55)</a>:</h4>
<p>Thanks for the suggestion! I updated the pull request.</p>



<a name="266680917"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/266680917" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Martin Dvořák <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#266680917">(Jan 03 2022 at 12:34)</a>:</h4>
<p><span class="user-mention silent" data-user-id="238446">Anne Baanen</span> <a href="#narrow/stream/113488-general/topic/cross.20product/near/265690192">said</a>:</p>
<blockquote>
<p>You'll probably want to write out the <code>coe_fn</code>/<code>⇑</code> in the notation, so something like (untested):</p>
<p><div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">notation</span> <span class="n">v</span> <span class="bp">`</span> <span class="bp">×₃</span> <span class="bp">`</span> <span class="n">w</span> <span class="o">:=</span> <span class="bp">⇑</span><span class="o">(</span><span class="bp">⇑</span><span class="n">cross_product</span> <span class="n">v</span><span class="o">)</span> <span class="n">w</span>
</code></pre></div><br>
</p>
</blockquote>
<p>Should I change the notation for <code> ×₃ </code> to the above? I don't know what <code>coe_fn</code> and <code>⇑</code> mean.</p>



<a name="266680965"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/266680965" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Martin Dvořák <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#266680965">(Jan 03 2022 at 12:35)</a>:</h4>
<p>This is the pull request: <a href="https://github.com/leanprover-community/mathlib/pull/11181">https://github.com/leanprover-community/mathlib/pull/11181</a></p>



<a name="266681489"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/266681489" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#266681489">(Jan 03 2022 at 12:41)</a>:</h4>
<p>I understood that my suggestion did not work. Does <code>cross_product v w</code> pretty-print as <code>v ×₃ w</code> now?</p>



<a name="266681964"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/266681964" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Martin Dvořák <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#266681964">(Jan 03 2022 at 12:47)</a>:</h4>
<p>No, it doesn't. And it is weird. I think that it did pretty print a few commits ago...</p>



<a name="266682848"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/266682848" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Martin Dvořák <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#266682848">(Jan 03 2022 at 12:58)</a>:</h4>
<p>It worked when it was written as:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">local</span> <span class="kd">infix</span> <span class="bp">`</span> <span class="bp">×₃</span> <span class="bp">`</span><span class="o">:</span> <span class="mi">68</span> <span class="o">:=</span> <span class="n">cross_product</span>
</code></pre></div>
<p>No it doesn't work when it is written as:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">localized</span> <span class="s2">"infixl ` ×₃ `: 68 := cross_product"</span> <span class="k">in</span> <span class="n">vectors</span>
</code></pre></div>



<a name="266683101"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/266683101" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Martin Dvořák <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#266683101">(Jan 03 2022 at 13:00)</a>:</h4>
<p>I don't know how it works so it is still possible that the pretty print stopped due to some other change.</p>



<a name="266683133"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/266683133" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Martin Dvořák <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#266683133">(Jan 03 2022 at 13:01)</a>:</h4>
<p>Should I experiment with that? Or do you see it from your knowledge?</p>



<a name="266684227"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/266684227" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#266684227">(Jan 03 2022 at 13:14)</a>:</h4>
<p>I don't know much about the pretty-printer, and can't think of any other tricks to experiment with. I guess let's just keep it as it is.</p>



<a name="266708540"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/266708540" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#266708540">(Jan 03 2022 at 16:56)</a>:</h4>
<p><span class="user-mention" data-user-id="417654">@Martin Dvořák</span> I'm pretty sure it stopped working when we made <code>cross_product</code> be a multilinear map rather than a plain function.</p>
<p>All <code>localized</code> really does is store the quoted code so that when you later do <code>open_locale vectors</code> it will automatically run <code>local infixl </code> ×₃ <code>: 68 := cross_product</code>, so I'd be surprised if that's the cause.</p>



<a name="266717893"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/266717893" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Martin Dvořák <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#266717893">(Jan 03 2022 at 18:08)</a>:</h4>
<p><span class="user-mention silent" data-user-id="306601">Kyle Miller</span> <a href="#narrow/stream/113488-general/topic/cross.20product/near/266708540">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="417654">Martin Dvořák</span> I'm pretty sure it stopped working when we made <code>cross_product</code> be a multilinear map rather than a plain function.</p>
</blockquote>
<p>Oh, you are absolutely right!</p>



<a name="266799595"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/266799595" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#266799595">(Jan 04 2022 at 12:00)</a>:</h4>
<p>Instead of providing a bilinear map, would it make more sense to provide the cross product as a <code>lie_ring</code> instance?</p>



<a name="266799682"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/266799682" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#266799682">(Jan 04 2022 at 12:01)</a>:</h4>
<p>There is already a <code>lie_ring</code> instance on <code>fin 3 → ℝ</code>. (And it's not propeq to the cross product.)</p>



<a name="266799696"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/266799696" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#266799696">(Jan 04 2022 at 12:01)</a>:</h4>
<p>Something like:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">instance</span> <span class="n">vec3_has_bracket</span> <span class="o">:</span> <span class="n">has_bracket</span> <span class="o">(</span><span class="n">fin</span> <span class="mi">3</span> <span class="bp">→</span> <span class="n">R</span><span class="o">)</span> <span class="o">(</span><span class="n">fin</span> <span class="mi">3</span> <span class="bp">→</span> <span class="n">R</span><span class="o">)</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">bracket</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">u</span> <span class="n">v</span><span class="o">,</span> <span class="n">u</span> <span class="bp">×₃</span> <span class="n">v</span> <span class="o">}</span>

<span class="kd">instance</span> <span class="n">vec3_lie_ring</span> <span class="o">:</span> <span class="n">lie_ring</span> <span class="o">(</span><span class="n">fin</span> <span class="mi">3</span> <span class="bp">→</span> <span class="n">R</span><span class="o">)</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">add_lie</span> <span class="o">:=</span> <span class="n">linear_map.map_add₂</span> <span class="n">_</span><span class="o">,</span>
  <span class="n">lie_add</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">u</span><span class="o">,</span> <span class="n">linear_map.map_add</span> <span class="n">_</span><span class="o">,</span>
  <span class="n">lie_self</span> <span class="o">:=</span> <span class="n">cross_product_self</span><span class="o">,</span>
  <span class="n">leibniz_lie</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">u</span> <span class="n">v</span> <span class="n">w</span><span class="o">,</span> <span class="kd">begin</span>
    <span class="n">dsimp</span> <span class="n">only</span> <span class="o">[</span><span class="n">has_bracket.bracket</span><span class="o">,</span> <span class="n">cross_product_apply</span><span class="o">],</span>
    <span class="n">ext</span> <span class="n">i</span><span class="o">,</span>
    <span class="n">fin_cases</span> <span class="n">i</span><span class="bp">;</span> <span class="n">norm_num</span><span class="bp">;</span> <span class="n">ring</span><span class="o">,</span>
  <span class="kd">end</span><span class="o">,</span>
  <span class="bp">..</span><span class="n">pi.add_comm_group</span> <span class="o">}</span>

<span class="c1">-- pretty printer can't use this unfortunately</span>
<span class="n">localized</span> <span class="s2">"infixl ` ×₃ `: 68 := @has_bracket.bracket _ _ vec3_has_bracket"</span> <span class="k">in</span> <span class="n">vectors</span>
</code></pre></div>



<a name="266799733"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/266799733" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#266799733">(Jan 04 2022 at 12:01)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112680">Johan Commelin</span> <a href="#narrow/stream/113488-general/topic/cross.20product/near/266799682">said</a>:</p>
<blockquote>
<p>There is already a <code>lie_ring</code> instance on <code>fin 3 → ℝ</code>.</p>
</blockquote>
<p>Where? <code>apply_instance</code> didn't find it for me.</p>



<a name="266799797"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/266799797" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#266799797">(Jan 04 2022 at 12:02)</a>:</h4>
<p>Weird. Maybe <code>lie_ring.pi</code> is missing from mathlib? But it certainly exists in the platonic ideal of mathlib.</p>



<a name="266799820"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/266799820" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#266799820">(Jan 04 2022 at 12:02)</a>:</h4>
<p>Ah, missing import</p>



<a name="266799852"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/266799852" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#266799852">(Jan 04 2022 at 12:03)</a>:</h4>
<p><a href="https://leanprover-community.github.io/mathlib_docs/find/lie_ring.of_associative_ring">docs#lie_ring.of_associative_ring</a></p>



<a name="266800971"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/266800971" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#266800971">(Jan 04 2022 at 12:14)</a>:</h4>
<p>This seems a situation where a human being told of a Lie bracket on <code>fin 3 → ℝ</code> would not choose the one coming from the instance... or where they would at least ask "Are you really sure that you want the zero Lie-bracket?" <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span></p>



<a name="266801040"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/266801040" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#266801040">(Jan 04 2022 at 12:15)</a>:</h4>
<p>Is it possible to override the instance when the associative ring is also commutative?</p>



<a name="266801245"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/266801245" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#266801245">(Jan 04 2022 at 12:18)</a>:</h4>
<p>I'm afraid that's non-trivial.</p>



<a name="266801335"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/266801335" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#266801335">(Jan 04 2022 at 12:19)</a>:</h4>
<p>And not desirable; we want to be able to make statements like <a href="https://leanprover-community.github.io/mathlib_docs/find/commutative_ring_iff_abelian_lie_ring">docs#commutative_ring_iff_abelian_lie_ring</a></p>



<a name="266801789"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/266801789" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#266801789">(Jan 04 2022 at 12:25)</a>:</h4>
<p>I guess a type synonym would solve the problem here</p>



<a name="266802004"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/266802004" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#266802004">(Jan 04 2022 at 12:28)</a>:</h4>
<p>Do people agree that working with a lie structure would be better than just having a bilinear map?</p>



<a name="266802237"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/266802237" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#266802237">(Jan 04 2022 at 12:32)</a>:</h4>
<p>It's such a specific case that it's hard to have strong feelings. Regarding the cross product as a Lie bracket is mostly just a curiosity. I'd be happy either way.</p>



<a name="266802415"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/266802415" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#266802415">(Jan 04 2022 at 12:34)</a>:</h4>
<p>I have never used the cross product apart from the Intro to Calculus course. So I wouldn't put it high up my prio list. But I'm just one anecdote.</p>



<a name="266802578"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/266802578" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#266802578">(Jan 04 2022 at 12:36)</a>:</h4>
<p>I also do not have strong opinions, really.  If someone asked me to provide a Lie bracket on <code>ℝ^3</code>, my first reaction would probably be "What a weird question".  Then I would think about the cross-product.  Finally I would think of the zero Lie bracket.</p>



<a name="266802722"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/266802722" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#266802722">(Jan 04 2022 at 12:38)</a>:</h4>
<p>I look forward to a long thread about the seven-dimensional cross product once we finish here :-)</p>



<a name="266802903"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/266802903" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ruben Van de Velde <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#266802903">(Jan 04 2022 at 12:41)</a>:</h4>
<p>But that's the last one, right?</p>



<a name="266803028"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/266803028" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#266803028">(Jan 04 2022 at 12:42)</a>:</h4>
<p><span class="user-mention silent" data-user-id="321459">Damiano Testa</span> <a href="#narrow/stream/113488-general/topic/cross.20product/near/266802578">said</a>:</p>
<blockquote>
<p>If someone asked me to provide a Lie bracket on <code>ℝ^3</code>,</p>
</blockquote>
<p>The standard <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mrow><mi mathvariant="fraktur">s</mi><mi mathvariant="fraktur">l</mi></mrow><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">\mathfrak{sl}_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8414em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord"><span class="mord mathfrak">sl</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>-triple with basis <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mi>X</mi><mo separator="true">,</mo><mi>H</mi><mo separator="true">,</mo><mi>Y</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(X,H,Y)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.08125em;">H</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.22222em;">Y</span><span class="mclose">)</span></span></span></span>.</p>



<a name="266807785"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/266807785" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#266807785">(Jan 04 2022 at 13:35)</a>:</h4>
<p>Oh, but that is <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mrow><mi mathvariant="fraktur">s</mi><mi mathvariant="fraktur">l</mi></mrow><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">\mathfrak{sl}_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8414em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord"><span class="mord mathfrak">sl</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>, nor <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi mathvariant="double-struck">R</mi><mn>3</mn></msup></mrow><annotation encoding="application/x-tex">\mathbb{R}^3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mord"><span class="mord mathbb">R</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span></span></span></span></span></span></span></span>: as the notation suggests, they are not the same!  <span aria-label="upside down" class="emoji emoji-1f643" role="img" title="upside down">:upside_down:</span></p>



<a name="266808045"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/266808045" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#266808045">(Jan 04 2022 at 13:37)</a>:</h4>
<p>Sure, I completely agree. But still, if you ask me to put a Lie algebra structure on a 3-dimensional space with a distinguished basis, this is the one I would pick <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span></p>



<a name="266826026"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/266826026" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#266826026">(Jan 04 2022 at 16:05)</a>:</h4>
<p><span class="user-mention silent" data-user-id="240862">Oliver Nash</span> <a href="#narrow/stream/113488-general/topic/cross.20product/near/266802237">said</a>:</p>
<blockquote>
<p>It's such a specific case that it's hard to have strong feelings. Regarding the cross product as a Lie bracket is mostly just a curiosity. I'd be happy either way.</p>
</blockquote>
<p>I think it's sort of a curiosity, too, a sort of "law of small numbers" (that there are interesting coincidences for things of small cardinality or dimension).</p>
<p>It does have some sense to it, but it takes a few isomorphisms. We start with <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>V</mi><mo>=</mo><msup><mi mathvariant="double-struck">R</mi><mn>3</mn></msup></mrow><annotation encoding="application/x-tex">V=\mathbb{R}^3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mord"><span class="mord mathbb">R</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span></span></span></span></span></span></span></span> as the fundamental <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mrow><mi mathvariant="fraktur">s</mi><mi mathvariant="fraktur">o</mi></mrow><mo stretchy="false">(</mo><mn>3</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\mathfrak{so}(3)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathfrak">so</span></span><span class="mopen">(</span><span class="mord">3</span><span class="mclose">)</span></span></span></span>-module. The adjoint representation is <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi mathvariant="normal">Λ</mi><mn>2</mn></msup><mi>V</mi></mrow><annotation encoding="application/x-tex">\Lambda^2 V</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mord"><span class="mord">Λ</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mord mathnormal" style="margin-right:0.22222em;">V</span></span></span></span>, which is isomorphic to <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mrow><mi mathvariant="fraktur">s</mi><mi mathvariant="fraktur">o</mi></mrow><mo stretchy="false">(</mo><mn>3</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\mathfrak{so}(3)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathfrak">so</span></span><span class="mopen">(</span><span class="mord">3</span><span class="mclose">)</span></span></span></span> since it may be regarded as being antisymmetric matrices (we identify <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>V</mi></mrow><annotation encoding="application/x-tex">V</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.22222em;">V</span></span></span></span> with <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>V</mi><mo>∗</mo></msup></mrow><annotation encoding="application/x-tex">V^*</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6887em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6887em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">∗</span></span></span></span></span></span></span></span></span></span></span> using the inner product from the definition for <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mrow><mi mathvariant="fraktur">s</mi><mi mathvariant="fraktur">o</mi></mrow><mo stretchy="false">(</mo><mn>3</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\mathfrak{so}(3)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathfrak">so</span></span><span class="mopen">(</span><span class="mord">3</span><span class="mclose">)</span></span></span></span>). Then, the Hodge star gives an isomorphism <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>V</mi><mo>=</mo><msup><mi mathvariant="normal">Λ</mi><mn>2</mn></msup><mi>V</mi></mrow><annotation encoding="application/x-tex">V=\Lambda^2 V</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mord"><span class="mord">Λ</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mord mathnormal" style="margin-right:0.22222em;">V</span></span></span></span>.  Through these isomorphims you can transport the Lie bracket for <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mrow><mi mathvariant="fraktur">s</mi><mi mathvariant="fraktur">o</mi></mrow><mo stretchy="false">(</mo><mn>3</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\mathfrak{so}(3)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathfrak">so</span></span><span class="mopen">(</span><span class="mord">3</span><span class="mclose">)</span></span></span></span> to <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi mathvariant="double-struck">R</mi><mn>3</mn></msup></mrow><annotation encoding="application/x-tex">\mathbb{R}^3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mord"><span class="mord mathbb">R</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span></span></span></span></span></span></span></span>.</p>
<p>You can also consider the constant part of differential forms on <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi mathvariant="double-struck">R</mi><mn>3</mn></msup></mrow><annotation encoding="application/x-tex">\mathbb{R}^3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mord"><span class="mord mathbb">R</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span></span></span></span></span></span></span></span> under wedge product, using the Hodge star to identify 2-forms with 1-forms. This is the significance of cross products in 3D vector calculus.</p>



<a name="266826106"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/266826106" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#266826106">(Jan 04 2022 at 16:06)</a>:</h4>
<p><span class="user-mention" data-user-id="112680">@Johan Commelin</span> What, you wouldn't choose the Heisenberg Lie algebra? <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span></p>



<a name="266833110"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/266833110" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#266833110">(Jan 04 2022 at 16:48)</a>:</h4>
<p>Nah, I'm a semisimple guy</p>



<a name="266865097"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/266865097" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kalle Kytölä <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#266865097">(Jan 04 2022 at 21:22)</a>:</h4>
<p>I almost thought "simple guy" based on the <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi mathvariant="double-struck">R</mi><mn>3</mn></msup><mo>=</mo><msub><mrow><mi mathvariant="fraktur">s</mi><mi mathvariant="fraktur">l</mi></mrow><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">\R^3 = \mathfrak{sl}_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mord"><span class="mord mathbb">R</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8414em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord"><span class="mord mathfrak">sl</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> example above, until... <span aria-label="light bulb" class="emoji emoji-1f4a1" role="img" title="light bulb">:light_bulb:</span> I remembered that we should strive for the mathlib level of generality.</p>



<a name="266865104"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/266865104" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kalle Kytölä <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#266865104">(Jan 04 2022 at 21:22)</a>:</h4>
<p>Ok, bad jokes aside... (Unless the following is yet another one...)</p>
<p>I originally suggested <code>lie_ring</code> for the cross product, because I thought one would then nicely get for free any API consequences of antisymmetry and Jacobi identity. The problems pointed out back then were at least competing <code>instance</code>s (the zero bracket, which I think indeed begs the "are you sure?" question to humans) and perhaps notation (I wasn't sure about it). Also the later proposal of implementing the cross product as a bilinear map for sure gives a substantial amount of API for free.</p>
<p>But in fact <code>lie_algebra R</code> (for <code>[comm_ring R]</code>) should in principle give all API of bilinearity, antisymmetry, and Jacobi identity. So in terms of reusing the maximal amount of existing API, wouldn't it be close to optimal? Except, of course, if getting access to the API requires that <code>lie_algebra</code> is an <code>instance</code>, in which case we only get all the consequences of bilinearity, antisymmetry, and Jacobi identity for the the zero Lie bracket ("for free" <span aria-label="smiley" class="emoji emoji-1f603" role="img" title="smiley">:smiley:</span>).</p>



<a name="266865687"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/266865687" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kalle Kytölä <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#266865687">(Jan 04 2022 at 21:27)</a>:</h4>
<p>Just to clarify, that is not a proposal to change anything implemented right now! But since <span class="user-mention silent" data-user-id="310045">Eric Wieser</span> brought up the possibility of <code>lie_ring</code> implementation again, I thought it might be worth still clarifying what are the merits of the different choices.</p>



<a name="266877891"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/266877891" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#266877891">(Jan 04 2022 at 23:19)</a>:</h4>
<p><span class="user-mention" data-user-id="373986">@Kalle Kytölä</span>, I didn't see your original suggestion, but your comment above nicely summarizes why I think using the <code>lie</code> spelling might be a good idea. Indeed, there's no need to change the approach in the current PR, but it certainly gives us a large pile of reusable lemmas.</p>



<a name="266882360"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/266882360" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#266882360">(Jan 05 2022 at 00:14)</a>:</h4>
<p><span class="user-mention" data-user-id="310045">@Eric Wieser</span> What do you mean specifically by a "<code>lie</code> spelling"?</p>
<p><span class="user-mention" data-user-id="373986">@Kalle Kytölä</span> Are you aware that the current version of <a href="https://github.com/leanprover-community/mathlib/pull/11181">#11181</a> contains a <code>lie_ring</code> implementation as a local instance? Design-wise, I think it's a nice idea to use the <code>lie_ring</code> instance to prove lemmas that are generally true for Lie rings, but in terms of cross product notation.</p>
<p>I think it's good to consider the principle "just because something is something doesn't mean that it <em>is</em> something." I don't see any benefit to be had defining the cross product through the <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mrow><mi mathvariant="fraktur">s</mi><mi mathvariant="fraktur">o</mi></mrow><mo stretchy="false">(</mo><mn>3</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\mathfrak{so}(3)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathfrak">so</span></span><span class="mopen">(</span><span class="mord">3</span><span class="mclose">)</span></span></span></span> or <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mrow><mi mathvariant="fraktur">s</mi><mi mathvariant="fraktur">l</mi></mrow><mo stretchy="false">(</mo><mn>2</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\mathfrak{sl}(2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathfrak">sl</span></span><span class="mopen">(</span><span class="mord">2</span><span class="mclose">)</span></span></span></span> exceptional isomorphisms, or requiring that <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi mathvariant="double-struck">R</mi><mn>3</mn></msup></mrow><annotation encoding="application/x-tex">\mathbb{R}^3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mord"><span class="mord mathbb">R</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span></span></span></span></span></span></span></span> be a Lie ring and that the cross product needs to be rendered as a Lie bracket. Similarly, the cross product corresponds to the imaginary part of one of the Hurwitz algebras (equivalently: the imaginary part for the quaternions), but do we need to give <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi mathvariant="double-struck">R</mi><mn>3</mn></msup></mrow><annotation encoding="application/x-tex">\mathbb{R}^3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mord"><span class="mord mathbb">R</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span></span></span></span></span></span></span></span> a <code>has_mul</code> for a nonunital nonassociative algebra structure? (That would conflict with the <code>has_mul</code> from the pi instance anyway.)</p>



<a name="266882611"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/266882611" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#266882611">(Jan 05 2022 at 00:18)</a>:</h4>
<p>There are some exceptional identities involving cross products and dot products that would be nice to have at some point. You can understand them as coming from the representation theory of <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi mathvariant="double-struck">R</mi><mn>3</mn></msup></mrow><annotation encoding="application/x-tex">\mathbb{R}^3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mord"><span class="mord mathbb">R</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span></span></span></span></span></span></span></span> as a Lie algebra, but they're also straightforward to prove by algebraic manipulation.</p>
<p><em>Edit:</em> The main one would be <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mi>u</mi><mo>×</mo><mi>v</mi><mo stretchy="false">)</mo><mo>⋅</mo><mo stretchy="false">(</mo><mi>w</mi><mo>×</mo><mi>x</mi><mo stretchy="false">)</mo><mo>=</mo><mo stretchy="false">(</mo><mi>u</mi><mo>⋅</mo><mi>w</mi><mo stretchy="false">)</mo><mo stretchy="false">(</mo><mi>v</mi><mo>⋅</mo><mi>x</mi><mo stretchy="false">)</mo><mo>−</mo><mo stretchy="false">(</mo><mi>u</mi><mo>⋅</mo><mi>x</mi><mo stretchy="false">)</mo><mo stretchy="false">(</mo><mi>v</mi><mo>⋅</mo><mi>w</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(u\times v)\cdot (w\times x) = (u\cdot w)(v\cdot x) - (u\cdot x)(v\cdot w)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal">u</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal">u</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mclose">)</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal">u</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mclose">)</span></span></span></span></p>



<a name="266882715"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/266882715" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#266882715">(Jan 05 2022 at 00:19)</a>:</h4>
<p><span class="user-mention silent" data-user-id="306601">Kyle Miller</span> <a href="#narrow/stream/113488-general/topic/cross.20product/near/266882360">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="310045">Eric Wieser</span> What do you mean specifically by a "<code>lie</code> spelling"?</p>
</blockquote>
<p>I mean introduce a type synonym such that instead of having terms of the form <code>⇑(⇑cross_product v) w</code> we have terms of the form <code>⁅v, w⁆</code>. Neither pretty-prints in the nice <code>×₃</code> way anyway, but the latter has more existing lemmas than the former, and is shorter.</p>



<a name="266882769"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/266882769" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#266882769">(Jan 05 2022 at 00:19)</a>:</h4>
<p>Perhaps we can reuse the <del>docs#euclidean_space</del> <a href="https://leanprover-community.github.io/mathlib_docs/find/pi_Lp">docs#pi_Lp</a> synonym?</p>



<a name="266882912"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/266882912" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#266882912">(Jan 05 2022 at 00:21)</a>:</h4>
<p>With the rationale being; <code>pi_Lp</code> replaces the elementwise norm with the Lp norm, just as we want to replace the elementwise bracket with the geometrically meaningful one</p>



<a name="266914275"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cross%20product/near/266914275" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kalle Kytölä <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/cross.20product.html#266914275">(Jan 05 2022 at 09:35)</a>:</h4>
<p><span class="user-mention silent" data-user-id="306601">Kyle Miller</span> <a href="#narrow/stream/113488-general/topic/cross.20product/near/266882360">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="373986">Kalle Kytölä</span> Are you aware that the current version of <a href="https://github.com/leanprover-community/mathlib/pull/11181">#11181</a> contains a <code>lie_ring</code> implementation as a local instance? Design-wise, I think it's a nice idea to use the <code>lie_ring</code> instance to prove lemmas that are generally true for Lie rings, but in terms of cross product notation.</p>
</blockquote>
<p>Oh, sorry, I had not noticed this! I don't have experience with local instances yet, but I think it is great if this gives access to the <code>lie_ring</code> API. I suppose that since bilinearity is currently more directly built in, a local instance of <code>lie_algebra</code> would not add much? (EDIT: Or would it? With scalars in <a href="https://leanprover-community.github.io/mathlib_docs/find/lie_algebra">docs#lie_algebra</a> anything that  the<code>R</code> in <code>fin 3 → R</code> is a module over. Might it make a different part of API available, still?)</p>
<p><span class="user-mention silent" data-user-id="306601">Kyle Miller</span> <a href="#narrow/stream/113488-general/topic/cross.20product/near/266882360">said</a>:</p>
<blockquote>
<p>I think it's good to consider the principle "just because something is something doesn't mean that it <em>is</em> something."</p>
</blockquote>
<p>I fully agree! It is only for "free API" reasons I thought the <code>lie_ring</code> or <code>lie_algebra</code> might be appropriate. I have no strong opinions of what the cross product should be fundamentally, but I agree that it is not particularly fundamentally a Lie bracket.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>