---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/Inner.20product.20spaces.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Inner.20product.20spaces.html">Inner product spaces</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="160909836"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Inner%20product%20spaces/near/160909836" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alexander Bentkamp <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Inner.20product.20spaces.html#160909836">(Mar 15 2019 at 20:15)</a>:</h4>
<p>Hello,<br>
Is there anyone else currently interested in inner product spaces? I'd like to start working on this.</p>
<p>I found this formalization: <br>
<a href="https://github.com/ImperialCollegeLondon/xena-UROP-2018/blob/master/src/inner_product_spaces/basic.lean" target="_blank" title="https://github.com/ImperialCollegeLondon/xena-UROP-2018/blob/master/src/inner_product_spaces/basic.lean">https://github.com/ImperialCollegeLondon/xena-UROP-2018/blob/master/src/inner_product_spaces/basic.lean</a>.<br>
<span class="user-mention" data-user-id="120943">@Andreas Swerdlow</span>  Are there still plans to bring this into mathlib?</p>
<p>I am also aware of the Lean2 formalization: <a href="https://github.com/leanprover/lean2/blob/master/library/theories/analysis/inner_product.lean" target="_blank" title="https://github.com/leanprover/lean2/blob/master/library/theories/analysis/inner_product.lean">https://github.com/leanprover/lean2/blob/master/library/theories/analysis/inner_product.lean</a></p>
<p>The ImperialCollege formalization is over complex numbers and the Lean2 formalization is over the reals. I am interested in the reals, but I will try to find a generalization that subsumes both. Are there any concepts like this already?</p>



<a name="160910126"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Inner%20product%20spaces/near/160910126" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Inner.20product.20spaces.html#160910126">(Mar 15 2019 at 20:19)</a>:</h4>
<p>There is the whole theory of quadratic forms, which works over any field (though characteristic 2 can be hairy).</p>



<a name="160910213"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Inner%20product%20spaces/near/160910213" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Inner.20product.20spaces.html#160910213">(Mar 15 2019 at 20:20)</a>:</h4>
<p>Then you can specialise to nondegenerate forms, symmetric forms, alternating forms, hermitian forms, etc...</p>



<a name="160910843"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Inner%20product%20spaces/near/160910843" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Inner.20product.20spaces.html#160910843">(Mar 15 2019 at 20:30)</a>:</h4>
<p>In number theory we define unitary groups in the setting where K is a field (say) and L/K is a finite etale K-algebra of degree 2, which is a fancy way of saying either L=K+K or L is a separable quadratic extension of K. The non-trivial K-automorphism of L is denoted c, say (c for complex conjugation if K=real and L=complex) and then one can consider a non-degenerate hermitian sesquilinear form on an L-vector space. For it to be positive definite you need some notion of positive though, so then K should embed into the reals.</p>



<a name="160912710"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Inner%20product%20spaces/near/160912710" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alexander Bentkamp <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Inner.20product.20spaces.html#160912710">(Mar 15 2019 at 20:54)</a>:</h4>
<p>Ok, thanks. I'll see what I can do.</p>



<a name="160930218"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Inner%20product%20spaces/near/160930218" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Andreas Swerdlow <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Inner.20product.20spaces.html#160930218">(Mar 16 2019 at 02:41)</a>:</h4>
<p>I was thinking of submitting to mathlib fairly soon. A more up to date version is available here: <a href="https://github.com/leanprover-fork/mathlib-backup/blob/inner_product_spaces/linear_algebra/herm_inner_product_space.lean" target="_blank" title="https://github.com/leanprover-fork/mathlib-backup/blob/inner_product_spaces/linear_algebra/herm_inner_product_space.lean">https://github.com/leanprover-fork/mathlib-backup/blob/inner_product_spaces/linear_algebra/herm_inner_product_space.lean</a></p>



<a name="160960138"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Inner%20product%20spaces/near/160960138" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alexander Bentkamp <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Inner.20product.20spaces.html#160960138">(Mar 16 2019 at 17:34)</a>:</h4>
<p>I have transferred the Lean2 formalization to Lean3 now. It's for real vector spaces only. Let's see if we can merge after you submit to mathlib.</p>



<a name="243007006"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Inner%20product%20spaces/near/243007006" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gihan Marasingha <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Inner.20product.20spaces.html#243007006">(Jun 17 2021 at 12:02)</a>:</h4>
<p>As suggested by <span class="user-mention" data-user-id="260507">@Heather Macbeth</span>, I'm looking at proving Bessel's inequality. I have a couple of basic questions.</p>
<ol>
<li>
<p>If I explicitly include the instance <code>[normed_group E]</code> below, Lean complains that it couldn't synthesize a type class instance for <code>add_comm_monoid E</code>. Why is that? I thought <code>inner_product_space</code> extends <code>normed_group</code>. What do I have to do to fix this?</p>
</li>
<li>
<p>Lean doesn't like my use of the<code>âŸªÂ·, Â·âŸ«</code> notation here. It seems to work fine if I put the example directly in the <a href="https://leanprover-community.github.io/mathlib_docs/analysis/normed_space/inner_product.html#top">analysis.normed_space.inner_product</a> file. How do I use the notation outside that file?</p>
</li>
</ol>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">analysis.normed_space.inner_product</span> <span class="n">data.complex.is_R_or_C</span>

<span class="n">open_locale</span> <span class="n">big_operators</span>

<span class="kd">variables</span> <span class="o">{</span><span class="bp">ğ•œ</span> <span class="n">E</span> <span class="n">Î¹</span><span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">is_R_or_C</span> <span class="bp">ğ•œ</span><span class="o">]</span>  <span class="o">[</span><span class="n">inner_product_space</span> <span class="bp">ğ•œ</span> <span class="n">E</span><span class="o">]</span> <span class="o">[</span><span class="n">complete_space</span> <span class="n">E</span><span class="o">]</span>

<span class="kd">example</span> <span class="o">{</span><span class="n">Î¹</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">finset</span> <span class="n">Î¹</span><span class="o">)</span> <span class="o">[</span><span class="n">normed_group</span> <span class="n">E</span><span class="o">]</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">Î¹</span> <span class="bp">â†’</span> <span class="n">E</span><span class="o">)</span> <span class="o">:</span> <span class="n">E</span> <span class="o">:=</span>  <span class="bp">âˆ‘</span> <span class="n">i</span> <span class="k">in</span> <span class="n">s</span><span class="o">,</span> <span class="n">f</span> <span class="n">i</span>

<span class="kd">example</span> <span class="o">{</span><span class="n">Î¹</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">finset</span> <span class="n">Î¹</span><span class="o">)</span> <span class="o">[</span><span class="n">normed_group</span> <span class="n">E</span><span class="o">]</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">Î¹</span> <span class="bp">â†’</span> <span class="n">E</span><span class="o">)</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">E</span><span class="o">)</span> <span class="o">:</span> <span class="n">E</span> <span class="o">:=</span>
<span class="n">x</span> <span class="bp">-</span>  <span class="bp">âˆ‘</span> <span class="n">i</span> <span class="k">in</span> <span class="n">s</span><span class="o">,</span> <span class="bp">âŸª</span><span class="n">x</span><span class="o">,</span> <span class="n">f</span> <span class="n">i</span><span class="bp">âŸ«</span> <span class="bp">â€¢</span> <span class="o">(</span><span class="n">f</span> <span class="n">i</span><span class="o">)</span> <span class="c1">-- doesn't work.</span>
</code></pre></div>



<a name="243007662"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Inner%20product%20spaces/near/243007662" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Inner.20product.20spaces.html#243007662">(Jun 17 2021 at 12:08)</a>:</h4>
<p>Notation: </p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">localized</span> <span class="s2">"notation `âŸª`x`, `y`âŸ«` := @inner â„ _ _ x y"</span> <span class="k">in</span> <span class="n">real_inner_product_space</span>
<span class="n">localized</span> <span class="s2">"notation `âŸª`x`, `y`âŸ«` := @inner â„‚ _ _ x y"</span> <span class="k">in</span> <span class="n">complex_inner_product_space</span>
</code></pre></div>
<p>means "if you want to use this notation, write <code>open_locale real_inner_product_space</code> resp <code>complex_inner_product_space</code> -- but do you want to be linear or sesquilinear?</p>



<a name="243009706"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Inner%20product%20spaces/near/243009706" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gihan Marasingha <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Inner.20product.20spaces.html#243009706">(Jun 17 2021 at 12:28)</a>:</h4>
<p>Thanks. I suppose sesquilinear for Bessel's inequality.</p>
<p>As far as I can tell, the code at <a href="https://leanprover-community.github.io/mathlib_docs/analysis/normed_space/inner_product.html#properties-of-inner-product-spaces">analysis.normed_space.inner_product#properties-of-inner-product-spaces</a> uses the <code>âŸªÂ·, Â·âŸ«</code> notion for both real and complex inner product spaces. I've found that stealing the line:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">local</span> <span class="kd">notation</span> <span class="bp">`âŸª`</span><span class="n">x</span><span class="bp">`</span><span class="o">,</span> <span class="bp">`</span><span class="n">y</span><span class="bp">`âŸ«`</span> <span class="o">:=</span> <span class="bp">@</span><span class="n">inner</span> <span class="bp">ğ•œ</span> <span class="n">_</span> <span class="n">_</span> <span class="n">x</span> <span class="n">y</span>
</code></pre></div>
<p>just above my example makes Lean stop complaining. Hopefully that's the right thing to do here!</p>



<a name="243012404"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Inner%20product%20spaces/near/243012404" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Inner.20product.20spaces.html#243012404">(Jun 17 2021 at 12:55)</a>:</h4>
<p>Aah yes, this seems to be the trick used on line 151 of the file. Nice!</p>



<a name="243012459"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Inner%20product%20spaces/near/243012459" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Inner.20product.20spaces.html#243012459">(Jun 17 2021 at 12:55)</a>:</h4>
<p>I couldn't understand your other question. Can you show me the error?</p>



<a name="243013141"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Inner%20product%20spaces/near/243013141" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> RÃ©my Degenne <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Inner.20product.20spaces.html#243013141">(Jun 17 2021 at 13:01)</a>:</h4>
<p>Nothing in the examples mentions <code>ğ•œ</code>, hence that type and all instances that depend on it are not in the context. If you look at the context in the first example, there is no <code>inner_product_space ğ•œ E</code></p>



<a name="243013239"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Inner%20product%20spaces/near/243013239" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> RÃ©my Degenne <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Inner.20product.20spaces.html#243013239">(Jun 17 2021 at 13:01)</a>:</h4>
<p>This works:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">analysis.normed_space.inner_product</span> <span class="n">data.complex.is_R_or_C</span>

<span class="n">open_locale</span> <span class="n">big_operators</span>

<span class="kd">variables</span> <span class="o">{</span><span class="bp">ğ•œ</span> <span class="n">E</span> <span class="n">Î¹</span><span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">is_R_or_C</span> <span class="bp">ğ•œ</span><span class="o">]</span>  <span class="o">[</span><span class="n">inner_product_space</span> <span class="bp">ğ•œ</span> <span class="n">E</span><span class="o">]</span> <span class="o">[</span><span class="n">complete_space</span> <span class="n">E</span><span class="o">]</span>

<span class="kn">include</span> <span class="bp">ğ•œ</span>
<span class="kd">example</span> <span class="o">{</span><span class="n">Î¹</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">finset</span> <span class="n">Î¹</span><span class="o">)</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">Î¹</span> <span class="bp">â†’</span> <span class="n">E</span><span class="o">)</span> <span class="o">:</span> <span class="n">E</span> <span class="o">:=</span>  <span class="bp">âˆ‘</span> <span class="n">i</span> <span class="k">in</span> <span class="n">s</span><span class="o">,</span> <span class="n">f</span> <span class="n">i</span>
<span class="kn">omit</span> <span class="bp">ğ•œ</span>
</code></pre></div>



<a name="243013318"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Inner%20product%20spaces/near/243013318" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> YaÃ«l Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Inner.20product.20spaces.html#243013318">(Jun 17 2021 at 13:02)</a>:</h4>
<p>I would advise against redefining the notation. Simply open the namespace.</p>



<a name="243013445"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Inner%20product%20spaces/near/243013445" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gihan Marasingha <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Inner.20product.20spaces.html#243013445">(Jun 17 2021 at 13:03)</a>:</h4>
<p>Thanks <span class="user-mention" data-user-id="350992">@RÃ©my Degenne</span> and <span class="user-mention" data-user-id="387244">@YaÃ«l Dillies</span>. That's working much better.</p>



<a name="243015812"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Inner%20product%20spaces/near/243015812" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gihan Marasingha <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Inner.20product.20spaces.html#243015812">(Jun 17 2021 at 13:20)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> as per <span class="user-mention" data-user-id="350992">@RÃ©my Degenne</span>'s comment, my error was that I hadn't included <code>ğ•œ</code> in the context so I wasn't really dealing with an instance of <code>inner_product_space ğ•œ E</code>!</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>