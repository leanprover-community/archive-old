---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/import.20all.20files.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/import.20all.20files.html">import all files</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="171974846"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/import%20all%20files/near/171974846" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/import.20all.20files.html#171974846">(Jul 29 2019 at 19:12)</a>:</h4>
<p>I want a file that imports all files in mathlib. I don't think that there is currently a good way to do that.</p>
<p>Shall I make a PR that for every folder in <code>src/</code> creates a file <code>all.lean</code> which imports all files in that folder?</p>



<a name="171975042"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/import%20all%20files/near/171975042" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Simon Hudon <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/import.20all.20files.html#171975042">(Jul 29 2019 at 19:15)</a>:</h4>
<p>What do you need that for?</p>



<a name="171975329"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/import%20all%20files/near/171975329" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/import.20all.20files.html#171975329">(Jul 29 2019 at 19:19)</a>:</h4>
<p>I want to write some commands to clean up stuff in mathlib. For example, I have a command now that detects all declarations in all imported files with an argument that is unused. This is often by mistake.</p>



<a name="171975726"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/import%20all%20files/near/171975726" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Simon Hudon <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/import.20all.20files.html#171975726">(Jul 29 2019 at 19:24)</a>:</h4>
<p>I wouldn't want to commit those <code>all</code> files in mathlib but you could write a command that generates them when you want to run that command. We can even get Travis to run it</p>



<a name="171975789"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/import%20all%20files/near/171975789" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/import.20all.20files.html#171975789">(Jul 29 2019 at 19:25)</a>:</h4>
<p>that is reasonable.</p>



<a name="171975912"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/import%20all%20files/near/171975912" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Simon Hudon <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/import.20all.20files.html#171975912">(Jul 29 2019 at 19:27)</a>:</h4>
<p>I would also like a command to cleanup those files please</p>



<a name="171977132"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/import%20all%20files/near/171977132" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/import.20all.20files.html#171977132">(Jul 29 2019 at 19:44)</a>:</h4>
<p><code>ls -R | grep all.*lean | xargs rm</code></p>



<a name="171978892"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/import%20all%20files/near/171978892" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Simon Hudon <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/import.20all.20files.html#171978892">(Jul 29 2019 at 20:06)</a>:</h4>
<p>If we use a sh/bash script to do the automation, that makes sense (almost) but if it's scripted from within Lean, let's do the deletion in Lean too</p>



<a name="171984486"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/import%20all%20files/near/171984486" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/import.20all.20files.html#171984486">(Jul 29 2019 at 21:18)</a>:</h4>
<p>I'm currently writing an sh script to making these <code>all.lean</code> files. Is there a way of doing it inside Lean? Using the io monad?</p>



<a name="171984858"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/import%20all%20files/near/171984858" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Simon Hudon <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/import.20all.20files.html#171984858">(Jul 29 2019 at 21:23)</a>:</h4>
<p>Yes, Lean has a file interface that you can use</p>



<a name="171987077"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/import%20all%20files/near/171987077" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/import.20all.20files.html#171987077">(Jul 29 2019 at 21:53)</a>:</h4>
<p>Is there actually anything wrong with having a permanent <code>all.lean</code>?</p>



<a name="171987318"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/import%20all%20files/near/171987318" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Simon Hudon <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/import.20all.20files.html#171987318">(Jul 29 2019 at 21:56)</a>:</h4>
<p>Yes, we need to update it routinely for it to be useful, that's not a useful maintenance burden to take on. Also, it doesn't go in the direction of minimizing dependencies. Finally, it's not a feature of mathlib, it's an implementation of a tool</p>



<a name="171987495"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/import%20all%20files/near/171987495" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/import.20all.20files.html#171987495">(Jul 29 2019 at 21:59)</a>:</h4>
<p>Ok! :-) Somehow I hadn't thought about the need to constantly update...</p>



<a name="171987733"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/import%20all%20files/near/171987733" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/import.20all.20files.html#171987733">(Jul 29 2019 at 22:02)</a>:</h4>
<p>See PR <a href="https://github.com/leanprover-community/mathlib/issues/1281" target="_blank" title="https://github.com/leanprover-community/mathlib/issues/1281">#1281</a>. If we ever decide to add the <code>all.lean</code> files to mathlib, we can also use the <code>mk_all</code> script to update.</p>



<a name="171988007"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/import%20all%20files/near/171988007" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Simon Hudon <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/import.20all.20files.html#171988007">(Jul 29 2019 at 22:06)</a>:</h4>
<p>Sorry, I feel like I'm being curt. It's just I think it's really not worth it. It's better to add <code>mk_all</code> in the build system so that we can be sure that they are up to date when we need them</p>



<a name="171988803"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/import%20all%20files/near/171988803" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/import.20all.20files.html#171988803">(Jul 29 2019 at 22:17)</a>:</h4>
<p>I'm fine with that.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>