---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/leanproject.20unable.20to.20import.20mathlib.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/leanproject.20unable.20to.20import.20mathlib.html">leanproject unable to import mathlib</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="216258676"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/leanproject%20unable%20to%20import%20mathlib/near/216258676" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Vaibhav Karve <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/leanproject.20unable.20to.20import.20mathlib.html#216258676">(Nov 10 2020 at 19:06)</a>:</h4>
<p>I have a mysterious error with leanproject.  My editor (emacs) is getting stuck on the <code>import tactic</code> line indefinitely.  Can someone help me debug this? So far I have tried <code>leanproject up</code> but it did not fix the issue.</p>
<p>My leanpkg.toml file:</p>
<div class="codehilite" data-code-language="TOML"><pre><span></span><code><span class="k">[package]</span>
<span class="n">name</span> <span class="o">=</span> <span class="s">"igl2020"</span>
<span class="n">version</span> <span class="o">=</span> <span class="s">"0.1"</span>
<span class="n">lean_version</span> <span class="o">=</span> <span class="s">"leanprover-community/lean:3.23.0"</span>
<span class="n">path</span> <span class="o">=</span> <span class="s">"src"</span>

<span class="k">[dependencies]</span>
<span class="n">mathlib</span> <span class="o">=</span> <span class="p">{</span><span class="n">git</span> <span class="o">=</span> <span class="s">"https://github.com/leanprover-community/mathlib"</span><span class="p">,</span> <span class="n">rev</span> <span class="o">=</span> <span class="s">"d3fff8a054f671e405ce5dd28ee6f1572e4336db"</span><span class="p">}</span>
</code></pre></div>
<p>My leanpkg.path file</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">builtin_path</span>
<span class="n">path</span> <span class="n">_target</span><span class="bp">/</span><span class="n">deps</span><span class="bp">/</span><span class="n">mathlib</span><span class="bp">/</span><span class="n">src</span>
<span class="n">path</span> <span class="bp">./</span><span class="n">src</span>
</code></pre></div>



<a name="216260840"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/leanproject%20unable%20to%20import%20mathlib/near/216260840" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/leanproject.20unable.20to.20import.20mathlib.html#216260840">(Nov 10 2020 at 19:21)</a>:</h4>
<p>Did <code>leanproject up</code> give an error message?</p>



<a name="216260986"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/leanproject%20unable%20to%20import%20mathlib/near/216260986" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Vaibhav Karve <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/leanproject.20unable.20to.20import.20mathlib.html#216260986">(Nov 10 2020 at 19:22)</a>:</h4>
<p>It seems to run a checkout but it ends on the line <code>Unknown archive format '/home/vaibhav/.mathlib/d3fff8a054f671e405ce5dd28ee6f1572e4336db.tar.xz'</code><br>
I don't know if that's unusual</p>



<a name="216261027"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/leanproject%20unable%20to%20import%20mathlib/near/216261027" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/leanproject.20unable.20to.20import.20mathlib.html#216261027">(Nov 10 2020 at 19:23)</a>:</h4>
<p>Ah, that is indeed bad.</p>



<a name="216261049"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/leanproject%20unable%20to%20import%20mathlib/near/216261049" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/leanproject.20unable.20to.20import.20mathlib.html#216261049">(Nov 10 2020 at 19:23)</a>:</h4>
<p>What OS are you using? You'll need a program that can extract <code>tar.xz</code> files.</p>



<a name="216261079"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/leanproject%20unable%20to%20import%20mathlib/near/216261079" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Vaibhav Karve <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/leanproject.20unable.20to.20import.20mathlib.html#216261079">(Nov 10 2020 at 19:23)</a>:</h4>
<p>Ubuntu</p>



<a name="216261189"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/leanproject%20unable%20to%20import%20mathlib/near/216261189" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Vaibhav Karve <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/leanproject.20unable.20to.20import.20mathlib.html#216261189">(Nov 10 2020 at 19:24)</a>:</h4>
<p>I have tar installed on my OS</p>



<a name="216261216"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/leanproject%20unable%20to%20import%20mathlib/near/216261216" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/leanproject.20unable.20to.20import.20mathlib.html#216261216">(Nov 10 2020 at 19:24)</a>:</h4>
<p>What version of Python are you using?</p>



<a name="216261382"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/leanproject%20unable%20to%20import%20mathlib/near/216261382" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Vaibhav Karve <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/leanproject.20unable.20to.20import.20mathlib.html#216261382">(Nov 10 2020 at 19:26)</a>:</h4>
<p>I just checked and seems that there is some mismatch there. I am on python version 3.8.5 but my pip is on version 20.2.4 (corresponding to python 3.9)</p>



<a name="216261805"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/leanproject%20unable%20to%20import%20mathlib/near/216261805" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/leanproject.20unable.20to.20import.20mathlib.html#216261805">(Nov 10 2020 at 19:29)</a>:</h4>
<p>I think <code>leanproject</code> uses Python's <code>shutil</code> standard library to extract archives. From my random googling it looks like <code>tar.xz</code> support was added in Python 3.5, so I'm not sure why you're having trouble.</p>



<a name="216263494"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/leanproject%20unable%20to%20import%20mathlib/near/216263494" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Vaibhav Karve <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/leanproject.20unable.20to.20import.20mathlib.html#216263494">(Nov 10 2020 at 19:40)</a>:</h4>
<p>Thanks for your help Bryan. I solved it -- though it  is not clear to me what the issue was.</p>
<ol>
<li>I deleted the <code>~/.mathlib</code> directory that leanproject was having trouble reading the <code>tar.xz</code> file from</li>
<li>I reinstalled mathlibtools using pip</li>
<li>I ran <code>leanproject up</code>. This time the error about the tar file did not show up.</li>
<li>Editor is now reading/importing file correctly. Problem solved <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span></li>
</ol>



<a name="216263548"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/leanproject%20unable%20to%20import%20mathlib/near/216263548" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Vaibhav Karve <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/leanproject.20unable.20to.20import.20mathlib.html#216263548">(Nov 10 2020 at 19:41)</a>:</h4>
<p><strong>!!SOLVED!!</strong></p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>