---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/fin.2Epred_above.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/fin.2Epred_above.html">fin.pred_above</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="225517647"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/fin.pred_above/near/225517647" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/fin.2Epred_above.html#225517647">(Feb 08 2021 at 09:11)</a>:</h4>
<p>We currently have a function <code>fin.pred_above p i h</code>, which sends <code>fin (n+1)</code> to <code>fin n</code>, by subtracting one if <code>p &lt; i</code>.</p>
<p>It's set up to take a proof that <code>h : p \ne i</code>. This seems really strange to me --- more natural would be to have a total function, which just sends both <code>p</code> and <code>p+1</code> to <code>p</code>.</p>
<p>Would anyone object if I tried to make this change? (Or know what would go horribly wrong elsewhere?)</p>



<a name="225518588"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/fin.pred_above/near/225518588" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/fin.2Epred_above.html#225518588">(Feb 08 2021 at 09:20)</a>:</h4>
<p>I've also noticed this. I think this is a good idea. But I guess you need to think about <code>n = 0</code>.</p>



<a name="225519075"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/fin.pred_above/near/225519075" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/fin.2Epred_above.html#225519075">(Feb 08 2021 at 09:25)</a>:</h4>
<p>Indeed. But I think that is only a matter of choosing between a hypothesis <code>0 &lt; n</code>, or sending <code>fin (n+2)</code> to <code>fin (n+1)</code>.</p>



<a name="225519147"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/fin.pred_above/near/225519147" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/fin.2Epred_above.html#225519147">(Feb 08 2021 at 09:26)</a>:</h4>
<p>My inclination is to use the former, to avoid DTT hell.</p>



<a name="225519151"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/fin.pred_above/near/225519151" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/fin.2Epred_above.html#225519151">(Feb 08 2021 at 09:26)</a>:</h4>
<p>yup, agreed</p>



<a name="225519155"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/fin.pred_above/near/225519155" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/fin.2Epred_above.html#225519155">(Feb 08 2021 at 09:26)</a>:</h4>
<p>In either case it's still a "total function".</p>



<a name="225519175"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/fin.pred_above/near/225519175" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/fin.2Epred_above.html#225519175">(Feb 08 2021 at 09:26)</a>:</h4>
<p>We could even consider using <code>[fact (0 &lt; n)]</code></p>



<a name="225519178"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/fin.pred_above/near/225519178" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/fin.2Epred_above.html#225519178">(Feb 08 2021 at 09:26)</a>:</h4>
<p>It looks like <code>pred_above</code> is not actually used much, so I might just go for it.</p>



<a name="225520283"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/fin.pred_above/near/225520283" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/fin.2Epred_above.html#225520283">(Feb 08 2021 at 09:38)</a>:</h4>
<p><del>I think a better approach is to have <code>p : fin n</code>, and <code>i : fin (n+1)</code>, and then subtract one if <code>p &lt; i</code>. That ensures both that <code>n \ne 0</code>, and that subtraction actually occurs somewhere.</del></p>



<a name="225562945"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/fin.pred_above/near/225562945" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/fin.2Epred_above.html#225562945">(Feb 08 2021 at 15:47)</a>:</h4>
<p>The one downside to this is that you lose the "injectivity" of <code>fin.pred_above</code>.</p>



<a name="225562975"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/fin.pred_above/near/225562975" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/fin.2Epred_above.html#225562975">(Feb 08 2021 at 15:47)</a>:</h4>
<p>And if one was to change <code>fin.pred_above</code>, what about <code>fin.succ_above</code>?</p>



<a name="225567757"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/fin.pred_above/near/225567757" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/fin.2Epred_above.html#225567757">(Feb 08 2021 at 16:19)</a>:</h4>
<p>I agree that this should be made total (at the very least, the total version should exist).</p>
<p>You don't really lose the "injectivity", it will still hold under the assumptions that your input is not equal to <code>i</code>, and these inequalities must also appear in any current statement of "injectivity".</p>



<a name="225612682"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/fin.pred_above/near/225612682" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/fin.2Epred_above.html#225612682">(Feb 08 2021 at 21:40)</a>:</h4>
<p>As far as I can see, <code>fin.succ_above</code> is already as it should be.</p>



<a name="225612742"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/fin.pred_above/near/225612742" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/fin.2Epred_above.html#225612742">(Feb 08 2021 at 21:41)</a>:</h4>
<p>I got hung up last night on some lemmas about insert_nth and remove_nth that used <code>pred_above</code>, but I think I see how to handle them now.</p>



<a name="225734003"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/fin.pred_above/near/225734003" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/fin.2Epred_above.html#225734003">(Feb 09 2021 at 18:24)</a>:</h4>
<p>What exactly do you suggest to do with <code>n = 0</code>?</p>



<a name="225766819"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/fin.pred_above/near/225766819" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/fin.2Epred_above.html#225766819">(Feb 09 2021 at 22:22)</a>:</h4>
<p>I've made a PR now, as <a href="https://github.com/leanprover-community/mathlib/issues/6125">#6125</a>. To handle <code>n = 0</code>, the change I've made is that <code>p : fin n</code> while <code>i : fin (n + 1)</code>, and <code>p.pred_above i</code> produces something in <code>fin n</code>. Notice in particular that the original <code>pred_above</code> allowed <code>p : fin (n+1)</code>. (This is fine if we insist <code>p \ne i</code>, but not if we want a total function, and this is also what causes the problem at <code>n = 0</code>.)</p>



<a name="225769823"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/fin.pred_above/near/225769823" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/fin.2Epred_above.html#225769823">(Feb 09 2021 at 22:52)</a>:</h4>
<p>5^3*7^2</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>