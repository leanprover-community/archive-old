---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/Documentation.20formatting.20in.20tactic.2Elocalized.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Documentation.20formatting.20in.20tactic.2Elocalized.html">Documentation formatting in tactic.localized</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="215048025"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Documentation%20formatting%20in%20tactic.localized/near/215048025" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gihan Marasingha <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Documentation.20formatting.20in.20tactic.2Elocalized.html#215048025">(Oct 30 2020 at 01:27)</a>:</h4>
<p>Sorry not sure how to submit a bug report, but I think there's a little issue in the documentation for <code>tactic.localized</code>. The source uses 'triple backquote lean' for inline code, which actually inserts the word 'lean' in the HTML version of the documentation: <a href="https://leanprover-community.github.io/mathlib_docs/tactic/localized.html">https://leanprover-community.github.io/mathlib_docs/tactic/localized.html</a></p>



<a name="215048540"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Documentation%20formatting%20in%20tactic.localized/near/215048540" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Documentation.20formatting.20in.20tactic.2Elocalized.html#215048540">(Oct 30 2020 at 01:39)</a>:</h4>
<p>Ah, from other occurrences of <code>```lean</code> it seems like the syntax needs a newline before (and after?) the code snippet for it to work.</p>



<a name="215048704"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Documentation%20formatting%20in%20tactic.localized/near/215048704" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Documentation.20formatting.20in.20tactic.2Elocalized.html#215048704">(Oct 30 2020 at 01:43)</a>:</h4>
<p>No, scratch that. The problem seems to be that the code blocks are indented?</p>



<a name="215049130"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Documentation%20formatting%20in%20tactic.localized/near/215049130" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Documentation.20formatting.20in.20tactic.2Elocalized.html#215049130">(Oct 30 2020 at 01:53)</a>:</h4>
<p>There is definitely something weird going on. The documentation of <a href="https://leanprover-community.github.io/mathlib_docs/find/simps_get_raw_projections">docs#simps_get_raw_projections</a> contains code snippets that start with <code>lean</code>, even though the doc-string source doesn't contain <code>```lean</code>.</p>



<a name="215049189"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Documentation%20formatting%20in%20tactic.localized/near/215049189" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Documentation.20formatting.20in.20tactic.2Elocalized.html#215049189">(Oct 30 2020 at 01:54)</a>:</h4>
<p><span class="user-mention" data-user-id="110596">@Rob Lewis</span> any ideas?</p>



<a name="215049190"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Documentation%20formatting%20in%20tactic.localized/near/215049190" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Documentation.20formatting.20in.20tactic.2Elocalized.html#215049190">(Oct 30 2020 at 01:54)</a>:</h4>
<p>If I remember correctly something in <code>doc-gen</code> converts <code> ``` </code> to <code> ```lean </code> .</p>



<a name="215049204"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Documentation%20formatting%20in%20tactic.localized/near/215049204" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Documentation.20formatting.20in.20tactic.2Elocalized.html#215049204">(Oct 30 2020 at 01:55)</a>:</h4>
<p>Gabriel mentioned it in <a href="https://github.com/leanprover-community/doc-gen/issues/86#issuecomment-702602422">this issue comment</a>.</p>



<a name="215049225"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Documentation%20formatting%20in%20tactic.localized/near/215049225" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Documentation.20formatting.20in.20tactic.2Elocalized.html#215049225">(Oct 30 2020 at 01:55)</a>:</h4>
<p>This is definitely a fine place to report bugs like this. I also opened <a href="https://github.com/leanprover-community/doc-gen/issues/93">doc-gen#93</a> so we don't forget.</p>



<a name="215049229"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Documentation%20formatting%20in%20tactic.localized/near/215049229" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Documentation.20formatting.20in.20tactic.2Elocalized.html#215049229">(Oct 30 2020 at 01:55)</a>:</h4>
<p>I think that's preprocessing in Lean, not in doc-gen.</p>



<a name="215049301"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Documentation%20formatting%20in%20tactic.localized/near/215049301" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Documentation.20formatting.20in.20tactic.2Elocalized.html#215049301">(Oct 30 2020 at 01:57)</a>:</h4>
<p>Oh, right. I forgot about that.</p>



<a name="215049307"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Documentation%20formatting%20in%20tactic.localized/near/215049307" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Documentation.20formatting.20in.20tactic.2Elocalized.html#215049307">(Oct 30 2020 at 01:57)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">tactic.simps</span>

<span class="kn">open</span> <span class="n">tactic</span>

<span class="kd">run_cmd</span> <span class="n">tactic.doc_string</span> <span class="bp">`</span><span class="n">simps_get_raw_projections</span> <span class="bp">&gt;&gt;=</span> <span class="n">trace</span>
</code></pre></div>



<a name="215049531"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Documentation%20formatting%20in%20tactic.localized/near/215049531" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Documentation.20formatting.20in.20tactic.2Elocalized.html#215049531">(Oct 30 2020 at 02:01)</a>:</h4>
<p>This seems like a bug in the markdown processing. The indented fenced code block is getting processed as inline code.</p>



<a name="215049603"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Documentation%20formatting%20in%20tactic.localized/near/215049603" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Documentation.20formatting.20in.20tactic.2Elocalized.html#215049603">(Oct 30 2020 at 02:02)</a>:</h4>
<p>Weren't we talking about switching from <code>markdown2</code> to a different package? Or was it the opposite, did we switch the website to <code>markdown2</code>?</p>



<a name="215049724"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Documentation%20formatting%20in%20tactic.localized/near/215049724" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Documentation.20formatting.20in.20tactic.2Elocalized.html#215049724">(Oct 30 2020 at 02:05)</a>:</h4>
<p>Yeah, looks like a markdown2 bug.</p>
<div class="codehilite" data-code-language="Python"><pre><span></span><code><span class="kn">import</span> <span class="nn">markdown2</span>
<span class="kn">import</span> <span class="nn">mistletoe</span>

<span class="n">s</span> <span class="o">=</span> <span class="s2">"""</span>
<span class="s2">* Here is a list</span>
<span class="s2">  ```python</span>
<span class="s2">  def s = 2</span>
<span class="s2">  ```</span>
<span class="s2">"""</span>

<span class="nb">print</span><span class="p">(</span><span class="n">markdown2</span><span class="o">.</span><span class="n">markdown</span><span class="p">(</span><span class="n">s</span><span class="p">))</span>

<span class="nb">print</span><span class="p">(</span><span class="n">mistletoe</span><span class="o">.</span><span class="n">markdown</span><span class="p">(</span><span class="n">s</span><span class="p">))</span>
</code></pre></div>

<div class="codehilite" data-code-language="Text only"><pre><span></span><code>&lt;ul&gt;
&lt;li&gt;Here is a list
&lt;code&gt;python
def s = 2
&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;ul&gt;
&lt;li&gt;Here is a list
&lt;pre&gt;&lt;code class="language-python"&gt;def s = 2
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;/ul&gt;
</code></pre></div>



<a name="215049919"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Documentation%20formatting%20in%20tactic.localized/near/215049919" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Documentation.20formatting.20in.20tactic.2Elocalized.html#215049919">(Oct 30 2020 at 02:09)</a>:</h4>
<p>Is this related? <a href="https://github.com/trentm/python-markdown2/issues/263#issuecomment-313176533">https://github.com/trentm/python-markdown2/issues/263#issuecomment-313176533</a></p>



<a name="215049944"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Documentation%20formatting%20in%20tactic.localized/near/215049944" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Documentation.20formatting.20in.20tactic.2Elocalized.html#215049944">(Oct 30 2020 at 02:09)</a>:</h4>
<p>i.e. does <code>markdown2.markdown(s, extras=["fenced-code-blocks"])</code> work?</p>



<a name="215050109"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Documentation%20formatting%20in%20tactic.localized/near/215050109" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Documentation.20formatting.20in.20tactic.2Elocalized.html#215050109">(Oct 30 2020 at 02:12)</a>:</h4>
<p>Good point -- that was missing in my test, but we use <code>fenced-code-blocks</code> in doc-gen. Doesn't fix it.</p>
<div class="codehilite" data-code-language="Python"><pre><span></span><code><span class="kn">import</span> <span class="nn">markdown2</span>
<span class="kn">import</span> <span class="nn">mistletoe</span>

<span class="n">s</span> <span class="o">=</span> <span class="s2">"""</span>
<span class="s2">  ```python</span>
<span class="s2">  def s = 2</span>
<span class="s2">  ```</span>
<span class="s2">"""</span>

<span class="nb">print</span><span class="p">(</span><span class="n">markdown2</span><span class="o">.</span><span class="n">markdown</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">extras</span><span class="o">=</span><span class="p">[</span><span class="s1">'fenced-code-blocks'</span><span class="p">]))</span>

<span class="nb">print</span><span class="p">(</span><span class="n">mistletoe</span><span class="o">.</span><span class="n">markdown</span><span class="p">(</span><span class="n">s</span><span class="p">))</span>
</code></pre></div>

<div class="codehilite" data-code-language="Text only"><pre><span></span><code>&lt;p&gt;&lt;code&gt;python
  def s = 2
&lt;/code&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code class="language-python"&gt;def s = 2
&lt;/code&gt;&lt;/pre&gt;
</code></pre></div>



<a name="215149454"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Documentation%20formatting%20in%20tactic.localized/near/215149454" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Documentation.20formatting.20in.20tactic.2Elocalized.html#215149454">(Oct 30 2020 at 20:58)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib/issues/4842">#4842</a> for now. mistletoe isn't a drop in replacement for <code>markdown2</code>.</p>



<a name="215153935"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Documentation%20formatting%20in%20tactic.localized/near/215153935" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Documentation.20formatting.20in.20tactic.2Elocalized.html#215153935">(Oct 30 2020 at 21:40)</a>:</h4>
<p>So is it the indentation? I thought I saw an indented code snippet somewhere else where the generated doc was fine.</p>



<a name="215157253"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Documentation%20formatting%20in%20tactic.localized/near/215157253" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Documentation.20formatting.20in.20tactic.2Elocalized.html#215157253">(Oct 30 2020 at 22:16)</a>:</h4>
<p>A quick local test shows that <code>markdown2</code> with the <code>fenced-code-blocks</code> extra properly handles</p>
<div class="codehilite" data-code-language="markdown"><pre><span></span><code>```python
def foo():
  return 1
```
</code></pre></div>

<p>but not</p>
<div class="codehilite" data-code-language="markdown"><pre><span></span><code> ```python
 def foo():
   return 1
 ```
</code></pre></div>



<a name="215157987"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Documentation%20formatting%20in%20tactic.localized/near/215157987" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Documentation.20formatting.20in.20tactic.2Elocalized.html#215157987">(Oct 30 2020 at 22:26)</a>:</h4>
<p>I thought for a while that they were the same picture -- I just noticed the indentation!</p>



<a name="215158256"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Documentation%20formatting%20in%20tactic.localized/near/215158256" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Documentation.20formatting.20in.20tactic.2Elocalized.html#215158256">(Oct 30 2020 at 22:30)</a>:</h4>
<p><span class="user-mention" data-user-id="110596">@Rob Lewis</span> Would migrating <code>doc-gen</code> from mistletoe to markdown2 require a huge refactor?</p>



<a name="215158495"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Documentation%20formatting%20in%20tactic.localized/near/215158495" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Documentation.20formatting.20in.20tactic.2Elocalized.html#215158495">(Oct 30 2020 at 22:33)</a>:</h4>
<p>More just tedium figuring out how to replicate every markdown2 feature we're using.</p>



<a name="215158572"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Documentation%20formatting%20in%20tactic.localized/near/215158572" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Documentation.20formatting.20in.20tactic.2Elocalized.html#215158572">(Oct 30 2020 at 22:34)</a>:</h4>
<p>In particular the linkifiers need some attention.</p>



<a name="215159065"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Documentation%20formatting%20in%20tactic.localized/near/215159065" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Documentation.20formatting.20in.20tactic.2Elocalized.html#215159065">(Oct 30 2020 at 22:41)</a>:</h4>
<p>Possibly also worth considering pandoc... I was super lazy recently for my doc generating and just passed all the lean docstrings through pandoc</p>



<a name="215159124"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Documentation%20formatting%20in%20tactic.localized/near/215159124" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Lacker <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Documentation.20formatting.20in.20tactic.2Elocalized.html#215159124">(Oct 30 2020 at 22:42)</a>:</h4>
<p>is that actually valid markdown with the triple-ticks plus indentation? i don't think I would expect that to work</p>



<a name="215159140"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Documentation%20formatting%20in%20tactic.localized/near/215159140" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Lacker <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Documentation.20formatting.20in.20tactic.2Elocalized.html#215159140">(Oct 30 2020 at 22:42)</a>:</h4>
<p>I think once it's indented, then it isn't a code block, it's just inline code</p>



<a name="215159158"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Documentation%20formatting%20in%20tactic.localized/near/215159158" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Documentation.20formatting.20in.20tactic.2Elocalized.html#215159158">(Oct 30 2020 at 22:43)</a>:</h4>
<p>I mean there's like 4 markdown specs at least so "valid markdown" is itself a fun concept</p>



<a name="215159168"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Documentation%20formatting%20in%20tactic.localized/near/215159168" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Documentation.20formatting.20in.20tactic.2Elocalized.html#215159168">(Oct 30 2020 at 22:43)</a>:</h4>
<p>But pandoc agrees with what it looks like mistletoe thinks</p>



<a name="215159243"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Documentation%20formatting%20in%20tactic.localized/near/215159243" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Documentation.20formatting.20in.20tactic.2Elocalized.html#215159243">(Oct 30 2020 at 22:44)</a>:</h4>
<p>And produces...</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="bp">⊙</span>  <span class="n">pandoc</span> <span class="c1">--from markdown --to html &lt;&lt;&lt;'                                                                                                                                                        julian@Air ●</span>
  <span class="bp">```</span><span class="n">python</span>
  <span class="kd">def</span> <span class="n">s</span> <span class="bp">=</span> <span class="mi">2</span>
  <span class="bp">```'</span>
<span class="bp">&lt;</span><span class="n">div</span> <span class="kd">class</span><span class="bp">=</span><span class="s2">"sourceCode"</span> <span class="n">id</span><span class="bp">=</span><span class="s2">"cb1"</span><span class="bp">&gt;&lt;</span><span class="n">pre</span> <span class="kd">class</span><span class="bp">=</span><span class="s2">"sourceCode python"</span><span class="bp">&gt;&lt;</span><span class="n">code</span> <span class="kd">class</span><span class="bp">=</span><span class="s2">"sourceCode python"</span><span class="bp">&gt;&lt;</span><span class="n">span</span> <span class="n">id</span><span class="bp">=</span><span class="s2">"cb1-1"</span><span class="bp">&gt;&lt;</span><span class="n">a</span> <span class="n">href</span><span class="bp">=</span><span class="s2">"#cb1-1"</span> <span class="n">aria</span><span class="bp">-</span><span class="n">hidden</span><span class="bp">=</span><span class="s2">"true"</span><span class="bp">&gt;&lt;/</span><span class="n">a</span><span class="bp">&gt;&lt;</span><span class="n">span</span> <span class="kd">class</span><span class="bp">=</span><span class="s2">"kw"</span><span class="bp">&gt;</span><span class="kd">def</span><span class="bp">&lt;/</span><span class="n">span</span><span class="bp">&gt;</span> <span class="n">s</span> <span class="bp">&lt;</span><span class="n">span</span> <span class="kd">class</span><span class="bp">=</span><span class="s2">"op"</span><span class="bp">&gt;=&lt;/</span><span class="n">span</span><span class="bp">&gt;</span> <span class="bp">&lt;</span><span class="n">span</span> <span class="kd">class</span><span class="bp">=</span><span class="s2">"dv"</span><span class="bp">&gt;</span><span class="mi">2</span><span class="bp">&lt;/</span><span class="n">span</span><span class="bp">&gt;&lt;/</span><span class="n">span</span><span class="bp">&gt;&lt;/</span><span class="n">code</span><span class="bp">&gt;&lt;/</span><span class="n">pre</span><span class="bp">&gt;&lt;/</span><span class="n">div</span><span class="bp">&gt;</span>
</code></pre></div>



<a name="215159279"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Documentation%20formatting%20in%20tactic.localized/near/215159279" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Lacker <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Documentation.20formatting.20in.20tactic.2Elocalized.html#215159279">(Oct 30 2020 at 22:45)</a>:</h4>
<p>let's just unindent the markdown in <code>src/tactic/localized.lean</code></p>



<a name="215159347"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Documentation%20formatting%20in%20tactic.localized/near/215159347" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Lacker <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Documentation.20formatting.20in.20tactic.2Elocalized.html#215159347">(Oct 30 2020 at 22:46)</a>:</h4>
<p>rather than migrating markdown processors</p>



<a name="215159359"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Documentation%20formatting%20in%20tactic.localized/near/215159359" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Documentation.20formatting.20in.20tactic.2Elocalized.html#215159359">(Oct 30 2020 at 22:46)</a>:</h4>
<p>The PR did that looks like, so all this was some longer term thing.</p>



<a name="215159401"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Documentation%20formatting%20in%20tactic.localized/near/215159401" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Documentation.20formatting.20in.20tactic.2Elocalized.html#215159401">(Oct 30 2020 at 22:47)</a>:</h4>
<p>It'd be good to have consistent markdown processing on the community website (which uses mistletoe) and the API docs in the long term.</p>



<a name="215163920"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Documentation%20formatting%20in%20tactic.localized/near/215163920" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Documentation.20formatting.20in.20tactic.2Elocalized.html#215163920">(Oct 30 2020 at 23:58)</a>:</h4>
<p>In principle there's a semantic difference. The code blocks appeared in a list. markdown2 seems to forbid this, you have to break the list indentation to insert a code block.</p>



<a name="215163941"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Documentation%20formatting%20in%20tactic.localized/near/215163941" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Documentation.20formatting.20in.20tactic.2Elocalized.html#215163941">(Oct 30 2020 at 23:59)</a>:</h4>
<p>That said, I have no attachment to any particular markdown flavor or processor as long as it supports the features we want. And as Bryan says it would be a big plus if the website and doc-gen used the same one.</p>



<a name="215164403"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Documentation%20formatting%20in%20tactic.localized/near/215164403" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Documentation.20formatting.20in.20tactic.2Elocalized.html#215164403">(Oct 31 2020 at 00:08)</a>:</h4>
<p>Well, it gets trickier. This example seems to be handled correctly: <a href="https://github.com/leanprover-community/mathlib/blob/cc7f06b/src/algebra/group/to_additive.lean#L260">https://github.com/leanprover-community/mathlib/blob/cc7f06b/src/algebra/group/to_additive.lean#L260</a></p>



<a name="215164405"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Documentation%20formatting%20in%20tactic.localized/near/215164405" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Documentation.20formatting.20in.20tactic.2Elocalized.html#215164405">(Oct 31 2020 at 00:08)</a>:</h4>
<p><a href="https://leanprover-community.github.io/mathlib_docs/algebra/group/to_additive.html#to_additive.attr">https://leanprover-community.github.io/mathlib_docs/algebra/group/to_additive.html#to_additive.attr</a></p>



<a name="215170464"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Documentation%20formatting%20in%20tactic.localized/near/215170464" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Documentation.20formatting.20in.20tactic.2Elocalized.html#215170464">(Oct 31 2020 at 02:43)</a>:</h4>
<p>Yes, that was one example where I found that the code was indented and the markdown happened correctly. Another example is in the module doc string of <a href="https://leanprover-community.github.io/mathlib_docs/tactic/unfold_cases.html">https://leanprover-community.github.io/mathlib_docs/tactic/unfold_cases.html</a></p>
<p>Maybe it's related to a newline after the doc string?</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>