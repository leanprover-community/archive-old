---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/diamond.3A.20galois_field.20algebras.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/diamond.3A.20galois_field.20algebras.html">diamond: galois_field algebras</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="287427871"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/diamond%3A%20galois_field%20algebras/near/287427871" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/diamond.3A.20galois_field.20algebras.html#287427871">(Jun 25 2022 at 10:34)</a>:</h4>
<p>We have that : <code>zmod.algebra (galois_field p n) p</code> is not defeq to <code>splitting_field.algebra (X ^ p ^ n - X) = galois_field.algebra</code> (and I think this is a known issue). I can't prove the propositional equality; I can't figure out a way to case so that we can actually use the definition of <code>splitting_field_aux</code>. How should we deal with this? I tried disabling the instance <a href="https://leanprover-community.github.io/mathlib_docs/find/galois_field.algebra">docs#galois_field.algebra</a>, but I can't seem to figure out how to as many of the results about splitting fields implicitly use this instance (and I don't have the propeq). I also guess there's not a <code>subsingleton</code> instance for this sort of algebra, due to automorphisms.</p>



<a name="287427875"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/diamond%3A%20galois_field%20algebras/near/287427875" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/diamond.3A.20galois_field.20algebras.html#287427875">(Jun 25 2022 at 10:34)</a>:</h4>
<p>this came up in <a href="#narrow/stream/217875-Is-there-code-for-X.3F/topic/Algebraic.20Conjugate.20over.20Finite.20Fields/near/287426797">https://leanprover.zulipchat.com/#narrow/stream/217875-Is-there-code-for-X.3F/topic/Algebraic.20Conjugate.20over.20Finite.20Fields/near/287426797</a></p>



<a name="287428626"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/diamond%3A%20galois_field%20algebras/near/287428626" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/diamond.3A.20galois_field.20algebras.html#287428626">(Jun 25 2022 at 10:51)</a>:</h4>
<p>If there were an instance of <code>subsingleton (algebra (zmod n) R)</code> (which there should be, I don't know if it's there already) then <code>convert</code> might be able to do some of the heavy lifting for you. 1 has to go to 1 and that uniquely determines the ring hom from zmod n.</p>



<a name="287429477"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/diamond%3A%20galois_field%20algebras/near/287429477" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/diamond.3A.20galois_field.20algebras.html#287429477">(Jun 25 2022 at 11:13)</a>:</h4>
<p>oh, 1 does have to go to 1! I'll try make that instance, I don't think it exists</p>



<a name="287431599"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/diamond%3A%20galois_field%20algebras/near/287431599" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/diamond.3A.20galois_field.20algebras.html#287431599">(Jun 25 2022 at 12:07)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib/pull/14946">#14946</a> has the subsingleton instance; I'll make the followup PR when this compiles</p>



<a name="287433707"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/diamond%3A%20galois_field%20algebras/near/287433707" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/diamond.3A.20galois_field.20algebras.html#287433707">(Jun 25 2022 at 12:54)</a>:</h4>
<p>and <a href="https://github.com/leanprover-community/mathlib/pull/14947">#14947</a> fixes everything, hopefully, but maybe not the best solution</p>



<a name="287439965"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/diamond%3A%20galois_field%20algebras/near/287439965" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/diamond.3A.20galois_field.20algebras.html#287439965">(Jun 25 2022 at 15:10)</a>:</h4>
<p>Note that the zmod algebra diamond runs much deeper:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">data.zmod.algebra</span>
<span class="c1">-- fails :(</span>
<span class="kd">example</span> <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="n">algebra.id</span> <span class="o">(</span><span class="n">zmod</span> <span class="n">p</span><span class="o">)</span> <span class="bp">=</span> <span class="n">zmod.algebra</span> <span class="n">_</span> <span class="n">p</span> <span class="o">:=</span> <span class="n">rfl</span>
</code></pre></div>



<a name="287440154"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/diamond%3A%20galois_field%20algebras/near/287440154" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/diamond.3A.20galois_field.20algebras.html#287440154">(Jun 25 2022 at 15:13)</a>:</h4>
<p>We probably shouldn't think too hard about that until we fix the int and nat diamonds</p>



<a name="287490567"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/diamond%3A%20galois_field%20algebras/near/287490567" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/diamond.3A.20galois_field.20algebras.html#287490567">(Jun 26 2022 at 12:20)</a>:</h4>
<p><a href="https://leanprover-community.github.io/mathlib_docs/find/zmod.algebra">docs#zmod.algebra</a> ← for the lazy</p>



<a name="287490638"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/diamond%3A%20galois_field%20algebras/near/287490638" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/diamond.3A.20galois_field.20algebras.html#287490638">(Jun 26 2022 at 12:22)</a>:</h4>
<p>Would it be sufficient (help) to extend <a href="https://leanprover-community.github.io/mathlib_docs/find/char_p">docs#char_p</a> with a <code>of_zmod</code>/<code>zmod_smul</code> field? Perhaps <code>fin</code> instead of <code>zmod</code>, to avoid having to do even more import hierarchy restructuring.</p>



<a name="287490997"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/diamond%3A%20galois_field%20algebras/near/287490997" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/diamond.3A.20galois_field.20algebras.html#287490997">(Jun 26 2022 at 12:31)</a>:</h4>
<p>The main drawback I foresee is that we break the defeq of <code>algebra_map (zmod n) R = (coe : zmod n → R)</code>. I don't think that's likely to undermine a lot of existing results, so I think it's a fine solution to add these fields to <code>char_p</code>.</p>



<a name="287493798"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/diamond%3A%20galois_field%20algebras/near/287493798" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/diamond.3A.20galois_field.20algebras.html#287493798">(Jun 26 2022 at 13:36)</a>:</h4>
<p>I think we should use <code>zmod</code>, <del>I just tried removing the import to <code>char_p.basic</code> in <code>zmod.basic</code> and the only thing it broke seemed irrelevant (<a href="https://leanprover-community.github.io/mathlib_docs/find/function.left_inverse.right_inverse_of_card_le">docs#function.left_inverse.right_inverse_of_card_le</a>)</del> (there's some weird transitive import stuff goin on, as <code>char_p</code> stays imported, but we lose something else?); regardless of that, how will we deal with the 0 case? I think an <code>ite</code>/pattern match in the definition will only cause more problems</p>



<a name="287493884"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/diamond%3A%20galois_field%20algebras/near/287493884" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/diamond.3A.20galois_field.20algebras.html#287493884">(Jun 26 2022 at 13:38)</a>:</h4>
<p>I'm happy to try do this refactor, but I'm not sure about the full list of steps - we redefine this algebra instance to use the <code>of_zmod/zmod_smul</code> field, and then what? For example, how concretely do we solve the <code>algebra.id</code> diamond; do we set the <code>zmod.char_p</code> instance to use the <code>zmod_smul</code> equal to the <code>algebra.id</code> one?</p>



<a name="287548243"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/diamond%3A%20galois_field%20algebras/near/287548243" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/diamond.3A.20galois_field.20algebras.html#287548243">(Jun 27 2022 at 08:42)</a>:</h4>
<p>That is indeed basically the idea: we avoid diamonds by ensuring the data-carrying fields of <a href="https://leanprover-community.github.io/mathlib_docs/find/algebra.id">docs#algebra.id</a> and <a href="https://leanprover-community.github.io/mathlib_docs/find/zmod.algebra">docs#zmod.algebra</a> coincide. Because the fields in the (new) <code>zmod.algebra</code> come from <code>zmod.char_p</code>, we need to supply new values coming from <code>algebra.id</code>. In particular, we should set <code>of_zmod := id</code> and <code>zmod_smul := (*)</code>.</p>



<a name="287548366"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/diamond%3A%20galois_field%20algebras/near/287548366" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/diamond.3A.20galois_field.20algebras.html#287548366">(Jun 27 2022 at 08:43)</a>:</h4>
<p>Do we need <code>zmod_smul</code>?</p>



<a name="287548452"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/diamond%3A%20galois_field%20algebras/near/287548452" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/diamond.3A.20galois_field.20algebras.html#287548452">(Jun 27 2022 at 08:44)</a>:</h4>
<p>Oh, I guess it matches what we do for nat and int</p>



<a name="287548783"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/diamond%3A%20galois_field%20algebras/near/287548783" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/diamond.3A.20galois_field.20algebras.html#287548783">(Jun 27 2022 at 08:48)</a>:</h4>
<p>I don't <em>know</em> that we will need it in this case, but I expect it (pretty likely that the case distinction on <code>zmod 0</code> vs <code>zmod (n+1)</code> happens in a different place). In any case, might as well incorporate it and save some work for when we do need it.</p>



<a name="289178755"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/diamond%3A%20galois_field%20algebras/near/289178755" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/diamond.3A.20galois_field.20algebras.html#289178755">(Jul 11 2022 at 11:52)</a>:</h4>
<p>hmm, I finally started trying to do it in earnest and realised one thing that's different here from the other refactors: <code>char_p</code> was a <code>Prop</code> before.</p>



<a name="289178786"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/diamond%3A%20galois_field%20algebras/near/289178786" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/diamond.3A.20galois_field.20algebras.html#289178786">(Jul 11 2022 at 11:53)</a>:</h4>
<p>I'm not sure how to deal with that apart from sprinkling <code>nonempty</code>s everywhere, which doesn't seem nice</p>



<a name="289179443"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/diamond%3A%20galois_field%20algebras/near/289179443" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/diamond.3A.20galois_field.20algebras.html#289179443">(Jul 11 2022 at 12:00)</a>:</h4>
<p>Where exactly do you want to put the <code>nonempty</code>? Because we can't solve diamonds by putting the data in <code>nonempty</code> (the diamond would then be <code>expected_coe =?= nonempty.some (nonempty.mk expected_coe)</code>).</p>



<a name="289179484"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/diamond%3A%20galois_field%20algebras/near/289179484" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/diamond.3A.20galois_field.20algebras.html#289179484">(Jul 11 2022 at 12:01)</a>:</h4>
<p>So indeed we'd have to turn <code>char_p</code> into something living in <code>Type*</code>.</p>



<a name="289180464"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/diamond%3A%20galois_field%20algebras/near/289180464" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/diamond.3A.20galois_field.20algebras.html#289180464">(Jul 11 2022 at 12:11)</a>:</h4>
<p>I meant for example for theorems such as <a href="https://leanprover-community.github.io/mathlib_docs/find/char_p.exists">docs#char_p.exists</a></p>



<a name="289180569"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/diamond%3A%20galois_field%20algebras/near/289180569" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/diamond.3A.20galois_field.20algebras.html#289180569">(Jul 11 2022 at 12:12)</a>:</h4>
<p>I wonder if there should be a "weak" <code>char_p</code> (current version) and a "strong" one (new version), with only the "strong" one providing the <code>algebra</code> instance</p>



<a name="289180613"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/diamond%3A%20galois_field%20algebras/near/289180613" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/diamond.3A.20galois_field.20algebras.html#289180613">(Jul 11 2022 at 12:13)</a>:</h4>
<p>that seems very maths-unfriendly though</p>



<a name="289180650"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/diamond%3A%20galois_field%20algebras/near/289180650" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/diamond.3A.20galois_field.20algebras.html#289180650">(Jul 11 2022 at 12:13)</a>:</h4>
<p>Can't the weak one simply be <code>nonempty strong_char_p</code>?</p>



<a name="289180654"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/diamond%3A%20galois_field%20algebras/near/289180654" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/diamond.3A.20galois_field.20algebras.html#289180654">(Jul 11 2022 at 12:13)</a>:</h4>
<p>we could also try and replace all non-tc uses of <code>char_p</code> with <code>ring_char</code>, but that's also odd</p>



<a name="289214677"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/diamond%3A%20galois_field%20algebras/near/289214677" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/diamond.3A.20galois_field.20algebras.html#289214677">(Jul 11 2022 at 16:13)</a>:</h4>
<p>Is making <code>char_p X p</code> carry data any different to just making users write <code>algebra (zmod p) X</code> instead?</p>



<a name="289216013"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/diamond%3A%20galois_field%20algebras/near/289216013" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/diamond.3A.20galois_field.20algebras.html#289216013">(Jul 11 2022 at 16:24)</a>:</h4>
<p>not really, actually, and I think that's in some ways the approach taken already in some files</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>