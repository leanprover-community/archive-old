---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/Instance.20files.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Instance.20files.html">Instance files</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="282760358"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Instance%20files/near/282760358" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Instance.20files.html#282760358">(May 18 2022 at 09:15)</a>:</h4>
<p>Can we please stop creating concrete type-specific files? This just calls for weird import loops.</p>



<a name="282760661"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Instance%20files/near/282760661" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Instance.20files.html#282760661">(May 18 2022 at 09:18)</a>:</h4>
<p>Don't we have files containing all instances for <code>punit</code> and <code>pi</code>? Won't it just be the same as those? Oh I see -- the issue is that you want it to be a monoid so you need to import it early, but then you want it to be a totally ordered normed vector space so you need to import a load of stuff before it :-/</p>



<a name="282760679"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Instance%20files/near/282760679" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Instance.20files.html#282760679">(May 18 2022 at 09:19)</a>:</h4>
<p>Eric, I mean files like <code>algebra.punit_instances</code></p>



<a name="282760702"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Instance%20files/near/282760702" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Instance.20files.html#282760702">(May 18 2022 at 09:19)</a>:</h4>
<p>But <a href="https://tqft.net/mathlib/algebra/group/pi">file#algebra/group/pi</a> is fine, right?</p>



<a name="282760709"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Instance%20files/near/282760709" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Instance.20files.html#282760709">(May 18 2022 at 09:19)</a>:</h4>
<p>Meh, not really either.</p>



<a name="282760723"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Instance%20files/near/282760723" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Instance.20files.html#282760723">(May 18 2022 at 09:19)</a>:</h4>
<p>Not everything fits in a file, so we also have <a href="https://tqft.net/mathlib/data/pi/algebra">file#data/pi/algebra</a></p>



<a name="282760824"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Instance%20files/near/282760824" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Instance.20files.html#282760824">(May 18 2022 at 09:20)</a>:</h4>
<p>That file is different, it's data-only without any algebraic heirarchy</p>



<a name="282760900"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Instance%20files/near/282760900" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Instance.20files.html#282760900">(May 18 2022 at 09:21)</a>:</h4>
<p><code>has_one</code> and friends <strong>are</strong> in the algebraic hierarchy.</p>



<a name="282760928"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Instance%20files/near/282760928" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Instance.20files.html#282760928">(May 18 2022 at 09:21)</a>:</h4>
<p>But I agree that somehow <code>pi</code> and <code>prod</code>are less of a problem than type synonyms.</p>



<a name="282760930"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Instance%20files/near/282760930" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Instance.20files.html#282760930">(May 18 2022 at 09:21)</a>:</h4>
<p>That's just notation, I wouldn't consider those algebraic</p>



<a name="282760959"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Instance%20files/near/282760959" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Instance.20files.html#282760959">(May 18 2022 at 09:21)</a>:</h4>
<p>In the interest of unblocking things, I think <code>order/ulift.lean</code> and <code>algebra/order/ulift.lean</code> are close enough to the status quo</p>



<a name="282761004"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Instance%20files/near/282761004" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Instance.20files.html#282761004">(May 18 2022 at 09:22)</a>:</h4>
<p>We also have <code>algebra/order/pi</code> as a data point in favor of that</p>



<a name="282761031"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Instance%20files/near/282761031" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Instance.20files.html#282761031">(May 18 2022 at 09:22)</a>:</h4>
<p>Why not just dropping the instances in the corresponding files? This is no harder.</p>



<a name="282761064"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Instance%20files/near/282761064" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Instance.20files.html#282761064">(May 18 2022 at 09:22)</a>:</h4>
<p>Why not follow the pattern of <code>pi</code> and <code>prod</code> and keep the files smaller?</p>



<a name="282761076"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Instance%20files/near/282761076" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Instance.20files.html#282761076">(May 18 2022 at 09:22)</a>:</h4>
<p>... because it's type synonym</p>



<a name="282761084"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Instance%20files/near/282761084" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Instance.20files.html#282761084">(May 18 2022 at 09:22)</a>:</h4>
<p>So?</p>



<a name="282761114"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Instance%20files/near/282761114" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Instance.20files.html#282761114">(May 18 2022 at 09:23)</a>:</h4>
<p>I think you're thinking of <code>order_dual</code>, which is a very important type synonym because you use it to prove everything along the way</p>



<a name="282761136"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Instance%20files/near/282761136" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Instance.20files.html#282761136">(May 18 2022 at 09:23)</a>:</h4>
<p><code>ulift</code> you don't use for anything until a leaf file</p>



<a name="282761184"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Instance%20files/near/282761184" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Instance.20files.html#282761184">(May 18 2022 at 09:23)</a>:</h4>
<p>I want to destroy those type synonym instances files, so I don't want another one to pop up.</p>



<a name="282761238"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Instance%20files/near/282761238" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Instance.20files.html#282761238">(May 18 2022 at 09:24)</a>:</h4>
<p><span class="user-mention" data-user-id="112680">@Johan Commelin</span> this is why <code>ulift nat</code> isn't a partial order -- apparently there are subtleties ;-)</p>



<a name="282761296"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Instance%20files/near/282761296" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Instance.20files.html#282761296">(May 18 2022 at 09:24)</a>:</h4>
<p>Classes can be defined arbitrarily low in the instance hierarchy, and all the <code>prod</code>/<code>pi</code> files have to decide of an arbitrary cutting point.</p>



<a name="282761372"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Instance%20files/near/282761372" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Instance.20files.html#282761372">(May 18 2022 at 09:25)</a>:</h4>
<p>Yael, can you pick one of your messages to split this thread, and I'll use my mod powers to clean up the rest?</p>



<a name="282761386"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Instance%20files/near/282761386" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Instance.20files.html#282761386">(May 18 2022 at 09:25)</a>:</h4>
<p>In particular, the <code>order</code> folder is very flat, so there's little opportunity to have several <code>.ulift</code> files, as we do under <code>algebra.</code> (<code>algebra.group.pi</code>, <code>algebra.order.pi</code>)</p>



<a name="282761466"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Instance%20files/near/282761466" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Instance.20files.html#282761466">(May 18 2022 at 09:26)</a>:</h4>
<p>(assuming you think splitting the thread makes sense)</p>



<a name="282761487"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Instance%20files/near/282761487" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Instance.20files.html#282761487">(May 18 2022 at 09:26)</a>:</h4>
<p><span class="user-mention silent" data-user-id="387244">Yaël Dillies</span> <a href="#narrow/stream/217875-Is-there-code-for-X.3F/topic/preorder.20on.20ulift/near/282761184">said</a>:</p>
<blockquote>
<p>I want to destroy those type synonym instances files, so I don't want another one to pop up.</p>
</blockquote>
<p><code>ulift</code> isn't a type synonym <span aria-label="upside down" class="emoji emoji-1f643" role="img" title="upside down">:upside_down:</span></p>



<a name="282761570"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Instance%20files/near/282761570" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Instance.20files.html#282761570">(May 18 2022 at 09:27)</a>:</h4>
<p>Got me there!</p>



<a name="282761597"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Instance%20files/near/282761597" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Instance.20files.html#282761597">(May 18 2022 at 09:27)</a>:</h4>
<p><span aria-label="open mouth" class="emoji emoji-1f62e" role="img" title="open mouth">:open_mouth:</span> I moved other people's messages as well? Where is this unexpected strength coming from?</p>



<a name="282761687"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Instance%20files/near/282761687" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Instance.20files.html#282761687">(May 18 2022 at 09:28)</a>:</h4>
<p>You can move everyone below yours, just not piecewise. I've moved the stragglers back</p>



<a name="282761906"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Instance%20files/near/282761906" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Instance.20files.html#282761906">(May 18 2022 at 09:30)</a>:</h4>
<p>I've thought about how to organize <code>order.</code> in subfolders, but no trend emerges to my eyes yet.</p>



<a name="282761911"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Instance%20files/near/282761911" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Instance.20files.html#282761911">(May 18 2022 at 09:30)</a>:</h4>
<p><span class="user-mention silent" data-user-id="387244">Yaël Dillies</span> <a href="#narrow/stream/217875-Is-there-code-for-X.3F/topic/Instance.20files/near/282761386">said</a>:</p>
<blockquote>
<p>In particular, the <code>order</code> folder is very flat, so there's little opportunity to have several <code>.ulift</code> files, as we do under <code>algebra.</code> (<code>algebra.group.pi</code>, <code>algebra.order.pi</code>)</p>
</blockquote>
<p>Ah, perhaps I wasn't clear. I think we should treat <code>ulift</code> the same way we already treat <code>pi</code> and <code>prod</code>; that is, if we have a separate <code>prod</code> file then make a separate <code>ulift</code> file, and if the <code>prod</code> instance is inline in another file, then put the <code>ulift</code> instance next to it.</p>



<a name="282761941"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Instance%20files/near/282761941" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Instance.20files.html#282761941">(May 18 2022 at 09:30)</a>:</h4>
<p>I think <a href="https://leanprover-community.github.io/mathlib_docs/find/pi.preorder">docs#pi.preorder</a> is inlined in a larger file, so the ulift one should be too.</p>



<a name="282761958"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Instance%20files/near/282761958" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Instance.20files.html#282761958">(May 18 2022 at 09:31)</a>:</h4>
<p>So no <code>order.ulift</code> file</p>



<a name="282761983"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Instance%20files/near/282761983" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Instance.20files.html#282761983">(May 18 2022 at 09:31)</a>:</h4>
<p>That sounds more reasonable already</p>



<a name="282762009"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Instance%20files/near/282762009" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Instance.20files.html#282762009">(May 18 2022 at 09:31)</a>:</h4>
<p>Yes, only because there seems to be no precedent for that in <code>order/</code></p>



<a name="282762045"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Instance%20files/near/282762045" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Instance.20files.html#282762045">(May 18 2022 at 09:31)</a>:</h4>
<p><span class="user-mention silent" data-user-id="387244">Yaël Dillies</span> <a href="#narrow/stream/217875-Is-there-code-for-X.3F/topic/Instance.20files/near/282761184">said</a>:</p>
<blockquote>
<p>I want to destroy those type synonym instances files, so I don't want another one to pop up.</p>
</blockquote>
<p>But I don't think this is necessarily a good idea in general</p>



<a name="282762138"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Instance%20files/near/282762138" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Instance.20files.html#282762138">(May 18 2022 at 09:32)</a>:</h4>
<p><span class="user-mention" data-user-id="110087">@Scott Morrison</span> had to tweak the import tree elsewhere because of <code>algebra.punit_instances</code></p>



<a name="282762166"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Instance%20files/near/282762166" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Instance.20files.html#282762166">(May 18 2022 at 09:32)</a>:</h4>
<p>This to me is already a sign that we should move away from those files.</p>



<a name="282762186"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Instance%20files/near/282762186" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Instance.20files.html#282762186">(May 18 2022 at 09:33)</a>:</h4>
<p><span class="user-mention silent" data-user-id="387244">Yaël Dillies</span> <a href="#narrow/stream/217875-Is-there-code-for-X.3F/topic/Instance.20files/near/282761296">said</a>:</p>
<blockquote>
<p>Classes can be defined arbitrarily low in the instance hierarchy, and all the <code>prod</code>/<code>pi</code> files have to decide of an arbitrary cutting point.</p>
</blockquote>
<p>The whole game of the import graph is to decide arbitrary cutting points, you have to cut the entire DAG into smaller DAGs and then put them in some topological order.</p>



<a name="282762203"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Instance%20files/near/282762203" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Instance.20files.html#282762203">(May 18 2022 at 09:33)</a>:</h4>
<p><code>punit_instances</code> is bad; it doesn't follow the pattern of <code>pi</code> and <code>prod</code></p>



<a name="282762347"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Instance%20files/near/282762347" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Instance.20files.html#282762347">(May 18 2022 at 09:34)</a>:</h4>
<p>Ah, so you would prescribe splitting it up into <code>algebra.group.punit</code> and others?</p>



<a name="282762435"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Instance%20files/near/282762435" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Instance.20files.html#282762435">(May 18 2022 at 09:35)</a>:</h4>
<p>(also, this thread belongs in #general but I didn't manage to move it there)</p>



<a name="282768724"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Instance%20files/near/282768724" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Instance.20files.html#282768724">(May 18 2022 at 10:37)</a>:</h4>
<p>I think the pattern of splitting <code>algebra.punit_instances</code> into <code>algebra.group.punit</code>, <code>algebra.gcd_monoid.punit</code>, etc. is generally a good idea, although I'm not so convinced by the argument of "we should follow the established pattern". For me the most important rule of thumb for organizing declarations over files is that the imports of a file should not be too much bigger than the dependencies of any declaration in that file. This way, if a declaration is logically accessible at a low point in the declaration hierarchy, it can also be imported at a low point in the import hierarchy. We don't get artificial cyclic dependencies and we don't need to recompile many intermediate files to modify two declarations in sync.</p>
<p>In particular, the definition of <a href="https://leanprover-community.github.io/mathlib_docs/find/punit.comm_group">docs#punit.comm_group</a> depends only on <code>punit</code> and <code>comm_group</code>; <code>punit</code> is defined in core and <code>comm_group</code> in <code>algebra.group.defs</code> so the imports for the file that <code>punit.comm_group</code> is defined in should not be much more than <code>algebra.group.defs</code> itself.</p>
<p>For the question of whether to name the file containing this declaration something like <code>algebra.group.punit</code> or something like <code>data.punit.group</code>, I agree that the most important quality is the ability to find it easily, so precedent would guide us towards <code>algebra.group.punit</code>.</p>



<a name="282768893"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Instance%20files/near/282768893" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Instance.20files.html#282768893">(May 18 2022 at 10:39)</a>:</h4>
<p>(Of course the <em>real</em> solution is to do away with this outdated notion of files altogether and just have a database of content-addressable declarations.)</p>



<a name="282772095"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Instance%20files/near/282772095" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Instance.20files.html#282772095">(May 18 2022 at 11:15)</a>:</h4>
<p>I've seen a software project that kept numbered files, each importing the last, and you just inserted things where they were supposed to be. (I suppose that's not so different from metamath's <a href="http://set.mm">set.mm</a> if you think about how that gigantic file is ultimately stored across multiple blocks in physical storage)</p>



<a name="282772114"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Instance%20files/near/282772114" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Instance.20files.html#282772114">(May 18 2022 at 11:15)</a>:</h4>
<p>Maybe the <code>comm_group punit</code> instance can go with the definition of <code>comm_group</code>?</p>



<a name="282772218"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Instance%20files/near/282772218" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Instance.20files.html#282772218">(May 18 2022 at 11:16)</a>:</h4>
<blockquote>
<p>although I'm not so convinced by the argument of "we should follow the established pattern"</p>
</blockquote>
<p>If we don't do this, then every few months we establish a different pattern and things become worse</p>



<a name="282772231"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Instance%20files/near/282772231" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Instance.20files.html#282772231">(May 18 2022 at 11:16)</a>:</h4>
<p>Yes Reid, that's what I'm arguing for.</p>



<a name="282772252"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Instance%20files/near/282772252" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Instance.20files.html#282772252">(May 18 2022 at 11:17)</a>:</h4>
<p>If we don't like the established pattern, we should change it globally, rather than establishing a parallel pattern (edit: <a href="https://xkcd.com/927/">https://xkcd.com/927/</a>)</p>



<a name="282772262"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Instance%20files/near/282772262" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Instance.20files.html#282772262">(May 18 2022 at 11:17)</a>:</h4>
<p>I mean literally after it in the same file, not in a new file <code>algebra.group.punit</code></p>



<a name="282772293"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Instance%20files/near/282772293" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Instance.20files.html#282772293">(May 18 2022 at 11:17)</a>:</h4>
<p>The same argument goes for <code>prod</code> and <code>pi</code> too, right?</p>



<a name="282772380"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Instance%20files/near/282772380" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Instance.20files.html#282772380">(May 18 2022 at 11:18)</a>:</h4>
<p>Yes, I assume so</p>



<a name="282772554"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Instance%20files/near/282772554" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Instance.20files.html#282772554">(May 18 2022 at 11:20)</a>:</h4>
<p><code>algebra/group/defs</code> is 800 lines long; what do we gain by <a href="https://github.com/leanprover-community/mathlib/blob/master/src/algebra/group/prod.lean#L33-L202">adding these 170 lines</a> to it?</p>



<a name="282772578"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Instance%20files/near/282772578" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Instance.20files.html#282772578">(May 18 2022 at 11:20)</a>:</h4>
<p>Isn't the whole point of a <code>defs</code> file to contain just the defs, and not actually any instances?</p>



<a name="282772620"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Instance%20files/near/282772620" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Instance.20files.html#282772620">(May 18 2022 at 11:21)</a>:</h4>
<p>It can be in <code>algebra.group.basic</code>, sure.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>