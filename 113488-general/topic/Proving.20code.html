---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/Proving.20code.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Proving.20code.html">Proving code</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="268051243"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Proving%20code/near/268051243" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alice Laroche <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Proving.20code.html#268051243">(Jan 14 2022 at 18:13)</a>:</h4>
<p>Hi,</p>
<p>I wanted to write and prove some code, but passing down proof needed for all function to work well is tedious<br>
Is there a better patern than that ?</p>



<a name="268051271"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Proving%20code/near/268051271" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Proving.20code.html#268051271">(Jan 14 2022 at 18:13)</a>:</h4>
<p>Use junk values!</p>



<a name="268051678"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Proving%20code/near/268051678" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Proving.20code.html#268051678">(Jan 14 2022 at 18:17)</a>:</h4>
<p><span class="user-mention" data-user-id="364007">@Alice Laroche</span> it depends a lot on your use case and design. Can you be more specific on what you want to do? Maybe pointing out some code that you already have in place</p>



<a name="268052519"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Proving%20code/near/268052519" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alice Laroche <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Proving.20code.html#268052519">(Jan 14 2022 at 18:24)</a>:</h4>
<p>For exemple let's say i want to use <code>nth</code> or <code>nth_le</code><br>
If I use the first i need to propagate <code>option something</code> all the way up only for proving it will never be <code>none</code> so using <code>option</code> to begin with seem unnecessary <br>
If i use the second i need to pass proof from function to function to pass the proof needed by <code>nth_le</code> , but it create a mess because all my functions become dependant type<br>
So i was wondering if there was a third option</p>



<a name="268052633"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Proving%20code/near/268052633" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Proving.20code.html#268052633">(Jan 14 2022 at 18:25)</a>:</h4>
<p>Instead of using <code>option</code>, you can return a junk value. For example <a href="https://leanprover-community.github.io/mathlib_docs/find/real.sqrt">docs#real.sqrt</a> returns <code>0</code> on negative reals.</p>



<a name="268052974"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Proving%20code/near/268052974" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alice Laroche <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Proving.20code.html#268052974">(Jan 14 2022 at 18:27)</a>:</h4>
<p>In many case junk value don't exist because they could mean something else</p>



<a name="268053983"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Proving%20code/near/268053983" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Proving.20code.html#268053983">(Jan 14 2022 at 18:34)</a>:</h4>
<p>Is it possible to match and resolve the <code>option something</code> right before the first function call so you don't have to pass <code>option something</code> through your pipeline of functions?</p>



<a name="268055376"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Proving%20code/near/268055376" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alice Laroche <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Proving.20code.html#268055376">(Jan 14 2022 at 18:46)</a>:</h4>
<p>I don't think so, like i said it's very like <code>nth</code> Is there a third way of writing <code>nth</code> that don't use neither option or a proof of absurdity</p>



<a name="268055397"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Proving%20code/near/268055397" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Proving.20code.html#268055397">(Jan 14 2022 at 18:46)</a>:</h4>
<p>Maybe you want to bind the options? Monadic programming? I'm just guessing at this point. A MWE would be very helpful.</p>



<a name="268055441"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Proving%20code/near/268055441" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Proving.20code.html#268055441">(Jan 14 2022 at 18:46)</a>:</h4>
<p><span class="user-mention silent" data-user-id="364007">Alice Laroche</span> <a href="#narrow/stream/113488-general/topic/Proving.20code/near/268055376">said</a>:</p>
<blockquote>
<p>I don't think so, like i said it's very like <code>nth</code> Is there a third way of writing <code>nth</code> that don't use neither option or a proof of absurdity</p>
</blockquote>
<p>Yes, making it return a junk value.</p>



<a name="268055522"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Proving%20code/near/268055522" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Proving.20code.html#268055522">(Jan 14 2022 at 18:47)</a>:</h4>
<p>That's how <a href="https://leanprover-community.github.io/mathlib_docs/find/list.head">docs#list.head</a> works, for example.</p>



<a name="268056078"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Proving%20code/near/268056078" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alice Laroche <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Proving.20code.html#268056078">(Jan 14 2022 at 18:52)</a>:</h4>
<p>Errh, i think i wanted something like throwing an exception and prove that never happen, but now i feel stupid about that<br>
<code>option</code> is the best choice</p>



<a name="268056344"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Proving%20code/near/268056344" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Proving.20code.html#268056344">(Jan 14 2022 at 18:54)</a>:</h4>
<p>There is a function <a href="https://leanprover-community.github.io/mathlib_docs/find/option.get">docs#option.get</a> that will allow you to extract the value from an option if you prove it is non-<code>none</code>. So this is roughly equivalent to "throw an exception and prove that it will never happen"</p>



<a name="268056625"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Proving%20code/near/268056625" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Proving.20code.html#268056625">(Jan 14 2022 at 18:56)</a>:</h4>
<p>Alternatively, you can use a precondition which is crafted specifically to discharge any side conditions that arise; then you have to prove at the top level that the precondition can be satisfied. This is essentially the dual approach; with both methods writing the program is easy and proving that it is total is hard</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>