---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/.E2.9C.94.20Lean.2Fmathlib.20style.20and.20readability.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.E2.9C.94.20Lean.2Fmathlib.20style.20and.20readability.html">✔ Lean/mathlib style and readability</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="267131134"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%E2%9C%94%20Lean/mathlib%20style%20and%20readability/near/267131134" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Martin Dvořák <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.E2.9C.94.20Lean.2Fmathlib.20style.20and.20readability.html#267131134">(Jan 06 2022 at 23:48)</a>:</h4>
<p>Which of the following is easier for you to read?<br>
<code>map f hf x * map f hf y</code><br>
or<br>
<code>(map f hf x) * (map f hf y)</code></p>



<a name="267131351"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%E2%9C%94%20Lean/mathlib%20style%20and%20readability/near/267131351" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Martin Dvořák <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.E2.9C.94.20Lean.2Fmathlib.20style.20and.20readability.html#267131351">(Jan 06 2022 at 23:50)</a>:</h4>
<p><code>@[simp] lemma diagonal_dot_product (i : m) : diagonal v i ⬝ w = v i * w i :=</code><br>
or<br>
<code>@[simp] lemma diagonal_dot_product (i : m) : (diagonal v i) ⬝ w = v i * w i :=</code></p>



<a name="267131507"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%E2%9C%94%20Lean/mathlib%20style%20and%20readability/near/267131507" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.E2.9C.94.20Lean.2Fmathlib.20style.20and.20readability.html#267131507">(Jan 06 2022 at 23:52)</a>:</h4>
<p>From <a href="https://github.com/leanprover-community/mathlib/pull/11289#discussion_r779937488">the PR that spawned this question</a>, a bad regex search concludes that mathlib prefers the parenthesis-free version for binary-or-more functions by a factor of about 6:1. For unary functions, that increases to 12:1</p>



<a name="267131540"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%E2%9C%94%20Lean/mathlib%20style%20and%20readability/near/267131540" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Martin Dvořák <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.E2.9C.94.20Lean.2Fmathlib.20style.20and.20readability.html#267131540">(Jan 06 2022 at 23:53)</a>:</h4>
<p>Thanks for the stats!</p>



<a name="267131623"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%E2%9C%94%20Lean/mathlib%20style%20and%20readability/near/267131623" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.E2.9C.94.20Lean.2Fmathlib.20style.20and.20readability.html#267131623">(Jan 06 2022 at 23:54)</a>:</h4>
<p>Of course, just because existing code does things a certain way doesn't mean that its current users prefer things that way, so asking on zulip like you've done here is never a bad idea</p>



<a name="267131644"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%E2%9C%94%20Lean/mathlib%20style%20and%20readability/near/267131644" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Martin Dvořák <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.E2.9C.94.20Lean.2Fmathlib.20style.20and.20readability.html#267131644">(Jan 06 2022 at 23:54)</a>:</h4>
<p>I am a bit confused by the blue and yellow arrows.</p>



<a name="267131791"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%E2%9C%94%20Lean/mathlib%20style%20and%20readability/near/267131791" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.E2.9C.94.20Lean.2Fmathlib.20style.20and.20readability.html#267131791">(Jan 06 2022 at 23:56)</a>:</h4>
<p>It seemed a less noisy way of voting, up arrows mean the first option</p>



<a name="267131809"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%E2%9C%94%20Lean/mathlib%20style%20and%20readability/near/267131809" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Martin Dvořák <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.E2.9C.94.20Lean.2Fmathlib.20style.20and.20readability.html#267131809">(Jan 06 2022 at 23:56)</a>:</h4>
<p>Thanks for clarification and for removing the blue arrow!</p>



<a name="267133726"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%E2%9C%94%20Lean/mathlib%20style%20and%20readability/near/267133726" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Martin Dvořák <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.E2.9C.94.20Lean.2Fmathlib.20style.20and.20readability.html#267133726">(Jan 07 2022 at 00:16)</a>:</h4>
<p>OK. You clearly prefer the version without parentheses. I am very surprised and slightly uncomfortable. However, I will respect that.</p>



<a name="267133738"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%E2%9C%94%20Lean/mathlib%20style%20and%20readability/near/267133738" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Notification Bot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.E2.9C.94.20Lean.2Fmathlib.20style.20and.20readability.html#267133738">(Jan 07 2022 at 00:16)</a>:</h4>
<p><span class="user-mention silent" data-user-id="417654">Martin Dvořák</span> has marked this topic as resolved.</p>



<a name="267135165"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%E2%9C%94%20Lean/mathlib%20style%20and%20readability/near/267135165" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.E2.9C.94.20Lean.2Fmathlib.20style.20and.20readability.html#267135165">(Jan 07 2022 at 00:23)</a>:</h4>
<p>When I started using lean I was initially not a big fan of the lack of parentheses, but after a while I got used to them, and the rules mathlib uses to determine precedence (which means that if we end up in a situation where the bracketing gives unexpected results people adjust the precedences to fix it). Now that I am used to the fact that function application comes before operators and the second versions look noisy to me, in the second example its harder to tell from a glance where the arguments <code>(i : m)</code> end and the type <code>(diagonal v i)</code> begins. Things like hovering over the tactic state in VSCode using widgets to see where different terms start and ends by highlighting, and the similar highlighting in the docs,  normally clears up any confusion I have reading a statement very quickly if I have any (this is a technology which really isn't possible in a printed regular book!) so I think we gain from having less symbols on screen when Lean knows what to do with them</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>