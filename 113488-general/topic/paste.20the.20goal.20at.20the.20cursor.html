---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/paste.20the.20goal.20at.20the.20cursor.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/paste.20the.20goal.20at.20the.20cursor.html">paste the goal at the cursor</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="216715762"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/paste%20the%20goal%20at%20the%20cursor/near/216715762" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/paste.20the.20goal.20at.20the.20cursor.html#216715762">(Nov 14 2020 at 08:32)</a>:</h4>
<p>The <code>Try this</code> stuff is really awesome, and the <code>Alt-V</code> shortcurt in VScode makes it even better. How hard is it to add a keyboard shortcut that pastes the content of the first goal ar the cursor?<br>
That would be useful for writing <code>change</code> statements or <code>calc</code> blocks</p>



<a name="216717948"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/paste%20the%20goal%20at%20the%20cursor/near/216717948" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex Peattie <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/paste.20the.20goal.20at.20the.20cursor.html#216717948">(Nov 14 2020 at 09:24)</a>:</h4>
<p>It shouldn't be hard I think <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span>. There's already <code>Lean: Info View: Copy Contents to Comment</code> (no keyboard binding). I  think a naive approach of  just taking that same output, finding the first line starting with <code>‚ä¢</code> and pasting it at the cursor ought to work</p>



<a name="216718403"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/paste%20the%20goal%20at%20the%20cursor/near/216718403" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/paste.20the.20goal.20at.20the.20cursor.html#216718403">(Nov 14 2020 at 09:35)</a>:</h4>
<p>I have no experience at all with vscode extensions or typescript... <span aria-label="sad" class="emoji emoji-2639" role="img" title="sad">:sad:</span></p>



<a name="216718463"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/paste%20the%20goal%20at%20the%20cursor/near/216718463" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex Peattie <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/paste.20the.20goal.20at.20the.20cursor.html#216718463">(Nov 14 2020 at 09:36)</a>:</h4>
<p>I'm happy to take a crack at it next week if no-one else gets there first <span aria-label="thumbs up" class="emoji emoji-1f44d" role="img" title="thumbs up">:thumbs_up:</span></p>



<a name="216737425"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/paste%20the%20goal%20at%20the%20cursor/near/216737425" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/paste.20the.20goal.20at.20the.20cursor.html#216737425">(Nov 14 2020 at 16:32)</a>:</h4>
<p>I started working on this, but it's a little tricky because the current infoview API only knows how to insert text at the line above the cursor position. See <a href="https://github.com/leanprover/vscode-lean/blob/0e4fbe2eb9f4f218c57628ec5c2b54a46434d801/src/infoview.ts#L236">this hack</a>. </p>
<p><a href="https://github.com/leanprover/vscode-lean/compare/master...bryangingechen:pasteGoal?expand=1">Here's</a> what I have so far. I think it gets the correct goal text, but as mentioned it puts it at the wrong position. I can try to figure out how to paste at the cursor instead, but any suggestions on how best to do this without adding even more layers of hacks would be welcome.</p>
<p>Also, while playing around with this, I came up with a related feature request: in the widget view, I'd like to be able to click on a hypothesis name or the goal symbol (these currently are unlinked) and have the extension copy the hypothesis or goal to the clipboard. We can currently sort of do this by clicking on the head symbol of the expression and clicking the copy-to-clipboard button in the widget popup, but finding the right symbol to hover over can be fiddly.</p>
<p>cc: <span class="user-mention" data-user-id="121918">@Edward Ayers</span></p>



<a name="216809156"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/paste%20the%20goal%20at%20the%20cursor/near/216809156" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Edward Ayers <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/paste.20the.20goal.20at.20the.20cursor.html#216809156">(Nov 15 2020 at 19:27)</a>:</h4>
<p>Hi</p>



<a name="216809279"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/paste%20the%20goal%20at%20the%20cursor/near/216809279" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Edward Ayers <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/paste.20the.20goal.20at.20the.20cursor.html#216809279">(Nov 15 2020 at 19:30)</a>:</h4>
<p>It should be ok for me to add an argument to the <code>effect.insert_text</code> thing so that you can insert text at any point in the doc (perhaps relative to cursor position?)</p>



<a name="216809285"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/paste%20the%20goal%20at%20the%20cursor/near/216809285" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Edward Ayers <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/paste.20the.20goal.20at.20the.20cursor.html#216809285">(Nov 15 2020 at 19:31)</a>:</h4>
<p>I think that the second related feature request can be implemented in mathlib</p>



<a name="216811563"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/paste%20the%20goal%20at%20the%20cursor/near/216811563" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/paste.20the.20goal.20at.20the.20cursor.html#216811563">(Nov 15 2020 at 20:09)</a>:</h4>
<p>Hey Ed, sounds good. Let me know how you want to proceed. No rush, of course, if you're busy.</p>



<a name="216817031"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/paste%20the%20goal%20at%20the%20cursor/near/216817031" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Edward Ayers <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/paste.20the.20goal.20at.20the.20cursor.html#216817031">(Nov 15 2020 at 22:01)</a>:</h4>
<p>Wrt the inserting thing, do you need relative position or absolute position from the cursor?</p>



<a name="216817169"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/paste%20the%20goal%20at%20the%20cursor/near/216817169" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/paste.20the.20goal.20at.20the.20cursor.html#216817169">(Nov 15 2020 at 22:04)</a>:</h4>
<p>I think absolute position might end up easier.</p>



<a name="216818925"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/paste%20the%20goal%20at%20the%20cursor/near/216818925" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Edward Ayers <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/paste.20the.20goal.20at.20the.20cursor.html#216818925">(Nov 15 2020 at 22:45)</a>:</h4>
<p><a href="https://github.com/leanprover-community/lean/pull/501">https://github.com/leanprover-community/lean/pull/501</a><br>
<a href="https://github.com/leanprover/vscode-lean/pull/234">https://github.com/leanprover/vscode-lean/pull/234</a></p>



<a name="216818992"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/paste%20the%20goal%20at%20the%20cursor/near/216818992" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Edward Ayers <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/paste.20the.20goal.20at.20the.20cursor.html#216818992">(Nov 15 2020 at 22:46)</a>:</h4>
<p><code>widget.effect.insert_text</code> now takes an extra arg expecting the relative or absolute position to insert the text at</p>



<a name="216819693"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/paste%20the%20goal%20at%20the%20cursor/near/216819693" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/paste.20the.20goal.20at.20the.20cursor.html#216819693">(Nov 15 2020 at 23:01)</a>:</h4>
<p>Thanks Ed!</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>