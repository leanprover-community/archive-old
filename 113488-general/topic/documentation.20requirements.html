---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/documentation.20requirements.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/documentation.20requirements.html">documentation requirements</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="170877938"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/documentation%20requirements/near/170877938" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/documentation.20requirements.html#170877938">(Jul 15 2019 at 09:43)</a>:</h4>
<p>We had a few discussions last week about documentation, resulting in this PR: <a href="https://github.com/leanprover-community/mathlib/pull/1229" target="_blank" title="https://github.com/leanprover-community/mathlib/pull/1229">https://github.com/leanprover-community/mathlib/pull/1229</a></p>
<p>It has a proposal for required documentation for all future additions to mathlib. This is a first draft, and we're very interested to get feedback here!</p>



<a name="170882914"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/documentation%20requirements/near/170882914" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/documentation.20requirements.html#170882914">(Jul 15 2019 at 11:07)</a>:</h4>
<p>Thanks for all your efforts! I made some small comments/suggestions/questions on the PR page.</p>



<a name="171439262"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/documentation%20requirements/near/171439262" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/documentation.20requirements.html#171439262">(Jul 22 2019 at 15:16)</a>:</h4>
<p>Are there any further comments about this PR? In particular, do people have opinions about requiring doc strings on all public-facing lemmas, instead of just "major theorems"?</p>



<a name="171439375"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/documentation%20requirements/near/171439375" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/documentation.20requirements.html#171439375">(Jul 22 2019 at 15:18)</a>:</h4>
<p>I tried doing this for all public-facing lemmas in my recent power series PR. I got bored very quickly. Many stupid silly lemmas didn't seem to have a nice description apart from repeating their name.</p>



<a name="171439427"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/documentation%20requirements/near/171439427" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/documentation.20requirements.html#171439427">(Jul 22 2019 at 15:18)</a>:</h4>
<p>I don't think a docstring would offer more than what the hover-text shows by default: the type of the term.</p>



<a name="171439511"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/documentation%20requirements/near/171439511" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/documentation.20requirements.html#171439511">(Jul 22 2019 at 15:19)</a>:</h4>
<p>So I am leaning towards "doc strings on major theorems" and there is no clear definition of what is a major theorem, but "we know it when we see it".</p>



<a name="171439590"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/documentation%20requirements/near/171439590" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/documentation.20requirements.html#171439590">(Jul 22 2019 at 15:20)</a>:</h4>
<p>On the other hand, if and when there's some kind of doc generation tool, having natural language statements of these lemmas would be helpful.</p>



<a name="171439657"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/documentation%20requirements/near/171439657" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/documentation.20requirements.html#171439657">(Jul 22 2019 at 15:21)</a>:</h4>
<p>For the record, these were things like <code>coeff_zero</code> and <code>coeff_add</code> etc...</p>



<a name="171440641"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/documentation%20requirements/near/171440641" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/documentation.20requirements.html#171440641">(Jul 22 2019 at 15:32)</a>:</h4>
<p>There is still surely an argument which says that newcomers would definitely prefer a line of English to having to read the Lean. I think it's easy to forget how intimidating the style is for beginners.</p>



<a name="171445887"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/documentation%20requirements/near/171445887" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wojciech Nawrocki <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/documentation.20requirements.html#171445887">(Jul 22 2019 at 16:34)</a>:</h4>
<p>This is bordering on CNLs, but perhaps in the doc generation some documentation could be generated directly from Lean theorem names provided they stick to the conventions like <code>prop2_of_prop1</code>, <code>add_comm</code> etc.</p>



<a name="171468844"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/documentation%20requirements/near/171468844" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/documentation.20requirements.html#171468844">(Jul 22 2019 at 21:15)</a>:</h4>
<p>I'm not sure how to address this, but for me a big problem with the readability of Lean files is that everything has to be in logical order, unlike in informal mathematics. In any decently written paper or book, the introduction states the major theorem(s). Then in each section, some text addresses the purpose of the section. Proofs are often longer, and incorporate many "Lean lemmas" directly into the body of the proof, so that they don't have to be state ahead of time, without clear motivation. And finally very often proofs of highly technical facts are deferred to appendixes (or even "forthcoming" other papers).</p>
<p>I think it would be great if we could aspire to better section-level commenting. (And more use of <code>section</code>, especially using a name.) Or, for that matter, moving in the direction of splitting developments in more, smaller files.</p>
<p>Awesome (but requiring lots of language support), would be something like a "deferred" keyword:</p>
<div class="codehilite"><pre><span></span>theorem my_awesome_theorem : 196884 = 1 + 196883 := deferred

... lots of lemmas and definitions here ...

proof of my_awesome_theorem :=
begin
  ...
end
</pre></div>



<a name="171469348"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/documentation%20requirements/near/171469348" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/documentation.20requirements.html#171469348">(Jul 22 2019 at 21:23)</a>:</h4>
<p>The obvious solution is to not read lean files like you would a book</p>



<a name="171469432"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/documentation%20requirements/near/171469432" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/documentation.20requirements.html#171469432">(Jul 22 2019 at 21:24)</a>:</h4>
<p>You first read <code>my_awesome_theorem</code> because that's what you care about, then when you see an interesting lemma that seems to do most of the work you follow that, and so on until you believe the result</p>



<a name="171469607"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/documentation%20requirements/near/171469607" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/documentation.20requirements.html#171469607">(Jul 22 2019 at 21:27)</a>:</h4>
<p>Yes, this puts more power and responsibility on the reader to read lemmas in the right order, but I think that being able to follow links according to the reader's interest rather than having to determine this in advance as in a math textbook is a strength</p>



<a name="171469729"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/documentation%20requirements/near/171469729" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Simon Hudon <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/documentation.20requirements.html#171469729">(Jul 22 2019 at 21:29)</a>:</h4>
<p>I'm also in favor of documenting only important lemmas. A lot of the lemmas, especially <code>simp</code> lemmas, don't even need to be used explicitly. They might deserve an explanation but more as a set of lemma rather than individually. For instance, it might be worth explaining that they try to rewrite a formula into a canonical form and describe that form.</p>



<a name="171469867"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/documentation%20requirements/near/171469867" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Simon Hudon <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/documentation.20requirements.html#171469867">(Jul 22 2019 at 21:30)</a>:</h4>
<p>Also I don't think that more documentation is better than less. More documentation is more work to keep up to date and outdated documentation is worse than no documentation. Let's make sure that the comments we require have value</p>



<a name="171469891"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/documentation%20requirements/near/171469891" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/documentation.20requirements.html#171469891">(Jul 22 2019 at 21:31)</a>:</h4>
<p>My usual problem when opening a Lean file is that I can't find <code>my_awesome_theorem</code> (or guess which are the awesome theorems I should be looking for...) Of course, good file-level comments solve this.</p>



<a name="171470148"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/documentation%20requirements/near/171470148" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Simon Hudon <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/documentation.20requirements.html#171470148">(Jul 22 2019 at 21:34)</a>:</h4>
<p>It might be worth adding a rule that the important theorems be listed at the beginning.</p>



<a name="171471035"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/documentation%20requirements/near/171471035" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/documentation.20requirements.html#171471035">(Jul 22 2019 at 21:49)</a>:</h4>
<p>There still seems to be a big argument for some sort of overview of the file at the beginning. This could contain pointers to main sections and theorems.</p>



<a name="171471430"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/documentation%20requirements/near/171471430" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Simon Hudon <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/documentation.20requirements.html#171471430">(Jul 22 2019 at 21:55)</a>:</h4>
<p>A bit like the last paragraph of a paper's introduction?</p>



<a name="171473230"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/documentation%20requirements/near/171473230" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/documentation.20requirements.html#171473230">(Jul 22 2019 at 22:22)</a>:</h4>
<p>Yes maybe. Just saying what's in the file. I think this is a fine idea</p>



<a name="171500742"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/documentation%20requirements/near/171500742" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/documentation.20requirements.html#171500742">(Jul 23 2019 at 08:54)</a>:</h4>
<p>So it sounds like there's a general consensus not to require every lemma to have a docstring, which is what the current proposal says. So let's stick with that for now. It will be up to reviewers to enforce a strict enough notion of "important theorem" to require docstrings.</p>



<a name="171500764"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/documentation%20requirements/near/171500764" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/documentation.20requirements.html#171500764">(Jul 23 2019 at 08:55)</a>:</h4>
<p>As for an overview at the beginning, that's already in the proposal, isn't it? We ask for a summary of the content of the file, followed by</p>
<ul>
<li><em>Main definitions</em> (optional, can be covered in the summary)</li>
<li><em>Main statements</em> (optional, can be covered in the summary)</li>
</ul>



<a name="171500858"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/documentation%20requirements/near/171500858" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/documentation.20requirements.html#171500858">(Jul 23 2019 at 08:56)</a>:</h4>
<p>Explaining the intent behind a collection of simp lemmas seems to fall under "<em>Implementation notes</em> (description of important design decisions or interface features)." But I think it's a good idea to mention explicitly that simp normal form is an important interface feature.</p>



<a name="171528493"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/documentation%20requirements/near/171528493" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Simon Hudon <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/documentation.20requirements.html#171528493">(Jul 23 2019 at 15:21)</a>:</h4>
<p>Right now, the files probably mostly meet your rules. How do you suggest you bring those files up to code?</p>



<a name="171546140"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/documentation%20requirements/near/171546140" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/documentation.20requirements.html#171546140">(Jul 23 2019 at 18:44)</a>:</h4>
<blockquote>
<p>Right now, the files probably mostly meet your rules. </p>
</blockquote>
<p>What files? I think almost nothing in mathlib meets these standards. The idea is that future PRs should be held to these requirements, and should update what they touch (within reason). It's a long term effort to document existing files, of course, but I hope the community will pitch in.</p>



<a name="171558856"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/documentation%20requirements/near/171558856" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Simon Hudon <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/documentation.20requirements.html#171558856">(Jul 23 2019 at 21:19)</a>:</h4>
<p>I think file level comments is a lot to tack onto every PR that casually touches it. You may want to create a specific issue for the file level comments</p>



<a name="171595531"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/documentation%20requirements/near/171595531" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/documentation.20requirements.html#171595531">(Jul 24 2019 at 10:49)</a>:</h4>
<p>Yes, this is why I write "within reason." A PR that adds one lemma about <code>list</code> shouldn't have to document the whole file. But if someone understands a file enough to reorganize half of it, it seems reasonable to ask them to write documentation. Creating an issue for adding these seems fine.</p>



<a name="171595797"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/documentation%20requirements/near/171595797" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/documentation.20requirements.html#171595797">(Jul 24 2019 at 10:53)</a>:</h4>
<p>Does anyone else have thoughts about the proposed requirements? If not, let's merge the PR and enact the rules.</p>



<a name="171611375"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/documentation%20requirements/near/171611375" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/documentation.20requirements.html#171611375">(Jul 24 2019 at 14:36)</a>:</h4>
<p>Can we make the <code>doc_blame</code> (without <code>!</code>!! <span aria-label="double exclamation" class="emoji emoji-203c" role="img" title="double exclamation">:double_exclamation:</span> <span aria-label="stuck out tongue wink" class="emoji emoji-1f61c" role="img" title="stuck out tongue wink">:stuck_out_tongue_wink:</span> ) some part of the Travis checks? Or is this going to cause lots of griefs because there are always tiny exceptions to these iron rules?</p>



<a name="171613197"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/documentation%20requirements/near/171613197" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/documentation.20requirements.html#171613197">(Jul 24 2019 at 14:57)</a>:</h4>
<p>It would be very hard to integrate into the Travis workflow and there will indeed be lots of exceptions.</p>



<a name="171672216"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/documentation%20requirements/near/171672216" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/documentation.20requirements.html#171672216">(Jul 25 2019 at 08:19)</a>:</h4>
<p>I think there's been enough time for people to voice objections. Can someone approve the PR?</p>



<a name="171672480"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/documentation%20requirements/near/171672480" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/documentation.20requirements.html#171672480">(Jul 25 2019 at 08:24)</a>:</h4>
<p>Done (-;</p>



<a name="171676961"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/documentation%20requirements/near/171676961" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/documentation.20requirements.html#171676961">(Jul 25 2019 at 09:45)</a>:</h4>
<p>Maybe we should have a competition for who can update the most files. What's the prize?</p>



<a name="171677678"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/documentation%20requirements/near/171677678" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/documentation.20requirements.html#171677678">(Jul 25 2019 at 09:56)</a>:</h4>
<p>Free copy of mathlib</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>