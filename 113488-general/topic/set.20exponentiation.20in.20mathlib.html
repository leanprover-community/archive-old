---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/set.20exponentiation.20in.20mathlib.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/set.20exponentiation.20in.20mathlib.html">set exponentiation in mathlib</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="289031084"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/set%20exponentiation%20in%20mathlib/near/289031084" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> ZHAO Jinxiang <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/set.20exponentiation.20in.20mathlib.html#289031084">(Jul 09 2022 at 09:20)</a>:</h4>
<p>Is there any definition standing for <strong>set exponentiation</strong> in lean's mathlib?</p>
<p><a href="https://en.wikipedia.org/wiki/Function_(mathematics)#Set_exponentiation">https://en.wikipedia.org/wiki/Function_(mathematics)#Set_exponentiation</a></p>



<a name="289031206"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/set%20exponentiation%20in%20mathlib/near/289031206" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/set.20exponentiation.20in.20mathlib.html#289031206">(Jul 09 2022 at 09:22)</a>:</h4>
<p><code>X → Y</code></p>



<a name="289031379"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/set%20exponentiation%20in%20mathlib/near/289031379" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> ZHAO Jinxiang <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/set.20exponentiation.20in.20mathlib.html#289031379">(Jul 09 2022 at 09:26)</a>:</h4>
<p>I'm asking this, because I want to prove <code>Y ^ ∅ = { ∅ }</code> and <code>∅ ^ X  = ∅</code> .</p>



<a name="289031532"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/set%20exponentiation%20in%20mathlib/near/289031532" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/set.20exponentiation.20in.20mathlib.html#289031532">(Jul 09 2022 at 09:30)</a>:</h4>
<p>Or maybe <a href="https://leanprover-community.github.io/mathlib_docs/find/set.pi">docs#set.pi</a></p>



<a name="289031603"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/set%20exponentiation%20in%20mathlib/near/289031603" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/set.20exponentiation.20in.20mathlib.html#289031603">(Jul 09 2022 at 09:32)</a>:</h4>
<p>Your second lemma is <a href="https://leanprover-community.github.io/mathlib_docs/find/set.pi_eq_empty">docs#set.pi_eq_empty</a>, but your first lemma isn't true for that definition</p>



<a name="289031614"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/set%20exponentiation%20in%20mathlib/near/289031614" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/set.20exponentiation.20in.20mathlib.html#289031614">(Jul 09 2022 at 09:32)</a>:</h4>
<p><a href="https://leanprover-community.github.io/mathlib_docs/find/function.is_empty">docs#function.is_empty</a> is one way you could state the second one. <a href="https://leanprover-community.github.io/mathlib_docs/find/pi.unique_of_is_empty">docs#pi.unique_of_is_empty</a> is also a way to state the second one, although a bit harder to understand why</p>



<a name="289032802"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/set%20exponentiation%20in%20mathlib/near/289032802" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/set.20exponentiation.20in.20mathlib.html#289032802">(Jul 09 2022 at 10:02)</a>:</h4>
<p><span class="user-mention silent" data-user-id="329691">ZHAO Jinxiang</span> <a href="#narrow/stream/113488-general/topic/set.20exponentiation.20in.20mathlib/near/289031379">said</a>:</p>
<blockquote>
<p>I'm asking this, because I want to prove <code>Y ^ ∅ = { ∅ }</code> and <code>∅ ^ X  = ∅</code> .</p>
</blockquote>
<p>They can't both be true :-)</p>



<a name="289032835"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/set%20exponentiation%20in%20mathlib/near/289032835" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/set.20exponentiation.20in.20mathlib.html#289032835">(Jul 09 2022 at 10:02)</a>:</h4>
<p>Lean uses type theory, not set theory: for example, the empty function is not equal to the empty type.</p>



<a name="289034371"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/set%20exponentiation%20in%20mathlib/near/289034371" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Johnson <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/set.20exponentiation.20in.20mathlib.html#289034371">(Jul 09 2022 at 10:40)</a>:</h4>
<p>What you probably want is <a href="https://leanprover-community.github.io/mathlib_docs/find/Set.funs">docs#Set.funs</a>. You can define set exponentiation as</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">local</span> <span class="kd">infixr</span> <span class="bp">`</span> <span class="bp">^</span> <span class="bp">`</span><span class="o">:</span><span class="mi">80</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">a</span> <span class="n">b</span><span class="o">,</span> <span class="n">Set.funs</span> <span class="n">b</span> <span class="n">a</span>
</code></pre></div>
<p>and you can prove your theorems:</p>
<div class="spoiler-block"><div class="spoiler-header">
<p>Y ^ ∅ = {∅}</p>
</div><div class="spoiler-content" aria-hidden="true">
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">example</span> <span class="o">{</span><span class="n">Y</span> <span class="o">:</span> <span class="n">Set</span><span class="o">}</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">^</span> <span class="bp">∅</span> <span class="bp">=</span> <span class="o">{</span><span class="bp">∅</span><span class="o">}</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">refine</span> <span class="n">Set.ext</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">a</span><span class="o">,</span> <span class="n">_</span><span class="o">),</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">Set.mem_funs</span><span class="o">,</span> <span class="n">Set.is_func</span><span class="o">,</span> <span class="n">Set.mem_singleton</span><span class="o">],</span>
  <span class="n">split</span><span class="bp">;</span> <span class="n">intro</span> <span class="n">h</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">rw</span> <span class="n">Set.eq_empty</span><span class="o">,</span>
    <span class="n">rintro</span> <span class="n">_</span> <span class="n">h₁</span><span class="o">,</span>
    <span class="k">have</span> <span class="n">h</span> <span class="o">:=</span> <span class="n">h.1</span> <span class="n">h₁</span><span class="o">,</span>
    <span class="n">rw</span> <span class="n">Set.mem_prod</span> <span class="n">at</span> <span class="n">h</span><span class="o">,</span>
    <span class="n">cases</span> <span class="n">Set.mem_empty</span> <span class="n">_</span> <span class="n">h.some_spec.some</span> <span class="o">},</span>
  <span class="o">{</span> <span class="n">subst</span> <span class="n">h</span><span class="o">,</span>
    <span class="n">split</span><span class="o">,</span>
    <span class="o">{</span> <span class="n">rw</span> <span class="n">Set.subset_def</span><span class="o">,</span>
      <span class="n">rintro</span> <span class="n">_</span> <span class="n">h</span><span class="o">,</span>
      <span class="n">cases</span> <span class="n">Set.mem_empty</span> <span class="n">_</span> <span class="n">h</span> <span class="o">},</span>
    <span class="o">{</span> <span class="n">simp</span> <span class="o">}},</span>
<span class="kd">end</span>
</code></pre></div>
</div></div>
<div class="spoiler-block"><div class="spoiler-header">
<p>∅ ^ X  = ∅</p>
</div><div class="spoiler-content" aria-hidden="true">
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">example</span> <span class="o">{</span><span class="n">X</span> <span class="o">:</span> <span class="n">Set</span><span class="o">}</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">≠</span> <span class="bp">∅</span><span class="o">)</span> <span class="o">:</span> <span class="bp">∅</span> <span class="bp">^</span> <span class="n">X</span> <span class="bp">=</span> <span class="bp">∅</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">refine</span> <span class="n">Set.ext</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">a</span><span class="o">,</span> <span class="n">_</span><span class="o">),</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">Set.mem_funs</span><span class="o">,</span> <span class="n">Set.is_func</span><span class="o">],</span>
  <span class="n">split</span><span class="bp">;</span> <span class="n">intro</span> <span class="n">h₁</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">cases</span> <span class="n">h₁</span> <span class="k">with</span> <span class="n">h₂</span> <span class="n">h₁</span><span class="o">,</span>
    <span class="n">replace</span> <span class="n">h₂</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">=</span> <span class="bp">∅</span><span class="o">,</span>
    <span class="o">{</span> <span class="n">rw</span> <span class="n">Set.eq_empty</span><span class="o">,</span>
      <span class="n">rintro</span> <span class="n">b</span> <span class="n">h₃</span><span class="o">,</span>
      <span class="n">specialize</span> <span class="n">h₂</span> <span class="n">h₃</span><span class="o">,</span>
      <span class="n">rw</span> <span class="n">Set.mem_prod</span> <span class="n">at</span> <span class="n">h₂</span><span class="o">,</span>
      <span class="n">rcases</span> <span class="n">h₂</span> <span class="k">with</span> <span class="o">⟨</span><span class="n">_</span><span class="o">,</span> <span class="n">_</span><span class="o">,</span> <span class="n">_</span><span class="o">,</span> <span class="n">h₂</span><span class="o">,</span> <span class="n">_</span><span class="o">⟩,</span>
      <span class="n">cases</span> <span class="n">Set.mem_empty</span> <span class="n">_</span> <span class="n">h₂</span> <span class="o">},</span>
    <span class="n">subst</span> <span class="n">a</span><span class="o">,</span>
    <span class="n">change</span> <span class="bp">¬</span><span class="n">_</span> <span class="n">at</span> <span class="n">h</span><span class="o">,</span>
    <span class="n">rw</span> <span class="bp">←</span><span class="n">Set.ext_iff</span> <span class="n">at</span> <span class="n">h</span><span class="o">,</span>
    <span class="n">apply</span> <span class="n">h.elim</span><span class="o">,</span> <span class="n">intro</span> <span class="n">b</span><span class="o">,</span>
    <span class="n">split</span><span class="bp">;</span> <span class="n">intro</span> <span class="n">h</span><span class="o">,</span>
    <span class="o">{</span> <span class="n">specialize</span> <span class="n">h₁</span> <span class="n">_</span> <span class="n">h</span><span class="o">,</span>
      <span class="n">rcases</span> <span class="n">h₁</span> <span class="k">with</span> <span class="o">⟨</span><span class="n">_</span><span class="o">,</span> <span class="n">h₁</span><span class="o">,</span> <span class="n">_</span><span class="o">⟩,</span>
      <span class="n">cases</span> <span class="n">Set.mem_empty</span> <span class="n">_</span> <span class="n">h₁</span> <span class="o">},</span>
    <span class="o">{</span> <span class="n">cases</span> <span class="n">Set.mem_empty</span> <span class="n">_</span> <span class="n">h</span> <span class="o">}},</span>
  <span class="o">{</span> <span class="n">cases</span> <span class="n">Set.mem_empty</span> <span class="n">_</span> <span class="n">h₁</span> <span class="o">},</span>
<span class="kd">end</span>
</code></pre></div>
</div></div>



<a name="289037696"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/set%20exponentiation%20in%20mathlib/near/289037696" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/set.20exponentiation.20in.20mathlib.html#289037696">(Jul 09 2022 at 11:57)</a>:</h4>
<p>should you not instead do it by giving <code>Set</code> a <code>has_pow</code> instance? (also, Zhao, note that <a href="https://leanprover-community.github.io/mathlib_docs/find/Set">docs#Set</a> is what you do _solely_ for set theory - for normal mathematics, you'd use a type)</p>



<a name="289038721"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/set%20exponentiation%20in%20mathlib/near/289038721" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Johnson <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/set.20exponentiation.20in.20mathlib.html#289038721">(Jul 09 2022 at 12:21)</a>:</h4>
<p><span class="user-mention silent" data-user-id="284160">Eric Rodriguez</span> <a href="#narrow/stream/113488-general/topic/set.20exponentiation.20in.20mathlib/near/289037696">said</a>:</p>
<blockquote>
<p>should you not instead do it by giving <code>Set</code> a <code>has_pow</code> instance?</p>
</blockquote>
<p>Of course, <code>has_pow</code> instance would be better, but I can't make it work for some reason.</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">instance</span> <span class="o">:</span> <span class="n">has_pow</span> <span class="n">Set</span> <span class="n">Set</span> <span class="o">:=</span> <span class="o">⟨</span><span class="bp">λ</span> <span class="n">a</span> <span class="n">b</span><span class="o">,</span> <span class="n">Set.funs</span> <span class="n">b</span> <span class="n">a</span><span class="o">⟩</span>
<span class="kd">variables</span> <span class="o">{</span><span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="n">Set</span><span class="o">}</span>
<span class="k">#check</span> <span class="n">X</span> <span class="bp">^</span> <span class="n">Y</span> <span class="c1">-- failed to synthesize type class instance for `has_pow Set Set`</span>
</code></pre></div>
<p>Maybe I made some silly mistake?</p>



<a name="289038881"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/set%20exponentiation%20in%20mathlib/near/289038881" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/set.20exponentiation.20in.20mathlib.html#289038881">(Jul 09 2022 at 12:25)</a>:</h4>
<p>it's a universe issue, <code>funs</code> is only defined on the same universe so Lean gets confused unless you specify everything:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">set_theory.zfc</span>

<span class="kd">universes</span> <span class="n">u</span>

<span class="kd">instance</span> <span class="o">:</span> <span class="n">has_pow</span> <span class="n">Set.</span><span class="o">{</span><span class="n">u</span><span class="o">}</span> <span class="n">Set.</span><span class="o">{</span><span class="n">u</span><span class="o">}</span> <span class="o">:=</span> <span class="o">⟨</span><span class="bp">λ</span> <span class="n">a</span> <span class="n">b</span><span class="o">,</span> <span class="n">Set.funs</span> <span class="n">b</span> <span class="n">a</span><span class="o">⟩</span>

<span class="kd">variables</span> <span class="o">{</span><span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="n">Set.</span><span class="o">{</span><span class="n">u</span><span class="o">}}</span>

<span class="k">#check</span> <span class="n">X</span> <span class="bp">^</span> <span class="n">Y</span>
</code></pre></div>



<a name="289038889"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/set%20exponentiation%20in%20mathlib/near/289038889" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/set.20exponentiation.20in.20mathlib.html#289038889">(Jul 09 2022 at 12:25)</a>:</h4>
<p>(the <code>.{u}</code>s are a bit redundant on the first one, but they're there to show a point)</p>



<a name="289039259"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/set%20exponentiation%20in%20mathlib/near/289039259" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Johnson <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/set.20exponentiation.20in.20mathlib.html#289039259">(Jul 09 2022 at 12:34)</a>:</h4>
<p>Thinking about it, maybe this is a special case when local notation is better. Defining a <code>has_pow</code> instance would require type annotations for <code>∅</code> and <code>{...}</code> whenever Lean can't unambiguously infer the <code>Set</code> type for <code>has_pow</code> and it will make theorem statements uglier. And besides that, ZFC theory is pretty much exclusive regarding the rest of mathlib, so when working in set theory we usually don't need other <code>has_pow</code> instances anyway.</p>



<a name="289049009"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/set%20exponentiation%20in%20mathlib/near/289049009" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/set.20exponentiation.20in.20mathlib.html#289049009">(Jul 09 2022 at 15:58)</a>:</h4>
<p><span class="user-mention silent" data-user-id="284160">Eric Rodriguez</span> <a href="#narrow/stream/113488-general/topic/set.20exponentiation.20in.20mathlib/near/289037696">said</a>:</p>
<blockquote>
<p>should you not instead do it by giving <code>Set</code> a <code>has_pow</code> instance? (also, Zhao, note that <a href="https://leanprover-community.github.io/mathlib_docs/find/Set">docs#Set</a> is what you do _solely_ for set theory - for normal mathematics, you'd use a type)</p>
</blockquote>
<p>More specifically, it's what you use solely for <em>ZFC set theory</em>. I don't think it's even used in mathlib outside of the file it's defined in.</p>



<a name="289049205"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/set%20exponentiation%20in%20mathlib/near/289049205" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/set.20exponentiation.20in.20mathlib.html#289049205">(Jul 09 2022 at 16:01)</a>:</h4>
<p>Yeah haha, <code>set_theory/zfc.lean</code> is a leaf file</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>