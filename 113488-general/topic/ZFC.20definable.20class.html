---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/ZFC.20definable.20class.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ZFC.20definable.20class.html">ZFC definable class</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="289072024"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ZFC%20definable%20class/near/289072024" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ZFC.20definable.20class.html#289072024">(Jul 10 2022 at 00:54)</a>:</h4>
<p>Currently, <a href="https://leanprover-community.github.io/mathlib_docs/find/pSet.definable">docs#pSet.definable</a> is implemented as a class. Should it be?</p>



<a name="289072030"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ZFC%20definable%20class/near/289072030" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ZFC.20definable.20class.html#289072030">(Jul 10 2022 at 00:54)</a>:</h4>
<p>My instinct says no, given what's been discussed here before: typeclasses are really only useful when there's no nontrivial equalities between objects, and sets/set functions completely break that rule</p>



<a name="289072109"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ZFC%20definable%20class/near/289072109" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ZFC.20definable.20class.html#289072109">(Jul 10 2022 at 00:57)</a>:</h4>
<p>On the other hand, we do have the theorem <a href="https://leanprover-community.github.io/mathlib_docs/find/classical.all_definable">docs#classical.all_definable</a> stating all functions are classically definable. So maybe this is meant to be used in a way more akin to <code>decidable_eq</code> or <code>decidable_rel</code></p>



<a name="289072329"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ZFC%20definable%20class/near/289072329" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ZFC.20definable.20class.html#289072329">(Jul 10 2022 at 01:03)</a>:</h4>
<p>(i.e. as an afterthought <span aria-label="stuck out tongue" class="emoji emoji-1f61b" role="img" title="stuck out tongue">:stuck_out_tongue:</span>)</p>



<a name="289075756"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ZFC%20definable%20class/near/289075756" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ZFC.20definable.20class.html#289075756">(Jul 10 2022 at 02:34)</a>:</h4>
<p>Oh yeah, I should probably tag <span class="user-mention" data-user-id="110049">@Mario Carneiro</span> who made this class to begin with</p>



<a name="289075905"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ZFC%20definable%20class/near/289075905" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ZFC.20definable.20class.html#289075905">(Jul 10 2022 at 02:38)</a>:</h4>
<p>The intention was to have definability instances for all formulas, but it was too much work at the time and classical.all_definable is an easy workaround using choice</p>



<a name="289075960"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ZFC%20definable%20class/near/289075960" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ZFC.20definable.20class.html#289075960">(Jul 10 2022 at 02:39)</a>:</h4>
<p>the rule for typeclasses is not about whether equalities exist but rather whether it is generally possible to prove all instances purely structurally on the value</p>



<a name="289076056"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ZFC%20definable%20class/near/289076056" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ZFC.20definable.20class.html#289076056">(Jul 10 2022 at 02:41)</a>:</h4>
<p><code>decidable</code> is a good example of this - there are often nontrivial equalities of decidable instances but the important thing is that you prove that a thing is decidable because it is structurally so</p>



<a name="289076115"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ZFC%20definable%20class/near/289076115" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ZFC.20definable.20class.html#289076115">(Jul 10 2022 at 02:42)</a>:</h4>
<p>Well, in this situation, that should probably be the case</p>



<a name="289076129"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ZFC%20definable%20class/near/289076129" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ZFC.20definable.20class.html#289076129">(Jul 10 2022 at 02:42)</a>:</h4>
<p>There is a metatheorem that says that any ZFC formula is definable, but I don't think it is easy to derive this using only typeclass search because you have to combine many arities of definability</p>



<a name="289076162"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ZFC%20definable%20class/near/289076162" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ZFC.20definable.20class.html#289076162">(Jul 10 2022 at 02:43)</a>:</h4>
<p>Though wouldn't this also be the case for e.g. continuous functions? What was the rationale for not making that into a typeclass again? Feel like this was brought up last time I started a similar discussion</p>



<a name="289076163"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ZFC%20definable%20class/near/289076163" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ZFC.20definable.20class.html#289076163">(Jul 10 2022 at 02:43)</a>:</h4>
<p>The idea is that it shouldn't be necessary to invoke choice to use the axiom of replacement</p>



<a name="289076204"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ZFC%20definable%20class/near/289076204" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ZFC.20definable.20class.html#289076204">(Jul 10 2022 at 02:44)</a>:</h4>
<p>It does hit the same issues as continuous functions</p>



<a name="289076210"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ZFC%20definable%20class/near/289076210" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ZFC.20definable.20class.html#289076210">(Jul 10 2022 at 02:44)</a>:</h4>
<p>the full derivation setup was never done</p>



<a name="289076212"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ZFC%20definable%20class/near/289076212" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ZFC.20definable.20class.html#289076212">(Jul 10 2022 at 02:44)</a>:</h4>
<p>so it's basically a stub right now</p>



<a name="289076215"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ZFC%20definable%20class/near/289076215" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ZFC.20definable.20class.html#289076215">(Jul 10 2022 at 02:44)</a>:</h4>
<p>with the only way to prove definability being <code>all_definable</code></p>



<a name="289076231"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ZFC%20definable%20class/near/289076231" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ZFC.20definable.20class.html#289076231">(Jul 10 2022 at 02:45)</a>:</h4>
<p>you can of course still do manual proofs for specific formulas, but a tactic would probably be best placed to do the full metatheorem</p>



<a name="289076232"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ZFC%20definable%20class/near/289076232" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ZFC.20definable.20class.html#289076232">(Jul 10 2022 at 02:45)</a>:</h4>
<p>I should mention that I just took care of your to-do: <a href="https://github.com/leanprover-community/mathlib/pull/15216">#15216</a></p>



<a name="289076238"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ZFC%20definable%20class/near/289076238" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ZFC.20definable.20class.html#289076238">(Jul 10 2022 at 02:45)</a>:</h4>
<p>But yeah, I agree that we need further development here</p>



<a name="289076315"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ZFC%20definable%20class/near/289076315" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ZFC.20definable.20class.html#289076315">(Jul 10 2022 at 02:46)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110049">Mario Carneiro</span> <a href="#narrow/stream/113488-general/topic/ZFC.20definable.20class/near/289076204">said</a>:</p>
<blockquote>
<p>It does hit the same issues as continuous functions</p>
</blockquote>
<p>What were those issues again?</p>



<a name="289076520"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ZFC%20definable%20class/near/289076520" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ZFC.20definable.20class.html#289076520">(Jul 10 2022 at 02:51)</a>:</h4>
<p>typeclass inference doesn't work well under lambdas</p>



<a name="289076569"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ZFC%20definable%20class/near/289076569" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ZFC.20definable.20class.html#289076569">(Jul 10 2022 at 02:52)</a>:</h4>
<p>you would like to reason that because <code>+</code> is continuous and <code>f</code> and <code>g</code> are continuous, <code>\lam x, f x + g x</code> is also continuous, and this is hard for the typeclass system to unify with the necessary instances</p>



<a name="289076612"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ZFC%20definable%20class/near/289076612" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ZFC.20definable.20class.html#289076612">(Jul 10 2022 at 02:53)</a>:</h4>
<p>If you write it in a first order way, like <code>map2 (+) f g</code>, then TC can do it</p>



<a name="289076623"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ZFC%20definable%20class/near/289076623" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ZFC.20definable.20class.html#289076623">(Jul 10 2022 at 02:53)</a>:</h4>
<p>but writing ZFC formulas like that would be pretty painful</p>



<a name="289076677"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ZFC%20definable%20class/near/289076677" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ZFC.20definable.20class.html#289076677">(Jul 10 2022 at 02:54)</a>:</h4>
<p>this is actually how computability/primrec "instances" are done right now, although it should get some automation at some point</p>



<a name="289076700"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ZFC%20definable%20class/near/289076700" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ZFC.20definable.20class.html#289076700">(Jul 10 2022 at 02:54)</a>:</h4>
<p>instances in quotes because they are worked out by hand</p>



<a name="289076766"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ZFC%20definable%20class/near/289076766" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ZFC.20definable.20class.html#289076766">(Jul 10 2022 at 02:56)</a>:</h4>
<p>you get stuff like <code>list_cons.comp (hg.comp fst (fst.comp snd)) (snd.comp snd)</code> where <code>fst.comp snd</code> and <code>snd.comp snd</code> are basically a way to write de bruijn variable references</p>



<a name="289076874"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ZFC%20definable%20class/near/289076874" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ZFC.20definable.20class.html#289076874">(Jul 10 2022 at 02:58)</a>:</h4>
<p>I see</p>



<a name="289076876"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ZFC%20definable%20class/near/289076876" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ZFC.20definable.20class.html#289076876">(Jul 10 2022 at 02:58)</a>:</h4>
<p>So the play here is to move away from instances and into metaprogramming</p>



<a name="289076880"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ZFC%20definable%20class/near/289076880" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ZFC.20definable.20class.html#289076880">(Jul 10 2022 at 02:58)</a>:</h4>
<p>Now would be a great time to actually learn about Lean metaprogramming</p>



<a name="289076975"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ZFC%20definable%20class/near/289076975" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ZFC.20definable.20class.html#289076975">(Jul 10 2022 at 03:00)</a>:</h4>
<p>What sorts of theorems would we want in the case of ZFC though?</p>



<a name="289077011"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ZFC%20definable%20class/near/289077011" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ZFC.20definable.20class.html#289077011">(Jul 10 2022 at 03:01)</a>:</h4>
<p>I can think of a few theorems for functions, like if <code>f</code> is definable, so is <code>lambda x, {f x}</code>, that kind of stuff</p>



<a name="289077014"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ZFC%20definable%20class/near/289077014" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ZFC.20definable.20class.html#289077014">(Jul 10 2022 at 03:01)</a>:</h4>
<p>But what about functions with more inputs?</p>



<a name="289078117"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ZFC%20definable%20class/near/289078117" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ZFC.20definable.20class.html#289078117">(Jul 10 2022 at 03:25)</a>:</h4>
<p>As far as theorems, we would want at least enough theorems so that manual proving would show the metatheorem</p>



<a name="289078164"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ZFC%20definable%20class/near/289078164" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ZFC.20definable.20class.html#289078164">(Jul 10 2022 at 03:26)</a>:</h4>
<p>So that means proving that all the primitives are definable, and forall and implies are definable</p>



<a name="289078169"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ZFC%20definable%20class/near/289078169" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ZFC.20definable.20class.html#289078169">(Jul 10 2022 at 03:26)</a>:</h4>
<p>this is difficult because you need some higher order notions of definability to make everything work out</p>



<a name="289080912"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ZFC%20definable%20class/near/289080912" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ZFC.20definable.20class.html#289080912">(Jul 10 2022 at 04:22)</a>:</h4>
<p><span class="user-mention" data-user-id="459227">@Violeta Hernández</span> if you learn metaprogramming you can help with the Lean 4 port! I'm going to try and learn it next week!</p>



<a name="289116052"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ZFC%20definable%20class/near/289116052" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ZFC.20definable.20class.html#289116052">(Jul 10 2022 at 17:56)</a>:</h4>
<p>On a related note, now that I brought ZFC up</p>



<a name="289116059"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ZFC%20definable%20class/near/289116059" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ZFC.20definable.20class.html#289116059">(Jul 10 2022 at 17:56)</a>:</h4>
<p><a href="https://leanprover-community.github.io/mathlib_docs/find/Class.mem_hom_left">docs#Class.mem_hom_left</a> and <a href="https://leanprover-community.github.io/mathlib_docs/find/Class.mem_hom_right">docs#Class.mem_hom_right</a></p>



<a name="289116080"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ZFC%20definable%20class/near/289116080" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ZFC.20definable.20class.html#289116080">(Jul 10 2022 at 17:57)</a>:</h4>
<p>These seem like bad <code>simp</code> lemmas? For the same reason</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">example</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">{</span><span class="n">x</span> <span class="o">:</span> <span class="n">set</span> <span class="n">α</span><span class="o">}</span> <span class="o">{</span><span class="n">a</span> <span class="o">:</span> <span class="n">α</span><span class="o">}</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">∈</span> <span class="n">x</span> <span class="bp">↔</span> <span class="n">x</span> <span class="n">a</span> <span class="o">:=</span> <span class="n">iff.rfl</span>
</code></pre></div>
<p>would be a very bad <code>simp</code> lemma</p>



<a name="289116133"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ZFC%20definable%20class/near/289116133" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ZFC.20definable.20class.html#289116133">(Jul 10 2022 at 17:58)</a>:</h4>
<p>I am not so sure, because there indeed is something that decreases when going from the LHS to the RHS, namely the number of coercions.</p>



<a name="289116147"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ZFC%20definable%20class/near/289116147" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ZFC.20definable.20class.html#289116147">(Jul 10 2022 at 17:59)</a>:</h4>
<p>I mean, <code>A x</code> shouldn't be the preferred way to say <code>x ∈ (A : set Set)</code></p>



<a name="289116203"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ZFC%20definable%20class/near/289116203" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ZFC.20definable.20class.html#289116203">(Jul 10 2022 at 18:00)</a>:</h4>
<p>(the RHS here isn't a coercion, since <code>Class</code> is def-eq to <code>set Set</code>)</p>



<a name="289116296"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ZFC%20definable%20class/near/289116296" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ZFC.20definable.20class.html#289116296">(Jul 10 2022 at 18:02)</a>:</h4>
<p>I see where this is coming from, since there's already another <code>∈</code> operator on <code>Class</code></p>



<a name="289116383"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ZFC%20definable%20class/near/289116383" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ZFC.20definable.20class.html#289116383">(Jul 10 2022 at 18:04)</a>:</h4>
<p>But I'm still not a fan</p>



<a name="289119062"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ZFC%20definable%20class/near/289119062" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ZFC.20definable.20class.html#289119062">(Jul 10 2022 at 19:10)</a>:</h4>
<p>Is it not possible to have two different <code>∈</code> instances for a type?</p>



<a name="289119070"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ZFC%20definable%20class/near/289119070" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ZFC.20definable.20class.html#289119070">(Jul 10 2022 at 19:10)</a>:</h4>
<p>Having an instance <code>has_mem Set Class</code> and another <code>has_mem Class Class</code> would solve the problem at hand, but it doesn't seem to work</p>



<a name="289119072"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ZFC%20definable%20class/near/289119072" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ZFC.20definable.20class.html#289119072">(Jul 10 2022 at 19:10)</a>:</h4>
<p>Defining either instance makes the other no longer work</p>



<a name="289119154"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ZFC%20definable%20class/near/289119154" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ZFC.20definable.20class.html#289119154">(Jul 10 2022 at 19:13)</a>:</h4>
<p>I guess we could make an exception and say that <code>A x</code> is actually the proper way to say a set belongs to a class, even if this is blatant definitional equality abuse</p>



<a name="289119396"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ZFC%20definable%20class/near/289119396" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ZFC.20definable.20class.html#289119396">(Jul 10 2022 at 19:20)</a>:</h4>
<p>Here's an alternate idea, maybe we could have a predicate</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">def</span> <span class="n">mem_set</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">Set.</span><span class="o">{</span><span class="n">u</span><span class="o">})</span> <span class="o">(</span><span class="n">A</span> <span class="o">:</span> <span class="n">Class.</span><span class="o">{</span><span class="n">u</span><span class="o">})</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">:=</span> <span class="n">A</span> <span class="n">x</span>
</code></pre></div>
<p>to hide the def-eq abuse</p>



<a name="289119446"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ZFC%20definable%20class/near/289119446" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ZFC.20definable.20class.html#289119446">(Jul 10 2022 at 19:20)</a>:</h4>
<p>Then change the theorems I mentioned to</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">@[simp]</span> <span class="kd">theorem</span> <span class="n">Class.mem_hom_left</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">Set</span><span class="o">)</span> <span class="o">(</span><span class="n">A</span> <span class="o">:</span> <span class="n">Class</span><span class="o">)</span> <span class="o">:</span> <span class="bp">↑</span><span class="n">x</span> <span class="bp">∈</span> <span class="n">A</span> <span class="bp">↔</span> <span class="n">mem_set</span> <span class="n">x</span> <span class="n">A</span> <span class="o">:=</span> <span class="gr">sorry</span>
</code></pre></div>



<a name="289119462"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ZFC%20definable%20class/near/289119462" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ZFC.20definable.20class.html#289119462">(Jul 10 2022 at 19:21)</a>:</h4>
<p>We could even go as far as to give custom notation like <code>∈ₛ</code> for this, but that seems unnecessary</p>



<a name="289131675"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ZFC%20definable%20class/near/289131675" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ZFC.20definable.20class.html#289131675">(Jul 11 2022 at 00:28)</a>:</h4>
<p>I decided to go the <code>mem_set</code> route, and also added <code>of_set</code> for the cast between <code>set Set</code> and <code>Class</code>.</p>



<a name="289131678"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ZFC%20definable%20class/near/289131678" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ZFC.20definable.20class.html#289131678">(Jul 11 2022 at 00:28)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib/pull/15234">#15234</a></p>



<a name="289135385"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ZFC%20definable%20class/near/289135385" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ZFC.20definable.20class.html#289135385">(Jul 11 2022 at 02:10)</a>:</h4>
<p>These are all technical definitions that are being used in the metamath export. I am against changing any of them</p>



<a name="289135409"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ZFC%20definable%20class/near/289135409" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ZFC.20definable.20class.html#289135409">(Jul 11 2022 at 02:11)</a>:</h4>
<p>Using application on <code>Class</code> is only abuse if we say it is</p>



<a name="289140525"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ZFC%20definable%20class/near/289140525" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ZFC.20definable.20class.html#289140525">(Jul 11 2022 at 03:57)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110049">Mario Carneiro</span> <a href="#narrow/stream/113488-general/topic/ZFC.20definable.20class/near/289135385">said</a>:</p>
<blockquote>
<p>These are all technical definitions that are being used in the metamath export. I am against changing any of them</p>
</blockquote>
<p>Metamath export? What do you mean?</p>



<a name="289140736"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ZFC%20definable%20class/near/289140736" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ZFC.20definable.20class.html#289140736">(Jul 11 2022 at 04:00)</a>:</h4>
<p>I get that we can do whatever we want with this little bit of code in a leaf file, but I still think it's best to be orderly. If we consider application on <code>set α</code> to be definitional abuse, then the situation surely shouldn't be any different with <code>Class = set Set</code>.</p>



<a name="289140866"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ZFC%20definable%20class/near/289140866" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ZFC.20definable.20class.html#289140866">(Jul 11 2022 at 04:02)</a>:</h4>
<p>It muddles the distinction between <code>Class</code> and <code>Set → Prop</code> (though maybe we don't want to make any such distinction? If so, we should instead document this decision and change <code>Set → Prop</code> to <code>Class</code> throughout).</p>



<a name="289141044"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ZFC%20definable%20class/near/289141044" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ZFC.20definable.20class.html#289141044">(Jul 11 2022 at 04:06)</a>:</h4>
<p>But yeah, I really want to know what that Metamath thing you mention is about. I don't think we should shy away from refactors just because the code is used by someone else.</p>



<a name="289141222"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ZFC%20definable%20class/near/289141222" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ZFC.20definable.20class.html#289141222">(Jul 11 2022 at 04:09)</a>:</h4>
<p>How long does the metamath export you're talking about take? If it's fast, should we run it in the CI so that nobody breaks it by accident? Or could you add comments to definitions that should not be changed because of this export?</p>



<a name="289141295"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ZFC%20definable%20class/near/289141295" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ZFC.20definable.20class.html#289141295">(Jul 11 2022 at 04:10)</a>:</h4>
<p>Oh wait, are you running the entirety of Metamath on top of the mathlib ZFC library?</p>



<a name="289141299"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ZFC%20definable%20class/near/289141299" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ZFC.20definable.20class.html#289141299">(Jul 11 2022 at 04:10)</a>:</h4>
<p>That's both impressive and dreadful</p>



<a name="289141352"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ZFC%20definable%20class/near/289141352" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ZFC.20definable.20class.html#289141352">(Jul 11 2022 at 04:11)</a>:</h4>
<p>I really do think that <code>Class</code> is in an annoying state where its conventions aren't quite consistent (we use <code>Class</code> sometimes and <code>Set → Prop</code> other times and we mix and match with def-eq) and clash with those of mathlib elsewhere (the aforementioned def-eq abuse)</p>



<a name="289141357"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ZFC%20definable%20class/near/289141357" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ZFC.20definable.20class.html#289141357">(Jul 11 2022 at 04:12)</a>:</h4>
<p>But I guess I can live with it if it's needed for that Metamath thing to work, as long as we document things properly</p>



<a name="289141647"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ZFC%20definable%20class/near/289141647" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ZFC.20definable.20class.html#289141647">(Jul 11 2022 at 04:17)</a>:</h4>
<p>But also, would changing definitions to other definitionally equal definitions really break the Metamath export? That's all I'm ultimately suggesting</p>



<a name="289153898"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ZFC%20definable%20class/near/289153898" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ZFC.20definable.20class.html#289153898">(Jul 11 2022 at 07:28)</a>:</h4>
<p><span class="user-mention" data-user-id="459227">@Violeta Hernández</span>, when threads like this spin out PRs, can you make sure to link back to the thread from the PR?</p>



<a name="289190152"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ZFC%20definable%20class/near/289190152" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ZFC.20definable.20class.html#289190152">(Jul 11 2022 at 13:30)</a>:</h4>
<p>Sorry, let me fix that</p>



<a name="289194801"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ZFC%20definable%20class/near/289194801" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ZFC.20definable.20class.html#289194801">(Jul 11 2022 at 14:02)</a>:</h4>
<p><span class="user-mention silent" data-user-id="459227">Violeta Hernández</span> <a href="#narrow/stream/113488-general/topic/ZFC.20definable.20class/near/289140736">said</a>:</p>
<blockquote>
<p>I get that we can do whatever we want with this little bit of code in a leaf file, but I still think it's best to be orderly. If we consider application on <code>set α</code> to be definitional abuse, then the situation surely shouldn't be any different with <code>Class = set Set</code>.</p>
</blockquote>
<p>We could change the definition to <code>Class = (Set -&gt; Prop)</code> to address this</p>



<a name="289197030"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ZFC%20definable%20class/near/289197030" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ZFC.20definable.20class.html#289197030">(Jul 11 2022 at 14:18)</a>:</h4>
<p>This wouldn't give us many instances automatically</p>



<a name="289197085"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ZFC%20definable%20class/near/289197085" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ZFC.20definable.20class.html#289197085">(Jul 11 2022 at 14:18)</a>:</h4>
<p>If the idea is that <code>Class</code> is morally <code>Set → Prop</code>, and we just define it as <code>set Set</code> to get the instances automatically, that's fine by me</p>



<a name="289197543"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ZFC%20definable%20class/near/289197543" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ZFC.20definable.20class.html#289197543">(Jul 11 2022 at 14:22)</a>:</h4>
<p><span class="user-mention silent" data-user-id="459227">Violeta Hernández</span> <a href="#narrow/stream/113488-general/topic/ZFC.20definable.20class/near/289141044">said</a>:</p>
<blockquote>
<p>But yeah, I really want to know what that Metamath thing you mention is about. I don't think we should shy away from refactors just because the code is used by someone else.</p>
</blockquote>
<p>Well, mathlib is also used as a basis for other projects. I don't think it is necessary to gratuitously break downstream projects without good reason. (That is, <code>set_theory.zfc</code> only looks like a leaf file because it's not used <em>in mathlib</em>)</p>



<a name="289197790"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ZFC%20definable%20class/near/289197790" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ZFC.20definable.20class.html#289197790">(Jul 11 2022 at 14:24)</a>:</h4>
<p>I mean, mathlib changes so rapidly and Lean is so unpredictable in some aspects that I imagine that most refactors inadvertently break some mathlib dependencies</p>



<a name="289197862"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ZFC%20definable%20class/near/289197862" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ZFC.20definable.20class.html#289197862">(Jul 11 2022 at 14:25)</a>:</h4>
<p>But sure, we should have a good reason for these changes</p>



<a name="289197900"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ZFC%20definable%20class/near/289197900" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ZFC.20definable.20class.html#289197900">(Jul 11 2022 at 14:25)</a>:</h4>
<p>What do you think about replacing <code>Set → Prop</code> by <code>Class</code>, and explaining in a docstring that <code>Class</code> is morally <code>Set → Prop</code>?</p>



<a name="289197925"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ZFC%20definable%20class/near/289197925" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ZFC.20definable.20class.html#289197925">(Jul 11 2022 at 14:25)</a>:</h4>
<p>Would that break that Metamath thing?</p>



<a name="289198027"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ZFC%20definable%20class/near/289198027" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ZFC.20definable.20class.html#289198027">(Jul 11 2022 at 14:26)</a>:</h4>
<p><span class="user-mention silent" data-user-id="214703">Yury G. Kudryashov</span> <a href="#narrow/stream/113488-general/topic/ZFC.20definable.20class/near/289141222">said</a>:</p>
<blockquote>
<p>How long does the metamath export you're talking about take? If it's fast, should we run it in the CI so that nobody breaks it by accident? Or could you add comments to definitions that should not be changed because of this export?</p>
</blockquote>
<p>It's somewhere in the 30 min range. I generally treat it as an external project which depends on mathlib, it has very few dependencies and they are all in the <code>set_theory.zfc</code> file</p>



<a name="289198365"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ZFC%20definable%20class/near/289198365" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ZFC.20definable.20class.html#289198365">(Jul 11 2022 at 14:28)</a>:</h4>
<p>Changing definitions without changing defeqs probably won't actually break things, since the export generates a lean source file with no tactics and lots of <code>@</code> to avoid any lean weirdness so the only thing that would cause problems is typechecking failure due to changed definitions</p>



<a name="289198465"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ZFC%20definable%20class/near/289198465" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ZFC.20definable.20class.html#289198465">(Jul 11 2022 at 14:28)</a>:</h4>
<p>See <a href="#narrow/stream/113488-general/topic/Prime.20number.20theorem.20in.20lean/near/168472336">https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Prime.20number.20theorem.20in.20lean/near/168472336</a></p>



<a name="289198832"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ZFC%20definable%20class/near/289198832" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ZFC.20definable.20class.html#289198832">(Jul 11 2022 at 14:31)</a>:</h4>
<p>Another question</p>



<a name="289198882"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ZFC%20definable%20class/near/289198882" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ZFC.20definable.20class.html#289198882">(Jul 11 2022 at 14:31)</a>:</h4>
<p>Is <a href="https://leanprover-community.github.io/mathlib_docs/find/Class.to_Set">docs#Class.to_Set</a> another one of those definitions used in the Metamath export?</p>



<a name="289198980"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ZFC%20definable%20class/near/289198980" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ZFC.20definable.20class.html#289198980">(Jul 11 2022 at 14:32)</a>:</h4>
<p>If we were to replace <code>Set → Prop</code> by <code>Class</code>, then <code>to_Set</code> would just be a restatement of the <code>∈</code> predicate on classes</p>



<a name="289199040"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ZFC%20definable%20class/near/289199040" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ZFC.20definable.20class.html#289199040">(Jul 11 2022 at 14:32)</a>:</h4>
<p>(and by the way, I also want to inline <code>Class.mem</code> into the <code>has_mem</code> instance, would that break things?)</p>



<a name="289199487"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ZFC%20definable%20class/near/289199487" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ZFC.20definable.20class.html#289199487">(Jul 11 2022 at 14:35)</a>:</h4>
<p>Actually, more generally: what am I allowed to change, and would it be easy for me to fix the Metamath thing if anything broke?</p>



<a name="289199618"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ZFC%20definable%20class/near/289199618" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ZFC.20definable.20class.html#289199618">(Jul 11 2022 at 14:36)</a>:</h4>
<p>Another project that depends on ZFC is the independence of CH</p>



<a name="289199920"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ZFC%20definable%20class/near/289199920" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ZFC.20definable.20class.html#289199920">(Jul 11 2022 at 14:39)</a>:</h4>
<p>metamath will use <code>Class.mem</code> and <code>Class.of_Set</code> for sure but it may not use application</p>



<a name="289200286"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ZFC%20definable%20class/near/289200286" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ZFC.20definable.20class.html#289200286">(Jul 11 2022 at 14:41)</a>:</h4>
<p>as for going in and refactoring the export, you might be able to but you might need a different skill set to do it since part of it is written in haskell</p>



<a name="289200450"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ZFC%20definable%20class/near/289200450" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ZFC.20definable.20class.html#289200450">(Jul 11 2022 at 14:42)</a>:</h4>
<p>Most of the stuff that is likely to break is in <a href="https://github.com/digama0/mm0/blob/build/mm0-lean/mm0/set/basic.lean">basic.lean</a> or <a href="https://github.com/digama0/mm0/blob/build/mm0-lean/mm0/set/post.lean">post.lean</a></p>



<a name="289200569"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ZFC%20definable%20class/near/289200569" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ZFC.20definable.20class.html#289200569">(Jul 11 2022 at 14:43)</a>:</h4>
<p>Oh, it's good to have that reference</p>



<a name="289200597"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ZFC%20definable%20class/near/289200597" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ZFC.20definable.20class.html#289200597">(Jul 11 2022 at 14:44)</a>:</h4>
<p>Maybe there is some small subset of the metamath export the that could be added to archive, at least to avoid breaking the whole thing.</p>



<a name="289200654"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ZFC%20definable%20class/near/289200654" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ZFC.20definable.20class.html#289200654">(Jul 11 2022 at 14:44)</a>:</h4>
<p><a href="https://github.com/digama0/mm0/blob/build/mm0-lean/mm0/set/zfc_extra.lean">zfc_extra.lean</a> is kind of a for_mathlib file</p>



<a name="289200695"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ZFC%20definable%20class/near/289200695" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ZFC.20definable.20class.html#289200695">(Jul 11 2022 at 14:44)</a>:</h4>
<p>I could port those theorems over if you want</p>



<a name="289200726"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ZFC%20definable%20class/near/289200726" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ZFC.20definable.20class.html#289200726">(Jul 11 2022 at 14:44)</a>:</h4>
<p>and as you can see most of this hasn't been touched since 2019</p>



<a name="289200818"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ZFC%20definable%20class/near/289200818" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ZFC.20definable.20class.html#289200818">(Jul 11 2022 at 14:45)</a>:</h4>
<p>but I tend to work in areas that don't break all that often so it probably still works</p>



<a name="289200978"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ZFC%20definable%20class/near/289200978" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ZFC.20definable.20class.html#289200978">(Jul 11 2022 at 14:46)</a>:</h4>
<p>Are these files generated automatically?</p>



<a name="289201046"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ZFC%20definable%20class/near/289201046" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ZFC.20definable.20class.html#289201046">(Jul 11 2022 at 14:46)</a>:</h4>
<p>no, the files I linked are all manual, the automatic stuff is not checked in</p>



<a name="289201152"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ZFC%20definable%20class/near/289201152" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ZFC.20definable.20class.html#289201152">(Jul 11 2022 at 14:47)</a>:</h4>
<p>well, most of basic.lean is based on an automatically generated file</p>



<a name="289201193"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ZFC%20definable%20class/near/289201193" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ZFC.20definable.20class.html#289201193">(Jul 11 2022 at 14:47)</a>:</h4>
<p>it's more sensitive to changes in <a href="https://github.com/metamath/set.mm/">set.mm</a> than it is to changes in lean/mathlib</p>



<a name="289201287"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ZFC%20definable%20class/near/289201287" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ZFC.20definable.20class.html#289201287">(Jul 11 2022 at 14:48)</a>:</h4>
<p>Oh perfect</p>



<a name="289201324"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ZFC%20definable%20class/near/289201324" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ZFC.20definable.20class.html#289201324">(Jul 11 2022 at 14:48)</a>:</h4>
<p>I'll tread carefully to avoid breaking it, but I doubt I will with what I have in mind</p>



<a name="289201449"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ZFC%20definable%20class/near/289201449" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ZFC.20definable.20class.html#289201449">(Jul 11 2022 at 14:49)</a>:</h4>
<p><a href="https://github.com/digama0/mm0/blob/build/mm0-lean/mm0/set/set.lean">https://github.com/digama0/mm0/blob/build/mm0-lean/mm0/set/set.lean</a> is one of the autogenerated files (it's broken into 6 parts)</p>



<a name="289202438"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ZFC%20definable%20class/near/289202438" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ZFC.20definable.20class.html#289202438">(Jul 11 2022 at 14:55)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib/pull/15248">#15248</a></p>



<a name="289406692"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ZFC%20definable%20class/near/289406692" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ZFC.20definable.20class.html#289406692">(Jul 13 2022 at 01:40)</a>:</h4>
<p>What's up with the line just above <a href="https://leanprover-community.github.io/mathlib_docs/find/Set.mem_Union">docs#Set.mem_Union</a>?</p>



<a name="289406736"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ZFC%20definable%20class/near/289406736" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ZFC.20definable.20class.html#289406736">(Jul 13 2022 at 01:41)</a>:</h4>
<p>That's global notation, right? Which I presume overrides the meaning of <code>⋃</code> elsewhere</p>



<a name="289406743"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ZFC%20definable%20class/near/289406743" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ZFC.20definable.20class.html#289406743">(Jul 13 2022 at 01:41)</a>:</h4>
<p>If so, that's really silly, since that notation is only used once</p>



<a name="289406806"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ZFC%20definable%20class/near/289406806" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ZFC.20definable.20class.html#289406806">(Jul 13 2022 at 01:42)</a>:</h4>
<p>Regarding both this and the similar notation for <code>Class</code>, what should be done? Should these be localized, prefixed/suffixed with something else, or is there no point in having them?</p>



<a name="289471155"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ZFC%20definable%20class/near/289471155" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ZFC.20definable.20class.html#289471155">(Jul 13 2022 at 14:54)</a>:</h4>
<p><span class="user-mention silent" data-user-id="459227">Violeta Hernández</span> <a href="#narrow/stream/113488-general/topic/ZFC.20definable.20class/near/289406736">said</a>:</p>
<blockquote>
<p>That's global notation, right? Which I presume overrides the meaning of <code>⋃</code> elsewhere</p>
</blockquote>
<p>Yes, it's global notation if you import it, but no it doesn't necessarily override the meaning of <code>⋃</code> since Lean has a notation disambiguation system. However, this one seems problematic since it has a different sequence of parsing actions from those for <a href="https://github.com/leanprover-community/mathlib/blob/00dbc7b27bf4a4d2b0990d95e555de0bf23dce8a/src/data/set/lattice.lean#L85"><code>set.Union</code></a>. I believe this is why <code>set.sUnion</code> uses <a href="https://github.com/leanprover-community/mathlib/blob/00dbc7b27bf4a4d2b0990d95e555de0bf23dce8a/src/data/set/lattice.lean#L74"><code>⋃₀</code></a>.</p>



<a name="289471222"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ZFC%20definable%20class/near/289471222" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ZFC.20definable.20class.html#289471222">(Jul 13 2022 at 14:55)</a>:</h4>
<p><span class="user-mention silent" data-user-id="459227">Violeta Hernández</span> <a href="#narrow/stream/113488-general/topic/ZFC.20definable.20class/near/289406743">said</a>:</p>
<blockquote>
<p>If so, that's really silly, since that notation is only used once</p>
</blockquote>
<p>Don't forget that just because something isn't used in mathlib doesn't mean it's not used by someone that uses mathlib as a dependency. This seems like something someone might want to use.</p>



<a name="289475787"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ZFC%20definable%20class/near/289475787" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ZFC.20definable.20class.html#289475787">(Jul 13 2022 at 15:26)</a>:</h4>
<p><span class="user-mention silent" data-user-id="306601">Kyle Miller</span> <a href="#narrow/stream/113488-general/topic/ZFC.20definable.20class/near/289471155">said</a>:</p>
<blockquote>
<p>However, this one seems problematic since it has a different sequence of parsing actions from those for <a href="https://github.com/leanprover-community/mathlib/blob/00dbc7b27bf4a4d2b0990d95e555de0bf23dce8a/src/data/set/lattice.lean#L85"><code>set.Union</code></a>. I believe this is why <code>set.sUnion</code> uses <a href="https://github.com/leanprover-community/mathlib/blob/00dbc7b27bf4a4d2b0990d95e555de0bf23dce8a/src/data/set/lattice.lean#L74"><code>⋃₀</code></a>.</p>
</blockquote>
<p>Should we suffix the notation for <code>Set.Union</code> too, then?</p>



<a name="289483064"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ZFC%20definable%20class/near/289483064" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ZFC.20definable.20class.html#289483064">(Jul 13 2022 at 16:13)</a>:</h4>
<p>That seems reasonable to me. I don't know what <span class="user-mention" data-user-id="110049">@Mario Carneiro</span> thinks (and I've never used the ZFC module myself), but I'd expect that the intent is that the ZFC API closely mirror the <code>set</code> API wherever possible.</p>



<a name="289505179"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ZFC%20definable%20class/near/289505179" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ZFC.20definable.20class.html#289505179">(Jul 13 2022 at 19:00)</a>:</h4>
<p>I don't have any good ideas for suffixes though...</p>



<a name="289505226"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ZFC%20definable%20class/near/289505226" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ZFC.20definable.20class.html#289505226">(Jul 13 2022 at 19:00)</a>:</h4>
<p>I wanted to be lazy and do a subscript Z for ZFC but that doesn't exist in Unicode</p>



<a name="289510087"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ZFC%20definable%20class/near/289510087" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ZFC.20definable.20class.html#289510087">(Jul 13 2022 at 19:38)</a>:</h4>
<p>Oh, I thought when you said "should we suffix the notation" that we were talking about using <code>⋃₀</code>, which should work.</p>



<a name="289523572"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ZFC%20definable%20class/near/289523572" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ZFC.20definable.20class.html#289523572">(Jul 13 2022 at 21:29)</a>:</h4>
<p>But that means we'll still have a clash</p>



<a name="289523605"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ZFC%20definable%20class/near/289523605" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ZFC.20definable.20class.html#289523605">(Jul 13 2022 at 21:29)</a>:</h4>
<p>Is clashing with <code>⋃₀</code> somehow better than clashing with <code>⋃</code>?</p>



<a name="289526324"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ZFC%20definable%20class/near/289526324" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Junyan Xu <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ZFC.20definable.20class.html#289526324">(Jul 13 2022 at 21:55)</a>:</h4>
<p>might consider using superscript ᶻ (<a href="https://en.wikipedia.org/wiki/Unicode_subscripts_and_superscripts#Latin,_Greek_and_Cyrillic_tables">reference</a>)</p>



<a name="289528614"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ZFC%20definable%20class/near/289528614" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ZFC.20definable.20class.html#289528614">(Jul 13 2022 at 22:20)</a>:</h4>
<p><span class="user-mention" data-user-id="459227">@Violeta Hernández</span> Yes, Lean should be able to disambiguate it better because it has the same "shape" vs <code>⋃</code>. That's what I was referring to with parser actions.</p>



<a name="289528752"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ZFC%20definable%20class/near/289528752" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ZFC.20definable.20class.html#289528752">(Jul 13 2022 at 22:22)</a>:</h4>
<p>Lean takes all possible parses and uses types to try to choose a single possibility. I don't think it works when one uses binders and the other doesn't, but I haven't checked yet.</p>



<a name="289546691"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ZFC%20definable%20class/near/289546691" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ZFC.20definable.20class.html#289546691">(Jul 14 2022 at 03:09)</a>:</h4>
<p>I think the notation should be <code>⋃₀</code> and the name should be <code>sUnion</code> for consistency with data.set.basic</p>



<a name="289547073"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ZFC%20definable%20class/near/289547073" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ZFC.20definable.20class.html#289547073">(Jul 14 2022 at 03:16)</a>:</h4>
<p><span class="user-mention silent" data-user-id="306601">Kyle Miller</span> <a href="#narrow/stream/113488-general/topic/ZFC.20definable.20class/near/289528614">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="459227">Violeta Hernández</span> Yes, Lean should be able to disambiguate it better because it has the same "shape" vs <code>⋃</code>. That's what I was referring to with parser actions.</p>
</blockquote>
<p>I tested this and it doesn't seem to be the case. <a href="https://leanprover-community.github.io/lean-web-editor/#code=import%20set_theory.zfc%0A%0Anotation%20%60%E2%8B%83%E2%82%80%60%20%3A%3D%20Set.Union%0A%0Adef%20union%20%28x%20y%20%3A%20Set%29%20%3A%20Set%20%3A%3D%20%E2%8B%83%E2%82%80%20%7Bx%2C%20y%7D">Lean Web Editor</a></p>



<a name="289547089"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ZFC%20definable%20class/near/289547089" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ZFC.20definable.20class.html#289547089">(Jul 14 2022 at 03:16)</a>:</h4>
<p>It tries using <code>set.sUnion</code> instead</p>



<a name="289603491"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ZFC%20definable%20class/near/289603491" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ZFC.20definable.20class.html#289603491">(Jul 14 2022 at 15:00)</a>:</h4>
<p><span class="user-mention" data-user-id="459227">@Violeta Hernández</span> That example uses <code>notation `⋃₀ ` </code> instead of <code>prefix `⋃₀ `:110</code>, which would instead ensure the two unions have the same parsers. (See <a href="https://github.com/leanprover-community/mathlib/blob/00dbc7b27bf4a4d2b0990d95e555de0bf23dce8a/src/data/set/lattice.lean#L74">this</a>.)</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">set_theory.zfc</span>

<span class="kd">prefix</span> <span class="bp">`⋃₀</span> <span class="bp">`</span><span class="o">:</span><span class="mi">110</span> <span class="o">:=</span> <span class="n">Set.Union</span>

<span class="kd">def</span> <span class="n">union</span> <span class="o">(</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">Set</span><span class="o">)</span> <span class="o">:</span> <span class="n">Set</span> <span class="o">:=</span> <span class="bp">⋃₀</span> <span class="o">{</span><span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">}</span>
</code></pre></div>



<a name="289604132"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ZFC%20definable%20class/near/289604132" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ZFC.20definable.20class.html#289604132">(Jul 14 2022 at 15:04)</a>:</h4>
<p>One way to check this is that with the first version you have</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">notation</span> <span class="bp">`⋃₀</span> <span class="bp">`</span> <span class="o">:=</span> <span class="n">Set.Union</span>
<span class="k">#print</span> <span class="kd">notation</span> <span class="bp">⋃₀</span>
<span class="c">/-</span><span class="cm"></span>
<span class="cm">`⋃₀`:110 := Set.Union</span>
<span class="cm">`⋃₀`:110 _:110 := set.sUnion #0</span>
<span class="cm">-/</span>
</code></pre></div>
<p>but with the second you have</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">prefix</span> <span class="bp">`⋃₀</span> <span class="bp">`</span><span class="o">:</span><span class="mi">110</span> <span class="o">:=</span> <span class="n">Set.Union</span>
<span class="k">#print</span> <span class="kd">notation</span> <span class="bp">⋃₀</span>
<span class="c">/-</span><span class="cm"></span>
<span class="cm">`⋃₀`:110 _:110 :=</span>
<span class="cm">  | set.sUnion #0</span>
<span class="cm">  | Set.Union #0</span>
<span class="cm">-/</span>
</code></pre></div>
<p>I believe that's what you need to see (options with <code>|</code>) for the disambiguation system to actually work.</p>



<a name="289605149"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/ZFC%20definable%20class/near/289605149" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/ZFC.20definable.20class.html#289605149">(Jul 14 2022 at 15:11)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib/pull/15352">#15352</a></p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>