---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/Finite.20Set.20Questions.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Finite.20Set.20Questions.html">Finite Set Questions</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="321721968"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Finite%20Set%20Questions/near/321721968" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jack Thorns <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Finite.20Set.20Questions.html#321721968">(Jan 16 2023 at 21:44)</a>:</h4>
<p>Hello, I've recently been trying to get into using Lean with mathlib for a few weeks now, and I have many confusions over what's going on with finsets that I've been unable to figure out myself.</p>
<p>In particular I'm trying to take a standard set I've defined on the naturals, and show that it is finite (and the way mathlib seems to be doing this is showing it's equivalent to some kind of finset?) if and only if another condition holds. In the forward implication, I have that it's finite, and to show the "other condition". </p>
<p>I could easily do so by using the well ordering theorem and the knowledge it has an upper bound on paper, but I'm not sure how to do this with lean. Equivalently, I've seen that finsets have a max defined for them, but I am unsure how to extract this as an object as I can abuse it's properties.</p>
<p>I'd appreciate some direction towards more detailed resources on how finsets work, and how they interact with sets, or alternatively some simple examples of them being used. In particular, the <code>↥</code> symbol is confusing.</p>
<p>I can provide details on the exact thing I'm trying to do / show if need be, but I'm still looking for more general help / resources on finsets.</p>
<p>Thank you!</p>



<a name="321722493"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Finite%20Set%20Questions/near/321722493" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Finite.20Set.20Questions.html#321722493">(Jan 16 2023 at 21:49)</a>:</h4>
<p>You don't _have_ to use <code>finset</code>; there are two implementations of finite sets -- <code>set.finite</code> and <code>finset</code>. Without any context about what you're trying to do it's difficult to suggest which one would be best to work with. </p>
<p>For your specific questions, what you should do is abstract out a lemma (e.g. write a lemma in your file saying something like <code>\forall s : set \N, s.finite &lt;-&gt; \exists B, \forall x \in s, x \le B</code> or whatever the precise statement that you need is, and then sorry the proof, check that the lemma is what you need to finish what you're actually doing, and then copy the lemma into a new file, add imports to make it work, and then post the minimised file as a <a href="https://leanprover-community.github.io/mwe.html">#mwe</a> and ask for advice on how to fill in the sorry. In general, questions of the form "how do I fill in the sorry in this code which will compile on your machine" are far more effectively answered on this site than questions of the form you've just asked.</p>



<a name="321722638"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Finite%20Set%20Questions/near/321722638" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Finite.20Set.20Questions.html#321722638">(Jan 16 2023 at 21:50)</a>:</h4>
<p>The <code>↥</code> symbol is the way to promote a term to a type. Lean uses type theory, so everything is a universe, a type or a term. A term <code>s</code> of type <code>finset \N</code> is a term, and it's not a type. But <code>↥s</code> will be a type.</p>



<a name="321723847"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Finite%20Set%20Questions/near/321723847" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jack Thorns <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Finite.20Set.20Questions.html#321723847">(Jan 16 2023 at 22:02)</a>:</h4>
<p>Sorry, I should've specified what I'm trying to do from the start.</p>
<p>I'm trying to prove that <code>def prime_pow_dvd_n (n p: ℕ) (h: nat.prime p) : set ℕ  := { k | p^k ∣ n }</code> is finite if and only if <code>n</code> is not zero, purely as an exercise in writing proofs using lean.</p>
<p>What I don't quite understand is how to provide a proof that a particular set is indeed finite, which would both be needed in this proof, or in the lemma you suggested (which I agree does seem to be a useful), which is why I would appreciate an example.</p>
<p>There seem to be built-in theorems for equivalences with being nonempty and a fintype (I also can't figure out what that is), which I can't figure out how to use either.</p>



<a name="321724132"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Finite%20Set%20Questions/near/321724132" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Finite.20Set.20Questions.html#321724132">(Jan 16 2023 at 22:04)</a>:</h4>
<p>The way you can prove this set is finite is by showing that it's smaller than some obviously finite set. Here you could take <code>↑(finset.range n)</code> as the obviously finite set</p>



<a name="321725165"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Finite%20Set%20Questions/near/321725165" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jack Thorns <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Finite.20Set.20Questions.html#321725165">(Jan 16 2023 at 22:14)</a>:</h4>
<p>That is something I've tried but have been unable to do, there's so many different types and terms going on that it's quite confusing, since it's mixing finsets and standard sets. Is there some way to force the finset into being a "normal " set type, keeping the proof that it's finite?</p>



<a name="321725226"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Finite%20Set%20Questions/near/321725226" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Finite.20Set.20Questions.html#321725226">(Jan 16 2023 at 22:15)</a>:</h4>
<p>yes, that's what the arrow is doing in yael's quote</p>



<a name="321725233"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Finite%20Set%20Questions/near/321725233" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Finite.20Set.20Questions.html#321725233">(Jan 16 2023 at 22:15)</a>:</h4>
<p>Yes, if <code>s : finset α</code>, then <code>↑s : set α</code> with the proof being <a href="https://leanprover-community.github.io/mathlib_docs/find/finset.finite_to_set">docs#finset.finite_to_set</a></p>



<a name="321725368"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Finite%20Set%20Questions/near/321725368" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jack Thorns <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Finite.20Set.20Questions.html#321725368">(Jan 16 2023 at 22:17)</a>:</h4>
<p>Aha! Thank you, I will give this a try.</p>



<a name="321727961"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Finite%20Set%20Questions/near/321727961" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jack Thorns <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Finite.20Set.20Questions.html#321727961">(Jan 16 2023 at 22:42)</a>:</h4>
<p>The (unproven) lemma has indeed let me make progress, but I'm getting some strange things happening unrelated now?</p>
<p>I have the goal <code>k + 1 ∈ prime_pow_dvd_n n p h</code>, (this set is just the exact same set for a natural n and prime p as the one above, and h is a proof that p is prime), but when I told lean to split, why exactly did it create two goals, one with <code>n = p ^ (k + 1) * ?m_1</code> and the other just <code>ℕ</code>?</p>



<a name="321730689"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Finite%20Set%20Questions/near/321730689" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Stevens <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Finite.20Set.20Questions.html#321730689">(Jan 16 2023 at 23:12)</a>:</h4>
<p>If that was a "I don't understand what happened here", it's that Lean couldn't figure out what number <code>m</code> would make <code>n = p^(k+1) * m</code>, so it has created a goal for you to supply it with <code>m</code>, and a goal for you to prove that your choice of <code>m</code> works. (If instead that was a "why was Lean unable to figure out <code>m</code>", or "why did Lean want to know <code>m</code> in the first place", I pass.)</p>



<a name="321732839"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Finite%20Set%20Questions/near/321732839" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jack Thorns <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Finite.20Set.20Questions.html#321732839">(Jan 16 2023 at 23:40)</a>:</h4>
<p>It was the first one, thank you.</p>



<a name="321735213"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Finite%20Set%20Questions/near/321735213" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jack Thorns <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Finite.20Set.20Questions.html#321735213">(Jan 17 2023 at 00:12)</a>:</h4>
<p>Is it possible to extract the maximum of a finite set as a term?</p>



<a name="321740910"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Finite%20Set%20Questions/near/321740910" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Finite.20Set.20Questions.html#321740910">(Jan 17 2023 at 01:25)</a>:</h4>
<p>Not if the set is empty</p>



<a name="321740928"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Finite%20Set%20Questions/near/321740928" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Finite.20Set.20Questions.html#321740928">(Jan 17 2023 at 01:25)</a>:</h4>
<p><a href="https://leanprover-community.github.io/mathlib_docs/find/finset.max">docs#finset.max</a> / <a href="https://leanprover-community.github.io/mathlib_docs/find/finset.max'">docs#finset.max'</a> / <a href="https://leanprover-community.github.io/mathlib_docs/find/finset.inf">docs#finset.inf</a> are all good options</p>



<a name="321751536"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Finite%20Set%20Questions/near/321751536" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jack Thorns <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Finite.20Set.20Questions.html#321751536">(Jan 17 2023 at 04:15)</a>:</h4>
<p>I've been trying to prove the lemma suggested by Kevin, and I have the set converted to a finset using the proof that the set is finite.</p>
<p>However, now I'm trying to extract the maximum of the set as a term like in the docs, and as you'd expect it requires a proof that the set is nonempty.</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">example</span> <span class="o">{</span><span class="n">s</span> <span class="o">:</span> <span class="n">set</span> <span class="n">ℕ</span><span class="o">}</span> <span class="o">(</span><span class="n">h</span><span class="o">:</span> <span class="n">s.nonempty</span><span class="o">)</span> <span class="o">:</span> <span class="n">s.finite</span> <span class="bp">↔</span> <span class="bp">∃</span> <span class="n">k</span><span class="o">,</span> <span class="bp">∀</span> <span class="n">x</span> <span class="bp">∈</span> <span class="n">s</span><span class="o">,</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">k</span>
<span class="kd">begin</span>
    <span class="n">split</span><span class="o">,</span>
    <span class="o">{</span>
        <span class="n">intro</span> <span class="n">h'</span><span class="o">,</span>
        <span class="k">let</span> <span class="n">s₀</span> <span class="o">:=</span> <span class="o">(</span><span class="n">set.finite.to_finset</span> <span class="n">h'</span><span class="o">),</span>
    <span class="o">}</span>
<span class="kd">end</span>
</code></pre></div>
<p>However, when I try and extract the max using something like <code>let m := h₁.max'</code>, it requires the proof <code>h₁.nonempty</code>, but I only have <code>s.nonempty</code>. I can't seem to find a theorem (if it exists) that can give me what I need, so is there something I'm missing or is this just a flawed approach?</p>



<a name="321771956"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Finite%20Set%20Questions/near/321771956" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Finite.20Set.20Questions.html#321771956">(Jan 17 2023 at 07:57)</a>:</h4>
<p>It would be nicer (for me, because I'm lazy and don't know the entire library) if you were to post your question as a <a href="https://leanprover-community.github.io/mwe.html">#mwe</a> with all imports, rather than just a code snippet which doesn't work out of the box.</p>



<a name="321773488"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Finite%20Set%20Questions/near/321773488" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Finite.20Set.20Questions.html#321773488">(Jan 17 2023 at 08:09)</a>:</h4>
<p>There's no <code>h₁</code> in your code snippet, so I can't really help either.</p>



<a name="321777809"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Finite%20Set%20Questions/near/321777809" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Finite.20Set.20Questions.html#321777809">(Jan 17 2023 at 08:38)</a>:</h4>
<p>When you say "it requires the proof <code>h₁.nonempty</code>", who is "it" exactly? Is it some lemma you found in the library, so that we can have a look at it?</p>



<a name="321779695"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Finite%20Set%20Questions/near/321779695" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Finite.20Set.20Questions.html#321779695">(Jan 17 2023 at 08:50)</a>:</h4>
<p>The standard answer here is <a href="https://leanprover-community.github.io/mwe.html">#mwe</a> :)</p>



<a name="321788433"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Finite%20Set%20Questions/near/321788433" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Finite.20Set.20Questions.html#321788433">(Jan 17 2023 at 09:40)</a>:</h4>
<p>This ends up being true even without the <code>s.nonempty</code> hypothesis. You can also prove it without talking about <code>finset</code> at all; you can use <a href="https://leanprover-community.github.io/mathlib_docs/find/set.exists_max_image">docs#set.exists_max_image</a> for getting the maximum of a finite <code>set</code>.</p>
<div class="spoiler-block"><div class="spoiler-header">
</div><div class="spoiler-content" aria-hidden="true">
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">tactic</span>

<span class="kd">example</span> <span class="o">{</span><span class="n">s</span> <span class="o">:</span> <span class="n">set</span> <span class="n">ℕ</span><span class="o">}</span> <span class="o">:</span> <span class="n">s.finite</span> <span class="bp">↔</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">k</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">),</span> <span class="bp">∀</span> <span class="n">x</span> <span class="bp">∈</span> <span class="n">s</span><span class="o">,</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">k</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">split</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">intro</span> <span class="n">hf</span><span class="o">,</span>
    <span class="n">by_cases</span> <span class="n">hn</span> <span class="o">:</span> <span class="n">s.nonempty</span><span class="o">,</span>
    <span class="o">{</span> <span class="n">obtain</span> <span class="o">⟨</span><span class="n">k</span><span class="o">,</span> <span class="n">hk</span><span class="o">,</span> <span class="n">h</span><span class="o">⟩</span> <span class="o">:=</span> <span class="n">set.exists_max_image</span> <span class="n">s</span> <span class="n">id</span> <span class="n">hf</span> <span class="n">hn</span><span class="o">,</span>
      <span class="n">exact</span> <span class="o">⟨</span><span class="n">k</span><span class="o">,</span> <span class="n">h</span><span class="o">⟩,</span> <span class="o">},</span>
    <span class="o">{</span> <span class="n">rw</span> <span class="n">set.not_nonempty_iff_eq_empty</span> <span class="n">at</span> <span class="n">hn</span><span class="o">,</span>
      <span class="n">subst</span> <span class="n">hn</span><span class="o">,</span>
      <span class="n">simp</span> <span class="o">}</span> <span class="o">},</span>
  <span class="o">{</span> <span class="n">rintro</span> <span class="o">⟨</span><span class="n">k</span><span class="o">,</span> <span class="n">h</span><span class="o">⟩,</span>
    <span class="n">apply</span> <span class="o">(</span><span class="n">set.to_finite</span> <span class="o">(</span><span class="n">set.Icc</span> <span class="mi">0</span> <span class="n">k</span><span class="o">))</span><span class="bp">.</span><span class="n">subset</span><span class="o">,</span>
    <span class="n">intros</span> <span class="n">x</span> <span class="n">hx</span><span class="o">,</span>
    <span class="n">simpa</span> <span class="n">using</span> <span class="n">h</span> <span class="n">x</span> <span class="n">hx</span> <span class="o">}</span>
<span class="kd">end</span>
</code></pre></div>
</div></div>



<a name="321809843"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Finite%20Set%20Questions/near/321809843" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Finite.20Set.20Questions.html#321809843">(Jan 17 2023 at 11:38)</a>:</h4>
<p><span class="user-mention silent" data-user-id="310045">Eric Wieser</span> <a href="#narrow/stream/113488-general/topic/Finite.20Set.20Questions/near/321740910">said</a>:</p>
<blockquote>
<p>Not if the set is empty</p>
</blockquote>
<p>Ah, but you didn't say "a set of ℕ", in which case you can do it if the set is empty (you get 0)</p>



<a name="321855752"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Finite%20Set%20Questions/near/321855752" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Finite.20Set.20Questions.html#321855752">(Jan 17 2023 at 15:20)</a>:</h4>
<p>Note that you should never use <code>by_cases : s.nonempty</code> but instead do <code>obtain rfl | hs := s.eq_empty_or_nonempty</code> (<a href="https://leanprover-community.github.io/mathlib_docs/find/set.eq_empty_or_nonempty">docs#set.eq_empty_or_nonempty</a>, <a href="https://leanprover-community.github.io/mathlib_docs/find/finset.eq_empty_or_nonempty">docs#finset.eq_empty_or_nonempty</a>)</p>



<a name="321930078"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Finite%20Set%20Questions/near/321930078" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jack Thorns <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Finite.20Set.20Questions.html#321930078">(Jan 17 2023 at 21:33)</a>:</h4>
<p>I apologise for not giving information properly, but I am new here so I can only ask that you try and be patient with me.</p>
<p>I appreciate the extra information presented above, but I'm going to write this as an amendment to my original message.</p>
<p>It was correctly pointed out that the assumption of the set being nonempty is not really needed, and whilst that will be considered when I attempt to finish this proof, for now this is still a useful learning point for me.</p>
<p>In my message, I meant <code>s₀</code> and not <code>h₁</code>, I had confused my term names. Here should be a satisfactory <a href="https://leanprover-community.github.io/mwe.html">#mwe</a> (I think?):</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">data.nat.prime</span>

<span class="kn">section</span>
<span class="kn">open</span> <span class="n">nat</span>

<span class="kd">variables</span> <span class="o">{</span><span class="n">k</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">}</span>

<span class="kd">example</span> <span class="o">{</span><span class="n">s</span> <span class="o">:</span> <span class="n">set</span> <span class="n">ℕ</span><span class="o">}</span> <span class="o">(</span><span class="n">h</span><span class="o">:</span> <span class="n">s.nonempty</span><span class="o">)</span> <span class="o">:</span> <span class="n">s.finite</span> <span class="bp">↔</span> <span class="bp">∃</span> <span class="n">k</span><span class="o">,</span> <span class="bp">∀</span> <span class="n">x</span> <span class="bp">∈</span> <span class="n">s</span><span class="o">,</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">k</span> <span class="o">:=</span>
<span class="kd">begin</span>
    <span class="n">split</span><span class="o">,</span>
    <span class="o">{</span>
        <span class="n">intro</span> <span class="n">h'</span><span class="o">,</span>
        <span class="k">let</span> <span class="n">s₀</span> <span class="o">:=</span> <span class="o">(</span><span class="n">set.finite.to_finset</span> <span class="n">h'</span><span class="o">),</span>
        <span class="k">let</span> <span class="n">m</span> <span class="o">:=</span> <span class="n">s₀.max'</span><span class="o">,</span>
    <span class="o">},</span>
<span class="kd">end</span>

<span class="kd">end</span>
</code></pre></div>
<p>The thing I was referring to, is that in the widget screen in vscode, it displays <code>s₀.nonempty → ℕ := s₀.max'</code>, so we need a proof that <code>s₀</code> is nonempty to get the maximum value (right?).</p>
<p>But I was unable to find a way to get such a proof from <code>h</code>.</p>



<a name="321931798"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Finite%20Set%20Questions/near/321931798" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Finite.20Set.20Questions.html#321931798">(Jan 17 2023 at 21:45)</a>:</h4>
<blockquote>
<p>The thing I was referring to, is that in the widget screen in vscode, it displays <code>s₀.nonempty → ℕ := s₀.max'</code>, so we need a proof that <code>s₀</code> is nonempty to get the maximum value (right?). But I was unable to find a way to get such a proof from <code>h</code>.</p>
</blockquote>
<p>Correct! I would expect there to be a lemma somewhere that can get this from <code>h</code>. (edit: it's <a href="https://leanprover-community.github.io/mathlib_docs/find/set.finite.to_finset_nonempty">docs#set.finite.to_finset_nonempty</a>)</p>
<p>Alternatively, you could ditch the nonempty assumption by using <code>.sup</code> instead of <code>.max'</code>.</p>



<a name="321931935"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Finite%20Set%20Questions/near/321931935" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Finite.20Set.20Questions.html#321931935">(Jan 17 2023 at 21:46)</a>:</h4>
<p>... or, you could use</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code>        <span class="k">let</span> <span class="n">m</span> <span class="o">:=</span> <span class="n">s₀.max'</span> <span class="n">_</span><span class="o">,</span>
</code></pre></div>
<p>informing Lean that you want the actual <code>max'</code> and also will supply a proof of non-emptiness.</p>



<a name="321932135"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Finite%20Set%20Questions/near/321932135" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Finite.20Set.20Questions.html#321932135">(Jan 17 2023 at 21:47)</a>:</h4>
<p>(this allows you to separate further your goal in two: you can <code>use m</code> on one of the two goals, and you can provide the proof that Eric mentions in the other.)</p>



<a name="321932223"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Finite%20Set%20Questions/near/321932223" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Finite.20Set.20Questions.html#321932223">(Jan 17 2023 at 21:48)</a>:</h4>
<p>Also, you are missing an import, I think.</p>



<a name="321932971"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Finite%20Set%20Questions/near/321932971" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jack Thorns <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Finite.20Set.20Questions.html#321932971">(Jan 17 2023 at 21:53)</a>:</h4>
<p>When I try and use <code>set.finite.to_finset_nonempty</code>, the infoview says that it doesn't know what it is</p>



<a name="321933157"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Finite%20Set%20Questions/near/321933157" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Finite.20Set.20Questions.html#321933157">(Jan 17 2023 at 21:54)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">data.set.finite</span><span class="bp">?</span>
</code></pre></div>



<a name="321933235"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Finite%20Set%20Questions/near/321933235" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jack Thorns <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Finite.20Set.20Questions.html#321933235">(Jan 17 2023 at 21:55)</a>:</h4>
<p>I already added that import as I thought that might be the problem, but it still says unknown identifier. (I'm just using <code>#check set.finite.to_finset_nonempty</code>)</p>



<a name="321933618"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Finite%20Set%20Questions/near/321933618" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Finite.20Set.20Questions.html#321933618">(Jan 17 2023 at 21:58)</a>:</h4>
<p>If I copy-paste your <code>check</code>, I get</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">set.finite.to_finset_nonempty</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="bp">?</span><span class="n">M_2.finite</span><span class="o">),</span> <span class="n">h.to_finset.nonempty</span> <span class="bp">↔</span> <span class="bp">?</span><span class="n">M_2.nonempty</span>
</code></pre></div>



<a name="321934327"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Finite%20Set%20Questions/near/321934327" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jack Thorns <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Finite.20Set.20Questions.html#321934327">(Jan 17 2023 at 22:03)</a>:</h4>
<p>How strange,  just</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">data.set.finite</span>

<span class="kn">section</span>

<span class="k">#check</span> <span class="n">set.finite.to_finset_nonempty</span>

<span class="kd">end</span>
</code></pre></div>
<p>gives me the error <code>unknown identifier 'set.finite.to_finset_nonempty'</code>.</p>
<p>Could I somehow have an outdated version of mathlib? I did recently update it so that would be odd (or at least, I thought I did).</p>



<a name="321934699"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Finite%20Set%20Questions/near/321934699" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Finite.20Set.20Questions.html#321934699">(Jan 17 2023 at 22:05)</a>:</h4>
<p>What does your <code>leanproject.toml</code> say?</p>



<a name="321934708"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Finite%20Set%20Questions/near/321934708" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Finite.20Set.20Questions.html#321934708">(Jan 17 2023 at 22:05)</a>:</h4>
<p><del>It could be that <code>section</code> is expecting a name.</del></p>



<a name="321934953"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Finite%20Set%20Questions/near/321934953" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Finite.20Set.20Questions.html#321934953">(Jan 17 2023 at 22:07)</a>:</h4>
<p>Your latest code works as is in the community playground.</p>



<a name="321935838"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Finite%20Set%20Questions/near/321935838" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jack Thorns <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Finite.20Set.20Questions.html#321935838">(Jan 17 2023 at 22:13)</a>:</h4>
<p>Okay so now I seem to be getting technical issues, I'm attempting to create a new project to test it there, and now the lean server is crashing with the error <code>binary package was not provided for 'windows'</code>? I just ran <code>leanproject new</code> in a fresh empty directory.</p>



<a name="321936082"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Finite%20Set%20Questions/near/321936082" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Finite.20Set.20Questions.html#321936082">(Jan 17 2023 at 22:15)</a>:</h4>
<p>You need to reinstall elan, its update mechanism broke</p>



<a name="321936943"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Finite%20Set%20Questions/near/321936943" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jack Thorns <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Finite.20Set.20Questions.html#321936943">(Jan 17 2023 at 22:21)</a>:</h4>
<p><del>It is complaining that it cannot verify the legitimacy of the server, and I can't remember how I got around this last time. (When I try and use curl to install elan)</del></p>
<p><del>Edit: </del><br>
<del>Ah, figured it out and it had no problems creating a project this time, checking the code now.</del></p>
<p>Rejoice! It seems to be working now.</p>



<a name="321950792"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Finite%20Set%20Questions/near/321950792" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jack Thorns <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Finite.20Set.20Questions.html#321950792">(Jan 18 2023 at 00:07)</a>:</h4>
<p>A further question, how can I define a function which, given some constraints, is defined as the maximum of a finite set, or even without constraints, I'm just not familiar with defining functions in this way.</p>



<a name="321951264"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Finite%20Set%20Questions/near/321951264" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Finite.20Set.20Questions.html#321951264">(Jan 18 2023 at 00:12)</a>:</h4>
<p>What will you do if your finite set is empty?</p>



<a name="321951301"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Finite%20Set%20Questions/near/321951301" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jack Thorns <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Finite.20Set.20Questions.html#321951301">(Jan 18 2023 at 00:12)</a>:</h4>
<p>I'd assume there was a way to provide a proof of nonemptiness to the function?</p>



<a name="321951495"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Finite%20Set%20Questions/near/321951495" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bolton Bailey <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Finite.20Set.20Questions.html#321951495">(Jan 18 2023 at 00:14)</a>:</h4>
<p>You could look at how <a href="https://leanprover-community.github.io/mathlib_docs/find/finset.sup'">docs#finset.sup'</a> is defined</p>



<a name="321951498"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Finite%20Set%20Questions/near/321951498" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Finite.20Set.20Questions.html#321951498">(Jan 18 2023 at 00:14)</a>:</h4>
<p><span class="user-mention silent" data-user-id="580295">Jack Thorns</span> <a href="#narrow/stream/113488-general/topic/Finite.20Set.20Questions/near/321951301">said</a>:</p>
<blockquote>
<p>I'd assume there was a way to provide a proof of nonemptiness to the function?</p>
</blockquote>
<p>Yes sure! But with formalisation you need to say exactly what you mean (e.g. by giving a <a href="https://leanprover-community.github.io/mwe.html">#mwe</a> with the precise statement of what you want, or something as near as possible). What hypotheses do you want on your set, for example? It need some kind of ordering. What kind? Would you allow two incomparable maxima? etc etc. You say "the maximum" and that's already making implicit assumptions. What is the actual exact question?</p>



<a name="321951769"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Finite%20Set%20Questions/near/321951769" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jack Thorns <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Finite.20Set.20Questions.html#321951769">(Jan 18 2023 at 00:16)</a>:</h4>
<p>Ah so, it is the same prime power set as before, being</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">data.nat.prime</span>

<span class="kn">section</span>
<span class="kd">def</span> <span class="n">prime_pow_dvd_n</span> <span class="o">(</span><span class="n">n</span> <span class="n">p</span><span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span><span class="o">:</span> <span class="n">nat.prime</span> <span class="n">p</span><span class="o">)</span> <span class="o">:</span> <span class="n">set</span> <span class="n">ℕ</span> <span class="o">:=</span> <span class="o">{</span> <span class="n">k</span> <span class="bp">|</span> <span class="n">p</span><span class="bp">^</span><span class="n">k</span> <span class="bp">∣</span> <span class="n">n</span> <span class="o">}</span>

<span class="kd">end</span>
</code></pre></div>
<p>and I have a lemma stating that this set is always nonempty, but of course it only makes sense to talk about this set when n is nonzero, so <code>n ≠ 0</code> is a constraint, and <code>nat.prime p</code> is a constraint.</p>
<p>What I've attempted so far is essentially</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">def</span> <span class="n">max_prime_pow</span> <span class="o">{</span><span class="n">n</span> <span class="n">p</span><span class="o">:</span> <span class="n">ℕ</span><span class="o">}</span> <span class="o">{</span><span class="n">h</span><span class="o">:</span> <span class="n">nat.prime</span> <span class="n">p</span><span class="o">}</span> <span class="o">{</span><span class="n">h'</span><span class="o">:</span> <span class="n">n</span> <span class="bp">≠</span> <span class="mi">0</span><span class="o">}</span> <span class="o">:</span> <span class="n">ℕ</span> <span class="bp">→</span> <span class="n">ℕ</span> <span class="bp">→</span> <span class="n">ℕ</span> <span class="o">:=</span>
</code></pre></div>
<p>but I'm not sure how to continue. My apologies for being vague once again.</p>



<a name="321952754"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Finite%20Set%20Questions/near/321952754" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Finite.20Set.20Questions.html#321952754">(Jan 18 2023 at 00:24)</a>:</h4>
<p>Oh I see, it's a set of naturals. Sorry, I'd not put two and two together. We already have what you're trying to define in mathlib; it's <a href="https://leanprover-community.github.io/mathlib_docs/find/padic_val_nat">docs#padic_val_nat</a> . I know that doesn't answer your question of how to define it, but hopefully it gets the job done. Every definition in lean comes with a cost, and the cost is that you have to write the API for the definition. The advantage of using a definition which is already there is that there will be lemmas about the definition already, saving you the bother.</p>



<a name="321953091"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Finite%20Set%20Questions/near/321953091" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Finite.20Set.20Questions.html#321953091">(Jan 18 2023 at 00:27)</a>:</h4>
<p>To just put together what others had already messaged:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">data.nat.prime</span>

<span class="kn">section</span>

<span class="kd">def</span> <span class="n">prime_pow_dvd_n</span> <span class="o">(</span><span class="n">n</span> <span class="n">p</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="n">set</span> <span class="n">ℕ</span> <span class="o">:=</span> <span class="o">{</span> <span class="n">k</span> <span class="bp">|</span> <span class="n">p</span><span class="bp">^</span><span class="n">k</span> <span class="bp">∣</span> <span class="n">n</span> <span class="o">}</span>

<span class="kd">lemma</span> <span class="n">prime_pow_dvd_n_finite</span> <span class="o">{</span><span class="n">n</span> <span class="n">p</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">}</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">nat.prime</span> <span class="n">p</span><span class="o">)</span> <span class="o">(</span><span class="n">h'</span> <span class="o">:</span> <span class="n">n</span> <span class="bp">≠</span> <span class="mi">0</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">prime_pow_dvd_n</span> <span class="n">n</span> <span class="n">p</span><span class="o">)</span><span class="bp">.</span><span class="n">finite</span> <span class="o">:=</span>
<span class="gr">sorry</span>

<span class="kd">noncomputable</span>
<span class="kd">def</span> <span class="n">max_prime_pow</span> <span class="o">{</span><span class="n">n</span> <span class="n">p</span><span class="o">:</span> <span class="n">ℕ</span><span class="o">}</span> <span class="o">(</span><span class="n">h</span><span class="o">:</span> <span class="n">nat.prime</span> <span class="n">p</span><span class="o">)</span> <span class="o">(</span><span class="n">h'</span><span class="o">:</span> <span class="n">n</span> <span class="bp">≠</span> <span class="mi">0</span><span class="o">)</span> <span class="o">:</span> <span class="n">ℕ</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">prime_pow_dvd_n_finite</span> <span class="n">h</span> <span class="n">h'</span><span class="o">)</span><span class="bp">.</span><span class="n">to_finset.sup</span> <span class="n">id</span>

<span class="kd">end</span>
</code></pre></div>



<a name="321953249"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Finite%20Set%20Questions/near/321953249" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jack Thorns <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Finite.20Set.20Questions.html#321953249">(Jan 18 2023 at 00:28)</a>:</h4>
<p>That's alright, even if I'm not necessarily using what I wrote up to now, it was at least a good exercise and I can use the source of that function to learn more about how to write it.</p>



<a name="321953284"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Finite%20Set%20Questions/near/321953284" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jack Thorns <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Finite.20Set.20Questions.html#321953284">(Jan 18 2023 at 00:29)</a>:</h4>
<p><span class="user-mention silent" data-user-id="308899">Yakov Pechersky</span> <a href="#narrow/stream/113488-general/topic/Finite.20Set.20Questions/near/321953091">said</a>:</p>
<blockquote>
<p>To just put together what others had already messaged:</p>
<p><div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">data.nat.prime</span>

<span class="kn">section</span>

<span class="kd">def</span> <span class="n">prime_pow_dvd_n</span> <span class="o">(</span><span class="n">n</span> <span class="n">p</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="n">set</span> <span class="n">ℕ</span> <span class="o">:=</span> <span class="o">{</span> <span class="n">k</span> <span class="bp">|</span> <span class="n">p</span><span class="bp">^</span><span class="n">k</span> <span class="bp">∣</span> <span class="n">n</span> <span class="o">}</span>

<span class="kd">lemma</span> <span class="n">prime_pow_dvd_n_finite</span> <span class="o">{</span><span class="n">n</span> <span class="n">p</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">}</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">nat.prime</span> <span class="n">p</span><span class="o">)</span> <span class="o">(</span><span class="n">h'</span> <span class="o">:</span> <span class="n">n</span> <span class="bp">≠</span> <span class="mi">0</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">prime_pow_dvd_n</span> <span class="n">n</span> <span class="n">p</span><span class="o">)</span><span class="bp">.</span><span class="n">finite</span> <span class="o">:=</span>
<span class="gr">sorry</span>

<span class="kd">noncomputable</span>
<span class="kd">def</span> <span class="n">max_prime_pow</span> <span class="o">{</span><span class="n">n</span> <span class="n">p</span><span class="o">:</span> <span class="n">ℕ</span><span class="o">}</span> <span class="o">(</span><span class="n">h</span><span class="o">:</span> <span class="n">nat.prime</span> <span class="n">p</span><span class="o">)</span> <span class="o">(</span><span class="n">h'</span><span class="o">:</span> <span class="n">n</span> <span class="bp">≠</span> <span class="mi">0</span><span class="o">)</span> <span class="o">:</span> <span class="n">ℕ</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">prime_pow_dvd_n_finite</span> <span class="n">h</span> <span class="n">h'</span><span class="o">)</span><span class="bp">.</span><span class="n">to_finset.sup</span> <span class="n">id</span>

<span class="kd">end</span>
</code></pre></div><br>
</p>
</blockquote>
<p>Ah! Thank you very much!</p>



<a name="321953333"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Finite%20Set%20Questions/near/321953333" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Finite.20Set.20Questions.html#321953333">(Jan 18 2023 at 00:29)</a>:</h4>
<p>Note, I defined the set without requiring <code>nat.prime p</code> or <code>n \ne 0</code>, since the set exists regardless of those. It's only the finiteness that requires the preconditions. I also switched some arguments from implicit to explicit.</p>



<a name="322149807"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Finite%20Set%20Questions/near/322149807" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bhavik Mehta <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Finite.20Set.20Questions.html#322149807">(Jan 18 2023 at 20:49)</a>:</h4>
<p>I didn't follow all of this discussion, but this last function should be just <code>n.factorization p</code>, and in the cases where n is nonzero and p is prime, you can prove it's the largest natural k for which p^k divides n</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>