---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/lean.2Envim.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html">lean.nvim</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="241569896"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/241569896" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#241569896">(Jun 04 2021 at 17:41)</a>:</h4>
<p>Will mention a status update on the past few days of neovim support via <a href="https://github.com/Julian/lean.nvim">lean.nvim</a> in case it attracts anyone else who's following along :)</p>
<p><span class="user-mention" data-user-id="110043">@Gabriel Ebner</span> helped tidy up the infoview with some syntax highlighting, added support for showing diagnostics in it and made a more straightforward implementation of abbreviation insertion support, all of which are great.</p>
<p>We also fixed a couple of annoying basic bugs, though there are still a few to fix. At the minute I dare say things are quite usable to start.</p>
<p><span class="user-mention" data-user-id="373814">@Rishikesh Vaishnav</span> is working on <a href="https://asciinema.org/a/kQsS0h4zErNQ6XwbnIzEyYdJ5">per-window or per-tab infoviews</a> which will make things much easier to work with with multiple splits and tabs. Rish let's maybe move our DMs here, in case it's interesting to anyone else (and if not they'll mute :P)</p>



<a name="241570202"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/241570202" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#241570202">(Jun 04 2021 at 17:43)</a>:</h4>
<p>Hopefully we'll also soon have a way to run lean 3 and lean 4 buffers side-by-side.</p>



<a name="241572925"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/241572925" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rish Vaishnav <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#241572925">(Jun 04 2021 at 18:05)</a>:</h4>
<p>Hello folks! I am a graduate student from California who has been studying Lean for a few months but am relatively new to Zulip. Good to meet you all!</p>
<p>Per-tab/per-window infoviews are mostly ready (see <a href="https://github.com/Julian/lean.nvim/pull/35">this PR</a>), there just are a few error messages not affecting functionality that I'm trying to work out, and we may want to add a few extra features. We've also got some design decisions to make on whether to make the <code>lean</code> vim filetype default to Lean 3 or Lean 4. It's currently dependent on a PR <a href="https://github.com/rish987/nvim-lspconfig">to <code>nvim-lspconfig</code></a> that adds Lean 4 as a new language server, so you'll have to install that fork if you want to try it out.</p>



<a name="241624251"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/241624251" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#241624251">(Jun 05 2021 at 08:34)</a>:</h4>
<p>I'd love to use Lean in vim (although this will probably never be a serious option because of widgets). I'm super grateful that some people invest time in trying to make this happen. But I must say the README is daunting. The installation seem to require a lot of manual dependency installation and configuration, and it's not clear what is optional and what is required. Certainly the vim nightmare of having dozens of competing plugin managers doesn't help. Could you record some screencast showing the current status of this project? That would greatly help people deciding whether it's worth spending one hour installing it.</p>



<a name="241624290"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/241624290" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#241624290">(Jun 05 2021 at 08:35)</a>:</h4>
<p>I should also write I think part of the mess comes from the Lean 3/Lean 4 dichotomy. It would probably help a lot to have separate instructions for Lean 3 and Lean 4.</p>



<a name="241627105"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/241627105" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#241627105">(Jun 05 2021 at 09:43)</a>:</h4>
<p>Yes that's good feedback thanks. I've been meaning to add a short demo, will do so, and make it a bit clearer what's necessary for what.</p>



<a name="241637769"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/241637769" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rish Vaishnav <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#241637769">(Jun 05 2021 at 13:52)</a>:</h4>
<p><span class="user-mention" data-user-id="110031">@Patrick Massot</span> I was looking into how to support “true” http infoviews in neovim as well... I believe websockets are the technology we need to use? Which is available via the lua.http module. This could enable widgets. And for the very commonly used non-graphical widgets, it should be possible to port those directly for use in the terminal. Would be happy to look into this in the future</p>



<a name="241659146"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/241659146" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rish Vaishnav <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#241659146">(Jun 05 2021 at 22:29)</a>:</h4>
<p>Made filetype <code>lean</code> refer to Lean 4 and <code>lean3</code> refer to Lean 3, since we seem to agree that it is the right time for this. Adjusted <code>nvim-lspconfig</code> accordingly. Let me know if there are any objections.</p>



<a name="241659261"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/241659261" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rish Vaishnav <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#241659261">(Jun 05 2021 at 22:32)</a>:</h4>
<p><span class="user-mention" data-user-id="110043">@Gabriel Ebner</span> It may be wise to also put a warning against using <code>lean.vim</code> if using neovim, and direct them to <code>lean.nvim</code> (in the <code>lean.vim</code> README)</p>



<a name="241666991"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/241666991" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rish Vaishnav <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#241666991">(Jun 06 2021 at 02:20)</a>:</h4>
<p>Have fixed all of the bugs/error messages relating to the new infoview functionality I could find, NOTE that I've changed the config option <code>lsp4</code> to <code>lsp</code> so that if we eventually stop supporting Lean 3 it won't be necessary to change that. Added to README descriptions of mappings for new infoview stuff.</p>
<p>TODO:</p>
<ul>
<li>Manually test abbreviations and completion from <code>compe</code> (may have been broken in <code>lean3</code> by filetype rename)</li>
<li>Manually test Treesitter</li>
<li>Fix existing testing framework to work with the new infoview code</li>
<li>README updating</li>
</ul>



<a name="241672797"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/241672797" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#241672797">(Jun 06 2021 at 04:53)</a>:</h4>
<p>Nice, thanks! I think also things are getting big for one PR, so I'm going to try tearing off a piece and merging it independently if I can find some self-contained bits.</p>



<a name="241680278"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/241680278" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#241680278">(Jun 06 2021 at 08:24)</a>:</h4>
<p><span class="user-mention silent" data-user-id="373814">Rish Vaishnav</span> <a href="#narrow/stream/113488-general/topic/lean.2Envim/near/241637769">said</a>:</p>
<blockquote>
<p>Patrick Massot I was looking into how to support “true” html infoviews in neovim as well... I believe websockets is the technology we need to use? Which is available via the <code>lua-http</code> library. This could enable widgets. And for the very commonly used non-graphical widgets, it should be possible to port those directly for use in the terminal. Would be happy to look into this in the future</p>
</blockquote>
<p>I think you have it backward. There is no communication issue. I don't think there is any websockets involved, the Lean server simply sends widget information the same way it sends everything. But then all widgets are graphical. Displaying them is the issue. To be very specific, I'm not talking about toys such as the Hanoi towers widgets here, I'm talking about what you can see in <a href="#narrow/stream/113489-new-members/topic/.22unfold.22.20a.20proposition/near/240804412">https://leanprover.zulipchat.com/#narrow/stream/113489-new-members/topic/.22unfold.22.20a.20proposition/near/240804412</a> for instance. The big thing is being able to put your mouse on some expression in the info view and see how Lean parses them thanks to the interactive highlighting, and then copy or jump to definition.</p>



<a name="241684883"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/241684883" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Daniel Fabian <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#241684883">(Jun 06 2021 at 10:27)</a>:</h4>
<p>Also, <span class="user-mention" data-user-id="321696">@Julian Berman</span> a screenshot or two of the final outcome often speaks more than a thousand words ;-)</p>



<a name="241690168"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/241690168" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rish Vaishnav <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#241690168">(Jun 06 2021 at 12:45)</a>:</h4>
<p>Yeah, was considering adding a gif to the README of a demo using this, though we’ll probably have to update that once we implement pinnable/pausable infoview messages (at which point it would seem more competitive with VSCode)</p>



<a name="241698358"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/241698358" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ryan Lahfa <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#241698358">(Jun 06 2021 at 16:08)</a>:</h4>
<p>As I prefer NeoVim and I do a lot of Lean 4 these days, I can be a beta tester if you want :)</p>



<a name="241699264"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/241699264" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rish Vaishnav <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#241699264">(Jun 06 2021 at 16:31)</a>:</h4>
<p>That's awesome, all you have to do is install the forks of <a href="https://github.com/rish987/lean.nvim">lean.nvim</a> and <a href="https://github.com/rish987/nvim-lspconfig">nvim-lspconfig</a> (replacing any existing installations). Here are zips of the minimal test packages I've been using: <a href="/user_uploads/3121/omJqL_YAiQdcIoEA9Ap2k37Q/test_lean4.zip">test_lean4.zip</a>  and <a href="/user_uploads/3121/D25gzYB5f8Hg86B7T0Opfe71/test_lean.zip">test_lean.zip</a>.</p>



<a name="241701078"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/241701078" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rish Vaishnav <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#241701078">(Jun 06 2021 at 17:17)</a>:</h4>
<p>^ (also make sure you do NOT have <code>lean.vim</code> installed)</p>



<a name="241707742"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/241707742" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rish Vaishnav <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#241707742">(Jun 06 2021 at 19:49)</a>:</h4>
<p>Alright, fixed the testing infra (though the automated github tests will fail until the <code>nvim-lspconfig</code> PR is merged), fixed a (hopefully last) edge case error message, and added some more details on the new functionality to the README.</p>
<p>This should be ready for a "final review" before merge <span class="user-mention" data-user-id="321696">@Julian Berman</span> <span class="user-mention" data-user-id="110043">@Gabriel Ebner</span>. And <span class="user-mention" data-user-id="110043">@Gabriel Ebner</span> do you have any more comments on <a href="https://github.com/rish987/nvim-lspconfig">nvim-lspconfig</a>? If it looks good to you then I'll go ahead and make the PR to upstream.</p>



<a name="241708657"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/241708657" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#241708657">(Jun 06 2021 at 20:11)</a>:</h4>
<p>Nice, well done. It's usually a bit easier to see what changes are being proposed in a PR -- I think the lspconfig change is probably correct at this point but it's slightly nontrivial to test because it has a circular dependency on the other change.</p>



<a name="241708702"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/241708702" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#241708702">(Jun 06 2021 at 20:12)</a>:</h4>
<p><span class="user-mention silent" data-user-id="373814">Rish Vaishnav</span> <a href="#narrow/stream/113488-general/topic/lean.2Envim/near/241659261">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="110043">Gabriel Ebner</span> It may be wise to also put a warning against using <code>lean.vim</code> if using neovim, and direct them to <code>lean.nvim</code> (in the <code>lean.vim</code> README)</p>
</blockquote>
<p>The README of <code>lean.nvim</code> explicitly says one first needs to install <code>lean.vim</code>. This confirms people probably need to wait until the situation stabilizes.</p>



<a name="241708710"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/241708710" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#241708710">(Jun 06 2021 at 20:12)</a>:</h4>
<p>I think what we should  possibly do, assuming we've agreed to call lean4 <code>lean</code> and Lean 3 <code>lean3</code>, is to make that filetype change immediately (in the lean.vim repo), which unblocks the change in the lspconfig repo.</p>



<a name="241708716"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/241708716" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#241708716">(Jun 06 2021 at 20:13)</a>:</h4>
<p>Yes Patrick give it a few days :)</p>



<a name="241708727"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/241708727" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#241708727">(Jun 06 2021 at 20:13)</a>:</h4>
<p>Ok great. Thanks again for all your efforts!</p>



<a name="241708795"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/241708795" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#241708795">(Jun 06 2021 at 20:15)</a>:</h4>
<p><span class="user-mention" data-user-id="373814">@Rish Vaishnav</span> in general if we can it's much easier to review changes one small bit at a time rather than all bundled together with other ones, and also a bit easier if you work on a branch, rather than on the main branch, because then you can merge in upstream changes a bit easier -- but I'm trying not to bother much with that now, we can certainly work with what you have, it's great, will just take a bit to incrementally merge it.</p>



<a name="241708855"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/241708855" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rish Vaishnav <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#241708855">(Jun 06 2021 at 20:16)</a>:</h4>
<p>Yeah my bad... I am a "baby" open source developer so definitely let me know if there are any best practices I'm not following!</p>



<a name="241708872"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/241708872" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#241708872">(Jun 06 2021 at 20:17)</a>:</h4>
<p>Yes I figured, you're doing great don't worry :) you did the important bit which is writing something nice. The rest is easy stuff.</p>



<a name="241708889"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/241708889" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#241708889">(Jun 06 2021 at 20:17)</a>:</h4>
<p>But yeah now we have basically the lspconfig change blocked on changing the lean filetypes, and then merging to <code>lean.nvim</code> blocked on the lspconfig change</p>



<a name="241708964"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/241708964" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#241708964">(Jun 06 2021 at 20:19)</a>:</h4>
<p>so we can do that in the lean.nvim repo or the lean.vim one (changing the filetype name) but I kind of would like to try to do it in the lean.vim repo assuming Gabriel is ok merging it -- there's a small chance we can make things still work together, so until that falls apart I kind of have hopes we'll be able to push through...</p>



<a name="241708978"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/241708978" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#241708978">(Jun 06 2021 at 20:19)</a>:</h4>
<p><span class="user-mention" data-user-id="373814">@Rish Vaishnav</span> am I being clear enough? Basically we have to introduce the new filetype names, so let's do that first, then you can send the lspconfig PR and it will work immediately, and then we can decide whether we really need to merge the two?</p>



<a name="241709216"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/241709216" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rish Vaishnav <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#241709216">(Jun 06 2021 at 20:24)</a>:</h4>
<p>Hmm not 100% following, for <code>lean.nvim</code> I've already used filetype <code>lean3</code> for Lean 3 and <code>lean</code> for Lean 4. We shouldn't need to change <code>lean.vim</code> (the new README says that you should not have <code>lean.vim</code> installed if using <code>lean.nvim</code>)</p>



<a name="241709372"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/241709372" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rish Vaishnav <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#241709372">(Jun 06 2021 at 20:28)</a>:</h4>
<p>Oh I see, you're saying if they're using <code>lean.vim</code> instead of <code>lean.nvim</code>, then we need to add detection for the <code>lean3</code> filetype in <code>lean.vim</code>, right?</p>



<a name="241709442"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/241709442" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#241709442">(Jun 06 2021 at 20:30)</a>:</h4>
<p>Right now what we have is that the PR to <code>lean.nvim</code> can't be merged because it depends on changes to <code>lspconfig</code>, but the converse is also true! <code>lspconfig</code>'s PR can't be merged either because the only existing setup doesn't really use that filetype, not until I hit the merge button on your PR</p>



<a name="241709455"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/241709455" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#241709455">(Jun 06 2021 at 20:31)</a>:</h4>
<p>So things of course will work at the end of the day when everything's merged, but along the way, stuff will break</p>



<a name="241709485"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/241709485" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rish Vaishnav <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#241709485">(Jun 06 2021 at 20:31)</a>:</h4>
<p>Gotcha. Does Github does not have some tool for synchronized merging?</p>



<a name="241709537"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/241709537" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#241709537">(Jun 06 2021 at 20:33)</a>:</h4>
<p>It doesn't, and in theory it wouldn't really be too big of an issue, it's not like we have 1000 users, we have essentially the 3 of us :P -- but I need to review the rest of the PR more carefully so I understand all the changes, so it's really me not being sure I can hit the merge button immediately</p>



<a name="241709560"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/241709560" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rish Vaishnav <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#241709560">(Jun 06 2021 at 20:33)</a>:</h4>
<p>Yes totally understandable. Let me know if you have any questions, no rush at all!</p>



<a name="241711362"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/241711362" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rish Vaishnav <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#241711362">(Jun 06 2021 at 21:20)</a>:</h4>
<p>Ok sorry but just pushed another small fix slightly refactoring <code>close_win_wrapper</code> (can't believe I missed this... :P)</p>



<a name="241713825"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/241713825" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rish Vaishnav <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#241713825">(Jun 06 2021 at 22:26)</a>:</h4>
<p>Added a number of comments to the source (should hopefully make your review a bit easier)</p>



<a name="241715813"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/241715813" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rish Vaishnav <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#241715813">(Jun 06 2021 at 23:25)</a>:</h4>
<p><a href="/user_uploads/3121/Y7mW2Gp6UjRffx4poupVCtjY/2021-06-06-162302_1918x1079_scrot.png">2021-06-06-162302_1918x1079_scrot.png</a> </p>
<div class="message_inline_image"><a href="/user_uploads/3121/Y7mW2Gp6UjRffx4poupVCtjY/2021-06-06-162302_1918x1079_scrot.png" title="2021-06-06-162302_1918x1079_scrot.png"><img src="/user_uploads/3121/Y7mW2Gp6UjRffx4poupVCtjY/2021-06-06-162302_1918x1079_scrot.png"></a></div><p>This a bit much? <span aria-label="scream" class="emoji emoji-1f631" role="img" title="scream">:scream:</span></p>



<a name="241716018"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/241716018" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rish Vaishnav <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#241716018">(Jun 06 2021 at 23:30)</a>:</h4>
<p><a href="/user_uploads/3121/-2sFPbZeMW2dH1-oTHijTGU7/2021-06-06-162856_1917x1079_scrot.png">2021-06-06-162856_1917x1079_scrot.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/3121/-2sFPbZeMW2dH1-oTHijTGU7/2021-06-06-162856_1917x1079_scrot.png" title="2021-06-06-162856_1917x1079_scrot.png"><img src="/user_uploads/3121/-2sFPbZeMW2dH1-oTHijTGU7/2021-06-06-162856_1917x1079_scrot.png"></a></div><p>(after <code>:LeanInfoPerTab</code>) Ah that's better...</p>



<a name="241716770"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/241716770" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rish Vaishnav <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#241716770">(Jun 06 2021 at 23:53)</a>:</h4>
<p><a href="/user_uploads/3121/cZRL9FWvPGeXkDIuybpgDaRj/2021-06-06-165122_1916x1079_scrot.png">2021-06-06-165122_1916x1079_scrot.png</a> </p>
<div class="message_inline_image"><a href="/user_uploads/3121/cZRL9FWvPGeXkDIuybpgDaRj/2021-06-06-165122_1916x1079_scrot.png" title="2021-06-06-165122_1916x1079_scrot.png"><img src="/user_uploads/3121/cZRL9FWvPGeXkDIuybpgDaRj/2021-06-06-165122_1916x1079_scrot.png"></a></div><p>Or maybe, if you do things in the right order with <code>:LeanInfoPerWin</code>...</p>



<a name="241772818"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/241772818" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rish Vaishnav <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#241772818">(Jun 07 2021 at 13:03)</a>:</h4>
<p>One more (small) thing I noticed - if you mess around with the infoview before the Language server has given diagnostics for your line, some ugly error messages about failed hover/plainGoal callbacks can be thrown. Again, doesn't "break" anything, but would be nice to fix, probably using something similar to what was done with <code>wait_for_line_diagnostics()</code> in the tester code. Though I will put this off to a future PR.</p>



<a name="241773008"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/241773008" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rish Vaishnav <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#241773008">(Jun 07 2021 at 13:05)</a>:</h4>
<p>And also would be nice to include a "processing file..." message if it is waiting, similar to what is done in VSCode</p>



<a name="241774252"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/241774252" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#241774252">(Jun 07 2021 at 13:15)</a>:</h4>
<p>Yes definitely we should keep track of any known issues! But you may notice I'm trying to whittle down your branch little by little. So definitely in a second PR, or a future one :)</p>



<a name="241774335"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/241774335" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#241774335">(Jun 07 2021 at 13:16)</a>:</h4>
<p>My next whittling will be we already depend on <code>lspconfig</code> as a hard dep, so rather than vendoring the module from it with the path stuff, we should just be able to require it, right?</p>



<a name="241774373"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/241774373" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#241774373">(Jun 07 2021 at 13:16)</a>:</h4>
<p>If you have spare moments maybe give that a shot, since the US is about to wake up and I'm about to go on 6 hours of lovely Zoom calling...</p>



<a name="241774724"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/241774724" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rish Vaishnav <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#241774724">(Jun 07 2021 at 13:19)</a>:</h4>
<p>Hmm currently I believe it is usable without <code>nvim-lspconfig</code> if they specifically set <code>enable = false</code> in <code>lsp3</code> and <code>lsp4</code>,  though it should be okay to require it since it would seem very rare to use this plugin without it</p>



<a name="241774863"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/241774863" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rish Vaishnav <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#241774863">(Jun 07 2021 at 13:20)</a>:</h4>
<p>This should make it possible to remove all of that copied code in <code>util.lua</code> as well</p>



<a name="241775810"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/241775810" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#241775810">(Jun 07 2021 at 13:28)</a>:</h4>
<p><span class="user-mention silent" data-user-id="373814">Rish Vaishnav</span> <a href="#narrow/stream/113488-general/topic/lean.2Envim/near/241707742">said</a>:</p>
<blockquote>
<p>This should be ready for a "final review" before merge <span class="user-mention silent" data-user-id="321696">Julian Berman</span> <span class="user-mention silent" data-user-id="110043">Gabriel Ebner</span>. And <span class="user-mention silent" data-user-id="110043">Gabriel Ebner</span> do you have any more comments on <a href="https://github.com/rish987/nvim-lspconfig">nvim-lspconfig</a>? If it looks good to you then I'll go ahead and make the PR to upstream.</p>
</blockquote>
<p>The lspconfig stuff looks good to me, at least Lean-wise.</p>



<a name="241776166"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/241776166" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rish Vaishnav <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#241776166">(Jun 07 2021 at 13:30)</a>:</h4>
<p>Cool, I'll make that PR once we've "finalized" things on our side so that we can make sure the merges happen at somewhat the same time</p>



<a name="241776201"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/241776201" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#241776201">(Jun 07 2021 at 13:30)</a>:</h4>
<p>No no make the PR immediately, that'll actually help!</p>



<a name="241776212"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/241776212" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#241776212">(Jun 07 2021 at 13:30)</a>:</h4>
<p>It'll save you from having to do what we just discussed I think.</p>



<a name="241776383"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/241776383" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rish Vaishnav <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#241776383">(Jun 07 2021 at 13:32)</a>:</h4>
<p>Oh I see, alright will do</p>



<a name="241778961"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/241778961" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rish Vaishnav <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#241778961">(Jun 07 2021 at 13:50)</a>:</h4>
<p>It is open: <a href="https://github.com/neovim/nvim-lspconfig/pull/958">https://github.com/neovim/nvim-lspconfig/pull/958</a></p>



<a name="241782735"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/241782735" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rish Vaishnav <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#241782735">(Jun 07 2021 at 14:15)</a>:</h4>
<p>Yeah, my bad in including unrelated fixes (e.g. buffer-local keymappings) in my PR rather than creating a new PR for them, will be more careful about this in the future. Looking at my other commits, everything else should be self-contained (though I really should have made simultaneous support and per-window/per-tab infoviews two separate PRs)</p>



<a name="241784507"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/241784507" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rish Vaishnav <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#241784507">(Jun 07 2021 at 14:28)</a>:</h4>
<p>Also feel free to remove to mode-toggling mappings by the way... I agree that  it should be pretty rare to use, so the <code>:LeanInfoPerTab</code> and <code>:LeanInfoPerWin</code> commands should be enough. I just got a bit too excited there once I got this working lol</p>



<a name="241796063"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/241796063" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#241796063">(Jun 07 2021 at 15:39)</a>:</h4>
<p>All good, don't worry, yeah it's 100x easier to review 10 small PRs that do one thing each than 1 big one essentially, so in general the smaller you can make them the better. And yeah think I'll kill those two commands until someone asks for them.</p>



<a name="241796137"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/241796137" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#241796137">(Jun 07 2021 at 15:40)</a>:</h4>
<p>The excitement is good though :P it'll keep you motivated to help, which I could use all I can get.</p>



<a name="241801940"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/241801940" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rish Vaishnav <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#241801940">(Jun 07 2021 at 16:19)</a>:</h4>
<p>Yeah also for the <code>:LeanInfoPerTab</code> and <code>:LeanInfoPerWin</code> commands feel free to remove them as well... Though I already personally find them very useful as I frequently switch between my desktop RPi (large screen) and connecting to it via SSH over my laptop (small screen), and dynamically being able to change that makes it possible for me not to have to modify <code>init.vim</code>/<code>init.lua</code> and restart neovim - so I think it's worth mentioning in the README how to set those commands up in the <code>lsp</code>/<code>lsp3</code> configs</p>



<a name="241805265"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/241805265" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rish Vaishnav <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#241805265">(Jun 07 2021 at 16:43)</a>:</h4>
<p>One more thing to put on the roadmap: individually configurable NESW infoviews - I'd imagine, for example when viewing Lean 3 files and Lean 4 files side by side, it would be pretty convenient to have the infoview on the bottom of each source window rather than always on the right. Shouldn't be too much trouble to implement</p>



<a name="241805759"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/241805759" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#241805759">(Jun 07 2021 at 16:46)</a>:</h4>
<p><span class="user-mention silent" data-user-id="373814">Rish Vaishnav</span> <a href="#narrow/stream/113488-general/topic/lean.2Envim/near/241805265">said</a>:</p>
<blockquote>
<p>One more thing to put on the roadmap: individually configurable NESW infoviews - I'd imagine, for example when viewing Lean 3 files and Lean 4 files side by side, it would be pretty convenient to have the infoview on the bottom of each source window rather than always on the right. Shouldn't be too much trouble to implement</p>
</blockquote>
<p>This is also useful for portrait screens.</p>



<a name="242098052"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/242098052" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rish Vaishnav <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#242098052">(Jun 09 2021 at 17:01)</a>:</h4>
<p>Trying out the new term goals - any idea what's causing exit-code 82 with <code>leanpkg print-paths</code> on the latest nightly (06/09)?</p>
<p><a href="https://asciinema.org/a/2UsJIWjPAFA1ZM4waDx0LpWG0">https://asciinema.org/a/2UsJIWjPAFA1ZM4waDx0LpWG0</a></p>



<a name="242101187"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/242101187" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#242101187">(Jun 09 2021 at 17:25)</a>:</h4>
<p>This is an interesting error, and I can't reproduce it.  You're on arm, right?</p>



<a name="242101719"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/242101719" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rish Vaishnav <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#242101719">(Jun 09 2021 at 17:29)</a>:</h4>
<p>Yep. I’m going to try some of the previous nightlies and see if I can find where it first show up</p>



<a name="242101951"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/242101951" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastian Ullrich <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#242101951">(Jun 09 2021 at 17:30)</a>:</h4>
<p>I would bet on <a href="https://github.com/leanprover/lean4/pull/495">https://github.com/leanprover/lean4/pull/495</a> :)</p>



<a name="242101987"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/242101987" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastian Ullrich <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#242101987">(Jun 09 2021 at 17:31)</a>:</h4>
<p>No idea either though</p>



<a name="242143853"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/242143853" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rish Vaishnav <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#242143853">(Jun 09 2021 at 23:32)</a>:</h4>
<p>Thanks. Don't have the knowledge yet to solve this, so swallowing my pride for now and moving to an x86 machine <span aria-label="grimacing" class="emoji emoji-1f62c" role="img" title="grimacing">:grimacing:</span></p>



<a name="242279153"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/242279153" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rish Vaishnav <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#242279153">(Jun 10 2021 at 22:24)</a>:</h4>
<p>Update: the next feature I'm going to implement is pinnable/pausable infoview messages, starting from my <code>infoview_persistence_refactor</code> branch. But before that, I'm going to focus for a bit on adding complete automated testing for per-window/per-tab infoviews to make things easier down the road.</p>



<a name="242312653"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/242312653" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#242312653">(Jun 11 2021 at 08:04)</a>:</h4>
<p>That sounds great, definitely please do send small, single-purpose PRs for that as you go. But more tests would be awesome.</p>



<a name="242414513"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/242414513" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rish Vaishnav <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#242414513">(Jun 11 2021 at 23:21)</a>:</h4>
<p><span class="user-mention" data-user-id="321696">@Julian Berman</span> To save you some time, we can abandon the current PR # 35 and I can work on introducing incremental PRs for the new functionality (along with ones for new unit tests). But if you think you've "almost got it" with # 35, we can go ahead with that. Let me know what you prefer.</p>



<a name="242431150"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/242431150" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#242431150">(Jun 12 2021 at 06:16)</a>:</h4>
<p><span class="user-mention" data-user-id="373814">@Rish Vaishnav</span> if you don't hold it against me that'd be 100% helpful</p>



<a name="242431162"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/242431162" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#242431162">(Jun 12 2021 at 06:17)</a>:</h4>
<p>I am almost at the point where I can cross off another piece of functionalitiy, but after that would still have a bit of work for each of the remaining bits, so yeah if you're OK with that it'd deeeefinitely help.</p>



<a name="242445527"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/242445527" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rish Vaishnav <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#242445527">(Jun 12 2021 at 11:37)</a>:</h4>
<p>Yes no problem at all - figuring out how to best separate things is half the fun anyways!</p>



<a name="242517283"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/242517283" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rish Vaishnav <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#242517283">(Jun 13 2021 at 15:47)</a>:</h4>
<p><span class="user-mention" data-user-id="110043">@Gabriel Ebner</span> FYI: We've just internalized all of the components from <code>lean.vim</code> into <code>lean.nvim</code> - not sure what the plan for <code>lean.vim</code> is from here, whether to archive or support in parallel. IMO probably best to support in parallel at least until neovim 0.5.0 is officially released, but let me know your thoughts on this.</p>



<a name="242560971"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/242560971" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#242560971">(Jun 14 2021 at 07:27)</a>:</h4>
<p>I'll leave lean.vim as it is for now, though maybe we should make the link to lean.nvim more prominent.  Future changes to the syntax files will go to lean.nvim.</p>



<a name="243263474"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/243263474" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#243263474">(Jun 19 2021 at 18:47)</a>:</h4>
<p>There's now a short demo in the README: <a href="https://github.com/Julian/lean.nvim/#leannvim">https://github.com/Julian/lean.nvim/#leannvim</a></p>
<p>There still is not a Patrick-proof (i.e. "just tell me to run one command and then everything works without reading 8 paragraphs") section, and Lean 3 functionality lags a bit behind Lean 4. Both of those are things I'll address in the next week or so, but the demo video hopefully gives an initial idea of where things are. Comments are of course welcome.</p>



<a name="243263642"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/243263642" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#243263642">(Jun 19 2021 at 18:50)</a>:</h4>
<p>Great, that demo video looks really promising!!</p>



<a name="243796890"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/243796890" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rish Vaishnav <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#243796890">(Jun 24 2021 at 14:47)</a>:</h4>
<p><span class="user-mention" data-user-id="321696">@Julian Berman</span> the language servers seem to be broken in CI, even for commits before the most recent merge. Could recent changes to lean-language-server be responsible? Do the yml files need to be updated in some way? Looking into it…</p>



<a name="243798661"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/243798661" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rish Vaishnav <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#243798661">(Jun 24 2021 at 14:58)</a>:</h4>
<p>Locally, after updating <code>lean-language-server</code>, I get:</p>
<div class="codehilite" data-code-language="Text only"><pre><span></span><code>[local] lean.nvim $ lean-language-server --stdio
/usr/local/bin/lean-language-server: line 1: use strict: command not found
/usr/local/bin/lean-language-server: line 2: syntax error near unexpected token `exports,'
/usr/local/bin/lean-language-server: line 2: `Object.defineProperty(exports, "__esModule", { value: true });'
</code></pre></div>



<a name="243798876"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/243798876" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#243798876">(Jun 24 2021 at 14:59)</a>:</h4>
<p>Sorry, should have mentioned that somewhere you'd see -- it's related to me breaking that somehow, but I don't know how, I didn't touch anywhere near that, so I can only assume something changed in <code>tsc</code>'s behavior maybe or something, I have to investigate (and had to jump on calls). <a href="https://github.com/leanprover/lean-client-js/pull/21#issuecomment-867688593">https://github.com/leanprover/lean-client-js/pull/21#issuecomment-867688593</a></p>



<a name="243799551"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/243799551" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rish Vaishnav <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#243799551">(Jun 24 2021 at 15:03)</a>:</h4>
<p>Alright no prob, I'll look into it as well</p>



<a name="243799699"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/243799699" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#243799699">(Jun 24 2021 at 15:04)</a>:</h4>
<p>I've pushed a fix now.</p>



<a name="243799842"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/243799842" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#243799842">(Jun 24 2021 at 15:05)</a>:</h4>
<p>The whole lean-client-js project hasn't been touched for years.  It seems impossible to upgrade everything to the latest typescript version, but upgrading lean-language-server worked just fine and fixed the bug.</p>



<a name="243800342"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/243800342" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rish Vaishnav <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#243800342">(Jun 24 2021 at 15:08)</a>:</h4>
<p>Awesome, looks like that fixed it. Thank you!</p>



<a name="256051162"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256051162" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256051162">(Oct 04 2021 at 12:38)</a>:</h4>
<p>Thanks to Rish and Gabriel, lean.nvim just merged support for... widgets :) -- both for lean 3 and 4.</p>
<p>If you were waiting for support for them to decide whether neovim was worth a shot, now's your chance. Let us know what you think. We're still merging a few tweaks to how things look (and documenting the mappings), but the core functionality is indeed there now.</p>



<a name="256051219"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256051219" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256051219">(Oct 04 2021 at 12:38)</a>:</h4>
<p>Wow, that's really cool!</p>



<a name="256051226"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256051226" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256051226">(Oct 04 2021 at 12:38)</a>:</h4>
<p>How do I test this?</p>



<a name="256058325"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256058325" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256058325">(Oct 04 2021 at 13:26)</a>:</h4>
<p>I can't even imagine how it could look like <span aria-label="open mouth" class="emoji emoji-1f62e" role="img" title="open mouth">:open_mouth:</span></p>



<a name="256058536"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256058536" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256058536">(Oct 04 2021 at 13:28)</a>:</h4>
<p>Did you already update the documentation?</p>



<a name="256059551"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256059551" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256059551">(Oct 04 2021 at 13:34)</a>:</h4>
<p>I'll post a recording a bit later after the tweaks are in -- and no, still working on tweaking the docs, so this is an early sneak peak (but hey who can resist such things). For now if you have the plugin installed -- <a href="https://github.com/Julian/lean.nvim/#installation">howto is here, let me know if anything is unclear</a> -- the mappings you'll use are <a href="https://github.com/Julian/lean.nvim/blob/main/lua/lean/infoview.lua#L28-L33">here</a> -- but more docs to come later tonight if you're less adventurous (or have less time).</p>



<a name="256060037"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256060037" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256060037">(Oct 04 2021 at 13:37)</a>:</h4>
<p>I can definitely wait. Thank you so much for all this!</p>



<a name="256060328"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256060328" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256060328">(Oct 04 2021 at 13:39)</a>:</h4>
<p>In this case I didn't do much myself, just the messenger trying to rile up more feedback :), but indeed the others did quite a nice job.</p>



<a name="256245888"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256245888" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256245888">(Oct 05 2021 at 13:34)</a>:</h4>
<p>Here's a brief screen recording of what it looks like at the minute -- <a href="https://user-images.githubusercontent.com/329822/136033121-4656e399-b422-4404-9e6c-526dffe91419.mov">https://user-images.githubusercontent.com/329822/136033121-4656e399-b422-4404-9e6c-526dffe91419.mov</a></p>



<a name="256246396"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256246396" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256246396">(Oct 05 2021 at 13:38)</a>:</h4>
<p>That looks very exciting!</p>



<a name="256246461"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256246461" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256246461">(Oct 05 2021 at 13:38)</a>:</h4>
<p>If installing this is reasonably easy, I am very interested in trying this out.</p>



<a name="256247320"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256247320" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256247320">(Oct 05 2021 at 13:44)</a>:</h4>
<p>I believe at this point it should be, and of course am happy to help if not (either by improving docs or otherwise) -- have you got the plugin installed? Or if not, can I help somehow there? What step are you at?</p>



<a name="256247421"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256247421" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256247421">(Oct 05 2021 at 13:45)</a>:</h4>
<p>I'm at step 0.</p>



<a name="256247448"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256247448" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256247448">(Oct 05 2021 at 13:45)</a>:</h4>
<p>Can I install the plugin using usual methods?</p>



<a name="256247455"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256247455" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256247455">(Oct 05 2021 at 13:45)</a>:</h4>
<p>Cool :)</p>



<a name="256247569"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256247569" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256247569">(Oct 05 2021 at 13:46)</a>:</h4>
<p>Yes -- any plugin manager should work, we include instructions for vim-plug specifically here: <a href="https://github.com/Julian/lean.nvim/#installation">https://github.com/Julian/lean.nvim/#installation</a></p>



<a name="256266217"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256266217" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256266217">(Oct 05 2021 at 15:26)</a>:</h4>
<p><span class="user-mention" data-user-id="373814">@Rish Vaishnav</span> also deserves another shout out for the (massively cool) effort on getting the above to work.</p>



<a name="256266801"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256266801" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rish Vaishnav <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256266801">(Oct 05 2021 at 15:29)</a>:</h4>
<p>Thanks <span aria-label="blush" class="emoji emoji-1f60a" role="img" title="blush">:blush:</span> Though there is certainly still a lot more cool stuff I plan to add very soon!!!</p>



<a name="256275851"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256275851" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256275851">(Oct 05 2021 at 16:24)</a>:</h4>
<p><span class="user-mention" data-user-id="321696">@Julian Berman</span> <code>Plug 'andrewradev/switch.vim'  " For Lean switch support</code><br>
What does that do?</p>



<a name="256277174"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256277174" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256277174">(Oct 05 2021 at 16:32)</a>:</h4>
<p>aah, it's some generic plugin for syntax transformations?</p>



<a name="256277188"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256277188" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256277188">(Oct 05 2021 at 16:32)</a>:</h4>
<p>Yet another thing to try out</p>



<a name="256279714"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256279714" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256279714">(Oct 05 2021 at 16:49)</a>:</h4>
<p><span class="user-mention" data-user-id="112680">@Johan Commelin</span>  Yes :) in my opinion it's literally the most useful under-known vim plugin</p>



<a name="256279758"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256279758" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256279758">(Oct 05 2021 at 16:49)</a>:</h4>
<p>Amongst the few of us using <code>lean.nvim</code> however, I suspect only I've used the lean support I wrote</p>



<a name="256279775"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256279775" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256279775">(Oct 05 2021 at 16:49)</a>:</h4>
<p>And since I know so little lean, it undoubtedly could use improvement in what it switches between</p>



<a name="256279887"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256279887" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256279887">(Oct 05 2021 at 16:50)</a>:</h4>
<p>But what it does right now is e.g. if you have <code>library_search</code> under the cursor and hit switch, it'll change that to <code>suggest</code>, and if you hit it again to <code>hint</code> I think</p>



<a name="256279948"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256279948" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256279948">(Oct 05 2021 at 16:51)</a>:</h4>
<p>Or if you have <code>tt</code> under the cursor you get <code>ff</code></p>



<a name="256280007"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256280007" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256280007">(Oct 05 2021 at 16:51)</a>:</h4>
<p><code>simp</code> -&gt; <code>squeeze_simp</code>??</p>



<a name="256280010"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256280010" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256280010">(Oct 05 2021 at 16:51)</a>:</h4>
<p>The full set of switches are here: <a href="https://github.com/Julian/lean.nvim/blob/main/ftplugin/lean/switch.vim#L8-L35">https://github.com/Julian/lean.nvim/blob/main/ftplugin/lean/switch.vim#L8-L35</a> and as I say I fully expected someone who knows more lean to at some point come along and suggest better versions of that</p>



<a name="256280136"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256280136" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256280136">(Oct 05 2021 at 16:52)</a>:</h4>
<p>yep <del>though actually I think I made it use your <code>simp?</code>, but when I saw you say <code>squeeze_simp</code> was still a bit better at things I made a mental note to go back to <code>squeeze_simp</code> which I may not have pushed</del> done</p>



<a name="256280266"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256280266" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256280266">(Oct 05 2021 at 16:53)</a>:</h4>
<p>Uh sorry I linked you the lean 4 version</p>



<a name="256280295"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256280295" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256280295">(Oct 05 2021 at 16:53)</a>:</h4>
<p>The lean 3 one (which has tactic switches) is here: <a href="https://github.com/Julian/lean.nvim/blob/27817399adcf871075337cb2b7d1e773e7e5c55e/ftplugin/lean3/switch.vim">https://github.com/Julian/lean.nvim/blob/27817399adcf871075337cb2b7d1e773e7e5c55e/ftplugin/lean3/switch.vim</a></p>



<a name="256282932"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256282932" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256282932">(Oct 05 2021 at 17:09)</a>:</h4>
<p>Any tips for following nested widgets? The only way I managed to go more than one level deep is with <code>:set mouse=a</code> as ctrl-w w seems to fail me after one widget</p>



<a name="256283039"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256283039" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256283039">(Oct 05 2021 at 17:10)</a>:</h4>
<p>Hit <code>Tab</code></p>



<a name="256283104"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256283104" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256283104">(Oct 05 2021 at 17:11)</a>:</h4>
<p>Hm, it doesn't seem to do anything for me unfortunately</p>



<a name="256283128"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256283128" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256283128">(Oct 05 2021 at 17:11)</a>:</h4>
<p>I added that an hour or two ago</p>



<a name="256283148"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256283148" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256283148">(Oct 05 2021 at 17:11)</a>:</h4>
<p>So update if you haven't since then perhaps</p>



<a name="256283258"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256283258" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256283258">(Oct 05 2021 at 17:12)</a>:</h4>
<p>Perfect, thank you all for this <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span></p>



<a name="256290889"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256290889" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256290889">(Oct 05 2021 at 18:01)</a>:</h4>
<p>Installing the suggested packages results in an endless stream of errors like: <code>E5108: Error executing lua ...sot/.config/nvim/bundle/nvim-compe/lua/compe/context.lua:20: attempt to index field 'b' (a nil value)</code></p>



<a name="256291221"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256291221" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256291221">(Oct 05 2021 at 18:03)</a>:</h4>
<p><span class="user-mention" data-user-id="110031">@Patrick Massot</span> can you share what version of neovim you're on? Via e.g. <code>nvim --version</code>.</p>



<a name="256291295"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256291295" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256291295">(Oct 05 2021 at 18:03)</a>:</h4>
<p>and <code>Error executing vim.schedule lua callback: ...sot/.config/nvim/bundle/plenary.nvim/lua/plenary/job.lua:480: attempt to call field 'wait' (a nil value)</code></p>



<a name="256291414"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256291414" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256291414">(Oct 05 2021 at 18:04)</a>:</h4>
<div class="codehilite" data-code-language="Bash"><pre><span></span><code>NVIM v0.5.0-353-g3051342f9
Build type: RelWithDebInfo
LuaJIT <span class="m">2</span>.1.0-beta3
Compilation: /usr/bin/gcc-5 -U_FORTIFY_SOURCE -D_FORTIFY_SOURCE<span class="o">=</span><span class="m">1</span> -O2 -g -Og -g -Wall -Wextra -pedantic -Wno-unused-parameter -Wstrict-prototypes -std<span class="o">=</span>gnu99 -Wshadow -Wconversion -Wmissing-prototypes -Wvla -fstack-protector-strong -fdiagnostics-color<span class="o">=</span>auto -DINCLUDE_GENERATED_DECLARATIONS -D_GNU_SOURCE -DNVIM_MSGPACK_HAS_FLOAT32 -DNVIM_UNIBI_HAS_VAR_FROM -DMIN_LOG_LEVEL<span class="o">=</span><span class="m">3</span> -I/home/travis/build/neovim/bot-ci/build/neovim/build/config -I/home/travis/build/neovim/bot-ci/build/neovim/src -I/home/travis/build/neovim/bot-ci/build/neovim/.deps/usr/include -I/usr/include -I/home/travis/build/neovim/bot-ci/build/neovim/build/src/nvim/auto -I/home/travis/build/neovim/bot-ci/build/neovim/build/include
Compilé par travis@travis-job-403476e6-991c-4366-b1c7-4e5a12a1aed5

Features: +acl +iconv +tui
</code></pre></div>



<a name="256291759"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256291759" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256291759">(Oct 05 2021 at 18:06)</a>:</h4>
<p>My vim is now completely unusable, even for non lean files</p>



<a name="256292276"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256292276" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256292276">(Oct 05 2021 at 18:09)</a>:</h4>
<p>Hm, odd, sorry -- I suppose 2 things to try if you don't mind, one is can you give a shot at neovim 0.5.1? You can get a quick download of it here <a href="https://github.com/neovim/neovim/releases/tag/v0.5.1">https://github.com/neovim/neovim/releases/tag/v0.5.1</a> if you're comfortable trying that, though it's weird because the first error message is basically saying <code>:lua print(vim.wait)</code> doesn't work (so if you can try that and tell me if that works that may help too</p>



<a name="256292335"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256292335" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256292335">(Oct 05 2021 at 18:09)</a>:</h4>
<p>But I know Gabriel was successfully using 0.5.0 up until like 2 days ago</p>



<a name="256292362"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256292362" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256292362">(Oct 05 2021 at 18:09)</a>:</h4>
<p>Maybe I misunderstand the instructions. For instance I'm not sure where I'm meant to write</p>
<div class="codehilite" data-code-language="Lua"><pre><span></span><code><span class="c1">-- You may want to reference the nvim-lspconfig documentation, found at:</span>
<span class="c1">-- https://github.com/neovim/nvim-lspconfig#keybindings-and-completion</span>
<span class="c1">-- The below is just a simple initial set of mappings.</span>
<span class="kd">local</span> <span class="kr">function</span> <span class="nf">on_attach</span><span class="p">(</span><span class="n">client</span><span class="p">,</span> <span class="n">bufnr</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">local</span> <span class="kr">function</span> <span class="nf">buf_set_keymap</span><span class="p">(...)</span> <span class="n">vim</span><span class="p">.</span><span class="n">api</span><span class="p">.</span><span class="n">nvim_buf_set_keymap</span><span class="p">(</span><span class="n">bufnr</span><span class="p">,</span> <span class="p">...)</span> <span class="kr">end</span>
    <span class="kd">local</span> <span class="kr">function</span> <span class="nf">buf_set_option</span><span class="p">(...)</span> <span class="n">vim</span><span class="p">.</span><span class="n">api</span><span class="p">.</span><span class="n">nvim_buf_set_option</span><span class="p">(</span><span class="n">bufnr</span><span class="p">,</span> <span class="p">...)</span> <span class="kr">end</span>
    <span class="n">buf_set_keymap</span><span class="p">(</span><span class="s1">'n'</span><span class="p">,</span> <span class="s1">'gd'</span><span class="p">,</span> <span class="s1">'&lt;Cmd&gt;lua vim.lsp.buf.definition()&lt;CR&gt;'</span><span class="p">,</span> <span class="p">{</span><span class="n">noremap</span> <span class="o">=</span> <span class="kc">true</span><span class="p">})</span>
    <span class="n">buf_set_keymap</span><span class="p">(</span><span class="s1">'n'</span><span class="p">,</span> <span class="s1">'K'</span><span class="p">,</span> <span class="s1">'&lt;Cmd&gt;lua vim.lsp.buf.hover()&lt;CR&gt;'</span><span class="p">,</span> <span class="p">{</span><span class="n">noremap</span> <span class="o">=</span> <span class="kc">true</span><span class="p">})</span>
    <span class="n">buf_set_option</span><span class="p">(</span><span class="s1">'omnifunc'</span><span class="p">,</span> <span class="s1">'v:lua.vim.lsp.omnifunc'</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div>



<a name="256292450"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256292450" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256292450">(Oct 05 2021 at 18:10)</a>:</h4>
<p>One sec, I'll give you a full gist</p>



<a name="256292510"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256292510" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256292510">(Oct 05 2021 at 18:10)</a>:</h4>
<p><code>:lua print(vim.wait)</code> answers <code>nil</code></p>



<a name="256292529"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256292529" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256292529">(Oct 05 2021 at 18:10)</a>:</h4>
<p>Note that I never used any lua for anything</p>



<a name="256292628"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256292628" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256292628">(Oct 05 2021 at 18:11)</a>:</h4>
<p>Hm, yeah that shouldn't matter, for neovim it's part of neovim -- you're on debian I guess?</p>



<a name="256292655"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256292655" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256292655">(Oct 05 2021 at 18:11)</a>:</h4>
<p>If you type <code>:version</code> inside neovim do you get something similar to that output?</p>



<a name="256292880"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256292880" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256292880">(Oct 05 2021 at 18:12)</a>:</h4>
<p>With the newer nvim I get a new error message <code>E5112: Error while creating lua chunk: /home/pmassot/.config/nvim/plugin/lean.lua:4: unexpected symbol near '{'</code></p>



<a name="256292950"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256292950" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256292950">(Oct 05 2021 at 18:13)</a>:</h4>
<p>line 4 is <code>local function on_attach(client, bufnr) {</code></p>



<a name="256293007"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256293007" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256293007">(Oct 05 2021 at 18:13)</a>:</h4>
<p>:version                                                                                                                                                                                                 <br>
NVIM v0.5.1<br>
Build type: RelWithDebInfo<br>
LuaJIT 2.1.0-beta3</p>



<a name="256293066"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256293066" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256293066">(Oct 05 2021 at 18:14)</a>:</h4>
<p>Oh. And that line is telling me that indeed I put invalid lua in the README so apologies.. One second I'm on a call but I'll give you the right thing</p>



<a name="256293235"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256293235" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256293235">(Oct 05 2021 at 18:15)</a>:</h4>
<p>There is no hurry at all. I'll take care of my son for a while.</p>



<a name="256295204"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256295204" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256295204">(Oct 05 2021 at 18:28)</a>:</h4>
<p>Put this in <code>~/.config/nvim/plugin/lean.lua</code>: <a href="https://gist.github.com/Julian/5ddb85a86f4295491546832b25fc2011">https://gist.github.com/Julian/5ddb85a86f4295491546832b25fc2011</a></p>
<p>(And let me know if that at least makes the errors go away)</p>



<a name="256299181"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256299181" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256299181">(Oct 05 2021 at 18:54)</a>:</h4>
<p>I can now use vim normally!</p>



<a name="256299190"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256299190" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256299190">(Oct 05 2021 at 18:54)</a>:</h4>
<p>Let me try some Lean then</p>



<a name="256299328"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256299328" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256299328">(Oct 05 2021 at 18:55)</a>:</h4>
<p>I see the info view! <span aria-label="octopus" class="emoji emoji-1f419" role="img" title="octopus">:octopus:</span></p>



<a name="256299852"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256299852" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256299852">(Oct 05 2021 at 18:59)</a>:</h4>
<p>Hooray! Yeah feel free to ask anything else if you start playing around. What I just gave you doesn't do everything you may want (out of vim) -- <code>lean.nvim</code> is somewhat intentionally less opinionated (or simple?) than the vscode plugin so there's more room to customize things (or use plugins in the neovim ecosystem), but if you don't do so already yourself obviously ask and happy to help (especially if it's missing functionality we should add). So yeah in short tear us apart :D</p>



<a name="256300128"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256300128" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256300128">(Oct 05 2021 at 19:00)</a>:</h4>
<p>This is so amazing that I'm laughing with joy in front of my computer</p>



<a name="256300274"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256300274" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256300274">(Oct 05 2021 at 19:01)</a>:</h4>
<p>Uh oh... should I be concerned that I will need to switch back to vim now?</p>



<a name="256300287"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256300287" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256300287">(Oct 05 2021 at 19:01)</a>:</h4>
<p>Well that certainly makes my day. Again credit to the other folks though, I'm just the guy who was stubborn enough to ignore you when you said Lean doesn't have a vim story :D</p>



<a name="256300403"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256300403" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256300403">(Oct 05 2021 at 19:01)</a>:</h4>
<p>But <span class="user-mention" data-user-id="110043">@Gabriel Ebner</span> and <span class="user-mention" data-user-id="373814">@Rish Vaishnav</span> have both contributed a ton I would have never been able to do, so it was a true team effort.</p>



<a name="256300728"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256300728" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256300728">(Oct 05 2021 at 19:03)</a>:</h4>
<p>How to you see where errors are? What about the orange bars?</p>



<a name="256302702"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256302702" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256302702">(Oct 05 2021 at 19:16)</a>:</h4>
<blockquote>
<p>What about the orange bars?</p>
</blockquote>
<p>Fixed.  They used to work in Lean 3 as well, but from what I can tell this was broken after merging the widgets branch.</p>



<a name="256303340"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256303340" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256303340">(Oct 05 2021 at 19:20)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110031">Patrick Massot</span> <a href="#narrow/stream/113488-general/topic/lean.2Envim/near/256300728">said</a>:</p>
<blockquote>
<p>How to you see where errors are?</p>
</blockquote>
<p>You might need to set the colors manually (if your colorscheme doesn't support it yet):</p>
<div class="codehilite" data-code-language="VimL"><pre><span></span><code><span class="k">hi</span> LspReferenceRead cterm<span class="p">=</span><span class="nb">bold</span> ctermbg<span class="p">=</span><span class="k">red</span> guibg<span class="p">=</span>LightYellow
<span class="k">hi</span> LspReferenceText cterm<span class="p">=</span><span class="nb">bold</span> ctermbg<span class="p">=</span><span class="k">red</span> guibg<span class="p">=</span>LightYellow
<span class="k">hi</span> LspReferenceWrite cterm<span class="p">=</span><span class="nb">bold</span> ctermbg<span class="p">=</span><span class="k">red</span> guibg<span class="p">=</span>LightYellow
<span class="k">hi</span> LspDiagnosticsDefaultError cterm<span class="p">=</span><span class="nb">bold</span> ctermfg<span class="p">=</span>Red
<span class="k">hi</span> LspDiagnosticsDefaultWarning cterm<span class="p">=</span><span class="nb">bold</span> ctermfg<span class="p">=</span>Yellow
<span class="k">hi</span> LspDiagnosticsDefaultInformation ctermfg<span class="p">=</span>Blue
<span class="k">hi</span> LspDiagnosticsUnderlineError <span class="k">gui</span><span class="p">=</span>undercurl
<span class="k">hi</span> LspDiagnosticsUnderlineWarning <span class="k">gui</span><span class="p">=</span>undercurl
<span class="k">hi</span> LspDiagnosticsUnderlineInformation <span class="k">gui</span><span class="p">=</span>undercurl
<span class="k">hi</span> LspDiagnosticsUnderlineHint <span class="k">gui</span><span class="p">=</span>undercurl
<span class="k">hi</span> link SpecialChar Character
</code></pre></div>
<p>You might also need to enable the squiggles manually (not sure if this is the default or not):</p>
<div class="codehilite" data-code-language="VimL"><pre><span></span><code><span class="p">:</span><span class="k">lua</span> <span class="p">&lt;&lt;</span>EOF
<span class="k">vim</span>.<span class="nb">lsp</span>.handlers[<span class="s2">"textDocument/publishDiagnostics"</span>] <span class="p">=</span> <span class="k">vim</span>.<span class="nb">lsp</span>.with<span class="p">(</span>
  <span class="k">vim</span>.<span class="nb">lsp</span>.diagnostic.on_publish_diagnostics<span class="p">,</span> {
    <span class="nb">underline</span> <span class="p">=</span> true<span class="p">,</span>
    virtual_text <span class="p">=</span> { spacing <span class="p">=</span> <span class="m">4</span> }<span class="p">,</span>
    update_in_insert <span class="p">=</span> true<span class="p">,</span>
  }<span class="p">)</span>
EOF
</code></pre></div>



<a name="256306668"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256306668" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256306668">(Oct 05 2021 at 19:43)</a>:</h4>
<p>I can confirm the orange "bars" are there. However they make the left margin randomly jump (as do thet <code>#check</code> and <code>#print</code> commands) which is really really not nice. Is there any way to avoid that?</p>



<a name="256306749"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256306749" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256306749">(Oct 05 2021 at 19:44)</a>:</h4>
<p>Maybe we could permanently reserve horizontal space for them?</p>



<a name="256306954"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256306954" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256306954">(Oct 05 2021 at 19:45)</a>:</h4>
<p>I'm not sure what you call red squiggles. I think I don't see them. I pasted you lua code at the end of my <code>plugin/lean.lua</code></p>



<a name="256307116"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256307116" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256307116">(Oct 05 2021 at 19:46)</a>:</h4>
<p>By the way, in case we still have a couple of VScode users, I recently found the "Error lens" extension which makes errors <em>much</em> easier to spot.</p>



<a name="256307267"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256307267" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256307267">(Oct 05 2021 at 19:47)</a>:</h4>
<p>You can permanently reserve space using... I think <code>:set signcolumn=yes</code> (or <code>vim.opt.signcolumn = "yes"</code> from your lua file)</p>



<a name="256307341"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256307341" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256307341">(Oct 05 2021 at 19:48)</a>:</h4>
<p>The default is "auto".</p>



<a name="256307379"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256307379" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256307379">(Oct 05 2021 at 19:48)</a>:</h4>
<p>Also beyond what Gabriel shared you probably want some navigation to move between errors (at least I like that a lot)</p>



<a name="256307488"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256307488" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256307488">(Oct 05 2021 at 19:49)</a>:</h4>
<p>This is what I use (the first and last line of this, though perhaps the whole thing is of interest): <a href="https://github.com/Julian/dotfiles/blob/main/.config/nvim/plugin/lsp.lua#L21-L25">https://github.com/Julian/dotfiles/blob/main/.config/nvim/plugin/lsp.lua#L21-L25</a></p>



<a name="256307529"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256307529" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256307529">(Oct 05 2021 at 19:49)</a>:</h4>
<p>So when I hit <code>&lt;space&gt;n</code> it goes to the next lean line with an error on it.</p>



<a name="256307563"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256307563" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256307563">(Oct 05 2021 at 19:49)</a>:</h4>
<p>And <code>&lt;space&gt;N</code> goes to the previous one.</p>



<a name="256307675"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256307675" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256307675">(Oct 05 2021 at 19:50)</a>:</h4>
<p>If you want to copy paste those lines just note you'll need to copy paste these too: <a href="https://github.com/Julian/dotfiles/blob/main/.config/nvim/plugin/lsp.lua#L4-L12">https://github.com/Julian/dotfiles/blob/main/.config/nvim/plugin/lsp.lua#L4-L12</a></p>



<a name="256308558"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256308558" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256308558">(Oct 05 2021 at 19:56)</a>:</h4>
<p>Julian, can you show what "red squiggles" are meant to look like?</p>



<a name="256309684"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256309684" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256309684">(Oct 05 2021 at 20:03)</a>:</h4>
<p>I have them turned off, ha, but yeah gimme a sec</p>



<a name="256309777"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256309777" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256309777">(Oct 05 2021 at 20:04)</a>:</h4>
<p>They're meant to look quite similar to VSCode where the actual text has a curly line underneath it in your lean file</p>



<a name="256309797"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256309797" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256309797">(Oct 05 2021 at 20:04)</a>:</h4>
<p>Are you in terminal neovim or graphical?</p>



<a name="256309809"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256309809" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256309809">(Oct 05 2021 at 20:04)</a>:</h4>
<p>That's what I thought. I don't see them</p>



<a name="256309827"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256309827" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256309827">(Oct 05 2021 at 20:04)</a>:</h4>
<p>I'm in a terminal</p>



<a name="256311479"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256311479" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256311479">(Oct 05 2021 at 20:12)</a>:</h4>
<p>This is what it should look like, albeit this is Lean 4: <a href="/user_uploads/3121/dLpm8epihJIIzyAIcxT7av4s/Screen-Shot-2021-10-05-at-16.12.13.png">Screen-Shot-2021-10-05-at-16.12.13.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/3121/dLpm8epihJIIzyAIcxT7av4s/Screen-Shot-2021-10-05-at-16.12.13.png" title="Screen-Shot-2021-10-05-at-16.12.13.png"><img src="/user_uploads/3121/dLpm8epihJIIzyAIcxT7av4s/Screen-Shot-2021-10-05-at-16.12.13.png"></a></div>



<a name="256311503"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256311503" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256311503">(Oct 05 2021 at 20:13)</a>:</h4>
<p>That's in a terminal (I use terminal neovim too)</p>



<a name="256311555"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256311555" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256311555">(Oct 05 2021 at 20:13)</a>:</h4>
<p>I don't have this <span aria-label="sad" class="emoji emoji-2639" role="img" title="sad">:sad:</span></p>



<a name="256311563"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256311563" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256311563">(Oct 05 2021 at 20:13)</a>:</h4>
<p>I think there's 2 things that might be preventing you from seeing them -- one is I think Lean 3 support for us still doesn't have them, but Gabriel correct me if I'm wrong</p>



<a name="256311602"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256311602" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256311602">(Oct 05 2021 at 20:13)</a>:</h4>
<p>I think there there's an open issue: <a href="https://github.com/Julian/lean.nvim/issues/97">https://github.com/Julian/lean.nvim/issues/97</a></p>



<a name="256311611"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256311611" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256311611">(Oct 05 2021 at 20:13)</a>:</h4>
<p>I'm talking only about Lean 3</p>



<a name="256311615"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256311615" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256311615">(Oct 05 2021 at 20:13)</a>:</h4>
<p>But we need to fix it in Lean 3's server</p>



<a name="256311628"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256311628" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256311628">(Oct 05 2021 at 20:13)</a>:</h4>
<p>Yeah so I think you won't see them</p>



<a name="256311728"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256311728" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256311728">(Oct 05 2021 at 20:14)</a>:</h4>
<p>Ok, that's not a big deal</p>



<a name="256311744"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256311744" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256311744">(Oct 05 2021 at 20:14)</a>:</h4>
<p>(The other one is if your <code>$TERM</code> is misset, but yeah I think for Lean 3 they don't work AFAIK -- as I say I usually leave them off personally, I find them a bit noisy)</p>



<a name="256312340"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256312340" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256312340">(Oct 05 2021 at 20:18)</a>:</h4>
<p>How do you click the "Try this" links?</p>



<a name="256312426"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256312426" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256312426">(Oct 05 2021 at 20:19)</a>:</h4>
<p>Oops, it's in the doc</p>



<a name="256312460"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256312460" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256312460">(Oct 05 2021 at 20:19)</a>:</h4>
<p>Support for try this is a bit wonky, I wrote it very early on -- but right now you can hit <code>&lt;LocalLeader&gt;t</code> (from the Lean source file) to replace the first one</p>



<a name="256312536"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256312536" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256312536">(Oct 05 2021 at 20:19)</a>:</h4>
<p>It doesn't replace the correct thing</p>



<a name="256312543"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256312543" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256312543">(Oct 05 2021 at 20:19)</a>:</h4>
<p>Yeah, sometimes the parsing is wrong though so if it starts to annoy you (as it often annoys me), complain :) and I'll try to make time to make it better.</p>



<a name="256312558"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256312558" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256312558">(Oct 05 2021 at 20:19)</a>:</h4>
<p>Right, sorry :/</p>



<a name="256312622"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256312622" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256312622">(Oct 05 2021 at 20:20)</a>:</h4>
<p>I had a <code>squeeze_simp at this</code> and it kept the <code>at this</code> (which became duplicated)</p>



<a name="256312665"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256312665" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256312665">(Oct 05 2021 at 20:20)</a>:</h4>
<p>in those cases I do the hacky thing, I just go into the infoview window, yank the right thing, and replace, and then curse at the bad parsing code</p>



<a name="256312925"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256312925" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256312925">(Oct 05 2021 at 20:22)</a>:</h4>
<p>(The vscode extension has some heuristics which essentially are what's needed to port to Lua)</p>



<a name="256313671"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256313671" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256313671">(Oct 05 2021 at 20:27)</a>:</h4>
<p>Do you sometimes see <code>Error executing vim.schedule lua callback: ...t_nvimHd0Pv1/usr/share/nvim/runtime/lua/vim/lsp/util.lua:1052: Failed to switch to buffer 26</code> when trying to jump to definition?</p>



<a name="256314428"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256314428" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256314428">(Oct 05 2021 at 20:32)</a>:</h4>
<p>I haven't seen that error personally -- how often does it happen? I take it not every time?</p>



<a name="256314706"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256314706" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256314706">(Oct 05 2021 at 20:34)</a>:</h4>
<p>I'm currently in a state where it happens every time</p>



<a name="256314789"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256314789" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256314789">(Oct 05 2021 at 20:35)</a>:</h4>
<p>restarting vim fixed it</p>



<a name="256314857"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256314857" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256314857">(Oct 05 2021 at 20:35)</a>:</h4>
<p>OK -- <a href="https://github.com/neovim/neovim/pull/12262">https://github.com/neovim/neovim/pull/12262</a> possibly looks like the most relevant issue</p>



<a name="256314942"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256314942" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256314942">(Oct 05 2021 at 20:36)</a>:</h4>
<p>But if it happens again I guess we can see what to do about it</p>



<a name="256314976"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256314976" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256314976">(Oct 05 2021 at 20:36)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110031">Patrick Massot</span> <a href="#narrow/stream/113488-general/topic/lean.2Envim/near/256307116">said</a>:</p>
<blockquote>
<p>By the way, in case we still have a couple of VScode users, I recently found the "Error lens" extension which makes errors <em>much</em> easier to spot.</p>
</blockquote>
<p>Very nice, thanks for mentioning this!</p>



<a name="256315578"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256315578" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256315578">(Oct 05 2021 at 20:40)</a>:</h4>
<p>But now you should switch to vim</p>



<a name="256316061"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256316061" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256316061">(Oct 05 2021 at 20:44)</a>:</h4>
<p>You know that I'm on windows, right? How could you imagine I would switch to vim? :-)</p>



<a name="256316114"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256316114" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256316114">(Oct 05 2021 at 20:45)</a>:</h4>
<p>It's never too late to redeem</p>



<a name="256316214"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256316214" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256316214">(Oct 05 2021 at 20:45)</a>:</h4>
<p>But I already redeemed, removing my double boot Ubuntu/Windows and switching back fulltime to Windows.</p>



<a name="256319245"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256319245" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256319245">(Oct 05 2021 at 21:08)</a>:</h4>
<p>Ah, but there is WSL to bring you back to linux</p>



<a name="256395631"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256395631" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256395631">(Oct 06 2021 at 11:33)</a>:</h4>
<p><span class="user-mention" data-user-id="321696">@Julian Berman</span> <span class="user-mention" data-user-id="110043">@Gabriel Ebner</span> <span class="user-mention" data-user-id="373814">@Rish Vaishnav</span> Thank you so much for all your efforts! This seems to be working very nicely.</p>



<a name="256395678"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256395678" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256395678">(Oct 06 2021 at 11:33)</a>:</h4>
<p>My next job will be to figure out how to do LSP stuff. (E.g., <code>gd</code> doesn't do go-to-definition for me, atm.)</p>



<a name="256395726"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256395726" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256395726">(Oct 06 2021 at 11:34)</a>:</h4>
<p>But that should be orthogonal to the lean plugin, right?</p>



<a name="256396253"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256396253" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256396253">(Oct 06 2021 at 11:38)</a>:</h4>
<p>I think you need to set up your own mappings:</p>
<div class="codehilite" data-code-language="VimL"><pre><span></span><code><span class="nb">nnoremap</span> gD <span class="p">&lt;</span><span class="nb">Cmd</span><span class="p">&gt;</span><span class="k">lua</span> <span class="k">vim</span>.<span class="nb">lsp</span>.<span class="k">buf</span>.declaration<span class="p">()&lt;</span>CR<span class="p">&gt;</span>
<span class="nb">nnoremap</span> <span class="nb">gd</span> <span class="p">&lt;</span><span class="nb">Cmd</span><span class="p">&gt;</span><span class="k">lua</span> <span class="k">vim</span>.<span class="nb">lsp</span>.<span class="k">buf</span>.definition<span class="p">()&lt;</span>CR<span class="p">&gt;</span>
<span class="nb">nnoremap</span> K <span class="p">&lt;</span><span class="nb">Cmd</span><span class="p">&gt;</span><span class="k">lua</span> <span class="k">vim</span>.<span class="nb">lsp</span>.<span class="k">buf</span>.hover<span class="p">()&lt;</span>CR<span class="p">&gt;</span>
<span class="nb">nnoremap</span> <span class="p">&lt;</span>leader<span class="p">&gt;</span>K <span class="p">&lt;</span>cmd<span class="p">&gt;</span><span class="k">lua</span> <span class="k">vim</span>.<span class="nb">lsp</span>.diagnostic.show_line_diagnostics{show_header <span class="p">=</span> false}<span class="p">&lt;</span>CR<span class="p">&gt;</span>
<span class="nb">nnoremap</span> gi <span class="p">&lt;</span>cmd<span class="p">&gt;</span><span class="k">lua</span> <span class="k">vim</span>.<span class="nb">lsp</span>.<span class="k">buf</span>.implementation<span class="p">()&lt;</span>CR<span class="p">&gt;</span>
<span class="nb">nnoremap</span> <span class="p">&lt;</span>C<span class="p">-</span><span class="k">k</span><span class="p">&gt;</span> <span class="p">&lt;</span>cmd<span class="p">&gt;</span><span class="k">lua</span> <span class="k">vim</span>.<span class="nb">lsp</span>.<span class="k">buf</span>.signature_help<span class="p">()&lt;</span>CR<span class="p">&gt;</span>
<span class="nb">nnoremap</span> <span class="p">&lt;</span>space<span class="p">&gt;</span><span class="k">wa</span> <span class="p">&lt;</span>cmd<span class="p">&gt;</span><span class="k">lua</span> <span class="k">vim</span>.<span class="nb">lsp</span>.<span class="k">buf</span>.add_workspace_folder<span class="p">()&lt;</span>CR<span class="p">&gt;</span>
<span class="nb">nnoremap</span> <span class="p">&lt;</span>space<span class="p">&gt;</span>wr <span class="p">&lt;</span>cmd<span class="p">&gt;</span><span class="k">lua</span> <span class="k">vim</span>.<span class="nb">lsp</span>.<span class="k">buf</span>.remove_workspace_folder<span class="p">()&lt;</span>CR<span class="p">&gt;</span>
<span class="nb">nnoremap</span> <span class="p">&lt;</span>space<span class="p">&gt;</span>wl <span class="p">&lt;</span>cmd<span class="p">&gt;</span><span class="k">lua</span> print<span class="p">(</span><span class="k">vim</span>.inspect<span class="p">(</span><span class="k">vim</span>.<span class="nb">lsp</span>.<span class="k">buf</span>.list_workspace_folders<span class="p">()))&lt;</span>CR<span class="p">&gt;</span>
<span class="nb">nnoremap</span> <span class="p">&lt;</span>space<span class="p">&gt;</span>D <span class="p">&lt;</span>cmd<span class="p">&gt;</span><span class="k">lua</span> <span class="k">vim</span>.<span class="nb">lsp</span>.<span class="k">buf</span>.type_definition<span class="p">()&lt;</span>CR<span class="p">&gt;</span>
<span class="nb">nnoremap</span> <span class="p">&lt;</span>space<span class="p">&gt;</span>rn <span class="p">&lt;</span>cmd<span class="p">&gt;</span><span class="k">lua</span> <span class="k">vim</span>.<span class="nb">lsp</span>.<span class="k">buf</span>.rename<span class="p">()&lt;</span>CR<span class="p">&gt;</span>
<span class="nb">nnoremap</span> <span class="p">&lt;</span>space<span class="p">&gt;</span>ca <span class="p">&lt;</span>cmd<span class="p">&gt;</span><span class="k">lua</span> <span class="k">vim</span>.<span class="nb">lsp</span>.<span class="k">buf</span>.code_action<span class="p">()&lt;</span>CR<span class="p">&gt;</span>
<span class="nb">nnoremap</span> <span class="k">gr</span> <span class="p">&lt;</span>cmd<span class="p">&gt;</span><span class="k">lua</span> <span class="k">vim</span>.<span class="nb">lsp</span>.<span class="k">buf</span>.references<span class="p">()&lt;</span>CR<span class="p">&gt;</span>
<span class="nb">nnoremap</span> <span class="p">&lt;</span>space<span class="p">&gt;</span><span class="k">e</span> <span class="p">&lt;</span>cmd<span class="p">&gt;</span><span class="k">lua</span> <span class="k">vim</span>.<span class="nb">lsp</span>.diagnostic.show_line_diagnostics<span class="p">()&lt;</span>CR<span class="p">&gt;</span>
<span class="nb">nnoremap</span> [<span class="k">d</span> <span class="p">&lt;</span>cmd<span class="p">&gt;</span><span class="k">lua</span> <span class="k">vim</span>.<span class="nb">lsp</span>.diagnostic.goto_prev<span class="p">()&lt;</span>CR<span class="p">&gt;</span>
<span class="nb">nnoremap</span> ]<span class="k">d</span> <span class="p">&lt;</span>cmd<span class="p">&gt;</span><span class="k">lua</span> <span class="k">vim</span>.<span class="nb">lsp</span>.diagnostic.goto_next<span class="p">()&lt;</span>CR<span class="p">&gt;</span>
<span class="nb">nnoremap</span> <span class="p">&lt;</span>space<span class="p">&gt;</span><span class="k">q</span> <span class="p">&lt;</span>cmd<span class="p">&gt;</span><span class="k">lua</span> <span class="k">vim</span>.<span class="nb">lsp</span>.diagnostic.set_loclist<span class="p">()&lt;</span>CR<span class="p">&gt;</span>
<span class="nb">nnoremap</span> <span class="p">&lt;</span>space<span class="p">&gt;</span><span class="k">f</span> <span class="p">&lt;</span>cmd<span class="p">&gt;</span><span class="k">lua</span> <span class="k">vim</span>.<span class="nb">lsp</span>.<span class="k">buf</span>.formatting<span class="p">()&lt;</span>CR<span class="p">&gt;</span>
</code></pre></div>



<a name="256397690"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256397690" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256397690">(Oct 06 2021 at 11:52)</a>:</h4>
<p>I should have taken notes yesterday but I think it's not too late. When I'll be back home I'll try to precisely write down everything I did to make it work.</p>



<a name="256398506"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256398506" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256398506">(Oct 06 2021 at 12:00)</a>:</h4>
<p>Thanks, I'll also play around some more.</p>



<a name="256403004"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256403004" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256403004">(Oct 06 2021 at 12:36)</a>:</h4>
<p><span class="user-mention" data-user-id="110031">@Patrick Massot</span> that would be super helpful of course. Feel free to stick them in the wiki perhaps too, which right now only has one page: <a href="https://github.com/Julian/lean.nvim/wiki/Configuring-&amp;-Extending">https://github.com/Julian/lean.nvim/wiki/Configuring-&amp;-Extending</a></p>



<a name="256415091"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256415091" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256415091">(Oct 06 2021 at 13:55)</a>:</h4>
<p>What is the idiomatic way to close the hover popups?</p>



<a name="256417409"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256417409" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rish Vaishnav <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256417409">(Oct 06 2021 at 14:09)</a>:</h4>
<p>&lt;c-w&gt;-c should work for now, though we plan to add a mapping for this</p>



<a name="256417490"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256417490" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256417490">(Oct 06 2021 at 14:09)</a>:</h4>
<p><code>:q</code> also worked, but it seemed a bit barbaric</p>



<a name="256419159"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256419159" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rish Vaishnav <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256419159">(Oct 06 2021 at 14:20)</a>:</h4>
<p>Also note that this won’t work well (and neither will :q) if you try it two or more times in a row in nested tooltips, since it could plop you in any window at that point. I’ve been using the experimental hop.nvim integration recently so just noticed this myself.</p>
<p>So yeah a mapping to properly exit tooltips is certainly much needed…</p>



<a name="256419492"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256419492" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rish Vaishnav <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256419492">(Oct 06 2021 at 14:22)</a>:</h4>
<p>In the meantime perhaps your best bet for lean 3 is probably just to use the “x” button</p>



<a name="256438290"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256438290" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rish Vaishnav <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256438290">(Oct 06 2021 at 16:11)</a>:</h4>
<p><span class="user-mention" data-user-id="112680">@Johan Commelin</span> Just pushed, <code>Shift-Tab</code> should now do it for ya</p>



<a name="256438952"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256438952" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256438952">(Oct 06 2021 at 16:15)</a>:</h4>
<p>Oh. I was going to make Shift+Tab move backwards through tooltips.</p>



<a name="256439331"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256439331" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rish Vaishnav <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256439331">(Oct 06 2021 at 16:17)</a>:</h4>
<p>Yeah I think that's what this does? It doesn't actually close it, just moves you to its parent.</p>



<a name="256439418"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256439418" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256439418">(Oct 06 2021 at 16:18)</a>:</h4>
<p>Aha, ok lemme give it a shot myself then, cool.</p>



<a name="256457660"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256457660" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256457660">(Oct 06 2021 at 18:12)</a>:</h4>
<p>My notes about what I did yesterday:</p>
<h2>nvim</h2>
<p>Install a recent nvim by going to <a href="https://github.com/neovim/neovim/releases">https://github.com/neovim/neovim/releases</a><br>
download <code>nvim.appimage</code> (version 0.5.1) put it somewhere where my shell can<br>
find it and make it executable.</p>
<h2>node Lean server</h2>
<p>Install Node + npm and the node package lean-language-server</p>
<p>I use <a href="https://github.com/nvm-sh/nvm">https://github.com/nvm-sh/nvm</a> to manage node version so I could simply run</p>
<p><code>npm install -g lean-language-server</code></p>
<h2>vim plugins</h2>
<p>I use <a href="https://github.com/tpope/vim-pathogen">https://github.com/tpope/vim-pathogen</a> to manage my vim packages so<br>
I went to <code>$HOME/.config/nvim/bundle/</code> and ran</p>
<ul>
<li><code>git clone https://github.com/hrsh7th/nvim-compe.git</code></li>
<li><code>git clone https://github.com/nvim-lua/plenary.nvim.git</code></li>
<li><code>git clone https://github.com/neovim/nvim-lspconfig.git</code></li>
<li><code>git clone https://github.com/Julian/lean.nvim.git</code></li>
</ul>
<h2>Configuration files</h2>
<p><code>$HOME/.config/nvim/plugin/</code>, create a file <code>lean.lua</code> containing</p>
<div class="codehilite" data-code-language="Lua"><pre><span></span><code><span class="n">vim</span><span class="p">.</span><span class="n">opt</span><span class="p">.</span><span class="n">completeopt</span> <span class="o">=</span> <span class="p">{</span> <span class="s1">'menuone'</span><span class="p">,</span> <span class="s1">'noselect'</span> <span class="p">}</span>

<span class="nb">require</span><span class="s1">'compe'</span><span class="p">.</span><span class="n">setup</span><span class="p">{</span>
  <span class="n">autocomplete</span> <span class="o">=</span> <span class="kc">false</span><span class="p">,</span>
  <span class="n">source</span> <span class="o">=</span> <span class="p">{</span>
    <span class="n">nvim_lsp</span> <span class="o">=</span> <span class="p">{</span> <span class="n">priority</span> <span class="o">=</span> <span class="mi">99</span> <span class="p">},</span>
    <span class="n">nvim_lua</span> <span class="o">=</span> <span class="p">{</span> <span class="n">priority</span> <span class="o">=</span> <span class="mi">99</span> <span class="p">},</span>
    <span class="n">path</span> <span class="o">=</span> <span class="p">{</span> <span class="n">priority</span> <span class="o">=</span> <span class="mi">99</span> <span class="p">},</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="c1">-- You may want to reference the nvim-lspconfig documentation, found at:</span>
<span class="c1">-- https://github.com/neovim/nvim-lspconfig#keybindings-and-completion</span>
<span class="c1">-- The below is just a simple initial set of mappings.</span>
<span class="kd">local</span> <span class="kr">function</span> <span class="nf">on_attach</span><span class="p">(</span><span class="n">_</span><span class="p">,</span> <span class="n">bufnr</span><span class="p">)</span>
    <span class="kd">local</span> <span class="kr">function</span> <span class="nf">buf_set_keymap</span><span class="p">(...)</span> <span class="n">vim</span><span class="p">.</span><span class="n">api</span><span class="p">.</span><span class="n">nvim_buf_set_keymap</span><span class="p">(</span><span class="n">bufnr</span><span class="p">,</span> <span class="p">...)</span> <span class="kr">end</span>
    <span class="kd">local</span> <span class="kr">function</span> <span class="nf">buf_set_option</span><span class="p">(...)</span> <span class="n">vim</span><span class="p">.</span><span class="n">api</span><span class="p">.</span><span class="n">nvim_buf_set_option</span><span class="p">(</span><span class="n">bufnr</span><span class="p">,</span> <span class="p">...)</span> <span class="kr">end</span>
    <span class="kd">local</span> <span class="kr">function</span> <span class="nf">cmd</span><span class="p">(</span><span class="n">mode</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">cmd</span><span class="p">)</span>
    <span class="n">vim</span><span class="p">.</span><span class="n">api</span><span class="p">.</span><span class="n">nvim_buf_set_keymap</span><span class="p">(</span>
      <span class="n">bufnr</span><span class="p">,</span>
      <span class="n">mode</span><span class="p">,</span>
      <span class="n">key</span><span class="p">,</span>
      <span class="s1">'&lt;cmd&gt;lua '</span> <span class="o">..</span> <span class="n">cmd</span> <span class="o">..</span> <span class="s1">'&lt;CR&gt;'</span><span class="p">,</span>
      <span class="p">{</span><span class="n">noremap</span> <span class="o">=</span> <span class="kc">true</span><span class="p">}</span>
    <span class="p">)</span>
      <span class="kr">end</span>
    <span class="n">buf_set_keymap</span><span class="p">(</span><span class="s1">'n'</span><span class="p">,</span> <span class="s1">'gd'</span><span class="p">,</span> <span class="s1">'&lt;Cmd&gt;lua vim.lsp.buf.definition()&lt;CR&gt;'</span><span class="p">,</span> <span class="p">{</span><span class="n">noremap</span> <span class="o">=</span> <span class="kc">true</span><span class="p">})</span>
    <span class="n">buf_set_keymap</span><span class="p">(</span><span class="s1">'n'</span><span class="p">,</span> <span class="s1">'K'</span><span class="p">,</span> <span class="s1">'&lt;Cmd&gt;lua vim.lsp.buf.hover()&lt;CR&gt;'</span><span class="p">,</span> <span class="p">{</span><span class="n">noremap</span> <span class="o">=</span> <span class="kc">true</span><span class="p">})</span>
    <span class="n">buf_set_option</span><span class="p">(</span><span class="s1">'omnifunc'</span><span class="p">,</span> <span class="s1">'v:lua.vim.lsp.omnifunc'</span><span class="p">)</span>

    <span class="n">cmd</span><span class="p">(</span><span class="s1">'n'</span><span class="p">,</span> <span class="s1">'&lt;leader&gt;n'</span><span class="p">,</span> <span class="s1">'vim.lsp.diagnostic.goto_next{popup_opts = {show_header = false}}'</span><span class="p">)</span>
    <span class="n">cmd</span><span class="p">(</span><span class="s1">'n'</span><span class="p">,</span> <span class="s1">'&lt;leader&gt;q'</span><span class="p">,</span> <span class="s1">'vim.lsp.diagnostic.set_loclist()'</span><span class="p">)</span>
    <span class="n">cmd</span><span class="p">(</span><span class="s1">'n'</span><span class="p">,</span> <span class="s1">'&lt;leader&gt;r'</span><span class="p">,</span> <span class="s1">'vim.lsp.buf.rename()'</span><span class="p">)</span>
    <span class="n">cmd</span><span class="p">(</span><span class="s1">'n'</span><span class="p">,</span> <span class="s1">'&lt;leader&gt;K'</span><span class="p">,</span> <span class="s1">'vim.lsp.diagnostic.show_line_diagnostics{show_header = false}'</span><span class="p">)</span>
    <span class="n">cmd</span><span class="p">(</span><span class="s1">'n'</span><span class="p">,</span> <span class="s1">'&lt;leader&gt;N'</span><span class="p">,</span> <span class="s1">'vim.lsp.diagnostic.goto_prev{popup_opts = {show_header = false}}'</span><span class="p">)</span>
<span class="kr">end</span>

<span class="nb">require</span><span class="p">(</span><span class="s1">'lean'</span><span class="p">).</span><span class="n">setup</span><span class="p">{</span>
    <span class="n">abbreviations</span> <span class="o">=</span> <span class="p">{</span> <span class="n">builtin</span> <span class="o">=</span> <span class="kc">true</span> <span class="p">},</span>
    <span class="n">lsp</span> <span class="o">=</span> <span class="p">{</span> <span class="n">on_attach</span> <span class="o">=</span> <span class="n">on_attach</span> <span class="p">},</span>
    <span class="n">lsp3</span> <span class="o">=</span> <span class="p">{</span> <span class="n">on_attach</span> <span class="o">=</span> <span class="n">on_attach</span> <span class="p">},</span>
    <span class="n">mappings</span> <span class="o">=</span> <span class="kc">true</span><span class="p">,</span>
<span class="p">}</span>

<span class="n">vim</span><span class="p">.</span><span class="n">lsp</span><span class="p">.</span><span class="n">handlers</span><span class="p">[</span><span class="s2">"textDocument/publishDiagnostics"</span><span class="p">]</span> <span class="o">=</span> <span class="n">vim</span><span class="p">.</span><span class="n">lsp</span><span class="p">.</span><span class="n">with</span><span class="p">(</span>
  <span class="n">vim</span><span class="p">.</span><span class="n">lsp</span><span class="p">.</span><span class="n">diagnostic</span><span class="p">.</span><span class="n">on_publish_diagnostics</span><span class="p">,</span> <span class="p">{</span>
    <span class="n">underline</span> <span class="o">=</span> <span class="kc">true</span><span class="p">,</span>
    <span class="n">virtual_text</span> <span class="o">=</span> <span class="p">{</span> <span class="n">spacing</span> <span class="o">=</span> <span class="mi">4</span> <span class="p">},</span>
    <span class="n">update_in_insert</span> <span class="o">=</span> <span class="kc">true</span><span class="p">,</span>
  <span class="p">})</span>
</code></pre></div>
<p>in <code>$HOME/.config/nvim/after/ftplugin/</code>, create <code>lean3.vim</code> containing</p>
<div class="codehilite" data-code-language="VimL"><pre><span></span><code><span class="k">hi</span> LspReferenceRead cterm<span class="p">=</span><span class="nb">bold</span> ctermbg<span class="p">=</span><span class="k">red</span> guibg<span class="p">=</span>LightYellow
<span class="k">hi</span> LspReferenceText cterm<span class="p">=</span><span class="nb">bold</span> ctermbg<span class="p">=</span><span class="k">red</span> guibg<span class="p">=</span>LightYellow
<span class="k">hi</span> LspReferenceWrite cterm<span class="p">=</span><span class="nb">bold</span> ctermbg<span class="p">=</span><span class="k">red</span> guibg<span class="p">=</span>LightYellow
<span class="k">hi</span> LspDiagnosticsDefaultError cterm<span class="p">=</span><span class="nb">bold</span> ctermfg<span class="p">=</span>Red
<span class="k">hi</span> LspDiagnosticsDefaultWarning cterm<span class="p">=</span><span class="nb">bold</span> ctermfg<span class="p">=</span>Yellow
<span class="k">hi</span> LspDiagnosticsDefaultInformation ctermfg<span class="p">=</span>Blue
<span class="k">hi</span> LspDiagnosticsUnderlineError <span class="k">gui</span><span class="p">=</span>undercurl
<span class="k">hi</span> LspDiagnosticsUnderlineWarning <span class="k">gui</span><span class="p">=</span>undercurl
<span class="k">hi</span> LspDiagnosticsUnderlineInformation <span class="k">gui</span><span class="p">=</span>undercurl
<span class="k">hi</span> LspDiagnosticsUnderlineHint <span class="k">gui</span><span class="p">=</span>undercurl
<span class="k">hi</span> link SpecialChar Character

<span class="k">set</span> signcolumn<span class="p">=</span>yes
</code></pre></div>



<a name="256458194"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256458194" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256458194">(Oct 06 2021 at 18:15)</a>:</h4>
<p>Julian, feel free to steal any of this for your documentation (or tell me I messed up).</p>



<a name="256460409"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256460409" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256460409">(Oct 06 2021 at 18:28)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110031">Patrick Massot</span> <a href="#narrow/stream/113488-general/topic/lean.2Envim/near/256313671">said</a>:</p>
<blockquote>
<p>Do you sometimes see <code>Error executing vim.schedule lua callback: ...t_nvimHd0Pv1/usr/share/nvim/runtime/lua/vim/lsp/util.lua:1052: Failed to switch to buffer 26</code> when trying to jump to definition?</p>
</blockquote>
<p>I found a way to reproduce with 100% failure: ask to lint a file and then try to go to definition:<br>
<a href="/user_uploads/3121/Mm_PxsLJaBArDYh5LEtlVPxE/bug_gd.gif">bug_gd.gif</a></p>
<div class="message_inline_image"><a href="/user_uploads/3121/Mm_PxsLJaBArDYh5LEtlVPxE/bug_gd.gif" title="bug_gd.gif"><img src="/user_uploads/3121/Mm_PxsLJaBArDYh5LEtlVPxE/bug_gd.gif"></a></div>



<a name="256461945"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256461945" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256461945">(Oct 06 2021 at 18:36)</a>:</h4>
<p>It would be nice to have markdown syntax highlighting in comments</p>



<a name="256463593"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256463593" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256463593">(Oct 06 2021 at 18:46)</a>:</h4>
<p>How do you restart the lean server when it goes crazy?</p>



<a name="256465796"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256465796" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256465796">(Oct 06 2021 at 18:59)</a>:</h4>
<p>And when it dies I see <code>(node:581156) UnhandledPromiseRejectionWarning: server is not alive </code> but don't get the option to restart it</p>



<a name="256467700"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256467700" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256467700">(Oct 06 2021 at 19:12)</a>:</h4>
<p>The linting trick is far from being the only way to trigger the jump to bug, it happens really really often</p>



<a name="256470431"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256470431" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256470431">(Oct 06 2021 at 19:30)</a>:</h4>
<p>Thanks Patrick. At first glance definitely nothing messed up in it!</p>
<p><span class="user-mention silent" data-user-id="110031">Patrick Massot</span> <a href="#narrow/stream/113488-general/topic/lean.2Envim/near/256463593">said</a>:</p>
<blockquote>
<p>How do you restart the lean server when it goes crazy?</p>
</blockquote>
<p><code>:LspRestart</code> should work I believe. (or sometimes <code>:e</code> to just re-edit the current file).</p>
<p><span class="user-mention silent" data-user-id="110031">Patrick Massot</span> <a href="#narrow/stream/113488-general/topic/lean.2Envim/near/256461945">said</a>:</p>
<blockquote>
<p>It would be nice to have markdown syntax highlighting in comments</p>
</blockquote>
<p>We had this and disabled it, I forgot why -- maybe just while we were decommisioning the old <code>lean.vim</code> plugin. I'll have to remind myself.</p>
<p><span class="user-mention silent" data-user-id="110031">Patrick Massot</span> <a href="#narrow/stream/113488-general/topic/lean.2Envim/near/256467700">said</a>:</p>
<blockquote>
<p>The linting trick is far from being the only way to trigger the jump to bug, it happens really really often</p>
</blockquote>
<p>Does that lint trick work in any file? I notice the one you're showing is some local changes right? When I try that on my machine in the version from the mathlib repo I can't reproduce :( even if I switch to using 0.5.0 (normally I use nightly), but we can try staring at the code to see what's happening, I don't have ideas yet.</p>



<a name="256470697"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256470697" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256470697">(Oct 06 2021 at 19:32)</a>:</h4>
<p>Yes, I was obviously editing a file. I'll try on master</p>



<a name="256471066"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256471066" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256471066">(Oct 06 2021 at 19:34)</a>:</h4>
<p>Yes, it works on master</p>



<a name="256471098"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256471098" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256471098">(Oct 06 2021 at 19:35)</a>:</h4>
<p>I mean the bug is there on master</p>



<a name="256471308"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256471308" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256471308">(Oct 06 2021 at 19:36)</a>:</h4>
<p>OK, that's "good" in some sense, though I can't reproduce here on that file, it works fine on my machine -- let me see what to do about debugging,  unless someone else either can reproduce or has an idea.</p>



<a name="256471355"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256471355" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256471355">(Oct 06 2021 at 19:37)</a>:</h4>
<p>:version                                                                                                                                                                                                   <br>
NVIM v0.5.1<br>
Build type: RelWithDebInfo<br>
LuaJIT 2.1.0-beta3<br>
Compilation: /usr/bin/gcc-11 -U_FORTIFY_SOURCE -D_FORTIFY_SOURCE=1 -DNVIM_TS_HAS_SET_MATCH_LIMIT -O2 -g -Og -g -Wall -Wextra -pedantic -Wno-unused-parameter -Wstrict-prototypes -std=gnu99 -Wshadow -Wconversion -<br>
Wmissing-prototypes -Wimplicit-fallthrough -Wvla -fstack-protector-strong -fno-common -fdiagnostics-color=always -DINCLUDE_GENERATED_DECLARATIONS -D_GNU_SOURCE -DNVIM_MSGPACK_HAS_FLOAT32 -DNVIM_UNIBI_HAS_VAR_FRO<br>
M -DMIN_LOG_LEVEL=3 -I/home/runner/work/neovim/neovim/build/config -I/home/runner/work/neovim/neovim/src -I/home/runner/work/neovim/neovim/.deps/usr/include -I/usr/include -I/home/runner/work/neovim/neovim/build<br>
/src/nvim/auto -I/home/runner/work/neovim/neovim/build/include<br>
Compilé par runner@fv-az87-829</p>
<p>Features: +acl +iconv +tui</p>



<a name="256471377"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256471377" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256471377">(Oct 06 2021 at 19:37)</a>:</h4>
<p>(Also reenabling markdown syntax seems to make neovim segfault ugh. So that probably is the reason why we disabled it. I doubt we looked at why that's happening in too much detail though.)</p>



<a name="256471561"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256471561" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256471561">(Oct 06 2021 at 19:39)</a>:</h4>
<blockquote>
<blockquote>
<p>It would be nice to have markdown syntax highlighting in comments<br>
We had this and disabled it, I forgot why -- maybe just while we were decommisioning the old <code>lean.vim</code> plugin. I'll have to remind myself.</p>
</blockquote>
</blockquote>
<p>I removed it intentionally.  We got lots of highlighting errors where the markdown syntax extended beyond the end of the comment.  My plan is to copy a small and hopefully safe set of highlighting rules from the markdown syntax file.  I just haven't gotten around to it yet.<br>
(We have to do the same thing in the vscode extension.  If we use the default vscode markdown highlighting, then some markdown highlighting extends beyond the end of the comment, even more than it does now.  So we have a custom copy of the markdown syntax in the vscode extension where half of the rules are disabled.)</p>



<a name="256472141"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256472141" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256472141">(Oct 06 2021 at 19:43)</a>:</h4>
<p>Ah.. fair enough, sounds good.</p>



<a name="256474233"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256474233" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256474233">(Oct 06 2021 at 19:56)</a>:</h4>
<p>Patrick given I don't have a better idea for the minute but found another vaguely similar <a href="https://github.com/ray-x/lsp_signature.nvim/issues/1#issuecomment-828107304">bug report</a>, can you perhaps confirm whether you still see the issue on nightly? You can find an appimage of it at the bottom of the page here: <a href="https://github.com/neovim/neovim/actions/runs/1310512839">https://github.com/neovim/neovim/actions/runs/1310512839</a></p>



<a name="256475045"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256475045" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256475045">(Oct 06 2021 at 20:01)</a>:</h4>
<p>At least the lint trick no longer triggers the bug!</p>



<a name="256475470"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256475470" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256475470">(Oct 06 2021 at 20:04)</a>:</h4>
<p>OK yeah I'm somewhat suspicious it's an 0.5 race condition... perhaps that will hold you off at least for a few days using the nightly and seeing whether you can get it to happen there too.</p>



<a name="256475660"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256475660" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256475660">(Oct 06 2021 at 20:05)</a>:</h4>
<p>I don't mind using the nightly, I put it in place of the 0.5.1 version that I downloaded yesterday</p>



<a name="256475745"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256475745" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256475745">(Oct 06 2021 at 20:06)</a>:</h4>
<p>Great!</p>



<a name="256612055"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256612055" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256612055">(Oct 07 2021 at 16:56)</a>:</h4>
<p>This is really cool! I'd like to make one bug report though: when tab-expanding backslash abbreviations the cursor doesn't go to the end of a sequence of bytes. For example: <code>\</code> + <code>&lt;</code> + <code>TAB</code> results in my cursor ending up in the middle of the <code>⟨</code>, and continuing to type produces garbage like <code>鿢ꡡ</code> (that is <code>&lt;e2&gt;&lt;9f&gt;a&lt;a8&gt;</code>, apparently)</p>



<a name="256612358"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256612358" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256612358">(Oct 07 2021 at 16:58)</a>:</h4>
<p>However, the issue is not a big deal to me and I'll probably switch (back) from <img alt=":emacs:" class="emoji" src="https://zulip-avatars.s3.amazonaws.com/3121/emoji/images/17846.png" title="emacs"> to <img alt=":neovim:" class="emoji" src="https://zulip-avatars.s3.amazonaws.com/3121/emoji/images/23103.png" title="neovim"> soon :D</p>



<a name="256614364"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256614364" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256614364">(Oct 07 2021 at 17:09)</a>:</h4>
<p>First, hooray! Thanks, glad you're enjoying. The bug report is unfortunately known, I tried to fix it and failed (even though I kind of partially fixed it) -- <a href="https://github.com/Julian/lean.nvim/issues/89">https://github.com/Julian/lean.nvim/issues/89</a></p>



<a name="256614502"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256614502" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256614502">(Oct 07 2021 at 17:10)</a>:</h4>
<p>I can try to give it another shot sometime soon but I'm still half-underwater with non-lean-related work so I don't know it'll be "immediately". But I know the cause, it's annoying differences in unicode-using APIs and screen-character using APIs.</p>



<a name="256615580"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256615580" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256615580">(Oct 07 2021 at 17:17)</a>:</h4>
<p>The other workaround by the way is to not hit tab -- which my fingers really hate so it doesn't really work for me, but if you manage to just keep typing and not manually expand the expansion and let it autoexpand, your cursor position should be OK.</p>



<a name="256619421"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/256619421" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#256619421">(Oct 07 2021 at 17:42)</a>:</h4>
<p>Patrick by the way I put your notes with only small modifications here: <a href="https://github.com/Julian/lean.nvim/wiki/Getting-Started">https://github.com/Julian/lean.nvim/wiki/Getting-Started</a> and we probably can use that as a place to put some more improvement suggestions.</p>



<a name="257541334"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/257541334" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anders Christiansen Sørby <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#257541334">(Oct 14 2021 at 14:09)</a>:</h4>
<p>I'm trying to set up <code>lean.nvim</code> using nix home-manager. It is not added to nixpkgs yet which means I need to set it up myself.</p>



<a name="257543781"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/257543781" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#257543781">(Oct 14 2021 at 14:24)</a>:</h4>
<p>I don't use home-manager, though I know others do -- but if you either need a change to the repo to support that setup or have done so yourself and can contribute it it'd definitely be welcome.</p>



<a name="259310457"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/259310457" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#259310457">(Oct 27 2021 at 21:38)</a>:</h4>
<p>GitHub copilot support for neovim landed an early version today -- <a href="https://github.com/github/copilot.vim">https://github.com/github/copilot.vim</a> -- I didn't bother personally signing up for Copilot yet, but if anyone else did, do let me know if you try it out with lean.nvim (the two wouldn't really interact I suspect, so behavior should be roughly the same as using Copilot in VSCode)</p>



<a name="259310519"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/259310519" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#259310519">(Oct 27 2021 at 21:38)</a>:</h4>
<p>There's also tabnine support here -- <a href="https://github.com/tzachar/cmp-tabnine">https://github.com/tzachar/cmp-tabnine</a> which I also have not yet tried with Lean, but should also work the same as in VSCode.</p>



<a name="259443424"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/259443424" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Antoine Chambert-Loir <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#259443424">(Oct 28 2021 at 19:56)</a>:</h4>
<p>I followed what <span class="user-mention" data-user-id="110031">@Patrick Massot</span> indicated, <br>
<a href="#narrow/stream/113488-general/topic/lean.2Envim/near/256457660">https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.2Envim/near/256457660</a>, with the following variations.</p>
<p><strong>nvim</strong>. I use <a href="http://brew">https://brew.sh/</a> on MacOS, hence  just add to type <code>brew install nvim</code>.</p>
<p><strong>npm</strong>. I </p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">brew</span> <span class="n">install</span> <span class="n">npm</span>
<span class="n">npm</span> <span class="n">install</span> <span class="bp">-</span><span class="n">g</span> <span class="n">lean</span><span class="bp">-</span><span class="n">language</span><span class="bp">-</span><span class="n">server</span>
</code></pre></div>



<a name="259447319"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/259447319" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#259447319">(Oct 28 2021 at 20:26)</a>:</h4>
<p><code>brew install lua</code> shouldn't be necessary</p>



<a name="259447374"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/259447374" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#259447374">(Oct 28 2021 at 20:27)</a>:</h4>
<p>I put a version of Patrick's notes here: <a href="https://github.com/Julian/lean.nvim/wiki/Getting-Started">https://github.com/Julian/lean.nvim/wiki/Getting-Started</a> -- <del>but let me modify it for macOS as well quickly</del> done</p>



<a name="259447421"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/259447421" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#259447421">(Oct 28 2021 at 20:27)</a>:</h4>
<p>Can you have a look at that perhaps and tell me if what's there helps you get started? Or if not please do feel free to modify anything there (or keep putting it here and I'll do so!)</p>



<a name="259448050"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/259448050" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#259448050">(Oct 28 2021 at 20:33)</a>:</h4>
<p>I can see perhaps <span class="user-mention" data-user-id="130609">@Antoine Chambert-Loir</span> that you may be having issues because you may have put those things in <code>~/.vim</code> instead of <code>~/.config/nvim</code> which is where neovim files generally go, but not sure if that was a typo perhaps</p>



<a name="259449083"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/259449083" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Antoine Chambert-Loir <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#259449083">(Oct 28 2021 at 20:41)</a>:</h4>
<p>Thanks <span class="user-mention" data-user-id="321696">@Julian Berman</span> for looking it up. Everything was in <code>~/.nvim</code> except for <code>pathogen.vim</code> which was in <code>~/.vim/autoload</code>, but I pushed it in <code>~/.nvim</code>. In any case, I still have the following error messages:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">Erreur</span> <span class="n">d</span><span class="bp">é</span><span class="n">tect</span><span class="bp">é</span><span class="n">e</span> <span class="n">en</span> <span class="n">traitant</span> <span class="bp">/</span><span class="n">Users</span><span class="bp">/</span><span class="n">chambert</span><span class="bp">/.</span><span class="n">config</span><span class="bp">/</span><span class="n">nvim</span><span class="bp">/</span><span class="n">plugin</span><span class="bp">/</span><span class="n">lean.lua</span> <span class="o">:</span>
<span class="n">E5113</span><span class="o">:</span> <span class="n">Error</span> <span class="n">while</span> <span class="n">calling</span> <span class="n">lua</span> <span class="n">chunk</span><span class="o">:</span> <span class="bp">/</span><span class="n">Users</span><span class="bp">/</span><span class="n">chambert</span><span class="bp">/.</span><span class="n">config</span><span class="bp">/</span><span class="n">nvim</span><span class="bp">/</span><span class="n">plugin</span><span class="bp">/</span><span class="n">lean.lua</span><span class="o">:</span><span class="mi">3</span><span class="o">:</span> <span class="n">module</span> <span class="bp">'</span><span class="n">compe'</span> <span class="n">not</span> <span class="n">found</span><span class="o">:</span>
        <span class="n">no</span> <span class="n">field</span> <span class="n">package.preload</span><span class="o">[</span><span class="bp">'</span><span class="n">compe'</span><span class="o">]</span>
        <span class="n">no</span> <span class="n">file</span> <span class="bp">'./</span><span class="n">compe.lua'</span>
        <span class="n">no</span> <span class="n">file</span> <span class="bp">'/</span><span class="n">usr</span><span class="bp">/</span><span class="kn">local</span><span class="bp">/</span><span class="n">Cellar</span><span class="bp">/</span><span class="n">luajit</span><span class="bp">-</span><span class="n">openresty</span><span class="bp">/</span><span class="mi">2</span><span class="bp">.</span><span class="mi">1</span><span class="bp">-</span><span class="mi">20210510</span><span class="bp">/</span><span class="n">share</span><span class="bp">/</span><span class="n">luajit</span><span class="bp">-</span><span class="mi">2</span><span class="bp">.</span><span class="mi">1</span><span class="bp">.</span><span class="mi">0</span><span class="bp">-</span><span class="n">beta3</span><span class="bp">/</span><span class="n">compe.lua'</span>
        <span class="n">no</span> <span class="n">file</span> <span class="bp">'/</span><span class="n">usr</span><span class="bp">/</span><span class="kn">local</span><span class="bp">/</span><span class="n">share</span><span class="bp">/</span><span class="n">lua</span><span class="bp">/</span><span class="mi">5</span><span class="bp">.</span><span class="mi">1</span><span class="bp">/</span><span class="n">compe.lua'</span>
        <span class="n">no</span> <span class="n">file</span> <span class="bp">'/</span><span class="n">usr</span><span class="bp">/</span><span class="kn">local</span><span class="bp">/</span><span class="n">share</span><span class="bp">/</span><span class="n">lua</span><span class="bp">/</span><span class="mi">5</span><span class="bp">.</span><span class="mi">1</span><span class="bp">/</span><span class="n">compe</span><span class="bp">/</span><span class="n">init.lua'</span>
        <span class="n">no</span> <span class="n">file</span> <span class="bp">'/</span><span class="n">usr</span><span class="bp">/</span><span class="kn">local</span><span class="bp">/</span><span class="n">Cellar</span><span class="bp">/</span><span class="n">luajit</span><span class="bp">-</span><span class="n">openresty</span><span class="bp">/</span><span class="mi">2</span><span class="bp">.</span><span class="mi">1</span><span class="bp">-</span><span class="mi">20210510</span><span class="bp">/</span><span class="n">share</span><span class="bp">/</span><span class="n">lua</span><span class="bp">/</span><span class="mi">5</span><span class="bp">.</span><span class="mi">1</span><span class="bp">/</span><span class="n">compe.lua'</span>
        <span class="n">no</span> <span class="n">file</span> <span class="bp">'/</span><span class="n">usr</span><span class="bp">/</span><span class="kn">local</span><span class="bp">/</span><span class="n">Cellar</span><span class="bp">/</span><span class="n">luajit</span><span class="bp">-</span><span class="n">openresty</span><span class="bp">/</span><span class="mi">2</span><span class="bp">.</span><span class="mi">1</span><span class="bp">-</span><span class="mi">20210510</span><span class="bp">/</span><span class="n">share</span><span class="bp">/</span><span class="n">lua</span><span class="bp">/</span><span class="mi">5</span><span class="bp">.</span><span class="mi">1</span><span class="bp">/</span><span class="n">compe</span><span class="bp">/</span><span class="n">init.lua'</span>
        <span class="n">no</span> <span class="n">file</span> <span class="bp">'./</span><span class="n">compe.so'</span>
        <span class="n">no</span> <span class="n">file</span> <span class="bp">'/</span><span class="n">usr</span><span class="bp">/</span><span class="kn">local</span><span class="bp">/</span><span class="n">lib</span><span class="bp">/</span><span class="n">lua</span><span class="bp">/</span><span class="mi">5</span><span class="bp">.</span><span class="mi">1</span><span class="bp">/</span><span class="n">compe.so'</span>
        <span class="n">no</span> <span class="n">file</span> <span class="bp">'/</span><span class="n">usr</span><span class="bp">/</span><span class="kn">local</span><span class="bp">/</span><span class="n">Cellar</span><span class="bp">/</span><span class="n">luajit</span><span class="bp">-</span><span class="n">openresty</span><span class="bp">/</span><span class="mi">2</span><span class="bp">.</span><span class="mi">1</span><span class="bp">-</span><span class="mi">20210510</span><span class="bp">/</span><span class="n">lib</span><span class="bp">/</span><span class="n">lua</span><span class="bp">/</span><span class="mi">5</span><span class="bp">.</span><span class="mi">1</span><span class="bp">/</span><span class="n">compe.so'</span>
        <span class="n">no</span> <span class="n">file</span> <span class="bp">'/</span><span class="n">usr</span><span class="bp">/</span><span class="kn">local</span><span class="bp">/</span><span class="n">lib</span><span class="bp">/</span><span class="n">lua</span><span class="bp">/</span><span class="mi">5</span><span class="bp">.</span><span class="mi">1</span><span class="bp">/</span><span class="n">loadall.so'</span>
</code></pre></div>
<p>I woud guess that <code>pathogen</code> is not loded…</p>



<a name="259450322"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/259450322" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#259450322">(Oct 28 2021 at 20:52)</a>:</h4>
<p>Possibly -- Make sure you mean <code>~/.config/nvim</code> again, not <code>~/.nvim</code>?</p>



<a name="259450381"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/259450381" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#259450381">(Oct 28 2021 at 20:53)</a>:</h4>
<p><code>:scriptnames</code> will tell you whether pathogen loaded <code>compe</code></p>



<a name="259450396"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/259450396" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#259450396">(Oct 28 2021 at 20:53)</a>:</h4>
<p>and if you don't mind editorializing, I would personally not really recommend you use pathogen</p>



<a name="259450424"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/259450424" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#259450424">(Oct 28 2021 at 20:53)</a>:</h4>
<p>Tim Pope is a genius, and pathogen is great -- but if you're just starting I don't see why you'd want to use it, plug is way easier to use</p>



<a name="259450554"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/259450554" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#259450554">(Oct 28 2021 at 20:54)</a>:</h4>
<p><span class="user-mention" data-user-id="130609">@Antoine Chambert-Loir</span>  (Headed out for a bit but yeah let me know if that still doesn't fix it, I do want to make sure this is as easy and clear as possible!)</p>



<a name="259807015"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/259807015" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ryan Lahfa <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#259807015">(Oct 31 2021 at 20:35)</a>:</h4>
<p>FWIW: <a href="https://github.com/NixOS/nixpkgs/pull/143923">https://github.com/NixOS/nixpkgs/pull/143923</a> :)</p>



<a name="260267246"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/260267246" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anders Christiansen Sørby <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#260267246">(Nov 04 2021 at 13:13)</a>:</h4>
<p>I've tried a basic setup for a nix flake build, but got some errors: <a href="https://github.com/Julian/lean.nvim/issues/192">https://github.com/Julian/lean.nvim/issues/192</a></p>



<a name="260291497"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/260291497" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ryan Lahfa <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#260291497">(Nov 04 2021 at 15:58)</a>:</h4>
<p><span class="user-mention silent" data-user-id="433842">Anders Christiansen Sørby</span> <a href="#narrow/stream/113488-general/topic/lean.2Envim/near/260267246">said</a>:</p>
<blockquote>
<p>I've tried a basic setup for a nix flake build, but got some errors: <a href="https://github.com/Julian/lean.nvim/issues/192">https://github.com/Julian/lean.nvim/issues/192</a></p>
</blockquote>
<p>As <span class="user-mention" data-user-id="117987">@Patrick Stevens</span> noticed, some dependencies are minimal for this plugin: <a href="https://github.com/NixOS/nixpkgs/pull/144282">https://github.com/NixOS/nixpkgs/pull/144282</a></p>



<a name="261679647"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/261679647" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rish Vaishnav <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#261679647">(Nov 16 2021 at 17:52)</a>:</h4>
<p><a href="/user_uploads/3121/3jVepOWt6k6o_69p5KCMQUvY/recording-2021-11-16_09.33.42.mp4">recording-2021-11-16_09.33.42.mp4</a> </p>
<p>Introducing: state diffs! This makes it a bit easier to see what changes from one state to the next. Specifically, you can place down a "diff pin" that is diff'ed against the current state, and we also have an "auto diff pin" mode (which I'm using here) to make the diff pin automatically trail the cursor so that if you're precise enough about your motions it will immediately show you the diff from the previous tactic.</p>
<p>This just uses vim's built-in text-based diff functionality, so it can get messy (as you saw near the end there). I expect we'd eventually have something more precise for Lean 4. And as always you can take this as a call for beta testers, let us know if you find any bugs!</p>



<a name="267310357"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/267310357" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rish Vaishnav <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#267310357">(Jan 08 2022 at 19:07)</a>:</h4>
<p><span class="user-mention" data-user-id="321696">@Julian Berman</span> <span class="user-mention" data-user-id="110043">@Gabriel Ebner</span> Figured I should let you know that I don't think I'll be reviewing or working much on the plugin for at least the next few weeks (unless I think of a hot new feature that helps me a lot with Lean 3) since I need to focus on getting some first formalizations into mathlib for my Master's thesis project (planning to formalize Judea Pearl's results connecting probability and graph theory). So feel free to take over for now and @ me if you're hopelessly lost on any of my code haha... And also happy new year!!</p>



<a name="267310513"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/267310513" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#267310513">(Jan 08 2022 at 19:10)</a>:</h4>
<p>Happy New Year! Yeah I figured you were deep in thesis land given you're usually responding with solutions before I finish figuring out what a problem is :D -- good luck, sounds good.</p>



<a name="267310520"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/267310520" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#267310520">(Jan 08 2022 at 19:11)</a>:</h4>
<p>So far not lost! Getting my bearings.</p>



<a name="267310584"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/267310584" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#267310584">(Jan 08 2022 at 19:12)</a>:</h4>
<p>(I guess a good sign of that is I haven't brutally broken anything in my mashing yet, at least to the best of what I can tell. Hopefully not chopping things up too bad.)</p>



<a name="272424484"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/272424484" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Matthew Ballard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#272424484">(Feb 18 2022 at 16:41)</a>:</h4>
<p>First, I <span aria-label="heart" class="emoji emoji-2764" role="img" title="heart">:heart:</span> this plugin. Thanks for making it.</p>
<p>Should I notice performance differences between the language server in nvim and vs code?</p>



<a name="272455895"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/272455895" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#272455895">(Feb 18 2022 at 20:53)</a>:</h4>
<p>Glad to hear it! I'm not aware of any specific ones but if you have one in front of you do share and we can look into it</p>



<a name="275219124"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/275219124" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#275219124">(Mar 14 2022 at 10:48)</a>:</h4>
<p>Thanks to <span class="user-mention" data-user-id="246273">@Bhavik Mehta</span> 's whims and my <del>newfound unemployment</del> insomnia, we now have tactic highlighting. How precisely it looks will depend on your color scheme, but e.g. mine looks like:</p>
<p><a href="/user_uploads/3121/PPtxWRGqpKm6Axa5luv6BIEZ/Screen-Shot-2022-03-14-at-06.46.59.png">Screen-Shot-2022-03-14-at-06.46.59.png</a> </p>
<div class="message_inline_image"><a href="/user_uploads/3121/PPtxWRGqpKm6Axa5luv6BIEZ/Screen-Shot-2022-03-14-at-06.46.59.png" title="Screen-Shot-2022-03-14-at-06.46.59.png"><img src="/user_uploads/3121/PPtxWRGqpKm6Axa5luv6BIEZ/Screen-Shot-2022-03-14-at-06.46.59.png"></a></div><p>Feedback of course welcome.</p>
<p>If you want precisely what I see, you want <a href="https://github.com/Julian/dotfiles/blob/3e6054b74f813414e63534ff1fc57ffb8e13ae7d/.config/nvim/init.vim#L35">this colorscheme</a> with <a href="https://github.com/Julian/dotfiles/blob/45c6608228301f99e6f79385e2f9a4da6eb0a652/.config/nvim/ftplugin/lean.lua#L19-L21">this override for tactics color</a>.</p>



<a name="275219348"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/275219348" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#275219348">(Mar 14 2022 at 10:51)</a>:</h4>
<p>that looks absolutely gorgeous!</p>



<a name="275219393"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/275219393" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#275219393">(Mar 14 2022 at 10:51)</a>:</h4>
<p>Could it be a different color from other classes of keywords, namely declaration keywords and <code>begin end</code>/<code>by</code>?</p>



<a name="275219713"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/275219713" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#275219713">(Mar 14 2022 at 10:54)</a>:</h4>
<p>Sorry, which ones from which ones Yaël -- make <code>begin/end by</code> different from <code>with</code>? Or something else?</p>



<a name="275414489"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/275414489" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#275414489">(Mar 15 2022 at 18:16)</a>:</h4>
<p>Going to drop support for neovim 0.5.1, which is really old, no longer supported upstream, and is randomly failing some test. I assume no one is using this (including not you anymore <span class="user-mention" data-user-id="110043">@Gabriel Ebner</span> ?) but if that's not the case let me know.</p>



<a name="275414590"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/275414590" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#275414590">(Mar 15 2022 at 18:17)</a>:</h4>
<p>It has been some time since 0.6 was released, so this is fine with me.</p>



<a name="280684275"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/280684275" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bartosz Piotrowski <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#280684275">(Apr 29 2022 at 20:29)</a>:</h4>
<p>Hi, many thanks to Julian et al. for this wonderful plugin! I have a question: is it possible to switch off the infoview updates in the insert mode? I tried to achieve this by removing a line containing <code>CursorMovedI</code> in <code>lua/lean/infoview.lua</code> by somehow it didn't make any difference...</p>



<a name="280691414"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/280691414" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#280691414">(Apr 29 2022 at 21:29)</a>:</h4>
<p>Thanks for the kind words. At the minute there isn't one, though it should be easy to add, happy to do so -- would you mind elaborating on why you want to do it (not that it sounds like a bad idea at all, just want to make sure I understand the motivation in case there's something else we should add.). I know personally I find it really annoying sometimes that the infoview clears and shows "processing" while I'm typing, and would prefer it leave the last update so I can stare at it. Is that the reason?</p>



<a name="280738234"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/280738234" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bartosz Piotrowski <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#280738234">(Apr 30 2022 at 14:08)</a>:</h4>
<p>Yes, this is the reason! Sometimes when I start writing a next tactic with arguments from the context and the context suddenly disappears from the screen, I have trouble remembering the names of the hypothesis I need. Then I need to remove what I wrote and start again (or move the cursor back, but this not always restores the previous state). Apart from that, I find this a bit distracting when the infoview changes with each keystroke. I believe some people like this immediate feedback but for me personally it would be much better to update only after I finish inserting a full command.</p>



<a name="280748076"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/280748076" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#280748076">(Apr 30 2022 at 17:54)</a>:</h4>
<p>Understood -- OK. Let me think a small bit, I think the behavior I personally want is slightly different from "don't update at all until you exit insert mode", it's more like "don't show errors until I stop typing for a bit, and never clear the infoview, just keep showing the last thing that was there until a new thing is ready"</p>



<a name="280748080"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/280748080" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#280748080">(Apr 30 2022 at 17:54)</a>:</h4>
<p>But this is definitely a reasonable request, and probably we can add something that lets both of us have what we want :)</p>



<a name="280748369"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/280748369" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#280748369">(Apr 30 2022 at 18:00)</a>:</h4>
<p>In the vscode extension there is a button to pin the infoview to a fixed cursor location, does that exist in nvim yet?</p>



<a name="280748457"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/280748457" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#280748457">(Apr 30 2022 at 18:02)</a>:</h4>
<p>Yes, we have pins (though honestly I still want to tweak how they work, which will require some discussing).</p>



<a name="280748471"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/280748471" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#280748471">(Apr 30 2022 at 18:03)</a>:</h4>
<p>You can place one with <a href="https://github.com/Julian/lean.nvim/#mappings"><code>&lt;localleader&gt;x</code></a>.</p>



<a name="280748485"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/280748485" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#280748485">(Apr 30 2022 at 18:03)</a>:</h4>
<p>Feedback of course welcome on them.</p>



<a name="280909811"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/280909811" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Matthew Ballard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#280909811">(May 02 2022 at 17:58)</a>:</h4>
<p><span class="user-mention silent" data-user-id="321696">Julian Berman</span> <a href="#narrow/stream/113489-new-members/topic/exact.2Fassumption.20timeout/near/270775485">said</a>:</p>
<blockquote>
<p>That's the wrong place (lsp/_util), but sorry that the docs don't make this example clear. Right now you do this by:</p>
<p><div class="codehilite" data-code-language="Lua"><pre><span></span><code><span class="nb">require</span><span class="p">(</span><span class="s1">'lean'</span><span class="p">).</span><span class="n">setup</span><span class="p">{</span>
  <span class="c1">-- whatever other options you set</span>
  <span class="n">lsp3</span> <span class="o">=</span> <span class="p">{</span>
    <span class="n">cmd</span> <span class="o">=</span> <span class="p">{</span> <span class="s1">'lean-language-server'</span><span class="p">,</span> <span class="s1">'--stdio'</span><span class="p">,</span> <span class="s1">'--'</span><span class="p">,</span> <span class="s1">'-M'</span><span class="p">,</span> <span class="s1">'4096'</span><span class="p">,</span> <span class="s1">'-T'</span><span class="p">,</span> <span class="s1">'3000000'</span> <span class="p">},</span>
    <span class="c1">-- on_attach = on_attach or whatever else you set here</span>
  <span class="p">},</span>
<span class="p">}</span>
</code></pre></div><br>
</p>
</blockquote>
<p>Is still the correct way to pass memory configuration to language server?</p>



<a name="280910519"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/280910519" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#280910519">(May 02 2022 at 18:03)</a>:</h4>
<p>Yep, it should be, and Tsvi was kind enough to add it <a href="https://github.com/Julian/lean.nvim/wiki/Configuring-&amp;-Extending#passing-arguments-to-the-lean-server-timeout-and-memory-settings">here</a> as an explicit copyable example -- is it working for you?</p>



<a name="280910606"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/280910606" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Matthew Ballard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#280910606">(May 02 2022 at 18:03)</a>:</h4>
<p>Hmm. Let me try again and report back. Hopefully, it is user error.</p>



<a name="281012068"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/281012068" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#281012068">(May 03 2022 at 13:24)</a>:</h4>
<p>Success? Or failure?</p>



<a name="281012267"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/281012267" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#281012267">(May 03 2022 at 13:26)</a>:</h4>
<p>It slightly annoys me when I need to tweak this myself, I kind of wish we had a separate <code>memory = whatever; timeout = whatever</code> table and then assembled the CLI on user behalf like vscode-lean does, but I think Gabriel had a comment somewhere on doing so that I'll have to dig up.</p>



<a name="281016765"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/281016765" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Matthew Ballard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#281016765">(May 03 2022 at 13:59)</a>:</h4>
<p>Ambiguous. I managed to crash the language server with the same memory/timeout settings that worked for vs code but I didn't investigate further. But before that performance seemed comparable.</p>



<a name="289883751"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/289883751" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#289883751">(Jul 17 2022 at 13:09)</a>:</h4>
<p>It's essentially just keeping parity with the recent VSCode PR thanks to Eric, but we've now got symbol searches in Lean 3 via the same code:</p>
<p><a href="/user_uploads/3121/2eZAmDtBKxz83h2HTdEigcyc/screen.gif">screen.gif</a></p>
<div class="message_inline_image"><a href="/user_uploads/3121/2eZAmDtBKxz83h2HTdEigcyc/screen.gif" title="screen.gif"><img src="/user_uploads/3121/2eZAmDtBKxz83h2HTdEigcyc/screen.gif"></a></div><p>(This already works out of the box in Lean 4)</p>



<a name="295087273"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/295087273" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Matthew Ballard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#295087273">(Aug 24 2022 at 16:59)</a>:</h4>
<p>Is there an easy way to search for/replace unicode? Generally I would have thought there was a plugin to search/replace based on a selection.</p>



<a name="295108939"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/295108939" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#295108939">(Aug 24 2022 at 19:08)</a>:</h4>
<p>I haven't had a ton of time for lean the past two months given my new job (though hopefully things are calming a bit) -- which is to say expanding abbreviations in cmd mode is a feature that should be reasonably easy to implement but I haven't gotten time to do so yet</p>



<a name="295109260"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/295109260" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#295109260">(Aug 24 2022 at 19:10)</a>:</h4>
<p>In the interim the easiest thing is to use a register or copy paste :/</p>



<a name="295109308"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/295109308" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#295109308">(Aug 24 2022 at 19:10)</a>:</h4>
<p>(<code>:h i_^R</code> for the former if you need it)</p>



<a name="295110237"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/295110237" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Matthew Ballard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#295110237">(Aug 24 2022 at 19:16)</a>:</h4>
<p>Thanks. No rush <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span></p>



<a name="295852196"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/295852196" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#295852196">(Aug 29 2022 at 14:11)</a>:</h4>
<p>OK, I made expanding abbreviations work at least in the cmdline window (even though it doesn't still with <code>/</code>). But the former means there's at least <em>an</em> easy way to search now. <code>:h q/</code> if you've never used it before, but basically type <code>q/</code> and you get a normal mode window you can type searches into, and which'll expand unicode abbreviations (as long as you enter it from a lean buffer). Feedback of course welcome. See the screencast if that's not enough info:</p>
<p><a href="/user_uploads/3121/uRtAtUTzB5LERti6h1L9NIei/abbrev.gif">abbrev.gif</a></p>
<div class="message_inline_image"><a href="/user_uploads/3121/uRtAtUTzB5LERti6h1L9NIei/abbrev.gif" title="abbrev.gif"><img src="/user_uploads/3121/uRtAtUTzB5LERti6h1L9NIei/abbrev.gif"></a></div>



<a name="304341236"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/304341236" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#304341236">(Oct 16 2022 at 18:57)</a>:</h4>
<p>A minor UX tweak which anyone using <code>lean.nvim</code> may have opinions on -- I'd like to make the cursor in the infoview window be on the (first) goal line by default, rather than at the top. The main reason is that for short infoviews the goal is often off to the bottom (and invisible without scrolling) which I find annoying, and especially so for vertical displays where the infoview can be short.</p>
<p><a href="https://github.com/Julian/lean.nvim/pull/279/files">https://github.com/Julian/lean.nvim/pull/279/files</a> is the PR if you care to try it out, or otherwise if you have an opinion on the behavior (especially if you don't like the proposed change) feel free to share.</p>



<a name="304342106"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/304342106" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Matthew Ballard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#304342106">(Oct 16 2022 at 19:07)</a>:</h4>
<p>+1 for me. It’s easy to jump to the top of a buffer if needed.</p>



<a name="304348489"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/304348489" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#304348489">(Oct 16 2022 at 20:19)</a>:</h4>
<p>This sounds like a good change to me, I'm often annoyed by this in vscode too and have wondered if putting the goal at the top and ordering the hypotheses below it in order of last modified would be a better UX than the present default. Though I can see how this is confusing from a proof calculus perspective</p>



<a name="304348629"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/304348629" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#304348629">(Oct 16 2022 at 20:21)</a>:</h4>
<p>Unfortunately changing the list order using pure CSS results in a broken widget display, so I never tried this order seriously for a long time, it can be very helpful though on long proofs though</p>



<a name="304348741"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/304348741" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#304348741">(Oct 16 2022 at 20:22)</a>:</h4>
<p>In VScode you can control this using widgets. See <a href="https://github.com/leanprover-community/sphere-eversion/commit/81f98837feab576e17053cc97623b404c019b9db">https://github.com/leanprover-community/sphere-eversion/commit/81f98837feab576e17053cc97623b404c019b9db</a></p>



<a name="304350856"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/304350856" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#304350856">(Oct 16 2022 at 20:54)</a>:</h4>
<p>Nice! And I just checked that it does work in nvim also <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span> which one would hope given that thats the idea of widgets after all, but its good to be sure.</p>



<a name="304350999"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/304350999" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#304350999">(Oct 16 2022 at 20:56)</a>:</h4>
<p>Can we add a (deduplicated version of) this to mathlib? E.g. As a tactic file that isn't allowed to be imported within mathlib (like omega), but people could import while working if they like. I think enough people would find it useful.</p>



<a name="304366907"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/304366907" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jireh Loreaux <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#304366907">(Oct 17 2022 at 01:36)</a>:</h4>
<p>Is it possible to add as something accessible with <code>set_option</code>?</p>



<a name="313836624"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean.nvim/near/313836624" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/lean.2Envim.html#313836624">(Dec 04 2022 at 17:28)</a>:</h4>
<p>I've added a small section to the README on <a href="https://github.com/Julian/lean.nvim#semantic-highlighting">enabling semantic highlighting in Lean 4</a> (even though support upstream is via a plugin rather than built-in to neovim for a bit longer).</p>
<p>If you want to try it feel free to follow the instructions, and ask if you run into trouble (or edit the wiki, which is always welcome).</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>