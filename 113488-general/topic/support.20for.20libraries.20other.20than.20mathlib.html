---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/support.20for.20libraries.20other.20than.20mathlib.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/support.20for.20libraries.20other.20than.20mathlib.html">support for libraries other than mathlib</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="199270902"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/support%20for%20libraries%20other%20than%20mathlib/near/199270902" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Rute <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/support.20for.20libraries.20other.20than.20mathlib.html#199270902">(May 30 2020 at 19:01)</a>:</h4>
<p>I know the most common setup for Lean is to have the following three sources of lean files</p>
<ul>
<li>lean core library (from <code>elan</code>)</li>
<li>mathlib (in <code>_target</code> directory)</li>
<li>current project <code>src</code> directory</li>
</ul>
<p>Is there a natural way to have another dependency as follows?  </p>
<ul>
<li>lean core library (from <code>elan</code>)</li>
<li>mathlib (in <code>_target</code> directory)</li>
<li><strong>some 3rd party library of lean files from another repo</strong></li>
<li>current project <code>src</code> directory</li>
</ul>
<p>Let's say someone (like me) makes a library of lean tools, but for certain reasons these shouldn't go in mathlib (maybe they require tensorflow).  Is there a way for a user to use those tools in their current project alongside mathlib?  Is this doable with <code>leanproject</code>?</p>



<a name="199271045"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/support%20for%20libraries%20other%20than%20mathlib/near/199271045" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/support.20for.20libraries.20other.20than.20mathlib.html#199271045">(May 30 2020 at 19:05)</a>:</h4>
<p>Add to <code>[dependencies]</code> in <code>leanpkg.toml</code>?</p>



<a name="199271103"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/support%20for%20libraries%20other%20than%20mathlib/near/199271103" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/support.20for.20libraries.20other.20than.20mathlib.html#199271103">(May 30 2020 at 19:06)</a>:</h4>
<p>Yeah <code>leanpkg add</code> should do this for you, putting the repo in _target.</p>



<a name="199271286"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/support%20for%20libraries%20other%20than%20mathlib/near/199271286" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/support.20for.20libraries.20other.20than.20mathlib.html#199271286">(May 30 2020 at 19:10)</a>:</h4>
<p>I don't remember if I wrapped that <code>leanpkg</code> feature in <code>leanproject</code> (I've never used it).</p>



<a name="199271463"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/support%20for%20libraries%20other%20than%20mathlib/near/199271463" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Rute <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/support.20for.20libraries.20other.20than.20mathlib.html#199271463">(May 30 2020 at 19:13)</a>:</h4>
<p>Is it safe to modify <code>leanpkg.toml</code>?  Does it interfere with <code>leanproject</code>?  <a href="#narrow/stream/113488-general/topic/modifying.20lean.20core.20library.20code/near/194610729">I've been told in the past that it is not safe to modify <code>leanpkg.path</code>.</a></p>



<a name="199271473"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/support%20for%20libraries%20other%20than%20mathlib/near/199271473" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/support.20for.20libraries.20other.20than.20mathlib.html#199271473">(May 30 2020 at 19:13)</a>:</h4>
<p>It is safe</p>



<a name="199271478"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/support%20for%20libraries%20other%20than%20mathlib/near/199271478" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/support.20for.20libraries.20other.20than.20mathlib.html#199271478">(May 30 2020 at 19:13)</a>:</h4>
<p>I hope</p>



<a name="199271517"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/support%20for%20libraries%20other%20than%20mathlib/near/199271517" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/support.20for.20libraries.20other.20than.20mathlib.html#199271517">(May 30 2020 at 19:14)</a>:</h4>
<p>leanpkg.path definitely isn't</p>



<a name="199271522"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/support%20for%20libraries%20other%20than%20mathlib/near/199271522" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Rute <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/support.20for.20libraries.20other.20than.20mathlib.html#199271522">(May 30 2020 at 19:14)</a>:</h4>
<p>Ok, I might test it later.</p>



<a name="199271593"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/support%20for%20libraries%20other%20than%20mathlib/near/199271593" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/support.20for.20libraries.20other.20than.20mathlib.html#199271593">(May 30 2020 at 19:15)</a>:</h4>
<p>I mean it should be safe but it's totally untested since nobody has project depending on something which is not mathlib</p>



<a name="199273249"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/support%20for%20libraries%20other%20than%20mathlib/near/199273249" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/support.20for.20libraries.20other.20than.20mathlib.html#199273249">(May 30 2020 at 19:51)</a>:</h4>
<p>In the old days before leanproject, people used to update their mathlib dependency by pulling a new mathlib in _target, compiling it, and then editing their leanpkg.toml. Then there was some <code>cache-olean</code> program (which may or may not still work) which meant that you might not have to compile mathlib when you updated it. Of course if you're prepared to compile mathlib while you're sleeping, then you can just do it the old days way (2018)</p>



<a name="199273322"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/support%20for%20libraries%20other%20than%20mathlib/near/199273322" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/support.20for.20libraries.20other.20than.20mathlib.html#199273322">(May 30 2020 at 19:53)</a>:</h4>
<p>Nowadays I can compile mathlib again during my coffee break...</p>



<a name="199273328"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/support%20for%20libraries%20other%20than%20mathlib/near/199273328" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Rute <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/support.20for.20libraries.20other.20than.20mathlib.html#199273328">(May 30 2020 at 19:53)</a>:</h4>
<p>I'd rather not.  (I didn't think about <code>.olean</code>s and compiling, but right now, everything I have in my library will compile fast.)</p>



<a name="199273627"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/support%20for%20libraries%20other%20than%20mathlib/near/199273627" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/support.20for.20libraries.20other.20than.20mathlib.html#199273627">(May 30 2020 at 20:00)</a>:</h4>
<p>One thing I used to do with a project which I kept up to date with mathlib in the old days, was that when I updated mathlib I just recompiled the project, rather than recompiling mathlib. That way only the bits of mathlib which I needed got recompiled.</p>



<a name="199274250"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/support%20for%20libraries%20other%20than%20mathlib/near/199274250" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/support.20for.20libraries.20other.20than.20mathlib.html#199274250">(May 30 2020 at 20:17)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110038">Kevin Buzzard</span> <a href="#narrow/stream/113488-general/topic/support.20for.20libraries.20other.20than.20mathlib/near/199273249">said</a>:</p>
<blockquote>
<p>In the old days before leanproject, people used to update their mathlib dependency by pulling a new mathlib in _target, compiling it, and then editing their leanpkg.toml.</p>
</blockquote>
<p>Or just edit <code>leanpkg.toml</code> and <code>leanpkg</code> will do the other things for you.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>