---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/updating.20.60pretty_cases.60.20in.20place.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/updating.20.60pretty_cases.60.20in.20place.html">updating `pretty_cases` in place</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="317398960"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/updating%20%60pretty_cases%60%20in%20place/near/317398960" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kayla Thomas <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/updating.20.60pretty_cases.60.20in.20place.html#317398960">(Dec 22 2022 at 16:03)</a>:</h4>
<p>Is there a method to update in place the result of using <code>pretty_cases</code> in an induction proof if the hypotheses or the type the induction is done on is changed? Not to automatically fix the proof, just what is generated by the <code>pretty_cases</code> command?</p>



<a name="317403269"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/updating%20%60pretty_cases%60%20in%20place/near/317403269" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/updating.20.60pretty_cases.60.20in.20place.html#317403269">(Dec 22 2022 at 16:26)</a>:</h4>
<p>Can you give a <a href="https://leanprover-community.github.io/mwe.html">#mwe</a> of what you're asking for?</p>



<a name="317406731"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/updating%20%60pretty_cases%60%20in%20place/near/317406731" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kayla Thomas <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/updating.20.60pretty_cases.60.20in.20place.html#317406731">(Dec 22 2022 at 16:42)</a>:</h4>
<p>Suppose I have:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">inductive</span> <span class="n">day</span> <span class="o">:</span> <span class="kt">Type</span>
<span class="bp">|</span> <span class="n">mon</span> <span class="o">:</span> <span class="n">day</span>
<span class="bp">|</span> <span class="n">tue</span> <span class="o">:</span> <span class="n">day</span>

<span class="kd">def</span> <span class="n">is_weekday</span> <span class="o">:</span> <span class="n">day</span> <span class="bp">â†’</span> <span class="kt">Prop</span>
<span class="bp">|</span> <span class="n">day.mon</span> <span class="o">:=</span> <span class="n">true</span>
<span class="bp">|</span> <span class="n">day.tue</span> <span class="o">:=</span> <span class="n">true</span>

<span class="kd">example</span>
  <span class="o">(</span><span class="n">d</span> <span class="o">:</span> <span class="n">day</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">is_weekday</span> <span class="n">d</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">cases</span> <span class="n">d</span><span class="o">,</span>
  <span class="n">case</span> <span class="n">day.mon</span>
  <span class="o">{</span>
    <span class="n">unfold</span> <span class="n">is_weekday</span><span class="o">,</span>
  <span class="o">},</span>
  <span class="n">case</span> <span class="n">day.tue</span>
  <span class="o">{</span>
    <span class="n">unfold</span> <span class="n">is_weekday</span><span class="o">,</span>
  <span class="o">},</span>
<span class="kd">end</span>
</code></pre></div>
<p>Then I add <code>wed</code> to the <code>day</code> type and to <code>is_weekday</code>. Can I run something that will add</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code>  <span class="n">case</span> <span class="n">day.wed</span>
  <span class="o">{</span> <span class="gr">admit</span> <span class="o">},</span>
</code></pre></div>
<p>to the <code>example</code> in place?</p>



<a name="317407251"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/updating%20%60pretty_cases%60%20in%20place/near/317407251" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kayla Thomas <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/updating.20.60pretty_cases.60.20in.20place.html#317407251">(Dec 22 2022 at 16:45)</a>:</h4>
<p>Or if something about the definitions changes that changes the list of arguments to one or more cases, to have that list of arguments be updated in place.</p>



<a name="317407556"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/updating%20%60pretty_cases%60%20in%20place/near/317407556" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kayla Thomas <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/updating.20.60pretty_cases.60.20in.20place.html#317407556">(Dec 22 2022 at 16:46)</a>:</h4>
<p>In the proof, <code>pretty_cases</code> is run to generate the list of cases.</p>



<a name="317407999"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/updating%20%60pretty_cases%60%20in%20place/near/317407999" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kayla Thomas <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/updating.20.60pretty_cases.60.20in.20place.html#317407999">(Dec 22 2022 at 16:48)</a>:</h4>
<p>Currently I would write the statement of the new theorem, run <code>pretty_cases</code> on it, update the variable names generated by <code>pretty_cases</code>, and copy the previous code over for each case and then fix it as needed.</p>



<a name="317408239"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/updating%20%60pretty_cases%60%20in%20place/near/317408239" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kayla Thomas <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/updating.20.60pretty_cases.60.20in.20place.html#317408239">(Dec 22 2022 at 16:49)</a>:</h4>
<p>I'm wondering if there might be a faster alternative.</p>



<a name="317413522"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/updating%20%60pretty_cases%60%20in%20place/near/317413522" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/updating.20.60pretty_cases.60.20in.20place.html#317413522">(Dec 22 2022 at 17:15)</a>:</h4>
<p><code>Try this</code> doesn't support editing existing code, only replacing the tactic that generates it</p>



<a name="317413842"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/updating%20%60pretty_cases%60%20in%20place/near/317413842" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/updating.20.60pretty_cases.60.20in.20place.html#317413842">(Dec 22 2022 at 17:16)</a>:</h4>
<p>It might be possible to write a tactic of the form</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">pretty_cases</span> <span class="o">{</span>
  <span class="n">case</span> <span class="n">day.mon</span>
  <span class="o">{</span>
    <span class="n">unfold</span> <span class="n">is_weekday</span><span class="o">,</span>
  <span class="o">},</span>
  <span class="n">case</span> <span class="n">day.tue</span>
  <span class="o">{</span>
    <span class="n">unfold</span> <span class="n">is_weekday</span><span class="o">,</span>
  <span class="o">},</span>
<span class="o">},</span>
</code></pre></div>
<p>but I imagine it would be prohibitively messy in Lean 3</p>



<a name="317413906"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/updating%20%60pretty_cases%60%20in%20place/near/317413906" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/updating.20.60pretty_cases.60.20in.20place.html#317413906">(Dec 22 2022 at 17:17)</a>:</h4>
<p>Can't you just run <code>pretty_cases</code> after the other cases?</p>



<a name="317414187"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/updating%20%60pretty_cases%60%20in%20place/near/317414187" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/updating.20.60pretty_cases.60.20in.20place.html#317414187">(Dec 22 2022 at 17:18)</a>:</h4>
<p>In Lean 4 we can have infoview stuff changing code, right?</p>



<a name="317414788"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/updating%20%60pretty_cases%60%20in%20place/near/317414788" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kayla Thomas <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/updating.20.60pretty_cases.60.20in.20place.html#317414788">(Dec 22 2022 at 17:21)</a>:</h4>
<p><span class="user-mention silent" data-user-id="310045">Eric Wieser</span> <a href="#narrow/stream/113488-general/topic/updating.20.60pretty_cases.60.20in.20place/near/317413906">said</a>:</p>
<blockquote>
<p>Can't you just run <code>pretty_cases</code> after the other cases?</p>
</blockquote>
<p>That is a good point for this example. Unfortunately the additional cases are not always added at the end, and sometimes the list of variable names for each case can change as well.</p>



<a name="317415437"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/updating%20%60pretty_cases%60%20in%20place/near/317415437" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/updating.20.60pretty_cases.60.20in.20place.html#317415437">(Dec 22 2022 at 17:24)</a>:</h4>
<p>The cases don't have to be in order</p>



<a name="317415539"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/updating%20%60pretty_cases%60%20in%20place/near/317415539" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/updating.20.60pretty_cases.60.20in.20place.html#317415539">(Dec 22 2022 at 17:25)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110038">Kevin Buzzard</span> <a href="#narrow/stream/113488-general/topic/updating.20.60pretty_cases.60.20in.20place/near/317414187">said</a>:</p>
<blockquote>
<p>In Lean 4 we can have infoview stuff changing code, right?</p>
</blockquote>
<p>More importantly, we can more reliably turn expressions back into the code that generates them.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>