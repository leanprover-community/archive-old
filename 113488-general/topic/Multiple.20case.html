---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/Multiple.20case.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Multiple.20case.html">Multiple case</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="224158120"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Multiple%20case/near/224158120" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sorawee Porncharoenwase <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Multiple.20case.html#224158120">(Jan 27 2021 at 09:39)</a>:</h4>
<p>I have a custom tactic named <code>muti_case</code> that I find myself using a lot. Today I just found out about <a href="https://github.com/leanprover-community/lean/commit/042d7e592f6e9356c3324beca1908419a423966e">https://github.com/leanprover-community/lean/commit/042d7e592f6e9356c3324beca1908419a423966e</a> by <span class="user-mention" data-user-id="310045">@Eric Wieser</span> which seems to be doing the same thing. I would love if this is a part of the core tactic. What's the status of this feature?</p>
<p>Moreover, I think it would be useful to allow <code>*</code> as a case name too. It would for example allow us to write something like:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">inductive</span> <span class="n">val</span> <span class="o">:</span> <span class="kt">Type</span>
<span class="bp">|</span> <span class="n">a</span> <span class="o">:</span> <span class="n">val</span>
<span class="bp">|</span> <span class="n">b</span> <span class="o">:</span> <span class="n">val</span>
<span class="bp">|</span> <span class="n">c</span> <span class="o">:</span> <span class="n">val</span>
<span class="bp">|</span> <span class="n">d</span> <span class="o">:</span> <span class="n">val</span>

<span class="kn">open</span> <span class="n">val</span>

<span class="kd">def</span> <span class="n">test</span> <span class="o">:</span> <span class="n">val</span> <span class="bp">→</span> <span class="n">val</span> <span class="bp">→</span> <span class="n">bool</span>
<span class="bp">|</span> <span class="n">a</span> <span class="n">c</span> <span class="o">:=</span> <span class="n">tt</span>
<span class="bp">|</span> <span class="n">a</span> <span class="n">d</span> <span class="o">:=</span> <span class="n">tt</span>
<span class="bp">|</span> <span class="n">b</span> <span class="n">a</span> <span class="o">:=</span> <span class="n">ff</span>
<span class="bp">|</span> <span class="n">b</span> <span class="n">b</span> <span class="o">:=</span> <span class="n">ff</span>
<span class="bp">|</span> <span class="n">c</span> <span class="n">a</span> <span class="o">:=</span> <span class="n">tt</span>
<span class="bp">|</span> <span class="n">c</span> <span class="n">c</span> <span class="o">:=</span> <span class="n">tt</span>
<span class="bp">|</span> <span class="n">d</span> <span class="n">d</span> <span class="o">:=</span> <span class="n">ff</span>
<span class="bp">|</span> <span class="n">_</span> <span class="n">_</span> <span class="o">:=</span> <span class="n">ff</span>

<span class="kd">example</span> <span class="o">{</span><span class="n">x</span> <span class="n">y</span><span class="o">}</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">test</span> <span class="n">x</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">tt</span><span class="o">)</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">a</span> <span class="bp">∨</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">c</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">cases</span> <span class="n">x</span><span class="bp">;</span> <span class="n">cases</span> <span class="n">y</span><span class="o">,</span>
  <span class="n">case</span> <span class="o">[</span><span class="n">a</span> <span class="bp">*</span><span class="o">,</span> <span class="n">c</span> <span class="bp">*</span><span class="o">]</span> <span class="o">{</span> <span class="n">simp</span> <span class="o">},</span>
  <span class="n">case</span> <span class="o">[</span><span class="n">b</span> <span class="bp">*</span><span class="o">,</span> <span class="n">d</span> <span class="bp">*</span><span class="o">]</span> <span class="o">{</span> <span class="n">contradiction</span> <span class="o">},</span>
<span class="kd">end</span>
</code></pre></div>



<a name="224158244"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Multiple%20case/near/224158244" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Multiple.20case.html#224158244">(Jan 27 2021 at 09:41)</a>:</h4>
<p>(<a href="https://github.com/leanprover-community/lean/issues/508">leanprover-community/lean#508</a> for the PR)</p>



<a name="224158444"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Multiple%20case/near/224158444" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Multiple.20case.html#224158444">(Jan 27 2021 at 09:43)</a>:</h4>
<p>There's some existing discussion about this <a href="#narrow/stream/239415-metaprogramming-.2F.20tactics/topic/Allowing.20focussing.20on.20multiple.20goals.20in.20.60case.60/near/220358809">in #metaprogramming / tactics</a></p>



<a name="224158676"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Multiple%20case/near/224158676" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Multiple.20case.html#224158676">(Jan 27 2021 at 09:45)</a>:</h4>
<p>the pr link is incorrect</p>



<a name="224158733"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Multiple%20case/near/224158733" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Multiple.20case.html#224158733">(Jan 27 2021 at 09:46)</a>:</h4>
<p>What's the actual tactic being proposed here?</p>



<a name="224158743"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Multiple%20case/near/224158743" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Multiple.20case.html#224158743">(Jan 27 2021 at 09:46)</a>:</h4>
<p>Improvements to <code>case</code></p>



<a name="224158760"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Multiple%20case/near/224158760" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Multiple.20case.html#224158760">(Jan 27 2021 at 09:46)</a>:</h4>
<p>I mean what does <code>multi_case</code> do</p>



<a name="224158898"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Multiple%20case/near/224158898" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Multiple.20case.html#224158898">(Jan 27 2021 at 09:48)</a>:</h4>
<p>Runs the tactic block on all matching cases</p>



<a name="224159054"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Multiple%20case/near/224159054" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Multiple.20case.html#224159054">(Jan 27 2021 at 09:50)</a>:</h4>
<p>Fixed the link, and attempted to guess what the broken lines of the PR were meant to me - I got this working locally in a now discarded buffer, then must have failed at copying things piecewise into lean core</p>



<a name="224159194"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Multiple%20case/near/224159194" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sorawee Porncharoenwase <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Multiple.20case.html#224159194">(Jan 27 2021 at 09:51)</a>:</h4>
<p>Here's my current definition of <code>muti_case</code>:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">@[interactive]</span>
<span class="kd">meta</span> <span class="kd">def</span> <span class="n">multi_case</span>
  <span class="o">(</span><span class="n">ns</span> <span class="o">:</span> <span class="n">parse</span> <span class="o">(</span><span class="n">list_of</span> <span class="n">ident_</span><span class="bp">*</span><span class="o">))</span>
  <span class="o">(</span><span class="n">ids</span> <span class="o">:</span> <span class="n">parse</span> <span class="bp">$</span> <span class="o">(</span><span class="n">tk</span> <span class="s2">":"</span> <span class="bp">*&gt;</span> <span class="n">ident_</span><span class="bp">*</span><span class="o">)</span><span class="bp">?</span><span class="o">)</span>
  <span class="o">(</span><span class="n">tac</span> <span class="o">:</span> <span class="n">itactic</span><span class="o">)</span> <span class="o">:</span> <span class="n">tactic</span> <span class="n">unit</span> <span class="o">:=</span>
<span class="n">ns.mmap'</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">ns</span><span class="o">,</span> <span class="n">tactic.interactive.case</span> <span class="n">ns</span> <span class="n">ids</span> <span class="n">tac</span><span class="o">)</span>
</code></pre></div>
<p>Pretty much, it allows you to write:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">multi_case</span> <span class="o">[</span><span class="n">case1a</span> <span class="n">case1b</span><span class="o">,</span> <span class="n">case2a</span> <span class="n">case2b</span><span class="o">]</span> <span class="o">:</span> <span class="n">v1</span> <span class="n">v2</span> <span class="o">{</span>
  <span class="n">tacs</span>
<span class="o">}</span>
</code></pre></div>
<p>Instead of:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">case</span> <span class="n">case1a</span> <span class="n">case1b</span> <span class="o">:</span> <span class="n">v1</span> <span class="n">v2</span> <span class="o">{</span>
  <span class="n">tacs</span>
<span class="o">},</span>
<span class="n">case</span> <span class="n">case2a</span> <span class="n">case2b</span> <span class="o">:</span> <span class="n">v1</span> <span class="n">v2</span> <span class="o">{</span>
  <span class="n">tacs</span>
<span class="o">},</span>
</code></pre></div>
<p>The reason why I don't use <code>any_goals</code> or <code>any_goals</code> + <code>solve1</code> is that it often causes deterministic timeout for me. </p>
<p>The PR by <span class="user-mention" data-user-id="310045">@Eric Wieser</span> is better because it doesn't force variable naming in each subcase to be the same.</p>



<a name="224159295"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Multiple%20case/near/224159295" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Multiple.20case.html#224159295">(Jan 27 2021 at 09:52)</a>:</h4>
<p>Another difference is that in my version, within the <code>{}</code> you can see all the matching goals, rather than just the first one</p>



<a name="224159319"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Multiple%20case/near/224159319" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sorawee Porncharoenwase <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Multiple.20case.html#224159319">(Jan 27 2021 at 09:52)</a>:</h4>
<p>Ooh, that's very nice :)</p>



<a name="224159358"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Multiple%20case/near/224159358" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Multiple.20case.html#224159358">(Jan 27 2021 at 09:53)</a>:</h4>
<p>So your</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">multi_case</span> <span class="o">[</span><span class="n">case1a</span> <span class="n">case1b</span><span class="o">,</span> <span class="n">case2a</span> <span class="n">case2b</span><span class="o">]</span> <span class="o">:</span> <span class="n">v1</span> <span class="n">v2</span> <span class="o">{</span>
  <span class="n">tacs</span>
<span class="o">}</span>
</code></pre></div>
<p>is the linked PR's</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">case</span> <span class="o">[</span><span class="n">case1a</span> <span class="n">case1b</span> <span class="o">:</span> <span class="n">v1</span> <span class="n">v2</span><span class="o">,</span> <span class="n">case2a</span> <span class="n">case2b</span><span class="o">:</span> <span class="n">v1</span> <span class="n">v2</span><span class="o">]</span> <span class="o">{</span>
  <span class="n">all_goals</span> <span class="o">{</span> <span class="n">tacs</span> <span class="o">}</span>
<span class="o">}</span>
</code></pre></div>



<a name="224159522"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Multiple%20case/near/224159522" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Multiple.20case.html#224159522">(Jan 27 2021 at 09:55)</a>:</h4>
<p>If you can see all the matching goals, then does that mean there is an additional <code>all_goals</code> wrapper before you can do things?</p>



<a name="224159532"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Multiple%20case/near/224159532" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Multiple.20case.html#224159532">(Jan 27 2021 at 09:55)</a>:</h4>
<p>oh you said this</p>



<a name="224159562"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Multiple%20case/near/224159562" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sorawee Porncharoenwase <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Multiple.20case.html#224159562">(Jan 27 2021 at 09:55)</a>:</h4>
<p>Ah, I seem to misunderstand your PR then. I thought it's exactly the same as mine, but apparently that's not the case.</p>
<p>It's still a good improvement, IMO, and would be a better building block for my custom tactic.</p>



<a name="224159669"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Multiple%20case/near/224159669" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Multiple.20case.html#224159669">(Jan 27 2021 at 09:57)</a>:</h4>
<p>The motivation for my design was:</p>
<ul>
<li>To make the goal view helpful</li>
<li>To make something like this work:</li>
</ul>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">case</span> <span class="o">[</span><span class="n">case1a</span> <span class="n">case1b</span> <span class="o">:</span> <span class="n">v1</span> <span class="n">v2</span><span class="o">,</span> <span class="n">case2a</span> <span class="n">case2b</span><span class="o">:</span> <span class="n">v1</span> <span class="n">v2</span><span class="o">]</span> <span class="o">{</span>
  <span class="n">all_goals</span> <span class="o">{</span> <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">some_lemma</span><span class="o">]</span> <span class="o">},</span>
  <span class="o">{</span> <span class="n">exact</span> <span class="n">some_closing_lemma_1</span><span class="o">,</span> <span class="o">}</span>
  <span class="o">{</span> <span class="n">exact</span> <span class="n">some_closing_lemma_2</span><span class="o">,</span> <span class="o">}</span>
<span class="o">}</span>
</code></pre></div>



<a name="224159694"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Multiple%20case/near/224159694" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Multiple.20case.html#224159694">(Jan 27 2021 at 09:57)</a>:</h4>
<p>I think that it makes sense to bind the variables differently for different cases, as in the PR, but the names should be "approximately the same" and the tactic script run in each case should be the same, suggesting that the <code>all_goals</code> wrapper be built in</p>



<a name="224159765"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Multiple%20case/near/224159765" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Multiple.20case.html#224159765">(Jan 27 2021 at 09:58)</a>:</h4>
<p>If the all goals wrapper is built in, there's no nice way to say "the proof for these two cases is almost but not quite identical".</p>



<a name="224159773"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Multiple%20case/near/224159773" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Multiple.20case.html#224159773">(Jan 27 2021 at 09:58)</a>:</h4>
<p>I mean sure, you can use <code>&lt;|&gt;</code>, but that obfuscates which goal you're actually trying to work on</p>



<a name="224159803"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Multiple%20case/near/224159803" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Multiple.20case.html#224159803">(Jan 27 2021 at 09:58)</a>:</h4>
<p>I think of this multi-case more like a match branch with an or pattern</p>



<a name="224159832"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Multiple%20case/near/224159832" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Multiple.20case.html#224159832">(Jan 27 2021 at 09:59)</a>:</h4>
<p>I had a nasty time refactoring proofs a while back that used something like <code>simp [foo] &lt;|&gt; simp [bar]</code>, as I removed a simp lemma the first branch was relying on, but all I got was errors about the second branch not matching</p>



<a name="224159948"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Multiple%20case/near/224159948" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Multiple.20case.html#224159948">(Jan 27 2021 at 10:00)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110049">Mario Carneiro</span> <a href="#narrow/stream/113488-general/topic/Multiple.20case/near/224159803">said</a>:</p>
<blockquote>
<p>I think of this multi-case more like a match branch with an or pattern</p>
</blockquote>
<p>match branches with or are not a thing that exists today, right?</p>



<a name="224160261"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Multiple%20case/near/224160261" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Multiple.20case.html#224160261">(Jan 27 2021 at 10:02)</a>:</h4>
<p>They are in some languages, e,g:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="k">enum</span> <span class="nc">Num</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">Neg</span><span class="p">(</span><span class="kt">u32</span><span class="p">),</span><span class="w"> </span><span class="n">Zero</span><span class="p">,</span><span class="w"> </span><span class="n">Pos</span><span class="p">(</span><span class="kt">u32</span><span class="p">)</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="k">use</span><span class="w"> </span><span class="n">Num</span>::<span class="o">*</span><span class="p">;</span><span class="w"></span>

<span class="k">fn</span> <span class="nf">abs</span><span class="p">(</span><span class="n">n</span>: <span class="nc">Num</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="kt">u32</span> <span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="k">match</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">Neg</span><span class="p">(</span><span class="n">i</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Pos</span><span class="p">(</span><span class="n">i</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">i</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">Zero</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>



<a name="224160421"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Multiple%20case/near/224160421" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Multiple.20case.html#224160421">(Jan 27 2021 at 10:04)</a>:</h4>
<p>You can also kind of do or-patterns in lean using wildcard matches</p>



<a name="224183845"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Multiple%20case/near/224183845" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sorawee Porncharoenwase <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Multiple.20case.html#224183845">(Jan 27 2021 at 13:58)</a>:</h4>
<p>Speaking of this, I have another tactic named <code>soft_case</code>. It's exactly like the current <code>case</code>, except that it is not wrapped with <code>solve1</code>. This allows us to dive into a case, <code>cases</code> on a variable in that case, go back up, and then <code>all_goals</code> at the parent level. E.g.,</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">inductive</span> <span class="n">val</span> <span class="o">:</span> <span class="kt">Type</span>
<span class="bp">|</span> <span class="n">a</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">bool</span><span class="o">)</span> <span class="o">:</span> <span class="n">val</span>
<span class="bp">|</span> <span class="n">b</span> <span class="o">:</span> <span class="n">val</span>
<span class="bp">|</span> <span class="n">c</span> <span class="o">:</span> <span class="n">val</span>
<span class="bp">|</span> <span class="n">d</span> <span class="o">:</span> <span class="n">val</span>

<span class="kn">open</span> <span class="n">val</span>

<span class="kd">def</span> <span class="n">test</span> <span class="o">:</span> <span class="n">val</span> <span class="bp">→</span> <span class="n">bool</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">a</span> <span class="n">ff</span><span class="o">)</span> <span class="o">:=</span> <span class="n">tt</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">a</span> <span class="n">tt</span><span class="o">)</span> <span class="o">:=</span> <span class="n">ff</span>
<span class="bp">|</span> <span class="n">b</span> <span class="o">:=</span> <span class="n">ff</span>
<span class="bp">|</span> <span class="n">c</span> <span class="o">:=</span> <span class="n">tt</span>
<span class="bp">|</span> <span class="n">d</span> <span class="o">:=</span> <span class="n">ff</span>

<span class="kd">example</span> <span class="o">{</span><span class="n">x</span><span class="o">}</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">test</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">tt</span><span class="o">)</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">=</span> <span class="o">(</span><span class="n">a</span> <span class="n">ff</span><span class="o">)</span> <span class="bp">∨</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">c</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">cases</span> <span class="n">x</span><span class="o">,</span>
  <span class="n">soft_case</span> <span class="n">a</span> <span class="o">:</span> <span class="n">x</span> <span class="o">{</span> <span class="n">cases</span> <span class="n">x</span> <span class="o">},</span>
  <span class="n">all_goals</span> <span class="o">{</span> <span class="n">finish</span> <span class="o">},</span>
<span class="kd">end</span>
</code></pre></div>
<p>Would this be something useful to people?</p>



<a name="224184424"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Multiple%20case/near/224184424" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Multiple.20case.html#224184424">(Jan 27 2021 at 14:02)</a>:</h4>
<p><code>focus_case</code> is probably a better name, for consistency with <a href="https://leanprover-community.github.io/mathlib_docs/tactics.html#focus">tactic#focus</a></p>



<a name="224184971"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Multiple%20case/near/224184971" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Multiple.20case.html#224184971">(Jan 27 2021 at 14:06)</a>:</h4>
<p>The question is, what semantics would <code>focus_case</code> with multiple cases have?</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="c1">-- goals: A, B, C, D</span>
<span class="n">focus_case</span> <span class="o">[</span><span class="n">A</span><span class="o">,</span> <span class="n">C</span><span class="o">]</span> <span class="o">{</span>
    <span class="n">work_on_goal</span> <span class="mi">0</span> <span class="o">{</span><span class="n">split</span><span class="o">},</span>
    <span class="n">work_on_goal</span> <span class="mi">1</span> <span class="o">{</span><span class="n">split</span><span class="o">},</span>
    <span class="c1">-- goals: A1, A2, C1, C2</span>
<span class="o">}</span>
<span class="c1">-- what should the goal list be here?</span>
</code></pre></div>
<p>Ideally you'd reconstruct <code>A1, A2, B, C1, C2, D</code>, but I think the information to recover that simply doesn't exist</p>



<a name="224185895"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Multiple%20case/near/224185895" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Multiple.20case.html#224185895">(Jan 27 2021 at 14:13)</a>:</h4>
<p>I was also going to suggest something like <code>soft_case</code> to address <span class="user-mention" data-user-id="310045">@Eric Wieser</span> 's comment about cases that are almost but not quite the same. I think it could be implemented with an option on <code>case</code></p>



<a name="224186308"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Multiple%20case/near/224186308" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Multiple.20case.html#224186308">(Jan 27 2021 at 14:16)</a>:</h4>
<p>I also have a slight preference for <code>focus_case</code> being an option on <code>case</code> instead of a separate tactic, although I don't have a good suggestion for what sigil is appropriate. <code>case...</code>?</p>



<a name="224186408"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Multiple%20case/near/224186408" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Multiple.20case.html#224186408">(Jan 27 2021 at 14:17)</a>:</h4>
<p>Also, what would be the semantics of:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">focus_case</span> <span class="n">succ</span> <span class="o">:</span> <span class="n">n</span> <span class="o">{</span>
   <span class="k">let</span> <span class="n">m</span> <span class="o">:=</span> <span class="n">n</span><span class="o">,</span>
<span class="o">},</span>
<span class="n">focus_case</span> <span class="n">succ</span> <span class="o">:</span> <span class="n">o</span> <span class="o">{</span>
   <span class="c1">-- wait, we already intro'd the variable as `n`?</span>
<span class="o">},</span>
</code></pre></div>



<a name="224186542"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Multiple%20case/near/224186542" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Multiple.20case.html#224186542">(Jan 27 2021 at 14:18)</a>:</h4>
<p>Renaming all the <code>n</code>s to <code>o</code>s would be fine, but it's not obvious to me that that would just work out of the box</p>



<a name="224186575"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Multiple%20case/near/224186575" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Multiple.20case.html#224186575">(Jan 27 2021 at 14:18)</a>:</h4>
<p>If <code>focus_case</code> works as I suggested, where the <code>focus</code> part is built in, then in your example</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="c1">-- goals: A, B, C, D</span>
<span class="n">focus_case</span> <span class="o">[</span><span class="n">A</span><span class="o">,</span> <span class="n">C</span><span class="o">]</span> <span class="o">{</span>
  <span class="n">split</span><span class="o">,</span>
  <span class="c1">-- goals: A -&gt; A1, A2, also C -&gt; C1, C2</span>
<span class="o">}</span>
<span class="c1">-- goals: A1, A2, B, C1, C2, D</span>
</code></pre></div>
<p>is doable</p>



<a name="224186628"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Multiple%20case/near/224186628" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Multiple.20case.html#224186628">(Jan 27 2021 at 14:18)</a>:</h4>
<p>How does focus_case know where to reinsert the new goals into the goal list?</p>



<a name="224186648"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Multiple%20case/near/224186648" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Multiple.20case.html#224186648">(Jan 27 2021 at 14:18)</a>:</h4>
<p>it is the one that deconstructed the list</p>



<a name="224186669"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Multiple%20case/near/224186669" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Multiple.20case.html#224186669">(Jan 27 2021 at 14:19)</a>:</h4>
<p>That would require some way to inspect the A1 goal and ask "did you come from A or C", right?</p>



<a name="224186698"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Multiple%20case/near/224186698" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Multiple.20case.html#224186698">(Jan 27 2021 at 14:19)</a>:</h4>
<p>No, it is essentially <code>list.bind</code></p>



<a name="224186748"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Multiple%20case/near/224186748" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Multiple.20case.html#224186748">(Jan 27 2021 at 14:19)</a>:</h4>
<p>where goals that aren't being focused are just inserted as is into the new goal list</p>



<a name="224186751"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Multiple%20case/near/224186751" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Multiple.20case.html#224186751">(Jan 27 2021 at 14:19)</a>:</h4>
<p>Oh, I see your point - you're ok because your proposed <code>focus_case</code> executes the tactic block on each goal</p>



<a name="224186815"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Multiple%20case/near/224186815" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Multiple.20case.html#224186815">(Jan 27 2021 at 14:20)</a>:</h4>
<p>As opposed to executing it once against all goals</p>



<a name="224186857"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Multiple%20case/near/224186857" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Multiple.20case.html#224186857">(Jan 27 2021 at 14:20)</a>:</h4>
<p>right, that way of working is annoying anyway; most tactics want to work on a single goal</p>



<a name="224186927"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Multiple%20case/near/224186927" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Multiple.20case.html#224186927">(Jan 27 2021 at 14:21)</a>:</h4>
<p>especially with <code>focus_case</code> you can just chain several of them if you want to do different things in each case</p>



<a name="224187092"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Multiple%20case/near/224187092" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Multiple.20case.html#224187092">(Jan 27 2021 at 14:22)</a>:</h4>
<p>The semantics of the double <code>focus_case</code> is the same as <code>case</code>: the variables get renamed on entry to the block</p>



<a name="224187210"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Multiple%20case/near/224187210" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Multiple.20case.html#224187210">(Jan 27 2021 at 14:23)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="c1">-- a_1 : nat</span>
<span class="n">focus_case</span> <span class="n">succ</span> <span class="o">:</span> <span class="n">n</span> <span class="o">{</span>
   <span class="c1">-- n : nat</span>
   <span class="k">let</span> <span class="n">m</span> <span class="o">:=</span> <span class="n">n</span><span class="o">,</span>
   <span class="c1">-- n : nat, m := n</span>
<span class="o">},</span>
<span class="n">focus_case</span> <span class="n">succ</span> <span class="o">:</span> <span class="n">o</span> <span class="o">{</span>
   <span class="c1">-- o : nat, m := o</span>
<span class="o">},</span>
</code></pre></div>



<a name="224187339"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Multiple%20case/near/224187339" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Multiple.20case.html#224187339">(Jan 27 2021 at 14:24)</a>:</h4>
<p>So, my current code is something like</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">case</span> <span class="o">[</span><span class="n">A</span><span class="o">,</span> <span class="n">B</span><span class="o">]</span> <span class="o">{</span>
   <span class="n">all_goals</span> <span class="o">{</span> <span class="n">foo</span> <span class="o">},</span>
   <span class="n">all_goals</span> <span class="o">{</span> <span class="n">bar</span> <span class="o">},</span>
   <span class="n">work_on_goal</span> <span class="mi">0</span> <span class="o">{</span> <span class="n">bar0</span> <span class="o">},</span>
   <span class="n">work_on_goal</span> <span class="mi">1</span> <span class="o">{</span> <span class="n">bar1</span> <span class="o">},</span>
   <span class="n">all_goals</span> <span class="o">{</span> <span class="n">baz</span> <span class="o">},</span> <span class="c1">--done</span>
<span class="o">}</span>
</code></pre></div>
<p>I guess you're proposing I instead write that as</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">focus_case</span> <span class="o">[</span><span class="n">A</span><span class="o">,</span> <span class="n">B</span><span class="o">]</span> <span class="o">{</span> <span class="n">foo</span> <span class="o">},</span>
<span class="n">focus_case</span> <span class="o">[</span><span class="n">A</span><span class="o">,</span> <span class="n">B</span><span class="o">]</span> <span class="o">{</span> <span class="n">bar</span> <span class="o">},</span>
<span class="n">focus_case</span> <span class="n">A</span> <span class="o">{</span> <span class="n">bar0</span> <span class="o">},</span>
<span class="n">focus_case</span> <span class="n">B</span> <span class="o">{</span> <span class="n">bar1</span> <span class="o">},</span>
<span class="n">case</span> <span class="o">[</span><span class="n">A</span><span class="o">,</span> <span class="n">B</span><span class="o">]</span> <span class="o">{</span> <span class="n">baz</span> <span class="o">},</span>
</code></pre></div>



<a name="224187467"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Multiple%20case/near/224187467" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Multiple.20case.html#224187467">(Jan 27 2021 at 14:24)</a>:</h4>
<p>The nice bit about my structure is that I can inspect the proof state without seeing goals C and D I don't care about</p>



<a name="224187492"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Multiple%20case/near/224187492" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Multiple.20case.html#224187492">(Jan 27 2021 at 14:24)</a>:</h4>
<p>Whereas in your proposal, I either only see the proof state for <code>A</code>, or I see it for all goals</p>



<a name="224187577"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Multiple%20case/near/224187577" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Multiple.20case.html#224187577">(Jan 27 2021 at 14:25)</a>:</h4>
<p>I think that should be fixed generally though</p>



<a name="224187614"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Multiple%20case/near/224187614" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Multiple.20case.html#224187614">(Jan 27 2021 at 14:25)</a>:</h4>
<p>You'd consider that a flaw in the infoview?</p>



<a name="224187626"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Multiple%20case/near/224187626" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Multiple.20case.html#224187626">(Jan 27 2021 at 14:26)</a>:</h4>
<p>that's a server goal reporting issue</p>



<a name="224187719"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Multiple%20case/near/224187719" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Multiple.20case.html#224187719">(Jan 27 2021 at 14:26)</a>:</h4>
<p>if an interactive tactic block is called multiple times the goal view should show all of the incoming states</p>



<a name="224187835"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Multiple%20case/near/224187835" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Multiple.20case.html#224187835">(Jan 27 2021 at 14:27)</a>:</h4>
<p>There's still a structuring argument that I'd like to wrap the A B part of the proof in braces to separate it from the C D part</p>



<a name="224187949"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Multiple%20case/near/224187949" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Multiple.20case.html#224187949">(Jan 27 2021 at 14:28)</a>:</h4>
<p>Maybe there are other ways to achieve that</p>



<a name="224187961"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Multiple%20case/near/224187961" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Multiple.20case.html#224187961">(Jan 27 2021 at 14:28)</a>:</h4>
<p>maybe that needs its own tactic</p>



<a name="224187974"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Multiple%20case/near/224187974" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Multiple.20case.html#224187974">(Jan 27 2021 at 14:28)</a>:</h4>
<p><code>subcase</code>?</p>



<a name="224188083"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Multiple%20case/near/224188083" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Multiple.20case.html#224188083">(Jan 27 2021 at 14:29)</a>:</h4>
<p><code>case_group</code>?</p>



<a name="224188112"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Multiple%20case/near/224188112" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Multiple.20case.html#224188112">(Jan 27 2021 at 14:29)</a>:</h4>
<p><code>cases</code>? <span aria-label="upside down" class="emoji emoji-1f643" role="img" title="upside down">:upside_down:</span></p>



<a name="224188419"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Multiple%20case/near/224188419" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Multiple.20case.html#224188419">(Jan 27 2021 at 14:31)</a>:</h4>
<p><code>subcases</code> / <code>case_group</code> would have to be a <code>solve</code>-style tactic though, unless you're ok with it inserting remaining goals in a random place</p>



<a name="224188516"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Multiple%20case/near/224188516" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Multiple.20case.html#224188516">(Jan 27 2021 at 14:31)</a>:</h4>
<p>probably it would put all the new goals at the front</p>



<a name="224188728"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Multiple%20case/near/224188728" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Multiple.20case.html#224188728">(Jan 27 2021 at 14:32)</a>:</h4>
<p>in particular, that means that <code>case_group [B, C] {}</code> can be used to reorder <code>A, B, C, D</code> to <code>B, C, A, D</code></p>



<a name="224189082"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Multiple%20case/near/224189082" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Multiple.20case.html#224189082">(Jan 27 2021 at 14:35)</a>:</h4>
<p>I thought about this a bit for <code>work_on_goals</code>, where it was particularly nasty because if you want to work on goals <code>0</code> and <code>2</code>, then <code>1</code> and <code>3</code>, you have to use <code>work_on_goals [0, 2] { }, work_on_goals [2, 3] { }</code> as after the first <code>work_on_goals</code> the goals have re-ordered!</p>



<a name="224189113"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Multiple%20case/near/224189113" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Multiple.20case.html#224189113">(Jan 27 2021 at 14:35)</a>:</h4>
<p>But I guess for named goals that problem goes away</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>