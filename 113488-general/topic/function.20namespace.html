---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/function.20namespace.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/function.20namespace.html">function namespace</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="196733385"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20namespace/near/196733385" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/function.20namespace.html#196733385">(May 07 2020 at 07:05)</a>:</h4>
<p>I fear this is impossible, but I don't actually know why. Could</p>
<ol>
<li><code>X → Y</code> be notation for <code>function X Y</code>, and</li>
<li><code>function X Y</code> be an abbreviation for whatever Pi-type it should be.</li>
</ol>
<p>Then we could write <code>(hf : f.injective)</code> if I'm not mistaken.</p>



<a name="196734297"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20namespace/near/196734297" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/function.20namespace.html#196734297">(May 07 2020 at 07:17)</a>:</h4>
<p>I'd love to have this. I don't know if it's easier to implement this in Lean, or in C++.</p>



<a name="196737141"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20namespace/near/196737141" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/function.20namespace.html#196737141">(May 07 2020 at 07:56)</a>:</h4>
<p>1) seems like a really bad idea, 2) is extremely easy to do, you just need to add a case for <code>is_pi</code> here: <a href="https://github.com/leanprover-community/lean/blob/675c47294a57c98e3215b6edd9e7efc80ec99475/src/frontends/lean/elaborator.cpp#L2728" title="https://github.com/leanprover-community/lean/blob/675c47294a57c98e3215b6edd9e7efc80ec99475/src/frontends/lean/elaborator.cpp#L2728">https://github.com/leanprover-community/lean/blob/675c47294a57c98e3215b6edd9e7efc80ec99475/src/frontends/lean/elaborator.cpp#L2728</a><br>
I think we should also have this for <code>Sort</code>.</p>



<a name="196737500"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20namespace/near/196737500" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/function.20namespace.html#196737500">(May 07 2020 at 08:00)</a>:</h4>
<p>What do you mean by 1) and 2)?</p>



<a name="196737883"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20namespace/near/196737883" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/function.20namespace.html#196737883">(May 07 2020 at 08:04)</a>:</h4>
<p>Can we differentiate between <code>pi</code> and <code>function</code> here?</p>



<a name="196738926"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20namespace/near/196738926" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/function.20namespace.html#196738926">(May 07 2020 at 08:14)</a>:</h4>
<p>1) and 2) refer to Johan's questions.<br>
Oh, <code>function</code> is supposed to be a non-dependent pi!  My advice still stands: 1) is probably a bad idea, 2) is easy and should be done.  You could differentiate between pis and non-dependent pis, for example you could try <code>function.injective</code> if it is non-dependent as well as <code>pi.injective</code>.  I'm not sure if this difference is important.  Do you want different definitions for pis and non-dependent pis?</p>



<a name="196739360"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20namespace/near/196739360" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/function.20namespace.html#196739360">(May 07 2020 at 08:18)</a>:</h4>
<p>But if we don't have 1), what is the benefit of 2)?</p>



<a name="196739386"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20namespace/near/196739386" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/function.20namespace.html#196739386">(May 07 2020 at 08:18)</a>:</h4>
<p>We can't write <code>f.injective</code> for <code>f : X → Y</code> in that case, right?</p>



<a name="196739517"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20namespace/near/196739517" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/function.20namespace.html#196739517">(May 07 2020 at 08:20)</a>:</h4>
<p>Gabriel pointed to C++ source file where we can hardcode "if you see a function, try <code>function</code> namespace".</p>



<a name="196739580"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20namespace/near/196739580" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/function.20namespace.html#196739580">(May 07 2020 at 08:20)</a>:</h4>
<p>Instead of doing this in Lean.</p>



<a name="196739613"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20namespace/near/196739613" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/function.20namespace.html#196739613">(May 07 2020 at 08:20)</a>:</h4>
<p>Aah, I see. We add a hack (-;</p>



<a name="196739631"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20namespace/near/196739631" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/function.20namespace.html#196739631">(May 07 2020 at 08:20)</a>:</h4>
<p><span class="user-mention" data-user-id="110043">@Gabriel Ebner</span> Can you also explain why 1) is a bad idea?</p>



<a name="196739701"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20namespace/near/196739701" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/function.20namespace.html#196739701">(May 07 2020 at 08:21)</a>:</h4>
<p>why not just write <code>f : X \hom Y</code> and <code>f.injective</code></p>



<a name="196739759"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20namespace/near/196739759" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/function.20namespace.html#196739759">(May 07 2020 at 08:22)</a>:</h4>
<p>or whatever unicode variant of the arrow that hasn't been used</p>



<a name="196739769"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20namespace/near/196739769" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/function.20namespace.html#196739769">(May 07 2020 at 08:22)</a>:</h4>
<p>This is more a gut feeling.  But adding definitions typically breaks stuff.  For example defining <code>(≥)</code> as <code>flip (≤)</code> breaks the simplifier.  I would imagine many similar things to happen if <code>→</code> was suddenly no longer a pi.</p>



<a name="196739773"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20namespace/near/196739773" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/function.20namespace.html#196739773">(May 07 2020 at 08:22)</a>:</h4>
<p>my point is, there's no need to change <code>\to</code></p>



<a name="256048196"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20namespace/near/256048196" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/function.20namespace.html#256048196">(Oct 04 2021 at 12:16)</a>:</h4>
<p>I see there already has been discussion about this, but it seems that my idea didn't come up.</p>



<a name="256048388"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20namespace/near/256048388" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/function.20namespace.html#256048388">(Oct 04 2021 at 12:17)</a>:</h4>
<p>Could we have the identifier resolver (or whatever thing does this) try to append <code>function.</code> when we use dot notation on <code>f : α → β</code>?</p>



<a name="256048581"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20namespace/near/256048581" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/function.20namespace.html#256048581">(Oct 04 2021 at 12:18)</a>:</h4>
<p>Dot notation-wise, this is the same as having <code>α → β</code> meaning <code>function α β</code>, but without needing to redefine it.</p>



<a name="256048689"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20namespace/near/256048689" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/function.20namespace.html#256048689">(Oct 04 2021 at 12:19)</a>:</h4>
<p>I don't know whether we want that more generally on Pi-types.</p>



<a name="256049337"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20namespace/near/256049337" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/function.20namespace.html#256049337">(Oct 04 2021 at 12:24)</a>:</h4>
<p>Should it be <code>function</code> or <code>pi</code>?</p>



<a name="256049378"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20namespace/near/256049378" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/function.20namespace.html#256049378">(Oct 04 2021 at 12:24)</a>:</h4>
<p>Maybe the rule should be try one then the other?</p>



<a name="256049381"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20namespace/near/256049381" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/function.20namespace.html#256049381">(Oct 04 2021 at 12:24)</a>:</h4>
<p>I guess it could try both?</p>



<a name="256049433"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20namespace/near/256049433" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/function.20namespace.html#256049433">(Oct 04 2021 at 12:25)</a>:</h4>
<p>In the same way that <code>abbreviation foo : Type* = bar</code> will do dot notation first on foo then on bar</p>



<a name="256049719"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20namespace/near/256049719" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/function.20namespace.html#256049719">(Oct 04 2021 at 12:27)</a>:</h4>
<p>We also have a couple of definitions on <code>Pi</code> by the way: <a href="https://leanprover-community.github.io/mathlib_docs/find/Pi.topological_space">docs#Pi.topological_space</a>, <a href="https://leanprover-community.github.io/mathlib_docs/find/Pi.complete">docs#Pi.complete</a>, ...</p>



<a name="256050345"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20namespace/near/256050345" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/function.20namespace.html#256050345">(Oct 04 2021 at 12:32)</a>:</h4>
<p>We have many objects that coerce to function arrows. How would dot notations operate on those?</p>



<a name="256051326"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20namespace/near/256051326" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/function.20namespace.html#256051326">(Oct 04 2021 at 12:39)</a>:</h4>
<p>Presumably it will work analogously to the current way dot notation works on coercions: <code>((f : A →foo B) : A → B).injective</code> is <code>function.injective ⇑f</code> and <code>f.injective</code> is <code>foo_hom.injective f</code>.</p>



<a name="256051477"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20namespace/near/256051477" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/function.20namespace.html#256051477">(Oct 04 2021 at 12:40)</a>:</h4>
<p>What? Since when does <code>function</code> support dot-notation? <span aria-label="shock" class="emoji emoji-1f628" role="img" title="shock">:shock:</span> <br>
I must have been living under a rock.</p>



<a name="256051575"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20namespace/near/256051575" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/function.20namespace.html#256051575">(Oct 04 2021 at 12:41)</a>:</h4>
<p>Wait what? This is exactly what I'm asking for!</p>



<a name="256051597"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20namespace/near/256051597" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/function.20namespace.html#256051597">(Oct 04 2021 at 12:42)</a>:</h4>
<p>The discussion is about whether to add dot notation, and how it should work. I don't think it actually works yet.</p>



<a name="256051640"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20namespace/near/256051640" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/function.20namespace.html#256051640">(Oct 04 2021 at 12:42)</a>:</h4>
<p>Or is Anne's message supposed to be conditional?</p>



<a name="256051648"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20namespace/near/256051648" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/function.20namespace.html#256051648">(Oct 04 2021 at 12:42)</a>:</h4>
<p>AH yes</p>



<a name="256051692"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20namespace/near/256051692" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/function.20namespace.html#256051692">(Oct 04 2021 at 12:42)</a>:</h4>
<p>/me should learn to read <span aria-label="see no evil" class="emoji emoji-1f648" role="img" title="see no evil">:see_no_evil:</span></p>



<a name="256051699"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20namespace/near/256051699" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/function.20namespace.html#256051699">(Oct 04 2021 at 12:42)</a>:</h4>
<p>Indeed:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">example</span> <span class="o">{</span><span class="n">α</span> <span class="n">β</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">β</span><span class="o">)</span> <span class="o">:</span> <span class="n">f.injective</span> <span class="o">:=</span> <span class="n">_</span> <span class="c1">-- error, `α → β` is not of the form `(C ...)`</span>
</code></pre></div>



<a name="256051826"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20namespace/near/256051826" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/function.20namespace.html#256051826">(Oct 04 2021 at 12:43)</a>:</h4>
<p>Sorry for any confusion, hopefully the edit makes the hypothetical nature clearer</p>



<a name="275902873"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20namespace/near/275902873" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Moritz Doll <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/function.20namespace.html#275902873">(Mar 19 2022 at 10:28)</a>:</h4>
<p>There is still no way to get dot notation for functions, right? I would also love to have something like this</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">data.real.basic</span>

<span class="kd">variables</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span>
<span class="kd">variables</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">)</span>

<span class="kd">abbreviation</span> <span class="n">foo</span> <span class="o">:=</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">ℝ</span>

<span class="kd">lemma</span> <span class="n">foo.test</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">:=</span> <span class="gr">sorry</span>

<span class="k">#check</span> <span class="n">f.test</span> <span class="c1">--fails of course</span>
</code></pre></div>
<p>where the notation works for any <code>α</code>.</p>



<a name="275902957"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20namespace/near/275902957" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/function.20namespace.html#275902957">(Mar 19 2022 at 10:31)</a>:</h4>
<p>What's <code>f</code> on that last line? I don't see a <code>variables</code>.</p>



<a name="275903036"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20namespace/near/275903036" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Moritz Doll <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/function.20namespace.html#275903036">(Mar 19 2022 at 10:33)</a>:</h4>
<p>edited. Sorry, I deleted one line too much from my other experiments</p>



<a name="275903173"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20namespace/near/275903173" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Moritz Doll <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/function.20namespace.html#275903173">(Mar 19 2022 at 10:37)</a>:</h4>
<p>The context is that I want to refactor the <code>with_seminorms</code> part in <code>analysis.seminorm</code>.</p>



<a name="275904960"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20namespace/near/275904960" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/function.20namespace.html#275904960">(Mar 19 2022 at 11:18)</a>:</h4>
<p>Does <code>(f : @foo α)</code> work there?</p>



<a name="275905249"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20namespace/near/275905249" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Moritz Doll <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/function.20namespace.html#275905249">(Mar 19 2022 at 11:25)</a>:</h4>
<p><code>#check (f : @foo α).test</code> fails with the same error:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">invalid</span> <span class="n">field</span> <span class="kd">notation</span><span class="o">,</span> <span class="n">type</span> <span class="n">is</span> <span class="n">not</span> <span class="n">of</span> <span class="n">the</span> <span class="n">form</span> <span class="o">(</span><span class="n">C</span> <span class="bp">...</span><span class="o">)</span> <span class="n">where</span> <span class="n">C</span> <span class="n">is</span> <span class="n">a</span> <span class="kd">constant</span>
  <span class="n">f</span>
<span class="n">has</span> <span class="n">type</span>
  <span class="n">α</span> <span class="bp">→</span> <span class="n">ℝ</span>
</code></pre></div>



<a name="275905258"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20namespace/near/275905258" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/function.20namespace.html#275905258">(Mar 19 2022 at 11:25)</a>:</h4>
<p>I mean declare f with that type</p>



<a name="275905337"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20namespace/near/275905337" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Moritz Doll <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/function.20namespace.html#275905337">(Mar 19 2022 at 11:27)</a>:</h4>
<p>yes, that works. Thank you. Why does that make a difference?</p>



<a name="275927030"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20namespace/near/275927030" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Leonardo de Moura <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/function.20namespace.html#275927030">(Mar 19 2022 at 20:04)</a>:</h4>
<p>I didn't read the whole thread, but the following works in Lean 4.</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">def</span> <span class="n">Function.injective</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">β</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">:=</span> <span class="bp">∀</span> <span class="o">⦃</span><span class="n">a₁</span> <span class="n">a₂</span><span class="o">⦄,</span> <span class="n">f</span> <span class="n">a₁</span> <span class="bp">=</span> <span class="n">f</span> <span class="n">a₂</span> <span class="bp">→</span> <span class="n">a₁</span> <span class="bp">=</span> <span class="n">a₂</span>

<span class="kd">theorem</span> <span class="n">Function.injective.comp</span> <span class="o">{</span><span class="n">g</span> <span class="o">:</span> <span class="n">β</span> <span class="bp">→</span> <span class="n">φ</span><span class="o">}</span> <span class="o">{</span><span class="n">f</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">β</span><span class="o">}</span> <span class="o">(</span><span class="n">hg</span> <span class="o">:</span> <span class="n">g.injective</span><span class="o">)</span> <span class="o">(</span><span class="n">hf</span> <span class="o">:</span> <span class="n">f.injective</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">g</span> <span class="bp">∘</span> <span class="n">f</span><span class="o">)</span><span class="bp">.</span><span class="n">injective</span> <span class="o">:=</span>
  <span class="k">fun</span> <span class="n">a₁</span> <span class="n">a₂</span> <span class="n">h</span> <span class="bp">=&gt;</span> <span class="n">hf</span> <span class="o">(</span><span class="n">hg</span> <span class="n">h</span><span class="o">)</span>
</code></pre></div>



<a name="275927319"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20namespace/near/275927319" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/function.20namespace.html#275927319">(Mar 19 2022 at 20:10)</a>:</h4>
<p>is there any other "special" namespaces? does <code>pi/forall</code> work for <code>∀ x, _</code>?</p>



<a name="275927534"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20namespace/near/275927534" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Leonardo de Moura <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/function.20namespace.html#275927534">(Mar 19 2022 at 20:16)</a>:</h4>
<p><span class="user-mention" data-user-id="284160">@Eric Rodriguez</span> No, but they can be added if there are useful in practice.</p>



<a name="275927846"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20namespace/near/275927846" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/function.20namespace.html#275927846">(Mar 19 2022 at 20:24)</a>:</h4>
<p>Great, I was going to ask about this -- I'll backport it to Lean 3.</p>



<a name="275928023"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20namespace/near/275928023" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/function.20namespace.html#275928023">(Mar 19 2022 at 20:29)</a>:</h4>
<p>Dot notation is something which I have really begun to love. Five minutes ago I just proved <code>I \sub J</code> from <code>h : I = J</code> using <code>h.subset</code> and about an hour ago I proved <code>a &lt;= b</code> from <code>h : a = b</code> using <code>h.le</code>. Now I've "got the hang of it" I had started to get frustrated that I couldn't do the same trick with functions :-)</p>



<a name="275928721"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20namespace/near/275928721" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Leonardo de Moura <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/function.20namespace.html#275928721">(Mar 19 2022 at 20:45)</a>:</h4>
<p><span class="user-mention" data-user-id="306601">@Kyle Miller</span> There is also a new form of dot notation in Lean 4 inspired by Swift that we are currently in love with. We can write</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">def</span> <span class="n">f</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">Nat</span><span class="o">)</span> <span class="o">:</span> <span class="n">Except</span> <span class="n">String</span> <span class="n">Nat</span> <span class="o">:=</span>
  <span class="k">if</span> <span class="n">x</span> <span class="bp">&gt;</span> <span class="mi">0</span> <span class="k">then</span>
    <span class="bp">.</span><span class="n">ok</span> <span class="n">x</span>  <span class="c1">-- Sugar for `Except.ok x`</span>
  <span class="k">else</span>
    <span class="bp">.</span><span class="n">error</span> <span class="s2">"x is zero"</span> <span class="c1">-- Sugar for `Except.error "x is zero"`</span>
</code></pre></div>
<p>The namespace is inferred from the expected type.</p>



<a name="275929763"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20namespace/near/275929763" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/function.20namespace.html#275929763">(Mar 19 2022 at 21:08)</a>:</h4>
<p><span class="user-mention" data-user-id="112857">@Leonardo de Moura</span> Does that mean dot notation is whitespace sensitive now? In Lean 3 you can do <code>x .foo</code>, which can be potentially useful when you have long lines you need to split, but it's not so important since you can't really chain dot notation like you can method calls in most OO languages due to syntax.</p>



<a name="275929865"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20namespace/near/275929865" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/function.20namespace.html#275929865">(Mar 19 2022 at 21:10)</a>:</h4>
<p>It <em>already</em> is, Kyle. You can add whitespaces to disambiguate chained dot notation and genuine namespacing.</p>



<a name="275930813"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20namespace/near/275930813" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/function.20namespace.html#275930813">(Mar 19 2022 at 21:34)</a>:</h4>
<p><span class="user-mention" data-user-id="387244">@Yaël Dillies</span> That might be one kind of chained "method call" (for nullary methods), but Lean doesn't support anything like <code>x.foo(a,b).bar(c,d,e).baz()</code>, which is what I was referring to. It's common to see this sort of chaining where each additional method call gets its own line.</p>



<a name="275931087"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20namespace/near/275931087" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/function.20namespace.html#275931087">(Mar 19 2022 at 21:40)</a>:</h4>
<p>fond memories of C#'s LINQ</p>



<a name="275931089"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20namespace/near/275931089" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/function.20namespace.html#275931089">(Mar 19 2022 at 21:40)</a>:</h4>
<p>13-year old me loved that stuff</p>



<a name="275932448"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20namespace/near/275932448" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastian Ullrich <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/function.20namespace.html#275932448">(Mar 19 2022 at 22:08)</a>:</h4>
<p><span class="user-mention" data-user-id="306601">@Kyle Miller</span> That's <code>x.foo a b |&gt;.bar c d e |&gt;.baz</code> in Lean 4</p>



<a name="275932482"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20namespace/near/275932482" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Leonardo de Moura <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/function.20namespace.html#275932482">(Mar 19 2022 at 22:08)</a>:</h4>
<p><span class="user-mention" data-user-id="306601">@Kyle Miller</span>  Yes, it is. However, in Lean 4, the projection notation never allowed whitespaces between <code>x</code> and <code>.foo</code>.</p>



<a name="275932511"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20namespace/near/275932511" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/function.20namespace.html#275932511">(Mar 19 2022 at 22:09)</a>:</h4>
<p>Lean 4 is going to be so cool :-)</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>