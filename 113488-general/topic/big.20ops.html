---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/big.20ops.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html">big ops</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="195813899"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195813899" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195813899">(Apr 30 2020 at 09:07)</a>:</h4>
<p>What do people think of</p>
<div class="codehilite"><pre><span></span><code><span class="bp">@</span><span class="o">[</span><span class="n">to_additive</span><span class="o">]</span>
<span class="kn">abbreviation</span> <span class="n">fintype</span><span class="bp">.</span><span class="n">prod</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">γ</span><span class="o">)</span> <span class="o">:=</span> <span class="n">finset</span><span class="bp">.</span><span class="n">univ</span><span class="bp">.</span><span class="n">prod</span> <span class="n">f</span>

<span class="n">localized</span> <span class="s2">&quot;notation `∑` binders `, ` r:(scoped f, fintype.sum f) := r&quot;</span> <span class="k">in</span> <span class="n">big_operators</span>
<span class="n">localized</span> <span class="s2">&quot;notation `∏` binders `, ` r:(scoped f, fintype.prod f) := r&quot;</span> <span class="k">in</span> <span class="n">big_operators</span>

<span class="n">localized</span> <span class="s2">&quot;notation `∑` binders ` in ` s `, ` r:(scoped f, finset.sum s f) := r&quot;</span> <span class="k">in</span> <span class="n">big_operators</span>
<span class="n">localized</span> <span class="s2">&quot;notation `∏` binders ` in ` s `, ` r:(scoped f, finset.prod s f) := r&quot;</span> <span class="k">in</span> <span class="n">big_operators</span>
</code></pre></div>


<p><span class="user-mention" data-user-id="110031">@Patrick Massot</span> I know that this is a very meagre substitute for the big ops library in coq. But I think it's better to wait for Lean 4 before we start a big refactor. In the mean time, this notation seems like a cheap way to improve readability.</p>



<a name="195815811"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195815811" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195815811">(Apr 30 2020 at 09:30)</a>:</h4>
<p>Does this actually work? I mean both the fintype and finset version at the same time.</p>



<a name="195815858"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195815858" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195815858">(Apr 30 2020 at 09:31)</a>:</h4>
<p>Oh I see, the notation is subtly different</p>



<a name="195815872"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195815872" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195815872">(Apr 30 2020 at 09:31)</a>:</h4>
<p>The question still stands, but I'm more optimistic</p>



<a name="195816376"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195816376" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195816376">(Apr 30 2020 at 09:36)</a>:</h4>
<p><span class="user-mention" data-user-id="110031">@Patrick Massot</span> See <a href="https://github.com/leanprover-community/mathlib/pull/1564/files/88a5f988abd92ea699824d72dd8c0fcdd5cd4ac0..60f01102933198521d31c2d58ad07651a23dccec#diff-c5bb8de7cb26ae773e9bcb3fa594be6fL57-R230" title="https://github.com/leanprover-community/mathlib/pull/1564/files/88a5f988abd92ea699824d72dd8c0fcdd5cd4ac0..60f01102933198521d31c2d58ad07651a23dccec#diff-c5bb8de7cb26ae773e9bcb3fa594be6fL57-R230">https://github.com/leanprover-community/mathlib/pull/1564/files/88a5f988abd92ea699824d72dd8c0fcdd5cd4ac0..60f01102933198521d31c2d58ad07651a23dccec#diff-c5bb8de7cb26ae773e9bcb3fa594be6fL57-R230</a> for a short proof of concept</p>



<a name="195816798"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195816798" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195816798">(Apr 30 2020 at 09:41)</a>:</h4>
<p>Yes, I saw, that's wonderful. My question is specifically about coexistence of the two variations. Do you use both in that file?</p>



<a name="195817437"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195817437" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195817437">(Apr 30 2020 at 09:48)</a>:</h4>
<p>Yes, I do.</p>



<a name="195817583"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195817583" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195817583">(Apr 30 2020 at 09:49)</a>:</h4>
<p><span class="user-mention" data-user-id="110031">@Patrick Massot</span> The first <code>calc</code> in the proof mixes them, for example.</p>



<a name="195817681"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195817681" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195817681">(Apr 30 2020 at 09:50)</a>:</h4>
<p>amazing</p>



<a name="195819686"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195819686" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195819686">(Apr 30 2020 at 10:12)</a>:</h4>
<p>Would that conflict with</p>
<div class="codehilite"><pre><span></span><code><span class="kn">notation</span> <span class="bp">`</span><span class="err">∑</span><span class="bp">`</span> <span class="n">binders</span> <span class="bp">`</span><span class="o">,</span> <span class="bp">`</span> <span class="n">r</span><span class="o">:(</span><span class="n">scoped</span> <span class="n">f</span><span class="o">,</span> <span class="n">tsum</span> <span class="n">f</span><span class="o">)</span> <span class="o">:=</span> <span class="n">r</span>
</code></pre></div>


<p>in <code>topology/algebra/infinite_sum</code>? (If necessary, we could also localize this one).</p>



<a name="195820160"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195820160" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195820160">(Apr 30 2020 at 10:18)</a>:</h4>
<p>People will probably want to use both when discussing partial sums.</p>



<a name="195821357"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195821357" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195821357">(Apr 30 2020 at 10:33)</a>:</h4>
<p>I would be ok with <code>∑'</code> for the infinite sum, and the other notations introduced by Johan.</p>



<a name="195821855"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195821855" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195821855">(Apr 30 2020 at 10:39)</a>:</h4>
<p>Yes, I also thought about that, and I think the <code>'</code> version would be best.</p>



<a name="195821974"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195821974" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195821974">(Apr 30 2020 at 10:40)</a>:</h4>
<p>To what extent could this refactor be done with a regex? Because I fear it will be a lot of work if everything has to be done manually...</p>



<a name="195822103"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195822103" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195822103">(Apr 30 2020 at 10:41)</a>:</h4>
<p>One thing I noticed with my experiment is that <code>rw [finset.sum_lemma]</code> doesn't play very well with <code>abbreviation fintype.sum f := finset.sum univ f</code></p>



<a name="195822165"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195822165" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195822165">(Apr 30 2020 at 10:42)</a>:</h4>
<p>Just using search and replace in all files in vscode, replacing <code>∑</code> with <code>∑'</code>, should do it, hopefully.</p>



<a name="195822179"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195822179" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195822179">(Apr 30 2020 at 10:42)</a>:</h4>
<p>But I wouldn't like restating a whole bunch of lemmas to <code>fintype.sum</code>. At the same time, I think <code>∑ x in univ, f x</code> is ugly.</p>



<a name="195822191"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195822191" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195822191">(Apr 30 2020 at 10:42)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110050">Sebastien Gouezel</span> <a href="#narrow/stream/113488-general/topic/big.20ops/near/195822165" title="#narrow/stream/113488-general/topic/big.20ops/near/195822165">said</a>:</p>
<blockquote>
<p>Just using search and replace in all files in vscode, replacing <code>∑</code> with <code>∑'</code>, should do it, hopefully.</p>
</blockquote>
<p>No, I meant the other refactor.</p>



<a name="195822213"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195822213" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195822213">(Apr 30 2020 at 10:43)</a>:</h4>
<p>Replacing all <code>finset.sum s f</code> with <code>∑ x in s, f x</code></p>



<a name="195822215"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195822215" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195822215">(Apr 30 2020 at 10:43)</a>:</h4>
<p>You don't even need to introduce the abbreviation, just the notation <code>∑</code> should be enough.</p>



<a name="195822247"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195822247" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195822247">(Apr 30 2020 at 10:43)</a>:</h4>
<p>Ah, yes, the other refactor. Time for regexps, yes.</p>



<a name="195822261"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195822261" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195822261">(Apr 30 2020 at 10:43)</a>:</h4>
<p>Or do we just introduce the notation, but not use it in the file...</p>



<a name="195824749"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195824749" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195824749">(Apr 30 2020 at 11:12)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib/issues/2571" title="https://github.com/leanprover-community/mathlib/issues/2571">#2571</a></p>



<a name="195825145"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195825145" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195825145">(Apr 30 2020 at 11:18)</a>:</h4>
<p>If I change the notation to</p>
<div class="codehilite"><pre><span></span><code><span class="n">localized</span> <span class="s2">&quot;notation `∑` binders ` in ` s `, ` r:(scoped f, finset.sum s f) := r&quot;</span> <span class="k">in</span> <span class="n">big_operators</span>
<span class="n">localized</span> <span class="s2">&quot;notation `∏` binders ` in ` s `, ` r:(scoped f, finset.prod s f) := r&quot;</span> <span class="k">in</span> <span class="n">big_operators</span>

<span class="n">localized</span> <span class="s2">&quot;notation `∑` binders `, ` r:(scoped f, finset.univ.sum f) := r&quot;</span> <span class="k">in</span> <span class="n">big_operators</span>
<span class="n">localized</span> <span class="s2">&quot;notation `∏` binders `, ` r:(scoped f, finset.univ.prod f) := r&quot;</span> <span class="k">in</span> <span class="n">big_operators</span>
</code></pre></div>


<p>then the second set of notation is not used in the tactic state. That's unfortunate. Is there some incantation that can move Lean to do a better job?</p>



<a name="195827375"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195827375" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195827375">(Apr 30 2020 at 11:43)</a>:</h4>
<p>I've never really understood how priorities work for notation. Can that be used here?</p>



<a name="195869512"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195869512" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195869512">(Apr 30 2020 at 16:57)</a>:</h4>
<p>Now that the <code>tsum</code> notation has been changed to <code>∑'</code>, I'm ready to start building a PR that introduces the notation above. Except that this notation doesn't really work yet. So what should I do? Introduce <code>fintype.sum</code> and <code>fintype.prod</code>?</p>



<a name="195939011"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195939011" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195939011">(May 01 2020 at 07:49)</a>:</h4>
<p>From looking at the source code, the reverse lookups for notation <code>head_map&lt;notation_entry&gt; notation_state::m_inv_map</code> are stored without priority, since <code>head_map&lt;V&gt;</code> derives from <code>head_map_prio&lt;V, constant_priority_fn&lt;V&gt;&gt;</code></p>



<a name="195939873"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195939873" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195939873">(May 01 2020 at 08:06)</a>:</h4>
<p>In fact, according to the debugger the only notation returned for <code>finset.sum</code> is <code>Σ _ in _, _</code></p>



<a name="195940127"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195940127" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195940127">(May 01 2020 at 08:13)</a>:</h4>
<p>Hmm, but the other does seem to work <span aria-label="confused" class="emoji emoji-1f615" role="img" title="confused">:confused:</span></p>



<a name="195940609"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195940609" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195940609">(May 01 2020 at 08:23)</a>:</h4>
<p>Aha: <code>Σ := finset.univ.sum</code> gets added as notation for the symbol <code>(const lean::head_index &amp;) @0x7ffff49083b8: {m_kind = lean::expr_kind::Macro, m_name = }</code>, and <code>Σ := finset.sum</code> for <code>(const lean::head_index &amp;) @0x7fffdfffd3b8: {m_kind = lean::expr_kind::Constant, m_name = 'finset'.'sum'}</code> (and the second thing is what we probably want)</p>



<a name="195940759"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195940759" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195940759">(May 01 2020 at 08:26)</a>:</h4>
<p>Hmm... I have a hard time parsing this</p>



<a name="195940969"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195940969" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195940969">(May 01 2020 at 08:30)</a>:</h4>
<p>I think Anne tells you to avoid the dot notation.</p>



<a name="195940982"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195940982" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195940982">(May 01 2020 at 08:30)</a>:</h4>
<p>Aha.. you mean in the definition of the notation?</p>



<a name="195941080"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195941080" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195941080">(May 01 2020 at 08:32)</a>:</h4>
<p><span aria-label="+1" class="emoji emoji-1f44d" role="img" title="+1">:+1:</span></p>



<a name="195941092"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195941092" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195941092">(May 01 2020 at 08:32)</a>:</h4>
<p>Let me try that.</p>



<a name="195941201"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195941201" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195941201">(May 01 2020 at 08:34)</a>:</h4>
<p>I think you want to change <code>finset.univ.sum</code> to <code>finset.sum finset.univ</code> and put the line defining <code>finset.sum finset.univ</code> first</p>



<a name="195941232"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195941232" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195941232">(May 01 2020 at 08:35)</a>:</h4>
<p>Awesome</p>
<div class="codehilite"><pre><span></span><code><span class="n">localized</span> <span class="s2">&quot;notation `∑` binders `, ` r:(scoped f, finset.sum finset.univ f) := r&quot;</span> <span class="k">in</span> <span class="n">big_operators</span>
<span class="n">localized</span> <span class="s2">&quot;notation `∏` binders `, ` r:(scoped f, finset.prod finset.univ f) := r&quot;</span> <span class="k">in</span> <span class="n">big_operators</span>

<span class="n">localized</span> <span class="s2">&quot;notation `∑` binders ` in ` s `, ` r:(scoped f, finset.sum s f) := r&quot;</span> <span class="k">in</span> <span class="n">big_operators</span>
<span class="n">localized</span> <span class="s2">&quot;notation `∏` binders ` in ` s `, ` r:(scoped f, finset.prod s f) := r&quot;</span> <span class="k">in</span> <span class="n">big_operators</span>
</code></pre></div>


<p>works. And the order <em>is</em> important.</p>



<a name="195941615"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195941615" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195941615">(May 01 2020 at 08:43)</a>:</h4>
<p>This is great! I just fixed this in the <code>chev-warn</code> branch. Now I have some work to do to explain all of this to mathlib (-;</p>



<a name="195941698"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195941698" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195941698">(May 01 2020 at 08:45)</a>:</h4>
<p>The explanation, as far as I understand it: when deciding how to pretty-print an expression, Lean looks up the notations associated to the head of the expression (e.g. <code>finset.sum</code>). It tries them one by one, until it finds a notation that matches the expression, then uses that to pretty-print. The order in which they are tried is the order in which they are stored in the environment structure, which in this case is the order in which they are defined. Apparently the priority information is thrown away (typically it would be highest-priority first, then by order of definition). This is why the order matters.</p>
<p>A notation definition is associated to the head of the expression it expands to, so <code>notation </code>∑<code> binders </code>, <code> r:(scoped f, finset.sum finset.univ f) := r</code> is associated to the head of the expansion of <code>r</code>, which is the head of <code>finset.sum finset.univ f</code>, which is <code>finset.sum</code>. But <code>finset.univ.sum</code> doesn't get expanded to <code>finset.sum finset.univ</code> at that point (maybe because it won't know if there is also a namespace <code>finset.univ</code> floating around somewhere?), so you have to write <code>finset.sum finset.univ</code> instead of <code>finset.univ.sum</code>.</p>



<a name="195941766"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195941766" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195941766">(May 01 2020 at 08:46)</a>:</h4>
<p>Thanks a lot for explaining this!</p>



<a name="195941773"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195941773" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195941773">(May 01 2020 at 08:46)</a>:</h4>
<p>Homework for Johan: write that long overdue <code>docs/extras/notations.md</code></p>



<a name="195941819"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195941819" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195941819">(May 01 2020 at 08:47)</a>:</h4>
<p>notations don't go through name resolution until they are used, I think</p>



<a name="195941833"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195941833" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195941833">(May 01 2020 at 08:47)</a>:</h4>
<p>/me has lots of homework</p>



<a name="195941888"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195941888" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195941888">(May 01 2020 at 08:48)</a>:</h4>
<p>But we could start by just dumping Anne's explanation in that file. At least that would be a canonical place to find it again.</p>



<a name="195941895"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195941895" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195941895">(May 01 2020 at 08:48)</a>:</h4>
<p>And then we can slowly improve that file.</p>



<a name="195941910"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195941910" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195941910">(May 01 2020 at 08:49)</a>:</h4>
<p>Your sum notations also make great examples.</p>



<a name="195942154"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195942154" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195942154">(May 01 2020 at 08:52)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib/issues/2581" title="https://github.com/leanprover-community/mathlib/issues/2581">#2581</a></p>



<a name="195942165"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195942165" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195942165">(May 01 2020 at 08:53)</a>:</h4>
<p>This is not ready for merging. And I welcome everyone to contribute.</p>



<a name="195942522"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195942522" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195942522">(May 01 2020 at 08:59)</a>:</h4>
<p>I think there is some lookup of names going on at the point of definition though, if you define a notation before a name:</p>
<div class="codehilite"><pre><span></span><code><span class="n">noncomputable</span> <span class="n">theory</span>

<span class="kn">structure</span> <span class="n">foo</span> <span class="o">:</span> <span class="kt">Type</span>

<span class="kn">notation</span> <span class="bp">`</span><span class="err">☹</span><span class="bp">`</span> <span class="o">:=</span> <span class="n">foo</span><span class="bp">.</span><span class="n">munge</span>

<span class="n">def</span> <span class="n">foo</span><span class="bp">.</span><span class="n">munge</span> <span class="o">:</span> <span class="bp">ℕ</span> <span class="o">:=</span> <span class="n">nat</span><span class="bp">.</span><span class="n">zero</span>

<span class="kn">notation</span> <span class="bp">`</span><span class="err">☺</span><span class="bp">`</span> <span class="o">:=</span> <span class="n">foo</span><span class="bp">.</span><span class="n">munge</span>

<span class="n">def</span> <span class="n">bar1</span> <span class="o">:=</span> <span class="err">☹</span> <span class="c1">-- unknown identifier `foo.munge`</span>
<span class="n">def</span> <span class="n">bar2</span> <span class="o">:=</span> <span class="err">☺</span>
</code></pre></div>



<a name="195942635"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195942635" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195942635">(May 01 2020 at 09:00)</a>:</h4>
<p><span class="user-mention silent" data-user-id="238446">Anne Baanen</span> <a href="#narrow/stream/113488-general/topic/big.20ops/near/195941698" title="#narrow/stream/113488-general/topic/big.20ops/near/195941698">said</a>:</p>
<blockquote>
<p>The explanation, as far as I understand it: when deciding how to pretty-print an expression, Lean looks up the notations associated to the head of the expression (e.g. <code>finset.sum</code>). It tries them one by one, until it finds a notation that matches the expression, then uses that to pretty-print. The order in which they are tried is the order in which they are stored in the environment structure, which in this case is the order in which they are defined. Apparently the priority information is thrown away (typically it would be highest-priority first, then by order of definition). This is why the order matters.</p>
</blockquote>
<p>This is very helpful, thanks. It explains why what I suggested at <a href="#narrow/stream/113488-general/topic/Show.20the.20objects.20for.20an.20equality.20of.20morphisms/near/194957595" title="#narrow/stream/113488-general/topic/Show.20the.20objects.20for.20an.20equality.20of.20morphisms/near/194957595">https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Show.20the.20objects.20for.20an.20equality.20of.20morphisms/near/194957595</a> did not work.</p>



<a name="195942696"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195942696" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195942696">(May 01 2020 at 09:02)</a>:</h4>
<p>I guess I was mixing up the method for resolving an overloaded notation (two different meanings for <code>a # b</code>) with the method for choosing a notation for the pretty-printer to display (two different notations for <code>nat.add a b</code>).</p>



<a name="195942880"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195942880" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195942880">(May 01 2020 at 09:04)</a>:</h4>
<p>We still need <code>tikzcd</code> integration into the Lean tactic state</p>



<a name="195942947"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195942947" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195942947">(May 01 2020 at 09:05)</a>:</h4>
<p>How hard do you think it would be to use priority or at least prefer local notation over global notation in the pretty printer?</p>



<a name="195943105"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195943105" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195943105">(May 01 2020 at 09:07)</a>:</h4>
<p>I think it shouldn't be too hard, since we already have a priority and a priority map</p>



<a name="195943285"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195943285" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195943285">(May 01 2020 at 09:10)</a>:</h4>
<p>Looks like the code was written before priorities were available, so it seems like not a deliberate decision to leave out priorities here</p>



<a name="195945519"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195945519" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195945519">(May 01 2020 at 09:46)</a>:</h4>
<p>Small complication: looks like priority for <code>notation_entry</code> is always set to a <code>#define</code>d value of 1000</p>



<a name="195949192"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195949192" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195949192">(May 01 2020 at 10:41)</a>:</h4>
<p>It turns out that <code>@[priority]</code> and <code>set_option default_priority</code> don't interact with <code>notation</code>, but <code>notation [priority 1]</code> works as expected. PR made: <a href="https://github.com/leanprover-community/lean/pull/207" title="https://github.com/leanprover-community/lean/pull/207">https://github.com/leanprover-community/lean/pull/207</a></p>



<a name="195950458"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195950458" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195950458">(May 01 2020 at 10:58)</a>:</h4>
<p>Cool. Thanks!</p>



<a name="195950565"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195950565" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195950565">(May 01 2020 at 11:00)</a>:</h4>
<p><span class="user-mention" data-user-id="238446">@Anne Baanen</span> Does this also fix the problem that I currently need to write</p>
<div class="codehilite"><pre><span></span><code><span class="o">(</span><span class="err">∏</span> <span class="n">x</span> <span class="k">in</span> <span class="n">s</span><span class="o">,</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="bp">=</span> <span class="bp">...</span>
</code></pre></div>


<p>because otherwise it gets parsed as</p>
<div class="codehilite"><pre><span></span><code><span class="err">∏</span> <span class="n">x</span> <span class="k">in</span> <span class="n">s</span><span class="o">,</span> <span class="o">(</span><span class="n">f</span> <span class="n">x</span> <span class="bp">=</span> <span class="bp">...</span><span class="o">)</span>
</code></pre></div>



<a name="195950635"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195950635" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195950635">(May 01 2020 at 11:01)</a>:</h4>
<p>This use of <code>in</code> in notation hurts my brain. I noticed it in some filter stuff too.</p>



<a name="195950697"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195950697" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195950697">(May 01 2020 at 11:02)</a>:</h4>
<p>I always expect <code>in</code> to be a keyword...</p>



<a name="195950760"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195950760" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195950760">(May 01 2020 at 11:03)</a>:</h4>
<p>Maybe I can use <code>\mem</code>. Let me try.</p>



<a name="195950840"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195950840" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195950840">(May 01 2020 at 11:04)</a>:</h4>
<p>Nope... that doesn't work.</p>



<a name="195950856"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195950856" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195950856">(May 01 2020 at 11:05)</a>:</h4>
<p>I guess <code>binders</code> has special support for <code>\in</code> and doesn't want you to mess around with it.</p>



<a name="195950878"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195950878" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195950878">(May 01 2020 at 11:05)</a>:</h4>
<p><span class="user-mention" data-user-id="110032">@Reid Barton</span> Do you have another suggestion?</p>



<a name="195950887"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195950887" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195950887">(May 01 2020 at 11:05)</a>:</h4>
<p>I don't think <code>binders</code> has <em>special</em> support for <code>\in</code> per se</p>



<a name="195950948"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195950948" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195950948">(May 01 2020 at 11:06)</a>:</h4>
<p>Maybe I can just get used to <code>in</code>.</p>



<a name="195950983"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195950983" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195950983">(May 01 2020 at 11:06)</a>:</h4>
<p>The change shouldn't affect the parser, (un)fortunately.</p>



<a name="195951126"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195951126" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195951126">(May 01 2020 at 11:09)</a>:</h4>
<p>Oh maybe it wasn't filters actually. There is <code>in</code> in the snippet from the perfectoid space project in Kevin's paper and I can't parse it.</p>



<a name="195951250"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195951250" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195951250">(May 01 2020 at 11:11)</a>:</h4>
<p>They are also in filters</p>



<a name="195951262"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195951262" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195951262">(May 01 2020 at 11:11)</a>:</h4>
<p>In the eventually and frequently notations</p>



<a name="195951322"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195951322" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195951322">(May 01 2020 at 11:12)</a>:</h4>
<p>BTW I think I saw <code>let ... in</code> is no longer the syntax in Lean 4 anyways</p>



<a name="195955802"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195955802" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195955802">(May 01 2020 at 12:25)</a>:</h4>
<p>I wonder why in lean-homotopy-theory I get nice <code>∘</code> notation for my morphism composition...</p>



<a name="195955852"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195955852" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195955852">(May 01 2020 at 12:26)</a>:</h4>
<p>I have <code>local notation f ` ∘ `:80 g:80 := g ≫ f</code>, and that is enough to make it work fine</p>



<a name="195957687"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195957687" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195957687">(May 01 2020 at 12:52)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib/issues/2582" title="https://github.com/leanprover-community/mathlib/issues/2582">#2582</a> introduces the notation and uses it everywhere in <code>algebra/big_operators</code>.</p>



<a name="195957703"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195957703" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195957703">(May 01 2020 at 12:52)</a>:</h4>
<p>I haven't gone through all of mathlib. But I hope we can transition organically.</p>



<a name="195958010"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195958010" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195958010">(May 01 2020 at 12:57)</a>:</h4>
<p>But let's first see whether CI likes this</p>



<a name="195986970"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195986970" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195986970">(May 01 2020 at 17:35)</a>:</h4>
<p>We need to decide what the precendence of big ops should be. I've found some discussion over here: <a href="https://math.stackexchange.com/q/185538/30839" title="https://math.stackexchange.com/q/185538/30839">https://math.stackexchange.com/q/185538/30839</a><br>
Also see <a href="https://github.com/leanprover-community/mathlib/pull/2582#discussion_r418569631" title="https://github.com/leanprover-community/mathlib/pull/2582#discussion_r418569631">https://github.com/leanprover-community/mathlib/pull/2582#discussion_r418569631</a> for the discussion that has been going on at github.<br>
Does anyone have strong opinions on how formulas should be parsed?</p>



<a name="195987925"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195987925" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195987925">(May 01 2020 at 17:42)</a>:</h4>
<p><span class="user-mention" data-user-id="110043">@Gabriel Ebner</span> suggests: <em>I think we need to use 64 and 69 instead, then the following works as expected:</em></p>
<div class="codehilite"><pre><span></span><code><span class="err">∑</span> <span class="n">x</span><span class="o">,</span> <span class="n">x</span> <span class="bp">+</span> <span class="n">x</span>  <span class="bp">=</span>  <span class="err">∑</span> <span class="n">x</span><span class="o">,</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="n">x</span><span class="o">)</span>
<span class="err">∑</span> <span class="n">x</span><span class="o">,</span> <span class="n">x</span> <span class="bp">-</span> <span class="n">x</span>  <span class="bp">=</span>  <span class="err">∑</span> <span class="n">x</span><span class="o">,</span> <span class="o">(</span><span class="n">x</span> <span class="bp">-</span> <span class="n">x</span><span class="o">)</span>
<span class="err">∏</span> <span class="n">x</span><span class="o">,</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">x</span>  <span class="bp">=</span>  <span class="err">∏</span> <span class="n">x</span><span class="o">,</span> <span class="o">(</span><span class="n">x</span> <span class="bp">*</span> <span class="n">x</span><span class="o">)</span>
<span class="err">∏</span> <span class="n">x</span><span class="o">,</span> <span class="n">x</span> <span class="bp">+</span> <span class="n">x</span>  <span class="bp">=</span>  <span class="o">(</span><span class="err">∏</span> <span class="n">x</span><span class="o">,</span> <span class="n">x</span><span class="o">)</span> <span class="bp">+</span> <span class="n">x</span>
</code></pre></div>


<p>What do others think? Personally I dislike the last example.</p>



<a name="195988174"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195988174" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195988174">(May 01 2020 at 17:44)</a>:</h4>
<p>I think the question is not "how would a mathematician interpret these" (for which the answer is known to be "different mathematicians will interpret them in different ways") but "what is the convention we should use in order to minimise the number of brackets in mathlib", so that those who want to golf can golf.</p>



<a name="195988181"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195988181" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195988181">(May 01 2020 at 17:44)</a>:</h4>
<p>The <a href="http://math.sx" title="http://math.sx">math.sx</a> page linked to above gives the following example</p>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><munder><mo>∑</mo><mrow><mi>k</mi><mo>∈</mo><mi>K</mi></mrow></munder><mrow><mo fence="true">(</mo><msub><mi>a</mi><mi>k</mi></msub><mo>+</mo><msub><mi>b</mi><mi>k</mi></msub><mo fence="true">)</mo></mrow><mo>=</mo><munder><mo>∑</mo><mrow><mi>k</mi><mo>∈</mo><mi>K</mi></mrow></munder><msub><mi>a</mi><mi>k</mi></msub><mo>+</mo><munder><mo>∑</mo><mrow><mi>k</mi><mo>∈</mo><mi>K</mi></mrow></munder><msub><mi>b</mi><mi>k</mi></msub><mo>⟷</mo><munder><mo>∏</mo><mrow><mi>k</mi><mo>∈</mo><mi>K</mi></mrow></munder><msub><mi>a</mi><mi>k</mi></msub><msub><mi>b</mi><mi>k</mi></msub><mo>=</mo><mrow><mo fence="true">(</mo><munder><mo>∏</mo><mrow><mi>k</mi><mo>∈</mo><mi>K</mi></mrow></munder><msub><mi>a</mi><mi>k</mi></msub><mo fence="true">)</mo></mrow><mrow><mo fence="true">(</mo><munder><mo>∏</mo><mrow><mi>k</mi><mo>∈</mo><mi>K</mi></mrow></munder><msub><mi>b</mi><mi>k</mi></msub><mo fence="true">)</mo></mrow><mi mathvariant="normal">.</mi></mrow><annotation encoding="application/x-tex">\sum_{k\in K}\left(a_k+b_k\right) = \sum_{k\in K}a_k+\sum_{k\in K}b_k
\longleftrightarrow
  \prod_{k\in K}a_kb_k = \left(\prod_{k\in K}a_k\right)\left(\prod_{k\in K}b_k\right).</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.3794880000000003em;vertical-align:-1.329483em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.050005em;"><span style="top:-1.8478869999999998em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span><span class="mrel mtight">∈</span><span class="mord mathdefault mtight" style="margin-right:0.07153em;">K</span></span></span></span><span style="top:-3.0500049999999996em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.329483em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;">(</span><span class="mord"><span class="mord mathdefault">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mord mathdefault">b</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;">)</span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.3794880000000003em;vertical-align:-1.329483em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.050005em;"><span style="top:-1.8478869999999998em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span><span class="mrel mtight">∈</span><span class="mord mathdefault mtight" style="margin-right:0.07153em;">K</span></span></span></span><span style="top:-3.0500049999999996em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.329483em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:2.3794880000000003em;vertical-align:-1.329483em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.050005em;"><span style="top:-1.8478869999999998em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span><span class="mrel mtight">∈</span><span class="mord mathdefault mtight" style="margin-right:0.07153em;">K</span></span></span></span><span style="top:-3.0500049999999996em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.329483em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">b</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">⟷</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.3794880000000003em;vertical-align:-1.329483em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.050005em;"><span style="top:-1.8478869999999998em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span><span class="mrel mtight">∈</span><span class="mord mathdefault mtight" style="margin-right:0.07153em;">K</span></span></span></span><span style="top:-3.0500049999999996em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∏</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.329483em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault">b</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:3.0794829999999997em;vertical-align:-1.329483em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size4">(</span></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.050005em;"><span style="top:-1.8478869999999998em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span><span class="mrel mtight">∈</span><span class="mord mathdefault mtight" style="margin-right:0.07153em;">K</span></span></span></span><span style="top:-3.0500049999999996em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∏</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.329483em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size4">)</span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size4">(</span></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.050005em;"><span style="top:-1.8478869999999998em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span><span class="mrel mtight">∈</span><span class="mord mathdefault mtight" style="margin-right:0.07153em;">K</span></span></span></span><span style="top:-3.0500049999999996em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∏</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.329483em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">b</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size4">)</span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">.</span></span></span></span></span></p>
<p>which is quoted from Knuth's <em>Concrete mathematics</em>.</p>



<a name="195988224"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195988224" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195988224">(May 01 2020 at 17:45)</a>:</h4>
<p>That examples shows a lot of "assymetry".</p>



<a name="195988491"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195988491" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195988491">(May 01 2020 at 17:47)</a>:</h4>
<p>The Lean conventions for \forall being super-greedy don't correspond with the way I use it in my undergraduate lectures, but I am happy to put extra brackets in. I don't even know which binds more out of \or and \and, I am just happy to put the brackets in to make my intentions clear. In short I'm arguing that this is not a question about the "correct" mathematical convention, it's about which convention will minimise the total number of brackets in mathlib.</p>



<a name="195988498"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195988498" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195988498">(May 01 2020 at 17:47)</a>:</h4>
<p>It reminds me very much of the question whether <code>∀ x, p x → q</code> should be <code>(∀ x, p x) → q</code> or <code>∀ x, (p x → q)</code>.  I agree with Kevin, there are probably many right answers to this question.</p>



<a name="195989314"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195989314" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195989314">(May 01 2020 at 17:55)</a>:</h4>
<p>Ok, I've reverted to 64/69</p>



<a name="195992215"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195992215" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195992215">(May 01 2020 at 18:20)</a>:</h4>
<p>The example you showed seems to suggest they should both be 69.</p>



<a name="195992236"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195992236" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195992236">(May 01 2020 at 18:20)</a>:</h4>
<p>More importantly, do they bind tighter than <code>=</code>?</p>



<a name="195992362"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195992362" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195992362">(May 01 2020 at 18:21)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110032">Reid Barton</span> <a href="#narrow/stream/113488-general/topic/big.20ops/near/195992236" title="#narrow/stream/113488-general/topic/big.20ops/near/195992236">said</a>:</p>
<blockquote>
<p>More importantly, do they bind tighter than <code>=</code>?</p>
</blockquote>
<p>Yup. That's fixed (-;<br>
Initially they didn't, which was really annoying.</p>



<a name="195993376"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195993376" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195993376">(May 01 2020 at 18:31)</a>:</h4>
<p>All example usages I can find suggest that both ∑ and ∏ bind more loosely than * but tighter than +, although I didn't find many relevant examples of products.</p>



<a name="195993759"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195993759" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195993759">(May 01 2020 at 18:35)</a>:</h4>
<p>Well... we can still change it (-;<br>
I'm fine with giving both <code>67</code> or <code>68</code>.</p>



<a name="195998851"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195998851" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195998851">(May 01 2020 at 19:21)</a>:</h4>
<p>What do people think of making both operators have level <code>67</code>? If you like that idea, vote on this message with <span aria-label="thumbs up" class="emoji emoji-1f44d" role="img" title="thumbs up">:thumbs_up:</span> <br>
If you want to keep it the way it is (which means <code>64</code>/<code>69</code>), vote with <span aria-label="stop" class="emoji emoji-1f91a" role="img" title="stop">:stop:</span></p>



<a name="195999477"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195999477" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195999477">(May 01 2020 at 19:27)</a>:</h4>
<p>Can you try both, count the total number of necessary brackets in mathlib for each choice, and report back?</p>



<a name="195999514"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195999514" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195999514">(May 01 2020 at 19:27)</a>:</h4>
<p>Hint: write a bracket linter first</p>



<a name="195999916"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/195999916" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#195999916">(May 01 2020 at 19:31)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110038">Kevin Buzzard</span> <a href="#narrow/stream/113488-general/topic/big.20ops/near/195999477" title="#narrow/stream/113488-general/topic/big.20ops/near/195999477">said</a>:</p>
<blockquote>
<p>Can you try both, count the total number of necessary brackets in mathlib for each choice, and report back?</p>
</blockquote>
<p>Lol... I would rather not do that. It's already time consuming enough (-;</p>



<a name="196000738"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/196000738" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#196000738">(May 01 2020 at 19:38)</a>:</h4>
<p>You posted what 64,69 did -- what does 67,67 do?</p>



<a name="196000817"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/196000817" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#196000817">(May 01 2020 at 19:39)</a>:</h4>
<p>It should accomplish something like</p>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><munder><mo>∑</mo><mrow><mi>k</mi><mo>∈</mo><mi>K</mi></mrow></munder><mrow><mo fence="true">(</mo><msub><mi>a</mi><mi>k</mi></msub><mo>+</mo><msub><mi>b</mi><mi>k</mi></msub><mo fence="true">)</mo></mrow><mo>=</mo><munder><mo>∑</mo><mrow><mi>k</mi><mo>∈</mo><mi>K</mi></mrow></munder><msub><mi>a</mi><mi>k</mi></msub><mo>+</mo><munder><mo>∑</mo><mrow><mi>k</mi><mo>∈</mo><mi>K</mi></mrow></munder><msub><mi>b</mi><mi>k</mi></msub><mo>⟷</mo><munder><mo>∏</mo><mrow><mi>k</mi><mo>∈</mo><mi>K</mi></mrow></munder><msub><mi>a</mi><mi>k</mi></msub><msub><mi>b</mi><mi>k</mi></msub><mo>=</mo><mrow><mo fence="true">(</mo><munder><mo>∏</mo><mrow><mi>k</mi><mo>∈</mo><mi>K</mi></mrow></munder><msub><mi>a</mi><mi>k</mi></msub><mo fence="true">)</mo></mrow><mrow><mo fence="true">(</mo><munder><mo>∏</mo><mrow><mi>k</mi><mo>∈</mo><mi>K</mi></mrow></munder><msub><mi>b</mi><mi>k</mi></msub><mo fence="true">)</mo></mrow><mi mathvariant="normal">.</mi></mrow><annotation encoding="application/x-tex">\sum_{k\in K}\left(a_k+b_k\right) = \sum_{k\in K}a_k+\sum_{k\in K}b_k
\longleftrightarrow
  \prod_{k\in K}a_kb_k = \left(\prod_{k\in K}a_k\right)\left(\prod_{k\in K}b_k\right).</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.3794880000000003em;vertical-align:-1.329483em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.050005em;"><span style="top:-1.8478869999999998em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span><span class="mrel mtight">∈</span><span class="mord mathdefault mtight" style="margin-right:0.07153em;">K</span></span></span></span><span style="top:-3.0500049999999996em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.329483em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;">(</span><span class="mord"><span class="mord mathdefault">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mord mathdefault">b</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;">)</span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.3794880000000003em;vertical-align:-1.329483em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.050005em;"><span style="top:-1.8478869999999998em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span><span class="mrel mtight">∈</span><span class="mord mathdefault mtight" style="margin-right:0.07153em;">K</span></span></span></span><span style="top:-3.0500049999999996em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.329483em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:2.3794880000000003em;vertical-align:-1.329483em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.050005em;"><span style="top:-1.8478869999999998em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span><span class="mrel mtight">∈</span><span class="mord mathdefault mtight" style="margin-right:0.07153em;">K</span></span></span></span><span style="top:-3.0500049999999996em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.329483em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">b</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">⟷</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.3794880000000003em;vertical-align:-1.329483em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.050005em;"><span style="top:-1.8478869999999998em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span><span class="mrel mtight">∈</span><span class="mord mathdefault mtight" style="margin-right:0.07153em;">K</span></span></span></span><span style="top:-3.0500049999999996em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∏</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.329483em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault">b</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:3.0794829999999997em;vertical-align:-1.329483em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size4">(</span></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.050005em;"><span style="top:-1.8478869999999998em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span><span class="mrel mtight">∈</span><span class="mord mathdefault mtight" style="margin-right:0.07153em;">K</span></span></span></span><span style="top:-3.0500049999999996em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∏</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.329483em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size4">)</span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size4">(</span></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.050005em;"><span style="top:-1.8478869999999998em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span><span class="mrel mtight">∈</span><span class="mord mathdefault mtight" style="margin-right:0.07153em;">K</span></span></span></span><span style="top:-3.0500049999999996em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∏</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.329483em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">b</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size4">)</span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">.</span></span></span></span></span></p>
<p>which is quoted from Knuth's <em>Concrete mathematics</em>.</p>



<a name="196001191"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/196001191" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#196001191">(May 01 2020 at 19:42)</a>:</h4>
<p>Well the mathematician in me votes for this one, but the computer scientist is abstaining</p>



<a name="196006127"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/196006127" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#196006127">(May 01 2020 at 20:29)</a>:</h4>
<p>I voted for 67,67 but I don't actually know what the numbers mean.</p>



<a name="196006289"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/196006289" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#196006289">(May 01 2020 at 20:31)</a>:</h4>
<p>Oh, now I see the end of the stackexchange post you linked to says the same thing I said, I think.</p>



<a name="196006621"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/196006621" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#196006621">(May 01 2020 at 20:34)</a>:</h4>
<p><code>+ : 65</code>, <code>* : 70</code>. And you wanted something in between... Unfortunately, <code>rat</code> is not defined in core, so we can't go for the actual <code>(65 + 70)/2 : rat</code> as precedence. Hence I suggested the <code>nat</code> version of that fraction <span aria-label="oops" class="emoji emoji-1f643" role="img" title="oops">:oops:</span></p>



<a name="196006770"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/196006770" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#196006770">(May 01 2020 at 20:35)</a>:</h4>
<p>and <code>-</code>, <code>/</code> are the same as <code>+</code>, <code>*</code> respectively?</p>



<a name="196006861"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/196006861" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#196006861">(May 01 2020 at 20:36)</a>:</h4>
<p>As far as I know, yes</p>



<a name="196006887"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/196006887" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#196006887">(May 01 2020 at 20:36)</a>:</h4>
<p>I think they have to be actually.</p>



<a name="196012044"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/196012044" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#196012044">(May 01 2020 at 21:27)</a>:</h4>
<div class="codehilite"><pre><span></span><code><span class="n">reserve</span> <span class="kn">infixl</span> <span class="bp">`</span> <span class="bp">+</span> <span class="bp">`</span><span class="o">:</span><span class="mi">65</span>
<span class="n">reserve</span> <span class="kn">infixl</span> <span class="bp">`</span> <span class="bp">-</span> <span class="bp">`</span><span class="o">:</span><span class="mi">65</span>
<span class="n">reserve</span> <span class="kn">infixl</span> <span class="bp">`</span> <span class="bp">*</span> <span class="bp">`</span><span class="o">:</span><span class="mi">70</span>
<span class="n">reserve</span> <span class="kn">infixl</span> <span class="bp">`</span> <span class="bp">/</span> <span class="bp">`</span><span class="o">:</span><span class="mi">70</span>
<span class="n">reserve</span> <span class="kn">infixl</span> <span class="bp">`</span> <span class="err">%</span> <span class="bp">`</span><span class="o">:</span><span class="mi">70</span>
<span class="n">reserve</span> <span class="kn">prefix</span> <span class="bp">`-`</span><span class="o">:</span><span class="mi">100</span>
<span class="n">reserve</span> <span class="kn">infixr</span> <span class="bp">`</span> <span class="bp">^</span> <span class="bp">`</span><span class="o">:</span><span class="mi">80</span>
</code></pre></div>



<a name="196012199"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/196012199" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#196012199">(May 01 2020 at 21:29)</a>:</h4>
<p>Sorry for offtopic: what is the precedence of <code>notation f</code>^[<code>n</code>]<code> := iterate f n</code>? It eats <code>=</code> on the left.</p>



<a name="196034347"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/196034347" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#196034347">(May 02 2020 at 05:14)</a>:</h4>
<p><span class="user-mention" data-user-id="214703">@Yury G. Kudryashov</span> It probably defaults to <code>0</code>. Seems like we need to change core to fix that...</p>



<a name="196041777"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/196041777" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#196041777">(May 02 2020 at 09:00)</a>:</h4>
<p>I have now changed to <code>67/67</code> and added a bit of explanation about it (plus an example of how to parenthesise...)</p>



<a name="196052583"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/big%20ops/near/196052583" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/big.20ops.html#196052583">(May 02 2020 at 13:51)</a>:</h4>
<p>And... the linter is happy.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>