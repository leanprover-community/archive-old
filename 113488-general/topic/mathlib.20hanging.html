---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/mathlib.20hanging.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mathlib.20hanging.html">mathlib hanging</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="250246945"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20hanging/near/250246945" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Christopher Upshaw <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mathlib.20hanging.html#250246945">(Aug 22 2021 at 01:09)</a>:</h4>
<p>So starting yesterday afternoon, whenever I try to import a file from mathlib the lean server just hangs. Keeping the last messages from before I typed the last letter of the path.</p>
<p>For example if I type "import tactic" I get "invalid import: tacti" with the server apparently not doing anything.<br>
I've tried letting it sit for over 10 minutes, and if I restart lean sometimes the line counter at the bottom of the screen goes up, but even when that number goes back to 1 I don't get any messages from lean until I erase the import line.</p>
<p>Anyone have any idea what's going on?</p>



<a name="250248046"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20hanging/near/250248046" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mathlib.20hanging.html#250248046">(Aug 22 2021 at 01:39)</a>:</h4>
<p>Welcome to the orange bar hell! This is pretty common for the Lean server to get hanged up like that. The solution is to get yourself a cache (the <code>.olean</code> files) which will set the server up straight again. You do that using <code>leanproject get-cache</code> (with an optional <code>--rev name_of_the_branch</code>) and restart the server.</p>



<a name="250248107"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20hanging/near/250248107" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mathlib.20hanging.html#250248107">(Aug 22 2021 at 01:40)</a>:</h4>
<p>For some reason, this happens pretty often when you write imports. I'd suggest writing the new import commented out, and then uncomment it. That'll avoid the server seeing the in-between states.</p>



<a name="250396637"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20hanging/near/250396637" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Christopher Upshaw <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mathlib.20hanging.html#250396637">(Aug 23 2021 at 19:03)</a>:</h4>
<p>Hmm I did <code>leanproject get-cache</code> and its still hanging instead of importing linear_algebra.clifford_algebra.default. This used to work.</p>



<a name="250398582"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20hanging/near/250398582" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Christopher Upshaw <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mathlib.20hanging.html#250398582">(Aug 23 2021 at 19:17)</a>:</h4>
<p>Huh, it looks like my leanpkg.toml got corrupted in some sort of very subtle way? So that leanproject was ignoring the mathlib dependency? Or something? Weird.</p>



<a name="250403120"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20hanging/near/250403120" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mathlib.20hanging.html#250403120">(Aug 23 2021 at 19:56)</a>:</h4>
<p>I'm pleased to hear someone else is looking at the clifford algebra stuff!</p>



<a name="250403255"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20hanging/near/250403255" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mathlib.20hanging.html#250403255">(Aug 23 2021 at 19:57)</a>:</h4>
<p>Are you working in mathlib itself or a project depending on mathlib?</p>



<a name="250405110"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20hanging/near/250405110" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mathlib.20hanging.html#250405110">(Aug 23 2021 at 20:13)</a>:</h4>
<p>Are you working in mathlib itself or a project depending on mathlib?</p>



<a name="250562905"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20hanging/near/250562905" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Christopher Upshaw <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mathlib.20hanging.html#250562905">(Aug 24 2021 at 23:23)</a>:</h4>
<p>A project depending on mathlib.</p>
<p>Now it at least doesn't hang, but instead I get "invalid import: data.vector.basic<br>
excessive memory consumption detected at 'expression traversal' (potential solution: increase memory consumption threshold)" Which is weird. This was working great until last week.</p>



<a name="250565169"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20hanging/near/250565169" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mathlib.20hanging.html#250565169">(Aug 24 2021 at 23:53)</a>:</h4>
<p>So remove the directory called <code>_target</code> and then type <code>leanproject up</code></p>



<a name="250565231"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20hanging/near/250565231" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mathlib.20hanging.html#250565231">(Aug 24 2021 at 23:54)</a>:</h4>
<p>Or maybe <code>leanproject get-m</code> will help</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>