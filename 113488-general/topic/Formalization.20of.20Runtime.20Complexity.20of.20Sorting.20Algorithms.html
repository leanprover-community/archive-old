---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/Formalization.20of.20Runtime.20Complexity.20of.20Sorting.20Algorithms.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Formalization.20of.20Runtime.20Complexity.20of.20Sorting.20Algorithms.html">Formalization of Runtime Complexity of Sorting Algorithms</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="284184450"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Formalization%20of%20Runtime%20Complexity%20of%20Sorting%20Algorithms/near/284184450" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Tomaz Gomes Mascarenhas <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Formalization.20of.20Runtime.20Complexity.20of.20Sorting.20Algorithms.html#284184450">(May 27 2022 at 21:03)</a>:</h4>
<p>Hi there!<br>
About <a href="#narrow/stream/113488-general/topic/BSc.20Final.20Project/near/220647062">this</a> message,<br>
I've completed the formalization last year, and now I'm adjusting everything according to mathlib's guide for contribution. It's implemented <a href="https://github.com/tomaz1502/runtimeformalization">in this repository</a>. I would really appreciate if someone could take a look and give me feedback before I make a PR. I know that specially the proof about merge sort is quite large and may be hard to get, so feel free to ask any questions about it. This is my first contribution to mathlib, and I don't have an extensive background in Lean, so probably there is some code smells that I'm not aware of.</p>
<p>The proofs are all based on a new version of Insertion Sort and Merge Sort that I've defined, that counts the number of operations done besides sorting the input list. In the formalization, I've included proofs that they produce the same output as their original counterparts, defined in data/list/sort.lean. Everything is documented on my bachelor thesis (Report.pdf in the repository). Unfortunately, there is only the version in brazilian portuguese :/.</p>



<a name="284194357"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Formalization%20of%20Runtime%20Complexity%20of%20Sorting%20Algorithms/near/284194357" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bhavik Mehta <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Formalization.20of.20Runtime.20Complexity.20of.20Sorting.20Algorithms.html#284194357">(May 27 2022 at 23:07)</a>:</h4>
<p>I'm taking a quick look at your insertion sort, and I don't completely understand this part:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="k">#eval</span> <span class="n">ordered_insert</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">m</span> <span class="n">n</span> <span class="o">:</span> <span class="n">ℕ</span> <span class="o">,</span> <span class="n">m</span> <span class="bp">≤</span> <span class="n">n</span><span class="o">)</span> <span class="mi">2</span> <span class="o">[</span><span class="mi">5</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="mi">4</span><span class="o">]</span>
<span class="c1">-- ([2, 5, 3, 1, 4], 0)</span>
</code></pre></div>
<p>I would expect this to have one comparison: checking that 2 &lt;= 5, and looking at the definition of <code>ordered_insert</code> it seems that it should be 1 as well - is the comment just outdated?</p>



<a name="284194384"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Formalization%20of%20Runtime%20Complexity%20of%20Sorting%20Algorithms/near/284194384" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bhavik Mehta <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Formalization.20of.20Runtime.20Complexity.20of.20Sorting.20Algorithms.html#284194384">(May 27 2022 at 23:07)</a>:</h4>
<p>As an aside, you can also write this as <code>#eval ordered_insert (≤) 2 [5, 3, 1, 4]</code></p>



<a name="284194835"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Formalization%20of%20Runtime%20Complexity%20of%20Sorting%20Algorithms/near/284194835" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Formalization.20of.20Runtime.20Complexity.20of.20Sorting.20Algorithms.html#284194835">(May 27 2022 at 23:14)</a>:</h4>
<p>I just spun up a gitpod instance to try it out (<a href="https://github.com/tomaz1502/RunTimeFormalization/pull/1">https://github.com/tomaz1502/RunTimeFormalization/pull/1</a>): yes, the comment is just outdated, it gives what you expect</p>



<a name="284194945"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Formalization%20of%20Runtime%20Complexity%20of%20Sorting%20Algorithms/near/284194945" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Formalization.20of.20Runtime.20Complexity.20of.20Sorting.20Algorithms.html#284194945">(May 27 2022 at 23:16)</a>:</h4>
<p>One other comment: your <code>log_monotone lemma</code> is exactly <code>@nat.log_monotone 2</code></p>



<a name="284195001"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Formalization%20of%20Runtime%20Complexity%20of%20Sorting%20Algorithms/near/284195001" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Formalization.20of.20Runtime.20Complexity.20of.20Sorting.20Algorithms.html#284195001">(May 27 2022 at 23:17)</a>:</h4>
<p>Generally though it looks very well written!</p>



<a name="284195172"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Formalization%20of%20Runtime%20Complexity%20of%20Sorting%20Algorithms/near/284195172" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Tomaz Gomes Mascarenhas <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Formalization.20of.20Runtime.20Complexity.20of.20Sorting.20Algorithms.html#284195172">(May 27 2022 at 23:20)</a>:</h4>
<p><span class="user-mention silent" data-user-id="246273">Bhavik Mehta</span> <a href="#narrow/stream/113488-general/topic/Formalization.20of.20Runtime.20Complexity.20of.20Sorting.20Algorithms/near/284194357">said</a>:</p>
<blockquote>
<p>I'm taking a quick look at your insertion sort, and I don't completely understand this part:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="k">#eval</span> <span class="n">ordered_insert</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">m</span> <span class="n">n</span> <span class="o">:</span> <span class="n">ℕ</span> <span class="o">,</span> <span class="n">m</span> <span class="bp">≤</span> <span class="n">n</span><span class="o">)</span> <span class="mi">2</span> <span class="o">[</span><span class="mi">5</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="mi">4</span><span class="o">]</span>
<span class="c1">-- ([2, 5, 3, 1, 4], 0)</span>
</code></pre></div>
<p>I would expect this to have one comparison: checking that 2 &lt;= 5, and looking at the definition of <code>ordered_insert</code> it seems that it should be 1 as well - is the comment just outdated?</p>
</blockquote>
<p>yes, the commentary is outdated, thanks for pointing that out</p>



<a name="284195266"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Formalization%20of%20Runtime%20Complexity%20of%20Sorting%20Algorithms/near/284195266" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Formalization.20of.20Runtime.20Complexity.20of.20Sorting.20Algorithms.html#284195266">(May 27 2022 at 23:22)</a>:</h4>
<p>Here's a shorter proof of your <code>div_two</code> as well:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">div_two</span> <span class="o">(</span><span class="n">b</span> <span class="n">a</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="mi">2</span> <span class="bp">*</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span> <span class="bp">/</span> <span class="mi">2</span> <span class="o">:=</span>
<span class="kd">by</span> <span class="n">simp_rw</span> <span class="o">[</span><span class="n">nat.le_div_iff_mul_le</span> <span class="n">_</span> <span class="n">_</span> <span class="n">zero_lt_two</span><span class="o">,</span> <span class="n">mul_comm</span><span class="o">,</span> <span class="n">imp_self</span><span class="o">]</span>
</code></pre></div>



<a name="284195293"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Formalization%20of%20Runtime%20Complexity%20of%20Sorting%20Algorithms/near/284195293" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Formalization.20of.20Runtime.20Complexity.20of.20Sorting.20Algorithms.html#284195293">(May 27 2022 at 23:22)</a>:</h4>
<p>(I found the main lemma by typing <code>nat.le_div</code> and hitting ctrl+space to get suggestions)</p>



<a name="284195629"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Formalization%20of%20Runtime%20Complexity%20of%20Sorting%20Algorithms/near/284195629" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Tomaz Gomes Mascarenhas <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Formalization.20of.20Runtime.20Complexity.20of.20Sorting.20Algorithms.html#284195629">(May 27 2022 at 23:28)</a>:</h4>
<p><span class="user-mention silent" data-user-id="310045">Eric Wieser</span> <a href="#narrow/stream/113488-general/topic/Formalization.20of.20Runtime.20Complexity.20of.20Sorting.20Algorithms/near/284194945">said</a>:</p>
<blockquote>
<p>One other comment: your <code>log_monotone lemma</code> is exactly <code>@nat.log_monotone 2</code></p>
</blockquote>
<p>oh! Maybe it was added recently? I remember not being able to find it about a year ago, when I was proving this.. anyway, thanks a lot! I will remove it</p>



<a name="284195928"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Formalization%20of%20Runtime%20Complexity%20of%20Sorting%20Algorithms/near/284195928" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Formalization.20of.20Runtime.20Complexity.20of.20Sorting.20Algorithms.html#284195928">(May 27 2022 at 23:33)</a>:</h4>
<p>I'm surprised that I couldn't find the <code>nat.log b b = 1</code> lemma (which you have for <code>b=2</code>) in mathlib</p>



<a name="284209082"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Formalization%20of%20Runtime%20Complexity%20of%20Sorting%20Algorithms/near/284209082" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bhavik Mehta <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Formalization.20of.20Runtime.20Complexity.20of.20Sorting.20Algorithms.html#284209082">(May 28 2022 at 04:19)</a>:</h4>
<p><span class="user-mention silent" data-user-id="310045">Eric Wieser</span> <a href="#narrow/stream/113488-general/topic/Formalization.20of.20Runtime.20Complexity.20of.20Sorting.20Algorithms/near/284195928">said</a>:</p>
<blockquote>
<p>I'm surprised that I couldn't find the <code>nat.log b b = 1</code> lemma (which you have for <code>b=2</code>) in mathlib</p>
</blockquote>
<p>It should be a very special case of <a href="https://leanprover-community.github.io/mathlib_docs/find/nat.log_eq_one_iff">docs#nat.log_eq_one_iff</a></p>



<a name="284209173"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Formalization%20of%20Runtime%20Complexity%20of%20Sorting%20Algorithms/near/284209173" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bhavik Mehta <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Formalization.20of.20Runtime.20Complexity.20of.20Sorting.20Algorithms.html#284209173">(May 28 2022 at 04:21)</a>:</h4>
<p>Alternatively, of <a href="https://leanprover-community.github.io/mathlib_docs/find/nat.log_pow">docs#nat.log_pow</a></p>



<a name="284215158"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Formalization%20of%20Runtime%20Complexity%20of%20Sorting%20Algorithms/near/284215158" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Formalization.20of.20Runtime.20Complexity.20of.20Sorting.20Algorithms.html#284215158">(May 28 2022 at 07:09)</a>:</h4>
<p>I think it's still worth having as a lemma</p>



<a name="284249946"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Formalization%20of%20Runtime%20Complexity%20of%20Sorting%20Algorithms/near/284249946" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Tomaz Gomes Mascarenhas <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Formalization.20of.20Runtime.20Complexity.20of.20Sorting.20Algorithms.html#284249946">(May 28 2022 at 21:47)</a>:</h4>
<p>can someone give me write access to non-master branches of mathlib? So I can push this to the branch and create a PR</p>



<a name="284250664"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Formalization%20of%20Runtime%20Complexity%20of%20Sorting%20Algorithms/near/284250664" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Formalization.20of.20Runtime.20Complexity.20of.20Sorting.20Algorithms.html#284250664">(May 28 2022 at 22:05)</a>:</h4>
<p>Invite sent</p>



<a name="284250746"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Formalization%20of%20Runtime%20Complexity%20of%20Sorting%20Algorithms/near/284250746" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Formalization.20of.20Runtime.20Complexity.20of.20Sorting.20Algorithms.html#284250746">(May 28 2022 at 22:07)</a>:</h4>
<p>It's not immediately clear to me whether this type of formalization is in scope for mathlib, but certainly some of the lemmas you needed along the way will be; and the easiest place to have that discussion will probably be in a PR. Perhaps <span class="user-mention" data-user-id="110049">@Mario Carneiro</span> has some opinion on whether and/or where this would best fit into mathlib</p>



<a name="284250822"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Formalization%20of%20Runtime%20Complexity%20of%20Sorting%20Algorithms/near/284250822" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Formalization.20of.20Runtime.20Complexity.20of.20Sorting.20Algorithms.html#284250822">(May 28 2022 at 22:09)</a>:</h4>
<p>as long as it is written in a way where people can clearly build on it, I don't see why not to put it in mathlib, perhaps somewhere in <code>computability</code> or near the other complexity theory work</p>



<a name="284250883"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Formalization%20of%20Runtime%20Complexity%20of%20Sorting%20Algorithms/near/284250883" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Formalization.20of.20Runtime.20Complexity.20of.20Sorting.20Algorithms.html#284250883">(May 28 2022 at 22:11)</a>:</h4>
<p>I think there are some aspects of the "framework" that need work, for example, is there a principled explanation for where the "ticks" are supposed to go?</p>



<a name="284417132"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Formalization%20of%20Runtime%20Complexity%20of%20Sorting%20Algorithms/near/284417132" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Tomaz Gomes Mascarenhas <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Formalization.20of.20Runtime.20Complexity.20of.20Sorting.20Algorithms.html#284417132">(May 31 2022 at 00:56)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110049">Mario Carneiro</span> <a href="#narrow/stream/113488-general/topic/Formalization.20of.20Runtime.20Complexity.20of.20Sorting.20Algorithms/near/284250883">said</a>:</p>
<blockquote>
<p>I think there are some aspects of the "framework" that need work, for example, is there a principled explanation for where the "ticks" are supposed to go?</p>
</blockquote>
<p>Can you give me a more detailed explanation on what do you mean by "where the ticks are supposed to go"? By "tick" you mean each operation, right? You mean that I should define precisely what is an operation in my framework?</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>