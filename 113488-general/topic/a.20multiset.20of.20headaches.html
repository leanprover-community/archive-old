---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/a.20multiset.20of.20headaches.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/a.20multiset.20of.20headaches.html">a multiset of headaches</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="201016629"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20multiset%20of%20headaches/near/201016629" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/a.20multiset.20of.20headaches.html#201016629">(Jun 16 2020 at 13:44)</a>:</h4>
<p>I've never really used multisets before, but how do I prove something like this?</p>
<div class="codehilite"><pre><span></span><code><span class="kn">example</span> <span class="o">{</span><span class="n">σ</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">(</span><span class="n">l</span> <span class="o">:</span> <span class="n">list</span> <span class="n">σ</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">multiset</span><span class="bp">.</span><span class="n">map</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="n">fin</span> <span class="n">l</span><span class="bp">.</span><span class="n">length</span><span class="o">),</span> <span class="n">l</span><span class="bp">.</span><span class="n">nth_le</span> <span class="n">i</span> <span class="n">i</span><span class="bp">.</span><span class="mi">2</span><span class="o">)</span> <span class="n">finset</span><span class="bp">.</span><span class="n">univ</span><span class="bp">.</span><span class="n">val</span> <span class="bp">=</span> <span class="o">(</span><span class="n">l</span> <span class="o">:</span> <span class="n">multiset</span> <span class="n">σ</span><span class="o">)</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">sorry</span>
<span class="kn">end</span>
</code></pre></div>



<a name="201017834"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20multiset%20of%20headaches/near/201017834" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/a.20multiset.20of.20headaches.html#201017834">(Jun 16 2020 at 13:52)</a>:</h4>
<p>what is the use case?</p>



<a name="201017914"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20multiset%20of%20headaches/near/201017914" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/a.20multiset.20of.20headaches.html#201017914">(Jun 16 2020 at 13:53)</a>:</h4>
<p>I think a statement involving list and multiset and finset at the same time wouldn't be too idiomatic</p>



<a name="201019407"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20multiset%20of%20headaches/near/201019407" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/a.20multiset.20of.20headaches.html#201019407">(Jun 16 2020 at 14:03)</a>:</h4>
<p>Can you show that there exists a monomial in 5 variables, of the form <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>X</mi><mn>3</mn></msup><msup><mi>Y</mi><mn>2</mn></msup><mi>Z</mi><msup><mi>W</mi><mn>4</mn></msup><msup><mi>U</mi><mn>3</mn></msup></mrow><annotation encoding="application/x-tex">X^3 Y^2 Z W^4 U^3</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mord mathdefault" style="margin-right:0.07153em;">Z</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">4</span></span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.10903em;">U</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span></span></span></span></span></span></span></span>?</p>



<a name="201019433"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20multiset%20of%20headaches/near/201019433" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/a.20multiset.20of.20headaches.html#201019433">(Jun 16 2020 at 14:03)</a>:</h4>
<p>The 5 variables are indexed by an arbitrary fintype.</p>



<a name="201019498"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20multiset%20of%20headaches/near/201019498" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/a.20multiset.20of.20headaches.html#201019498">(Jun 16 2020 at 14:04)</a>:</h4>
<p>In particular, 5 is actually <code>n : nat</code>, or rather <code>fintype.card \sigma</code>.</p>



<a name="201019629"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20multiset%20of%20headaches/near/201019629" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/a.20multiset.20of.20headaches.html#201019629">(Jun 16 2020 at 14:04)</a>:</h4>
<p>But it's easy to reduce to the case <code>fin n</code>, which is what you see upstairs.</p>



<a name="201019701"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20multiset%20of%20headaches/near/201019701" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/a.20multiset.20of.20headaches.html#201019701">(Jun 16 2020 at 14:05)</a>:</h4>
<p>And <code>l</code> is a list of nats that are the degrees of the variables that I want, so <code>l = [3,2,1,4,3]</code>.</p>



<a name="201019794"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20multiset%20of%20headaches/near/201019794" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/a.20multiset.20of.20headaches.html#201019794">(Jun 16 2020 at 14:06)</a>:</h4>
<p>(But there is no prescribed order on the variables, so any monomial will do, up to symmetry.)</p>



<a name="201020201"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20multiset%20of%20headaches/near/201020201" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/a.20multiset.20of.20headaches.html#201020201">(Jun 16 2020 at 14:08)</a>:</h4>
<ol>
<li>rename <code>multiset.ext</code> to <code>multiset.ext_iff</code></li>
<li>define <code>multiset.ext</code> following the usual rule</li>
<li>mark it with <code>@[ext]</code></li>
<li>prove the lemma alluded to the the doc-string for <code>map</code>, but apparently not actually proved ...?</li>
<li>hope the goal looks better?</li>
</ol>



<a name="201020209"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20multiset%20of%20headaches/near/201020209" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/a.20multiset.20of.20headaches.html#201020209">(Jun 16 2020 at 14:08)</a>:</h4>
<p>(Yuck?)</p>



<a name="201020257"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20multiset%20of%20headaches/near/201020257" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/a.20multiset.20of.20headaches.html#201020257">(Jun 16 2020 at 14:09)</a>:</h4>
<p>(Both your goal, and what I found looking in <code>multiset.lean</code>...)</p>



<a name="201020769"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20multiset%20of%20headaches/near/201020769" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/a.20multiset.20of.20headaches.html#201020769">(Jun 16 2020 at 14:12)</a>:</h4>
<p>Hmmm, I see...</p>



<a name="201021144"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20multiset%20of%20headaches/near/201021144" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Hughes <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/a.20multiset.20of.20headaches.html#201021144">(Jun 16 2020 at 14:15)</a>:</h4>
<div class="codehilite"><pre><span></span><code><span class="bp">@</span><span class="o">[</span><span class="n">simp</span><span class="o">]</span> <span class="kn">lemma</span> <span class="n">list</span><span class="bp">.</span><span class="n">nth_le_cons_cast_succ</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">α</span><span class="o">)</span> <span class="o">(</span><span class="n">l</span> <span class="o">:</span> <span class="n">list</span> <span class="n">α</span><span class="o">)</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="n">fin</span> <span class="n">l</span><span class="bp">.</span><span class="n">length</span><span class="o">)</span> <span class="o">:</span>
  <span class="o">(</span><span class="n">a</span> <span class="bp">::</span> <span class="n">l</span> <span class="o">:</span> <span class="n">list</span> <span class="n">α</span><span class="o">)</span><span class="bp">.</span><span class="n">nth_le</span> <span class="n">i</span><span class="bp">.</span><span class="n">cast_succ</span> <span class="n">i</span><span class="bp">.</span><span class="n">cast_succ</span><span class="bp">.</span><span class="mi">2</span> <span class="bp">=</span> <span class="n">l</span><span class="bp">.</span><span class="n">nth_le</span> <span class="n">i</span> <span class="n">i</span><span class="bp">.</span><span class="mi">2</span> <span class="o">:=</span>
<span class="n">sorry</span>

<span class="bp">@</span><span class="o">[</span><span class="n">simp</span><span class="o">]</span> <span class="kn">lemma</span> <span class="n">list</span><span class="bp">.</span><span class="n">nth_le_cons_length</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">α</span><span class="o">)</span> <span class="o">(</span><span class="n">l</span> <span class="o">:</span> <span class="n">list</span> <span class="n">α</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span><span class="o">):</span>
  <span class="o">(</span><span class="n">a</span> <span class="bp">::</span> <span class="n">l</span> <span class="o">:</span> <span class="n">list</span> <span class="n">α</span><span class="o">)</span><span class="bp">.</span><span class="n">nth_le</span> <span class="n">l</span><span class="bp">.</span><span class="n">length</span> <span class="n">h</span> <span class="bp">=</span> <span class="n">a</span> <span class="o">:=</span>
<span class="n">sorry</span>

<span class="kn">example</span> <span class="o">{</span><span class="n">σ</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">(</span><span class="n">l</span> <span class="o">:</span> <span class="n">list</span> <span class="n">σ</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">multiset</span><span class="bp">.</span><span class="n">map</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="n">fin</span> <span class="n">l</span><span class="bp">.</span><span class="n">length</span><span class="o">),</span> <span class="n">l</span><span class="bp">.</span><span class="n">nth_le</span> <span class="n">i</span> <span class="n">i</span><span class="bp">.</span><span class="mi">2</span><span class="o">)</span> <span class="n">finset</span><span class="bp">.</span><span class="n">univ</span><span class="bp">.</span><span class="n">val</span> <span class="bp">=</span> <span class="o">(</span><span class="n">l</span> <span class="o">:</span> <span class="n">multiset</span> <span class="n">σ</span><span class="o">)</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">induction</span> <span class="n">l</span> <span class="k">with</span> <span class="n">a</span> <span class="n">l</span> <span class="n">ih</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">refl</span> <span class="o">},</span>
  <span class="o">{</span> <span class="k">have</span> <span class="n">h₁</span> <span class="o">:</span> <span class="o">(</span><span class="n">finset</span><span class="bp">.</span><span class="n">image</span> <span class="n">fin</span><span class="bp">.</span><span class="n">cast_succ</span> <span class="o">(</span><span class="bp">@</span><span class="n">finset</span><span class="bp">.</span><span class="n">univ</span> <span class="o">(</span><span class="n">fin</span> <span class="n">l</span><span class="bp">.</span><span class="n">length</span><span class="o">)</span> <span class="bp">_</span><span class="o">))</span><span class="bp">.</span><span class="mi">1</span> <span class="bp">=</span>
        <span class="o">(</span><span class="bp">@</span><span class="n">finset</span><span class="bp">.</span><span class="n">univ</span> <span class="o">(</span><span class="n">fin</span> <span class="n">l</span><span class="bp">.</span><span class="n">length</span><span class="o">)</span> <span class="bp">_</span><span class="o">)</span><span class="bp">.</span><span class="mi">1</span><span class="bp">.</span><span class="n">map</span> <span class="n">fin</span><span class="bp">.</span><span class="n">cast_succ</span><span class="o">,</span>
      <span class="k">from</span> <span class="n">finset</span><span class="bp">.</span><span class="n">image_val_of_inj_on</span> <span class="o">(</span><span class="k">by</span> <span class="n">simp</span><span class="o">),</span>
    <span class="k">have</span> <span class="n">h₂</span> <span class="o">:</span> <span class="n">fin</span><span class="bp">.</span><span class="n">last</span> <span class="n">l</span><span class="bp">.</span><span class="n">length</span> <span class="err">∉</span> <span class="n">finset</span><span class="bp">.</span><span class="n">image</span> <span class="n">fin</span><span class="bp">.</span><span class="n">cast_succ</span> <span class="n">finset</span><span class="bp">.</span><span class="n">univ</span><span class="o">,</span>
    <span class="o">{</span> <span class="n">rw</span> <span class="o">[</span><span class="n">finset</span><span class="bp">.</span><span class="n">mem_image</span><span class="o">],</span> <span class="n">simp</span> <span class="o">[</span><span class="n">fin</span><span class="bp">.</span><span class="n">cast_succ_ne_last</span><span class="o">]</span> <span class="o">},</span>
    <span class="n">rw</span> <span class="o">[</span><span class="n">fin</span><span class="bp">.</span><span class="n">univ_cast_succ</span><span class="o">,</span> <span class="n">finset</span><span class="bp">.</span><span class="n">insert_val</span><span class="o">,</span> <span class="n">multiset</span><span class="bp">.</span><span class="n">ndinsert_of_not_mem</span> <span class="n">h₂</span><span class="o">,</span>
      <span class="n">multiset</span><span class="bp">.</span><span class="n">map_cons</span><span class="o">,</span> <span class="n">h₁</span><span class="o">,</span> <span class="n">multiset</span><span class="bp">.</span><span class="n">map_map</span><span class="o">],</span>
    <span class="n">simp</span> <span class="o">[</span><span class="n">function</span><span class="bp">.</span><span class="n">comp</span><span class="o">,</span> <span class="n">list</span><span class="bp">.</span><span class="n">nth_le_cons_cast_succ</span><span class="o">,</span> <span class="n">ih</span><span class="o">]</span> <span class="o">}</span>
<span class="kn">end</span>
</code></pre></div>



<a name="201021638"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20multiset%20of%20headaches/near/201021638" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/a.20multiset.20of.20headaches.html#201021638">(Jun 16 2020 at 14:18)</a>:</h4>
<p><code>list.nth_le_cons_length</code> seems wrong, but you also didn't use it?</p>



<a name="201021730"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20multiset%20of%20headaches/near/201021730" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Hughes <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/a.20multiset.20of.20headaches.html#201021730">(Jun 16 2020 at 14:18)</a>:</h4>
<p>It's <code>@[simp]</code> so the <code>simp</code> used it.</p>



<a name="201021845"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20multiset%20of%20headaches/near/201021845" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/a.20multiset.20of.20headaches.html#201021845">(Jun 16 2020 at 14:19)</a>:</h4>
<p>But it's wrong, isn't it? <code>a</code> is the zeroth element, no that <code>l.length</code>th?</p>



<a name="201022009"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20multiset%20of%20headaches/near/201022009" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Hughes <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/a.20multiset.20of.20headaches.html#201022009">(Jun 16 2020 at 14:20)</a>:</h4>
<p>Yes, the list is in the wrong order. D'oh</p>



<a name="201022072"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20multiset%20of%20headaches/near/201022072" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Hughes <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/a.20multiset.20of.20headaches.html#201022072">(Jun 16 2020 at 14:20)</a>:</h4>
<p>So it should probably be proved with <code>list.reverse_rec_on</code></p>



<a name="201022335"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20multiset%20of%20headaches/near/201022335" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/a.20multiset.20of.20headaches.html#201022335">(Jun 16 2020 at 14:22)</a>:</h4>
<p>While something like this will work (and Chris reached it much faster than I was going to), I feel like "having to resort to induction" is a bad sign here, and it might be better to improve the API.</p>



<a name="201022473"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20multiset%20of%20headaches/near/201022473" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/a.20multiset.20of.20headaches.html#201022473">(Jun 16 2020 at 14:23)</a>:</h4>
<p>though there's some irreducible gross-ness in any proof of this caused by the gross-ness of <code>(λ (i : fin l.length), l.nth_le i i.2)</code>. :-)</p>



<a name="201022550"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20multiset%20of%20headaches/near/201022550" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/a.20multiset.20of.20headaches.html#201022550">(Jun 16 2020 at 14:23)</a>:</h4>
<p>Yup...</p>



<a name="201022761"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20multiset%20of%20headaches/near/201022761" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/a.20multiset.20of.20headaches.html#201022761">(Jun 16 2020 at 14:25)</a>:</h4>
<p>but I think with better API, you could hope that just <code>ext</code> and <code>simp</code> got you basically down to a statement about lists, after which dealing with gross-ness by induction feels less intimidating</p>



<a name="201022778"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20multiset%20of%20headaches/near/201022778" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/a.20multiset.20of.20headaches.html#201022778">(Jun 16 2020 at 14:25)</a>:</h4>
<p>Here's what I really want:</p>
<div class="codehilite"><pre><span></span><code><span class="kn">example</span> <span class="o">{</span><span class="n">σ</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">}</span> <span class="o">[</span><span class="n">fintype</span> <span class="n">σ</span><span class="o">]</span> <span class="o">(</span><span class="n">l</span> <span class="o">:</span> <span class="n">multiset</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:</span>
  <span class="bp">∃</span> <span class="n">f</span> <span class="o">:</span> <span class="n">σ</span> <span class="bp">→</span><span class="err">₀</span> <span class="bp">ℕ</span><span class="o">,</span> <span class="n">multiset</span><span class="bp">.</span><span class="n">map</span> <span class="n">f</span> <span class="n">finset</span><span class="bp">.</span><span class="n">univ</span><span class="bp">.</span><span class="n">val</span> <span class="bp">=</span> <span class="n">l</span> <span class="o">:=</span>
<span class="n">sorry</span>
</code></pre></div>



<a name="201022812"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20multiset%20of%20headaches/near/201022812" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/a.20multiset.20of.20headaches.html#201022812">(Jun 16 2020 at 14:25)</a>:</h4>
<p>But from there to my first question is quite straightforward, and I think the obvious way to go.</p>



<a name="201022838"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20multiset%20of%20headaches/near/201022838" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/a.20multiset.20of.20headaches.html#201022838">(Jun 16 2020 at 14:25)</a>:</h4>
<p>(Modulo that I change <code>l</code> to a multiset here.)</p>



<a name="201022878"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20multiset%20of%20headaches/near/201022878" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/a.20multiset.20of.20headaches.html#201022878">(Jun 16 2020 at 14:26)</a>:</h4>
<p>Why bother with the <code>finsupp</code>, if you already have <code>fintype</code>?</p>



<a name="201022947"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20multiset%20of%20headaches/near/201022947" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/a.20multiset.20of.20headaches.html#201022947">(Jun 16 2020 at 14:26)</a>:</h4>
<p>I don't think that statement is true?</p>



<a name="201023107"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20multiset%20of%20headaches/near/201023107" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/a.20multiset.20of.20headaches.html#201023107">(Jun 16 2020 at 14:27)</a>:</h4>
<p>Yeah, it's not true... what if <code>l</code> takes on more values than <code>\sigma</code> has elements?</p>



<a name="201023217"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20multiset%20of%20headaches/near/201023217" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/a.20multiset.20of.20headaches.html#201023217">(Jun 16 2020 at 14:28)</a>:</h4>
<p>Ooh, shoot...</p>



<a name="201023303"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/a%20multiset%20of%20headaches/near/201023303" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/a.20multiset.20of.20headaches.html#201023303">(Jun 16 2020 at 14:28)</a>:</h4>
<p>What I really really want, is that <code>(l : list nat) (hl: l.length = fintype.card \sigma) (hl' : l.sorted)</code>, and I tag on a <code>multiset.sort</code> on top of the <code>multiset.map</code>.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>