---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/Notation.20for.20.60multilinear_map.60.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Notation.20for.20.60multilinear_map.60.html">Notation for `multilinear_map`</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="225694500"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Notation%20for%20%60multilinear_map%60/near/225694500" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Notation.20for.20.60multilinear_map.60.html#225694500">(Feb 09 2021 at 14:10)</a>:</h4>
<p>Any ideas for notation for <a href="https://leanprover-community.github.io/mathlib_docs/find/multilinear_map">docs#multilinear_map</a>? To make things confusing, we already have <code>(⨂ i, M i) →ₗ[R] N</code> for <a href="https://leanprover-community.github.io/mathlib_docs/find/linear_map">docs#linear_map</a> over <a href="https://leanprover-community.github.io/mathlib_docs/find/pi_tensor_product">docs#pi_tensor_product</a>, which is almost isomorphic; meanwhile, <code>(Π i, M i) →ₗ[R] N</code> is a linear map over a pi type, which has different properties.</p>
<p>I came up with <code>Πₗ i, M i →ₗ[R] N</code> but I think it's not a good idea. Here's a mwe for someone else to try similar ideas:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">linear_algebra.multilinear</span>

<span class="kd">notation</span> <span class="bp">`Πₗ</span> <span class="bp">`</span> <span class="n">binders</span> <span class="bp">`</span><span class="o">,</span> <span class="bp">`</span> <span class="n">m</span><span class="o">:(</span><span class="n">scoped</span><span class="o">:</span><span class="mi">67</span> <span class="n">f</span><span class="o">,</span> <span class="bp">λ</span> <span class="n">R</span><span class="o">,</span> <span class="n">multilinear_map</span> <span class="n">R</span> <span class="n">f</span><span class="o">)</span> <span class="bp">`→ₗ</span><span class="o">[</span><span class="bp">`</span><span class="n">R</span><span class="bp">`</span><span class="o">]</span><span class="bp">`</span> <span class="n">N</span> <span class="o">:=</span> <span class="n">m</span> <span class="n">R</span> <span class="n">N</span>

<span class="kd">example</span>
  <span class="o">{</span><span class="n">ι</span> <span class="n">R</span> <span class="n">N</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">{</span><span class="n">M</span> <span class="o">:</span> <span class="n">ι</span> <span class="bp">→</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span>
  <span class="o">[</span><span class="n">semiring</span> <span class="n">R</span><span class="o">]</span> <span class="o">[</span><span class="bp">∀</span> <span class="n">i</span><span class="o">,</span> <span class="n">add_comm_monoid</span> <span class="o">(</span><span class="n">M</span> <span class="n">i</span><span class="o">)]</span> <span class="o">[</span><span class="bp">∀</span> <span class="n">i</span><span class="o">,</span> <span class="n">semimodule</span> <span class="n">R</span> <span class="o">(</span><span class="n">M</span> <span class="n">i</span><span class="o">)]</span>
  <span class="o">[</span><span class="n">add_comm_monoid</span> <span class="n">N</span><span class="o">]</span> <span class="o">[</span><span class="n">semimodule</span> <span class="n">R</span> <span class="n">N</span><span class="o">]</span> <span class="o">:</span>
    <span class="bp">Πₗ</span> <span class="n">i</span><span class="o">,</span> <span class="n">M</span> <span class="n">i</span> <span class="bp">→ₗ</span><span class="o">[</span><span class="n">R</span><span class="o">]</span> <span class="n">N</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="gr">sorry</span>
<span class="kd">end</span>
</code></pre></div>



<a name="225733186"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Notation%20for%20%60multilinear_map%60/near/225733186" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Notation.20for.20.60multilinear_map.60.html#225733186">(Feb 09 2021 at 18:18)</a>:</h4>
<p>In case of <code>continuous_multilinear_map</code>s we only have notation for <code>continuous_multilinear_map (λ i : fin n, E) F</code></p>



<a name="225736325"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Notation%20for%20%60multilinear_map%60/near/225736325" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Notation.20for.20.60multilinear_map.60.html#225736325">(Feb 09 2021 at 18:38)</a>:</h4>
<p>What is that notation? I don't remember seeing it when I last looked at <a href="https://leanprover-community.github.io/mathlib_docs/find/continuous_multilinear_map">docs#continuous_multilinear_map</a></p>



<a name="225736464"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Notation%20for%20%60multilinear_map%60/near/225736464" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Notation.20for.20.60multilinear_map.60.html#225736464">(Feb 09 2021 at 18:39)</a>:</h4>
<p>Ah, <code>M [×n]→L[R] N</code></p>



<a name="225739829"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Notation%20for%20%60multilinear_map%60/near/225739829" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Frédéric Dupuis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Notation.20for.20.60multilinear_map.60.html#225739829">(Feb 09 2021 at 19:00)</a>:</h4>
<p>How about something like <code>(Π i, M i) →ₘₗ[R] N</code>?</p>



<a name="225765436"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Notation%20for%20%60multilinear_map%60/near/225765436" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Notation.20for.20.60multilinear_map.60.html#225765436">(Feb 09 2021 at 22:09)</a>:</h4>
<p>Notation can't start with <code>(</code> unfortunately -  so that would require some clever trickery to convert <code>Π i, M i</code> into <code>λ  i, M i</code></p>



<a name="225768811"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Notation%20for%20%60multilinear_map%60/near/225768811" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Notation.20for.20.60multilinear_map.60.html#225768811">(Feb 09 2021 at 22:42)</a>:</h4>
<p>I can basically get that working with:</p>
<div class="spoiler-block"><div class="spoiler-header">
</div><div class="spoiler-content" aria-hidden="true">
<div class="codehilite"><pre><span></span><code>import linear_algebra.multilinear

abbreviation type_of.codomain {α : Type*} {β : α → Type*} (a : Π (i : α), β i) (i : α) : Type* :=
β i

notation A ` →ₗₘ[` R `] ` N := multilinear_map R (type_of.codomain (sorry : A)) N

variables {ι R M N : Type*} {Mᵢ : ι → Type*}
  [decidable_eq ι]
  [semiring R] [∀ i, add_comm_monoid (Mᵢ i)] [∀ i, semimodule R (Mᵢ i)]
  [add_comm_monoid M] [semimodule R M]
  [add_comm_monoid N] [semimodule R N]

example : (Π i, Mᵢ i) →ₗₘ[R] N :=
begin
  dunfold type_of.codomain, dsimp only,
  exact 0,
end

example : (ι → M) →ₗₘ[R] N :=
begin
  dunfold type_of.codomain, dsimp only,
  exact 0,
end
</code></pre></div>
</div></div>



<a name="225768867"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Notation%20for%20%60multilinear_map%60/near/225768867" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Notation.20for.20.60multilinear_map.60.html#225768867">(Feb 09 2021 at 22:42)</a>:</h4>
<p>But I don't know how to eliminate the <code>sorry</code> in the notation</p>



<a name="225768961"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Notation%20for%20%60multilinear_map%60/near/225768961" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Notation.20for.20.60multilinear_map.60.html#225768961">(Feb 09 2021 at 22:43)</a>:</h4>
<p>The <code>typeof</code> strategy doesn't work, because it requires me to construct a term of <code>A</code> to use even if one doesn't exist</p>



<a name="225769771"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Notation%20for%20%60multilinear_map%60/near/225769771" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Notation.20for.20.60multilinear_map.60.html#225769771">(Feb 09 2021 at 22:52)</a>:</h4>
<p>Solved!</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">linear_algebra.multilinear</span>

<span class="kd">inductive</span> <span class="n">type_info</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span>
<span class="bp">|</span> <span class="n">unit</span> <span class="o">[]</span> <span class="o">:</span> <span class="n">type_info</span>

<span class="kd">abbreviation</span> <span class="n">type_info.codomain</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">{</span><span class="n">β</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span>
  <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">type_info</span> <span class="o">(</span><span class="bp">Π</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="n">α</span><span class="o">),</span> <span class="n">β</span> <span class="n">i</span><span class="o">))</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="kt">Type</span><span class="bp">*</span> <span class="o">:=</span> <span class="n">β</span>

<span class="kd">notation</span> <span class="n">A</span> <span class="bp">`</span> <span class="bp">→ₗₘ</span><span class="o">[</span><span class="bp">`</span> <span class="n">R</span> <span class="bp">`</span><span class="o">]</span> <span class="bp">`</span> <span class="n">N</span> <span class="o">:=</span> <span class="n">multilinear_map</span> <span class="n">R</span> <span class="o">(</span><span class="n">type_info.codomain</span> <span class="o">(</span><span class="n">type_info.unit</span> <span class="n">A</span><span class="o">))</span> <span class="n">N</span>

<span class="kd">variables</span> <span class="o">{</span><span class="n">ι</span> <span class="n">R</span> <span class="n">M</span> <span class="n">N</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">{</span><span class="n">M</span><span class="bp">ᵢ</span> <span class="o">:</span> <span class="n">ι</span> <span class="bp">→</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span>
  <span class="o">[</span><span class="n">decidable_eq</span> <span class="n">ι</span><span class="o">]</span>
  <span class="o">[</span><span class="n">semiring</span> <span class="n">R</span><span class="o">]</span> <span class="o">[</span><span class="bp">∀</span> <span class="n">i</span><span class="o">,</span> <span class="n">add_comm_monoid</span> <span class="o">(</span><span class="n">M</span><span class="bp">ᵢ</span> <span class="n">i</span><span class="o">)]</span> <span class="o">[</span><span class="bp">∀</span> <span class="n">i</span><span class="o">,</span> <span class="n">semimodule</span> <span class="n">R</span> <span class="o">(</span><span class="n">M</span><span class="bp">ᵢ</span> <span class="n">i</span><span class="o">)]</span>
  <span class="o">[</span><span class="n">add_comm_monoid</span> <span class="n">M</span><span class="o">]</span> <span class="o">[</span><span class="n">semimodule</span> <span class="n">R</span> <span class="n">M</span><span class="o">]</span>
  <span class="o">[</span><span class="n">add_comm_monoid</span> <span class="n">N</span><span class="o">]</span> <span class="o">[</span><span class="n">semimodule</span> <span class="n">R</span> <span class="n">N</span><span class="o">]</span>

<span class="kd">example</span> <span class="o">:</span> <span class="o">(</span><span class="bp">Π</span> <span class="n">i</span><span class="o">,</span> <span class="n">M</span><span class="bp">ᵢ</span> <span class="n">i</span><span class="o">)</span> <span class="bp">→ₗₘ</span><span class="o">[</span><span class="n">R</span><span class="o">]</span> <span class="n">N</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">dunfold</span> <span class="n">type_info.codomain</span><span class="o">,</span> <span class="n">dsimp</span> <span class="n">only</span><span class="o">,</span>
  <span class="n">exact</span> <span class="mi">0</span><span class="o">,</span>
<span class="kd">end</span>

<span class="kd">example</span> <span class="o">:</span> <span class="o">(</span><span class="n">ι</span> <span class="bp">→</span> <span class="n">M</span><span class="o">)</span> <span class="bp">→ₗₘ</span><span class="o">[</span><span class="n">R</span><span class="o">]</span> <span class="n">N</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">dunfold</span> <span class="n">type_info.codomain</span><span class="o">,</span> <span class="n">dsimp</span> <span class="n">only</span><span class="o">,</span>
  <span class="n">exact</span> <span class="mi">0</span><span class="o">,</span>
<span class="kd">end</span>
</code></pre></div>



<a name="225807716"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Notation%20for%20%60multilinear_map%60/near/225807716" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Notation.20for.20.60multilinear_map.60.html#225807716">(Feb 10 2021 at 08:49)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib/issues/6152">#6152</a></p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>