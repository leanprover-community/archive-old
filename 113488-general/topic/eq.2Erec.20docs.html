---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/eq.2Erec.20docs.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/eq.2Erec.20docs.html">eq.rec docs</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="261499825"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20docs/near/261499825" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/eq.2Erec.20docs.html#261499825">(Nov 15 2021 at 13:59)</a>:</h4>
<p>Anyone know why there are no docs generated for <a href="https://leanprover-community.github.io/mathlib_docs/find/eq.rec">docs#eq.rec</a>?</p>



<a name="261501563"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20docs/near/261501563" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/eq.2Erec.20docs.html#261501563">(Nov 15 2021 at 14:14)</a>:</h4>
<p>We don't generate docs for any "autogenerated" lemmas</p>



<a name="261501923"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20docs/near/261501923" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/eq.2Erec.20docs.html#261501923">(Nov 15 2021 at 14:17)</a>:</h4>
<p>oh weird</p>



<a name="261502076"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20docs/near/261502076" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/eq.2Erec.20docs.html#261502076">(Nov 15 2021 at 14:18)</a>:</h4>
<p>I guess there are a lot of them, but <code>X.rec</code> seems important no? I mean there are many occurrences of <code>eq.rec</code> in the statements of other lemmas</p>



<a name="261502254"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20docs/near/261502254" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/eq.2Erec.20docs.html#261502254">(Nov 15 2021 at 14:20)</a>:</h4>
<p>I guess the argument is that <code>.rec</code> is "obvious" from the <code>inductive</code> declaration</p>



<a name="261502359"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20docs/near/261502359" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/eq.2Erec.20docs.html#261502359">(Nov 15 2021 at 14:21)</a>:</h4>
<p>Maybe we should have a collapsed panel of "subdeclarations" inside <code>inductive</code> boxes which shows all the autogenerated definitions  like <code>rec</code>, <code>rec_on</code>, <code>cases</code>, ...</p>



<a name="261503029"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20docs/near/261503029" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/eq.2Erec.20docs.html#261503029">(Nov 15 2021 at 14:26)</a>:</h4>
<p>It would be nice if <code>eq.rec</code> redirects to <code>eq</code> in the same way as <a href="https://leanprover-community.github.io/mathlib_docs/find/eq.refl">docs#eq.refl</a> does. I don't think we need to change the entry of <code>eq</code> to include information about <code>eq.rec</code> though.</p>



<a name="261503345"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20docs/near/261503345" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/eq.2Erec.20docs.html#261503345">(Nov 15 2021 at 14:29)</a>:</h4>
<p>Having something to link to for <code>eq.rec</code> is useful for explaining to users of other proof assistants (why this just came up now for me).</p>



<a name="261503484"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20docs/near/261503484" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/eq.2Erec.20docs.html#261503484">(Nov 15 2021 at 14:30)</a>:</h4>
<p>Maybe we can have some mechanism whereby we manually indicate to the documentation generator that it should include documentation for indicated autogenerated definitions (e.g. <code>eq.rec</code>, <code>eq.rec_on</code> but not the recursors for every random inductive type)</p>



<a name="261503585"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20docs/near/261503585" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/eq.2Erec.20docs.html#261503585">(Nov 15 2021 at 14:30)</a>:</h4>
<p>Or maybe just for <code>rec</code> that actually appear in statement of other lemmas?</p>



<a name="261503652"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20docs/near/261503652" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/eq.2Erec.20docs.html#261503652">(Nov 15 2021 at 14:31)</a>:</h4>
<p>That also sounds reasonable but I am not sure if the documentation generator has access to that information at an appropriate time</p>



<a name="261503739"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20docs/near/261503739" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/eq.2Erec.20docs.html#261503739">(Nov 15 2021 at 14:31)</a>:</h4>
<p>If the lean exporter just wrote out all definitions including autogenerated ones (rather than <a href="https://github.com/leanprover-community/doc-gen/blob/master/src/export_json.lean#L310">filtering them out</a>), then the python script could filter them back out again, at the point when it has all the information</p>



<a name="261517121"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20docs/near/261517121" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/eq.2Erec.20docs.html#261517121">(Nov 15 2021 at 15:56)</a>:</h4>
<p>We could try to include the auto-generated declarations in the documentation, but collapse them by default.  (Not sure how much space they take up.  There's also various kinds of auto-generated declarations, equation lemmas, no_confusion, injectivity lemmas, sizeof, sunfold, expansion of general inductive types, ...).</p>



<a name="261520143"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20docs/near/261520143" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/eq.2Erec.20docs.html#261520143">(Nov 15 2021 at 16:17)</a>:</h4>
<p>Equation lemmas are already included as part of the definition, and also they have the same name as the corresponding definition so I wouldn't include them.</p>



<a name="261520501"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20docs/near/261520501" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/eq.2Erec.20docs.html#261520501">(Nov 15 2021 at 16:19)</a>:</h4>
<blockquote>
<p>and also they have the same name as the corresponding definition</p>
</blockquote>
<p>That's not true, they are called <code>foo.equations._eqn_1</code>. <code>rw</code> and <code>simp</code> just know how to desugar <code>foo</code> into that name</p>



<a name="261520741"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20docs/near/261520741" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/eq.2Erec.20docs.html#261520741">(Nov 15 2021 at 16:21)</a>:</h4>
<p>We already handle these in doc_gen by putting an "Equations" section after the def, so the proposal is just to do the same with "Auxiliary declarations" too right</p>



<a name="261520904"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20docs/near/261520904" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/eq.2Erec.20docs.html#261520904">(Nov 15 2021 at 16:22)</a>:</h4>
<p>Yes, although the "auxiliary declarations" will likely need explicit arguments unlike the equations which mostly just reuse the arguments of the parent</p>



<a name="261523340"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20docs/near/261523340" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/eq.2Erec.20docs.html#261523340">(Nov 15 2021 at 16:38)</a>:</h4>
<p>I guess we'd add all of these?<br>
<a href="https://github.com/leanprover-community/mathlib/blob/ca61dbffa497f43e2bdf6c4c6f446c112043ecd1/src/meta/expr.lean#L1086-L1088">https://github.com/leanprover-community/mathlib/blob/ca61dbffa497f43e2bdf6c4c6f446c112043ecd1/src/meta/expr.lean#L1086-L1088</a></p>



<a name="261525368"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20docs/near/261525368" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/eq.2Erec.20docs.html#261525368">(Nov 15 2021 at 16:53)</a>:</h4>
<p>I think it could be helpful to show them.  I don't how many people know all the auto-generated definitions, nevermind how they are defined.</p>



<a name="261526127"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20docs/near/261526127" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/eq.2Erec.20docs.html#261526127">(Nov 15 2021 at 16:59)</a>:</h4>
<p>I like this idea to make the autogenerated definitions more documented.  I remember it being frustrating while learning when I'd follow definitions and hit one of them.  It was very unclear what they were or what they were for, and there's not much that helps direct you to the answer (save asking Zulip or thinking to check the right textbook).</p>
<p>Would it be a good idea to modify <code>#print</code> so that it directs you to how an automatically generated definition was created?  I imagine <code>#print eq.rec</code> could at the least be like</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">protected</span> <span class="n">eliminator</span> <span class="n">eq.rec</span> <span class="o">:</span> <span class="bp">Π</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Sort</span> <span class="n">u</span><span class="o">}</span> <span class="o">{</span><span class="n">a</span> <span class="o">:</span> <span class="n">α</span><span class="o">}</span> <span class="o">{</span><span class="n">motive</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="kt">Sort</span> <span class="n">l</span><span class="o">},</span> <span class="n">motive</span> <span class="n">a</span> <span class="bp">→</span> <span class="bp">Π</span> <span class="o">{</span><span class="n">ᾰ</span> <span class="o">:</span> <span class="n">α</span><span class="o">},</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">ᾰ</span> <span class="bp">→</span> <span class="n">motive</span> <span class="n">ᾰ</span>

<span class="n">Generated</span> <span class="n">for</span> <span class="n">the</span> <span class="kd">inductive</span> <span class="n">type</span> <span class="n">eq.</span>
</code></pre></div>
<p>and maybe even point you to where in the Lean source code it's generated.</p>



<a name="261526581"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20docs/near/261526581" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/eq.2Erec.20docs.html#261526581">(Nov 15 2021 at 17:02)</a>:</h4>
<p>(Relatedly, sometimes I feel like it would be nice to have provenance information for other automatically generated objects, like things created by <code>to_additive</code>.  Could there be something like a "from" attribute that the docs could include and linkify?)</p>



<a name="261527022"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20docs/near/261527022" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/eq.2Erec.20docs.html#261527022">(Nov 15 2021 at 17:05)</a>:</h4>
<p>We already have "to" attributes, so it could be enough to just reverse that map.</p>



<a name="261556156"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20docs/near/261556156" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Junyan Xu <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/eq.2Erec.20docs.html#261556156">(Nov 15 2021 at 20:42)</a>:</h4>
<p>There are also lemmas semi-auto-generated by @[simps], reassoc, elementwise etc. which can be lengthy. For example, I'd rather have <a href="https://leanprover-community.github.io/mathlib_docs/topology/sheaves/presheaf.html#Top.presheaf.pullback_map_app">this</a> collapsed.</p>



<a name="261556519"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/eq.rec%20docs/near/261556519" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/eq.2Erec.20docs.html#261556519">(Nov 15 2021 at 20:46)</a>:</h4>
<p>I think that also needs <code>open category_theory topological_space opposite</code>, which is another reasonable feature request.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>