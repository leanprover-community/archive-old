---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/trying.20to.20use.20lean.20via.20emacs.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/trying.20to.20use.20lean.20via.20emacs.html">trying to use lean via emacs</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="170955460"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/trying%20to%20use%20lean%20via%20emacs/near/170955460" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> jeremy <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/trying.20to.20use.20lean.20via.20emacs.html#170955460">(Jul 16 2019 at 05:16)</a>:</h4>
<p>I've tried to start using Lean using emacs, but I get to a point where,<br>
following <a href="https://github.com/leanprover/lean-mode" target="_blank" title="https://github.com/leanprover/lean-mode">https://github.com/leanprover/lean-mode</a><br>
I try to install package lean-mode, but with</p>
<p>M-x package-install and then entering lean-mode, it says [No match]</p>
<p>I've also looked at <a href="https://melpa.org/#/getting-started" target="_blank" title="https://melpa.org/#/getting-started">https://melpa.org/#/getting-started</a> and tried<br>
to run M-x package-refresh-contents - again it said [No match]<br>
but trying it again it said Contacting host: elpa.gnu.org:80<br>
and then nothing happened for a long time.</p>
<p>I tried M-x package-list-packages - it produced a buffer with what<br>
appears to be a long list of packages, not including lean-mode</p>
<p>What is supposed to happen when I try these things?  How do I<br>
trouble-shoot this situation?</p>
<p>thanks</p>
<p>Jeremy</p>



<a name="170956335"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/trying%20to%20use%20lean%20via%20emacs/near/170956335" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/trying.20to.20use.20lean.20via.20emacs.html#170956335">(Jul 16 2019 at 05:37)</a>:</h4>
<p>Do you have melpa?</p>



<a name="170956382"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/trying%20to%20use%20lean%20via%20emacs/near/170956382" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/trying.20to.20use.20lean.20via.20emacs.html#170956382">(Jul 16 2019 at 05:38)</a>:</h4>
<p><a href="http://melpa.org/" target="_blank" title="http://melpa.org/">http://melpa.org/</a> has a large collection of emacs packages not included in elpa.</p>



<a name="170956384"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/trying%20to%20use%20lean%20via%20emacs/near/170956384" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/trying.20to.20use.20lean.20via.20emacs.html#170956384">(Jul 16 2019 at 05:38)</a>:</h4>
<p>lean-mode is one of them.</p>



<a name="170978331"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/trying%20to%20use%20lean%20via%20emacs/near/170978331" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jesse Michael Han <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/trying.20to.20use.20lean.20via.20emacs.html#170978331">(Jul 16 2019 at 11:58)</a>:</h4>
<p>you should additionally see melpa being contacted when you're doing the refresh</p>



<a name="170978369"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/trying%20to%20use%20lean%20via%20emacs/near/170978369" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jesse Michael Han <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/trying.20to.20use.20lean.20via.20emacs.html#170978369">(Jul 16 2019 at 11:59)</a>:</h4>
<p>there's some line you put in your init file to ensure melpa is queried for packages</p>



<a name="170978702"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/trying%20to%20use%20lean%20via%20emacs/near/170978702" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/trying.20to.20use.20lean.20via.20emacs.html#170978702">(Jul 16 2019 at 12:03)</a>:</h4>
<p><span class="user-mention" data-user-id="228155">@jeremy</span> I think, we can't provide more information without looking at <code>melpa</code> related parts of your Emacs init file</p>



<a name="170982615"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/trying%20to%20use%20lean%20via%20emacs/near/170982615" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/trying.20to.20use.20lean.20via.20emacs.html#170982615">(Jul 16 2019 at 12:56)</a>:</h4>
<p><span class="user-mention" data-user-id="228155">@jeremy</span> is there a reason that you are persevering with emacs rather than using VS Code? VS Code has far better support on this chat.</p>



<a name="170983107"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/trying%20to%20use%20lean%20via%20emacs/near/170983107" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jesse Michael Han <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/trying.20to.20use.20lean.20via.20emacs.html#170983107">(Jul 16 2019 at 13:01)</a>:</h4>
<blockquote>
<p>there's some line you put in your init file to ensure melpa is queried for packages</p>
</blockquote>
<p>you should ensure that something like following is loaded in your init file:</p>
<div class="codehilite"><pre><span></span><span class="p">(</span><span class="nb">require</span> <span class="ss">&#39;package</span><span class="p">)</span>
<span class="p">(</span><span class="nv">add-to-list</span> <span class="ss">&#39;package-archives</span>
         <span class="o">&#39;</span><span class="p">(</span><span class="s">&quot;melpa&quot;</span> <span class="o">.</span> <span class="s">&quot;http://melpa.org/packages/&quot;</span><span class="p">))</span>
</pre></div>


<p>melpa is queried separately from elpa</p>



<a name="170986022"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/trying%20to%20use%20lean%20via%20emacs/near/170986022" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/trying.20to.20use.20lean.20via.20emacs.html#170986022">(Jul 16 2019 at 13:35)</a>:</h4>
<p>I have</p>
<div class="codehilite"><pre><span></span>(require &#39;package)
(add-to-list &#39;package-archives
             &#39;(&quot;melpa&quot; . &quot;https://melpa.org/packages/&quot;) t)
(package-initialize)
</pre></div>



<a name="170987562"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/trying%20to%20use%20lean%20via%20emacs/near/170987562" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> jeremy <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/trying.20to.20use.20lean.20via.20emacs.html#170987562">(Jul 16 2019 at 13:51)</a>:</h4>
<p>Hi,</p>
<p>I created the file .emacs.d/init.el as indicated at<br>
<a href="https://github.com/leanprover/lean-mode" target="_blank" title="https://github.com/leanprover/lean-mode">https://github.com/leanprover/lean-mode</a><br>
and it's as follows</p>
<p>[jeremy@hp2017 ~]$ cat .emacs.d/init.el </p>
<p>;; see <a href="https://github.com/leanprover/lean-mode" target="_blank" title="https://github.com/leanprover/lean-mode">https://github.com/leanprover/lean-mode</a><br>
(require 'package) <br>
(add-to-list 'package-archives '("melpa" . "<a href="http://melpa.org/packages/" target="_blank" title="http://melpa.org/packages/">http://melpa.org/packages/</a>"))<br>
(package-initialize) </p>
<p>;; Trigger completion on Shift-Space<br>
(global-set-key (kbd "S-SPC") #'company-complete)</p>
<p>I tried to use emacs because I've some slight familiarity with it (I had to use it for a bit around 30 years ago), whereas I've never used VSCode.  Also it's installed on the system I use at work.</p>
<p>Cheers,</p>
<p>Jeremy</p>



<a name="170988095"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/trying%20to%20use%20lean%20via%20emacs/near/170988095" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/trying.20to.20use.20lean.20via.20emacs.html#170988095">(Jul 16 2019 at 13:57)</a>:</h4>
<p>Try <code>C-h v</code> <code>package-archives</code>. Does it show melpa?<br>
BTW, did you run "Refresh package list" in <code>list-packages</code>?</p>



<a name="170988111"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/trying%20to%20use%20lean%20via%20emacs/near/170988111" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jesse Michael Han <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/trying.20to.20use.20lean.20via.20emacs.html#170988111">(Jul 16 2019 at 13:57)</a>:</h4>
<p>that should work to install <code>lean-mode</code>. did you load the new init file?</p>



<a name="170990030"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/trying%20to%20use%20lean%20via%20emacs/near/170990030" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> jeremy <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/trying.20to.20use.20lean.20via.20emacs.html#170990030">(Jul 16 2019 at 14:19)</a>:</h4>
<p>C-h v package-archives gives the result<br>
package-archives is a variable defined in ‘package.el’.<br>
Its value is (("melpa" . "<a href="http://melpa.org/packages/" target="_blank" title="http://melpa.org/packages/">http://melpa.org/packages/</a>")<br>
 ("gnu" . "<a href="http://elpa.gnu.org/packages/" target="_blank" title="http://elpa.gnu.org/packages/">http://elpa.gnu.org/packages/</a>"))<br>
so I guess that means yes.  <br>
No, I didn't run "Refresh package list" in list-packages<br>
(i've no idea how to do that, but I could try it if you can tell me how to do it)</p>



<a name="170990216"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/trying%20to%20use%20lean%20via%20emacs/near/170990216" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> jeremy <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/trying.20to.20use.20lean.20via.20emacs.html#170990216">(Jul 16 2019 at 14:21)</a>:</h4>
<p>I didn't do anything deliberate to load the new init file, I assumed that would happen automatically when I start emacs. And I would say that must have happened, otherwise wouldn't the process know nothing about melpa.</p>



<a name="170990220"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/trying%20to%20use%20lean%20via%20emacs/near/170990220" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jesse Michael Han <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/trying.20to.20use.20lean.20via.20emacs.html#170990220">(Jul 16 2019 at 14:21)</a>:</h4>
<p>i think he means, try using list-packages first, then do package-refresh-contents once in the packages buffer</p>



<a name="170990600"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/trying%20to%20use%20lean%20via%20emacs/near/170990600" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> jeremy <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/trying.20to.20use.20lean.20via.20emacs.html#170990600">(Jul 16 2019 at 14:25)</a>:</h4>
<p>OK, well I've done that - it doesn't seem to make any difference. What should I see when I do that?</p>



<a name="170991824"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/trying%20to%20use%20lean%20via%20emacs/near/170991824" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jesse Michael Han <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/trying.20to.20use.20lean.20via.20emacs.html#170991824">(Jul 16 2019 at 14:36)</a>:</h4>
<p>you should see the minibuffer say "contacting melpa" for a few seconds, and then your package list should be refreshed with melpa packages</p>



<a name="170992113"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/trying%20to%20use%20lean%20via%20emacs/near/170992113" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jesse Michael Han <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/trying.20to.20use.20lean.20via.20emacs.html#170992113">(Jul 16 2019 at 14:39)</a>:</h4>
<p>it might be a network issue if your elpa query timed out</p>



<a name="170993191"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/trying%20to%20use%20lean%20via%20emacs/near/170993191" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> jeremy <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/trying.20to.20use.20lean.20via.20emacs.html#170993191">(Jul 16 2019 at 14:49)</a>:</h4>
<p>Well I do see something about contacting melpa.  But the package list still doesn't have lean-mode</p>



<a name="170998154"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/trying%20to%20use%20lean%20via%20emacs/near/170998154" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jesse Michael Han <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/trying.20to.20use.20lean.20via.20emacs.html#170998154">(Jul 16 2019 at 15:35)</a>:</h4>
<p>does the rest of the package list get updated with new entries from melpa?</p>



<a name="170998318"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/trying%20to%20use%20lean%20via%20emacs/near/170998318" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jesse Michael Han <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/trying.20to.20use.20lean.20via.20emacs.html#170998318">(Jul 16 2019 at 15:37)</a>:</h4>
<p>if it's just lean-mode you need, it might be feasible to just install it from source to your ~/.emacs.d/elpa</p>



<a name="171131536"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/trying%20to%20use%20lean%20via%20emacs/near/171131536" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> jeremy <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/trying.20to.20use.20lean.20via.20emacs.html#171131536">(Jul 18 2019 at 01:33)</a>:</h4>
<p>well, the package list doesn't change.  But from the machine here, at work, I don't see anything about contacting melpa, either.  All I see is a message about contacting elpa.gnu.org:80, then nothing, for a long time, so I hit C-g to get out of that.</p>
<p>How do I just install it from source to your ~/.emacs.d/elpa - ie, what do I put, exactly where?</p>



<a name="171131707"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/trying%20to%20use%20lean%20via%20emacs/near/171131707" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jesse Michael Han <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/trying.20to.20use.20lean.20via.20emacs.html#171131707">(Jul 18 2019 at 01:39)</a>:</h4>
<p>1. go to MELPA website and search for <code>lean-mode</code><br>
2. download the tar file from the lean-mode page on MELPA<br>
3. the tar file contains a folder called lean-mode-20180906...<br>
4. move this folder into ~/.emacs.d/elpa (or wherever your Emacs installs its packages to)<br>
5. require lean-mode from your init file</p>



<a name="171144085"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/trying%20to%20use%20lean%20via%20emacs/near/171144085" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> jeremy <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/trying.20to.20use.20lean.20via.20emacs.html#171144085">(Jul 18 2019 at 07:26)</a>:</h4>
<p>Thanks - as a matter of fact  there is a lean expert and emacs expert who was<br>
able to set it up on my computer here.<br>
Contrary to the instructions I had found, the init.el file had to be put into the<br>
directory ~/.xemacs, not ~/.emacs.d<br>
But looking at what he has done, it seems 3. and 4. have been done <br>
I can't find anything that resembles <br>
"5.  require lean-mode from your init file",<br>
what does that mean exactly?</p>



<a name="171144199"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/trying%20to%20use%20lean%20via%20emacs/near/171144199" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/trying.20to.20use.20lean.20via.20emacs.html#171144199">(Jul 18 2019 at 07:29)</a>:</h4>
<p><span class="user-mention" data-user-id="228155">@jeremy</span> Were you already using emacs before starting on Lean?</p>



<a name="171144202"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/trying%20to%20use%20lean%20via%20emacs/near/171144202" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/trying.20to.20use.20lean.20via.20emacs.html#171144202">(Jul 18 2019 at 07:29)</a>:</h4>
<p>Otherwise I really recommend giving VS Code a shot.</p>



<a name="171181089"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/trying%20to%20use%20lean%20via%20emacs/near/171181089" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jesse Michael Han <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/trying.20to.20use.20lean.20via.20emacs.html#171181089">(Jul 18 2019 at 15:27)</a>:</h4>
<p>oh, you're using XEmacs</p>
<p>"require lean-mode from your init file" means putting the line</p>
<div class="codehilite"><pre><span></span><span class="p">(</span><span class="nb">require</span> <span class="ss">&#39;lean-mode</span><span class="p">)</span>
</pre></div>


<p>in your init file. it should succeed silently if your Emacs can find <code>lean-mode</code> among its packages. if it can't, it will fail and complain that it doesn't know what <code>lean-mode</code> is. you can test it by highlighting it and using <code>M-x eval-region</code>.</p>
<p>strictly speaking, this doesn't seem to be necessary to get <code>lean-mode</code> to work if it is already installed, but it will helpfully give you an error message on startup if <code>lean-mode</code> isn't actually installed</p>



<a name="172005170"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/trying%20to%20use%20lean%20via%20emacs/near/172005170" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> jeremy <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/trying.20to.20use.20lean.20via.20emacs.html#172005170">(Jul 30 2019 at 04:50)</a>:</h4>
<p>I'd used it occasionally, a long time ago.</p>



<a name="172005233"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/trying%20to%20use%20lean%20via%20emacs/near/172005233" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> jeremy <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/trying.20to.20use.20lean.20via.20emacs.html#172005233">(Jul 30 2019 at 04:52)</a>:</h4>
<p>well, no particular reason - except that it was already installed on the computer</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>