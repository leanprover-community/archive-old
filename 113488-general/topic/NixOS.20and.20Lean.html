---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/NixOS.20and.20Lean.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/NixOS.20and.20Lean.html">NixOS and Lean</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="207437922"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/NixOS%20and%20Lean/near/207437922" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/NixOS.20and.20Lean.html#207437922">(Aug 19 2020 at 17:34)</a>:</h4>
<p>I'm trying out NixOS. What is the recommended way to install VSCode + lean extension (these things try to auto-update, not sure if that plays nice with the nix philosophy)<br>
Similar question for <code>elan</code>. Please share your observations / derivations.</p>
<p>cc: <span class="user-mention" data-user-id="110043">@Gabriel Ebner</span> <span class="user-mention" data-user-id="214703">@Yury G. Kudryashov</span></p>



<a name="207439496"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/NixOS%20and%20Lean/near/207439496" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/NixOS.20and.20Lean.html#207439496">(Aug 19 2020 at 17:47)</a>:</h4>
<p>I don't use vscode. I installed elan from nixpkgs; it downloads lean binaries.</p>



<a name="207439996"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/NixOS%20and%20Lean/near/207439996" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/NixOS.20and.20Lean.html#207439996">(Aug 19 2020 at 17:51)</a>:</h4>
<p>If you do end up using emacs, the nixos guide is pretty good about explaining the "Nix" way to install emacs packages. (Disclaimer: I haven't used nixos in about 6 months.)</p>



<a name="207442074"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/NixOS%20and%20Lean/near/207442074" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris B <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/NixOS.20and.20Lean.html#207442074">(Aug 19 2020 at 18:09)</a>:</h4>
<p>I think <span class="user-mention" data-user-id="110024">@Sebastian Ullrich</span> is also a nix guy, so he might have some sage advice.</p>



<a name="207448779"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/NixOS%20and%20Lean/near/207448779" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/NixOS.20and.20Lean.html#207448779">(Aug 19 2020 at 19:07)</a>:</h4>
<p>We have <code>elan</code> and <code>vscode</code> packages in nixpkgs.  Check the <a href="https://github.com/leanprover-community/mathlib-tools/">leanproject readme</a> for how to install it mutably.  (Now that leanproject development has settled, we should probably add a package to nixpkgs.  But quickly the 20.09 freeze is coming..)</p>



<a name="207448984"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/NixOS%20and%20Lean/near/207448984" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/NixOS.20and.20Lean.html#207448984">(Aug 19 2020 at 19:08)</a>:</h4>
<p>I believe we have a declarative way to install vscode extensions using <code>vscode-with-extensions</code>, but I've never used it: <a href="https://nixos.wiki/wiki/Vscode">https://nixos.wiki/wiki/Vscode</a><br>
I just use the extension manager in vscode.</p>



<a name="207482838"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/NixOS%20and%20Lean/near/207482838" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Iocta <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/NixOS.20and.20Lean.html#207482838">(Aug 20 2020 at 02:22)</a>:</h4>
<p>I'm curious if anybody's been able to compile mathlib.</p>



<a name="207483027"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/NixOS%20and%20Lean/near/207483027" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/NixOS.20and.20Lean.html#207483027">(Aug 20 2020 at 02:26)</a>:</h4>
<p>CI has</p>



<a name="207483030"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/NixOS%20and%20Lean/near/207483030" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/NixOS.20and.20Lean.html#207483030">(Aug 20 2020 at 02:26)</a>:</h4>
<p>I haven't compiled mathlib in a long time</p>



<a name="207508536"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/NixOS%20and%20Lean/near/207508536" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jannis Limperg <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/NixOS.20and.20Lean.html#207508536">(Aug 20 2020 at 10:32)</a>:</h4>
<p>As soon as you have <code>elan</code>, compiling mathlib should be just <code>leanpkg build</code>. I do this regularly (not on Nix, but if Nix can install <code>elan</code>, you should be good).</p>



<a name="207509005"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/NixOS%20and%20Lean/near/207509005" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/NixOS.20and.20Lean.html#207509005">(Aug 20 2020 at 10:39)</a>:</h4>
<p>Thanks for all the responses. I'm going to try this soon!</p>



<a name="207823470"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/NixOS%20and%20Lean/near/207823470" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/NixOS.20and.20Lean.html#207823470">(Aug 24 2020 at 09:30)</a>:</h4>
<p>I've got <code>elan</code> and VScode running. Thanks for the help!</p>



<a name="207823532"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/NixOS%20and%20Lean/near/207823532" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/NixOS.20and.20Lean.html#207823532">(Aug 24 2020 at 09:31)</a>:</h4>
<p>It seems that installing python packages is quite messy on NixOS. <span class="user-mention" data-user-id="110043">@Gabriel Ebner</span> <span class="user-mention" data-user-id="214703">@Yury G. Kudryashov</span>  do you have a recommended way of installing <code>leanproject</code>?</p>



<a name="207823547"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/NixOS%20and%20Lean/near/207823547" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/NixOS.20and.20Lean.html#207823547">(Aug 24 2020 at 09:31)</a>:</h4>
<p>What is the official name for the <code>leanproject</code> package these days?  <code>leanproject</code>, <code>mathlib-tools</code>, <code>mathlibtools</code>?<br>
cc <span class="user-mention" data-user-id="110031">@Patrick Massot</span></p>



<a name="207823565"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/NixOS%20and%20Lean/near/207823565" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/NixOS.20and.20Lean.html#207823565">(Aug 24 2020 at 09:31)</a>:</h4>
<p>mathlibtools</p>



<a name="207823613"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/NixOS%20and%20Lean/near/207823613" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/NixOS.20and.20Lean.html#207823613">(Aug 24 2020 at 09:32)</a>:</h4>
<p>pip won't allow a dash in a package name.</p>



<a name="207823617"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/NixOS%20and%20Lean/near/207823617" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/NixOS.20and.20Lean.html#207823617">(Aug 24 2020 at 09:32)</a>:</h4>
<p>This is what I've been using:</p>
<div class="codehilite"><pre><span></span><code>nix-env -if https://github.com/leanprover-community/mathlib-tools/archive/master.tar.gz
</code></pre></div>



<a name="207823630"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/NixOS%20and%20Lean/near/207823630" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/NixOS.20and.20Lean.html#207823630">(Aug 24 2020 at 09:32)</a>:</h4>
<p><a href="https://pypi.org/project/mathlibtools/">https://pypi.org/project/mathlibtools/</a></p>



<a name="207823638"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/NixOS%20and%20Lean/near/207823638" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/NixOS.20and.20Lean.html#207823638">(Aug 24 2020 at 09:32)</a>:</h4>
<p>But we might want to get it into nixpkgs.</p>



<a name="207823651"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/NixOS%20and%20Lean/near/207823651" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/NixOS.20and.20Lean.html#207823651">(Aug 24 2020 at 09:32)</a>:</h4>
<p>Sounds good</p>



<a name="207823669"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/NixOS%20and%20Lean/near/207823669" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/NixOS.20and.20Lean.html#207823669">(Aug 24 2020 at 09:32)</a>:</h4>
<p>I don't insist on any name here, they are all historical accidents.</p>



<a name="207823696"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/NixOS%20and%20Lean/near/207823696" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/NixOS.20and.20Lean.html#207823696">(Aug 24 2020 at 09:33)</a>:</h4>
<p>And I'm sorry the current names are confusing.</p>



<a name="208440688"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/NixOS%20and%20Lean/near/208440688" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/NixOS.20and.20Lean.html#208440688">(Aug 29 2020 at 15:59)</a>:</h4>
<p><a href="https://github.com/NixOS/nixpkgs/pull/96608">https://github.com/NixOS/nixpkgs/pull/96608</a></p>



<a name="208441844"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/NixOS%20and%20Lean/near/208441844" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/NixOS.20and.20Lean.html#208441844">(Aug 29 2020 at 16:24)</a>:</h4>
<p>Cool! You already merged it <span aria-label="grinning face with smiling eyes" class="emoji emoji-1f601" role="img" title="grinning face with smiling eyes">:grinning_face_with_smiling_eyes:</span> <br>
Thanks <span class="user-mention" data-user-id="110043">@Gabriel Ebner</span></p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>