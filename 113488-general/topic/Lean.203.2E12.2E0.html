---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/Lean.203.2E12.2E0.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E12.2E0.html">Lean 3.12.0</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="197556426"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.12.0/near/197556426" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E12.2E0.html#197556426">(May 14 2020 at 13:48)</a>:</h4>
<p>As every week, I'm proud to release the latest version of the Lean community fork, Lean 3.12.0.  Thanks to <span class="user-mention" data-user-id="214703">@Yury G. Kudryashov</span>, <span class="user-mention" data-user-id="112680">@Johan Commelin</span>, <span class="user-mention" data-user-id="110049">@Mario Carneiro</span>, <span class="user-mention" data-user-id="256311">@Jannis Limperg</span>!  Here is the changelog:</p>
<p>Features:</p>
<p>- tactic combinators with informative results (<a href="https://github.com/leanprover-community/lean/issues/212">lean#212</a>)<br>
  - <code>has_singleton</code> is a new typeclass (<a href="https://github.com/leanprover-community/lean/issues/217">lean#217</a>)<br>
  - Add instances for <code>has_repr name</code>, <code>has_repr case_tag</code>, and <code>has_to_format case_tag</code> (<a href="https://github.com/leanprover-community/lean/issues/230">lean#230</a>)</p>
<p>Changes:</p>
<p>- <code>library/init/function</code>: use dot notation, add some docstrings (<a href="https://github.com/leanprover-community/lean/issues/216">lean#216</a>)<br>
  - <code>tactic.all_goals</code> is now called <code>tactic.all_goals'</code>, etc. (<a href="https://github.com/leanprover-community/lean/issues/212">lean#212</a>)<br>
  - <code>norm_num</code> is removed (<a href="https://github.com/leanprover-community/lean/issues/224">lean#224</a>)<br>
  - Parse <code>{a,b,c}</code> as right associative (<a href="https://github.com/leanprover-community/lean/issues/153">lean#153</a>)<br>
  - Refactor case tags (<a href="https://github.com/leanprover-community/lean/issues/228">lean#228</a>)<br>
  - Enable <code>pp.generalized_field_notation</code> by default (<a href="https://github.com/leanprover-community/lean/issues/227">lean#227</a>)</p>



<a name="197558896"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.12.0/near/197558896" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E12.2E0.html#197558896">(May 14 2020 at 14:07)</a>:</h4>
<p>Are there plans for bumping mathlib?</p>



<a name="197560681"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.12.0/near/197560681" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E12.2E0.html#197560681">(May 14 2020 at 14:11)</a>:</h4>
<p>I'm currently on the segfault with <a href="https://github.com/leanprover-community/lean/issues/234">lean#234</a></p>



<a name="197561631"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.12.0/near/197561631" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E12.2E0.html#197561631">(May 14 2020 at 14:17)</a>:</h4>
<p>I'm not saying you should do it. Many people contributed to this release. Many others could also help with moving mathlib onto it.</p>



<a name="197564292"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.12.0/near/197564292" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E12.2E0.html#197564292">(May 14 2020 at 14:38)</a>:</h4>
<p>Before I mess up again... what is a good branch name?</p>



<a name="197564378"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.12.0/near/197564378" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E12.2E0.html#197564378">(May 14 2020 at 14:38)</a>:</h4>
<p>I could of course go for <code>jmc-bump-to-3-12-0</code>, but I want something a bit more professional (-;</p>



<a name="197564754"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.12.0/near/197564754" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E12.2E0.html#197564754">(May 14 2020 at 14:41)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib/issues/2681">#2681</a> is the start of a draft PR</p>



<a name="197565657"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.12.0/near/197565657" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jannis Limperg <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E12.2E0.html#197565657">(May 14 2020 at 14:47)</a>:</h4>
<p>I've added commits that fix all breakage due to my Lean PRs.</p>



<a name="197565926"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.12.0/near/197565926" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E12.2E0.html#197565926">(May 14 2020 at 14:49)</a>:</h4>
<p>I'll fix <code>logic/function</code></p>



<a name="197565951"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.12.0/near/197565951" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E12.2E0.html#197565951">(May 14 2020 at 14:49)</a>:</h4>
<p>Unless someone else is already on it</p>



<a name="197566184"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.12.0/near/197566184" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E12.2E0.html#197566184">(May 14 2020 at 14:51)</a>:</h4>
<p><span class="user-mention" data-user-id="214703">@Yury G. Kudryashov</span> Please go ahead. I tried a global replace, but borked it.</p>



<a name="197569454"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.12.0/near/197569454" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E12.2E0.html#197569454">(May 14 2020 at 15:10)</a>:</h4>
<p><span class="user-mention" data-user-id="214703">@Yury G. Kudryashov</span> Doesn't it need more changes in the rest of mathlib?</p>



<a name="197569489"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.12.0/near/197569489" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E12.2E0.html#197569489">(May 14 2020 at 15:11)</a>:</h4>
<p>Yes, it does.</p>



<a name="197569553"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.12.0/near/197569553" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E12.2E0.html#197569553">(May 14 2020 at 15:11)</a>:</h4>
<p>Can we do a smart global search replace?</p>



<a name="197569604"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.12.0/near/197569604" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E12.2E0.html#197569604">(May 14 2020 at 15:11)</a>:</h4>
<p>I did things in the wrong order, and ended up replacing substrings that shouldn't have been replaced.</p>



<a name="197569605"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.12.0/near/197569605" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E12.2E0.html#197569605">(May 14 2020 at 15:11)</a>:</h4>
<p>No, I want to use dot notation.</p>



<a name="197569674"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.12.0/near/197569674" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E12.2E0.html#197569674">(May 14 2020 at 15:12)</a>:</h4>
<p>Aha, so it's going to be a lot of work.</p>



<a name="197569701"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.12.0/near/197569701" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E12.2E0.html#197569701">(May 14 2020 at 15:12)</a>:</h4>
<p>I thought we could do that in a follow-up PR.</p>



<a name="197569709"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.12.0/near/197569709" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E12.2E0.html#197569709">(May 14 2020 at 15:12)</a>:</h4>
<p>I'm looking for editable grep mode for Emacs.</p>



<a name="197569769"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.12.0/near/197569769" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E12.2E0.html#197569769">(May 14 2020 at 15:12)</a>:</h4>
<p>Sorry, can't help you there. Maybe Reid can?</p>



<a name="197569819"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.12.0/near/197569819" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E12.2E0.html#197569819">(May 14 2020 at 15:13)</a>:</h4>
<p>OK, let's postpone this to another PR. I'll try to make <code>sed</code> do the job.</p>



<a name="197571822"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.12.0/near/197571822" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E12.2E0.html#197571822">(May 14 2020 at 15:25)</a>:</h4>
<p>Thanks for pushing <span class="user-mention" data-user-id="214703">@Yury G. Kudryashov</span></p>



<a name="197571836"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.12.0/near/197571836" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E12.2E0.html#197571836">(May 14 2020 at 15:25)</a>:</h4>
<p>Next up is</p>
<div class="codehilite"><pre><span></span><code><span class="n">mathlib</span><span class="bp">/</span><span class="n">src</span><span class="bp">/</span><span class="n">data</span><span class="bp">/</span><span class="n">set</span><span class="bp">/</span><span class="n">basic</span><span class="bp">.</span><span class="n">lean</span><span class="o">:</span><span class="mi">584</span><span class="o">:</span><span class="mi">62</span><span class="o">:</span> <span class="n">error</span><span class="o">:</span> <span class="n">type</span> <span class="n">mismatch</span><span class="o">,</span> <span class="n">term</span>
  <span class="n">rfl</span>
<span class="n">has</span> <span class="n">type</span>
  <span class="err">?</span><span class="n">m_2</span> <span class="bp">=</span> <span class="err">?</span><span class="n">m_2</span>
<span class="n">but</span> <span class="n">is</span> <span class="n">expected</span> <span class="n">to</span> <span class="k">have</span> <span class="n">type</span>
  <span class="o">{</span><span class="n">a</span><span class="o">}</span> <span class="bp">=</span> <span class="o">{</span><span class="n">a</span><span class="o">}</span>
</code></pre></div>



<a name="197571871"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.12.0/near/197571871" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E12.2E0.html#197571871">(May 14 2020 at 15:25)</a>:</h4>
<p>I guess this is now because of the <code>has_singleton</code> stuff.</p>



<a name="197572002"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.12.0/near/197572002" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E12.2E0.html#197572002">(May 14 2020 at 15:26)</a>:</h4>
<p>oh boy</p>



<a name="197572373"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.12.0/near/197572373" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E12.2E0.html#197572373">(May 14 2020 at 15:28)</a>:</h4>
<p>What is the best way forward?</p>



<a name="197572399"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.12.0/near/197572399" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E12.2E0.html#197572399">(May 14 2020 at 15:28)</a>:</h4>
<div class="codehilite"><pre><span></span><code><span class="kn">theorem</span> <span class="n">singleton_def</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">α</span><span class="o">)</span> <span class="o">:</span> <span class="o">({</span><span class="n">a</span><span class="o">}</span> <span class="o">:</span> <span class="n">set</span> <span class="n">α</span><span class="o">)</span> <span class="bp">=</span> <span class="n">insert</span> <span class="n">a</span> <span class="err">∅</span> <span class="o">:=</span> <span class="n">rfl</span>
</code></pre></div>



<a name="197572419"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.12.0/near/197572419" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E12.2E0.html#197572419">(May 14 2020 at 15:29)</a>:</h4>
<p>Are we going to rename such things in this PR?</p>



<a name="197572474"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.12.0/near/197572474" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E12.2E0.html#197572474">(May 14 2020 at 15:29)</a>:</h4>
<p>I guess it should become <code>singleton_eq_insert_empty_right</code>?</p>



<a name="197572570"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.12.0/near/197572570" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E12.2E0.html#197572570">(May 14 2020 at 15:30)</a>:</h4>
<p>I would like to keep this PR as small as possible, I think. And then clean up/massage in later PRs</p>



<a name="197573355"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.12.0/near/197573355" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E12.2E0.html#197573355">(May 14 2020 at 15:36)</a>:</h4>
<p>I've fixed <code>data/set/basic</code></p>



<a name="197573561"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.12.0/near/197573561" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E12.2E0.html#197573561">(May 14 2020 at 15:37)</a>:</h4>
<p><span class="user-mention" data-user-id="214703">@Yury G. Kudryashov</span> I still get errors related to injective/surjective</p>



<a name="197573591"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.12.0/near/197573591" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E12.2E0.html#197573591">(May 14 2020 at 15:37)</a>:</h4>
<p>In <code>data.equiv.basic</code></p>



<a name="197573643"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.12.0/near/197573643" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E12.2E0.html#197573643">(May 14 2020 at 15:37)</a>:</h4>
<p>I'm pushing one or two renames at a time.</p>



<a name="197574355"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.12.0/near/197574355" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E12.2E0.html#197574355">(May 14 2020 at 15:42)</a>:</h4>
<p><code>singleton_def</code> is now <code>(insert_singleton_eq a).symm</code></p>



<a name="197574398"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.12.0/near/197574398" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E12.2E0.html#197574398">(May 14 2020 at 15:42)</a>:</h4>
<p>Where <code>insert_singleton_eq</code> comes from <code>is_lawful_singleton</code> instance.</p>



<a name="197574473"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.12.0/near/197574473" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E12.2E0.html#197574473">(May 14 2020 at 15:43)</a>:</h4>
<p>And <code>mem_singleton_iff</code> is now <code>iff.rfl</code></p>



<a name="197575341"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.12.0/near/197575341" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E12.2E0.html#197575341">(May 14 2020 at 15:49)</a>:</h4>
<p>Ok... is that better than what I did? Or does it not matter?</p>



<a name="197575370"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.12.0/near/197575370" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E12.2E0.html#197575370">(May 14 2020 at 15:49)</a>:</h4>
<p>Dinner now... I'll be back later.</p>



<a name="197575428"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.12.0/near/197575428" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E12.2E0.html#197575428">(May 14 2020 at 15:49)</a>:</h4>
<p>I answered before looking at your diff</p>



<a name="197575584"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.12.0/near/197575584" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E12.2E0.html#197575584">(May 14 2020 at 15:51)</a>:</h4>
<p>No need to use <code>ext</code></p>



<a name="197576172"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.12.0/near/197576172" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E12.2E0.html#197576172">(May 14 2020 at 15:54)</a>:</h4>
<p>In <code>finset</code> I'm going to reuse <code>finset.singleton</code> for <code>has_singleton</code>.</p>



<a name="197589570"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.12.0/near/197589570" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E12.2E0.html#197589570">(May 14 2020 at 17:27)</a>:</h4>
<p><span class="user-mention" data-user-id="214703">@Yury G. Kudryashov</span> What's the status here?</p>



<a name="197589584"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.12.0/near/197589584" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E12.2E0.html#197589584">(May 14 2020 at 17:27)</a>:</h4>
<p>Something I can help with?</p>



<a name="197589629"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.12.0/near/197589629" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E12.2E0.html#197589629">(May 14 2020 at 17:27)</a>:</h4>
<p>I'm working on <code>finset</code>. You can choose some other file.</p>



<a name="197590047"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.12.0/near/197590047" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E12.2E0.html#197590047">(May 14 2020 at 17:30)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> </p>
<div class="codehilite"><pre><span></span><code><span class="n">tactic</span><span class="bp">/</span><span class="n">ring</span><span class="bp">.</span><span class="n">lean</span><span class="o">:</span><span class="mi">106</span><span class="o">:</span><span class="mi">9</span><span class="o">:</span> <span class="n">warning</span><span class="o">:</span> <span class="n">failed</span> <span class="n">to</span> <span class="n">generate</span> <span class="n">bytecode</span> <span class="n">for</span> <span class="err">&#39;</span><span class="n">eval_horner&#39;</span>
<span class="n">code</span> <span class="n">generation</span> <span class="n">failed</span><span class="o">,</span> <span class="n">VM</span> <span class="n">does</span> <span class="n">not</span> <span class="k">have</span> <span class="n">code</span> <span class="n">for</span> <span class="err">&#39;</span><span class="n">tactic</span><span class="bp">.</span><span class="n">norm_num&#39;</span>
<span class="n">tactic</span><span class="bp">/</span><span class="n">ring</span><span class="bp">.</span><span class="n">lean</span><span class="o">:</span><span class="mi">143</span><span class="o">:</span><span class="mi">9</span><span class="o">:</span> <span class="n">error</span><span class="o">:</span> <span class="n">equation</span> <span class="n">compiler</span> <span class="n">failed</span> <span class="n">to</span> <span class="n">generate</span> <span class="n">bytecode</span> <span class="n">for</span> <span class="err">&#39;</span><span class="n">eval_add</span><span class="bp">._</span><span class="n">main&#39;</span>
<span class="n">nested</span> <span class="n">exception</span> <span class="n">message</span><span class="o">:</span>
<span class="n">code</span> <span class="n">generation</span> <span class="n">failed</span><span class="o">,</span> <span class="n">VM</span> <span class="n">does</span> <span class="n">not</span> <span class="k">have</span> <span class="n">code</span> <span class="n">for</span> <span class="err">&#39;</span><span class="n">tactic</span><span class="bp">.</span><span class="n">norm_num&#39;</span>
<span class="n">tactic</span><span class="bp">/</span><span class="n">ring</span><span class="bp">.</span><span class="n">lean</span><span class="o">:</span><span class="mi">205</span><span class="o">:</span><span class="mi">9</span><span class="o">:</span> <span class="n">error</span><span class="o">:</span> <span class="n">equation</span> <span class="n">compiler</span> <span class="n">failed</span> <span class="n">to</span> <span class="n">generate</span> <span class="n">bytecode</span> <span class="n">for</span> <span class="err">&#39;</span><span class="n">eval_neg</span><span class="bp">._</span><span class="n">main&#39;</span>
<span class="n">nested</span> <span class="n">exception</span> <span class="n">message</span><span class="o">:</span>
<span class="n">code</span> <span class="n">generation</span> <span class="n">failed</span><span class="o">,</span> <span class="n">VM</span> <span class="n">does</span> <span class="n">not</span> <span class="k">have</span> <span class="n">code</span> <span class="n">for</span> <span class="err">&#39;</span><span class="n">tactic</span><span class="bp">.</span><span class="n">norm_num&#39;</span>
</code></pre></div>


<p>Is this good or bad news?</p>



<a name="197590369"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.12.0/near/197590369" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E12.2E0.html#197590369">(May 14 2020 at 17:32)</a>:</h4>
<p>that's fine, <code>tactic.ring</code> was calling <code>tactic.norm_num</code> to evaluate some additions and multiplications, they just need to be redirected to the <code>norm_num</code> calls</p>



<a name="197590454"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.12.0/near/197590454" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E12.2E0.html#197590454">(May 14 2020 at 17:33)</a>:</h4>
<p>Is this something that a human sed like me can do?</p>



<a name="197590671"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.12.0/near/197590671" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E12.2E0.html#197590671">(May 14 2020 at 17:34)</a>:</h4>
<p>I guess the mere fact that <code>tactic.norm_num</code> still exists means that I didn't do a good job in my PR to core.</p>



<a name="197590727"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.12.0/near/197590727" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E12.2E0.html#197590727">(May 14 2020 at 17:35)</a>:</h4>
<p>But it's hidden in some file about <code>simp</code>.</p>



<a name="197590748"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.12.0/near/197590748" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E12.2E0.html#197590748">(May 14 2020 at 17:35)</a>:</h4>
<p><span class="user-mention" data-user-id="112680">@Johan Commelin</span> Please do not clean square rooms in a circular way: <a href="https://github.com/leanprover-community/lean/blob/aa5e30d24fefd13fb5b272522b9c08f9c5491d18/library/init/meta/simp_tactic.lean#L456">https://github.com/leanprover-community/lean/blob/aa5e30d24fefd13fb5b272522b9c08f9c5491d18/library/init/meta/simp_tactic.lean#L456</a></p>



<a name="197590874"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.12.0/near/197590874" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E12.2E0.html#197590874">(May 14 2020 at 17:36)</a>:</h4>
<p>But don't worry. It's not dangerous. It will just throw an error when you call it.  But it should be removed.</p>



<a name="197590925"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.12.0/near/197590925" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E12.2E0.html#197590925">(May 14 2020 at 17:37)</a>:</h4>
<p><span class="user-mention" data-user-id="110043">@Gabriel Ebner</span> Yup, I also just found it.</p>



<a name="197593797"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.12.0/near/197593797" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E12.2E0.html#197593797">(May 14 2020 at 17:58)</a>:</h4>
<p>Anyway, how should I fix this? What does</p>
<blockquote>
<p>redirected to the <code>norm_num</code> calls</p>
</blockquote>
<p>mean?</p>



<a name="197594204"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.12.0/near/197594204" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E12.2E0.html#197594204">(May 14 2020 at 18:01)</a>:</h4>
<p>I think you can replace calls to <code>tactic.norm_num</code> with calls to <code>norm_num.derive'</code>? Or maybe <code>derive</code>.</p>



<a name="197594328"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.12.0/near/197594328" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E12.2E0.html#197594328">(May 14 2020 at 18:02)</a>:</h4>
<p><code>derive'</code> seems right.</p>



<a name="197594523"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.12.0/near/197594523" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E12.2E0.html#197594523">(May 14 2020 at 18:03)</a>:</h4>
<p>Thx, let me try</p>



<a name="197594808"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.12.0/near/197594808" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E12.2E0.html#197594808">(May 14 2020 at 18:05)</a>:</h4>
<p>Hmmmz, doesn't seem to help. Same error message.</p>



<a name="197594822"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.12.0/near/197594822" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E12.2E0.html#197594822">(May 14 2020 at 18:05)</a>:</h4>
<p>I'll prep a PR shortly for this. You (I) can call the internal <code>norm_num</code> functions and avoid some of the dispatching</p>



<a name="197594959"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.12.0/near/197594959" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E12.2E0.html#197594959">(May 14 2020 at 18:06)</a>:</h4>
<p>it also allows us to cache instances across multiple <code>norm_num</code> invocations in the same <code>ring</code> call, which we couldn't do before, so a possible performance improvement</p>



<a name="197595020"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.12.0/near/197595020" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E12.2E0.html#197595020">(May 14 2020 at 18:07)</a>:</h4>
<p>For <code>eval_neg</code> it did help to tag on <code>.derive'</code></p>



<a name="197595258"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.12.0/near/197595258" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E12.2E0.html#197595258">(May 14 2020 at 18:09)</a>:</h4>
<p>Oh yeah, ignore me, I'm working on a version of mathlib like two commits before the norm_num update.</p>



<a name="197595267"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.12.0/near/197595267" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E12.2E0.html#197595267">(May 14 2020 at 18:09)</a>:</h4>
<p>Is the problem that <code>eval_add</code> is passing on a pair, and <code>norm_num.derive'</code> expects a single number?</p>



<a name="197595296"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.12.0/near/197595296" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E12.2E0.html#197595296">(May 14 2020 at 18:09)</a>:</h4>
<p><span class="user-mention" data-user-id="110596">@Rob Lewis</span> Ooh, it did fix 1 error (-;</p>



<a name="197595439"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.12.0/near/197595439" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E12.2E0.html#197595439">(May 14 2020 at 18:10)</a>:</h4>
<p>What's the problem with the drop in replacement of <code>derive'</code>?</p>



<a name="197595481"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.12.0/near/197595481" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E12.2E0.html#197595481">(May 14 2020 at 18:10)</a>:</h4>
<p>that should also work</p>



<a name="197595564"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.12.0/near/197595564" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E12.2E0.html#197595564">(May 14 2020 at 18:11)</a>:</h4>
<p>I really don't understand the error:</p>
<div class="codehilite"><pre><span></span><code><span class="n">equation</span> <span class="n">compiler</span> <span class="n">failed</span> <span class="n">to</span> <span class="n">generate</span> <span class="n">bytecode</span> <span class="n">for</span> <span class="err">&#39;</span><span class="n">eval_add</span><span class="bp">._</span><span class="n">main&#39;</span>
<span class="n">nested</span> <span class="n">exception</span> <span class="n">message</span><span class="o">:</span>
<span class="n">code</span> <span class="n">generation</span> <span class="n">failed</span><span class="o">,</span> <span class="n">VM</span> <span class="n">does</span> <span class="n">not</span> <span class="k">have</span> <span class="n">code</span> <span class="n">for</span> <span class="err">&#39;</span><span class="n">tactic</span><span class="bp">.</span><span class="n">norm_num&#39;</span>
</code></pre></div>



<a name="197595590"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.12.0/near/197595590" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E12.2E0.html#197595590">(May 14 2020 at 18:11)</a>:</h4>
<p>I don't see any reference to <code>tactic.norm_num</code> anymore</p>



<a name="197595679"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.12.0/near/197595679" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E12.2E0.html#197595679">(May 14 2020 at 18:12)</a>:</h4>
<p>/me stupid</p>



<a name="197595702"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.12.0/near/197595702" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E12.2E0.html#197595702">(May 14 2020 at 18:12)</a>:</h4>
<p>I missed an error higher up in the file</p>



<a name="197595717"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.12.0/near/197595717" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E12.2E0.html#197595717">(May 14 2020 at 18:12)</a>:</h4>
<p>It's all fixed now. Thanks Rob and Mario!</p>



<a name="197596810"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.12.0/near/197596810" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E12.2E0.html#197596810">(May 14 2020 at 18:20)</a>:</h4>
<p>Hmm, but <code>ring</code> is now failing in <code>tactic.omega.eq_elim</code> on:</p>
<div class="codehilite"><pre><span></span><code><span class="n">tactic</span> <span class="n">failed</span><span class="o">,</span> <span class="n">there</span> <span class="n">are</span> <span class="n">unsolved</span> <span class="n">goals</span>
<span class="n">state</span><span class="o">:</span>
<span class="n">v</span> <span class="o">:</span> <span class="bp">ℕ</span> <span class="bp">→</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">b</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">as</span> <span class="o">:</span> <span class="n">list</span> <span class="bp">ℤ</span><span class="o">,</span>
<span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span>
<span class="n">h1</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">&lt;</span> <span class="n">get</span> <span class="n">n</span> <span class="n">as</span><span class="o">,</span>
<span class="n">h2</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">=</span> <span class="n">term</span><span class="bp">.</span><span class="n">val</span> <span class="n">v</span> <span class="o">(</span><span class="n">b</span><span class="o">,</span> <span class="n">as</span><span class="o">),</span>
<span class="n">a_n</span> <span class="o">:</span> <span class="bp">ℤ</span> <span class="o">:=</span> <span class="n">get</span> <span class="n">n</span> <span class="n">as</span><span class="o">,</span>
<span class="n">m</span> <span class="o">:</span> <span class="bp">ℤ</span> <span class="o">:=</span> <span class="n">a_n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">,</span>
<span class="n">h3</span> <span class="o">:</span> <span class="n">m</span> <span class="bp">≠</span> <span class="mi">0</span>
<span class="err">⊢</span> <span class="o">(</span><span class="bp">-</span><span class="o">(</span><span class="n">a_n</span> <span class="bp">*</span> <span class="n">sgm</span> <span class="n">v</span> <span class="n">b</span> <span class="n">as</span> <span class="n">n</span><span class="o">)</span> <span class="bp">+</span> <span class="n">sym_sym</span> <span class="n">m</span> <span class="n">b</span> <span class="bp">+</span> <span class="n">coeffs</span><span class="bp">.</span><span class="n">val_except</span> <span class="n">n</span> <span class="n">v</span> <span class="o">(</span><span class="n">list</span><span class="bp">.</span><span class="n">map</span> <span class="o">(</span><span class="n">sym_sym</span> <span class="n">m</span><span class="o">)</span> <span class="n">as</span><span class="o">))</span> <span class="bp">*</span> <span class="n">m</span> <span class="bp">=</span>
    <span class="o">(</span><span class="n">sym_sym</span> <span class="n">m</span> <span class="n">b</span> <span class="bp">+</span> <span class="o">(</span><span class="n">coeffs</span><span class="bp">.</span><span class="n">val_except</span> <span class="n">n</span> <span class="n">v</span> <span class="o">(</span><span class="n">list</span><span class="bp">.</span><span class="n">map</span> <span class="o">(</span><span class="n">sym_sym</span> <span class="n">m</span><span class="o">)</span> <span class="n">as</span><span class="o">)</span> <span class="bp">-</span> <span class="n">a_n</span> <span class="bp">*</span> <span class="n">sgm</span> <span class="n">v</span> <span class="n">b</span> <span class="n">as</span> <span class="n">n</span><span class="o">))</span> <span class="bp">*</span> <span class="n">m</span>
</code></pre></div>



<a name="197597690"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.12.0/near/197597690" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E12.2E0.html#197597690">(May 14 2020 at 18:27)</a>:</h4>
<p>It's really weird, it's something that <code>ring</code> should easily solve.</p>



<a name="197598488"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.12.0/near/197598488" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E12.2E0.html#197598488">(May 14 2020 at 18:32)</a>:</h4>
<p>Ugly fix: <a href="https://github.com/leanprover-community/mathlib/pull/2681/commits/87e05736402caefbb7febac7983992a29616c04d">https://github.com/leanprover-community/mathlib/pull/2681/commits/87e05736402caefbb7febac7983992a29616c04d</a></p>



<a name="197599016"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.12.0/near/197599016" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E12.2E0.html#197599016">(May 14 2020 at 18:36)</a>:</h4>
<p>It seems that (all?) other errors are about singleton stuff. How's that going <span class="user-mention" data-user-id="214703">@Yury G. Kudryashov</span> ?</p>



<a name="197599141"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.12.0/near/197599141" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E12.2E0.html#197599141">(May 14 2020 at 18:37)</a>:</h4>
<p>Almost there.</p>



<a name="197599307"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.12.0/near/197599307" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E12.2E0.html#197599307">(May 14 2020 at 18:38)</a>:</h4>
<p>Fixed <code>multiset</code> and <code>finset</code> files.</p>



<a name="197599388"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.12.0/near/197599388" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E12.2E0.html#197599388">(May 14 2020 at 18:39)</a>:</h4>
<p>A new inconvenience: <code>(({a} : finset α) : set α)</code> is no longer defeq <code>{a}</code></p>



<a name="197599502"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.12.0/near/197599502" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bhavik Mehta <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E12.2E0.html#197599502">(May 14 2020 at 18:39)</a>:</h4>
<p>Oof I wonder if this is gonna kill my combinatorics project... We shall see! (At least I was warned by basically everyone that this would happen)</p>



<a name="197599716"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.12.0/near/197599716" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E12.2E0.html#197599716">(May 14 2020 at 18:41)</a>:</h4>
<p>I can't make <code>a ∈ ({b} : finset α)</code> defeq <code>a = b</code> because it comes from lists.</p>



<a name="197599788"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.12.0/near/197599788" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E12.2E0.html#197599788">(May 14 2020 at 18:41)</a>:</h4>
<p><span class="user-mention" data-user-id="246273">@Bhavik Mehta</span> you mean </p>
<blockquote>
<p><code>(({a} : finset α) : set α)</code> is no longer defeq <code>{a}</code><br>
? Are you using sets that much? I thought it would all be finset...</p>
</blockquote>



<a name="197599866"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.12.0/near/197599866" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bhavik Mehta <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E12.2E0.html#197599866">(May 14 2020 at 18:42)</a>:</h4>
<p>I mean all the set and finset changes</p>



<a name="197599907"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.12.0/near/197599907" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E12.2E0.html#197599907">(May 14 2020 at 18:42)</a>:</h4>
<p>Yury fixed all of mathlib in ~ 2hours</p>



<a name="197599933"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.12.0/near/197599933" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E12.2E0.html#197599933">(May 14 2020 at 18:42)</a>:</h4>
<p>No, I've just fixed <code>finset.lean</code></p>



<a name="197599962"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.12.0/near/197599962" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E12.2E0.html#197599962">(May 14 2020 at 18:42)</a>:</h4>
<p>Oooooh..... <span aria-label="no mouth" class="emoji emoji-1f636" role="img" title="no mouth">:no_mouth:</span></p>



<a name="197600032"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.12.0/near/197600032" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E12.2E0.html#197600032">(May 14 2020 at 18:43)</a>:</h4>
<p>This included removing <code>finset.singleton</code></p>



<a name="197600179"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.12.0/near/197600179" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bhavik Mehta <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E12.2E0.html#197600179">(May 14 2020 at 18:44)</a>:</h4>
<p>that's gonna hurt me</p>



<a name="197600228"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.12.0/near/197600228" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E12.2E0.html#197600228">(May 14 2020 at 18:44)</a>:</h4>
<p>You just use <code>({a} : finset α)</code> instead</p>



<a name="197600270"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.12.0/near/197600270" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E12.2E0.html#197600270">(May 14 2020 at 18:44)</a>:</h4>
<p><code>ring</code> fails in <code>quadratic_discriminant</code></p>



<a name="197600272"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.12.0/near/197600272" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bhavik Mehta <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E12.2E0.html#197600272">(May 14 2020 at 18:44)</a>:</h4>
<p>oh fair enough shouldn't be too bad then</p>



<a name="197600344"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.12.0/near/197600344" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E12.2E0.html#197600344">(May 14 2020 at 18:45)</a>:</h4>
<p>You should PR your partial progress.</p>



<a name="197600372"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.12.0/near/197600372" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E12.2E0.html#197600372">(May 14 2020 at 18:45)</a>:</h4>
<p>Exactly, if you'd PR'd it to mathlib then Yury would be fixing your code right now too <span aria-label="joy" class="emoji emoji-1f602" role="img" title="joy">:joy:</span></p>



<a name="197600480"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.12.0/near/197600480" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Hughes <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E12.2E0.html#197600480">(May 14 2020 at 18:46)</a>:</h4>
<p>Isn't <code>fold op [a] </code> defeq to <code>a</code> now on lists. I thought there was a change at some point. So if <code>mem</code> was defined using fold then the defeq might work.</p>



<a name="197600526"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.12.0/near/197600526" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bhavik Mehta <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E12.2E0.html#197600526">(May 14 2020 at 18:46)</a>:</h4>
<p>Yeah I know this is my fault</p>



<a name="197600641"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.12.0/near/197600641" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bhavik Mehta <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E12.2E0.html#197600641">(May 14 2020 at 18:47)</a>:</h4>
<p>my real hope is that this makes singleton finsets easier to use so that some of my less pleasant proofs can actually be improved</p>



<a name="197600669"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.12.0/near/197600669" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E12.2E0.html#197600669">(May 14 2020 at 18:47)</a>:</h4>
<p>But this will break <code>a ∈ b::s</code> defeq <code>a = b ∨ a ∈ s</code>.</p>



<a name="197600950"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.12.0/near/197600950" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E12.2E0.html#197600950">(May 14 2020 at 18:49)</a>:</h4>
<p>I think <code>ring</code> is simply broken.</p>



<a name="197601004"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.12.0/near/197601004" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E12.2E0.html#197601004">(May 14 2020 at 18:49)</a>:</h4>
<p>I fixed the errors in <code>tactic/ring</code> but I think I "broke" it at the same time.</p>



<a name="197601133"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.12.0/near/197601133" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E12.2E0.html#197601133">(May 14 2020 at 18:50)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> I can't fix this, I fear.</p>



<a name="197624109"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.12.0/near/197624109" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E12.2E0.html#197624109">(May 14 2020 at 22:03)</a>:</h4>
<p>I fixed a few more files. Waiting for a fixed <code>tactic/ring</code>.</p>



<a name="197645126"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.12.0/near/197645126" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E12.2E0.html#197645126">(May 15 2020 at 03:35)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> Could you please take a look at <code>ring</code>?</p>



<a name="197645172"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.12.0/near/197645172" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E12.2E0.html#197645172">(May 15 2020 at 03:36)</a>:</h4>
<p>I'm working on it as we speak</p>



<a name="197645270"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.12.0/near/197645270" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E12.2E0.html#197645270">(May 15 2020 at 03:39)</a>:</h4>
<p>Awesome</p>



<a name="197645411"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.12.0/near/197645411" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E12.2E0.html#197645411">(May 15 2020 at 03:43)</a>:</h4>
<p>So I guess we should merge <a href="https://github.com/leanprover-community/mathlib/issues/2685">#2685</a> (new <code>norm_num</code> in <code>ring</code>) before the bump to 3.12.0</p>



<a name="197646535"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.12.0/near/197646535" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E12.2E0.html#197646535">(May 15 2020 at 04:10)</a>:</h4>
<p>It's really great to see all those <code>finset.singleton x</code> be replaced by <code>{x}</code>.</p>



<a name="197647443"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.12.0/near/197647443" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E12.2E0.html#197647443">(May 15 2020 at 04:31)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> Do you think it makes sense to merge your PR into this bump PR already?</p>



<a name="197647449"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.12.0/near/197647449" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E12.2E0.html#197647449">(May 15 2020 at 04:31)</a>:</h4>
<p>Still keep them as separate PRs, of course</p>



<a name="197647491"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.12.0/near/197647491" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E12.2E0.html#197647491">(May 15 2020 at 04:32)</a>:</h4>
<p>Really, my question is: Is your PR now stable, or do you still expect a lot of changes?</p>



<a name="197647499"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.12.0/near/197647499" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E12.2E0.html#197647499">(May 15 2020 at 04:32)</a>:</h4>
<p>If it compiles I'm happy with it</p>



<a name="197647756"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.12.0/near/197647756" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E12.2E0.html#197647756">(May 15 2020 at 04:39)</a>:</h4>
<p><span class="user-mention" data-user-id="214703">@Yury G. Kudryashov</span> I've merged Mario's ring fixes. Just so you know.</p>



<a name="197648593"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.12.0/near/197648593" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E12.2E0.html#197648593">(May 15 2020 at 05:01)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> Please have a look at <a href="https://github.com/leanprover-community/mathlib/pull/2681#discussion_r425563117">this docstring</a></p>



<a name="197648679"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.12.0/near/197648679" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E12.2E0.html#197648679">(May 15 2020 at 05:03)</a>:</h4>
<p><span class="user-mention" data-user-id="214703">@Yury G. Kudryashov</span> Oops, didn't realise you were still working on this branch</p>



<a name="197648732"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.12.0/near/197648732" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E12.2E0.html#197648732">(May 15 2020 at 05:04)</a>:</h4>
<p>I just pushed some stuff</p>



<a name="197648744"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.12.0/near/197648744" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E12.2E0.html#197648744">(May 15 2020 at 05:05)</a>:</h4>
<p>I'm afraid we can't really parallelise this...</p>



<a name="197648764"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.12.0/near/197648764" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E12.2E0.html#197648764">(May 15 2020 at 05:05)</a>:</h4>
<p>Or maybe I will just build, and ignore the first 20 errors.</p>



<a name="197648821"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.12.0/near/197648821" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E12.2E0.html#197648821">(May 15 2020 at 05:06)</a>:</h4>
<p>Or maybe I'll go eat something and work on a paper for a few hours.</p>



<a name="197650322"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.12.0/near/197650322" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E12.2E0.html#197650322">(May 15 2020 at 05:46)</a>:</h4>
<p>I pushed a bit. Now it's time to break my fast.</p>



<a name="197652077"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.12.0/near/197652077" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E12.2E0.html#197652077">(May 15 2020 at 06:26)</a>:</h4>
<p>Pushed determinant.</p>



<a name="197654285"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.12.0/near/197654285" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E12.2E0.html#197654285">(May 15 2020 at 07:07)</a>:</h4>
<p><span class="user-mention" data-user-id="214703">@Yury G. Kudryashov</span> Are you working on this again?</p>



<a name="197654440"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.12.0/near/197654440" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E12.2E0.html#197654440">(May 15 2020 at 07:08)</a>:</h4>
<p>I'll fix <code>fractional_ideal</code>, then make another break.</p>



<a name="197654465"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.12.0/near/197654465" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E12.2E0.html#197654465">(May 15 2020 at 07:08)</a>:</h4>
<p>Ok, good</p>



<a name="197655572"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.12.0/near/197655572" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E12.2E0.html#197655572">(May 15 2020 at 07:23)</a>:</h4>
<p>I pushed a fix to <code>topology/instances/ennreal</code></p>



<a name="197656926"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.12.0/near/197656926" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E12.2E0.html#197656926">(May 15 2020 at 07:43)</a>:</h4>
<p>Pushed <code>ring_theory/polynomial</code>, fixed <code>ring_theory/adjoin</code> locally</p>



<a name="197657067"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.12.0/near/197657067" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E12.2E0.html#197657067">(May 15 2020 at 07:44)</a>:</h4>
<p><span class="user-mention" data-user-id="214703">@Yury G. Kudryashov</span> Could you look at <a href="https://github.com/leanprover-community/mathlib/pull/2681/commits/5d1e279722120258238737ca5f95edacb4a6104b">https://github.com/leanprover-community/mathlib/pull/2681/commits/5d1e279722120258238737ca5f95edacb4a6104b</a></p>



<a name="197657073"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.12.0/near/197657073" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E12.2E0.html#197657073">(May 15 2020 at 07:44)</a>:</h4>
<p>I don't like it</p>



<a name="197658877"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.12.0/near/197658877" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E12.2E0.html#197658877">(May 15 2020 at 08:05)</a>:</h4>
<p><span class="user-mention" data-user-id="214703">@Yury G. Kudryashov</span> I've merged <code>ring_faster</code> again. And pushed.</p>



<a name="197659060"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.12.0/near/197659060" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E12.2E0.html#197659060">(May 15 2020 at 08:06)</a>:</h4>
<p>Pushed</p>



<a name="197667341"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.12.0/near/197667341" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E12.2E0.html#197667341">(May 15 2020 at 09:30)</a>:</h4>
<p>Opening borel_space</p>



<a name="197668158"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.12.0/near/197668158" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E12.2E0.html#197668158">(May 15 2020 at 09:38)</a>:</h4>
<p>That's about the last thing with errors, I think</p>



<a name="197668253"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.12.0/near/197668253" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E12.2E0.html#197668253">(May 15 2020 at 09:39)</a>:</h4>
<p>And something in <code>geometry/manifold/real_instances</code>. After that, maybe we're done <span aria-label="slight smile" class="emoji emoji-1f642" role="img" title="slight smile">:slight_smile:</span></p>



<a name="197668377"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.12.0/near/197668377" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E12.2E0.html#197668377">(May 15 2020 at 09:41)</a>:</h4>
<p>A side effect of the <code>singleton</code> change: we can't do <code>rintro rfl</code> on <code>(H : a ∈ {b})</code>. We can do <code>rintro (rfl|H)</code> but it unfolds <code>b</code>.</p>



<a name="197668842"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.12.0/near/197668842" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E12.2E0.html#197668842">(May 15 2020 at 09:45)</a>:</h4>
<p>Yup, I noticed this... but I think it's minor compared to all the wins that we got.</p>



<a name="197670087"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.12.0/near/197670087" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E12.2E0.html#197670087">(May 15 2020 at 09:58)</a>:</h4>
<p>Hooray, Yury pushed. Are we done?</p>



<a name="197670573"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.12.0/near/197670573" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E12.2E0.html#197670573">(May 15 2020 at 10:03)</a>:</h4>
<p>No</p>



<a name="197670754"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.12.0/near/197670754" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E12.2E0.html#197670754">(May 15 2020 at 10:04)</a>:</h4>
<p>Oho... <span aria-label="sad" class="emoji emoji-2639" role="img" title="sad">:sad:</span></p>



<a name="197670790"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.12.0/near/197670790" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E12.2E0.html#197670790">(May 15 2020 at 10:05)</a>:</h4>
<p>I see... measure_theory/integration. Are you on it <span class="user-mention" data-user-id="214703">@Yury G. Kudryashov</span> ? I can also do it</p>



<a name="197671029"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.12.0/near/197671029" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E12.2E0.html#197671029">(May 15 2020 at 10:07)</a>:</h4>
<p>Done.</p>



<a name="197671417"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.12.0/near/197671417" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E12.2E0.html#197671417">(May 15 2020 at 10:12)</a>:</h4>
<p><code>leanpkg build</code> succeeded.</p>



<a name="197673879"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.12.0/near/197673879" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E12.2E0.html#197673879">(May 15 2020 at 10:43)</a>:</h4>
<p>I've undrafted the PR</p>



<a name="197673887"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.12.0/near/197673887" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E12.2E0.html#197673887">(May 15 2020 at 10:43)</a>:</h4>
<p>But it depends on the norm_num PR</p>



<a name="197673892"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.12.0/near/197673892" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E12.2E0.html#197673892">(May 15 2020 at 10:43)</a>:</h4>
<p>Waiting for lint</p>



<a name="197699883"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.12.0/near/197699883" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E12.2E0.html#197699883">(May 15 2020 at 14:32)</a>:</h4>
<p><span class="user-mention silent" data-user-id="214703">Yury G. Kudryashov</span> <a href="#narrow/stream/113488-general/topic/Lean.203.2E12.2E0/near/197668377">said</a>:</p>
<blockquote>
<p>A side effect of the <code>singleton</code> change: we can't do <code>rintro rfl</code> on <code>(H : a ∈ {b})</code>. We can do <code>rintro (rfl|H)</code> but it unfolds <code>b</code>.</p>
</blockquote>
<p>Does <code>rintro &lt;&gt;</code> work? I usually try this when <code>rfl</code> doesn't work</p>



<a name="197719060"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.12.0/near/197719060" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E12.2E0.html#197719060">(May 15 2020 at 16:42)</a>:</h4>
<p>I think <a href="https://github.com/leanprover-community/mathlib/issues/2681">#2681</a> is ready</p>



<a name="197722110"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.12.0/near/197722110" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E12.2E0.html#197722110">(May 15 2020 at 17:04)</a>:</h4>
<p>There is a merge conflict in ring.</p>



<a name="197722417"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.12.0/near/197722417" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Lean.203.2E12.2E0.html#197722417">(May 15 2020 at 17:07)</a>:</h4>
<p>Fixed</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>