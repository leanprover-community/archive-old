---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/derangements.20formula.20(freek.2088).html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/derangements.20formula.20(freek.2088).html">derangements formula (freek 88)</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="237270937"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/derangements%20formula%20%28freek%2088%29/near/237270937" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Henry Swanson <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/derangements.20formula.20(freek.2088).html#237270937">(May 04 2021 at 05:35)</a>:</h4>
<p>Hello! It took me quite a while, because I struggled a lot with equivalences, but I have a proof of the derangement formula! <a href="https://pastebin.com/Mvx1TE2Y">https://pastebin.com/Mvx1TE2Y</a></p>
<p>This is a super rough draft -- lemme know if there's anything else I should do prior to making a PR. I'm mostly just stoked to have a sorry-free proof finally. I plan to:</p>
<ul>
<li>rename a bunch of lemmas to be more Lean-conventional</li>
<li>try to turn those <code>apply equiv.trans</code> sections into calc blocks</li>
<li>look for more small lemmas to extract, some of these are pretty long</li>
<li>figure out if equiv_rw can help me here</li>
</ul>
<p>Also, <span class="user-mention" data-user-id="112680">@Johan Commelin</span>  I know you suggested a finset approach, but I couldn't get the proofs of nodup working right. I feel like <code>nodup_perms_of_list</code> is the right kind of thing to pattern off of,  but that proof is a bit too dense for me.</p>



<a name="237272341"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/derangements%20formula%20%28freek%2088%29/near/237272341" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/derangements.20formula.20(freek.2088).html#237272341">(May 04 2021 at 05:59)</a>:</h4>
<p><span class="user-mention" data-user-id="402311">@Henry Swanson</span> congrats!</p>



<a name="237272611"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/derangements%20formula%20%28freek%2088%29/near/237272611" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/derangements.20formula.20(freek.2088).html#237272611">(May 04 2021 at 06:02)</a>:</h4>
<p>Your list of plans looks good. I would add three things before opening a PR:</p>
<ul>
<li>update the code to follow the style guide (you have lots of <code>{</code> and <code>}</code> on their own line, but mathlib compresses them like</li>
</ul>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">begin</span>
  <span class="n">split</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">some_tactic</span><span class="o">,</span>
    <span class="n">other_tactic</span> <span class="o">},</span>
  <span class="o">{</span> <span class="n">yet_other</span> <span class="n">tactic</span> <span class="o">}</span>
</code></pre></div>
<ul>
<li>add docstrings <code>/-- I'm a docstring, I start with two dashes -/</code> above every definition</li>
<li>add a module docstring <code>/-! I'm a module doc. I start with dash-bang, and I'm usually &gt; 10 lines long. -/</code> at the top of the file, explaining what's going on.</li>
</ul>



<a name="237276632"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/derangements%20formula%20%28freek%2088%29/near/237276632" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Henry Swanson <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/derangements.20formula.20(freek.2088).html#237276632">(May 04 2021 at 06:53)</a>:</h4>
<p>alrighty, that should be straightforward enough</p>
<p>btw, is there a linter? i didn't see one in the vscode extensions, but maybe there's a python script of some sort</p>



<a name="237276788"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/derangements%20formula%20%28freek%2088%29/near/237276788" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rémy Degenne <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/derangements.20formula.20(freek.2088).html#237276788">(May 04 2021 at 06:56)</a>:</h4>
<p>I you type <code>#lint</code> in the lean file, it will warn you about missing definitions and other issues for all statements in the file above the current line.</p>



<a name="237276836"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/derangements%20formula%20%28freek%2088%29/near/237276836" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/derangements.20formula.20(freek.2088).html#237276836">(May 04 2021 at 06:56)</a>:</h4>
<p>There isn't a style linter though</p>



<a name="237276860"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/derangements%20formula%20%28freek%2088%29/near/237276860" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rémy Degenne <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/derangements.20formula.20(freek.2088).html#237276860">(May 04 2021 at 06:56)</a>:</h4>
<p>It will not warn you about missing spaces or lone <code>{</code></p>



<a name="237595255"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/derangements%20formula%20%28freek%2088%29/near/237595255" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Henry Swanson <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/derangements.20formula.20(freek.2088).html#237595255">(May 06 2021 at 02:18)</a>:</h4>
<p>i'm following the <a href="https://leanprover-community.github.io/contribute/index.html">instructions</a> on how to contribute to mathlib; can i get permissions to add a new branch? my username is <code>HenrySwanson</code></p>



<a name="237595308"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/derangements%20formula%20%28freek%2088%29/near/237595308" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/derangements.20formula.20(freek.2088).html#237595308">(May 06 2021 at 02:19)</a>:</h4>
<p><span class="user-mention" data-user-id="402311">@Henry Swanson</span> invite sent! <a href="https://github.com/leanprover-community/mathlib/invitations">https://github.com/leanprover-community/mathlib/invitations</a></p>



<a name="237596137"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/derangements%20formula%20%28freek%2088%29/near/237596137" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Henry Swanson <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/derangements.20formula.20(freek.2088).html#237596137">(May 06 2021 at 02:30)</a>:</h4>
<p>submitted now, thanks! :D</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>