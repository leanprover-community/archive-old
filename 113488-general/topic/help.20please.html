---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/help.20please.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/help.20please.html">help please</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="219583124"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/help%20please/near/219583124" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Michael Werman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/help.20please.html#219583124">(Dec 11 2020 at 09:49)</a>:</h4>
<p>def rev {α : Type*}:<br>
Π {n m}, vector α n → vector α m → vector α (m+n)<br>
| 0  _   _  w           := w<br>
| (n+1) m (a :: v) w    := rev v (a::w)</p>
<p>i get<br>
equation type mismatch, term   rev v (a :: w)<br>
has type<br>
  vector α (m + 1 + n)<br>
but is expected to have type<br>
  vector α (m + (n + 1))</p>



<a name="219583467"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/help%20please/near/219583467" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/help.20please.html#219583467">(Dec 11 2020 at 09:53)</a>:</h4>
<p>yeah, this is annoying, because <code>m + 1 + n = m + (n + 1)</code>, but not by definition.</p>



<a name="219583542"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/help%20please/near/219583542" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/help.20please.html#219583542">(Dec 11 2020 at 09:54)</a>:</h4>
<p>So you will need to use a trick to move between <code>vector \a x</code> and <code>vector \a y</code> for <code>x = y</code>.</p>



<a name="219583812"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/help%20please/near/219583812" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/help.20please.html#219583812">(Dec 11 2020 at 09:57)</a>:</h4>
<p>I've never used <code>vector</code>. Is there something called <code>vector.cast</code> or <code>vector.congr</code>?</p>



<a name="219583875"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/help%20please/near/219583875" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/help.20please.html#219583875">(Dec 11 2020 at 09:58)</a>:</h4>
<p><a href="https://leanprover-community.github.io/mathlib_docs/find/vector">docs#vector</a></p>



<a name="219583887"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/help%20please/near/219583887" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/help.20please.html#219583887">(Dec 11 2020 at 09:58)</a>:</h4>
<p>you can use <code>eq.rec</code> or <code>rw</code> of course</p>



<a name="219583912"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/help%20please/near/219583912" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/help.20please.html#219583912">(Dec 11 2020 at 09:58)</a>:</h4>
<p>which is enough to get over this hurdle</p>



<a name="219588654"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/help%20please/near/219588654" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Michael Werman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/help.20please.html#219588654">(Dec 11 2020 at 10:45)</a>:</h4>
<p>where do i do this, eq.rec?</p>



<a name="219590317"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/help%20please/near/219590317" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/help.20please.html#219590317">(Dec 11 2020 at 11:00)</a>:</h4>
<p>do you have a <a href="https://leanprover-community.github.io/mwe.html">#mwe</a>? That code you wrote doesn't typecheck for me</p>



<a name="219591010"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/help%20please/near/219591010" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/help.20please.html#219591010">(Dec 11 2020 at 11:04)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">inductive</span> <span class="o">{</span><span class="n">u</span><span class="o">}</span> <span class="n">vector</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span> <span class="o">:</span> <span class="n">ℕ</span> <span class="bp">→</span> <span class="kt">Type</span> <span class="n">u</span>
<span class="bp">|</span> <span class="n">nil</span> <span class="o">:</span> <span class="n">vector</span> <span class="mi">0</span>
<span class="bp">|</span> <span class="n">cons</span> <span class="o">{</span><span class="n">n</span><span class="o">}</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">vector</span> <span class="n">n</span> <span class="bp">→</span> <span class="n">vector</span> <span class="o">(</span><span class="n">n</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span>

<span class="kn">local</span> <span class="kd">infixl</span> <span class="bp">`</span><span class="o">::</span><span class="bp">`</span> <span class="o">:=</span> <span class="n">vector.cons</span>

<span class="kd">def</span> <span class="n">rev</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">:</span> <span class="bp">Π</span> <span class="o">{</span><span class="n">n</span> <span class="n">m</span><span class="o">},</span> <span class="n">vector</span> <span class="n">α</span> <span class="n">n</span> <span class="bp">→</span> <span class="n">vector</span> <span class="n">α</span> <span class="n">m</span> <span class="bp">→</span> <span class="n">vector</span> <span class="n">α</span> <span class="o">(</span><span class="n">m</span><span class="bp">+</span><span class="n">n</span><span class="o">)</span>
<span class="bp">|</span> <span class="mi">0</span> <span class="n">_</span> <span class="n">_</span> <span class="n">w</span> <span class="o">:=</span> <span class="n">w</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">n</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span> <span class="n">m</span> <span class="o">(</span><span class="n">a</span> <span class="o">::</span> <span class="n">v</span><span class="o">)</span> <span class="n">w</span> <span class="o">:=</span>
  <span class="kd">by</span> <span class="n">rw</span> <span class="bp">←</span> <span class="n">nat.succ_add_eq_succ_add</span><span class="bp">;</span> <span class="n">exact</span> <span class="n">rev</span> <span class="n">v</span> <span class="o">(</span><span class="n">a</span> <span class="o">::</span> <span class="n">w</span><span class="o">)</span>
</code></pre></div>



<a name="219591023"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/help%20please/near/219591023" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/help.20please.html#219591023">(Dec 11 2020 at 11:04)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib/wiki/Code-in-backticks">#backticks</a></p>



<a name="220239777"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/help%20please/near/220239777" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Michael Werman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/help.20please.html#220239777">(Dec 17 2020 at 13:01)</a>:</h4>
<p>is there any way to do something like this<br>
not going through normal induction?</p>
<p>def f: ℕ → ℕ <br>
  |5 := 1<br>
  |_ := 1</p>
<p>example: ∀ (n: ℕ), f n =1<br>
  | 5 := rfl<br>
  | _ := rfl</p>



<a name="220239822"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/help%20please/near/220239822" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/help.20please.html#220239822">(Dec 17 2020 at 13:01)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib/wiki/Code-in-backticks">#backticks</a></p>



<a name="220240567"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/help%20please/near/220240567" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Michael Werman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/help.20please.html#220240567">(Dec 17 2020 at 13:08)</a>:</h4>
<p>is there any way to do something like this<br>
not going through normal induction?</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">def</span> <span class="n">f</span><span class="o">:</span> <span class="n">ℕ</span> <span class="bp">→</span> <span class="n">ℕ</span>
<span class="bp">|</span><span class="mi">5</span> <span class="o">:=</span> <span class="mi">1</span>
<span class="bp">|</span><span class="n">_</span> <span class="o">:=</span> <span class="mi">1</span>

<span class="kd">example</span><span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">n</span><span class="o">:</span> <span class="n">ℕ</span><span class="o">),</span> <span class="n">f</span> <span class="n">n</span> <span class="bp">=</span><span class="mi">1</span>
<span class="bp">|</span> <span class="mi">5</span> <span class="o">:=</span> <span class="n">rfl</span>
<span class="bp">|</span> <span class="n">_</span> <span class="o">:=</span> <span class="n">rfl</span>
</code></pre></div>



<a name="220240623"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/help%20please/near/220240623" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/help.20please.html#220240623">(Dec 17 2020 at 13:09)</a>:</h4>
<p>A formal answer to your question is:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">def</span> <span class="n">f</span> <span class="o">:</span> <span class="n">ℕ</span> <span class="bp">→</span> <span class="n">ℕ</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">_</span><span class="o">,</span> <span class="mi">1</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">n</span><span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="n">f</span> <span class="n">n</span> <span class="bp">=</span> <span class="mi">1</span> <span class="o">:=</span> <span class="n">rfl</span>
</code></pre></div>
<p>Perhaps you might want to say more clearly what you mean.</p>



<a name="220242713"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/help%20please/near/220242713" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Michael Werman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/help.20please.html#220242713">(Dec 17 2020 at 13:29)</a>:</h4>
<p>maybe this is a better example,<br>
i want the proof to follow the  way the function was built</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">def</span> <span class="n">f</span><span class="o">:</span> <span class="n">ℕ</span> <span class="bp">→</span> <span class="n">ℕ</span>
  <span class="bp">|</span><span class="mi">5</span> <span class="o">:=</span> <span class="mi">1</span>
  <span class="bp">|</span><span class="n">_</span> <span class="o">:=</span> <span class="mi">0</span>

  <span class="kd">example</span><span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">n</span><span class="o">:</span> <span class="n">ℕ</span><span class="o">),</span> <span class="o">(</span><span class="n">f</span> <span class="n">n</span> <span class="bp">=</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">∨</span> <span class="o">(</span><span class="n">f</span> <span class="n">n</span> <span class="bp">=</span> <span class="mi">0</span> <span class="o">)</span>
  <span class="bp">|</span><span class="mi">5</span><span class="o">:=</span><span class="kd">by</span> <span class="n">simp</span> <span class="bp">*</span>
  <span class="bp">|</span><span class="n">n</span><span class="o">:=</span><span class="kd">by</span> <span class="n">simp</span> <span class="bp">*</span>
</code></pre></div>



<a name="220242762"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/help%20please/near/220242762" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/help.20please.html#220242762">(Dec 17 2020 at 13:29)</a>:</h4>
<p>And in what sense does the example you posted not follow the way the function was built?</p>



<a name="220242787"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/help%20please/near/220242787" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/help.20please.html#220242787">(Dec 17 2020 at 13:29)</a>:</h4>
<p>Oh! It doesn't compile!</p>



<a name="220243361"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/help%20please/near/220243361" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/help.20please.html#220243361">(Dec 17 2020 at 13:35)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">tactic</span>

<span class="kd">def</span> <span class="n">f</span><span class="o">:</span> <span class="n">ℕ</span> <span class="bp">→</span> <span class="n">ℕ</span>
  <span class="bp">|</span><span class="mi">5</span> <span class="o">:=</span> <span class="mi">1</span>
  <span class="bp">|</span><span class="n">_</span> <span class="o">:=</span> <span class="mi">0</span>

<span class="kd">lemma</span> <span class="n">hf</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="n">f</span> <span class="n">n</span> <span class="bp">=</span> <span class="k">if</span> <span class="n">n</span> <span class="bp">=</span> <span class="mi">5</span> <span class="k">then</span> <span class="mi">1</span> <span class="k">else</span> <span class="mi">0</span> <span class="o">:=</span>
<span class="kd">by</span> <span class="n">delta</span> <span class="n">f</span><span class="bp">;</span> <span class="n">refl</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">n</span><span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">f</span> <span class="n">n</span> <span class="bp">=</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">∨</span> <span class="o">(</span><span class="n">f</span> <span class="n">n</span> <span class="bp">=</span> <span class="mi">0</span> <span class="o">)</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">rw</span> <span class="n">hf</span><span class="o">,</span>
  <span class="n">split_ifs</span><span class="bp">;</span>
  <span class="n">simp</span>
<span class="kd">end</span>
</code></pre></div>
<p>This is probably not at all what you want.</p>



<a name="220243410"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/help%20please/near/220243410" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/help.20please.html#220243410">(Dec 17 2020 at 13:35)</a>:</h4>
<p>But it does show that internally <code>f</code> is defined using an if/then statement.</p>



<a name="220243562"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/help%20please/near/220243562" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/help.20please.html#220243562">(Dec 17 2020 at 13:36)</a>:</h4>
<p><span class="user-mention" data-user-id="285071">@Michael Werman</span> Is it an option for you to use</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">def</span> <span class="n">f</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="n">ℕ</span> <span class="o">:=</span>
<span class="k">if</span> <span class="n">n</span> <span class="bp">=</span> <span class="mi">5</span> <span class="k">then</span> <span class="mi">1</span> <span class="k">else</span> <span class="mi">0</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">f</span> <span class="n">n</span> <span class="bp">=</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">∨</span> <span class="o">(</span><span class="n">f</span> <span class="n">n</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">)</span> <span class="o">:=</span>
<span class="k">if</span> <span class="n">h</span> <span class="o">:</span> <span class="n">n</span> <span class="bp">=</span> <span class="mi">5</span> <span class="k">then</span> <span class="kd">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">f</span><span class="o">,</span><span class="bp">*</span><span class="o">]</span> <span class="k">else</span> <span class="kd">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">f</span><span class="o">,</span><span class="bp">*</span><span class="o">]</span>
</code></pre></div>



<a name="220243645"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/help%20please/near/220243645" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/help.20please.html#220243645">(Dec 17 2020 at 13:37)</a>:</h4>
<p>I was hoping the <code>match _, rfl</code> trick could help here, but it doesn't:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">example</span> <span class="o">(</span><span class="n">n</span><span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="n">f</span> <span class="n">n</span> <span class="bp">=</span> <span class="mi">1</span> <span class="o">:=</span>
<span class="k">match</span> <span class="n">_</span><span class="o">,</span> <span class="n">rfl</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">n'</span><span class="o">,</span> <span class="n">n'</span> <span class="bp">=</span> <span class="n">n</span> <span class="bp">→</span> <span class="n">_</span> <span class="k">with</span>
  <span class="bp">|</span> <span class="mi">5</span><span class="o">,</span> <span class="n">h5</span> <span class="o">:=</span> <span class="n">rfl</span>
  <span class="bp">|</span> <span class="n">n</span><span class="o">,</span> <span class="n">h_useless</span> <span class="o">:=</span> <span class="n">sorry</span>
<span class="kd">end</span>
</code></pre></div>



<a name="220244410"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/help%20please/near/220244410" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/help.20please.html#220244410">(Dec 17 2020 at 13:44)</a>:</h4>
<p>This works but I don't think it's a great solution:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">example</span> <span class="o">(</span><span class="n">n</span><span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="n">f</span> <span class="n">n</span> <span class="bp">=</span> <span class="mi">1</span> <span class="bp">∨</span> <span class="n">f</span> <span class="n">n</span> <span class="bp">=</span> <span class="mi">0</span> <span class="o">:=</span>
<span class="k">match</span> <span class="n">n</span><span class="o">,</span> <span class="n">decidable.em</span> <span class="n">_</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">n'</span><span class="o">,</span> <span class="n">n'</span> <span class="bp">=</span> <span class="mi">5</span> <span class="bp">∨</span> <span class="n">n'</span> <span class="bp">≠</span> <span class="mi">5</span> <span class="bp">→</span> <span class="n">_</span> <span class="k">with</span>
  <span class="bp">|</span> <span class="mi">5</span><span class="o">,</span> <span class="n">_</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">f</span><span class="o">]</span>
  <span class="bp">|</span> <span class="n">_</span><span class="o">,</span> <span class="n">or.inr</span> <span class="n">h_not_5</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">f</span><span class="o">,</span> <span class="n">h_not_5</span><span class="o">]</span>
<span class="kd">end</span>
</code></pre></div>



<a name="220244660"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/help%20please/near/220244660" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Michael Werman <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/help.20please.html#220244660">(Dec 17 2020 at 13:47)</a>:</h4>
<p>so the pattern matching doesnt know that it is an "if then else" by itself?</p>



<a name="220245094"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/help%20please/near/220245094" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/help.20please.html#220245094">(Dec 17 2020 at 13:51)</a>:</h4>
<p>The pattern matching doesn't make <code>h</code> available that <span class="user-mention" data-user-id="112680">@Johan Commelin</span> uses in his proof</p>



<a name="220245903"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/help%20please/near/220245903" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/help.20please.html#220245903">(Dec 17 2020 at 13:59)</a>:</h4>
<p>This does seem like an artificial example though, with the 5. You can do</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="bp">|</span> <span class="mi">0</span> <span class="o">:=</span> <span class="bp">...</span>
<span class="bp">|</span> <span class="mi">1</span> <span class="o">:=</span> <span class="bp">...</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">2</span><span class="o">)</span> <span class="o">:=</span> <span class="bp">...</span>
</code></pre></div>
<p>and in this case the equation compiler (the thing doing the pattern matching) knows everything (as n+2&gt;=2).</p>



<a name="220247347"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/help%20please/near/220247347" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/help.20please.html#220247347">(Dec 17 2020 at 14:10)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">def</span> <span class="n">f</span> <span class="o">:</span> <span class="n">ℕ</span> <span class="bp">→</span> <span class="n">ℕ</span>
<span class="bp">|</span> <span class="mi">5</span> <span class="o">:=</span> <span class="mi">1</span>
<span class="bp">|</span> <span class="n">_</span> <span class="o">:=</span> <span class="mi">1</span>

<span class="k">#print</span> <span class="kd">prefix</span> <span class="n">f</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">n</span><span class="o">)</span> <span class="o">(</span><span class="n">hn</span> <span class="o">:</span> <span class="n">n</span> <span class="bp">≠</span> <span class="mi">5</span><span class="o">)</span> <span class="o">:</span> <span class="n">f</span> <span class="n">n</span> <span class="bp">=</span> <span class="mi">1</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">rw</span> <span class="n">f</span><span class="o">,</span>
  <span class="c1">-- ⊢ ¬n = 5</span>
<span class="kd">end</span>
</code></pre></div>



<a name="220247370"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/help%20please/near/220247370" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/help.20please.html#220247370">(Dec 17 2020 at 14:11)</a>:</h4>
<p>^ a sneak peek into Lean's mechanics</p>



<a name="220248724"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/help%20please/near/220248724" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/help.20please.html#220248724">(Dec 17 2020 at 14:23)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">def</span> <span class="n">f</span> <span class="o">:</span> <span class="n">ℕ</span> <span class="bp">→</span> <span class="n">ℕ</span>
<span class="bp">|</span> <span class="mi">5</span> <span class="o">:=</span> <span class="mi">0</span>
<span class="bp">|</span> <span class="n">_</span> <span class="o">:=</span> <span class="mi">1</span>

<span class="kd">example</span> <span class="o">:</span> <span class="n">f</span> <span class="mi">5</span> <span class="bp">=</span> <span class="mi">0</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">rw</span> <span class="n">f</span><span class="o">,</span>
  <span class="c">/-</span><span class="cm"></span>
<span class="cm">  ⊢ 1 = 0</span>
<span class="cm">  ⊢ ¬5 = 5</span>
<span class="cm">  -/</span>
<span class="kd">end</span>
</code></pre></div>
<p>lol</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>