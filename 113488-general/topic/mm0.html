---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/mm0.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html">mm0</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="179311733"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179311733" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179311733">(Oct 29 2019 at 09:20)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> Do you plan on having some Lean â†’ MM0 compiler? Does such a thing even make sense to have?</p>



<a name="179311760"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179311760" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179311760">(Oct 29 2019 at 09:21)</a>:</h4>
<p>Yes it makes sense to have, and it would be valuable too as a way to prove consistency of lean (i.e. formally verifying my thesis)</p>



<a name="179311824"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179311824" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179311824">(Oct 29 2019 at 09:22)</a>:</h4>
<p>it's certainly easier to do than any other DTT based system from sheer familiarity and a precise specification, but DTT is still complicated</p>



<a name="179311831"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179311831" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179311831">(Oct 29 2019 at 09:22)</a>:</h4>
<p>Aha, that's about what I expected</p>



<a name="179311857"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179311857" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179311857">(Oct 29 2019 at 09:23)</a>:</h4>
<p>Also... is there some Makefile that I can use to compile stuff in your repo?</p>



<a name="179311872"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179311872" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179311872">(Oct 29 2019 at 09:23)</a>:</h4>
<p>Which incantations do I need to get <code>mm0-c</code> and friends working?</p>



<a name="179311884"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179311884" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179311884">(Oct 29 2019 at 09:23)</a>:</h4>
<p>no makefile, but most of the things there are one line compile commands</p>



<a name="179311901"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179311901" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179311901">(Oct 29 2019 at 09:23)</a>:</h4>
<p>to compile mm0-c, do <code>gcc main.c</code></p>



<a name="179311961"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179311961" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179311961">(Oct 29 2019 at 09:24)</a>:</h4>
<p>to compile mm0-hs, <code>stack install mm0-hs</code> from the mm0-hs directory</p>



<a name="179311992"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179311992" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179311992">(Oct 29 2019 at 09:24)</a>:</h4>
<p>The last one needs a stable internet connection, I fear</p>



<a name="179311999"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179311999" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179311999">(Oct 29 2019 at 09:24)</a>:</h4>
<p>I'm on mobile atm</p>



<a name="179312047"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179312047" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179312047">(Oct 29 2019 at 09:25)</a>:</h4>
<p>Ooh, there is actually a <code>make.sh</code> in that directory (-;</p>



<a name="179312117"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179312117" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179312117">(Oct 29 2019 at 09:26)</a>:</h4>
<p>that adds a few more optimizations (profile guided optimization based on the result of verifying <code>peano.mmb</code>)</p>



<a name="179312172"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179312172" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179312172">(Oct 29 2019 at 09:27)</a>:</h4>
<p>I see</p>



<a name="179312176"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179312176" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179312176">(Oct 29 2019 at 09:28)</a>:</h4>
<p>it's hard to write C programs without a complicated compiler invocation, but it's so much easier to use when you can</p>



<a name="179312237"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179312237" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179312237">(Oct 29 2019 at 09:28)</a>:</h4>
<p>And if I run <code>./a.out ../example/peano.mmb</code> and there is no output. This means all proofs are verfied?</p>



<a name="179312250"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179312250" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179312250">(Oct 29 2019 at 09:28)</a>:</h4>
<p>yes</p>



<a name="179312275"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179312275" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179312275">(Oct 29 2019 at 09:29)</a>:</h4>
<p>check the error code to be sure, but it should also give you an error dump if something goes wrong</p>



<a name="179312298"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179312298" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179312298">(Oct 29 2019 at 09:29)</a>:</h4>
<p>This <code>main.gcda</code> file is containing optimizations for <code>gcc</code>?</p>



<a name="179312367"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179312367" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179312367">(Oct 29 2019 at 09:30)</a>:</h4>
<p>Why does it get generated everytime?</p>



<a name="179312370"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179312370" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179312370">(Oct 29 2019 at 09:30)</a>:</h4>
<p>yes, you turn on some profile generation flag in gcc and it instruments the program to produce that file as it runs, then you feed it back into the compiler for a second build</p>



<a name="179312396"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179312396" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179312396">(Oct 29 2019 at 09:30)</a>:</h4>
<p>But the second build should leave me with an <code>a.out</code> that doesn't generate those files, right?</p>



<a name="179312402"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179312402" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179312402">(Oct 29 2019 at 09:30)</a>:</h4>
<p>the second build doesn't generate the file</p>



<a name="179312428"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179312428" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179312428">(Oct 29 2019 at 09:31)</a>:</h4>
<p>but it doesn't clean it up either</p>



<a name="179312434"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179312434" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179312434">(Oct 29 2019 at 09:31)</a>:</h4>
<p>Doesn't work for me.</p>



<a name="179312500"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179312500" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179312500">(Oct 29 2019 at 09:32)</a>:</h4>
<p>I run <code>./make.sh</code> and then <code>./a.out ../examples/peano.mmb</code>. Result: command passes without errors, but I do get the gcda file</p>



<a name="179312514"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179312514" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179312514">(Oct 29 2019 at 09:32)</a>:</h4>
<p>I should note that <code>./make.sh</code> gave some errors from the <code>gcc</code> run</p>



<a name="179312521"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179312521" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179312521">(Oct 29 2019 at 09:32)</a>:</h4>
<p>Errrr... warnigns</p>



<a name="179312534"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179312534" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179312534">(Oct 29 2019 at 09:32)</a>:</h4>
<div class="codehilite"><pre><span></span>In file included from verifier_types.c:2,
                 from verifier.c:1,
                 from main.c:10:
index.c: In function â€˜init_indexâ€™:
index.c:23:16: warning: taking address of packed member of â€˜struct &lt;anonymous&gt;â€™ may result in an unaligned pointer value [-Waddress-of-packed-member]
   23 |     gi_sorts = ih-&gt;p_sorts;
      |                ^~
In file included from verifier_types.c:2,
                 from verifier.c:1,
                 from main.c:10:
index.c: In function â€˜init_indexâ€™:
index.c:23:16: warning: taking address of packed member of â€˜struct &lt;anonymous&gt;â€™ may result in an unaligned pointer value [-Waddress-of-packed-member]
   23 |     gi_sorts = ih-&gt;p_sorts;
      |
</pre></div>



<a name="179312560"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179312560" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179312560">(Oct 29 2019 at 09:33)</a>:</h4>
<p>But that doesn't sound very serious</p>



<a name="179312648"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179312648" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179312648">(Oct 29 2019 at 09:34)</a>:</h4>
<p>what version?</p>



<a name="179312653"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179312653" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179312653">(Oct 29 2019 at 09:34)</a>:</h4>
<p>I have gcc 8.3.0</p>



<a name="179312772"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179312772" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179312772">(Oct 29 2019 at 09:36)</a>:</h4>
<div class="codehilite"><pre><span></span>gcc --version
gcc (GCC) 9.2.0
Copyright (C) 2019 Free Software Foundation, Inc.
This is free software; see the source for copying conditions.  There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
</pre></div>



<a name="179313194"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179313194" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179313194">(Oct 29 2019 at 09:43)</a>:</h4>
<p>I updated to gcc 9 and fixed the warnings you found, and simplified <code>make.sh</code> to remove the extra options</p>



<a name="179313430"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179313430" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179313430">(Oct 29 2019 at 09:47)</a>:</h4>
<p>Nice. Seems to work now</p>



<a name="179313572"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179313572" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179313572">(Oct 29 2019 at 09:49)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> The file <code>types.c</code>... could that also have been called <code>sorts.c</code>?</p>



<a name="179313583"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179313583" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179313583">(Oct 29 2019 at 09:49)</a>:</h4>
<p>that's types in the C sense</p>



<a name="179313607"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179313607" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179313607">(Oct 29 2019 at 09:50)</a>:</h4>
<p>it's basically the definition of all the data structures in the file</p>



<a name="179313617"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179313617" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179313617">(Oct 29 2019 at 09:50)</a>:</h4>
<p>Aha <span aria-label="thinking" class="emoji emoji-1f914" role="img" title="thinking">:thinking:</span></p>



<a name="179313781"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179313781" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179313781">(Oct 29 2019 at 09:52)</a>:</h4>
<p>What's the purpose of <code>index.c</code>?</p>



<a name="179313832"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179313832" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179313832">(Oct 29 2019 at 09:53)</a>:</h4>
<p>This is some sort of special made dictionary? Where you look up mm0 declarations?</p>



<a name="179313915"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179313915" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179313915">(Oct 29 2019 at 09:54)</a>:</h4>
<p>It's a nonessential part of the verifier that finds the names of things so that error reporting isn't completely unreadable</p>



<a name="179313948"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179313948" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179313948">(Oct 29 2019 at 09:55)</a>:</h4>
<p>When you compile with <code>-D BARE</code> it leaves that whole file out</p>



<a name="179314070"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179314070" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179314070">(Oct 29 2019 at 09:56)</a>:</h4>
<p>Aha</p>



<a name="179314355"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179314355" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179314355">(Oct 29 2019 at 10:00)</a>:</h4>
<p>Why is <code>g_store</code> called that? What does the <code>g</code> stand for?</p>



<a name="179314361"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179314361" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179314361">(Oct 29 2019 at 10:00)</a>:</h4>
<p>global variable</p>



<a name="179314370"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179314370" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179314370">(Oct 29 2019 at 10:00)</a>:</h4>
<p>Next: what does <code>HIGHWATER</code> mean?</p>



<a name="179314396"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179314396" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179314396">(Oct 29 2019 at 10:01)</a>:</h4>
<p>As a Dutchy it brings scary memories to mind... but that's not what your are meaning there <span aria-label="grinning" class="emoji emoji-1f600" role="img" title="grinning">:grinning:</span></p>



<a name="179314418"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179314418" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179314418">(Oct 29 2019 at 10:01)</a>:</h4>
<p>If the <code>-D HIGHWATER</code> compile option is enabled, it keeps statistics on how much of the various stacks are used, and reports the largest the stack ever got to</p>



<a name="179314477"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179314477" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179314477">(Oct 29 2019 at 10:02)</a>:</h4>
<p>This is because the verifier doesn't reallocate if it runs out of space, it just fails, so it's helpful to know whether the memory limits are reasonable</p>



<a name="179314530"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179314530" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179314530">(Oct 29 2019 at 10:03)</a>:</h4>
<p>I think the term comes from "high-water mark" used on ships</p>



<a name="179314689"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179314689" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179314689">(Oct 29 2019 at 10:05)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> So, roughly speaking, all the juicy bits are in <code>verifier.c</code>?</p>



<a name="179314692"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179314692" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179314692">(Oct 29 2019 at 10:05)</a>:</h4>
<p>yes</p>



<a name="179314719"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179314719" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179314719">(Oct 29 2019 at 10:05)</a>:</h4>
<p>there is a decent amount of comments and high level explanation in <code>types.c</code> though</p>



<a name="179314790"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179314790" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179314790">(Oct 29 2019 at 10:06)</a>:</h4>
<p>&lt;600 lines. Well done! I'll try to grasp it. But my train journey is almost over. So I'll have to postpone it for a while</p>



<a name="179315129"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179315129" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179315129">(Oct 29 2019 at 10:11)</a>:</h4>
<p>Another mm0 question: where do the community envisage the Lean proof of the prime number theorem living? Will it need maintaining by a human? By a machine? Will it go in mathlib somewhere? People might need it.</p>



<a name="179315634"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179315634" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179315634">(Oct 29 2019 at 10:19)</a>:</h4>
<p>I think on another thread I suggested breaking that part of the mm0 repo into its own repo, following standard lean repo practices. The <a href="http://set.mm" target="_blank" title="http://set.mm">set.mm</a> export has some manually written setup and postprocessing files, with a big autogenerated folder sitting between them; all of this can be stored like a regular lean project repo, and you can build more dependent files in that repo. Basically it would be devoted to <a href="http://set.mm" target="_blank" title="http://set.mm">set.mm</a> and the lean facts you can derive from it</p>



<a name="179316268"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179316268" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179316268">(Oct 29 2019 at 10:28)</a>:</h4>
<p>I see. So if I wanted to use PNT in some work I could just make this repo a dependency?</p>



<a name="179316309"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179316309" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179316309">(Oct 29 2019 at 10:28)</a>:</h4>
<p>yes</p>



<a name="179330804"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179330804" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179330804">(Oct 29 2019 at 14:00)</a>:</h4>
<p><span class="user-mention" data-user-id="112680">@Johan Commelin</span> I pushed a documentation upgrade to <code>verifier.c</code> in case you wanted to read it more carefully</p>



<a name="179348026"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179348026" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179348026">(Oct 29 2019 at 16:42)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> I don't see the push</p>



<a name="179348107"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179348107" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179348107">(Oct 29 2019 at 16:43)</a>:</h4>
<p><a href="https://github.com/digama0/mm0/blob/master/mm0-c/verifier.c#L87" target="_blank" title="https://github.com/digama0/mm0/blob/master/mm0-c/verifier.c#L87">https://github.com/digama0/mm0/blob/master/mm0-c/verifier.c#L87</a></p>
<div class="codehilite"><pre><span></span><span class="cp">#define pop_stack() ({ \</span>
<span class="cp">  ENSURE(&quot;unify stack underflow&quot;, g_stack_top &gt; g_stack); \</span>
<span class="cp">  *(--g_stack_top); \</span>
<span class="cp">})</span>
</pre></div>


<p>should this error message just say <code>"stack underflow"</code>, instead of <code>"unify stack"</code>?</p>



<a name="179502341"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179502341" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179502341">(Oct 31 2019 at 05:16)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> Talking of error messages: some of them are capitalized, others not. Certainly a minor issue.</p>



<a name="179502349"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179502349" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179502349">(Oct 31 2019 at 05:16)</a>:</h4>
<p>heh</p>



<a name="179502350"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179502350" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179502350">(Oct 31 2019 at 05:16)</a>:</h4>
<p>where?</p>



<a name="179502351"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179502351" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179502351">(Oct 31 2019 at 05:16)</a>:</h4>
<p>Also, thanks a lot for all the comments.</p>



<a name="179502355"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179502355" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179502355">(Oct 31 2019 at 05:16)</a>:</h4>
<p>L234 and L235 of <code>verifier.c</code></p>



<a name="179502367"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179502367" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179502367">(Oct 31 2019 at 05:17)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> <code>grep "\"[A-Z]" verifier.c</code></p>



<a name="179502410"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179502410" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179502410">(Oct 31 2019 at 05:18)</a>:</h4>
<p>You might want to <code>git grep</code> the entire project â€¦ â€” â€¦ if you care â€¦</p>



<a name="179502417"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179502417" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179502417">(Oct 31 2019 at 05:18)</a>:</h4>
<p>fixed, I'll push later</p>



<a name="179504029"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179504029" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179504029">(Oct 31 2019 at 06:00)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> I'm confused. <a href="https://github.com/digama0/mm0/blob/master/mm0-hs/mm1.md" target="_blank" title="https://github.com/digama0/mm0/blob/master/mm0-hs/mm1.md">https://github.com/digama0/mm0/blob/master/mm0-hs/mm1.md</a> is talking about <code>mmu</code> files, but your paper doesn't mention them, I think.</p>



<a name="179504049"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179504049" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179504049">(Oct 31 2019 at 06:01)</a>:</h4>
<p>So the <code>mm0-c</code> folder is all about checking <code>mmb</code> files</p>



<a name="179504053"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179504053" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179504053">(Oct 31 2019 at 06:01)</a>:</h4>
<p>And I think <code>mm0-hs</code> is about compiling certain files into <code>mmb</code> files</p>



<a name="179504111"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179504111" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179504111">(Oct 31 2019 at 06:02)</a>:</h4>
<p>But I'm not sure if I completely grasp the flow diagram, and which programs are used in which parts</p>



<a name="179504128"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179504128" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179504128">(Oct 31 2019 at 06:02)</a>:</h4>
<p>The <code>mmu</code> format was indeed omitted from the paper. It is basically a text version of <code>mmb</code> available for debugging purposes</p>



<a name="179504147"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179504147" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179504147">(Oct 31 2019 at 06:03)</a>:</h4>
<p>In the flow diagram, the "editor" and "compiler" parts are <code>mm0-hs</code> and the "verifier" part is <code>mm0-c</code></p>



<a name="179504200"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179504200" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179504200">(Oct 31 2019 at 06:04)</a>:</h4>
<p>Right... but the "compiler" is also part of the "trusted core", right?</p>



<a name="179504203"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179504203" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179504203">(Oct 31 2019 at 06:04)</a>:</h4>
<p>no</p>



<a name="179504206"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179504206" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179504206">(Oct 31 2019 at 06:04)</a>:</h4>
<p>Why not?</p>



<a name="179504216"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179504216" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179504216">(Oct 31 2019 at 06:05)</a>:</h4>
<p>it produces an <code>mm0</code> file (or you provide an <code>mm0</code> file to check against) and an <code>mmb</code> file, and they stand on their own</p>



<a name="179504230"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179504230" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179504230">(Oct 31 2019 at 06:05)</a>:</h4>
<p>But <code>verifier.c</code> only works with <code>mmb</code> files, right?</p>



<a name="179504233"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179504233" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179504233">(Oct 31 2019 at 06:05)</a>:</h4>
<p>You are supposed to be able to read the <code>mm0</code> file to know what is being proven, and the <code>mmb</code> file is verified to prove the theorems in the <code>mm0</code> file by the verifier</p>



<a name="179504278"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179504278" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179504278">(Oct 31 2019 at 06:06)</a>:</h4>
<p>Actually <code>mm0-c</code> is incomplete; the <code>mm0</code> checking part didn't make it in time for the paper</p>



<a name="179504281"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179504281" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179504281">(Oct 31 2019 at 06:06)</a>:</h4>
<p>Aah, right</p>



<a name="179504284"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179504284" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179504284">(Oct 31 2019 at 06:06)</a>:</h4>
<p>Because for all I know, you just compile Fermat into <code>true</code>, and the proof is <code>trivial</code></p>



<a name="179504290"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179504290" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179504290">(Oct 31 2019 at 06:06)</a>:</h4>
<p>exactly</p>



<a name="179504299"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179504299" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179504299">(Oct 31 2019 at 06:07)</a>:</h4>
<p>No wonder you can get &lt;1s compile times <span aria-label="angry devil" class="emoji emoji-1f47f" role="img" title="angry devil">:angry_devil:</span></p>



<a name="179504302"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179504302" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179504302">(Oct 31 2019 at 06:07)</a>:</h4>
<p>Lol, I trust you</p>



<a name="179504306"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179504306" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179504306">(Oct 31 2019 at 06:07)</a>:</h4>
<p>But I would like to see the <code>mm0</code> checking part at some point <span aria-label="grinning" class="emoji emoji-1f600" role="img" title="grinning">:grinning:</span></p>



<a name="179504312"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179504312" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179504312">(Oct 31 2019 at 06:07)</a>:</h4>
<p>Note that the mm0 checking part is proportional to the size of the mm0 file. For a problem like Fermat this will be quite small</p>



<a name="179504361"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179504361" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179504361">(Oct 31 2019 at 06:08)</a>:</h4>
<p>The <code>c</code> code will not be proportional to anything</p>



<a name="179504370"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179504370" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179504370">(Oct 31 2019 at 06:08)</a>:</h4>
<p>But the running time might be. And I will believe that it is negligable</p>



<a name="179504379"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179504379" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179504379">(Oct 31 2019 at 06:09)</a>:</h4>
<p><code>mm0-hs</code> has a verifier that checks the <code>mm0</code> file, but it reads mmu files instead of mmb</p>



<a name="179504382"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179504382" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179504382">(Oct 31 2019 at 06:09)</a>:</h4>
<p>Aha</p>



<a name="179504417"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179504417" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179504417">(Oct 31 2019 at 06:10)</a>:</h4>
<p>(that's <code>mm0-hs verify</code>, in the <code>Verifier.hs</code> file if you care to look)</p>



<a name="179504443"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179504443" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179504443">(Oct 31 2019 at 06:10)</a>:</h4>
<p>/me takes a break to munch on some breakfast <span aria-label="bread" class="emoji emoji-1f35e" role="img" title="bread">:bread:</span> <span aria-label="glass of milk" class="emoji emoji-1f95b" role="img" title="glass of milk">:glass_of_milk:</span></p>



<a name="179507329"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179507329" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179507329">(Oct 31 2019 at 07:21)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> Is there machinery to go back and forth between <code>mmu</code> and <code>mmb</code>?</p>



<a name="179507378"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179507378" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179507378">(Oct 31 2019 at 07:22)</a>:</h4>
<p>How hard is it going to be to do the <code>mm0</code> checking part in <code>mm0-c</code>? Sounds like you could do it in less than an afternoon...</p>



<a name="179507383"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179507383" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179507383">(Oct 31 2019 at 07:22)</a>:</h4>
<p>not directly right now; there should be a <code>mm0-hs</code> subcommand to do that</p>



<a name="179507447"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179507447" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179507447">(Oct 31 2019 at 07:23)</a>:</h4>
<p>I think it is not hard; for a while I was planning to add a way for mmb to help with distinctness checking (the map from names to indexes in the file should be injective), but I think that's probably overengineering and I'll just allocate a hashmap instead</p>



<a name="179511920"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179511920" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179511920">(Oct 31 2019 at 08:56)</a>:</h4>
<p>Do/will/should <code>mm1</code> files support unicode?</p>



<a name="179511924"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179511924" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179511924">(Oct 31 2019 at 08:56)</a>:</h4>
<p>no</p>



<a name="179511936"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179511936" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179511936">(Oct 31 2019 at 08:57)</a>:</h4>
<p>well, mm1 could, I guess, but mm0 doesn't</p>



<a name="179511946"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179511946" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179511946">(Oct 31 2019 at 08:57)</a>:</h4>
<p>Right.</p>



<a name="179511963"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179511963" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179511963">(Oct 31 2019 at 08:57)</a>:</h4>
<p>But <code>mm1</code> is the format that you want mathematicians to read, right?</p>



<a name="179512025"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179512025" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179512025">(Oct 31 2019 at 08:58)</a>:</h4>
<p>mm1 is for the proof writer, mm0 is for the auditor</p>



<a name="179512058"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179512058" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179512058">(Oct 31 2019 at 08:59)</a>:</h4>
<p>I fear that <code>mm0</code> is impenetrable for many mathematicians</p>



<a name="179512079"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179512079" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179512079">(Oct 31 2019 at 08:59)</a>:</h4>
<p>My aim was "average for a theorem prover language"</p>



<a name="179512090"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179512090" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179512090">(Oct 31 2019 at 09:00)</a>:</h4>
<p>with as close to zero support infrastructure to allow that as possible</p>



<a name="179512143"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179512143" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179512143">(Oct 31 2019 at 09:00)</a>:</h4>
<p>unicode is above average</p>



<a name="179512150"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179512150" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179512150">(Oct 31 2019 at 09:00)</a>:</h4>
<p>and it <em>does</em> complicate the verifier</p>



<a name="179512183"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179512183" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179512183">(Oct 31 2019 at 09:01)</a>:</h4>
<p>but TBH there is a whole slew of landmines in the unicode spec, and lots of ways to make something misleading</p>



<a name="179512196"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179512196" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179512196">(Oct 31 2019 at 09:01)</a>:</h4>
<p>not good for an audit</p>



<a name="179512254"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179512254" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179512254">(Oct 31 2019 at 09:02)</a>:</h4>
<p>I'm pretty sure we have had a few threads here where we play with unicode and notations to apparently prove false</p>



<a name="179512498"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179512498" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179512498">(Oct 31 2019 at 09:06)</a>:</h4>
<p>Yep, that's certainly right</p>



<a name="179512522"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179512522" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179512522">(Oct 31 2019 at 09:07)</a>:</h4>
<p>I think I would like to see how 100 lines of group (or monoid) theory look like in mm0</p>



<a name="179512707"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179512707" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179512707">(Oct 31 2019 at 09:10)</a>:</h4>
<p>I am currently trying to run <code>stack install mm0-hs</code></p>



<a name="179512860"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179512860" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179512860">(Oct 31 2019 at 09:13)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> You do allow infix notation. What would be the right way to setup the group operation. Would you have a global <code>g*</code> infix that is the global group operation?</p>



<a name="179512867"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179512867" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179512867">(Oct 31 2019 at 09:13)</a>:</h4>
<p>Because I don't think you can do operator overloading, right?</p>



<a name="179512986"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179512986" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179512986">(Oct 31 2019 at 09:15)</a>:</h4>
<p>Currently the <code>notation</code> command is limited to those with a unique constant at the start, but I think I can relax that to "infixy" notations that start with a variable but are followed by a unique constant. Then you could declare a notation <code>x `+g[` G `]` y</code></p>



<a name="179513067"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179513067" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179513067">(Oct 31 2019 at 09:16)</a>:</h4>
<p>Alternatively, you could just have <code>x +g y</code> but it produces a "group expression" that is then evaluated in a particular group via <code>x =[G] y</code></p>



<a name="179513104"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179513104" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179513104">(Oct 31 2019 at 09:17)</a>:</h4>
<p>I wonder if it is worth it.</p>



<a name="179513120"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179513120" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179513120">(Oct 31 2019 at 09:17)</a>:</h4>
<p>Or you could just axiomatize groups and have <code>x + y</code></p>



<a name="179513128"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179513128" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179513128">(Oct 31 2019 at 09:17)</a>:</h4>
<p>I would rather just write <code>add x (add y z)</code>, I guess</p>



<a name="179513133"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179513133" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179513133">(Oct 31 2019 at 09:17)</a>:</h4>
<p>You can have all that in mm1 / your favorite editor</p>



<a name="179513179"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179513179" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179513179">(Oct 31 2019 at 09:18)</a>:</h4>
<p>but mm0 is all about not hiding complicated stuff</p>



<a name="179513181"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179513181" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179513181">(Oct 31 2019 at 09:18)</a>:</h4>
<p>Well, I'm interested in the first 100 lines of a reusable group theory library</p>



<a name="179513327"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179513327" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179513327">(Oct 31 2019 at 09:20)</a>:</h4>
<p>And whether the group operation would be bundled or not, I don't know. But having it unbundled would mean that you can simply call the group op <code>mul</code> or <code>add</code> and write <code>mul x (mul y z)</code> which is just as readable as <code>x `*g[` G `]` ( `y `*g[` G `]` z)</code></p>



<a name="179513358"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179513358" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179513358">(Oct 31 2019 at 09:20)</a>:</h4>
<p>Well, one thing that metamath had that mm0 doesn't is the ability to apply a binary operation using the notation <code>(a op b)</code></p>



<a name="179513363"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179513363" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179513363">(Oct 31 2019 at 09:20)</a>:</h4>
<p>where <code>op</code> is a variable</p>



<a name="179513380"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179513380" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179513380">(Oct 31 2019 at 09:21)</a>:</h4>
<p>So you could just have a variable called <code>+</code> and it would all work nicely</p>



<a name="179513466"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179513466" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Giovanni Mascellani <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179513466">(Oct 31 2019 at 09:22)</a>:</h4>
<p>Well, you can have this if you want, can't you? You just have to use a character different than <code>(</code>, because that's already taken to override priority.</p>



<a name="179513469"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179513469" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179513469">(Oct 31 2019 at 09:22)</a>:</h4>
<p>But you could still define <code>@(a op b)</code> or something like that</p>



<a name="179513512"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179513512" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179513512">(Oct 31 2019 at 09:23)</a>:</h4>
<p>Do you have namespacing?</p>



<a name="179513519"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179513519" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179513519">(Oct 31 2019 at 09:23)</a>:</h4>
<p>no</p>



<a name="179513566"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179513566" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179513566">(Oct 31 2019 at 09:24)</a>:</h4>
<p>again, that could be implemented at mm1 level</p>



<a name="179513582"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179513582" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179513582">(Oct 31 2019 at 09:24)</a>:</h4>
<p>I'm taking a lot of cues from C here</p>



<a name="179513601"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179513601" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179513601">(Oct 31 2019 at 09:24)</a>:</h4>
<p>Right, but that means that if I claim <code>def @</code>, then all the others will have to deal with it, and can't reuse that "trick"</p>



<a name="179513640"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179513640" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179513640">(Oct 31 2019 at 09:25)</a>:</h4>
<p>You can't have a temporary def with a short name, because it pollutes the global library</p>



<a name="179513654"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179513654" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179513654">(Oct 31 2019 at 09:25)</a>:</h4>
<p>An MM0 file is usually built as one "unit", so you have to sort out all the global constraints</p>



<a name="179513713"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179513713" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179513713">(Oct 31 2019 at 09:26)</a>:</h4>
<p>The hope is that this is fairly limited because you only care about a few theorems</p>



<a name="179513759"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179513759" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179513759">(Oct 31 2019 at 09:27)</a>:</h4>
<p>For actual proving work, you want MM1, which can add a bunch of namespacing, unicode, and whatever else, for your local theorems</p>



<a name="179513775"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179513775" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179513775">(Oct 31 2019 at 09:27)</a>:</h4>
<p>So you are saying that I shouldn't be interested in <code>group.mm0</code> but only in <code>group.mm1</code> and possibly <code>classification_fin_simp_grp.mm0</code>.</p>



<a name="179513785"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179513785" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179513785">(Oct 31 2019 at 09:27)</a>:</h4>
<p>right</p>



<a name="179714871"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179714871" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Juho Kupiainen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179714871">(Nov 02 2019 at 19:19)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span>  Are there plans to have a metamath -&gt; mm0 translator?</p>



<a name="179714932"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179714932" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179714932">(Nov 02 2019 at 19:20)</a>:</h4>
<p>Isn't that what <code>mm0-hs from-mm</code> does?</p>



<a name="179778877"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179778877" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Simon Cruanes <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179778877">(Nov 04 2019 at 04:49)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> do you have plans / vague ideas for the following?<br>
- multiple file developments (one mm0 importing another mm0, hopefully not with a <code>#include</code> like mechanism, but rather some proper namespacing)<br>
- multiple independent checkers for mm0/mmu/mmb (run automatically in CI, like in metamath, that's super neat)<br>
- multiple interactive frontends (maybe specialized for different logics, like one for CIC, one for HOL, one for TLAâ€¦ etc.), as it seems to me that interop between systems/teams should be on the mm0 level  rather than one more complex, more specialized formats such as mm1</p>



<a name="179778933"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179778933" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179778933">(Nov 04 2019 at 04:50)</a>:</h4>
<blockquote>
<p>- multiple file developments (one mm0 importing another mm0, hopefully not with a #include like mechanism, but rather some proper namespacing)</p>
</blockquote>
<p>Explicitly no. This is implemented for MM1, but this is a huge complexity increase even there, and it also adds a lot of filesystem stuff to the trusted base</p>



<a name="179778952"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179778952" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179778952">(Nov 04 2019 at 04:51)</a>:</h4>
<blockquote>
<p>- multiple independent checkers for mm0/mmu/mmb (run automatically in CI, like in metamath, that's super neat)</p>
</blockquote>
<p>Yes. There are already multiple checkers, written as I need them, and the spec is intended to be implementation agnostic as with metamath. Besides checkers written by me, I believe Giovanni Mascellani started working on a python checker but I don't know what the progress is on that</p>



<a name="179779008"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179779008" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179779008">(Nov 04 2019 at 04:53)</a>:</h4>
<blockquote>
<p>- multiple interactive frontends (maybe specialized for different logics, like one for CIC, one for HOL, one for TLAâ€¦ etc.), as it seems to me that interop between systems/teams should be on the mm0 level rather than one more complex, more specialized formats such as mm1</p>
</blockquote>
<p>That's right. I have vague plans about this, but this is really my dream for the future - I think this is the best way to get a really high quality front end on a metamath like backend</p>



<a name="179779067"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179779067" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179779067">(Nov 04 2019 at 04:55)</a>:</h4>
<p>I should qualify the MM0 importing thing by saying that I am actually segmenting the mm0 files on the repo using an include mechanism, but this is only recognized by the MM1 compiler and is intended as a pseudo feature so you can assemble MM0 files (by concatenation) for use by real MM0 verifiers</p>



<a name="179779258"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179779258" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Simon Cruanes <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179779258">(Nov 04 2019 at 05:02)</a>:</h4>
<p>Interesting. I was thinking of mm0/mmb files as a kind of compiled version with a stable ABI (like a <code>.o</code> file, in a way). Splitting large libraries into many such files (pairs of files, really) would then make incremental checking easy, and also to have different high-level tools tackle different parts of the library (say, a frontend with a <code>omega</code>-like tactic in a part, a frontend by another team with GrÃ¶bner basis working on another part). That would avoid relying too much on a single high level tool, imho.</p>
<p>You could still have something that takes all the mm0/mmu files and concatenates them, in topological order, into a single file, for checking/releasing (kind of like single-file libraries in C such as sqlite).</p>



<a name="179780375"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179780375" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179780375">(Nov 04 2019 at 05:38)</a>:</h4>
<p>They are a lot like <code>.o</code> files, but they are still self contained</p>



<a name="179780393"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179780393" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179780393">(Nov 04 2019 at 05:39)</a>:</h4>
<p>You can conceivably combine a number of <code>.mmb</code> files together, where one proves theorem X using axiom Y, and the other proves theorem Y from axiom Z</p>



<a name="179780453"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179780453" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179780453">(Nov 04 2019 at 05:41)</a>:</h4>
<p><span class="user-mention" data-user-id="132878">@Simon Cruanes</span> There isn't really much advantage to having the format itself note this "splittability" since it is basically a metatheoretic property of proofs that can be implemented by an untrusted transformer (i.e. a "linker" for proof files)</p>



<a name="179780582"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179780582" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179780582">(Nov 04 2019 at 05:45)</a>:</h4>
<p>If you think about how <code>.o</code> files work, they present "unresolved symbols" that are linked with other object files. It is unsafe to present these external symbols without declaring their types (and definitions, if examinable), but if you do that, it's not much different from having <code>axiom</code> and <code>def</code> declarations for these. OpenTheory also does something similar; there is no distinction made between an "axiom" as in something true according to the ambient foundation and an "axiom" meaning a theorem that has been proven elsewhere that will later be linked in</p>



<a name="179780781"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179780781" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179780781">(Nov 04 2019 at 05:50)</a>:</h4>
<blockquote>
<p>also to have different high-level tools tackle different parts of the library (say, a frontend with a omega-like tactic in a part, a frontend by another team with GrÃ¶bner basis working on another part). That would avoid relying too much on a single high level tool, imho.</p>
</blockquote>
<p>Indeed I've been thinking about this a bit. It would be nice to have a heterogeneous proof construction approach, where different front ends are used for building different parts of the library that are later linked together using a common proof substrate. For instance, I'm writing an x86 compiler which is MM0 proof producing, but the front end for that doesn't really have the same style as the MM1 format. It is a lot more automatic, and the user is mostly providing hints along the way (assertion-decorated code), by comparison to regular theorems where you want lots of unification and proof search tactics</p>



<a name="179842827"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179842827" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Simon Cruanes <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179842827">(Nov 04 2019 at 15:27)</a>:</h4>
<blockquote>
<p>Indeed I've been thinking about this a bit. It would be nice to have a heterogeneous proof construction approach, where different front ends are used for building different parts of the library that are later linked together using a common proof substrate.</p>
</blockquote>
<p>Other use cases for having heterogeneous proof construction that immediately come to me:<br>
- custom decision procedures <em>as separate tools</em> (omega.exe? mathematica bridge? <span aria-label="grinning face with smiling eyes" class="emoji emoji-1f601" role="img" title="grinning face with smiling eyes">:grinning_face_with_smiling_eyes:</span>)<br>
- hammers (calling to Z3, CVC4, E and reconstruct a proof â€” no need to burden the main interactive prover with that)<br>
- experimenting with alternative tactic languages (as is the case in Coq these days, just how many tactic languages do they haveâ€¦)</p>



<a name="179843084"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/179843084" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Simon Cruanes <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#179843084">(Nov 04 2019 at 15:30)</a>:</h4>
<blockquote>
<p>If you think about how <code>.o</code> files work, they present "unresolved symbols" that are linked with other object files.</p>
</blockquote>
<p>Pushing the analogy a bit too far, <code>.o</code> files have big shortcomings too. They don't specify a dependency order, nor do they protect against duplicate symbols.</p>
<p>I think maybe just declaring a <code>module foo;</code> as the first statement of a <code>.mm0</code> file, and its dependencies just after that (<code>import bar;</code>) without roping in the exact filesystem details on how to import <code>bar</code>, could be a lightweight solution?</p>



<a name="248763084"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/248763084" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Juho Kupiainen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#248763084">(Aug 08 2021 at 10:09)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> Do the mm0-c, mm0-hs and mm0-rs verify mmu and mmb proofs in polynomial time?</p>



<a name="248763127"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/248763127" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#248763127">(Aug 08 2021 at 10:10)</a>:</h4>
<p>They verify proofs in constant time. Namely &lt; 0.2 s. <span aria-label="stuck out tongue wink" class="emoji emoji-1f61c" role="img" title="stuck out tongue wink">:stuck_out_tongue_wink:</span></p>



<a name="248777583"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mm0/near/248777583" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mm0.html#248777583">(Aug 08 2021 at 16:16)</a>:</h4>
<p><span class="user-mention" data-user-id="241097">@Juho Kupiainen</span> I work out the asymptotic complexity of an ideal mm0 verifier (and mm0-c is the one that implements all the tricks) in the MM0 paper. It is O(n^2) worst case, but that worst case requires that a single theorem statement take up half of the entire proof content. In the common case where theorem statements are bounded by k, it takes O(nk) time, so roughly linear time.</p>
<p>The other verifiers mm0-rs and mm0-hs do more things and aren't necessarily implemented optimally, in part because they also run tactics, do proof deduplication in order to create mmb files, and generally need a different data structure to do proof construction. Deduplication is the really important optimization, mm0-rs should still do it in most places, but maybe not all, and I know mm0-hs doesn't. That is, you can construct a term with a high duplication like <code>((x + x) + (x + x)) + ((x + x) + (x + x))</code> (imagine a complete binary tree like this of depth 60), and this is considered a "small" term because it only has 60 subterms, but processing this along the tree structure would take 2^60 steps.</p>
<p>Metamath does deduplication of proofs, but not of lemma statements: the way it is defined requires that verifiers actually construct the full list of symbols for each step. That means that it is subject to this worst case example, for which metamath takes exponential time. I believe there is a more complex example using another of metamath's features that takes double exponential time, but I forget the details. However, in case it wasn't obvious, this is an extremely contrived counterexample, and for the most part metamath is also linear time and these optimizations give mm0 only a small boost (from 0.9 s -&gt; 0.2 s).</p>
<blockquote>
<p>Do you know what the case is with the Metamath verifier? You mention in the mm0 github README that it's possible to prove anything in Metamath because the proof checker doesn't check everything properly. Did I understand that correctly? Is it possible to check for the things that should be checked? Is the problem in the language or in the verifier?</p>
</blockquote>
<p>That's not quite what I mean (and I hope that's not what I said). Metamath's <code>set.mm</code> database is sound to the best of my knowledge, but because definitions are added as axioms, they have to adhere to some simple rules to ensure that they meet the usual standard for definition introduction in a logical system, which I coded as a "definition checker" that is currently run as part of CI. An example of a definition that fails the check is <code>liar := Â¬ liar</code>. So the definition checker is an external application that is also critical for soundness, and it is this fact that motivated me to migrate it into the kernel in mm0.</p>
<p>Another aspect that is critical for the current proof of soundness but has to be checked externally is the unambiguity of the <a href="http://set.mm">set.mm</a> grammar. In order to minimize the distance between the textual representation of theorems and the proof checker's understanding of the statement, metamath theorems are represented as strings of tokens, which is an unusual choice for a theorem prover. This means that it is critical that the mapping from strings of tokens to trees has to be injective, which is an undecidable property of the grammar. In the case of <code>set.mm</code>, this property happens to be true, because there is a manual proof of it. That proof was later mechanized into a parser that constructs a parse table for the grammar, whose existence is a witness to the unambiguity of the grammar. This parse table construction is also run in CI. Again, MM0 wants to dodge this complication so it has a precedence parser built in to the verifier and its workings are part of the specification.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>