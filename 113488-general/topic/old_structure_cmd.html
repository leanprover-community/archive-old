---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/old_structure_cmd.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/old_structure_cmd.html">old_structure_cmd</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="162644619"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/old_structure_cmd/near/162644619" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/old_structure_cmd.html#162644619">(Apr 05 2019 at 17:50)</a>:</h4>
<p>I have</p>
<div class="codehilite"><pre><span></span><span class="kn">structure</span> <span class="n">TopCommRing</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span>
<span class="o">[</span><span class="n">cr</span> <span class="o">:</span> <span class="n">comm_ring</span> <span class="n">α</span><span class="o">]</span>
<span class="o">[</span><span class="n">ts</span> <span class="o">:</span> <span class="n">topological_space</span> <span class="n">α</span><span class="o">]</span>
<span class="o">[</span><span class="n">tr</span> <span class="o">:</span> <span class="n">topological_ring</span> <span class="n">α</span><span class="o">]</span>
</pre></div>


<p>and</p>
<div class="codehilite"><pre><span></span><span class="kn">section</span> <span class="n">uniform</span>
<span class="n">local</span> <span class="n">attribute</span> <span class="o">[</span><span class="kn">instance</span><span class="o">]</span> <span class="n">topological_add_group</span><span class="bp">.</span><span class="n">to_uniform_space</span>

<span class="kn">structure</span> <span class="n">CmplTopCommRing</span> <span class="kn">extends</span> <span class="n">TopCommRing</span><span class="bp">.</span><span class="o">{</span><span class="n">u</span><span class="o">}</span> <span class="o">:=</span>
<span class="o">[</span><span class="n">cs</span> <span class="o">:</span> <span class="n">complete_space</span> <span class="n">α</span><span class="o">]</span>
<span class="o">[</span><span class="n">sp</span> <span class="o">:</span> <span class="n">separated</span> <span class="n">α</span><span class="o">]</span>

<span class="kn">end</span> <span class="n">uniform</span>
</pre></div>



<a name="162644647"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/old_structure_cmd/near/162644647" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/old_structure_cmd.html#162644647">(Apr 05 2019 at 17:50)</a>:</h4>
<p>Should I use the <code>old_structure_cmd</code> or not? What are the pros and cons?</p>



<a name="162646713"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/old_structure_cmd/near/162646713" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/old_structure_cmd.html#162646713">(Apr 05 2019 at 18:13)</a>:</h4>
<p>I will say this: <em><code>old_structure_cmd</code> is not deprecated</em>. The name is really unfortunate, and it should be something more like <code>flat_structure</code></p>



<a name="162646846"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/old_structure_cmd/near/162646846" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/old_structure_cmd.html#162646846">(Apr 05 2019 at 18:15)</a>:</h4>
<p><code>old_structure_cmd</code> will lay out a structure as a bunch of fields, inlining all fields of the parent(s). It then constructs "parent coercions" (also a bad name, it's an instance not a coercion) so that you can infer parents from the children</p>



<a name="162646882"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/old_structure_cmd/near/162646882" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/old_structure_cmd.html#162646882">(Apr 05 2019 at 18:15)</a>:</h4>
<p>This can get expensive, especially for deep hierarchies or structures with many fields</p>



<a name="162647038"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/old_structure_cmd/near/162647038" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/old_structure_cmd.html#162647038">(Apr 05 2019 at 18:17)</a>:</h4>
<p>The "new structure cmd" (aka the default) is to use a "nested" layout, where a structure <code>B extends A</code> contains a field <code>to_A</code> that allows access to all the fields of A. Some magic is then done so you can't tell the difference, but the parent coercions are now a lot simpler to define</p>



<a name="162647173"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/old_structure_cmd/near/162647173" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/old_structure_cmd.html#162647173">(Apr 05 2019 at 18:19)</a>:</h4>
<p>The major downside of the new structure cmd is that you can't nest two structures with a common field, at least not if you don't want two copies of the field as data (and they can potentially be different, and bad things can happen). To avoid this, diamonds are just plain rejected. So <code>structure foo extends add_comm_group A, ring A</code> is rejected</p>



<a name="162647313"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/old_structure_cmd/near/162647313" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/old_structure_cmd.html#162647313">(Apr 05 2019 at 18:20)</a>:</h4>
<p>For a structure without parents, I don't think it makes a difference which you use</p>



<a name="162647402"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/old_structure_cmd/near/162647402" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/old_structure_cmd.html#162647402">(Apr 05 2019 at 18:21)</a>:</h4>
<p>But my example has a parent (-;</p>



<a name="162647569"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/old_structure_cmd/near/162647569" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/old_structure_cmd.html#162647569">(Apr 05 2019 at 18:23)</a>:</h4>
<p>In the end, I want to put a category structure on both, get the induced forgetful functor, etc...<br>
This all goes quite smoothly.<br>
Now, what I would like is if I have an type <code>R</code> and it turns out to have instances of <code>complete_space</code> and <code>topological_ring</code> etc... that I can just write<br>
<code>{ \alpha := R }</code> for the object of <code>CmplTopCommRing</code> and that type class inference figures out the other fields of the structure.</p>



<a name="162647623"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/old_structure_cmd/near/162647623" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/old_structure_cmd.html#162647623">(Apr 05 2019 at 18:24)</a>:</h4>
<p>Does that affect my choice for old/flat vs new/nested structures?</p>



<a name="162652936"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/old_structure_cmd/near/162652936" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/old_structure_cmd.html#162652936">(Apr 05 2019 at 19:20)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> Why are flat structures expensive if you have deep hierarchies? As in, why more expensive then nested structures?</p>



<a name="162652972"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/old_structure_cmd/near/162652972" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/old_structure_cmd.html#162652972">(Apr 05 2019 at 19:21)</a>:</h4>
<p>Are all the "grandparent coercions" also inlined into the flat structure? Is that the issue?</p>



<a name="162654332"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/old_structure_cmd/near/162654332" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/old_structure_cmd.html#162654332">(Apr 05 2019 at 19:39)</a>:</h4>
<p>Yes, all transitive parent fields are pulled in. I think leo had examples like <code>decidable_linear_ordered_field</code> or something which were one line to write but just massive under the hood</p>



<a name="199093780"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/old_structure_cmd/near/199093780" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/old_structure_cmd.html#199093780">(May 28 2020 at 22:25)</a>:</h4>
<p>what exactly does <code>set_option old_structure_cmd true</code> do?</p>



<a name="199093791"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/old_structure_cmd/near/199093791" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/old_structure_cmd.html#199093791">(May 28 2020 at 22:25)</a>:</h4>
<p>I can't find this in the mathlib docs</p>



<a name="199093981"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/old_structure_cmd/near/199093981" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/old_structure_cmd.html#199093981">(May 28 2020 at 22:27)</a>:</h4>
<p>one thing I observed is this:</p>
<div class="codehilite"><pre><span></span><code><span class="kn">set_option</span> <span class="n">old_structure_cmd</span> <span class="n">true</span>

<span class="n">class</span> <span class="n">A</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">A</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span>

<span class="n">class</span> <span class="n">B</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="kn">extends</span> <span class="n">A</span> <span class="n">n</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">B</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span>

<span class="bp">#</span><span class="kn">print</span> <span class="n">B</span><span class="bp">.</span><span class="n">to_A</span>
<span class="c">/-</span><span class="cm"></span>
<span class="cm">@[instance]</span>
<span class="cm">def B.to_A : Π (n : ℕ) [s : B n], A n :=</span>
<span class="cm">λ (n : ℕ) [s : B n], {A := B.A n s}</span>
<span class="cm">-/</span>

<span class="kn">set_option</span> <span class="n">old_structure_cmd</span> <span class="n">false</span>

<span class="n">class</span> <span class="n">C</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">C</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span>

<span class="n">class</span> <span class="n">D</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="kn">extends</span> <span class="n">C</span> <span class="n">n</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">D</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span>

<span class="bp">#</span><span class="kn">print</span> <span class="n">D</span><span class="bp">.</span><span class="n">to_C</span>
<span class="c">/-</span><span class="cm"></span>
<span class="cm">@[instance, reducible]</span>
<span class="cm">def D.to_C : Π {n : ℕ} [c : D n], C n :=</span>
<span class="cm">λ (n : ℕ) [c : D n], [D.to_C c]</span>
<span class="cm">-/</span>
</code></pre></div>



<a name="199094033"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/old_structure_cmd/near/199094033" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/old_structure_cmd.html#199094033">(May 28 2020 at 22:28)</a>:</h4>
<p>the latter one is problematic because it might cause things that should be defeq to not be defeq</p>



<a name="199094084"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/old_structure_cmd/near/199094084" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/old_structure_cmd.html#199094084">(May 28 2020 at 22:28)</a>:</h4>
<p>e.g. when there are diamonds</p>



<a name="199094120"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/old_structure_cmd/near/199094120" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jeremy Avigad <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/old_structure_cmd.html#199094120">(May 28 2020 at 22:28)</a>:</h4>
<p>This is core Lean. The original Lean 3 encoding of structures stored all the fields flat, and a structure could extend and combine as many structures as you want. At some point, Leo determined that the multiple inheritance and diamonds were causing efficiency problems, and changed the representation, making it harder to have inheritance diamonds. (You could still define them by hand, but <code>extends</code> doesn't allow it.) This option restores the old behavior, which is sometimes convenient, though it potentially causes inefficiencies.</p>



<a name="199094148"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/old_structure_cmd/near/199094148" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/old_structure_cmd.html#199094148">(May 28 2020 at 22:29)</a>:</h4>
<p>thanks</p>



<a name="199094272"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/old_structure_cmd/near/199094272" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/old_structure_cmd.html#199094272">(May 28 2020 at 22:30)</a>:</h4>
<p>however the <code>old_strcuture_cmd</code> is not a panacea either, as demonstrated by this example:</p>
<div class="codehilite"><pre><span></span><code><span class="kn">set_option</span> <span class="n">old_structure_cmd</span> <span class="n">true</span>

<span class="n">class</span> <span class="n">A</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">A</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span>

<span class="n">class</span> <span class="n">B</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">[</span><span class="n">A</span> <span class="n">n</span><span class="o">]</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">B</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span>

<span class="n">class</span> <span class="n">C</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="kn">extends</span> <span class="n">A</span> <span class="n">n</span><span class="o">,</span> <span class="n">B</span> <span class="n">n</span><span class="bp">.</span> <span class="c1">-- failed to add declaration to environment, it contains local constants</span>
</code></pre></div>



<a name="199094433"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/old_structure_cmd/near/199094433" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/old_structure_cmd.html#199094433">(May 28 2020 at 22:32)</a>:</h4>
<p>Note that you can replicate the behavior of <code>old_structure_cmd</code> by hand, by inlining all the fields of the parents</p>



<a name="199094460"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/old_structure_cmd/near/199094460" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/old_structure_cmd.html#199094460">(May 28 2020 at 22:32)</a>:</h4>
<p>The whole reason the <code>@[ancestor]</code> attribute exists is because these are indistinguishable by later things</p>



<a name="199094563"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/old_structure_cmd/near/199094563" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/old_structure_cmd.html#199094563">(May 28 2020 at 22:34)</a>:</h4>
<div class="codehilite"><pre><span></span><code><span class="kn">set_option</span> <span class="n">old_structure_cmd</span> <span class="n">true</span>

<span class="n">class</span> <span class="n">A</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">A</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span>

<span class="n">class</span> <span class="n">B</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">[</span><span class="n">A</span> <span class="n">n</span><span class="o">]</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">B</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span>

<span class="n">class</span> <span class="n">C</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="kn">extends</span> <span class="n">A</span> <span class="n">n</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">B</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span>

<span class="kn">instance</span> <span class="n">C</span><span class="bp">.</span><span class="n">to_B</span> <span class="o">(</span><span class="n">n</span><span class="o">)</span> <span class="o">[</span><span class="n">A</span> <span class="n">n</span><span class="o">]</span> <span class="o">[</span><span class="n">B</span> <span class="n">n</span><span class="o">]</span> <span class="o">:</span> <span class="n">C</span> <span class="n">n</span> <span class="o">:=</span> <span class="bp">⟨</span><span class="n">A</span><span class="bp">.</span><span class="n">A</span> <span class="n">n</span><span class="o">,</span> <span class="n">B</span><span class="bp">.</span><span class="n">B</span> <span class="n">n</span><span class="bp">⟩</span>
</code></pre></div>



<a name="199094652"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/old_structure_cmd/near/199094652" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jeremy Avigad <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/old_structure_cmd.html#199094652">(May 28 2020 at 22:35)</a>:</h4>
<p>Leo wrote this before making the switch: <a href="https://github.com/leanprover/lean/wiki/Refactoring-structures">https://github.com/leanprover/lean/wiki/Refactoring-structures</a>.</p>



<a name="199095854"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/old_structure_cmd/near/199095854" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/old_structure_cmd.html#199095854">(May 28 2020 at 22:50)</a>:</h4>
<p>looks like I should just <code>set_option old_structure_cmd true</code> for everything in the algebra hierarchy</p>



<a name="199095856"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/old_structure_cmd/near/199095856" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/old_structure_cmd.html#199095856">(May 28 2020 at 22:50)</a>:</h4>
<p>at least those without <code>is_</code></p>



<a name="199096006"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/old_structure_cmd/near/199096006" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/old_structure_cmd.html#199096006">(May 28 2020 at 22:52)</a>:</h4>
<p>but then they would be very slow</p>



<a name="199096050"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/old_structure_cmd/near/199096050" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/old_structure_cmd.html#199096050">(May 28 2020 at 22:53)</a>:</h4>
<p>I hesitate to give any blanket rule here, but it is true that most types in the algebraic hierarchy use <code>old_structure_cmd</code></p>



<a name="199096164"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/old_structure_cmd/near/199096164" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/old_structure_cmd.html#199096164">(May 28 2020 at 22:54)</a>:</h4>
<p>I think that the speed issue that leo was worried about is not the major concern, because it deals with the cost of elaborating a new <code>class</code> declaration, which is relatively rare. Even structure literals are pretty rare in mathlib</p>



<a name="199096189"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/old_structure_cmd/near/199096189" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/old_structure_cmd.html#199096189">(May 28 2020 at 22:55)</a>:</h4>
<p>the real killer in mathlib is the constant typeclass inference</p>



<a name="199096224"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/old_structure_cmd/near/199096224" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/old_structure_cmd.html#199096224">(May 28 2020 at 22:55)</a>:</h4>
<p>which makes this quote especially terrifying:</p>
<blockquote>
<p>Another potential problem is performance: <code>theory_ac.cpp</code> generates many type class resolution problems. It generates at least one for every subterm of the form <code>f a b</code>. I'm not sure how expensive it will be. The simplifier also generates a lot of type class resolution problems.</p>
</blockquote>



<a name="199096235"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/old_structure_cmd/near/199096235" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/old_structure_cmd.html#199096235">(May 28 2020 at 22:56)</a>:</h4>
<p>yeah... but the new approach generates diamond problems</p>



<a name="199096274"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/old_structure_cmd/near/199096274" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/old_structure_cmd.html#199096274">(May 28 2020 at 22:56)</a>:</h4>
<p>because things are not defeq anymore</p>



<a name="199096297"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/old_structure_cmd/near/199096297" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/old_structure_cmd.html#199096297">(May 28 2020 at 22:56)</a>:</h4>
<p>the new approach solves diamond problems by giving an error</p>



<a name="199096310"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/old_structure_cmd/near/199096310" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/old_structure_cmd.html#199096310">(May 28 2020 at 22:56)</a>:</h4>
<p>you just can't do it</p>



<a name="199096312"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/old_structure_cmd/near/199096312" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/old_structure_cmd.html#199096312">(May 28 2020 at 22:56)</a>:</h4>
<p>here's the real use case</p>



<a name="199096333"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/old_structure_cmd/near/199096333" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/old_structure_cmd.html#199096333">(May 28 2020 at 22:57)</a>:</h4>
<p>which is a non-solution for all the stuff in the algebraic hierarchy</p>



<a name="199096334"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/old_structure_cmd/near/199096334" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/old_structure_cmd.html#199096334">(May 28 2020 at 22:57)</a>:</h4>
<p><code>euclidean_domain</code> extends <code>comm_ring</code> (it used to extend <code>nonzero_comm_ring</code>)</p>



<a name="199096346"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/old_structure_cmd/near/199096346" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/old_structure_cmd.html#199096346">(May 28 2020 at 22:57)</a>:</h4>
<p>and there is an instance that every euclidean domain is an integral domain</p>



<a name="199096360"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/old_structure_cmd/near/199096360" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/old_structure_cmd.html#199096360">(May 28 2020 at 22:57)</a>:</h4>
<p>so you get two paths to <code>comm_ring</code> that are not defeq</p>



<a name="199096369"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/old_structure_cmd/near/199096369" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/old_structure_cmd.html#199096369">(May 28 2020 at 22:57)</a>:</h4>
<p><code>euclidean_domain</code> uses the new approach</p>



<a name="199096373"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/old_structure_cmd/near/199096373" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/old_structure_cmd.html#199096373">(May 28 2020 at 22:57)</a>:</h4>
<p>while <code>integral_domain</code> uses the old approach</p>



<a name="199096378"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/old_structure_cmd/near/199096378" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/old_structure_cmd.html#199096378">(May 28 2020 at 22:57)</a>:</h4>
<p>what should I do?</p>



<a name="199096383"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/old_structure_cmd/near/199096383" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/old_structure_cmd.html#199096383">(May 28 2020 at 22:57)</a>:</h4>
<p>make it an old structure</p>



<a name="199096416"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/old_structure_cmd/near/199096416" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/old_structure_cmd.html#199096416">(May 28 2020 at 22:58)</a>:</h4>
<p>aha</p>



<a name="199096434"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/old_structure_cmd/near/199096434" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/old_structure_cmd.html#199096434">(May 28 2020 at 22:58)</a>:</h4>
<p>alright</p>



<a name="199096480"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/old_structure_cmd/near/199096480" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/old_structure_cmd.html#199096480">(May 28 2020 at 22:58)</a>:</h4>
<p>actually now that I come to think about it I'm not sure that's actually a problem</p>



<a name="199096511"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/old_structure_cmd/near/199096511" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/old_structure_cmd.html#199096511">(May 28 2020 at 22:59)</a>:</h4>
<p>but now <code>rw</code> cannot find</p>
<div class="codehilite"><pre><span></span><code><span class="bp">@</span><span class="n">has_add</span><span class="bp">.</span><span class="n">add</span><span class="bp">.</span><span class="o">{</span><span class="n">u</span><span class="o">}</span> <span class="n">α</span>
    <span class="o">(</span><span class="bp">@</span><span class="n">distrib</span><span class="bp">.</span><span class="n">to_has_add</span><span class="bp">.</span><span class="o">{</span><span class="n">u</span><span class="o">}</span> <span class="n">α</span>
       <span class="o">(</span><span class="bp">@</span><span class="n">ring</span><span class="bp">.</span><span class="n">to_distrib</span><span class="bp">.</span><span class="o">{</span><span class="n">u</span><span class="o">}</span> <span class="n">α</span> <span class="o">(</span><span class="bp">@</span><span class="n">comm_ring</span><span class="bp">.</span><span class="n">to_ring</span><span class="bp">.</span><span class="o">{</span><span class="n">u</span><span class="o">}</span> <span class="n">α</span> <span class="o">(</span><span class="bp">@</span><span class="n">euclidean_domain</span><span class="bp">.</span><span class="n">to_comm_ring</span><span class="bp">.</span><span class="o">{</span><span class="n">u</span><span class="o">}</span> <span class="n">α</span> <span class="bp">_</span><span class="n">inst_1</span><span class="o">))))</span>
    <span class="o">(</span><span class="bp">@</span><span class="n">has_mul</span><span class="bp">.</span><span class="n">mul</span><span class="bp">.</span><span class="o">{</span><span class="n">u</span><span class="o">}</span> <span class="n">α</span>
       <span class="o">(</span><span class="bp">@</span><span class="n">mul_zero_class</span><span class="bp">.</span><span class="n">to_has_mul</span><span class="bp">.</span><span class="o">{</span><span class="n">u</span><span class="o">}</span> <span class="n">α</span>
          <span class="o">(</span><span class="bp">@</span><span class="n">semiring</span><span class="bp">.</span><span class="n">to_mul_zero_class</span><span class="bp">.</span><span class="o">{</span><span class="n">u</span><span class="o">}</span> <span class="n">α</span>
             <span class="o">(</span><span class="bp">@</span><span class="n">ring</span><span class="bp">.</span><span class="n">to_semiring</span><span class="bp">.</span><span class="o">{</span><span class="n">u</span><span class="o">}</span> <span class="n">α</span> <span class="o">(</span><span class="bp">@</span><span class="n">comm_ring</span><span class="bp">.</span><span class="n">to_ring</span><span class="bp">.</span><span class="o">{</span><span class="n">u</span><span class="o">}</span> <span class="n">α</span> <span class="o">(</span><span class="bp">@</span><span class="n">euclidean_domain</span><span class="bp">.</span><span class="n">to_comm_ring</span><span class="bp">.</span><span class="o">{</span><span class="n">u</span><span class="o">}</span> <span class="n">α</span> <span class="bp">_</span><span class="n">inst_1</span><span class="o">)))))</span>
       <span class="n">a</span>
       <span class="n">s</span><span class="o">)</span>
    <span class="o">(</span><span class="bp">@</span><span class="n">has_mul</span><span class="bp">.</span><span class="n">mul</span><span class="bp">.</span><span class="o">{</span><span class="n">u</span><span class="o">}</span> <span class="n">α</span>
       <span class="o">(</span><span class="bp">@</span><span class="n">mul_zero_class</span><span class="bp">.</span><span class="n">to_has_mul</span><span class="bp">.</span><span class="o">{</span><span class="n">u</span><span class="o">}</span> <span class="n">α</span>
          <span class="o">(</span><span class="bp">@</span><span class="n">semiring</span><span class="bp">.</span><span class="n">to_mul_zero_class</span><span class="bp">.</span><span class="o">{</span><span class="n">u</span><span class="o">}</span> <span class="n">α</span>
             <span class="o">(</span><span class="bp">@</span><span class="n">ring</span><span class="bp">.</span><span class="n">to_semiring</span><span class="bp">.</span><span class="o">{</span><span class="n">u</span><span class="o">}</span> <span class="n">α</span> <span class="o">(</span><span class="bp">@</span><span class="n">comm_ring</span><span class="bp">.</span><span class="n">to_ring</span><span class="bp">.</span><span class="o">{</span><span class="n">u</span><span class="o">}</span> <span class="n">α</span> <span class="o">(</span><span class="bp">@</span><span class="n">euclidean_domain</span><span class="bp">.</span><span class="n">to_comm_ring</span><span class="bp">.</span><span class="o">{</span><span class="n">u</span><span class="o">}</span> <span class="n">α</span> <span class="bp">_</span><span class="n">inst_1</span><span class="o">)))))</span>
       <span class="n">b</span>
       <span class="n">t</span><span class="o">)</span>
</code></pre></div>


<p>(which is <code>a * s + b * t</code>)<br>
inside</p>
<div class="codehilite"><pre><span></span><code><span class="o">(</span><span class="bp">@</span><span class="n">has_add</span><span class="bp">.</span><span class="n">add</span><span class="bp">.</span><span class="o">{</span><span class="n">u</span><span class="o">}</span> <span class="n">α</span>
             <span class="o">(</span><span class="bp">@</span><span class="n">distrib</span><span class="bp">.</span><span class="n">to_has_add</span><span class="bp">.</span><span class="o">{</span><span class="n">u</span><span class="o">}</span> <span class="n">α</span>
                <span class="o">(</span><span class="bp">@</span><span class="n">ring</span><span class="bp">.</span><span class="n">to_distrib</span><span class="bp">.</span><span class="o">{</span><span class="n">u</span><span class="o">}</span> <span class="n">α</span> <span class="o">(</span><span class="bp">@</span><span class="n">comm_ring</span><span class="bp">.</span><span class="n">to_ring</span><span class="bp">.</span><span class="o">{</span><span class="n">u</span><span class="o">}</span> <span class="n">α</span> <span class="o">(</span><span class="bp">@</span><span class="n">euclidean_domain</span><span class="bp">.</span><span class="n">to_comm_ring</span><span class="bp">.</span><span class="o">{</span><span class="n">u</span><span class="o">}</span> <span class="n">α</span> <span class="bp">_</span><span class="n">inst_1</span><span class="o">))))</span>
             <span class="o">(</span><span class="bp">@</span><span class="n">has_mul</span><span class="bp">.</span><span class="n">mul</span><span class="bp">.</span><span class="o">{</span><span class="n">u</span><span class="o">}</span> <span class="n">α</span> <span class="o">(</span><span class="bp">@</span><span class="n">has_mul</span><span class="bp">.</span><span class="n">mk</span><span class="bp">.</span><span class="o">{</span><span class="n">u</span><span class="o">}</span> <span class="n">α</span> <span class="o">(</span><span class="bp">@</span><span class="n">euclidean_domain</span><span class="bp">.</span><span class="n">mul</span><span class="bp">.</span><span class="o">{</span><span class="n">u</span><span class="o">}</span> <span class="n">α</span> <span class="bp">_</span><span class="n">inst_1</span><span class="o">))</span> <span class="n">a</span> <span class="n">s</span><span class="o">)</span>
             <span class="o">(</span><span class="bp">@</span><span class="n">has_mul</span><span class="bp">.</span><span class="n">mul</span><span class="bp">.</span><span class="o">{</span><span class="n">u</span><span class="o">}</span> <span class="n">α</span> <span class="o">(</span><span class="bp">@</span><span class="n">has_mul</span><span class="bp">.</span><span class="n">mk</span><span class="bp">.</span><span class="o">{</span><span class="n">u</span><span class="o">}</span> <span class="n">α</span> <span class="o">(</span><span class="bp">@</span><span class="n">euclidean_domain</span><span class="bp">.</span><span class="n">mul</span><span class="bp">.</span><span class="o">{</span><span class="n">u</span><span class="o">}</span> <span class="n">α</span> <span class="bp">_</span><span class="n">inst_1</span><span class="o">))</span> <span class="n">b</span> <span class="n">t</span><span class="o">)</span>
</code></pre></div>



<a name="199096528"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/old_structure_cmd/near/199096528" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/old_structure_cmd.html#199096528">(May 28 2020 at 22:59)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110049">Mario Carneiro</span> <a href="#narrow/stream/113488-general/topic/old_structure_cmd/near/199096480">said</a>:</p>
<blockquote>
<p>actually now that I come to think about it I'm not sure that's actually a problem</p>
</blockquote>
<p>I get <code>synthesized</code> error</p>



<a name="199096530"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/old_structure_cmd/near/199096530" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/old_structure_cmd.html#199096530">(May 28 2020 at 22:59)</a>:</h4>
<p>it's true that the two paths to <code>comm_ring</code> are not defeq, but that doesn't matter, what matters is that all projections out of <code>comm_ring</code> are defeq regardless of the path</p>



<a name="199096547"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/old_structure_cmd/near/199096547" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/old_structure_cmd.html#199096547">(May 28 2020 at 22:59)</a>:</h4>
<p>but the problem is that <code>ideal</code> uses <code>comm_ring</code> itself</p>



<a name="199096559"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/old_structure_cmd/near/199096559" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/old_structure_cmd.html#199096559">(May 28 2020 at 22:59)</a>:</h4>
<p>it used to not matter because there is <code>nonzero_comm_ring</code> in between</p>



<a name="199097050"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/old_structure_cmd/near/199097050" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/old_structure_cmd.html#199097050">(May 28 2020 at 23:05)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> you can actually see the error itself <em>in vivo</em> in <code>src/ring_theory/principal_ideal_domain.lean</code> in the <code>nonzero</code> branch</p>



<a name="199097056"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/old_structure_cmd/near/199097056" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/old_structure_cmd.html#199097056">(May 28 2020 at 23:05)</a>:</h4>
<p>(which has oleans ready)</p>



<a name="199097134"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/old_structure_cmd/near/199097134" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Hughes <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/old_structure_cmd.html#199097134">(May 28 2020 at 23:06)</a>:</h4>
<p>Is the <code>rw</code> using <code>euclidean_domain.mul_comm</code> or something? I remember this causing problems</p>



<a name="199097181"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/old_structure_cmd/near/199097181" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/old_structure_cmd.html#199097181">(May 28 2020 at 23:07)</a>:</h4>
<p>as in, the error caused by the two paths not being defeq</p>



<a name="199097191"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/old_structure_cmd/near/199097191" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/old_structure_cmd.html#199097191">(May 28 2020 at 23:07)</a>:</h4>
<p>the <code>rw</code> error arises when I use old structure command</p>



<a name="199097201"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/old_structure_cmd/near/199097201" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/old_structure_cmd.html#199097201">(May 28 2020 at 23:07)</a>:</h4>
<p>which is currently not enabled</p>



<a name="199097271"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/old_structure_cmd/near/199097271" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Hughes <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/old_structure_cmd.html#199097271">(May 28 2020 at 23:08)</a>:</h4>
<p>Because. <code>old_structure_cnd</code> will ad <code>euclidean_domain.mul_comm </code> to the environment</p>



<a name="199097292"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/old_structure_cmd/near/199097292" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/old_structure_cmd.html#199097292">(May 28 2020 at 23:08)</a>:</h4>
<p>right</p>



<a name="199097580"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/old_structure_cmd/near/199097580" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Hughes <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/old_structure_cmd.html#199097580">(May 28 2020 at 23:13)</a>:</h4>
<p>You can <code>protect</code> lemmas after defying them now, so you can solve that problem if that was the problem.</p>



<a name="199097653"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/old_structure_cmd/near/199097653" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/old_structure_cmd.html#199097653">(May 28 2020 at 23:14)</a>:</h4>
<p>the current problem is the two paths not being defeq because euclidean domain is using the new approach</p>



<a name="199097682"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/old_structure_cmd/near/199097682" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/old_structure_cmd.html#199097682">(May 28 2020 at 23:15)</a>:</h4>
<p>and "just use the old approach" creates other problems which might or might not be solvable depending or not depending on <a href="https://github.com/leanprover-community/lean/issues/282">lean#282</a></p>



<a name="199097699"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/old_structure_cmd/near/199097699" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Hughes <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/old_structure_cmd.html#199097699">(May 28 2020 at 23:15)</a>:</h4>
<p>What are the other problems?</p>



<a name="199097839"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/old_structure_cmd/near/199097839" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/old_structure_cmd.html#199097839">(May 28 2020 at 23:18)</a>:</h4>
<p>the <code>rw</code> problem not recognizing <code>a * s + b * t</code></p>



<a name="199097991"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/old_structure_cmd/near/199097991" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Hughes <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/old_structure_cmd.html#199097991">(May 28 2020 at 23:21)</a>:</h4>
<p>This command after the definition of euclidean domain solves the rw issue </p>
<div class="codehilite"><pre><span></span><code><span class="n">run_cmd</span> <span class="n">do</span> <span class="n">env</span> <span class="err">←</span> <span class="n">tactic</span><span class="bp">.</span><span class="n">get_env</span><span class="o">,</span>
  <span class="n">tactic</span><span class="bp">.</span><span class="n">set_env</span> <span class="err">$</span> <span class="n">environment</span><span class="bp">.</span><span class="n">mk_protected</span> <span class="n">env</span> <span class="bp">``</span><span class="n">euclidean_domain</span><span class="bp">.</span><span class="n">mul_assoc</span>
</code></pre></div>



<a name="199098117"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/old_structure_cmd/near/199098117" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/old_structure_cmd.html#199098117">(May 28 2020 at 23:23)</a>:</h4>
<p>I am so proud of my undergraduates and their deep understanding of the system I love</p>



<a name="199101684"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/old_structure_cmd/near/199101684" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/old_structure_cmd.html#199101684">(May 29 2020 at 00:23)</a>:</h4>
<p>I think the two paths are actually defeq, but not defeq with instance reducibility, because it involves unfolding <code>ideal</code> to note that the definition only uses the various components of a ring and not the ring itself</p>



<a name="199116404"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/old_structure_cmd/near/199116404" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/old_structure_cmd.html#199116404">(May 29 2020 at 05:49)</a>:</h4>
<p>then what should i do?</p>



<a name="199116921"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/old_structure_cmd/near/199116921" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Hughes <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/old_structure_cmd.html#199116921">(May 29 2020 at 06:00)</a>:</h4>
<p>Use <code>old_structure_cmd</code></p>



<a name="199118015"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/old_structure_cmd/near/199118015" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/old_structure_cmd.html#199118015">(May 29 2020 at 06:35)</a>:</h4>
<p>I don't understand why making mul_assoc protected has anything to do with rw figuring out some patterns</p>



<a name="199120707"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/old_structure_cmd/near/199120707" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/old_structure_cmd.html#199120707">(May 29 2020 at 07:15)</a>:</h4>
<p>as a result one should not <code>open euclidean_domain</code> now</p>



<a name="199120807"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/old_structure_cmd/near/199120807" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/old_structure_cmd.html#199120807">(May 29 2020 at 07:16)</a>:</h4>
<p>aha</p>



<a name="199120810"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/old_structure_cmd/near/199120810" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/old_structure_cmd.html#199120810">(May 29 2020 at 07:17)</a>:</h4>
<p>or I should make everything protected</p>



<a name="199121180"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/old_structure_cmd/near/199121180" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/old_structure_cmd.html#199121180">(May 29 2020 at 07:21)</a>:</h4>
<p>how does <code>set_env</code> work? I thought it cannot change anything</p>



<a name="199121189"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/old_structure_cmd/near/199121189" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/old_structure_cmd.html#199121189">(May 29 2020 at 07:21)</a>:</h4>
<p>or is that limited to new declarations</p>



<a name="199127747"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/old_structure_cmd/near/199127747" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Hughes <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/old_structure_cmd.html#199127747">(May 29 2020 at 08:40)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib/issues/2855">#2855</a> gives you an attribute to protect the projections</p>



<a name="199127821"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/old_structure_cmd/near/199127821" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/old_structure_cmd.html#199127821">(May 29 2020 at 08:41)</a>:</h4>
<p>oh thanks!</p>



<a name="199127882"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/old_structure_cmd/near/199127882" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/old_structure_cmd.html#199127882">(May 29 2020 at 08:42)</a>:</h4>
<p>but some projections might not need to be protected</p>



<a name="199127897"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/old_structure_cmd/near/199127897" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/old_structure_cmd.html#199127897">(May 29 2020 at 08:42)</a>:</h4>
<p>this is what I do currently for <code>euclidean_domain</code>:</p>



<a name="199127973"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/old_structure_cmd/near/199127973" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/old_structure_cmd.html#199127973">(May 29 2020 at 08:43)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib/blob/396edbf68a450118a6c880c59943a8bd9c395ba5/src/algebra/euclidean_domain.lean#L36-L54">https://github.com/leanprover-community/mathlib/blob/396edbf68a450118a6c880c59943a8bd9c395ba5/src/algebra/euclidean_domain.lean#L36-L54</a></p>
<div class="codehilite"><pre><span></span><code><span class="n">run_cmd</span> <span class="n">do</span> <span class="n">env</span> <span class="err">←</span> <span class="n">tactic</span><span class="bp">.</span><span class="n">get_env</span><span class="o">,</span>
  <span class="k">let</span> <span class="n">env</span> <span class="o">:=</span> <span class="n">env</span><span class="bp">.</span><span class="n">mk_protected</span> <span class="bp">``</span><span class="n">euclidean_domain</span><span class="bp">.</span><span class="n">add</span><span class="o">,</span>
  <span class="k">let</span> <span class="n">env</span> <span class="o">:=</span> <span class="n">env</span><span class="bp">.</span><span class="n">mk_protected</span> <span class="bp">``</span><span class="n">euclidean_domain</span><span class="bp">.</span><span class="n">add_assoc</span><span class="o">,</span>
  <span class="k">let</span> <span class="n">env</span> <span class="o">:=</span> <span class="n">env</span><span class="bp">.</span><span class="n">mk_protected</span> <span class="bp">``</span><span class="n">euclidean_domain</span><span class="bp">.</span><span class="n">zero</span><span class="o">,</span>
  <span class="k">let</span> <span class="n">env</span> <span class="o">:=</span> <span class="n">env</span><span class="bp">.</span><span class="n">mk_protected</span> <span class="bp">``</span><span class="n">euclidean_domain</span><span class="bp">.</span><span class="n">zero_add</span><span class="o">,</span>
  <span class="k">let</span> <span class="n">env</span> <span class="o">:=</span> <span class="n">env</span><span class="bp">.</span><span class="n">mk_protected</span> <span class="bp">``</span><span class="n">euclidean_domain</span><span class="bp">.</span><span class="n">add_zero</span><span class="o">,</span>
  <span class="k">let</span> <span class="n">env</span> <span class="o">:=</span> <span class="n">env</span><span class="bp">.</span><span class="n">mk_protected</span> <span class="bp">``</span><span class="n">euclidean_domain</span><span class="bp">.</span><span class="n">neg</span><span class="o">,</span>
  <span class="k">let</span> <span class="n">env</span> <span class="o">:=</span> <span class="n">env</span><span class="bp">.</span><span class="n">mk_protected</span> <span class="bp">``</span><span class="n">euclidean_domain</span><span class="bp">.</span><span class="n">add_left_neg</span><span class="o">,</span>
  <span class="k">let</span> <span class="n">env</span> <span class="o">:=</span> <span class="n">env</span><span class="bp">.</span><span class="n">mk_protected</span> <span class="bp">``</span><span class="n">euclidean_domain</span><span class="bp">.</span><span class="n">add_comm</span><span class="o">,</span>
  <span class="k">let</span> <span class="n">env</span> <span class="o">:=</span> <span class="n">env</span><span class="bp">.</span><span class="n">mk_protected</span> <span class="bp">``</span><span class="n">euclidean_domain</span><span class="bp">.</span><span class="n">mul</span><span class="o">,</span>
  <span class="k">let</span> <span class="n">env</span> <span class="o">:=</span> <span class="n">env</span><span class="bp">.</span><span class="n">mk_protected</span> <span class="bp">``</span><span class="n">euclidean_domain</span><span class="bp">.</span><span class="n">mul_assoc</span><span class="o">,</span>
  <span class="k">let</span> <span class="n">env</span> <span class="o">:=</span> <span class="n">env</span><span class="bp">.</span><span class="n">mk_protected</span> <span class="bp">``</span><span class="n">euclidean_domain</span><span class="bp">.</span><span class="n">one</span><span class="o">,</span>
  <span class="k">let</span> <span class="n">env</span> <span class="o">:=</span> <span class="n">env</span><span class="bp">.</span><span class="n">mk_protected</span> <span class="bp">``</span><span class="n">euclidean_domain</span><span class="bp">.</span><span class="n">one_mul</span><span class="o">,</span>
  <span class="k">let</span> <span class="n">env</span> <span class="o">:=</span> <span class="n">env</span><span class="bp">.</span><span class="n">mk_protected</span> <span class="bp">``</span><span class="n">euclidean_domain</span><span class="bp">.</span><span class="n">mul_one</span><span class="o">,</span>
  <span class="k">let</span> <span class="n">env</span> <span class="o">:=</span> <span class="n">env</span><span class="bp">.</span><span class="n">mk_protected</span> <span class="bp">``</span><span class="n">euclidean_domain</span><span class="bp">.</span><span class="n">left_distrib</span><span class="o">,</span>
  <span class="k">let</span> <span class="n">env</span> <span class="o">:=</span> <span class="n">env</span><span class="bp">.</span><span class="n">mk_protected</span> <span class="bp">``</span><span class="n">euclidean_domain</span><span class="bp">.</span><span class="n">right_distrib</span><span class="o">,</span>
  <span class="k">let</span> <span class="n">env</span> <span class="o">:=</span> <span class="n">env</span><span class="bp">.</span><span class="n">mk_protected</span> <span class="bp">``</span><span class="n">euclidean_domain</span><span class="bp">.</span><span class="n">mul_comm</span><span class="o">,</span>
  <span class="k">let</span> <span class="n">env</span> <span class="o">:=</span> <span class="n">env</span><span class="bp">.</span><span class="n">mk_protected</span> <span class="bp">``</span><span class="n">euclidean_domain</span><span class="bp">.</span><span class="n">zero_ne_one</span><span class="o">,</span>
  <span class="n">tactic</span><span class="bp">.</span><span class="n">set_env</span> <span class="n">env</span>
</code></pre></div>



<a name="199128054"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/old_structure_cmd/near/199128054" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/old_structure_cmd.html#199128054">(May 29 2020 at 08:44)</a>:</h4>
<p>as in, there's no need to make <code>euclidean_domain.quotient</code> protected</p>



<a name="199128073"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/old_structure_cmd/near/199128073" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/old_structure_cmd.html#199128073">(May 29 2020 at 08:44)</a>:</h4>
<p>oh I guess there's a need</p>



<a name="199128084"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/old_structure_cmd/near/199128084" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/old_structure_cmd.html#199128084">(May 29 2020 at 08:44)</a>:</h4>
<p>it coincides with the <code>quotient</code> for quotienting a setoid</p>



<a name="199128167"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/old_structure_cmd/near/199128167" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/old_structure_cmd.html#199128167">(May 29 2020 at 08:45)</a>:</h4>
<p>Can we make fields of a structure/class protected by default?</p>



<a name="199128285"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/old_structure_cmd/near/199128285" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Hughes <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/old_structure_cmd.html#199128285">(May 29 2020 at 08:46)</a>:</h4>
<p>I'm not sure there's a way to unprotect, that's the only trouble I can think of with that.</p>



<a name="199128621"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/old_structure_cmd/near/199128621" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/old_structure_cmd.html#199128621">(May 29 2020 at 08:50)</a>:</h4>
<p>I see... we might want to protect at the end of the file that introduced the structure...</p>



<a name="199128676"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/old_structure_cmd/near/199128676" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/old_structure_cmd.html#199128676">(May 29 2020 at 08:50)</a>:</h4>
<p>here's hoping <code>protected</code> becomes an attribute at some point...</p>



<a name="199137290"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/old_structure_cmd/near/199137290" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Hughes <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/old_structure_cmd.html#199137290">(May 29 2020 at 10:35)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110049">Mario Carneiro</span> <a href="#narrow/stream/113488-general/topic/old_structure_cmd/near/199128676">said</a>:</p>
<blockquote>
<p>here's hoping <code>protected</code> becomes an attribute at some point...</p>
</blockquote>
<p>I added this to <a href="https://github.com/leanprover-community/mathlib/issues/2855">#2855</a></p>



<a name="199138911"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/old_structure_cmd/near/199138911" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/old_structure_cmd.html#199138911">(May 29 2020 at 10:58)</a>:</h4>
<p><span class="user-mention" data-user-id="110044">@Chris Hughes</span> Wow, thanks for that PR!</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>