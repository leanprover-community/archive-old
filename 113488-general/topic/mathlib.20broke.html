---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/mathlib.20broke.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mathlib.20broke.html">mathlib broke</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="123036193"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20broke/near/123036193" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Simon Hudon <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mathlib.20broke.html#123036193">(Feb 27 2018 at 09:53)</a>:</h4>
<p>I'm trying to build <code>mathlib</code> with the latest lean-nightly and data/set/countable.lean seems to be broken. Did someone else try the latest nightly (in last 9 hours or so)?</p>



<a name="264363644"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20broke/near/264363644" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mathlib.20broke.html#264363644">(Dec 09 2021 at 20:45)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib/pull/10664">This PR</a> failed at a completely unrelated point, at presheaves. Gives a deterministic timeout. I have no idea why, nor how to fix it.</p>



<a name="264364258"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20broke/near/264364258" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Andrew Yang <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mathlib.20broke.html#264364258">(Dec 09 2021 at 20:50)</a>:</h4>
<p>When merging PRs into master, bors would bundle a bunch of approved PR and try to run CI on it. If it failed it might be someone else's PR that is failing. If you see "Build failed (retrying...):", your PR is probably still in queue and bors will try later with a smaller bunch.</p>



<a name="264364875"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20broke/near/264364875" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Andrew Yang <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mathlib.20broke.html#264364875">(Dec 09 2021 at 20:55)</a>:</h4>
<p>That said, <code>algebraic_geometry/presheafed_space/has_colimits.lean</code> has also been giving me some deterministic timeouts that are unreproducible on my local machine, and I will probably try to make it faster in the near future.</p>



<a name="264367644"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20broke/near/264367644" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mathlib.20broke.html#264367644">(Dec 09 2021 at 21:17)</a>:</h4>
<p>What's the offending proof in that file?</p>



<a name="264367891"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20broke/near/264367891" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Andrew Yang <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mathlib.20broke.html#264367891">(Dec 09 2021 at 21:19)</a>:</h4>
<p>Its <a href="https://leanprover-community.github.io/mathlib_docs/find/algebraic_geometry.PresheafedSpace.colimit_cocone_is_colimit">docs#algebraic_geometry.PresheafedSpace.colimit_cocone_is_colimit</a>.<br>
Breaking the definition up probably helps.</p>



<a name="264368125"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20broke/near/264368125" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mathlib.20broke.html#264368125">(Dec 09 2021 at 21:21)</a>:</h4>
<p>Yeah, it seems that <code>desc</code> in this def is nested 3 deep</p>



<a name="264368291"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20broke/near/264368291" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mathlib.20broke.html#264368291">(Dec 09 2021 at 21:22)</a>:</h4>
<p>Although the proof of naturality of <code>c</code> is just a term, so I don't know if that's the issue.</p>



<a name="264390988"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20broke/near/264390988" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mathlib.20broke.html#264390988">(Dec 10 2021 at 01:11)</a>:</h4>
<p>I know pretty much nilch about categories, so I don't think I can help much here</p>



<a name="264429407"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20broke/near/264429407" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mathlib.20broke.html#264429407">(Dec 10 2021 at 10:46)</a>:</h4>
<p>This failure is starting to affect a lot of CI runs</p>



<a name="264429816"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20broke/near/264429816" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Andrew Yang <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mathlib.20broke.html#264429816">(Dec 10 2021 at 10:50)</a>:</h4>
<p>Hopefully <a href="https://github.com/leanprover-community/mathlib/issues/10703">#10703</a> helps?</p>



<a name="264477119"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20broke/near/264477119" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mathlib.20broke.html#264477119">(Dec 10 2021 at 17:08)</a>:</h4>
<p>Currently restarting my own PR, hopefully that fixes it</p>



<a name="264477359"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20broke/near/264477359" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anatole Dedecker <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mathlib.20broke.html#264477359">(Dec 10 2021 at 17:10)</a>:</h4>
<p>If not you should try merging master</p>



<a name="264703825"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20broke/near/264703825" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Notification Bot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mathlib.20broke.html#264703825">(Dec 13 2021 at 13:17)</a>:</h4>
<p><span class="user-mention silent" data-user-id="459227">Violeta Hernández</span> has marked this topic as unresolved.</p>



<a name="264703831"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20broke/near/264703831" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mathlib.20broke.html#264703831">(Dec 13 2021 at 13:17)</a>:</h4>
<p>I think mathlib broke again?</p>



<a name="264703943"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20broke/near/264703943" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mathlib.20broke.html#264703943">(Dec 13 2021 at 13:18)</a>:</h4>
<p>My PR <a href="https://github.com/leanprover-community/mathlib/pull/10745#issuecomment-992462254">#10745</a> failed for something entirely unrelated</p>



<a name="264703973"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20broke/near/264703973" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mathlib.20broke.html#264703973">(Dec 13 2021 at 13:18)</a>:</h4>
<p>A type mismatch in <code>analysis/convex/strict</code></p>



<a name="264703998"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20broke/near/264703998" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mathlib.20broke.html#264703998">(Dec 13 2021 at 13:18)</a>:</h4>
<p>Oh? That's my file.</p>



<a name="264704054"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20broke/near/264704054" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mathlib.20broke.html#264704054">(Dec 13 2021 at 13:19)</a>:</h4>
<p>Can you link to the logs?</p>



<a name="264704128"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20broke/near/264704128" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mathlib.20broke.html#264704128">(Dec 13 2021 at 13:19)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib/runs/4506182791?check_suite_focus=true">https://github.com/leanprover-community/mathlib/runs/4506182791?check_suite_focus=true</a></p>



<a name="264704208"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20broke/near/264704208" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mathlib.20broke.html#264704208">(Dec 13 2021 at 13:20)</a>:</h4>
<p>Actually, does this mean that mathlib itself does not compile right now?</p>



<a name="264704224"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20broke/near/264704224" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mathlib.20broke.html#264704224">(Dec 13 2021 at 13:20)</a>:</h4>
<p>Or does it just mean that there's some other broken PRs out there?</p>



<a name="264704260"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20broke/near/264704260" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mathlib.20broke.html#264704260">(Dec 13 2021 at 13:20)</a>:</h4>
<p>That looks like it's because of <a href="https://github.com/leanprover-community/mathlib/pull/10740">#10740</a>, but this one hasn't been merged yet <span aria-label="thinking" class="emoji emoji-1f914" role="img" title="thinking">:thinking:</span></p>



<a name="264704462"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20broke/near/264704462" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mathlib.20broke.html#264704462">(Dec 13 2021 at 13:22)</a>:</h4>
<p>Oh yeah whoops can someone get <a href="https://github.com/leanprover-community/mathlib/pull/10740">#10740</a> off the queue?</p>



<a name="264704477"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20broke/near/264704477" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mathlib.20broke.html#264704477">(Dec 13 2021 at 13:22)</a>:</h4>
<p><span class="user-group-mention" data-user-group-id="2494">@maintainers</span></p>



<a name="264704543"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20broke/near/264704543" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mathlib.20broke.html#264704543">(Dec 13 2021 at 13:23)</a>:</h4>
<p>I wasn't expecting Johan's tornado of <code>bors merge</code> this morning <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span></p>



<a name="264704654"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20broke/near/264704654" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mathlib.20broke.html#264704654">(Dec 13 2021 at 13:24)</a>:</h4>
<p>Thanks</p>



<a name="264704793"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20broke/near/264704793" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mathlib.20broke.html#264704793">(Dec 13 2021 at 13:25)</a>:</h4>
<p>Whoops, my apologies for borsifying a bad PR.</p>



<a name="264704902"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20broke/near/264704902" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mathlib.20broke.html#264704902">(Dec 13 2021 at 13:26)</a>:</h4>
<p>You couldn't know <a href="https://github.com/leanprover-community/mathlib/pull/10648">#10648</a> and <a href="https://github.com/leanprover-community/mathlib/pull/10740">#10740</a> were incompatible. That's my bad!</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>