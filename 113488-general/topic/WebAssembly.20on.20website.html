---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/WebAssembly.20on.20website.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/WebAssembly.20on.20website.html">WebAssembly on website</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="203195861"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/WebAssembly%20on%20website/near/203195861" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/WebAssembly.20on.20website.html#203195861">(Jul 07 2020 at 20:03)</a>:</h4>
<p><span class="user-mention" data-user-id="110031">@Patrick Massot</span>  Is there any way to edit the <a href="https://leanprover-community.github.io/lean-web-editor/">default Lean code</a> that shows up in WebAssembly?  At the moment it is the following:</p>
<div class="codehilite"><pre><span></span><code><span class="c1">-- Live WebAssembly version of Lean</span>
<span class="bp">#</span><span class="kn">eval</span> <span class="k">let</span> <span class="n">v</span> <span class="o">:=</span> <span class="n">lean</span><span class="bp">.</span><span class="n">version</span> <span class="k">in</span> <span class="k">let</span> <span class="n">s</span> <span class="o">:=</span> <span class="n">lean</span><span class="bp">.</span><span class="n">special_version_desc</span> <span class="k">in</span> <span class="n">string</span><span class="bp">.</span><span class="n">join</span>
<span class="o">[</span><span class="s2">&quot;Lean (version &quot;</span><span class="o">,</span> <span class="n">v</span><span class="bp">.</span><span class="mi">1</span><span class="bp">.</span><span class="n">repr</span><span class="o">,</span> <span class="s2">&quot;.&quot;</span><span class="o">,</span> <span class="n">v</span><span class="bp">.</span><span class="mi">2</span><span class="bp">.</span><span class="mi">1</span><span class="bp">.</span><span class="n">repr</span><span class="o">,</span> <span class="s2">&quot;.&quot;</span><span class="o">,</span> <span class="n">v</span><span class="bp">.</span><span class="mi">2</span><span class="bp">.</span><span class="mi">2</span><span class="bp">.</span><span class="n">repr</span><span class="o">,</span> <span class="s2">&quot;, &quot;</span><span class="o">,</span>
<span class="k">if</span> <span class="n">s</span> <span class="bp">≠</span> <span class="s2">&quot;&quot;</span> <span class="k">then</span> <span class="n">s</span> <span class="bp">++</span> <span class="s2">&quot;, &quot;</span> <span class="k">else</span> <span class="n">s</span><span class="o">,</span> <span class="s2">&quot;commit &quot;</span><span class="o">,</span> <span class="o">(</span><span class="n">lean</span><span class="bp">.</span><span class="n">githash</span><span class="bp">.</span><span class="n">to_list</span><span class="bp">.</span><span class="k">take</span> <span class="mi">12</span><span class="o">)</span><span class="bp">.</span><span class="n">as_string</span><span class="o">,</span> <span class="s2">&quot;)&quot;</span><span class="o">]</span>

<span class="kn">example</span> <span class="o">(</span><span class="n">m</span> <span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="n">m</span> <span class="bp">+</span> <span class="n">n</span> <span class="bp">=</span> <span class="n">n</span> <span class="bp">+</span> <span class="n">m</span> <span class="o">:=</span>
<span class="k">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">nat</span><span class="bp">.</span><span class="n">add_comm</span><span class="o">]</span>
</code></pre></div>


<p>I think the <code>#eval</code> statement (full of CS stuff like strings) could be rather forbidding for a brand-new mathematician user, especially with the 3-line green underline.</p>
<p>I mention it because the <a href="https://leanprover-community.github.io/">Lean community website</a> has several prominent links to this page:</p>
<ul>
<li>on the homepage, this is one of the first links (text: "Try the online version of Lean")</li>
<li>in the navigation bar, this is one of the first links (text: "Try it!"/"Lean online")</li>
</ul>
<p>So this could be a lot of people's first encounter with Lean.</p>
<p>An alternative would be to change just those two links so that they lead to a special beginner file in WebAssembly, either the existing file with the <code>#eval</code> deleted or the <a href="https://leanprover-community.github.io/lean-web-editor/#url=https%3A%2F%2Fraw.githubusercontent.com%2Fleanprover-community%2Ftutorials%2Fmaster%2Fsrc%2Fexercises%2F00_first_proofs.lean">first file</a> of the tutorial project.</p>



<a name="203196048"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/WebAssembly%20on%20website/near/203196048" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/WebAssembly.20on.20website.html#203196048">(Jul 07 2020 at 20:04)</a>:</h4>
<p>The answer is yes, but this is a question for <span class="user-mention" data-user-id="123965">@Bryan Gin-ge Chen</span></p>



<a name="203196077"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/WebAssembly%20on%20website/near/203196077" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/WebAssembly.20on.20website.html#203196077">(Jul 07 2020 at 20:04)</a>:</h4>
<p>And I agree this doesn't look nice and welcoming.</p>



<a name="203196268"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/WebAssembly%20on%20website/near/203196268" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ruben Van de Velde <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/WebAssembly.20on.20website.html#203196268">(Jul 07 2020 at 20:06)</a>:</h4>
<p>I think it may come from here: <a href="https://github.com/leanprover-community/lean-web-editor/blob/da9a3114bedf1825ae3f8d12d51e556a7db21c01/src/index.tsx#L738">https://github.com/leanprover-community/lean-web-editor/blob/da9a3114bedf1825ae3f8d12d51e556a7db21c01/src/index.tsx#L738</a></p>



<a name="203196287"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/WebAssembly%20on%20website/near/203196287" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/WebAssembly.20on.20website.html#203196287">(Jul 07 2020 at 20:06)</a>:</h4>
<p>I guess the very simple workaround is linking to <a href="https://leanprover-community.github.io/lean-web-editor/#code=%20">https://leanprover-community.github.io/lean-web-editor/#code=%20</a> instead.</p>



<a name="203196331"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/WebAssembly%20on%20website/near/203196331" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/WebAssembly.20on.20website.html#203196331">(Jul 07 2020 at 20:07)</a>:</h4>
<p>But yeah, I'd be happy to see the default changed.</p>



<a name="203196375"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/WebAssembly%20on%20website/near/203196375" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/WebAssembly.20on.20website.html#203196375">(Jul 07 2020 at 20:07)</a>:</h4>
<p>That's cunning!</p>



<a name="203196419"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/WebAssembly%20on%20website/near/203196419" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/WebAssembly.20on.20website.html#203196419">(Jul 07 2020 at 20:07)</a>:</h4>
<p>I think that having something like the current example</p>
<div class="codehilite"><pre><span></span><code><span class="kn">example</span> <span class="o">(</span><span class="n">m</span> <span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="n">m</span> <span class="bp">+</span> <span class="n">n</span> <span class="bp">=</span> <span class="n">n</span> <span class="bp">+</span> <span class="n">m</span> <span class="o">:=</span>
<span class="k">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">nat</span><span class="bp">.</span><span class="n">add_comm</span><span class="o">]</span>
</code></pre></div>


<p>is great, and more welcoming than the blank page.</p>



<a name="203196533"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/WebAssembly%20on%20website/near/203196533" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/WebAssembly.20on.20website.html#203196533">(Jul 07 2020 at 20:08)</a>:</h4>
<p>By the way, hello, <span class="user-mention" data-user-id="307953">@Ruben Van de Velde</span> , and congratulations on doing that Hahn-Banach PR!</p>



<a name="203196550"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/WebAssembly%20on%20website/near/203196550" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/WebAssembly.20on.20website.html#203196550">(Jul 07 2020 at 20:08)</a>:</h4>
<p><a href="https://leanprover-community.github.io/lean-web-editor/#code=example%20%28m%20n%20%3A%20%E2%84%95%29%20%3A%20m%20%2B%20n%20%3D%20n%20%2B%20m%20%3A%3D%0Aby%20simp%20%5Bnat.add_comm%5D%20">The url is a bit longer</a></p>



<a name="203196670"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/WebAssembly%20on%20website/near/203196670" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/WebAssembly.20on.20website.html#203196670">(Jul 07 2020 at 20:09)</a>:</h4>
<p>And, to workshop this even further, maybe a tactic mode proof would be more welcoming than a term mode proof ...</p>



<a name="203196780"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/WebAssembly%20on%20website/near/203196780" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/WebAssembly.20on.20website.html#203196780">(Jul 07 2020 at 20:10)</a>:</h4>
<p>Sorry about that. The code there was just to help me debug things and I never bothered to switch it. I can change it to anything you guys want.</p>



<a name="203196868"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/WebAssembly%20on%20website/near/203196868" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/WebAssembly.20on.20website.html#203196868">(Jul 07 2020 at 20:11)</a>:</h4>
<p>simp is a bit too much for <code>nat.add_comm _ _</code></p>



<a name="203196972"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/WebAssembly%20on%20website/near/203196972" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/WebAssembly.20on.20website.html#203196972">(Jul 07 2020 at 20:12)</a>:</h4>
<p>We can use <code>nat.add_comm m n</code> if we don't want it to look mysterious</p>



<a name="203197077"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/WebAssembly%20on%20website/near/203197077" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/WebAssembly.20on.20website.html#203197077">(Jul 07 2020 at 20:13)</a>:</h4>
<p>How about the infinitute of primes proof as the default?</p>



<a name="203197117"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/WebAssembly%20on%20website/near/203197117" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/WebAssembly.20on.20website.html#203197117">(Jul 07 2020 at 20:13)</a>:</h4>
<p><span class="user-mention silent" data-user-id="123965">Bryan Gin-ge Chen</span> <a href="#narrow/stream/113488-general/topic/WebAssembly.20on.20website/near/203196780">said</a>:</p>
<blockquote>
<p>Sorry about that. The code there was just to help me debug things and I never bothered to switch it. I can change it to anything you guys want.</p>
</blockquote>
<p>I've actually found it useful before since I don't know how often the web editor updates its Lean version :) but I'm sure I'm the odd one out there, hah.</p>



<a name="203197120"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/WebAssembly%20on%20website/near/203197120" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/WebAssembly.20on.20website.html#203197120">(Jul 07 2020 at 20:13)</a>:</h4>
<p>(Not the mathlib scramble-golf... but a nice one.)</p>



<a name="203197293"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/WebAssembly%20on%20website/near/203197293" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/WebAssembly.20on.20website.html#203197293">(Jul 07 2020 at 20:15)</a>:</h4>
<p>It would be nice but only if you can do it without too much imports since I guess that would slow down the webpage.</p>



<a name="203197315"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/WebAssembly%20on%20website/near/203197315" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/WebAssembly.20on.20website.html#203197315">(Jul 07 2020 at 20:15)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110596">Rob Lewis</span> <a href="#narrow/stream/113488-general/topic/WebAssembly.20on.20website/near/203197117">said</a>:</p>
<div class="codehilite"><pre><span></span><code><span class="n">I&#39;ve</span> <span class="n">actually</span> <span class="n">found</span> <span class="n">it</span> <span class="n">useful</span> <span class="n">before</span> <span class="n">since</span> <span class="n">I</span> <span class="n">don&#39;t</span> <span class="n">know</span> <span class="n">how</span> <span class="n">often</span> <span class="n">the</span> <span class="n">web</span> <span class="n">editor</span> <span class="n">updates</span> <span class="n">its</span> <span class="n">Lean</span> <span class="n">version</span> <span class="o">:)</span> <span class="n">but</span> <span class="n">I&#39;m</span> <span class="n">sure</span> <span class="n">I&#39;m</span> <span class="n">the</span> <span class="n">odd</span> <span class="n">one</span> <span class="n">out</span> <span class="n">there</span><span class="o">,</span> <span class="n">hah</span><span class="bp">.</span>
<span class="bp">````</span>
<span class="n">One</span> <span class="n">could</span> <span class="n">keep</span> <span class="n">the</span> <span class="n">default</span> <span class="n">code</span> <span class="n">the</span> <span class="n">same</span><span class="o">,</span> <span class="n">and</span> <span class="n">change</span> <span class="n">just</span> <span class="n">those</span> <span class="n">two</span> <span class="n">links</span> <span class="n">to</span> <span class="n">something</span> <span class="n">more</span> <span class="n">beginner</span><span class="bp">-</span><span class="n">friendly</span><span class="bp">.</span>
</code></pre></div>



<a name="203197629"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/WebAssembly%20on%20website/near/203197629" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/WebAssembly.20on.20website.html#203197629">(Jul 07 2020 at 20:18)</a>:</h4>
<p>I also think that the <a href="https://leanprover-community.github.io/lean-web-editor/#url=https%3A%2F%2Fraw.githubusercontent.com%2Fleanprover-community%2Ftutorials%2Fmaster%2Fsrc%2Fexercises%2F00_first_proofs.lean">first file</a> of the tutorial project is very beginner-friendly (as an alternative to the infinitude of primes); but a nearly blank page with just one or two short examples is also beginner-friendly.</p>



<a name="203201484"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/WebAssembly%20on%20website/near/203201484" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/WebAssembly.20on.20website.html#203201484">(Jul 07 2020 at 20:53)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110596">Rob Lewis</span> <a href="#narrow/stream/113488-general/topic/WebAssembly.20on.20website/near/203197117">said</a>:</p>
<blockquote>
<p>I've actually found it useful before since I don't know how often the web editor updates its Lean version :) but I'm sure I'm the odd one out there, hah.</p>
</blockquote>
<p>It's a little less direct, but you can also sort of check by clicking the purple (?) link and scrolling down to see the commits of the libraries that are included.</p>



<a name="203208691"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/WebAssembly%20on%20website/near/203208691" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/WebAssembly.20on.20website.html#203208691">(Jul 07 2020 at 21:59)</a>:</h4>
<p>Why not add a function to lean core that does what the <code>#eval</code> does? That way you can just write <code>#eval lean.print_version</code> or something to see that, and it doesn't have to go in the default code</p>



<a name="203208804"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/WebAssembly%20on%20website/near/203208804" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/WebAssembly.20on.20website.html#203208804">(Jul 07 2020 at 22:00)</a>:</h4>
<p>Good idea, and even if it were in the default code, it would not look forbidding.</p>



<a name="203212877"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/WebAssembly%20on%20website/near/203212877" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/WebAssembly.20on.20website.html#203212877">(Jul 07 2020 at 22:51)</a>:</h4>
<p>Putting <code>#eval lean.print_version</code> in the default code wouldn't work for anyone using older versions of Lean. Of course, it would be fine for the community web editor, which is kept at the bleeding edge, but if we want to support multiple versions of Lean / multiple versions of mathlib in the future that will make it trickier.</p>
<p>I tested out the first file of the tutorial project and it takes around a minute to fully load on my laptop (and that's with all the resources already cached). Also, making edits to a file of that size in the web editor is much too laggy. I think something &lt; 50 lines would be good, if anyone has any suggestions.</p>



<a name="203215774"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/WebAssembly%20on%20website/near/203215774" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/WebAssembly.20on.20website.html#203215774">(Jul 07 2020 at 23:29)</a>:</h4>
<p>Maybe something like this?  Perhaps a slightly shorter-to-prove algebraic identity, if anyone has ideas.</p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="n">tactic</span><span class="bp">.</span><span class="n">ring</span>

<span class="c">/-</span><span class="cm"> Welcome to Lean!</span>

<span class="cm">Lean is a *proof assistant*.  It knows the axioms of standard mathematical objects such as ℤ :</span>
<span class="cm">-/</span>
<span class="kn">example</span> <span class="o">(</span><span class="n">m</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">:</span>
  <span class="o">(</span><span class="n">m</span> <span class="bp">-</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">=</span> <span class="n">m</span> <span class="bp">^</span> <span class="mi">2</span> <span class="bp">-</span> <span class="mi">1</span> <span class="o">:=</span>
<span class="k">calc</span> <span class="o">(</span><span class="n">m</span> <span class="bp">-</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span>  <span class="bp">=</span> <span class="n">m</span> <span class="bp">*</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="mi">1</span> <span class="bp">*</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="o">:</span> <span class="n">sub_mul</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span>
                    <span class="bp">...</span> <span class="bp">=</span> <span class="n">m</span> <span class="bp">*</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span>     <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="n">one_mul</span>
                    <span class="bp">...</span> <span class="bp">=</span> <span class="o">(</span><span class="n">m</span> <span class="bp">*</span> <span class="n">m</span> <span class="bp">+</span> <span class="n">m</span> <span class="bp">*</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="n">mul_add</span>
                    <span class="bp">...</span> <span class="bp">=</span> <span class="n">m</span> <span class="bp">*</span> <span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="n">m</span> <span class="bp">*</span> <span class="mi">1</span> <span class="bp">-</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="o">:</span> <span class="n">add_sub_assoc</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span>
                    <span class="bp">...</span> <span class="bp">=</span> <span class="n">m</span> <span class="bp">*</span> <span class="n">m</span> <span class="bp">+</span> <span class="o">(</span><span class="n">m</span> <span class="bp">-</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span>     <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="n">mul_one</span>
                    <span class="bp">...</span> <span class="bp">=</span> <span class="n">m</span><span class="bp">^</span><span class="mi">2</span> <span class="bp">+</span> <span class="o">(</span><span class="n">m</span> <span class="bp">-</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span>       <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="err">←</span><span class="n">pow_two</span>
                    <span class="bp">...</span> <span class="bp">=</span> <span class="n">m</span><span class="bp">^</span><span class="mi">2</span> <span class="bp">+</span> <span class="o">(</span><span class="n">m</span> <span class="bp">-</span> <span class="n">m</span> <span class="bp">-</span> <span class="mi">1</span><span class="o">)</span>         <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="n">sub_add_eq_sub_sub</span>
                    <span class="bp">...</span> <span class="bp">=</span> <span class="n">m</span><span class="bp">^</span><span class="mi">2</span> <span class="bp">+</span> <span class="o">(</span><span class="mi">0</span> <span class="bp">-</span> <span class="mi">1</span><span class="o">)</span>             <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="n">sub_self</span>
                    <span class="bp">...</span> <span class="bp">=</span> <span class="n">m</span><span class="bp">^</span><span class="mi">2</span> <span class="bp">+</span> <span class="o">(</span><span class="bp">-</span><span class="mi">1</span><span class="o">)</span>                <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="n">zero_sub</span>
                    <span class="bp">...</span> <span class="bp">=</span> <span class="n">m</span><span class="bp">^</span><span class="mi">2</span> <span class="bp">-</span> <span class="mi">1</span>                   <span class="o">:</span> <span class="n">rfl</span>

<span class="c">/-</span><span class="cm"> And it also has higher-level *tactics* to manipulate these axioms like a mathematican would. -/</span>
<span class="kn">example</span> <span class="o">(</span><span class="n">m</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">:</span>
  <span class="o">(</span><span class="n">m</span> <span class="bp">-</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">=</span> <span class="n">m</span> <span class="bp">^</span> <span class="mi">2</span> <span class="bp">-</span> <span class="mi">1</span> <span class="o">:=</span>
<span class="k">by</span> <span class="n">ring</span>
</code></pre></div>



<a name="203216105"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/WebAssembly%20on%20website/near/203216105" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/WebAssembly.20on.20website.html#203216105">(Jul 07 2020 at 23:33)</a>:</h4>
<p>For ease of toying around with the example by the first-time-user, I'd add curly braces or use <code>begin end</code>. Otherwise, removing or adding lines will break the example as it is now</p>



<a name="203216371"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/WebAssembly%20on%20website/near/203216371" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/WebAssembly.20on.20website.html#203216371">(Jul 07 2020 at 23:37)</a>:</h4>
<p>Do you mean <code>begin</code> and <code>end</code> around the <code>calc</code> block?</p>



<a name="203216483"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/WebAssembly%20on%20website/near/203216483" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/WebAssembly.20on.20website.html#203216483">(Jul 07 2020 at 23:38)</a>:</h4>
<p>Removing or adding lines in the middle of proofs will break them regardless of whether they're wrapped in <code>begin</code> and <code>end</code>, right?</p>



<a name="203216602"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/WebAssembly%20on%20website/near/203216602" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/WebAssembly.20on.20website.html#203216602">(Jul 07 2020 at 23:40)</a>:</h4>
<p>Yes, that's true, but I was thinking of something like</p>
<div class="codehilite"><pre><span></span><code><span class="kn">example</span> <span class="o">(</span><span class="n">m</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">:</span>
  <span class="o">(</span><span class="n">m</span> <span class="bp">-</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">=</span> <span class="n">m</span> <span class="bp">^</span> <span class="mi">2</span> <span class="bp">-</span> <span class="mi">1</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">ring</span><span class="o">,</span>
<span class="kn">end</span>
</code></pre></div>



<a name="203216661"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/WebAssembly%20on%20website/near/203216661" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/WebAssembly.20on.20website.html#203216661">(Jul 07 2020 at 23:41)</a>:</h4>
<p><code>calc</code> is super cool, but difficult to edit, because you have to also supply the statement you want to show.</p>



<a name="203216692"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/WebAssembly%20on%20website/near/203216692" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/WebAssembly.20on.20website.html#203216692">(Jul 07 2020 at 23:41)</a>:</h4>
<p>Ah, OK. Sure, that makes sense.</p>



<a name="203216928"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/WebAssembly%20on%20website/near/203216928" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/WebAssembly.20on.20website.html#203216928">(Jul 07 2020 at 23:44)</a>:</h4>
<p>Maybe have an in-between tactic style of</p>
<div class="codehilite"><pre><span></span><code><span class="kn">example</span> <span class="o">(</span><span class="n">m</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">:</span>
  <span class="o">(</span><span class="n">m</span> <span class="bp">-</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">=</span> <span class="n">m</span> <span class="bp">^</span> <span class="mi">2</span> <span class="bp">-</span> <span class="mi">1</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">rw</span> <span class="n">sub_mul</span><span class="o">,</span>
  <span class="n">rw</span> <span class="n">one_mul</span><span class="o">,</span>
  <span class="n">rw</span> <span class="n">mul_add</span><span class="o">,</span>
  <span class="n">rw</span> <span class="n">add_sub_assoc</span><span class="o">,</span>
  <span class="n">rw</span> <span class="n">mul_one</span><span class="o">,</span>
  <span class="n">rw</span> <span class="n">pow_two</span><span class="o">,</span>
  <span class="n">rw</span> <span class="n">sub_add_eq_sub_sub</span><span class="o">,</span>
  <span class="n">rw</span> <span class="n">sub_self</span><span class="o">,</span>
  <span class="n">rw</span> <span class="n">zero_sub</span><span class="o">,</span>
  <span class="n">refl</span>
<span class="kn">end</span>
</code></pre></div>



<a name="203216959"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/WebAssembly%20on%20website/near/203216959" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/WebAssembly.20on.20website.html#203216959">(Jul 07 2020 at 23:45)</a>:</h4>
<p>Which shows the user a simplified version of the <code>calc</code> proof, and this version is friendlier to scrolling through and seeing the goal change.</p>



<a name="203217214"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/WebAssembly%20on%20website/near/203217214" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/WebAssembly.20on.20website.html#203217214">(Jul 07 2020 at 23:49)</a>:</h4>
<p>Sounds good. I might compress the rewrites to a single line using <code>[</code> and <code>]</code>.</p>



<a name="203217275"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/WebAssembly%20on%20website/near/203217275" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/WebAssembly.20on.20website.html#203217275">(Jul 07 2020 at 23:50)</a>:</h4>
<p>I'll add some comments too suggesting interesting places to put the cursor.</p>



<a name="203217317"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/WebAssembly%20on%20website/near/203217317" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/WebAssembly.20on.20website.html#203217317">(Jul 07 2020 at 23:51)</a>:</h4>
<p>My inclination to have the rewrites on separate lines was the thought that a user would want to try their own <code>rw ___</code>. Having the rw in <code>[ ]</code> makes it more difficult to rearrange or insert, imo.</p>



<a name="203217569"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/WebAssembly%20on%20website/near/203217569" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/WebAssembly.20on.20website.html#203217569">(Jul 07 2020 at 23:55)</a>:</h4>
<p>That's true. Though new users may have a hard time coming up with lemma names to use in rewrites. </p>
<p>Anyways, I'll wait for more explicit agreement. Any changes we decide on will be pretty easy to make and deploy, but I'd rather just do it once.</p>



<a name="203219424"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/WebAssembly%20on%20website/near/203219424" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/WebAssembly.20on.20website.html#203219424">(Jul 08 2020 at 00:27)</a>:</h4>
<p><span class="user-mention silent" data-user-id="123965">Bryan Gin-ge Chen</span> <a href="#narrow/stream/113488-general/topic/WebAssembly.20on.20website/near/203212877">said</a>:</p>
<blockquote>
<p>Putting <code>#eval lean.print_version</code> in the default code wouldn't work for anyone using older versions of Lean. Of course, it would be fine for the community web editor, which is kept at the bleeding edge, but if we want to support multiple versions of Lean / multiple versions of mathlib in the future that will make it trickier.</p>
</blockquote>
<p>An easy solution to that is</p>
<div class="codehilite"><pre><span></span><code><span class="bp">#</span><span class="kn">eval</span> <span class="n">lean</span><span class="bp">.</span><span class="n">print_version</span> <span class="c1">-- warning: will not work on lean &lt; 3.17</span>
</code></pre></div>



<a name="203219540"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/WebAssembly%20on%20website/near/203219540" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/WebAssembly.20on.20website.html#203219540">(Jul 08 2020 at 00:29)</a>:</h4>
<p>If the community web editor will get a version picker in the future, then the code in the text box can also vary to match whatever is appropriate for that version. (It will probably not be necessary to include a <code>#eval lean.version</code> line in that case anyway since the version is stated in the picker.)</p>



<a name="203237317"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/WebAssembly%20on%20website/near/203237317" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/WebAssembly.20on.20website.html#203237317">(Jul 08 2020 at 07:07)</a>:</h4>
<p>You can also do this:</p>
<div class="codehilite"><pre><span></span><code><span class="bp">#</span><span class="kn">eval</span> <span class="n">lean</span><span class="bp">.</span><span class="n">version</span>  <span class="c1">-- doesn&#39;t look as pretty, but gets the information across</span>
</code></pre></div>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>