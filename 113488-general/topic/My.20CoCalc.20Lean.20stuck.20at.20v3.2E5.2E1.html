---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/My.20CoCalc.20Lean.20stuck.20at.20v3.2E5.2E1.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/My.20CoCalc.20Lean.20stuck.20at.20v3.2E5.2E1.html">My CoCalc Lean stuck at v3.5.1</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="200296306"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/My%20CoCalc%20Lean%20stuck%20at%20v3.5.1/near/200296306" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Vaibhav Karve <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/My.20CoCalc.20Lean.20stuck.20at.20v3.2E5.2E1.html#200296306">(Jun 09 2020 at 21:57)</a>:</h4>
<p>I need help upgrading the Lean version on CoCalc to the latest Lean + Mathlib. I have the latest version in my <em>leanpkg.toml</em> file. Running<code>leanproject up</code> in a terminal window on CoCalc gives me a warning:</p>
<div class="codehilite"><pre><span></span><code><span class="n">WARNING</span><span class="o">:</span> <span class="n">Lean</span> <span class="n">version</span> <span class="n">mismatch</span><span class="o">:</span> <span class="n">installed</span> <span class="n">version</span> <span class="n">is</span> <span class="mi">3</span><span class="bp">.</span><span class="mi">5</span><span class="bp">.</span><span class="mi">1</span><span class="o">,</span> <span class="n">but</span> <span class="n">package</span> <span class="n">requires</span> <span class="n">leanprover</span><span class="bp">-</span><span class="n">community</span><span class="bp">/</span><span class="n">lean</span><span class="o">:</span><span class="mi">3</span><span class="bp">.</span><span class="mi">15</span><span class="bp">.</span><span class="mi">0</span>

<span class="n">mathlib</span><span class="o">:</span> <span class="n">cloning</span> <span class="n">https</span><span class="o">:</span><span class="bp">//</span><span class="n">github</span><span class="bp">.</span><span class="n">com</span><span class="bp">/</span><span class="n">leanprover</span><span class="bp">-</span><span class="n">community</span><span class="bp">/</span><span class="n">mathlib</span> <span class="n">to</span> <span class="bp">_</span><span class="n">target</span><span class="bp">/</span><span class="n">deps</span><span class="bp">/</span><span class="n">mathlib</span>
<span class="bp">&gt;</span> <span class="n">git</span> <span class="n">clone</span> <span class="n">https</span><span class="o">:</span><span class="bp">//</span><span class="n">github</span><span class="bp">.</span><span class="n">com</span><span class="bp">/</span><span class="n">leanprover</span><span class="bp">-</span><span class="n">community</span><span class="bp">/</span><span class="n">mathlib</span> <span class="bp">_</span><span class="n">target</span><span class="bp">/</span><span class="n">deps</span><span class="bp">/</span><span class="n">mathlib</span>
<span class="n">Cloning</span> <span class="n">into</span> <span class="err">&#39;</span><span class="bp">_</span><span class="n">target</span><span class="bp">/</span><span class="n">deps</span><span class="bp">/</span><span class="n">mathlib&#39;</span><span class="bp">...</span>
<span class="n">remote</span><span class="o">:</span> <span class="n">Enumerating</span> <span class="n">objects</span><span class="o">:</span> <span class="mi">55</span><span class="o">,</span> <span class="n">done</span><span class="bp">.</span>
<span class="n">remote</span><span class="o">:</span> <span class="n">Counting</span> <span class="n">objects</span><span class="o">:</span> <span class="mi">100</span><span class="err">%</span> <span class="o">(</span><span class="mi">55</span><span class="bp">/</span><span class="mi">55</span><span class="o">),</span> <span class="n">done</span><span class="bp">.</span>
<span class="n">remote</span><span class="o">:</span> <span class="n">Compressing</span> <span class="n">objects</span><span class="o">:</span> <span class="mi">100</span><span class="err">%</span> <span class="o">(</span><span class="mi">49</span><span class="bp">/</span><span class="mi">49</span><span class="o">),</span> <span class="n">done</span><span class="bp">.</span>
<span class="n">remote</span><span class="o">:</span> <span class="n">Total</span> <span class="mi">52062</span> <span class="o">(</span><span class="n">delta</span> <span class="mi">21</span><span class="o">),</span> <span class="n">reused</span> <span class="mi">14</span> <span class="o">(</span><span class="n">delta</span> <span class="mi">6</span><span class="o">),</span> <span class="n">pack</span><span class="bp">-</span><span class="n">reused</span> <span class="mi">52007</span>
<span class="n">Receiving</span> <span class="n">objects</span><span class="o">:</span> <span class="mi">100</span><span class="err">%</span> <span class="o">(</span><span class="mi">52062</span><span class="bp">/</span><span class="mi">52062</span><span class="o">),</span> <span class="mi">22</span><span class="bp">.</span><span class="mi">35</span> <span class="n">MiB</span> <span class="bp">|</span> <span class="mi">15</span><span class="bp">.</span><span class="mi">75</span> <span class="n">MiB</span><span class="bp">/</span><span class="n">s</span><span class="o">,</span> <span class="n">done</span><span class="bp">.</span>
<span class="n">Resolving</span> <span class="n">deltas</span><span class="o">:</span> <span class="mi">100</span><span class="err">%</span> <span class="o">(</span><span class="mi">40220</span><span class="bp">/</span><span class="mi">40220</span><span class="o">),</span> <span class="n">done</span><span class="bp">.</span>
<span class="bp">&gt;</span> <span class="n">git</span> <span class="n">checkout</span> <span class="c1">--detach 8535132345bc8c4f48b56ebf89e0db5bcad8b456    # in directory _target/deps/mathlib</span>
<span class="n">HEAD</span> <span class="n">is</span> <span class="n">now</span> <span class="n">at</span> <span class="mi">85351323</span> <span class="n">refactor</span><span class="o">(</span><span class="n">algebra</span><span class="bp">/</span><span class="n">lie_algebra</span><span class="o">):</span> <span class="n">lie_algebra</span> <span class="n">should</span> <span class="n">not</span> <span class="n">extend</span> <span class="n">lie_ring</span> <span class="o">(</span><span class="bp">#</span><span class="mi">2084</span><span class="o">)</span>

<span class="n">WARNING</span><span class="o">:</span> <span class="n">Lean</span> <span class="n">version</span> <span class="n">mismatch</span><span class="o">:</span> <span class="n">installed</span> <span class="n">version</span> <span class="n">is</span> <span class="mi">3</span><span class="bp">.</span><span class="mi">5</span><span class="bp">.</span><span class="mi">1</span><span class="o">,</span> <span class="n">but</span> <span class="n">package</span> <span class="n">requires</span> <span class="n">leanprover</span><span class="bp">-</span><span class="n">community</span><span class="bp">/</span><span class="n">lean</span><span class="o">:</span><span class="mi">3</span><span class="bp">.</span><span class="mi">15</span><span class="bp">.</span><span class="mi">0</span>

<span class="n">configuring</span> <span class="n">leanteach</span> <span class="mi">0</span><span class="bp">.</span><span class="mi">1</span>
<span class="n">mathlib</span><span class="o">:</span> <span class="n">trying</span> <span class="n">to</span> <span class="n">update</span> <span class="bp">_</span><span class="n">target</span><span class="bp">/</span><span class="n">deps</span><span class="bp">/</span><span class="n">mathlib</span> <span class="n">to</span> <span class="n">revision</span> <span class="mi">8535132345</span><span class="n">bc8c4f48b56ebf89e0db5bcad8b456</span>
<span class="bp">&gt;</span> <span class="n">git</span> <span class="n">checkout</span> <span class="c1">--detach 8535132345bc8c4f48b56ebf89e0db5bcad8b456    # in directory _target/deps/mathlib</span>
<span class="n">HEAD</span> <span class="n">is</span> <span class="n">now</span> <span class="n">at</span> <span class="mi">85351323</span> <span class="n">refactor</span><span class="o">(</span><span class="n">algebra</span><span class="bp">/</span><span class="n">lie_algebra</span><span class="o">):</span> <span class="n">lie_algebra</span> <span class="n">should</span> <span class="n">not</span> <span class="n">extend</span> <span class="n">lie_ring</span> <span class="o">(</span><span class="bp">#</span><span class="mi">2084</span><span class="o">)</span>
<span class="n">Looking</span> <span class="n">for</span> <span class="n">local</span> <span class="n">mathlib</span> <span class="n">oleans</span>
<span class="n">Found</span> <span class="n">local</span> <span class="n">mathlib</span> <span class="n">oleans</span>
</code></pre></div>


<p>I understand that there is a version mismatch. But how do I fix said mismatch?</p>



<a name="200296912"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/My%20CoCalc%20Lean%20stuck%20at%20v3.5.1/near/200296912" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/My.20CoCalc.20Lean.20stuck.20at.20v3.2E5.2E1.html#200296912">(Jun 09 2020 at 22:03)</a>:</h4>
<p>I'm not sure if you can at the moment, but <span class="user-mention" data-user-id="128565">@Harald Schilly</span> and <span class="user-mention" data-user-id="116034">@William Stein</span> are the ones who can say with certainty.</p>



<a name="200300842"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/My%20CoCalc%20Lean%20stuck%20at%20v3.5.1/near/200300842" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> William Stein <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/My.20CoCalc.20Lean.20stuck.20at.20v3.2E5.2E1.html#200300842">(Jun 09 2020 at 22:49)</a>:</h4>
<p>Hi, you basically need to change your PATH and then have your own complete separate install of lean.  Moreover, you need to ensure that when cocalc starts a lean server it starts the one in your PATH (rather than the systemwide one).  Unfortunately this "Moreover" step is possibly not possible /easy right now.  Fortunately, <span class="user-mention" data-user-id="137337">@Harald Schilly</span> <span class="user-mention" data-user-id="137337">@Harald Schilly</span> did a bunch of work <strong>today</strong> on exactly making customizing the environment possible (here: <a href="https://github.com/sagemathinc/cocalc/pull/4649">https://github.com/sagemathinc/cocalc/pull/4649</a>).</p>



<a name="200314603"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/My%20CoCalc%20Lean%20stuck%20at%20v3.5.1/near/200314603" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Vaibhav Karve <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/My.20CoCalc.20Lean.20stuck.20at.20v3.2E5.2E1.html#200314603">(Jun 10 2020 at 02:40)</a>:</h4>
<p>Thank you. I'll give this a try and see how it goes.</p>



<a name="200419179"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/My%20CoCalc%20Lean%20stuck%20at%20v3.5.1/near/200419179" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Harald Schilly <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/My.20CoCalc.20Lean.20stuck.20at.20v3.2E5.2E1.html#200419179">(Jun 10 2020 at 13:58)</a>:</h4>
<p><span class="user-mention" data-user-id="241485">@Vaibhav Karve</span> sorry, I don't know anything about leanproject. If you bring your own <code>lean</code> executables and put them into or link to them from <code>~/bin/</code> in a cocalc project, they're in said <code>PATH</code>. I don't know if <code>leanproject</code> will recognize them, or if it even works inside a cocalc project. If you're lucky, it would be nice to know the steps you took.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>