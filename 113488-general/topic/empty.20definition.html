---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/empty.20definition.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/empty.20definition.html">empty definition</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="285331905"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/empty%20definition/near/285331905" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/empty.20definition.html#285331905">(Jun 08 2022 at 00:40)</a>:</h4>
<p>So, you know how <code>unit</code> is defined as <code>punit.{0}</code>? I wonder why the same isn't true for <code>empty</code> and <code>pempty.{0}</code></p>



<a name="285349491"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/empty%20definition/near/285349491" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/empty.20definition.html#285349491">(Jun 08 2022 at 06:16)</a>:</h4>
<p>You mean <code>pempty.{1}</code>, right? <code>pempty.{0}</code> would be <a href="https://leanprover-community.github.io/mathlib_docs/find/false">docs#false</a>.</p>



<a name="285426255"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/empty%20definition/near/285426255" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Johnson <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/empty.20definition.html#285426255">(Jun 08 2022 at 17:29)</a>:</h4>
<p>The <a href="https://github.com/leanprover-community/lean/blob/38b59111b2b4e6c572582b27e8937e92fc70ac02/library/init/core.lean#L48">docstring for unit</a> seems to be incorrect. Shouldn't it be <code>punit.{1}</code>?</p>



<a name="285426351"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/empty%20definition/near/285426351" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/empty.20definition.html#285426351">(Jun 08 2022 at 17:30)</a>:</h4>
<p>It probably predates <code>Sort</code>.</p>



<a name="285435546"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/empty%20definition/near/285435546" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/empty.20definition.html#285435546">(Jun 08 2022 at 18:40)</a>:</h4>
<p>Good catch! I occasionally PR docstrings to core Lean and they're welcomed! In fact I suspect that my only contributions to core Lean are docstring additions/edits ;-)</p>



<a name="285441692"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/empty%20definition/near/285441692" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/empty.20definition.html#285441692">(Jun 08 2022 at 19:29)</a>:</h4>
<p>There's a few extra definitional equalities we could get, actually</p>



<a name="285441767"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/empty%20definition/near/285441767" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/empty.20definition.html#285441767">(Jun 08 2022 at 19:30)</a>:</h4>
<p><code>true</code> could be def-eq to <code>punit.{0}</code>, <code>false</code> could be def-eq to <code>pempty.{0}</code>, and <code>empty</code> could be def-eq to <code>pempty.{1}</code></p>



<a name="285441811"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/empty%20definition/near/285441811" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/empty.20definition.html#285441811">(Jun 08 2022 at 19:30)</a>:</h4>
<p>Sure, the extra convenience gains would be minor, but I can't see any way this could make things less convenient</p>



<a name="285441820"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/empty%20definition/near/285441820" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/empty.20definition.html#285441820">(Jun 08 2022 at 19:30)</a>:</h4>
<p>(of course, every time I've said this I've been wrong)</p>



<a name="285441822"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/empty%20definition/near/285441822" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/empty.20definition.html#285441822">(Jun 08 2022 at 19:30)</a>:</h4>
<p>Would there be any point though?</p>



<a name="285441886"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/empty%20definition/near/285441886" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/empty.20definition.html#285441886">(Jun 08 2022 at 19:31)</a>:</h4>
<p>I feel like the cost of confusing mathematicians by saying "oh, we call <code>false</code> <code>pempty</code> sometimes" already outweighs whatever minor benefit you're thinking of</p>



<a name="285441892"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/empty%20definition/near/285441892" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/empty.20definition.html#285441892">(Jun 08 2022 at 19:31)</a>:</h4>
<p>We'd get a few extra lemmas for free from their <code>punit</code> and <code>pempty</code> counterparts</p>



<a name="285441896"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/empty%20definition/near/285441896" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/empty.20definition.html#285441896">(Jun 08 2022 at 19:31)</a>:</h4>
<p>That's about it</p>



<a name="285441961"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/empty%20definition/near/285441961" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/empty.20definition.html#285441961">(Jun 08 2022 at 19:31)</a>:</h4>
<p>Aren't those lemmas ones we already get from the <code>is_empty</code> version?</p>



<a name="285442088"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/empty%20definition/near/285442088" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/empty.20definition.html#285442088">(Jun 08 2022 at 19:32)</a>:</h4>
<p>That's fair</p>



<a name="285442128"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/empty%20definition/near/285442128" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/empty.20definition.html#285442128">(Jun 08 2022 at 19:33)</a>:</h4>
<p>The change <code>empty = pempty.{1}</code> should still make sense, though?</p>



<a name="285442344"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/empty%20definition/near/285442344" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/empty.20definition.html#285442344">(Jun 08 2022 at 19:35)</a>:</h4>
<p>If for nothing else, just for consistency with <code>unit = punit.{1}</code></p>



<a name="285442809"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/empty%20definition/near/285442809" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/empty.20definition.html#285442809">(Jun 08 2022 at 19:38)</a>:</h4>
<p>I'm also happy for <code>false</code> to be redefined as <code>pempty.{0}</code>, but <code>true</code> shouldn't be redefined as <code>punit.{0}</code> because then we have the wrong name for the constructor (this is not a problem for <code>false</code> because there are no constructors!).</p>



<a name="285450289"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/empty%20definition/near/285450289" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/empty.20definition.html#285450289">(Jun 08 2022 at 20:40)</a>:</h4>
<p><code>false</code> would have the wrong name for the eliminator though right?</p>



<a name="285450524"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/empty%20definition/near/285450524" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Junyan Xu <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/empty.20definition.html#285450524">(Jun 08 2022 at 20:42)</a>:</h4>
<p>Currently you can write:</p>
<ul>
<li><code>⟨⟩</code>, <code>true.intro</code> or <code>trivial</code> to construct a term of type <code>true</code>, </li>
<li><code>⟨⟩</code>, <code>()</code> or <code>unit.star</code> to construct a term of type <code>unit</code>,</li>
<li><code>⟨⟩</code> or <code>punit.star</code> to construct a term of type <code>punit</code>,<br>
so <code>⟨⟩</code> is the most versatile/universal constructor. I don't know where <code>()</code> is defined! Seems there isn't a notation declaration.</li>
</ul>



<a name="285451822"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/empty%20definition/near/285451822" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/empty.20definition.html#285451822">(Jun 08 2022 at 20:53)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110032">Reid Barton</span> <a href="#narrow/stream/113488-general/topic/empty.20definition/near/285450289">said</a>:</p>
<blockquote>
<p><code>false</code> would have the wrong name for the eliminator though right?</p>
</blockquote>
<p>You can provide <code>false.elim</code> separately.</p>



<a name="285451919"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/empty%20definition/near/285451919" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/empty.20definition.html#285451919">(Jun 08 2022 at 20:54)</a>:</h4>
<p>Isn't <code>()</code> handled separately by Lean because it's round brackets?</p>



<a name="285453562"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/empty%20definition/near/285453562" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Johnson <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/empty.20definition.html#285453562">(Jun 08 2022 at 21:08)</a>:</h4>
<p><span class="user-mention silent" data-user-id="224323">Junyan Xu</span> <a href="#narrow/stream/113488-general/topic/empty.20definition/near/285450524">said</a>:</p>
<blockquote>
<p>I don't know where <code>()</code> is defined! Seems there isn't a notation declaration.</p>
</blockquote>
<p>I think it's <a href="https://github.com/leanprover-community/lean/blob/38b59111b2b4e6c572582b27e8937e92fc70ac02/src/frontends/lean/builtin_exprs.cpp#L1243">here</a>.</p>



<a name="285454625"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/empty%20definition/near/285454625" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/empty.20definition.html#285454625">(Jun 08 2022 at 21:18)</a>:</h4>
<p>Ah yeah, so I was right.</p>



<a name="285454940"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/empty%20definition/near/285454940" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Junyan Xu <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/empty.20definition.html#285454940">(Jun 08 2022 at 21:21)</a>:</h4>
<p>Thanks! Should we / is it easy to make <code>()</code> universe polymorphic as well?</p>
<p><span class="user-mention silent" data-user-id="387244">Yaël Dillies</span> <a href="#narrow/stream/113488-general/topic/empty.20definition/near/285451822">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="110032">Reid Barton</span> <a href="#narrow/stream/113488-general/topic/empty.20definition/near/285450289">said</a>:</p>
<blockquote>
<p><code>false</code> would have the wrong name for the eliminator though right?</p>
</blockquote>
<p>You can provide <code>false.elim</code> separately.</p>
</blockquote>
<p>Don't we now have both <a href="https://leanprover-community.github.io/mathlib_docs/find/false.elim">docs#false.elim</a> and <a href="https://leanprover-community.github.io/mathlib_docs/find/empty.elim">docs#empty.elim</a> / <a href="https://leanprover-community.github.io/mathlib_docs/find/pempty.elim">docs#pempty.elim</a>? Interestingly <code>false.elim</code> is defined in terms of <code>false.rec</code> while the other two are defined by pattern matching (where there's no pattern).</p>



<a name="285455670"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/empty%20definition/near/285455670" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/empty.20definition.html#285455670">(Jun 08 2022 at 21:27)</a>:</h4>
<p>Don't those get compiled to the same thing anyway?</p>



<a name="285455763"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/empty%20definition/near/285455763" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Junyan Xu <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/empty.20definition.html#285455763">(Jun 08 2022 at 21:28)</a>:</h4>
<p>I think so, but in the docs the former shows one equation while the latter two show nothing.</p>



<a name="285456049"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/empty%20definition/near/285456049" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Junyan Xu <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/empty.20definition.html#285456049">(Jun 08 2022 at 21:31)</a>:</h4>
<p>Actually, doesn't seem to be the same syntactically:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">@[inline]</span>
<span class="kd">def</span> <span class="n">false.elim</span> <span class="o">:</span> <span class="bp">Π</span> <span class="o">{</span><span class="n">C</span> <span class="o">:</span> <span class="kt">Sort</span> <span class="n">u</span><span class="o">},</span> <span class="n">false</span> <span class="bp">→</span> <span class="n">C</span> <span class="o">:=</span>
<span class="bp">λ</span> <span class="o">{</span><span class="n">C</span> <span class="o">:</span> <span class="kt">Sort</span> <span class="n">u</span><span class="o">}</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">false</span><span class="o">),</span> <span class="n">false.rec</span> <span class="n">C</span> <span class="n">h</span>
<span class="kd">def</span> <span class="n">empty.elim</span> <span class="o">:</span> <span class="bp">Π</span> <span class="o">{</span><span class="n">C</span> <span class="o">:</span> <span class="kt">Sort</span> <span class="n">u_1</span><span class="o">},</span> <span class="n">empty</span> <span class="bp">→</span> <span class="n">C</span> <span class="o">:=</span>
<span class="bp">λ</span> <span class="o">{</span><span class="n">C</span> <span class="o">:</span> <span class="kt">Sort</span> <span class="n">u_1</span><span class="o">},</span> <span class="n">empty.elim._main</span>
<span class="kd">def</span> <span class="n">pempty.elim</span> <span class="o">:</span> <span class="bp">Π</span> <span class="o">{</span><span class="n">C</span> <span class="o">:</span> <span class="kt">Sort</span> <span class="n">u_1</span><span class="o">},</span> <span class="n">pempty</span> <span class="bp">→</span> <span class="n">C</span> <span class="o">:=</span>
<span class="bp">λ</span> <span class="o">{</span><span class="n">C</span> <span class="o">:</span> <span class="kt">Sort</span> <span class="n">u_1</span><span class="o">},</span> <span class="n">pempty.elim._main</span>
</code></pre></div>



<a name="285456084"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/empty%20definition/near/285456084" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Junyan Xu <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/empty.20definition.html#285456084">(Jun 08 2022 at 21:31)</a>:</h4>
<p>from <code>#print</code></p>



<a name="285456159"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/empty%20definition/near/285456159" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Junyan Xu <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/empty.20definition.html#285456159">(Jun 08 2022 at 21:32)</a>:</h4>
<p>and</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">def</span> <span class="n">empty.elim._main</span> <span class="o">:</span> <span class="bp">Π</span> <span class="o">{</span><span class="n">C</span> <span class="o">:</span> <span class="kt">Sort</span> <span class="n">_aux_param_0</span><span class="o">},</span> <span class="n">empty</span> <span class="bp">→</span> <span class="n">C</span> <span class="o">:=</span>
<span class="bp">λ</span> <span class="o">{</span><span class="n">C</span> <span class="o">:</span> <span class="kt">Sort</span> <span class="n">_aux_param_0</span><span class="o">}</span> <span class="o">(</span><span class="n">ᾰ</span> <span class="o">:</span> <span class="n">empty</span><span class="o">),</span> <span class="n">empty.cases_on</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">ᾰ</span> <span class="o">:</span> <span class="n">empty</span><span class="o">),</span> <span class="n">C</span><span class="o">)</span> <span class="n">ᾰ</span>

<span class="kd">@[reducible]</span>
<span class="kn">protected</span> <span class="kd">def</span> <span class="n">pempty.cases_on</span> <span class="o">:</span> <span class="bp">Π</span> <span class="o">(</span><span class="n">motive</span> <span class="o">:</span> <span class="n">pempty</span> <span class="bp">→</span> <span class="kt">Sort</span> <span class="n">l</span><span class="o">)</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">pempty</span><span class="o">),</span> <span class="n">motive</span> <span class="n">n</span> <span class="o">:=</span>
<span class="bp">λ</span> <span class="o">(</span><span class="n">motive</span> <span class="o">:</span> <span class="n">pempty</span> <span class="bp">→</span> <span class="kt">Sort</span> <span class="n">l</span><span class="o">)</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">pempty</span><span class="o">),</span> <span class="n">pempty.rec</span> <span class="n">motive</span> <span class="n">n</span>
</code></pre></div>
<p>so pattern matching definitions unfolds to <code>cases_on</code>; only when you unfold again you recover <code>rec</code>.</p>



<a name="285460560"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/empty%20definition/near/285460560" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Junyan Xu <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/empty.20definition.html#285460560">(Jun 08 2022 at 22:19)</a>:</h4>
<p>Other observations:<br>
<a href="https://leanprover-community.github.io/mathlib_docs/find/psum">docs#psum</a>, <a href="https://leanprover-community.github.io/mathlib_docs/find/sum">docs#sum</a> and <a href="https://leanprover-community.github.io/mathlib_docs/find/or">docs#or</a> have the same constructor names <code>inl</code>, <code>inr</code>. <code>or</code> is not a special case of <code>psum</code> because it produces a <code>Prop</code> which is always a subsingleton, while <code>psum</code> produces a <code>Type</code> given two <code>Prop</code>s (so <code>decidable p</code> could in fact be defined to be <code>psum (¬p) p</code>).</p>
<p><code>psum</code> currently has type <code>Sort u → Sort v → Sort (max 1 u v)</code>. However, the following is also accepted by Lean:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">inductive</span> <span class="n">psum'</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Sort</span> <span class="n">u</span><span class="o">)</span> <span class="o">(</span><span class="n">β</span> <span class="o">:</span> <span class="kt">Sort</span> <span class="n">v</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Sort</span> <span class="o">(</span><span class="n">max</span> <span class="n">u</span> <span class="n">v</span><span class="o">)</span>
<span class="bp">|</span> <span class="n">inl</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">α</span><span class="o">)</span> <span class="o">:</span> <span class="n">psum'</span>
<span class="bp">|</span> <span class="n">inr</span> <span class="o">(</span><span class="n">b</span> <span class="o">:</span> <span class="n">β</span><span class="o">)</span> <span class="o">:</span> <span class="n">psum'</span>
</code></pre></div>
<p>It removes the <code>1</code> from <code>max 1 u v</code>, so should be as robust as the current <code>sum</code> against universe unification issues! (Maybe there is a small problem with the <code>+1</code> from <code>Type</code> to <code>Sort</code>, I'm not sure.) Should it be promoted to the official <code>sum</code> (with <code>or</code> a special case)? We can then provide a separate <code>psum</code> just for the only special case <code>Prop → Prop → Type</code> that's not covered and use it to define <a href="https://leanprover-community.github.io/mathlib_docs/find/decidable">docs#decidable</a>.</p>
<p><a href="https://leanprover-community.github.io/mathlib_docs/find/and">docs#and</a> has constructor names <code>left</code> and <code>right</code> while <a href="https://leanprover-community.github.io/mathlib_docs/find/prod">docs#prod</a> and <a href="https://leanprover-community.github.io/mathlib_docs/find/pprod">docs#pprod</a> have the names <code>fst</code> and <code>snd</code>. In this case, it doesn't seem useful to have <code>pprod : Prop → Prop → Type</code>, since it doesn't retain any additional information like in the <code>sum</code> case, and if you want the resulting type to be in <code>Type</code> you can just lift it, so we may as well use one definition to encompass them all:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">inductive</span> <span class="n">pprod'</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Sort</span> <span class="n">u</span><span class="o">)</span> <span class="o">(</span><span class="n">β</span> <span class="o">:</span> <span class="kt">Sort</span> <span class="n">v</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Sort</span> <span class="o">(</span><span class="n">max</span> <span class="n">u</span> <span class="n">v</span><span class="o">)</span>
<span class="bp">|</span> <span class="n">mk</span> <span class="o">(</span><span class="n">fst</span> <span class="o">:</span> <span class="n">α</span><span class="o">)</span> <span class="o">(</span><span class="n">snd</span> <span class="o">:</span> <span class="n">β</span><span class="o">)</span> <span class="o">:</span> <span class="n">pprod'</span>
</code></pre></div>
<p>However, if you use <code>structure</code> then Lean complains:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">structure</span> <span class="n">pprod''</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Sort</span> <span class="n">u</span><span class="o">)</span> <span class="o">(</span><span class="n">β</span> <span class="o">:</span> <span class="kt">Sort</span> <span class="n">v</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Sort</span> <span class="o">(</span><span class="n">max</span> <span class="n">u</span> <span class="n">v</span><span class="o">)</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">fst</span> <span class="o">:</span> <span class="n">α</span><span class="o">)</span> <span class="o">(</span><span class="n">snd</span> <span class="o">:</span> <span class="n">β</span><span class="o">)</span>
<span class="c">/-</span><span class="cm"> invalid universe polymorphic structure declaration,</span>
<span class="cm">the resultant universe is not Prop (i.e., 0), but it may be Prop</span>
<span class="cm">for some parameter values (solution: use 'l+1' or 'max 1 l') -/</span>
</code></pre></div>
<p>Is it possible to make <code>structure</code> accept this? If we're unable to use structure, I think we lose the nice projections...</p>



<a name="285462078"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/empty%20definition/near/285462078" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/empty.20definition.html#285462078">(Jun 08 2022 at 22:37)</a>:</h4>
<blockquote>
<p>However, the following is also accepted by Lean:</p>
</blockquote>
<p><code>#check psum'.rec</code> tells you this isn't a useful definition</p>



<a name="285462098"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/empty%20definition/near/285462098" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/empty.20definition.html#285462098">(Jun 08 2022 at 22:37)</a>:</h4>
<p>It only has a small eliminator</p>



<a name="285462125"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/empty%20definition/near/285462125" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/empty.20definition.html#285462125">(Jun 08 2022 at 22:37)</a>:</h4>
<p>Which is why you can't pull the same trick for <code>pprod</code>, because the projections need large eliminators</p>



<a name="285463074"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/empty%20definition/near/285463074" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Junyan Xu <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/empty.20definition.html#285463074">(Jun 08 2022 at 22:48)</a>:</h4>
<p>Thanks! <del>In hindsight it's clear the recursor can't be made universe polymorphic.</del></p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>