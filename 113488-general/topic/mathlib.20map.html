---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/mathlib.20map.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mathlib.20map.html">mathlib map</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="199937314"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20map/near/199937314" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mathlib.20map.html#199937314">(Jun 05 2020 at 21:41)</a>:</h4>
<p>Is there anyone familiar with <a href="https://github.com/leanprover-community/doc-gen/">https://github.com/leanprover-community/doc-gen/</a> and CI that would like to make sure every matlib docs build generates a publicly available file giving the url (relative to <a href="https://leanprover-community.github.io/mathlib_docs/">https://leanprover-community.github.io/mathlib_docs/</a>) corresponding to each declaration fully qualified name? That would be very helpful, in particular for the sphere eversion project. Any file format would do, this is really a list of pairs. One pair per line separated by a space would be enough.</p>



<a name="199937504"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20map/near/199937504" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mathlib.20map.html#199937504">(Jun 05 2020 at 21:43)</a>:</h4>
<p>That sounds pretty doable. If no one beats me to it, I'll try to do it this weekend.</p>



<a name="199937648"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20map/near/199937648" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mathlib.20map.html#199937648">(Jun 05 2020 at 21:45)</a>:</h4>
<p>Amazing, thanks.</p>



<a name="199937660"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20map/near/199937660" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mathlib.20map.html#199937660">(Jun 05 2020 at 21:45)</a>:</h4>
<p>I think the scripts may already be generating such a JSON file, but it's not published to the website.</p>



<a name="199937736"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20map/near/199937736" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mathlib.20map.html#199937736">(Jun 05 2020 at 21:46)</a>:</h4>
<p>Yes the lean file generates some json.</p>



<a name="199937758"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20map/near/199937758" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mathlib.20map.html#199937758">(Jun 05 2020 at 21:46)</a>:</h4>
<p><a href="https://github.com/leanprover-community/doc-gen/blob/master/print_docs.py#L701">https://github.com/leanprover-community/doc-gen/blob/master/print_docs.py#L701</a></p>



<a name="199937802"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20map/near/199937802" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mathlib.20map.html#199937802">(Jun 05 2020 at 21:47)</a>:</h4>
<p>which probably consumes the output of <a href="https://github.com/leanprover-community/doc-gen/blob/master/gen_docs#L40">https://github.com/leanprover-community/doc-gen/blob/master/gen_docs#L40</a></p>



<a name="199938066"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20map/near/199938066" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mathlib.20map.html#199938066">(Jun 05 2020 at 21:50)</a>:</h4>
<p>On a second look, that JSON still needs to be processed. It contains the Lean filenames, but not the final HTML filenames + anchor links.</p>



<a name="199969108"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20map/near/199969108" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mathlib.20map.html#199969108">(Jun 06 2020 at 11:00)</a>:</h4>
<p>This is easy enough to do. The catch is: it should also include the type of the declaration. This is slightly trickier just because of how auxiliary things are handled in the docs right now. If you have a top level declaration, the arguments are stored in a list, with names and binder types. This is so we can print them left of the colon. For structure fields, inductive constructors, etc, we don't print them as top level decls but as part of the corresponding main decl. Their type info isn't stored with the same level of granularity, I think it's just a string. So either this needs to be refactored or we have a non-uniform export.</p>



<a name="199969200"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20map/near/199969200" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mathlib.20map.html#199969200">(Jun 06 2020 at 11:02)</a>:</h4>
<p>This can get done soon enough. The type export is needed for the Freek 100 page. But that part of it is a little more than trivial.</p>



<a name="199969241"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20map/near/199969241" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mathlib.20map.html#199969241">(Jun 06 2020 at 11:03)</a>:</h4>
<p>In the meantime, if you're in a hurry, the location info you need can be scraped from the raw html at <a href="https://leanprover-community.github.io/mathlib_docs/find/manifold">https://leanprover-community.github.io/mathlib_docs/find/manifold</a> . The redirect link gives you the url you want.</p>



<a name="199973178"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20map/near/199973178" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mathlib.20map.html#199973178">(Jun 06 2020 at 12:37)</a>:</h4>
<p><a href="https://github.com/leanprover-community/doc-gen/pull/28">https://github.com/leanprover-community/doc-gen/pull/28</a></p>



<a name="199973243"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20map/near/199973243" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mathlib.20map.html#199973243">(Jun 06 2020 at 12:39)</a>:</h4>
<p>I guess I missed the conversation this week, but I really hate the blue links in the docs :(</p>



<a name="199973632"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20map/near/199973632" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mathlib.20map.html#199973632">(Jun 06 2020 at 12:48)</a>:</h4>
<p>Thanks Rob! I think the blue links was a compromise to make you happy. My opinion is there should be no decoration at all.</p>



<a name="199973874"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20map/near/199973874" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mathlib.20map.html#199973874">(Jun 06 2020 at 12:55)</a>:</h4>
<p>The blue is not meant to be permanent, just better than the underlines from before. Please feel free to submit a PR!</p>



<a name="199975009"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20map/near/199975009" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mathlib.20map.html#199975009">(Jun 06 2020 at 13:28)</a>:</h4>
<p>What about making it a slightly lighter grey than the surrounding non-linked text?</p>



<a name="199975018"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20map/near/199975018" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mathlib.20map.html#199975018">(Jun 06 2020 at 13:28)</a>:</h4>
<p>It's a hint that the links are different, without being intrusive</p>



<a name="199975225"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20map/near/199975225" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mathlib.20map.html#199975225">(Jun 06 2020 at 13:34)</a>:</h4>
<p>Sounds good to me. Note that the arguments of a theorem that come before the colon are already a slightly lighter color than the rest--so slight that I didn't notice it until I started looking at how to change the underlines.</p>



<a name="199975341"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20map/near/199975341" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mathlib.20map.html#199975341">(Jun 06 2020 at 13:37)</a>:</h4>
<p>(deleted)</p>



<a name="199975382"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20map/near/199975382" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mathlib.20map.html#199975382">(Jun 06 2020 at 13:38)</a>:</h4>
<p>Did your cat jump on your keyboard?</p>



<a name="199975409"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20map/near/199975409" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mathlib.20map.html#199975409">(Jun 06 2020 at 13:39)</a>:</h4>
<p>my laptop fell on my keyboard... sorry</p>



<a name="199975420"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20map/near/199975420" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mathlib.20map.html#199975420">(Jun 06 2020 at 13:39)</a>:</h4>
<p>I hope your laptop and your keyboard are ok...</p>



<a name="199975422"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20map/near/199975422" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mathlib.20map.html#199975422">(Jun 06 2020 at 13:40)</a>:</h4>
<p>they are!</p>



<a name="199977289"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20map/near/199977289" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mathlib.20map.html#199977289">(Jun 06 2020 at 14:23)</a>:</h4>
<p><a href="/user_uploads/3121/A9u9PtSUqw55FEfqQ1z7aOS2/image.png">image.png</a> ? The links get a little lighter (and underlined) when you mouse over.</p>
<div class="message_inline_image"><a href="/user_uploads/3121/A9u9PtSUqw55FEfqQ1z7aOS2/image.png" title="image.png"><img src="/user_uploads/3121/A9u9PtSUqw55FEfqQ1z7aOS2/image.png"></a></div>



<a name="199977366"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20map/near/199977366" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mathlib.20map.html#199977366">(Jun 06 2020 at 14:24)</a>:</h4>
<p>Now in <code>nat.cases_succ</code> you can't see (at least I can't) that the <code>\N</code>s are links but the rest is not.</p>



<a name="199977379"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20map/near/199977379" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mathlib.20map.html#199977379">(Jun 06 2020 at 14:25)</a>:</h4>
<p>I think getting rid of the separate color for arguments before the colon would be fine.</p>



<a name="199977434"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20map/near/199977434" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mathlib.20map.html#199977434">(Jun 06 2020 at 14:26)</a>:</h4>
<p>How about we underline everything that is not a link? [/jk]</p>



<a name="199977442"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20map/near/199977442" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mathlib.20map.html#199977442">(Jun 06 2020 at 14:26)</a>:</h4>
<p>Oh, I see what you mean there.</p>



<a name="199977460"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20map/near/199977460" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mathlib.20map.html#199977460">(Jun 06 2020 at 14:27)</a>:</h4>
<p><a href="/user_uploads/3121/-VLbMKUeqYz2OYow5FSgBHfm/image.png">image.png</a> ?</p>
<div class="message_inline_image"><a href="/user_uploads/3121/-VLbMKUeqYz2OYow5FSgBHfm/image.png" title="image.png"><img src="/user_uploads/3121/-VLbMKUeqYz2OYow5FSgBHfm/image.png"></a></div>



<a name="199977521"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20map/near/199977521" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mathlib.20map.html#199977521">(Jun 06 2020 at 14:28)</a>:</h4>
<p>Should all the arguments be bold?</p>



<a name="199977524"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20map/near/199977524" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mathlib.20map.html#199977524">(Jun 06 2020 at 14:28)</a>:</h4>
<p>Or only <code>lemma/theorem/def the_name</code></p>



<a name="199977612"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20map/near/199977612" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mathlib.20map.html#199977612">(Jun 06 2020 at 14:31)</a>:</h4>
<p><a href="/user_uploads/3121/Cvass13gx9m3788vT9h7d-Wn/image.png">image.png</a> ?</p>
<div class="message_inline_image"><a href="/user_uploads/3121/Cvass13gx9m3788vT9h7d-Wn/image.png" title="image.png"><img src="/user_uploads/3121/Cvass13gx9m3788vT9h7d-Wn/image.png"></a></div>



<a name="199977687"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20map/near/199977687" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mathlib.20map.html#199977687">(Jun 06 2020 at 14:33)</a>:</h4>
<p>I think I like that.</p>



<a name="199978755"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20map/near/199978755" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mathlib.20map.html#199978755">(Jun 06 2020 at 14:57)</a>:</h4>
<p>These colors are too subtle for me to see clearly, and I don't think my eyesight is below average</p>



<a name="199978810"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20map/near/199978810" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mathlib.20map.html#199978810">(Jun 06 2020 at 14:58)</a>:</h4>
<p>what was wrong with the blue?</p>



<a name="199978910"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20map/near/199978910" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mathlib.20map.html#199978910">(Jun 06 2020 at 15:00)</a>:</h4>
<p>some more saturation would be good to distinguish it from the various shades of grey in the text itself (especially with things like blackboard bold which have their own effective color)</p>



<a name="199979036"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20map/near/199979036" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mathlib.20map.html#199979036">(Jun 06 2020 at 15:03)</a>:</h4>
<p>oh wait, is it literally gray? No wonder it looks desaturated</p>



<a name="199982813"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20map/near/199982813" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mathlib.20map.html#199982813">(Jun 06 2020 at 16:29)</a>:</h4>
<p>The blue was really glaring, since a lot of decls were almost completely blue. I think it's much easier on the eyes with a more subtle color for the links. Yes, it's literally gray, hopefully just enough to slightly distinguish it from the surrounding black. If you mouse over it changes more.</p>



<a name="199982817"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20map/near/199982817" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mathlib.20map.html#199982817">(Jun 06 2020 at 16:29)</a>:</h4>
<p>It's live now btw.</p>



<a name="199986598"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20map/near/199986598" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mathlib.20map.html#199986598">(Jun 06 2020 at 18:07)</a>:</h4>
<p>The docs export is nice, but it would even nicer if there could be a version containing only what I asked for. Here I'm downloading a 37Mo file and then do</p>
<div class="codehilite"><pre><span></span><code><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;test&#39;</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">test</span><span class="p">:</span>
     <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">json</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
         <span class="n">test</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">k</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">v</span><span class="p">[</span><span class="s1">&#39;docs_link&#39;</span><span class="p">][</span><span class="mi">52</span><span class="p">:]</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div>


<p>to get down to a 3.5Mo that zip then compresses to 705Ko.</p>



<a name="199987012"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20map/near/199987012" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mathlib.20map.html#199987012">(Jun 06 2020 at 18:18)</a>:</h4>
<p>I mean, I can zip it if the size is a problem, but it seems unnecessary to generate a bunch of custom maps when they're all subsets of this big one.</p>



<a name="199987309"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20map/near/199987309" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mathlib.20map.html#199987309">(Jun 06 2020 at 18:26)</a>:</h4>
<p>The download size is the issue.</p>



<a name="199987316"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20map/near/199987316" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mathlib.20map.html#199987316">(Jun 06 2020 at 18:27)</a>:</h4>
<p>What does it cost to generate the basic info? You're not even keeping old versions, right?</p>



<a name="199988225"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20map/near/199988225" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mathlib.20map.html#199988225">(Jun 06 2020 at 18:53)</a>:</h4>
<p>Just future proofing mostly. What if you decide in the future that you want links to GH source too? It's less effort to strip info from the big database now than to add it to the small one later.</p>



<a name="199988284"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20map/near/199988284" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mathlib.20map.html#199988284">(Jun 06 2020 at 18:54)</a>:</h4>
<p>Links to the GH source can also be reconstructed from what I extract above.</p>



<a name="199988358"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20map/near/199988358" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mathlib.20map.html#199988358">(Jun 06 2020 at 18:57)</a>:</h4>
<p>Can they? You need line numbers and Lean and mathlib versions (to make sure you direct to the right commits), no?</p>



<a name="199988364"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20map/near/199988364" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mathlib.20map.html#199988364">(Jun 06 2020 at 18:57)</a>:</h4>
<p>And this is running in CI, right? Does the extra 10 second download matter?</p>



<a name="199988502"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20map/near/199988502" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mathlib.20map.html#199988502">(Jun 06 2020 at 19:00)</a>:</h4>
<p>Indeed we don't get line number, only the file.</p>



<a name="199988509"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20map/near/199988509" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mathlib.20map.html#199988509">(Jun 06 2020 at 19:01)</a>:</h4>
<p>Right now there is no CI, but I should work on this.</p>



<a name="200022227"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/mathlib%20map/near/200022227" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/mathlib.20map.html#200022227">(Jun 07 2020 at 12:31)</a>:</h4>
<p>It's now uploading <code>export_db.json.gz</code> which is ~4mb.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>