---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/finish.20vs.20tidy.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/finish.20vs.20tidy.html">finish vs tidy</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="270552555"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/finish%20vs%20tidy/near/270552555" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Stuart Presnell <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/finish.20vs.20tidy.html#270552555">(Feb 03 2022 at 13:57)</a>:</h4>
<p>I was just trying to prove something involving a term <code>n : ℕ+</code>.  I first tried hitting the problem with <code>finish</code>, which thought for a while and failed.  Then I tried <code>tidy?</code>, which immediately found the solution <code>cases n, refl</code>.  Why wouldn't <code>finish</code> be able to find this simple solution?  Would it make sense to edit the <code>finish</code> tactic to add whatever cleverness <code>tidy</code> used in this case?</p>



<a name="270552652"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/finish%20vs%20tidy/near/270552652" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Stuart Presnell <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/finish.20vs.20tidy.html#270552652">(Feb 03 2022 at 13:57)</a>:</h4>
<p>For context (and in lieu of a <a href="https://leanprover-community.github.io/mwe.html">#mwe</a>), this was in proving <code>factorization_equiv_apply</code> in <a href="https://github.com/leanprover-community/mathlib/pull/11440">#11440</a>.</p>



<a name="270552748"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/finish%20vs%20tidy/near/270552748" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/finish.20vs.20tidy.html#270552748">(Feb 03 2022 at 13:58)</a>:</h4>
<p><code>finish</code> is being phased out, so the solution here is to not use it.</p>



<a name="270555558"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/finish%20vs%20tidy/near/270555558" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Stuart Presnell <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/finish.20vs.20tidy.html#270555558">(Feb 03 2022 at 14:19)</a>:</h4>
<p>Well, I suppose that's fair, and I wasn't intending to leave <code>finish</code> in the final version to PR into mathlib.  But in the mean time it's still a useful tool to confirm that the thing I'm trying to prove is in fact true and that I haven't messed up somewhere.  And presumably there will be a replacement for it in Lean 4 that will be based (at least to some extent) on whatever ends up being the most recent version of <code>finish</code>.</p>



<a name="270555993"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/finish%20vs%20tidy/near/270555993" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/finish.20vs.20tidy.html#270555993">(Feb 03 2022 at 14:22)</a>:</h4>
<p>I don't know exactly what <code>finish</code> does, but it is in some sense much more specialized than <code>tidy</code>, I think.</p>



<a name="270558773"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/finish%20vs%20tidy/near/270558773" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/finish.20vs.20tidy.html#270558773">(Feb 03 2022 at 14:40)</a>:</h4>
<p>Yes I think the role of finish and tidy is different enough that we shouldn't necessarily try to make them converge. Especially given that one of the main issues with these tactics is their runtine adding more work to finish seems like it might cause problems</p>



<a name="270558927"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/finish%20vs%20tidy/near/270558927" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/finish.20vs.20tidy.html#270558927">(Feb 03 2022 at 14:40)</a>:</h4>
<p><span class="user-mention silent" data-user-id="422543">Stuart Presnell</span> <a href="#narrow/stream/113488-general/topic/finish.20vs.20tidy/near/270555558">said</a>:</p>
<blockquote>
<p>And presumably there will be a replacement for it in Lean 4 that will be based (at least to some extent) on whatever ends up being the most recent version of <code>finish</code>.</p>
</blockquote>
<p>That's the thing. It won't. But there will be indeed others that will replace it.</p>



<a name="270592691"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/finish%20vs%20tidy/near/270592691" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/finish.20vs.20tidy.html#270592691">(Feb 03 2022 at 18:08)</a>:</h4>
<p>My limited understanding is that <code>finish</code> searches for a proof using <code>@[ematch]</code> lemmas -- it's supposed to be an SMT solver tactic.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>