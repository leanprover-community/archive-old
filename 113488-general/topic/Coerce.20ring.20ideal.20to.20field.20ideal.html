---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/Coerce.20ring.20ideal.20to.20field.20ideal.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Coerce.20ring.20ideal.20to.20field.20ideal.html">Coerce ring ideal to field ideal</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="235983626"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Coerce%20ring%20ideal%20to%20field%20ideal/near/235983626" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arnoud van der Leer <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Coerce.20ring.20ideal.20to.20field.20ideal.html#235983626">(Apr 24 2021 at 16:35)</a>:</h4>
<p>Hi there, it's me again. I am trying to complete the following proof. It should follow easily from mathlib, but apparently I am trying to prove something for an ideal of [ring R] while I have a hypothesis that says something about an ideal of [ring R upgraded to a field]. What am I missing?</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">p2</span> <span class="o">{</span><span class="n">R</span><span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">}</span> <span class="o">[</span><span class="n">comm_ring</span> <span class="n">R</span><span class="o">]</span> <span class="o">:</span> <span class="n">is_field</span> <span class="n">R</span> <span class="bp">→</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">I</span><span class="o">:</span> <span class="n">ideal</span> <span class="n">R</span><span class="o">),</span> <span class="n">I</span> <span class="bp">=</span> <span class="bp">⊥</span> <span class="bp">∨</span> <span class="n">I</span> <span class="bp">=</span> <span class="bp">⊤</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">intros</span> <span class="n">h</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">F</span> <span class="o">:=</span> <span class="n">is_field.to_field</span> <span class="n">R</span> <span class="n">h</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">h2</span> <span class="o">:=</span> <span class="bp">@</span><span class="n">ideal.eq_bot_or_top</span> <span class="n">R</span> <span class="n">F</span><span class="o">,</span>
  <span class="n">assumption</span><span class="o">,</span>
<span class="kd">end</span>
</code></pre></div>



<a name="235983828"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Coerce%20ring%20ideal%20to%20field%20ideal/near/235983828" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Hanting Zhang <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Coerce.20ring.20ideal.20to.20field.20ideal.html#235983828">(Apr 24 2021 at 16:38)</a>:</h4>
<p>It's <a href="https://leanprover-community.github.io/mathlib_docs/find/ideal.eq_bot_or_top">docs#ideal.eq_bot_or_top</a></p>



<a name="235983951"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Coerce%20ring%20ideal%20to%20field%20ideal/near/235983951" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arnoud van der Leer <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Coerce.20ring.20ideal.20to.20field.20ideal.html#235983951">(Apr 24 2021 at 16:40)</a>:</h4>
<p>Have you looked at the code?</p>



<a name="235984303"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Coerce%20ring%20ideal%20to%20field%20ideal/near/235984303" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Hanting Zhang <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Coerce.20ring.20ideal.20to.20field.20ideal.html#235984303">(Apr 24 2021 at 16:45)</a>:</h4>
<p>Argh, sorry, that was really bad of me. I see the problem now</p>



<a name="235984715"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Coerce%20ring%20ideal%20to%20field%20ideal/near/235984715" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Coerce.20ring.20ideal.20to.20field.20ideal.html#235984715">(Apr 24 2021 at 16:50)</a>:</h4>
<p><span class="user-mention" data-user-id="406521">@Arnoud van der Leer</span> I'm afraid you need to reprove the <code>eq_bot_or_top</code> lemma.</p>



<a name="235984751"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Coerce%20ring%20ideal%20to%20field%20ideal/near/235984751" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Coerce.20ring.20ideal.20to.20field.20ideal.html#235984751">(Apr 24 2021 at 16:51)</a>:</h4>
<p>Oh, did you try <code>convert h2</code>?</p>



<a name="235984867"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Coerce%20ring%20ideal%20to%20field%20ideal/near/235984867" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Coerce.20ring.20ideal.20to.20field.20ideal.html#235984867">(Apr 24 2021 at 16:52)</a>:</h4>
<p><span class="user-mention" data-user-id="406521">@Arnoud van der Leer</span> can you post a <a href="https://leanprover-community.github.io/mwe.html">#mwe</a>? I cut and pasted your code but there were errors and I'm too lazy to fix them.</p>



<a name="235984909"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Coerce%20ring%20ideal%20to%20field%20ideal/near/235984909" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arnoud van der Leer <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Coerce.20ring.20ideal.20to.20field.20ideal.html#235984909">(Apr 24 2021 at 16:53)</a>:</h4>
<p><span class="user-mention" data-user-id="112680">@Johan Commelin</span> <br>
But if I have to reprove such a simple theorem, does that mean that every theorem about <code>(R: Type u) [field R]</code> will have to reproved for <code>(R: Type u) [comm_ring R] (h: is_field R)</code> and vice versa?</p>



<a name="235984914"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Coerce%20ring%20ideal%20to%20field%20ideal/near/235984914" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Coerce.20ring.20ideal.20to.20field.20ideal.html#235984914">(Apr 24 2021 at 16:53)</a>:</h4>
<p>And is there a good reason you're using <code>is_field</code> instead of <code>[field R]</code>? This seems to be what's causing your problem, and I don't see any logical reason for doing it.</p>



<a name="235984977"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Coerce%20ring%20ideal%20to%20field%20ideal/near/235984977" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Coerce.20ring.20ideal.20to.20field.20ideal.html#235984977">(Apr 24 2021 at 16:54)</a>:</h4>
<p>Yes maybe, and the moral is that you shouldn't be stating theorems like this at all I guess?</p>



<a name="235984978"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Coerce%20ring%20ideal%20to%20field%20ideal/near/235984978" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arnoud van der Leer <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Coerce.20ring.20ideal.20to.20field.20ideal.html#235984978">(Apr 24 2021 at 16:54)</a>:</h4>
<p><code>convert h2</code> changes the goal to <code>(∀ (I : ideal R), I = ⊥ ∨ I = ⊤) = ∀ (I : ideal R), I = ⊥ ∨ I = ⊤</code>.</p>



<a name="235984981"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Coerce%20ring%20ideal%20to%20field%20ideal/near/235984981" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Coerce.20ring.20ideal.20to.20field.20ideal.html#235984981">(Apr 24 2021 at 16:54)</a>:</h4>
<p><span class="user-mention" data-user-id="406521">@Arnoud van der Leer</span> <code>is_field</code> is a little bit of glue but isn't <em>idiomatic</em>.</p>



<a name="235984998"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Coerce%20ring%20ideal%20to%20field%20ideal/near/235984998" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Coerce.20ring.20ideal.20to.20field.20ideal.html#235984998">(Apr 24 2021 at 16:54)</a>:</h4>
<p>So you should avoid it, whenever possible.</p>



<a name="235985117"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Coerce%20ring%20ideal%20to%20field%20ideal/near/235985117" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arnoud van der Leer <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Coerce.20ring.20ideal.20to.20field.20ideal.html#235985117">(Apr 24 2021 at 16:56)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> <br>
Oh, sorry, forgot the imports and universes</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">ring_theory.ideal.basic</span>
<span class="kn">import</span> <span class="n">algebra.field</span>

<span class="kd">universes</span> <span class="n">u</span> <span class="n">v</span>

<span class="kd">lemma</span> <span class="n">p2</span> <span class="o">{</span><span class="n">R</span><span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">}</span> <span class="o">[</span><span class="n">comm_ring</span> <span class="n">R</span><span class="o">]</span> <span class="o">:</span> <span class="n">is_field</span> <span class="n">R</span> <span class="bp">→</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">I</span><span class="o">:</span> <span class="n">ideal</span> <span class="n">R</span><span class="o">),</span> <span class="n">I</span> <span class="bp">=</span> <span class="bp">⊥</span> <span class="bp">∨</span> <span class="n">I</span> <span class="bp">=</span> <span class="bp">⊤</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">intros</span> <span class="n">h</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">F</span> <span class="o">:=</span> <span class="n">is_field.to_field</span> <span class="n">R</span> <span class="n">h</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">h2</span> <span class="o">:=</span> <span class="bp">@</span><span class="n">ideal.eq_bot_or_top</span> <span class="n">R</span> <span class="n">F</span><span class="o">,</span>
  <span class="n">convert</span> <span class="n">h2</span><span class="o">,</span>
  <span class="n">assumption</span><span class="o">,</span>
<span class="kd">end</span>
</code></pre></div>



<a name="235985163"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Coerce%20ring%20ideal%20to%20field%20ideal/near/235985163" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Coerce.20ring.20ideal.20to.20field.20ideal.html#235985163">(Apr 24 2021 at 16:57)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">p2</span> <span class="o">{</span><span class="n">R</span><span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">}</span> <span class="o">[</span><span class="n">comm_ring</span> <span class="n">R</span><span class="o">]</span> <span class="o">:</span> <span class="n">is_field</span> <span class="n">R</span> <span class="bp">→</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">I</span><span class="o">:</span> <span class="n">ideal</span> <span class="n">R</span><span class="o">),</span> <span class="n">I</span> <span class="bp">=</span> <span class="bp">⊥</span> <span class="bp">∨</span> <span class="n">I</span> <span class="bp">=</span> <span class="bp">⊤</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">intros</span> <span class="n">h</span><span class="o">,</span>
  <span class="k">let</span> <span class="n">F</span> <span class="o">:=</span> <span class="n">is_field.to_field</span> <span class="n">R</span> <span class="n">h</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">h2</span> <span class="o">:=</span> <span class="bp">@</span><span class="n">ideal.eq_bot_or_top</span> <span class="n">R</span> <span class="n">F</span><span class="o">,</span>
  <span class="n">convert</span> <span class="n">h2</span><span class="o">,</span>
<span class="kd">end</span>
</code></pre></div>



<a name="235985181"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Coerce%20ring%20ideal%20to%20field%20ideal/near/235985181" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Coerce.20ring.20ideal.20to.20field.20ideal.html#235985181">(Apr 24 2021 at 16:57)</a>:</h4>
<p>Your problem was that <code>F</code> is data, so needs to be defined with <code>let</code> and not <code>have</code>.</p>



<a name="235985238"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Coerce%20ring%20ideal%20to%20field%20ideal/near/235985238" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arnoud van der Leer <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Coerce.20ring.20ideal.20to.20field.20ideal.html#235985238">(Apr 24 2021 at 16:58)</a>:</h4>
<p>The <code>is_field</code> was because this is supposed to be part of a three-way equivalence (is there a nice way to prase this, by the way, or should I just make this two equivalences?) between</p>
<ul>
<li>R is a field</li>
<li>R has only two ideals</li>
<li>Any morphism from R into a nonzero ring is injective<br>
And I thought if I took is_field instead of field, I would need to prove less for the other implications.</li>
</ul>



<a name="235985248"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Coerce%20ring%20ideal%20to%20field%20ideal/near/235985248" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arnoud van der Leer <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Coerce.20ring.20ideal.20to.20field.20ideal.html#235985248">(Apr 24 2021 at 16:58)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110038">Kevin Buzzard</span> <a href="#narrow/stream/113488-general/topic/Coerce.20ring.20ideal.20to.20field.20ideal/near/235985181">said</a>:</p>
<blockquote>
<p>Your problem was that <code>F</code> is data, so needs to be defined with <code>let</code> and not <code>have</code>.</p>
</blockquote>
<p>Oooooh. Thank you!</p>



<a name="235985295"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Coerce%20ring%20ideal%20to%20field%20ideal/near/235985295" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Coerce.20ring.20ideal.20to.20field.20ideal.html#235985295">(Apr 24 2021 at 16:59)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">ring_theory.ideal.basic</span>
<span class="kn">import</span> <span class="n">algebra.field</span>

<span class="kd">universes</span> <span class="n">u</span> <span class="n">v</span>

<span class="kd">lemma</span> <span class="n">p2</span> <span class="o">{</span><span class="n">R</span><span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">}</span> <span class="o">[</span><span class="n">comm_ring</span> <span class="n">R</span><span class="o">]</span> <span class="o">:</span> <span class="n">is_field</span> <span class="n">R</span> <span class="bp">→</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">I</span><span class="o">:</span> <span class="n">ideal</span> <span class="n">R</span><span class="o">),</span> <span class="n">I</span> <span class="bp">=</span> <span class="bp">⊥</span> <span class="bp">∨</span> <span class="n">I</span> <span class="bp">=</span> <span class="bp">⊤</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">intros</span> <span class="n">h</span><span class="o">,</span>
  <span class="n">letI</span> <span class="o">:=</span> <span class="n">is_field.to_field</span> <span class="n">R</span> <span class="n">h</span><span class="o">,</span>
  <span class="n">apply</span> <span class="n">ideal.eq_bot_or_top</span><span class="o">,</span>
<span class="kd">end</span>
</code></pre></div>
<p>Your approach is unidiomatic so we have to jump through some hoops. <code>letI</code> puts the field instance into the type class inference system, and now everything works as normal (you don't need the @)</p>



<a name="235985439"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Coerce%20ring%20ideal%20to%20field%20ideal/near/235985439" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Coerce.20ring.20ideal.20to.20field.20ideal.html#235985439">(Apr 24 2021 at 17:01)</a>:</h4>
<p>Your explanation for why you're using <code>is_field</code> is convincing, and is indeed the reason why <code>is_field</code> is there. So you will have to learn to jump through the hoops :-) but that's what we're here for.</p>



<a name="235985555"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Coerce%20ring%20ideal%20to%20field%20ideal/near/235985555" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Coerce.20ring.20ideal.20to.20field.20ideal.html#235985555">(Apr 24 2021 at 17:02)</a>:</h4>
<p>One of the differences between <code>field</code> and <code>is_field</code> is that <code>is_field</code> lives in the <code>Prop</code> universe, and <code>field</code> lives in the <code>Type</code> universe (because there is more data in <code>field</code> than <code>ring</code> due to a design decision; the inverse is an explicit input to a <code>field</code> structure).</p>



<a name="235985743"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Coerce%20ring%20ideal%20to%20field%20ideal/near/235985743" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Coerce.20ring.20ideal.20to.20field.20ideal.html#235985743">(Apr 24 2021 at 17:05)</a>:</h4>
<p>Another difference is that <code>is_field</code> is a structure but <code>field</code> is a class, so you will have to know something about how type class inference works. The typeclass system is a big database which keeps track of which things are groups, which things are rings etc. Normally you can just leave it alone, feed it with <code>[]</code> stuff at the beginning of your lemmas and defs, and it works fine -- you don't need to add to the database in the middle of a proof. But here what's happening is that half way through the proof you want to add something new to it because of the nature of what you're doing, and that's when <code>letI</code> and <code>haveI</code> come in handy because they enable you to do this.</p>



<a name="235985869"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Coerce%20ring%20ideal%20to%20field%20ideal/near/235985869" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Coerce.20ring.20ideal.20to.20field.20ideal.html#235985869">(Apr 24 2021 at 17:07)</a>:</h4>
<p>There's no simple way to prove A &lt;-&gt; B &lt;-&gt; C in Lean without breaking it into two iff's, as far as I know. I think I've covered all your questions now :-)</p>



<a name="235985935"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Coerce%20ring%20ideal%20to%20field%20ideal/near/235985935" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Coerce.20ring.20ideal.20to.20field.20ideal.html#235985935">(Apr 24 2021 at 17:08)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110038">Kevin Buzzard</span> <a href="#narrow/stream/113488-general/topic/Coerce.20ring.20ideal.20to.20field.20ideal/near/235985869">said</a>:</p>
<blockquote>
<p>There's no simple way to prove A &lt;-&gt; B &lt;-&gt; C in Lean without breaking it into two iff's, as far as I know. I think I've covered all your questions now :-)</p>
</blockquote>
<p>There's a <code>tfae</code> tactic, but I've never used it...</p>



<a name="235986118"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Coerce%20ring%20ideal%20to%20field%20ideal/near/235986118" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Coerce.20ring.20ideal.20to.20field.20ideal.html#235986118">(Apr 24 2021 at 17:10)</a>:</h4>
<p>This is a perfect opportunity to use <code>tfae</code></p>



<a name="235986171"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Coerce%20ring%20ideal%20to%20field%20ideal/near/235986171" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Coerce.20ring.20ideal.20to.20field.20ideal.html#235986171">(Apr 24 2021 at 17:11)</a>:</h4>
<p>We have a few <code>tfae</code> statements here and there in mathlib, but in my opinion they're a bit awkward to use because they require you to refer to numerical labels. See <a href="https://github.com/leanprover-community/mathlib/issues/3532">#3532</a> for a related feature request.</p>



<a name="235986174"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Coerce%20ring%20ideal%20to%20field%20ideal/near/235986174" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Coerce.20ring.20ideal.20to.20field.20ideal.html#235986174">(Apr 24 2021 at 17:11)</a>:</h4>
<p>It's not a tactic, and I don't know the API for it :-)</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">tactic</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">P</span> <span class="n">Q</span> <span class="n">R</span> <span class="o">:</span> <span class="kt">Prop</span><span class="o">)</span> <span class="o">(</span><span class="n">hPQ</span> <span class="o">:</span> <span class="n">P</span> <span class="bp">↔</span> <span class="n">Q</span><span class="o">)</span> <span class="o">(</span><span class="n">hQR</span> <span class="o">:</span> <span class="n">Q</span> <span class="bp">↔</span> <span class="n">R</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">tfae</span> <span class="o">[</span><span class="n">P</span><span class="o">,</span> <span class="n">Q</span><span class="o">,</span> <span class="n">R</span><span class="o">]</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">simp</span> <span class="o">[</span><span class="n">hPQ</span><span class="o">,</span> <span class="n">hQR</span><span class="o">],</span>
  <span class="c1">-- ⊢ [R, R, R].tfae</span>
<span class="kd">end</span>
</code></pre></div>



<a name="235986252"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Coerce%20ring%20ideal%20to%20field%20ideal/near/235986252" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Coerce.20ring.20ideal.20to.20field.20ideal.html#235986252">(Apr 24 2021 at 17:12)</a>:</h4>
<p>You're right, though the related tactic docs are under <a href="https://leanprover-community.github.io/mathlib_docs/tactics.html#tfae">tactic#tfae</a> .</p>



<a name="235986425"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Coerce%20ring%20ideal%20to%20field%20ideal/near/235986425" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Coerce.20ring.20ideal.20to.20field.20ideal.html#235986425">(Apr 24 2021 at 17:14)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">tactic</span>

<span class="kn">open</span> <span class="n">list</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">P</span> <span class="n">Q</span> <span class="n">R</span> <span class="o">:</span> <span class="kt">Prop</span><span class="o">)</span> <span class="o">(</span><span class="n">hPQ</span> <span class="o">:</span> <span class="n">P</span> <span class="bp">↔</span> <span class="n">Q</span><span class="o">)</span> <span class="o">(</span><span class="n">hQR</span> <span class="o">:</span> <span class="n">Q</span> <span class="bp">↔</span> <span class="n">R</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">tfae</span> <span class="o">[</span><span class="n">P</span><span class="o">,</span> <span class="n">Q</span><span class="o">,</span> <span class="n">R</span><span class="o">]</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">simp</span> <span class="o">[</span><span class="n">hPQ</span><span class="o">,</span> <span class="n">hQR</span><span class="o">,</span> <span class="n">tfae_cons_of_mem</span><span class="o">,</span> <span class="n">tfae_nil</span><span class="o">],</span>
  <span class="c1">-- ⊢ [R, R, R].tfae -- aargh</span>
  <span class="gr">sorry</span>
<span class="kd">end</span>
</code></pre></div>
<p>lol</p>



<a name="235986496"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Coerce%20ring%20ideal%20to%20field%20ideal/near/235986496" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Coerce.20ring.20ideal.20to.20field.20ideal.html#235986496">(Apr 24 2021 at 17:15)</a>:</h4>
<p>You just have to say the magic word at the end:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">tactic</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">P</span> <span class="n">Q</span> <span class="n">R</span> <span class="o">:</span> <span class="kt">Prop</span><span class="o">)</span> <span class="o">(</span><span class="n">hPQ</span> <span class="o">:</span> <span class="n">P</span> <span class="bp">↔</span> <span class="n">Q</span><span class="o">)</span> <span class="o">(</span><span class="n">hQR</span> <span class="o">:</span> <span class="n">Q</span> <span class="bp">↔</span> <span class="n">R</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">tfae</span> <span class="o">[</span><span class="n">P</span><span class="o">,</span> <span class="n">Q</span><span class="o">,</span> <span class="n">R</span><span class="o">]</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">simp</span> <span class="o">[</span><span class="n">hPQ</span><span class="o">,</span> <span class="n">hQR</span><span class="o">],</span>
  <span class="n">tfae_finish</span><span class="o">,</span>
<span class="kd">end</span>
</code></pre></div>



<a name="235986525"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Coerce%20ring%20ideal%20to%20field%20ideal/near/235986525" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Coerce.20ring.20ideal.20to.20field.20ideal.html#235986525">(Apr 24 2021 at 17:15)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">example</span> <span class="o">(</span><span class="n">P</span> <span class="n">Q</span> <span class="n">R</span> <span class="o">:</span> <span class="kt">Prop</span><span class="o">)</span> <span class="o">(</span><span class="n">hPQ</span> <span class="o">:</span> <span class="n">P</span> <span class="bp">↔</span> <span class="n">Q</span><span class="o">)</span> <span class="o">(</span><span class="n">hQR</span> <span class="o">:</span> <span class="n">Q</span> <span class="bp">↔</span> <span class="n">R</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">tfae</span> <span class="o">[</span><span class="n">P</span><span class="o">,</span> <span class="n">Q</span><span class="o">,</span> <span class="n">R</span><span class="o">]</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">tfae_finish</span><span class="o">,</span>
<span class="kd">end</span>
</code></pre></div>



<a name="235986566"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Coerce%20ring%20ideal%20to%20field%20ideal/near/235986566" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Coerce.20ring.20ideal.20to.20field.20ideal.html#235986566">(Apr 24 2021 at 17:16)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> you want things like: <code>tfae_have : 3 → 1,</code></p>



<a name="235986600"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Coerce%20ring%20ideal%20to%20field%20ideal/near/235986600" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Coerce.20ring.20ideal.20to.20field.20ideal.html#235986600">(Apr 24 2021 at 17:16)</a>:</h4>
<p>Yes, I saw the docs now from Bryan's post.</p>



<a name="235990094"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Coerce%20ring%20ideal%20to%20field%20ideal/near/235990094" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arnoud van der Leer <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/Coerce.20ring.20ideal.20to.20field.20ideal.html#235990094">(Apr 24 2021 at 17:57)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110038">Kevin Buzzard</span> <a href="#narrow/stream/113488-general/topic/Coerce.20ring.20ideal.20to.20field.20ideal/near/235985743">said</a>:</p>
<blockquote>
<p>Another difference is that <code>is_field</code> is a structure but <code>field</code> is a class, so you will have to know something about how type class inference works. The typeclass system is a big database which keeps track of which things are groups, which things are rings etc. Normally you can just leave it alone, feed it with <code>[]</code> stuff at the beginning of your lemmas and defs, and it works fine -- you don't need to add to the database in the middle of a proof. But here what's happening is that half way through the proof you want to add something new to it because of the nature of what you're doing, and that's when <code>letI</code> and <code>haveI</code> come in handy because they enable you to do this.</p>
</blockquote>
<p>Thanks a lot for your explanations!</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>