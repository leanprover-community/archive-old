---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/.40.5Breducible.5D.20defs.20of.20classes.20on.20the.20leadup.20to.20Lean4.2E.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.40.5Breducible.5D.20defs.20of.20classes.20on.20the.20leadup.20to.20Lean4.2E.html">@[reducible] defs of classes on the leadup to Lean4.</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="292136011"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%40%5Breducible%5D%20defs%20of%20classes%20on%20the%20leadup%20to%20Lean4./near/292136011" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.40.5Breducible.5D.20defs.20of.20classes.20on.20the.20leadup.20to.20Lean4.2E.html#292136011">(Aug 05 2022 at 10:40)</a>:</h4>
<p>Currently, <a href="https://leanprover-community.github.io/mathlib_docs/find/is_artinian_ring">docs#is_artinian_ring</a> is defined to be a structure containing only <code>is_artinian R R</code>. This is as it should be for Lean4, because only structures can be be classes; however, this means that any <code>instance</code>s of <code>is_artinian</code> don't automatically apply to <a href="https://leanprover-community.github.io/mathlib_docs/find/is_artinian_ring">docs#is_artinian_ring</a>. (came up <a href="https://github.com/leanprover-community/mathlib/pull/15736#discussion_r938493553">here</a>). <span class="user-mention" data-user-id="224323">@Junyan Xu</span> pointed out that there is still <code>@[reducible] def</code>s representing instances, like <a href="https://leanprover-community.github.io/mathlib_docs/find/finite_dimensional">docs#finite_dimensional</a>. What should we standardize on for now? Could we make <code>mathport</code> automatically port these sorts of things into one-item structures and creating the loop instance that lean4 allows?</p>



<a name="292136665"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%40%5Breducible%5D%20defs%20of%20classes%20on%20the%20leadup%20to%20Lean4./near/292136665" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.40.5Breducible.5D.20defs.20of.20classes.20on.20the.20leadup.20to.20Lean4.2E.html#292136665">(Aug 05 2022 at 10:47)</a>:</h4>
<p>Should we just have <code>is_artinian_ring</code> as an abbreviation?</p>



<a name="292138407"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%40%5Breducible%5D%20defs%20of%20classes%20on%20the%20leadup%20to%20Lean4./near/292138407" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.40.5Breducible.5D.20defs.20of.20classes.20on.20the.20leadup.20to.20Lean4.2E.html#292138407">(Aug 05 2022 at 11:07)</a>:</h4>
<p>does that also work? we'd need to do the same to <a href="https://leanprover-community.github.io/mathlib_docs/find/is_noetherian_ring">docs#is_noetherian_ring</a> but that's totally ok tbh</p>



<a name="292143086"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%40%5Breducible%5D%20defs%20of%20classes%20on%20the%20leadup%20to%20Lean4./near/292143086" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.40.5Breducible.5D.20defs.20of.20classes.20on.20the.20leadup.20to.20Lean4.2E.html#292143086">(Aug 05 2022 at 11:55)</a>:</h4>
<p>I'm pretty sure <code>abbreviation</code> is the same as <code>@[reducible] def</code> (that is, the extra <code>inline</code> attribute implied by the former makes no difference to typeclass search)</p>



<a name="292143106"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%40%5Breducible%5D%20defs%20of%20classes%20on%20the%20leadup%20to%20Lean4./near/292143106" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.40.5Breducible.5D.20defs.20of.20classes.20on.20the.20leadup.20to.20Lean4.2E.html#292143106">(Aug 05 2022 at 11:56)</a>:</h4>
<p>Maybe that's changed in Lean4</p>



<a name="292146133"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%40%5Breducible%5D%20defs%20of%20classes%20on%20the%20leadup%20to%20Lean4./near/292146133" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.40.5Breducible.5D.20defs.20of.20classes.20on.20the.20leadup.20to.20Lean4.2E.html#292146133">(Aug 05 2022 at 12:24)</a>:</h4>
<p>there seems to be some <code>class abbrev</code> thing: <a href="https://github.com/leanprover/lean4/blob/fdaae20594109e62aa21a1dde0f3cf864a987f47/src/Init/NotationExtra.lean#L251">https://github.com/leanprover/lean4/blob/fdaae20594109e62aa21a1dde0f3cf864a987f47/src/Init/NotationExtra.lean#L251</a></p>



<a name="292146277"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%40%5Breducible%5D%20defs%20of%20classes%20on%20the%20leadup%20to%20Lean4./near/292146277" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.40.5Breducible.5D.20defs.20of.20classes.20on.20the.20leadup.20to.20Lean4.2E.html#292146277">(Aug 05 2022 at 12:24)</a>:</h4>
<p>which as far as I can see is a drop in replacement for <code>abbreviation</code> in the case of classes</p>



<a name="292146966"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%40%5Breducible%5D%20defs%20of%20classes%20on%20the%20leadup%20to%20Lean4./near/292146966" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastian Ullrich <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.40.5Breducible.5D.20defs.20of.20classes.20on.20the.20leadup.20to.20Lean4.2E.html#292146966">(Aug 05 2022 at 12:31)</a>:</h4>
<p>Did Lean 3 require the <code>@[class]</code> on <code>abbrev</code> of a class? Lean 4 should not.</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">class</span> <span class="n">Foo</span>
<span class="n">abbrev</span> <span class="n">Bar</span> <span class="o">:=</span> <span class="n">Foo</span>

<span class="kd">instance</span> <span class="o">:</span> <span class="n">Bar</span> <span class="o">:=</span> <span class="o">{}</span>

<span class="bp">#</span><span class="n">synth</span> <span class="n">Foo</span>  <span class="c1">-- instBar</span>
<span class="bp">#</span><span class="n">synth</span> <span class="n">Bar</span>  <span class="c1">-- instBar</span>
</code></pre></div>



<a name="292147356"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%40%5Breducible%5D%20defs%20of%20classes%20on%20the%20leadup%20to%20Lean4./near/292147356" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.40.5Breducible.5D.20defs.20of.20classes.20on.20the.20leadup.20to.20Lean4.2E.html#292147356">(Aug 05 2022 at 12:34)</a>:</h4>
<p>this works as is in lean 3:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">class</span> <span class="n">Foo</span> <span class="o">:=</span> <span class="n">mk</span>

<span class="kd">abbreviation</span> <span class="n">Bar</span> <span class="o">:=</span> <span class="n">Foo</span>

<span class="kd">instance</span> <span class="n">instBar</span> <span class="o">:</span> <span class="n">Bar</span> <span class="o">:=</span> <span class="o">⟨⟩</span>

<span class="k">#check</span> <span class="o">(</span><span class="kd">by</span> <span class="n">apply_instance</span> <span class="o">:</span> <span class="n">Foo</span><span class="o">)</span>  <span class="c1">-- instBar : Bar</span>
<span class="k">#check</span> <span class="o">(</span><span class="kd">by</span> <span class="n">apply_instance</span> <span class="o">:</span> <span class="n">Bar</span><span class="o">)</span>  <span class="c1">-- instBar : Bar</span>
</code></pre></div>



<a name="292148019"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%40%5Breducible%5D%20defs%20of%20classes%20on%20the%20leadup%20to%20Lean4./near/292148019" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.40.5Breducible.5D.20defs.20of.20classes.20on.20the.20leadup.20to.20Lean4.2E.html#292148019">(Aug 05 2022 at 12:41)</a>:</h4>
<p>in this case, should we refactor all classes that are currently done this way to just be <code>abbreviation</code>s? Those two are the only ones I know right now, but there's likely others.</p>



<a name="292160315"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%40%5Breducible%5D%20defs%20of%20classes%20on%20the%20leadup%20to%20Lean4./near/292160315" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.40.5Breducible.5D.20defs.20of.20classes.20on.20the.20leadup.20to.20Lean4.2E.html#292160315">(Aug 05 2022 at 14:20)</a>:</h4>
<p>I find <code>abbreviation</code> to be more annoying than <code>@[reducible] def</code> or even <code>@[reducible, inline] def</code>, because only the latter two generate equation lemmas</p>



<a name="292160373"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%40%5Breducible%5D%20defs%20of%20classes%20on%20the%20leadup%20to%20Lean4./near/292160373" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.40.5Breducible.5D.20defs.20of.20classes.20on.20the.20leadup.20to.20Lean4.2E.html#292160373">(Aug 05 2022 at 14:21)</a>:</h4>
<p>(which matters for <code>rw</code> or for showing the meaning in the docs)</p>



<a name="292161356"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%40%5Breducible%5D%20defs%20of%20classes%20on%20the%20leadup%20to%20Lean4./near/292161356" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.40.5Breducible.5D.20defs.20of.20classes.20on.20the.20leadup.20to.20Lean4.2E.html#292161356">(Aug 05 2022 at 14:26)</a>:</h4>
<p>when my current PR gets merged I'll do these changes (I cba with dependent PRs). If anyone knows any other typeclasses with similar design please let me know. I'll go for <code>reducible def</code> and can maybe leave a specific comment in case this helps mathport.</p>



<a name="292831382"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/%40%5Breducible%5D%20defs%20of%20classes%20on%20the%20leadup%20to%20Lean4./near/292831382" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/.40.5Breducible.5D.20defs.20of.20classes.20on.20the.20leadup.20to.20Lean4.2E.html#292831382">(Aug 10 2022 at 20:54)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib/pull/15989">#15989</a></p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>