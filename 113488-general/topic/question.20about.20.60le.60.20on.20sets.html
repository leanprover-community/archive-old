---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/question.20about.20.60le.60.20on.20sets.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/question.20about.20.60le.60.20on.20sets.html">question about `le` on sets</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="205193374"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/question%20about%20%60le%60%20on%20sets/near/205193374" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/question.20about.20.60le.60.20on.20sets.html#205193374">(Jul 28 2020 at 02:40)</a>:</h4>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="n">data</span><span class="bp">.</span><span class="n">set</span><span class="bp">.</span><span class="n">lattice</span>

<span class="c1">-- FAILS:</span>
<span class="kn">example</span> <span class="o">{</span><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">{</span><span class="n">ι</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">(</span><span class="n">U</span> <span class="o">:</span> <span class="n">ι</span> <span class="bp">→</span> <span class="n">set</span> <span class="n">X</span><span class="o">)</span> <span class="o">{</span><span class="n">x</span><span class="o">}</span> <span class="o">{</span><span class="n">i</span><span class="o">}</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">U</span> <span class="n">i</span><span class="o">)</span> <span class="o">:</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">supr</span> <span class="n">U</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">le_supr</span> <span class="n">U</span> <span class="n">i</span><span class="o">)</span> <span class="n">h</span> <span class="c1">-- function expected at `le_supr U i` term has type `complete_lattice.le (U i) (supr U)`</span>

<span class="c1">-- WORKS, but makes me sad:</span>
<span class="kn">example</span> <span class="o">{</span><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">{</span><span class="n">ι</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">(</span><span class="n">U</span> <span class="o">:</span> <span class="n">ι</span> <span class="bp">→</span> <span class="n">set</span> <span class="n">X</span><span class="o">)</span> <span class="o">{</span><span class="n">x</span><span class="o">}</span> <span class="o">{</span><span class="n">i</span><span class="o">}</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">U</span> <span class="n">i</span><span class="o">)</span> <span class="o">:</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">supr</span> <span class="n">U</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="k">have</span> <span class="o">:=</span> <span class="n">le_supr</span> <span class="n">U</span> <span class="n">i</span><span class="o">,</span>
  <span class="n">exact</span> <span class="n">this</span> <span class="n">h</span>
<span class="kn">end</span>
</code></pre></div>



<a name="205193380"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/question%20about%20%60le%60%20on%20sets/near/205193380" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/question.20about.20.60le.60.20on.20sets.html#205193380">(Jul 28 2020 at 02:41)</a>:</h4>
<p>What is one meant to do here to write a term-mode proof?</p>



<a name="205194294"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/question%20about%20%60le%60%20on%20sets/near/205194294" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/question.20about.20.60le.60.20on.20sets.html#205194294">(Jul 28 2020 at 03:04)</a>:</h4>
<p><code>(show ..., from ...) h</code></p>



<a name="205202402"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/question%20about%20%60le%60%20on%20sets/near/205202402" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/question.20about.20.60le.60.20on.20sets.html#205202402">(Jul 28 2020 at 06:40)</a>:</h4>
<div class="codehilite"><pre><span></span><code><span class="c1">-- WORKS:</span>
<span class="kn">example</span> <span class="o">{</span><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">{</span><span class="n">ι</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">(</span><span class="n">U</span> <span class="o">:</span> <span class="n">ι</span> <span class="bp">→</span> <span class="n">set</span> <span class="n">X</span><span class="o">)</span> <span class="o">{</span><span class="n">x</span><span class="o">}</span> <span class="o">{</span><span class="n">i</span><span class="o">}</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">U</span> <span class="n">i</span><span class="o">)</span> <span class="o">:</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">supr</span> <span class="n">U</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">le_supr</span> <span class="n">U</span> <span class="n">i</span> <span class="o">:</span> <span class="bp">_</span><span class="o">)</span> <span class="n">h</span>
</code></pre></div>



<a name="205205226"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/question%20about%20%60le%60%20on%20sets/near/205205226" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/question.20about.20.60le.60.20on.20sets.html#205205226">(Jul 28 2020 at 07:36)</a>:</h4>
<p>I'd forgotten that trick.</p>



<a name="205209140"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/question%20about%20%60le%60%20on%20sets/near/205209140" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/question.20about.20.60le.60.20on.20sets.html#205209140">(Jul 28 2020 at 08:30)</a>:</h4>
<p>alternatively</p>
<div class="codehilite"><pre><span></span><code><span class="kn">example</span> <span class="o">{</span><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">{</span><span class="n">ι</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">U</span> <span class="o">:</span> <span class="n">ι</span> <span class="bp">→</span> <span class="n">set</span> <span class="n">X</span><span class="o">)</span> <span class="o">{</span><span class="n">i</span> <span class="n">x</span><span class="o">},</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">U</span> <span class="n">i</span> <span class="bp">→</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">supr</span> <span class="n">U</span> <span class="o">:=</span> <span class="n">le_supr</span>
</code></pre></div>



<a name="205324484"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/question%20about%20%60le%60%20on%20sets/near/205324484" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/question.20about.20.60le.60.20on.20sets.html#205324484">(Jul 29 2020 at 07:10)</a>:</h4>
<p>Can you explain what's going on in that trick <span class="user-mention" data-user-id="110050">@Sebastien Gouezel</span>?</p>



<a name="205324503"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/question%20about%20%60le%60%20on%20sets/near/205324503" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/question.20about.20.60le.60.20on.20sets.html#205324503">(Jul 29 2020 at 07:11)</a>:</h4>
<p>Lean elaborates from outside to inside</p>



<a name="205324514"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/question%20about%20%60le%60%20on%20sets/near/205324514" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/question.20about.20.60le.60.20on.20sets.html#205324514">(Jul 29 2020 at 07:11)</a>:</h4>
<p>that trick forces Lean to evaluate the inside first</p>



<a name="205330258"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/question%20about%20%60le%60%20on%20sets/near/205330258" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/question.20about.20.60le.60.20on.20sets.html#205330258">(Jul 29 2020 at 08:35)</a>:</h4>
<p><span class="user-mention" data-user-id="310045">@Eric Wieser</span> During elaboration, Lean keeps track of the "expected type" of a subexpression.  For example, if we elaborate <code>(x + y : ℕ)</code>, then the expected type of <code>x</code> will be <code>ℕ</code>, no matter how little we know about <code>x</code>.<br>
This works by propagating the expected type to the arguments when elaborating function applications.  I believe this is what goes wrong in the first example.  The <code>(e : _)</code> pattern is idiomatically used to prevent the expected type propagation.</p>



<a name="205332019"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/question%20about%20%60le%60%20on%20sets/near/205332019" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/question.20about.20.60le.60.20on.20sets.html#205332019">(Jul 29 2020 at 08:58)</a>:</h4>
<p>Is there somewhere sensible to collect tricks like this, along with the trick of <code>by letI := ....; exact</code> for letI in term mode, etc?</p>



<a name="205332150"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/question%20about%20%60le%60%20on%20sets/near/205332150" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/question.20about.20.60le.60.20on.20sets.html#205332150">(Jul 29 2020 at 09:00)</a>:</h4>
<p>I don't think we have anything more organised than Zulip atm...</p>



<a name="205332165"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/question%20about%20%60le%60%20on%20sets/near/205332165" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/question.20about.20.60le.60.20on.20sets.html#205332165">(Jul 29 2020 at 09:00)</a>:</h4>
<p>But feel free to PR them to the "extra" docs</p>



<a name="205332195"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/question%20about%20%60le%60%20on%20sets/near/205332195" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/question.20about.20.60le.60.20on.20sets.html#205332195">(Jul 29 2020 at 09:00)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib/tree/master/docs/extras">https://github.com/leanprover-community/mathlib/tree/master/docs/extras</a></p>



<a name="205334319"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/question%20about%20%60le%60%20on%20sets/near/205334319" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/question.20about.20.60le.60.20on.20sets.html#205334319">(Jul 29 2020 at 09:27)</a>:</h4>
<p>Eric, if you can list ten tips which newcomers can only find out by running into them and asking, I could write a blog post :-)</p>



<a name="205335042"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/question%20about%20%60le%60%20on%20sets/near/205335042" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/question.20about.20.60le.60.20on.20sets.html#205335042">(Jul 29 2020 at 09:35)</a>:</h4>
<p><span class="user-mention" data-user-id="112680">@Johan Commelin</span>, I assume you mean <a href="https://github.com/leanprover-community/leanprover-community.github.io/tree/newsite/templates/extras">https://github.com/leanprover-community/leanprover-community.github.io/tree/newsite/templates/extras</a>?</p>



<a name="205335091"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/question%20about%20%60le%60%20on%20sets/near/205335091" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/question.20about.20.60le.60.20on.20sets.html#205335091">(Jul 29 2020 at 09:36)</a>:</h4>
<p>Probably, yes</p>



<a name="205335099"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/question%20about%20%60le%60%20on%20sets/near/205335099" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/question.20about.20.60le.60.20on.20sets.html#205335099">(Jul 29 2020 at 09:36)</a>:</h4>
<p>I'm getting old</p>



<a name="205335144"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/question%20about%20%60le%60%20on%20sets/near/205335144" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/question.20about.20.60le.60.20on.20sets.html#205335144">(Jul 29 2020 at 09:36)</a>:</h4>
<p>We should burn that other directory with fire (or just leave a README with a pointer to the new location).</p>



<a name="205335524"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/question%20about%20%60le%60%20on%20sets/near/205335524" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/question.20about.20.60le.60.20on.20sets.html#205335524">(Jul 29 2020 at 09:40)</a>:</h4>
<p>I thought the old one already disappeared</p>



<a name="205339047"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/question%20about%20%60le%60%20on%20sets/near/205339047" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/question.20about.20.60le.60.20on.20sets.html#205339047">(Jul 29 2020 at 10:25)</a>:</h4>
<p>A redirect from the old page would be more useful - I think google indexes it above the new one</p>



<a name="205349385"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/question%20about%20%60le%60%20on%20sets/near/205349385" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Wong <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/question.20about.20.60le.60.20on.20sets.html#205349385">(Jul 29 2020 at 12:28)</a>:</h4>
<p>I don't think GitHub Pages supports automatic redirects, sadly. But maybe <code>&lt;link rel="canonical"&gt;</code> can help with the Google issue?<br>
<a href="https://en.wikipedia.org/wiki/Canonical_link_element">https://en.wikipedia.org/wiki/Canonical_link_element</a></p>



<a name="205358029"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/question%20about%20%60le%60%20on%20sets/near/205358029" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/question.20about.20.60le.60.20on.20sets.html#205358029">(Jul 29 2020 at 13:46)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112680">Johan Commelin</span> <a href="#narrow/stream/113488-general/topic/question.20about.20.60le.60.20on.20sets/near/205335144">said</a>:</p>
<blockquote>
<p>We should burn that other directory with fire (or just leave a README with a pointer to the new location).</p>
</blockquote>
<p>I've added some README files in <a href="https://github.com/leanprover-community/mathlib/issues/3623">#3623</a>.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>