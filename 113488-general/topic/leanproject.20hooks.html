---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/leanproject.20hooks.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/leanproject.20hooks.html">leanproject hooks</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="203472674"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/leanproject%20hooks/near/203472674" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/leanproject.20hooks.html#203472674">(Jul 10 2020 at 06:14)</a>:</h4>
<p>The post-checkout hook the <code>leanproject hooks</code> installs says:</p>
<div class="codehilite"><pre><span></span><code><span class="k">if</span> <span class="o">[</span> <span class="s2">&quot;$CHANGED_BRANCH&quot;</span> <span class="bp">-</span><span class="n">eq</span> <span class="s2">&quot;1&quot;</span> <span class="o">]</span><span class="bp">;</span> <span class="k">then</span>
    <span class="k">if</span> <span class="bp">/</span><span class="n">usr</span><span class="bp">/</span><span class="n">bin</span><span class="bp">/</span><span class="n">env</span> <span class="n">python3</span> <span class="bp">-</span><span class="n">c</span> <span class="s2">&quot;&quot;</span><span class="bp">;</span> <span class="k">then</span>
                <span class="n">echo</span> <span class="s2">&quot;Trying to fetch cached olean&quot;</span>
                <span class="n">leanproject</span> <span class="n">get</span><span class="bp">-</span><span class="n">cache</span>
                <span class="n">leanproject</span> <span class="n">get</span><span class="bp">-</span><span class="n">mathlib</span><span class="bp">-</span><span class="n">cache</span>
                <span class="n">leanproject</span> <span class="n">delete</span><span class="bp">-</span><span class="n">zombies</span>
    <span class="k">else</span>
        <span class="n">echo</span> <span class="s2">&quot;&#39;env python3&#39; failed; not running post-checkout hook&quot;</span>
    <span class="n">fi</span>
<span class="n">fi</span>
</code></pre></div>



<a name="203472696"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/leanproject%20hooks/near/203472696" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/leanproject.20hooks.html#203472696">(Jul 10 2020 at 06:15)</a>:</h4>
<p>it seems that when working on mathlib itself, this results in two separate rounds of attempting to download oleans, once from <code>get-cache</code> and once from <code>get-mathlib-cache</code>.</p>



<a name="203472792"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/leanproject%20hooks/near/203472792" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/leanproject.20hooks.html#203472792">(Jul 10 2020 at 06:16)</a>:</h4>
<p>I've noticed that too!</p>



<a name="203480529"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/leanproject%20hooks/near/203480529" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/leanproject.20hooks.html#203480529">(Jul 10 2020 at 08:14)</a>:</h4>
<p>I never used any of those hooks so feel free to modify them to whatever pleases you.</p>



<a name="203494147"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/leanproject%20hooks/near/203494147" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/leanproject.20hooks.html#203494147">(Jul 10 2020 at 11:05)</a>:</h4>
<p>okay. Can we also arrange that the cache only contains <code>olean</code> files, and no <code>lean</code> files? To often I clobber my local changes by loading from the cache.</p>



<a name="203494168"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/leanproject%20hooks/near/203494168" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/leanproject.20hooks.html#203494168">(Jul 10 2020 at 11:06)</a>:</h4>
<p>I think it used to be necessary to have to lean files, because of how timestamps were used, but now it is probably completely unnecessary.</p>



<a name="203494215"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/leanproject%20hooks/near/203494215" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/leanproject.20hooks.html#203494215">(Jul 10 2020 at 11:06)</a>:</h4>
<p>Perhaps removing them entirely, if that's viable, would also reduce the size of the downloads.</p>



<a name="203503961"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/leanproject%20hooks/near/203503961" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/leanproject.20hooks.html#203503961">(Jul 10 2020 at 13:07)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110087">Scott Morrison</span> <a href="#narrow/stream/113488-general/topic/leanproject.20hooks/near/203494147">said</a>:</p>
<blockquote>
<p>okay. Can we also arrange that the cache only contains <code>olean</code> files, and no <code>lean</code> files? To often I clobber my local changes by loading from the cache.</p>
</blockquote>
<p>Is this not protected against by the dirty repo check?</p>



<a name="203573892"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/leanproject%20hooks/near/203573892" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/leanproject.20hooks.html#203573892">(Jul 11 2020 at 01:24)</a>:</h4>
<p>Yesterday I lost some work --- I think what was happening was that I was just hacking on <code>master</code>, then I ran <code>git checkout -b new_branch</code> (without any <code>commit</code> or <code>stash</code>), and some files disappeared. I agree that doesn't sound explicable, so perhaps I did something dumber. If it happens again I'll note more carefully what I'd done.</p>



<a name="203574906"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/leanproject%20hooks/near/203574906" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bhavik Mehta <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/leanproject.20hooks.html#203574906">(Jul 11 2020 at 01:54)</a>:</h4>
<p>I've also lost some work from hooks by doing something similar to this</p>



<a name="203583645"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/leanproject%20hooks/near/203583645" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Stevens <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/leanproject.20hooks.html#203583645">(Jul 11 2020 at 06:36)</a>:</h4>
<p>A mere <code>git checkout -b</code> will not lose any work - I assert that this is completely impossible</p>



<a name="203583686"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/leanproject%20hooks/near/203583686" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Stevens <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/leanproject.20hooks.html#203583686">(Jul 11 2020 at 06:36)</a>:</h4>
<p>Ah, hooks - it is possible, I take it all back, but you'll need a hook that deletes files</p>



<a name="203583687"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/leanproject%20hooks/near/203583687" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Stevens <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/leanproject.20hooks.html#203583687">(Jul 11 2020 at 06:36)</a>:</h4>
<p>Carry on :P</p>



<a name="203587936"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/leanproject%20hooks/near/203587936" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/leanproject.20hooks.html#203587936">(Jul 11 2020 at 09:00)</a>:</h4>
<p>The problem is that it is a hook that unzips a zip files, containing potentially old copies of files in the repo!</p>



<a name="203587957"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/leanproject%20hooks/near/203587957" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/leanproject.20hooks.html#203587957">(Jul 11 2020 at 09:02)</a>:</h4>
<p>I've confirmed this happens again. The problem is when running both</p>
<div class="codehilite"><pre><span></span><code>        <span class="n">leanproject</span> <span class="n">get</span><span class="bp">-</span><span class="n">cache</span>
        <span class="n">leanproject</span> <span class="n">get</span><span class="bp">-</span><span class="n">mathlib</span><span class="bp">-</span><span class="n">cache</span>
</code></pre></div>


<p>from <code>post-checkout</code>, if you're in a copy of mathlib itself it seems the <code>get-mathlib-cache</code> doesn't correctly check for a dirty repository, and just clobbers the files.</p>



<a name="203587999"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/leanproject%20hooks/near/203587999" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/leanproject.20hooks.html#203587999">(Jul 11 2020 at 09:02)</a>:</h4>
<p>We should kill two birds with one stone and just not do the <code>get-mathlib-cache</code> if we're in a copy of mathlib!</p>



<a name="203588004"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/leanproject%20hooks/near/203588004" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/leanproject.20hooks.html#203588004">(Jul 11 2020 at 09:02)</a>:</h4>
<p>or commit before checkout</p>



<a name="203588051"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/leanproject%20hooks/near/203588051" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/leanproject.20hooks.html#203588051">(Jul 11 2020 at 09:04)</a>:</h4>
<p>The problem is I always find myself on the wrong branch, and want to use <code>git checkout -b XXX</code> to make a new branch. The current behaviour makes this impossible.</p>



<a name="203588055"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/leanproject%20hooks/near/203588055" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/leanproject.20hooks.html#203588055">(Jul 11 2020 at 09:04)</a>:</h4>
<p>(Or rather, I have to <code>git stash</code> in order to do it safely.)</p>



<a name="203588864"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/leanproject%20hooks/near/203588864" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/leanproject.20hooks.html#203588864">(Jul 11 2020 at 09:26)</a>:</h4>
<p>I'm sorry about that Scott. Really someone who cares about those hooks should work on them. In the mean time I pushed a tweak that reroutes <code>get-mathlib-cache</code> to <code>get-cache</code> (which does check the repo is clean) when ran inside mathlib.</p>



<a name="203588916"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/leanproject%20hooks/near/203588916" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/leanproject.20hooks.html#203588916">(Jul 11 2020 at 09:29)</a>:</h4>
<p>I also merged the command prefix. It would be very nice to have couple of people installing the current master of mathlibtools and test in real conditions today so that I can release a new version before the workshop.</p>



<a name="203590895"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/leanproject%20hooks/near/203590895" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/leanproject.20hooks.html#203590895">(Jul 11 2020 at 10:38)</a>:</h4>
<p>The big problem I have with mathlibtools is that I even m never know what to do when my collaborator changes leanpkg.toml . I'm not sure I can deal with this within the leanproject framework, I always have to fix things up by hand</p>



<a name="203591080"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/leanproject%20hooks/near/203591080" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/leanproject.20hooks.html#203591080">(Jul 11 2020 at 10:43)</a>:</h4>
<p>The problem with using leanproject is that if people have actually changed eg <code>linarith.lean</code> to <code>linarith/basic.lean</code> then I can't get leanproject to tidy up correctly</p>



<a name="203593958"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/leanproject%20hooks/near/203593958" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/leanproject.20hooks.html#203593958">(Jul 11 2020 at 12:07)</a>:</h4>
<p>Weird... I don't recognise the problem. For me it works like a charm.</p>



<a name="203595611"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/leanproject%20hooks/near/203595611" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/leanproject.20hooks.html#203595611">(Jul 11 2020 at 12:56)</a>:</h4>
<p>What works?</p>



<a name="203595622"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/leanproject%20hooks/near/203595622" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/leanproject.20hooks.html#203595622">(Jul 11 2020 at 12:56)</a>:</h4>
<p>The question is how to update my local mathlib to the version which my collaborator wants, which might not be the current mathlib</p>



<a name="203595623"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/leanproject%20hooks/near/203595623" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/leanproject.20hooks.html#203595623">(Jul 11 2020 at 12:56)</a>:</h4>
<p>If people move files around or change tomls, <code>leanproject up</code> just gives me a project that I can work with.</p>



<a name="203595637"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/leanproject%20hooks/near/203595637" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/leanproject.20hooks.html#203595637">(Jul 11 2020 at 12:57)</a>:</h4>
<p><code>leanproject get-mathlib-cache</code> should do that, if you are working on a project that is not mathlib.</p>



<a name="203595639"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/leanproject%20hooks/near/203595639" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/leanproject.20hooks.html#203595639">(Jul 11 2020 at 12:57)</a>:</h4>
<p>I think leanproject up will update mathlib. I don't want to bump mathlib to master though, I want to bump it to the commit in the toml</p>



<a name="203595687"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/leanproject%20hooks/near/203595687" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/leanproject.20hooks.html#203595687">(Jul 11 2020 at 12:58)</a>:</h4>
<p>Right, and get-mathlib-cache is exactly what I'm saying doesn't always work</p>



<a name="203595692"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/leanproject%20hooks/near/203595692" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/leanproject.20hooks.html#203595692">(Jul 11 2020 at 12:58)</a>:</h4>
<p>Because then imports can become ambiguous if there are structural changes to mathlib</p>



<a name="203595699"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/leanproject%20hooks/near/203595699" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/leanproject.20hooks.html#203595699">(Jul 11 2020 at 12:58)</a>:</h4>
<p>I'll make an issue. I've seen it several times now.</p>



<a name="203595705"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/leanproject%20hooks/near/203595705" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/leanproject.20hooks.html#203595705">(Jul 11 2020 at 12:59)</a>:</h4>
<p>By structural changes I mean that foo.lean becomes foo/basic.lean</p>



<a name="203595722"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/leanproject%20hooks/near/203595722" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/leanproject.20hooks.html#203595722">(Jul 11 2020 at 12:59)</a>:</h4>
<p>Aha... I guess I've not been in that spot often enough to have noticed the problems.</p>



<a name="203595842"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/leanproject%20hooks/near/203595842" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Stevens <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/leanproject.20hooks.html#203595842">(Jul 11 2020 at 13:02)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110087">Scott Morrison</span> <a href="#narrow/stream/113488-general/topic/leanproject.20hooks/near/203588051">said</a>:</p>
<blockquote>
<p>The problem is I always find myself on the wrong branch, and want to use <code>git checkout -b XXX</code> to make a new branch. The current behaviour makes this impossible.</p>
</blockquote>
<p>You could always commit, then <code>git checkout -b</code>, then <code>git checkout -</code>, then <code>git reset --hard HEAD^</code>.</p>



<a name="203596033"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/leanproject%20hooks/near/203596033" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/leanproject.20hooks.html#203596033">(Jul 11 2020 at 13:08)</a>:</h4>
<p>Kevin, I have no idea what you are talking about.</p>



<a name="203596044"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/leanproject%20hooks/near/203596044" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/leanproject.20hooks.html#203596044">(Jul 11 2020 at 13:09)</a>:</h4>
<p>If you open an issue then please list precise steps reproducing your problem. Opening an issue with what you wrote above would be useless since we wouldn't have any action we could take.</p>



<a name="203596274"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/leanproject%20hooks/near/203596274" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/leanproject.20hooks.html#203596274">(Jul 11 2020 at 13:17)</a>:</h4>
<p><span class="user-mention" data-user-id="117987">@Patrick Stevens</span>  yes I know I can fix it, the point is that I can't fix it solely by using <code>leanproject</code>.  <span class="user-mention" data-user-id="110031">@Patrick Massot</span> I'll make an example.</p>



<a name="203597234"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/leanproject%20hooks/near/203597234" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/leanproject.20hooks.html#203597234">(Jul 11 2020 at 13:44)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib-tools/issues/70">https://github.com/leanprover-community/mathlib-tools/issues/70</a> Patrick M I've attempted to explain the problem I'm seeing.</p>



<a name="203629063"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/leanproject%20hooks/near/203629063" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/leanproject.20hooks.html#203629063">(Jul 12 2020 at 05:32)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110031">Patrick Massot</span> <a href="#narrow/stream/113488-general/topic/leanproject.20hooks/near/203588864">said</a>:</p>
<blockquote>
<p>I'm sorry about that Scott. Really someone who cares about those hooks should work on them. In the mean time I pushed a tweak that reroutes <code>get-mathlib-cache</code> to <code>get-cache</code> (which does check the repo is clean) when ran inside mathlib.</p>
</blockquote>
<p>Fixed in <a href="https://github.com/leanprover-community/mathlib-tools/pull/71">https://github.com/leanprover-community/mathlib-tools/pull/71</a></p>



<a name="203638620"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/leanproject%20hooks/near/203638620" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/leanproject.20hooks.html#203638620">(Jul 12 2020 at 10:58)</a>:</h4>
<p>Ok, I merged all this, and hopefully fixed Kevin's issue as well. And I pushed to pypi (after messing up with my git workflow, hence the version 0.0.9b). I wanted to do all this at least a couple of days before the workshop but it didn't happen, I'm sorry. I'd be really really grateful if many people could <code>pip install --upgrade mathlibtools</code> and use it today in order to catch any potential regression.</p>



<a name="203638754"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/leanproject%20hooks/near/203638754" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/leanproject.20hooks.html#203638754">(Jul 12 2020 at 11:00)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> could you try to update and see if you still see issues?</p>



<a name="203638997"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/leanproject%20hooks/near/203638997" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/leanproject.20hooks.html#203638997">(Jul 12 2020 at 11:08)</a>:</h4>
<p>grr I get a segfault on Ubuntu 18.04LTS</p>
<div class="codehilite"><pre><span></span><code><span class="n">buzzard</span><span class="bp">@</span><span class="n">bob</span><span class="o">:</span><span class="bp">~/</span><span class="n">crap</span><span class="err">$</span> <span class="n">pip3</span> <span class="n">install</span> <span class="bp">-</span><span class="n">U</span> <span class="n">mathlibtools</span>
<span class="n">Collecting</span> <span class="n">mathlibtools</span>
  <span class="n">Using</span> <span class="n">cached</span> <span class="n">https</span><span class="o">:</span><span class="bp">//</span><span class="n">files</span><span class="bp">.</span><span class="n">pythonhosted</span><span class="bp">.</span><span class="n">org</span><span class="bp">/</span><span class="n">packages</span><span class="bp">/</span><span class="mi">85</span><span class="bp">/</span><span class="mi">27</span><span class="bp">/</span><span class="n">ce65b7f36a5a387b4e6efb9b2ba42f6092bdfd77d076068114065a443787</span><span class="bp">/</span><span class="n">mathlibtools</span><span class="bp">-</span><span class="mi">0</span><span class="bp">.</span><span class="mi">0</span><span class="bp">.</span><span class="mi">9</span><span class="bp">-</span><span class="n">py3</span><span class="bp">-</span><span class="n">none</span><span class="bp">-</span><span class="n">any</span><span class="bp">.</span><span class="n">whl</span>
<span class="n">Collecting</span> <span class="n">requests</span> <span class="o">(</span><span class="k">from</span> <span class="n">mathlibtools</span><span class="o">)</span>
  <span class="n">Using</span> <span class="n">cached</span> <span class="n">https</span><span class="o">:</span><span class="bp">//</span><span class="n">files</span><span class="bp">.</span><span class="n">pythonhosted</span><span class="bp">.</span><span class="n">org</span><span class="bp">/</span><span class="n">packages</span><span class="bp">/</span><span class="mi">45</span><span class="bp">/</span><span class="mi">1</span><span class="n">e</span><span class="bp">/</span><span class="mi">0</span><span class="n">c169c6a5381e241ba7404532c16a21d86ab872c9bed8bdcd4c423954103</span><span class="bp">/</span><span class="n">requests</span><span class="bp">-</span><span class="mi">2</span><span class="bp">.</span><span class="mi">24</span><span class="bp">.</span><span class="mi">0</span><span class="bp">-</span><span class="n">py2</span><span class="bp">.</span><span class="n">py3</span><span class="bp">-</span><span class="n">none</span><span class="bp">-</span><span class="n">any</span><span class="bp">.</span><span class="n">whl</span>
<span class="n">Collecting</span> <span class="n">gitpython</span><span class="bp">&gt;=</span><span class="mi">2</span><span class="bp">.</span><span class="mi">1</span><span class="bp">.</span><span class="mi">11</span> <span class="o">(</span><span class="k">from</span> <span class="n">mathlibtools</span><span class="o">)</span>
  <span class="n">Using</span> <span class="n">cached</span> <span class="n">https</span><span class="o">:</span><span class="bp">//</span><span class="n">files</span><span class="bp">.</span><span class="n">pythonhosted</span><span class="bp">.</span><span class="n">org</span><span class="bp">/</span><span class="n">packages</span><span class="bp">/</span><span class="n">ef</span><span class="bp">/</span><span class="n">bc</span><span class="bp">/</span><span class="mi">574</span><span class="n">a066bd8b61ae3c01ce5cd3eeb89aa0b1b4c0eb9fb137cd5b1cf8596be</span><span class="bp">/</span><span class="n">GitPython</span><span class="bp">-</span><span class="mi">3</span><span class="bp">.</span><span class="mi">1</span><span class="bp">.</span><span class="mi">5</span><span class="bp">-</span><span class="n">py3</span><span class="bp">-</span><span class="n">none</span><span class="bp">-</span><span class="n">any</span><span class="bp">.</span><span class="n">whl</span>
<span class="n">Collecting</span> <span class="n">networkx</span> <span class="o">(</span><span class="k">from</span> <span class="n">mathlibtools</span><span class="o">)</span>
  <span class="n">Using</span> <span class="n">cached</span> <span class="n">https</span><span class="o">:</span><span class="bp">//</span><span class="n">files</span><span class="bp">.</span><span class="n">pythonhosted</span><span class="bp">.</span><span class="n">org</span><span class="bp">/</span><span class="n">packages</span><span class="bp">/</span><span class="mi">41</span><span class="bp">/</span><span class="mi">8</span><span class="n">f</span><span class="bp">/</span><span class="n">dd6a8e85946def36e4f2c69c84219af0fa5e832b018c970e92f2ad337e45</span><span class="bp">/</span><span class="n">networkx</span><span class="bp">-</span><span class="mi">2</span><span class="bp">.</span><span class="mi">4</span><span class="bp">-</span><span class="n">py3</span><span class="bp">-</span><span class="n">none</span><span class="bp">-</span><span class="n">any</span><span class="bp">.</span><span class="n">whl</span>
<span class="n">Collecting</span> <span class="n">toml</span><span class="bp">&gt;=</span><span class="mi">0</span><span class="bp">.</span><span class="mi">10</span><span class="bp">.</span><span class="mi">0</span> <span class="o">(</span><span class="k">from</span> <span class="n">mathlibtools</span><span class="o">)</span>
  <span class="n">Using</span> <span class="n">cached</span> <span class="n">https</span><span class="o">:</span><span class="bp">//</span><span class="n">files</span><span class="bp">.</span><span class="n">pythonhosted</span><span class="bp">.</span><span class="n">org</span><span class="bp">/</span><span class="n">packages</span><span class="bp">/</span><span class="mi">9</span><span class="n">f</span><span class="bp">/</span><span class="n">e1</span><span class="bp">/</span><span class="mi">1</span><span class="n">b40b80f2e1663a6b9f497123c11d7d988c0919abbf3c3f2688e448c5363</span><span class="bp">/</span><span class="n">toml</span><span class="bp">-</span><span class="mi">0</span><span class="bp">.</span><span class="mi">10</span><span class="bp">.</span><span class="mi">1</span><span class="bp">-</span><span class="n">py2</span><span class="bp">.</span><span class="n">py3</span><span class="bp">-</span><span class="n">none</span><span class="bp">-</span><span class="n">any</span><span class="bp">.</span><span class="n">whl</span>
<span class="n">Collecting</span> <span class="n">Click</span> <span class="o">(</span><span class="k">from</span> <span class="n">mathlibtools</span><span class="o">)</span>
  <span class="n">Using</span> <span class="n">cached</span> <span class="n">https</span><span class="o">:</span><span class="bp">//</span><span class="n">files</span><span class="bp">.</span><span class="n">pythonhosted</span><span class="bp">.</span><span class="n">org</span><span class="bp">/</span><span class="n">packages</span><span class="bp">/</span><span class="n">d2</span><span class="bp">/</span><span class="mi">3</span><span class="n">d</span><span class="bp">/</span><span class="n">fa76db83bf75c4f8d338c2fd15c8d33fdd7ad23a9b5e57eb6c5de26b430e</span><span class="bp">/</span><span class="n">click</span><span class="bp">-</span><span class="mi">7</span><span class="bp">.</span><span class="mi">1</span><span class="bp">.</span><span class="mi">2</span><span class="bp">-</span><span class="n">py2</span><span class="bp">.</span><span class="n">py3</span><span class="bp">-</span><span class="n">none</span><span class="bp">-</span><span class="n">any</span><span class="bp">.</span><span class="n">whl</span>
<span class="n">Collecting</span> <span class="n">pydot</span> <span class="o">(</span><span class="k">from</span> <span class="n">mathlibtools</span><span class="o">)</span>
  <span class="n">Using</span> <span class="n">cached</span> <span class="n">https</span><span class="o">:</span><span class="bp">//</span><span class="n">files</span><span class="bp">.</span><span class="n">pythonhosted</span><span class="bp">.</span><span class="n">org</span><span class="bp">/</span><span class="n">packages</span><span class="bp">/</span><span class="mi">33</span><span class="bp">/</span><span class="n">d1</span><span class="bp">/</span><span class="n">b1479a770f66d962f545c2101630ce1d5592d90cb4f083d38862e93d16d2</span><span class="bp">/</span><span class="n">pydot</span><span class="bp">-</span><span class="mi">1</span><span class="bp">.</span><span class="mi">4</span><span class="bp">.</span><span class="mi">1</span><span class="bp">-</span><span class="n">py2</span><span class="bp">.</span><span class="n">py3</span><span class="bp">-</span><span class="n">none</span><span class="bp">-</span><span class="n">any</span><span class="bp">.</span><span class="n">whl</span>
<span class="n">Collecting</span> <span class="n">certifi</span> <span class="o">(</span><span class="k">from</span> <span class="n">mathlibtools</span><span class="o">)</span>
  <span class="n">Using</span> <span class="n">cached</span> <span class="n">https</span><span class="o">:</span><span class="bp">//</span><span class="n">files</span><span class="bp">.</span><span class="n">pythonhosted</span><span class="bp">.</span><span class="n">org</span><span class="bp">/</span><span class="n">packages</span><span class="bp">/</span><span class="mi">5</span><span class="n">e</span><span class="bp">/</span><span class="n">c4</span><span class="bp">/</span><span class="mi">6</span><span class="n">c4fe722df5343c33226f0b4e0bb042e4dc13483228b4718baf286f86d87</span><span class="bp">/</span><span class="n">certifi</span><span class="bp">-</span><span class="mi">2020</span><span class="bp">.</span><span class="mi">6</span><span class="bp">.</span><span class="mi">20</span><span class="bp">-</span><span class="n">py2</span><span class="bp">.</span><span class="n">py3</span><span class="bp">-</span><span class="n">none</span><span class="bp">-</span><span class="n">any</span><span class="bp">.</span><span class="n">whl</span>
<span class="n">Collecting</span> <span class="n">PyYAML</span><span class="bp">&gt;=</span><span class="mi">3</span><span class="bp">.</span><span class="mi">13</span> <span class="o">(</span><span class="k">from</span> <span class="n">mathlibtools</span><span class="o">)</span>
<span class="n">Collecting</span> <span class="n">PyGithub</span> <span class="o">(</span><span class="k">from</span> <span class="n">mathlibtools</span><span class="o">)</span>
  <span class="n">Using</span> <span class="n">cached</span> <span class="n">https</span><span class="o">:</span><span class="bp">//</span><span class="n">files</span><span class="bp">.</span><span class="n">pythonhosted</span><span class="bp">.</span><span class="n">org</span><span class="bp">/</span><span class="n">packages</span><span class="bp">/</span><span class="n">e9</span><span class="bp">/</span><span class="mi">47</span><span class="bp">/</span><span class="mi">193780145</span><span class="n">caa381e9900991c03764506bdd472a64b0a60df1562dd9ac308</span><span class="bp">/</span><span class="n">PyGithub</span><span class="bp">-</span><span class="mi">1</span><span class="bp">.</span><span class="mi">51</span><span class="bp">-</span><span class="n">py3</span><span class="bp">-</span><span class="n">none</span><span class="bp">-</span><span class="n">any</span><span class="bp">.</span><span class="n">whl</span>
<span class="n">Collecting</span> <span class="n">paramiko</span><span class="bp">&gt;=</span><span class="mi">2</span><span class="bp">.</span><span class="mi">7</span><span class="bp">.</span><span class="mi">0</span> <span class="o">(</span><span class="k">from</span> <span class="n">mathlibtools</span><span class="o">)</span>
  <span class="n">Using</span> <span class="n">cached</span> <span class="n">https</span><span class="o">:</span><span class="bp">//</span><span class="n">files</span><span class="bp">.</span><span class="n">pythonhosted</span><span class="bp">.</span><span class="n">org</span><span class="bp">/</span><span class="n">packages</span><span class="bp">/</span><span class="mi">06</span><span class="bp">/</span><span class="mi">1</span><span class="n">e</span><span class="bp">/</span><span class="mi">1</span><span class="n">e08baaaf6c3d3df1459fd85f0e7d2d6aa916f33958f151ee1ecc9800971</span><span class="bp">/</span><span class="n">paramiko</span><span class="bp">-</span><span class="mi">2</span><span class="bp">.</span><span class="mi">7</span><span class="bp">.</span><span class="mi">1</span><span class="bp">-</span><span class="n">py2</span><span class="bp">.</span><span class="n">py3</span><span class="bp">-</span><span class="n">none</span><span class="bp">-</span><span class="n">any</span><span class="bp">.</span><span class="n">whl</span>
<span class="n">Collecting</span> <span class="n">tqdm</span> <span class="o">(</span><span class="k">from</span> <span class="n">mathlibtools</span><span class="o">)</span>
  <span class="n">Using</span> <span class="n">cached</span> <span class="n">https</span><span class="o">:</span><span class="bp">//</span><span class="n">files</span><span class="bp">.</span><span class="n">pythonhosted</span><span class="bp">.</span><span class="n">org</span><span class="bp">/</span><span class="n">packages</span><span class="bp">/</span><span class="mi">46</span><span class="bp">/</span><span class="mi">62</span><span class="bp">/</span><span class="mi">7663894</span><span class="n">f67ac5a41a0d8812d78d9d2a9404124051885af9d77dc526fb399</span><span class="bp">/</span><span class="n">tqdm</span><span class="bp">-</span><span class="mi">4</span><span class="bp">.</span><span class="mi">47</span><span class="bp">.</span><span class="mi">0</span><span class="bp">-</span><span class="n">py2</span><span class="bp">.</span><span class="n">py3</span><span class="bp">-</span><span class="n">none</span><span class="bp">-</span><span class="n">any</span><span class="bp">.</span><span class="n">whl</span>
<span class="n">Collecting</span> <span class="n">urllib3</span><span class="bp">!=</span><span class="mi">1</span><span class="bp">.</span><span class="mi">25</span><span class="bp">.</span><span class="mi">0</span><span class="o">,</span><span class="bp">!=</span><span class="mi">1</span><span class="bp">.</span><span class="mi">25</span><span class="bp">.</span><span class="mi">1</span><span class="o">,</span><span class="bp">&lt;</span><span class="mi">1</span><span class="bp">.</span><span class="mi">26</span><span class="o">,</span><span class="bp">&gt;=</span><span class="mi">1</span><span class="bp">.</span><span class="mi">21</span><span class="bp">.</span><span class="mi">1</span> <span class="o">(</span><span class="k">from</span> <span class="n">requests</span><span class="bp">-&gt;</span><span class="n">mathlibtools</span><span class="o">)</span>
  <span class="n">Using</span> <span class="n">cached</span> <span class="n">https</span><span class="o">:</span><span class="bp">//</span><span class="n">files</span><span class="bp">.</span><span class="n">pythonhosted</span><span class="bp">.</span><span class="n">org</span><span class="bp">/</span><span class="n">packages</span><span class="bp">/</span><span class="n">e1</span><span class="bp">/</span><span class="n">e5</span><span class="bp">/</span><span class="n">df302e8017440f111c11cc41a6b432838672f5a70aa29227bf58149dc72f</span><span class="bp">/</span><span class="n">urllib3</span><span class="bp">-</span><span class="mi">1</span><span class="bp">.</span><span class="mi">25</span><span class="bp">.</span><span class="mi">9</span><span class="bp">-</span><span class="n">py2</span><span class="bp">.</span><span class="n">py3</span><span class="bp">-</span><span class="n">none</span><span class="bp">-</span><span class="n">any</span><span class="bp">.</span><span class="n">whl</span>
<span class="n">Collecting</span> <span class="n">idna</span><span class="bp">&lt;</span><span class="mi">3</span><span class="o">,</span><span class="bp">&gt;=</span><span class="mi">2</span><span class="bp">.</span><span class="mi">5</span> <span class="o">(</span><span class="k">from</span> <span class="n">requests</span><span class="bp">-&gt;</span><span class="n">mathlibtools</span><span class="o">)</span>
  <span class="n">Using</span> <span class="n">cached</span> <span class="n">https</span><span class="o">:</span><span class="bp">//</span><span class="n">files</span><span class="bp">.</span><span class="n">pythonhosted</span><span class="bp">.</span><span class="n">org</span><span class="bp">/</span><span class="n">packages</span><span class="bp">/</span><span class="n">a2</span><span class="bp">/</span><span class="mi">38</span><span class="bp">/</span><span class="mi">928</span><span class="n">ddce2273eaa564f6f50de919327bf3a00f091b5baba8dfa9460f3a8a8</span><span class="bp">/</span><span class="n">idna</span><span class="bp">-</span><span class="mi">2</span><span class="bp">.</span><span class="mi">10</span><span class="bp">-</span><span class="n">py2</span><span class="bp">.</span><span class="n">py3</span><span class="bp">-</span><span class="n">none</span><span class="bp">-</span><span class="n">any</span><span class="bp">.</span><span class="n">whl</span>
<span class="n">Collecting</span> <span class="n">chardet</span><span class="bp">&lt;</span><span class="mi">4</span><span class="o">,</span><span class="bp">&gt;=</span><span class="mi">3</span><span class="bp">.</span><span class="mi">0</span><span class="bp">.</span><span class="mi">2</span> <span class="o">(</span><span class="k">from</span> <span class="n">requests</span><span class="bp">-&gt;</span><span class="n">mathlibtools</span><span class="o">)</span>
  <span class="n">Using</span> <span class="n">cached</span> <span class="n">https</span><span class="o">:</span><span class="bp">//</span><span class="n">files</span><span class="bp">.</span><span class="n">pythonhosted</span><span class="bp">.</span><span class="n">org</span><span class="bp">/</span><span class="n">packages</span><span class="bp">/</span><span class="n">bc</span><span class="bp">/</span><span class="n">a9</span><span class="bp">/</span><span class="mi">01</span><span class="n">ffebfb562e4274b6487b4bb1ddec7ca55ec7510b22e4c51f14098443b8</span><span class="bp">/</span><span class="n">chardet</span><span class="bp">-</span><span class="mi">3</span><span class="bp">.</span><span class="mi">0</span><span class="bp">.</span><span class="mi">4</span><span class="bp">-</span><span class="n">py2</span><span class="bp">.</span><span class="n">py3</span><span class="bp">-</span><span class="n">none</span><span class="bp">-</span><span class="n">any</span><span class="bp">.</span><span class="n">whl</span>
<span class="n">Collecting</span> <span class="n">gitdb</span><span class="bp">&lt;</span><span class="mi">5</span><span class="o">,</span><span class="bp">&gt;=</span><span class="mi">4</span><span class="bp">.</span><span class="mi">0</span><span class="bp">.</span><span class="mi">1</span> <span class="o">(</span><span class="k">from</span> <span class="n">gitpython</span><span class="bp">&gt;=</span><span class="mi">2</span><span class="bp">.</span><span class="mi">1</span><span class="bp">.</span><span class="mi">11</span><span class="bp">-&gt;</span><span class="n">mathlibtools</span><span class="o">)</span>
  <span class="n">Using</span> <span class="n">cached</span> <span class="n">https</span><span class="o">:</span><span class="bp">//</span><span class="n">files</span><span class="bp">.</span><span class="n">pythonhosted</span><span class="bp">.</span><span class="n">org</span><span class="bp">/</span><span class="n">packages</span><span class="bp">/</span><span class="mi">48</span><span class="bp">/</span><span class="mi">11</span><span class="bp">/</span><span class="n">d1800bca0a3bae820b84b7d813ad1eff15a48a64caea9c823fc8c1b119e8</span><span class="bp">/</span><span class="n">gitdb</span><span class="bp">-</span><span class="mi">4</span><span class="bp">.</span><span class="mi">0</span><span class="bp">.</span><span class="mi">5</span><span class="bp">-</span><span class="n">py3</span><span class="bp">-</span><span class="n">none</span><span class="bp">-</span><span class="n">any</span><span class="bp">.</span><span class="n">whl</span>
<span class="n">Collecting</span> <span class="n">decorator</span><span class="bp">&gt;=</span><span class="mi">4</span><span class="bp">.</span><span class="mi">3</span><span class="bp">.</span><span class="mi">0</span> <span class="o">(</span><span class="k">from</span> <span class="n">networkx</span><span class="bp">-&gt;</span><span class="n">mathlibtools</span><span class="o">)</span>
  <span class="n">Using</span> <span class="n">cached</span> <span class="n">https</span><span class="o">:</span><span class="bp">//</span><span class="n">files</span><span class="bp">.</span><span class="n">pythonhosted</span><span class="bp">.</span><span class="n">org</span><span class="bp">/</span><span class="n">packages</span><span class="bp">/</span><span class="n">ed</span><span class="bp">/</span><span class="mi">1</span><span class="n">b</span><span class="bp">/</span><span class="mi">72</span><span class="n">a1821152d07cf1d8b6fce298aeb06a7eb90f4d6d41acec9861e7cc6df0</span><span class="bp">/</span><span class="n">decorator</span><span class="bp">-</span><span class="mi">4</span><span class="bp">.</span><span class="mi">4</span><span class="bp">.</span><span class="mi">2</span><span class="bp">-</span><span class="n">py2</span><span class="bp">.</span><span class="n">py3</span><span class="bp">-</span><span class="n">none</span><span class="bp">-</span><span class="n">any</span><span class="bp">.</span><span class="n">whl</span>
<span class="n">Collecting</span> <span class="n">pyparsing</span><span class="bp">&gt;=</span><span class="mi">2</span><span class="bp">.</span><span class="mi">1</span><span class="bp">.</span><span class="mi">4</span> <span class="o">(</span><span class="k">from</span> <span class="n">pydot</span><span class="bp">-&gt;</span><span class="n">mathlibtools</span><span class="o">)</span>
  <span class="n">Using</span> <span class="n">cached</span> <span class="n">https</span><span class="o">:</span><span class="bp">//</span><span class="n">files</span><span class="bp">.</span><span class="n">pythonhosted</span><span class="bp">.</span><span class="n">org</span><span class="bp">/</span><span class="n">packages</span><span class="bp">/</span><span class="mi">8</span><span class="n">a</span><span class="bp">/</span><span class="n">bb</span><span class="bp">/</span><span class="mi">488841</span><span class="n">f56197b13700afd5658fc279a2025a39e22449b7cf29864669b15d</span><span class="bp">/</span><span class="n">pyparsing</span><span class="bp">-</span><span class="mi">2</span><span class="bp">.</span><span class="mi">4</span><span class="bp">.</span><span class="mi">7</span><span class="bp">-</span><span class="n">py2</span><span class="bp">.</span><span class="n">py3</span><span class="bp">-</span><span class="n">none</span><span class="bp">-</span><span class="n">any</span><span class="bp">.</span><span class="n">whl</span>
<span class="n">Collecting</span> <span class="n">deprecated</span> <span class="o">(</span><span class="k">from</span> <span class="n">PyGithub</span><span class="bp">-&gt;</span><span class="n">mathlibtools</span><span class="o">)</span>
  <span class="n">Using</span> <span class="n">cached</span> <span class="n">https</span><span class="o">:</span><span class="bp">//</span><span class="n">files</span><span class="bp">.</span><span class="n">pythonhosted</span><span class="bp">.</span><span class="n">org</span><span class="bp">/</span><span class="n">packages</span><span class="bp">/</span><span class="mi">76</span><span class="bp">/</span><span class="n">a1</span><span class="bp">/</span><span class="mi">05</span><span class="n">d7f62f956d77b23a640efc650f80ce24483aa2f85a09c03fb64f49e879</span><span class="bp">/</span><span class="n">Deprecated</span><span class="bp">-</span><span class="mi">1</span><span class="bp">.</span><span class="mi">2</span><span class="bp">.</span><span class="mi">10</span><span class="bp">-</span><span class="n">py2</span><span class="bp">.</span><span class="n">py3</span><span class="bp">-</span><span class="n">none</span><span class="bp">-</span><span class="n">any</span><span class="bp">.</span><span class="n">whl</span>
<span class="n">Collecting</span> <span class="n">pyjwt</span> <span class="o">(</span><span class="k">from</span> <span class="n">PyGithub</span><span class="bp">-&gt;</span><span class="n">mathlibtools</span><span class="o">)</span>
  <span class="n">Using</span> <span class="n">cached</span> <span class="n">https</span><span class="o">:</span><span class="bp">//</span><span class="n">files</span><span class="bp">.</span><span class="n">pythonhosted</span><span class="bp">.</span><span class="n">org</span><span class="bp">/</span><span class="n">packages</span><span class="bp">/</span><span class="mi">87</span><span class="bp">/</span><span class="mi">8</span><span class="n">b</span><span class="bp">/</span><span class="mi">6</span><span class="n">a9f14b5f781697e51259d81657e6048fd31a113229cf346880bb7545565</span><span class="bp">/</span><span class="n">PyJWT</span><span class="bp">-</span><span class="mi">1</span><span class="bp">.</span><span class="mi">7</span><span class="bp">.</span><span class="mi">1</span><span class="bp">-</span><span class="n">py2</span><span class="bp">.</span><span class="n">py3</span><span class="bp">-</span><span class="n">none</span><span class="bp">-</span><span class="n">any</span><span class="bp">.</span><span class="n">whl</span>
<span class="n">Collecting</span> <span class="n">cryptography</span><span class="bp">&gt;=</span><span class="mi">2</span><span class="bp">.</span><span class="mi">5</span> <span class="o">(</span><span class="k">from</span> <span class="n">paramiko</span><span class="bp">&gt;=</span><span class="mi">2</span><span class="bp">.</span><span class="mi">7</span><span class="bp">.</span><span class="mi">0</span><span class="bp">-&gt;</span><span class="n">mathlibtools</span><span class="o">)</span>
  <span class="n">Using</span> <span class="n">cached</span> <span class="n">https</span><span class="o">:</span><span class="bp">//</span><span class="n">files</span><span class="bp">.</span><span class="n">pythonhosted</span><span class="bp">.</span><span class="n">org</span><span class="bp">/</span><span class="n">packages</span><span class="bp">/</span><span class="mi">58</span><span class="bp">/</span><span class="mi">95</span><span class="bp">/</span><span class="n">f1282ca55649b60afcf617e1e2ca384a2a3e7a5cf91f724cf83c8fbe76a1</span><span class="bp">/</span><span class="n">cryptography</span><span class="bp">-</span><span class="mi">2</span><span class="bp">.</span><span class="mi">9</span><span class="bp">.</span><span class="mi">2</span><span class="bp">-</span><span class="n">cp35</span><span class="bp">-</span><span class="n">abi3</span><span class="bp">-</span><span class="n">manylinux1_x86_64</span><span class="bp">.</span><span class="n">whl</span>
<span class="n">Collecting</span> <span class="n">bcrypt</span><span class="bp">&gt;=</span><span class="mi">3</span><span class="bp">.</span><span class="mi">1</span><span class="bp">.</span><span class="mi">3</span> <span class="o">(</span><span class="k">from</span> <span class="n">paramiko</span><span class="bp">&gt;=</span><span class="mi">2</span><span class="bp">.</span><span class="mi">7</span><span class="bp">.</span><span class="mi">0</span><span class="bp">-&gt;</span><span class="n">mathlibtools</span><span class="o">)</span>
  <span class="n">Using</span> <span class="n">cached</span> <span class="n">https</span><span class="o">:</span><span class="bp">//</span><span class="n">files</span><span class="bp">.</span><span class="n">pythonhosted</span><span class="bp">.</span><span class="n">org</span><span class="bp">/</span><span class="n">packages</span><span class="bp">/</span><span class="mi">8</span><span class="n">b</span><span class="bp">/</span><span class="mi">1</span><span class="n">d</span><span class="bp">/</span><span class="mi">82826443777</span><span class="n">dd4a624e38a08957b975e75df859b381ae302cfd7a30783ed</span><span class="bp">/</span><span class="n">bcrypt</span><span class="bp">-</span><span class="mi">3</span><span class="bp">.</span><span class="mi">1</span><span class="bp">.</span><span class="mi">7</span><span class="bp">-</span><span class="n">cp34</span><span class="bp">-</span><span class="n">abi3</span><span class="bp">-</span><span class="n">manylinux1_x86_64</span><span class="bp">.</span><span class="n">whl</span>
<span class="n">Collecting</span> <span class="n">pynacl</span><span class="bp">&gt;=</span><span class="mi">1</span><span class="bp">.</span><span class="mi">0</span><span class="bp">.</span><span class="mi">1</span> <span class="o">(</span><span class="k">from</span> <span class="n">paramiko</span><span class="bp">&gt;=</span><span class="mi">2</span><span class="bp">.</span><span class="mi">7</span><span class="bp">.</span><span class="mi">0</span><span class="bp">-&gt;</span><span class="n">mathlibtools</span><span class="o">)</span>
  <span class="n">Using</span> <span class="n">cached</span> <span class="n">https</span><span class="o">:</span><span class="bp">//</span><span class="n">files</span><span class="bp">.</span><span class="n">pythonhosted</span><span class="bp">.</span><span class="n">org</span><span class="bp">/</span><span class="n">packages</span><span class="bp">/</span><span class="mi">9</span><span class="n">d</span><span class="bp">/</span><span class="mi">57</span><span class="bp">/</span><span class="mi">2</span><span class="n">f5e6226a674b2bcb6db531e8b383079b678df5b10cdaa610d6cf20d77ba</span><span class="bp">/</span><span class="n">PyNaCl</span><span class="bp">-</span><span class="mi">1</span><span class="bp">.</span><span class="mi">4</span><span class="bp">.</span><span class="mi">0</span><span class="bp">-</span><span class="n">cp35</span><span class="bp">-</span><span class="n">abi3</span><span class="bp">-</span><span class="n">manylinux1_x86_64</span><span class="bp">.</span><span class="n">whl</span>
<span class="n">Collecting</span> <span class="n">smmap</span><span class="bp">&lt;</span><span class="mi">4</span><span class="o">,</span><span class="bp">&gt;=</span><span class="mi">3</span><span class="bp">.</span><span class="mi">0</span><span class="bp">.</span><span class="mi">1</span> <span class="o">(</span><span class="k">from</span> <span class="n">gitdb</span><span class="bp">&lt;</span><span class="mi">5</span><span class="o">,</span><span class="bp">&gt;=</span><span class="mi">4</span><span class="bp">.</span><span class="mi">0</span><span class="bp">.</span><span class="mi">1</span><span class="bp">-&gt;</span><span class="n">gitpython</span><span class="bp">&gt;=</span><span class="mi">2</span><span class="bp">.</span><span class="mi">1</span><span class="bp">.</span><span class="mi">11</span><span class="bp">-&gt;</span><span class="n">mathlibtools</span><span class="o">)</span>
  <span class="n">Using</span> <span class="n">cached</span> <span class="n">https</span><span class="o">:</span><span class="bp">//</span><span class="n">files</span><span class="bp">.</span><span class="n">pythonhosted</span><span class="bp">.</span><span class="n">org</span><span class="bp">/</span><span class="n">packages</span><span class="bp">/</span><span class="n">b0</span><span class="bp">/</span><span class="mi">9</span><span class="n">a</span><span class="bp">/</span><span class="mi">4</span><span class="n">d409a6234eb940e6a78dfdfc66156e7522262f5f2fecca07dc55915952d</span><span class="bp">/</span><span class="n">smmap</span><span class="bp">-</span><span class="mi">3</span><span class="bp">.</span><span class="mi">0</span><span class="bp">.</span><span class="mi">4</span><span class="bp">-</span><span class="n">py2</span><span class="bp">.</span><span class="n">py3</span><span class="bp">-</span><span class="n">none</span><span class="bp">-</span><span class="n">any</span><span class="bp">.</span><span class="n">whl</span>
<span class="n">Collecting</span> <span class="n">wrapt</span><span class="bp">&lt;</span><span class="mi">2</span><span class="o">,</span><span class="bp">&gt;=</span><span class="mi">1</span><span class="bp">.</span><span class="mi">10</span> <span class="o">(</span><span class="k">from</span> <span class="n">deprecated</span><span class="bp">-&gt;</span><span class="n">PyGithub</span><span class="bp">-&gt;</span><span class="n">mathlibtools</span><span class="o">)</span>
<span class="n">Collecting</span> <span class="n">cffi</span><span class="bp">!=</span><span class="mi">1</span><span class="bp">.</span><span class="mi">11</span><span class="bp">.</span><span class="mi">3</span><span class="o">,</span><span class="bp">&gt;=</span><span class="mi">1</span><span class="bp">.</span><span class="mi">8</span> <span class="o">(</span><span class="k">from</span> <span class="n">cryptography</span><span class="bp">&gt;=</span><span class="mi">2</span><span class="bp">.</span><span class="mi">5</span><span class="bp">-&gt;</span><span class="n">paramiko</span><span class="bp">&gt;=</span><span class="mi">2</span><span class="bp">.</span><span class="mi">7</span><span class="bp">.</span><span class="mi">0</span><span class="bp">-&gt;</span><span class="n">mathlibtools</span><span class="o">)</span>
  <span class="n">Using</span> <span class="n">cached</span> <span class="n">https</span><span class="o">:</span><span class="bp">//</span><span class="n">files</span><span class="bp">.</span><span class="n">pythonhosted</span><span class="bp">.</span><span class="n">org</span><span class="bp">/</span><span class="n">packages</span><span class="bp">/</span><span class="n">f1</span><span class="bp">/</span><span class="n">c7</span><span class="bp">/</span><span class="mi">72</span><span class="n">abda280893609e1ddfff90f8064568bd8bcb2c1770a9d5bb5edb2d1fea</span><span class="bp">/</span><span class="n">cffi</span><span class="bp">-</span><span class="mi">1</span><span class="bp">.</span><span class="mi">14</span><span class="bp">.</span><span class="mi">0</span><span class="bp">-</span><span class="n">cp36</span><span class="bp">-</span><span class="n">cp36m</span><span class="bp">-</span><span class="n">manylinux1_x86_64</span><span class="bp">.</span><span class="n">whl</span>
<span class="n">Collecting</span> <span class="n">six</span><span class="bp">&gt;=</span><span class="mi">1</span><span class="bp">.</span><span class="mi">4</span><span class="bp">.</span><span class="mi">1</span> <span class="o">(</span><span class="k">from</span> <span class="n">cryptography</span><span class="bp">&gt;=</span><span class="mi">2</span><span class="bp">.</span><span class="mi">5</span><span class="bp">-&gt;</span><span class="n">paramiko</span><span class="bp">&gt;=</span><span class="mi">2</span><span class="bp">.</span><span class="mi">7</span><span class="bp">.</span><span class="mi">0</span><span class="bp">-&gt;</span><span class="n">mathlibtools</span><span class="o">)</span>
  <span class="n">Using</span> <span class="n">cached</span> <span class="n">https</span><span class="o">:</span><span class="bp">//</span><span class="n">files</span><span class="bp">.</span><span class="n">pythonhosted</span><span class="bp">.</span><span class="n">org</span><span class="bp">/</span><span class="n">packages</span><span class="bp">/</span><span class="n">ee</span><span class="bp">/</span><span class="n">ff</span><span class="bp">/</span><span class="mi">48</span><span class="n">bde5c0f013094d729fe4b0316ba2a24774b3ff1c52d924a8a4cb04078a</span><span class="bp">/</span><span class="n">six</span><span class="bp">-</span><span class="mi">1</span><span class="bp">.</span><span class="mi">15</span><span class="bp">.</span><span class="mi">0</span><span class="bp">-</span><span class="n">py2</span><span class="bp">.</span><span class="n">py3</span><span class="bp">-</span><span class="n">none</span><span class="bp">-</span><span class="n">any</span><span class="bp">.</span><span class="n">whl</span>
<span class="n">Collecting</span> <span class="n">pycparser</span> <span class="o">(</span><span class="k">from</span> <span class="n">cffi</span><span class="bp">!=</span><span class="mi">1</span><span class="bp">.</span><span class="mi">11</span><span class="bp">.</span><span class="mi">3</span><span class="o">,</span><span class="bp">&gt;=</span><span class="mi">1</span><span class="bp">.</span><span class="mi">8</span><span class="bp">-&gt;</span><span class="n">cryptography</span><span class="bp">&gt;=</span><span class="mi">2</span><span class="bp">.</span><span class="mi">5</span><span class="bp">-&gt;</span><span class="n">paramiko</span><span class="bp">&gt;=</span><span class="mi">2</span><span class="bp">.</span><span class="mi">7</span><span class="bp">.</span><span class="mi">0</span><span class="bp">-&gt;</span><span class="n">mathlibtools</span><span class="o">)</span>
  <span class="n">Using</span> <span class="n">cached</span> <span class="n">https</span><span class="o">:</span><span class="bp">//</span><span class="n">files</span><span class="bp">.</span><span class="n">pythonhosted</span><span class="bp">.</span><span class="n">org</span><span class="bp">/</span><span class="n">packages</span><span class="bp">/</span><span class="n">ae</span><span class="bp">/</span><span class="n">e7</span><span class="bp">/</span><span class="n">d9c3a176ca4b02024debf82342dab36efadfc5776f9c8db077e8f6e71821</span><span class="bp">/</span><span class="n">pycparser</span><span class="bp">-</span><span class="mi">2</span><span class="bp">.</span><span class="mi">20</span><span class="bp">-</span><span class="n">py2</span><span class="bp">.</span><span class="n">py3</span><span class="bp">-</span><span class="n">none</span><span class="bp">-</span><span class="n">any</span><span class="bp">.</span><span class="n">whl</span>
<span class="n">Installing</span> <span class="n">collected</span> <span class="n">packages</span><span class="o">:</span> <span class="n">urllib3</span><span class="o">,</span> <span class="n">idna</span><span class="o">,</span> <span class="n">chardet</span><span class="o">,</span> <span class="n">certifi</span><span class="o">,</span> <span class="n">requests</span><span class="o">,</span> <span class="n">smmap</span><span class="o">,</span> <span class="n">gitdb</span><span class="o">,</span> <span class="n">gitpython</span><span class="o">,</span> <span class="n">decorator</span><span class="o">,</span> <span class="n">networkx</span><span class="o">,</span> <span class="n">toml</span><span class="o">,</span> <span class="n">Click</span><span class="o">,</span> <span class="n">pyparsing</span><span class="o">,</span> <span class="n">pydot</span><span class="o">,</span> <span class="n">PyYAML</span><span class="o">,</span> <span class="n">wrapt</span><span class="o">,</span> <span class="n">deprecated</span><span class="o">,</span> <span class="n">pyjwt</span><span class="o">,</span> <span class="n">PyGithub</span><span class="o">,</span> <span class="n">pycparser</span><span class="o">,</span> <span class="n">cffi</span><span class="o">,</span> <span class="n">six</span><span class="o">,</span> <span class="n">cryptography</span><span class="o">,</span> <span class="n">bcrypt</span><span class="o">,</span> <span class="n">pynacl</span><span class="o">,</span> <span class="n">paramiko</span><span class="o">,</span> <span class="n">tqdm</span><span class="o">,</span> <span class="n">mathlibtools</span>
<span class="n">Segmentation</span> <span class="n">fault</span> <span class="o">(</span><span class="n">core</span> <span class="n">dumped</span><span class="o">)</span>
</code></pre></div>


<p>and I'm still on 0.0.8 :-(</p>



<a name="203639568"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/leanproject%20hooks/near/203639568" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/leanproject.20hooks.html#203639568">(Jul 12 2020 at 11:25)</a>:</h4>
<p>Do you have any idea what segfaults? I don't see any indication in your code block.</p>



<a name="203639693"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/leanproject%20hooks/near/203639693" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/leanproject.20hooks.html#203639693">(Jul 12 2020 at 11:28)</a>:</h4>
<p>I just tried in my VM, everything works fine (using <code>pipx upgrade mathlibtools</code> since we switched to <code>pipx</code> in the install instructions).</p>



<a name="203639707"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/leanproject%20hooks/near/203639707" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/leanproject.20hooks.html#203639707">(Jul 12 2020 at 11:29)</a>:</h4>
<p>And it's lunch time here.</p>



<a name="203641222"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/leanproject%20hooks/near/203641222" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/leanproject.20hooks.html#203641222">(Jul 12 2020 at 12:13)</a>:</h4>
<p>Upgrades fine in my Ubuntu 20.04 VM, sorry.</p>



<a name="203641226"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/leanproject%20hooks/near/203641226" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/leanproject.20hooks.html#203641226">(Jul 12 2020 at 12:13)</a>:</h4>
<p>Maybe just try again? We might get fewer messages, and so a better idea where it's hitting trouble.</p>



<a name="203641502"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/leanproject%20hooks/near/203641502" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/leanproject.20hooks.html#203641502">(Jul 12 2020 at 12:22)</a>:</h4>
<p>Or try <code>pip3 install -U urllib3 idna chardet certifi requests smmap gitdb gitpython decorator networkx toml Click pyparsing pydot PyYAML wrapt deprecated pyjwt PyGithub pycparser cffi six cryptography bcrypt pynacl paramiko tqdm</code> on its own first</p>



<a name="203660606"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/leanproject%20hooks/near/203660606" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/leanproject.20hooks.html#203660606">(Jul 12 2020 at 20:54)</a>:</h4>
<div class="codehilite"><pre><span></span><code><span class="err">$</span> <span class="n">pip3</span> <span class="n">install</span> <span class="bp">-</span><span class="n">U</span> <span class="n">cffi</span>
<span class="n">Collecting</span> <span class="n">cffi</span>
  <span class="n">Using</span> <span class="n">cached</span> <span class="n">https</span><span class="o">:</span><span class="bp">//</span><span class="n">files</span><span class="bp">.</span><span class="n">pythonhosted</span><span class="bp">.</span><span class="n">org</span><span class="bp">/</span><span class="n">packages</span><span class="bp">/</span><span class="n">f1</span><span class="bp">/</span><span class="n">c7</span><span class="bp">/</span><span class="mi">72</span><span class="n">abda280893609e1ddfff90f8064568bd8bcb2c1770a9d5bb5edb2d1fea</span><span class="bp">/</span><span class="n">cffi</span><span class="bp">-</span><span class="mi">1</span><span class="bp">.</span><span class="mi">14</span><span class="bp">.</span><span class="mi">0</span><span class="bp">-</span><span class="n">cp36</span><span class="bp">-</span><span class="n">cp36m</span><span class="bp">-</span><span class="n">manylinux1_x86_64</span><span class="bp">.</span><span class="n">whl</span>
<span class="n">Collecting</span> <span class="n">pycparser</span> <span class="o">(</span><span class="k">from</span> <span class="n">cffi</span><span class="o">)</span>
  <span class="n">Using</span> <span class="n">cached</span> <span class="n">https</span><span class="o">:</span><span class="bp">//</span><span class="n">files</span><span class="bp">.</span><span class="n">pythonhosted</span><span class="bp">.</span><span class="n">org</span><span class="bp">/</span><span class="n">packages</span><span class="bp">/</span><span class="n">ae</span><span class="bp">/</span><span class="n">e7</span><span class="bp">/</span><span class="n">d9c3a176ca4b02024debf82342dab36efadfc5776f9c8db077e8f6e71821</span><span class="bp">/</span><span class="n">pycparser</span><span class="bp">-</span><span class="mi">2</span><span class="bp">.</span><span class="mi">20</span><span class="bp">-</span><span class="n">py2</span><span class="bp">.</span><span class="n">py3</span><span class="bp">-</span><span class="n">none</span><span class="bp">-</span><span class="n">any</span><span class="bp">.</span><span class="n">whl</span>
<span class="n">Installing</span> <span class="n">collected</span> <span class="n">packages</span><span class="o">:</span> <span class="n">pycparser</span><span class="o">,</span> <span class="n">cffi</span>
<span class="n">Successfully</span> <span class="n">installed</span> <span class="n">cffi</span><span class="bp">-</span><span class="mi">1</span><span class="bp">.</span><span class="mi">14</span><span class="bp">.</span><span class="mi">0</span> <span class="n">pycparser</span><span class="bp">-</span><span class="mi">2</span><span class="bp">.</span><span class="mi">20</span>
<span class="n">Segmentation</span> <span class="n">fault</span> <span class="o">(</span><span class="n">core</span> <span class="n">dumped</span><span class="o">)</span>
<span class="n">buzzard</span><span class="bp">@</span><span class="n">bob</span><span class="o">:</span><span class="bp">~/</span><span class="n">Downloads</span><span class="err">$</span>
</code></pre></div>



<a name="203660627"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/leanproject%20hooks/near/203660627" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/leanproject.20hooks.html#203660627">(Jul 12 2020 at 20:55)</a>:</h4>
<div class="codehilite"><pre><span></span><code><span class="err">$</span> <span class="n">pip3</span> <span class="n">install</span> <span class="bp">-</span><span class="n">U</span> <span class="n">cryptography</span>
<span class="n">Collecting</span> <span class="n">cryptography</span>
  <span class="n">Using</span> <span class="n">cached</span> <span class="n">https</span><span class="o">:</span><span class="bp">//</span><span class="n">files</span><span class="bp">.</span><span class="n">pythonhosted</span><span class="bp">.</span><span class="n">org</span><span class="bp">/</span><span class="n">packages</span><span class="bp">/</span><span class="mi">58</span><span class="bp">/</span><span class="mi">95</span><span class="bp">/</span><span class="n">f1282ca55649b60afcf617e1e2ca384a2a3e7a5cf91f724cf83c8fbe76a1</span><span class="bp">/</span><span class="n">cryptography</span><span class="bp">-</span><span class="mi">2</span><span class="bp">.</span><span class="mi">9</span><span class="bp">.</span><span class="mi">2</span><span class="bp">-</span><span class="n">cp35</span><span class="bp">-</span><span class="n">abi3</span><span class="bp">-</span><span class="n">manylinux1_x86_64</span><span class="bp">.</span><span class="n">whl</span>
<span class="n">Collecting</span> <span class="n">six</span><span class="bp">&gt;=</span><span class="mi">1</span><span class="bp">.</span><span class="mi">4</span><span class="bp">.</span><span class="mi">1</span> <span class="o">(</span><span class="k">from</span> <span class="n">cryptography</span><span class="o">)</span>
  <span class="n">Using</span> <span class="n">cached</span> <span class="n">https</span><span class="o">:</span><span class="bp">//</span><span class="n">files</span><span class="bp">.</span><span class="n">pythonhosted</span><span class="bp">.</span><span class="n">org</span><span class="bp">/</span><span class="n">packages</span><span class="bp">/</span><span class="n">ee</span><span class="bp">/</span><span class="n">ff</span><span class="bp">/</span><span class="mi">48</span><span class="n">bde5c0f013094d729fe4b0316ba2a24774b3ff1c52d924a8a4cb04078a</span><span class="bp">/</span><span class="n">six</span><span class="bp">-</span><span class="mi">1</span><span class="bp">.</span><span class="mi">15</span><span class="bp">.</span><span class="mi">0</span><span class="bp">-</span><span class="n">py2</span><span class="bp">.</span><span class="n">py3</span><span class="bp">-</span><span class="n">none</span><span class="bp">-</span><span class="n">any</span><span class="bp">.</span><span class="n">whl</span>
<span class="n">Collecting</span> <span class="n">cffi</span><span class="bp">!=</span><span class="mi">1</span><span class="bp">.</span><span class="mi">11</span><span class="bp">.</span><span class="mi">3</span><span class="o">,</span><span class="bp">&gt;=</span><span class="mi">1</span><span class="bp">.</span><span class="mi">8</span> <span class="o">(</span><span class="k">from</span> <span class="n">cryptography</span><span class="o">)</span>
  <span class="n">Using</span> <span class="n">cached</span> <span class="n">https</span><span class="o">:</span><span class="bp">//</span><span class="n">files</span><span class="bp">.</span><span class="n">pythonhosted</span><span class="bp">.</span><span class="n">org</span><span class="bp">/</span><span class="n">packages</span><span class="bp">/</span><span class="n">f1</span><span class="bp">/</span><span class="n">c7</span><span class="bp">/</span><span class="mi">72</span><span class="n">abda280893609e1ddfff90f8064568bd8bcb2c1770a9d5bb5edb2d1fea</span><span class="bp">/</span><span class="n">cffi</span><span class="bp">-</span><span class="mi">1</span><span class="bp">.</span><span class="mi">14</span><span class="bp">.</span><span class="mi">0</span><span class="bp">-</span><span class="n">cp36</span><span class="bp">-</span><span class="n">cp36m</span><span class="bp">-</span><span class="n">manylinux1_x86_64</span><span class="bp">.</span><span class="n">whl</span>
<span class="n">Collecting</span> <span class="n">pycparser</span> <span class="o">(</span><span class="k">from</span> <span class="n">cffi</span><span class="bp">!=</span><span class="mi">1</span><span class="bp">.</span><span class="mi">11</span><span class="bp">.</span><span class="mi">3</span><span class="o">,</span><span class="bp">&gt;=</span><span class="mi">1</span><span class="bp">.</span><span class="mi">8</span><span class="bp">-&gt;</span><span class="n">cryptography</span><span class="o">)</span>
  <span class="n">Using</span> <span class="n">cached</span> <span class="n">https</span><span class="o">:</span><span class="bp">//</span><span class="n">files</span><span class="bp">.</span><span class="n">pythonhosted</span><span class="bp">.</span><span class="n">org</span><span class="bp">/</span><span class="n">packages</span><span class="bp">/</span><span class="n">ae</span><span class="bp">/</span><span class="n">e7</span><span class="bp">/</span><span class="n">d9c3a176ca4b02024debf82342dab36efadfc5776f9c8db077e8f6e71821</span><span class="bp">/</span><span class="n">pycparser</span><span class="bp">-</span><span class="mi">2</span><span class="bp">.</span><span class="mi">20</span><span class="bp">-</span><span class="n">py2</span><span class="bp">.</span><span class="n">py3</span><span class="bp">-</span><span class="n">none</span><span class="bp">-</span><span class="n">any</span><span class="bp">.</span><span class="n">whl</span>
<span class="n">Installing</span> <span class="n">collected</span> <span class="n">packages</span><span class="o">:</span> <span class="n">six</span><span class="o">,</span> <span class="n">pycparser</span><span class="o">,</span> <span class="n">cffi</span><span class="o">,</span> <span class="n">cryptography</span>
<span class="n">Successfully</span> <span class="n">installed</span> <span class="n">cffi</span><span class="bp">-</span><span class="mi">1</span><span class="bp">.</span><span class="mi">14</span><span class="bp">.</span><span class="mi">0</span> <span class="n">cryptography</span><span class="bp">-</span><span class="mi">2</span><span class="bp">.</span><span class="mi">9</span><span class="bp">.</span><span class="mi">2</span> <span class="n">pycparser</span><span class="bp">-</span><span class="mi">2</span><span class="bp">.</span><span class="mi">20</span> <span class="n">six</span><span class="bp">-</span><span class="mi">1</span><span class="bp">.</span><span class="mi">15</span><span class="bp">.</span><span class="mi">0</span>
<span class="n">Segmentation</span> <span class="n">fault</span> <span class="o">(</span><span class="n">core</span> <span class="n">dumped</span><span class="o">)</span>
<span class="n">buzzard</span><span class="bp">@</span><span class="n">bob</span><span class="o">:</span><span class="bp">~/</span><span class="n">Downloads</span><span class="err">$</span>
</code></pre></div>



<a name="203660687"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/leanproject%20hooks/near/203660687" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/leanproject.20hooks.html#203660687">(Jul 12 2020 at 20:56)</a>:</h4>
<p><a href="https://stackoverflow.com/questions/26494324/python-pip-segfault-when-installing-package">https://stackoverflow.com/questions/26494324/python-pip-segfault-when-installing-package</a> ?</p>



<a name="203660700"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/leanproject%20hooks/near/203660700" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/leanproject.20hooks.html#203660700">(Jul 12 2020 at 20:57)</a>:</h4>
<p>That's python2, dunno if it's relevant. (edit - the answer is from 2019 so could be python3)</p>



<a name="203660810"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/leanproject%20hooks/near/203660810" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/leanproject.20hooks.html#203660810">(Jul 12 2020 at 20:59)</a>:</h4>
<p>It's got me over the line. Thanks. I've got <code>leanproject 0.0.9</code> installed :D</p>



<a name="203660941"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/leanproject%20hooks/near/203660941" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/leanproject.20hooks.html#203660941">(Jul 12 2020 at 21:02)</a>:</h4>
<p>Could you share any insight about how you solved the issue?</p>



<a name="203660948"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/leanproject%20hooks/near/203660948" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/leanproject.20hooks.html#203660948">(Jul 12 2020 at 21:02)</a>:</h4>
<p>I upgraded pip3</p>



<a name="203660966"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/leanproject%20hooks/near/203660966" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/leanproject.20hooks.html#203660966">(Jul 12 2020 at 21:03)</a>:</h4>
<p>I tried the problematic mathlibtools issue I reported, and it now works fine</p>



<a name="203661015"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/leanproject%20hooks/near/203661015" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/leanproject.20hooks.html#203661015">(Jul 12 2020 at 21:04)</a>:</h4>
<p>I can't guarantee that the issue won't show up again though</p>



<a name="203661035"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/leanproject%20hooks/near/203661035" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/leanproject.20hooks.html#203661035">(Jul 12 2020 at 21:05)</a>:</h4>
<p>I'm not sure when <code>finset.lean</code> is being deleted and replaced by <code>finset/basic.lean</code> but if there's a point when they're both there then <code>import data.finset</code> will fail</p>



<a name="203661041"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/leanproject%20hooks/near/203661041" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/leanproject.20hooks.html#203661041">(Jul 12 2020 at 21:05)</a>:</h4>
<p>Let's not worry about it now though, we have lftcm to worry about and you might well have fixed it. Thanks!</p>



<a name="203661175"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/leanproject%20hooks/near/203661175" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/leanproject.20hooks.html#203661175">(Jul 12 2020 at 21:08)</a>:</h4>
<p>Oh nice, "I upgraded pip3" is a very reproducible fix.</p>



<a name="204337237"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/leanproject%20hooks/near/204337237" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/leanproject.20hooks.html#204337237">(Jul 19 2020 at 07:26)</a>:</h4>
<p><span class="user-mention" data-user-id="110031">@Patrick Massot</span> The edits to the <code>post-checkout</code> hook that <span class="user-mention" data-user-id="110087">@Scott Morrison</span> made in <a href="https://github.com/leanprover-community/mathlib-tools/issues/71">mathlib-tools#71</a> aren't included in 0.0.9 for some reason. You can confirm this by downloading and untarring <code>mathlibtools-0.0.9.tar.gz</code> <a href="https://pypi.org/project/mathlibtools/#files">on pypi</a>, and noticing that the <code>post-checkout</code> script there doesn't match <a href="https://github.com/leanprover-community/mathlib-tools/blob/bf53aa4268452fbfbfd48e519ef847cae7e0053c/mathlibtools/post-checkout">the one currently in the <code>mathlib-tools</code> repo</a>.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>