---
layout: archive
title: Zulip Chat Archive
permalink: /stream/113488-general/topic/errors.20in.20product.20of.20categories.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/113488-general/index.html">general</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/errors.20in.20product.20of.20categories.html">errors in product of categories</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="322384682"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/errors%20in%20product%20of%20categories/near/322384682" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kind Bubble <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/errors.20in.20product.20of.20categories.html#322384682">(Jan 19 2023 at 21:40)</a>:</h4>
<p>Can anyone help me fix these errors in Lean 4? I'm trying to construct the product of categories.</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">Init.Data.ToString.Basic</span>

<span class="kd">universe</span> <span class="n">u</span>
<span class="kd">universe</span> <span class="n">v</span>

<span class="kd">structure</span> <span class="n">Cat</span> <span class="n">where</span>
  <span class="n">Obj</span> <span class="o">:</span>    <span class="kt">Type</span> <span class="n">u</span>
  <span class="n">Hom</span> <span class="o">:</span>  <span class="bp">‚àÄ</span><span class="o">(</span><span class="n">_</span><span class="o">:</span><span class="n">Obj</span><span class="o">),</span><span class="bp">‚àÄ</span><span class="o">(</span><span class="n">_</span><span class="o">:</span><span class="n">Obj</span><span class="o">),</span> <span class="kt">Type</span> <span class="n">v</span>
  <span class="n">Idn</span> <span class="o">:</span>     <span class="bp">‚àÄ</span><span class="o">(</span><span class="n">X</span><span class="o">:</span><span class="n">Obj</span><span class="o">),</span><span class="n">Hom</span> <span class="n">X</span> <span class="n">X</span>
  <span class="n">Cmp</span> <span class="o">:</span>  <span class="bp">‚àÄ</span><span class="o">(</span><span class="n">X</span><span class="o">:</span><span class="n">Obj</span><span class="o">),</span><span class="bp">‚àÄ</span><span class="o">(</span><span class="n">Y</span><span class="o">:</span><span class="n">Obj</span><span class="o">),</span><span class="bp">‚àÄ</span><span class="o">(</span><span class="n">Z</span><span class="o">:</span><span class="n">Obj</span><span class="o">),</span><span class="bp">‚àÄ</span><span class="o">(</span><span class="n">_</span><span class="o">:</span><span class="n">Hom</span> <span class="n">X</span> <span class="n">Y</span><span class="o">),</span><span class="bp">‚àÄ</span><span class="o">(</span><span class="n">_</span><span class="o">:</span><span class="n">Hom</span> <span class="n">Y</span> <span class="n">Z</span><span class="o">),</span><span class="n">Hom</span> <span class="n">X</span> <span class="n">Z</span>
  <span class="n">Id1</span> <span class="o">:</span>     <span class="bp">‚àÄ</span><span class="o">(</span><span class="n">X</span><span class="o">:</span><span class="n">Obj</span><span class="o">),</span><span class="bp">‚àÄ</span><span class="o">(</span><span class="n">Y</span><span class="o">:</span><span class="n">Obj</span><span class="o">),</span><span class="bp">‚àÄ</span><span class="o">(</span><span class="n">f</span><span class="o">:</span><span class="n">Hom</span> <span class="n">X</span> <span class="n">Y</span><span class="o">),(</span><span class="n">Cmp</span> <span class="n">X</span> <span class="n">Y</span> <span class="n">Y</span><span class="o">)</span> <span class="n">f</span> <span class="o">(</span><span class="n">Idn</span> <span class="n">Y</span><span class="o">)</span> <span class="bp">=</span> <span class="n">f</span>
  <span class="n">Id2</span> <span class="o">:</span>     <span class="bp">‚àÄ</span><span class="o">(</span><span class="n">X</span><span class="o">:</span><span class="n">Obj</span><span class="o">),</span><span class="bp">‚àÄ</span><span class="o">(</span><span class="n">Y</span><span class="o">:</span><span class="n">Obj</span><span class="o">),</span><span class="bp">‚àÄ</span><span class="o">(</span><span class="n">f</span><span class="o">:</span><span class="n">Hom</span> <span class="n">X</span> <span class="n">Y</span><span class="o">),(</span><span class="n">Cmp</span> <span class="n">X</span> <span class="n">X</span> <span class="n">Y</span><span class="o">)</span> <span class="o">(</span><span class="n">Idn</span> <span class="n">X</span><span class="o">)</span> <span class="n">f</span> <span class="bp">=</span> <span class="n">f</span>
  <span class="n">Ass</span> <span class="o">:</span>    <span class="bp">‚àÄ</span><span class="o">(</span><span class="n">W</span><span class="o">:</span><span class="n">Obj</span><span class="o">),</span><span class="bp">‚àÄ</span><span class="o">(</span><span class="n">X</span><span class="o">:</span><span class="n">Obj</span><span class="o">),</span><span class="bp">‚àÄ</span><span class="o">(</span><span class="n">Y</span><span class="o">:</span><span class="n">Obj</span><span class="o">),</span><span class="bp">‚àÄ</span><span class="o">(</span><span class="n">Z</span><span class="o">:</span><span class="n">Obj</span><span class="o">),</span><span class="bp">‚àÄ</span><span class="o">(</span><span class="n">f</span><span class="o">:</span><span class="n">Hom</span> <span class="n">W</span> <span class="n">X</span><span class="o">),</span><span class="bp">‚àÄ</span><span class="o">(</span><span class="n">g</span><span class="o">:</span><span class="n">Hom</span> <span class="n">X</span> <span class="n">Y</span><span class="o">),</span><span class="bp">‚àÄ</span><span class="o">(</span><span class="n">h</span><span class="o">:</span><span class="n">Hom</span> <span class="n">Y</span> <span class="n">Z</span><span class="o">),(</span><span class="n">Cmp</span> <span class="n">W</span> <span class="n">X</span> <span class="n">Z</span><span class="o">)</span> <span class="n">f</span> <span class="o">(</span><span class="n">Cmp</span> <span class="n">X</span> <span class="n">Y</span> <span class="n">Z</span> <span class="n">g</span> <span class="n">h</span><span class="o">)</span> <span class="bp">=</span> <span class="n">Cmp</span> <span class="n">W</span> <span class="n">Y</span> <span class="n">Z</span> <span class="o">(</span><span class="n">Cmp</span> <span class="n">W</span> <span class="n">X</span> <span class="n">Y</span> <span class="n">f</span> <span class="n">g</span><span class="o">)</span> <span class="n">h</span>

<span class="kd">def</span> <span class="n">Cmp</span> <span class="o">{</span><span class="n">C</span> <span class="o">:</span> <span class="n">Cat</span><span class="o">}</span> <span class="o">{</span><span class="n">X</span> <span class="o">:</span> <span class="n">C.Obj</span><span class="o">}</span> <span class="o">{</span><span class="n">Y</span> <span class="o">:</span> <span class="n">C.Obj</span><span class="o">}</span> <span class="o">{</span><span class="n">Z</span> <span class="o">:</span> <span class="n">C.Obj</span><span class="o">}</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">C.Hom</span> <span class="n">X</span> <span class="n">Y</span><span class="o">)</span> <span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="n">C.Hom</span> <span class="n">Y</span> <span class="n">Z</span><span class="o">)</span> <span class="o">:=</span> <span class="n">C.Cmp</span> <span class="n">X</span> <span class="n">Y</span> <span class="n">Z</span> <span class="n">f</span> <span class="n">g</span>
<span class="kd">notation</span> <span class="n">g</span> <span class="s2">"‚àò"</span> <span class="n">f</span> <span class="bp">=&gt;</span> <span class="n">Cmp</span> <span class="n">f</span> <span class="n">g</span>

<span class="kd">def</span> <span class="n">Hom</span> <span class="o">{</span><span class="n">C</span> <span class="o">:</span> <span class="n">Cat</span><span class="o">}</span> <span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="n">C.Obj</span><span class="o">)</span> <span class="o">(</span><span class="n">Y</span> <span class="o">:</span> <span class="n">C.Obj</span><span class="o">)</span> <span class="o">:=</span> <span class="n">C.Hom</span> <span class="n">X</span> <span class="n">Y</span>
<span class="kd">notation</span> <span class="n">X</span> <span class="s2">"‚ûî"</span> <span class="n">Y</span> <span class="bp">=&gt;</span> <span class="n">Hom</span> <span class="n">X</span> <span class="n">Y</span>

<span class="kd">def</span> <span class="n">Idn</span> <span class="o">{</span><span class="n">C</span> <span class="o">:</span> <span class="n">Cat</span><span class="o">}</span> <span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="n">C.Obj</span><span class="o">)</span> <span class="o">:=</span> <span class="n">C.Idn</span> <span class="n">X</span>
<span class="kd">notation</span> <span class="s2">"ùüô"</span> <span class="n">X</span> <span class="bp">=&gt;</span> <span class="n">Idn</span> <span class="n">X</span>

<span class="kd">structure</span> <span class="n">Fun</span> <span class="o">(</span><span class="n">C</span> <span class="o">:</span> <span class="n">Cat</span><span class="o">)</span> <span class="o">(</span><span class="n">D</span> <span class="o">:</span> <span class="n">Cat</span><span class="o">)</span> <span class="n">where</span>
   <span class="n">Obj</span> <span class="o">:</span>     <span class="bp">‚àÄ</span><span class="o">(</span><span class="n">_</span> <span class="o">:</span> <span class="n">C.Obj</span><span class="o">),</span><span class="n">D.Obj</span>
   <span class="n">Mor</span> <span class="o">:</span>    <span class="bp">‚àÄ</span><span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="n">C.Obj</span><span class="o">),</span><span class="bp">‚àÄ</span><span class="o">(</span><span class="n">Y</span> <span class="o">:</span> <span class="n">C.Obj</span><span class="o">),</span><span class="bp">‚àÄ</span><span class="o">(</span><span class="n">_</span> <span class="o">:</span> <span class="n">C.Hom</span> <span class="n">X</span> <span class="n">Y</span><span class="o">),</span><span class="n">D.Hom</span> <span class="o">(</span><span class="n">Obj</span> <span class="n">X</span><span class="o">)</span> <span class="o">(</span><span class="n">Obj</span> <span class="n">Y</span><span class="o">)</span>
   <span class="n">Idn</span> <span class="o">:</span>     <span class="bp">‚àÄ</span><span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="n">C.Obj</span><span class="o">),</span><span class="n">Mor</span> <span class="n">X</span> <span class="n">X</span> <span class="o">(</span><span class="n">C.Idn</span> <span class="n">X</span><span class="o">)</span> <span class="bp">=</span> <span class="n">D.Idn</span> <span class="o">(</span><span class="n">Obj</span> <span class="n">X</span><span class="o">)</span>
   <span class="n">Cmp</span> <span class="o">:</span>  <span class="bp">‚àÄ</span><span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="n">C.Obj</span><span class="o">),</span><span class="bp">‚àÄ</span><span class="o">(</span><span class="n">Y</span> <span class="o">:</span> <span class="n">C.Obj</span><span class="o">),</span><span class="bp">‚àÄ</span><span class="o">(</span><span class="n">Z</span> <span class="o">:</span> <span class="n">C.Obj</span><span class="o">),</span><span class="bp">‚àÄ</span><span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">C.Hom</span> <span class="n">X</span> <span class="n">Y</span><span class="o">),</span><span class="bp">‚àÄ</span><span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="n">C.Hom</span> <span class="n">Y</span> <span class="n">Z</span><span class="o">),</span><span class="n">D.Cmp</span> <span class="o">(</span><span class="n">Obj</span> <span class="n">X</span><span class="o">)</span> <span class="o">(</span><span class="n">Obj</span> <span class="n">Y</span><span class="o">)</span> <span class="o">(</span><span class="n">Obj</span> <span class="n">Z</span><span class="o">)</span> <span class="o">(</span><span class="n">Mor</span> <span class="n">X</span> <span class="n">Y</span> <span class="n">f</span><span class="o">)</span> <span class="o">(</span><span class="n">Mor</span> <span class="n">Y</span> <span class="n">Z</span> <span class="n">g</span><span class="o">)</span> <span class="bp">=</span> <span class="n">Mor</span> <span class="n">X</span> <span class="n">Z</span> <span class="o">(</span><span class="n">C.Cmp</span> <span class="n">X</span> <span class="n">Y</span> <span class="n">Z</span> <span class="o">(</span><span class="n">f</span><span class="o">)</span> <span class="o">(</span><span class="n">g</span><span class="o">))</span>

<span class="kd">def</span> <span class="n">CatIdn</span> <span class="o">(</span><span class="n">C</span> <span class="o">:</span> <span class="n">Cat</span><span class="o">)</span> <span class="o">:</span> <span class="n">Fun</span> <span class="n">C</span> <span class="n">C</span> <span class="o">:=</span>
<span class="o">{</span><span class="n">Obj</span> <span class="o">:=</span> <span class="k">fun</span><span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="n">C.Obj</span><span class="o">)</span><span class="bp">=&gt;</span><span class="n">X</span><span class="o">,</span> <span class="n">Mor</span> <span class="o">:=</span> <span class="k">fun</span><span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="n">C.Obj</span><span class="o">)</span><span class="bp">=&gt;</span><span class="k">fun</span><span class="o">(</span><span class="n">Y</span> <span class="o">:</span> <span class="n">C.Obj</span><span class="o">)</span><span class="bp">=&gt;</span><span class="k">fun</span><span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">C.Hom</span> <span class="n">X</span> <span class="n">Y</span><span class="o">)</span><span class="bp">=&gt;</span><span class="n">f</span><span class="o">,</span> <span class="n">Idn</span> <span class="o">:=</span> <span class="k">fun</span><span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="n">C.Obj</span><span class="o">)</span><span class="bp">=&gt;</span><span class="n">Eq.refl</span> <span class="o">(</span><span class="n">C.Idn</span> <span class="n">X</span><span class="o">),</span><span class="n">Cmp</span> <span class="o">:=</span> <span class="k">fun</span><span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="n">C.Obj</span><span class="o">)</span><span class="bp">=&gt;</span><span class="k">fun</span><span class="o">(</span><span class="n">Y</span> <span class="o">:</span> <span class="n">C.Obj</span><span class="o">)</span><span class="bp">=&gt;</span><span class="k">fun</span><span class="o">(</span><span class="n">Z</span> <span class="o">:</span> <span class="n">C.Obj</span><span class="o">)</span><span class="bp">=&gt;</span><span class="k">fun</span><span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">C.Hom</span> <span class="n">X</span> <span class="n">Y</span><span class="o">)</span><span class="bp">=&gt;</span><span class="k">fun</span><span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="n">C.Hom</span> <span class="n">Y</span> <span class="n">Z</span><span class="o">)</span><span class="bp">=&gt;</span><span class="n">Eq.refl</span> <span class="o">(</span><span class="n">C.Cmp</span> <span class="n">X</span> <span class="n">Y</span> <span class="n">Z</span> <span class="n">f</span> <span class="n">g</span><span class="o">)}</span>

<span class="kd">def</span> <span class="n">CatCmp</span> <span class="o">(</span><span class="n">C</span> <span class="o">:</span> <span class="n">Cat</span><span class="o">)</span> <span class="o">(</span><span class="n">D</span> <span class="o">:</span> <span class="n">Cat</span><span class="o">)</span> <span class="o">(</span><span class="n">E</span> <span class="o">:</span> <span class="n">Cat</span><span class="o">)</span> <span class="o">(</span><span class="n">F</span> <span class="o">:</span> <span class="n">Fun</span> <span class="n">C</span> <span class="n">D</span><span class="o">)</span> <span class="o">(</span><span class="n">G</span> <span class="o">:</span> <span class="n">Fun</span> <span class="n">D</span> <span class="n">E</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">Fun</span> <span class="n">C</span> <span class="n">E</span><span class="o">):=</span>
<span class="o">{</span><span class="n">Obj</span> <span class="o">:=</span> <span class="k">fun</span><span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="n">C.Obj</span><span class="o">)</span><span class="bp">=&gt;</span><span class="o">(</span><span class="n">G.Obj</span> <span class="o">(</span><span class="n">F.Obj</span> <span class="n">X</span><span class="o">)),</span><span class="n">Mor</span> <span class="o">:=</span> <span class="k">fun</span><span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="n">C.Obj</span><span class="o">)</span><span class="bp">=&gt;</span><span class="k">fun</span><span class="o">(</span><span class="n">Y</span> <span class="o">:</span> <span class="n">C.Obj</span><span class="o">)</span><span class="bp">=&gt;</span><span class="k">fun</span><span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">C.Hom</span> <span class="n">X</span> <span class="n">Y</span><span class="o">)</span><span class="bp">=&gt;</span><span class="o">(</span><span class="n">G.Mor</span><span class="o">)</span> <span class="o">(</span><span class="n">F.Obj</span> <span class="n">X</span><span class="o">)</span> <span class="o">(</span><span class="n">F.Obj</span> <span class="n">Y</span><span class="o">)</span> <span class="o">((</span><span class="n">F.Mor</span><span class="o">)</span> <span class="n">X</span> <span class="n">Y</span> <span class="n">f</span><span class="o">),</span><span class="n">Idn</span> <span class="o">:=</span> <span class="k">fun</span><span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="n">C.Obj</span><span class="o">)</span><span class="bp">=&gt;</span> <span class="o">((</span><span class="n">Eq.trans</span><span class="o">)</span> <span class="o">(</span><span class="n">congrArg</span> <span class="o">(</span><span class="n">G.Mor</span> <span class="o">(</span><span class="n">F.Obj</span> <span class="n">X</span><span class="o">)</span> <span class="o">(</span><span class="n">F.Obj</span> <span class="n">X</span><span class="o">))</span> <span class="o">(</span><span class="n">F.Idn</span> <span class="n">X</span><span class="o">)</span> <span class="o">)</span> <span class="o">(</span><span class="n">G.Idn</span> <span class="o">(</span><span class="n">F.Obj</span> <span class="n">X</span><span class="o">))),</span><span class="n">Cmp</span> <span class="o">:=</span> <span class="k">fun</span><span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="n">C.Obj</span><span class="o">)</span><span class="bp">=&gt;</span><span class="k">fun</span><span class="o">(</span><span class="n">Y</span> <span class="o">:</span> <span class="n">C.Obj</span><span class="o">)</span><span class="bp">=&gt;</span><span class="k">fun</span><span class="o">(</span><span class="n">Z</span> <span class="o">:</span> <span class="n">C.Obj</span><span class="o">)</span><span class="bp">=&gt;</span><span class="k">fun</span><span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">C.Hom</span> <span class="n">X</span> <span class="n">Y</span><span class="o">)</span><span class="bp">=&gt;</span><span class="k">fun</span><span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="n">C.Hom</span> <span class="n">Y</span> <span class="n">Z</span><span class="o">)</span><span class="bp">=&gt;</span><span class="o">((</span><span class="n">Eq.trans</span><span class="o">)</span> <span class="o">(</span><span class="n">G.Cmp</span> <span class="o">(</span><span class="n">F.Obj</span> <span class="n">X</span><span class="o">)</span> <span class="o">(</span><span class="n">F.Obj</span> <span class="n">Y</span><span class="o">)</span> <span class="o">(</span><span class="n">F.Obj</span> <span class="n">Z</span><span class="o">)</span> <span class="o">(</span><span class="n">F.Mor</span> <span class="n">X</span> <span class="n">Y</span> <span class="n">f</span><span class="o">)</span> <span class="o">(</span><span class="n">F.Mor</span> <span class="n">Y</span> <span class="n">Z</span> <span class="n">g</span><span class="o">))</span> <span class="o">(</span><span class="n">congrArg</span> <span class="o">(</span><span class="n">G.Mor</span> <span class="o">(</span><span class="n">F.Obj</span> <span class="n">X</span><span class="o">)</span> <span class="o">(</span><span class="n">F.Obj</span> <span class="n">Z</span><span class="o">))</span> <span class="o">(</span><span class="n">F.Cmp</span> <span class="n">X</span> <span class="n">Y</span> <span class="n">Z</span> <span class="n">f</span> <span class="n">g</span><span class="o">)))}</span>

<span class="kd">def</span> <span class="n">CatId1</span> <span class="o">(</span><span class="n">C</span> <span class="o">:</span> <span class="n">Cat</span><span class="o">)</span> <span class="o">(</span><span class="n">D</span> <span class="o">:</span> <span class="n">Cat</span><span class="o">)</span> <span class="o">(</span><span class="n">F</span> <span class="o">:</span> <span class="n">Fun</span> <span class="n">C</span> <span class="n">D</span><span class="o">)</span> <span class="o">:</span> <span class="o">((</span><span class="n">CatCmp</span> <span class="n">C</span> <span class="n">D</span> <span class="n">D</span><span class="o">)</span> <span class="n">F</span> <span class="o">(</span><span class="n">CatIdn</span> <span class="n">D</span><span class="o">)</span> <span class="bp">=</span> <span class="n">F</span><span class="o">)</span> <span class="o">:=</span> <span class="n">Eq.refl</span> <span class="n">F</span>

<span class="kd">def</span> <span class="n">CatId2</span> <span class="o">(</span><span class="n">C</span> <span class="o">:</span> <span class="n">Cat</span><span class="o">)</span> <span class="o">(</span><span class="n">D</span> <span class="o">:</span> <span class="n">Cat</span><span class="o">)</span> <span class="o">(</span><span class="n">F</span> <span class="o">:</span> <span class="n">Fun</span> <span class="n">C</span> <span class="n">D</span><span class="o">)</span> <span class="o">:</span> <span class="o">((</span><span class="n">CatCmp</span> <span class="n">C</span> <span class="n">C</span> <span class="n">D</span><span class="o">)</span> <span class="o">(</span><span class="n">CatIdn</span> <span class="n">C</span><span class="o">)</span> <span class="n">F</span> <span class="bp">=</span> <span class="n">F</span><span class="o">)</span> <span class="o">:=</span> <span class="n">Eq.refl</span> <span class="n">F</span>

<span class="kd">def</span> <span class="n">CatAss</span> <span class="o">(</span><span class="n">B</span> <span class="o">:</span> <span class="n">Cat</span><span class="o">)</span> <span class="o">(</span><span class="n">C</span> <span class="o">:</span> <span class="n">Cat</span><span class="o">)</span> <span class="o">(</span><span class="n">D</span> <span class="o">:</span> <span class="n">Cat</span><span class="o">)</span> <span class="o">(</span><span class="n">E</span> <span class="o">:</span> <span class="n">Cat</span><span class="o">)</span> <span class="o">(</span><span class="n">F</span> <span class="o">:</span> <span class="n">Fun</span> <span class="n">B</span> <span class="n">C</span><span class="o">)</span> <span class="o">(</span><span class="n">G</span> <span class="o">:</span> <span class="n">Fun</span> <span class="n">C</span> <span class="n">D</span><span class="o">)</span> <span class="o">(</span><span class="n">H</span> <span class="o">:</span> <span class="n">Fun</span> <span class="n">D</span> <span class="n">E</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">CatCmp</span> <span class="n">B</span> <span class="n">C</span> <span class="n">E</span> <span class="n">F</span> <span class="o">(</span><span class="n">CatCmp</span> <span class="n">C</span> <span class="n">D</span> <span class="n">E</span> <span class="n">G</span> <span class="n">H</span><span class="o">)</span> <span class="bp">=</span> <span class="n">CatCmp</span> <span class="n">B</span> <span class="n">D</span> <span class="n">E</span> <span class="o">(</span><span class="n">CatCmp</span> <span class="n">B</span> <span class="n">C</span> <span class="n">D</span> <span class="n">F</span> <span class="n">G</span><span class="o">)</span> <span class="n">H</span><span class="o">)</span> <span class="o">:=</span> <span class="n">Eq.refl</span> <span class="o">(</span><span class="n">CatCmp</span> <span class="n">B</span> <span class="n">C</span> <span class="n">E</span> <span class="n">F</span> <span class="o">(</span><span class="n">CatCmp</span> <span class="n">C</span> <span class="n">D</span> <span class="n">E</span> <span class="n">G</span> <span class="n">H</span><span class="o">))</span>

<span class="kd">def</span> <span class="n">Cats</span> <span class="o">:</span> <span class="n">Cat</span> <span class="o">:=</span> <span class="o">{</span><span class="n">Obj</span> <span class="o">:=</span> <span class="n">Cat</span><span class="o">,</span><span class="n">Hom</span> <span class="o">:=</span> <span class="n">Fun</span><span class="o">,</span><span class="n">Idn</span> <span class="o">:=</span> <span class="n">CatIdn</span><span class="o">,</span><span class="n">Cmp</span> <span class="o">:=</span> <span class="n">CatCmp</span><span class="o">,</span><span class="n">Id1</span> <span class="o">:=</span> <span class="n">CatId1</span><span class="o">,</span><span class="n">Id2</span> <span class="o">:=</span> <span class="n">CatId2</span><span class="o">,</span><span class="n">Ass</span> <span class="o">:=</span> <span class="n">CatAss</span><span class="o">}</span>

<span class="kd">def</span> <span class="n">CatPrd</span> <span class="o">(</span><span class="n">C</span> <span class="o">:</span> <span class="n">Cat</span><span class="o">)</span> <span class="o">(</span><span class="n">D</span> <span class="o">:</span> <span class="n">Cat</span><span class="o">)</span> <span class="o">:</span> <span class="n">Cat</span> <span class="o">:=</span> <span class="o">{</span><span class="n">Obj</span> <span class="o">:=</span> <span class="n">C.Obj</span> <span class="bp">√ó</span> <span class="n">D.Obj</span><span class="o">,</span> <span class="n">Hom</span> <span class="o">:=</span> <span class="k">fun</span><span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="n">C.Obj</span> <span class="bp">√ó</span> <span class="n">D.Obj</span><span class="o">)</span><span class="bp">=&gt;</span><span class="k">fun</span><span class="o">(</span><span class="n">Y</span> <span class="o">:</span> <span class="n">C.Obj</span> <span class="bp">√ó</span> <span class="n">D.Obj</span><span class="o">)</span><span class="bp">=&gt;</span><span class="o">((</span><span class="n">Hom</span> <span class="n">X.1</span> <span class="n">Y.1</span><span class="o">)</span> <span class="bp">√ó</span> <span class="o">(</span><span class="n">Hom</span> <span class="n">X.2</span> <span class="n">Y.2</span><span class="o">)),</span> <span class="n">Idn</span> <span class="o">:=</span> <span class="k">fun</span><span class="o">(</span><span class="n">P</span> <span class="o">:</span> <span class="n">C.Obj</span> <span class="bp">√ó</span> <span class="n">D.Obj</span><span class="o">)</span><span class="bp">=&gt;</span><span class="o">(</span><span class="n">C.Idn</span> <span class="n">P.1</span><span class="o">,</span> <span class="n">D.Idn</span> <span class="n">P.2</span><span class="o">),</span> <span class="n">Cmp</span> <span class="o">:=</span> <span class="k">fun</span><span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="n">C.Obj</span> <span class="bp">√ó</span> <span class="n">D.Obj</span><span class="o">)</span><span class="bp">=&gt;</span><span class="k">fun</span><span class="o">(</span><span class="n">Y</span> <span class="o">:</span> <span class="n">C.Obj</span> <span class="bp">√ó</span> <span class="n">D.Obj</span><span class="o">)</span><span class="bp">=&gt;</span><span class="k">fun</span><span class="o">(</span><span class="n">Z</span> <span class="o">:</span> <span class="n">C.Obj</span> <span class="bp">√ó</span> <span class="n">D.Obj</span><span class="o">)</span><span class="bp">=&gt;</span><span class="k">fun</span><span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="o">(</span><span class="n">Hom</span> <span class="n">X.1</span> <span class="n">Y.1</span><span class="o">)</span> <span class="bp">√ó</span> <span class="o">(</span><span class="n">Hom</span> <span class="n">X.2</span> <span class="n">Y.2</span><span class="o">))</span><span class="bp">=&gt;</span><span class="k">fun</span><span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="o">(</span><span class="n">Hom</span> <span class="n">Y.1</span> <span class="n">Z.1</span><span class="o">)</span> <span class="bp">√ó</span> <span class="o">(</span><span class="n">Hom</span> <span class="n">Y.2</span> <span class="n">Z.2</span><span class="o">))</span><span class="bp">=&gt;</span><span class="o">(</span><span class="n">C.Cmp</span> <span class="n">X.1</span> <span class="n">Y.1</span> <span class="n">Z.1</span> <span class="n">f.1</span> <span class="n">g.1</span><span class="o">,</span> <span class="n">D.Cmp</span> <span class="n">X.2</span> <span class="n">Y.2</span> <span class="n">Z.2</span> <span class="n">f.2</span> <span class="n">g.2</span><span class="o">),</span> <span class="n">Id1</span> <span class="o">:=</span> <span class="k">fun</span><span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="n">C.Obj</span> <span class="bp">√ó</span> <span class="n">D.Obj</span><span class="o">)</span><span class="bp">=&gt;</span><span class="k">fun</span><span class="o">(</span><span class="n">Y</span> <span class="o">:</span> <span class="n">C.Obj</span> <span class="bp">√ó</span> <span class="n">D.Obj</span><span class="o">)</span><span class="bp">=&gt;</span><span class="k">fun</span><span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="o">(</span><span class="n">C.Hom</span> <span class="n">X.1</span> <span class="n">Y.1</span><span class="o">)</span> <span class="bp">√ó</span> <span class="o">(</span><span class="n">D.Hom</span> <span class="n">X.2</span> <span class="n">Y.2</span><span class="o">))</span><span class="bp">=&gt;</span><span class="n">Eq.rec</span> <span class="o">(</span><span class="n">C.Id1</span> <span class="n">X.1</span> <span class="n">Y.1</span> <span class="n">f.1</span><span class="o">)</span> <span class="o">(</span><span class="n">D.Id1</span> <span class="n">X.2</span> <span class="n">Y.2</span> <span class="n">f.2</span><span class="o">),</span> <span class="n">Id2</span> <span class="o">:=</span> <span class="k">fun</span><span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="n">C.Obj</span> <span class="bp">√ó</span> <span class="n">D.Obj</span><span class="o">)</span><span class="bp">=&gt;</span><span class="k">fun</span><span class="o">(</span><span class="n">Y</span> <span class="o">:</span> <span class="n">C.Obj</span> <span class="bp">√ó</span> <span class="n">D.Obj</span><span class="o">)</span><span class="bp">=&gt;</span><span class="k">fun</span><span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="o">(</span><span class="n">Hom</span> <span class="n">X.1</span> <span class="n">Y.1</span><span class="o">)</span> <span class="bp">√ó</span> <span class="o">(</span><span class="n">Hom</span> <span class="n">X.2</span> <span class="n">Y.2</span><span class="o">))</span><span class="bp">=&gt;</span><span class="n">Eq.rec</span> <span class="o">(</span><span class="n">C.Id2</span> <span class="n">X.1</span> <span class="n">Y.1</span> <span class="n">f.1</span><span class="o">)</span> <span class="o">(</span><span class="n">D.Id2</span> <span class="n">X.2</span> <span class="n">Y.2</span> <span class="n">f.2</span><span class="o">),</span> <span class="n">Ass</span> <span class="o">:=</span> <span class="k">fun</span><span class="o">(</span><span class="n">W</span> <span class="o">:</span> <span class="n">C.Obj</span> <span class="bp">√ó</span> <span class="n">D.Obj</span><span class="o">)</span><span class="bp">=&gt;</span><span class="k">fun</span><span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="n">C.Obj</span> <span class="bp">√ó</span> <span class="n">D.Obj</span><span class="o">)</span><span class="bp">=&gt;</span><span class="k">fun</span><span class="o">(</span><span class="n">Y</span> <span class="o">:</span> <span class="n">C.Obj</span> <span class="bp">√ó</span> <span class="n">D.Obj</span><span class="o">)</span><span class="bp">=&gt;</span><span class="k">fun</span><span class="o">(</span><span class="n">Z</span> <span class="o">:</span> <span class="n">C.Obj</span> <span class="bp">√ó</span> <span class="n">D.Obj</span><span class="o">)</span><span class="bp">=&gt;</span><span class="k">fun</span><span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="o">(</span><span class="n">Hom</span> <span class="n">W.1</span> <span class="n">X.1</span><span class="o">)</span> <span class="bp">√ó</span> <span class="o">(</span><span class="n">Hom</span> <span class="n">W.2</span> <span class="n">X.2</span><span class="o">))</span><span class="bp">=&gt;</span><span class="k">fun</span><span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="o">(</span><span class="n">Hom</span> <span class="n">X.1</span> <span class="n">Y.1</span><span class="o">)</span> <span class="bp">√ó</span> <span class="o">(</span><span class="n">Hom</span> <span class="n">X.2</span> <span class="n">Y.2</span><span class="o">))</span><span class="bp">=&gt;</span><span class="k">fun</span><span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="o">(</span><span class="n">Hom</span> <span class="n">Y.1</span> <span class="n">Z.1</span><span class="o">)</span> <span class="bp">√ó</span> <span class="o">(</span><span class="n">Hom</span> <span class="n">Y.2</span> <span class="n">Z.2</span><span class="o">))</span><span class="bp">=&gt;</span><span class="n">Eq.rec</span> <span class="o">(</span><span class="n">C.Ass</span> <span class="n">W.1</span> <span class="n">X.1</span> <span class="n">Y.1</span> <span class="n">Z.1</span> <span class="n">f.1</span> <span class="n">g.1</span> <span class="n">h.1</span><span class="o">)</span> <span class="o">(</span><span class="n">D.Ass</span> <span class="n">W.2</span> <span class="n">X.2</span> <span class="n">Y.2</span> <span class="n">Z.2</span> <span class="n">f.2</span> <span class="n">g.2</span> <span class="n">h.2</span><span class="o">)}</span>
</code></pre></div>
<p>The last definition is what's giving me trouble where I define Id1 and Id2.</p>
<p>I get this:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">Main.lean</span><span class="o">:</span><span class="mi">39</span><span class="o">:</span><span class="mi">520</span><span class="o">:</span> <span class="n">error</span><span class="o">:</span> <span class="n">failed</span> <span class="n">to</span> <span class="n">elaborate</span> <span class="n">eliminator</span><span class="o">,</span> <span class="n">invalid</span> <span class="n">motive</span>
  <span class="k">fun</span> <span class="n">x</span> <span class="n">x</span> <span class="bp">=&gt;</span>
    <span class="o">(</span><span class="k">fun</span> <span class="n">X</span> <span class="n">Y</span> <span class="n">Z</span> <span class="n">f</span> <span class="n">g</span> <span class="bp">=&gt;</span> <span class="o">(</span><span class="n">Cat.Cmp</span> <span class="n">C</span> <span class="n">X.fst</span> <span class="n">Y.fst</span> <span class="n">Z.fst</span> <span class="n">f.fst</span> <span class="n">g.fst</span><span class="o">,</span> <span class="n">Cat.Cmp</span> <span class="n">D</span> <span class="n">X.snd</span> <span class="n">Y.snd</span> <span class="n">Z.snd</span> <span class="n">f.snd</span> <span class="n">g.snd</span><span class="o">))</span> <span class="n">X</span> <span class="n">Y</span> <span class="n">Y</span> <span class="n">f</span>
        <span class="o">((</span><span class="k">fun</span> <span class="n">P</span> <span class="bp">=&gt;</span> <span class="o">(</span><span class="n">Cat.Idn</span> <span class="n">C</span> <span class="n">P.fst</span><span class="o">,</span> <span class="n">Cat.Idn</span> <span class="n">D</span> <span class="n">P.snd</span><span class="o">))</span> <span class="n">Y</span><span class="o">)</span> <span class="bp">=</span>
      <span class="n">f</span>
<span class="n">Main.lean</span><span class="o">:</span><span class="mi">39</span><span class="o">:</span><span class="mi">663</span><span class="o">:</span> <span class="n">error</span><span class="o">:</span> <span class="n">failed</span> <span class="n">to</span> <span class="n">elaborate</span> <span class="n">eliminator</span><span class="o">,</span> <span class="n">invalid</span> <span class="n">motive</span>
  <span class="k">fun</span> <span class="n">x</span> <span class="n">x</span> <span class="bp">=&gt;</span>
    <span class="o">(</span><span class="k">fun</span> <span class="n">X</span> <span class="n">Y</span> <span class="n">Z</span> <span class="n">f</span> <span class="n">g</span> <span class="bp">=&gt;</span> <span class="o">(</span><span class="n">Cat.Cmp</span> <span class="n">C</span> <span class="n">X.fst</span> <span class="n">Y.fst</span> <span class="n">Z.fst</span> <span class="n">f.fst</span> <span class="n">g.fst</span><span class="o">,</span> <span class="n">Cat.Cmp</span> <span class="n">D</span> <span class="n">X.snd</span> <span class="n">Y.snd</span> <span class="n">Z.snd</span> <span class="n">f.snd</span> <span class="n">g.snd</span><span class="o">))</span> <span class="n">X</span> <span class="n">X</span> <span class="n">Y</span>
        <span class="o">((</span><span class="k">fun</span> <span class="n">P</span> <span class="bp">=&gt;</span> <span class="o">(</span><span class="n">Cat.Idn</span> <span class="n">C</span> <span class="n">P.fst</span><span class="o">,</span> <span class="n">Cat.Idn</span> <span class="n">D</span> <span class="n">P.snd</span><span class="o">))</span> <span class="n">X</span><span class="o">)</span> <span class="n">f</span> <span class="bp">=</span>
      <span class="n">f</span>
<span class="bp">...</span>
</code></pre></div>



<a name="322625593"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/errors%20in%20product%20of%20categories/near/322625593" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kind Bubble <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/errors.20in.20product.20of.20categories.html#322625593">(Jan 20 2023 at 22:11)</a>:</h4>
<p><span class="user-mention silent" data-user-id="559197">Kind Bubble</span> <a href="#narrow/stream/113488-general/topic/errors.20in.20product.20of.20categories/near/322384682">said</a>:</p>
<blockquote>
<p>Can anyone help me fix these errors in Lean 4? I'm trying to construct the product of categories.</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">Init.Data.ToString.Basic</span>

<span class="kd">universe</span> <span class="n">u</span>
<span class="kd">universe</span> <span class="n">v</span>

<span class="kd">structure</span> <span class="n">Cat</span> <span class="n">where</span>
  <span class="n">Obj</span> <span class="o">:</span>    <span class="kt">Type</span> <span class="n">u</span>
  <span class="n">Hom</span> <span class="o">:</span>  <span class="bp">‚àÄ</span><span class="o">(</span><span class="n">_</span><span class="o">:</span><span class="n">Obj</span><span class="o">),</span><span class="bp">‚àÄ</span><span class="o">(</span><span class="n">_</span><span class="o">:</span><span class="n">Obj</span><span class="o">),</span> <span class="kt">Type</span> <span class="n">v</span>
  <span class="n">Idn</span> <span class="o">:</span>     <span class="bp">‚àÄ</span><span class="o">(</span><span class="n">X</span><span class="o">:</span><span class="n">Obj</span><span class="o">),</span><span class="n">Hom</span> <span class="n">X</span> <span class="n">X</span>
  <span class="n">Cmp</span> <span class="o">:</span>  <span class="bp">‚àÄ</span><span class="o">(</span><span class="n">X</span><span class="o">:</span><span class="n">Obj</span><span class="o">),</span><span class="bp">‚àÄ</span><span class="o">(</span><span class="n">Y</span><span class="o">:</span><span class="n">Obj</span><span class="o">),</span><span class="bp">‚àÄ</span><span class="o">(</span><span class="n">Z</span><span class="o">:</span><span class="n">Obj</span><span class="o">),</span><span class="bp">‚àÄ</span><span class="o">(</span><span class="n">_</span><span class="o">:</span><span class="n">Hom</span> <span class="n">X</span> <span class="n">Y</span><span class="o">),</span><span class="bp">‚àÄ</span><span class="o">(</span><span class="n">_</span><span class="o">:</span><span class="n">Hom</span> <span class="n">Y</span> <span class="n">Z</span><span class="o">),</span><span class="n">Hom</span> <span class="n">X</span> <span class="n">Z</span>
  <span class="n">Id1</span> <span class="o">:</span>     <span class="bp">‚àÄ</span><span class="o">(</span><span class="n">X</span><span class="o">:</span><span class="n">Obj</span><span class="o">),</span><span class="bp">‚àÄ</span><span class="o">(</span><span class="n">Y</span><span class="o">:</span><span class="n">Obj</span><span class="o">),</span><span class="bp">‚àÄ</span><span class="o">(</span><span class="n">f</span><span class="o">:</span><span class="n">Hom</span> <span class="n">X</span> <span class="n">Y</span><span class="o">),(</span><span class="n">Cmp</span> <span class="n">X</span> <span class="n">Y</span> <span class="n">Y</span><span class="o">)</span> <span class="n">f</span> <span class="o">(</span><span class="n">Idn</span> <span class="n">Y</span><span class="o">)</span> <span class="bp">=</span> <span class="n">f</span>
  <span class="n">Id2</span> <span class="o">:</span>     <span class="bp">‚àÄ</span><span class="o">(</span><span class="n">X</span><span class="o">:</span><span class="n">Obj</span><span class="o">),</span><span class="bp">‚àÄ</span><span class="o">(</span><span class="n">Y</span><span class="o">:</span><span class="n">Obj</span><span class="o">),</span><span class="bp">‚àÄ</span><span class="o">(</span><span class="n">f</span><span class="o">:</span><span class="n">Hom</span> <span class="n">X</span> <span class="n">Y</span><span class="o">),(</span><span class="n">Cmp</span> <span class="n">X</span> <span class="n">X</span> <span class="n">Y</span><span class="o">)</span> <span class="o">(</span><span class="n">Idn</span> <span class="n">X</span><span class="o">)</span> <span class="n">f</span> <span class="bp">=</span> <span class="n">f</span>
  <span class="n">Ass</span> <span class="o">:</span>    <span class="bp">‚àÄ</span><span class="o">(</span><span class="n">W</span><span class="o">:</span><span class="n">Obj</span><span class="o">),</span><span class="bp">‚àÄ</span><span class="o">(</span><span class="n">X</span><span class="o">:</span><span class="n">Obj</span><span class="o">),</span><span class="bp">‚àÄ</span><span class="o">(</span><span class="n">Y</span><span class="o">:</span><span class="n">Obj</span><span class="o">),</span><span class="bp">‚àÄ</span><span class="o">(</span><span class="n">Z</span><span class="o">:</span><span class="n">Obj</span><span class="o">),</span><span class="bp">‚àÄ</span><span class="o">(</span><span class="n">f</span><span class="o">:</span><span class="n">Hom</span> <span class="n">W</span> <span class="n">X</span><span class="o">),</span><span class="bp">‚àÄ</span><span class="o">(</span><span class="n">g</span><span class="o">:</span><span class="n">Hom</span> <span class="n">X</span> <span class="n">Y</span><span class="o">),</span><span class="bp">‚àÄ</span><span class="o">(</span><span class="n">h</span><span class="o">:</span><span class="n">Hom</span> <span class="n">Y</span> <span class="n">Z</span><span class="o">),(</span><span class="n">Cmp</span> <span class="n">W</span> <span class="n">X</span> <span class="n">Z</span><span class="o">)</span> <span class="n">f</span> <span class="o">(</span><span class="n">Cmp</span> <span class="n">X</span> <span class="n">Y</span> <span class="n">Z</span> <span class="n">g</span> <span class="n">h</span><span class="o">)</span> <span class="bp">=</span> <span class="n">Cmp</span> <span class="n">W</span> <span class="n">Y</span> <span class="n">Z</span> <span class="o">(</span><span class="n">Cmp</span> <span class="n">W</span> <span class="n">X</span> <span class="n">Y</span> <span class="n">f</span> <span class="n">g</span><span class="o">)</span> <span class="n">h</span>

<span class="kd">def</span> <span class="n">Cmp</span> <span class="o">{</span><span class="n">C</span> <span class="o">:</span> <span class="n">Cat</span><span class="o">}</span> <span class="o">{</span><span class="n">X</span> <span class="o">:</span> <span class="n">C.Obj</span><span class="o">}</span> <span class="o">{</span><span class="n">Y</span> <span class="o">:</span> <span class="n">C.Obj</span><span class="o">}</span> <span class="o">{</span><span class="n">Z</span> <span class="o">:</span> <span class="n">C.Obj</span><span class="o">}</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">C.Hom</span> <span class="n">X</span> <span class="n">Y</span><span class="o">)</span> <span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="n">C.Hom</span> <span class="n">Y</span> <span class="n">Z</span><span class="o">)</span> <span class="o">:=</span> <span class="n">C.Cmp</span> <span class="n">X</span> <span class="n">Y</span> <span class="n">Z</span> <span class="n">f</span> <span class="n">g</span>
<span class="kd">notation</span> <span class="n">g</span> <span class="s2">"‚àò"</span> <span class="n">f</span> <span class="bp">=&gt;</span> <span class="n">Cmp</span> <span class="n">f</span> <span class="n">g</span>

<span class="kd">def</span> <span class="n">Hom</span> <span class="o">{</span><span class="n">C</span> <span class="o">:</span> <span class="n">Cat</span><span class="o">}</span> <span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="n">C.Obj</span><span class="o">)</span> <span class="o">(</span><span class="n">Y</span> <span class="o">:</span> <span class="n">C.Obj</span><span class="o">)</span> <span class="o">:=</span> <span class="n">C.Hom</span> <span class="n">X</span> <span class="n">Y</span>
<span class="kd">notation</span> <span class="n">X</span> <span class="s2">"‚ûî"</span> <span class="n">Y</span> <span class="bp">=&gt;</span> <span class="n">Hom</span> <span class="n">X</span> <span class="n">Y</span>

<span class="kd">def</span> <span class="n">Idn</span> <span class="o">{</span><span class="n">C</span> <span class="o">:</span> <span class="n">Cat</span><span class="o">}</span> <span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="n">C.Obj</span><span class="o">)</span> <span class="o">:=</span> <span class="n">C.Idn</span> <span class="n">X</span>
<span class="kd">notation</span> <span class="s2">"ùüô"</span> <span class="n">X</span> <span class="bp">=&gt;</span> <span class="n">Idn</span> <span class="n">X</span>

<span class="kd">structure</span> <span class="n">Fun</span> <span class="o">(</span><span class="n">C</span> <span class="o">:</span> <span class="n">Cat</span><span class="o">)</span> <span class="o">(</span><span class="n">D</span> <span class="o">:</span> <span class="n">Cat</span><span class="o">)</span> <span class="n">where</span>
   <span class="n">Obj</span> <span class="o">:</span>     <span class="bp">‚àÄ</span><span class="o">(</span><span class="n">_</span> <span class="o">:</span> <span class="n">C.Obj</span><span class="o">),</span><span class="n">D.Obj</span>
   <span class="n">Mor</span> <span class="o">:</span>    <span class="bp">‚àÄ</span><span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="n">C.Obj</span><span class="o">),</span><span class="bp">‚àÄ</span><span class="o">(</span><span class="n">Y</span> <span class="o">:</span> <span class="n">C.Obj</span><span class="o">),</span><span class="bp">‚àÄ</span><span class="o">(</span><span class="n">_</span> <span class="o">:</span> <span class="n">C.Hom</span> <span class="n">X</span> <span class="n">Y</span><span class="o">),</span><span class="n">D.Hom</span> <span class="o">(</span><span class="n">Obj</span> <span class="n">X</span><span class="o">)</span> <span class="o">(</span><span class="n">Obj</span> <span class="n">Y</span><span class="o">)</span>
   <span class="n">Idn</span> <span class="o">:</span>     <span class="bp">‚àÄ</span><span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="n">C.Obj</span><span class="o">),</span><span class="n">Mor</span> <span class="n">X</span> <span class="n">X</span> <span class="o">(</span><span class="n">C.Idn</span> <span class="n">X</span><span class="o">)</span> <span class="bp">=</span> <span class="n">D.Idn</span> <span class="o">(</span><span class="n">Obj</span> <span class="n">X</span><span class="o">)</span>
   <span class="n">Cmp</span> <span class="o">:</span>  <span class="bp">‚àÄ</span><span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="n">C.Obj</span><span class="o">),</span><span class="bp">‚àÄ</span><span class="o">(</span><span class="n">Y</span> <span class="o">:</span> <span class="n">C.Obj</span><span class="o">),</span><span class="bp">‚àÄ</span><span class="o">(</span><span class="n">Z</span> <span class="o">:</span> <span class="n">C.Obj</span><span class="o">),</span><span class="bp">‚àÄ</span><span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">C.Hom</span> <span class="n">X</span> <span class="n">Y</span><span class="o">),</span><span class="bp">‚àÄ</span><span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="n">C.Hom</span> <span class="n">Y</span> <span class="n">Z</span><span class="o">),</span><span class="n">D.Cmp</span> <span class="o">(</span><span class="n">Obj</span> <span class="n">X</span><span class="o">)</span> <span class="o">(</span><span class="n">Obj</span> <span class="n">Y</span><span class="o">)</span> <span class="o">(</span><span class="n">Obj</span> <span class="n">Z</span><span class="o">)</span> <span class="o">(</span><span class="n">Mor</span> <span class="n">X</span> <span class="n">Y</span> <span class="n">f</span><span class="o">)</span> <span class="o">(</span><span class="n">Mor</span> <span class="n">Y</span> <span class="n">Z</span> <span class="n">g</span><span class="o">)</span> <span class="bp">=</span> <span class="n">Mor</span> <span class="n">X</span> <span class="n">Z</span> <span class="o">(</span><span class="n">C.Cmp</span> <span class="n">X</span> <span class="n">Y</span> <span class="n">Z</span> <span class="o">(</span><span class="n">f</span><span class="o">)</span> <span class="o">(</span><span class="n">g</span><span class="o">))</span>

<span class="kd">def</span> <span class="n">CatIdn</span> <span class="o">(</span><span class="n">C</span> <span class="o">:</span> <span class="n">Cat</span><span class="o">)</span> <span class="o">:</span> <span class="n">Fun</span> <span class="n">C</span> <span class="n">C</span> <span class="o">:=</span>
<span class="o">{</span><span class="n">Obj</span> <span class="o">:=</span> <span class="k">fun</span><span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="n">C.Obj</span><span class="o">)</span><span class="bp">=&gt;</span><span class="n">X</span><span class="o">,</span> <span class="n">Mor</span> <span class="o">:=</span> <span class="k">fun</span><span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="n">C.Obj</span><span class="o">)</span><span class="bp">=&gt;</span><span class="k">fun</span><span class="o">(</span><span class="n">Y</span> <span class="o">:</span> <span class="n">C.Obj</span><span class="o">)</span><span class="bp">=&gt;</span><span class="k">fun</span><span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">C.Hom</span> <span class="n">X</span> <span class="n">Y</span><span class="o">)</span><span class="bp">=&gt;</span><span class="n">f</span><span class="o">,</span> <span class="n">Idn</span> <span class="o">:=</span> <span class="k">fun</span><span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="n">C.Obj</span><span class="o">)</span><span class="bp">=&gt;</span><span class="n">Eq.refl</span> <span class="o">(</span><span class="n">C.Idn</span> <span class="n">X</span><span class="o">),</span><span class="n">Cmp</span> <span class="o">:=</span> <span class="k">fun</span><span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="n">C.Obj</span><span class="o">)</span><span class="bp">=&gt;</span><span class="k">fun</span><span class="o">(</span><span class="n">Y</span> <span class="o">:</span> <span class="n">C.Obj</span><span class="o">)</span><span class="bp">=&gt;</span><span class="k">fun</span><span class="o">(</span><span class="n">Z</span> <span class="o">:</span> <span class="n">C.Obj</span><span class="o">)</span><span class="bp">=&gt;</span><span class="k">fun</span><span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">C.Hom</span> <span class="n">X</span> <span class="n">Y</span><span class="o">)</span><span class="bp">=&gt;</span><span class="k">fun</span><span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="n">C.Hom</span> <span class="n">Y</span> <span class="n">Z</span><span class="o">)</span><span class="bp">=&gt;</span><span class="n">Eq.refl</span> <span class="o">(</span><span class="n">C.Cmp</span> <span class="n">X</span> <span class="n">Y</span> <span class="n">Z</span> <span class="n">f</span> <span class="n">g</span><span class="o">)}</span>

<span class="kd">def</span> <span class="n">CatCmp</span> <span class="o">(</span><span class="n">C</span> <span class="o">:</span> <span class="n">Cat</span><span class="o">)</span> <span class="o">(</span><span class="n">D</span> <span class="o">:</span> <span class="n">Cat</span><span class="o">)</span> <span class="o">(</span><span class="n">E</span> <span class="o">:</span> <span class="n">Cat</span><span class="o">)</span> <span class="o">(</span><span class="n">F</span> <span class="o">:</span> <span class="n">Fun</span> <span class="n">C</span> <span class="n">D</span><span class="o">)</span> <span class="o">(</span><span class="n">G</span> <span class="o">:</span> <span class="n">Fun</span> <span class="n">D</span> <span class="n">E</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">Fun</span> <span class="n">C</span> <span class="n">E</span><span class="o">):=</span>
<span class="o">{</span><span class="n">Obj</span> <span class="o">:=</span> <span class="k">fun</span><span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="n">C.Obj</span><span class="o">)</span><span class="bp">=&gt;</span><span class="o">(</span><span class="n">G.Obj</span> <span class="o">(</span><span class="n">F.Obj</span> <span class="n">X</span><span class="o">)),</span><span class="n">Mor</span> <span class="o">:=</span> <span class="k">fun</span><span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="n">C.Obj</span><span class="o">)</span><span class="bp">=&gt;</span><span class="k">fun</span><span class="o">(</span><span class="n">Y</span> <span class="o">:</span> <span class="n">C.Obj</span><span class="o">)</span><span class="bp">=&gt;</span><span class="k">fun</span><span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">C.Hom</span> <span class="n">X</span> <span class="n">Y</span><span class="o">)</span><span class="bp">=&gt;</span><span class="o">(</span><span class="n">G.Mor</span><span class="o">)</span> <span class="o">(</span><span class="n">F.Obj</span> <span class="n">X</span><span class="o">)</span> <span class="o">(</span><span class="n">F.Obj</span> <span class="n">Y</span><span class="o">)</span> <span class="o">((</span><span class="n">F.Mor</span><span class="o">)</span> <span class="n">X</span> <span class="n">Y</span> <span class="n">f</span><span class="o">),</span><span class="n">Idn</span> <span class="o">:=</span> <span class="k">fun</span><span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="n">C.Obj</span><span class="o">)</span><span class="bp">=&gt;</span> <span class="o">((</span><span class="n">Eq.trans</span><span class="o">)</span> <span class="o">(</span><span class="n">congrArg</span> <span class="o">(</span><span class="n">G.Mor</span> <span class="o">(</span><span class="n">F.Obj</span> <span class="n">X</span><span class="o">)</span> <span class="o">(</span><span class="n">F.Obj</span> <span class="n">X</span><span class="o">))</span> <span class="o">(</span><span class="n">F.Idn</span> <span class="n">X</span><span class="o">)</span> <span class="o">)</span> <span class="o">(</span><span class="n">G.Idn</span> <span class="o">(</span><span class="n">F.Obj</span> <span class="n">X</span><span class="o">))),</span><span class="n">Cmp</span> <span class="o">:=</span> <span class="k">fun</span><span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="n">C.Obj</span><span class="o">)</span><span class="bp">=&gt;</span><span class="k">fun</span><span class="o">(</span><span class="n">Y</span> <span class="o">:</span> <span class="n">C.Obj</span><span class="o">)</span><span class="bp">=&gt;</span><span class="k">fun</span><span class="o">(</span><span class="n">Z</span> <span class="o">:</span> <span class="n">C.Obj</span><span class="o">)</span><span class="bp">=&gt;</span><span class="k">fun</span><span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">C.Hom</span> <span class="n">X</span> <span class="n">Y</span><span class="o">)</span><span class="bp">=&gt;</span><span class="k">fun</span><span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="n">C.Hom</span> <span class="n">Y</span> <span class="n">Z</span><span class="o">)</span><span class="bp">=&gt;</span><span class="o">((</span><span class="n">Eq.trans</span><span class="o">)</span> <span class="o">(</span><span class="n">G.Cmp</span> <span class="o">(</span><span class="n">F.Obj</span> <span class="n">X</span><span class="o">)</span> <span class="o">(</span><span class="n">F.Obj</span> <span class="n">Y</span><span class="o">)</span> <span class="o">(</span><span class="n">F.Obj</span> <span class="n">Z</span><span class="o">)</span> <span class="o">(</span><span class="n">F.Mor</span> <span class="n">X</span> <span class="n">Y</span> <span class="n">f</span><span class="o">)</span> <span class="o">(</span><span class="n">F.Mor</span> <span class="n">Y</span> <span class="n">Z</span> <span class="n">g</span><span class="o">))</span> <span class="o">(</span><span class="n">congrArg</span> <span class="o">(</span><span class="n">G.Mor</span> <span class="o">(</span><span class="n">F.Obj</span> <span class="n">X</span><span class="o">)</span> <span class="o">(</span><span class="n">F.Obj</span> <span class="n">Z</span><span class="o">))</span> <span class="o">(</span><span class="n">F.Cmp</span> <span class="n">X</span> <span class="n">Y</span> <span class="n">Z</span> <span class="n">f</span> <span class="n">g</span><span class="o">)))}</span>

<span class="kd">def</span> <span class="n">CatId1</span> <span class="o">(</span><span class="n">C</span> <span class="o">:</span> <span class="n">Cat</span><span class="o">)</span> <span class="o">(</span><span class="n">D</span> <span class="o">:</span> <span class="n">Cat</span><span class="o">)</span> <span class="o">(</span><span class="n">F</span> <span class="o">:</span> <span class="n">Fun</span> <span class="n">C</span> <span class="n">D</span><span class="o">)</span> <span class="o">:</span> <span class="o">((</span><span class="n">CatCmp</span> <span class="n">C</span> <span class="n">D</span> <span class="n">D</span><span class="o">)</span> <span class="n">F</span> <span class="o">(</span><span class="n">CatIdn</span> <span class="n">D</span><span class="o">)</span> <span class="bp">=</span> <span class="n">F</span><span class="o">)</span> <span class="o">:=</span> <span class="n">Eq.refl</span> <span class="n">F</span>

<span class="kd">def</span> <span class="n">CatId2</span> <span class="o">(</span><span class="n">C</span> <span class="o">:</span> <span class="n">Cat</span><span class="o">)</span> <span class="o">(</span><span class="n">D</span> <span class="o">:</span> <span class="n">Cat</span><span class="o">)</span> <span class="o">(</span><span class="n">F</span> <span class="o">:</span> <span class="n">Fun</span> <span class="n">C</span> <span class="n">D</span><span class="o">)</span> <span class="o">:</span> <span class="o">((</span><span class="n">CatCmp</span> <span class="n">C</span> <span class="n">C</span> <span class="n">D</span><span class="o">)</span> <span class="o">(</span><span class="n">CatIdn</span> <span class="n">C</span><span class="o">)</span> <span class="n">F</span> <span class="bp">=</span> <span class="n">F</span><span class="o">)</span> <span class="o">:=</span> <span class="n">Eq.refl</span> <span class="n">F</span>

<span class="kd">def</span> <span class="n">CatAss</span> <span class="o">(</span><span class="n">B</span> <span class="o">:</span> <span class="n">Cat</span><span class="o">)</span> <span class="o">(</span><span class="n">C</span> <span class="o">:</span> <span class="n">Cat</span><span class="o">)</span> <span class="o">(</span><span class="n">D</span> <span class="o">:</span> <span class="n">Cat</span><span class="o">)</span> <span class="o">(</span><span class="n">E</span> <span class="o">:</span> <span class="n">Cat</span><span class="o">)</span> <span class="o">(</span><span class="n">F</span> <span class="o">:</span> <span class="n">Fun</span> <span class="n">B</span> <span class="n">C</span><span class="o">)</span> <span class="o">(</span><span class="n">G</span> <span class="o">:</span> <span class="n">Fun</span> <span class="n">C</span> <span class="n">D</span><span class="o">)</span> <span class="o">(</span><span class="n">H</span> <span class="o">:</span> <span class="n">Fun</span> <span class="n">D</span> <span class="n">E</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">CatCmp</span> <span class="n">B</span> <span class="n">C</span> <span class="n">E</span> <span class="n">F</span> <span class="o">(</span><span class="n">CatCmp</span> <span class="n">C</span> <span class="n">D</span> <span class="n">E</span> <span class="n">G</span> <span class="n">H</span><span class="o">)</span> <span class="bp">=</span> <span class="n">CatCmp</span> <span class="n">B</span> <span class="n">D</span> <span class="n">E</span> <span class="o">(</span><span class="n">CatCmp</span> <span class="n">B</span> <span class="n">C</span> <span class="n">D</span> <span class="n">F</span> <span class="n">G</span><span class="o">)</span> <span class="n">H</span><span class="o">)</span> <span class="o">:=</span> <span class="n">Eq.refl</span> <span class="o">(</span><span class="n">CatCmp</span> <span class="n">B</span> <span class="n">C</span> <span class="n">E</span> <span class="n">F</span> <span class="o">(</span><span class="n">CatCmp</span> <span class="n">C</span> <span class="n">D</span> <span class="n">E</span> <span class="n">G</span> <span class="n">H</span><span class="o">))</span>

<span class="kd">def</span> <span class="n">Cats</span> <span class="o">:</span> <span class="n">Cat</span> <span class="o">:=</span> <span class="o">{</span><span class="n">Obj</span> <span class="o">:=</span> <span class="n">Cat</span><span class="o">,</span><span class="n">Hom</span> <span class="o">:=</span> <span class="n">Fun</span><span class="o">,</span><span class="n">Idn</span> <span class="o">:=</span> <span class="n">CatIdn</span><span class="o">,</span><span class="n">Cmp</span> <span class="o">:=</span> <span class="n">CatCmp</span><span class="o">,</span><span class="n">Id1</span> <span class="o">:=</span> <span class="n">CatId1</span><span class="o">,</span><span class="n">Id2</span> <span class="o">:=</span> <span class="n">CatId2</span><span class="o">,</span><span class="n">Ass</span> <span class="o">:=</span> <span class="n">CatAss</span><span class="o">}</span>

<span class="kd">def</span> <span class="n">CatPrd</span> <span class="o">(</span><span class="n">C</span> <span class="o">:</span> <span class="n">Cat</span><span class="o">)</span> <span class="o">(</span><span class="n">D</span> <span class="o">:</span> <span class="n">Cat</span><span class="o">)</span> <span class="o">:</span> <span class="n">Cat</span> <span class="o">:=</span> <span class="o">{</span><span class="n">Obj</span> <span class="o">:=</span> <span class="n">C.Obj</span> <span class="bp">√ó</span> <span class="n">D.Obj</span><span class="o">,</span> <span class="n">Hom</span> <span class="o">:=</span> <span class="k">fun</span><span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="n">C.Obj</span> <span class="bp">√ó</span> <span class="n">D.Obj</span><span class="o">)</span><span class="bp">=&gt;</span><span class="k">fun</span><span class="o">(</span><span class="n">Y</span> <span class="o">:</span> <span class="n">C.Obj</span> <span class="bp">√ó</span> <span class="n">D.Obj</span><span class="o">)</span><span class="bp">=&gt;</span><span class="o">((</span><span class="n">Hom</span> <span class="n">X.1</span> <span class="n">Y.1</span><span class="o">)</span> <span class="bp">√ó</span> <span class="o">(</span><span class="n">Hom</span> <span class="n">X.2</span> <span class="n">Y.2</span><span class="o">)),</span> <span class="n">Idn</span> <span class="o">:=</span> <span class="k">fun</span><span class="o">(</span><span class="n">P</span> <span class="o">:</span> <span class="n">C.Obj</span> <span class="bp">√ó</span> <span class="n">D.Obj</span><span class="o">)</span><span class="bp">=&gt;</span><span class="o">(</span><span class="n">C.Idn</span> <span class="n">P.1</span><span class="o">,</span> <span class="n">D.Idn</span> <span class="n">P.2</span><span class="o">),</span> <span class="n">Cmp</span> <span class="o">:=</span> <span class="k">fun</span><span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="n">C.Obj</span> <span class="bp">√ó</span> <span class="n">D.Obj</span><span class="o">)</span><span class="bp">=&gt;</span><span class="k">fun</span><span class="o">(</span><span class="n">Y</span> <span class="o">:</span> <span class="n">C.Obj</span> <span class="bp">√ó</span> <span class="n">D.Obj</span><span class="o">)</span><span class="bp">=&gt;</span><span class="k">fun</span><span class="o">(</span><span class="n">Z</span> <span class="o">:</span> <span class="n">C.Obj</span> <span class="bp">√ó</span> <span class="n">D.Obj</span><span class="o">)</span><span class="bp">=&gt;</span><span class="k">fun</span><span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="o">(</span><span class="n">Hom</span> <span class="n">X.1</span> <span class="n">Y.1</span><span class="o">)</span> <span class="bp">√ó</span> <span class="o">(</span><span class="n">Hom</span> <span class="n">X.2</span> <span class="n">Y.2</span><span class="o">))</span><span class="bp">=&gt;</span><span class="k">fun</span><span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="o">(</span><span class="n">Hom</span> <span class="n">Y.1</span> <span class="n">Z.1</span><span class="o">)</span> <span class="bp">√ó</span> <span class="o">(</span><span class="n">Hom</span> <span class="n">Y.2</span> <span class="n">Z.2</span><span class="o">))</span><span class="bp">=&gt;</span><span class="o">(</span><span class="n">C.Cmp</span> <span class="n">X.1</span> <span class="n">Y.1</span> <span class="n">Z.1</span> <span class="n">f.1</span> <span class="n">g.1</span><span class="o">,</span> <span class="n">D.Cmp</span> <span class="n">X.2</span> <span class="n">Y.2</span> <span class="n">Z.2</span> <span class="n">f.2</span> <span class="n">g.2</span><span class="o">),</span> <span class="n">Id1</span> <span class="o">:=</span> <span class="k">fun</span><span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="n">C.Obj</span> <span class="bp">√ó</span> <span class="n">D.Obj</span><span class="o">)</span><span class="bp">=&gt;</span><span class="k">fun</span><span class="o">(</span><span class="n">Y</span> <span class="o">:</span> <span class="n">C.Obj</span> <span class="bp">√ó</span> <span class="n">D.Obj</span><span class="o">)</span><span class="bp">=&gt;</span><span class="k">fun</span><span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="o">(</span><span class="n">C.Hom</span> <span class="n">X.1</span> <span class="n">Y.1</span><span class="o">)</span> <span class="bp">√ó</span> <span class="o">(</span><span class="n">D.Hom</span> <span class="n">X.2</span> <span class="n">Y.2</span><span class="o">))</span><span class="bp">=&gt;</span><span class="n">Eq.rec</span> <span class="o">(</span><span class="n">C.Id1</span> <span class="n">X.1</span> <span class="n">Y.1</span> <span class="n">f.1</span><span class="o">)</span> <span class="o">(</span><span class="n">D.Id1</span> <span class="n">X.2</span> <span class="n">Y.2</span> <span class="n">f.2</span><span class="o">),</span> <span class="n">Id2</span> <span class="o">:=</span> <span class="k">fun</span><span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="n">C.Obj</span> <span class="bp">√ó</span> <span class="n">D.Obj</span><span class="o">)</span><span class="bp">=&gt;</span><span class="k">fun</span><span class="o">(</span><span class="n">Y</span> <span class="o">:</span> <span class="n">C.Obj</span> <span class="bp">√ó</span> <span class="n">D.Obj</span><span class="o">)</span><span class="bp">=&gt;</span><span class="k">fun</span><span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="o">(</span><span class="n">Hom</span> <span class="n">X.1</span> <span class="n">Y.1</span><span class="o">)</span> <span class="bp">√ó</span> <span class="o">(</span><span class="n">Hom</span> <span class="n">X.2</span> <span class="n">Y.2</span><span class="o">))</span><span class="bp">=&gt;</span><span class="n">Eq.rec</span> <span class="o">(</span><span class="n">C.Id2</span> <span class="n">X.1</span> <span class="n">Y.1</span> <span class="n">f.1</span><span class="o">)</span> <span class="o">(</span><span class="n">D.Id2</span> <span class="n">X.2</span> <span class="n">Y.2</span> <span class="n">f.2</span><span class="o">),</span> <span class="n">Ass</span> <span class="o">:=</span> <span class="k">fun</span><span class="o">(</span><span class="n">W</span> <span class="o">:</span> <span class="n">C.Obj</span> <span class="bp">√ó</span> <span class="n">D.Obj</span><span class="o">)</span><span class="bp">=&gt;</span><span class="k">fun</span><span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="n">C.Obj</span> <span class="bp">√ó</span> <span class="n">D.Obj</span><span class="o">)</span><span class="bp">=&gt;</span><span class="k">fun</span><span class="o">(</span><span class="n">Y</span> <span class="o">:</span> <span class="n">C.Obj</span> <span class="bp">√ó</span> <span class="n">D.Obj</span><span class="o">)</span><span class="bp">=&gt;</span><span class="k">fun</span><span class="o">(</span><span class="n">Z</span> <span class="o">:</span> <span class="n">C.Obj</span> <span class="bp">√ó</span> <span class="n">D.Obj</span><span class="o">)</span><span class="bp">=&gt;</span><span class="k">fun</span><span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="o">(</span><span class="n">Hom</span> <span class="n">W.1</span> <span class="n">X.1</span><span class="o">)</span> <span class="bp">√ó</span> <span class="o">(</span><span class="n">Hom</span> <span class="n">W.2</span> <span class="n">X.2</span><span class="o">))</span><span class="bp">=&gt;</span><span class="k">fun</span><span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="o">(</span><span class="n">Hom</span> <span class="n">X.1</span> <span class="n">Y.1</span><span class="o">)</span> <span class="bp">√ó</span> <span class="o">(</span><span class="n">Hom</span> <span class="n">X.2</span> <span class="n">Y.2</span><span class="o">))</span><span class="bp">=&gt;</span><span class="k">fun</span><span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="o">(</span><span class="n">Hom</span> <span class="n">Y.1</span> <span class="n">Z.1</span><span class="o">)</span> <span class="bp">√ó</span> <span class="o">(</span><span class="n">Hom</span> <span class="n">Y.2</span> <span class="n">Z.2</span><span class="o">))</span><span class="bp">=&gt;</span><span class="n">Eq.rec</span> <span class="o">(</span><span class="n">C.Ass</span> <span class="n">W.1</span> <span class="n">X.1</span> <span class="n">Y.1</span> <span class="n">Z.1</span> <span class="n">f.1</span> <span class="n">g.1</span> <span class="n">h.1</span><span class="o">)</span> <span class="o">(</span><span class="n">D.Ass</span> <span class="n">W.2</span> <span class="n">X.2</span> <span class="n">Y.2</span> <span class="n">Z.2</span> <span class="n">f.2</span> <span class="n">g.2</span> <span class="n">h.2</span><span class="o">)}</span>
</code></pre></div>
<p>The last definition is what's giving me trouble where I define Id1 and Id2.</p>
<p>I get this:</p>
<p><div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">Main.lean</span><span class="o">:</span><span class="mi">39</span><span class="o">:</span><span class="mi">520</span><span class="o">:</span> <span class="n">error</span><span class="o">:</span> <span class="n">failed</span> <span class="n">to</span> <span class="n">elaborate</span> <span class="n">eliminator</span><span class="o">,</span> <span class="n">invalid</span> <span class="n">motive</span>
  <span class="k">fun</span> <span class="n">x</span> <span class="n">x</span> <span class="bp">=&gt;</span>
    <span class="o">(</span><span class="k">fun</span> <span class="n">X</span> <span class="n">Y</span> <span class="n">Z</span> <span class="n">f</span> <span class="n">g</span> <span class="bp">=&gt;</span> <span class="o">(</span><span class="n">Cat.Cmp</span> <span class="n">C</span> <span class="n">X.fst</span> <span class="n">Y.fst</span> <span class="n">Z.fst</span> <span class="n">f.fst</span> <span class="n">g.fst</span><span class="o">,</span> <span class="n">Cat.Cmp</span> <span class="n">D</span> <span class="n">X.snd</span> <span class="n">Y.snd</span> <span class="n">Z.snd</span> <span class="n">f.snd</span> <span class="n">g.snd</span><span class="o">))</span> <span class="n">X</span> <span class="n">Y</span> <span class="n">Y</span> <span class="n">f</span>
        <span class="o">((</span><span class="k">fun</span> <span class="n">P</span> <span class="bp">=&gt;</span> <span class="o">(</span><span class="n">Cat.Idn</span> <span class="n">C</span> <span class="n">P.fst</span><span class="o">,</span> <span class="n">Cat.Idn</span> <span class="n">D</span> <span class="n">P.snd</span><span class="o">))</span> <span class="n">Y</span><span class="o">)</span> <span class="bp">=</span>
      <span class="n">f</span>
<span class="n">Main.lean</span><span class="o">:</span><span class="mi">39</span><span class="o">:</span><span class="mi">663</span><span class="o">:</span> <span class="n">error</span><span class="o">:</span> <span class="n">failed</span> <span class="n">to</span> <span class="n">elaborate</span> <span class="n">eliminator</span><span class="o">,</span> <span class="n">invalid</span> <span class="n">motive</span>
  <span class="k">fun</span> <span class="n">x</span> <span class="n">x</span> <span class="bp">=&gt;</span>
    <span class="o">(</span><span class="k">fun</span> <span class="n">X</span> <span class="n">Y</span> <span class="n">Z</span> <span class="n">f</span> <span class="n">g</span> <span class="bp">=&gt;</span> <span class="o">(</span><span class="n">Cat.Cmp</span> <span class="n">C</span> <span class="n">X.fst</span> <span class="n">Y.fst</span> <span class="n">Z.fst</span> <span class="n">f.fst</span> <span class="n">g.fst</span><span class="o">,</span> <span class="n">Cat.Cmp</span> <span class="n">D</span> <span class="n">X.snd</span> <span class="n">Y.snd</span> <span class="n">Z.snd</span> <span class="n">f.snd</span> <span class="n">g.snd</span><span class="o">))</span> <span class="n">X</span> <span class="n">X</span> <span class="n">Y</span>
        <span class="o">((</span><span class="k">fun</span> <span class="n">P</span> <span class="bp">=&gt;</span> <span class="o">(</span><span class="n">Cat.Idn</span> <span class="n">C</span> <span class="n">P.fst</span><span class="o">,</span> <span class="n">Cat.Idn</span> <span class="n">D</span> <span class="n">P.snd</span><span class="o">))</span> <span class="n">X</span><span class="o">)</span> <span class="n">f</span> <span class="bp">=</span>
      <span class="n">f</span>
<span class="bp">...</span>
</code></pre></div><br>
</p>
</blockquote>
<p>I've been playing around with the product of categories construction (see previous message). I still can't get it to work, but I did maybe get closer. It seems there's a universe problem again?</p>
<p>I tried to construct the product of categories like this:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">def</span> <span class="n">CatPrdObj</span> <span class="o">(</span><span class="n">C</span> <span class="o">:</span> <span class="n">Cat</span><span class="o">)</span> <span class="o">(</span><span class="n">D</span> <span class="o">:</span> <span class="n">Cat</span><span class="o">)</span> <span class="o">:=</span> <span class="n">C.Obj</span> <span class="bp">√ó</span> <span class="n">D.Obj</span>
<span class="kd">def</span> <span class="n">CatPrdHom</span> <span class="o">(</span><span class="n">C</span> <span class="o">:</span> <span class="n">Cat</span><span class="o">)</span> <span class="o">(</span><span class="n">D</span> <span class="o">:</span> <span class="n">Cat</span><span class="o">)</span> <span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="n">CatPrdObj</span> <span class="n">C</span> <span class="n">D</span><span class="o">)</span> <span class="o">(</span><span class="n">Y</span> <span class="o">:</span> <span class="n">CatPrdObj</span> <span class="n">C</span> <span class="n">D</span><span class="o">)</span> <span class="o">:=</span> <span class="o">(</span><span class="n">Hom</span> <span class="n">X.1</span> <span class="n">Y.1</span><span class="o">)</span> <span class="bp">√ó</span> <span class="o">(</span><span class="n">Hom</span> <span class="n">X.2</span> <span class="n">Y.2</span><span class="o">)</span>
<span class="kd">def</span> <span class="n">CatPrdIdn</span> <span class="o">(</span><span class="n">C</span> <span class="o">:</span> <span class="n">Cat</span><span class="o">)</span> <span class="o">(</span><span class="n">D</span> <span class="o">:</span> <span class="n">Cat</span><span class="o">)</span> <span class="o">(</span><span class="n">P</span> <span class="o">:</span> <span class="n">CatPrdObj</span> <span class="n">C</span> <span class="n">D</span><span class="o">)</span> <span class="o">:=</span> <span class="o">(</span><span class="n">C.Idn</span> <span class="n">P.1</span><span class="o">,</span> <span class="n">D.Idn</span> <span class="n">P.2</span><span class="o">)</span>
<span class="kd">def</span> <span class="n">CatPrdCmp</span> <span class="o">(</span><span class="n">C</span> <span class="o">:</span> <span class="n">Cat</span><span class="o">)</span> <span class="o">(</span><span class="n">D</span> <span class="o">:</span> <span class="n">Cat</span><span class="o">)</span> <span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="n">CatPrdObj</span> <span class="n">C</span> <span class="n">D</span><span class="o">)</span> <span class="o">(</span><span class="n">Y</span> <span class="o">:</span> <span class="n">CatPrdObj</span> <span class="n">C</span> <span class="n">D</span><span class="o">)</span> <span class="o">(</span><span class="n">Z</span> <span class="o">:</span> <span class="n">CatPrdObj</span> <span class="n">C</span> <span class="n">D</span><span class="o">)</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">CatPrdHom</span> <span class="n">C</span> <span class="n">D</span> <span class="n">X</span> <span class="n">Y</span><span class="o">)</span> <span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="n">CatPrdHom</span> <span class="n">C</span> <span class="n">D</span> <span class="n">Y</span> <span class="n">Z</span><span class="o">)</span> <span class="o">:=</span> <span class="o">(</span><span class="n">C.Cmp</span> <span class="n">X.1</span> <span class="n">Y.1</span> <span class="n">Z.1</span> <span class="n">f.1</span> <span class="n">g.1</span><span class="o">,</span> <span class="n">D.Cmp</span> <span class="n">X.2</span> <span class="n">Y.2</span> <span class="n">Z.2</span> <span class="n">f.2</span> <span class="n">g.2</span><span class="o">)</span>
<span class="kd">def</span> <span class="n">CatPrdId1A</span> <span class="o">(</span><span class="n">C</span> <span class="o">:</span> <span class="n">Cat</span><span class="o">)</span> <span class="o">(</span><span class="n">D</span> <span class="o">:</span> <span class="n">Cat</span><span class="o">)</span> <span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="n">CatPrdObj</span> <span class="n">C</span> <span class="n">D</span><span class="o">)</span> <span class="o">(</span><span class="n">Y</span> <span class="o">:</span> <span class="n">CatPrdObj</span> <span class="n">C</span> <span class="n">D</span><span class="o">)</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">CatPrdHom</span> <span class="n">C</span> <span class="n">D</span> <span class="n">X</span> <span class="n">Y</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">CatPrdCmp</span> <span class="n">C</span> <span class="n">D</span> <span class="n">X</span> <span class="n">Y</span> <span class="n">Y</span> <span class="n">f</span> <span class="o">(</span><span class="n">CatPrdIdn</span> <span class="n">C</span> <span class="n">D</span> <span class="n">Y</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="n">C.Cmp</span> <span class="n">X.1</span> <span class="n">Y.1</span> <span class="n">Y.1</span> <span class="n">f.1</span> <span class="o">(</span><span class="n">C.Idn</span> <span class="n">Y.1</span><span class="o">),</span> <span class="n">D.Cmp</span> <span class="n">X.2</span> <span class="n">Y.2</span> <span class="n">Y.2</span> <span class="n">f.2</span> <span class="o">(</span><span class="n">D.Idn</span> <span class="n">Y.2</span><span class="o">)))</span> <span class="o">:=</span> <span class="n">Eq.refl</span> <span class="o">(</span><span class="n">C.Cmp</span> <span class="n">X.1</span> <span class="n">Y.1</span> <span class="n">Y.1</span> <span class="n">f.1</span> <span class="o">(</span><span class="n">C.Idn</span> <span class="n">Y.1</span><span class="o">),</span> <span class="n">D.Cmp</span> <span class="n">X.2</span> <span class="n">Y.2</span> <span class="n">Y.2</span> <span class="n">f.2</span> <span class="o">(</span><span class="n">D.Idn</span> <span class="n">Y.2</span><span class="o">))</span>
<span class="kd">def</span> <span class="n">CatPrdId1B</span> <span class="o">(</span><span class="n">C</span> <span class="o">:</span> <span class="n">Cat</span><span class="o">)</span> <span class="o">(</span><span class="n">D</span> <span class="o">:</span> <span class="n">Cat</span><span class="o">)</span> <span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="n">CatPrdObj</span> <span class="n">C</span> <span class="n">D</span><span class="o">)</span> <span class="o">(</span><span class="n">Y</span> <span class="o">:</span> <span class="n">CatPrdObj</span> <span class="n">C</span> <span class="n">D</span><span class="o">)</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">CatPrdHom</span> <span class="n">C</span> <span class="n">D</span> <span class="n">X</span> <span class="n">Y</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">C.Cmp</span> <span class="n">X.1</span> <span class="n">Y.1</span> <span class="n">Y.1</span> <span class="n">f.1</span> <span class="o">(</span><span class="n">C.Idn</span> <span class="n">Y.1</span><span class="o">),</span> <span class="n">D.Cmp</span> <span class="n">X.2</span> <span class="n">Y.2</span> <span class="n">Y.2</span> <span class="n">f.2</span> <span class="o">(</span><span class="n">D.Idn</span> <span class="n">Y.2</span><span class="o">))</span> <span class="bp">=</span> <span class="o">(</span><span class="n">f.1</span><span class="o">,</span> <span class="n">f.2</span><span class="o">)</span> <span class="o">:=</span> <span class="o">(</span><span class="n">C.Id1</span> <span class="n">X.1</span> <span class="n">Y.1</span> <span class="n">f.1</span><span class="o">)</span> <span class="bp">‚ñ∏</span> <span class="o">(</span><span class="n">D.Id1</span> <span class="n">X.2</span> <span class="n">Y.2</span> <span class="n">f.2</span><span class="o">)</span>

<span class="kd">def</span> <span class="n">CatPrd</span> <span class="o">(</span><span class="n">C</span> <span class="o">:</span> <span class="n">Cat</span><span class="o">)</span> <span class="o">(</span><span class="n">D</span> <span class="o">:</span> <span class="n">Cat</span><span class="o">)</span> <span class="o">:</span> <span class="n">Cat2</span> <span class="o">:=</span> <span class="o">{</span><span class="n">Obj</span> <span class="o">:=</span> <span class="n">CatPrdObj</span> <span class="n">C</span> <span class="n">D</span><span class="o">,</span> <span class="n">Hom</span> <span class="o">:=</span> <span class="n">CatPrdHom</span> <span class="n">C</span> <span class="n">D</span><span class="o">,</span> <span class="n">Idn</span> <span class="o">:=</span> <span class="n">CatPrdIdn</span> <span class="n">C</span> <span class="n">D</span><span class="o">,</span> <span class="n">Cmp</span> <span class="o">:=</span> <span class="n">CatPrdCmp</span> <span class="n">C</span> <span class="n">D</span><span class="o">,</span> <span class="n">Id1</span> <span class="o">:=</span> <span class="n">CatPrdId1A</span> <span class="n">C</span> <span class="n">D</span><span class="o">}</span>
</code></pre></div>
<p>which is loaded with errors for now... but the error seems to be that CatPrdId1B can't solve a universe constraint.</p>



<a name="322626397"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/errors%20in%20product%20of%20categories/near/322626397" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/errors.20in.20product.20of.20categories.html#322626397">(Jan 20 2023 at 22:16)</a>:</h4>
<p>Note that the <code>CatProdId*</code> declarations should be <code>theorem</code>s not <code>def</code>s</p>



<a name="322632113"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/errors%20in%20product%20of%20categories/near/322632113" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kind Bubble <a href="https://leanprover-community.github.io/archive/stream/113488-general/topic/errors.20in.20product.20of.20categories.html#322632113">(Jan 20 2023 at 22:52)</a>:</h4>
<p><span class="user-mention silent" data-user-id="310045">Eric Wieser</span> <a href="#narrow/stream/113488-general/topic/errors.20in.20product.20of.20categories/near/322626397">said</a>:</p>
<blockquote>
<p>Note that the <code>CatProdId*</code> declarations should be <code>theorem</code>s not <code>def</code>s</p>
</blockquote>
<p>Yeah.</p>
<p>I'm totally lost with this congr stuff though.</p>
<p>Also, is it better to keep the Lean 4 stuff on the lean4 stream?</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>