---
layout: archive
title: Zulip Chat Archive
permalink: /stream/239415-metaprogramming-/-tactics/topic/Selectively.20weaken.20norm_num.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/239415-metaprogramming-/-tactics/index.html">metaprogramming / tactics</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/239415-metaprogramming-/-tactics/topic/Selectively.20weaken.20norm_num.html">Selectively weaken norm_num</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="296429625"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/239415-metaprogramming%20/%20tactics/topic/Selectively%20weaken%20norm_num/near/296429625" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/239415-metaprogramming-/-tactics/topic/Selectively.20weaken.20norm_num.html#296429625">(Aug 31 2022 at 18:56)</a>:</h4>
<p>For teaching, I'd like to have a version of <code>norm_num</code> which doesn't have the power to do elementary number theory calculations like <code>a % b</code> or <code>a âˆ£ b</code>.</p>
<p>It seems to me that I could get this functionality by de-listing <a href="https://github.com/leanprover-community/mathlib/blob/d032ed1dcb4e8b3fcc07c8fc92e0a7423b732b87/src/tactic/norm_num.lean#L1259"><code>eval_nat_int_ext</code></a> from the <a href="https://github.com/leanprover-community/mathlib/blob/d032ed1dcb4e8b3fcc07c8fc92e0a7423b732b87/src/tactic/norm_num.lean#L1356">main <code>norm_num</code> instructions</a>, and instead making <code>eval_nat_int_ext</code> a <code>norm_num</code> plugin by marking it with the attribute <code>@[norm_num]</code>.  Then, in the files when I want to disable the functionality, I could say</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">local</span> <span class="kn">attribute</span> <span class="o">[</span><span class="bp">-</span><span class="n">norm_num</span><span class="o">]</span> <span class="n">eval_nat_int_ext</span>
</code></pre></div>
<p>Will my plan work?  Would it be the right way to achieve my goal?  And would it be acceptable in mathlib?</p>



<a name="296433116"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/239415-metaprogramming%20/%20tactics/topic/Selectively%20weaken%20norm_num/near/296433116" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/239415-metaprogramming-/-tactics/topic/Selectively.20weaken.20norm_num.html#296433116">(Aug 31 2022 at 19:18)</a>:</h4>
<p>Have you checked if that actually works? I suspect that you can't actually disable the <code>@[norm_num]</code> attribute</p>



<a name="296435991"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/239415-metaprogramming%20/%20tactics/topic/Selectively%20weaken%20norm_num/near/296435991" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/239415-metaprogramming-/-tactics/topic/Selectively.20weaken.20norm_num.html#296435991">(Aug 31 2022 at 19:35)</a>:</h4>
<p>Right, I haven't tried it.  I'll try it later.  If it doesn't work, can you suggest another mechanism?</p>



<a name="300052029"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/239415-metaprogramming%20/%20tactics/topic/Selectively%20weaken%20norm_num/near/300052029" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/239415-metaprogramming-/-tactics/topic/Selectively.20weaken.20norm_num.html#300052029">(Sep 21 2022 at 22:58)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> Actually, this seems to work just fine! See <a href="https://github.com/leanprover-community/mathlib/pull/16588">#16588</a>.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>