---
layout: archive
title: Zulip Chat Archive
permalink: /stream/239415-metaprogramming-/-tactics/topic/Allowing.20focussing.20on.20multiple.20goals.20in.20.60case.60.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/239415-metaprogramming-/-tactics/index.html">metaprogramming / tactics</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/239415-metaprogramming-/-tactics/topic/Allowing.20focussing.20on.20multiple.20goals.20in.20.60case.60.html">Allowing focussing on multiple goals in `case`</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="220412600"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/239415-metaprogramming%20/%20tactics/topic/Allowing%20focussing%20on%20multiple%20goals%20in%20%60case%60/near/220412600" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/239415-metaprogramming-/-tactics/topic/Allowing.20focussing.20on.20multiple.20goals.20in.20.60case.60.html#220412600">(Dec 18 2020 at 18:45)</a>:</h4>
<p><a href="https://leanprover-community.github.io/mathlib_docs/tactics.html#rcases">tactic#rcases</a> allows multiple targets</p>



<a name="220412649"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/239415-metaprogramming%20/%20tactics/topic/Allowing%20focussing%20on%20multiple%20goals%20in%20%60case%60/near/220412649" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/239415-metaprogramming-/-tactics/topic/Allowing.20focussing.20on.20multiple.20goals.20in.20.60case.60.html#220412649">(Dec 18 2020 at 18:45)</a>:</h4>
<p>You can do <code>rcases ⟨a, b⟩ with ...</code></p>



<a name="220415106"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/239415-metaprogramming%20/%20tactics/topic/Allowing%20focussing%20on%20multiple%20goals%20in%20%60case%60/near/220415106" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/239415-metaprogramming-/-tactics/topic/Allowing.20focussing.20on.20multiple.20goals.20in.20.60case.60.html#220415106">(Dec 18 2020 at 19:05)</a>:</h4>
<p>I don't follow, how would you write the above with <code>rcases</code>?</p>



<a name="220415516"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/239415-metaprogramming%20/%20tactics/topic/Allowing%20focussing%20on%20multiple%20goals%20in%20%60case%60/near/220415516" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/239415-metaprogramming-/-tactics/topic/Allowing.20focussing.20on.20multiple.20goals.20in.20.60case.60.html#220415516">(Dec 18 2020 at 19:08)</a>:</h4>
<p>Perhaps my title was unclear - I'm not talking about <code>cases</code> matching on multiple objects, but on <code>case</code> being able to focus on multiple goals.</p>



<a name="220416335"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/239415-metaprogramming%20/%20tactics/topic/Allowing%20focussing%20on%20multiple%20goals%20in%20%60case%60/near/220416335" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/239415-metaprogramming-/-tactics/topic/Allowing.20focussing.20on.20multiple.20goals.20in.20.60case.60.html#220416335">(Dec 18 2020 at 19:16)</a>:</h4>
<p>I think it would be nice to have <code>work_on_goals</code> and not just <code>work_on_goal</code> for this, but usually you can phrase such proofs with <code>;</code> to pick out the goals just by having the tactic fail when it's not applicable</p>



<a name="220416428"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/239415-metaprogramming%20/%20tactics/topic/Allowing%20focussing%20on%20multiple%20goals%20in%20%60case%60/near/220416428" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/239415-metaprogramming-/-tactics/topic/Allowing.20focussing.20on.20multiple.20goals.20in.20.60case.60.html#220416428">(Dec 18 2020 at 19:16)</a>:</h4>
<p>the example is too minimal to reflect this</p>



<a name="220416518"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/239415-metaprogramming%20/%20tactics/topic/Allowing%20focussing%20on%20multiple%20goals%20in%20%60case%60/near/220416518" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/239415-metaprogramming-/-tactics/topic/Allowing.20focussing.20on.20multiple.20goals.20in.20.60case.60.html#220416518">(Dec 18 2020 at 19:17)</a>:</h4>
<p>Yury means this:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">example</span> <span class="o">(</span><span class="n">α</span> <span class="n">β</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">(</span><span class="n">i</span> <span class="n">j</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">⊕</span> <span class="n">β</span><span class="o">)</span> <span class="o">:</span> <span class="n">ℕ</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">rcases</span> <span class="o">⟨</span><span class="n">i</span><span class="o">,</span> <span class="n">j</span><span class="o">⟩</span> <span class="k">with</span> <span class="o">⟨</span><span class="n">i</span><span class="bp">|</span><span class="n">i</span><span class="o">,</span> <span class="n">j</span><span class="bp">|</span><span class="n">j</span><span class="o">⟩,</span>
  <span class="n">exacts</span> <span class="o">[</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">1</span><span class="o">]</span>
<span class="kd">end</span>
</code></pre></div>



<a name="220417970"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/239415-metaprogramming%20/%20tactics/topic/Allowing%20focussing%20on%20multiple%20goals%20in%20%60case%60/near/220417970" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/239415-metaprogramming-/-tactics/topic/Allowing.20focussing.20on.20multiple.20goals.20in.20.60case.60.html#220417970">(Dec 18 2020 at 19:31)</a>:</h4>
<p>I thought about <code>work_on_goals</code> too, although I wasn't sure where to insert unsolved goals back into the goals list</p>



<a name="220418109"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/239415-metaprogramming%20/%20tactics/topic/Allowing%20focussing%20on%20multiple%20goals%20in%20%60case%60/near/220418109" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/239415-metaprogramming-/-tactics/topic/Allowing.20focussing.20on.20multiple.20goals.20in.20.60case.60.html#220418109">(Dec 18 2020 at 19:32)</a>:</h4>
<p>Which is a problem, because it makes</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">work_on_goals</span> <span class="o">[</span><span class="mi">0</span><span class="o">,</span> <span class="mi">3</span><span class="o">]</span> <span class="o">{},</span>
<span class="n">work_on_goals</span> <span class="o">[</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">]</span> <span class="o">{},</span>
</code></pre></div>
<p>behave poorly if the tactic blocks change the number of goals</p>



<a name="220418258"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/239415-metaprogramming%20/%20tactics/topic/Allowing%20focussing%20on%20multiple%20goals%20in%20%60case%60/near/220418258" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/239415-metaprogramming-/-tactics/topic/Allowing.20focussing.20on.20multiple.20goals.20in.20.60case.60.html#220418258">(Dec 18 2020 at 19:33)</a>:</h4>
<p>Can <code>rcases</code> give me <code>hi</code> and <code>hj</code> for that case?</p>



<a name="220420575"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/239415-metaprogramming%20/%20tactics/topic/Allowing%20focussing%20on%20multiple%20goals%20in%20%60case%60/near/220420575" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/239415-metaprogramming-/-tactics/topic/Allowing.20focussing.20on.20multiple.20goals.20in.20.60case.60.html#220420575">(Dec 18 2020 at 19:53)</a>:</h4>
<p>I think you should try not to write tactic scripts like this</p>



<a name="220425933"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/239415-metaprogramming%20/%20tactics/topic/Allowing%20focussing%20on%20multiple%20goals%20in%20%60case%60/near/220425933" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/239415-metaprogramming-/-tactics/topic/Allowing.20focussing.20on.20multiple.20goals.20in.20.60case.60.html#220425933">(Dec 18 2020 at 20:44)</a>:</h4>
<p>Can you suggest an alternative for these lines?</p>
<p><a href="https://github.com/leanprover-community/mathlib/blob/f942f91ff4ae9f080f520d8093a0448cec334bf0/src/linear_algebra/alternating.lean#L546-L563">https://github.com/leanprover-community/mathlib/blob/f942f91ff4ae9f080f520d8093a0448cec334bf0/src/linear_algebra/alternating.lean#L546-L563</a></p>



<a name="220425985"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/239415-metaprogramming%20/%20tactics/topic/Allowing%20focussing%20on%20multiple%20goals%20in%20%60case%60/near/220425985" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/239415-metaprogramming-/-tactics/topic/Allowing.20focussing.20on.20multiple.20goals.20in.20.60case.60.html#220425985">(Dec 18 2020 at 20:45)</a>:</h4>
<p>I mean, I guess I could just expand all four cases and deal with the duplication</p>



<a name="220426008"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/239415-metaprogramming%20/%20tactics/topic/Allowing%20focussing%20on%20multiple%20goals%20in%20%60case%60/near/220426008" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/239415-metaprogramming-/-tactics/topic/Allowing.20focussing.20on.20multiple.20goals.20in.20.60case.60.html#220426008">(Dec 18 2020 at 20:45)</a>:</h4>
<p>But if I were doing this on paper, I'd want to group the similar goals</p>



<a name="224159487"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/239415-metaprogramming%20/%20tactics/topic/Allowing%20focussing%20on%20multiple%20goals%20in%20%60case%60/near/224159487" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/239415-metaprogramming-/-tactics/topic/Allowing.20focussing.20on.20multiple.20goals.20in.20.60case.60.html#224159487">(Jan 27 2021 at 09:54)</a>:</h4>
<p>Some more discussion <a href="#narrow/stream/113488-general/topic/Multiple.20case/near/224158120">in #general</a></p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>