---
layout: archive
title: Zulip Chat Archive
permalink: /stream/239415-metaprogramming-/-tactics/topic/squeeze_simp.20-.20match.20failed.3F!.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/239415-metaprogramming-/-tactics/index.html">metaprogramming / tactics</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/239415-metaprogramming-/-tactics/topic/squeeze_simp.20-.20match.20failed.3F!.html">squeeze_simp - match failed?!</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="269399249"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/239415-metaprogramming%20/%20tactics/topic/squeeze_simp%20-%20match%20failed%3F%21/near/269399249" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/239415-metaprogramming-/-tactics/topic/squeeze_simp.20-.20match.20failed.3F!.html#269399249">(Jan 26 2022 at 11:55)</a>:</h4>
<p>yeah, would much appreciate that. i'm currently really tempted to literally turn names into <code>expr.const ff</code>s which feels outstandingly wrong</p>



<a name="269429124"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/239415-metaprogramming%20/%20tactics/topic/squeeze_simp%20-%20match%20failed%3F%21/near/269429124" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/239415-metaprogramming-/-tactics/topic/squeeze_simp.20-.20match.20failed.3F!.html#269429124">(Jan 26 2022 at 15:28)</a>:</h4>
<p>hmm, so okay, if you write <code>squeeze_simp [_root_.asda, int.asda]</code> (using my MWE from above), you get that the <code>simp_arg_list</code> has <code>expr</code>s with the constructor <code>local_const int.asda int.asda (...)</code>. So I tried replacing the <code>resolve_name'</code> in <code>name.to_simp_args</code> with <code>get_local</code>, but now there isn't a <code>int.asda</code> local; which makes sense, I guess, but then how did those original <code>expr</code>s appear?</p>



<a name="269429616"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/239415-metaprogramming%20/%20tactics/topic/squeeze_simp%20-%20match%20failed%3F%21/near/269429616" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/239415-metaprogramming-/-tactics/topic/squeeze_simp.20-.20match.20failed.3F!.html#269429616">(Jan 26 2022 at 15:31)</a>:</h4>
<p>I just found the time to sit with the problem. First, just to check if we have the same ideas, how do you expect the tactic to react in this scenario?</p>
<p>Also, can a mod move this thread to <a class="stream" data-stream-id="239415" href="/#narrow/stream/239415-metaprogramming-.2F-tactics">#metaprogramming / tactics</a> ?</p>



<a name="269429647"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/239415-metaprogramming%20/%20tactics/topic/squeeze_simp%20-%20match%20failed%3F%21/near/269429647" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/239415-metaprogramming-/-tactics/topic/squeeze_simp.20-.20match.20failed.3F!.html#269429647">(Jan 26 2022 at 15:31)</a>:</h4>
<p>hmm, it seems that in the <code>simp_arg_list</code> they are <code>pexpr</code>s, but if I use <code>get_local</code> I have no choice but to get <code>expr</code>s. Is there any way to get <code>pexpr</code>s?</p>



<a name="269429799"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/239415-metaprogramming%20/%20tactics/topic/squeeze_simp%20-%20match%20failed%3F%21/near/269429799" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/239415-metaprogramming-/-tactics/topic/squeeze_simp.20-.20match.20failed.3F!.html#269429799">(Jan 26 2022 at 15:32)</a>:</h4>
<p>I didn't know that was a stream!</p>



<a name="269429897"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/239415-metaprogramming%20/%20tactics/topic/squeeze_simp%20-%20match%20failed%3F%21/near/269429897" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/239415-metaprogramming-/-tactics/topic/squeeze_simp.20-.20match.20failed.3F!.html#269429897">(Jan 26 2022 at 15:33)</a>:</h4>
<p>The hope is that if you <code>squeeze_simp</code> when you have something like <code>int.asda, _root_.asda</code> in the used simpset, <code>squeeze_simp</code> doesn't just crash completely. currently I've got a semi-working thing that doesn't crash, but prints <code>try this: simp only [asda, asda]</code> so you have to guess namespaces</p>



<a name="269430915"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/239415-metaprogramming%20/%20tactics/topic/squeeze_simp%20-%20match%20failed%3F%21/near/269430915" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/239415-metaprogramming-/-tactics/topic/squeeze_simp.20-.20match.20failed.3F!.html#269430915">(Jan 26 2022 at 15:39)</a>:</h4>
<p>this also seems to work, but seems similarly wrong:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">meta</span> <span class="kd">def</span> <span class="n">name.to_simp_args</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">name</span><span class="o">)</span> <span class="o">:</span> <span class="n">tactic</span> <span class="n">simp_arg_type</span> <span class="o">:=</span>
<span class="k">let</span> <span class="n">h</span> <span class="o">:=</span> <span class="bp">@</span><span class="n">expr.local_const</span> <span class="n">ff</span> <span class="n">n</span> <span class="n">n</span> <span class="o">(</span><span class="n">default</span><span class="o">)</span> <span class="o">(</span><span class="n">expr.var</span> <span class="mi">1</span><span class="o">)</span> <span class="k">in</span>
<span class="k">do</span> <span class="n">trace</span> <span class="bp">$</span> <span class="n">to_raw_fmt'</span> <span class="n">h</span><span class="o">,</span> <span class="n">return</span> <span class="bp">$</span> <span class="n">simp_arg_type.expr</span> <span class="n">h</span>
</code></pre></div>
<p>(ignore all the debugging stuff)</p>



<a name="269431431"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/239415-metaprogramming%20/%20tactics/topic/squeeze_simp%20-%20match%20failed%3F%21/near/269431431" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/239415-metaprogramming-/-tactics/topic/squeeze_simp.20-.20match.20failed.3F!.html#269431431">(Jan 26 2022 at 15:43)</a>:</h4>
<p>But we're expecting it so say <code>Try this: simp only [int.asda, asda, and_self]</code>, right?</p>



<a name="269431478"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/239415-metaprogramming%20/%20tactics/topic/squeeze_simp%20-%20match%20failed%3F%21/near/269431478" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/239415-metaprogramming-/-tactics/topic/squeeze_simp.20-.20match.20failed.3F!.html#269431478">(Jan 26 2022 at 15:43)</a>:</h4>
<p>(even after <code>open int</code>)</p>



<a name="269431550"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/239415-metaprogramming%20/%20tactics/topic/squeeze_simp%20-%20match%20failed%3F%21/near/269431550" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/239415-metaprogramming-/-tactics/topic/squeeze_simp.20-.20match.20failed.3F!.html#269431550">(Jan 26 2022 at 15:43)</a>:</h4>
<p>yes, with a <code>_root_</code> on the second <code>asda</code> because otherwise we'd get an overload resolution error</p>



<a name="269431638"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/239415-metaprogramming%20/%20tactics/topic/squeeze_simp%20-%20match%20failed%3F%21/near/269431638" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/239415-metaprogramming-/-tactics/topic/squeeze_simp.20-.20match.20failed.3F!.html#269431638">(Jan 26 2022 at 15:44)</a>:</h4>
<p>but honestly as long as it works, it's better than "match failed"</p>



<a name="269431827"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/239415-metaprogramming%20/%20tactics/topic/squeeze_simp%20-%20match%20failed%3F%21/near/269431827" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/239415-metaprogramming-/-tactics/topic/squeeze_simp.20-.20match.20failed.3F!.html#269431827">(Jan 26 2022 at 15:45)</a>:</h4>
<p>I think <code>name.to_simp_args</code> will need more information</p>



<a name="269432223"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/239415-metaprogramming%20/%20tactics/topic/squeeze_simp%20-%20match%20failed%3F%21/near/269432223" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/239415-metaprogramming-/-tactics/topic/squeeze_simp.20-.20match.20failed.3F!.html#269432223">(Jan 26 2022 at 15:48)</a>:</h4>
<p>doesn't it have the tactic state by virtue of being a tactic monad?</p>



<a name="269433178"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/239415-metaprogramming%20/%20tactics/topic/squeeze_simp%20-%20match%20failed%3F%21/near/269433178" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/239415-metaprogramming-/-tactics/topic/squeeze_simp.20-.20match.20failed.3F!.html#269433178">(Jan 26 2022 at 15:52)</a>:</h4>
<p>Right</p>



<a name="269433800"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/239415-metaprogramming%20/%20tactics/topic/squeeze_simp%20-%20match%20failed%3F%21/near/269433800" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/239415-metaprogramming-/-tactics/topic/squeeze_simp.20-.20match.20failed.3F!.html#269433800">(Jan 26 2022 at 15:55)</a>:</h4>
<p><span class="user-mention silent" data-user-id="284160">Eric Rodriguez</span> <a href="#narrow/stream/113488-general/topic/squeeze_simp.20-.20match.20failed.3F!/near/269429897">said</a>:</p>
<blockquote>
<p>The hope is that if you <code>squeeze_simp</code> when you have something like <code>int.asda, _root_.asda</code> in the used simpset, <code>squeeze_simp</code> doesn't just crash completely. currently I've got a semi-working thing that doesn't crash, but prints <code>try this: simp only [asda, asda]</code> so you have to guess namespaces</p>
</blockquote>
<p>How did you accomplish this?</p>



<a name="269433842"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/239415-metaprogramming%20/%20tactics/topic/squeeze_simp%20-%20match%20failed%3F%21/near/269433842" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/239415-metaprogramming-/-tactics/topic/squeeze_simp.20-.20match.20failed.3F!.html#269433842">(Jan 26 2022 at 15:55)</a>:</h4>
<p>you can see in my branch right now, but I just hand-craft the <code>pexpr</code></p>



<a name="269434089"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/239415-metaprogramming%20/%20tactics/topic/squeeze_simp%20-%20match%20failed%3F%21/near/269434089" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/239415-metaprogramming-/-tactics/topic/squeeze_simp.20-.20match.20failed.3F!.html#269434089">(Jan 26 2022 at 15:56)</a>:</h4>
<p>Oops, I forgot to change branches (I was on <code>master</code> <span aria-label="face palm" class="emoji emoji-1f926" role="img" title="face palm">:face_palm:</span> )</p>



<a name="269435284"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/239415-metaprogramming%20/%20tactics/topic/squeeze_simp%20-%20match%20failed%3F%21/near/269435284" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/239415-metaprogramming-/-tactics/topic/squeeze_simp.20-.20match.20failed.3F!.html#269435284">(Jan 26 2022 at 16:03)</a>:</h4>
<p>Alright, this is a good step. Now we need to do something about duplicated occurrences</p>



<a name="269445667"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/239415-metaprogramming%20/%20tactics/topic/squeeze_simp%20-%20match%20failed%3F%21/near/269445667" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/239415-metaprogramming-/-tactics/topic/squeeze_simp.20-.20match.20failed.3F!.html#269445667">(Jan 26 2022 at 17:05)</a>:</h4>
<p>Actually I think this is the best approach:</p>
<blockquote>
<p>a <code>resolve_name'</code> that will keep in the <code>_root_</code></p>
</blockquote>



<a name="269449302"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/239415-metaprogramming%20/%20tactics/topic/squeeze_simp%20-%20match%20failed%3F%21/near/269449302" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/239415-metaprogramming-/-tactics/topic/squeeze_simp.20-.20match.20failed.3F!.html#269449302">(Jan 26 2022 at 17:28)</a>:</h4>
<p><code>resolve_name</code> is c++, is the issue</p>



<a name="269450768"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/239415-metaprogramming%20/%20tactics/topic/squeeze_simp%20-%20match%20failed%3F%21/near/269450768" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/239415-metaprogramming-/-tactics/topic/squeeze_simp.20-.20match.20failed.3F!.html#269450768">(Jan 26 2022 at 17:37)</a>:</h4>
<p>honestly, maybe my latest approach with declaring them as a <code>local_const ff</code> is the right approach; that's how they're going to be read in the context, and if they don't work as a <code>local_const ff</code> then they just won't work at all</p>



<a name="269450857"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/239415-metaprogramming%20/%20tactics/topic/squeeze_simp%20-%20match%20failed%3F%21/near/269450857" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/239415-metaprogramming-/-tactics/topic/squeeze_simp.20-.20match.20failed.3F!.html#269450857">(Jan 26 2022 at 17:38)</a>:</h4>
<p>maybe the only thing missing is to also add <code>prepend_root_if_needed</code> to the tactic format name</p>



<a name="269451876"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/239415-metaprogramming%20/%20tactics/topic/squeeze_simp%20-%20match%20failed%3F%21/near/269451876" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/239415-metaprogramming-/-tactics/topic/squeeze_simp.20-.20match.20failed.3F!.html#269451876">(Jan 26 2022 at 17:44)</a>:</h4>
<p>yeah I was trying to write a <code>resolve_name''</code> that incorporates <code>prepend_root_if_needed</code></p>



<a name="269452018"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/239415-metaprogramming%20/%20tactics/topic/squeeze_simp%20-%20match%20failed%3F%21/near/269452018" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/239415-metaprogramming-/-tactics/topic/squeeze_simp.20-.20match.20failed.3F!.html#269452018">(Jan 26 2022 at 17:45)</a>:</h4>
<p>and drop this line from <code>squeeze_simp_core</code>:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">vs</span> <span class="bp">←</span> <span class="n">vs.mmap</span> <span class="n">prepend_root_if_needed</span><span class="o">,</span>
</code></pre></div>



<a name="269476422"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/239415-metaprogramming%20/%20tactics/topic/squeeze_simp%20-%20match%20failed%3F%21/near/269476422" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/239415-metaprogramming-/-tactics/topic/squeeze_simp.20-.20match.20failed.3F!.html#269476422">(Jan 26 2022 at 20:24)</a>:</h4>
<p><span class="user-mention" data-user-id="284160">@Eric Rodriguez</span> maybe we can have more control this way?</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">meta</span> <span class="kd">def</span> <span class="n">name.to_simp_args'</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">name</span><span class="o">)</span> <span class="o">:</span> <span class="n">tactic</span> <span class="n">simp_arg_type</span> <span class="o">:=</span>
<span class="k">do</span> <span class="n">x</span> <span class="bp">←</span> <span class="n">resolve_name'</span> <span class="n">n</span><span class="o">,</span>
<span class="n">return</span> <span class="bp">$</span> <span class="k">match</span> <span class="n">x</span> <span class="k">with</span>
  <span class="bp">|</span> <span class="n">expr.macro</span> <span class="n">m</span> <span class="n">l</span> <span class="o">:=</span> <span class="c1">-- m and l might add in some useful info?</span>
    <span class="c1">-- simp_arg_type.expr $ pexpr.mk_field_macro (@expr.const ff n []) `_root</span>
    <span class="c1">-- simp_arg_type.expr (@expr.macro ff m ([`_root_, n].map (λ n', to_pexpr $ mk_local n')))</span>
    <span class="n">simp_arg_type.expr</span> <span class="o">(</span><span class="bp">@</span><span class="n">expr.const</span> <span class="n">ff</span> <span class="o">(</span><span class="bp">`</span><span class="n">_root_</span> <span class="bp">++</span> <span class="n">n</span><span class="o">)</span> <span class="o">[])</span>
  <span class="bp">|</span> <span class="n">_</span> <span class="o">:=</span>
    <span class="n">simp_arg_type.expr</span> <span class="o">(</span><span class="bp">@</span><span class="n">expr.const</span> <span class="n">ff</span> <span class="n">n</span> <span class="o">[])</span>
  <span class="kd">end</span>
</code></pre></div>



<a name="269479789"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/239415-metaprogramming%20/%20tactics/topic/squeeze_simp%20-%20match%20failed%3F%21/near/269479789" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/239415-metaprogramming-/-tactics/topic/squeeze_simp.20-.20match.20failed.3F!.html#269479789">(Jan 26 2022 at 20:48)</a>:</h4>
<p>ooh, maybe this is the right way. maybe we can make it a function that is <code>resolve_name'</code> usually, but in the case of an overload it just prepends <code>_root_</code>?</p>



<a name="269483254"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/239415-metaprogramming%20/%20tactics/topic/squeeze_simp%20-%20match%20failed%3F%21/near/269483254" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/239415-metaprogramming-/-tactics/topic/squeeze_simp.20-.20match.20failed.3F!.html#269483254">(Jan 26 2022 at 21:14)</a>:</h4>
<p>oof, I'm stuck</p>



<a name="269485468"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/239415-metaprogramming%20/%20tactics/topic/squeeze_simp%20-%20match%20failed%3F%21/near/269485468" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/239415-metaprogramming-/-tactics/topic/squeeze_simp.20-.20match.20failed.3F!.html#269485468">(Jan 26 2022 at 21:30)</a>:</h4>
<p>what's the issue?</p>



<a name="269485484"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/239415-metaprogramming%20/%20tactics/topic/squeeze_simp%20-%20match%20failed%3F%21/near/269485484" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/239415-metaprogramming-/-tactics/topic/squeeze_simp.20-.20match.20failed.3F!.html#269485484">(Jan 26 2022 at 21:30)</a>:</h4>
<p>Okay, this approach won't help.<br>
When tracing <code>(@expr.const ff (</code>_root_ ++ n) [])` it prints:</p>
<div class="codehilite" data-code-language="Text only"><pre><span></span><code>_root_.int.asda
_root_.asda
_root_.and_self
</code></pre></div>
<p>Each of those is the consumed by <code>simp_arg_type.expr : pexpr → simp_arg_type</code><br>
Then, right after that, when tracing the results, it says:</p>
<div class="codehilite" data-code-language="Text only"><pre><span></span><code>[asda, asda, and_self]
</code></pre></div>
<p>So I believe something is happening inside <code>simp_arg_type.expr</code> that's getting rid of <code>_root_</code> without mercy</p>



<a name="269485623"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/239415-metaprogramming%20/%20tactics/topic/squeeze_simp%20-%20match%20failed%3F%21/near/269485623" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/239415-metaprogramming-/-tactics/topic/squeeze_simp.20-.20match.20failed.3F!.html#269485623">(Jan 26 2022 at 21:31)</a>:</h4>
<p>I'm resetting my branch to the state where you left it at</p>



<a name="269487411"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/239415-metaprogramming%20/%20tactics/topic/squeeze_simp%20-%20match%20failed%3F%21/near/269487411" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/239415-metaprogramming-/-tactics/topic/squeeze_simp.20-.20match.20failed.3F!.html#269487411">(Jan 26 2022 at 21:47)</a>:</h4>
<p>that's just the pretty printer</p>



<a name="269487430"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/239415-metaprogramming%20/%20tactics/topic/squeeze_simp%20-%20match%20failed%3F%21/near/269487430" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/239415-metaprogramming-/-tactics/topic/squeeze_simp.20-.20match.20failed.3F!.html#269487430">(Jan 26 2022 at 21:47)</a>:</h4>
<p>Hm</p>



<a name="269487433"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/239415-metaprogramming%20/%20tactics/topic/squeeze_simp%20-%20match%20failed%3F%21/near/269487433" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/239415-metaprogramming-/-tactics/topic/squeeze_simp.20-.20match.20failed.3F!.html#269487433">(Jan 26 2022 at 21:47)</a>:</h4>
<p>if you change the <code>has_to_string</code> instance to use <code>to_raw_fmt</code>, you'll see that it's still the right place</p>



<a name="269487470"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/239415-metaprogramming%20/%20tactics/topic/squeeze_simp%20-%20match%20failed%3F%21/near/269487470" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/239415-metaprogramming-/-tactics/topic/squeeze_simp.20-.20match.20failed.3F!.html#269487470">(Jan 26 2022 at 21:47)</a>:</h4>
<p>we do need to fight it at the end, but again I think even just getting <code>asda, asda</code> is an improvement over a crash</p>



<a name="269487538"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/239415-metaprogramming%20/%20tactics/topic/squeeze_simp%20-%20match%20failed%3F%21/near/269487538" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/239415-metaprogramming-/-tactics/topic/squeeze_simp.20-.20match.20failed.3F!.html#269487538">(Jan 26 2022 at 21:48)</a>:</h4>
<p>especially because at that point Lean will throw all the possible overloads at you and you can start to figure it out</p>



<a name="269487556"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/239415-metaprogramming%20/%20tactics/topic/squeeze_simp%20-%20match%20failed%3F%21/near/269487556" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/239415-metaprogramming-/-tactics/topic/squeeze_simp.20-.20match.20failed.3F!.html#269487556">(Jan 26 2022 at 21:48)</a>:</h4>
<p>it'd be nice to not have to do that but the pp works in mysterious ways</p>



<a name="269488003"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/239415-metaprogramming%20/%20tactics/topic/squeeze_simp%20-%20match%20failed%3F%21/near/269488003" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/239415-metaprogramming-/-tactics/topic/squeeze_simp.20-.20match.20failed.3F!.html#269488003">(Jan 26 2022 at 21:52)</a>:</h4>
<p>Maybe <code>simp_arg_type</code> needs something like <code>dotted_expr</code>?</p>



<a name="269488033"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/239415-metaprogramming%20/%20tactics/topic/squeeze_simp%20-%20match%20failed%3F%21/near/269488033" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/239415-metaprogramming-/-tactics/topic/squeeze_simp.20-.20match.20failed.3F!.html#269488033">(Jan 26 2022 at 21:52)</a>:</h4>
<p>the issue isn't <code>simp_arg_type</code>, it's <code>expr</code>'s to_string</p>



<a name="269488371"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/239415-metaprogramming%20/%20tactics/topic/squeeze_simp%20-%20match%20failed%3F%21/near/269488371" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/239415-metaprogramming-/-tactics/topic/squeeze_simp.20-.20match.20failed.3F!.html#269488371">(Jan 26 2022 at 21:55)</a>:</h4>
<p>but how would we indicate that <code>to_string</code> is not supposed to strip <code>_root_</code>?</p>



<a name="269488395"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/239415-metaprogramming%20/%20tactics/topic/squeeze_simp%20-%20match%20failed%3F%21/near/269488395" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/239415-metaprogramming-/-tactics/topic/squeeze_simp.20-.20match.20failed.3F!.html#269488395">(Jan 26 2022 at 21:55)</a>:</h4>
<p>make a custom <code>to_string</code>, I think</p>



<a name="269488494"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/239415-metaprogramming%20/%20tactics/topic/squeeze_simp%20-%20match%20failed%3F%21/near/269488494" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/239415-metaprogramming-/-tactics/topic/squeeze_simp.20-.20match.20failed.3F!.html#269488494">(Jan 26 2022 at 21:56)</a>:</h4>
<p>In C?</p>



<a name="269489370"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/239415-metaprogramming%20/%20tactics/topic/squeeze_simp%20-%20match%20failed%3F%21/near/269489370" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/239415-metaprogramming-/-tactics/topic/squeeze_simp.20-.20match.20failed.3F!.html#269489370">(Jan 26 2022 at 22:02)</a>:</h4>
<p>What if <code>prepend_root_if_needed</code> returns <code>tactic (name × bool)</code> indicating which ones needed the prepend?</p>



<a name="269489408"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/239415-metaprogramming%20/%20tactics/topic/squeeze_simp%20-%20match%20failed%3F%21/near/269489408" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/239415-metaprogramming-/-tactics/topic/squeeze_simp.20-.20match.20failed.3F!.html#269489408">(Jan 26 2022 at 22:02)</a>:</h4>
<p>i was thinking that and think it's a good idea</p>



<a name="269489445"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/239415-metaprogramming%20/%20tactics/topic/squeeze_simp%20-%20match%20failed%3F%21/near/269489445" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/239415-metaprogramming-/-tactics/topic/squeeze_simp.20-.20match.20failed.3F!.html#269489445">(Jan 26 2022 at 22:02)</a>:</h4>
<p>I was hoping we could swap the <code>pp</code> in <code>mk_suggestion</code> for a different method so we don't have to worry about this</p>



<a name="269489459"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/239415-metaprogramming%20/%20tactics/topic/squeeze_simp%20-%20match%20failed%3F%21/near/269489459" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/239415-metaprogramming-/-tactics/topic/squeeze_simp.20-.20match.20failed.3F!.html#269489459">(Jan 26 2022 at 22:03)</a>:</h4>
<p>but <code>&gt;&gt;=</code> is not one of the two monadic operators I know</p>



<a name="269489534"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/239415-metaprogramming%20/%20tactics/topic/squeeze_simp%20-%20match%20failed%3F%21/near/269489534" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/239415-metaprogramming-/-tactics/topic/squeeze_simp.20-.20match.20failed.3F!.html#269489534">(Jan 26 2022 at 22:03)</a>:</h4>
<p>I'm gonna brb, please let me know if this works</p>



<a name="269490059"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/239415-metaprogramming%20/%20tactics/topic/squeeze_simp%20-%20match%20failed%3F%21/near/269490059" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/239415-metaprogramming-/-tactics/topic/squeeze_simp.20-.20match.20failed.3F!.html#269490059">(Jan 26 2022 at 22:07)</a>:</h4>
<p><a href="/user_uploads/3121/0crxc2kO1V5UGRKA_ZUkIsMM/image.png">image.png</a> hmm, I think you're right that we just need to keep track of <code>root</code> independently</p>
<div class="message_inline_image"><a href="/user_uploads/3121/0crxc2kO1V5UGRKA_ZUkIsMM/image.png" title="image.png"><img src="/user_uploads/3121/0crxc2kO1V5UGRKA_ZUkIsMM/image.png"></a></div>



<a name="269490126"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/239415-metaprogramming%20/%20tactics/topic/squeeze_simp%20-%20match%20failed%3F%21/near/269490126" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/239415-metaprogramming-/-tactics/topic/squeeze_simp.20-.20match.20failed.3F!.html#269490126">(Jan 26 2022 at 22:08)</a>:</h4>
<p>I think the fix can be two-fold - keep track of <code>_root_</code> independently, and use <code>to_string</code> instead of <code>pp</code></p>



<a name="269490140"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/239415-metaprogramming%20/%20tactics/topic/squeeze_simp%20-%20match%20failed%3F%21/near/269490140" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/239415-metaprogramming-/-tactics/topic/squeeze_simp.20-.20match.20failed.3F!.html#269490140">(Jan 26 2022 at 22:08)</a>:</h4>
<p>i'll try this in a little bit and see what happens</p>



<a name="269491839"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/239415-metaprogramming%20/%20tactics/topic/squeeze_simp%20-%20match%20failed%3F%21/near/269491839" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/239415-metaprogramming-/-tactics/topic/squeeze_simp.20-.20match.20failed.3F!.html#269491839">(Jan 26 2022 at 22:20)</a>:</h4>
<p>Use to_string then the bool returns true, right? Otherwise use pp</p>



<a name="269492017"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/239415-metaprogramming%20/%20tactics/topic/squeeze_simp%20-%20match%20failed%3F%21/near/269492017" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/239415-metaprogramming-/-tactics/topic/squeeze_simp.20-.20match.20failed.3F!.html#269492017">(Jan 26 2022 at 22:22)</a>:</h4>
<p>no, <code>pp</code> also cuts off the <code>int.</code> (presumably because it's open)</p>



<a name="269492241"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/239415-metaprogramming%20/%20tactics/topic/squeeze_simp%20-%20match%20failed%3F%21/near/269492241" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/239415-metaprogramming-/-tactics/topic/squeeze_simp.20-.20match.20failed.3F!.html#269492241">(Jan 26 2022 at 22:24)</a>:</h4>
<p>Ah, right</p>



<a name="269498422"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/239415-metaprogramming%20/%20tactics/topic/squeeze_simp%20-%20match%20failed%3F%21/near/269498422" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/239415-metaprogramming-/-tactics/topic/squeeze_simp.20-.20match.20failed.3F!.html#269498422">(Jan 26 2022 at 23:23)</a>:</h4>
<p>Wait, I think it worked?<br>
<a href="/user_uploads/3121/Dsnwaq68us0Mf_Jg2GYrQdMF/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/3121/Dsnwaq68us0Mf_Jg2GYrQdMF/image.png" title="image.png"><img src="/user_uploads/3121/Dsnwaq68us0Mf_Jg2GYrQdMF/image.png"></a></div>



<a name="269498654"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/239415-metaprogramming%20/%20tactics/topic/squeeze_simp%20-%20match%20failed%3F%21/near/269498654" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/239415-metaprogramming-/-tactics/topic/squeeze_simp.20-.20match.20failed.3F!.html#269498654">(Jan 26 2022 at 23:25)</a>:</h4>
<p>omg! this is great news! what did you end up doing?</p>



<a name="269498716"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/239415-metaprogramming%20/%20tactics/topic/squeeze_simp%20-%20match%20failed%3F%21/near/269498716" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/239415-metaprogramming-/-tactics/topic/squeeze_simp.20-.20match.20failed.3F!.html#269498716">(Jan 26 2022 at 23:26)</a>:</h4>
<p>This is weird, I didn't do anything different from <a href="#narrow/stream/239415-metaprogramming-.2F.20tactics/topic/squeeze_simp.20-.20match.20failed.3F!/near/269490059">https://leanprover.zulipchat.com/#narrow/stream/239415-metaprogramming-.2F.20tactics/topic/squeeze_simp.20-.20match.20failed.3F!/near/269490059</a></p>



<a name="269498755"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/239415-metaprogramming%20/%20tactics/topic/squeeze_simp%20-%20match%20failed%3F%21/near/269498755" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/239415-metaprogramming-/-tactics/topic/squeeze_simp.20-.20match.20failed.3F!.html#269498755">(Jan 26 2022 at 23:27)</a>:</h4>
<p>ooh, I changed the <code>to_string</code> to <code>to_raw_fmt</code> for debugging</p>



<a name="269498774"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/239415-metaprogramming%20/%20tactics/topic/squeeze_simp%20-%20match%20failed%3F%21/near/269498774" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/239415-metaprogramming-/-tactics/topic/squeeze_simp.20-.20match.20failed.3F!.html#269498774">(Jan 26 2022 at 23:27)</a>:</h4>
<p>I should've checked it without that!!</p>



<a name="269498884"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/239415-metaprogramming%20/%20tactics/topic/squeeze_simp%20-%20match%20failed%3F%21/near/269498884" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/239415-metaprogramming-/-tactics/topic/squeeze_simp.20-.20match.20failed.3F!.html#269498884">(Jan 26 2022 at 23:28)</a>:</h4>
<p>wanna push? you solved it haha</p>



<a name="269498913"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/239415-metaprogramming%20/%20tactics/topic/squeeze_simp%20-%20match%20failed%3F%21/near/269498913" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/239415-metaprogramming-/-tactics/topic/squeeze_simp.20-.20match.20failed.3F!.html#269498913">(Jan 26 2022 at 23:28)</a>:</h4>
<p>no dw you were a massive help^^ I've got another branch open right now, too, so it'd be a massive pain ;b</p>



<a name="269498993"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/239415-metaprogramming%20/%20tactics/topic/squeeze_simp%20-%20match%20failed%3F%21/near/269498993" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/239415-metaprogramming-/-tactics/topic/squeeze_simp.20-.20match.20failed.3F!.html#269498993">(Jan 26 2022 at 23:29)</a>:</h4>
<p>This is the exact git diff:</p>
<div class="codehilite" data-code-language="Diff"><pre><span></span><code><span class="w">$ git diff</span>
<span class="gh">diff --git a/src/tactic/squeeze.lean b/src/tactic/squeeze.lean</span><span class="w"></span>
<span class="gh">index 20bad3d651..fa4bf57038 100644</span><span class="w"></span>
<span class="gd">--- a/src/tactic/squeeze.lean</span><span class="w"></span>
<span class="gi">+++ b/src/tactic/squeeze.lean</span><span class="w"></span>
<span class="gu">@@ -80,7 +80,7 @@ run_cmd squeeze_loc_attr.set ``squeeze_loc_attr_carrier none tt</span><span class="w"></span>
<span class="w"> </span>list entirely if it is empty. -/<span class="w"></span>
<span class="w"> </span>meta def render_simp_arg_list : list simp_arg_type → tactic format<span class="w"></span>
<span class="w"> </span>| [] := pure ""<span class="w"></span>
<span class="gd">-| args := (++) " " &lt;$&gt; to_line_wrap_format &lt;$&gt; args.mmap pp</span><span class="w"></span>
<span class="gi">+| args := (++) " " &lt;$&gt; to_line_wrap_format &lt;$&gt; pure (args.map to_string)</span><span class="w"></span>

<span class="w"> </span>/-- Emit a suggestion to the user. If inside a `squeeze_scope` block,<span class="w"></span>
<span class="w"> </span>the suggestions emitted through `mk_suggestion` will be aggregated so that<span class="w"></span>
</code></pre></div>
<p><span aria-label="joy" class="emoji emoji-1f602" role="img" title="joy">:joy:</span></p>



<a name="269499006"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/239415-metaprogramming%20/%20tactics/topic/squeeze_simp%20-%20match%20failed%3F%21/near/269499006" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/239415-metaprogramming-/-tactics/topic/squeeze_simp.20-.20match.20failed.3F!.html#269499006">(Jan 26 2022 at 23:29)</a>:</h4>
<p>Just that</p>



<a name="269499269"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/239415-metaprogramming%20/%20tactics/topic/squeeze_simp%20-%20match%20failed%3F%21/near/269499269" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/239415-metaprogramming-/-tactics/topic/squeeze_simp.20-.20match.20failed.3F!.html#269499269">(Jan 26 2022 at 23:32)</a>:</h4>
<p>I am also going to document why <code>pp</code> was problematic in the docstring of <code>render_simp_arg_list</code></p>



<a name="269499510"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/239415-metaprogramming%20/%20tactics/topic/squeeze_simp%20-%20match%20failed%3F%21/near/269499510" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/239415-metaprogramming-/-tactics/topic/squeeze_simp.20-.20match.20failed.3F!.html#269499510">(Jan 26 2022 at 23:35)</a>:</h4>
<p>Wanna try <a href="https://github.com/leanprover-community/mathlib/pull/3097">#3097</a> next?</p>



<a name="269499682"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/239415-metaprogramming%20/%20tactics/topic/squeeze_simp%20-%20match%20failed%3F%21/near/269499682" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/239415-metaprogramming-/-tactics/topic/squeeze_simp.20-.20match.20failed.3F!.html#269499682">(Jan 26 2022 at 23:37)</a>:</h4>
<p>oh, christ, I always assumed <code>simp</code> lemmas were order independent... i'll have a dig. also huge thanks to Rob for the metaprogramming in Lean stuff, I would've never gotten my head around this without him</p>



<a name="269500351"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/239415-metaprogramming%20/%20tactics/topic/squeeze_simp%20-%20match%20failed%3F%21/near/269500351" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/239415-metaprogramming-/-tactics/topic/squeeze_simp.20-.20match.20failed.3F!.html#269500351">(Jan 26 2022 at 23:44)</a>:</h4>
<p>Makes sense?</p>
<blockquote>
<p>Patch: <code>pp</code> was changed to <code>to_string</code> because it was getting rid of prefixes<br>
that would be necessary for some disambiguations.</p>
</blockquote>



<a name="269500497"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/239415-metaprogramming%20/%20tactics/topic/squeeze_simp%20-%20match%20failed%3F%21/near/269500497" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/239415-metaprogramming-/-tactics/topic/squeeze_simp.20-.20match.20failed.3F!.html#269500497">(Jan 26 2022 at 23:46)</a>:</h4>
<p>For <a href="https://github.com/leanprover-community/mathlib/pull/3097">#3097</a> maybe squeeze simp could just check its output works (either in the sense of not failing or in the sense of giving the same result as the original simp call), seeing as this should be a simp only it may well be fast enough, and otherwise apply a random permutation and try again.</p>



<a name="269501035"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/239415-metaprogramming%20/%20tactics/topic/squeeze_simp%20-%20match%20failed%3F%21/near/269501035" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/239415-metaprogramming-/-tactics/topic/squeeze_simp.20-.20match.20failed.3F!.html#269501035">(Jan 26 2022 at 23:53)</a>:</h4>
<p>ahh, bogosort ;b</p>



<a name="269501495"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/239415-metaprogramming%20/%20tactics/topic/squeeze_simp%20-%20match%20failed%3F%21/near/269501495" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/239415-metaprogramming-/-tactics/topic/squeeze_simp.20-.20match.20failed.3F!.html#269501495">(Jan 26 2022 at 23:58)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib/pull/11659">#11659</a> should be ready for review already <span aria-label="octopus" class="emoji emoji-1f419" role="img" title="octopus">:octopus:</span></p>



<a name="269502014"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/239415-metaprogramming%20/%20tactics/topic/squeeze_simp%20-%20match%20failed%3F%21/near/269502014" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/239415-metaprogramming-/-tactics/topic/squeeze_simp.20-.20match.20failed.3F!.html#269502014">(Jan 27 2022 at 00:02)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span>, do you know if the issue can happen with non-<code>rfl</code> lemmas?</p>



<a name="269502025"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/239415-metaprogramming%20/%20tactics/topic/squeeze_simp%20-%20match%20failed%3F%21/near/269502025" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/239415-metaprogramming-/-tactics/topic/squeeze_simp.20-.20match.20failed.3F!.html#269502025">(Jan 27 2022 at 00:02)</a>:</h4>
<p>it may be a bit easier to debug it that way</p>



<a name="269502283"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/239415-metaprogramming%20/%20tactics/topic/squeeze_simp%20-%20match%20failed%3F%21/near/269502283" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/239415-metaprogramming-/-tactics/topic/squeeze_simp.20-.20match.20failed.3F!.html#269502283">(Jan 27 2022 at 00:04)</a>:</h4>
<p>If we want <code>squeeze_simp</code> to try harder, maybe we can't do much better than trying every permutation?</p>



<a name="269503031"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/239415-metaprogramming%20/%20tactics/topic/squeeze_simp%20-%20match%20failed%3F%21/near/269503031" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/239415-metaprogramming-/-tactics/topic/squeeze_simp.20-.20match.20failed.3F!.html#269503031">(Jan 27 2022 at 00:12)</a>:</h4>
<p>I think we could continue the conversation about the other issue <a href="#narrow/stream/113488-general/topic/squeeze_simp.20times.20out/near/201133887">here</a> and ask a mod to move that thread to this stream as well</p>



<a name="269543675"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/239415-metaprogramming%20/%20tactics/topic/squeeze_simp%20-%20match%20failed%3F%21/near/269543675" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/239415-metaprogramming-/-tactics/topic/squeeze_simp.20-.20match.20failed.3F!.html#269543675">(Jan 27 2022 at 09:16)</a>:</h4>
<p>I don't know anything, I just keep track of times when squeeze_simp fails because this causes problems for my students!</p>



<a name="269589983"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/239415-metaprogramming%20/%20tactics/topic/squeeze_simp%20-%20match%20failed%3F%21/near/269589983" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/239415-metaprogramming-/-tactics/topic/squeeze_simp.20-.20match.20failed.3F!.html#269589983">(Jan 27 2022 at 15:35)</a>:</h4>
<p>The fix is ready for review <a href="https://github.com/leanprover-community/mathlib/pull/11696">#11696</a><br>
<span class="user-mention" data-user-id="110596">@Rob Lewis</span> can you also take a look at this one? <span aria-label="pray" class="emoji emoji-1f64f" role="img" title="pray">:pray:</span></p>



<a name="269593984"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/239415-metaprogramming%20/%20tactics/topic/squeeze_simp%20-%20match%20failed%3F%21/near/269593984" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/239415-metaprogramming-/-tactics/topic/squeeze_simp.20-.20match.20failed.3F!.html#269593984">(Jan 27 2022 at 16:01)</a>:</h4>
<p>I'll find time later today!</p>



<a name="269624481"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/239415-metaprogramming%20/%20tactics/topic/squeeze_simp%20-%20match%20failed%3F%21/near/269624481" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/239415-metaprogramming-/-tactics/topic/squeeze_simp.20-.20match.20failed.3F!.html#269624481">(Jan 27 2022 at 19:26)</a>:</h4>
<p>OT: Arthur you are quite inspiring :)</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>