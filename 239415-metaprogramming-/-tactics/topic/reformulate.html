---
layout: archive
title: Zulip Chat Archive
permalink: /stream/239415-metaprogramming-/-tactics/topic/reformulate.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/239415-metaprogramming-/-tactics/index.html">metaprogramming / tactics</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/239415-metaprogramming-/-tactics/topic/reformulate.html">reformulate</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="207819856"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/239415-metaprogramming%20/%20tactics/topic/reformulate/near/207819856" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/239415-metaprogramming-/-tactics/topic/reformulate.html#207819856">(Aug 24 2020 at 08:46)</a>:</h4>
<p><span class="user-mention" data-user-id="110087">@Scott Morrison</span> so you think you could offer us a variation on <code>library_search</code> that would search only for lemmas asserting the goal or the targeted assumption is equivalent to something else? For instance, if my goal is uniform continuity of a function between metric spaces, then I want to type <code>reformulate</code> and see a list of suggestions including <a href="https://leanprover-community.github.io/mathlib_docs/find/metric.uniform_continuous_iff">docs#metric.uniform_continuous_iff</a> (ideally suggestions would be clickable and include the reformulated goal), and the same with <code>reformulate at h</code>.</p>



<a name="207836241"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/239415-metaprogramming%20/%20tactics/topic/reformulate/near/207836241" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/239415-metaprogramming-/-tactics/topic/reformulate.html#207836241">(Aug 24 2020 at 12:22)</a>:</h4>
<p>I heard someone talk about a work-in-progress <code>rw_hint</code> that seemed like the same idea</p>



<a name="207836874"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/239415-metaprogramming%20/%20tactics/topic/reformulate/near/207836874" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/239415-metaprogramming-/-tactics/topic/reformulate.html#207836874">(Aug 24 2020 at 12:28)</a>:</h4>
<p>This also sounds like the core part of <code>rewrite_search</code>, but with a human doing the search part</p>



<a name="207837835"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/239415-metaprogramming%20/%20tactics/topic/reformulate/near/207837835" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/239415-metaprogramming-/-tactics/topic/reformulate.html#207837835">(Aug 24 2020 at 12:39)</a>:</h4>
<p>No, I'm asking for a much stupider thing, no recursion into subterm involved.</p>



<a name="207837968"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/239415-metaprogramming%20/%20tactics/topic/reformulate/near/207837968" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/239415-metaprogramming-/-tactics/topic/reformulate.html#207837968">(Aug 24 2020 at 12:40)</a>:</h4>
<p>In principle I'm mostly targeting the case of "here are ten definitions of the same thing, I don't want to know which one is <em>the</em> definition".</p>



<a name="207838017"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/239415-metaprogramming%20/%20tactics/topic/reformulate/near/207838017" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/239415-metaprogramming-/-tactics/topic/reformulate.html#207838017">(Aug 24 2020 at 12:41)</a>:</h4>
<p>This sounds like <code>suggest</code> but filtered to only <code>iff.mp/mpr</code> applications, right?</p>



<a name="207838023"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/239415-metaprogramming%20/%20tactics/topic/reformulate/near/207838023" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/239415-metaprogramming-/-tactics/topic/reformulate.html#207838023">(Aug 24 2020 at 12:41)</a>:</h4>
<p>And also working on hypotheses.</p>



<a name="207838089"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/239415-metaprogramming%20/%20tactics/topic/reformulate/near/207838089" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/239415-metaprogramming-/-tactics/topic/reformulate.html#207838089">(Aug 24 2020 at 12:42)</a>:</h4>
<p>Yes, but it would return only relevant stuff.</p>



<a name="207844440"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/239415-metaprogramming%20/%20tactics/topic/reformulate/near/207844440" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/239415-metaprogramming-/-tactics/topic/reformulate.html#207844440">(Aug 24 2020 at 13:45)</a>:</h4>
<p>I guess "return only relevant stuff" is something one can make incremental progress on by improving the heuristic for ranking by relevance</p>



<a name="207844618"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/239415-metaprogramming%20/%20tactics/topic/reformulate/near/207844618" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/239415-metaprogramming-/-tactics/topic/reformulate.html#207844618">(Aug 24 2020 at 13:47)</a>:</h4>
<p>Ranking by the number of new goals generated seems like a good metric. An application of <code>iff.mp</code> that results in no extra goals seems like a reformulation, by definition.</p>



<a name="207954923"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/239415-metaprogramming%20/%20tactics/topic/reformulate/near/207954923" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/239415-metaprogramming-/-tactics/topic/reformulate.html#207954923">(Aug 25 2020 at 12:15)</a>:</h4>
<p>There is no ranking involved in my proposal. If the tactic only matches exactly the goal (or assumption), relevance is automatic (modulo side condition), that's the point.</p>



<a name="207956304"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/239415-metaprogramming%20/%20tactics/topic/reformulate/near/207956304" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/239415-metaprogramming-/-tactics/topic/reformulate.html#207956304">(Aug 25 2020 at 12:32)</a>:</h4>
<p>Then I don't understand your comment here:<br>
<span class="user-mention silent" data-user-id="110031">Patrick Massot</span> <a href="#narrow/stream/239415-metaprogramming-.2F.20tactics/topic/reformulate/near/207838089">said</a>:</p>
<blockquote>
<p>Yes, but it would return only relevant stuff.</p>
</blockquote>
<p>It sounds like you're exactly describing <code>suggest</code> filtered to only <code>iff.mp/mpr</code> applications, also working on hypotheses.</p>



<a name="207956920"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/239415-metaprogramming%20/%20tactics/topic/reformulate/near/207956920" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/239415-metaprogramming-/-tactics/topic/reformulate.html#207956920">(Aug 25 2020 at 12:38)</a>:</h4>
<p>Yes, that's why I hope it would be a trivial exercise for Scott (or anyone understand how suggest works).</p>



<a name="207956953"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/239415-metaprogramming%20/%20tactics/topic/reformulate/near/207956953" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/239415-metaprogramming-/-tactics/topic/reformulate.html#207956953">(Aug 25 2020 at 12:39)</a>:</h4>
<p>Well, there is extra credit if the tactic displays what the new goal/assumption would be, and I don't think suggest does that.</p>



<a name="210287887"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/239415-metaprogramming%20/%20tactics/topic/reformulate/near/210287887" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/239415-metaprogramming-/-tactics/topic/reformulate.html#210287887">(Sep 16 2020 at 16:36)</a>:</h4>
<p>If we have 10 equivalent definitions, then probably we have a <code>tfae</code>, not many <code>iff</code>s.</p>



<a name="210290861"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/239415-metaprogramming%20/%20tactics/topic/reformulate/near/210290861" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/239415-metaprogramming-/-tactics/topic/reformulate.html#210290861">(Sep 16 2020 at 17:02)</a>:</h4>
<p>The tactic would be useful even if we have a couple of iff. And, more importantly, they can have different assumptions. For instance uniform continuity can be reformulated differently for general uniform spaces, metric spaces, normed spaces.</p>



<a name="210291393"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/239415-metaprogramming%20/%20tactics/topic/reformulate/near/210291393" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/239415-metaprogramming-/-tactics/topic/reformulate.html#210291393">(Sep 16 2020 at 17:06)</a>:</h4>
<p>I meant that the tactic should show <code>tfae.get</code> too</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>