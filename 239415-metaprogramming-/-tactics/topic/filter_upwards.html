---
layout: archive
title: Zulip Chat Archive
permalink: /stream/239415-metaprogramming-/-tactics/topic/filter_upwards.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/239415-metaprogramming-/-tactics/index.html">metaprogramming / tactics</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/239415-metaprogramming-/-tactics/topic/filter_upwards.html">filter_upwards</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="268988548"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/239415-metaprogramming%20/%20tactics/topic/filter_upwards/near/268988548" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/239415-metaprogramming-/-tactics/topic/filter_upwards.html#268988548">(Jan 23 2022 at 00:59)</a>:</h4>
<p>The tactic <a href="https://leanprover-community.github.io/mathlib_docs/find/tactic.interactive.filter_upwards">docs#tactic.interactive.filter_upwards</a> converts the goal to the form <code>∀ x, x ∈ t1 → ⋯ → x ∈ tn → x ∈ s</code>.  So it is followed 99% of the time (eg, every time at a random sample I took in mathlib) by <code>intros</code>.</p>
<p>Perhaps we could have syntax <code>filter_upwards [...] with x h1 h2</code> which performs the <code>intros</code> step at the same time?</p>



<a name="268993481"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/239415-metaprogramming%20/%20tactics/topic/filter_upwards/near/268993481" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/239415-metaprogramming-/-tactics/topic/filter_upwards.html#268993481">(Jan 23 2022 at 03:09)</a>:</h4>
<p>sounds good to me. The <code>filter_upwards [...] e</code> syntax is also odd and could be replaced by <code>filter_upwards [...] using e</code></p>



<a name="268993692"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/239415-metaprogramming%20/%20tactics/topic/filter_upwards/near/268993692" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/239415-metaprogramming-/-tactics/topic/filter_upwards.html#268993692">(Jan 23 2022 at 03:15)</a>:</h4>
<p>I've opened issue <a href="https://github.com/leanprover-community/mathlib/pull/11616">#11616</a> for this and will try it in a few weeks if someone else doesn't get there first!</p>



<a name="269016547"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/239415-metaprogramming%20/%20tactics/topic/filter_upwards/near/269016547" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/239415-metaprogramming-/-tactics/topic/filter_upwards.html#269016547">(Jan 23 2022 at 13:01)</a>:</h4>
<p>May I give it a try? This is what I'm trying to learn at the moment <span aria-label="pray" class="emoji emoji-1f64f" role="img" title="pray">:pray:</span></p>



<a name="269017919"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/239415-metaprogramming%20/%20tactics/topic/filter_upwards/near/269017919" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/239415-metaprogramming-/-tactics/topic/filter_upwards.html#269017919">(Jan 23 2022 at 13:34)</a>:</h4>
<p>When combining both improvements, should it be said <code>filter_upwards [...] with ... using ...</code> or <code>filter_upwards [...] using ... with ...</code>?</p>



<a name="269019490"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/239415-metaprogramming%20/%20tactics/topic/filter_upwards/near/269019490" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/239415-metaprogramming-/-tactics/topic/filter_upwards.html#269019490">(Jan 23 2022 at 14:07)</a>:</h4>
<p>Ah, <code>using ...</code> tries to close the goal with <code>exact ...</code> so I'm guessing the former is more appropriate</p>



<a name="269019529"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/239415-metaprogramming%20/%20tactics/topic/filter_upwards/near/269019529" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/239415-metaprogramming-/-tactics/topic/filter_upwards.html#269019529">(Jan 23 2022 at 14:08)</a>:</h4>
<p>(deleted)</p>



<a name="269028200"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/239415-metaprogramming%20/%20tactics/topic/filter_upwards/near/269028200" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/239415-metaprogramming-/-tactics/topic/filter_upwards.html#269028200">(Jan 23 2022 at 17:10)</a>:</h4>
<p>I'm noticing that there are more occurrences of <code>assume ...</code> after <code>filter_upwards [...]</code> than <code>intros ...</code></p>



<a name="269028606"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/239415-metaprogramming%20/%20tactics/topic/filter_upwards/near/269028606" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/239415-metaprogramming-/-tactics/topic/filter_upwards.html#269028606">(Jan 23 2022 at 17:20)</a>:</h4>
<p>Maybe not more, but I can't tell which one occurs more often</p>



<a name="269028780"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/239415-metaprogramming%20/%20tactics/topic/filter_upwards/near/269028780" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/239415-metaprogramming-/-tactics/topic/filter_upwards.html#269028780">(Jan 23 2022 at 17:24)</a>:</h4>
<p>Please don't forget to update the docstring.</p>



<a name="269028901"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/239415-metaprogramming%20/%20tactics/topic/filter_upwards/near/269028901" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/239415-metaprogramming-/-tactics/topic/filter_upwards.html#269028901">(Jan 23 2022 at 17:27)</a>:</h4>
<p><code>assume</code> is the same as <code>intros</code> though :)</p>



<a name="269029060"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/239415-metaprogramming%20/%20tactics/topic/filter_upwards/near/269029060" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/239415-metaprogramming-/-tactics/topic/filter_upwards.html#269029060">(Jan 23 2022 at 17:30)</a>:</h4>
<p>You may also want to check for λ s after <code>filter_upwards</code>, since an <code>intros</code> can be replaced by <code>refine λ ..., ...</code>.  <span aria-label="shrug" class="emoji emoji-1f937" role="img" title="shrug">:shrug:</span></p>



<a name="269030213"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/239415-metaprogramming%20/%20tactics/topic/filter_upwards/near/269030213" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/239415-metaprogramming-/-tactics/topic/filter_upwards.html#269030213">(Jan 23 2022 at 17:53)</a>:</h4>
<p><span class="user-group-mention" data-user-group-id="2494">@maintainers</span> I've tried to keep track of these PRs but it's hard to know when they land. Can we have a rule that anything that adds a new interactive tactic or changes tactic syntax be tagged as <strong>modifies-tactic-syntax</strong>? That will make it easier to review these for mathport/mathlib4 updates</p>



<a name="269030298"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/239415-metaprogramming%20/%20tactics/topic/filter_upwards/near/269030298" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/239415-metaprogramming-/-tactics/topic/filter_upwards.html#269030298">(Jan 23 2022 at 17:55)</a>:</h4>
<p>They should at least be tagged <code>meta</code>. I don't think there are that many PRs tagged with <code>meta</code>. Does that already help?</p>



<a name="269030724"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/239415-metaprogramming%20/%20tactics/topic/filter_upwards/near/269030724" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/239415-metaprogramming-/-tactics/topic/filter_upwards.html#269030724">(Jan 23 2022 at 18:02)</a>:</h4>
<p>It's only a small fraction of <code>meta</code> issues. I'm going through now and marking them</p>



<a name="269040604"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/239415-metaprogramming%20/%20tactics/topic/filter_upwards/near/269040604" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/239415-metaprogramming-/-tactics/topic/filter_upwards.html#269040604">(Jan 23 2022 at 21:39)</a>:</h4>
<p>The bulk of the PR is finished: <a href="https://github.com/leanprover-community/mathlib/pull/11624">#11624</a><br>
I'm just fixing the errors that the CI tests find, but you can already check the changes.</p>



<a name="269239511"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/239415-metaprogramming%20/%20tactics/topic/filter_upwards/near/269239511" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/239415-metaprogramming-/-tactics/topic/filter_upwards.html#269239511">(Jan 25 2022 at 10:52)</a>:</h4>
<p>And it's merged :)</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>