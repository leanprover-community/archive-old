---
layout: archive
title: Zulip Chat Archive
permalink: /stream/304774-FLT-regular/topic/Case.20I.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/index.html">FLT regular</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html">Case I</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="297542114"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/297542114" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#297542114">(Sep 07 2022 at 08:18)</a>:</h4>
<p>We should be ready to think about a strategy to attack case I.<br>
Looking at the blueprint, the first sorried result is</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">flt_fact_2</span> <span class="o">{</span><span class="n">p</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">}</span> <span class="o">[</span><span class="n">fact</span> <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span><span class="bp">.</span><span class="n">prime</span><span class="o">]</span> <span class="o">(</span><span class="n">ph</span> <span class="o">:</span> <span class="mi">5</span> <span class="bp">≤</span> <span class="n">p</span><span class="o">)</span> <span class="o">{</span><span class="n">x</span> <span class="n">y</span> <span class="n">z</span> <span class="o">:</span> <span class="n">ℤ</span><span class="o">}</span> <span class="o">{</span><span class="n">i</span> <span class="n">j</span> <span class="o">:</span> <span class="n">ℤ</span><span class="o">}</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">i</span> <span class="bp">≠</span> <span class="n">j</span><span class="o">)</span>
  <span class="o">(</span><span class="n">hp</span> <span class="o">:</span> <span class="n">is_coprime</span> <span class="n">x</span> <span class="n">y</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">p</span> <span class="bp">+</span> <span class="n">y</span> <span class="bp">^</span> <span class="n">p</span> <span class="bp">=</span> <span class="n">z</span> <span class="bp">^</span> <span class="n">p</span><span class="o">)</span> <span class="o">:</span> <span class="n">flt_ideals</span> <span class="n">n</span> <span class="n">x</span> <span class="n">y</span> <span class="n">i</span> <span class="bp">+</span> <span class="n">flt_ideals</span> <span class="n">n</span> <span class="n">x</span> <span class="n">y</span> <span class="n">j</span> <span class="bp">=</span> <span class="bp">⊤</span> <span class="o">:=</span>
</code></pre></div>
<p>is anyone working/interested in working on this?</p>



<a name="297544611"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/297544611" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#297544611">(Sep 07 2022 at 08:37)</a>:</h4>
<p>(note that I am renaming it to <code>flt_ideals_coprime</code>.)</p>



<a name="297598494"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/297598494" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#297598494">(Sep 07 2022 at 14:05)</a>:</h4>
<p>I think the definition of <code>flt_ideals</code> was not yet too sure. I'm not sure how much time I'll have in the near future, but I'm trying to get the splitting field diamond merged in the background</p>



<a name="297599147"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/297599147" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#297599147">(Sep 07 2022 at 14:08)</a>:</h4>
<p>This is already very nice! Can you link the PRs here?</p>



<a name="297599896"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/297599896" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#297599896">(Sep 07 2022 at 14:12)</a>:</h4>
<p>I'm happy to have a go at this, maybe on the weekend, I've written some similarish proofs recently so hopefully it'll be ok (famous last words)</p>



<a name="297600348"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/297600348" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#297600348">(Sep 07 2022 at 14:15)</a>:</h4>
<p>The current one holding stuff up is Anne's <a href="https://github.com/leanprover-community/mathlib/pull/16123">#16123</a>, <a href="https://github.com/leanprover-community/mathlib/pull/16132">#16132</a> also by Anne continues this theme <del>but I'm not super sure whether it;'s necessary for the proof</del> and is necessary for the fix.  When these are merged, I'll be able to PR the diamond fix properly</p>



<a name="297602283"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/297602283" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#297602283">(Sep 07 2022 at 14:27)</a>:</h4>
<p>The definition of <code>flt_ideals</code> looks reasonable to me. Maybe there is no need to use <code>zeta_runity</code>, and <code>zeta</code> is enough.</p>



<a name="297602365"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/297602365" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#297602365">(Sep 07 2022 at 14:27)</a>:</h4>
<p>We can generalize it to the ring of integers of any cyclotomic extension of <code>ℚ</code>, but I don't thinks it is necessary.</p>



<a name="297995900"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/297995900" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#297995900">(Sep 09 2022 at 15:15)</a>:</h4>
<p>Also, we are missing the statement of Lemma 4.4 (that is called <code>exists_int_sum_eq_zero</code> in the tex file, I suggest to keep the same name in Lean) and Lemma 4.5 (called <code>may_assume_coprime</code>). Then all the statements leading to case I will be formalized.</p>



<a name="297995961"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/297995961" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#297995961">(Sep 09 2022 at 15:15)</a>:</h4>
<p>I will do this next week if nobody does it during the weekend.</p>



<a name="301179223"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/301179223" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#301179223">(Sep 28 2022 at 08:19)</a>:</h4>
<p><span class="user-mention" data-user-id="389019">@Chris Birkbeck</span> Am I right in saying that in lemma 4.3 of the blueprint we need to assume that <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>a</mi><mi>i</mi></msub><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">a_i = 0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span></span></span></span> for some <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6595em;"></span><span class="mord mathnormal">i</span></span></span></span>? Otherwise I don't understand the proof...</p>



<a name="301180377"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/301180377" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#301180377">(Sep 28 2022 at 08:27)</a>:</h4>
<p>I am actually even more confused: you write <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>α</mi><mo>=</mo><msub><mi>a</mi><mn>0</mn></msub><mo>+</mo><msub><mi>a</mi><mn>1</mn></msub><mi>ζ</mi><mo>+</mo><mo>⋯</mo><mo>+</mo><msub><mi>a</mi><mrow><mi>p</mi><mo>−</mo><mn>1</mn></mrow></msub><msup><mi>ζ</mi><mrow><mi>p</mi><mo>−</mo><mn>1</mn></mrow></msup></mrow><annotation encoding="application/x-tex">\alpha = a_0 + a_1 \zeta + \cdots + a_{p-1}\zeta^{p-1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.0037em;">α</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathnormal" style="margin-right:0.07378em;">ζ</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="minner">⋯</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.1002em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">p</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07378em;">ζ</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">p</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span></span></span></span>,  but we can always suppose that <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>a</mi><mrow><mi>p</mi><mo>−</mo><mn>1</mn></mrow></msub><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">a_{p-1} = 0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7167em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">p</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span></span></span></span>, since the other already form  a basis. Let me think a little bit.</p>



<a name="301180633"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/301180633" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#301180633">(Sep 28 2022 at 08:28)</a>:</h4>
<p>Oh, you mean that you take <em>any</em> way of writing <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>α</mi></mrow><annotation encoding="application/x-tex">\alpha</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.0037em;">α</span></span></span></span> in that way, the <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>a</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">a_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>'s are not coordinates.</p>



<a name="301180763"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/301180763" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#301180763">(Sep 28 2022 at 08:29)</a>:</h4>
<p>So I need to change the Lean statement.</p>



<a name="301181344"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/301181344" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#301181344">(Sep 28 2022 at 08:33)</a>:</h4>
<p>In any case the assumption <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>a</mi><mi>i</mi></msub><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">a_i = 0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span></span></span></span> for some <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6595em;"></span><span class="mord mathnormal">i</span></span></span></span> seems necessary (and Washington has it).</p>



<a name="301630791"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/301630791" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#301630791">(Sep 30 2022 at 12:12)</a>:</h4>
<p>The proof is now formalized.</p>



<a name="301631250"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/301631250" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Birkbeck <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#301631250">(Sep 30 2022 at 12:15)</a>:</h4>
<p>Oh amazing!</p>



<a name="301631456"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/301631456" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#301631456">(Sep 30 2022 at 12:16)</a>:</h4>
<p>Interestingly enough, I had to modify the proof written in the blueprint. The sentence "any subset of <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">{</mo><mn>1</mn><mo separator="true">,</mo><mi>ζ</mi><mo separator="true">,</mo><mo>…</mo><mo separator="true">,</mo><msup><mi>ζ</mi><mrow><mi>p</mi><mo>−</mo><mn>1</mn></mrow></msup><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">\{1,\zeta, \ldots, \zeta^{p-1}\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0641em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.07378em;">ζ</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner">…</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07378em;">ζ</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">p</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span><span class="mclose">}</span></span></span></span> with <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi><mo>−</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">p-1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7778em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">p</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span> elements is a <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="double-struck">Z</mi></mrow><annotation encoding="application/x-tex">\mathbb{Z}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6889em;"></span><span class="mord mathbb">Z</span></span></span></span>-basis of the ring of integers" is the typical thing that it is a nightmare to formalize.</p>



<a name="301631840"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/301631840" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Birkbeck <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#301631840">(Sep 30 2022 at 12:18)</a>:</h4>
<p>Yeah, I'm sorry, maybe I sloppy there</p>



<a name="301632804"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/301632804" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#301632804">(Sep 30 2022 at 12:23)</a>:</h4>
<p>It's mathematically OK (Washington does the same), it's just that "basis" is a strange concept. Anyway, do you confirm we can assume <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>a</mi><mi>i</mi></msub><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">a_i=0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span></span></span></span> for some <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6595em;"></span><span class="mord mathnormal">i</span></span></span></span>?</p>



<a name="301634093"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/301634093" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#301634093">(Sep 30 2022 at 12:29)</a>:</h4>
<p>Also, <code>p &gt; 3</code> is not needed.</p>



<a name="301635090"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/301635090" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Birkbeck <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#301635090">(Sep 30 2022 at 12:32)</a>:</h4>
<p>Yes I think thats fine. Also it should say "any subset of p-2 elements" in the blueprint, thats a typo</p>



<a name="301635235"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/301635235" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Birkbeck <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#301635235">(Sep 30 2022 at 12:33)</a>:</h4>
<p><span class="user-mention silent" data-user-id="130384">Riccardo Brasca</span> <a href="#narrow/stream/304774-FLT-regular/topic/Case.20I/near/301634093">said</a>:</p>
<blockquote>
<p>Also, <code>p &gt; 3</code> is not needed.</p>
</blockquote>
<p>oh yes nice, I think I just added it since we had it for the final goal</p>



<a name="301636330"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/301636330" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#301636330">(Sep 30 2022 at 12:38)</a>:</h4>
<p>My next step is to (state and) prove Lemma 4.4 and Lemma 4.5. I think it is better to wait before proving Lemma 4.1, since the statement may need to be modified, and so it's probably a good idea to use it to prove Case I.</p>



<a name="301642439"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/301642439" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Birkbeck <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#301642439">(Sep 30 2022 at 13:07)</a>:</h4>
<p>That sounds good. I have time for this next week so I can try and help do one of these lemmas. I might also try and think about a strategy for case 2</p>



<a name="301643186"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/301643186" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#301643186">(Sep 30 2022 at 13:11)</a>:</h4>
<p>In lemma 4.4 <code>x</code> and <code>y</code> are real, right?</p>



<a name="301643201"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/301643201" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#301643201">(Sep 30 2022 at 13:11)</a>:</h4>
<p>Well, maybe even integers</p>



<a name="301643240"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/301643240" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#301643240">(Sep 30 2022 at 13:11)</a>:</h4>
<p>But in any case fixed under complex conjugation</p>



<a name="301643432"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/301643432" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Birkbeck <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#301643432">(Sep 30 2022 at 13:12)</a>:</h4>
<p>Yes they are integers.</p>



<a name="301643767"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/301643767" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#301643767">(Sep 30 2022 at 13:14)</a>:</h4>
<p>Good, the proof seems quite Leanable</p>



<a name="301644045"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/301644045" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Birkbeck <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#301644045">(Sep 30 2022 at 13:15)</a>:</h4>
<p>FYI the proof is from page 6 of Washington</p>



<a name="301646369"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/301646369" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#301646369">(Sep 30 2022 at 13:26)</a>:</h4>
<p>May I suppose <code>i</code> is a natural number or do you think we need it to be an integer?</p>



<a name="301647002"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/301647002" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#301647002">(Sep 30 2022 at 13:29)</a>:</h4>
<p>Mmm, I need anyway to consider integer powers, so it doesn't matter</p>



<a name="301650624"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/301650624" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#301650624">(Sep 30 2022 at 13:46)</a>:</h4>
<p>The statement of Lemma 4.4 looks quite ugly. Suggestions to improve it are welcome</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">exists_int_sum_eq_zero</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">p</span> <span class="bp">≠</span> <span class="mi">2</span><span class="o">)</span> <span class="o">[</span><span class="n">hp</span> <span class="o">:</span> <span class="n">fact</span><span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span><span class="bp">.</span><span class="n">prime</span><span class="o">]</span> <span class="o">{</span><span class="n">x</span> <span class="n">y</span> <span class="n">i</span> <span class="o">:</span> <span class="n">ℤ</span><span class="o">}</span> <span class="o">{</span><span class="n">u</span> <span class="o">:</span> <span class="o">(</span><span class="bp">𝓞</span> <span class="n">K</span><span class="o">)</span><span class="bp">ˣ</span><span class="o">}</span>
  <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="bp">𝓞</span> <span class="n">K</span><span class="o">}</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">𝓞</span> <span class="n">K</span><span class="o">)</span> <span class="bp">+</span> <span class="n">y</span> <span class="bp">*</span> <span class="o">((</span><span class="n">hζ.is_unit</span> <span class="n">p.pos</span><span class="o">)</span><span class="bp">.</span><span class="n">unit</span> <span class="bp">^</span> <span class="n">i</span> <span class="o">:</span> <span class="o">(</span><span class="bp">𝓞</span> <span class="n">K</span><span class="o">)</span><span class="bp">ˣ</span><span class="o">)</span> <span class="bp">=</span> <span class="n">u</span> <span class="bp">*</span> <span class="n">α</span> <span class="bp">^</span> <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">))</span> <span class="o">:</span>
  <span class="bp">∃</span> <span class="n">k</span> <span class="o">:</span> <span class="n">ℤ</span><span class="o">,</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">𝓞</span> <span class="n">K</span><span class="o">)</span> <span class="bp">+</span> <span class="n">y</span> <span class="bp">*</span> <span class="o">((</span><span class="n">hζ.is_unit</span> <span class="n">p.pos</span><span class="o">)</span><span class="bp">.</span><span class="n">unit</span> <span class="bp">^</span> <span class="n">i</span> <span class="o">:</span> <span class="o">(</span><span class="bp">𝓞</span> <span class="n">K</span><span class="o">)</span><span class="bp">ˣ</span><span class="o">)</span> <span class="bp">-</span>
    <span class="o">((</span><span class="n">hζ.is_unit</span> <span class="n">p.pos</span><span class="o">)</span><span class="bp">.</span><span class="n">unit</span> <span class="bp">^</span> <span class="o">(</span><span class="mi">2</span> <span class="bp">*</span> <span class="n">k</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="bp">𝓞</span> <span class="n">K</span><span class="o">)</span><span class="bp">ˣ</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">-</span>
    <span class="o">((</span><span class="n">hζ.is_unit</span> <span class="n">p.pos</span><span class="o">)</span><span class="bp">.</span><span class="n">unit</span> <span class="bp">^</span> <span class="o">(</span><span class="mi">2</span> <span class="bp">*</span> <span class="n">k</span> <span class="bp">-</span> <span class="n">i</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="bp">𝓞</span> <span class="n">K</span><span class="o">)</span><span class="bp">ˣ</span><span class="o">)</span> <span class="bp">*</span> <span class="n">y</span> <span class="bp">∈</span> <span class="n">span</span> <span class="o">({</span><span class="n">p</span><span class="o">}</span> <span class="o">:</span> <span class="n">set</span> <span class="o">(</span><span class="bp">𝓞</span> <span class="n">K</span><span class="o">))</span> <span class="o">:=</span>
</code></pre></div>



<a name="301652046"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/301652046" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#301652046">(Sep 30 2022 at 13:53)</a>:</h4>
<p>Ah, we have <code>is_primitive_root.unit'</code>, nice</p>



<a name="301652881"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/301652881" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#301652881">(Sep 30 2022 at 13:56)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">exists_int_sum_eq_zero</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">p</span> <span class="bp">≠</span> <span class="mi">2</span><span class="o">)</span> <span class="o">[</span><span class="n">hp</span> <span class="o">:</span> <span class="n">fact</span><span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span><span class="bp">.</span><span class="n">prime</span><span class="o">]</span> <span class="o">{</span><span class="n">x</span> <span class="n">y</span> <span class="n">i</span> <span class="o">:</span> <span class="n">ℤ</span><span class="o">}</span> <span class="o">{</span><span class="n">u</span> <span class="o">:</span> <span class="o">(</span><span class="bp">𝓞</span> <span class="n">K</span><span class="o">)</span><span class="bp">ˣ</span><span class="o">}</span>
  <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="bp">𝓞</span> <span class="n">K</span><span class="o">}</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">𝓞</span> <span class="n">K</span><span class="o">)</span> <span class="bp">+</span> <span class="n">y</span> <span class="bp">*</span> <span class="o">(</span><span class="n">hζ.unit'</span> <span class="bp">^</span> <span class="n">i</span> <span class="o">:</span> <span class="o">(</span><span class="bp">𝓞</span> <span class="n">K</span><span class="o">)</span><span class="bp">ˣ</span><span class="o">)</span> <span class="bp">=</span> <span class="n">u</span> <span class="bp">*</span> <span class="n">α</span> <span class="bp">^</span> <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">))</span> <span class="o">:</span>
  <span class="bp">∃</span> <span class="n">k</span> <span class="o">:</span> <span class="n">ℤ</span><span class="o">,</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">𝓞</span> <span class="n">K</span><span class="o">)</span> <span class="bp">+</span> <span class="n">y</span> <span class="bp">*</span> <span class="o">(</span><span class="n">hζ.unit'</span> <span class="bp">^</span> <span class="n">i</span> <span class="o">:</span> <span class="o">(</span><span class="bp">𝓞</span> <span class="n">K</span><span class="o">)</span><span class="bp">ˣ</span><span class="o">)</span> <span class="bp">-</span> <span class="o">(</span><span class="n">hζ.unit'</span> <span class="bp">^</span> <span class="o">(</span><span class="mi">2</span> <span class="bp">*</span> <span class="n">k</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="bp">𝓞</span> <span class="n">K</span><span class="o">)</span><span class="bp">ˣ</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">-</span>
    <span class="o">(</span><span class="n">hζ.unit'</span> <span class="bp">^</span> <span class="o">(</span><span class="mi">2</span> <span class="bp">*</span> <span class="n">k</span> <span class="bp">-</span> <span class="n">i</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="bp">𝓞</span> <span class="n">K</span><span class="o">)</span><span class="bp">ˣ</span><span class="o">)</span> <span class="bp">*</span> <span class="n">y</span> <span class="bp">∈</span> <span class="n">span</span> <span class="o">({</span><span class="n">p</span><span class="o">}</span> <span class="o">:</span> <span class="n">set</span> <span class="o">(</span><span class="bp">𝓞</span> <span class="n">K</span><span class="o">))</span> <span class="o">:=</span>
</code></pre></div>
<p>I don't understand why I have to write <code>hζ.unit' ^ i : (𝓞 K)ˣ</code>, but if I don't do it Lean uses the coercion to <code>𝓞 K</code> before taking the power, and so it complains.</p>



<a name="301692118"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/301692118" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#301692118">(Sep 30 2022 at 16:54)</a>:</h4>
<p>(deleted)</p>



<a name="301807901"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/301807901" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#301807901">(Oct 01 2022 at 11:43)</a>:</h4>
<p>This is now proved. The proof is a little messy because of the coercions <code>(𝓞 K)ˣ → 𝓞 K → K</code>, but that's life. It is also rather annoying since we don't have an updated version of mathlib. <span class="user-mention" data-user-id="284160">@Eric Rodriguez</span> do you think it will be possible to update mathlib soon?</p>



<a name="301808622"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/301808622" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#301808622">(Oct 01 2022 at 11:48)</a>:</h4>
<p>I mean I don't think we actually use the diamond fix</p>



<a name="301808629"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/301808629" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#301808629">(Oct 01 2022 at 11:48)</a>:</h4>
<p>we can bump mathlib soon</p>



<a name="301808649"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/301808649" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#301808649">(Oct 01 2022 at 11:48)</a>:</h4>
<p>hopefully the splitting_field diamodn stuff will come to main soon</p>



<a name="301810988"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/301810988" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#301810988">(Oct 01 2022 at 12:07)</a>:</h4>
<p>So do you think we can just do the bump now?</p>



<a name="301813131"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/301813131" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#301813131">(Oct 01 2022 at 12:24)</a>:</h4>
<p>yeah, if something breaks that isn't obviously fixable give me a ping and i'll try fix it asap, but i'm super busy this week</p>



<a name="301813211"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/301813211" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#301813211">(Oct 01 2022 at 12:24)</a>:</h4>
<p>OK, I am doing it</p>



<a name="301819971"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/301819971" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#301819971">(Oct 01 2022 at 13:18)</a>:</h4>
<p>It's done.</p>



<a name="302057301"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/302057301" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#302057301">(Oct 03 2022 at 12:54)</a>:</h4>
<p>I am modifying the file <code>flt_regular</code> to use <code>a b c : ℤ</code>. It think it is much better, and probably even needed in cerain proofs.</p>



<a name="302164980"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/302164980" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#302164980">(Oct 03 2022 at 23:14)</a>:</h4>
<p>I've a proof of the following:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">def</span> <span class="n">caseI_slightly_easier</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">:=</span> <span class="bp">∀</span> <span class="o">⦃</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℤ</span><span class="o">⦄</span> <span class="o">⦃</span><span class="n">p</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">⦄</span> <span class="o">(</span><span class="n">hpri</span> <span class="o">:</span> <span class="n">p.prime</span><span class="o">)</span>
  <span class="o">(</span><span class="n">hreg</span> <span class="o">:</span> <span class="n">is_regular_number</span> <span class="n">p</span> <span class="n">hpri.pos</span><span class="o">)</span> <span class="o">(</span><span class="n">hp5</span> <span class="o">:</span> <span class="mi">5</span> <span class="bp">≤</span> <span class="n">p</span><span class="o">)</span> <span class="o">(</span><span class="n">hprod</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">b</span> <span class="bp">*</span> <span class="n">c</span> <span class="bp">≠</span> <span class="mi">0</span><span class="o">)</span>
  <span class="o">(</span><span class="n">hgcd</span> <span class="o">:</span> <span class="n">is_unit</span> <span class="o">(({</span><span class="n">a</span><span class="o">,</span> <span class="n">b</span><span class="o">,</span> <span class="n">c</span><span class="o">}</span> <span class="o">:</span> <span class="n">finset</span> <span class="n">ℤ</span><span class="o">)</span><span class="bp">.</span><span class="n">gcd</span> <span class="n">id</span><span class="o">))</span>
  <span class="o">(</span><span class="n">hab</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">a</span> <span class="bp">≡</span> <span class="n">b</span> <span class="o">[</span><span class="n">ZMOD</span> <span class="n">p</span><span class="o">])</span> <span class="o">(</span><span class="n">caseI</span> <span class="o">:</span> <span class="bp">¬</span> <span class="bp">↑</span><span class="n">p</span> <span class="bp">∣</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">b</span> <span class="bp">*</span> <span class="n">c</span><span class="o">),</span> <span class="n">a</span> <span class="bp">^</span> <span class="n">p</span> <span class="bp">+</span> <span class="n">b</span> <span class="bp">^</span> <span class="n">p</span> <span class="bp">≠</span> <span class="n">c</span> <span class="bp">^</span> <span class="n">p</span>

<span class="kd">def</span> <span class="n">caseI</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">:=</span> <span class="bp">∀</span> <span class="o">⦃</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℤ</span><span class="o">⦄</span> <span class="o">⦃</span><span class="n">p</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">⦄</span> <span class="o">(</span><span class="n">hpri</span> <span class="o">:</span> <span class="n">p.prime</span><span class="o">)</span> <span class="o">(</span><span class="n">hreg</span> <span class="o">:</span> <span class="n">is_regular_number</span> <span class="n">p</span> <span class="n">hpri.pos</span><span class="o">)</span>
  <span class="o">(</span><span class="n">hodd</span> <span class="o">:</span> <span class="n">p</span> <span class="bp">≠</span> <span class="mi">2</span><span class="o">)</span> <span class="o">(</span><span class="n">hprod</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">b</span> <span class="bp">*</span> <span class="n">c</span> <span class="bp">≠</span> <span class="mi">0</span><span class="o">)</span> <span class="o">(</span><span class="n">caseI</span> <span class="o">:</span> <span class="bp">¬</span> <span class="bp">↑</span><span class="n">p</span> <span class="bp">∣</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">b</span> <span class="bp">*</span> <span class="n">c</span><span class="o">),</span> <span class="n">a</span> <span class="bp">^</span> <span class="n">p</span> <span class="bp">+</span> <span class="n">b</span> <span class="bp">^</span> <span class="n">p</span> <span class="bp">≠</span> <span class="n">c</span> <span class="bp">^</span> <span class="n">p</span>

<span class="kd">lemma</span> <span class="n">may_assume</span> <span class="o">:</span> <span class="n">caseI_slightly_easier</span> <span class="bp">→</span> <span class="n">caseI</span> <span class="o">:=</span>
</code></pre></div>



<a name="302165058"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/302165058" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#302165058">(Oct 03 2022 at 23:15)</a>:</h4>
<p><span class="user-mention" data-user-id="389019">@Chris Birkbeck</span> can you please check this is the statement of Lemma 4.5 in the blueprint?</p>



<a name="302165108"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/302165108" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#302165108">(Oct 03 2022 at 23:16)</a>:</h4>
<p>(there are various "we may assume"  that are not very precise)</p>



<a name="302165998"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/302165998" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#302165998">(Oct 03 2022 at 23:24)</a>:</h4>
<p>If this is correct, we are ready to prove caseI. I mean, to attack the last proof. (There is still a prerequisite to prove, the the ideals are coprime, but I prefer to wait to see if the statement is correct).</p>



<a name="302166044"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/302166044" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#302166044">(Oct 03 2022 at 23:25)</a>:</h4>
<p>I have to sleep now, but tomorrow I will clean some stuff, making more clear what we have to do.</p>



<a name="302213994"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/302213994" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Birkbeck <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#302213994">(Oct 04 2022 at 08:33)</a>:</h4>
<p>Yep that looks good. I assume <code> (hgcd : is_unit (({a, b, c} : finset ℤ).gcd id))</code> says that they are pairwise coprime? i.e. doing <code>gcd</code> on a <code>finset</code> just does the pairwise gcds?</p>



<a name="302214270"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/302214270" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Birkbeck <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#302214270">(Oct 04 2022 at 08:34)</a>:</h4>
<p>I guess technically lemma 4.5 doesnt need the regularity assumption, but if we want to use it for <code>may_assume</code> then we probably want it there (?)</p>



<a name="302214852"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/302214852" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#302214852">(Oct 04 2022 at 08:38)</a>:</h4>
<p><code>(({a, b, c} : finset ℤ).gcd id))</code> is the gcd of <code>a</code>, <code>b</code> and <code>c</code>. I don't think we have <code>is_coprime</code> for <code>finset</code>. The API for <code>finset.gcd</code> is rather small, I think we will have to add stuff, but the definition should be the correct one.</p>



<a name="302215791"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/302215791" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Birkbeck <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#302215791">(Oct 04 2022 at 08:45)</a>:</h4>
<p>Ah ok I see. That's fine then.</p>



<a name="302216607"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/302216607" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#302216607">(Oct 04 2022 at 08:50)</a>:</h4>
<p>It's surprisingly painful to work with the <code>gcd</code> of a finset. I think because <a href="https://leanprover-community.github.io/mathlib_docs/find/finset.gcd_eq_gcd_image">docs#finset.gcd_eq_gcd_image</a> works for <code>ℕ</code> but not for <code>ℤ</code> (and to be honest I don't even understand if it is true or not).</p>



<a name="302216967"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/302216967" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#302216967">(Oct 04 2022 at 08:53)</a>:</h4>
<p>The general rule is that if it is true for the nullary and binary cases, it's true for the finitary case. Nullary case here is easy, so is it true for binary?</p>



<a name="302217797"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/302217797" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#302217797">(Oct 04 2022 at 08:59)</a>:</h4>
<p>Since there is <code>is_idempotent α gcd_monoid.gcd</code> (that is surely false in <code>ℤ</code>) I guess it's not. It's likely that my mental model for <code>finset.fold</code> is not good.</p>



<a name="302218305"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/302218305" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Birkbeck <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#302218305">(Oct 04 2022 at 09:02)</a>:</h4>
<p>Yes I don't really understand what <code>finset.fold gcd_monoid.gcd 0 f s</code> does in <code>finset.gcd</code>.</p>



<a name="302218542"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/302218542" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#302218542">(Oct 04 2022 at 09:04)</a>:</h4>
<p>It does <code>gcd 0 (gcd (f a) (gcd (f b) ...)</code> for <code>a, b, ...</code>  an arbitrary enumeration of <code>s</code>.</p>



<a name="302219026"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/302219026" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Birkbeck <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#302219026">(Oct 04 2022 at 09:07)</a>:</h4>
<p>Aha I see, thanks!</p>



<a name="302219934"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/302219934" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#302219934">(Oct 04 2022 at 09:13)</a>:</h4>
<p>OK, this is <code>s.gcd f</code>. And what is <code>(finset.image f s).gcd id</code>?</p>



<a name="302219963"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/302219963" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#302219963">(Oct 04 2022 at 09:13)</a>:</h4>
<p>I can be confused, but they look the same to me.</p>



<a name="302220144"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/302220144" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Birkbeck <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#302220144">(Oct 04 2022 at 09:14)</a>:</h4>
<p><span class="user-mention silent" data-user-id="130384">Riccardo Brasca</span> <a href="#narrow/stream/304774-FLT-regular/topic/Case.20I/near/302165998">said</a>:</p>
<blockquote>
<p>If this is correct, we are ready to prove caseI. I mean, to attack the last proof. (There is still a prerequisite to prove, the the ideals are coprime, but I prefer to wait to see if the statement is correct).</p>
</blockquote>
<p>I want to play around with <code>flt_ideals_coprime</code> to see if I can understand how the ideal API works. I'll also check the statement</p>



<a name="302220229"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/302220229" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#302220229">(Oct 04 2022 at 09:14)</a>:</h4>
<p>Oh that's quite different. It's <code>gcd 0 (gcd a (gcd b ...)</code> for <code>a, b, ...</code> an arbitrary enumeration of <code>s.image f</code>. So in particular duplicates are lost.</p>



<a name="302220504"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/302220504" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#302220504">(Oct 04 2022 at 09:16)</a>:</h4>
<p>Hence the idempotency condition. If <code>gcd a a = a</code>, then you can erase any duplicates and both things are the same.</p>



<a name="302220543"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/302220543" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#302220543">(Oct 04 2022 at 09:16)</a>:</h4>
<p>Ah, it's because duplicate are lost!</p>



<a name="302220820"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/302220820" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#302220820">(Oct 04 2022 at 09:18)</a>:</h4>
<p>But I think that it's still true for <code>ℤ</code>, because everything gets normalized to positive stuff</p>



<a name="302220836"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/302220836" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#302220836">(Oct 04 2022 at 09:18)</a>:</h4>
<p>Still, I am wondering if this is true, since it <em>is</em> true that <code>gcd(0, gcd(a, a)) = gcd(0,a).</code></p>



<a name="302220891"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/302220891" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#302220891">(Oct 04 2022 at 09:19)</a>:</h4>
<p><code>gcd(0, gcd(a, a)) = gcd(0, a)</code> you mean</p>



<a name="302220991"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/302220991" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#302220991">(Oct 04 2022 at 09:19)</a>:</h4>
<p>I don't have a good intuition for what <code>normalize</code> does, but yes it's something that sounds reasonable to expect.</p>



<a name="302221120"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/302221120" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#302221120">(Oct 04 2022 at 09:20)</a>:</h4>
<p>It's the absolute value</p>



<a name="302221156"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/302221156" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#302221156">(Oct 04 2022 at 09:20)</a>:</h4>
<p>In general monoids as well??</p>



<a name="302221160"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/302221160" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#302221160">(Oct 04 2022 at 09:20)</a>:</h4>
<p>I mean, in <code>ℤ</code>.</p>



<a name="302221182"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/302221182" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#302221182">(Oct 04 2022 at 09:20)</a>:</h4>
<p>Ah right</p>



<a name="302221240"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/302221240" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#302221240">(Oct 04 2022 at 09:21)</a>:</h4>
<p>You can definitely prove that <code>s.gcd f</code> and <code>(finset.image f s).gcd id</code> are associated. And then depending on the conditions properties of <code>normalize</code> you can turn that into an actual equality.</p>



<a name="302221277"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/302221277" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#302221277">(Oct 04 2022 at 09:21)</a>:</h4>
<p>Surely if <code>a</code> and <code>b</code> are associated then <code>normalize a = normalize b</code>?</p>



<a name="302221348"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/302221348" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#302221348">(Oct 04 2022 at 09:22)</a>:</h4>
<p>In general is nonsense, it is just a convenient thing when we have a way to normalize. In practice it is the absolute value on <code>ℤ</code>, the identity on <code>ℕ</code> and divide by leading coefficient on <code>K[X]</code>.</p>



<a name="302221485"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/302221485" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#302221485">(Oct 04 2022 at 09:23)</a>:</h4>
<p><span class="user-mention silent" data-user-id="387244">Yaël Dillies</span> <a href="#narrow/stream/304774-FLT-regular/topic/Case.20I/near/302221277">said</a>:</p>
<blockquote>
<p>Surely if <code>a</code> and <code>b</code> are associated then <code>normalize a = normalize b</code>?</p>
</blockquote>
<p>No, it's the opposite. <code>a</code> and <code>normalize a</code> are associated. It picks a representative in any equivalence class for "being associated".</p>



<a name="302221533"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/302221533" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#302221533">(Oct 04 2022 at 09:23)</a>:</h4>
<p>Both statements can be true, right?</p>



<a name="302221648"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/302221648" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#302221648">(Oct 04 2022 at 09:24)</a>:</h4>
<p>I'm saying that you should always pick the same representative out of an equivalence class.</p>



<a name="302221708"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/302221708" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#302221708">(Oct 04 2022 at 09:24)</a>:</h4>
<p>"If two equivalence classes are the same then their representative is the same"</p>



<a name="302221740"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/302221740" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#302221740">(Oct 04 2022 at 09:24)</a>:</h4>
<p>Oh sure, what I said is nonsense.</p>



<a name="302221836"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/302221836" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#302221836">(Oct 04 2022 at 09:25)</a>:</h4>
<p>They're associated iff have the same normalization, sorry.</p>



<a name="302221855"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/302221855" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#302221855">(Oct 04 2022 at 09:25)</a>:</h4>
<p>If <code>associated a b → normalize a = normalize b</code> is not currently true in the generality of <code>normalized_monoid</code>, I would seriously consider adding it as an axiom. Otherwise you can't really say <code>normalize</code> picks representatives.</p>



<a name="302221986"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/302221986" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#302221986">(Oct 04 2022 at 09:26)</a>:</h4>
<p>To be honest I have no idea what the class formally is. In my mind there are just three examples, and I know what <code>normalize</code> does in this cases.</p>



<a name="302222070"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/302222070" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#302222070">(Oct 04 2022 at 09:26)</a>:</h4>
<p>And in all three cases <code>associated a b → normalize a = normalize b</code> is true, right?</p>



<a name="302222130"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/302222130" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#302222130">(Oct 04 2022 at 09:27)</a>:</h4>
<p>Yes yes</p>



<a name="302222193"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/302222193" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#302222193">(Oct 04 2022 at 09:27)</a>:</h4>
<p>We have <a href="https://leanprover-community.github.io/mathlib_docs/find/associated_normalize">docs#associated_normalize</a></p>



<a name="302222297"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/302222297" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#302222297">(Oct 04 2022 at 09:28)</a>:</h4>
<p>So by transitivity what you say is true</p>



<a name="302222345"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/302222345" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#302222345">(Oct 04 2022 at 09:28)</a>:</h4>
<p>Ahah! <a href="https://leanprover-community.github.io/mathlib_docs/find/normalize_eq_normalize_iff">docs#normalize_eq_normalize_iff</a></p>



<a name="302222367"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/302222367" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#302222367">(Oct 04 2022 at 09:28)</a>:</h4>
<p>Not sure why this doesn't use <code>associated</code>, but we have it.</p>



<a name="302222528"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/302222528" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#302222528">(Oct 04 2022 at 09:29)</a>:</h4>
<p><span class="user-mention silent" data-user-id="130384">Riccardo Brasca</span> <a href="#narrow/stream/304774-FLT-regular/topic/Case.20I/near/302222193">said</a>:</p>
<blockquote>
<p>We have <a href="https://leanprover-community.github.io/mathlib_docs/find/associated_normalize">docs#associated_normalize</a></p>
</blockquote>
<p>I don't see how that's relevant. We know that <code>associated x y → associated (normalize x) (normalize y)</code> but they could still be different.</p>



<a name="302222596"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/302222596" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#302222596">(Oct 04 2022 at 09:30)</a>:</h4>
<p>Is this always the same as associated? Even in some cray non cancellative non commutative monoid?</p>



<a name="302222787"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/302222787" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#302222787">(Oct 04 2022 at 09:31)</a>:</h4>
<p>Ahahahahah, that's again because for me it's obvious that if the normalizations are associated then the normalizations must be equal</p>



<a name="302222802"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/302222802" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#302222802">(Oct 04 2022 at 09:31)</a>:</h4>
<p>But this is just in my head</p>



<a name="302222827"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/302222827" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#302222827">(Oct 04 2022 at 09:31)</a>:</h4>
<p>It's a proof by terminology.</p>



<a name="302223065"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/302223065" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#302223065">(Oct 04 2022 at 09:33)</a>:</h4>
<p><span class="user-mention silent" data-user-id="130384">Riccardo Brasca</span> <a href="#narrow/stream/304774-FLT-regular/topic/Case.20I/near/302222596">said</a>:</p>
<blockquote>
<p>Is this always the same as associated? Even in some cray non cancellative non commutative monoid?</p>
</blockquote>
<p>This statement does not seem to exist but it's true by <a href="https://leanprover-community.github.io/mathlib_docs/find/associated.dvd_iff_dvd_left">docs#associated.dvd_iff_dvd_left</a></p>



<a name="302223777"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/302223777" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#302223777">(Oct 04 2022 at 09:38)</a>:</h4>
<p><span class="user-mention silent" data-user-id="130384">Riccardo Brasca</span> <a href="#narrow/stream/304774-FLT-regular/topic/Case.20I/near/302222827">said</a>:</p>
<blockquote>
<p>It's a proof by terminology.</p>
</blockquote>
<p>It reminds me I forgot to PR the proof that Xavier asked for yesterday. It was also a proof by terminology, he wanted to know that a complete topological field is completable.</p>



<a name="302223894"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/302223894" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#302223894">(Oct 04 2022 at 09:39)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">instance</span> <span class="n">completable_top_field_of_complete</span> <span class="o">(</span><span class="n">L</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">field</span> <span class="n">L</span><span class="o">]</span>
  <span class="o">[</span><span class="n">uniform_space</span> <span class="n">L</span><span class="o">]</span> <span class="o">[</span><span class="n">topological_division_ring</span> <span class="n">L</span><span class="o">]</span> <span class="o">[</span><span class="n">separated_space</span> <span class="n">L</span><span class="o">]</span> <span class="o">[</span><span class="n">complete_space</span> <span class="n">L</span><span class="o">]</span> <span class="o">:</span>
  <span class="n">completable_top_field</span> <span class="n">L</span> <span class="o">:=</span>
<span class="kd">by</span> <span class="n">terminology</span>
</code></pre></div>



<a name="302224676"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/302224676" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#302224676">(Oct 04 2022 at 09:45)</a>:</h4>
<p>I will PR the generalisation you want, Riccardo.</p>



<a name="302225094"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/302225094" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#302225094">(Oct 04 2022 at 09:48)</a>:</h4>
<p>Which one?</p>



<a name="302225716"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/302225716" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#302225716">(Oct 04 2022 at 09:52)</a>:</h4>
<p>Of <a href="https://leanprover-community.github.io/mathlib_docs/find/finset.gcd_eq_gcd_image">docs#finset.gcd_eq_gcd_image</a></p>



<a name="302225843"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/302225843" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#302225843">(Oct 04 2022 at 09:53)</a>:</h4>
<p>Thanks! If you want you can also add the result <a href="https://github.com/leanprover-community/flt-regular/blob/master/src/ready_for_mathlib/gcd.lean">here</a>, whose proof can (I think) be golfed with the generalization.</p>



<a name="302226007"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/302226007" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#302226007">(Oct 04 2022 at 09:54)</a>:</h4>
<p>Oh I don't think I have access to flt-regular yet.</p>



<a name="302226119"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/302226119" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#302226119">(Oct 04 2022 at 09:55)</a>:</h4>
<p>I am not sure if we can generalize the statement, since we want a <code>division_thing</code> to be able to write <code>/</code>, but also a <code>normalized_gcd_thing</code>, and we don't have a good typeclass for that. Again there are  essentially three examples, and the result for <code>ℕ</code> is there.</p>



<a name="302226180"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/302226180" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#302226180">(Oct 04 2022 at 09:55)</a>:</h4>
<p><span class="user-mention silent" data-user-id="387244">Yaël Dillies</span> <a href="#narrow/stream/304774-FLT-regular/topic/Case.20I/near/302226007">said</a>:</p>
<blockquote>
<p>Oh I don't think I have access to flt-regular yet.</p>
</blockquote>
<p>I am giving you access, but you should at least be able to read the file.</p>



<a name="302226185"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/302226185" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#302226185">(Oct 04 2022 at 09:55)</a>:</h4>
<p>Maybe it's time to have a proper typeclass for that, yeah.</p>



<a name="302230606"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/302230606" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#302230606">(Oct 04 2022 at 10:27)</a>:</h4>
<p><span class="user-mention" data-user-id="130384">@Riccardo Brasca</span>, <a href="https://github.com/leanprover-community/mathlib/pull/16795">#16795</a></p>



<a name="302230774"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/302230774" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#302230774">(Oct 04 2022 at 10:28)</a>:</h4>
<p>And the lemmas I didn't even end up using</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">variables</span> <span class="o">[</span><span class="n">cancel_comm_monoid_with_zero</span> <span class="n">α</span><span class="o">]</span> <span class="o">[</span><span class="n">normalization_monoid</span> <span class="n">α</span><span class="o">]</span> <span class="o">{</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">α</span><span class="o">}</span>

<span class="kd">@[simp]</span> <span class="kd">lemma</span> <span class="n">normalize_eq_normalize_iff'</span> <span class="o">:</span> <span class="n">normalize</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">normalize</span> <span class="n">b</span> <span class="bp">↔</span> <span class="n">associated</span> <span class="n">a</span> <span class="n">b</span> <span class="o">:=</span>
<span class="n">normalize_eq_normalize_iff.trans</span> <span class="n">dvd_dvd_iff_associated</span>

<span class="n">alias</span> <span class="n">normalize_eq_normalize_iff'</span> <span class="bp">↔</span> <span class="n">_</span> <span class="n">associated.normalize_eq</span>
</code></pre></div>



<a name="302280524"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/302280524" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#302280524">(Oct 04 2022 at 15:03)</a>:</h4>
<p>I've moved some stuff and updated the dependency graph. The main statement of caseI is <code>caseI_easier</code> in <code>caseI.statement</code>. All the prerequisites are formalized (at least the statements, there is only one missing proof, that the ideals are coprime), so we can start working on the last step.</p>



<a name="302288310"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/302288310" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Birkbeck <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#302288310">(Oct 04 2022 at 15:33)</a>:</h4>
<p>Great! I've been thinking about the coprime ideal proof. I wondered if one could cheat at prove that the ideals are coprime directly, i.e by finding some <code>a,b</code> such that <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mo stretchy="false">(</mo><mi>x</mi><mo>+</mo><msup><mi>ζ</mi><mi>i</mi></msup><mi>y</mi><mo stretchy="false">)</mo><mo>+</mo><mi>b</mi><mo stretchy="false">(</mo><mi>x</mi><mo>+</mo><msup><mi>ζ</mi><mi>j</mi></msup><mi>y</mi><mo stretchy="false">)</mo><mo>=</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">a(x+\zeta^iy) +b (x+\zeta^j y)=1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">a</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.0747em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07378em;">ζ</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8247em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span></span></span></span></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">b</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.0747em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07378em;">ζ</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8247em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span></span></span></span></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span> but I dont know how hard that is (at least I couldnt find anyone doing it this way). We might just have to do the proof with ideal division/containment</p>



<a name="302289368"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/302289368" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#302289368">(Oct 04 2022 at 15:37)</a>:</h4>
<p>There is now an isolated lemma in the graph (with a weird name). Can you have a look?</p>



<a name="302289596"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/302289596" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Birkbeck <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#302289596">(Oct 04 2022 at 15:38)</a>:</h4>
<p>oh yes sorry thats mine. I'm not finished with it yet, one sec</p>



<a name="302290499"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/302290499" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#302290499">(Oct 04 2022 at 15:43)</a>:</h4>
<p>Do you see any problem with the proof in the blueprint (for the coprimality)? We have that <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mn>1</mn><mo>−</mo><mi>ζ</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(1-\zeta)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.07378em;">ζ</span><span class="mclose">)</span></span></span></span> is prime.</p>



<a name="302290753"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/302290753" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Birkbeck <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#302290753">(Oct 04 2022 at 15:44)</a>:</h4>
<p>Oh no it should be fine. I just wondered if I could quickly see a "one line proof"</p>



<a name="302291722"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/302291722" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#302291722">(Oct 04 2022 at 15:49)</a>:</h4>
<p>We'd actually need span of a singleton as a ring hom for that first, which I think is nice to have regardless</p>



<a name="302292105"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/302292105" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Birkbeck <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#302292105">(Oct 04 2022 at 15:50)</a>:</h4>
<p>Sorry, I'm not sure what you mean by "span of a singleton as a ring hom "</p>



<a name="302292271"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/302292271" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#302292271">(Oct 04 2022 at 15:51)</a>:</h4>
<p>The set of ideals is a semiring :D</p>



<a name="302292400"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/302292400" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Birkbeck <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#302292400">(Oct 04 2022 at 15:52)</a>:</h4>
<p>oh ha I see :)</p>



<a name="302292742"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/302292742" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#302292742">(Oct 04 2022 at 15:53)</a>:</h4>
<p>Do we really miss something or it is just a matter of writing the bundled hom?</p>



<a name="302293587"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/302293587" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Birkbeck <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#302293587">(Oct 04 2022 at 15:57)</a>:</h4>
<p>Sorry, so you mean we'd need this for what I suggested? I was writing an equality of elements, not ideals (although that wasn't clear :P). Maybe I'm just confused</p>



<a name="302296960"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/302296960" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#302296960">(Oct 04 2022 at 16:13)</a>:</h4>
<p>The equality <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>z</mi><mi>p</mi></msup><mo>=</mo><mo stretchy="false">(</mo><mi>x</mi><mo>+</mo><mi>y</mi><mo stretchy="false">)</mo><mo stretchy="false">(</mo><mi>x</mi><mo>+</mo><mi>ζ</mi><mi>y</mi><mo stretchy="false">)</mo><mo>⋯</mo><mo stretchy="false">(</mo><mi>x</mi><mo>+</mo><msup><mi>ζ</mi><mrow><mi>p</mi><mo>−</mo><mn>1</mn></mrow></msup><mi>y</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">z^p = (x+y)(x+\zeta y)\cdots(x+\zeta^{p-1}y)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6644em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.04398em;">z</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6644em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">p</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mclose">)</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.07378em;">ζ</span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner">⋯</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.0641em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07378em;">ζ</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">p</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mclose">)</span></span></span></span> is somewhere, right? I think <span class="user-mention" data-user-id="127136">@Alex J. Best</span> worked on this.</p>



<a name="302297203"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/302297203" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Birkbeck <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#302297203">(Oct 04 2022 at 16:14)</a>:</h4>
<p>yes its <code>pow_add_pow_eq_prod_add_zeta_runity_mul </code></p>



<a name="302297484"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/302297484" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#302297484">(Oct 04 2022 at 16:15)</a>:</h4>
<p>OK, we <em>really</em> need <code>span</code> as a bundled hom.</p>



<a name="302297559"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/302297559" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#302297559">(Oct 04 2022 at 16:16)</a>:</h4>
<p>Otherwise we will end up rewriting a lot of stupid proofs.</p>



<a name="302298397"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/302298397" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#302298397">(Oct 04 2022 at 16:20)</a>:</h4>
<p>But we already have it! <a href="https://leanprover-community.github.io/mathlib_docs/find/submodule.span.ring_hom">docs#submodule.span.ring_hom</a></p>



<a name="302298452"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/302298452" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#302298452">(Oct 04 2022 at 16:21)</a>:</h4>
<p>Hmm, more or less</p>



<a name="302299857"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/302299857" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#302299857">(Oct 04 2022 at 16:27)</a>:</h4>
<p>span of a singleton isn't a ring hom, span(a+b) isn't span(a)+span(b)=span(a,b)</p>



<a name="302300418"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/302300418" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#302300418">(Oct 04 2022 at 16:30)</a>:</h4>
<p>Ah yes, as bundled <code>mul_hom</code> then.</p>



<a name="302301093"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/302301093" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Michael Stoll <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#302301093">(Oct 04 2022 at 16:34)</a>:</h4>
<p>It is even a <code>monoid_hom</code>.</p>



<a name="302310450"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/302310450" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#302310450">(Oct 04 2022 at 17:24)</a>:</h4>
<p>oh, I wanted to use <a href="https://leanprover-community.github.io/mathlib_docs/find/is_coprime.map">docs#is_coprime.map</a> but that doesn't seem to apply</p>



<a name="302310475"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/302310475" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#302310475">(Oct 04 2022 at 17:24)</a>:</h4>
<p>I guess we need that specific result then for <code>span</code></p>



<a name="302418623"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/302418623" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#302418623">(Oct 05 2022 at 09:26)</a>:</h4>
<p>I am going to work on the proof of caseI. Let's see how many things we are missing :D</p>



<a name="302442781"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/302442781" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#302442781">(Oct 05 2022 at 12:11)</a>:</h4>
<p>First problem: the definition</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">def</span> <span class="n">flt_ideals</span> <span class="o">[</span><span class="n">fact</span> <span class="o">((</span><span class="n">p</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span><span class="bp">.</span><span class="n">prime</span><span class="o">)]</span> <span class="o">(</span><span class="n">x</span> <span class="n">y</span> <span class="n">i</span> <span class="o">:</span> <span class="n">ℤ</span><span class="o">)</span> <span class="o">:</span> <span class="n">ideal</span> <span class="n">RR</span> <span class="o">:=</span>
  <span class="n">ideal.span</span> <span class="o">({</span> <span class="n">x</span> <span class="bp">+</span> <span class="n">y</span> <span class="bp">*</span> <span class="o">((</span><span class="n">zeta_runity</span> <span class="n">p</span> <span class="n">ℤ</span> <span class="n">RR</span><span class="o">)</span> <span class="bp">^</span> <span class="n">i</span> <span class="o">:</span> <span class="n">RR</span><span class="bp">ˣ</span><span class="o">)</span> <span class="o">}</span> <span class="o">:</span> <span class="n">set</span> <span class="n">RR</span><span class="o">)</span>
</code></pre></div>
<p>uses <code>zeta</code>. This is bad for two reasons:</p>
<ul>
<li>first of all we should <em>always</em> use a generic primitive root of unity,  we've already noticed this several times.</li>
<li>this is true (and important) even if we replace <code>zeta</code> by any <code>p</code>-th root of unity, right? I mean, even for <code>1</code>.</li>
</ul>



<a name="302443017"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/302443017" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#302443017">(Oct 05 2022 at 12:12)</a>:</h4>
<p>Hmm, it's not stated as I though, let me find a reasonable statement.</p>



<a name="302445156"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/302445156" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#302445156">(Oct 05 2022 at 12:25)</a>:</h4>
<p><span class="user-mention" data-user-id="389019">@Chris Birkbeck</span> I am going to modify the statement of <code>flt_ideals_coprime</code> as follows:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">local</span> <span class="kd">notation</span> <span class="bp">`</span><span class="n">R</span><span class="bp">`</span> <span class="o">:=</span> <span class="bp">𝓞</span> <span class="o">(</span><span class="n">cyclotomic_field</span> <span class="n">p</span> <span class="n">ℚ</span><span class="o">)</span>

<span class="kd">def</span> <span class="n">flt_ideals</span> <span class="o">[</span><span class="n">fact</span> <span class="o">((</span><span class="n">p</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span><span class="bp">.</span><span class="n">prime</span><span class="o">)]</span> <span class="o">(</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">ℤ</span><span class="o">)</span> <span class="o">{</span><span class="n">η</span> <span class="o">:</span> <span class="n">R</span><span class="o">}</span>
  <span class="o">(</span><span class="n">hη</span> <span class="o">:</span> <span class="n">η</span> <span class="bp">∈</span> <span class="n">nth_roots_finset</span> <span class="n">p</span> <span class="n">R</span><span class="o">)</span> <span class="o">:</span> <span class="n">ideal</span> <span class="n">R</span> <span class="o">:=</span>
  <span class="n">ideal.span</span> <span class="o">({</span> <span class="n">x</span> <span class="bp">+</span> <span class="n">y</span> <span class="bp">*</span> <span class="n">η</span> <span class="o">}</span> <span class="o">:</span> <span class="n">set</span> <span class="n">R</span><span class="o">)</span>

<span class="kd">lemma</span> <span class="n">flt_ideals_coprime</span> <span class="o">[</span><span class="n">fact</span> <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span><span class="bp">.</span><span class="n">prime</span><span class="o">]</span> <span class="o">(</span><span class="n">ph</span> <span class="o">:</span> <span class="mi">5</span> <span class="bp">≤</span> <span class="n">p</span><span class="o">)</span> <span class="o">{</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">ℤ</span><span class="o">}</span> <span class="o">{</span><span class="n">η₁</span> <span class="n">η₂</span> <span class="o">:</span> <span class="n">R</span><span class="o">}</span>
  <span class="o">(</span><span class="n">hη₁</span> <span class="o">:</span> <span class="n">η₁</span> <span class="bp">∈</span> <span class="n">nth_roots_finset</span> <span class="n">p</span> <span class="n">R</span><span class="o">)</span> <span class="o">(</span><span class="n">hη₂</span> <span class="o">:</span> <span class="n">η₂</span> <span class="bp">∈</span> <span class="n">nth_roots_finset</span> <span class="n">p</span> <span class="n">R</span><span class="o">)</span> <span class="o">(</span><span class="n">hdiff</span> <span class="o">:</span> <span class="n">η₁</span> <span class="bp">≠</span> <span class="n">η₂</span><span class="o">)</span>
  <span class="o">(</span><span class="n">hp</span> <span class="o">:</span> <span class="n">is_coprime</span> <span class="n">x</span> <span class="n">y</span><span class="o">)</span> <span class="o">:</span> <span class="n">is_coprime</span> <span class="o">(</span><span class="n">flt_ideals</span> <span class="n">p</span> <span class="n">x</span> <span class="n">y</span> <span class="n">hη₁</span><span class="o">)</span> <span class="o">(</span><span class="n">flt_ideals</span> <span class="n">p</span> <span class="n">x</span> <span class="n">y</span> <span class="n">hη₂</span><span class="o">)</span> <span class="o">:=</span>
</code></pre></div>
<p>since this is what we get in working on caseI. Let me know if you see any problem with it.</p>



<a name="302448412"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/302448412" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Birkbeck <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#302448412">(Oct 05 2022 at 12:44)</a>:</h4>
<p>I think to prove that lemma we probably need something like x,y not divisible by p or something, but I'll figure that out as I work out the proof. But that statement should be fine</p>



<a name="302448756"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/302448756" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#302448756">(Oct 05 2022 at 12:46)</a>:</h4>
<p>In practice <code>x</code> and <code>y</code> will be <code>a</code> and <code>b</code> in</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">theorem</span> <span class="n">caseI_easier</span> <span class="o">{</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℤ</span><span class="o">}</span> <span class="o">{</span><span class="n">p</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">}</span> <span class="o">(</span><span class="n">hpri</span> <span class="o">:</span> <span class="n">p.prime</span><span class="o">)</span>
  <span class="o">(</span><span class="n">hreg</span> <span class="o">:</span> <span class="n">is_regular_number</span> <span class="n">p</span> <span class="n">hpri.pos</span><span class="o">)</span> <span class="o">(</span><span class="n">hp5</span> <span class="o">:</span> <span class="mi">5</span> <span class="bp">≤</span> <span class="n">p</span><span class="o">)</span> <span class="o">(</span><span class="n">hprod</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">b</span> <span class="bp">*</span> <span class="n">c</span> <span class="bp">≠</span> <span class="mi">0</span><span class="o">)</span>
  <span class="o">(</span><span class="n">hgcd</span> <span class="o">:</span> <span class="n">is_unit</span> <span class="o">(({</span><span class="n">a</span><span class="o">,</span> <span class="n">b</span><span class="o">,</span> <span class="n">c</span><span class="o">}</span> <span class="o">:</span> <span class="n">finset</span> <span class="n">ℤ</span><span class="o">)</span><span class="bp">.</span><span class="n">gcd</span> <span class="n">id</span><span class="o">))</span>
  <span class="o">(</span><span class="n">hab</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">a</span> <span class="bp">≡</span> <span class="n">b</span> <span class="o">[</span><span class="n">ZMOD</span> <span class="n">p</span><span class="o">])</span> <span class="o">(</span><span class="n">caseI</span> <span class="o">:</span> <span class="bp">¬</span> <span class="bp">↑</span><span class="n">p</span> <span class="bp">∣</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">b</span> <span class="bp">*</span> <span class="n">c</span><span class="o">)</span>
</code></pre></div>
<p>So feel free to add any assumption already present in this lemma.</p>



<a name="302448850"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/302448850" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Birkbeck <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#302448850">(Oct 05 2022 at 12:46)</a>:</h4>
<p>Yeah exactly, one of those assumptions is needed for the proof (at least for the proof we have in the blueprint)</p>



<a name="302448929"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/302448929" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#302448929">(Oct 05 2022 at 12:47)</a>:</h4>
<p>I think it's a good idea to state them exactly as in <code>caseI_easier</code> if possible (for example we have several way of saying <code>¬a ≡ b [ZMOD p]</code>).</p>



<a name="302451148"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/302451148" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#302451148">(Oct 05 2022 at 13:01)</a>:</h4>
<p>Wait, do you really need <code>is_coprime x y</code>?</p>



<a name="302451250"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/302451250" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#302451250">(Oct 05 2022 at 13:01)</a>:</h4>
<p>Or <code>¬ p ∣ x * y</code> is enough?</p>



<a name="302451568"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/302451568" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#302451568">(Oct 05 2022 at 13:03)</a>:</h4>
<p>Ah, it's needed, but it's easy to prove.</p>



<a name="302453197"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/302453197" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Birkbeck <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#302453197">(Oct 05 2022 at 13:11)</a>:</h4>
<p><span class="user-mention silent" data-user-id="130384">Riccardo Brasca</span> <a href="#narrow/stream/304774-FLT-regular/topic/Case.20I/near/302451148">said</a>:</p>
<blockquote>
<p>Wait, do you really need <code>is_coprime x y</code>?</p>
</blockquote>
<p>No I think you really do need this and that <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi><mo>∤</mo><mi>x</mi><mo>+</mo><mi>y</mi></mrow><annotation encoding="application/x-tex">p \nmid x + y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9925em;vertical-align:-0.2514em;"></span><span class="mord mathnormal">p</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel amsrm">∤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span></span></span> (at least thats what Washington uses)</p>



<a name="302457961"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/302457961" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#302457961">(Oct 05 2022 at 13:38)</a>:</h4>
<p>Now I am confused. I am talking about the proof that the ideals are coprime. Can you try to write down a Lean statement?</p>



<a name="302458089"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/302458089" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#302458089">(Oct 05 2022 at 13:38)</a>:</h4>
<p>In the statement in the blueprint there is no <code>z</code>, but <code>z</code> is in the proof, so we also need <code>x ^ p + y ^ p = z ^ p</code>?</p>



<a name="302459035"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/302459035" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Birkbeck <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#302459035">(Oct 05 2022 at 13:43)</a>:</h4>
<p>So in the proof you end up showing that if they werent coprime, then <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi><mo>+</mo><mi>y</mi><mo>≡</mo><mn>0</mn><mspace></mspace><mspace width="0.6667em"/><mrow><mi mathvariant="normal">m</mi><mi mathvariant="normal">o</mi><mi mathvariant="normal">d</mi></mrow><mtext> </mtext><mtext> </mtext><mi>p</mi></mrow><annotation encoding="application/x-tex">x + y \equiv 0 \mod p</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6582em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≡</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span><span class="mspace allowbreak"></span><span class="mspace" style="margin-right:0.6667em;"></span></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord"><span class="mord mathrm">mod</span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">p</span></span></span></span>, which then implies that <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi><mo>+</mo><mi>y</mi><mo>≡</mo><msup><mi>x</mi><mi>p</mi></msup><mo>+</mo><msup><mi>y</mi><mi>p</mi></msup><mo>≡</mo><msup><mi>z</mi><mi>p</mi></msup><mo>≡</mo><mn>0</mn><mspace></mspace><mspace width="0.6667em"/><mrow><mi mathvariant="normal">m</mi><mi mathvariant="normal">o</mi><mi mathvariant="normal">d</mi></mrow><mtext> </mtext><mtext> </mtext><mi>p</mi></mrow><annotation encoding="application/x-tex">x+y \equiv x^p + y^p  \equiv z^p \equiv 0 \mod p</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6582em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≡</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7477em;vertical-align:-0.0833em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6644em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">p</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8588em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6644em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">p</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≡</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6644em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.04398em;">z</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6644em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">p</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≡</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span><span class="mspace allowbreak"></span><span class="mspace" style="margin-right:0.6667em;"></span></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord"><span class="mord mathrm">mod</span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">p</span></span></span></span> and then you get your contradiction as <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi><mo>∤</mo><mi>z</mi></mrow><annotation encoding="application/x-tex">p \nmid z</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9925em;vertical-align:-0.2514em;"></span><span class="mord mathnormal">p</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel amsrm">∤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.04398em;">z</span></span></span></span> (under the assumptions of <code>caseI</code>). So to prove the coprime lemma we just need to add the assumption <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi><mo>+</mo><mi>y</mi><mo mathvariant="normal">≠</mo><mn>0</mn><mspace></mspace><mspace width="0.6667em"/><mrow><mi mathvariant="normal">m</mi><mi mathvariant="normal">o</mi><mi mathvariant="normal">d</mi></mrow><mtext> </mtext><mtext> </mtext><mi>p</mi></mrow><annotation encoding="application/x-tex">x + y \ne 0 \mod p</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel"><span class="mrel"><span class="mord vbox"><span class="thinbox"><span class="rlap"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="inner"><span class="mord"><span class="mrel"></span></span></span><span class="fix"></span></span></span></span></span><span class="mrel">=</span></span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span><span class="mspace allowbreak"></span><span class="mspace" style="margin-right:0.6667em;"></span></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord"><span class="mord mathrm">mod</span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">p</span></span></span></span></p>



<a name="302459049"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/302459049" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#302459049">(Oct 05 2022 at 13:43)</a>:</h4>
<p>Checking the proof what we need seems to be that <code>{x,y,z}</code> are coprime, <code>x^p + y^p = z^p</code> and <code>¬ p ∣ x*y*z</code>, which in turn implies that <code>is_coprime x y</code> and <code>¬ x + y  ≡ 0 [ZMOD p]</code></p>



<a name="302459391"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/302459391" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Birkbeck <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#302459391">(Oct 05 2022 at 13:45)</a>:</h4>
<p><span class="user-mention silent" data-user-id="130384">Riccardo Brasca</span> <a href="#narrow/stream/304774-FLT-regular/topic/Case.20I/near/302458089">said</a>:</p>
<blockquote>
<p>In the statement in the blueprint there is no <code>z</code>, but <code>z</code> is in the proof, so we also need <code>x ^ p + y ^ p = z ^ p</code>?</p>
</blockquote>
<p>yes sorry, the proof in the blueprint is under the assumption that we are in <code>caseI</code></p>



<a name="302460135"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/302460135" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#302460135">(Oct 05 2022 at 13:49)</a>:</h4>
<p>I am sorry but we really need a Lean statement.</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">flt_ideals_coprime</span> <span class="o">[</span><span class="n">fact</span> <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span><span class="bp">.</span><span class="n">prime</span><span class="o">]</span> <span class="o">(</span><span class="n">p5</span> <span class="o">:</span> <span class="mi">5</span> <span class="bp">≤</span> <span class="n">p</span><span class="o">)</span> <span class="o">{</span><span class="n">x</span> <span class="n">y</span> <span class="n">z</span> <span class="o">:</span> <span class="n">ℤ</span><span class="o">}</span>
  <span class="o">(</span><span class="n">H</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">^</span> <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span> <span class="bp">+</span> <span class="n">y</span> <span class="bp">^</span> <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span> <span class="bp">=</span> <span class="n">z</span> <span class="bp">^</span> <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">))</span> <span class="o">{</span><span class="n">η₁</span> <span class="n">η₂</span> <span class="o">:</span> <span class="n">R</span><span class="o">}</span> <span class="o">(</span><span class="n">hxy</span> <span class="o">:</span> <span class="n">is_coprime</span> <span class="n">x</span> <span class="n">y</span><span class="o">)</span>
  <span class="o">(</span><span class="n">hη₁</span> <span class="o">:</span> <span class="n">η₁</span> <span class="bp">∈</span> <span class="n">nth_roots_finset</span> <span class="n">p</span> <span class="n">R</span><span class="o">)</span> <span class="o">(</span><span class="n">hη₂</span> <span class="o">:</span> <span class="n">η₂</span> <span class="bp">∈</span> <span class="n">nth_roots_finset</span> <span class="n">p</span> <span class="n">R</span><span class="o">)</span> <span class="o">(</span><span class="n">hdiff</span> <span class="o">:</span> <span class="n">η₁</span> <span class="bp">≠</span> <span class="n">η₂</span><span class="o">)</span>
  <span class="o">(</span><span class="n">caseI</span> <span class="o">:</span> <span class="bp">¬</span> <span class="bp">↑</span><span class="n">p</span> <span class="bp">∣</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">y</span> <span class="bp">*</span> <span class="n">z</span><span class="o">)</span> <span class="o">:</span> <span class="n">is_coprime</span> <span class="o">(</span><span class="n">flt_ideals</span> <span class="n">p</span> <span class="n">x</span> <span class="n">y</span> <span class="n">hη₁</span><span class="o">)</span> <span class="o">(</span><span class="n">flt_ideals</span> <span class="n">p</span> <span class="n">x</span> <span class="n">y</span> <span class="n">hη₂</span><span class="o">)</span> <span class="o">:=</span>
</code></pre></div>
<p>is OK?</p>



<a name="302460172"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/302460172" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Birkbeck <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#302460172">(Oct 05 2022 at 13:49)</a>:</h4>
<p>its my fault for being sloppy, when making the blueprint I cut up the proof into these lemmas and didn't pay enough attention to the exact assumptions for each lemma, as in my head we were always in <code>caseI</code>.</p>



<a name="302460192"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/302460192" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#302460192">(Oct 05 2022 at 13:49)</a>:</h4>
<p>we have caseI with the assumption that <code>x</code> and <code>y</code> are coprime.</p>



<a name="302460293"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/302460293" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#302460293">(Oct 05 2022 at 13:50)</a>:</h4>
<p>Don't worry, this is way we are writing things in Lean!</p>



<a name="302460347"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/302460347" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Birkbeck <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#302460347">(Oct 05 2022 at 13:50)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">flt_ideals_coprime2</span> <span class="o">[</span><span class="n">fact</span> <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span><span class="bp">.</span><span class="n">prime</span><span class="o">]</span> <span class="o">(</span><span class="n">ph</span> <span class="o">:</span> <span class="mi">5</span> <span class="bp">≤</span> <span class="n">p</span><span class="o">)</span> <span class="o">{</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">ℤ</span><span class="o">}</span> <span class="o">{</span><span class="n">η₁</span> <span class="n">η₂</span> <span class="o">:</span> <span class="n">R</span><span class="o">}</span>
  <span class="o">(</span><span class="n">hη₁</span> <span class="o">:</span> <span class="n">η₁</span> <span class="bp">∈</span> <span class="n">nth_roots_finset</span> <span class="n">p</span> <span class="n">R</span><span class="o">)</span> <span class="o">(</span><span class="n">hη₂</span> <span class="o">:</span> <span class="n">η₂</span> <span class="bp">∈</span> <span class="n">nth_roots_finset</span> <span class="n">p</span> <span class="n">R</span><span class="o">)</span> <span class="o">(</span><span class="n">hdiff</span> <span class="o">:</span> <span class="n">η₁</span> <span class="bp">≠</span> <span class="n">η₂</span><span class="o">)</span>
  <span class="o">(</span><span class="n">hp</span> <span class="o">:</span> <span class="n">is_coprime</span> <span class="n">x</span> <span class="n">y</span><span class="o">)</span> <span class="o">(</span><span class="n">hp2</span> <span class="o">:</span> <span class="bp">¬</span> <span class="n">x</span> <span class="bp">+</span> <span class="n">y</span>  <span class="bp">≡</span> <span class="mi">0</span> <span class="o">[</span><span class="n">ZMOD</span> <span class="n">p</span><span class="o">])</span> <span class="o">:</span>
  <span class="n">is_coprime</span> <span class="o">(</span><span class="n">flt_ideals</span> <span class="n">p</span> <span class="n">x</span> <span class="n">y</span> <span class="n">hη₁</span><span class="o">)</span> <span class="o">(</span><span class="n">flt_ideals</span> <span class="n">p</span> <span class="n">x</span> <span class="n">y</span> <span class="n">hη₂</span><span class="o">)</span> <span class="o">:=</span>
</code></pre></div>



<a name="302460512"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/302460512" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Birkbeck <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#302460512">(Oct 05 2022 at 13:51)</a>:</h4>
<p>this is enough and all the assumptions follow from the ones in <code>caseI</code></p>



<a name="302460778"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/302460778" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#302460778">(Oct 05 2022 at 13:52)</a>:</h4>
<p><code>hp2</code> can be removed, right? I know we have all of them, but I am trying to state a reasonable result.</p>



<a name="302461239"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/302461239" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Birkbeck <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#302461239">(Oct 05 2022 at 13:54)</a>:</h4>
<p>hmm no, I think that if we don't want to mention <code>z</code> in the coprime  lemma then we need <code>hp2</code>. Or are you saying this follows from the other hypothesis in the lemma?</p>



<a name="302461778"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/302461778" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#302461778">(Oct 05 2022 at 13:57)</a>:</h4>
<p>Sorry, I misread.</p>



<a name="302462078"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/302462078" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#302462078">(Oct 05 2022 at 13:58)</a>:</h4>
<p>Let's keep this one.</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">flt_ideals_coprime</span> <span class="o">[</span><span class="n">fact</span> <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span><span class="bp">.</span><span class="n">prime</span><span class="o">]</span> <span class="o">(</span><span class="n">p5</span> <span class="o">:</span> <span class="mi">5</span> <span class="bp">≤</span> <span class="n">p</span><span class="o">)</span> <span class="o">{</span><span class="n">x</span> <span class="n">y</span> <span class="n">z</span> <span class="o">:</span> <span class="n">ℤ</span><span class="o">}</span>
  <span class="o">(</span><span class="n">H</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">^</span> <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span> <span class="bp">+</span> <span class="n">y</span> <span class="bp">^</span> <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span> <span class="bp">=</span> <span class="n">z</span> <span class="bp">^</span> <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">))</span> <span class="o">{</span><span class="n">η₁</span> <span class="n">η₂</span> <span class="o">:</span> <span class="n">R</span><span class="o">}</span> <span class="o">(</span><span class="n">hxy</span> <span class="o">:</span> <span class="n">is_coprime</span> <span class="n">x</span> <span class="n">y</span><span class="o">)</span>
  <span class="o">(</span><span class="n">hη₁</span> <span class="o">:</span> <span class="n">η₁</span> <span class="bp">∈</span> <span class="n">nth_roots_finset</span> <span class="n">p</span> <span class="n">R</span><span class="o">)</span> <span class="o">(</span><span class="n">hη₂</span> <span class="o">:</span> <span class="n">η₂</span> <span class="bp">∈</span> <span class="n">nth_roots_finset</span> <span class="n">p</span> <span class="n">R</span><span class="o">)</span> <span class="o">(</span><span class="n">hdiff</span> <span class="o">:</span> <span class="n">η₁</span> <span class="bp">≠</span> <span class="n">η₂</span><span class="o">)</span>
  <span class="o">(</span><span class="n">caseI</span> <span class="o">:</span> <span class="bp">¬</span> <span class="bp">↑</span><span class="n">p</span> <span class="bp">∣</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">y</span> <span class="bp">*</span> <span class="n">z</span><span class="o">)</span> <span class="o">:</span> <span class="n">is_coprime</span> <span class="o">(</span><span class="n">flt_ideals</span> <span class="n">p</span> <span class="n">x</span> <span class="n">y</span> <span class="n">hη₁</span><span class="o">)</span> <span class="o">(</span><span class="n">flt_ideals</span> <span class="n">p</span> <span class="n">x</span> <span class="n">y</span> <span class="n">hη₂</span><span class="o">)</span>
</code></pre></div>



<a name="302462147"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/302462147" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Birkbeck <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#302462147">(Oct 05 2022 at 13:59)</a>:</h4>
<p>Sure, that also works :)</p>



<a name="302462161"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/302462161" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#302462161">(Oct 05 2022 at 13:59)</a>:</h4>
<p>It's easy enough to apply, and proving <code> ¬ x + y  ≡ 0 [ZMOD p]</code> should be trivial.</p>



<a name="302462288"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/302462288" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Birkbeck <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#302462288">(Oct 05 2022 at 13:59)</a>:</h4>
<p>wait..the one you sent doesnt have that?</p>



<a name="302462397"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/302462397" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Birkbeck <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#302462397">(Oct 05 2022 at 14:00)</a>:</h4>
<p>oh sorry, I see what you mean</p>



<a name="302462424"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/302462424" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Birkbeck <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#302462424">(Oct 05 2022 at 14:00)</a>:</h4>
<p>yes thats easy enough</p>



<a name="302470357"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/302470357" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Birkbeck <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#302470357">(Oct 05 2022 at 14:34)</a>:</h4>
<p>where is the fact that <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mo>−</mo><mi>ζ</mi></mrow><annotation encoding="application/x-tex">1- \zeta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.07378em;">ζ</span></span></span></span> is prime?</p>



<a name="302470565"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/302470565" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Birkbeck <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#302470565">(Oct 05 2022 at 14:35)</a>:</h4>
<p>on nvm found it its in <code>zeta_sub_one_prime</code> :p</p>



<a name="302471382"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/302471382" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#302471382">(Oct 05 2022 at 14:38)</a>:</h4>
<p>The current statement is</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">flt_ideals_coprime</span> <span class="o">[</span><span class="n">fact</span> <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span><span class="bp">.</span><span class="n">prime</span><span class="o">]</span> <span class="o">(</span><span class="n">p5</span> <span class="o">:</span> <span class="mi">5</span> <span class="bp">≤</span> <span class="n">p</span><span class="o">)</span> <span class="o">{</span><span class="n">x</span> <span class="n">y</span> <span class="n">z</span> <span class="o">:</span> <span class="n">ℤ</span><span class="o">}</span>
  <span class="o">(</span><span class="n">H</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">^</span> <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span> <span class="bp">+</span> <span class="n">y</span> <span class="bp">^</span> <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span> <span class="bp">=</span> <span class="n">z</span> <span class="bp">^</span> <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">))</span> <span class="o">{</span><span class="n">η₁</span> <span class="n">η₂</span> <span class="o">:</span> <span class="n">R</span><span class="o">}</span> <span class="o">(</span><span class="n">hxy</span> <span class="o">:</span> <span class="n">is_coprime</span> <span class="n">x</span> <span class="n">y</span><span class="o">)</span>
  <span class="o">(</span><span class="n">hη₁</span> <span class="o">:</span> <span class="n">η₁</span> <span class="bp">∈</span> <span class="n">nth_roots_finset</span> <span class="n">p</span> <span class="n">R</span><span class="o">)</span> <span class="o">(</span><span class="n">hη₂</span> <span class="o">:</span> <span class="n">η₂</span> <span class="bp">∈</span> <span class="n">nth_roots_finset</span> <span class="n">p</span> <span class="n">R</span><span class="o">)</span> <span class="o">(</span><span class="n">hdiff</span> <span class="o">:</span> <span class="n">η₁</span> <span class="bp">≠</span> <span class="n">η₂</span><span class="o">)</span>
  <span class="o">(</span><span class="n">caseI</span> <span class="o">:</span> <span class="bp">¬</span> <span class="bp">↑</span><span class="n">p</span> <span class="bp">∣</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">y</span> <span class="bp">*</span> <span class="n">z</span><span class="o">)</span> <span class="o">:</span> <span class="n">is_coprime</span> <span class="o">(</span><span class="n">flt_ideals</span> <span class="n">p</span> <span class="n">x</span> <span class="n">y</span> <span class="n">hη₁</span><span class="o">)</span> <span class="o">(</span><span class="n">flt_ideals</span> <span class="n">p</span> <span class="n">x</span> <span class="n">y</span> <span class="n">hη₂</span><span class="o">)</span> <span class="o">:=</span>
</code></pre></div>
<p><code>¬ x + y  ≡ 0 [ZMOD p]</code> follows because if <code>p</code> divides <code>x+y</code> then it divides <code>z</code> and so the product, and there is <code>caseI</code>.</p>



<a name="302471471"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/302471471" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#302471471">(Oct 05 2022 at 14:39)</a>:</h4>
<p>we will need a mini-lemma for this, but it should be trivial</p>



<a name="302471693"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/302471693" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Birkbeck <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#302471693">(Oct 05 2022 at 14:40)</a>:</h4>
<p>I'm currently working on the proof of this. But I'm pretty slow, so someone might beat me to it.</p>



<a name="302473262"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/302473262" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#302473262">(Oct 05 2022 at 14:47)</a>:</h4>
<p>I've added a (very slow, I will try to improve it) proof of </p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">theorem</span> <span class="n">exist_ideal</span> <span class="o">{</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℤ</span><span class="o">}</span> <span class="o">(</span><span class="n">h5p</span> <span class="o">:</span> <span class="mi">5</span> <span class="bp">≤</span> <span class="n">p</span><span class="o">)</span>
  <span class="o">(</span><span class="n">H</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">^</span> <span class="n">p</span> <span class="bp">+</span> <span class="n">b</span> <span class="bp">^</span> <span class="n">p</span> <span class="bp">=</span> <span class="n">c</span> <span class="bp">^</span> <span class="n">p</span><span class="o">)</span>
  <span class="o">(</span><span class="n">hgcd</span> <span class="o">:</span> <span class="n">is_unit</span> <span class="o">(({</span><span class="n">a</span><span class="o">,</span> <span class="n">b</span><span class="o">,</span> <span class="n">c</span><span class="o">}</span> <span class="o">:</span> <span class="n">finset</span> <span class="n">ℤ</span><span class="o">)</span><span class="bp">.</span><span class="n">gcd</span> <span class="n">id</span><span class="o">))</span>
  <span class="o">(</span><span class="n">caseI</span> <span class="o">:</span> <span class="bp">¬</span> <span class="bp">↑</span><span class="n">p</span> <span class="bp">∣</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">b</span> <span class="bp">*</span> <span class="n">c</span><span class="o">)</span> <span class="o">:</span>
  <span class="bp">∀</span> <span class="n">i</span> <span class="bp">∈</span> <span class="n">nth_roots_finset</span> <span class="n">p</span> <span class="n">R</span><span class="o">,</span> <span class="bp">∃</span> <span class="n">I</span><span class="o">,</span> <span class="n">span</span> <span class="o">({</span><span class="n">a</span> <span class="bp">+</span> <span class="n">i</span> <span class="bp">*</span> <span class="n">b</span><span class="o">}</span> <span class="o">:</span> <span class="n">set</span> <span class="n">R</span><span class="o">)</span> <span class="bp">=</span> <span class="n">I</span> <span class="bp">^</span> <span class="n">p</span>
</code></pre></div>
<p>is <code>caseI.statement</code>. This is the only place (I think) where we need <code>flt_ideals_coprime</code>. If you modify the statement make sure this one still compiles.</p>



<a name="302473550"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/302473550" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Birkbeck <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#302473550">(Oct 05 2022 at 14:48)</a>:</h4>
<p>sure thing!</p>



<a name="302485451"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/302485451" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#302485451">(Oct 05 2022 at 15:38)</a>:</h4>
<p>Don't hesitate to create a lot of small sorried lemma and to push them. This will surely speed up the job</p>



<a name="302514697"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/302514697" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Birkbeck <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#302514697">(Oct 05 2022 at 18:04)</a>:</h4>
<p>yeah well I've added lots of sorries to a proof of the version I was working on and which gives the version we want (up to a trivial sorry I've not yet filled in). I wont be able to look at this until friday, but I think it should be doable without too much pain.</p>



<a name="302519893"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/302519893" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#302519893">(Oct 05 2022 at 18:33)</a>:</h4>
<p>Nice !</p>



<a name="302519992"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/302519992" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#302519992">(Oct 05 2022 at 18:34)</a>:</h4>
<p>It's reasonable to finish this proof in October I think</p>



<a name="302621846"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/302621846" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#302621846">(Oct 06 2022 at 10:22)</a>:</h4>
<p><code>git blame</code> says that <span class="user-mention" data-user-id="284160">@Eric Rodriguez</span>  is to blame for</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">instance</span> <span class="o">:</span> <span class="n">is_principal_ideal_ring</span> <span class="o">(</span><span class="bp">𝓞</span> <span class="n">L</span><span class="o">)</span> <span class="o">:=</span> <span class="gr">sorry</span>
</code></pre></div>
<p><span aria-label="rolling on the floor laughing" class="emoji emoji-1f923" role="img" title="rolling on the floor laughing">:rolling_on_the_floor_laughing:</span></p>



<a name="302621914"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/302621914" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#302621914">(Oct 06 2022 at 10:23)</a>:</h4>
<p>wait, there is even a proof!</p>



<a name="302622329"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/302622329" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#302622329">(Oct 06 2022 at 10:26)</a>:</h4>
<p>Let me remove it, hopefully it wasn't used.</p>



<a name="302622330"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/302622330" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#302622330">(Oct 06 2022 at 10:26)</a>:</h4>
<p>OK, maybe it was true with some assumption on <code>L</code> (currently <code>L</code> is any number field...) and then this assumption was removed, so in practice now we have a false instance around</p>



<a name="302622399"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/302622399" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#302622399">(Oct 06 2022 at 10:26)</a>:</h4>
<p>That is for L an 2nd cyclotomic extension :)</p>



<a name="302622420"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/302622420" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#302622420">(Oct 06 2022 at 10:27)</a>:</h4>
<p>(aka Q)</p>



<a name="302622911"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/302622911" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#302622911">(Oct 06 2022 at 10:30)</a>:</h4>
<p>But <code>[is_cyclotomic_extension {2} K L]</code> wasn't included, since there is no <code>K</code> in the statement... so this instance really simplified the proof that the relevant ideal is principal.</p>



<a name="302623192"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/302623192" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#302623192">(Oct 06 2022 at 10:32)</a>:</h4>
<p>Oops...</p>



<a name="302671419"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/302671419" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#302671419">(Oct 06 2022 at 14:54)</a>:</h4>
<p>We now have</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">theorem</span> <span class="n">is_principal</span> <span class="o">{</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℤ</span><span class="o">}</span> <span class="o">{</span><span class="n">ζ</span> <span class="o">:</span> <span class="n">R</span><span class="o">}</span> <span class="o">(</span><span class="n">hreg</span> <span class="o">:</span> <span class="n">is_regular_number</span> <span class="n">p</span> <span class="n">hpri.pos</span><span class="o">)</span> <span class="o">(</span><span class="n">hp5</span> <span class="o">:</span> <span class="mi">5</span> <span class="bp">≤</span> <span class="n">p</span><span class="o">)</span>
  <span class="o">(</span><span class="n">hprod</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">b</span> <span class="bp">*</span> <span class="n">c</span> <span class="bp">≠</span> <span class="mi">0</span><span class="o">)</span> <span class="o">(</span><span class="n">hgcd</span> <span class="o">:</span> <span class="n">is_unit</span> <span class="o">(({</span><span class="n">a</span><span class="o">,</span> <span class="n">b</span><span class="o">,</span> <span class="n">c</span><span class="o">}</span> <span class="o">:</span> <span class="n">finset</span> <span class="n">ℤ</span><span class="o">)</span><span class="bp">.</span><span class="n">gcd</span> <span class="n">id</span><span class="o">))</span> <span class="o">(</span><span class="n">hab</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">a</span> <span class="bp">≡</span> <span class="n">b</span> <span class="o">[</span><span class="n">ZMOD</span> <span class="n">p</span><span class="o">])</span>
  <span class="o">(</span><span class="n">caseI</span> <span class="o">:</span> <span class="bp">¬</span> <span class="bp">↑</span><span class="n">p</span> <span class="bp">∣</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">b</span> <span class="bp">*</span> <span class="n">c</span><span class="o">)</span> <span class="o">(</span><span class="n">H</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">^</span> <span class="n">p</span> <span class="bp">+</span> <span class="n">b</span> <span class="bp">^</span> <span class="n">p</span> <span class="bp">=</span> <span class="n">c</span> <span class="bp">^</span> <span class="n">p</span><span class="o">)</span> <span class="o">(</span><span class="n">hζ</span> <span class="o">:</span> <span class="n">is_primitive_root</span> <span class="n">ζ</span> <span class="n">p</span><span class="o">)</span> <span class="o">:</span>
  <span class="bp">∃</span> <span class="o">(</span><span class="n">u</span> <span class="o">:</span> <span class="n">R</span><span class="bp">ˣ</span><span class="o">)</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="n">R</span><span class="o">),</span> <span class="bp">↑</span><span class="n">u</span> <span class="bp">*</span> <span class="o">(</span><span class="n">α</span> <span class="bp">^</span> <span class="n">p</span><span class="o">)</span> <span class="bp">=</span> <span class="bp">↑</span><span class="n">a</span> <span class="bp">+</span> <span class="n">ζ</span> <span class="bp">*</span> <span class="bp">↑</span><span class="n">b</span> <span class="o">:=</span>
</code></pre></div>
<p>that depends on only one sorry (I hope), that the ideals are coprime. This is a very good news, since this is the crucial step where we use regularity of <code>p</code>. The rest should be quite elementary, even if the sentence "checking each case leads to a contradiction" may be annoying.</p>



<a name="302718944"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/302718944" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Birkbeck <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#302718944">(Oct 06 2022 at 18:49)</a>:</h4>
<p>Awesome! I'll try to do some more on the coprime ideal lemma tomorrow</p>



<a name="303251625"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/303251625" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Birkbeck <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#303251625">(Oct 10 2022 at 12:33)</a>:</h4>
<p>Do we have something like this somewhere? </p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">zeta_sub_one_dvb_p</span> <span class="o">[</span><span class="n">fact</span> <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span><span class="bp">.</span><span class="n">prime</span><span class="o">]</span> <span class="o">(</span><span class="n">ph</span> <span class="o">:</span> <span class="mi">5</span> <span class="bp">≤</span> <span class="n">p</span><span class="o">)</span> <span class="o">{</span><span class="n">η</span> <span class="o">:</span> <span class="n">R</span><span class="o">}</span> <span class="o">(</span><span class="n">hη</span> <span class="o">:</span> <span class="n">η</span> <span class="bp">∈</span> <span class="n">nth_roots_finset</span> <span class="n">p</span> <span class="n">R</span><span class="o">)</span>
  <span class="o">(</span><span class="n">hne1</span> <span class="o">:</span> <span class="n">η</span> <span class="bp">≠</span> <span class="mi">1</span><span class="o">):</span> <span class="o">(</span><span class="mi">1</span> <span class="bp">-</span> <span class="n">η</span><span class="o">)</span> <span class="bp">∣</span> <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="n">R</span><span class="o">)</span> <span class="o">:=</span>
</code></pre></div>
<p>Here <code>R = 𝓞 (cyclotomic_field p ℚ)</code>.</p>



<a name="303261704"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/303261704" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#303261704">(Oct 10 2022 at 13:37)</a>:</h4>
<p>It should be easy. We know the norm of <code>1 - ζ</code>, and we know that the norm is the product of conjugates</p>



<a name="303261741"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/303261741" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#303261741">(Oct 10 2022 at 13:38)</a>:</h4>
<p>But I have the impression of having already proved it</p>



<a name="303261853"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/303261853" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#303261853">(Oct 10 2022 at 13:38)</a>:</h4>
<p>I think it's proved for the case of primitive roots, but the proof should be easy to generalise</p>



<a name="303261895"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/303261895" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Birkbeck <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#303261895">(Oct 10 2022 at 13:39)</a>:</h4>
<p>Hmm yeah I was looking at that. The problem is that its stated for fields not the rings of integers. I was worried it would be annoying to go from field elements to ring elements</p>



<a name="303261940"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/303261940" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Michael Stoll <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#303261940">(Oct 10 2022 at 13:39)</a>:</h4>
<p>Evaluate <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><msup><mi>X</mi><mi>p</mi></msup><mo>−</mo><mn>1</mn><mo stretchy="false">)</mo><mi mathvariant="normal">/</mi><mo stretchy="false">(</mo><mi>X</mi><mo>−</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(X^p - 1)/(X - 1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6644em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">p</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">)</span><span class="mord">/</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">)</span></span></span></span> at <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn></mrow><annotation encoding="application/x-tex">1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span>?</p>



<a name="303261961"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/303261961" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#303261961">(Oct 10 2022 at 13:39)</a>:</h4>
<p>you have to use <code>norm'</code></p>



<a name="303262076"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/303262076" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Birkbeck <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#303262076">(Oct 10 2022 at 13:40)</a>:</h4>
<p><span class="user-mention silent" data-user-id="130384">Riccardo Brasca</span> <a href="#narrow/stream/304774-FLT-regular/topic/Case.20I/near/303261961">said</a>:</p>
<blockquote>
<p>you have to use <code>norm'</code></p>
</blockquote>
<p>Oh I hadn't seen <code>norm'</code> let me have a look</p>



<a name="303262247"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/303262247" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#303262247">(Oct 10 2022 at 13:41)</a>:</h4>
<p>It the norm defined on the ring of integers, taking values in <code>ℤ</code></p>



<a name="303262335"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/303262335" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#303262335">(Oct 10 2022 at 13:42)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">dvd_norm</span> <span class="o">[</span><span class="n">is_galois</span> <span class="n">K</span> <span class="n">L</span><span class="o">]</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">∣</span> <span class="n">algebra_map</span> <span class="o">(</span><span class="bp">𝓞</span> <span class="n">K</span><span class="o">)</span> <span class="o">(</span><span class="bp">𝓞</span> <span class="n">L</span><span class="o">)</span> <span class="o">(</span><span class="n">norm'</span> <span class="n">K</span> <span class="n">x</span><span class="o">)</span>
</code></pre></div>
<p>is what you want</p>



<a name="303262506"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/303262506" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Birkbeck <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#303262506">(Oct 10 2022 at 13:43)</a>:</h4>
<p>yep thats what I want.</p>



<a name="303262591"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/303262591" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#303262591">(Oct 10 2022 at 13:43)</a>:</h4>
<p>With <a href="https://leanprover-community.github.io/mathlib_docs/find/is_primitive_root.sub_one_norm_prime_ne_two">docs#is_primitive_root.sub_one_norm_prime_ne_two</a></p>



<a name="303262662"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/303262662" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#303262662">(Oct 10 2022 at 13:44)</a>:</h4>
<p>I mean, it's already there</p>



<a name="303262760"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/303262760" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Birkbeck <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#303262760">(Oct 10 2022 at 13:44)</a>:</h4>
<p>what <code>dvd_norm</code> is already there?</p>



<a name="303262768"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/303262768" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#303262768">(Oct 10 2022 at 13:44)</a>:</h4>
<p>yes</p>



<a name="303262875"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/303262875" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#303262875">(Oct 10 2022 at 13:45)</a>:</h4>
<p>in <code>src/norm/norm_of_units.lean</code></p>



<a name="303263035"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/303263035" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Birkbeck <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#303263035">(Oct 10 2022 at 13:45)</a>:</h4>
<p>oh great, thanks!</p>



<a name="303263230"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/303263230" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#303263230">(Oct 10 2022 at 13:46)</a>:</h4>
<p>It was part of the proof that <code>1 -ζ</code> is prime avoiding defining the norm of an ideal</p>



<a name="303320414"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/303320414" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#303320414">(Oct 10 2022 at 20:15)</a>:</h4>
<p><span class="user-mention" data-user-id="389019">@Chris Birkbeck</span> your <code>prim_coe </code> can be proved as</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">prim_coe</span> <span class="o">(</span><span class="n">ζ</span> <span class="o">:</span> <span class="n">R</span><span class="o">)</span> <span class="o">(</span><span class="n">hζ</span> <span class="o">:</span> <span class="n">is_primitive_root</span> <span class="n">ζ</span> <span class="n">p</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">is_primitive_root</span> <span class="o">(</span><span class="n">ζ</span> <span class="o">:</span> <span class="o">(</span><span class="n">cyclotomic_field</span> <span class="n">p</span> <span class="n">ℚ</span><span class="o">))</span>  <span class="n">p</span> <span class="o">:=</span>
<span class="n">coe_submonoid_class_iff.mpr</span> <span class="n">hζ</span>
</code></pre></div>
<p>I've pushed this proof (and removed a linter error). I think we can just replace it by its proof, but that's up to you.</p>



<a name="303320500"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/303320500" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#303320500">(Oct 10 2022 at 20:16)</a>:</h4>
<p>(BTW I really like lemmas stated using the new classes for morphisms!)</p>



<a name="303320629"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/303320629" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Birkbeck <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#303320629">(Oct 10 2022 at 20:17)</a>:</h4>
<p>Oh great, I knew that had to be somewhere! I just put it there cuz I thought I'd maybe need it again, but the proof is so short I don't think I'll need to have it separate</p>



<a name="303320751"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/303320751" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Birkbeck <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#303320751">(Oct 10 2022 at 20:18)</a>:</h4>
<p>I'm not sure I know what these new classes for morphisms are?</p>



<a name="303323570"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/303323570" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#303323570">(Oct 10 2022 at 20:44)</a>:</h4>
<p>See section 6.3 in <a href="https://arxiv.org/pdf/2202.01629.pdf">https://arxiv.org/pdf/2202.01629.pdf</a></p>



<a name="303677492"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Case%20I/near/303677492" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Case.20I.html#303677492">(Oct 12 2022 at 16:38)</a>:</h4>
<p>The three edge cases are done (I mean I proved they're impossibile). The main case will be slightly more difficult, but I don't expect any bad surprise.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>