---
layout: archive
title: Zulip Chat Archive
permalink: /stream/304774-FLT-regular/topic/Power.20basis.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/index.html">FLT regular</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Power.20basis.html">Power basis</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="271686101"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Power%20basis/near/271686101" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Power.20basis.html#271686101">(Feb 12 2022 at 12:14)</a>:</h4>
<p>I've added <code>src/ready_for_mathlib/discriminant/power_basis.lean</code> that contains some statements about <code>power_basis</code> that we need. I will not have time to work on it today, but if someone wants to play with it I don't have any objections.</p>
<p>It has the minimal assumptions to write the statements, but in such generality it is probably false, feel free to add any reasonable assumption you want (the main example is <code>A = ℤ</code>, <code>R = ℚ</code> and <code>S = cyclotomic_field p ℚ</code>).</p>



<a name="272972128"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Power%20basis/near/272972128" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Power.20basis.html#272972128">(Feb 23 2022 at 16:23)</a>:</h4>
<p>After some days working on the LTE I am back to this. Does anyone see a quick way of constructing the following?</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">def</span> <span class="n">of_mem_adjon</span> <span class="o">{</span><span class="n">x</span> <span class="o">:</span> <span class="n">L</span><span class="o">}</span> <span class="o">{</span><span class="n">B</span> <span class="o">:</span> <span class="n">power_basis</span> <span class="n">K</span> <span class="n">L</span><span class="o">}</span> <span class="o">(</span><span class="n">hs</span> <span class="o">:</span> <span class="n">B.gen</span> <span class="bp">∈</span> <span class="n">adjoin</span> <span class="n">K</span> <span class="o">({</span><span class="n">x</span><span class="o">}</span> <span class="o">:</span> <span class="n">set</span> <span class="n">L</span><span class="o">))</span> <span class="o">:</span>
  <span class="n">power_basis</span> <span class="n">K</span> <span class="n">L</span> <span class="o">:=</span>
</code></pre></div>



<a name="272972298"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Power%20basis/near/272972298" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Power.20basis.html#272972298">(Feb 23 2022 at 16:24)</a>:</h4>
<p>I assume you want <code>of_mem_adjoin.gen = x</code>?</p>



<a name="272972634"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Power%20basis/near/272972634" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Power.20basis.html#272972634">(Feb 23 2022 at 16:27)</a>:</h4>
<p>Ahah, yes, of course :D</p>



<a name="272972775"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Power%20basis/near/272972775" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Power.20basis.html#272972775">(Feb 23 2022 at 16:28)</a>:</h4>
<p>Otherwise I would just get away with returning <code>B</code> :)</p>



<a name="272974738"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Power%20basis/near/272974738" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Power.20basis.html#272974738">(Feb 23 2022 at 16:41)</a>:</h4>
<p>Ok, I'll try and see if I can prove it</p>



<a name="272974830"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Power%20basis/near/272974830" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Power.20basis.html#272974830">(Feb 23 2022 at 16:42)</a>:</h4>
<p>Isn't this basically the lemma we discussed earlier Anne? Except with the assumption slightly different</p>



<a name="272974876"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Power%20basis/near/272974876" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Power.20basis.html#272974876">(Feb 23 2022 at 16:42)</a>:</h4>
<p>I thought we could get around it here riccardo, using the power basis for primitive roots - what do you need it for?</p>



<a name="272974963"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Power%20basis/near/272974963" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Power.20basis.html#272974963">(Feb 23 2022 at 16:43)</a>:</h4>
<p>I was hoping to eventually prove it in the annihilating polynomial version (someone is just PRing that into mathlib right now)</p>



<a name="272975494"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Power%20basis/near/272975494" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Power.20basis.html#272975494">(Feb 23 2022 at 16:47)</a>:</h4>
<p>I need the power basis given by <code>ζ - 1</code>...</p>



<a name="272975562"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Power%20basis/near/272975562" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Power.20basis.html#272975562">(Feb 23 2022 at 16:47)</a>:</h4>
<p>It's nothing especially difficult, my question is only if this is more or less already done somewhere</p>



<a name="272977465"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Power%20basis/near/272977465" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Power.20basis.html#272977465">(Feb 23 2022 at 17:00)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">ring_theory.power_basis</span>
<span class="kn">import</span> <span class="n">ring_theory.algebraic</span>
<span class="kn">import</span> <span class="n">ring_theory.adjoin.power_basis</span>

<span class="kd">universes</span> <span class="n">u</span> <span class="n">v</span> <span class="n">z</span>

<span class="kd">variables</span> <span class="o">{</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">z</span><span class="o">}</span> <span class="o">{</span><span class="n">S</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">v</span><span class="o">}</span> <span class="o">[</span><span class="n">comm_ring</span> <span class="n">R</span><span class="o">]</span> <span class="o">[</span><span class="n">comm_ring</span> <span class="n">S</span><span class="o">]</span> <span class="o">[</span><span class="n">algebra</span> <span class="n">R</span> <span class="n">S</span><span class="o">]</span>
<span class="kd">variables</span> <span class="o">{</span><span class="n">K</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">}</span> <span class="o">{</span><span class="n">L</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">v</span><span class="o">}</span> <span class="o">[</span><span class="n">field</span> <span class="n">K</span><span class="o">]</span> <span class="o">[</span><span class="n">field</span> <span class="n">L</span><span class="o">]</span> <span class="o">[</span><span class="n">algebra</span> <span class="n">K</span> <span class="n">L</span><span class="o">]</span> <span class="o">(</span><span class="n">B</span> <span class="o">:</span> <span class="n">power_basis</span> <span class="n">K</span> <span class="n">L</span><span class="o">)</span>

<span class="kn">open</span> <span class="n">algebra</span> <span class="n">polynomial</span>

<span class="kn">namespace</span> <span class="n">power_basis</span>

<span class="kd">lemma</span> <span class="n">adjoin_gen_eq_top</span> <span class="o">(</span><span class="n">B</span> <span class="o">:</span> <span class="n">power_basis</span> <span class="n">R</span> <span class="n">S</span><span class="o">)</span> <span class="o">:</span> <span class="n">adjoin</span> <span class="n">R</span> <span class="o">({</span><span class="n">B.gen</span><span class="o">}</span> <span class="o">:</span> <span class="n">set</span> <span class="n">S</span><span class="o">)</span> <span class="bp">=</span> <span class="bp">⊤</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">rw</span> <span class="o">[</span><span class="bp">←</span> <span class="n">to_submodule_eq_top</span><span class="o">,</span> <span class="n">_root_.eq_top_iff</span><span class="o">,</span> <span class="bp">←</span> <span class="n">B.basis.span_eq</span><span class="o">,</span> <span class="n">submodule.span_le</span><span class="o">],</span>
  <span class="n">rintros</span> <span class="n">x</span> <span class="o">⟨</span><span class="n">i</span><span class="o">,</span> <span class="n">rfl</span><span class="o">⟩,</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">B.basis_eq_pow</span> <span class="n">i</span><span class="o">],</span>
  <span class="n">exact</span> <span class="n">subalgebra.pow_mem</span> <span class="n">_</span> <span class="o">(</span><span class="n">subset_adjoin</span> <span class="o">(</span><span class="n">set.mem_singleton</span> <span class="n">_</span><span class="o">))</span> <span class="n">_</span><span class="o">,</span>
<span class="kd">end</span>

<span class="kd">lemma</span> <span class="n">adjoin_eq_top_of_gen_mem</span> <span class="o">(</span><span class="n">B</span> <span class="o">:</span> <span class="n">power_basis</span> <span class="n">R</span> <span class="n">S</span><span class="o">)</span> <span class="o">{</span><span class="n">x</span> <span class="o">:</span> <span class="n">S</span><span class="o">}</span> <span class="o">(</span><span class="n">hx</span> <span class="o">:</span> <span class="n">B.gen</span> <span class="bp">∈</span> <span class="n">adjoin</span> <span class="n">R</span> <span class="o">({</span><span class="n">x</span><span class="o">}</span> <span class="o">:</span> <span class="n">set</span> <span class="n">S</span><span class="o">))</span> <span class="o">:</span>
  <span class="n">adjoin</span> <span class="n">R</span> <span class="o">({</span><span class="n">x</span><span class="o">}</span> <span class="o">:</span> <span class="n">set</span> <span class="n">S</span><span class="o">)</span> <span class="bp">=</span> <span class="bp">⊤</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">_root_.eq_top_iff</span><span class="o">,</span> <span class="bp">←</span> <span class="n">adjoin_gen_eq_top</span> <span class="n">B</span><span class="o">],</span>
  <span class="n">refine</span> <span class="n">adjoin_le</span> <span class="n">_</span><span class="o">,</span>
  <span class="n">simp</span> <span class="o">[</span><span class="n">hx</span><span class="o">],</span>
<span class="kd">end</span>

<span class="sd">/-- The power basis given by `x` if `B.gen ∈ adjoin K {x}`. -/</span>
<span class="kd">noncomputable</span> <span class="kd">def</span> <span class="n">of_mem_adjon</span> <span class="o">{</span><span class="n">x</span> <span class="o">:</span> <span class="n">L</span><span class="o">}</span> <span class="o">(</span><span class="n">hx</span> <span class="o">:</span> <span class="n">B.gen</span> <span class="bp">∈</span> <span class="n">adjoin</span> <span class="n">K</span> <span class="o">({</span><span class="n">x</span><span class="o">}</span> <span class="o">:</span> <span class="n">set</span> <span class="n">L</span><span class="o">))</span> <span class="o">:</span>
  <span class="n">power_basis</span> <span class="n">K</span> <span class="n">L</span> <span class="o">:=</span>
<span class="kd">by</span> <span class="o">{</span> <span class="n">letI</span> <span class="o">:=</span> <span class="n">B.finite_dimensional</span><span class="o">,</span> <span class="n">exact</span> <span class="o">(</span><span class="n">adjoin.power_basis</span> <span class="bp">$</span>
  <span class="n">algebra.is_integral_of_finite</span> <span class="n">K</span> <span class="n">L</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">map</span> <span class="o">((</span><span class="n">subalgebra.equiv_of_eq</span> <span class="n">_</span> <span class="n">_</span> <span class="bp">$</span>
  <span class="n">adjoin_eq_top_of_gen_mem</span> <span class="n">B</span> <span class="n">hx</span><span class="o">)</span><span class="bp">.</span><span class="n">trans</span> <span class="n">top_equiv</span><span class="o">)</span> <span class="o">}</span>

<span class="kd">lemma</span> <span class="n">of_mem_adjon_gen</span> <span class="o">{</span><span class="n">x</span> <span class="o">:</span> <span class="n">L</span><span class="o">}</span> <span class="o">(</span><span class="n">hs</span> <span class="o">:</span> <span class="n">B.gen</span> <span class="bp">∈</span> <span class="n">adjoin</span> <span class="n">K</span> <span class="o">({</span><span class="n">x</span><span class="o">}</span> <span class="o">:</span> <span class="n">set</span> <span class="n">L</span><span class="o">))</span> <span class="o">:</span>
  <span class="o">(</span><span class="n">B.of_mem_adjon</span> <span class="n">hs</span><span class="o">)</span><span class="bp">.</span><span class="n">gen</span> <span class="bp">=</span> <span class="n">x</span> <span class="o">:=</span> <span class="n">rfl</span>

<span class="kd">end</span> <span class="n">power_basis</span>
</code></pre></div>



<a name="272977895"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Power%20basis/near/272977895" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Power.20basis.html#272977895">(Feb 23 2022 at 17:02)</a>:</h4>
<p>That was exactly my plan too, got distracted by planning dinner :)</p>



<a name="272979108"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Power%20basis/near/272979108" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Power.20basis.html#272979108">(Feb 23 2022 at 17:10)</a>:</h4>
<p>I find slightly annoying that I had to use both <a href="https://leanprover-community.github.io/mathlib_docs/find/subalgebra.equiv_of_eq">docs#subalgebra.equiv_of_eq</a> and <a href="https://leanprover-community.github.io/mathlib_docs/find/algebra.top_equiv">docs#algebra.top_equiv</a>, but I guess this is life.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>