---
layout: archive
title: Zulip Chat Archive
permalink: /stream/304774-FLT-regular/topic/mem_roots_of_unity_of_abs_eq_one.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/index.html">FLT regular</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/mem_roots_of_unity_of_abs_eq_one.html">mem_roots_of_unity_of_abs_eq_one</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="285678161"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/mem_roots_of_unity_of_abs_eq_one/near/285678161" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Xavier Roblot <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/mem_roots_of_unity_of_abs_eq_one.html#285678161">(Jun 10 2022 at 13:51)</a>:</h4>
<p>I have started to work on adding <code>mem_roots_of_unity_of_abs_eq_one</code> to mathlib. Since the whole thing is quite big and involves different parts, I think it might be easier to split into several PR. Here are some ideas on how I could that. Please let me know what you think about this proposal. </p>
<ul>
<li>
<p>General results about embeddings of number field (definitions, proof there are as many as the degree of the field, lift to an extension, etc) are quite basic results in algebraic number theory, so I think they belong to <code>src/number_theory/number_field.lean</code>. In the same way, I think that the fact that <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="double-struck">Q</mi><mo stretchy="false">[</mo><mi>X</mi><mo stretchy="false">]</mo><mi mathvariant="normal">/</mi><mo stretchy="false">(</mo><mi>f</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\mathbb{Q}[X]/(f)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathbb">Q</span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="mclose">]</span><span class="mord">/</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mclose">)</span></span></span></span>, for <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mo stretchy="false">(</mo><mi>X</mi><mo stretchy="false">)</mo><mo>∈</mo><mi mathvariant="double-struck">Q</mi><mo stretchy="false">[</mo><mi>X</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">f(X) \in \mathbb{Q}[X]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathbb">Q</span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="mclose">]</span></span></span></span> irreducible, is a number field also belongs to <code>src/number_theory/number_field.lean</code>. This should be an easy PR. </p>
</li>
<li>
<p>There are results about polynomials by <span class="user-mention" data-user-id="127136">@Alex J. Best</span>  culminating with the expression of the coefficients of a polynomial in terms of its roots. These are quite technical and quite long. Looking at similar results, they probably belong to <code>field_theory.splitting_field</code> where weak versions of this result can be find, such as: <a href="https://leanprover-community.github.io/mathlib_docs/find/polynomial.prod_roots_eq_coeff_zero_of_monic_of_split">docs#polynomial.prod_roots_eq_coeff_zero_of_monic_of_split</a> or <a href="https://leanprover-community.github.io/mathlib_docs/find/polynomial.sum_roots_eq_next_coeff_of_monic_of_split">docs#polynomial.sum_roots_eq_next_coeff_of_monic_of_split</a>. This should be a separate PR and I might need Alex help for this one (Alex notes that one could probably shorten the proof by using the results in <code>ring_theory.polynomial.vieta</code> so I'll have to figure that out). </p>
</li>
<li>
<p>There are two <code>simp</code> lemmas that should probably be added in another PR to the right place (I'll have to think where that is exactly) if people thinks they are useful. </p>
</li>
</ul>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">@[simp]</span> <span class="kd">lemma</span> <span class="n">ring_hom.apply_eq_zero_iff_of_injective</span> <span class="o">{</span><span class="n">R</span> <span class="n">S</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">non_assoc_semiring</span> <span class="n">R</span><span class="o">]</span>
  <span class="o">[</span><span class="n">non_assoc_semiring</span> <span class="n">S</span><span class="o">]</span> <span class="o">{</span><span class="n">f</span> <span class="o">:</span> <span class="n">R</span> <span class="bp">→+*</span> <span class="n">S</span><span class="o">}</span> <span class="o">(</span><span class="n">hf</span> <span class="o">:</span> <span class="n">function.injective</span> <span class="n">f</span><span class="o">)</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">R</span><span class="o">)</span> <span class="o">:</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span> <span class="bp">↔</span> <span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span> <span class="o">:=</span>
<span class="o">⟨</span><span class="bp">λ</span> <span class="n">h</span><span class="o">,</span> <span class="n">hf</span> <span class="bp">$</span> <span class="kd">by</span> <span class="n">rw</span> <span class="o">[</span><span class="n">h</span><span class="o">,</span> <span class="n">f.map_zero</span><span class="o">],</span> <span class="bp">λ</span> <span class="n">h</span><span class="o">,</span> <span class="kd">by</span> <span class="n">rw</span> <span class="o">[</span><span class="n">h</span><span class="o">,</span> <span class="n">f.map_zero</span><span class="o">]⟩</span>

<span class="kd">@[simp]</span> <span class="kd">lemma</span> <span class="n">map_eq_zero_of_injective</span> <span class="o">[</span><span class="n">semiring</span> <span class="n">S</span><span class="o">]</span> <span class="o">{</span><span class="n">f</span> <span class="o">:</span> <span class="n">R</span> <span class="bp">→+*</span> <span class="n">S</span><span class="o">}</span>
  <span class="o">(</span><span class="n">hf</span> <span class="o">:</span> <span class="n">function.injective</span> <span class="n">f</span><span class="o">)</span> <span class="o">:</span> <span class="n">p.map</span> <span class="n">f</span> <span class="bp">=</span> <span class="mi">0</span> <span class="bp">↔</span> <span class="n">p</span> <span class="bp">=</span> <span class="mi">0</span> <span class="o">:=</span>
<span class="kd">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">polynomial.ext_iff</span><span class="o">,</span> <span class="n">coeff_map</span><span class="o">,</span> <span class="n">ring_hom.apply_eq_zero_iff_of_injective</span> <span class="n">hf</span><span class="o">,</span> <span class="n">coeff_zero</span><span class="o">]</span>
</code></pre></div>
<ul>
<li>Once everything else is in place, I'll do a last PR to add the two mains results: <code>mem_roots_of_unity_of_abs_eq_one</code> and <code>absolute_value_one</code> to <code>cyclotomic.lean</code> </li>
</ul>
<p>PS. <span class="user-mention" data-user-id="127136">@Alex J. Best</span>, just by curiosity,  I see that you use <code>section forward</code> and <code>section backward</code> in the files. Does that mean anything special?</p>



<a name="285678720"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/mem_roots_of_unity_of_abs_eq_one/near/285678720" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/mem_roots_of_unity_of_abs_eq_one.html#285678720">(Jun 10 2022 at 13:55)</a>:</h4>
<p>Splitting a PR is generally a good idea. You can also create dependent PRs to show where are you going, but this is not necessary.  Also, don't be afraid of creating new files if you don't find one with all the required imports.</p>
<p>Concerning <code>flt-regular</code>, if can you please move the material you have PRed to the folder <code>ready_for_mathlib</code>, adding a comment with the PR number? I will try to keep <a href="https://github.com/leanprover-community/flt-regular/wiki">https://github.com/leanprover-community/flt-regular/wiki</a> updated.</p>



<a name="285686073"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/mem_roots_of_unity_of_abs_eq_one/near/285686073" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/mem_roots_of_unity_of_abs_eq_one.html#285686073">(Jun 10 2022 at 14:48)</a>:</h4>
<p>I think that some of the results I proved are basically unintentional duplicates of those in <code>ring_theory.polynomial.vieta</code>, I'm not sure if mine were better in any way (e.g. less strict assumptions), but it might be the case that some of the long technical proofs can be deleted</p>



<a name="285686145"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/mem_roots_of_unity_of_abs_eq_one/near/285686145" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/mem_roots_of_unity_of_abs_eq_one.html#285686145">(Jun 10 2022 at 14:49)</a>:</h4>
<p>I don't recall forwards/backwards being anything special, maybe just the directions of an iff statement?</p>



<a name="285686501"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/mem_roots_of_unity_of_abs_eq_one/near/285686501" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/mem_roots_of_unity_of_abs_eq_one.html#285686501">(Jun 10 2022 at 14:51)</a>:</h4>
<p>Hmm I'm not sure if those simp lemmas will fire as simp lemmas very often, as they have side conditions that seem like simp won't prove that often, they certainly seem useful to have though, so I'm not sure if they are worth adding. It may be more harm than good in this case</p>



<a name="285686550"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/mem_roots_of_unity_of_abs_eq_one/near/285686550" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/mem_roots_of_unity_of_abs_eq_one.html#285686550">(Jun 10 2022 at 14:51)</a>:</h4>
<p>Great that you are PRing this material!</p>



<a name="285698308"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/mem_roots_of_unity_of_abs_eq_one/near/285698308" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Xavier Roblot <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/mem_roots_of_unity_of_abs_eq_one.html#285698308">(Jun 10 2022 at 16:12)</a>:</h4>
<p>Ok. Thanks for the advice. I'll start working on the PRs now.</p>



<a name="286037460"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/mem_roots_of_unity_of_abs_eq_one/near/286037460" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Xavier Roblot <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/mem_roots_of_unity_of_abs_eq_one.html#286037460">(Jun 14 2022 at 08:26)</a>:</h4>
<p>The following auxiliary result from Alex is very useful at a couple of places for the proofs I am trying to PR but is not directly related to the content of the PR: </p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">mem_roots_map_of_injective</span> <span class="o">[</span><span class="n">comm_ring</span> <span class="n">S</span><span class="o">]</span> <span class="o">[</span><span class="n">is_domain</span> <span class="n">S</span><span class="o">]</span> <span class="o">{</span><span class="n">f</span> <span class="o">:</span> <span class="n">R</span> <span class="bp">→+*</span> <span class="n">S</span><span class="o">}</span> <span class="o">{</span><span class="n">x</span> <span class="o">:</span> <span class="n">S</span><span class="o">}</span>
  <span class="o">(</span><span class="n">hf</span> <span class="o">:</span> <span class="n">function.injective</span> <span class="n">f</span><span class="o">)</span> <span class="o">(</span><span class="n">hp</span> <span class="o">:</span> <span class="n">p</span> <span class="bp">≠</span> <span class="mi">0</span><span class="o">)</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">∈</span> <span class="o">(</span><span class="n">p.map</span> <span class="n">f</span><span class="o">)</span><span class="bp">.</span><span class="n">roots</span> <span class="bp">↔</span> <span class="n">p.eval₂</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span>
</code></pre></div>
<p>What is the best strategy in this case:</p>
<ul>
<li>Add it to mathlib (say in <code>data.polynomial.ring_division</code> in the same or another PR)</li>
<li>Incorporate its proof where needed and just delete it</li>
</ul>
<p>From my personal point of view, I find it a quite useful result and think it could be a nice addition to mathlib.</p>



<a name="286037908"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/mem_roots_of_unity_of_abs_eq_one/near/286037908" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/mem_roots_of_unity_of_abs_eq_one.html#286037908">(Jun 14 2022 at 08:30)</a>:</h4>
<p>Surely add it to mathlib!! When in doubts it's almost always better to add a new result rather then repeating its proof over and over (I really think that if you use the same result twice it deserves to be singled out).</p>
<p>Small PR are welcome, but you can also include it in a bigger one, since it is just a couple of lines, this is up to you.</p>



<a name="286041222"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/mem_roots_of_unity_of_abs_eq_one/near/286041222" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Xavier Roblot <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/mem_roots_of_unity_of_abs_eq_one.html#286041222">(Jun 14 2022 at 09:00)</a>:</h4>
<p>Ok. Thanks. I'll do that</p>



<a name="289342924"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/mem_roots_of_unity_of_abs_eq_one/near/289342924" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Xavier Roblot <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/mem_roots_of_unity_of_abs_eq_one.html#289342924">(Jul 12 2022 at 15:37)</a>:</h4>
<p>Sorry,  I have not contributed much  to the project lately since I was working quite hard on this PR (and I am still far from being done). I have <a href="https://github.com/leanprover-community/mathlib/pull/15008">#15008</a> which seems to be stuck (since it competes with <a href="https://github.com/leanprover-community/mathlib/pull/14908">#14908</a> and nobody seems to want to take a decision about which one to use) and also now <a href="https://github.com/leanprover-community/mathlib/pull/15275">#15275</a> which proves a more general version of a result needed for this PR: if the roots of a polynomial are bounded, then the coefficients are bounded too. This PR depends on <a href="https://github.com/leanprover-community/mathlib/pull/14908">#14908</a> or <a href="https://github.com/leanprover-community/mathlib/pull/15008">#15008</a>. I'll work on the main PR now.</p>



<a name="289345142"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/mem_roots_of_unity_of_abs_eq_one/near/289345142" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/mem_roots_of_unity_of_abs_eq_one.html#289345142">(Jul 12 2022 at 15:51)</a>:</h4>
<p>I think this week everybody is busy with lftcm so all PRs have to wait a little more than usual...</p>



<a name="289353667"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/mem_roots_of_unity_of_abs_eq_one/near/289353667" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/mem_roots_of_unity_of_abs_eq_one.html#289353667">(Jul 12 2022 at 16:50)</a>:</h4>
<p>Lfctm?</p>



<a name="289353717"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/mem_roots_of_unity_of_abs_eq_one/near/289353717" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Birkbeck <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/mem_roots_of_unity_of_abs_eq_one.html#289353717">(Jul 12 2022 at 16:50)</a>:</h4>
<p><a href="https://icerm.brown.edu/topical_workshops/tw-22-lean/#schedule-2022-07-11">https://icerm.brown.edu/topical_workshops/tw-22-lean/#schedule-2022-07-11</a></p>



<a name="289355374"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/mem_roots_of_unity_of_abs_eq_one/near/289355374" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/mem_roots_of_unity_of_abs_eq_one.html#289355374">(Jul 12 2022 at 17:03)</a>:</h4>
<p>Oh, that's cool!</p>



<a name="289431990"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/mem_roots_of_unity_of_abs_eq_one/near/289431990" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/mem_roots_of_unity_of_abs_eq_one.html#289431990">(Jul 13 2022 at 09:08)</a>:</h4>
<p>I've updated the graph, turning <code>sum_pow_unit</code> (that it should be <code>is_primitive_root.sum_pow_unit</code>, <span class="user-mention" data-user-id="389019">@Chris Birkbeck</span> can you confirm?) and <code>unit_lemma</code> (thank's <span class="user-mention" data-user-id="284160">@Eric Rodriguez</span> !) green. There is <code>flt_fact_3</code> that seems easy to do, and maybe also <code>flt_fact_4</code> (should we find better names?).</p>



<a name="289432013"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/mem_roots_of_unity_of_abs_eq_one/near/289432013" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/mem_roots_of_unity_of_abs_eq_one.html#289432013">(Jul 13 2022 at 09:09)</a>:</h4>
<p>We are <em>really close</em> to case I</p>



<a name="289432164"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/mem_roots_of_unity_of_abs_eq_one/near/289432164" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Birkbeck <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/mem_roots_of_unity_of_abs_eq_one.html#289432164">(Jul 13 2022 at 09:10)</a>:</h4>
<p>Ah yes that looks good!</p>



<a name="289432238"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/mem_roots_of_unity_of_abs_eq_one/near/289432238" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Birkbeck <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/mem_roots_of_unity_of_abs_eq_one.html#289432238">(Jul 13 2022 at 09:11)</a>:</h4>
<p>Actually I'm going to change 3.8 to <code>zeta_pow_sub_eq_unit_zeta_sub_one</code> since this is actually what we will use.</p>



<a name="289432589"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/mem_roots_of_unity_of_abs_eq_one/near/289432589" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Birkbeck <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/mem_roots_of_unity_of_abs_eq_one.html#289432589">(Jul 13 2022 at 09:15)</a>:</h4>
<p>But yes we should be really close to case I now.</p>



<a name="289433987"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/mem_roots_of_unity_of_abs_eq_one/near/289433987" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/mem_roots_of_unity_of_abs_eq_one.html#289433987">(Jul 13 2022 at 09:27)</a>:</h4>
<p>I think we already have <code>flt_fact_3</code> as <code>exists_int_sub_pow_prime_dvd</code>, and I _think_ I made that sorry free</p>



<a name="289434240"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/mem_roots_of_unity_of_abs_eq_one/near/289434240" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/mem_roots_of_unity_of_abs_eq_one.html#289434240">(Jul 13 2022 at 09:29)</a>:</h4>
<p>I'm also not sure I fully get flt_fact_4</p>



<a name="289434402"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/mem_roots_of_unity_of_abs_eq_one/near/289434402" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Birkbeck <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/mem_roots_of_unity_of_abs_eq_one.html#289434402">(Jul 13 2022 at 09:31)</a>:</h4>
<p><span class="user-mention silent" data-user-id="284160">Eric Rodriguez</span> <a href="#narrow/stream/304774-FLT-regular/topic/mem_roots_of_unity_of_abs_eq_one/near/289434240">said</a>:</p>
<blockquote>
<p>I'm also not sure I fully get flt_fact_4</p>
</blockquote>
<p>Maybe thats because I messed up the statement :P It should say what the a_i's are</p>



<a name="289434430"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/mem_roots_of_unity_of_abs_eq_one/near/289434430" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Birkbeck <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/mem_roots_of_unity_of_abs_eq_one.html#289434430">(Jul 13 2022 at 09:31)</a>:</h4>
<p>let me fix that</p>



<a name="289434654"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/mem_roots_of_unity_of_abs_eq_one/near/289434654" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Birkbeck <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/mem_roots_of_unity_of_abs_eq_one.html#289434654">(Jul 13 2022 at 09:33)</a>:</h4>
<p><span class="user-mention silent" data-user-id="284160">Eric Rodriguez</span> <a href="#narrow/stream/304774-FLT-regular/topic/mem_roots_of_unity_of_abs_eq_one/near/289433987">said</a>:</p>
<blockquote>
<p>I think we already have <code>flt_fact_3</code> as <code>exists_int_sub_pow_prime_dvd</code>, and I _think_ I made that sorry free</p>
</blockquote>
<p>This looks pretty sorry free to me.</p>



<a name="289434838"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/mem_roots_of_unity_of_abs_eq_one/near/289434838" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/mem_roots_of_unity_of_abs_eq_one.html#289434838">(Jul 13 2022 at 09:36)</a>:</h4>
<p>Yes, it is it, and it is sorry free (confirmed by <code>#print axioms lemma exists_int_sub_pow_prime</code>). I am including it.</p>



<a name="289435488"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/mem_roots_of_unity_of_abs_eq_one/near/289435488" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Thomas Browning <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/mem_roots_of_unity_of_abs_eq_one.html#289435488">(Jul 13 2022 at 09:42)</a>:</h4>
<p>Mathlib already has flt for n=4, doesn't it?</p>



<a name="289435534"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/mem_roots_of_unity_of_abs_eq_one/near/289435534" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/mem_roots_of_unity_of_abs_eq_one.html#289435534">(Jul 13 2022 at 09:42)</a>:</h4>
<p>Yes</p>



<a name="289435570"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/mem_roots_of_unity_of_abs_eq_one/near/289435570" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/mem_roots_of_unity_of_abs_eq_one.html#289435570">(Jul 13 2022 at 09:42)</a>:</h4>
<p><a href="https://leanprover-community.github.io/mathlib_docs/find/not_fermat_4">docs#not_fermat_4</a></p>



<a name="289435623"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/mem_roots_of_unity_of_abs_eq_one/near/289435623" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Thomas Browning <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/mem_roots_of_unity_of_abs_eq_one.html#289435623">(Jul 13 2022 at 09:43)</a>:</h4>
<p>Ah, I see. <code>flt_fact_4</code> is not FLT for n=4 <span aria-label="grinning" class="emoji emoji-1f600" role="img" title="grinning">:grinning:</span></p>



<a name="289435662"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/mem_roots_of_unity_of_abs_eq_one/near/289435662" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/mem_roots_of_unity_of_abs_eq_one.html#289435662">(Jul 13 2022 at 09:43)</a>:</h4>
<p>We should find better names...</p>



<a name="289435663"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/mem_roots_of_unity_of_abs_eq_one/near/289435663" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Birkbeck <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/mem_roots_of_unity_of_abs_eq_one.html#289435663">(Jul 13 2022 at 09:43)</a>:</h4>
<p>Is the <code>n=3</code> case in there? I thought I remember seeing this done, but I can't remember if it was in mathlib</p>



<a name="289435673"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/mem_roots_of_unity_of_abs_eq_one/near/289435673" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/mem_roots_of_unity_of_abs_eq_one.html#289435673">(Jul 13 2022 at 09:43)</a>:</h4>
<p>It is not in mathlib</p>



<a name="289435772"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/mem_roots_of_unity_of_abs_eq_one/near/289435772" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/mem_roots_of_unity_of_abs_eq_one.html#289435772">(Jul 13 2022 at 09:44)</a>:</h4>
<p><a href="https://github.com/Ruben-VandeVelde/flt">https://github.com/Ruben-VandeVelde/flt</a></p>



<a name="289435930"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/mem_roots_of_unity_of_abs_eq_one/near/289435930" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/mem_roots_of_unity_of_abs_eq_one.html#289435930">(Jul 13 2022 at 09:46)</a>:</h4>
<p><span class="user-mention" data-user-id="307953">@Ruben Van de Velde</span> can we include your code in the <code>flt-regular</code> project? I think we need to tread the case <code>n=3</code> separately (in exchange we will maintain it updated wrt to mathlib).</p>



<a name="289436548"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/mem_roots_of_unity_of_abs_eq_one/near/289436548" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/mem_roots_of_unity_of_abs_eq_one.html#289436548">(Jul 13 2022 at 09:53)</a>:</h4>
<p>What definition of regular do you end up with for case 1?</p>



<a name="289436623"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/mem_roots_of_unity_of_abs_eq_one/near/289436623" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Birkbeck <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/mem_roots_of_unity_of_abs_eq_one.html#289436623">(Jul 13 2022 at 09:54)</a>:</h4>
<p>The class number version</p>



<a name="289436648"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/mem_roots_of_unity_of_abs_eq_one/near/289436648" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/mem_roots_of_unity_of_abs_eq_one.html#289436648">(Jul 13 2022 at 09:54)</a>:</h4>
<p>Can you prove that 3 is regular?</p>



<a name="289436677"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/mem_roots_of_unity_of_abs_eq_one/near/289436677" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/mem_roots_of_unity_of_abs_eq_one.html#289436677">(Jul 13 2022 at 09:55)</a>:</h4>
<p>I don't even think we can prove 2 is regular</p>



<a name="289436796"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/mem_roots_of_unity_of_abs_eq_one/near/289436796" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/mem_roots_of_unity_of_abs_eq_one.html#289436796">(Jul 13 2022 at 09:56)</a>:</h4>
<p>That sounded easier than 3.</p>



<a name="289437182"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/mem_roots_of_unity_of_abs_eq_one/near/289437182" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Birkbeck <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/mem_roots_of_unity_of_abs_eq_one.html#289437182">(Jul 13 2022 at 10:01)</a>:</h4>
<p>I think we can do 2 right? We must know that <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="double-struck">Z</mi></mrow><annotation encoding="application/x-tex">\mathbb{Z}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6889em;"></span><span class="mord mathbb">Z</span></span></span></span> is a PID?</p>



<a name="289437275"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/mem_roots_of_unity_of_abs_eq_one/near/289437275" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/mem_roots_of_unity_of_abs_eq_one.html#289437275">(Jul 13 2022 at 10:02)</a>:</h4>
<p><a href="/user_uploads/3121/cRBdUWxWZDtko7025AFTmOxE/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/3121/cRBdUWxWZDtko7025AFTmOxE/image.png" title="image.png"><img src="/user_uploads/3121/cRBdUWxWZDtko7025AFTmOxE/image.png"></a></div>



<a name="289437832"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/mem_roots_of_unity_of_abs_eq_one/near/289437832" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/mem_roots_of_unity_of_abs_eq_one.html#289437832">(Jul 13 2022 at 10:08)</a>:</h4>
<p>For <code>3</code> we will need stuff about quadratic fields, but it shouldn't be too hard too prove that it is a PID</p>



<a name="289438079"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/mem_roots_of_unity_of_abs_eq_one/near/289438079" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/mem_roots_of_unity_of_abs_eq_one.html#289438079">(Jul 13 2022 at 10:10)</a>:</h4>
<p>the quadratic fields are long overdue in mathlib...</p>



<a name="289438934"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/mem_roots_of_unity_of_abs_eq_one/near/289438934" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/mem_roots_of_unity_of_abs_eq_one.html#289438934">(Jul 13 2022 at 10:20)</a>:</h4>
<p>Me <span class="user-mention" data-user-id="238446">@Anne Baanen</span> <span class="user-mention" data-user-id="390622">@Nirvana Coppola</span>  <span class="user-mention" data-user-id="133635">@Sander Dahmen</span> are working on computing small class numbers (and a definition of quadratic fields) it's still in the works but somewhat mature at this point. So hopefully coming within the next couple of months anyways</p>



<a name="289439814"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/mem_roots_of_unity_of_abs_eq_one/near/289439814" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ruben Van de Velde <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/mem_roots_of_unity_of_abs_eq_one.html#289439814">(Jul 13 2022 at 10:33)</a>:</h4>
<p><span class="user-mention silent" data-user-id="130384">Riccardo Brasca</span> <a href="#narrow/stream/304774-FLT-regular/topic/mem_roots_of_unity_of_abs_eq_one/near/289435930">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="307953">Ruben Van de Velde</span> can we include your code in the <code>flt-regular</code> project? I think we need to tread the case <code>n=3</code> separately (in exchange we will maintain it updated wrt to mathlib).</p>
</blockquote>
<p>Yes, of course. I'd been hoping to find time to push it into mathlib, but that hasn't happened yet.</p>



<a name="289440458"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/mem_roots_of_unity_of_abs_eq_one/near/289440458" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/mem_roots_of_unity_of_abs_eq_one.html#289440458">(Jul 13 2022 at 10:41)</a>:</h4>
<p>ok, turns out two is doable, although somehow we still have int algebra diamonds there... regardless, the example is there</p>



<a name="289441313"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/mem_roots_of_unity_of_abs_eq_one/near/289441313" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/mem_roots_of_unity_of_abs_eq_one.html#289441313">(Jul 13 2022 at 10:53)</a>:</h4>
<p>There's also a lot of definitions that don't push forward or at least get preserved under equivalences that should - is_dedekind_domain is one</p>



<a name="289448848"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/mem_roots_of_unity_of_abs_eq_one/near/289448848" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/mem_roots_of_unity_of_abs_eq_one.html#289448848">(Jul 13 2022 at 12:11)</a>:</h4>
<p>Someone here at ICERM is working on quadratic fields! I don't know if they're on the Zulip, I'll tell them about this thread. It might be a nice goal!</p>



<a name="289534504"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/mem_roots_of_unity_of_abs_eq_one/near/289534504" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Junyan Xu <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/mem_roots_of_unity_of_abs_eq_one.html#289534504">(Jul 13 2022 at 23:35)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110038">Kevin Buzzard</span> <a href="#narrow/stream/116395-maths/topic/.60.E2.84.A4.5B.E2.88.9A-2.5D.60.20is.20a.20euclidean.20domain/near/274613936">said</a>:</p>
<blockquote>
<p>I had a student prove Z[omega] is a Euclidean domain and another student prove Z[sqrt(3)] is a Euclidean domain :-)</p>
</blockquote>
<p>Any updates?</p>



<a name="298395570"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/mem_roots_of_unity_of_abs_eq_one/near/298395570" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Xavier Roblot <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/mem_roots_of_unity_of_abs_eq_one.html#298395570">(Sep 12 2022 at 14:44)</a>:</h4>
<p>The PR containing the main result is finally ready: <a href="https://github.com/leanprover-community/mathlib/pull/15143">#15143</a>. I also PRed the opposite statement, that is root of unity are of norm 1:  <a href="https://github.com/leanprover-community/mathlib/pull/16426">#16426</a>. </p>
<p>I put the results in the <code>number_field.lean</code> file but I am wondering if it would be a good idea to make a <code>number_field</code> directory, move the first definitions and results to <code>basic.lean</code>, all the results about embeddings in their own file (I want to work on complex embeddings in the near future) and maybe even put the new result <code>mem_roots_of_unity_of_norm_eq_one</code> in a <code>units.lean</code> file since it is an important step in the proof of Dirichlet unit's theorem. There might be also results about number field, eg. finitude of class groups, that could be moved to this new directory.</p>



<a name="298396179"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/mem_roots_of_unity_of_abs_eq_one/near/298396179" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/mem_roots_of_unity_of_abs_eq_one.html#298396179">(Sep 12 2022 at 14:48)</a>:</h4>
<p>I totally agree that <code>number_field</code> should be a directory sooner or later. But this is for another PR</p>



<a name="298486479"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/mem_roots_of_unity_of_abs_eq_one/near/298486479" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/mem_roots_of_unity_of_abs_eq_one.html#298486479">(Sep 12 2022 at 22:06)</a>:</h4>
<p>Thanks Xavier! I think it's so cool that this stuff is getting done :-)</p>



<a name="301846315"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/mem_roots_of_unity_of_abs_eq_one/near/301846315" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Xavier Roblot <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/mem_roots_of_unity_of_abs_eq_one.html#301846315">(Oct 01 2022 at 17:05)</a>:</h4>
<p>I am having difficulty merging the project with the version of <code>mem_roots_of_unity_of_abs_eq_one</code> (now called  <code>number_field.embeddings.pow_eq_one_of_norm_eq_one</code>) that is in <code>mathlib</code>. To reproduce the problem, merge with the latest version of <code>mathlib</code> and replace line 424 of <code>number_theory/cyclotomic/Unit_lemmas.lean</code> by </p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code>  <span class="k">have</span> <span class="o">:=</span> <span class="bp">@</span><span class="n">number_field.embeddings.pow_eq_one_of_norm_eq_one</span> <span class="n">K</span> <span class="n">_</span> <span class="n">_</span> <span class="n">ℂ</span> <span class="n">_</span> <span class="n">_</span> <span class="n">_</span>
    <span class="o">(</span><span class="n">u</span> <span class="bp">*</span> <span class="o">(</span><span class="n">unit_gal_conj</span> <span class="n">K</span> <span class="n">p</span> <span class="n">u</span><span class="o">)</span><span class="bp">⁻¹</span> <span class="o">:</span> <span class="n">K</span><span class="o">)</span> <span class="n">_</span> <span class="n">_</span><span class="o">,</span>
</code></pre></div>
<p>The error is <code>maximum class-instance resolution depth has been reached</code>. Looking at the log with the option <code>trace.class_instances true</code>, I see a lot of output involving <code>ℝ</code> with messages like: <code>@normed_algebra ℝ ℝ real.normed_field</code>.</p>



<a name="301846430"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/mem_roots_of_unity_of_abs_eq_one/near/301846430" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Xavier Roblot <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/mem_roots_of_unity_of_abs_eq_one.html#301846430">(Oct 01 2022 at 17:07)</a>:</h4>
<p>I am afraid, I don't know how to solve this kind of error...</p>



<a name="301847243"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/mem_roots_of_unity_of_abs_eq_one/near/301847243" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/mem_roots_of_unity_of_abs_eq_one.html#301847243">(Oct 01 2022 at 17:14)</a>:</h4>
<p>can you push the code that causes the issue to a branch?</p>



<a name="301847585"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/mem_roots_of_unity_of_abs_eq_one/near/301847585" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Xavier Roblot <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/mem_roots_of_unity_of_abs_eq_one.html#301847585">(Oct 01 2022 at 17:18)</a>:</h4>
<p>I pushed to the branch <code>origin/pow_eq_one_of_norm_eq_one</code> (if I got my <code>git</code> commands right).</p>



<a name="301854023"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/mem_roots_of_unity_of_abs_eq_one/near/301854023" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/mem_roots_of_unity_of_abs_eq_one.html#301854023">(Oct 01 2022 at 18:31)</a>:</h4>
<p>I am done for today, but I can have a look at tomorrow. Feel free to remove everything it is in mathlib, we will fix the problems.</p>



<a name="301919034"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/mem_roots_of_unity_of_abs_eq_one/near/301919034" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/mem_roots_of_unity_of_abs_eq_one.html#301919034">(Oct 02 2022 at 10:52)</a>:</h4>
<p>oh, there seems to be some diamond issue again :(</p>



<a name="301919190"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/mem_roots_of_unity_of_abs_eq_one/near/301919190" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/mem_roots_of_unity_of_abs_eq_one.html#301919190">(Oct 02 2022 at 10:53)</a>:</h4>
<p>but it's to do with <code>complex</code> not with any of our stuff..</p>



<a name="301919541"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/mem_roots_of_unity_of_abs_eq_one/near/301919541" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/mem_roots_of_unity_of_abs_eq_one.html#301919541">(Oct 02 2022 at 10:57)</a>:</h4>
<p>oh, no, I'm wrong, something weirder is going on...</p>



<a name="301919867"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/mem_roots_of_unity_of_abs_eq_one/near/301919867" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/mem_roots_of_unity_of_abs_eq_one.html#301919867">(Oct 02 2022 at 10:59)</a>:</h4>
<p>for now you can put <code>  haveI : normed_algebra ℚ ℂ := normed_algebra_rat,</code> before your <code>have := @...</code> line and this will fxi it</p>



<a name="301919924"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/mem_roots_of_unity_of_abs_eq_one/near/301919924" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/mem_roots_of_unity_of_abs_eq_one.html#301919924">(Oct 02 2022 at 11:00)</a>:</h4>
<p>I am not sure why the typeclass system is getting lost trying to find this lemma, though</p>



<a name="301920244"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/mem_roots_of_unity_of_abs_eq_one/near/301920244" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/mem_roots_of_unity_of_abs_eq_one.html#301920244">(Oct 02 2022 at 11:02)</a>:</h4>
<p>oh, <code>open_locale cyclotomic</code> is at the top of the page, and doesn't seem to be needed</p>



<a name="301920286"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/mem_roots_of_unity_of_abs_eq_one/near/301920286" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/mem_roots_of_unity_of_abs_eq_one.html#301920286">(Oct 02 2022 at 11:03)</a>:</h4>
<p>this is super cursed right now, if you remove it it should work fine</p>



<a name="301920306"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/mem_roots_of_unity_of_abs_eq_one/near/301920306" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/mem_roots_of_unity_of_abs_eq_one.html#301920306">(Oct 02 2022 at 11:03)</a>:</h4>
<p>the file seems to compile without it</p>



<a name="301932622"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/mem_roots_of_unity_of_abs_eq_one/near/301932622" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Xavier Roblot <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/mem_roots_of_unity_of_abs_eq_one.html#301932622">(Oct 02 2022 at 13:01)</a>:</h4>
<p>Thanks to Eric, I was able to fix the problem and push the new version.</p>



<a name="301933500"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/mem_roots_of_unity_of_abs_eq_one/near/301933500" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/mem_roots_of_unity_of_abs_eq_one.html#301933500">(Oct 02 2022 at 13:11)</a>:</h4>
<p>Thanks!</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>