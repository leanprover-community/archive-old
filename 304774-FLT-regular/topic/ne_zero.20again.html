---
layout: archive
title: Zulip Chat Archive
permalink: /stream/304774-FLT-regular/topic/ne_zero.20again.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/index.html">FLT regular</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/ne_zero.20again.html">ne_zero again</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="281663335"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/ne_zero%20again/near/281663335" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/ne_zero.20again.html#281663335">(May 09 2022 at 10:17)</a>:</h4>
<p>Is <code>ne_zero ((n : ℕ) : K)</code> really needed in <a href="https://leanprover-community.github.io/mathlib_docs/find/cyclotomic_field.is_cyclotomic_extension">docs#cyclotomic_field.is_cyclotomic_extension</a>? I am maybe confused, but let <code>p</code> the characteristic of <code>K</code>. If <code>p = 0</code> or <code>p</code> does not divide <code>n</code>, then there are no problems (since <code>ne_zero ((n : ℕ) : K)</code> holds).  Otherwise, write <code>n=p^k * m</code> with <code>¬p ∣ m</code>.  We need to prove <code>adjoin_roots</code> in the definition of  <a href="https://leanprover-community.github.io/mathlib_docs/find/is_cyclotomic_extension">docs#is_cyclotomic_extension</a>. Now, <code>x^n = 1</code> if and only if <code>x^m = 1</code> (since the Frobenius is injective), and the roots of <code>cyclotomic n K</code> are the <code>m</code>-th primitive roots of unity by <a href="https://leanprover-community.github.io/mathlib_docs/find/polynomial.is_root_cyclotomic_prime_pow_mul_iff_of_char_p">docs#polynomial.is_root_cyclotomic_prime_pow_mul_iff_of_char_p</a>.</p>
<p>Does someone see a problem in this proof? I don't have the time to formalize it today since I have to prepare a talk, but I will try to do it this week. (I would like to have an opinion since if it holds I will remove the assumption in my talk).</p>



<a name="281664509"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/ne_zero%20again/near/281664509" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/ne_zero.20again.html#281664509">(May 09 2022 at 10:31)</a>:</h4>
<p>I think this works, just nobody got round to this? At least that's my vague recollection from before</p>



<a name="281664710"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/ne_zero%20again/near/281664710" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/ne_zero.20again.html#281664710">(May 09 2022 at 10:33)</a>:</h4>
<p>I've the same feeling. I will try to remove as much <code>ne_zero</code> assumptions as possible.</p>



<a name="283187073"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/ne_zero%20again/near/283187073" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Michael Stoll <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/ne_zero.20again.html#283187073">(May 21 2022 at 18:38)</a>:</h4>
<p>The way <code>cylcotomic_field</code> and <code>is_cyclotomic_extension</code> are defined, the condition is unnecessary (adjoining <code>p</code>-power roots of unity in characteristic <code>p</code> gives a trivial extension). The condition is needed, e.g., if you want to show that there are exactly <code>n</code> <code>n</code>th roots of unity; basically, you'll need at as soon as you want to work with cyclotomic fields in a meaningful way.</p>



<a name="283187712"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/ne_zero%20again/near/283187712" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/ne_zero.20again.html#283187712">(May 21 2022 at 18:54)</a>:</h4>
<p>I totally agree</p>



<a name="283189232"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/ne_zero%20again/near/283189232" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/ne_zero.20again.html#283189232">(May 21 2022 at 19:27)</a>:</h4>
<p>it's not quite that simple, the 15th cyclotomic extension in char3 is the 5th cyclotomic extension I think is the really obvious example</p>



<a name="283189279"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/ne_zero%20again/near/283189279" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/ne_zero.20again.html#283189279">(May 21 2022 at 19:28)</a>:</h4>
<p>so I think it allows a lot of uniformity and also this is covered by the (very large) family of theorems like <a href="https://leanprover-community.github.io/mathlib_docs/find/polynomial.is_root_cyclotomic_iff">docs#polynomial.is_root_cyclotomic_iff</a></p>



<a name="283998234"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/ne_zero%20again/near/283998234" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/ne_zero.20again.html#283998234">(May 26 2022 at 12:09)</a>:</h4>
<p>I've finally found some time to remove the unneeded <code>ne_zero</code> in <a href="https://github.com/leanprover-community/mathlib/pull/14392">#14392</a>. I guess there are more instances of this, I will see.</p>



<a name="283998271"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/ne_zero%20again/near/283998271" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/ne_zero.20again.html#283998271">(May 26 2022 at 12:09)</a>:</h4>
<p><span class="user-mention" data-user-id="127136">@Alex J. Best</span> You linter can check useless <code>haveI/letI</code>?</p>



<a name="284279584"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/ne_zero%20again/near/284279584" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/ne_zero.20again.html#284279584">(May 29 2022 at 10:58)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib/pull/14446">#14446</a> For more cleanup</p>



<a name="284282937"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/ne_zero%20again/near/284282937" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/ne_zero.20again.html#284282937">(May 29 2022 at 12:09)</a>:</h4>
<p>I am wondering whether it is worth to refactor the definition of <code>is_cyclotomic_extension</code> as follows</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">@[mk_iff]</span> <span class="kd">class</span> <span class="n">is_cyclotomic_extension</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">exists_root</span> <span class="o">{</span><span class="n">a</span> <span class="o">:</span> <span class="n">ℕ</span><span class="bp">+</span><span class="o">}</span> <span class="o">(</span><span class="n">ha</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">∈</span> <span class="n">S</span><span class="o">)</span> <span class="o">:</span> <span class="bp">∃</span> <span class="n">r</span> <span class="o">:</span> <span class="n">B</span><span class="o">,</span> <span class="n">is_primitive_root</span> <span class="n">r</span> <span class="n">a</span> <span class="o">)</span>
<span class="o">(</span><span class="n">adjoin_roots</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">B</span><span class="o">),</span> <span class="n">x</span> <span class="bp">∈</span> <span class="n">adjoin</span> <span class="n">A</span> <span class="o">{</span> <span class="n">b</span> <span class="o">:</span> <span class="n">B</span> <span class="bp">|</span> <span class="bp">∃</span> <span class="n">a</span> <span class="o">:</span> <span class="n">ℕ</span><span class="bp">+</span><span class="o">,</span> <span class="n">a</span> <span class="bp">∈</span> <span class="n">S</span> <span class="bp">∧</span> <span class="n">b</span> <span class="bp">^</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span> <span class="bp">=</span> <span class="mi">1</span> <span class="o">})</span>
</code></pre></div>



<a name="284283007"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/ne_zero%20again/near/284283007" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/ne_zero.20again.html#284283007">(May 29 2022 at 12:10)</a>:</h4>
<p>The difference is that we require the existence of a primitive root rather than a root of the cyclotomic polynomial. In such a way, almost all the <code>ne_zero</code> should disappear (we will need <code>ne_zero</code> to construct a cyclotomic extension, and only there)</p>



<a name="284283081"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/ne_zero%20again/near/284283081" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/ne_zero.20again.html#284283081">(May 29 2022 at 12:12)</a>:</h4>
<p>With this new definition it's impossible to have a <code>p</code>-th cyclotomic extension of <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi mathvariant="double-struck">F</mi><mi>p</mi></msub></mrow><annotation encoding="application/x-tex">\mathbb{F}_p</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.975em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathbb">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">p</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span></span>, but this is the only drawback.</p>



<a name="284284865"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/ne_zero%20again/near/284284865" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/ne_zero.20again.html#284284865">(May 29 2022 at 12:55)</a>:</h4>
<p>I'm not sure that a number theorist would be able to give a coherent answer if you asked them what they thought the pth cyclotomic extension of Fp was supposed to be</p>



<a name="284285627"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/ne_zero%20again/near/284285627" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/ne_zero.20again.html#284285627">(May 29 2022 at 13:12)</a>:</h4>
<p>does this definition still work for ℤₚ? this is the only thing I find mentioned in the <a href="#narrow/stream/116395-maths/topic/Cyclotomic.20fields/near/259093589">original thread</a> that is relevant, I think</p>



<a name="284285630"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/ne_zero%20again/near/284285630" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/ne_zero.20again.html#284285630">(May 29 2022 at 13:12)</a>:</h4>
<p>(I don't know much about p-adics...)</p>



<a name="284285726"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/ne_zero%20again/near/284285726" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/ne_zero.20again.html#284285726">(May 29 2022 at 13:14)</a>:</h4>
<p>Yes, it is equivalent to the current one plus <code>ne_zero</code>, so in particular it is the same for characteristic <code>0</code> rings.</p>



<a name="284287458"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/ne_zero%20again/near/284287458" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/ne_zero.20again.html#284287458">(May 29 2022 at 13:57)</a>:</h4>
<p>I have only ever heard the concept of cyclotomic extension being applied to p-adic fields and number fields, so I don't think this is a huge loss at all.</p>



<a name="284289063"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/ne_zero%20again/near/284289063" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Xavier Roblot <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/ne_zero.20again.html#284289063">(May 29 2022 at 14:34)</a>:</h4>
<p>I agree with Kevin. The important point is that it still works for p-adic fields (and of course number fields).</p>



<a name="284371673"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/ne_zero%20again/near/284371673" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/ne_zero.20again.html#284371673">(May 30 2022 at 14:04)</a>:</h4>
<p>OK, I will go for the refactor. It should solve once and for all the various <code>ne_zero</code> annoyances.</p>



<a name="284384885"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/ne_zero%20again/near/284384885" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/ne_zero.20again.html#284384885">(May 30 2022 at 16:02)</a>:</h4>
<p>I started the refactor at <a href="https://github.com/leanprover-community/mathlib/pull/14463">#14463</a>. It is still WIP, but <a href="https://leanprover-community.github.io/mathlib_docs/number_theory/cyclotomic/basic.html">number_theory.cyclotomic.basic</a> is done.</p>



<a name="284390779"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/ne_zero%20again/near/284390779" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/ne_zero.20again.html#284390779">(May 30 2022 at 17:18)</a>:</h4>
<p>It's ready for review. It was much easier than I thought, and the proof are really much less painful.</p>



<a name="286760967"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/ne_zero%20again/near/286760967" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/ne_zero.20again.html#286760967">(Jun 20 2022 at 07:51)</a>:</h4>
<p>Now that <a href="https://github.com/leanprover-community/mathlib/pull/14463">#14463</a> is merged, a lot of  uses of<code>ne_zero</code> are gone. I think it can also be removed from <a href="https://leanprover-community.github.io/mathlib_docs/find/cyclotomic_ring.cyclotomic_field.is_fraction_ring">docs#cyclotomic_ring.cyclotomic_field.is_fraction_ring</a>, but that's not so important.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>