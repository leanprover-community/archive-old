---
layout: archive
title: Zulip Chat Archive
permalink: /stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/index.html">FLT regular</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html">Contributing to the project</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="281879426"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/281879426" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Xavier Roblot <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#281879426">(May 10 2022 at 20:10)</a>:</h4>
<p>Hi, I am Xavier Roblot. I am a number theorist in Lyon (and thus a colleague of <span class="user-mention" data-user-id="300245">@Filippo A. E. Nuccio</span> who introduced me to Lean). I saw <span class="user-mention" data-user-id="130384">@Riccardo Brasca</span>'s talk about this  project at the "Lean in Lyon" workshop and I would really like to contribute if I can. I have been learning to work with Lean during the last few weeks and I am still very far for being proficient with it, but I hope I can be of some help.</p>



<a name="281879818"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/281879818" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#281879818">(May 10 2022 at 20:13)</a>:</h4>
<p>Hi Xavier! Thanks for your message, and welcome to the Lean community!<br>
I was very busy recently, so I have to sit down and think about a reasonable plan for the next weeks, but I will try to do as soon as possible.</p>



<a name="281879982"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/281879982" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#281879982">(May 10 2022 at 20:15)</a>:</h4>
<p>You can have a look at our <a href="https://leanprover-community.github.io/flt-regular/">blueprint</a>. The links are not updated, but essentially everything in section 2 is in mathlib</p>



<a name="281880111"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/281880111" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#281880111">(May 10 2022 at 20:16)</a>:</h4>
<p>3.1 and 3.2 are also done</p>



<a name="281880258"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/281880258" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#281880258">(May 10 2022 at 20:17)</a>:</h4>
<p>We have to think a little bit about 3.3, even to state it</p>



<a name="281880416"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/281880416" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Birkbeck <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#281880416">(May 10 2022 at 20:19)</a>:</h4>
<p>We have some stuff for 3.3 but it still needs some annoying lemmas</p>



<a name="281880423"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/281880423" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#281880423">(May 10 2022 at 20:19)</a>:</h4>
<p>But I would say that lemmas 3.3-3.7 are more or less what we should concentrate now</p>



<a name="281880484"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/281880484" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Birkbeck <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#281880484">(May 10 2022 at 20:19)</a>:</h4>
<p>Ive also been very bad at updating links on the blueprint. I'll try and do that tomorrow</p>



<a name="281880613"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/281880613" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#281880613">(May 10 2022 at 20:20)</a>:</h4>
<p><span class="user-mention" data-user-id="488648">@Xavier Roblot</span> if you want to have a look at the project just use <code>leanproject get flt-regular</code>, but a lot of results are already in mathlib, in the <code>number_theory/cyclotomic</code> folder.</p>



<a name="281880624"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/281880624" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Xavier Roblot <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#281880624">(May 10 2022 at 20:20)</a>:</h4>
<p>Actually, I have been working on some version of 3.3 in the last few days as a pet project. But I am very far from a complete proof . Basically, I just (almost) proved so far that bounded roots give bounded coefficients, that might be already in mathlib... (Sorry posted in the wrong streams)</p>



<a name="281880902"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/281880902" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Xavier Roblot <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#281880902">(May 10 2022 at 20:22)</a>:</h4>
<p>I have downloaded the project. I'll have a closer look tomorrow.</p>



<a name="281880965"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/281880965" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#281880965">(May 10 2022 at 20:23)</a>:</h4>
<p>What is you github username?</p>



<a name="281881115"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/281881115" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Birkbeck <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#281881115">(May 10 2022 at 20:24)</a>:</h4>
<p>I've been slowly working on 3.4 in the unit_lemmas.lean file, but we need some more facts about totient functions which could also be a fun place to start</p>



<a name="281882092"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/281882092" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Xavier Roblot <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#281882092">(May 10 2022 at 20:31)</a>:</h4>
<p>My GitHub username is xroblot</p>



<a name="281882912"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/281882912" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#281882912">(May 10 2022 at 20:37)</a>:</h4>
<p>I've sent you an invitation to the project. Feel free to push all sort of code to <code>master</code>, but try to avoid errors (<code>sorry</code> is of course totally fine).</p>



<a name="281883010"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/281883010" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#281883010">(May 10 2022 at 20:38)</a>:</h4>
<p>Let me know if you are also interested in contributing to mathlib</p>



<a name="281884903"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/281884903" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#281884903">(May 10 2022 at 20:54)</a>:</h4>
<p>I thought that I did bounded roots gives bounded coeffs, and that all roots abs val one implies root of unity in the project a while ago, but I'm not sure now, I'll try and find it later.</p>



<a name="281885043"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/281885043" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Birkbeck <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#281885043">(May 10 2022 at 20:56)</a>:</h4>
<p>Yeah you did, it's somewhere in the repo</p>



<a name="281885312"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/281885312" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#281885312">(May 10 2022 at 20:58)</a>:</h4>
<p>I always saw that stuff and got a bit worried because it looked dissimilar to the galois stuff I did but it's probably likely I did stuff wrong</p>



<a name="281890757"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/281890757" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#281890757">(May 10 2022 at 21:48)</a>:</h4>
<p>Hi Xavier, I am happy to see you here. Welcome! I am sure that <span class="user-mention" data-user-id="130384">@Riccardo Brasca</span> will have a lot of things to pass over to you, you won't be left without work <span aria-label="grinning face with smiling eyes" class="emoji emoji-1f601" role="img" title="grinning face with smiling eyes">:grinning_face_with_smiling_eyes:</span></p>



<a name="281892727"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/281892727" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#281892727">(May 10 2022 at 22:07)</a>:</h4>
<p>Hi Xavier!</p>



<a name="281933271"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/281933271" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Birkbeck <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#281933271">(May 11 2022 at 08:33)</a>:</h4>
<p><span class="user-mention silent" data-user-id="127136">Alex J. Best</span> <a href="#narrow/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project/near/281884903">said</a>:</p>
<blockquote>
<p>I thought that I did bounded roots gives bounded coeffs, and that all roots abs val one implies root of unity in the project a while ago, but I'm not sure now, I'll try and find it later.</p>
</blockquote>
<p>its <code>mem_roots_of_unity_of_abs_eq_one</code> which is in <code>number_theory/cyclotomic/absolute_value.lean</code></p>



<a name="281935213"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/281935213" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#281935213">(May 11 2022 at 08:52)</a>:</h4>
<p>I've missed this one, nice!! Killing the two remaining <code>sorry</code> in that file would be very nice</p>



<a name="281935251"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/281935251" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#281935251">(May 11 2022 at 08:52)</a>:</h4>
<p>One has the rather scary comment</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="c1">-- this goal isn't true as stated right now, the rhs could be a power of the lhs</span>
</code></pre></div>
<p><span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span></p>



<a name="282759032"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/282759032" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#282759032">(May 18 2022 at 09:03)</a>:</h4>
<p>Is someone interested in finishing this? I think it's a nice piece of math, and it definitely deserves to be put in mathlib.</p>



<a name="282760122"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/282760122" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Birkbeck <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#282760122">(May 18 2022 at 09:13)</a>:</h4>
<p>By this do you mean lemma 3.3 from the blueprint? i.e <code>mem_roots_of_unity_of_abs_eq_one</code>?</p>



<a name="282760651"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/282760651" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#282760651">(May 18 2022 at 09:18)</a>:</h4>
<p>Yes, sorry</p>



<a name="282923724"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/282923724" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Xavier Roblot <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#282923724">(May 19 2022 at 12:51)</a>:</h4>
<p>I guess I can try to finish it if <span class="user-mention" data-user-id="127136">@Alex J. Best</span>  does not want to finish it himself. However, it will probably take me some time and I might need some help along the way <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span></p>



<a name="282925816"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/282925816" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#282925816">(May 19 2022 at 13:06)</a>:</h4>
<p>If you need some advice just ask!</p>



<a name="282926243"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/282926243" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#282926243">(May 19 2022 at 13:10)</a>:</h4>
<p>I'm happy to help you help me! It's not so much that I don't want to finish it, just that I have a stack of other half finished Lean projects, and only so much time to devote to them. Its a very cool theorem and I definitely agree it belongs in mathlib, so if you'd like to finish it off that's great, thanks <span class="user-mention" data-user-id="488648">@Xavier Roblot</span>. I'm happy to try and explain any of the choices I made, or things that I think can be improved from what I originally wrote.</p>



<a name="282926484"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/282926484" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Xavier Roblot <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#282926484">(May 19 2022 at 13:13)</a>:</h4>
<p>Ok, thanks for the answers. I'll try to finish it and I'll come back to you guys if I need help.</p>



<a name="284099710"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/284099710" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#284099710">(May 27 2022 at 07:24)</a>:</h4>
<p>Something we also want is <a href="https://leanprover-community.github.io/flt-regular/sect0003.html#lemma:ideals_mult_to_power">Lemma 3.7</a> in the blueprint. It shouldn't be difficult is anyone wants to try (I didn't check, it can  somehow be already in mathlib).</p>



<a name="284112187"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/284112187" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ruben Van de Velde <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#284112187">(May 27 2022 at 09:50)</a>:</h4>
<p>Not sure if this is the cleanest approach, and not sure it's true for b=0, but:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">variables</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">comm_ring</span> <span class="n">α</span><span class="o">]</span> <span class="o">[</span><span class="n">is_domain</span> <span class="n">α</span><span class="o">]</span> <span class="o">[</span><span class="n">is_dedekind_domain</span> <span class="n">α</span><span class="o">]</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="n">nat</span><span class="o">)</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ideal</span> <span class="n">α</span><span class="o">)</span> <span class="o">(</span><span class="n">cp</span> <span class="o">:</span> <span class="n">is_coprime</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">a</span><span class="bp">*</span><span class="n">b</span> <span class="bp">=</span> <span class="n">c</span><span class="bp">^</span><span class="n">p</span><span class="o">)</span> <span class="o">(</span><span class="n">hb</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≠</span> <span class="mi">0</span><span class="o">)</span> <span class="o">:</span>
  <span class="bp">∃</span> <span class="n">d</span> <span class="o">:</span> <span class="n">ideal</span> <span class="n">α</span><span class="o">,</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">d</span> <span class="bp">^</span> <span class="n">p</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">classical</span><span class="o">,</span>
  <span class="n">obtain</span> <span class="n">rfl</span><span class="bp">|</span><span class="n">ha</span> <span class="o">:=</span> <span class="n">eq_or_ne</span> <span class="n">a</span> <span class="mi">0</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">use</span> <span class="mi">0</span><span class="o">,</span> <span class="n">apply</span> <span class="o">(</span><span class="n">zero_pow</span> <span class="n">_</span><span class="o">)</span><span class="bp">.</span><span class="n">symm</span><span class="o">,</span> <span class="n">contrapose</span><span class="bp">!</span> <span class="n">h</span><span class="o">,</span>
    <span class="n">rw</span> <span class="n">le_zero_iff</span> <span class="n">at</span> <span class="n">h</span><span class="o">,</span> <span class="n">rw</span> <span class="o">[</span><span class="n">h</span><span class="o">,</span> <span class="n">pow_zero</span><span class="o">,</span> <span class="n">zero_mul</span><span class="o">],</span> <span class="n">exact</span> <span class="n">zero_ne_one</span> <span class="o">},</span>
  <span class="k">let</span> <span class="n">fa</span> <span class="o">:=</span> <span class="n">unique_factorization_monoid.normalized_factors</span> <span class="n">a</span><span class="o">,</span>
  <span class="k">let</span> <span class="n">fb</span> <span class="o">:=</span> <span class="n">unique_factorization_monoid.normalized_factors</span> <span class="n">b</span><span class="o">,</span>
  <span class="k">let</span> <span class="n">fc</span> <span class="o">:=</span> <span class="n">unique_factorization_monoid.normalized_factors</span> <span class="n">c</span><span class="o">,</span>
  <span class="k">have</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">d</span> <span class="bp">∈</span> <span class="n">fa</span><span class="o">,</span> <span class="n">d</span> <span class="bp">∉</span> <span class="n">fb</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">intros</span> <span class="n">d</span> <span class="n">ha</span> <span class="n">hb</span><span class="o">,</span>
    <span class="k">have</span> <span class="o">:=</span> <span class="n">unique_factorization_monoid.irreducible_of_normalized_factor</span> <span class="n">_</span> <span class="n">ha</span><span class="o">,</span>
    <span class="n">apply</span> <span class="n">irreducible.not_unit</span> <span class="n">this</span><span class="o">,</span>
    <span class="n">apply</span> <span class="n">is_coprime.is_unit_of_dvd'</span> <span class="n">cp</span><span class="bp">;</span>
    <span class="n">apply</span> <span class="n">unique_factorization_monoid.dvd_of_mem_normalized_factors</span><span class="bp">;</span>
    <span class="n">assumption</span> <span class="o">},</span>
  <span class="k">suffices</span> <span class="o">:</span> <span class="bp">∃</span> <span class="n">f</span> <span class="o">:</span> <span class="n">multiset</span> <span class="o">(</span><span class="n">ideal</span> <span class="n">α</span><span class="o">),</span> <span class="n">fa</span> <span class="bp">=</span> <span class="n">p</span> <span class="bp">•</span> <span class="n">f</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">obtain</span> <span class="o">⟨</span><span class="n">f</span><span class="o">,</span> <span class="n">hf</span><span class="o">⟩</span> <span class="o">:=</span> <span class="n">this</span><span class="o">,</span>
    <span class="n">refine</span> <span class="o">⟨</span><span class="n">f.prod</span><span class="o">,</span> <span class="n">_</span><span class="o">⟩</span> <span class="o">,</span>
    <span class="k">have</span> <span class="o">:=</span> <span class="n">unique_factorization_monoid.normalized_factors_prod</span> <span class="n">ha</span><span class="o">,</span>
    <span class="n">rw</span> <span class="n">associated_eq_eq</span> <span class="n">at</span> <span class="n">this</span><span class="o">,</span>
    <span class="n">rw</span> <span class="o">[</span><span class="bp">←</span><span class="n">this</span><span class="o">,</span> <span class="bp">←</span><span class="n">multiset.prod_nsmul</span><span class="o">,</span> <span class="bp">←</span><span class="n">hf</span><span class="o">]</span> <span class="o">},</span>
  <span class="n">refine</span> <span class="n">multiset.exists_smul_of_dvd_count</span> <span class="n">_</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">x</span> <span class="n">hx</span><span class="o">,</span> <span class="n">_</span><span class="o">),</span>
  <span class="k">have</span> <span class="n">hxb</span> <span class="o">:=</span> <span class="n">this</span> <span class="n">x</span> <span class="n">hx</span><span class="o">,</span>
  <span class="n">convert</span> <span class="n">dvd_mul_right</span> <span class="n">p</span> <span class="o">(</span><span class="n">fc.count</span> <span class="n">x</span><span class="o">),</span>
  <span class="n">rw</span> <span class="o">[</span><span class="bp">←</span><span class="n">multiset.count_nsmul</span><span class="o">,</span> <span class="bp">←</span><span class="n">unique_factorization_monoid.normalized_factors_pow</span><span class="o">,</span> <span class="bp">←</span><span class="n">h</span><span class="o">,</span>
    <span class="n">unique_factorization_monoid.normalized_factors_mul</span> <span class="n">ha</span> <span class="n">hb</span><span class="o">],</span>
  <span class="n">rw</span> <span class="n">multiset.count_add</span><span class="o">,</span>
  <span class="n">convert</span> <span class="o">(</span><span class="n">add_zero</span> <span class="n">_</span><span class="o">)</span><span class="bp">.</span><span class="n">symm</span><span class="o">,</span>
  <span class="n">apply</span> <span class="n">multiset.count_eq_zero_of_not_mem</span> <span class="n">hxb</span><span class="o">,</span>
<span class="kd">end</span>
</code></pre></div>



<a name="284112477"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/284112477" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#284112477">(May 27 2022 at 09:52)</a>:</h4>
<p>Very nice! Would you mind to push it to master in the <code>flt-regular</code> repository? You can create a new file in the <code>ready_for_mathlib</code> folder</p>



<a name="284112499"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/284112499" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#284112499">(May 27 2022 at 09:52)</a>:</h4>
<p>And of course if you want to PR it you're welcome!</p>



<a name="284112675"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/284112675" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#284112675">(May 27 2022 at 09:54)</a>:</h4>
<p>I've sent you an invitation</p>



<a name="284113239"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/284113239" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ruben Van de Velde <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#284113239">(May 27 2022 at 10:00)</a>:</h4>
<p>I'm not sure I have all the right imports, so I made a pr: <a href="https://github.com/leanprover-community/flt-regular/pull/61">https://github.com/leanprover-community/flt-regular/pull/61</a></p>



<a name="284115193"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/284115193" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ruben Van de Velde <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#284115193">(May 27 2022 at 10:22)</a>:</h4>
<p>Need to check where it goes wrong for plain ufds instead of ideals of Dedekind domains, though</p>



<a name="284115550"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/284115550" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#284115550">(May 27 2022 at 10:25)</a>:</h4>
<p>For the project if it compiles then it's OK for <code>master</code> :)</p>



<a name="284117119"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/284117119" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#284117119">(May 27 2022 at 10:44)</a>:</h4>
<p>this is symmetric in a+b, right? so it should work for b=0? especially as you don't use <code>hb</code> in the subproof</p>



<a name="284117246"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/284117246" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#284117246">(May 27 2022 at 10:46)</a>:</h4>
<p>oh, I see that as usual my reading abilities drop to zero when I'm reading other people's code</p>



<a name="284117991"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/284117991" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#284117991">(May 27 2022 at 10:55)</a>:</h4>
<p>thankfully the statement is true for b zero, proof pushed</p>



<a name="284118082"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/284118082" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#284118082">(May 27 2022 at 10:56)</a>:</h4>
<p>You're faster than me!</p>



<a name="284130487"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/284130487" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#284130487">(May 27 2022 at 13:14)</a>:</h4>
<p>I generalised <code>is_unit_iff'</code> to <code>comm_semiring</code>s, because of what Ruben said about ufds, but not sure how this could hold in UFDs; are UFDs' ideals atomic?</p>



<a name="284131040"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/284131040" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#284131040">(May 27 2022 at 13:19)</a>:</h4>
<p>I wouldn't care about UFD, and it wouldn't be a generalization</p>



<a name="284131069"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/284131069" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#284131069">(May 27 2022 at 13:19)</a>:</h4>
<p>Most Dedekind domains are not UFD</p>



<a name="284131196"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/284131196" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#284131196">(May 27 2022 at 13:20)</a>:</h4>
<p>Right, fair, no big deal then</p>



<a name="284131519"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/284131519" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#284131519">(May 27 2022 at 13:23)</a>:</h4>
<p>Of course for UFD the corresponding relevant statement is about elements, and it should be easy</p>



<a name="284135304"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/284135304" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#284135304">(May 27 2022 at 13:51)</a>:</h4>
<p>Well I guess the generalization would be to unique factorization monoids rather than ideals of Dedekind domains</p>



<a name="284137957"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/284137957" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#284137957">(May 27 2022 at 14:08)</a>:</h4>
<p>The trick for <code>b=0</code> won't work in general I think (since there can be units that are not <code>p</code>-powers), but the rest should be the same.</p>



<a name="284138326"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/284138326" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ruben Van de Velde <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#284138326">(May 27 2022 at 14:11)</a>:</h4>
<p>I've got some pretty awful code up at <a href="https://gist.github.com/Ruben-VandeVelde/d82c653a8cc2315a3985e60ed4637346">https://gist.github.com/Ruben-VandeVelde/d82c653a8cc2315a3985e60ed4637346</a> - might try to make something of it later</p>



<a name="284167838"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/284167838" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ruben Van de Velde <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#284167838">(May 27 2022 at 18:25)</a>:</h4>
<p>Sorry-free at least, but still hairy</p>



<a name="284169905"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/284169905" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#284169905">(May 27 2022 at 18:43)</a>:</h4>
<p>Feel free to push it to <code>flt-regular</code> if you want, don't worry about names and similar stuff (and in exchange someone will fix any problem arising from mathlib bumps).</p>



<a name="284186414"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/284186414" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Xavier Roblot <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#284186414">(May 27 2022 at 21:22)</a>:</h4>
<p>I am sorry but I am making very slow progress. I have a lot of difficulties figuring out even very easy things. For example, I have a <code>number_field K</code>, <code>number_field L</code> and <code>algebra K L</code>. So I should be able to see <code>K</code> as having type <code>intermediate_fields ℚ L</code>, but I cannot just figure out how to say to Lean to do that. Any help would be very welcome.</p>



<a name="284188275"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/284188275" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ruben Van de Velde <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#284188275">(May 27 2022 at 21:45)</a>:</h4>
<p><span class="user-mention silent" data-user-id="307953">Ruben Van de Velde</span> <a href="#narrow/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project/near/284138326">said</a>:</p>
<blockquote>
<p>I've got some pretty awful code up at <a href="https://gist.github.com/Ruben-VandeVelde/d82c653a8cc2315a3985e60ed4637346">https://gist.github.com/Ruben-VandeVelde/d82c653a8cc2315a3985e60ed4637346</a> - might try to make something of it later</p>
</blockquote>
<p>In the end it turns out my generalization wasn't quite a generalization: I required <code>comm_ring</code> and ideals of Dedekind domains seem to only be a <code>comm_semiring</code>. Maybe <a href="https://github.com/leanprover-community/mathlib/pull/14423">https://github.com/leanprover-community/mathlib/pull/14423</a> will help, we'll see. Got some interesting lemmas out of it, in any case</p>



<a name="284202298"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/284202298" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#284202298">(May 28 2022 at 01:47)</a>:</h4>
<p><span class="user-mention silent" data-user-id="488648">Xavier Roblot</span> <a href="#narrow/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project/near/284186414">said</a>:</p>
<blockquote>
<p>I am sorry but I am making very slow progress. I have a lot of difficulties figuring out even very easy things. For example, I have a <code>number_field K</code>, <code>number_field L</code> and <code>algebra K L</code>. So I should be able to see <code>K</code> as having type <code>intermediate_fields ℚ L</code>, but I cannot just figure out how to say to Lean to do that. Any help would be very welcome.</p>
</blockquote>
<p><span class="user-mention" data-user-id="488648">@Xavier Roblot</span> a more effective way to ask questions is to give a <a href="https://leanprover-community.github.io/mwe.html">#mwe</a> , for example</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">number_theory.number_field</span>

<span class="kd">variables</span> <span class="o">(</span><span class="n">K</span> <span class="n">L</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="o">[</span><span class="n">field</span> <span class="n">K</span><span class="o">]</span> <span class="o">[</span><span class="n">number_field</span> <span class="n">K</span><span class="o">]</span> <span class="o">[</span><span class="n">field</span> <span class="n">L</span><span class="o">]</span> <span class="o">[</span><span class="n">number_field</span> <span class="n">L</span><span class="o">]</span>
<span class="o">[</span><span class="n">algebra</span> <span class="n">K</span> <span class="n">L</span><span class="o">]</span>

<span class="kd">example</span> <span class="o">:</span> <span class="n">intermediate_field</span> <span class="n">ℚ</span> <span class="n">L</span> <span class="o">:=</span> <span class="gr">sorry</span>
</code></pre></div>
<p>That way I don't have to figure out imports myself or start guessing that you probably mean <code>intermediate_field</code> not <code>intermediate_fields</code>.</p>
<p>Here's a partial solution:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">number_theory.number_field</span>

<span class="kd">variables</span> <span class="o">(</span><span class="n">K</span> <span class="n">L</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="o">[</span><span class="n">field</span> <span class="n">K</span><span class="o">]</span> <span class="o">[</span><span class="n">number_field</span> <span class="n">K</span><span class="o">]</span> <span class="o">[</span><span class="n">field</span> <span class="n">L</span><span class="o">]</span> <span class="o">[</span><span class="n">number_field</span> <span class="n">L</span><span class="o">]</span>
<span class="o">[</span><span class="n">algebra</span> <span class="n">K</span> <span class="n">L</span><span class="o">]</span>

<span class="c1">-- To make an intermediate field you need to give</span>
<span class="c1">-- (1) the subset, (called `carrier`)</span>
<span class="c1">-- (2) a proof that the subset contains ℚ, (called `algebra_map_mem'`)</span>
<span class="c1">-- (3) a proof of all the axioms for a subfield.</span>

<span class="kd">example</span> <span class="o">:</span> <span class="n">intermediate_field</span> <span class="n">ℚ</span> <span class="n">L</span> <span class="o">:=</span>
  <span class="c1">-- The subset is the image of the canonical map K → L</span>
<span class="o">{</span> <span class="n">carrier</span> <span class="o">:=</span> <span class="n">set.range</span> <span class="o">(</span><span class="n">algebra_map</span> <span class="n">K</span> <span class="n">L</span><span class="o">),</span>
    <span class="c1">-- this is a fairly incomprehensible proof</span>
    <span class="c1">-- that the image of the map from K to L</span>
    <span class="c1">-- must contain the image of the rationals.</span>
  <span class="n">algebra_map_mem'</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">r</span><span class="o">,</span> <span class="o">⟨</span><span class="n">r</span><span class="o">,</span> <span class="kd">begin</span>
    <span class="n">rw</span> <span class="o">[</span><span class="n">map_rat_cast</span><span class="o">],</span>
    <span class="n">convert</span> <span class="o">(</span><span class="n">map_rat_cast</span> <span class="o">(</span><span class="n">algebra_map</span> <span class="n">ℚ</span> <span class="n">L</span><span class="o">)</span> <span class="n">r</span><span class="o">)</span><span class="bp">.</span><span class="n">symm</span><span class="o">,</span>
    <span class="n">exact</span> <span class="n">congr_arg</span> <span class="n">_</span> <span class="n">r.cast_id.symm</span><span class="o">,</span>
  <span class="kd">end</span><span class="o">⟩,</span>
  <span class="c1">-- A ring homomorphism maps 0 to 0 so</span>
  <span class="c1">-- 0 is in the subset</span>
  <span class="n">zero_mem'</span> <span class="o">:=</span> <span class="o">⟨</span><span class="mi">0</span><span class="o">,</span> <span class="n">map_zero</span> <span class="n">_</span><span class="o">⟩,</span>
  <span class="c1">-- Same story for 1; `map_one` says a ring hom maps</span>
  <span class="c1">-- 1 to 1.</span>
  <span class="n">one_mem'</span> <span class="o">:=</span> <span class="o">⟨</span><span class="mi">1</span><span class="o">,</span> <span class="n">map_one</span> <span class="n">_</span><span class="o">⟩,</span>
  <span class="c1">-- This next begin/end block is a proof that the product</span>
  <span class="c1">-- of two things in the subset is in the subset. It uses</span>
  <span class="c1">-- the theorem that ring homomorphisms commute with</span>
  <span class="c1">-- multiplication, which is called `map_mul`.</span>
  <span class="c1">-- It also uses the `rintro rfl` trick.</span>
  <span class="n">mul_mem'</span> <span class="o">:=</span> <span class="kd">begin</span>
    <span class="n">rintro</span> <span class="bp">-</span> <span class="bp">-</span> <span class="o">⟨</span><span class="n">s</span><span class="o">,</span> <span class="n">rfl</span><span class="o">⟩</span> <span class="o">⟨</span><span class="n">t</span><span class="o">,</span> <span class="n">rfl</span><span class="o">⟩,</span>
    <span class="n">exact</span> <span class="o">⟨</span><span class="n">s</span> <span class="bp">*</span> <span class="n">t</span><span class="o">,</span> <span class="n">map_mul</span> <span class="n">_</span> <span class="n">_</span> <span class="n">_</span><span class="o">⟩,</span>
  <span class="kd">end</span><span class="o">,</span>
  <span class="c1">-- Exercise for the reader.</span>
  <span class="n">add_mem'</span> <span class="o">:=</span> <span class="kd">begin</span> <span class="gr">sorry</span> <span class="kd">end</span><span class="o">,</span>
  <span class="n">neg_mem'</span> <span class="o">:=</span> <span class="kd">begin</span> <span class="gr">sorry</span> <span class="kd">end</span><span class="o">,</span>
  <span class="n">inv_mem'</span> <span class="o">:=</span> <span class="kd">begin</span> <span class="gr">sorry</span> <span class="kd">end</span><span class="o">,</span>
  <span class="o">}</span>
</code></pre></div>



<a name="284212773"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/284212773" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Xavier Roblot <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#284212773">(May 28 2022 at 06:01)</a>:</h4>
<p>Kevin, thanks (again) for helping me. Sorry about the lack of <a href="https://leanprover-community.github.io/mwe.html">#mwe</a>. I'll remember to add one next time. <br>
Somehow, I thought there was a quick way to solve the problem, but I see that one has to construct the <code>intermediate_field</code> from the definition... Anyway, back to work</p>



<a name="284214532"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/284214532" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#284214532">(May 28 2022 at 06:52)</a>:</h4>
<p>In your example <code>K</code> is not literally an <code>intermediate_field</code> (this is false even mathematically, <code>K</code> is not a subset of <code>L</code>. Of course there is the image, but still...). The best question is probably why you want an intermediate field.</p>



<a name="284214621"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/284214621" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#284214621">(May 28 2022 at 06:55)</a>:</h4>
<p><span class="user-mention silent" data-user-id="307953">Ruben Van de Velde</span> <a href="#narrow/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project/near/284188275">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="307953">Ruben Van de Velde</span> <a href="#narrow/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project/near/284138326">said</a>:</p>
<blockquote>
<p>I've got some pretty awful code up at <a href="https://gist.github.com/Ruben-VandeVelde/d82c653a8cc2315a3985e60ed4637346">https://gist.github.com/Ruben-VandeVelde/d82c653a8cc2315a3985e60ed4637346</a> - might try to make something of it later</p>
</blockquote>
<p>In the end it turns out my generalization wasn't quite a generalization: I required <code>comm_ring</code> and ideals of Dedekind domains seem to only be a <code>comm_semiring</code>. Maybe <a href="https://github.com/leanprover-community/mathlib/pull/14423">https://github.com/leanprover-community/mathlib/pull/14423</a> will help, we'll see. Got some interesting lemmas out of it, in any case</p>
</blockquote>
<p>This</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">variables</span> <span class="o">{</span><span class="n">β</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">comm_ring</span> <span class="n">β</span><span class="o">]</span> <span class="o">[</span><span class="n">is_domain</span> <span class="n">β</span><span class="o">]</span> <span class="o">[</span><span class="n">unique_factorization_monoid</span> <span class="n">β</span><span class="o">]</span>

<span class="kd">lemma</span> <span class="n">exists_associated_pow_of_mul_eq_pow</span> <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="n">nat</span><span class="o">)</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">β</span><span class="o">)</span> <span class="o">(</span><span class="n">cp</span> <span class="o">:</span> <span class="n">is_coprime</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">a</span><span class="bp">*</span><span class="n">b</span> <span class="bp">=</span> <span class="n">c</span><span class="bp">^</span><span class="n">p</span><span class="o">)</span> <span class="o">(</span><span class="n">hb</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≠</span> <span class="mi">0</span><span class="o">)</span> <span class="o">:</span>
  <span class="bp">∃</span> <span class="n">d</span> <span class="o">:</span> <span class="n">β</span><span class="o">,</span> <span class="n">associated</span> <span class="n">a</span> <span class="o">(</span><span class="n">d</span> <span class="bp">^</span> <span class="n">p</span><span class="o">)</span> <span class="o">:=</span>
</code></pre></div>
<p>looks a good generalization, ideals of a Dedekind domain are a <code>unique_factorization_monoid</code>, and in this case associated means equal (do we have this lemma?).</p>



<a name="284214664"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/284214664" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#284214664">(May 28 2022 at 06:56)</a>:</h4>
<p><a href="https://leanprover-community.github.io/mathlib_docs/find/associated_iff_eq">docs#associated_iff_eq</a> ?</p>



<a name="284214669"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/284214669" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#284214669">(May 28 2022 at 06:56)</a>:</h4>
<p>Sorry, you accidentally triggered <code>yael_search</code>!</p>



<a name="284214684"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/284214684" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#284214684">(May 28 2022 at 06:57)</a>:</h4>
<p>Yes, that's probably it (I am still having my coffee, to early on Saturday morning to check  if we have <code>unique...</code>)</p>



<a name="284214743"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/284214743" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#284214743">(May 28 2022 at 06:59)</a>:</h4>
<p><span class="user-mention silent" data-user-id="130384">Riccardo Brasca</span> <a href="#narrow/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project/near/284214621">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="307953">Ruben Van de Velde</span> <a href="#narrow/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project/near/284188275">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="307953">Ruben Van de Velde</span> <a href="#narrow/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project/near/284138326">said</a>:</p>
<blockquote>
<p>I've got some pretty awful code up at <a href="https://gist.github.com/Ruben-VandeVelde/d82c653a8cc2315a3985e60ed4637346">https://gist.github.com/Ruben-VandeVelde/d82c653a8cc2315a3985e60ed4637346</a> - might try to make something of it later</p>
</blockquote>
<p>In the end it turns out my generalization wasn't quite a generalization: I required <code>comm_ring</code> and ideals of Dedekind domains seem to only be a <code>comm_semiring</code>. Maybe <a href="https://github.com/leanprover-community/mathlib/pull/14423">https://github.com/leanprover-community/mathlib/pull/14423</a> will help, we'll see. Got some interesting lemmas out of it, in any case</p>
</blockquote>
<p>This</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">variables</span> <span class="o">{</span><span class="n">β</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">comm_ring</span> <span class="n">β</span><span class="o">]</span> <span class="o">[</span><span class="n">is_domain</span> <span class="n">β</span><span class="o">]</span> <span class="o">[</span><span class="n">unique_factorization_monoid</span> <span class="n">β</span><span class="o">]</span>

<span class="kd">lemma</span> <span class="n">exists_associated_pow_of_mul_eq_pow</span> <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="n">nat</span><span class="o">)</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">β</span><span class="o">)</span> <span class="o">(</span><span class="n">cp</span> <span class="o">:</span> <span class="n">is_coprime</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">a</span><span class="bp">*</span><span class="n">b</span> <span class="bp">=</span> <span class="n">c</span><span class="bp">^</span><span class="n">p</span><span class="o">)</span> <span class="o">(</span><span class="n">hb</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≠</span> <span class="mi">0</span><span class="o">)</span> <span class="o">:</span>
  <span class="bp">∃</span> <span class="n">d</span> <span class="o">:</span> <span class="n">β</span><span class="o">,</span> <span class="n">associated</span> <span class="n">a</span> <span class="o">(</span><span class="n">d</span> <span class="bp">^</span> <span class="n">p</span><span class="o">)</span> <span class="o">:=</span>
</code></pre></div>
<p>looks a good generalization, ideals of a Dedekind domain are a <code>unique_factorization_monoid</code>, and in this case associated means equal (do we have this lemma?).</p>
</blockquote>
<p>Ah, you have <code>variables {β : Type*} [comm_ring β] [is_domain β] [unique_factorization_monoid β]</code>, that's too much! <code>β</code> should only be a monoid.</p>



<a name="284214879"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/284214879" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#284214879">(May 28 2022 at 07:01)</a>:</h4>
<p>I see <code>is_coprime</code> is defined via Bezout, so it wants a <code>semiring</code>.</p>



<a name="284215391"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/284215391" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#284215391">(May 28 2022 at 07:16)</a>:</h4>
<p>I've asked a related question <a href="#narrow/stream/217875-Is-there-code-for-X.3F/topic/.60semiring.60.20and.20.60cancel_comm_monoid_with_zero.60/near/284215346">here</a></p>



<a name="284215393"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/284215393" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Xavier Roblot <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#284215393">(May 28 2022 at 07:16)</a>:</h4>
<p><span class="user-mention silent" data-user-id="130384">Riccardo Brasca</span> <a href="#narrow/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project/near/284214532">said</a>:</p>
<blockquote>
<p>In your example <code>K</code> is not literally an <code>intermediate_field</code> (this is false even mathematically, <code>K</code> is not a subset of <code>L</code>. Of course there is the image, but still...). The best question is probably why you want an intermediate field.</p>
</blockquote>
<p>I need to prove that any embedding <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>K</mi><mo>→</mo><mi mathvariant="double-struck">C</mi></mrow><annotation encoding="application/x-tex">K \to \mathbb{C}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">K</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6889em;"></span><span class="mord mathbb">C</span></span></span></span> can be lifted to an embedding <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>L</mi><mo>→</mo><mi mathvariant="double-struck">C</mi></mrow><annotation encoding="application/x-tex">L \to \mathbb{C}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">L</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6889em;"></span><span class="mord mathbb">C</span></span></span></span>. This should follow from the <code>intermediate_field.lifts</code> machinery using the primitive element theorem.</p>



<a name="284215716"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/284215716" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#284215716">(May 28 2022 at 07:25)</a>:</h4>
<p>We have <a href="https://leanprover-community.github.io/mathlib_docs/find/is_alg_closed.lift">docs#is_alg_closed.lift</a></p>



<a name="284215959"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/284215959" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#284215959">(May 28 2022 at 07:32)</a>:</h4>
<p>In general it is a little tricky to decide if one wants to work with <code>substuff</code> of not. <code>substuff</code> has the advantage that you can literally prove that two things are equal by <code>ext</code>, you can take intersections and so on. But usually at some point you discover that something is not literally a subset and then you regret your choice. I suggest to try to avoid it if possible.</p>



<a name="284216545"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/284216545" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Xavier Roblot <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#284216545">(May 28 2022 at 07:47)</a>:</h4>
<p>Riccardo, thanks for the advice. I wished I found out about <code>is_alg_closed.lift</code> sooner. I guess I am still not skilled enough at searching the library <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span></p>



<a name="284216719"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/284216719" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#284216719">(May 28 2022 at 07:51)</a>:</h4>
<p>I found it as follows: the reason why this is true is that <code>C</code> is algebraically closed, and I randomly tried <code>is_alg_closed.lift</code>. I would have been very surprised if we had it only for <code>intermediate_field</code>.</p>



<a name="284223073"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/284223073" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#284223073">(May 28 2022 at 10:41)</a>:</h4>
<p><span class="user-mention" data-user-id="488648">@Xavier Roblot</span> there could well be an easier way -- it wouldn't surprise me if for a large class of morphisms (group homomorphisms, ring homomorphisms etc) there's a function already there which gives the construction of an image subobject. I was too lazy to look for it.</p>



<a name="284231855"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/284231855" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Xavier Roblot <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#284231855">(May 28 2022 at 14:22)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110038">Kevin Buzzard</span> <a href="#narrow/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project/near/284223073">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="488648">Xavier Roblot</span> there could well be an easier way -- it wouldn't surprise me if for a large class of morphisms (group homomorphisms, ring homomorphisms etc) there's a function already there which gives the construction of an image subobject. I was too lazy to look for it.</p>
</blockquote>
<p>Well, I was able to get a nice short proof with <code>is_alg_closed.lift</code>  so I am happy with that.</p>



<a name="284240337"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/284240337" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#284240337">(May 28 2022 at 17:48)</a>:</h4>
<p>By the way I totally agree that as a relative newcomer it's very hard to guess what the best way of implementing the data of a question should be. The Artin-Tate lemma (according to Atiyah--Macdonald, at least) is a statement involving three commutative rings <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi><mo>⊆</mo><mi>B</mi><mo>⊆</mo><mi>C</mi></mrow><annotation encoding="application/x-tex">A\subseteq B\subseteq C</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8193em;vertical-align:-0.136em;"></span><span class="mord mathnormal">A</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">⊆</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8193em;vertical-align:-0.136em;"></span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">⊆</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">C</span></span></span></span> and in the proof you build a 4th ring <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>B</mi><mo>⊆</mo><mi>D</mi><mo>⊆</mo><mi>C</mi></mrow><annotation encoding="application/x-tex">B\subseteq D\subseteq C</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8193em;vertical-align:-0.136em;"></span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">⊆</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8193em;vertical-align:-0.136em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">⊆</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">C</span></span></span></span>. Are you supposed to let <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi><mo separator="true">,</mo><mi>B</mi><mo separator="true">,</mo><mi>C</mi></mrow><annotation encoding="application/x-tex">A,B,C</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">A</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">C</span></span></span></span> be types and give them <code>[ring]</code> instances, or should <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>C</mi></mrow><annotation encoding="application/x-tex">C</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">C</span></span></span></span> be the ring (the type) and <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi></mrow><annotation encoding="application/x-tex">A</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">A</span></span></span></span> and <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>B</mi></mrow><annotation encoding="application/x-tex">B</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span></span></span></span> be subrings, or should <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>B</mi></mrow><annotation encoding="application/x-tex">B</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span></span></span></span> be the ring, <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi></mrow><annotation encoding="application/x-tex">A</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">A</span></span></span></span> a subring and <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>C</mi></mrow><annotation encoding="application/x-tex">C</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">C</span></span></span></span> a <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>B</mi></mrow><annotation encoding="application/x-tex">B</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span></span></span></span>-algebra? Then all the same questions for <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>D</mi></mrow><annotation encoding="application/x-tex">D</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">D</span></span></span></span>. Questions like this are rather delicate. In the old days your decisions would be influenced by questions such as "do we have more API for <code>subring</code> or <code>algebra</code>" but nowadays we have lots of API for both so in some sense it's probably true that whatever decision you make, you'll be able to get the proof out in the end. But bad design decisions might mean that constructing the proof is painful. In the case of the Artin-Tate lemma we eventually let all the rings be types and used <code>algebra</code> to glue everything together, and also <code>is_scalar_tower</code> (this is a statement that a triangle commutes).</p>



<a name="284868174"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/284868174" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#284868174">(Jun 03 2022 at 12:05)</a>:</h4>
<p>I noticed we need</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">totient_super_multiplicative</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="n">a.totient</span> <span class="bp">*</span> <span class="n">b.totient</span> <span class="bp">≤</span> <span class="o">(</span><span class="n">a</span> <span class="bp">*</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">totient</span>
</code></pre></div>
<p>this should be easy and it can go directly to mathlib. So if someone is looking for a place to start this looks like a nice small lemma.</p>



<a name="284868315"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/284868315" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Birkbeck <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#284868315">(Jun 03 2022 at 12:06)</a>:</h4>
<p><span class="user-mention silent" data-user-id="130384">Riccardo Brasca</span> <a href="#narrow/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project/near/284868174">said</a>:</p>
<blockquote>
<p>I noticed we need</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">totient_super_multiplicative</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="n">a.totient</span> <span class="bp">*</span> <span class="n">b.totient</span> <span class="bp">≤</span> <span class="o">(</span><span class="n">a</span> <span class="bp">*</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">totient</span>
</code></pre></div>
<p>this should be easy and it can go directly to mathlib. So if someone is looking for a place to start this looks like a nice small lemma.</p>
</blockquote>
<p>I'm actually working on this now. Actually, I'm proving that totient is <code>is_gcd_mult</code> (which is a made up name)</p>



<a name="284868548"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/284868548" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Birkbeck <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#284868548">(Jun 03 2022 at 12:09)</a>:</h4>
<p>We also need </p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">contains_two_primitive_roots</span> <span class="o">(</span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span>
<span class="o">(</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">K</span><span class="o">)</span> <span class="o">(</span><span class="n">hx</span> <span class="o">:</span> <span class="n">is_primitive_root</span> <span class="n">x</span> <span class="n">p</span><span class="o">)</span> <span class="o">(</span><span class="n">hy</span> <span class="o">:</span> <span class="n">is_primitive_root</span> <span class="n">y</span> <span class="n">q</span><span class="o">):</span> <span class="o">(</span><span class="n">lcm</span> <span class="n">p</span> <span class="n">q</span> <span class="o">)</span><span class="bp">.</span><span class="n">totient</span> <span class="bp">≤</span>
<span class="o">(</span><span class="n">finite_dimensional.finrank</span> <span class="n">ℚ</span> <span class="n">K</span><span class="o">)</span> <span class="o">:=</span>
</code></pre></div>
<p>But this might be harder/more annoying</p>



<a name="284872483"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/284872483" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#284872483">(Jun 03 2022 at 12:44)</a>:</h4>
<p>can't we just create the explicit element of order <code>ф(lcm p q)</code> and then that gives us a bound on the finrank?</p>



<a name="284872543"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/284872543" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#284872543">(Jun 03 2022 at 12:45)</a>:</h4>
<p>not order... my words are vanishing in my head</p>



<a name="284872624"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/284872624" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#284872624">(Jun 03 2022 at 12:46)</a>:</h4>
<p>I think we have that K + a primitive root is a cyclotomic extension somewhere</p>



<a name="284872872"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/284872872" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Birkbeck <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#284872872">(Jun 03 2022 at 12:47)</a>:</h4>
<p><span class="user-mention silent" data-user-id="284160">Eric Rodriguez</span> <a href="#narrow/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project/near/284872483">said</a>:</p>
<blockquote>
<p>can't we just create the explicit element of order <code>ф(lcm p q)</code> and then that gives us a bound on the finrank?</p>
</blockquote>
<p>Yeah thats the idea. I guess I don't know how easy it is at the moment to go from knowing we have some root of unity in the field, to giving a lower bound on the degree.</p>



<a name="284872901"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/284872901" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Birkbeck <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#284872901">(Jun 03 2022 at 12:48)</a>:</h4>
<p>But I've not yet looked into the API for this, so maybe its easy</p>



<a name="284873532"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/284873532" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#284873532">(Jun 03 2022 at 12:51)</a>:</h4>
<p><a href="https://leanprover-community.github.io/mathlib_docs/find/is_cyclotomic_extension.finrank">docs#is_cyclotomic_extension.finrank</a>, <a href="https://leanprover-community.github.io/mathlib_docs/find/is_primitive_root.adjoin_is_cyclotomic_extension">docs#is_primitive_root.adjoin_is_cyclotomic_extension</a></p>



<a name="284873712"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/284873712" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#284873712">(Jun 03 2022 at 12:52)</a>:</h4>
<p>I think we don't have that if <code>A C S</code> is a cycl extension, and <code>A B K</code> is one, then <code>B C (S / K)</code> is but maybe that follows from something like <code>is_cyclotomic_extension.trans</code></p>



<a name="284873940"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/284873940" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#284873940">(Jun 03 2022 at 12:54)</a>:</h4>
<p>and also I don't think we can turn for example <code>is_cycl_ext A B {p, q}</code> into <code>is_cycl_ext A B {lcm p q}</code> or for a nice challenge <code>is_cycl_ext A B S</code> to <code>is_cycl_extension A B {S.lcm id}</code></p>



<a name="284892595"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/284892595" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Birkbeck <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#284892595">(Jun 03 2022 at 15:19)</a>:</h4>
<p><span class="user-mention silent" data-user-id="130384">Riccardo Brasca</span> <a href="#narrow/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project/near/284868174">said</a>:</p>
<blockquote>
<p>I noticed we need</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">totient_super_multiplicative</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="n">a.totient</span> <span class="bp">*</span> <span class="n">b.totient</span> <span class="bp">≤</span> <span class="o">(</span><span class="n">a</span> <span class="bp">*</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">totient</span>
</code></pre></div>
<p>this should be easy and it can go directly to mathlib. So if someone is looking for a place to start this looks like a nice small lemma.</p>
</blockquote>
<p>Alright, this is done, but its still a mess. I'll golf and look to PR it next week.</p>



<a name="284934231"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/284934231" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#284934231">(Jun 03 2022 at 21:21)</a>:</h4>
<p>I've made some progress in <code>contains_two_primitive_roots</code>. It's quite annoying, but I've constructed an element of order <code>lcm p q</code> (modulo the fact that the order doesn't change under a coercion, this is an independent result that I don't find). I will not work on this for a couple of days, if someone wants to finish from here no problems.</p>



<a name="284935638"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/284935638" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#284935638">(Jun 03 2022 at 21:36)</a>:</h4>
<p>The two sorry about the order are done.</p>



<a name="284938791"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/284938791" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#284938791">(Jun 03 2022 at 22:14)</a>:</h4>
<p>I guess we need to generalize <a href="https://leanprover-community.github.io/mathlib_docs/find/is_cyclotomic_extension.finrank">docs#is_cyclotomic_extension.finrank</a> to the case <code>L</code> is  domain. It should be very easy.</p>



<a name="284968066"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/284968066" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#284968066">(Jun 04 2022 at 09:07)</a>:</h4>
<p>I'm not sure how easy that is with the current proof</p>



<a name="284968893"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/284968893" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#284968893">(Jun 04 2022 at 09:30)</a>:</h4>
<p>I think there is simply nothing to do. Note that I don't want to generalize the base ring, just the big one.</p>



<a name="284968903"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/284968903" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#284968903">(Jun 04 2022 at 09:31)</a>:</h4>
<p>I've tested <a href="https://leanprover-community.github.io/mathlib_docs/find/is_primitive_root.power_basis">docs#is_primitive_root.power_basis</a> and it's OK</p>



<a name="284969796"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/284969796" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#284969796">(Jun 04 2022 at 09:54)</a>:</h4>
<p>I mean like in <a href="https://github.com/leanprover-community/mathlib/pull/14550">#14550</a>. I have to stop now, but <a href="https://leanprover-community.github.io/mathlib_docs/find/is_cyclotomic_extension.finrank">docs#is_cyclotomic_extension.finrank</a>  is OK in that PR. Something broke later, but I think it is just because <code>C</code> is implicit/explicit or something similar. If you have time and want to finish it feel free to work on it <span aria-label="grinning face with smiling eyes" class="emoji emoji-1f601" role="img" title="grinning face with smiling eyes">:grinning_face_with_smiling_eyes:</span></p>



<a name="284970434"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/284970434" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#284970434">(Jun 04 2022 at 10:09)</a>:</h4>
<p>I'll have a try when I get to the airport and have some time :)</p>



<a name="284970585"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/284970585" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#284970585">(Jun 04 2022 at 10:12)</a>:</h4>
<p>I am officially late for my lunch, but it should work now.</p>



<a name="284970615"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/284970615" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#284970615">(Jun 04 2022 at 10:13)</a>:</h4>
<p>I didn't touch <a href="https://leanprover-community.github.io/mathlib_docs/find/is_primitive_root.embeddings_equiv_primitive_roots">docs#is_primitive_root.embeddings_equiv_primitive_roots</a> (because I am lazy) but it should be generalizable too.</p>



<a name="285097700"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/285097700" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#285097700">(Jun 06 2022 at 11:06)</a>:</h4>
<p>sorry, I had a hectic while, I think I should've fixed it now</p>



<a name="285097752"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/285097752" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#285097752">(Jun 06 2022 at 11:07)</a>:</h4>
<p>I wonder if this is a Lean change more than anything, I assume that if you have a cycl extension over a field (apart from the fact that <code>unit</code> is the <code>{}</code>th cyclotomic extension) then we have that it is also a field though</p>



<a name="285097764"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/285097764" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#285097764">(Jun 06 2022 at 11:07)</a>:</h4>
<p>but if it helps it helps!</p>



<a name="285097869"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/285097869" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#285097869">(Jun 06 2022 at 11:08)</a>:</h4>
<p>if anyone is reading this stream, reviews on <a href="https://github.com/leanprover-community/mathlib/pull/14463">#14463</a> would be good! (this is another one, changing the defn of is_cyclotomic_extension)</p>



<a name="285104139"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/285104139" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Xavier Roblot <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#285104139">(Jun 06 2022 at 12:22)</a>:</h4>
<p>I have finished the proof of lemma 3.3: <code>mem_roots_of_unity_of_abs_eq_one</code>. I am going to take a few days to polish and clean the proof, but I should have something ready soon. What should I do when it's ready? should I just do a <code>git push origin</code> of my local branch?</p>



<a name="285107635"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/285107635" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ruben Van de Velde <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#285107635">(Jun 06 2022 at 12:52)</a>:</h4>
<p>Yeah - though feel free to push your branch before polishing as well</p>



<a name="285113392"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/285113392" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#285113392">(Jun 06 2022 at 13:40)</a>:</h4>
<p><span class="user-mention silent" data-user-id="284160">Eric Rodriguez</span> <a href="#narrow/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project/near/285097752">said</a>:</p>
<blockquote>
<p>I wonder if this is a Lean change more than anything, I assume that if you have a cycl extension over a field (apart from the fact that <code>unit</code> is the <code>{}</code>th cyclotomic extension) then we have that it is also a field though</p>
</blockquote>
<p>Yes, a domain that is a finite extension of a field is a field (multiplication by an element is injective, hence surjective). I guess this is somewhere with <code>is_field</code>.</p>



<a name="285114736"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/285114736" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#285114736">(Jun 06 2022 at 13:51)</a>:</h4>
<p>I guess this doesn't hold for something like <code>{3,9,27,...}</code> though, although maybe it holds for deeper reasons</p>



<a name="285115180"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/285115180" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#285115180">(Jun 06 2022 at 13:54)</a>:</h4>
<p>It holds (assuming it is a domain, I don't know whether this is automatic): take <code>x</code> in the extension. It is algebraic, so the subextension generated by it  it's finite and so it contains an inverse of <code>x</code>.</p>



<a name="285115279"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/285115279" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#285115279">(Jun 06 2022 at 13:55)</a>:</h4>
<p><a href="https://leanprover-community.github.io/mathlib_docs/find/is_integral.is_field_iff_is_field">docs#is_integral.is_field_iff_is_field</a></p>



<a name="285211084"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/285211084" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Xavier Roblot <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#285211084">(Jun 07 2022 at 07:08)</a>:</h4>
<p>Well, I pushed my changes to the project. I hope I didn't break anything...</p>



<a name="285215050"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/285215050" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#285215050">(Jun 07 2022 at 07:56)</a>:</h4>
<p><span class="user-mention silent" data-user-id="130384">Riccardo Brasca</span> <a href="#narrow/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project/near/285115279">said</a>:</p>
<blockquote>
<p><a href="https://leanprover-community.github.io/mathlib_docs/find/is_integral.is_field_iff_is_field">docs#is_integral.is_field_iff_is_field</a></p>
</blockquote>
<p>indeed, right below <code>integral</code>, this works:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">is_field</span> <span class="o">(</span><span class="n">C</span><span class="o">)</span> <span class="o">[</span><span class="n">comm_ring</span> <span class="n">C</span><span class="o">]</span> <span class="o">[</span><span class="n">is_domain</span> <span class="n">C</span><span class="o">]</span> <span class="o">[</span><span class="n">algebra</span> <span class="n">K</span> <span class="n">C</span><span class="o">]</span> <span class="o">[</span><span class="n">fintype</span> <span class="n">S</span><span class="o">]</span>
  <span class="o">[</span><span class="n">is_cyclotomic_extension</span> <span class="n">S</span> <span class="n">K</span> <span class="n">C</span><span class="o">]</span> <span class="o">:</span> <span class="n">is_field</span> <span class="n">C</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">is_integral.is_field_iff_is_field</span> <span class="o">(</span><span class="n">integral</span> <span class="n">S</span> <span class="n">K</span> <span class="n">C</span><span class="o">)</span> <span class="bp">$</span> <span class="o">(</span><span class="n">algebra_map</span> <span class="n">K</span> <span class="n">C</span><span class="o">)</span><span class="bp">.</span><span class="n">injective</span><span class="o">)</span><span class="bp">.</span><span class="n">mp</span> <span class="bp">$</span>
  <span class="n">field.to_is_field</span> <span class="n">K</span>
</code></pre></div>
<p>I'll PR a fix to dot notation on that lemma, and when I get some actual time I'll try extend the proof to non-finite <code>S</code> for fun</p>



<a name="285215258"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/285215258" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#285215258">(Jun 07 2022 at 07:58)</a>:</h4>
<p>I'll have a look at why your thing isn't building, Xavier! seems to just be a small namespace thing so apart from that it looks good</p>



<a name="285351305"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/285351305" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#285351305">(Jun 08 2022 at 06:49)</a>:</h4>
<p>Thanks for working on <a href="https://github.com/leanprover-community/mathlib/pull/14550">#14550</a>! Do you think it is ready for review?</p>



<a name="285370065"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/285370065" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#285370065">(Jun 08 2022 at 10:08)</a>:</h4>
<p>oh, it compiled! yes, it is :)</p>



<a name="285526683"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/285526683" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#285526683">(Jun 09 2022 at 12:35)</a>:</h4>
<p><span class="user-mention silent" data-user-id="488648">Xavier Roblot</span> <a href="#narrow/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project/near/285104139">said</a>:</p>
<blockquote>
<p>I have finished the proof of lemma 3.3: <code>mem_roots_of_unity_of_abs_eq_one</code>. I am going to take a few days to polish and clean the proof, but I should have something ready soon. What should I do when it's ready? should I just do a <code>git push origin</code> of my local branch?</p>
</blockquote>
<p>I've missed this message, great job!</p>



<a name="285564698"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/285564698" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Xavier Roblot <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#285564698">(Jun 09 2022 at 16:55)</a>:</h4>
<p>Thanks. But now I am hooked <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span> Is there any thing else I can work on?</p>



<a name="285595601"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/285595601" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#285595601">(Jun 09 2022 at 21:06)</a>:</h4>
<p>Well, following the philosophy of the project I think you should PR this!</p>



<a name="285595930"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/285595930" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#285595930">(Jun 09 2022 at 21:09)</a>:</h4>
<p>Do you have a roadmap for this project or some kind of plan? I'm hard at work with LTE now but when it's done I'd like to join the Fermat project too.</p>



<a name="285596006"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/285596006" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#285596006">(Jun 09 2022 at 21:10)</a>:</h4>
<p><a href="https://leanprover-community.github.io/flt-regular/">https://leanprover-community.github.io/flt-regular/</a></p>



<a name="285596118"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/285596118" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#285596118">(Jun 09 2022 at 21:11)</a>:</h4>
<p>We are almost ready to attack case I, right? I will check this tomorrow</p>



<a name="285639649"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/285639649" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#285639649">(Jun 10 2022 at 07:17)</a>:</h4>
<p>I think the next boss is  the <a href="https://leanprover-community.github.io/flt-regular/sect0003.html#lemma:unit_lemma">unit lemma</a>. We have a draft version <a href="https://github.com/leanprover-community/flt-regular/blob/349894f1f94337afb0ab68a53f2eec4bfeccc1c8/src/number_theory/cyclotomic/Unit_lemmas.lean#L591">here</a> but we should probably refactor some definition/results. I have time now to produce a reasonable statement.</p>



<a name="285642929"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/285642929" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Birkbeck <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#285642929">(Jun 10 2022 at 08:00)</a>:</h4>
<p>Yeah I agree. One think to fix is the Galois action on these things. I think at the moment it's probably a bit to hacky</p>



<a name="285643388"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/285643388" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#285643388">(Jun 10 2022 at 08:06)</a>:</h4>
<p>Do we have somewhere that the conjugate of a complex number of norm <code>1</code> is its inverse? It should be easy anyway</p>



<a name="285643621"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/285643621" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#285643621">(Jun 10 2022 at 08:09)</a>:</h4>
<p>it is essentially <a href="https://leanprover-community.github.io/mathlib_docs/find/complex.norm_sq_eq_conj_mul_self">docs#complex.norm_sq_eq_conj_mul_self</a></p>



<a name="285644057"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/285644057" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#285644057">(Jun 10 2022 at 08:14)</a>:</h4>
<p>So I propose to redefine <code>is_gal_conj_real</code> in terms of the Galois group, connect it with <code>ℝ</code> in some way, and prove the unit lemma using this new "is real" notion.</p>



<a name="285644156"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/285644156" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Birkbeck <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#285644156">(Jun 10 2022 at 08:15)</a>:</h4>
<p>Do we need to connect it to <code>ℝ</code>? If I remember correctly the proofs only ever use that things are fixed by complex conjugation.</p>



<a name="285644264"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/285644264" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#285644264">(Jun 10 2022 at 08:16)</a>:</h4>
<p>Probably not, but it seems a reasonable thing to have. And it should be a couple of lines</p>



<a name="285644335"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/285644335" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Birkbeck <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#285644335">(Jun 10 2022 at 08:18)</a>:</h4>
<p>Fair enough, I thought linking things to <code>ℝ</code> would make things more annoying because of extra <code>coe</code> maps. But maybe this is fine/you have something else in mind</p>



<a name="285644731"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/285644731" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#285644731">(Jun 10 2022 at 08:22)</a>:</h4>
<p>I am not saying we should use <code>ℝ</code> anywhere in the project. Just the fact that <code>is_gal_conj_real x</code> is equivalent to <code>x ∈ ℝ</code> (strictly speaking this doesn't make sense), but this is useful only to explain what <code>is_gal_conj_real x</code> means, not to actually work with it.</p>



<a name="285644786"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/285644786" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Birkbeck <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#285644786">(Jun 10 2022 at 08:22)</a>:</h4>
<p>Oh ok I get you! Yes then I agree</p>



<a name="285644799"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/285644799" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#285644799">(Jun 10 2022 at 08:22)</a>:</h4>
<p>I mean, if I see this in a PR I would immediately ask for it, even if mathematically it's not needed.</p>



<a name="285647852"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/285647852" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Xavier Roblot <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#285647852">(Jun 10 2022 at 08:55)</a>:</h4>
<p><span class="user-mention silent" data-user-id="130384">Riccardo Brasca</span> <a href="#narrow/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project/near/285595601">said</a>:</p>
<blockquote>
<p>Well, following the philosophy of the project I think you should PR this!</p>
</blockquote>
<p>Ok. Can you please give me access to push to mathlib? <br>
Also, there are some choices that need to be discussed. I'll create a new thread for that.</p>



<a name="285648603"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/285648603" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#285648603">(Jun 10 2022 at 09:03)</a>:</h4>
<p>You should have an invitation</p>



<a name="285648776"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/285648776" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Xavier Roblot <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#285648776">(Jun 10 2022 at 09:04)</a>:</h4>
<p>Got it. Thanks!</p>



<a name="285649031"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/285649031" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#285649031">(Jun 10 2022 at 09:07)</a>:</h4>
<p>Having a PR accepted can be a little frustrating, so don't be afraid of asking questions, and be patient <span aria-label="grinning" class="emoji emoji-1f600" role="img" title="grinning">:grinning:</span></p>



<a name="286182264"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/286182264" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#286182264">(Jun 15 2022 at 08:48)</a>:</h4>
<p>Thanks to <a href="https://github.com/leanprover-community/mathlib/pull/14550">#14550</a> <code>contains_two_primitive_roots</code> is now proved. I am not sure I have time today, but we need a small refactor of <code>number_theory/cyclotomic/Unit_lemmas</code>, replacing <code>KK</code> by a generic cyclotomic extension.</p>



<a name="286327637"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/286327637" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#286327637">(Jun 16 2022 at 09:28)</a>:</h4>
<p><span class="user-mention" data-user-id="488648">@Xavier Roblot</span> do you mind moving the material you PRed to the <code>ready_for_mathlib</code> folder? Just to keep track of what we are adding to mathlib. (And I will have a look at you PR today)</p>



<a name="286329017"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/286329017" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Xavier Roblot <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#286329017">(Jun 16 2022 at 09:43)</a>:</h4>
<p>I moved the things already PRed in a previous commit named <a href="https://github.com/leanprover-community/flt-regular/commit/cf3644d4be0e74fb1ecf36d41fc33a9527ad7d44">PR #14749</a>. I am still working on the other PRs.</p>
<p>Thanks for the taking the time to look at my PR!</p>



<a name="286332993"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/286332993" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#286332993">(Jun 16 2022 at 10:31)</a>:</h4>
<p>I've added a "From flt-regular" at the end of the description of the PR.</p>



<a name="286334938"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/286334938" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#286334938">(Jun 16 2022 at 10:54)</a>:</h4>
<p>I've also left a couple of comments. I think a lot of the results you prove in your specific case are already somewhere in mathlib (in greater generality). It can be tricky to find them, but don't hesitate to ask here!</p>



<a name="286766544"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/286766544" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#286766544">(Jun 20 2022 at 08:51)</a>:</h4>
<p>There is <code>unit_inv_conj_not_neg_zeta_runity</code> in <code>src/number_theory/cyclotomic/Unit_lemmas.lean</code> that is the last sorry in the file. If someone wants to try it please go ahead.</p>



<a name="286822499"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/286822499" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#286822499">(Jun 20 2022 at 17:32)</a>:</h4>
<p>is <a href="https://leanprover-community.github.io/mathlib_docs/find/smodeq">docs#smodeq</a> the correct way to talk about things being equal up to an ideal?</p>



<a name="286822523"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/286822523" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#286822523">(Jun 20 2022 at 17:32)</a>:</h4>
<p>I don't really want to develop new API unless necessary but I know some people don't like the ideal/submodule R R defeq too much</p>



<a name="286822605"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/286822605" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#286822605">(Jun 20 2022 at 17:33)</a>:</h4>
<p>Mathematically I would just work in the quotient, in mathlib I am not sure.</p>



<a name="286844505"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/286844505" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#286844505">(Jun 20 2022 at 22:34)</a>:</h4>
<p>We don't actually have that <a href="https://leanprover-community.github.io/mathlib_docs/find/is_primitive_root.power_basis">docs#is_primitive_root.power_basis</a> is a Z-basis of (OK/docs#cyclotomic_ring), right? I guess we should also make the equiv to <code>polynomial K / (X ^ k - 1)</code>, which I dont think we have</p>



<a name="286845864"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/286845864" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#286845864">(Jun 20 2022 at 22:55)</a>:</h4>
<p>I am afraid we don't have a lot about power basis over rings that are not fields. We know that that O_K is Z[zeta] (I am on mobile, sorry)</p>



<a name="286846106"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/286846106" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#286846106">(Jun 20 2022 at 23:00)</a>:</h4>
<p>don't worry! O_K is <code>Z[zeta]</code> how? I see <a href="https://leanprover-community.github.io/mathlib_docs/find/cyclotomic_ring">docs#cyclotomic_ring</a> but not the "classic" Z[zeta]</p>



<a name="286846251"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/286846251" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#286846251">(Jun 20 2022 at 23:01)</a>:</h4>
<p>ah, if we have it as an <code>adjoin_root *</code> then we get <a href="https://leanprover-community.github.io/mathlib_docs/find/adjoin_root.power_basis'">docs#adjoin_root.power_basis'</a>. I'll try see if this is workable</p>



<a name="286846362"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/286846362" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#286846362">(Jun 20 2022 at 23:03)</a>:</h4>
<p>I mean <a href="https://leanprover-community.github.io/mathlib_docs/find/is_cyclotomic_extension.rat.is_integral_closure_adjoing_singleton_of_prime_pow">docs#is_cyclotomic_extension.rat.is_integral_closure_adjoing_singleton_of_prime_pow</a> for prime powers. The general case requires more work.</p>



<a name="286846542"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/286846542" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#286846542">(Jun 20 2022 at 23:06)</a>:</h4>
<p>should be good enough for the last <code>sorry</code>, the prime assumption is missing right now but I don't think it's relevant to have it without, anyways</p>



<a name="286851452"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/286851452" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#286851452">(Jun 21 2022 at 00:36)</a>:</h4>
<p>I guess what we really need is something like</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">example</span> <span class="o">{</span><span class="n">K</span> <span class="n">L</span> <span class="n">M</span><span class="o">}</span> <span class="o">[</span><span class="n">comm_ring</span> <span class="n">K</span><span class="o">]</span> <span class="o">[</span><span class="n">comm_ring</span> <span class="n">L</span><span class="o">]</span> <span class="o">[</span><span class="n">comm_ring</span> <span class="n">M</span><span class="o">]</span> <span class="o">[</span><span class="n">algebra</span> <span class="n">K</span> <span class="n">L</span><span class="o">]</span> <span class="o">[</span><span class="n">algebra</span> <span class="n">K</span> <span class="n">M</span><span class="o">]</span>
  <span class="o">{</span><span class="n">S</span><span class="o">}</span> <span class="o">[</span><span class="n">is_cyclotomic_extension</span> <span class="n">S</span> <span class="n">K</span> <span class="n">L</span><span class="o">]</span> <span class="o">[</span><span class="n">is_cyclotomic_extension</span> <span class="n">S</span> <span class="n">K</span> <span class="n">M</span><span class="o">]</span> <span class="o">:</span> <span class="n">L</span> <span class="bp">≃ₐ</span><span class="o">[</span><span class="n">K</span><span class="o">]</span> <span class="n">M</span> <span class="o">:=</span>
</code></pre></div>
<p>(I mean, I think for what we need domains is fine, and obviously singleton extensions). I'm going to try work on it, but not too sure it'll work too well!</p>



<a name="286864276"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/286864276" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#286864276">(Jun 21 2022 at 04:29)</a>:</h4>
<p>The case of field follows from <a href="https://leanprover-community.github.io/mathlib_docs/find/is_cyclotomic_extension.splitting_field_X_pow_sub_one">docs#is_cyclotomic_extension.splitting_field_X_pow_sub_one</a></p>



<a name="286864282"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/286864282" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#286864282">(Jun 21 2022 at 04:29)</a>:</h4>
<p>I am not sure what to do with domains</p>



<a name="286913437"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/286913437" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#286913437">(Jun 21 2022 at 13:32)</a>:</h4>
<p>Are you working on <code>unit_inv_conj_not_neg_zeta_runity</code>?</p>



<a name="286915313"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/286915313" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#286915313">(Jun 21 2022 at 13:46)</a>:</h4>
<p>yeah, exactly the idea</p>



<a name="286915348"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/286915348" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#286915348">(Jun 21 2022 at 13:46)</a>:</h4>
<p>not super actively though, just bits and bobs when I can find some spare time</p>



<a name="286915725"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/286915725" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#286915725">(Jun 21 2022 at 13:49)</a>:</h4>
<p>Let me see if we can somehow produce a power basis over something it is not a field.</p>



<a name="286916519"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/286916519" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#286916519">(Jun 21 2022 at 13:55)</a>:</h4>
<p>that's the hope with the equiv + <code>adjoin_root</code>, but I think actually this is just loops around the most important idea of getting the basis over not-a-field; this isn't "free" though, wasn't this something like a lattice or such? it's been a while since i've seen the standard texts</p>



<a name="286917678"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/286917678" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#286917678">(Jun 21 2022 at 14:02)</a>:</h4>
<p>Yes, we cannot have this completely for free. For example if you take <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi><mo>=</mo><mi mathvariant="double-struck">Z</mi><mo stretchy="false">[</mo><msqrt><mrow><mo>−</mo><mn>3</mn></mrow></msqrt><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">R = \mathbb{Z}[\sqrt{-3}]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.1156em;vertical-align:-0.25em;"></span><span class="mord mathbb">Z</span><span class="mopen">[</span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8656em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="padding-left:0.833em;"><span class="mord">−</span><span class="mord">3</span></span></span><span style="top:-2.8256em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail" style="min-width:0.853em;height:1.08em;"><svg xmlns="http://www.w3.org/2000/svg" width='400em' height='1.08em' viewBox='0 0 400000 1080' preserveAspectRatio='xMinYMin slice'><path d='M95,702
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l0 -0
c5.3,-9.3,12,-14,20,-14
H400000v40H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M834 80h400000v40h-400000z'/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.1744em;"><span></span></span></span></span></span><span class="mclose">]</span></span></span></span> and <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi><mo>=</mo><mfrac><mrow><mn>1</mn><mo>+</mo><msqrt><mrow><mo>−</mo><mn>3</mn></mrow></msqrt></mrow><mn>2</mn></mfrac></mrow><annotation encoding="application/x-tex">x = \frac{1+\sqrt{-3}}{2}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.383em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.038em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.4282em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mbin mtight">+</span><span class="mord sqrt mtight"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8712em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mtight" style="padding-left:0.833em;"><span class="mord mtight">−</span><span class="mord mtight">3</span></span></span><span style="top:-2.8312em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail mtight" style="min-width:0.853em;height:1.08em;"><svg xmlns="http://www.w3.org/2000/svg" width='400em' height='1.08em' viewBox='0 0 400000 1080' preserveAspectRatio='xMinYMin slice'><path d='M95,702
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l0 -0
c5.3,-9.3,12,-14,20,-14
H400000v40H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M834 80h400000v40h-400000z'/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.1688em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span>, then <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi><mo stretchy="false">[</mo><mi>x</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">R[x]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mopen">[</span><span class="mord mathnormal">x</span><span class="mclose">]</span></span></span></span> (the extension inside <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>K</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">K(x)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">K</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span></span></span></span> where <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>K</mi><mo>=</mo><mrow><mi mathvariant="normal">F</mi><mi mathvariant="normal">r</mi><mi mathvariant="normal">a</mi><mi mathvariant="normal">c</mi></mrow><mo stretchy="false">(</mo><mi>R</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">K = \mathrm{Frac}(R)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">K</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathrm">Frac</span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mclose">)</span></span></span></span>) is not free over <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi></mrow><annotation encoding="application/x-tex">R</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span></span></span></span>, even if <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span> has minimal polynomial <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>x</mi><mn>2</mn></msup><mo>−</mo><mi>x</mi><mo>+</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">x^2-x+1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8974em;vertical-align:-0.0833em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span>.</p>



<a name="286917701"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/286917701" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#286917701">(Jun 21 2022 at 14:02)</a>:</h4>
<p>The point is that <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi></mrow><annotation encoding="application/x-tex">R</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span></span></span></span> is not integrally closed.</p>



<a name="286921361"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/286921361" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#286921361">(Jun 21 2022 at 14:26)</a>:</h4>
<p>OK, I have a strategy. Let <code>R</code> be an integrally closed domain (for the mathlib proof we will need more, see below) with field of fraction <code>K</code>. Let <code>L</code> be an extension of <code>K</code> (probably very few assumption on  <code>L</code> are needed, not even a field I think) and let <code>x : L</code> integral over <code>R</code>, and let <code>f := minpoly R x</code>. We construct an isomorphism <code>adjoin_root f ≃ₐ[R] adjoin R x</code> as follows:</p>
<ul>
<li>the morphism is given by <a href="https://leanprover-community.github.io/mathlib_docs/find/adjoin_root.lift_hom">docs#adjoin_root.lift_hom</a>;</li>
<li><code>x</code> is in the image, so it is surjective (I didn't check the details,  but everything is surely already in mathlib);</li>
<li>injectivity is the interesting part. Let <code>P1 : adjoin_root f</code> be in the kernel. This gives via <a href="https://leanprover-community.github.io/mathlib_docs/find/adjoin_root.lift_hom_mk">docs#adjoin_root.lift_hom_mk</a> a polynomial <code>P</code> that has <code>x</code> as root. Now, <em><code>f</code> divides <code>P</code></em>! This is in general false without some assumption on <code>R</code>, but true if <code>R</code> is integrally closed. In mathlib the best result we have is <a href="https://leanprover-community.github.io/mathlib_docs/find/minpoly.gcd_domain_dvd">docs#minpoly.gcd_domain_dvd</a>, that is good enough for <code>R = ℤ</code> (the assumption that <code>P</code> is primitive is harmless). Since <code>f</code> divides <code>P</code>, by definition <code>P1 = 0</code> and we're done.</li>
</ul>



<a name="286921516"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/286921516" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#286921516">(Jun 21 2022 at 14:27)</a>:</h4>
<p>Now one can use <a href="https://leanprover-community.github.io/mathlib_docs/find/adjoin_root.power_basis'">docs#adjoin_root.power_basis'</a> to get the power basis of <code>adjoin R x</code>.</p>



<a name="286921830"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/286921830" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#286921830">(Jun 21 2022 at 14:29)</a>:</h4>
<p>I think this is a really nice result we absolutely want in mathlib (maybe with also a version for fields, even if this one can be obtained using an easier strategy).</p>



<a name="286932668"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/286932668" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#286932668">(Jun 21 2022 at 15:39)</a>:</h4>
<p>the field one already exists, <a href="https://leanprover-community.github.io/mathlib_docs/find/algebra.adjoin.power_basis">docs#algebra.adjoin.power_basis</a></p>



<a name="286933750"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/286933750" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#286933750">(Jun 21 2022 at 15:45)</a>:</h4>
<p>I mean the iso, but yes, it can be produced using this kind of results.</p>



<a name="286933778"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/286933778" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#286933778">(Jun 21 2022 at 15:45)</a>:</h4>
<p>ah, right, I see</p>



<a name="286948287"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/286948287" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#286948287">(Jun 21 2022 at 17:29)</a>:</h4>
<p>found this whilst looking for the surjectiveness: <a href="https://leanprover-community.github.io/mathlib_docs/find/alg_equiv.adjoin_singleton_equiv_adjoin_root_minpoly">docs#alg_equiv.adjoin_singleton_equiv_adjoin_root_minpoly</a>. I'm not so sure the surjectiveness is in, but it's not too bad so I'll try make it.</p>



<a name="286982024"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/286982024" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#286982024">(Jun 21 2022 at 22:26)</a>:</h4>
<p>Yep the point is exactly to generalize this from <code>field F</code> to <code>gcd_monoid F</code></p>



<a name="286985617"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/286985617" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#286985617">(Jun 21 2022 at 23:12)</a>:</h4>
<p>this all comes back to <a href="https://github.com/leanprover-community/mathlib/pull/11523">#11523</a>, I guess this is what you were thinking about back then!</p>



<a name="287024936"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/287024936" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#287024936">(Jun 22 2022 at 09:07)</a>:</h4>
<p>Note that we don't need <a href="https://github.com/leanprover-community/mathlib/pull/11523">#11523</a> in <code>flt-regular</code>, we want to apply this in the case <code>R = ℤ</code>, so the current <a href="https://leanprover-community.github.io/mathlib_docs/find/minpoly.gcd_domain_dvd">docs#minpoly.gcd_domain_dvd</a> is enough. It should be really easy, I can write down a proof today.</p>



<a name="287031476"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/287031476" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#287031476">(Jun 22 2022 at 10:05)</a>:</h4>
<p>I pushed what I had to a file called <code>z_basis.lean</code>. I'm not sure how much time I'll have further today, but I left some comments about what are the "obvious" sticking points; hopefully I get to sit down and work through them more methodically later.</p>



<a name="287046678"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/287046678" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#287046678">(Jun 22 2022 at 12:36)</a>:</h4>
<p>I've added a new file <code>src/ready_for_mathlib/adjoin_root.lean</code> with</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">def</span> <span class="n">minpoly.to_adjoin_equiv</span> <span class="o">(</span><span class="n">hx</span> <span class="o">:</span> <span class="n">is_integral</span> <span class="n">R</span> <span class="n">x</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">adjoin_root</span> <span class="o">(</span><span class="n">minpoly</span> <span class="n">R</span> <span class="n">x</span><span class="o">)</span> <span class="bp">≃ₐ</span><span class="o">[</span><span class="n">R</span><span class="o">]</span> <span class="n">adjoin</span> <span class="n">R</span> <span class="o">({</span><span class="n">x</span><span class="o">}</span> <span class="o">:</span> <span class="n">set</span> <span class="n">A</span><span class="o">)</span>
</code></pre></div>



<a name="287047094"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/287047094" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#287047094">(Jun 22 2022 at 12:39)</a>:</h4>
<p>It is already sorry free. Now the idea is to transport  <a href="https://leanprover-community.github.io/mathlib_docs/find/adjoin_root.power_basis'">docs#adjoin_root.power_basis'</a> via this equiv, to get a power basis <code>pb</code> of  <code>adjoin R ({x} : set A)</code> such that <code>pb.gen = x</code>.</p>



<a name="287049348"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/287049348" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#287049348">(Jun 22 2022 at 12:58)</a>:</h4>
<p>This is also done.</p>



<a name="287058817"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/287058817" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#287058817">(Jun 22 2022 at 14:08)</a>:</h4>
<p><span class="user-mention" data-user-id="284160">@Eric Rodriguez</span> do you agree that <a href="https://leanprover-community.github.io/mathlib_docs/find/cyclotomic_ring.eq_adjoin_primitive_root">docs#cyclotomic_ring.eq_adjoin_primitive_root</a> is evil? It is stated as an equality of types, but I think it should an iso of algebras, or whatever.</p>



<a name="287059037"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/287059037" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#287059037">(Jun 22 2022 at 14:09)</a>:</h4>
<p>Yes that's definitely evil! It will be hard to use</p>



<a name="287066688"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/287066688" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#287066688">(Jun 22 2022 at 15:02)</a>:</h4>
<p>yeah, do we have eq_to_equiv or sth somewhere?</p>



<a name="287067668"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/287067668" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Junyan Xu <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#287067668">(Jun 22 2022 at 15:08)</a>:</h4>
<p>You should copy the subalgebra if you want to transfer results between LHS/RHS, right? Subalgebra equality is unproblematic. (Maybe no need to copy, just use the subalgebra equality.)</p>



<a name="287067890"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/287067890" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#287067890">(Jun 22 2022 at 15:10)</a>:</h4>
<p><code>cyclotomic_ring</code> is the subalgebra with everything automatically coerced: <code>def cyclotomic_ring : Type w := adjoin A { b : (cyclotomic_field n K) | b ^ (n : ℕ) = 1 }</code></p>



<a name="287067903"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/287067903" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#287067903">(Jun 22 2022 at 15:10)</a>:</h4>
<p>it may be worth undoing that</p>



<a name="287068416"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/287068416" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#287068416">(Jun 22 2022 at 15:14)</a>:</h4>
<p>I am not sure I follow your strategy. I just added to your file the following</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">variables</span> <span class="o">{</span><span class="n">p</span> <span class="o">:</span> <span class="n">ℕ</span><span class="bp">+</span><span class="o">}</span> <span class="o">{</span><span class="n">k</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">}</span> <span class="o">{</span><span class="n">K</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">field</span> <span class="n">K</span><span class="o">]</span> <span class="o">[</span><span class="n">char_zero</span> <span class="n">K</span><span class="o">]</span> <span class="o">{</span><span class="n">ζ</span> <span class="o">:</span> <span class="n">K</span><span class="o">}</span> <span class="o">[</span><span class="n">fact</span> <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span><span class="bp">.</span><span class="n">prime</span><span class="o">]</span>

<span class="kd">noncomputable</span>
<span class="kd">def</span> <span class="n">power_basis_int</span> <span class="o">[</span><span class="n">hcycl</span> <span class="o">:</span> <span class="n">is_cyclotomic_extension</span> <span class="o">{</span><span class="n">p</span> <span class="bp">^</span> <span class="n">k</span><span class="o">}</span> <span class="n">ℚ</span> <span class="n">K</span><span class="o">]</span>
  <span class="o">(</span><span class="n">hζ</span> <span class="o">:</span> <span class="n">is_primitive_root</span> <span class="n">ζ</span> <span class="bp">↑</span><span class="o">(</span><span class="n">p</span> <span class="bp">^</span> <span class="n">k</span><span class="o">))</span> <span class="o">:</span> <span class="n">power_basis</span> <span class="n">ℤ</span> <span class="o">(</span><span class="bp">𝓞</span> <span class="n">K</span><span class="o">)</span> <span class="o">:=</span>
<span class="k">let</span> <span class="n">_</span> <span class="o">:=</span> <span class="n">is_integral_closure_adjoing_singleton_of_prime_pow</span> <span class="n">hζ</span> <span class="k">in</span> <span class="kd">by</span> <span class="n">exactI</span>
  <span class="o">(</span><span class="n">adjoin.power_basis'</span> <span class="n">ℚ</span> <span class="o">(</span><span class="n">hζ.is_integral</span> <span class="o">(</span><span class="n">p</span> <span class="bp">^</span> <span class="n">k</span><span class="o">)</span><span class="bp">.</span><span class="n">pos</span><span class="o">))</span><span class="bp">.</span><span class="n">map</span>
  <span class="o">(</span><span class="n">is_integral_closure.equiv</span> <span class="n">ℤ</span> <span class="o">(</span><span class="n">adjoin</span> <span class="n">ℤ</span> <span class="o">({</span><span class="n">ζ</span><span class="o">}</span> <span class="o">:</span> <span class="n">set</span> <span class="n">K</span><span class="o">))</span> <span class="n">K</span> <span class="o">(</span><span class="bp">𝓞</span> <span class="n">K</span><span class="o">))</span>

<span class="kd">@[simp]</span> <span class="kd">lemma</span> <span class="n">power_basis_int_gen</span> <span class="o">[</span><span class="n">hcycl</span> <span class="o">:</span> <span class="n">is_cyclotomic_extension</span> <span class="o">{</span><span class="n">p</span> <span class="bp">^</span> <span class="n">k</span><span class="o">}</span> <span class="n">ℚ</span> <span class="n">K</span><span class="o">]</span>
  <span class="o">(</span><span class="n">hζ</span> <span class="o">:</span> <span class="n">is_primitive_root</span> <span class="n">ζ</span> <span class="bp">↑</span><span class="o">(</span><span class="n">p</span> <span class="bp">^</span> <span class="n">k</span><span class="o">))</span> <span class="o">:</span> <span class="o">(</span><span class="n">power_basis_int</span> <span class="n">hζ</span><span class="o">)</span><span class="bp">.</span><span class="n">gen</span> <span class="bp">=</span> <span class="o">⟨</span><span class="n">ζ</span><span class="o">,</span> <span class="n">hζ.is_integral</span> <span class="o">(</span><span class="n">p</span> <span class="bp">^</span> <span class="n">k</span><span class="o">)</span><span class="bp">.</span><span class="n">pos</span><span class="o">⟩</span> <span class="o">:=</span>
<span class="gr">sorry</span>
</code></pre></div>



<a name="287068536"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/287068536" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#287068536">(Jun 22 2022 at 15:15)</a>:</h4>
<p>This is what we want, right? I don't think there is a need to speak about <code>cyclotomic_ring</code>. The real object is <code>𝓞 K</code> (that in this case is the same as <code>cyclotomic_ring</code>, but we can forget about it)</p>



<a name="287068588"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/287068588" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#287068588">(Jun 22 2022 at 15:15)</a>:</h4>
<p>I'm suggesting we change <code>cyclotomic_ring</code> to <code>subalgebra A (cyclotomic_field n K)</code>, and whenever it needs to be coerced then so be it</p>



<a name="287068599"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/287068599" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#287068599">(Jun 22 2022 at 15:15)</a>:</h4>
<p>but yes, I think this is what we want!</p>



<a name="287070217"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/287070217" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#287070217">(Jun 22 2022 at 15:27)</a>:</h4>
<p>I've proved <code>power_basis_int_gen</code>, so we now have a <code>ℤ</code>-power basis of the ring of integers of a cyclotomic extensions of <code>ℚ</code> whose generator is any given primitive root of unity (in the <code>p^k</code>-case).</p>



<a name="287070657"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/287070657" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#287070657">(Jun 22 2022 at 15:30)</a>:</h4>
<p>This completely characterize the ring structure of <code>𝓞 K</code> and since the API for <code>power_basis</code> is pretty complete, and we know everything about the minimal polynomial of the generator, nothing else should be needed to study <code>𝓞 K</code>.</p>



<a name="287071293"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/287071293" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#287071293">(Jun 22 2022 at 15:34)</a>:</h4>
<p>I suggest to avoid <code>cyclotomic_ring</code>as much as possible, I am wondering if we shouldn't have defined it, but anyway</p>



<a name="287090320"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/287090320" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#287090320">(Jun 22 2022 at 17:57)</a>:</h4>
<p>I have pushed some work to <code>unit_inv_conj_not_neg_zeta_runity</code> (and, sadly, a <code>power_basis_int'</code> because <code>x^1</code> is not defeq to <code>x</code> :[) some of it is an easy <code>sorry</code> (<code>conj ζⁿ = ζ⁻ⁿ</code> modulo coercions and whether we want to go into <code>zpow</code> or not) and the rest is the deciding how we're dealing with equality mod <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mn>1</mn><mo>−</mo><mi>ζ</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(1 - \zeta)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.07378em;">ζ</span><span class="mclose">)</span></span></span></span> - this could be trivial or fairly hard, I'm not sure. We'll also end up needing that <code>ζⁿ ∈ (1 - ζ)</code>, but I think we had that somewhere!</p>



<a name="287091293"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/287091293" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#287091293">(Jun 22 2022 at 18:04)</a>:</h4>
<p>The need for <code>power_basis_int'</code> makes me a little sad, but that's like I guess.</p>



<a name="287094997"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/287094997" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#287094997">(Jun 22 2022 at 18:33)</a>:</h4>
<p>I've never really thought about the math proof of <code>unit_inv_conj_not_neg_zeta_runity</code>. Which strategy are you following?</p>



<a name="287095184"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/287095184" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Birkbeck <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#287095184">(Jun 22 2022 at 18:35)</a>:</h4>
<p>There is a proof in Washingtons book (if I remember correctly)</p>



<a name="287095370"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/287095370" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#287095370">(Jun 22 2022 at 18:36)</a>:</h4>
<p>I will have a look, but it is not trivial, right?</p>



<a name="287095536"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/287095536" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Birkbeck <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#287095536">(Jun 22 2022 at 18:37)</a>:</h4>
<p>I thought you needed to use the basis for the ring of integers, but I'm not 100% sure. I'm on mobile right now, but I can check when I get home</p>



<a name="287096053"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/287096053" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#287096053">(Jun 22 2022 at 18:41)</a>:</h4>
<p>Yes, I'm following that proof. The idea is that you have a unit u and that is equal to sum a_iz^i, módulo the ideal it's sum a_i. The conjugate has a similar representation, and so 2u is in the ideal; but it's prime, and 2 is not in (1-z) and clearly neither is u.</p>



<a name="287096088"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/287096088" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#287096088">(Jun 22 2022 at 18:41)</a>:</h4>
<p>Ah yes, I've found it. OK, it's not trivial but nothing specially difficult</p>



<a name="287096475"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/287096475" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#287096475">(Jun 22 2022 at 18:45)</a>:</h4>
<p>You may want to modify what I did today to obtain a power basis whose generator is <code>ζ - 1</code>.</p>



<a name="287096556"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/287096556" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#287096556">(Jun 22 2022 at 18:45)</a>:</h4>
<p>Hmm, no, that's OK.</p>



<a name="287097319"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/287097319" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#287097319">(Jun 22 2022 at 18:52)</a>:</h4>
<p>In any case we need that <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mi>ζ</mi><mo>−</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(ζ - 1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.07378em;">ζ</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">)</span></span></span></span> is a prime ideal.</p>



<a name="287099081"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/287099081" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#287099081">(Jun 22 2022 at 19:06)</a>:</h4>
<p>This follows from the fact that the norm is <code>p</code>, but we need to know that an algebraic integer with norm <code>1</code> is a unit.</p>



<a name="287099116"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/287099116" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#287099116">(Jun 22 2022 at 19:06)</a>:</h4>
<p>Which in turn follows from the fact that the Galois conjugate of an algebraic integer are algebraic integers.</p>



<a name="287125769"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/287125769" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#287125769">(Jun 22 2022 at 23:15)</a>:</h4>
<p>some more boring stuff been done, mostly on fleshing out <code>galois_action_on_cyclo</code> so it's not littered with zeros. I like my proof for <code>gal_conj_idempotent</code>:)</p>



<a name="287125822"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/287125822" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#287125822">(Jun 22 2022 at 23:16)</a>:</h4>
<p>on a serious note, I'm not sure what to do about <code>embedding_conj</code>: can we get things as ℚ-alg homs for free somehow?</p>



<a name="287125831"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/287125831" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#287125831">(Jun 22 2022 at 23:16)</a>:</h4>
<p>then we can use <code>power_basis.alg_hom_ext</code> to make things nice</p>



<a name="287126598"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/287126598" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#287126598">(Jun 22 2022 at 23:27)</a>:</h4>
<p>aha, I found <a href="https://leanprover-community.github.io/mathlib_docs/find/ring_hom.to_rat_alg_hom">docs#ring_hom.to_rat_alg_hom</a>, but both <code>  have := φ.to_rat_alg_hom</code> and <code>have := (conj : ℂ →+* ℂ).to_rat_alg_hom</code> get into TC loops :/ is this to do with qsmul and such?</p>



<a name="287131980"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/287131980" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#287131980">(Jun 23 2022 at 00:58)</a>:</h4>
<p>ok, I figured out a workaround anyways. something is weird with the instance caches in that file.</p>



<a name="287133037"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/287133037" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#287133037">(Jun 23 2022 at 01:19)</a>:</h4>
<p><code>galois_action_on_cyclo</code> is now sorry-free, and <code>Unit_lemmas</code> is only waiting on finishing off this step.</p>



<a name="287159133"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/287159133" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#287159133">(Jun 23 2022 at 08:30)</a>:</h4>
<p>Note that in <a href="#narrow/stream/113488-general/topic/Embeddings.20of.20a.20.20number.20field">https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Embeddings.20of.20a.20.20number.20field</a> we decided to use ring hom for number fields, rather than <code>Q</code>-alg hom, so we should follow that decision.</p>



<a name="287162267"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/287162267" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#287162267">(Jun 23 2022 at 09:05)</a>:</h4>
<p>Yeah, it was just to use some results temporarily. See the top of galois_action_on_cyclo</p>



<a name="287179900"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/287179900" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#287179900">(Jun 23 2022 at 12:07)</a>:</h4>
<p><span class="user-mention silent" data-user-id="130384">Riccardo Brasca</span> <a href="#narrow/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project/near/287099116">said</a>:</p>
<blockquote>
<p>Which in turn follows from the fact that the Galois conjugate of an algebraic integer are algebraic integers.</p>
</blockquote>
<p>where do you want to put this? may have some time to work on this all today</p>



<a name="287180379"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/287180379" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#287180379">(Jun 23 2022 at 12:12)</a>:</h4>
<p>In the project you can just create a new file, who cares. In mathlib it can go in the same file where <code>is_integral</code> is defined, it doesn't require any Galois theory. If <code>σ : B →ₐ[A] B</code>, where you have an algebra tower <code>R/A/B</code> and <code>x : B</code> is integral over <code>R</code>, then <code>σ x</code> is integral over <code>R</code>. It should be immediate, the minimal polynomial is the same.</p>



<a name="287183487"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/287183487" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#287183487">(Jun 23 2022 at 12:42)</a>:</h4>
<p>Then I think the morally correct thing to do is define a function <code>norm' : 𝓞 K →* 𝓞 K</code> (it follows immediately from <a href="https://leanprover-community.github.io/mathlib_docs/find/algebra.is_integral_norm">docs#algebra.is_integral_norm</a>, but it is annoying to write <code>obtain ...</code> all the time) and prove that <code>x ∈ (𝓞 K)ˣ</code> iff <code>norm' x ∈ (𝓞 K)ˣ</code>.</p>



<a name="287212116"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/287212116" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#287212116">(Jun 23 2022 at 16:06)</a>:</h4>
<p>do we have algebra.norm in terms of the galois group or do I have to write it? there's <a href="https://leanprover-community.github.io/mathlib_docs/find/algebra.norm_eq_prod_embeddings">docs#algebra.norm_eq_prod_embeddings</a> but that doesn't work because that all ends up in a larger extension</p>



<a name="287214835"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/287214835" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#287214835">(Jun 23 2022 at 16:25)</a>:</h4>
<p>I just delegated a PR that does that for the trace</p>



<a name="287214859"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/287214859" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#287214859">(Jun 23 2022 at 16:25)</a>:</h4>
<p>It should be easy to adapt to the norm</p>



<a name="287214910"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/287214910" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#287214910">(Jun 23 2022 at 16:26)</a>:</h4>
<p>I am on mobile, but check the running PR</p>



<a name="287215518"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/287215518" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#287215518">(Jun 23 2022 at 16:30)</a>:</h4>
<p>Or use the product of the roots of the minimal polynomial</p>



<a name="287215519"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/287215519" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#287215519">(Jun 23 2022 at 16:30)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib/pull/14523">#14523</a></p>



<a name="287215714"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/287215714" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#287215714">(Jun 23 2022 at 16:31)</a>:</h4>
<p>thanks, I'll have a look at this</p>



<a name="287216064"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/287216064" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#287216064">(Jun 23 2022 at 16:33)</a>:</h4>
<p>I've asked to do it for the norm. It should be really the same proof</p>



<a name="287309485"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/287309485" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Xavier Roblot <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#287309485">(Jun 24 2022 at 09:35)</a>:</h4>
<p>So there is at the moment an ongoing discussion on the best way to prove the formula for the coefficients of a polynomial in terms of its roots from the results in <code>ring_theory.polynomia.vieta</code> (see <a href="https://github.com/leanprover-community/mathlib/pull/14908">#1408</a>). Until it is resolved, my PR of <code>mem_roots_of_unity_of_abs_eq_one</code> is on hold. <br>
So is there anything else I can work on in the meantime?  I see you guys have been quite busy lately and made some significant progress.</p>



<a name="287313314"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/287313314" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#287313314">(Jun 24 2022 at 10:20)</a>:</h4>
<p>You can coordinate with <span class="user-mention" data-user-id="284160">@Eric Rodriguez</span> to finish the proof of <code>unit_inv_conj_not_neg_zeta_runity</code>.  We need that <code>ζ - 1</code> is prime and it does not divide <code>2</code> (both are computation with the norm, we already have <a href="https://leanprover-community.github.io/mathlib_docs/find/is_primitive_root.sub_one_norm_prime_ne_two">docs#is_primitive_root.sub_one_norm_prime_ne_two</a> but we are mising some glue to obtain the two results).</p>
<p>Looking at the blueprint it seems that the only other missing result in sections 1-2-3 is <a href="https://leanprover-community.github.io/flt-regular/sect0003.html#lemma:fac_of_p_in_p_th_root">Lemma 3.8</a>, I think we don't even have the statement.</p>



<a name="287313566"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/287313566" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#287313566">(Jun 24 2022 at 10:23)</a>:</h4>
<p>Note that <a href="https://github.com/leanprover-community/mathlib/pull/14523">#14523</a> will be in mathlib in a few hours, with the result about the norm.</p>



<a name="287319236"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/287319236" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#287319236">(Jun 24 2022 at 11:30)</a>:</h4>
<p>Thanks <span class="user-mention" data-user-id="453640">@Iván Sadofschi Costa</span>! I am working on showing (1 - z) is prime, im away from a computer right now but I should push a proof for that by ~ <time datetime="2022-06-24T15:00:00Z">2022-06-24T16:00:00+01:00</time></p>



<a name="287319271"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/287319271" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#287319271">(Jun 24 2022 at 11:30)</a>:</h4>
<p>So Xavier, feel free to work on the other stuff (for now, just put it as a sorry that the ideal is prime)</p>



<a name="287362466"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/287362466" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#287362466">(Jun 24 2022 at 17:46)</a>:</h4>
<p>i've finally pushed the unit stuff, sorry!</p>



<a name="287362508"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/287362508" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#287362508">(Jun 24 2022 at 17:46)</a>:</h4>
<p><span class="user-mention silent" data-user-id="130384">Riccardo Brasca</span> <a href="#narrow/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project/near/287099081">said</a>:</p>
<blockquote>
<p>This follows from the fact that the norm is <code>p</code>, but we need to know that an algebraic integer with norm <code>1</code> is a unit.</p>
</blockquote>
<p>how does this proof work? I had to return all my paper books now :(</p>



<a name="287364499"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/287364499" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#287364499">(Jun 24 2022 at 18:03)</a>:</h4>
<p>The fact that <code>I = (z-1)</code> is prime? The math proof is that the norm (of the ideal) is <code>p</code>, so if <code>I = AB</code> then the norm of, say, <code>A</code> must be 1<code>. Now I have to think how to prove that this implies that </code>A` is trivial.  The point is that ideals are not necessarily principal</p>



<a name="287364632"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/287364632" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#287364632">(Jun 24 2022 at 18:04)</a>:</h4>
<p>It can be possible to avoid speaking of ideals but I have to think about it</p>



<a name="287366897"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/287366897" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#287366897">(Jun 24 2022 at 18:24)</a>:</h4>
<p>Mmm, do we want to develop the theory of the norm of an ideal? Maybe we want</p>



<a name="287371813"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/287371813" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#287371813">(Jun 24 2022 at 19:05)</a>:</h4>
<p>z-1 is prime because if you quotient out by it then you get Z/pZ</p>



<a name="287372025"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/287372025" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#287372025">(Jun 24 2022 at 19:06)</a>:</h4>
<p>Do you have an elementary proof?</p>



<a name="287372147"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/287372147" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#287372147">(Jun 24 2022 at 19:07)</a>:</h4>
<p>Ok, I see</p>



<a name="287372198"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/287372198" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#287372198">(Jun 24 2022 at 19:08)</a>:</h4>
<p>The ideal z-1 can't be trivial because the norm of z-1 is p. In particular p is in the ideal (z-1). Now I claim that every element of Z[z] is of the form a+b(z-1) with a in {0,1,2,..,.p-1}, and the proof is...maybe you see :-)</p>



<a name="287372224"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/287372224" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#287372224">(Jun 24 2022 at 19:08)</a>:</h4>
<p>z^n maps to 1 and p maps to 0 and it's game over.</p>



<a name="287372247"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/287372247" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#287372247">(Jun 24 2022 at 19:08)</a>:</h4>
<p>Yes yes that's what I wanted to say but you're too fast</p>



<a name="287372363"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/287372363" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#287372363">(Jun 24 2022 at 19:09)</a>:</h4>
<p>Still might be a slight challenge to formalise and to be honest I think your ideal argument is better because it's more conceptual so probably will have other uses.</p>



<a name="287372527"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/287372527" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#287372527">(Jun 24 2022 at 19:10)</a>:</h4>
<p>If your definition of norm(I) is "size of R/I" then I think norm(I)=1 implies I=1, but maybe life is not so easy?</p>



<a name="287372621"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/287372621" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#287372621">(Jun 24 2022 at 19:11)</a>:</h4>
<p>I should say that once LTE is out of the way I am looking forward to joining this project. But of course you should all stop working on this project and come and help us finish LTE, all we have left is about 60 statements about abelian categories and they're quite good fun to prove :-)</p>



<a name="287375434"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/287375434" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#287375434">(Jun 24 2022 at 19:36)</a>:</h4>
<p>We have only the norm of an element, with all the basic property</p>



<a name="287375458"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/287375458" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#287375458">(Jun 24 2022 at 19:36)</a>:</h4>
<p>And we know that the norm of <code>1-z</code> is <code>p</code></p>



<a name="287375464"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/287375464" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#287375464">(Jun 24 2022 at 19:36)</a>:</h4>
<p>So <code>p</code> is in the ideal</p>



<a name="287375672"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/287375672" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#287375672">(Jun 24 2022 at 19:39)</a>:</h4>
<p>I will try to formalize this tomorrow</p>



<a name="287380271"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/287380271" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#287380271">(Jun 24 2022 at 20:20)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110038">Kevin Buzzard</span> <a href="#narrow/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project/near/287372621">said</a>:</p>
<blockquote>
<p>I should say that once LTE is out of the way I am looking forward to joining this project. But of course you should all stop working on this project and come and help us finish LTE, all we have left is about 60 statements about abelian categories and they're quite good fun to prove :-)</p>
</blockquote>
<p>I tried doing some of the self contained ones once and noped out very hard :b</p>



<a name="287380325"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/287380325" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#287380325">(Jun 24 2022 at 20:21)</a>:</h4>
<p>I think doing the norm of an ideal is a good idea, I thought we had that but maybe we just have that it's finite because of Anne&amp;co's work</p>



<a name="287430891"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/287430891" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#287430891">(Jun 25 2022 at 11:50)</a>:</h4>
<p>I am giving a try to prove that <code>1-z</code> is prime. It's maybe possible to do it rather directly, so let me see.</p>



<a name="287434989"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/287434989" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#287434989">(Jun 25 2022 at 13:25)</a>:</h4>
<p>Norm prime implies prime of course</p>



<a name="287435609"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/287435609" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#287435609">(Jun 25 2022 at 13:40)</a>:</h4>
<p>Yes, but that requires the norm of an ideal, that we don't have, right? If the norm of an element is prime that the element is irreducible, this is very easy, but primality seems to require a little bit of work.</p>



<a name="287436140"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/287436140" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#287436140">(Jun 25 2022 at 13:53)</a>:</h4>
<p>We need (norm x) = ideal.norm (x)</p>



<a name="287436728"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/287436728" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#287436728">(Jun 25 2022 at 14:07)</a>:</h4>
<p>What I mean is that there is no <code>ideal.norm</code> at all at the moment, unless I missed it.</p>



<a name="287436794"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/287436794" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Birkbeck <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#287436794">(Jun 25 2022 at 14:08)</a>:</h4>
<p>Is there not? If that's the case maybe I'll try and add that next. It feels like something we should have</p>



<a name="287436807"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/287436807" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#287436807">(Jun 25 2022 at 14:09)</a>:</h4>
<p>Can you reuse <a href="https://leanprover-community.github.io/mathlib_docs/find/has_norm">docs#has_norm</a>?</p>



<a name="287436825"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/287436825" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Birkbeck <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#287436825">(Jun 25 2022 at 14:09)</a>:</h4>
<p>Or at least start on it</p>



<a name="287436902"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/287436902" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#287436902">(Jun 25 2022 at 14:11)</a>:</h4>
<p><span class="user-mention" data-user-id="387244">@Yaël Dillies</span> It's called norm but it's a rather different concept, for example it takes value in <code>Z</code>, or even better in the set of ideals.</p>



<a name="287436911"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/287436911" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#287436911">(Jun 25 2022 at 14:11)</a>:</h4>
<p>it's related to <a href="https://leanprover-community.github.io/mathlib_docs/find/algebra.norm">docs#algebra.norm</a></p>



<a name="287439078"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/287439078" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#287439078">(Jun 25 2022 at 14:51)</a>:</h4>
<p>How can the norm take value in the set of ideals? Also I thought it was N-valued (the defn I know is |Z/I|)</p>



<a name="287439654"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/287439654" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#287439654">(Jun 25 2022 at 15:03)</a>:</h4>
<p>There's a "relative" norm on elements N: A -&gt; R for any finite locally free R-algebra A I guess. If R is Noetherian then I guess this is the same as finite flat R-algebra. But for ideal norms I'm a bit more hazy about what's going on.</p>



<a name="287439705"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/287439705" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#287439705">(Jun 25 2022 at 15:04)</a>:</h4>
<p>The example I've taught is this absolute norm which Eric is talking about but this is specific to orders in integers of number fields or function fields</p>



<a name="287447166"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/287447166" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#287447166">(Jun 25 2022 at 17:50)</a>:</h4>
<p>I think I have a Lean proof that <code>1-z</code> is prime, avoiding the ideal norm. I will finish it after dinner</p>



<a name="287448780"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/287448780" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#287448780">(Jun 25 2022 at 18:29)</a>:</h4>
<p>I have some work on a definition of the ideal norm, the absolute one at least. So if anyone else wants this we should coordinate a little!</p>



<a name="287450317"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/287450317" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#287450317">(Jun 25 2022 at 19:07)</a>:</h4>
<p>I've proved <a href="https://github.com/leanprover-community/flt-regular/blob/fa0c5bd666db87aa0ebdd9f8bb0b3ab24e9f1bec/src/norm_prime.lean#L81">here</a> that if the norm (<span class="user-mention" data-user-id="284160">@Eric Rodriguez</span> version taking values in the ring of integers) of the generator of an intgral power basis <code>pb</code> of a Galois extension of number fields is prime, then <code>pb.gen</code> is prime.</p>



<a name="287450378"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/287450378" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#287450378">(Jun 25 2022 at 19:08)</a>:</h4>
<p>We need a little bit of glue to prove that <code>z-1</code> is prime, since we have the integral power basis given by <code>z</code>, not by <code>z-1</code>. Constructing this one only require that the ring of integers is <code>Z[z-1]</code>, that should be really easy given that we know it is <code>Z[z]</code>.</p>



<a name="287450680"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/287450680" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#287450680">(Jun 25 2022 at 19:15)</a>:</h4>
<p>In any case the proof of <code>prime_of_norm_prime</code> is a nice detour to avoid the ideal norm.</p>



<a name="287451065"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/287451065" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#287451065">(Jun 25 2022 at 19:24)</a>:</h4>
<p>I am done for today, but here is something to do if you're annoyed tonight.</p>
<ul>
<li>Prove  that<code>adjoin R {x+a} = adjoin R {x}</code> if <code>a : R</code>.</li>
<li>Prove the results in <a href="https://leanprover-community.github.io/mathlib_docs/find/number_theory.cyclotomic.rat">docs#number_theory.cyclotomic.rat</a> with <code>ζ</code> replaced by <code>ζ - 1</code>.</li>
<li>Construct the <code>power_basis ℤ (𝓞 K)</code> given by <code>ζ - 1</code> as it's done <a href="https://github.com/leanprover-community/flt-regular/blob/master/src/z_basis.lean">here</a> for <code>ζ</code> (this file should be moved).</li>
<li>Prove that <code>norm' K (ζ - 1) = (rat.ring_of_integers_equiv.symm p)</code> using <a href="https://leanprover-community.github.io/mathlib_docs/find/is_primitive_root.sub_one_norm_prime">docs#is_primitive_root.sub_one_norm_prime</a>.</li>
<li>Finish the proof that <code>ζ - 1</code> is prime using <code>prime_of_norm_prime</code>.</li>
</ul>



<a name="287451857"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/287451857" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#287451857">(Jun 25 2022 at 19:44)</a>:</h4>
<p>I guess we should have some more general operations on power bases by appropriate affine transformations?</p>



<a name="287452206"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/287452206" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#287452206">(Jun 25 2022 at 19:53)</a>:</h4>
<p>We have <a href="https://leanprover-community.github.io/mathlib_docs/find/power_basis.of_gen_mem_adjoin">docs#power_basis.of_gen_mem_adjoin</a> that is very general. It works for fields, but it is possible that is generalizes more or less automatically.</p>



<a name="287452270"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/287452270" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#287452270">(Jun 25 2022 at 19:54)</a>:</h4>
<p>Mmm, no, it uses <a href="https://leanprover-community.github.io/mathlib_docs/find/algebra.adjoin.power_basis">docs#algebra.adjoin.power_basis</a> that is false in general.</p>



<a name="287501117"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/287501117" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#287501117">(Jun 26 2022 at 16:16)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">zeta_sub_one_prime</span> <span class="o">[</span><span class="n">is_cyclotomic_extension</span> <span class="o">{</span><span class="n">p</span> <span class="bp">^</span> <span class="o">(</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)}</span> <span class="n">ℚ</span> <span class="n">K</span><span class="o">]</span>
  <span class="o">(</span><span class="n">hζ</span> <span class="o">:</span> <span class="n">is_primitive_root</span> <span class="n">ζ</span> <span class="bp">↑</span><span class="o">(</span><span class="n">p</span> <span class="bp">^</span> <span class="o">(</span><span class="n">k</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)))</span> <span class="o">(</span><span class="n">hodd</span> <span class="o">:</span> <span class="n">p</span> <span class="bp">≠</span> <span class="mi">2</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">prime</span> <span class="o">(⟨</span><span class="n">ζ</span> <span class="bp">-</span> <span class="mi">1</span><span class="o">,</span> <span class="n">hζ.sub_one_mem_ring_of_integers</span><span class="o">⟩</span> <span class="o">:</span> <span class="n">R</span><span class="o">)</span>
</code></pre></div>
<p>is <code>sorry</code> free.</p>



<a name="287503352"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/287503352" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#287503352">(Jun 26 2022 at 17:11)</a>:</h4>
<p>The <code>simps</code> <a href="https://github.com/leanprover-community/flt-regular/blob/7405d7b5eba8f7f891c7e37a8f8437c4dea6903c/src/zeta_sub_one_prime.lean#L40">here</a> is very slow... does anyone know to speed it up?</p>



<a name="287503445"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/287503445" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#287503445">(Jun 26 2022 at 17:12)</a>:</h4>
<p>Did you try the now-standard technique of using <code>simps?</code> to find out what it's doing and then just doing it manually yourself? :-)</p>



<a name="287503460"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/287503460" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#287503460">(Jun 26 2022 at 17:12)</a>:</h4>
<p>I have no idea why <code>simps</code> is sometimes randomly super-slow but you're not the first person to notice it recently.</p>



<a name="287503988"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/287503988" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#287503988">(Jun 26 2022 at 17:22)</a>:</h4>
<p>Because <code>simps</code> lemmas have to be in simp normal form, <code>simps</code> calls <code>simp</code> (or just <code>dsimp</code>?) on the LHS, but this sometimes results in oversimplified statements.</p>



<a name="287504028"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/287504028" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#287504028">(Jun 26 2022 at 17:23)</a>:</h4>
<p>Yeah, adding it by hand seems faster.</p>



<a name="287511780"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/287511780" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#287511780">(Jun 26 2022 at 20:13)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib/pull/14979">#14979</a> and <a href="https://github.com/leanprover-community/mathlib/pull/14981">#14981</a> If someone wants to have a look.</p>



<a name="287511822"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/287511822" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#287511822">(Jun 26 2022 at 20:14)</a>:</h4>
<p>I will very little time this week,  but I will try to follow any progress.</p>



<a name="287709353"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/287709353" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Birkbeck <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#287709353">(Jun 28 2022 at 12:38)</a>:</h4>
<p><span class="user-mention silent" data-user-id="130384">Riccardo Brasca</span> <a href="#narrow/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project/near/287313314">said</a>:</p>
<blockquote>
<p>You can coordinate with <span class="user-mention silent" data-user-id="284160">Eric Rodriguez</span> to finish the proof of <code>unit_inv_conj_not_neg_zeta_runity</code>.  We need that <code>ζ - 1</code> is prime and it does not divide <code>2</code> (both are computation with the norm, we already have <a href="https://leanprover-community.github.io/mathlib_docs/find/is_primitive_root.sub_one_norm_prime_ne_two">docs#is_primitive_root.sub_one_norm_prime_ne_two</a> but we are mising some glue to obtain the two results).</p>
<p>Looking at the blueprint it seems that the only other missing result in sections 1-2-3 is <a href="https://leanprover-community.github.io/flt-regular/sect0003.html#lemma:fac_of_p_in_p_th_root">Lemma 3.8</a>, I think we don't even have the statement.</p>
</blockquote>
<p>I don't think we actually need 3.8, we basically need something slightly easier, so I've updated this on the blueprint.</p>



<a name="287709401"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/287709401" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Birkbeck <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#287709401">(Jun 28 2022 at 12:39)</a>:</h4>
<p>I'll add the statement in Lean as well.</p>



<a name="288518746"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/288518746" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#288518746">(Jul 05 2022 at 12:14)</a>:</h4>
<p><span class="user-mention" data-user-id="389019">@Chris Birkbeck</span> have you added Lean statement? It seems something we can prove very quickly</p>



<a name="288571601"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/288571601" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Birkbeck <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#288571601">(Jul 05 2022 at 18:01)</a>:</h4>
<p>Yes I added both the statement and proved it. Although the statement isnt quite the one I proved, but its the one we need,</p>



<a name="288571690"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/288571690" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#288571690">(Jul 05 2022 at 18:02)</a>:</h4>
<p>Ah sorry, didn't see it. It's not in the graph right?</p>



<a name="288572235"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/288572235" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Birkbeck <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#288572235">(Jul 05 2022 at 18:06)</a>:</h4>
<p>Ah maybe not. I'll check that!</p>



<a name="289121656"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/289121656" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#289121656">(Jul 10 2022 at 20:12)</a>:</h4>
<p>I've finished <code>unit_inv_conj_not_neg_zeta_runity</code> and therefore <code>unit_lemma_gal_conj</code> is now sorry free. We are in the endgame!</p>



<a name="289122178"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/289122178" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Birkbeck <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#289122178">(Jul 10 2022 at 20:25)</a>:</h4>
<p>Great! I think we just need to assemble these results into a proof of case 1!</p>



<a name="289129218"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/289129218" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#289129218">(Jul 10 2022 at 23:17)</a>:</h4>
<p>Great job!!</p>



<a name="289129266"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/289129266" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#289129266">(Jul 10 2022 at 23:18)</a>:</h4>
<p>I will write down what exactly is missing this week.</p>



<a name="289179104"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/304774-FLT%20regular/topic/Contributing%20to%20the%20project/near/289179104" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/304774-FLT-regular/topic/Contributing.20to.20the.20project.html#289179104">(Jul 11 2022 at 11:56)</a>:</h4>
<p>I do think we should try tidy some things before we do that, and try and agree in quite what form we want to state theorems; we have lots of <code>cyclotomic_ring</code>, <code>adjoin ...</code> mixed about everywhere; I think there's probably about 5 different ways we state <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="script">O</mi><mrow><mo fence="true">(</mo><mi mathvariant="double-struck">Q</mi><mo stretchy="false">(</mo><mi>ζ</mi><mo stretchy="false">)</mo><mo fence="true">)</mo></mrow><mo>=</mo><mi mathvariant="double-struck">Z</mi><mo stretchy="false">[</mo><mi>ζ</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex"> \mathcal{O} \left( \mathbb{Q}(\zeta) \right) = \mathbb{Z}[\zeta] </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathcal" style="margin-right:0.02778em;">O</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;">(</span><span class="mord mathbb">Q</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.07378em;">ζ</span><span class="mclose">)</span><span class="mclose delimcenter" style="top:0em;">)</span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathbb">Z</span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right:0.07378em;">ζ</span><span class="mclose">]</span></span></span></span> and it makes shuffling things about painful</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>