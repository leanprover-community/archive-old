---
layout: archive
title: Zulip Chat Archive
permalink: /stream/303200-sphere-eversion/topic/Constructing.20loops.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/303200-sphere-eversion/index.html">sphere eversion</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/303200-sphere-eversion/topic/Constructing.20loops.html">Constructing loops</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="256758102"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/303200-sphere%20eversion/topic/Constructing%20loops/near/256758102" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/303200-sphere-eversion/topic/Constructing.20loops.html#256758102">(Oct 08 2021 at 15:34)</a>:</h4>
<p>After the preliminaries of chapter 1 comes the first section which is specific to the project: Section 1.3 Constructing loops. It is the topic of <a href="https://github.com/leanprover-community/sphere-eversion/blob/dc7a12c8b9cc49f33d0ceaf5d3aac50f09c9729c/src/loops/surrounding.lean">this Lean file</a>. The first lemma is proved. The next targets involve using the previous section (all definitions and statements should already be there) and gluing continuous functions using continuous cut-off functions. This can be tackled by anyone knowing, or wanting to learn, the basic topology part of mathlib (basic means no uniform space of nonarchimedean topological algebra).</p>



<a name="257057504"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/303200-sphere%20eversion/topic/Constructing%20loops/near/257057504" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="https://leanprover-community.github.io/archive/stream/303200-sphere-eversion/topic/Constructing.20loops.html#257057504">(Oct 11 2021 at 12:34)</a>:</h4>
<p>I'll take a look at this!</p>



<a name="257067020"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/303200-sphere%20eversion/topic/Constructing%20loops/near/257067020" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/303200-sphere-eversion/topic/Constructing.20loops.html#257067020">(Oct 11 2021 at 13:50)</a>:</h4>
<p>Awesome!</p>



<a name="257079133"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/303200-sphere%20eversion/topic/Constructing%20loops/near/257079133" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="https://leanprover-community.github.io/archive/stream/303200-sphere-eversion/topic/Constructing.20loops.html#257079133">(Oct 11 2021 at 15:20)</a>:</h4>
<p>I just pushed a partial proof for Lem 1.11 (<code>local_loops</code>).<br>
I ran into 2 issues:</p>
<ul>
<li>In the Lean file Lem 1.9 is formulated using <code>continuous_on</code> and Lem 1.11 is formulated using <code>continuous_at</code> in the conclusion. <code>continuous_on</code> does not apply <code>continuous_at</code> for all points (only for the points in the interior). Since <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>Î³</mi><mi>t</mi></msup></mrow><annotation encoding="application/x-tex">\gamma^t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9879959999999999em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05556em;">Î³</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7935559999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span></span></span></span></span></span></span></span> is allowed to have garbage values if <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>t</mi><mo>âˆˆÌ¸</mo><mi>I</mi></mrow><annotation encoding="application/x-tex">t\not\in I</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel"><span class="mord vbox"><span class="thinbox"><span class="rlap"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="inner"><span class="mord"><span class="mrel">î€ </span></span></span><span class="fix"></span></span></span></span></span></span><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mrel">âˆˆ</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.07847em;">I</span></span></span></span> I presume we want to use <code>continuous_on</code> (or <code>continuous_within_at</code>), right?</li>
<li>I don't see the math proof that <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>Î³</mi><mi>x</mi></msub><mo>âˆˆ</mo><msub><mi mathvariant="normal">Î©</mi><mi>x</mi></msub></mrow><annotation encoding="application/x-tex">\gamma_x\in \Omega_x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7335400000000001em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05556em;">Î³</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.05556em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">x</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">âˆˆ</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord">Î©</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">x</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>. Just checking: <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">Î©</mi></mrow><annotation encoding="application/x-tex">\Omega</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord">Î©</span></span></span></span> being open over a neighborhood <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>U</mi></mrow><annotation encoding="application/x-tex">U</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">U</span></span></span></span> of <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mn>0</mn></msub></mrow><annotation encoding="application/x-tex">x_0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> just means that the slices <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi mathvariant="normal">Î©</mi><mi>x</mi></msub></mrow><annotation encoding="application/x-tex">\Omega_x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord">Î©</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">x</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> are open (in <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>F</mi></mrow><annotation encoding="application/x-tex">F</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span></span></span></span>) for <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi><mo>âˆˆ</mo><mi>U</mi></mrow><annotation encoding="application/x-tex">x\in U</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">âˆˆ</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">U</span></span></span></span>, right? So in particular we don't know whether <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><msub><mi>x</mi><mn>0</mn></msub><mo separator="true">,</mo><mi>Î²</mi><mo stretchy="false">(</mo><msub><mi>x</mi><mn>0</mn></msub><mo stretchy="false">)</mo><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(x_0,\beta(x_0))</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal" style="margin-right:0.05278em;">Î²</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">))</span></span></span></span>  (or <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><msub><mi>x</mi><mn>0</mn></msub><mo separator="true">,</mo><mi>Î³</mi><mo stretchy="false">(</mo><mi>s</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(x_0,\gamma(s))</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal" style="margin-right:0.05556em;">Î³</span><span class="mopen">(</span><span class="mord mathnormal">s</span><span class="mclose">))</span></span></span></span>, with <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Î³</mi></mrow><annotation encoding="application/x-tex">\gamma</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathnormal" style="margin-right:0.05556em;">Î³</span></span></span></span> as in the proof) lies in the interior of <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">Î©</mi></mrow><annotation encoding="application/x-tex">\Omega</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord">Î©</span></span></span></span>, right? I don't see what prevents the following problematic example: <ul>
<li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi mathvariant="normal">Î©</mi><msub><mi>x</mi><mn>0</mn></msub></msub></mrow><annotation encoding="application/x-tex">\Omega_{x_0}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.93343em;vertical-align:-0.2501em;"></span><span class="mord"><span class="mord">Î©</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.15139199999999997em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31731428571428577em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2501em;"><span></span></span></span></span></span></span></span></span></span> is all of <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>F</mi></mrow><annotation encoding="application/x-tex">F</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span></span></span></span></li>
<li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi mathvariant="normal">Î©</mi><mi>x</mi></msub></mrow><annotation encoding="application/x-tex">\Omega_x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord">Î©</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">x</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> is a tiny open region for <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi><mo mathvariant="normal">â‰ </mo><msub><mi>x</mi><mn>0</mn></msub></mrow><annotation encoding="application/x-tex">x\ne x_0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel"><span class="mrel"><span class="mord vbox"><span class="thinbox"><span class="rlap"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="inner"><span class="mord"><span class="mrel">î€ </span></span></span><span class="fix"></span></span></span></span></span><span class="mrel">=</span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></li>
<li>The <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Î³</mi></mrow><annotation encoding="application/x-tex">\gamma</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathnormal" style="margin-right:0.05556em;">Î³</span></span></span></span> we get in the proof has a range that goes far outside the tiny open regions <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi mathvariant="normal">Î©</mi><mi>x</mi></msub></mrow><annotation encoding="application/x-tex">\Omega_x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord">Î©</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">x</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>.</li>
</ul>
</li>
</ul>



<a name="257085579"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/303200-sphere%20eversion/topic/Constructing%20loops/near/257085579" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/303200-sphere-eversion/topic/Constructing.20loops.html#257085579">(Oct 11 2021 at 16:10)</a>:</h4>
<p>Nice work :-) I'll have to context switch to think properly about your remarks but if they're still unanswered this evening, I'll do so!</p>



<a name="257085664"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/303200-sphere%20eversion/topic/Constructing%20loops/near/257085664" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/303200-sphere-eversion/topic/Constructing.20loops.html#257085664">(Oct 11 2021 at 16:11)</a>:</h4>
<p>I spent a bit too long working on <a href="https://github.com/leanprover-community/mathlib/issues/9657">#9657</a> this morning so I'm now grovelling around with finite sets trying to close the <code>sorry</code>s in <a href="https://github.com/leanprover-community/sphere-eversion/pull/26">https://github.com/leanprover-community/sphere-eversion/pull/26</a>.</p>



<a name="257105498"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/303200-sphere%20eversion/topic/Constructing%20loops/near/257105498" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/303200-sphere-eversion/topic/Constructing.20loops.html#257105498">(Oct 11 2021 at 19:14)</a>:</h4>
<p><span class="user-mention silent" data-user-id="111080">Floris van Doorn</span> <a href="#narrow/stream/303200-sphere-eversion/topic/Constructing.20loops/near/257079133">said</a>:</p>
<blockquote>
<ul>
<li>In the Lean file Lem 1.9 is formulated using <code>continuous_on</code> and Lem 1.11 is formulated using <code>continuous_at</code> in the conclusion. <code>continuous_on</code> does not apply <code>continuous_at</code> for all points (only for the points in the interior). Since <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>Î³</mi><mi>t</mi></msup></mrow><annotation encoding="application/x-tex">\gamma^t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9879959999999999em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05556em;">Î³</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7935559999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span></span></span></span></span></span></span></span> is allowed to have garbage values if <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>t</mi><mo>âˆˆÌ¸</mo><mi>I</mi></mrow><annotation encoding="application/x-tex">t\not\in I</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel"><span class="mord vbox"><span class="thinbox"><span class="rlap"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="inner"><span class="mord"><span class="mrel">î€ </span></span></span><span class="fix"></span></span></span></span></span></span><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mrel">âˆˆ</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.07847em;">I</span></span></span></span> I presume we want to use <code>continuous_on</code> (or <code>continuous_within_at</code>), right?</li>
</ul>
</blockquote>
<p>This is a typo, it should be <code>continuous_on</code> everywhere. In the real work everything is defined only on <code>I</code>, there is no garbage value anywhere.</p>



<a name="257105880"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/303200-sphere%20eversion/topic/Constructing%20loops/near/257105880" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/303200-sphere-eversion/topic/Constructing.20loops.html#257105880">(Oct 11 2021 at 19:18)</a>:</h4>
<p><span class="user-mention silent" data-user-id="111080">Floris van Doorn</span> <a href="#narrow/stream/303200-sphere-eversion/topic/Constructing.20loops/near/257079133">said</a>:</p>
<blockquote>
<ul>
<li>I don't see the math proof that <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>Î³</mi><mi>x</mi></msub><mo>âˆˆ</mo><msub><mi mathvariant="normal">Î©</mi><mi>x</mi></msub></mrow><annotation encoding="application/x-tex">\gamma_x\in \Omega_x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7335400000000001em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05556em;">Î³</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.05556em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">x</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">âˆˆ</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord">Î©</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">x</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>. Just checking: <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">Î©</mi></mrow><annotation encoding="application/x-tex">\Omega</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord">Î©</span></span></span></span> being open over a neighborhood <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>U</mi></mrow><annotation encoding="application/x-tex">U</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">U</span></span></span></span> of <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mn>0</mn></msub></mrow><annotation encoding="application/x-tex">x_0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> just means that the slices <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi mathvariant="normal">Î©</mi><mi>x</mi></msub></mrow><annotation encoding="application/x-tex">\Omega_x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord">Î©</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">x</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> are open (in <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>F</mi></mrow><annotation encoding="application/x-tex">F</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span></span></span></span>) for <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi><mo>âˆˆ</mo><mi>U</mi></mrow><annotation encoding="application/x-tex">x\in U</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">âˆˆ</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">U</span></span></span></span>, right? </li>
</ul>
</blockquote>
<p>No. "over" always refer to the projection of  <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Ï€</mi><mo>:</mo><mi>E</mi><mo>Ã—</mo><mi>F</mi><mo>â†’</mo><mi>E</mi></mrow><annotation encoding="application/x-tex">\pi : E  \times F \to E</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">Ï€</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.76666em;vertical-align:-0.08333em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">â†’</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span></span></span></span> (because we always secretly think everything is a fiber bundle). So <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">Î©</mi></mrow><annotation encoding="application/x-tex">\Omega</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord">Î©</span></span></span></span> over a neighborhood of <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">x</span></span></span></span> mean <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">Î©</mi><mo>âˆ©</mo><msup><mi>Ï€</mi><mrow><mo>âˆ’</mo><mn>1</mn></mrow></msup><mo stretchy="false">(</mo><mi>U</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\Omega \cap \pi^{-1}(U)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord">Î©</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ©</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">Ï€</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.10903em;">U</span><span class="mclose">)</span></span></span></span> for some neighborhood <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>U</mi></mrow><annotation encoding="application/x-tex">U</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">U</span></span></span></span> of <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">x</span></span></span></span>.</p>



<a name="257106153"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/303200-sphere%20eversion/topic/Constructing%20loops/near/257106153" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/303200-sphere-eversion/topic/Constructing.20loops.html#257106153">(Oct 11 2021 at 19:20)</a>:</h4>
<p>Of course this kind of sloppy wording based on implicit habits is part of the motivation for formal maths. To me this was completely clear, just as things were completely clear for the author of those notes on adic spaces that drove me crazy during the perfectoid spaces project...</p>



<a name="257124865"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/303200-sphere%20eversion/topic/Constructing%20loops/near/257124865" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="https://leanprover-community.github.io/archive/stream/303200-sphere-eversion/topic/Constructing.20loops.html#257124865">(Oct 11 2021 at 22:39)</a>:</h4>
<p>Ah ok, so in Lemma 1.11  <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">Î©</mi><mo>âˆ©</mo><msup><mi>Ï€</mi><mrow><mo>âˆ’</mo><mn>1</mn></mrow></msup><mo stretchy="false">(</mo><mi>U</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\Omega \cap \pi^{-1}(U)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord">Î©</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ©</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">Ï€</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.10903em;">U</span><span class="mclose">)</span></span></span></span> is open for some open neighborhood <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>U</mi></mrow><annotation encoding="application/x-tex">U</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">U</span></span></span></span> of <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mn>0</mn></msub></mrow><annotation encoding="application/x-tex">x_0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>? Part of the confusion was that the formalized statement of the lemma didn't state this. I'll fix it tomorrow.</p>



<a name="257187078"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/303200-sphere%20eversion/topic/Constructing%20loops/near/257187078" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="https://leanprover-community.github.io/archive/stream/303200-sphere-eversion/topic/Constructing.20loops.html#257187078">(Oct 12 2021 at 11:30)</a>:</h4>
<p><span class="user-mention" data-user-id="110031">@Patrick Massot</span> what do you think the best way to formulate Lemma 1.11 is?<br>
I currently have</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">local_loops</span>
  <span class="o">{</span><span class="n">xâ‚€</span> <span class="o">:</span> <span class="n">E</span><span class="o">}</span>
  <span class="o">(</span><span class="n">h</span><span class="bp">Î©</span><span class="n">_op</span> <span class="o">:</span> <span class="bp">âˆƒ</span> <span class="n">U</span> <span class="bp">âˆˆ</span> <span class="bp">ğ“</span> <span class="n">xâ‚€</span><span class="o">,</span> <span class="n">is_open</span> <span class="o">(</span><span class="bp">Î©</span> <span class="bp">âˆ©</span> <span class="n">prod.fst</span> <span class="bp">â»Â¹'</span> <span class="n">U</span><span class="o">))</span>
  <span class="o">(</span><span class="n">h</span><span class="bp">Î©</span><span class="n">_conn</span> <span class="o">:</span> <span class="bp">âˆ€á¶ </span> <span class="n">x</span> <span class="k">in</span> <span class="bp">ğ“</span> <span class="n">xâ‚€</span><span class="o">,</span> <span class="n">is_connected</span> <span class="o">(</span><span class="n">prod.mk</span> <span class="n">x</span> <span class="bp">â»Â¹'</span> <span class="bp">Î©</span><span class="o">))</span>
  <span class="o">(</span><span class="n">hg</span> <span class="o">:</span> <span class="bp">âˆ€á¶ </span> <span class="n">x</span> <span class="k">in</span> <span class="bp">ğ“</span> <span class="n">xâ‚€</span><span class="o">,</span> <span class="n">continuous_at</span> <span class="n">g</span> <span class="n">x</span><span class="o">)</span> <span class="o">(</span><span class="n">hb</span> <span class="o">:</span> <span class="bp">âˆ€á¶ </span> <span class="n">x</span> <span class="k">in</span> <span class="bp">ğ“</span> <span class="n">xâ‚€</span><span class="o">,</span> <span class="n">continuous_at</span> <span class="n">b</span> <span class="n">x</span><span class="o">)</span>
  <span class="o">(</span><span class="n">hb_in</span> <span class="o">:</span> <span class="bp">âˆ€á¶ </span> <span class="n">x</span> <span class="k">in</span> <span class="bp">ğ“</span> <span class="n">xâ‚€</span><span class="o">,</span> <span class="o">(</span><span class="n">x</span><span class="o">,</span> <span class="n">b</span> <span class="n">x</span><span class="o">)</span> <span class="bp">âˆˆ</span> <span class="bp">Î©</span><span class="o">)</span>
  <span class="o">(</span><span class="n">hconv</span> <span class="o">:</span> <span class="bp">âˆ€á¶ </span> <span class="n">x</span> <span class="k">in</span> <span class="bp">ğ“</span> <span class="n">xâ‚€</span><span class="o">,</span> <span class="n">g</span> <span class="n">x</span> <span class="bp">âˆˆ</span> <span class="n">convex_hull</span> <span class="n">â„</span> <span class="o">(</span><span class="n">prod.mk</span> <span class="n">x</span> <span class="bp">â»Â¹'</span> <span class="bp">Î©</span><span class="o">))</span> <span class="o">:</span>
<span class="bp">âˆƒ</span> <span class="o">(</span><span class="n">Î³</span> <span class="o">:</span> <span class="n">E</span> <span class="bp">â†’</span> <span class="n">â„</span> <span class="bp">â†’</span> <span class="n">loop</span> <span class="n">F</span><span class="o">),</span> <span class="o">(</span><span class="bp">âˆƒ</span> <span class="o">(</span><span class="n">U</span> <span class="bp">âˆˆ</span> <span class="bp">ğ“</span> <span class="n">xâ‚€</span><span class="o">),</span> <span class="n">continuous_on</span> <span class="bp">â†¿</span><span class="n">Î³</span> <span class="o">(</span><span class="n">set.prod</span> <span class="n">U</span> <span class="bp">$</span> <span class="n">set.prod</span> <span class="n">I</span> <span class="n">univ</span><span class="o">))</span> <span class="bp">âˆ§</span>
  <span class="bp">âˆ€á¶ </span> <span class="n">x</span> <span class="k">in</span> <span class="bp">ğ“</span> <span class="n">xâ‚€</span><span class="o">,</span> <span class="bp">âˆ€</span> <span class="o">(</span><span class="n">t</span> <span class="bp">âˆˆ</span> <span class="n">I</span><span class="o">)</span> <span class="n">s</span><span class="o">,</span>
  <span class="o">(</span><span class="n">x</span><span class="o">,</span> <span class="n">Î³</span> <span class="n">x</span> <span class="n">t</span> <span class="n">s</span><span class="o">)</span> <span class="bp">âˆˆ</span> <span class="bp">Î©</span> <span class="bp">âˆ§</span>
  <span class="n">Î³</span> <span class="n">x</span> <span class="mi">0</span> <span class="n">s</span> <span class="bp">=</span> <span class="n">b</span> <span class="n">x</span> <span class="bp">âˆ§</span>
  <span class="o">(</span><span class="n">Î³</span> <span class="n">x</span> <span class="mi">1</span><span class="o">)</span><span class="bp">.</span><span class="n">surrounds</span> <span class="o">(</span><span class="n">g</span> <span class="n">x</span><span class="o">)</span>
</code></pre></div>
<p>Is there a better way to formulate <code>hÎ©_conn</code>? (this works fine for the proof so far).<br>
I'm not sure how to formulate the conclusion most easily. I'm wondering if we should have <code>continuous_at_filter</code> similar to <a href="https://leanprover-community.github.io/mathlib_docs/find/measurable_at_filter">docs#measurable_at_filter</a>.</p>



<a name="257187817"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/303200-sphere%20eversion/topic/Constructing%20loops/near/257187817" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/303200-sphere-eversion/topic/Constructing.20loops.html#257187817">(Oct 12 2021 at 11:37)</a>:</h4>
<p>Your formulation looks fine.</p>



<a name="257188467"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/303200-sphere%20eversion/topic/Constructing%20loops/near/257188467" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/303200-sphere-eversion/topic/Constructing.20loops.html#257188467">(Oct 12 2021 at 11:42)</a>:</h4>
<p>About <code>continuous_at_filter</code>, do you want to replace <code>âˆ€á¶  x in ğ“ xâ‚€, continuous_at g x</code> with <code>continuous_at_filter g  (ğ“ xâ‚€)</code>? It doesn't seem to buy you much.</p>



<a name="257188904"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/303200-sphere%20eversion/topic/Constructing%20loops/near/257188904" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="https://leanprover-community.github.io/archive/stream/303200-sphere-eversion/topic/Constructing.20loops.html#257188904">(Oct 12 2021 at 11:45)</a>:</h4>
<p>No, <code>continuous_at_filter g (ğ“ xâ‚€)</code> would mean<code>âˆƒ U âˆˆ ğ“ xâ‚€, continuous_on g U</code>, which should (slightly) simplify the continuity statement in the conclusion.</p>



<a name="257189042"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/303200-sphere%20eversion/topic/Constructing%20loops/near/257189042" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/303200-sphere-eversion/topic/Constructing.20loops.html#257189042">(Oct 12 2021 at 11:47)</a>:</h4>
<p>Ok, that would rather be <code>continuous_on_filter</code> then.</p>



<a name="257189097"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/303200-sphere%20eversion/topic/Constructing%20loops/near/257189097" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/303200-sphere-eversion/topic/Constructing.20loops.html#257189097">(Oct 12 2021 at 11:47)</a>:</h4>
<p>Except that in this case it wouldn't apply.</p>



<a name="257189120"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/303200-sphere%20eversion/topic/Constructing%20loops/near/257189120" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/303200-sphere-eversion/topic/Constructing.20loops.html#257189120">(Oct 12 2021 at 11:47)</a>:</h4>
<p>Because the conclusion uses a more complicated set built from a neighborhood.</p>



<a name="257189221"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/303200-sphere%20eversion/topic/Constructing%20loops/near/257189221" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="https://leanprover-community.github.io/archive/stream/303200-sphere-eversion/topic/Constructing.20loops.html#257189221">(Oct 12 2021 at 11:48)</a>:</h4>
<p>I expect you can take the product with some pure filters. But yeah, it's wouldn't buy much.</p>



<a name="257190797"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/303200-sphere%20eversion/topic/Constructing%20loops/near/257190797" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/303200-sphere-eversion/topic/Constructing.20loops.html#257190797">(Oct 12 2021 at 12:02)</a>:</h4>
<p>Maybe we should drop <code>I</code> from this statement. You can probably arrange all those assumptions to hold for every <code>t</code> and that could actually make the proof easier.</p>



<a name="258724932"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/303200-sphere%20eversion/topic/Constructing%20loops/near/258724932" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="https://leanprover-community.github.io/archive/stream/303200-sphere-eversion/topic/Constructing.20loops.html#258724932">(Oct 22 2021 at 15:07)</a>:</h4>
<p>I just finished the proof of Lemma 1.13, <code>satisfied_or_refund</code>.</p>



<a name="258725061"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/303200-sphere%20eversion/topic/Constructing%20loops/near/258725061" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/303200-sphere-eversion/topic/Constructing.20loops.html#258725061">(Oct 22 2021 at 15:08)</a>:</h4>
<p>Oh wow, that's awesome!</p>



<a name="258725416"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/303200-sphere%20eversion/topic/Constructing%20loops/near/258725416" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/303200-sphere-eversion/topic/Constructing.20loops.html#258725416">(Oct 22 2021 at 15:10)</a>:</h4>
<p>That's a fine name for a lemma I must say</p>



<a name="258735632"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/303200-sphere%20eversion/topic/Constructing%20loops/near/258735632" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/303200-sphere-eversion/topic/Constructing.20loops.html#258735632">(Oct 22 2021 at 16:23)</a>:</h4>
<p>Amazing!</p>



<a name="258753467"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/303200-sphere%20eversion/topic/Constructing%20loops/near/258753467" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/303200-sphere-eversion/topic/Constructing.20loops.html#258753467">(Oct 22 2021 at 18:31)</a>:</h4>
<p>Don't hesitate to update the TeX code if you want to add details to the informal proof.</p>



<a name="263858304"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/303200-sphere%20eversion/topic/Constructing%20loops/near/263858304" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="https://leanprover-community.github.io/archive/stream/303200-sphere-eversion/topic/Constructing.20loops.html#263858304">(Dec 06 2021 at 14:37)</a>:</h4>
<p>I have pushed a mostly finished proof of <a href="https://leanprover-community.github.io/sphere-eversion/blueprint/chap-loops.html#lem:local_loops"><code>local_loops</code></a>. It still depends on the following  sorry'd lemma</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">is_open_affine_independent</span> <span class="o">{</span><span class="n">Î¹</span><span class="o">}</span> <span class="o">:</span> <span class="n">is_open</span> <span class="o">{</span><span class="n">p</span> <span class="o">:</span> <span class="n">Î¹</span> <span class="bp">â†’</span> <span class="n">F</span> <span class="bp">|</span> <span class="n">affine_independent</span> <span class="n">â„</span> <span class="n">p</span><span class="o">}</span>
</code></pre></div>
<p>Is this something that is easy to prove?</p>



<a name="263858786"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/303200-sphere%20eversion/topic/Constructing%20loops/near/263858786" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/303200-sphere-eversion/topic/Constructing.20loops.html#263858786">(Dec 06 2021 at 14:40)</a>:</h4>
<p>Hopefully you should be able to use <span class="user-mention" data-user-id="240862">@Oliver Nash</span> recent effort to link this to determinant and use continuity of determinants.</p>



<a name="263858871"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/303200-sphere%20eversion/topic/Constructing%20loops/near/263858871" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/303200-sphere-eversion/topic/Constructing.20loops.html#263858871">(Dec 06 2021 at 14:41)</a>:</h4>
<p>Yes, this is very easy from what I have.</p>



<a name="263859074"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/303200-sphere%20eversion/topic/Constructing%20loops/near/263859074" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/303200-sphere-eversion/topic/Constructing.20loops.html#263859074">(Dec 06 2021 at 14:42)</a>:</h4>
<p>I'm back from holidays and busy preparing some "camera-ready" version of a paper but I'll see if I can fill that sorry for you quickly now.</p>



<a name="263859453"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/303200-sphere%20eversion/topic/Constructing%20loops/near/263859453" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/303200-sphere-eversion/topic/Constructing.20loops.html#263859453">(Dec 06 2021 at 14:45)</a>:</h4>
<p>Nice, what is this paper about?</p>



<a name="263859693"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/303200-sphere%20eversion/topic/Constructing%20loops/near/263859693" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/303200-sphere-eversion/topic/Constructing.20loops.html#263859693">(Dec 06 2021 at 14:46)</a>:</h4>
<p>I waffle on about Lie algebras in Mathlib.</p>



<a name="263859794"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/303200-sphere%20eversion/topic/Constructing%20loops/near/263859794" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/303200-sphere-eversion/topic/Constructing.20loops.html#263859794">(Dec 06 2021 at 14:46)</a>:</h4>
<p>I was delighted that it was accepted for CPP which was very pleasing.</p>



<a name="263861575"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/303200-sphere%20eversion/topic/Constructing%20loops/near/263861575" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/303200-sphere-eversion/topic/Constructing.20loops.html#263861575">(Dec 06 2021 at 14:59)</a>:</h4>
<p>I would love to see the preprint</p>



<a name="263861627"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/303200-sphere%20eversion/topic/Constructing%20loops/near/263861627" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="https://leanprover-community.github.io/archive/stream/303200-sphere-eversion/topic/Constructing.20loops.html#263861627">(Dec 06 2021 at 14:59)</a>:</h4>
<p>Good luck with the camera-ready version of your CPP paper!</p>



<a name="263861645"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/303200-sphere%20eversion/topic/Constructing%20loops/near/263861645" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/303200-sphere-eversion/topic/Constructing.20loops.html#263861645">(Dec 06 2021 at 14:59)</a>:</h4>
<p>I'll share a link once I have it. I have only tiny changes to make but I might as well avoid having multiple versions floating around.</p>



<a name="263861679"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/303200-sphere%20eversion/topic/Constructing%20loops/near/263861679" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/303200-sphere-eversion/topic/Constructing.20loops.html#263861679">(Dec 06 2021 at 14:59)</a>:</h4>
<p><span class="user-mention" data-user-id="111080">@Floris van Doorn</span> <br>
I'm currently this far along with your question:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">topology.algebra.matrix</span>
<span class="kn">import</span> <span class="n">analysis.normed_space.add_torsor_bases</span>
<span class="kn">import</span> <span class="n">topology.algebra.ring</span>

<span class="kn">open</span> <span class="n">set</span> <span class="n">function</span> <span class="n">finite_dimensional</span> <span class="n">fintype</span>
<span class="n">open_locale</span> <span class="n">topological_space</span> <span class="n">affine</span> <span class="n">classical</span> <span class="n">matrix</span>
<span class="kd">noncomputable theory</span>

<span class="kd">variables</span> <span class="o">(</span><span class="n">Î¹</span> <span class="n">k</span> <span class="n">V</span> <span class="n">P</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span>
<span class="kd">variables</span> <span class="o">[</span><span class="n">fintype</span> <span class="n">Î¹</span><span class="o">]</span> <span class="o">[</span><span class="n">nondiscrete_normed_field</span> <span class="n">k</span><span class="o">]</span> <span class="o">[</span><span class="n">complete_space</span> <span class="n">k</span><span class="o">]</span>
<span class="kd">variables</span> <span class="o">[</span><span class="n">normed_group</span> <span class="n">V</span><span class="o">]</span> <span class="o">[</span><span class="n">metric_space</span> <span class="n">P</span><span class="o">]</span> <span class="o">[</span><span class="n">normed_add_torsor</span> <span class="n">V</span> <span class="n">P</span><span class="o">]</span>
<span class="kd">variables</span> <span class="o">[</span><span class="n">normed_space</span> <span class="n">k</span> <span class="n">V</span><span class="o">]</span> <span class="o">[</span><span class="n">finite_dimensional</span> <span class="n">k</span> <span class="n">V</span><span class="o">]</span>

<span class="kd">lemma</span> <span class="n">is_open_affine_bases</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">card</span> <span class="n">Î¹</span> <span class="bp">=</span> <span class="n">finrank</span> <span class="n">k</span> <span class="n">V</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">is_open</span> <span class="o">{</span> <span class="n">v</span> <span class="o">:</span> <span class="n">Î¹</span> <span class="bp">â†’</span> <span class="n">P</span> <span class="bp">|</span> <span class="n">affine_independent</span> <span class="n">k</span> <span class="n">v</span> <span class="bp">âˆ§</span> <span class="n">affine_span</span> <span class="n">k</span> <span class="o">(</span><span class="n">range</span> <span class="n">v</span><span class="o">)</span> <span class="bp">=</span> <span class="bp">âŠ¤</span> <span class="o">}</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">obtain</span> <span class="o">âŸ¨</span><span class="n">b</span> <span class="o">:</span> <span class="n">affine_basis</span> <span class="n">Î¹</span> <span class="n">k</span> <span class="n">P</span><span class="o">âŸ©</span> <span class="o">:=</span> <span class="n">affine_basis.exists_affine_basis_of_finite_dimensional</span> <span class="n">h</span><span class="o">,</span>
  <span class="n">simp_rw</span> <span class="o">[</span><span class="bp">â†</span> <span class="n">b.is_unit_to_matrix_iff</span><span class="o">,</span> <span class="n">matrix.is_unit_iff_is_unit_det</span><span class="o">,</span> <span class="n">is_unit_iff_ne_zero</span><span class="o">],</span>
  <span class="k">let</span> <span class="n">f</span> <span class="o">:=</span> <span class="n">matrix.det</span> <span class="bp">âˆ˜</span> <span class="n">b.to_matrix</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">hb</span> <span class="o">:</span> <span class="n">continuous</span> <span class="o">(</span><span class="n">b.to_matrix</span> <span class="o">:</span> <span class="o">(</span><span class="n">Î¹</span> <span class="bp">â†’</span> <span class="n">P</span><span class="o">)</span> <span class="bp">â†’</span> <span class="o">(</span><span class="n">matrix</span> <span class="n">Î¹</span> <span class="n">Î¹</span> <span class="n">k</span><span class="o">)),</span> <span class="o">{</span> <span class="n">continuity</span><span class="o">,</span> <span class="o">},</span>
  <span class="k">have</span> <span class="n">hf</span> <span class="o">:</span> <span class="n">continuous</span> <span class="n">f</span><span class="o">,</span> <span class="o">{</span> <span class="n">exact</span> <span class="o">(</span><span class="n">continuous_det</span><span class="o">)</span><span class="bp">.</span><span class="n">comp</span> <span class="n">hb</span><span class="o">,</span> <span class="o">},</span>
  <span class="n">change</span> <span class="n">is_open</span> <span class="o">(</span><span class="n">f</span><span class="bp">â»Â¹'</span> <span class="o">{</span><span class="mi">0</span><span class="o">}</span><span class="bp">á¶œ</span><span class="o">),</span>
  <span class="n">apply</span> <span class="n">hf.is_open_preimage</span><span class="o">,</span>
  <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">is_open_compl_iff</span><span class="o">],</span>
  <span class="n">exact</span> <span class="n">t1_space.t1</span> <span class="mi">0</span><span class="o">,</span>
<span class="kd">end</span>
</code></pre></div>



<a name="263861744"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/303200-sphere%20eversion/topic/Constructing%20loops/near/263861744" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/303200-sphere-eversion/topic/Constructing.20loops.html#263861744">(Dec 06 2021 at 15:00)</a>:</h4>
<p>needs significant tidy up --- I'll keep going.</p>



<a name="263861844"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/303200-sphere%20eversion/topic/Constructing%20loops/near/263861844" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/303200-sphere-eversion/topic/Constructing.20loops.html#263861844">(Dec 06 2021 at 15:00)</a>:</h4>
<p>but hopefully gives the idea</p>



<a name="263861934"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/303200-sphere%20eversion/topic/Constructing%20loops/near/263861934" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="https://leanprover-community.github.io/archive/stream/303200-sphere-eversion/topic/Constructing.20loops.html#263861934">(Dec 06 2021 at 15:01)</a>:</h4>
<p>It's great to hear that you have basically proven <code>is_open_affine_independent</code>. Then we can almost mark <code>local_loops</code> as done!</p>



<a name="263861955"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/303200-sphere%20eversion/topic/Constructing%20loops/near/263861955" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/303200-sphere-eversion/topic/Constructing.20loops.html#263861955">(Dec 06 2021 at 15:01)</a>:</h4>
<p>Yep, we're close.</p>



<a name="263863230"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/303200-sphere%20eversion/topic/Constructing%20loops/near/263863230" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/303200-sphere-eversion/topic/Constructing.20loops.html#263863230">(Dec 06 2021 at 15:09)</a>:</h4>
<p><span class="user-mention" data-user-id="111080">@Floris van Doorn</span> I edited the snippet and the above is now sorry-free (though still a mess).</p>



<a name="263865482"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/303200-sphere%20eversion/topic/Constructing%20loops/near/263865482" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/303200-sphere-eversion/topic/Constructing.20loops.html#263865482">(Dec 06 2021 at 15:23)</a>:</h4>
<p>OK I've just edited again and the conclusion is now exactly what you wanted, namely <code>is_open { v : Î¹ â†’ P | affine_independent k v }</code>.</p>



<a name="263865681"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/303200-sphere%20eversion/topic/Constructing%20loops/near/263865681" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/303200-sphere-eversion/topic/Constructing.20loops.html#263865681">(Dec 06 2021 at 15:24)</a>:</h4>
<p>I won't have time to polish this up for a day or two so feel free to PR it in my place if you so wish. Otherwise I'll come back to it (most likely on Wednesday).</p>



<a name="263868134"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/303200-sphere%20eversion/topic/Constructing%20loops/near/263868134" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/303200-sphere-eversion/topic/Constructing.20loops.html#263868134">(Dec 06 2021 at 15:39)</a>:</h4>
<p>I love how work on this project magically happen while I'm talking to undergrad students.</p>



<a name="263868915"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/303200-sphere%20eversion/topic/Constructing%20loops/near/263868915" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/303200-sphere-eversion/topic/Constructing.20loops.html#263868915">(Dec 06 2021 at 15:45)</a>:</h4>
<p>Can I complain that this is not the right generality? You shouldn't need that the space is finite-dimensional, nor that the cardinality of iota is the dimension of the space. As we already have the general version for vector spaces (see <a href="https://leanprover-community.github.io/mathlib_docs/find/is_open_set_of_linear_independent">docs#is_open_set_of_linear_independent</a>), I hope the general affine version can be deduced easily from it. Of course, it can not use the determinant trick.</p>



<a name="263869243"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/303200-sphere%20eversion/topic/Constructing%20loops/near/263869243" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/303200-sphere-eversion/topic/Constructing.20loops.html#263869243">(Dec 06 2021 at 15:47)</a>:</h4>
<p>You can of course, make this complaint, especially since I was thinking the same thing as I wrote the above.</p>



<a name="263869321"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/303200-sphere%20eversion/topic/Constructing%20loops/near/263869321" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/303200-sphere-eversion/topic/Constructing.20loops.html#263869321">(Dec 06 2021 at 15:47)</a>:</h4>
<p>I'll make sure the version that lands in Mathlib is stated with appropriate assumptions.</p>



<a name="263869420"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/303200-sphere%20eversion/topic/Constructing%20loops/near/263869420" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/303200-sphere-eversion/topic/Constructing.20loops.html#263869420">(Dec 06 2021 at 15:48)</a>:</h4>
<p>I was not aware of <a href="https://leanprover-community.github.io/mathlib_docs/find/is_open_set_of_linear_independent">docs#is_open_set_of_linear_independent</a> --- this is useful.</p>



<a name="263869651"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/303200-sphere%20eversion/topic/Constructing%20loops/near/263869651" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/303200-sphere-eversion/topic/Constructing.20loops.html#263869651">(Dec 06 2021 at 15:49)</a>:</h4>
<p>What I really mean is: if the affine version is easy to deduce from the linear version we already have, then please do it. Otherwise, don't bother and stay with the finite-dimensional version if it's enough for your needs. No need to overgeneralize if it would only slow you down.</p>



<a name="263870099"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/303200-sphere%20eversion/topic/Constructing%20loops/near/263870099" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/303200-sphere-eversion/topic/Constructing.20loops.html#263870099">(Dec 06 2021 at 15:52)</a>:</h4>
<p>Understood.</p>



<a name="263880931"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/303200-sphere%20eversion/topic/Constructing%20loops/near/263880931" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="https://leanprover-community.github.io/archive/stream/303200-sphere-eversion/topic/Constructing.20loops.html#263880931">(Dec 06 2021 at 17:00)</a>:</h4>
<p>I also missed  <a href="https://leanprover-community.github.io/mathlib_docs/find/is_open_set_of_linear_independent">docs#is_open_set_of_linear_independent</a> when I was looking earlier. I think that the reduction is not that hard.</p>



<a name="263882576"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/303200-sphere%20eversion/topic/Constructing%20loops/near/263882576" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="https://leanprover-community.github.io/archive/stream/303200-sphere-eversion/topic/Constructing.20loops.html#263882576">(Dec 06 2021 at 17:10)</a>:</h4>
<p>I managed to do the reduction:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">is_open_affine_independent</span> <span class="o">{</span><span class="bp">ğ•œ</span> <span class="n">E</span> <span class="n">Î¹</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">nondiscrete_normed_field</span> <span class="bp">ğ•œ</span><span class="o">]</span>
  <span class="o">[</span><span class="n">normed_group</span> <span class="n">E</span><span class="o">]</span> <span class="o">[</span><span class="n">normed_space</span> <span class="bp">ğ•œ</span> <span class="n">E</span><span class="o">]</span> <span class="o">[</span><span class="n">complete_space</span> <span class="bp">ğ•œ</span><span class="o">]</span> <span class="o">[</span><span class="n">fintype</span> <span class="n">Î¹</span><span class="o">]</span> <span class="o">:</span>
  <span class="n">is_open</span> <span class="o">{</span><span class="n">p</span> <span class="o">:</span> <span class="n">Î¹</span> <span class="bp">â†’</span> <span class="n">F</span> <span class="bp">|</span> <span class="n">affine_independent</span> <span class="n">â„</span> <span class="n">p</span><span class="o">}</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">classical</span><span class="o">,</span>
  <span class="n">cases</span> <span class="n">is_empty_or_nonempty</span> <span class="n">Î¹</span><span class="o">,</span> <span class="o">{</span> <span class="n">resetI</span><span class="o">,</span> <span class="n">exact</span> <span class="n">is_open_discrete</span> <span class="n">_</span> <span class="o">},</span>
  <span class="n">obtain</span> <span class="o">âŸ¨</span><span class="n">iâ‚€</span><span class="o">âŸ©</span> <span class="o">:=</span> <span class="n">h</span><span class="o">,</span>
  <span class="n">simp_rw</span> <span class="o">[</span><span class="n">affine_independent_iff_linear_independent_vsub</span> <span class="n">â„</span> <span class="n">_</span> <span class="n">iâ‚€</span><span class="o">],</span>
  <span class="k">let</span> <span class="n">Î¹'</span> <span class="o">:=</span> <span class="o">{</span><span class="n">x</span> <span class="bp">//</span> <span class="n">x</span> <span class="bp">â‰ </span> <span class="n">iâ‚€</span><span class="o">},</span>
  <span class="n">haveI</span> <span class="o">:</span> <span class="n">fintype</span> <span class="n">Î¹'</span> <span class="o">:=</span> <span class="n">subtype.fintype</span> <span class="n">_</span><span class="o">,</span>
  <span class="n">convert_to</span>
    <span class="n">is_open</span> <span class="o">((</span><span class="bp">Î»</span> <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="n">Î¹</span> <span class="bp">â†’</span> <span class="n">F</span><span class="o">)</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="n">Î¹'</span><span class="o">),</span> <span class="n">p</span> <span class="n">i</span> <span class="bp">-áµ¥</span> <span class="n">p</span> <span class="n">iâ‚€</span><span class="o">)</span> <span class="bp">â»Â¹'</span> <span class="o">{</span><span class="n">p</span> <span class="o">:</span> <span class="n">Î¹'</span> <span class="bp">â†’</span> <span class="n">F</span> <span class="bp">|</span> <span class="n">linear_independent</span> <span class="n">â„</span> <span class="n">p</span><span class="o">}),</span>
  <span class="n">refine</span> <span class="n">is_open.preimage</span> <span class="n">_</span> <span class="n">is_open_set_of_linear_independent</span><span class="o">,</span>
  <span class="n">refine</span> <span class="n">continuous_pi</span> <span class="o">(</span><span class="bp">Î»</span> <span class="n">i'</span><span class="o">,</span> <span class="n">continuous.vsub</span> <span class="o">(</span><span class="n">continuous_apply</span> <span class="n">i'</span><span class="o">)</span> <span class="bp">$</span> <span class="n">continuous_apply</span> <span class="n">iâ‚€</span><span class="o">),</span>
<span class="kd">end</span>
</code></pre></div>



<a name="263885116"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/303200-sphere%20eversion/topic/Constructing%20loops/near/263885116" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="https://leanprover-community.github.io/archive/stream/303200-sphere-eversion/topic/Constructing.20loops.html#263885116">(Dec 06 2021 at 17:27)</a>:</h4>
<p><a href="https://leanprover-community.github.io/sphere-eversion/blueprint/chap-loops.html#lem:local_loops"><code>local_loops</code></a> is done! I double checked that the only axiom it used is the <code>sorry</code> in <code>smooth_surrounding</code>.</p>



<a name="273705878"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/303200-sphere%20eversion/topic/Constructing%20loops/near/273705878" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/303200-sphere-eversion/topic/Constructing.20loops.html#273705878">(Mar 01 2022 at 20:33)</a>:</h4>
<p><span class="user-mention" data-user-id="111080">@Floris van Doorn</span> I should have warned you that I modified the statement of <code>exists_loop</code> slightly (and haven't updated the blueprint yet). The new statement no longer assumes each <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi mathvariant="normal">Î©</mi><mi>x</mi></msub></mrow><annotation encoding="application/x-tex">\Omega_x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord">Î©</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">x</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> is connected.  The new statement should save some work in total. Also, I don't understand why we still need a <code>exists_loop'</code> now that <code>U</code> is gone.</p>



<a name="273786424"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/303200-sphere%20eversion/topic/Constructing%20loops/near/273786424" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="https://leanprover-community.github.io/archive/stream/303200-sphere-eversion/topic/Constructing.20loops.html#273786424">(Mar 02 2022 at 10:41)</a>:</h4>
<p>Oh good point. Now that <code>U</code> is gone, I'll try to put my proof sketch in <code>exists_loop</code>.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>