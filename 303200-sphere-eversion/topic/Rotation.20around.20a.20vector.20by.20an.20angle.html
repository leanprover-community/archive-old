---
layout: archive
title: Zulip Chat Archive
permalink: /stream/303200-sphere-eversion/topic/Rotation.20around.20a.20vector.20by.20an.20angle.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/303200-sphere-eversion/index.html">sphere eversion</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/303200-sphere-eversion/topic/Rotation.20around.20a.20vector.20by.20an.20angle.html">Rotation around a vector by an angle</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="290851246"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/303200-sphere%20eversion/topic/Rotation%20around%20a%20vector%20by%20an%20angle/near/290851246" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/303200-sphere-eversion/topic/Rotation.20around.20a.20vector.20by.20an.20angle.html#290851246">(Jul 26 2022 at 05:36)</a>:</h4>
<p><span class="user-mention" data-user-id="110031">@Patrick Massot</span> I was able to construct the rotation around a vector by an angle as an element of <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mn>3</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(3)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord">3</span><span class="mclose">)</span></span></span></span>, in the following form (using the constructions <code>unit_quaternions</code> and <code>unit_quaternions.to_matrix_hom</code> from my <a href="https://hrmacbeth.github.io/computations_in_lean/02_Using_Polyrith.html#double-cover-of-so-3">polyrith tutorial</a>):</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">local</span> <span class="kd">notation</span> <span class="bp">`</span><span class="n">ℛ</span><span class="bp">²`</span> <span class="o">:=</span> <span class="n">euclidean_space</span> <span class="n">ℝ</span> <span class="o">(</span><span class="n">fin</span> <span class="mi">2</span><span class="o">)</span>
<span class="kn">local</span> <span class="kd">notation</span> <span class="bp">`</span><span class="n">ℛ</span><span class="bp">³`</span> <span class="o">:=</span> <span class="n">euclidean_space</span> <span class="n">ℝ</span> <span class="o">(</span><span class="n">fin</span> <span class="mi">3</span><span class="o">)</span>

<span class="kn">local</span> <span class="kd">notation</span> <span class="bp">`𝕊¹`</span> <span class="o">:=</span> <span class="n">metric.sphere</span> <span class="o">(</span><span class="mi">0</span> <span class="o">:</span> <span class="n">ℛ</span><span class="bp">²</span><span class="o">)</span> <span class="mi">1</span>
<span class="kn">local</span> <span class="kd">notation</span> <span class="bp">`𝕊²`</span> <span class="o">:=</span> <span class="n">metric.sphere</span> <span class="o">(</span><span class="mi">0</span> <span class="o">:</span> <span class="n">ℛ</span><span class="bp">³</span><span class="o">)</span> <span class="mi">1</span>

<span class="kd">def</span> <span class="n">rotate_around</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">𝕊²</span><span class="o">)</span> <span class="o">(</span><span class="n">y</span> <span class="o">:</span> <span class="bp">𝕊¹</span><span class="o">)</span> <span class="o">:</span> <span class="n">unit_quaternions</span> <span class="o">:=</span>
<span class="o">⟨</span> <span class="o">(</span><span class="n">y</span> <span class="o">:</span> <span class="n">ℛ</span><span class="bp">²</span><span class="o">)</span> <span class="mi">0</span> <span class="bp">+</span> <span class="o">(</span><span class="n">y</span> <span class="o">:</span> <span class="n">ℛ</span><span class="bp">²</span><span class="o">)</span> <span class="mi">1</span> <span class="bp">•</span> <span class="o">(</span><span class="n">quaternion_algebra.mk</span> <span class="mi">0</span> <span class="o">((</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℛ</span><span class="bp">³</span><span class="o">)</span> <span class="mi">0</span><span class="o">)</span> <span class="o">((</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℛ</span><span class="bp">³</span><span class="o">)</span> <span class="mi">1</span><span class="o">)</span> <span class="o">((</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℛ</span><span class="bp">³</span><span class="o">)</span> <span class="mi">2</span><span class="o">)),</span> <span class="gr">sorry</span> <span class="o">⟩</span>

<span class="kn">local</span> <span class="kd">notation</span> <span class="bp">`↑ₘ`</span> <span class="o">:=</span> <span class="bp">@</span><span class="n">coe</span> <span class="o">(</span><span class="n">matrix.orthogonal_group</span> <span class="o">(</span><span class="n">fin</span> <span class="mi">3</span><span class="o">)</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">(</span><span class="n">matrix</span> <span class="o">(</span><span class="n">fin</span> <span class="mi">3</span><span class="o">)</span> <span class="o">(</span><span class="n">fin</span> <span class="mi">3</span><span class="o">)</span> <span class="n">ℝ</span><span class="o">)</span> <span class="n">_</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">𝕊²</span><span class="o">)</span> <span class="o">(</span><span class="n">y</span> <span class="o">:</span> <span class="bp">𝕊¹</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">matrix.mul_vec</span> <span class="o">(</span><span class="bp">↑ₘ</span><span class="o">(</span><span class="n">unit_quaternions.to_matrix_hom</span> <span class="o">(</span><span class="n">rotate_around</span> <span class="n">x</span> <span class="n">y</span><span class="o">)))</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℛ</span><span class="bp">³</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℛ</span><span class="bp">³</span><span class="o">)</span> <span class="o">:=</span>
<span class="gr">sorry</span>
</code></pre></div>
<p>I can go up or down in level of generality, let me know -- just wanted to run the first version past you.</p>



<a name="291143421"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/303200-sphere%20eversion/topic/Rotation%20around%20a%20vector%20by%20an%20angle/near/291143421" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/303200-sphere-eversion/topic/Rotation.20around.20a.20vector.20by.20an.20angle.html#291143421">(Jul 28 2022 at 05:39)</a>:</h4>
<p><span class="user-mention" data-user-id="110031">@Patrick Massot</span> I have a co-ordinate-free version now, but I didn't try to Lean it yet :). Let <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>V</mi></mrow><annotation encoding="application/x-tex">V</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.22222em;">V</span></span></span></span> be a three-dimensional oriented inner product space, with the inner product denoted <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">⟨</mo><mo>⋅</mo><mo separator="true">,</mo><mo>⋅</mo><mo stretchy="false">⟩</mo></mrow><annotation encoding="application/x-tex">\langle \cdot,\cdot\rangle</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">⟨</span><span class="mord">⋅</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">⋅</span><span class="mclose">⟩</span></span></span></span> and the volume form denoted <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">Ω</mi></mrow><annotation encoding="application/x-tex">\Omega</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord">Ω</span></span></span></span>.</p>
<p>We have the Hodge isomorphism between <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>V</mi></mrow><annotation encoding="application/x-tex">V</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.22222em;">V</span></span></span></span> and <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi mathvariant="normal">Λ</mi><mn>2</mn></msup><mo stretchy="false">(</mo><msup><mi>V</mi><mo>∗</mo></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\Lambda^2(V^*)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0641em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord">Λ</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6887em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">∗</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>, and the further isomorphism between <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi mathvariant="normal">Λ</mi><mn>2</mn></msup><mo stretchy="false">(</mo><msup><mi>V</mi><mo>∗</mo></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\Lambda^2(V^*)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0641em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord">Λ</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6887em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">∗</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span> and<br>
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mrow><mi mathvariant="fraktur">s</mi><mi mathvariant="fraktur">o</mi></mrow><mo stretchy="false">(</mo><mi>V</mi><mo stretchy="false">)</mo><mo>=</mo><mo stretchy="false">{</mo><mi>A</mi><mo>∈</mo><mi mathvariant="normal">End</mi><mo>⁡</mo><mo stretchy="false">(</mo><mi>V</mi><mo stretchy="false">)</mo><mo>:</mo><msup><mi>A</mi><mi>t</mi></msup><mo>+</mo><mi>A</mi><mo>=</mo><mn>0</mn><mo stretchy="false">}</mo><mi mathvariant="normal">.</mi></mrow><annotation encoding="application/x-tex">\mathfrak{so}(V)=\{A\in\operatorname{End}(V) : A^t+A=0\}.</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathfrak">so</span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord mathnormal">A</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mop"><span class="mord mathrm">End</span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8769em;vertical-align:-0.0833em;"></span><span class="mord"><span class="mord mathnormal">A</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7936em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">A</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">0</span><span class="mclose">}</span><span class="mord">.</span></span></span></span></p>
<p>The composition of these two isomorphisms can be written explicitly as sending <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>v</mi><mo>∈</mo><mi>V</mi></mrow><annotation encoding="application/x-tex">v\in V</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.22222em;">V</span></span></span></span> to the element <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>A</mi><mi>v</mi></msub><mo>∈</mo><mi mathvariant="normal">End</mi><mo>⁡</mo><mo stretchy="false">(</mo><mi>V</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">A_v\in\operatorname{End}(V)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">v</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mop"><span class="mord mathrm">End</span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="mclose">)</span></span></span></span> defined as follows: for <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>w</mi><mo>∈</mo><mi>V</mi></mrow><annotation encoding="application/x-tex">w\in V</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.22222em;">V</span></span></span></span>, <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>A</mi><mi>v</mi></msub><mo stretchy="false">(</mo><mi>w</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">A_v(w)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">v</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mclose">)</span></span></span></span> is the unique element of <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>V</mi></mrow><annotation encoding="application/x-tex">V</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.22222em;">V</span></span></span></span> such that for all <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>u</mi><mo>∈</mo><mi>V</mi></mrow><annotation encoding="application/x-tex">u\in V</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mord mathnormal">u</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.22222em;">V</span></span></span></span>,<br>
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">⟨</mo><msub><mi>A</mi><mi>v</mi></msub><mo stretchy="false">(</mo><mi>w</mi><mo stretchy="false">)</mo><mo separator="true">,</mo><mi>u</mi><mo stretchy="false">⟩</mo><mo>=</mo><mi mathvariant="normal">Ω</mi><mo stretchy="false">(</mo><mi>v</mi><mo separator="true">,</mo><mi>w</mi><mo separator="true">,</mo><mi>u</mi><mo stretchy="false">)</mo><mi mathvariant="normal">.</mi></mrow><annotation encoding="application/x-tex">\langle A_v(w),u\rangle=\Omega(v,w,u).</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">⟨</span><span class="mord"><span class="mord mathnormal">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">v</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">u</span><span class="mclose">⟩</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">Ω</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">u</span><span class="mclose">)</span><span class="mord">.</span></span></span></span><br>
One needs to check that in fact <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mi>A</mi><mi>v</mi><mi>t</mi></msubsup><mo>+</mo><msub><mi>A</mi><mi>v</mi></msub><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">A_v^t+A_v=0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0406em;vertical-align:-0.247em;"></span><span class="mord"><span class="mord mathnormal">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.7936em;"><span style="top:-2.453em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">v</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">v</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span></span></span></span>, so that <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>A</mi><mi>v</mi></msub><mo>∈</mo><mrow><mi mathvariant="fraktur">s</mi><mi mathvariant="fraktur">o</mi></mrow><mo stretchy="false">(</mo><mi>V</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">A_v\in\mathfrak{so}(V)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">v</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathfrak">so</span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="mclose">)</span></span></span></span>.</p>
<p>Now denote by <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>S</mi><mn>2</mn></msup><mo stretchy="false">(</mo><mi>v</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">S^2(v)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0641em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mclose">)</span></span></span></span> the 2-sphere in <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>V</mi></mrow><annotation encoding="application/x-tex">V</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.22222em;">V</span></span></span></span>, and define a map from <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>S</mi><mn>2</mn></msup><mo stretchy="false">(</mo><mi>V</mi><mo stretchy="false">)</mo><mo>×</mo><mi mathvariant="double-struck">R</mi></mrow><annotation encoding="application/x-tex">S^2(V)\times \mathbb{R}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0641em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6889em;"></span><span class="mord mathbb">R</span></span></span></span> to <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mi>O</mi><mo stretchy="false">(</mo><mi>V</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">SO(V)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">SO</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="mclose">)</span></span></span></span> by the endomorphism exponential<br>
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mi>v</mi><mo separator="true">,</mo><mi>t</mi><mo stretchy="false">)</mo><mo>↦</mo><mi>exp</mi><mo>⁡</mo><mo stretchy="false">(</mo><mi>t</mi><msub><mi>A</mi><mi>v</mi></msub><mo stretchy="false">)</mo><mi mathvariant="normal">.</mi></mrow><annotation encoding="application/x-tex">(v,t)\mapsto \exp(tA_v).</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">t</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">↦</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mop">exp</span><span class="mopen">(</span><span class="mord mathnormal">t</span><span class="mord"><span class="mord mathnormal">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">v</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mord">.</span></span></span></span><br>
It can be checked that this is <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2</mn><mi>π</mi></mrow><annotation encoding="application/x-tex">2\pi</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">2</span><span class="mord mathnormal" style="margin-right:0.03588em;">π</span></span></span></span>-periodic, so descends to a map<br>
 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>S</mi><mn>2</mn></msup><mo stretchy="false">(</mo><mi>V</mi><mo stretchy="false">)</mo><mo>×</mo><msup><mi>S</mi><mn>1</mn></msup><mo>→</mo><mi>S</mi><mi>O</mi><mo stretchy="false">(</mo><mi>V</mi><mo stretchy="false">)</mo><mi mathvariant="normal">.</mi></mrow><annotation encoding="application/x-tex">S^2(V)\times S^1 \to SO(V).</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0641em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">SO</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="mclose">)</span><span class="mord">.</span></span></span></span></p>



<a name="291178008"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/303200-sphere%20eversion/topic/Rotation%20around%20a%20vector%20by%20an%20angle/near/291178008" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/303200-sphere-eversion/topic/Rotation.20around.20a.20vector.20by.20an.20angle.html#291178008">(Jul 28 2022 at 12:59)</a>:</h4>
<p>Thanks Heather! I answer late because I took a break after coming back from Providence. Of course the coordinate-free version looks nice but, as I told you in Providence, the test case for us is to make you can easily prove that the map sending <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mi>v</mi><mo separator="true">,</mo><mi>t</mi><mo separator="true">,</mo><mi>w</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(v, t, w)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">t</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mclose">)</span></span></span></span> to <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>exp</mi><mo>⁡</mo><mo stretchy="false">(</mo><mi>t</mi><msub><mi>A</mi><mi>v</mi></msub><mo stretchy="false">)</mo><mi>w</mi></mrow><annotation encoding="application/x-tex">\exp(tA_v)w</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mop">exp</span><span class="mopen">(</span><span class="mord mathnormal">t</span><span class="mord"><span class="mord mathnormal">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">v</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span></span></span></span> is smooth.</p>



<a name="291178074"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/303200-sphere%20eversion/topic/Rotation%20around%20a%20vector%20by%20an%20angle/near/291178074" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/303200-sphere-eversion/topic/Rotation.20around.20a.20vector.20by.20an.20angle.html#291178074">(Jul 28 2022 at 13:00)</a>:</h4>
<p>Note that I don't really need that the version where <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>t</mi></mrow><annotation encoding="application/x-tex">t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6151em;"></span><span class="mord mathnormal">t</span></span></span></span> is in $\mathbb{S}^1$$ is smooth. Our <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>t</mi></mrow><annotation encoding="application/x-tex">t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6151em;"></span><span class="mord mathnormal">t</span></span></span></span> will naturally be a real number.</p>



<a name="291243749"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/303200-sphere%20eversion/topic/Rotation%20around%20a%20vector%20by%20an%20angle/near/291243749" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/303200-sphere-eversion/topic/Rotation.20around.20a.20vector.20by.20an.20angle.html#291243749">(Jul 28 2022 at 19:56)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110031">Patrick Massot</span> <a href="#narrow/stream/303200-sphere-eversion/topic/Rotation.20around.20a.20vector.20by.20an.20angle/near/291178008">said</a>:</p>
<blockquote>
<p>Of course the coordinate-free version looks nice but, as I told you in Providence, the test case for us is to make you can easily prove that the map sending <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mi>v</mi><mo separator="true">,</mo><mi>t</mi><mo separator="true">,</mo><mi>w</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(v, t, w)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">t</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mclose">)</span></span></span></span> to <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>exp</mi><mo>⁡</mo><mo stretchy="false">(</mo><mi>t</mi><msub><mi>A</mi><mi>v</mi></msub><mo stretchy="false">)</mo><mi>w</mi></mrow><annotation encoding="application/x-tex">\exp(tA_v)w</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mop">exp</span><span class="mopen">(</span><span class="mord mathnormal">t</span><span class="mord"><span class="mord mathnormal">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">v</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span></span></span></span> is smooth.</p>
</blockquote>
<p>OK, this sounds like a challenge :). For the quaternion version the smoothness looks pretty doable, for the co-ordinate-free version the hard part (modulo current mathlib) seems to be the smoothness of the endomorphism exponential.</p>
<p>Do you have written down somewhere the other properties you need it confirmed to satisfy?  E.g. I imagine you need that <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>t</mi><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">t=0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6151em;"></span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span></span></span></span> gives the identity and that for all <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>v</mi></mrow><annotation encoding="application/x-tex">v</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span></span></span></span> it fixes <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>v</mi></mrow><annotation encoding="application/x-tex">v</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span></span></span></span>?  What else?</p>



<a name="291244231"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/303200-sphere%20eversion/topic/Rotation%20around%20a%20vector%20by%20an%20angle/near/291244231" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/303200-sphere-eversion/topic/Rotation.20around.20a.20vector.20by.20an.20angle.html#291244231">(Jul 28 2022 at 20:00)</a>:</h4>
<p><span class="user-mention silent" data-user-id="260507">Heather Macbeth</span> <a href="#narrow/stream/303200-sphere-eversion/topic/Rotation.20around.20a.20vector.20by.20an.20angle/near/291243749">said</a>:</p>
<blockquote>
<p>for the co-ordinate-free version the hard part (modulo current mathlib) seems to be the smoothness of the endomorphism exponential.</p>
</blockquote>
<p>I think there's also a bit of a trick available, some formula like<br>
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>exp</mi><mo>⁡</mo><mo stretchy="false">(</mo><mi>t</mi><msub><mi>A</mi><mi>v</mi></msub><mo stretchy="false">)</mo><mo>=</mo><msub><mrow><mi mathvariant="normal">Proj</mi><mo>⁡</mo></mrow><mi>v</mi></msub><mo>+</mo><mi>cos</mi><mo>⁡</mo><mo stretchy="false">(</mo><mi>t</mi><mo stretchy="false">)</mo><msub><mrow><mi mathvariant="normal">Proj</mi><mo>⁡</mo></mrow><msup><mi>v</mi><mo>⊥</mo></msup></msub><mo>+</mo><mi>sin</mi><mo>⁡</mo><mo stretchy="false">(</mo><mi>t</mi><mo stretchy="false">)</mo><msub><mi>A</mi><mi>v</mi></msub></mrow><annotation encoding="application/x-tex">\exp(tA_v)=\operatorname{Proj}_v+\cos(t)\operatorname{Proj}_{v^\perp}+\sin(t)A_v</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mop">exp</span><span class="mopen">(</span><span class="mord mathnormal">t</span><span class="mord"><span class="mord mathnormal">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">v</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mop"><span class="mop"><span class="mord mathrm">Proj</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.0573em;"><span style="top:-2.4559em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">v</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2441em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">+</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop">cos</span><span class="mopen">(</span><span class="mord mathnormal">t</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop"><span class="mop"><span class="mord mathrm">Proj</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3033em;"><span style="top:-2.4559em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.782em;"><span style="top:-2.786em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mrel mtight">⊥</span></span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2441em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">+</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop">sin</span><span class="mopen">(</span><span class="mord mathnormal">t</span><span class="mclose">)</span><span class="mord"><span class="mord mathnormal">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">v</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><br>
should hold and it is likely easier to prove smoothness in this representation.</p>



<a name="291251820"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/303200-sphere%20eversion/topic/Rotation%20around%20a%20vector%20by%20an%20angle/near/291251820" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/303200-sphere-eversion/topic/Rotation.20around.20a.20vector.20by.20an.20angle.html#291251820">(Jul 28 2022 at 21:03)</a>:</h4>
<p>I also need that for  <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>t</mi><mo>=</mo><mi>π</mi></mrow><annotation encoding="application/x-tex"> t=\pi </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6151em;"></span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">π</span></span></span></span>  you get -id on <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>v</mi><mo>⊥</mo></msup></mrow><annotation encoding="application/x-tex">v^\perp</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8491em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8491em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mrel mtight">⊥</span></span></span></span></span></span></span></span></span></span></span>.</p>



<a name="291256203"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/303200-sphere%20eversion/topic/Rotation%20around%20a%20vector%20by%20an%20angle/near/291256203" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/303200-sphere-eversion/topic/Rotation.20around.20a.20vector.20by.20an.20angle.html#291256203">(Jul 28 2022 at 21:46)</a>:</h4>
<p>I also found <a href="https://en.m.wikipedia.org/wiki/Euler%E2%80%93Rodrigues_formula">https://en.m.wikipedia.org/wiki/Euler%E2%80%93Rodrigues_formula</a> which a more elementary version of the quaternion story.</p>



<a name="291271912"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/303200-sphere%20eversion/topic/Rotation%20around%20a%20vector%20by%20an%20angle/near/291271912" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joseph Myers <a href="https://leanprover-community.github.io/archive/stream/303200-sphere-eversion/topic/Rotation.20around.20a.20vector.20by.20an.20angle.html#291271912">(Jul 29 2022 at 00:53)</a>:</h4>
<p>In oriented two dimensions we already have <a href="https://leanprover-community.github.io/mathlib_docs/find/orientation.rotation">docs#orientation.rotation</a> - my inclination for how to go from two dimensions to higher (not just three) dimensions (with only the two-dimensional subspace needing to have an orientation specified) would be to define the operation that goes from a <code>linear_isometry_equiv</code> of a subspace of an inner product space to a subspace of a possibly different inner product space, and another <code>linear_isometry_equiv</code> of their orthogonal complements, to a <code>linear_isometry_equiv</code> of the whole space (and then apply that operation with one isometry being two-dimensional rotation and the other being the identity to produce a higher-dimensional rotation). I don't know how readily that would give whatever smoothness properties you need, but we do have <a href="https://leanprover-community.github.io/mathlib_docs/find/orientation.rotation_pi">docs#orientation.rotation_pi</a> saying what rotation by pi does.</p>



<a name="291289616"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/303200-sphere%20eversion/topic/Rotation%20around%20a%20vector%20by%20an%20angle/near/291289616" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/303200-sphere-eversion/topic/Rotation.20around.20a.20vector.20by.20an.20angle.html#291289616">(Jul 29 2022 at 07:05)</a>:</h4>
<p><span class="user-mention" data-user-id="110031">@Patrick Massot</span> I <a href="https://github.com/leanprover-community/sphere-eversion/commit/c72a3d2004d71774d14b958f0c814de7987d00e9">pushed</a> the construction, the smoothness, and the three facts you identified.</p>
<p>(For the smoothness, so far I proved smoothness of the operation considered as of type</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="o">(</span><span class="n">E</span> <span class="bp">×</span> <span class="n">ℝ</span><span class="o">)</span> <span class="bp">→</span> <span class="o">(</span><span class="n">E</span> <span class="bp">→</span><span class="n">L</span><span class="o">[</span><span class="n">ℝ</span><span class="o">]</span> <span class="n">E</span><span class="o">)</span>
</code></pre></div>
<p>But it should be a one-liner to deduce the smoothness of the version</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="o">(</span><span class="n">E</span> <span class="bp">×</span> <span class="n">ℝ</span> <span class="bp">×</span> <span class="n">E</span><span class="o">)</span> <span class="bp">→</span> <span class="n">E</span>
</code></pre></div>
<p>if that's what you need.)</p>



<a name="291289709"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/303200-sphere%20eversion/topic/Rotation%20around%20a%20vector%20by%20an%20angle/near/291289709" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/303200-sphere-eversion/topic/Rotation.20around.20a.20vector.20by.20an.20angle.html#291289709">(Jul 29 2022 at 07:07)</a>:</h4>
<p>But I'm a bit suspicious.  So far I barely used anything -- I didn't even need that the space was three-dimensional, or that the "orientation" three-form was nonzero (let alone compatible with the metric).  Maybe there are other properties you need which will require these facts?</p>



<a name="291301541"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/303200-sphere%20eversion/topic/Rotation%20around%20a%20vector%20by%20an%20angle/near/291301541" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/303200-sphere-eversion/topic/Rotation.20around.20a.20vector.20by.20an.20angle.html#291301541">(Jul 29 2022 at 09:43)</a>:</h4>
<p>Nice! The real test is to build the homotopy of formal immersion defined in the last proof of the blueprint.</p>



<a name="291806721"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/303200-sphere%20eversion/topic/Rotation%20around%20a%20vector%20by%20an%20angle/near/291806721" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/303200-sphere-eversion/topic/Rotation.20around.20a.20vector.20by.20an.20angle.html#291806721">(Aug 03 2022 at 06:41)</a>:</h4>
<p><span class="user-mention" data-user-id="110031">@Patrick Massot</span> I've been looking at this.  It seems to me that to make the homotopy of formal immersions, I need three ingredients:</p>
<ol>
<li>for the unit sphere <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mo stretchy="false">(</mo><mi>E</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">S(E)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="mclose">)</span></span></span></span> in <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>E</mi></mrow><annotation encoding="application/x-tex">E</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span></span></span></span>, there is a canonical smooth section of the bundle whose fibre over <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span> is <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">Hom</mi><mo>⁡</mo><mo stretchy="false">(</mo><msub><mi>T</mi><mi>x</mi></msub><mi>S</mi><mo stretchy="false">(</mo><mi>E</mi><mo stretchy="false">)</mo><mo separator="true">,</mo><mi>E</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\operatorname{Hom}(T_xS(E), E)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mop"><span class="mord mathrm">Hom</span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">x</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="mclose">)</span></span></span></span>, which comes from thinking of the tangent spaces of the embedding as living in <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>E</mi></mrow><annotation encoding="application/x-tex">E</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span></span></span></span></li>
<li>The discussion about rotations gives a smooth map from <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mo stretchy="false">(</mo><mi>E</mi><mo stretchy="false">)</mo><mo>×</mo><mi mathvariant="double-struck">R</mi></mrow><annotation encoding="application/x-tex">S(E)\times \mathbb{R}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6889em;"></span><span class="mord mathbb">R</span></span></span></span> to <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">Hom</mi><mo>⁡</mo><mo stretchy="false">(</mo><mi>E</mi><mo separator="true">,</mo><mi>E</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\operatorname{Hom}(E, E)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mop"><span class="mord mathrm">Hom</span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="mclose">)</span></span></span></span></li>
<li>for a manifold <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>M</mi></mrow><annotation encoding="application/x-tex">M</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span></span></span></span> and normed spaces <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>E</mi></mrow><annotation encoding="application/x-tex">E</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span></span></span></span>, <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>F</mi></mrow><annotation encoding="application/x-tex">F</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span></span></span></span>, and a smooth section of the bundle whose fibre over <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span> is <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">Hom</mi><mo>⁡</mo><mo stretchy="false">(</mo><msub><mi>T</mi><mi>x</mi></msub><mi>M</mi><mo separator="true">,</mo><mi>E</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\operatorname{Hom}(T_xM, E)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mop"><span class="mord mathrm">Hom</span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">x</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="mclose">)</span></span></span></span>, and a smooth map from <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>M</mi><mo>×</mo><mi mathvariant="double-struck">R</mi></mrow><annotation encoding="application/x-tex">M\times\mathbb{R}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6889em;"></span><span class="mord mathbb">R</span></span></span></span> to <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">Hom</mi><mo>⁡</mo><mo stretchy="false">(</mo><mi>E</mi><mo separator="true">,</mo><mi>F</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\operatorname{Hom}(E, F)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mop"><span class="mord mathrm">Hom</span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mclose">)</span></span></span></span>, these can be composed to give a homotopy of 1-jet sections from <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>M</mi></mrow><annotation encoding="application/x-tex">M</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span></span></span></span> to <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>F</mi></mrow><annotation encoding="application/x-tex">F</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span></span></span></span>.</li>
</ol>
<p>Sound right?  I have started thinking about building (1), so far just have the statement,</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">def</span> <span class="n">hyperplane_map</span> <span class="o">(</span><span class="n">v</span> <span class="o">:</span> <span class="n">sphere</span> <span class="o">(</span><span class="mi">0</span><span class="o">:</span><span class="n">E</span><span class="o">)</span> <span class="mi">1</span><span class="o">)</span> <span class="o">:</span>
  <span class="o">((</span><span class="n">tangent_bundle_core</span> <span class="o">(</span><span class="bp">𝓡</span> <span class="n">n</span><span class="o">)</span> <span class="o">(</span><span class="n">sphere</span> <span class="o">(</span><span class="mi">0</span><span class="o">:</span><span class="n">E</span><span class="o">)</span> <span class="mi">1</span><span class="o">))</span><span class="bp">.</span><span class="n">hom</span>
    <span class="o">(</span><span class="n">trivial_basic_smooth_vector_bundle_core</span> <span class="o">(</span><span class="bp">𝓡</span> <span class="n">n</span><span class="o">)</span>
      <span class="o">(</span><span class="n">sphere</span> <span class="o">(</span><span class="mi">0</span><span class="o">:</span><span class="n">E</span><span class="o">)</span> <span class="mi">1</span><span class="o">)</span> <span class="n">E</span><span class="o">))</span><span class="bp">.</span><span class="n">to_topological_vector_bundle_core.total_space</span> <span class="o">:=</span>
<span class="o">⟨</span><span class="n">v</span><span class="o">,</span> <span class="o">(</span><span class="n">submodule.subtypeL</span> <span class="n">_</span><span class="o">)</span> <span class="bp">∘</span><span class="n">L</span>
    <span class="o">((</span><span class="n">orthonormal_basis.from_orthogonal_span_singleton</span> <span class="n">n</span>
    <span class="o">(</span><span class="n">ne_zero_of_mem_unit_sphere</span> <span class="o">(</span><span class="bp">-</span><span class="n">v</span><span class="o">)))</span><span class="bp">.</span><span class="n">repr.symm.to_continuous_linear_equiv</span>
      <span class="o">:</span> <span class="n">euclidean_space</span> <span class="n">ℝ</span> <span class="o">(</span><span class="n">fin</span> <span class="n">n</span><span class="o">)</span> <span class="bp">→</span><span class="n">L</span><span class="o">[</span><span class="n">ℝ</span><span class="o">]</span> <span class="o">(</span><span class="n">ℝ</span> <span class="bp">∙</span> <span class="o">(</span><span class="bp">↑</span><span class="o">(</span><span class="bp">-</span><span class="n">v</span><span class="o">):</span><span class="n">E</span><span class="o">))</span><span class="bp">ᗮ</span><span class="o">)⟩</span>

<span class="kd">example</span> <span class="o">:</span> <span class="n">smooth</span> <span class="o">(</span><span class="bp">𝓡</span> <span class="n">n</span><span class="o">)</span> <span class="o">((</span><span class="bp">𝓡</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">prod</span> <span class="bp">𝓘</span><span class="o">(</span><span class="n">ℝ</span><span class="o">,</span> <span class="n">euclidean_space</span> <span class="n">ℝ</span> <span class="o">(</span><span class="n">fin</span> <span class="n">n</span><span class="o">)</span> <span class="bp">→</span><span class="n">L</span><span class="o">[</span><span class="n">ℝ</span><span class="o">]</span> <span class="n">E</span><span class="o">))</span> <span class="o">(</span><span class="n">hyperplane_map</span> <span class="n">E</span> <span class="n">n</span><span class="o">)</span> <span class="o">:=</span>
<span class="gr">sorry</span>
</code></pre></div>



<a name="291806748"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/303200-sphere%20eversion/topic/Rotation%20around%20a%20vector%20by%20an%20angle/near/291806748" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/303200-sphere-eversion/topic/Rotation.20around.20a.20vector.20by.20an.20angle.html#291806748">(Aug 03 2022 at 06:42)</a>:</h4>
<p>Note: This is just to build it as a homotopy of 1-jet sections, not yet to make it a homotopy of formal immersions.</p>



<a name="291825026"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/303200-sphere%20eversion/topic/Rotation%20around%20a%20vector%20by%20an%20angle/near/291825026" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/303200-sphere-eversion/topic/Rotation.20around.20a.20vector.20by.20an.20angle.html#291825026">(Aug 03 2022 at 09:50)</a>:</h4>
<p>For 1, we are indeed punished for not having submanifolds in mathlib. However I think of this map as the derivative <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>T</mi><mi>v</mi></msub><mi>ι</mi><mo>:</mo><msub><mi>T</mi><mi>v</mi></msub><mi>S</mi><mo stretchy="false">(</mo><mi>E</mi><mo stretchy="false">)</mo><mo>→</mo><msub><mi>T</mi><mrow><mi>ι</mi><mo stretchy="false">(</mo><mi>v</mi><mo stretchy="false">)</mo></mrow></msub><mi>E</mi></mrow><annotation encoding="application/x-tex">T_v\iota : T_vS(E) \to T_{\iota(v)}E</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">v</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathnormal">ι</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">v</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.0385em;vertical-align:-0.3552em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.5198em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">ι</span><span class="mopen mtight">(</span><span class="mord mathnormal mtight" style="margin-right:0.03588em;">v</span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.3552em;"><span></span></span></span></span></span></span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span></span></span></span> of the inclusion map <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>ι</mi></mrow><annotation encoding="application/x-tex">\iota</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">ι</span></span></span></span> composed with the canonical identification of <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>T</mi><mi>e</mi></msub><mi>E</mi></mrow><annotation encoding="application/x-tex">T_eE</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">e</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span></span></span></span> with <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>E</mi></mrow><annotation encoding="application/x-tex">E</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span></span></span></span> for all <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>e</mi></mrow><annotation encoding="application/x-tex">e</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">e</span></span></span></span>. There shouldn't be anything specific to spheres. Also I don't understand why <code>-v</code> enters your code here.</p>



<a name="295219200"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/303200-sphere%20eversion/topic/Rotation%20around%20a%20vector%20by%20an%20angle/near/295219200" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/303200-sphere-eversion/topic/Rotation.20around.20a.20vector.20by.20an.20angle.html#295219200">(Aug 25 2022 at 12:44)</a>:</h4>
<p><span class="user-mention" data-user-id="260507">@Heather Macbeth</span> do you have any update here?</p>



<a name="296286029"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/303200-sphere%20eversion/topic/Rotation%20around%20a%20vector%20by%20an%20angle/near/296286029" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/303200-sphere-eversion/topic/Rotation.20around.20a.20vector.20by.20an.20angle.html#296286029">(Aug 31 2022 at 09:21)</a>:</h4>
<p>Hi, <span class="user-mention" data-user-id="110031">@Patrick Massot</span> and all.  After the helpful message of Patrick, I hit decision paralysis a few weeks ago when looking a little more closely at <span class="user-mention" data-user-id="111080">@Floris van Doorn</span>'s work on constructing the pullback as a smooth bundle in certain situations (<a href="https://github.com/leanprover-community/sphere-eversion/blob/ba3ab0478213c8d20f3d4829dff54f61ac8217c5/src/to_mathlib/geometry/manifold/vector_bundle/basic_core_constructions.lean#L58">when the charts line up properly</a>). </p>
<p>I agree with Patrick's suggested approach here <span aria-label="light bulb" class="emoji emoji-1f4a1" role="img" title="light bulb">:light_bulb:</span><br>
<span class="user-mention silent" data-user-id="110031">Patrick Massot</span> <a href="#narrow/stream/303200-sphere-eversion/topic/Rotation.20around.20a.20vector.20by.20an.20angle/near/291825026">said</a>:</p>
<blockquote>
<p>However I think of this map as the derivative <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>T</mi><mi>v</mi></msub><mi>ι</mi><mo>:</mo><msub><mi>T</mi><mi>v</mi></msub><mi>S</mi><mo stretchy="false">(</mo><mi>E</mi><mo stretchy="false">)</mo><mo>→</mo><msub><mi>T</mi><mrow><mi>ι</mi><mo stretchy="false">(</mo><mi>v</mi><mo stretchy="false">)</mo></mrow></msub><mi>E</mi></mrow><annotation encoding="application/x-tex">T_v\iota : T_vS(E) \to T_{\iota(v)}E</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">v</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathnormal">ι</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">v</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.0385em;vertical-align:-0.3552em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.5198em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">ι</span><span class="mopen mtight">(</span><span class="mord mathnormal mtight" style="margin-right:0.03588em;">v</span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.3552em;"><span></span></span></span></span></span></span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span></span></span></span> of the inclusion map <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>ι</mi></mrow><annotation encoding="application/x-tex">\iota</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">ι</span></span></span></span> composed with the canonical identification of <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>T</mi><mi>e</mi></msub><mi>E</mi></mrow><annotation encoding="application/x-tex">T_eE</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">e</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span></span></span></span> with <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>E</mi></mrow><annotation encoding="application/x-tex">E</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span></span></span></span> for all <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>e</mi></mrow><annotation encoding="application/x-tex">e</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">e</span></span></span></span>. </p>
</blockquote>
<p>but does that mean I should explicitly construct another special-case instance of the pullback, analogous to the ones for <a href="https://github.com/leanprover-community/sphere-eversion/blob/ba3ab0478213c8d20f3d4829dff54f61ac8217c5/src/to_mathlib/geometry/manifold/vector_bundle/basic_core_constructions.lean#L110"><code>prod_fst</code> and <code>prod_snd</code></a>, with my instance being (say) the one where the target of the map has a single chart?  Or is there maybe a way of avoiding such a construction and instead re-using the <code>prod_fst</code>/<code>prod_snd</code> ones, by some other clever exploitation of the "product trick"?</p>
<p>Anyway, sorry it took so long for me to summarize my thoughts here; looking forward to hearing others' thoughts.</p>



<a name="296286654"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/303200-sphere%20eversion/topic/Rotation%20around%20a%20vector%20by%20an%20angle/near/296286654" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/303200-sphere-eversion/topic/Rotation.20around.20a.20vector.20by.20an.20angle.html#296286654">(Aug 31 2022 at 09:25)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110031">Patrick Massot</span> <a href="#narrow/stream/303200-sphere-eversion/topic/Rotation.20around.20a.20vector.20by.20an.20angle/near/291825026">said</a>:</p>
<blockquote>
<p>Also I don't understand why <code>-v</code> enters your code here.</p>
</blockquote>
<p>By the way, this was a consequence of working too specifically with the charts of the sphere, rather than charts of a general source manifold.  The charts of the sphere are stereographic projections centred around the antipodes of the base point.</p>



<a name="296287416"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/303200-sphere%20eversion/topic/Rotation%20around%20a%20vector%20by%20an%20angle/near/296287416" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/303200-sphere-eversion/topic/Rotation.20around.20a.20vector.20by.20an.20angle.html#296287416">(Aug 31 2022 at 09:30)</a>:</h4>
<p>I don't know what is the best construction from a library building point of view, but I would welcome any hack that can get us this map as soon as possible.</p>



<a name="296295909"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/303200-sphere%20eversion/topic/Rotation%20around%20a%20vector%20by%20an%20angle/near/296295909" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="https://leanprover-community.github.io/archive/stream/303200-sphere-eversion/topic/Rotation.20around.20a.20vector.20by.20an.20angle.html#296295909">(Aug 31 2022 at 10:28)</a>:</h4>
<p>I tried to read up on what you're trying to do here, so I might be misunderstanding. <br>
I'm not sure why you would need to construct another pullback of smooth vector bundles. For <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>T</mi><mi>v</mi></msub><mi>ι</mi></mrow><annotation encoding="application/x-tex">T_v\iota</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">v</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathnormal">ι</span></span></span></span> you can write <code>mfderiv _ _ subtype.val</code>, and the corresponding section is just <a href="https://github.com/leanprover-community/sphere-eversion/blob/ba3ab0478213c8d20f3d4829dff54f61ac8217c5/src/global/one_jet_bundle.lean#L199"><code>one_jet_ext</code></a> or <a href="https://github.com/leanprover-community/sphere-eversion/blob/ba3ab0478213c8d20f3d4829dff54f61ac8217c5/src/global/one_jet_sec.lean#L91"><code>one_jet_ext_sec</code></a> applied to <code>subtype.val</code>, or am I misunderstanding what you're trying to do?</p>



<a name="296764382"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/303200-sphere%20eversion/topic/Rotation%20around%20a%20vector%20by%20an%20angle/near/296764382" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/303200-sphere-eversion/topic/Rotation.20around.20a.20vector.20by.20an.20angle.html#296764382">(Sep 02 2022 at 07:28)</a>:</h4>
<p><span class="user-mention" data-user-id="111080">@Floris van Doorn</span> Thanks for the quick reply, I tried to write out what I wanted more explicitly, see this branch:<br>
<a href="https://github.com/leanprover-community/sphere-eversion/tree/naive-homotopy">https://github.com/leanprover-community/sphere-eversion/tree/naive-homotopy</a><br>
Effectively, for maps with target in a normed space <code>V</code>, I am writing glue between your point of view (one-jet sections considered as sections of the product manifold etc. etc.) and an alternative point of view (sections of the smooth vector bundle of endomorphisms from the tangent space to V).</p>
<p>Are the three sorries in <code>global/twist_one_jet_sec</code> things you've thought about/already proved somewhere?  Effectively these are stating the fact "tangent bundle of <code>V</code> is canonically trivialized" in convenient ways.</p>



<a name="296764505"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/303200-sphere%20eversion/topic/Rotation%20around%20a%20vector%20by%20an%20angle/near/296764505" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/303200-sphere-eversion/topic/Rotation.20around.20a.20vector.20by.20an.20angle.html#296764505">(Sep 02 2022 at 07:29)</a>:</h4>
<p>note: everything is type-correct, but because of the exploitation of defeq for fibres of bundles throughout the manifolds library, I'm only about 75% sure that I have written what I mean ...</p>



<a name="296771560"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/303200-sphere%20eversion/topic/Rotation%20around%20a%20vector%20by%20an%20angle/near/296771560" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/303200-sphere-eversion/topic/Rotation.20around.20a.20vector.20by.20an.20angle.html#296771560">(Sep 02 2022 at 08:24)</a>:</h4>
<p><span class="user-mention silent" data-user-id="260507">Heather Macbeth</span> <a href="#narrow/stream/303200-sphere-eversion/topic/Rotation.20around.20a.20vector.20by.20an.20angle/near/296764505">said</a>:</p>
<blockquote>
<p>note: everything is type-correct, but because of the exploitation of defeq for fibres of bundles throughout the manifolds library, I'm only about 75% sure that I have written what I mean ...</p>
</blockquote>
<p>That's a very interesting point! The library was written to avoid dependent type hell as much as possible, and now it's backfiring :-)</p>



<a name="297185166"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/303200-sphere%20eversion/topic/Rotation%20around%20a%20vector%20by%20an%20angle/near/297185166" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="https://leanprover-community.github.io/archive/stream/303200-sphere-eversion/topic/Rotation.20around.20a.20vector.20by.20an.20angle.html#297185166">(Sep 05 2022 at 08:28)</a>:</h4>
<p>Thanks Heather. These sorry's are not something I have proven, but they should be easily provable from tools I wrote for the 1-jet bundles. For 1-jet bundles I proved <a href="https://github.com/leanprover-community/sphere-eversion/blob/4ca92bf58f76c60d176d4d33b8459d332041e7ea/src/global/one_jet_bundle.lean#L226"><code>smooth_at_one_jet_bundle</code></a>, which precisely characterizes the smooth functions into a 1-jet bundle (<a href="https://github.com/leanprover-community/sphere-eversion/blob/master/src/to_mathlib/geometry/manifold/misc_manifold.lean#L614"><code>in_coordinates</code></a> is an appropriate pre- and post-composition with coordinate changes)</p>



<a name="297185313"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/303200-sphere%20eversion/topic/Rotation%20around%20a%20vector%20by%20an%20angle/near/297185313" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="https://leanprover-community.github.io/archive/stream/303200-sphere-eversion/topic/Rotation.20around.20a.20vector.20by.20an.20angle.html#297185313">(Sep 05 2022 at 08:30)</a>:</h4>
<p>If you want, I can work on these tools and prove these sorry's. I think it will not be too hard.</p>



<a name="297186609"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/303200-sphere%20eversion/topic/Rotation%20around%20a%20vector%20by%20an%20angle/near/297186609" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="https://leanprover-community.github.io/archive/stream/303200-sphere-eversion/topic/Rotation.20around.20a.20vector.20by.20an.20angle.html#297186609">(Sep 05 2022 at 08:39)</a>:</h4>
<p><span class="user-mention silent" data-user-id="260507">Heather Macbeth</span> <a href="#narrow/stream/303200-sphere-eversion/topic/Rotation.20around.20a.20vector.20by.20an.20angle/near/296764505">said</a>:</p>
<blockquote>
<p>note: everything is type-correct, but because of the exploitation of defeq for fibres of bundles throughout the manifolds library, I'm only about 75% sure that I have written what I mean ...</p>
</blockquote>
<p>This is very normal. I've written a couple of lemma statements that I had to modify during the proof, and even the original definition of 1-jet bundle that Patrick wrote down was wrong (it missed a coordinate change function).</p>
<p>I don't think the solution is to make it harder to write down these non-sensical things, since I'm greatly enjoying the freedom that tangent spaces are definitionally equal to the underlying vector space. It allowsme to write down lemmas like this: <code>mfderiv (I.prod I') I prod.fst x = continuous_linear_map.fst 𝕜 E E'</code>. Sometimes Lean is still confused because it thinks <code>tangent_space</code> is a dependent type, and refused to rewrite subexpressions, which is all very frustrating.<br>
I think your <code>family_twist</code> might be missing a coordinate change function in the condition <code>i_smooth</code>. I'm not sure, since the codomain has trivial coordinate changes, but the domain doesn't...</p>



<a name="297219404"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/303200-sphere%20eversion/topic/Rotation%20around%20a%20vector%20by%20an%20angle/near/297219404" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="https://leanprover-community.github.io/archive/stream/303200-sphere-eversion/topic/Rotation.20around.20a.20vector.20by.20an.20angle.html#297219404">(Sep 05 2022 at 12:34)</a>:</h4>
<p>You had the correct formulation of <code>family_twist</code> (there was a coordinate change that showed up in the proof, but that was exactly the coordinate change needed to use the fact that <code>s</code> is smooth).</p>



<a name="297219449"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/303200-sphere%20eversion/topic/Rotation%20around%20a%20vector%20by%20an%20angle/near/297219449" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="https://leanprover-community.github.io/archive/stream/303200-sphere-eversion/topic/Rotation.20around.20a.20vector.20by.20an.20angle.html#297219449">(Sep 05 2022 at 12:34)</a>:</h4>
<p>I proved all three sorry's. The file <code>twist_one_jet_sec</code> is now <code>sorry</code>-free.</p>



<a name="297219528"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/303200-sphere%20eversion/topic/Rotation%20around%20a%20vector%20by%20an%20angle/near/297219528" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="https://leanprover-community.github.io/archive/stream/303200-sphere-eversion/topic/Rotation.20around.20a.20vector.20by.20an.20angle.html#297219528">(Sep 05 2022 at 12:35)</a>:</h4>
<p>I pushed your and my commits to <code>master</code>.</p>



<a name="297223921"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/303200-sphere%20eversion/topic/Rotation%20around%20a%20vector%20by%20an%20angle/near/297223921" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/303200-sphere-eversion/topic/Rotation.20around.20a.20vector.20by.20an.20angle.html#297223921">(Sep 05 2022 at 13:07)</a>:</h4>
<p>What is the current status of the formal sphere eversion then?</p>



<a name="297224123"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/303200-sphere%20eversion/topic/Rotation%20around%20a%20vector%20by%20an%20angle/near/297224123" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/303200-sphere-eversion/topic/Rotation.20around.20a.20vector.20by.20an.20angle.html#297224123">(Sep 05 2022 at 13:08)</a>:</h4>
<p>It seems that right now it is holonomic only at time 0 and 1, which isn't quite enough, but this can easily (on paper) be arranged after the fact, simply precomposing it by a time cutoff function).</p>



<a name="297224261"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/303200-sphere%20eversion/topic/Rotation%20around%20a%20vector%20by%20an%20angle/near/297224261" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/303200-sphere-eversion/topic/Rotation.20around.20a.20vector.20by.20an.20angle.html#297224261">(Sep 05 2022 at 13:09)</a>:</h4>
<p>I mean we need to prove <a href="https://github.com/leanprover-community/sphere-eversion/blob/master/src/global/immersion.lean#L195-L196">this lemma</a> which doesn't seem to hold with the current definition.</p>



<a name="297246427"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/303200-sphere%20eversion/topic/Rotation%20around%20a%20vector%20by%20an%20angle/near/297246427" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="https://leanprover-community.github.io/archive/stream/303200-sphere-eversion/topic/Rotation.20around.20a.20vector.20by.20an.20angle.html#297246427">(Sep 05 2022 at 15:44)</a>:</h4>
<p>I hope that Heather can do the remaining part. <br>
From looking over the file, it seems like we still need to<br>
(1) add a cut-off-function, and prove that this is still smooth<br>
(2) prove that rotations are immersions - <del>and I guess that the cut-off function is also an immersion, which probably needs that the derivatives of a rotation at <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>v</mi></mrow><annotation encoding="application/x-tex">v</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span></span></span></span> is orthogonal to <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>v</mi></mrow><annotation encoding="application/x-tex">v</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span></span></span></span></del><br>
(3) prove that the base map is smooth (which is easy)</p>



<a name="297246757"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/303200-sphere%20eversion/topic/Rotation%20around%20a%20vector%20by%20an%20angle/near/297246757" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/303200-sphere-eversion/topic/Rotation.20around.20a.20vector.20by.20an.20angle.html#297246757">(Sep 05 2022 at 15:47)</a>:</h4>
<p>What do you mean by "the cut-off function is also an immersion"?</p>



<a name="297246980"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/303200-sphere%20eversion/topic/Rotation%20around%20a%20vector%20by%20an%20angle/near/297246980" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/303200-sphere-eversion/topic/Rotation.20around.20a.20vector.20by.20an.20angle.html#297246980">(Sep 05 2022 at 15:49)</a>:</h4>
<p>Maybe I should clarify that cut-off thing.</p>



<a name="297247037"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/303200-sphere%20eversion/topic/Rotation%20around%20a%20vector%20by%20an%20angle/near/297247037" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="https://leanprover-community.github.io/archive/stream/303200-sphere-eversion/topic/Rotation.20around.20a.20vector.20by.20an.20angle.html#297247037">(Sep 05 2022 at 15:49)</a>:</h4>
<p>Oh, sorry, I meant "the cut-off function is also injective"</p>



<a name="297247793"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/303200-sphere%20eversion/topic/Rotation%20around%20a%20vector%20by%20an%20angle/near/297247793" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/303200-sphere-eversion/topic/Rotation.20around.20a.20vector.20by.20an.20angle.html#297247793">(Sep 05 2022 at 15:55)</a>:</h4>
<p>A formal eversion is <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>F</mi><mo>:</mo><mi mathvariant="double-struck">R</mi><mo>×</mo><msup><mi mathvariant="double-struck">S</mi><mn>2</mn></msup><mo>→</mo><msup><mi>J</mi><mn>1</mn></msup><mo stretchy="false">(</mo><msup><mi mathvariant="double-struck">S</mi><mn>2</mn></msup><mo separator="true">,</mo><msup><mi mathvariant="double-struck">R</mi><mn>3</mn></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">F : \R \times \mathbb{S}^2 \to J^1(\mathbb{S}^2, \R^3)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7722em;vertical-align:-0.0833em;"></span><span class="mord mathbb">R</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mord"><span class="mord mathbb">S</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.0641em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.09618em;">J</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathbb">S</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathbb">R</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span> where <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>F</mi><mi>t</mi></msub><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>=</mo><mo stretchy="false">(</mo><mi>x</mi><mo separator="true">,</mo><msub><mi>f</mi><mi>t</mi></msub><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo separator="true">,</mo><msub><mi>φ</mi><mi>t</mi></msub><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">F_t(x) = (x, f_t(x), \varphi_t(x))</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:-0.1076em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">φ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">))</span></span></span></span> with each <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>φ</mi><mi>t</mi></msub><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>:</mo><msub><mi>T</mi><mi>x</mi></msub><msup><mi mathvariant="double-struck">S</mi><mn>2</mn></msup><mo>→</mo><msub><mi>T</mi><mrow><msub><mi>f</mi><mi>t</mi></msub><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow></msub><msup><mi mathvariant="double-struck">R</mi><mn>3</mn></msup></mrow><annotation encoding="application/x-tex">\varphi_t(x) : T_x\mathbb{S}^2 \to T_{f_t(x)}\R^3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal">φ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.9641em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">x</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathbb">S</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.1693em;vertical-align:-0.3552em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.5198em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2963em;"><span style="top:-2.357em;margin-left:-0.1076em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span><span class="mopen mtight">(</span><span class="mord mathnormal mtight">x</span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.3552em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathbb">R</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span></span></span></span></span></span></span></span> is an injective linear map, for all <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span> <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>f</mi><mn>0</mn></msub><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>=</mo><mi>x</mi></mrow><annotation encoding="application/x-tex">f_0(x) = x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1076em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span> and <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>f</mi><mn>1</mn></msub><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>=</mo><mo>−</mo><mi>x</mi></mrow><annotation encoding="application/x-tex">f_1(x) = -x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1076em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord">−</span><span class="mord mathnormal">x</span></span></span></span> and <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>φ</mi><mi>t</mi></msub><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>=</mo><msub><mi>T</mi><mi>x</mi></msub><msub><mi>f</mi><mi>t</mi></msub></mrow><annotation encoding="application/x-tex">\varphi_t(x) = T_xf_t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal">φ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">x</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:-0.1076em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> when <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>t</mi></mrow><annotation encoding="application/x-tex">t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6151em;"></span><span class="mord mathnormal">t</span></span></span></span> is zero or one. This is what we can do with a nice explicit formula involving rotations. But we want to ensure a slightly stronger last condition, going from "when <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>t</mi></mrow><annotation encoding="application/x-tex">t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6151em;"></span><span class="mord mathnormal">t</span></span></span></span> is zero or one" to "when <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>t</mi></mrow><annotation encoding="application/x-tex">t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6151em;"></span><span class="mord mathnormal">t</span></span></span></span> is close to zero or one". Given a formal sphere eversion <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>F</mi></mrow><annotation encoding="application/x-tex">F</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span></span></span></span> we can get the stronger version by setting <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>F</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup><mo stretchy="false">(</mo><mi>t</mi><mo separator="true">,</mo><mi>x</mi><mo stretchy="false">)</mo><mo>=</mo><mi>F</mi><mo stretchy="false">(</mo><mi>ρ</mi><mo stretchy="false">(</mo><mi>t</mi><mo stretchy="false">)</mo><mo separator="true">,</mo><mi>x</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">F&#x27;(t, x) = F(\rho(t), x)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0019em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7519em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">t</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mopen">(</span><span class="mord mathnormal">ρ</span><span class="mopen">(</span><span class="mord mathnormal">t</span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">x</span><span class="mclose">)</span></span></span></span> where <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>ρ</mi><mo>:</mo><mi mathvariant="double-struck">R</mi><mo>→</mo><mi mathvariant="double-struck">R</mi></mrow><annotation encoding="application/x-tex">\rho : \R \to \R</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">ρ</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6889em;"></span><span class="mord mathbb">R</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6889em;"></span><span class="mord mathbb">R</span></span></span></span> is a smooth non-decreasing function which equals zero on a neighborhood of zero and one on a neighborhood of one.</p>



<a name="297248137"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/303200-sphere%20eversion/topic/Rotation%20around%20a%20vector%20by%20an%20angle/near/297248137" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="https://leanprover-community.github.io/archive/stream/303200-sphere-eversion/topic/Rotation.20around.20a.20vector.20by.20an.20angle.html#297248137">(Sep 05 2022 at 15:57)</a>:</h4>
<p>Ah, I see. That makes that part immediate, indeed.</p>



<a name="297248178"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/303200-sphere%20eversion/topic/Rotation%20around%20a%20vector%20by%20an%20angle/near/297248178" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/303200-sphere-eversion/topic/Rotation.20around.20a.20vector.20by.20an.20angle.html#297248178">(Sep 05 2022 at 15:57)</a>:</h4>
<p>This <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>ρ</mi></mrow><annotation encoding="application/x-tex">\rho</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">ρ</span></span></span></span> is what I call the cutoff function.</p>



<a name="297248220"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/303200-sphere%20eversion/topic/Rotation%20around%20a%20vector%20by%20an%20angle/near/297248220" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/303200-sphere-eversion/topic/Rotation.20around.20a.20vector.20by.20an.20angle.html#297248220">(Sep 05 2022 at 15:57)</a>:</h4>
<p>There is no injectivity condition on <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>ρ</mi></mrow><annotation encoding="application/x-tex">\rho</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">ρ</span></span></span></span></p>



<a name="297248500"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/303200-sphere%20eversion/topic/Rotation%20around%20a%20vector%20by%20an%20angle/near/297248500" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="https://leanprover-community.github.io/archive/stream/303200-sphere-eversion/topic/Rotation.20around.20a.20vector.20by.20an.20angle.html#297248500">(Sep 05 2022 at 15:59)</a>:</h4>
<p>I indeed had a different construction in mind (a smooth transition between <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>T</mi><mi>x</mi></msub><msub><mi>f</mi><mi>t</mi></msub></mrow><annotation encoding="application/x-tex">T_xf_t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">x</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:-0.1076em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> and rotations). Sorry for the confusion.</p>



<a name="297265140"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/303200-sphere%20eversion/topic/Rotation%20around%20a%20vector%20by%20an%20angle/near/297265140" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/303200-sphere-eversion/topic/Rotation.20around.20a.20vector.20by.20an.20angle.html#297265140">(Sep 05 2022 at 18:32)</a>:</h4>
<p><span class="user-mention" data-user-id="111080">@Floris van Doorn</span> Awesome!  Thanks!  And I am gratified to hear that I stated the sorries right :)</p>
<p>I'll take a stab now at proving it's a formal immersion.  Moment of truth ...</p>



<a name="297323151"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/303200-sphere%20eversion/topic/Rotation%20around%20a%20vector%20by%20an%20angle/near/297323151" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/303200-sphere-eversion/topic/Rotation.20around.20a.20vector.20by.20an.20angle.html#297323151">(Sep 06 2022 at 08:20)</a>:</h4>
<p>OK, done!  I proved that the construction:</p>
<ul>
<li>gives a formal immersion at each <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>t</mi><mo>∈</mo><mi mathvariant="double-struck">R</mi></mrow><annotation encoding="application/x-tex">t\in\mathbb{R}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6542em;vertical-align:-0.0391em;"></span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6889em;"></span><span class="mord mathbb">R</span></span></span></span></li>
<li>is holonomic at 0 and 1</li>
</ul>



<a name="297323708"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/303200-sphere%20eversion/topic/Rotation%20around%20a%20vector%20by%20an%20angle/near/297323708" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/303200-sphere-eversion/topic/Rotation.20around.20a.20vector.20by.20an.20angle.html#297323708">(Sep 06 2022 at 08:24)</a>:</h4>
<p>This is modulo some theory which ought to be in mathlib, which I've sorried for now:</p>
<ol>
<li><a href="https://github.com/leanprover-community/sphere-eversion/blob/master/src/to_mathlib/geometry/manifold/sphere.lean">the tangent space of the sphere considered in the ambient space</a></li>
<li><a href="https://github.com/leanprover-community/sphere-eversion/blob/master/src/to_mathlib/analysis/inner_product_space.lean">interaction of orientations and inner products</a></li>
<li><a href="https://github.com/leanprover-community/sphere-eversion/blob/master/src/to_mathlib/linear_algebra/finrank.lean">finrank lemmas</a></li>
</ol>



<a name="297323872"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/303200-sphere%20eversion/topic/Rotation%20around%20a%20vector%20by%20an%20angle/near/297323872" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/303200-sphere-eversion/topic/Rotation.20around.20a.20vector.20by.20an.20angle.html#297323872">(Sep 06 2022 at 08:25)</a>:</h4>
<p>I also didn't implement the <a href="#narrow/stream/303200-sphere-eversion/topic/Rotation.20around.20a.20vector.20by.20an.20angle/near/297247793">"fiddle with the endpoints" argument</a>.</p>



<a name="297489919"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/303200-sphere%20eversion/topic/Rotation%20around%20a%20vector%20by%20an%20angle/near/297489919" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/303200-sphere-eversion/topic/Rotation.20around.20a.20vector.20by.20an.20angle.html#297489919">(Sep 06 2022 at 21:29)</a>:</h4>
<p><span class="user-mention silent" data-user-id="260507">Heather Macbeth</span> <a href="#narrow/stream/303200-sphere-eversion/topic/Rotation.20around.20a.20vector.20by.20an.20angle/near/297323708">said</a>:</p>
<blockquote>
<p>This is modulo some theory which ought to be in mathlib, which I've sorried for now:</p>
<ol>
<li><del><a href="https://github.com/leanprover-community/sphere-eversion/blob/master/src/to_mathlib/geometry/manifold/sphere.lean">the tangent space of the sphere considered in the ambient space</a> </del></li>
<li><a href="https://github.com/leanprover-community/sphere-eversion/blob/master/src/to_mathlib/analysis/inner_product_space.lean">interaction of orientations and inner products</a></li>
<li><a href="https://github.com/leanprover-community/sphere-eversion/blob/master/src/to_mathlib/linear_algebra/finrank.lean">finrank lemmas</a></li>
</ol>
</blockquote>
<p>Just pushed (1).  This also gives as a corollary that the identity and antipodal embeddings of the sphere are immersions.</p>



<a name="298161886"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/303200-sphere%20eversion/topic/Rotation%20around%20a%20vector%20by%20an%20angle/near/298161886" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/303200-sphere-eversion/topic/Rotation.20around.20a.20vector.20by.20an.20angle.html#298161886">(Sep 10 2022 at 17:25)</a>:</h4>
<p><span class="user-mention silent" data-user-id="260507">Heather Macbeth</span> <a href="#narrow/stream/303200-sphere-eversion/topic/Rotation.20around.20a.20vector.20by.20an.20angle/near/297323708">said</a>:</p>
<blockquote>
<p>This is modulo some theory which ought to be in mathlib, which I've sorried for now:</p>
<ol>
<li><del><a href="https://github.com/leanprover-community/sphere-eversion/blob/master/src/to_mathlib/geometry/manifold/sphere.lean">the tangent space of the sphere considered in the ambient space</a></del></li>
<li><del><a href="https://github.com/leanprover-community/sphere-eversion/blob/master/src/to_mathlib/analysis/inner_product_space.lean">interaction of orientations and inner products</a></del></li>
<li><a href="https://github.com/leanprover-community/sphere-eversion/blob/master/src/to_mathlib/linear_algebra/finrank.lean">finrank lemmas</a></li>
</ol>
</blockquote>
<p>(2) is now done.</p>
<p>I've also extracted explicitly what was previously implicit, that I have built a basis-free construction of the cross product for an oriented real inner product space.  (The rotation by angle <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>t</mi></mrow><annotation encoding="application/x-tex">t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6151em;"></span><span class="mord mathnormal">t</span></span></span></span> about a vector <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>v</mi></mrow><annotation encoding="application/x-tex">v</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span></span></span></span> is realized as the endomorphism exponential of the endomorphism <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>t</mi><mi>v</mi><mo>×</mo><mo>⋅</mo></mrow><annotation encoding="application/x-tex">tv\times \cdot</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6984em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">t</span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.4445em;"></span><span class="mord">⋅</span></span></span></span>.). We should figure out whether this should supersede or coexist with the co-ordinate cross product constructed in<br>
<a href="https://leanprover-community.github.io/mathlib_docs/linear_algebra/cross_product.html">https://leanprover-community.github.io/mathlib_docs/linear_algebra/cross_product.html</a></p>



<a name="298162024"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/303200-sphere%20eversion/topic/Rotation%20around%20a%20vector%20by%20an%20angle/near/298162024" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/303200-sphere-eversion/topic/Rotation.20around.20a.20vector.20by.20an.20angle.html#298162024">(Sep 10 2022 at 17:27)</a>:</h4>
<p>Great, thanks!</p>



<a name="298162217"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/303200-sphere%20eversion/topic/Rotation%20around%20a%20vector%20by%20an%20angle/near/298162217" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/303200-sphere-eversion/topic/Rotation.20around.20a.20vector.20by.20an.20angle.html#298162217">(Sep 10 2022 at 17:29)</a>:</h4>
<p>Just wondering, did you construct the cross product the same way we define the dimension (namely, use <code>trunc</code> on bases)?</p>



<a name="298196049"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/303200-sphere%20eversion/topic/Rotation%20around%20a%20vector%20by%20an%20angle/near/298196049" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/303200-sphere-eversion/topic/Rotation.20around.20a.20vector.20by.20an.20angle.html#298196049">(Sep 11 2022 at 02:26)</a>:</h4>
<p>I don't know what <code>trunc</code> is.</p>



<a name="298196203"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/303200-sphere%20eversion/topic/Rotation%20around%20a%20vector%20by%20an%20angle/near/298196203" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/303200-sphere-eversion/topic/Rotation.20around.20a.20vector.20by.20an.20angle.html#298196203">(Sep 11 2022 at 02:29)</a>:</h4>
<p>I wrote a canonical definition of the cross-product: let <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>ω</mi></mrow><annotation encoding="application/x-tex">\omega</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">ω</span></span></span></span> be the unique "volume" 3-form compatible with the orientation and inner product; then we define <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>×</mo></mrow><annotation encoding="application/x-tex">\times</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord">×</span></span></span></span> so that for all <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>u</mi></mrow><annotation encoding="application/x-tex">u</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">u</span></span></span></span>, <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>v</mi></mrow><annotation encoding="application/x-tex">v</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span></span></span></span>, <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>w</mi></mrow><annotation encoding="application/x-tex">w</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span></span></span></span> we have <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">⟨</mo><mi>u</mi><mo>×</mo><mi>v</mi><mo separator="true">,</mo><mi>w</mi><mo stretchy="false">⟩</mo><mo>=</mo><mi>ω</mi><mo stretchy="false">(</mo><mi>u</mi><mo separator="true">,</mo><mi>v</mi><mo separator="true">,</mo><mi>w</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\langle u \times v, w\rangle = \omega(u,v,w)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">⟨</span><span class="mord mathnormal">u</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mclose">⟩</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">ω</span><span class="mopen">(</span><span class="mord mathnormal">u</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mclose">)</span></span></span></span>.</p>



<a name="298224966"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/303200-sphere%20eversion/topic/Rotation%20around%20a%20vector%20by%20an%20angle/near/298224966" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/303200-sphere-eversion/topic/Rotation.20around.20a.20vector.20by.20an.20angle.html#298224966">(Sep 11 2022 at 09:05)</a>:</h4>
<p><code>trunc</code> is a way of saying "we define this by making an arbitrary choice (eg picking a basis and counting it) and then proving the answer is independent of the choice", without actually applying the axiom of choice to pick a basis. It's the quotient of a type by the "always true" equivalence relation, so assuming the original type is nonempty it's got one element, and you can define maps from it to other types (like nat) using <code>quotient.lift</code>. So I think Yael's question mathematically is "did you pick a basis and if so then how exactly?" and your answer is "I didn't need to pick a basis at all!"</p>



<a name="298256884"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/303200-sphere%20eversion/topic/Rotation%20around%20a%20vector%20by%20an%20angle/near/298256884" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/303200-sphere-eversion/topic/Rotation.20around.20a.20vector.20by.20an.20angle.html#298256884">(Sep 11 2022 at 14:27)</a>:</h4>
<p><span class="user-mention silent" data-user-id="260507">Heather Macbeth</span> <a href="#narrow/stream/303200-sphere-eversion/topic/Rotation.20around.20a.20vector.20by.20an.20angle/near/297323708">said</a>:</p>
<blockquote>
<p>This is modulo some theory which ought to be in mathlib, which I've sorried for now:</p>
<ol>
<li><del><a href="https://github.com/leanprover-community/sphere-eversion/blob/master/src/to_mathlib/geometry/manifold/sphere.lean">the tangent space of the sphere considered in the ambient space</a></del></li>
<li><del><a href="https://github.com/leanprover-community/sphere-eversion/blob/master/src/to_mathlib/analysis/inner_product_space.lean">interaction of orientations and inner products</a></del></li>
<li><del><a href="https://github.com/leanprover-community/sphere-eversion/blob/master/src/to_mathlib/linear_algebra/finrank.lean">finrank lemmas</a></del></li>
</ol>
</blockquote>
<p>The homotopy of formal immersions and its <code>to_mathlib</code> prerequisites are now finished.  I found some lemmas to replace (3) in mathlib already.</p>



<a name="298263470"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/303200-sphere%20eversion/topic/Rotation%20around%20a%20vector%20by%20an%20angle/near/298263470" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/303200-sphere-eversion/topic/Rotation.20around.20a.20vector.20by.20an.20angle.html#298263470">(Sep 11 2022 at 15:36)</a>:</h4>
<p>Thank you very much for all this rotation work Heather!</p>



<a name="298313012"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/303200-sphere%20eversion/topic/Rotation%20around%20a%20vector%20by%20an%20angle/near/298313012" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/303200-sphere-eversion/topic/Rotation.20around.20a.20vector.20by.20an.20angle.html#298313012">(Sep 12 2022 at 05:00)</a>:</h4>
<p>I opened <a href="https://github.com/leanprover-community/mathlib/pull/16466">#16466</a>, <a href="https://github.com/leanprover-community/mathlib/pull/16474">#16474</a>, <a href="https://github.com/leanprover-community/mathlib/pull/16475">#16475</a>, <a href="https://github.com/leanprover-community/mathlib/pull/16476">#16476</a>, <a href="https://github.com/leanprover-community/mathlib/pull/16477">#16477</a>, <a href="https://github.com/leanprover-community/mathlib/pull/16478">#16478</a>, <a href="https://github.com/leanprover-community/mathlib/pull/16479">#16479</a>; more to come!</p>



<a name="298335572"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/303200-sphere%20eversion/topic/Rotation%20around%20a%20vector%20by%20an%20angle/near/298335572" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/303200-sphere-eversion/topic/Rotation.20around.20a.20vector.20by.20an.20angle.html#298335572">(Sep 12 2022 at 08:32)</a>:</h4>
<p>It's great to also take the trouble to immediately open mathlib PRs</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>